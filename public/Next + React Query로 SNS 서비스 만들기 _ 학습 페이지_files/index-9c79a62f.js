var kD=Object.defineProperty;var $D=(sn,ln,cn)=>ln in sn?kD(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn;var Tl=(sn,ln,cn)=>($D(sn,typeof ln!="symbol"?ln+"":ln,cn),cn);function _mergeNamespaces(sn,ln){for(var cn=0;cn<ln.length;cn++){const dn=ln[cn];if(typeof dn!="string"&&!Array.isArray(dn)){for(const pn in dn)if(pn!=="default"&&!(pn in sn)){const vn=Object.getOwnPropertyDescriptor(dn,pn);vn&&Object.defineProperty(sn,pn,vn.get?vn:{enumerable:!0,get:()=>dn[pn]})}}}return Object.freeze(Object.defineProperty(sn,Symbol.toStringTag,{value:"Module"}))}(function(){const ln=document.createElement("link").relList;if(ln&&ln.supports&&ln.supports("modulepreload"))return;for(const pn of document.querySelectorAll('link[rel="modulepreload"]'))dn(pn);new MutationObserver(pn=>{for(const vn of pn)if(vn.type==="childList")for(const kn of vn.addedNodes)kn.tagName==="LINK"&&kn.rel==="modulepreload"&&dn(kn)}).observe(document,{childList:!0,subtree:!0});function cn(pn){const vn={};return pn.integrity&&(vn.integrity=pn.integrity),pn.referrerPolicy&&(vn.referrerPolicy=pn.referrerPolicy),pn.crossOrigin==="use-credentials"?vn.credentials="include":pn.crossOrigin==="anonymous"?vn.credentials="omit":vn.credentials="same-origin",vn}function dn(pn){if(pn.ep)return;pn.ep=!0;const vn=cn(pn);fetch(pn.href,vn)}})();var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(sn){return sn&&sn.__esModule&&Object.prototype.hasOwnProperty.call(sn,"default")?sn.default:sn}function getAugmentedNamespace(sn){if(sn.__esModule)return sn;var ln=sn.default;if(typeof ln=="function"){var cn=function dn(){if(this instanceof dn){var pn=[null];pn.push.apply(pn,arguments);var vn=Function.bind.apply(ln,pn);return new vn}return ln.apply(this,arguments)};cn.prototype=ln.prototype}else cn={};return Object.defineProperty(cn,"__esModule",{value:!0}),Object.keys(sn).forEach(function(dn){var pn=Object.getOwnPropertyDescriptor(sn,dn);Object.defineProperty(cn,dn,pn.get?pn:{enumerable:!0,get:function(){return sn[dn]}})}),cn}var react={exports:{}},react_production_min={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var getOwnPropertySymbols=Object.getOwnPropertySymbols,hasOwnProperty$j=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;function toObject$n(sn){if(sn==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(sn)}function shouldUseNative(){try{if(!Object.assign)return!1;var sn=new String("abc");if(sn[5]="de",Object.getOwnPropertyNames(sn)[0]==="5")return!1;for(var ln={},cn=0;cn<10;cn++)ln["_"+String.fromCharCode(cn)]=cn;var dn=Object.getOwnPropertyNames(ln).map(function(vn){return ln[vn]});if(dn.join("")!=="0123456789")return!1;var pn={};return"abcdefghijklmnopqrst".split("").forEach(function(vn){pn[vn]=vn}),Object.keys(Object.assign({},pn)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var objectAssign=shouldUseNative()?Object.assign:function(sn,ln){for(var cn,dn=toObject$n(sn),pn,vn=1;vn<arguments.length;vn++){cn=Object(arguments[vn]);for(var kn in cn)hasOwnProperty$j.call(cn,kn)&&(dn[kn]=cn[kn]);if(getOwnPropertySymbols){pn=getOwnPropertySymbols(cn);for(var Sn=0;Sn<pn.length;Sn++)propIsEnumerable.call(cn,pn[Sn])&&(dn[pn[Sn]]=cn[pn[Sn]])}}return dn};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$9=objectAssign,n$d=60103,p$b=60106;react_production_min.Fragment=60107;react_production_min.StrictMode=60108;react_production_min.Profiler=60114;var q$b=60109,r$a=60110,t$9=60112;react_production_min.Suspense=60113;var u$b=60115,v$b=60116;if(typeof Symbol=="function"&&Symbol.for){var w$d=Symbol.for;n$d=w$d("react.element"),p$b=w$d("react.portal"),react_production_min.Fragment=w$d("react.fragment"),react_production_min.StrictMode=w$d("react.strict_mode"),react_production_min.Profiler=w$d("react.profiler"),q$b=w$d("react.provider"),r$a=w$d("react.context"),t$9=w$d("react.forward_ref"),react_production_min.Suspense=w$d("react.suspense"),u$b=w$d("react.memo"),v$b=w$d("react.lazy")}var x$g=typeof Symbol=="function"&&Symbol.iterator;function y$e(sn){return sn===null||typeof sn!="object"?null:(sn=x$g&&sn[x$g]||sn["@@iterator"],typeof sn=="function"?sn:null)}function z$a(sn){for(var ln="https://reactjs.org/docs/error-decoder.html?invariant="+sn,cn=1;cn<arguments.length;cn++)ln+="&args[]="+encodeURIComponent(arguments[cn]);return"Minified React error #"+sn+"; visit "+ln+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var A$c={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},B$c={};function C$a(sn,ln,cn){this.props=sn,this.context=ln,this.refs=B$c,this.updater=cn||A$c}C$a.prototype.isReactComponent={};C$a.prototype.setState=function(sn,ln){if(typeof sn!="object"&&typeof sn!="function"&&sn!=null)throw Error(z$a(85));this.updater.enqueueSetState(this,sn,ln,"setState")};C$a.prototype.forceUpdate=function(sn){this.updater.enqueueForceUpdate(this,sn,"forceUpdate")};function D$c(){}D$c.prototype=C$a.prototype;function E$d(sn,ln,cn){this.props=sn,this.context=ln,this.refs=B$c,this.updater=cn||A$c}var F$c=E$d.prototype=new D$c;F$c.constructor=E$d;l$9(F$c,C$a.prototype);F$c.isPureReactComponent=!0;var G$a={current:null},H$c=Object.prototype.hasOwnProperty,I$d={key:!0,ref:!0,__self:!0,__source:!0};function J$6(sn,ln,cn){var dn,pn={},vn=null,kn=null;if(ln!=null)for(dn in ln.ref!==void 0&&(kn=ln.ref),ln.key!==void 0&&(vn=""+ln.key),ln)H$c.call(ln,dn)&&!I$d.hasOwnProperty(dn)&&(pn[dn]=ln[dn]);var Sn=arguments.length-2;if(Sn===1)pn.children=cn;else if(1<Sn){for(var wn=Array(Sn),Pn=0;Pn<Sn;Pn++)wn[Pn]=arguments[Pn+2];pn.children=wn}if(sn&&sn.defaultProps)for(dn in Sn=sn.defaultProps,Sn)pn[dn]===void 0&&(pn[dn]=Sn[dn]);return{$$typeof:n$d,type:sn,key:vn,ref:kn,props:pn,_owner:G$a.current}}function K$7(sn,ln){return{$$typeof:n$d,type:sn.type,key:ln,ref:sn.ref,props:sn.props,_owner:sn._owner}}function L$a(sn){return typeof sn=="object"&&sn!==null&&sn.$$typeof===n$d}function escape$1(sn){var ln={"=":"=0",":":"=2"};return"$"+sn.replace(/[=:]/g,function(cn){return ln[cn]})}var M$a=/\/+/g;function N$a(sn,ln){return typeof sn=="object"&&sn!==null&&sn.key!=null?escape$1(""+sn.key):ln.toString(36)}function O$b(sn,ln,cn,dn,pn){var vn=typeof sn;(vn==="undefined"||vn==="boolean")&&(sn=null);var kn=!1;if(sn===null)kn=!0;else switch(vn){case"string":case"number":kn=!0;break;case"object":switch(sn.$$typeof){case n$d:case p$b:kn=!0}}if(kn)return kn=sn,pn=pn(kn),sn=dn===""?"."+N$a(kn,0):dn,Array.isArray(pn)?(cn="",sn!=null&&(cn=sn.replace(M$a,"$&/")+"/"),O$b(pn,ln,cn,"",function(Pn){return Pn})):pn!=null&&(L$a(pn)&&(pn=K$7(pn,cn+(!pn.key||kn&&kn.key===pn.key?"":(""+pn.key).replace(M$a,"$&/")+"/")+sn)),ln.push(pn)),1;if(kn=0,dn=dn===""?".":dn+":",Array.isArray(sn))for(var Sn=0;Sn<sn.length;Sn++){vn=sn[Sn];var wn=dn+N$a(vn,Sn);kn+=O$b(vn,ln,cn,wn,pn)}else if(wn=y$e(sn),typeof wn=="function")for(sn=wn.call(sn),Sn=0;!(vn=sn.next()).done;)vn=vn.value,wn=dn+N$a(vn,Sn++),kn+=O$b(vn,ln,cn,wn,pn);else if(vn==="object")throw ln=""+sn,Error(z$a(31,ln==="[object Object]"?"object with keys {"+Object.keys(sn).join(", ")+"}":ln));return kn}function P$9(sn,ln,cn){if(sn==null)return sn;var dn=[],pn=0;return O$b(sn,dn,"","",function(vn){return ln.call(cn,vn,pn++)}),dn}function Q$6(sn){if(sn._status===-1){var ln=sn._result;ln=ln(),sn._status=0,sn._result=ln,ln.then(function(cn){sn._status===0&&(cn=cn.default,sn._status=1,sn._result=cn)},function(cn){sn._status===0&&(sn._status=2,sn._result=cn)})}if(sn._status===1)return sn._result;throw sn._result}var R$9={current:null};function S$a(){var sn=R$9.current;if(sn===null)throw Error(z$a(321));return sn}var T$c={ReactCurrentDispatcher:R$9,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:G$a,IsSomeRendererActing:{current:!1},assign:l$9};react_production_min.Children={map:P$9,forEach:function(sn,ln,cn){P$9(sn,function(){ln.apply(this,arguments)},cn)},count:function(sn){var ln=0;return P$9(sn,function(){ln++}),ln},toArray:function(sn){return P$9(sn,function(ln){return ln})||[]},only:function(sn){if(!L$a(sn))throw Error(z$a(143));return sn}};react_production_min.Component=C$a;react_production_min.PureComponent=E$d;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=T$c;react_production_min.cloneElement=function(sn,ln,cn){if(sn==null)throw Error(z$a(267,sn));var dn=l$9({},sn.props),pn=sn.key,vn=sn.ref,kn=sn._owner;if(ln!=null){if(ln.ref!==void 0&&(vn=ln.ref,kn=G$a.current),ln.key!==void 0&&(pn=""+ln.key),sn.type&&sn.type.defaultProps)var Sn=sn.type.defaultProps;for(wn in ln)H$c.call(ln,wn)&&!I$d.hasOwnProperty(wn)&&(dn[wn]=ln[wn]===void 0&&Sn!==void 0?Sn[wn]:ln[wn])}var wn=arguments.length-2;if(wn===1)dn.children=cn;else if(1<wn){Sn=Array(wn);for(var Pn=0;Pn<wn;Pn++)Sn[Pn]=arguments[Pn+2];dn.children=Sn}return{$$typeof:n$d,type:sn.type,key:pn,ref:vn,props:dn,_owner:kn}};react_production_min.createContext=function(sn,ln){return ln===void 0&&(ln=null),sn={$$typeof:r$a,_calculateChangedBits:ln,_currentValue:sn,_currentValue2:sn,_threadCount:0,Provider:null,Consumer:null},sn.Provider={$$typeof:q$b,_context:sn},sn.Consumer=sn};react_production_min.createElement=J$6;react_production_min.createFactory=function(sn){var ln=J$6.bind(null,sn);return ln.type=sn,ln};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(sn){return{$$typeof:t$9,render:sn}};react_production_min.isValidElement=L$a;react_production_min.lazy=function(sn){return{$$typeof:v$b,_payload:{_status:-1,_result:sn},_init:Q$6}};react_production_min.memo=function(sn,ln){return{$$typeof:u$b,type:sn,compare:ln===void 0?null:ln}};react_production_min.useCallback=function(sn,ln){return S$a().useCallback(sn,ln)};react_production_min.useContext=function(sn,ln){return S$a().useContext(sn,ln)};react_production_min.useDebugValue=function(){};react_production_min.useEffect=function(sn,ln){return S$a().useEffect(sn,ln)};react_production_min.useImperativeHandle=function(sn,ln,cn){return S$a().useImperativeHandle(sn,ln,cn)};react_production_min.useLayoutEffect=function(sn,ln){return S$a().useLayoutEffect(sn,ln)};react_production_min.useMemo=function(sn,ln){return S$a().useMemo(sn,ln)};react_production_min.useReducer=function(sn,ln,cn){return S$a().useReducer(sn,ln,cn)};react_production_min.useRef=function(sn){return S$a().useRef(sn)};react_production_min.useState=function(sn){return S$a().useState(sn)};react_production_min.version="17.0.2";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);function sheetForTag$1(sn){if(sn.sheet)return sn.sheet;for(var ln=0;ln<document.styleSheets.length;ln++)if(document.styleSheets[ln].ownerNode===sn)return document.styleSheets[ln]}function createStyleElement$1(sn){var ln=document.createElement("style");return ln.setAttribute("data-emotion",sn.key),sn.nonce!==void 0&&ln.setAttribute("nonce",sn.nonce),ln.appendChild(document.createTextNode("")),ln.setAttribute("data-s",""),ln}var StyleSheet$1=function(){function sn(cn){var dn=this;this._insertTag=function(pn){var vn;dn.tags.length===0?dn.insertionPoint?vn=dn.insertionPoint.nextSibling:dn.prepend?vn=dn.container.firstChild:vn=dn.before:vn=dn.tags[dn.tags.length-1].nextSibling,dn.container.insertBefore(pn,vn),dn.tags.push(pn)},this.isSpeedy=cn.speedy===void 0?!0:cn.speedy,this.tags=[],this.ctr=0,this.nonce=cn.nonce,this.key=cn.key,this.container=cn.container,this.prepend=cn.prepend,this.insertionPoint=cn.insertionPoint,this.before=null}var ln=sn.prototype;return ln.hydrate=function(dn){dn.forEach(this._insertTag)},ln.insert=function(dn){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(createStyleElement$1(this));var pn=this.tags[this.tags.length-1];if(this.isSpeedy){var vn=sheetForTag$1(pn);try{vn.insertRule(dn,vn.cssRules.length)}catch{}}else pn.appendChild(document.createTextNode(dn));this.ctr++},ln.flush=function(){this.tags.forEach(function(dn){return dn.parentNode&&dn.parentNode.removeChild(dn)}),this.tags=[],this.ctr=0},sn}(),MS$1="-ms-",MOZ$1="-moz-",WEBKIT$2="-webkit-",COMMENT$1="comm",RULESET$1="rule",DECLARATION$1="decl",IMPORT$1="@import",KEYFRAMES$1="@keyframes",abs$1=Math.abs,from$2=String.fromCharCode,assign$3=Object.assign;function hash$1(sn,ln){return charat$1(sn,0)^45?(((ln<<2^charat$1(sn,0))<<2^charat$1(sn,1))<<2^charat$1(sn,2))<<2^charat$1(sn,3):0}function trim$1(sn){return sn.trim()}function match$2(sn,ln){return(sn=ln.exec(sn))?sn[0]:sn}function replace$3(sn,ln,cn){return sn.replace(ln,cn)}function indexof$1(sn,ln){return sn.indexOf(ln)}function charat$1(sn,ln){return sn.charCodeAt(ln)|0}function substr$1(sn,ln,cn){return sn.slice(ln,cn)}function strlen$1(sn){return sn.length}function sizeof$1(sn){return sn.length}function append$1(sn,ln){return ln.push(sn),sn}function combine$2(sn,ln){return sn.map(ln).join("")}var line$1=1,column$1=1,length$1=0,position$1=0,character$1=0,characters$1="";function node$2(sn,ln,cn,dn,pn,vn,kn){return{value:sn,root:ln,parent:cn,type:dn,props:pn,children:vn,line:line$1,column:column$1,length:kn,return:""}}function copy$1(sn,ln){return assign$3(node$2("",null,null,"",null,null,0),sn,{length:-sn.length},ln)}function char$1(){return character$1}function prev$1(){return character$1=position$1>0?charat$1(characters$1,--position$1):0,column$1--,character$1===10&&(column$1=1,line$1--),character$1}function next$2(){return character$1=position$1<length$1?charat$1(characters$1,position$1++):0,column$1++,character$1===10&&(column$1=1,line$1++),character$1}function peek$1(){return charat$1(characters$1,position$1)}function caret$1(){return position$1}function slice$5(sn,ln){return substr$1(characters$1,sn,ln)}function token$2(sn){switch(sn){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc$1(sn){return line$1=column$1=1,length$1=strlen$1(characters$1=sn),position$1=0,[]}function dealloc$1(sn){return characters$1="",sn}function delimit$1(sn){return trim$1(slice$5(position$1-1,delimiter$1(sn===91?sn+2:sn===40?sn+1:sn)))}function whitespace$1(sn){for(;(character$1=peek$1())&&character$1<33;)next$2();return token$2(sn)>2||token$2(character$1)>3?"":" "}function escaping$1(sn,ln){for(;--ln&&next$2()&&!(character$1<48||character$1>102||character$1>57&&character$1<65||character$1>70&&character$1<97););return slice$5(sn,caret$1()+(ln<6&&peek$1()==32&&next$2()==32))}function delimiter$1(sn){for(;next$2();)switch(character$1){case sn:return position$1;case 34:case 39:sn!==34&&sn!==39&&delimiter$1(character$1);break;case 40:sn===41&&delimiter$1(sn);break;case 92:next$2();break}return position$1}function commenter$1(sn,ln){for(;next$2()&&sn+character$1!==47+10;)if(sn+character$1===42+42&&peek$1()===47)break;return"/*"+slice$5(ln,position$1-1)+"*"+from$2(sn===47?sn:next$2())}function identifier$1(sn){for(;!token$2(peek$1());)next$2();return slice$5(sn,position$1)}function compile$1(sn){return dealloc$1(parse$4("",null,null,null,[""],sn=alloc$1(sn),0,[0],sn))}function parse$4(sn,ln,cn,dn,pn,vn,kn,Sn,wn){for(var Pn=0,Nn=0,Ln=kn,Fn=0,zn=0,Dn=0,Kn=1,qn=1,Zn=1,Yn=0,Jn="",rs=pn,ss=vn,as=dn,ds=Jn;qn;)switch(Dn=Yn,Yn=next$2()){case 40:if(Dn!=108&&charat$1(ds,Ln-1)==58){indexof$1(ds+=replace$3(delimit$1(Yn),"&","&\f"),"&\f")!=-1&&(Zn=-1);break}case 34:case 39:case 91:ds+=delimit$1(Yn);break;case 9:case 10:case 13:case 32:ds+=whitespace$1(Dn);break;case 92:ds+=escaping$1(caret$1()-1,7);continue;case 47:switch(peek$1()){case 42:case 47:append$1(comment$1(commenter$1(next$2(),caret$1()),ln,cn),wn);break;default:ds+="/"}break;case 123*Kn:Sn[Pn++]=strlen$1(ds)*Zn;case 125*Kn:case 59:case 0:switch(Yn){case 0:case 125:qn=0;case 59+Nn:zn>0&&strlen$1(ds)-Ln&&append$1(zn>32?declaration$1(ds+";",dn,cn,Ln-1):declaration$1(replace$3(ds," ","")+";",dn,cn,Ln-2),wn);break;case 59:ds+=";";default:if(append$1(as=ruleset$1(ds,ln,cn,Pn,Nn,pn,Sn,Jn,rs=[],ss=[],Ln),vn),Yn===123)if(Nn===0)parse$4(ds,ln,as,as,rs,vn,Ln,Sn,ss);else switch(Fn===99&&charat$1(ds,3)===110?100:Fn){case 100:case 109:case 115:parse$4(sn,as,as,dn&&append$1(ruleset$1(sn,as,as,0,0,pn,Sn,Jn,pn,rs=[],Ln),ss),pn,ss,Ln,Sn,dn?rs:ss);break;default:parse$4(ds,as,as,as,[""],ss,0,Sn,ss)}}Pn=Nn=zn=0,Kn=Zn=1,Jn=ds="",Ln=kn;break;case 58:Ln=1+strlen$1(ds),zn=Dn;default:if(Kn<1){if(Yn==123)--Kn;else if(Yn==125&&Kn++==0&&prev$1()==125)continue}switch(ds+=from$2(Yn),Yn*Kn){case 38:Zn=Nn>0?1:(ds+="\f",-1);break;case 44:Sn[Pn++]=(strlen$1(ds)-1)*Zn,Zn=1;break;case 64:peek$1()===45&&(ds+=delimit$1(next$2())),Fn=peek$1(),Nn=Ln=strlen$1(Jn=ds+=identifier$1(caret$1())),Yn++;break;case 45:Dn===45&&strlen$1(ds)==2&&(Kn=0)}}return vn}function ruleset$1(sn,ln,cn,dn,pn,vn,kn,Sn,wn,Pn,Nn){for(var Ln=pn-1,Fn=pn===0?vn:[""],zn=sizeof$1(Fn),Dn=0,Kn=0,qn=0;Dn<dn;++Dn)for(var Zn=0,Yn=substr$1(sn,Ln+1,Ln=abs$1(Kn=kn[Dn])),Jn=sn;Zn<zn;++Zn)(Jn=trim$1(Kn>0?Fn[Zn]+" "+Yn:replace$3(Yn,/&\f/g,Fn[Zn])))&&(wn[qn++]=Jn);return node$2(sn,ln,cn,pn===0?RULESET$1:Sn,wn,Pn,Nn)}function comment$1(sn,ln,cn){return node$2(sn,ln,cn,COMMENT$1,from$2(char$1()),substr$1(sn,2,-2),0)}function declaration$1(sn,ln,cn,dn){return node$2(sn,ln,cn,DECLARATION$1,substr$1(sn,0,dn),substr$1(sn,dn+1,-1),dn)}function serialize$1(sn,ln){for(var cn="",dn=sizeof$1(sn),pn=0;pn<dn;pn++)cn+=ln(sn[pn],pn,sn,ln)||"";return cn}function stringify$2(sn,ln,cn,dn){switch(sn.type){case IMPORT$1:case DECLARATION$1:return sn.return=sn.return||sn.value;case COMMENT$1:return"";case KEYFRAMES$1:return sn.return=sn.value+"{"+serialize$1(sn.children,dn)+"}";case RULESET$1:sn.value=sn.props.join(",")}return strlen$1(cn=serialize$1(sn.children,dn))?sn.return=sn.value+"{"+cn+"}":""}function middleware$1(sn){var ln=sizeof$1(sn);return function(cn,dn,pn,vn){for(var kn="",Sn=0;Sn<ln;Sn++)kn+=sn[Sn](cn,dn,pn,vn)||"";return kn}}function rulesheet$1(sn){return function(ln){ln.root||(ln=ln.return)&&sn(ln)}}var weakMemoize=function(ln){var cn=new WeakMap;return function(dn){if(cn.has(dn))return cn.get(dn);var pn=ln(dn);return cn.set(dn,pn),pn}};function memoize$2(sn){var ln=Object.create(null);return function(cn){return ln[cn]===void 0&&(ln[cn]=sn(cn)),ln[cn]}}var identifierWithPointTracking$1=function(ln,cn,dn){for(var pn=0,vn=0;pn=vn,vn=peek$1(),pn===38&&vn===12&&(cn[dn]=1),!token$2(vn);)next$2();return slice$5(ln,position$1)},toRules$1=function(ln,cn){var dn=-1,pn=44;do switch(token$2(pn)){case 0:pn===38&&peek$1()===12&&(cn[dn]=1),ln[dn]+=identifierWithPointTracking$1(position$1-1,cn,dn);break;case 2:ln[dn]+=delimit$1(pn);break;case 4:if(pn===44){ln[++dn]=peek$1()===58?"&\f":"",cn[dn]=ln[dn].length;break}default:ln[dn]+=from$2(pn)}while(pn=next$2());return ln},getRules$1=function(ln,cn){return dealloc$1(toRules$1(alloc$1(ln),cn))},fixedElements$1=new WeakMap,compat$1=function(ln){if(!(ln.type!=="rule"||!ln.parent||ln.length<1)){for(var cn=ln.value,dn=ln.parent,pn=ln.column===dn.column&&ln.line===dn.line;dn.type!=="rule";)if(dn=dn.parent,!dn)return;if(!(ln.props.length===1&&cn.charCodeAt(0)!==58&&!fixedElements$1.get(dn))&&!pn){fixedElements$1.set(ln,!0);for(var vn=[],kn=getRules$1(cn,vn),Sn=dn.props,wn=0,Pn=0;wn<kn.length;wn++)for(var Nn=0;Nn<Sn.length;Nn++,Pn++)ln.props[Pn]=vn[wn]?kn[wn].replace(/&\f/g,Sn[Nn]):Sn[Nn]+" "+kn[wn]}}},removeLabel$1=function(ln){if(ln.type==="decl"){var cn=ln.value;cn.charCodeAt(0)===108&&cn.charCodeAt(2)===98&&(ln.return="",ln.value="")}};function prefix$1(sn,ln){switch(hash$1(sn,ln)){case 5103:return WEBKIT$2+"print-"+sn+sn;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT$2+sn+sn;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT$2+sn+MOZ$1+sn+MS$1+sn+sn;case 6828:case 4268:return WEBKIT$2+sn+MS$1+sn+sn;case 6165:return WEBKIT$2+sn+MS$1+"flex-"+sn+sn;case 5187:return WEBKIT$2+sn+replace$3(sn,/(\w+).+(:[^]+)/,WEBKIT$2+"box-$1$2"+MS$1+"flex-$1$2")+sn;case 5443:return WEBKIT$2+sn+MS$1+"flex-item-"+replace$3(sn,/flex-|-self/,"")+sn;case 4675:return WEBKIT$2+sn+MS$1+"flex-line-pack"+replace$3(sn,/align-content|flex-|-self/,"")+sn;case 5548:return WEBKIT$2+sn+MS$1+replace$3(sn,"shrink","negative")+sn;case 5292:return WEBKIT$2+sn+MS$1+replace$3(sn,"basis","preferred-size")+sn;case 6060:return WEBKIT$2+"box-"+replace$3(sn,"-grow","")+WEBKIT$2+sn+MS$1+replace$3(sn,"grow","positive")+sn;case 4554:return WEBKIT$2+replace$3(sn,/([^-])(transform)/g,"$1"+WEBKIT$2+"$2")+sn;case 6187:return replace$3(replace$3(replace$3(sn,/(zoom-|grab)/,WEBKIT$2+"$1"),/(image-set)/,WEBKIT$2+"$1"),sn,"")+sn;case 5495:case 3959:return replace$3(sn,/(image-set\([^]*)/,WEBKIT$2+"$1$`$1");case 4968:return replace$3(replace$3(sn,/(.+:)(flex-)?(.*)/,WEBKIT$2+"box-pack:$3"+MS$1+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT$2+sn+sn;case 4095:case 3583:case 4068:case 2532:return replace$3(sn,/(.+)-inline(.+)/,WEBKIT$2+"$1$2")+sn;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen$1(sn)-1-ln>6)switch(charat$1(sn,ln+1)){case 109:if(charat$1(sn,ln+4)!==45)break;case 102:return replace$3(sn,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT$2+"$2-$3$1"+MOZ$1+(charat$1(sn,ln+3)==108?"$3":"$2-$3"))+sn;case 115:return~indexof$1(sn,"stretch")?prefix$1(replace$3(sn,"stretch","fill-available"),ln)+sn:sn}break;case 4949:if(charat$1(sn,ln+1)!==115)break;case 6444:switch(charat$1(sn,strlen$1(sn)-3-(~indexof$1(sn,"!important")&&10))){case 107:return replace$3(sn,":",":"+WEBKIT$2)+sn;case 101:return replace$3(sn,/(.+:)([^;!]+)(;|!.+)?/,"$1"+WEBKIT$2+(charat$1(sn,14)===45?"inline-":"")+"box$3$1"+WEBKIT$2+"$2$3$1"+MS$1+"$2box$3")+sn}break;case 5936:switch(charat$1(sn,ln+11)){case 114:return WEBKIT$2+sn+MS$1+replace$3(sn,/[svh]\w+-[tblr]{2}/,"tb")+sn;case 108:return WEBKIT$2+sn+MS$1+replace$3(sn,/[svh]\w+-[tblr]{2}/,"tb-rl")+sn;case 45:return WEBKIT$2+sn+MS$1+replace$3(sn,/[svh]\w+-[tblr]{2}/,"lr")+sn}return WEBKIT$2+sn+MS$1+sn+sn}return sn}var prefixer$1=function(ln,cn,dn,pn){if(ln.length>-1&&!ln.return)switch(ln.type){case DECLARATION$1:ln.return=prefix$1(ln.value,ln.length);break;case KEYFRAMES$1:return serialize$1([copy$1(ln,{value:replace$3(ln.value,"@","@"+WEBKIT$2)})],pn);case RULESET$1:if(ln.length)return combine$2(ln.props,function(vn){switch(match$2(vn,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return serialize$1([copy$1(ln,{props:[replace$3(vn,/:(read-\w+)/,":"+MOZ$1+"$1")]})],pn);case"::placeholder":return serialize$1([copy$1(ln,{props:[replace$3(vn,/:(plac\w+)/,":"+WEBKIT$2+"input-$1")]}),copy$1(ln,{props:[replace$3(vn,/:(plac\w+)/,":"+MOZ$1+"$1")]}),copy$1(ln,{props:[replace$3(vn,/:(plac\w+)/,MS$1+"input-$1")]})],pn)}return""})}},defaultStylisPlugins$1=[prefixer$1],createCache$1=function(ln){var cn=ln.key;if(cn==="css"){var dn=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(dn,function(Kn){var qn=Kn.getAttribute("data-emotion");qn.indexOf(" ")!==-1&&(document.head.appendChild(Kn),Kn.setAttribute("data-s",""))})}var pn=ln.stylisPlugins||defaultStylisPlugins$1,vn={},kn,Sn=[];kn=ln.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+cn+' "]'),function(Kn){for(var qn=Kn.getAttribute("data-emotion").split(" "),Zn=1;Zn<qn.length;Zn++)vn[qn[Zn]]=!0;Sn.push(Kn)});var wn,Pn=[compat$1,removeLabel$1];{var Nn,Ln=[stringify$2,rulesheet$1(function(Kn){Nn.insert(Kn)})],Fn=middleware$1(Pn.concat(pn,Ln)),zn=function(qn){return serialize$1(compile$1(qn),Fn)};wn=function(qn,Zn,Yn,Jn){Nn=Yn,zn(qn?qn+"{"+Zn.styles+"}":Zn.styles),Jn&&(Dn.inserted[Zn.name]=!0)}}var Dn={key:cn,sheet:new StyleSheet$1({key:cn,container:kn,nonce:ln.nonce,speedy:ln.speedy,prepend:ln.prepend,insertionPoint:ln.insertionPoint}),nonce:ln.nonce,inserted:vn,registered:{},insert:wn};return Dn.sheet.hydrate(Sn),Dn};function _extends$5(){return _extends$5=Object.assign?Object.assign.bind():function(sn){for(var ln=1;ln<arguments.length;ln++){var cn=arguments[ln];for(var dn in cn)Object.prototype.hasOwnProperty.call(cn,dn)&&(sn[dn]=cn[dn])}return sn},_extends$5.apply(this,arguments)}var reactIs$1={exports:{}},reactIs_production_min$1={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$c=typeof Symbol=="function"&&Symbol.for,c$f=b$c?Symbol.for("react.element"):60103,d$e=b$c?Symbol.for("react.portal"):60106,e$6=b$c?Symbol.for("react.fragment"):60107,f$9=b$c?Symbol.for("react.strict_mode"):60108,g$b=b$c?Symbol.for("react.profiler"):60114,h$b=b$c?Symbol.for("react.provider"):60109,k$b=b$c?Symbol.for("react.context"):60110,l$8=b$c?Symbol.for("react.async_mode"):60111,m$d=b$c?Symbol.for("react.concurrent_mode"):60111,n$c=b$c?Symbol.for("react.forward_ref"):60112,p$a=b$c?Symbol.for("react.suspense"):60113,q$a=b$c?Symbol.for("react.suspense_list"):60120,r$9=b$c?Symbol.for("react.memo"):60115,t$8=b$c?Symbol.for("react.lazy"):60116,v$a=b$c?Symbol.for("react.block"):60121,w$c=b$c?Symbol.for("react.fundamental"):60117,x$f=b$c?Symbol.for("react.responder"):60118,y$d=b$c?Symbol.for("react.scope"):60119;function z$9(sn){if(typeof sn=="object"&&sn!==null){var ln=sn.$$typeof;switch(ln){case c$f:switch(sn=sn.type,sn){case l$8:case m$d:case e$6:case g$b:case f$9:case p$a:return sn;default:switch(sn=sn&&sn.$$typeof,sn){case k$b:case n$c:case t$8:case r$9:case h$b:return sn;default:return ln}}case d$e:return ln}}}function A$b(sn){return z$9(sn)===m$d}reactIs_production_min$1.AsyncMode=l$8;reactIs_production_min$1.ConcurrentMode=m$d;reactIs_production_min$1.ContextConsumer=k$b;reactIs_production_min$1.ContextProvider=h$b;reactIs_production_min$1.Element=c$f;reactIs_production_min$1.ForwardRef=n$c;reactIs_production_min$1.Fragment=e$6;reactIs_production_min$1.Lazy=t$8;reactIs_production_min$1.Memo=r$9;reactIs_production_min$1.Portal=d$e;reactIs_production_min$1.Profiler=g$b;reactIs_production_min$1.StrictMode=f$9;reactIs_production_min$1.Suspense=p$a;reactIs_production_min$1.isAsyncMode=function(sn){return A$b(sn)||z$9(sn)===l$8};reactIs_production_min$1.isConcurrentMode=A$b;reactIs_production_min$1.isContextConsumer=function(sn){return z$9(sn)===k$b};reactIs_production_min$1.isContextProvider=function(sn){return z$9(sn)===h$b};reactIs_production_min$1.isElement=function(sn){return typeof sn=="object"&&sn!==null&&sn.$$typeof===c$f};reactIs_production_min$1.isForwardRef=function(sn){return z$9(sn)===n$c};reactIs_production_min$1.isFragment=function(sn){return z$9(sn)===e$6};reactIs_production_min$1.isLazy=function(sn){return z$9(sn)===t$8};reactIs_production_min$1.isMemo=function(sn){return z$9(sn)===r$9};reactIs_production_min$1.isPortal=function(sn){return z$9(sn)===d$e};reactIs_production_min$1.isProfiler=function(sn){return z$9(sn)===g$b};reactIs_production_min$1.isStrictMode=function(sn){return z$9(sn)===f$9};reactIs_production_min$1.isSuspense=function(sn){return z$9(sn)===p$a};reactIs_production_min$1.isValidElementType=function(sn){return typeof sn=="string"||typeof sn=="function"||sn===e$6||sn===m$d||sn===g$b||sn===f$9||sn===p$a||sn===q$a||typeof sn=="object"&&sn!==null&&(sn.$$typeof===t$8||sn.$$typeof===r$9||sn.$$typeof===h$b||sn.$$typeof===k$b||sn.$$typeof===n$c||sn.$$typeof===w$c||sn.$$typeof===x$f||sn.$$typeof===y$d||sn.$$typeof===v$a)};reactIs_production_min$1.typeOf=z$9;reactIs$1.exports=reactIs_production_min$1;var reactIsExports=reactIs$1.exports,reactIs=reactIsExports,FORWARD_REF_STATICS={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},MEMO_STATICS={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},TYPE_STATICS={};TYPE_STATICS[reactIs.ForwardRef]=FORWARD_REF_STATICS;TYPE_STATICS[reactIs.Memo]=MEMO_STATICS;var isBrowser$2=!0;function getRegisteredStyles$1(sn,ln,cn){var dn="";return cn.split(" ").forEach(function(pn){sn[pn]!==void 0?ln.push(sn[pn]+";"):dn+=pn+" "}),dn}var registerStyles$1=function(ln,cn,dn){var pn=ln.key+"-"+cn.name;(dn===!1||isBrowser$2===!1)&&ln.registered[pn]===void 0&&(ln.registered[pn]=cn.styles)},insertStyles$1=function(ln,cn,dn){registerStyles$1(ln,cn,dn);var pn=ln.key+"-"+cn.name;if(ln.inserted[cn.name]===void 0){var vn=cn;do ln.insert(cn===vn?"."+pn:"",vn,ln.sheet,!0),vn=vn.next;while(vn!==void 0)}};function murmur2$1(sn){for(var ln=0,cn,dn=0,pn=sn.length;pn>=4;++dn,pn-=4)cn=sn.charCodeAt(dn)&255|(sn.charCodeAt(++dn)&255)<<8|(sn.charCodeAt(++dn)&255)<<16|(sn.charCodeAt(++dn)&255)<<24,cn=(cn&65535)*1540483477+((cn>>>16)*59797<<16),cn^=cn>>>24,ln=(cn&65535)*1540483477+((cn>>>16)*59797<<16)^(ln&65535)*1540483477+((ln>>>16)*59797<<16);switch(pn){case 3:ln^=(sn.charCodeAt(dn+2)&255)<<16;case 2:ln^=(sn.charCodeAt(dn+1)&255)<<8;case 1:ln^=sn.charCodeAt(dn)&255,ln=(ln&65535)*1540483477+((ln>>>16)*59797<<16)}return ln^=ln>>>13,ln=(ln&65535)*1540483477+((ln>>>16)*59797<<16),((ln^ln>>>15)>>>0).toString(36)}var unitlessKeys$1={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hyphenateRegex$1=/[A-Z]|^ms/g,animationRegex$1=/_EMO_([^_]+?)_([^]*?)_EMO_/g,isCustomProperty$1=function(ln){return ln.charCodeAt(1)===45},isProcessableValue$1=function(ln){return ln!=null&&typeof ln!="boolean"},processStyleName$1=memoize$2(function(sn){return isCustomProperty$1(sn)?sn:sn.replace(hyphenateRegex$1,"-$&").toLowerCase()}),processStyleValue$1=function(ln,cn){switch(ln){case"animation":case"animationName":if(typeof cn=="string")return cn.replace(animationRegex$1,function(dn,pn,vn){return cursor$1={name:pn,styles:vn,next:cursor$1},pn})}return unitlessKeys$1[ln]!==1&&!isCustomProperty$1(ln)&&typeof cn=="number"&&cn!==0?cn+"px":cn},noComponentSelectorMessage$1="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function handleInterpolation$1(sn,ln,cn){if(cn==null)return"";if(cn.__emotion_styles!==void 0)return cn;switch(typeof cn){case"boolean":return"";case"object":{if(cn.anim===1)return cursor$1={name:cn.name,styles:cn.styles,next:cursor$1},cn.name;if(cn.styles!==void 0){var dn=cn.next;if(dn!==void 0)for(;dn!==void 0;)cursor$1={name:dn.name,styles:dn.styles,next:cursor$1},dn=dn.next;var pn=cn.styles+";";return pn}return createStringFromObject$1(sn,ln,cn)}case"function":{if(sn!==void 0){var vn=cursor$1,kn=cn(sn);return cursor$1=vn,handleInterpolation$1(sn,ln,kn)}break}}if(ln==null)return cn;var Sn=ln[cn];return Sn!==void 0?Sn:cn}function createStringFromObject$1(sn,ln,cn){var dn="";if(Array.isArray(cn))for(var pn=0;pn<cn.length;pn++)dn+=handleInterpolation$1(sn,ln,cn[pn])+";";else for(var vn in cn){var kn=cn[vn];if(typeof kn!="object")ln!=null&&ln[kn]!==void 0?dn+=vn+"{"+ln[kn]+"}":isProcessableValue$1(kn)&&(dn+=processStyleName$1(vn)+":"+processStyleValue$1(vn,kn)+";");else if(Array.isArray(kn)&&typeof kn[0]=="string"&&(ln==null||ln[kn[0]]===void 0))for(var Sn=0;Sn<kn.length;Sn++)isProcessableValue$1(kn[Sn])&&(dn+=processStyleName$1(vn)+":"+processStyleValue$1(vn,kn[Sn])+";");else{var wn=handleInterpolation$1(sn,ln,kn);switch(vn){case"animation":case"animationName":{dn+=processStyleName$1(vn)+":"+wn+";";break}default:dn+=vn+"{"+wn+"}"}}}return dn}var labelPattern$1=/label:\s*([^\s;\n{]+)\s*(;|$)/g,cursor$1,serializeStyles$1=function(ln,cn,dn){if(ln.length===1&&typeof ln[0]=="object"&&ln[0]!==null&&ln[0].styles!==void 0)return ln[0];var pn=!0,vn="";cursor$1=void 0;var kn=ln[0];kn==null||kn.raw===void 0?(pn=!1,vn+=handleInterpolation$1(dn,cn,kn)):vn+=kn[0];for(var Sn=1;Sn<ln.length;Sn++)vn+=handleInterpolation$1(dn,cn,ln[Sn]),pn&&(vn+=kn[Sn]);labelPattern$1.lastIndex=0;for(var wn="",Pn;(Pn=labelPattern$1.exec(vn))!==null;)wn+="-"+Pn[1];var Nn=murmur2$1(vn)+wn;return{name:Nn,styles:vn,next:cursor$1}},syncFallback$1=function(ln){return ln()},useInsertionEffect$2=React$1["useInsertionEffect"]?React$1["useInsertionEffect"]:!1,useInsertionEffectAlwaysWithSyncFallback$1=useInsertionEffect$2||syncFallback$1,useInsertionEffectWithLayoutFallback=useInsertionEffect$2||reactExports.useLayoutEffect,hasOwnProperty$i={}.hasOwnProperty,EmotionCacheContext$1=reactExports.createContext(typeof HTMLElement<"u"?createCache$1({key:"css"}):null);EmotionCacheContext$1.Provider;var withEmotionCache$1=function(ln){return reactExports.forwardRef(function(cn,dn){var pn=reactExports.useContext(EmotionCacheContext$1);return ln(cn,pn,dn)})},ThemeContext$1=reactExports.createContext({}),getTheme=function(ln,cn){if(typeof cn=="function"){var dn=cn(ln);return dn}return _extends$5({},ln,cn)},createCacheWithTheme=weakMemoize(function(sn){return weakMemoize(function(ln){return getTheme(sn,ln)})}),ThemeProvider=function(ln){var cn=reactExports.useContext(ThemeContext$1);return ln.theme!==cn&&(cn=createCacheWithTheme(cn)(ln.theme)),reactExports.createElement(ThemeContext$1.Provider,{value:cn},ln.children)},typePropName$1="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",createEmotionProps$1=function(ln,cn){var dn={};for(var pn in cn)hasOwnProperty$i.call(cn,pn)&&(dn[pn]=cn[pn]);return dn[typePropName$1]=ln,dn},Insertion$1=function(ln){var cn=ln.cache,dn=ln.serialized,pn=ln.isStringTag;return registerStyles$1(cn,dn,pn),useInsertionEffectAlwaysWithSyncFallback$1(function(){return insertStyles$1(cn,dn,pn)}),null},Emotion$2=withEmotionCache$1(function(sn,ln,cn){var dn=sn.css;typeof dn=="string"&&ln.registered[dn]!==void 0&&(dn=ln.registered[dn]);var pn=sn[typePropName$1],vn=[dn],kn="";typeof sn.className=="string"?kn=getRegisteredStyles$1(ln.registered,vn,sn.className):sn.className!=null&&(kn=sn.className+" ");var Sn=serializeStyles$1(vn,void 0,reactExports.useContext(ThemeContext$1));kn+=ln.key+"-"+Sn.name;var wn={};for(var Pn in sn)hasOwnProperty$i.call(sn,Pn)&&Pn!=="css"&&Pn!==typePropName$1&&(wn[Pn]=sn[Pn]);return wn.ref=cn,wn.className=kn,reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion$1,{cache:ln,serialized:Sn,isStringTag:typeof pn=="string"}),reactExports.createElement(pn,wn))}),jsx$3=function(ln,cn){var dn=arguments;if(cn==null||!hasOwnProperty$i.call(cn,"css"))return reactExports.createElement.apply(void 0,dn);var pn=dn.length,vn=new Array(pn);vn[0]=Emotion$2,vn[1]=createEmotionProps$1(ln,cn);for(var kn=2;kn<pn;kn++)vn[kn]=dn[kn];return reactExports.createElement.apply(null,vn)},Global$1=withEmotionCache$1(function(sn,ln){var cn=sn.styles,dn=serializeStyles$1([cn],void 0,reactExports.useContext(ThemeContext$1)),pn=reactExports.useRef();return useInsertionEffectWithLayoutFallback(function(){var vn=ln.key+"-global",kn=new ln.sheet.constructor({key:vn,nonce:ln.sheet.nonce,container:ln.sheet.container,speedy:ln.sheet.isSpeedy}),Sn=!1,wn=document.querySelector('style[data-emotion="'+vn+" "+dn.name+'"]');return ln.sheet.tags.length&&(kn.before=ln.sheet.tags[0]),wn!==null&&(Sn=!0,wn.setAttribute("data-emotion",vn),kn.hydrate([wn])),pn.current=[kn,Sn],function(){kn.flush()}},[ln]),useInsertionEffectWithLayoutFallback(function(){var vn=pn.current,kn=vn[0],Sn=vn[1];if(Sn){vn[1]=!1;return}if(dn.next!==void 0&&insertStyles$1(ln,dn.next,!0),kn.tags.length){var wn=kn.tags[kn.tags.length-1].nextElementSibling;kn.before=wn,kn.flush()}ln.insert("",dn,kn,!1)},[ln,dn.name]),null});function css$1(){for(var sn=arguments.length,ln=new Array(sn),cn=0;cn<sn;cn++)ln[cn]=arguments[cn];return serializeStyles$1(ln)}var keyframes=function(){var ln=css$1.apply(void 0,arguments),cn="animation-"+ln.name;return{name:cn,styles:"@keyframes "+cn+"{"+ln.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};const style$1="";var reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(sn){var ln,cn,dn,pn;if(typeof performance=="object"&&typeof performance.now=="function"){var vn=performance;sn.unstable_now=function(){return vn.now()}}else{var kn=Date,Sn=kn.now();sn.unstable_now=function(){return kn.now()-Sn}}if(typeof window>"u"||typeof MessageChannel!="function"){var wn=null,Pn=null,Nn=function(){if(wn!==null)try{var Vs=sn.unstable_now();wn(!0,Vs),wn=null}catch(Js){throw setTimeout(Nn,0),Js}};ln=function(Vs){wn!==null?setTimeout(ln,0,Vs):(wn=Vs,setTimeout(Nn,0))},cn=function(Vs,Js){Pn=setTimeout(Vs,Js)},dn=function(){clearTimeout(Pn)},sn.unstable_shouldYield=function(){return!1},pn=sn.unstable_forceFrameRate=function(){}}else{var Ln=window.setTimeout,Fn=window.clearTimeout;if(typeof console<"u"){var zn=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof zn!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var Dn=!1,Kn=null,qn=-1,Zn=5,Yn=0;sn.unstable_shouldYield=function(){return sn.unstable_now()>=Yn},pn=function(){},sn.unstable_forceFrameRate=function(Vs){0>Vs||125<Vs?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Zn=0<Vs?Math.floor(1e3/Vs):5};var Jn=new MessageChannel,rs=Jn.port2;Jn.port1.onmessage=function(){if(Kn!==null){var Vs=sn.unstable_now();Yn=Vs+Zn;try{Kn(!0,Vs)?rs.postMessage(null):(Dn=!1,Kn=null)}catch(Js){throw rs.postMessage(null),Js}}else Dn=!1},ln=function(Vs){Kn=Vs,Dn||(Dn=!0,rs.postMessage(null))},cn=function(Vs,Js){qn=Ln(function(){Vs(sn.unstable_now())},Js)},dn=function(){Fn(qn),qn=-1}}function ss(Vs,Js){var ru=Vs.length;Vs.push(Js);e:for(;;){var hs=ru-1>>>1,lu=Vs[hs];if(lu!==void 0&&0<Es(lu,Js))Vs[hs]=Js,Vs[ru]=lu,ru=hs;else break e}}function as(Vs){return Vs=Vs[0],Vs===void 0?null:Vs}function ds(Vs){var Js=Vs[0];if(Js!==void 0){var ru=Vs.pop();if(ru!==Js){Vs[0]=ru;e:for(var hs=0,lu=Vs.length;hs<lu;){var _u=2*(hs+1)-1,yu=Vs[_u],Xu=_u+1,Du=Vs[Xu];if(yu!==void 0&&0>Es(yu,ru))Du!==void 0&&0>Es(Du,yu)?(Vs[hs]=Du,Vs[Xu]=ru,hs=Xu):(Vs[hs]=yu,Vs[_u]=ru,hs=_u);else if(Du!==void 0&&0>Es(Du,ru))Vs[hs]=Du,Vs[Xu]=ru,hs=Xu;else break e}}return Js}return null}function Es(Vs,Js){var ru=Vs.sortIndex-Js.sortIndex;return ru!==0?ru:Vs.id-Js.id}var Ss=[],Qn=[],ms=1,Ts=null,Rs=3,ys=!1,_s=!1,js=!1;function bs(Vs){for(var Js=as(Qn);Js!==null;){if(Js.callback===null)ds(Qn);else if(Js.startTime<=Vs)ds(Qn),Js.sortIndex=Js.expirationTime,ss(Ss,Js);else break;Js=as(Qn)}}function ks(Vs){if(js=!1,bs(Vs),!_s)if(as(Ss)!==null)_s=!0,ln(xs);else{var Js=as(Qn);Js!==null&&cn(ks,Js.startTime-Vs)}}function xs(Vs,Js){_s=!1,js&&(js=!1,dn()),ys=!0;var ru=Rs;try{for(bs(Js),Ts=as(Ss);Ts!==null&&(!(Ts.expirationTime>Js)||Vs&&!sn.unstable_shouldYield());){var hs=Ts.callback;if(typeof hs=="function"){Ts.callback=null,Rs=Ts.priorityLevel;var lu=hs(Ts.expirationTime<=Js);Js=sn.unstable_now(),typeof lu=="function"?Ts.callback=lu:Ts===as(Ss)&&ds(Ss),bs(Js)}else ds(Ss);Ts=as(Ss)}if(Ts!==null)var _u=!0;else{var yu=as(Qn);yu!==null&&cn(ks,yu.startTime-Js),_u=!1}return _u}finally{Ts=null,Rs=ru,ys=!1}}var Ks=pn;sn.unstable_IdlePriority=5,sn.unstable_ImmediatePriority=1,sn.unstable_LowPriority=4,sn.unstable_NormalPriority=3,sn.unstable_Profiling=null,sn.unstable_UserBlockingPriority=2,sn.unstable_cancelCallback=function(Vs){Vs.callback=null},sn.unstable_continueExecution=function(){_s||ys||(_s=!0,ln(xs))},sn.unstable_getCurrentPriorityLevel=function(){return Rs},sn.unstable_getFirstCallbackNode=function(){return as(Ss)},sn.unstable_next=function(Vs){switch(Rs){case 1:case 2:case 3:var Js=3;break;default:Js=Rs}var ru=Rs;Rs=Js;try{return Vs()}finally{Rs=ru}},sn.unstable_pauseExecution=function(){},sn.unstable_requestPaint=Ks,sn.unstable_runWithPriority=function(Vs,Js){switch(Vs){case 1:case 2:case 3:case 4:case 5:break;default:Vs=3}var ru=Rs;Rs=Vs;try{return Js()}finally{Rs=ru}},sn.unstable_scheduleCallback=function(Vs,Js,ru){var hs=sn.unstable_now();switch(typeof ru=="object"&&ru!==null?(ru=ru.delay,ru=typeof ru=="number"&&0<ru?hs+ru:hs):ru=hs,Vs){case 1:var lu=-1;break;case 2:lu=250;break;case 5:lu=1073741823;break;case 4:lu=1e4;break;default:lu=5e3}return lu=ru+lu,Vs={id:ms++,callback:Js,priorityLevel:Vs,startTime:ru,expirationTime:lu,sortIndex:-1},ru>hs?(Vs.sortIndex=ru,ss(Qn,Vs),as(Ss)===null&&Vs===as(Qn)&&(js?dn():js=!0,cn(ks,ru-hs))):(Vs.sortIndex=lu,ss(Ss,Vs),_s||ys||(_s=!0,ln(xs))),Vs},sn.unstable_wrapCallback=function(Vs){var Js=Rs;return function(){var ru=Rs;Rs=Js;try{return Vs.apply(this,arguments)}finally{Rs=ru}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa$3=reactExports,m$c=objectAssign,r$8=schedulerExports;function y$c(sn){for(var ln="https://reactjs.org/docs/error-decoder.html?invariant="+sn,cn=1;cn<arguments.length;cn++)ln+="&args[]="+encodeURIComponent(arguments[cn]);return"Minified React error #"+sn+"; visit "+ln+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!aa$3)throw Error(y$c(227));var ba$3=new Set,ca$3={};function da$3(sn,ln){ea$3(sn,ln),ea$3(sn+"Capture",ln)}function ea$3(sn,ln){for(ca$3[sn]=ln,sn=0;sn<ln.length;sn++)ba$3.add(ln[sn])}var fa$3=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ha$3=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ia$3=Object.prototype.hasOwnProperty,ja$3={},ka$2={};function la$3(sn){return ia$3.call(ka$2,sn)?!0:ia$3.call(ja$3,sn)?!1:ha$3.test(sn)?ka$2[sn]=!0:(ja$3[sn]=!0,!1)}function ma$3(sn,ln,cn,dn){if(cn!==null&&cn.type===0)return!1;switch(typeof ln){case"function":case"symbol":return!0;case"boolean":return dn?!1:cn!==null?!cn.acceptsBooleans:(sn=sn.toLowerCase().slice(0,5),sn!=="data-"&&sn!=="aria-");default:return!1}}function na$3(sn,ln,cn,dn){if(ln===null||typeof ln>"u"||ma$3(sn,ln,cn,dn))return!0;if(dn)return!1;if(cn!==null)switch(cn.type){case 3:return!ln;case 4:return ln===!1;case 5:return isNaN(ln);case 6:return isNaN(ln)||1>ln}return!1}function B$b(sn,ln,cn,dn,pn,vn,kn){this.acceptsBooleans=ln===2||ln===3||ln===4,this.attributeName=dn,this.attributeNamespace=pn,this.mustUseProperty=cn,this.propertyName=sn,this.type=ln,this.sanitizeURL=vn,this.removeEmptyString=kn}var D$b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(sn){D$b[sn]=new B$b(sn,0,!1,sn,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(sn){var ln=sn[0];D$b[ln]=new B$b(ln,1,!1,sn[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(sn){D$b[sn]=new B$b(sn,2,!1,sn.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(sn){D$b[sn]=new B$b(sn,2,!1,sn,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(sn){D$b[sn]=new B$b(sn,3,!1,sn.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(sn){D$b[sn]=new B$b(sn,3,!0,sn,null,!1,!1)});["capture","download"].forEach(function(sn){D$b[sn]=new B$b(sn,4,!1,sn,null,!1,!1)});["cols","rows","size","span"].forEach(function(sn){D$b[sn]=new B$b(sn,6,!1,sn,null,!1,!1)});["rowSpan","start"].forEach(function(sn){D$b[sn]=new B$b(sn,5,!1,sn.toLowerCase(),null,!1,!1)});var oa$3=/[\-:]([a-z])/g;function pa$3(sn){return sn[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(sn){var ln=sn.replace(oa$3,pa$3);D$b[ln]=new B$b(ln,1,!1,sn,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(sn){var ln=sn.replace(oa$3,pa$3);D$b[ln]=new B$b(ln,1,!1,sn,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(sn){var ln=sn.replace(oa$3,pa$3);D$b[ln]=new B$b(ln,1,!1,sn,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(sn){D$b[sn]=new B$b(sn,1,!1,sn.toLowerCase(),null,!1,!1)});D$b.xlinkHref=new B$b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(sn){D$b[sn]=new B$b(sn,1,!1,sn.toLowerCase(),null,!0,!0)});function qa$2(sn,ln,cn,dn){var pn=D$b.hasOwnProperty(ln)?D$b[ln]:null,vn=pn!==null?pn.type===0:dn?!1:!(!(2<ln.length)||ln[0]!=="o"&&ln[0]!=="O"||ln[1]!=="n"&&ln[1]!=="N");vn||(na$3(ln,cn,pn,dn)&&(cn=null),dn||pn===null?la$3(ln)&&(cn===null?sn.removeAttribute(ln):sn.setAttribute(ln,""+cn)):pn.mustUseProperty?sn[pn.propertyName]=cn===null?pn.type===3?!1:"":cn:(ln=pn.attributeName,dn=pn.attributeNamespace,cn===null?sn.removeAttribute(ln):(pn=pn.type,cn=pn===3||pn===4&&cn===!0?"":""+cn,dn?sn.setAttributeNS(dn,ln,cn):sn.setAttribute(ln,cn))))}var ra$3=aa$3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sa$3=60103,ta$3=60106,ua$3=60107,wa$3=60108,xa$3=60114,ya$3=60109,za$3=60110,Aa$3=60112,Ba$3=60113,Ca$3=60120,Da$3=60115,Ea$3=60116,Fa$2=60121,Ga$2=60128,Ha$2=60129,Ia$3=60130,Ja$2=60131;if(typeof Symbol=="function"&&Symbol.for){var E$c=Symbol.for;sa$3=E$c("react.element"),ta$3=E$c("react.portal"),ua$3=E$c("react.fragment"),wa$3=E$c("react.strict_mode"),xa$3=E$c("react.profiler"),ya$3=E$c("react.provider"),za$3=E$c("react.context"),Aa$3=E$c("react.forward_ref"),Ba$3=E$c("react.suspense"),Ca$3=E$c("react.suspense_list"),Da$3=E$c("react.memo"),Ea$3=E$c("react.lazy"),Fa$2=E$c("react.block"),E$c("react.scope"),Ga$2=E$c("react.opaque.id"),Ha$2=E$c("react.debug_trace_mode"),Ia$3=E$c("react.offscreen"),Ja$2=E$c("react.legacy_hidden")}var Ka$2=typeof Symbol=="function"&&Symbol.iterator;function La$3(sn){return sn===null||typeof sn!="object"?null:(sn=Ka$2&&sn[Ka$2]||sn["@@iterator"],typeof sn=="function"?sn:null)}var Ma$3;function Na$2(sn){if(Ma$3===void 0)try{throw Error()}catch(cn){var ln=cn.stack.trim().match(/\n( *(at )?)/);Ma$3=ln&&ln[1]||""}return`
`+Ma$3+sn}var Oa$3=!1;function Pa$3(sn,ln){if(!sn||Oa$3)return"";Oa$3=!0;var cn=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(ln)if(ln=function(){throw Error()},Object.defineProperty(ln.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ln,[])}catch(wn){var dn=wn}Reflect.construct(sn,[],ln)}else{try{ln.call()}catch(wn){dn=wn}sn.call(ln.prototype)}else{try{throw Error()}catch(wn){dn=wn}sn()}}catch(wn){if(wn&&dn&&typeof wn.stack=="string"){for(var pn=wn.stack.split(`
`),vn=dn.stack.split(`
`),kn=pn.length-1,Sn=vn.length-1;1<=kn&&0<=Sn&&pn[kn]!==vn[Sn];)Sn--;for(;1<=kn&&0<=Sn;kn--,Sn--)if(pn[kn]!==vn[Sn]){if(kn!==1||Sn!==1)do if(kn--,Sn--,0>Sn||pn[kn]!==vn[Sn])return`
`+pn[kn].replace(" at new "," at ");while(1<=kn&&0<=Sn);break}}}finally{Oa$3=!1,Error.prepareStackTrace=cn}return(sn=sn?sn.displayName||sn.name:"")?Na$2(sn):""}function Qa$1(sn){switch(sn.tag){case 5:return Na$2(sn.type);case 16:return Na$2("Lazy");case 13:return Na$2("Suspense");case 19:return Na$2("SuspenseList");case 0:case 2:case 15:return sn=Pa$3(sn.type,!1),sn;case 11:return sn=Pa$3(sn.type.render,!1),sn;case 22:return sn=Pa$3(sn.type._render,!1),sn;case 1:return sn=Pa$3(sn.type,!0),sn;default:return""}}function Ra$3(sn){if(sn==null)return null;if(typeof sn=="function")return sn.displayName||sn.name||null;if(typeof sn=="string")return sn;switch(sn){case ua$3:return"Fragment";case ta$3:return"Portal";case xa$3:return"Profiler";case wa$3:return"StrictMode";case Ba$3:return"Suspense";case Ca$3:return"SuspenseList"}if(typeof sn=="object")switch(sn.$$typeof){case za$3:return(sn.displayName||"Context")+".Consumer";case ya$3:return(sn._context.displayName||"Context")+".Provider";case Aa$3:var ln=sn.render;return ln=ln.displayName||ln.name||"",sn.displayName||(ln!==""?"ForwardRef("+ln+")":"ForwardRef");case Da$3:return Ra$3(sn.type);case Fa$2:return Ra$3(sn._render);case Ea$3:ln=sn._payload,sn=sn._init;try{return Ra$3(sn(ln))}catch{}}return null}function Sa$3(sn){switch(typeof sn){case"boolean":case"number":case"object":case"string":case"undefined":return sn;default:return""}}function Ta$3(sn){var ln=sn.type;return(sn=sn.nodeName)&&sn.toLowerCase()==="input"&&(ln==="checkbox"||ln==="radio")}function Ua$2(sn){var ln=Ta$3(sn)?"checked":"value",cn=Object.getOwnPropertyDescriptor(sn.constructor.prototype,ln),dn=""+sn[ln];if(!sn.hasOwnProperty(ln)&&typeof cn<"u"&&typeof cn.get=="function"&&typeof cn.set=="function"){var pn=cn.get,vn=cn.set;return Object.defineProperty(sn,ln,{configurable:!0,get:function(){return pn.call(this)},set:function(kn){dn=""+kn,vn.call(this,kn)}}),Object.defineProperty(sn,ln,{enumerable:cn.enumerable}),{getValue:function(){return dn},setValue:function(kn){dn=""+kn},stopTracking:function(){sn._valueTracker=null,delete sn[ln]}}}}function Va$2(sn){sn._valueTracker||(sn._valueTracker=Ua$2(sn))}function Wa$2(sn){if(!sn)return!1;var ln=sn._valueTracker;if(!ln)return!0;var cn=ln.getValue(),dn="";return sn&&(dn=Ta$3(sn)?sn.checked?"true":"false":sn.value),sn=dn,sn!==cn?(ln.setValue(sn),!0):!1}function Xa$2(sn){if(sn=sn||(typeof document<"u"?document:void 0),typeof sn>"u")return null;try{return sn.activeElement||sn.body}catch{return sn.body}}function Ya$2(sn,ln){var cn=ln.checked;return m$c({},ln,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:cn??sn._wrapperState.initialChecked})}function Za$1(sn,ln){var cn=ln.defaultValue==null?"":ln.defaultValue,dn=ln.checked!=null?ln.checked:ln.defaultChecked;cn=Sa$3(ln.value!=null?ln.value:cn),sn._wrapperState={initialChecked:dn,initialValue:cn,controlled:ln.type==="checkbox"||ln.type==="radio"?ln.checked!=null:ln.value!=null}}function $a$2(sn,ln){ln=ln.checked,ln!=null&&qa$2(sn,"checked",ln,!1)}function ab(sn,ln){$a$2(sn,ln);var cn=Sa$3(ln.value),dn=ln.type;if(cn!=null)dn==="number"?(cn===0&&sn.value===""||sn.value!=cn)&&(sn.value=""+cn):sn.value!==""+cn&&(sn.value=""+cn);else if(dn==="submit"||dn==="reset"){sn.removeAttribute("value");return}ln.hasOwnProperty("value")?bb(sn,ln.type,cn):ln.hasOwnProperty("defaultValue")&&bb(sn,ln.type,Sa$3(ln.defaultValue)),ln.checked==null&&ln.defaultChecked!=null&&(sn.defaultChecked=!!ln.defaultChecked)}function cb(sn,ln,cn){if(ln.hasOwnProperty("value")||ln.hasOwnProperty("defaultValue")){var dn=ln.type;if(!(dn!=="submit"&&dn!=="reset"||ln.value!==void 0&&ln.value!==null))return;ln=""+sn._wrapperState.initialValue,cn||ln===sn.value||(sn.value=ln),sn.defaultValue=ln}cn=sn.name,cn!==""&&(sn.name=""),sn.defaultChecked=!!sn._wrapperState.initialChecked,cn!==""&&(sn.name=cn)}function bb(sn,ln,cn){(ln!=="number"||Xa$2(sn.ownerDocument)!==sn)&&(cn==null?sn.defaultValue=""+sn._wrapperState.initialValue:sn.defaultValue!==""+cn&&(sn.defaultValue=""+cn))}function db(sn){var ln="";return aa$3.Children.forEach(sn,function(cn){cn!=null&&(ln+=cn)}),ln}function eb(sn,ln){return sn=m$c({children:void 0},ln),(ln=db(ln.children))&&(sn.children=ln),sn}function fb(sn,ln,cn,dn){if(sn=sn.options,ln){ln={};for(var pn=0;pn<cn.length;pn++)ln["$"+cn[pn]]=!0;for(cn=0;cn<sn.length;cn++)pn=ln.hasOwnProperty("$"+sn[cn].value),sn[cn].selected!==pn&&(sn[cn].selected=pn),pn&&dn&&(sn[cn].defaultSelected=!0)}else{for(cn=""+Sa$3(cn),ln=null,pn=0;pn<sn.length;pn++){if(sn[pn].value===cn){sn[pn].selected=!0,dn&&(sn[pn].defaultSelected=!0);return}ln!==null||sn[pn].disabled||(ln=sn[pn])}ln!==null&&(ln.selected=!0)}}function gb(sn,ln){if(ln.dangerouslySetInnerHTML!=null)throw Error(y$c(91));return m$c({},ln,{value:void 0,defaultValue:void 0,children:""+sn._wrapperState.initialValue})}function hb(sn,ln){var cn=ln.value;if(cn==null){if(cn=ln.children,ln=ln.defaultValue,cn!=null){if(ln!=null)throw Error(y$c(92));if(Array.isArray(cn)){if(!(1>=cn.length))throw Error(y$c(93));cn=cn[0]}ln=cn}ln==null&&(ln=""),cn=ln}sn._wrapperState={initialValue:Sa$3(cn)}}function ib(sn,ln){var cn=Sa$3(ln.value),dn=Sa$3(ln.defaultValue);cn!=null&&(cn=""+cn,cn!==sn.value&&(sn.value=cn),ln.defaultValue==null&&sn.defaultValue!==cn&&(sn.defaultValue=cn)),dn!=null&&(sn.defaultValue=""+dn)}function jb(sn){var ln=sn.textContent;ln===sn._wrapperState.initialValue&&ln!==""&&ln!==null&&(sn.value=ln)}var kb={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function lb(sn){switch(sn){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mb(sn,ln){return sn==null||sn==="http://www.w3.org/1999/xhtml"?lb(ln):sn==="http://www.w3.org/2000/svg"&&ln==="foreignObject"?"http://www.w3.org/1999/xhtml":sn}var nb,ob=function(sn){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(ln,cn,dn,pn){MSApp.execUnsafeLocalFunction(function(){return sn(ln,cn,dn,pn)})}:sn}(function(sn,ln){if(sn.namespaceURI!==kb.svg||"innerHTML"in sn)sn.innerHTML=ln;else{for(nb=nb||document.createElement("div"),nb.innerHTML="<svg>"+ln.valueOf().toString()+"</svg>",ln=nb.firstChild;sn.firstChild;)sn.removeChild(sn.firstChild);for(;ln.firstChild;)sn.appendChild(ln.firstChild)}});function pb(sn,ln){if(ln){var cn=sn.firstChild;if(cn&&cn===sn.lastChild&&cn.nodeType===3){cn.nodeValue=ln;return}}sn.textContent=ln}var qb={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},rb=["Webkit","ms","Moz","O"];Object.keys(qb).forEach(function(sn){rb.forEach(function(ln){ln=ln+sn.charAt(0).toUpperCase()+sn.substring(1),qb[ln]=qb[sn]})});function sb(sn,ln,cn){return ln==null||typeof ln=="boolean"||ln===""?"":cn||typeof ln!="number"||ln===0||qb.hasOwnProperty(sn)&&qb[sn]?(""+ln).trim():ln+"px"}function tb(sn,ln){sn=sn.style;for(var cn in ln)if(ln.hasOwnProperty(cn)){var dn=cn.indexOf("--")===0,pn=sb(cn,ln[cn],dn);cn==="float"&&(cn="cssFloat"),dn?sn.setProperty(cn,pn):sn[cn]=pn}}var ub=m$c({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vb(sn,ln){if(ln){if(ub[sn]&&(ln.children!=null||ln.dangerouslySetInnerHTML!=null))throw Error(y$c(137,sn));if(ln.dangerouslySetInnerHTML!=null){if(ln.children!=null)throw Error(y$c(60));if(!(typeof ln.dangerouslySetInnerHTML=="object"&&"__html"in ln.dangerouslySetInnerHTML))throw Error(y$c(61))}if(ln.style!=null&&typeof ln.style!="object")throw Error(y$c(62))}}function wb(sn,ln){if(sn.indexOf("-")===-1)return typeof ln.is=="string";switch(sn){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function xb(sn){return sn=sn.target||sn.srcElement||window,sn.correspondingUseElement&&(sn=sn.correspondingUseElement),sn.nodeType===3?sn.parentNode:sn}var yb=null,zb=null,Ab=null;function Bb(sn){if(sn=Cb(sn)){if(typeof yb!="function")throw Error(y$c(280));var ln=sn.stateNode;ln&&(ln=Db(ln),yb(sn.stateNode,sn.type,ln))}}function Eb(sn){zb?Ab?Ab.push(sn):Ab=[sn]:zb=sn}function Fb(){if(zb){var sn=zb,ln=Ab;if(Ab=zb=null,Bb(sn),ln)for(sn=0;sn<ln.length;sn++)Bb(ln[sn])}}function Gb(sn,ln){return sn(ln)}function Hb(sn,ln,cn,dn,pn){return sn(ln,cn,dn,pn)}function Ib(){}var Jb=Gb,Kb=!1,Lb=!1;function Mb(){(zb!==null||Ab!==null)&&(Ib(),Fb())}function Nb(sn,ln,cn){if(Lb)return sn(ln,cn);Lb=!0;try{return Jb(sn,ln,cn)}finally{Lb=!1,Mb()}}function Ob(sn,ln){var cn=sn.stateNode;if(cn===null)return null;var dn=Db(cn);if(dn===null)return null;cn=dn[ln];e:switch(ln){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(dn=!dn.disabled)||(sn=sn.type,dn=!(sn==="button"||sn==="input"||sn==="select"||sn==="textarea")),sn=!dn;break e;default:sn=!1}if(sn)return null;if(cn&&typeof cn!="function")throw Error(y$c(231,ln,typeof cn));return cn}var Pb=!1;if(fa$3)try{var Qb={};Object.defineProperty(Qb,"passive",{get:function(){Pb=!0}}),window.addEventListener("test",Qb,Qb),window.removeEventListener("test",Qb,Qb)}catch{Pb=!1}function Rb(sn,ln,cn,dn,pn,vn,kn,Sn,wn){var Pn=Array.prototype.slice.call(arguments,3);try{ln.apply(cn,Pn)}catch(Nn){this.onError(Nn)}}var Sb=!1,Tb=null,Ub=!1,Vb=null,Wb={onError:function(sn){Sb=!0,Tb=sn}};function Xb(sn,ln,cn,dn,pn,vn,kn,Sn,wn){Sb=!1,Tb=null,Rb.apply(Wb,arguments)}function Yb(sn,ln,cn,dn,pn,vn,kn,Sn,wn){if(Xb.apply(this,arguments),Sb){if(Sb){var Pn=Tb;Sb=!1,Tb=null}else throw Error(y$c(198));Ub||(Ub=!0,Vb=Pn)}}function Zb(sn){var ln=sn,cn=sn;if(sn.alternate)for(;ln.return;)ln=ln.return;else{sn=ln;do ln=sn,ln.flags&1026&&(cn=ln.return),sn=ln.return;while(sn)}return ln.tag===3?cn:null}function $b(sn){if(sn.tag===13){var ln=sn.memoizedState;if(ln===null&&(sn=sn.alternate,sn!==null&&(ln=sn.memoizedState)),ln!==null)return ln.dehydrated}return null}function ac(sn){if(Zb(sn)!==sn)throw Error(y$c(188))}function bc(sn){var ln=sn.alternate;if(!ln){if(ln=Zb(sn),ln===null)throw Error(y$c(188));return ln!==sn?null:sn}for(var cn=sn,dn=ln;;){var pn=cn.return;if(pn===null)break;var vn=pn.alternate;if(vn===null){if(dn=pn.return,dn!==null){cn=dn;continue}break}if(pn.child===vn.child){for(vn=pn.child;vn;){if(vn===cn)return ac(pn),sn;if(vn===dn)return ac(pn),ln;vn=vn.sibling}throw Error(y$c(188))}if(cn.return!==dn.return)cn=pn,dn=vn;else{for(var kn=!1,Sn=pn.child;Sn;){if(Sn===cn){kn=!0,cn=pn,dn=vn;break}if(Sn===dn){kn=!0,dn=pn,cn=vn;break}Sn=Sn.sibling}if(!kn){for(Sn=vn.child;Sn;){if(Sn===cn){kn=!0,cn=vn,dn=pn;break}if(Sn===dn){kn=!0,dn=vn,cn=pn;break}Sn=Sn.sibling}if(!kn)throw Error(y$c(189))}}if(cn.alternate!==dn)throw Error(y$c(190))}if(cn.tag!==3)throw Error(y$c(188));return cn.stateNode.current===cn?sn:ln}function cc(sn){if(sn=bc(sn),!sn)return null;for(var ln=sn;;){if(ln.tag===5||ln.tag===6)return ln;if(ln.child)ln.child.return=ln,ln=ln.child;else{if(ln===sn)break;for(;!ln.sibling;){if(!ln.return||ln.return===sn)return null;ln=ln.return}ln.sibling.return=ln.return,ln=ln.sibling}}return null}function dc(sn,ln){for(var cn=sn.alternate;ln!==null;){if(ln===sn||ln===cn)return!0;ln=ln.return}return!1}var ec,fc,gc,hc,ic=!1,jc=[],kc=null,lc=null,mc=null,nc=new Map,oc=new Map,pc=[],qc="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rc(sn,ln,cn,dn,pn){return{blockedOn:sn,domEventName:ln,eventSystemFlags:cn|16,nativeEvent:pn,targetContainers:[dn]}}function sc(sn,ln){switch(sn){case"focusin":case"focusout":kc=null;break;case"dragenter":case"dragleave":lc=null;break;case"mouseover":case"mouseout":mc=null;break;case"pointerover":case"pointerout":nc.delete(ln.pointerId);break;case"gotpointercapture":case"lostpointercapture":oc.delete(ln.pointerId)}}function tc(sn,ln,cn,dn,pn,vn){return sn===null||sn.nativeEvent!==vn?(sn=rc(ln,cn,dn,pn,vn),ln!==null&&(ln=Cb(ln),ln!==null&&fc(ln)),sn):(sn.eventSystemFlags|=dn,ln=sn.targetContainers,pn!==null&&ln.indexOf(pn)===-1&&ln.push(pn),sn)}function uc(sn,ln,cn,dn,pn){switch(ln){case"focusin":return kc=tc(kc,sn,ln,cn,dn,pn),!0;case"dragenter":return lc=tc(lc,sn,ln,cn,dn,pn),!0;case"mouseover":return mc=tc(mc,sn,ln,cn,dn,pn),!0;case"pointerover":var vn=pn.pointerId;return nc.set(vn,tc(nc.get(vn)||null,sn,ln,cn,dn,pn)),!0;case"gotpointercapture":return vn=pn.pointerId,oc.set(vn,tc(oc.get(vn)||null,sn,ln,cn,dn,pn)),!0}return!1}function vc(sn){var ln=wc(sn.target);if(ln!==null){var cn=Zb(ln);if(cn!==null){if(ln=cn.tag,ln===13){if(ln=$b(cn),ln!==null){sn.blockedOn=ln,hc(sn.lanePriority,function(){r$8.unstable_runWithPriority(sn.priority,function(){gc(cn)})});return}}else if(ln===3&&cn.stateNode.hydrate){sn.blockedOn=cn.tag===3?cn.stateNode.containerInfo:null;return}}}sn.blockedOn=null}function xc(sn){if(sn.blockedOn!==null)return!1;for(var ln=sn.targetContainers;0<ln.length;){var cn=yc(sn.domEventName,sn.eventSystemFlags,ln[0],sn.nativeEvent);if(cn!==null)return ln=Cb(cn),ln!==null&&fc(ln),sn.blockedOn=cn,!1;ln.shift()}return!0}function zc(sn,ln,cn){xc(sn)&&cn.delete(ln)}function Ac(){for(ic=!1;0<jc.length;){var sn=jc[0];if(sn.blockedOn!==null){sn=Cb(sn.blockedOn),sn!==null&&ec(sn);break}for(var ln=sn.targetContainers;0<ln.length;){var cn=yc(sn.domEventName,sn.eventSystemFlags,ln[0],sn.nativeEvent);if(cn!==null){sn.blockedOn=cn;break}ln.shift()}sn.blockedOn===null&&jc.shift()}kc!==null&&xc(kc)&&(kc=null),lc!==null&&xc(lc)&&(lc=null),mc!==null&&xc(mc)&&(mc=null),nc.forEach(zc),oc.forEach(zc)}function Bc(sn,ln){sn.blockedOn===ln&&(sn.blockedOn=null,ic||(ic=!0,r$8.unstable_scheduleCallback(r$8.unstable_NormalPriority,Ac)))}function Cc(sn){function ln(pn){return Bc(pn,sn)}if(0<jc.length){Bc(jc[0],sn);for(var cn=1;cn<jc.length;cn++){var dn=jc[cn];dn.blockedOn===sn&&(dn.blockedOn=null)}}for(kc!==null&&Bc(kc,sn),lc!==null&&Bc(lc,sn),mc!==null&&Bc(mc,sn),nc.forEach(ln),oc.forEach(ln),cn=0;cn<pc.length;cn++)dn=pc[cn],dn.blockedOn===sn&&(dn.blockedOn=null);for(;0<pc.length&&(cn=pc[0],cn.blockedOn===null);)vc(cn),cn.blockedOn===null&&pc.shift()}function Dc(sn,ln){var cn={};return cn[sn.toLowerCase()]=ln.toLowerCase(),cn["Webkit"+sn]="webkit"+ln,cn["Moz"+sn]="moz"+ln,cn}var Ec={animationend:Dc("Animation","AnimationEnd"),animationiteration:Dc("Animation","AnimationIteration"),animationstart:Dc("Animation","AnimationStart"),transitionend:Dc("Transition","TransitionEnd")},Fc={},Gc={};fa$3&&(Gc=document.createElement("div").style,"AnimationEvent"in window||(delete Ec.animationend.animation,delete Ec.animationiteration.animation,delete Ec.animationstart.animation),"TransitionEvent"in window||delete Ec.transitionend.transition);function Hc(sn){if(Fc[sn])return Fc[sn];if(!Ec[sn])return sn;var ln=Ec[sn],cn;for(cn in ln)if(ln.hasOwnProperty(cn)&&cn in Gc)return Fc[sn]=ln[cn];return sn}var Ic=Hc("animationend"),Jc=Hc("animationiteration"),Kc=Hc("animationstart"),Lc=Hc("transitionend"),Mc=new Map,Nc=new Map,Oc=["abort","abort",Ic,"animationEnd",Jc,"animationIteration",Kc,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Lc,"transitionEnd","waiting","waiting"];function Pc(sn,ln){for(var cn=0;cn<sn.length;cn+=2){var dn=sn[cn],pn=sn[cn+1];pn="on"+(pn[0].toUpperCase()+pn.slice(1)),Nc.set(dn,ln),Mc.set(dn,pn),da$3(pn,[dn])}}var Qc=r$8.unstable_now;Qc();var F$b=8;function Rc(sn){if(1&sn)return F$b=15,1;if(2&sn)return F$b=14,2;if(4&sn)return F$b=13,4;var ln=24&sn;return ln!==0?(F$b=12,ln):sn&32?(F$b=11,32):(ln=192&sn,ln!==0?(F$b=10,ln):sn&256?(F$b=9,256):(ln=3584&sn,ln!==0?(F$b=8,ln):sn&4096?(F$b=7,4096):(ln=4186112&sn,ln!==0?(F$b=6,ln):(ln=62914560&sn,ln!==0?(F$b=5,ln):sn&67108864?(F$b=4,67108864):sn&134217728?(F$b=3,134217728):(ln=805306368&sn,ln!==0?(F$b=2,ln):1073741824&sn?(F$b=1,1073741824):(F$b=8,sn))))))}function Sc(sn){switch(sn){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function Tc(sn){switch(sn){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(y$c(358,sn))}}function Uc(sn,ln){var cn=sn.pendingLanes;if(cn===0)return F$b=0;var dn=0,pn=0,vn=sn.expiredLanes,kn=sn.suspendedLanes,Sn=sn.pingedLanes;if(vn!==0)dn=vn,pn=F$b=15;else if(vn=cn&134217727,vn!==0){var wn=vn&~kn;wn!==0?(dn=Rc(wn),pn=F$b):(Sn&=vn,Sn!==0&&(dn=Rc(Sn),pn=F$b))}else vn=cn&~kn,vn!==0?(dn=Rc(vn),pn=F$b):Sn!==0&&(dn=Rc(Sn),pn=F$b);if(dn===0)return 0;if(dn=31-Vc(dn),dn=cn&((0>dn?0:1<<dn)<<1)-1,ln!==0&&ln!==dn&&!(ln&kn)){if(Rc(ln),pn<=F$b)return ln;F$b=pn}if(ln=sn.entangledLanes,ln!==0)for(sn=sn.entanglements,ln&=dn;0<ln;)cn=31-Vc(ln),pn=1<<cn,dn|=sn[cn],ln&=~pn;return dn}function Wc(sn){return sn=sn.pendingLanes&-1073741825,sn!==0?sn:sn&1073741824?1073741824:0}function Xc(sn,ln){switch(sn){case 15:return 1;case 14:return 2;case 12:return sn=Yc(24&~ln),sn===0?Xc(10,ln):sn;case 10:return sn=Yc(192&~ln),sn===0?Xc(8,ln):sn;case 8:return sn=Yc(3584&~ln),sn===0&&(sn=Yc(4186112&~ln),sn===0&&(sn=512)),sn;case 2:return ln=Yc(805306368&~ln),ln===0&&(ln=268435456),ln}throw Error(y$c(358,sn))}function Yc(sn){return sn&-sn}function Zc(sn){for(var ln=[],cn=0;31>cn;cn++)ln.push(sn);return ln}function $c(sn,ln,cn){sn.pendingLanes|=ln;var dn=ln-1;sn.suspendedLanes&=dn,sn.pingedLanes&=dn,sn=sn.eventTimes,ln=31-Vc(ln),sn[ln]=cn}var Vc=Math.clz32?Math.clz32:ad,bd=Math.log,cd=Math.LN2;function ad(sn){return sn===0?32:31-(bd(sn)/cd|0)|0}var dd=r$8.unstable_UserBlockingPriority,ed=r$8.unstable_runWithPriority,fd=!0;function gd(sn,ln,cn,dn){Kb||Ib();var pn=hd,vn=Kb;Kb=!0;try{Hb(pn,sn,ln,cn,dn)}finally{(Kb=vn)||Mb()}}function id$2(sn,ln,cn,dn){ed(dd,hd.bind(null,sn,ln,cn,dn))}function hd(sn,ln,cn,dn){if(fd){var pn;if((pn=(ln&4)===0)&&0<jc.length&&-1<qc.indexOf(sn))sn=rc(null,sn,ln,cn,dn),jc.push(sn);else{var vn=yc(sn,ln,cn,dn);if(vn===null)pn&&sc(sn,dn);else{if(pn){if(-1<qc.indexOf(sn)){sn=rc(vn,sn,ln,cn,dn),jc.push(sn);return}if(uc(vn,sn,ln,cn,dn))return;sc(sn,dn)}jd(sn,ln,dn,null,cn)}}}}function yc(sn,ln,cn,dn){var pn=xb(dn);if(pn=wc(pn),pn!==null){var vn=Zb(pn);if(vn===null)pn=null;else{var kn=vn.tag;if(kn===13){if(pn=$b(vn),pn!==null)return pn;pn=null}else if(kn===3){if(vn.stateNode.hydrate)return vn.tag===3?vn.stateNode.containerInfo:null;pn=null}else vn!==pn&&(pn=null)}}return jd(sn,ln,dn,pn,cn),null}var kd=null,ld=null,md=null;function nd(){if(md)return md;var sn,ln=ld,cn=ln.length,dn,pn="value"in kd?kd.value:kd.textContent,vn=pn.length;for(sn=0;sn<cn&&ln[sn]===pn[sn];sn++);var kn=cn-sn;for(dn=1;dn<=kn&&ln[cn-dn]===pn[vn-dn];dn++);return md=pn.slice(sn,1<dn?1-dn:void 0)}function od(sn){var ln=sn.keyCode;return"charCode"in sn?(sn=sn.charCode,sn===0&&ln===13&&(sn=13)):sn=ln,sn===10&&(sn=13),32<=sn||sn===13?sn:0}function pd(){return!0}function qd(){return!1}function rd(sn){function ln(cn,dn,pn,vn,kn){this._reactName=cn,this._targetInst=pn,this.type=dn,this.nativeEvent=vn,this.target=kn,this.currentTarget=null;for(var Sn in sn)sn.hasOwnProperty(Sn)&&(cn=sn[Sn],this[Sn]=cn?cn(vn):vn[Sn]);return this.isDefaultPrevented=(vn.defaultPrevented!=null?vn.defaultPrevented:vn.returnValue===!1)?pd:qd,this.isPropagationStopped=qd,this}return m$c(ln.prototype,{preventDefault:function(){this.defaultPrevented=!0;var cn=this.nativeEvent;cn&&(cn.preventDefault?cn.preventDefault():typeof cn.returnValue!="unknown"&&(cn.returnValue=!1),this.isDefaultPrevented=pd)},stopPropagation:function(){var cn=this.nativeEvent;cn&&(cn.stopPropagation?cn.stopPropagation():typeof cn.cancelBubble!="unknown"&&(cn.cancelBubble=!0),this.isPropagationStopped=pd)},persist:function(){},isPersistent:pd}),ln}var sd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(sn){return sn.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td=rd(sd),ud=m$c({},sd,{view:0,detail:0}),vd=rd(ud),wd,xd,yd,Ad=m$c({},ud,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(sn){return sn.relatedTarget===void 0?sn.fromElement===sn.srcElement?sn.toElement:sn.fromElement:sn.relatedTarget},movementX:function(sn){return"movementX"in sn?sn.movementX:(sn!==yd&&(yd&&sn.type==="mousemove"?(wd=sn.screenX-yd.screenX,xd=sn.screenY-yd.screenY):xd=wd=0,yd=sn),wd)},movementY:function(sn){return"movementY"in sn?sn.movementY:xd}}),Bd=rd(Ad),Cd=m$c({},Ad,{dataTransfer:0}),Dd=rd(Cd),Ed=m$c({},ud,{relatedTarget:0}),Fd=rd(Ed),Gd=m$c({},sd,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd=rd(Gd),Id=m$c({},sd,{clipboardData:function(sn){return"clipboardData"in sn?sn.clipboardData:window.clipboardData}}),Jd=rd(Id),Kd=m$c({},sd,{data:0}),Ld=rd(Kd),Md={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd(sn){var ln=this.nativeEvent;return ln.getModifierState?ln.getModifierState(sn):(sn=Od[sn])?!!ln[sn]:!1}function zd(){return Pd}var Qd=m$c({},ud,{key:function(sn){if(sn.key){var ln=Md[sn.key]||sn.key;if(ln!=="Unidentified")return ln}return sn.type==="keypress"?(sn=od(sn),sn===13?"Enter":String.fromCharCode(sn)):sn.type==="keydown"||sn.type==="keyup"?Nd[sn.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(sn){return sn.type==="keypress"?od(sn):0},keyCode:function(sn){return sn.type==="keydown"||sn.type==="keyup"?sn.keyCode:0},which:function(sn){return sn.type==="keypress"?od(sn):sn.type==="keydown"||sn.type==="keyup"?sn.keyCode:0}}),Rd=rd(Qd),Sd=m$c({},Ad,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td=rd(Sd),Ud=m$c({},ud,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Vd=rd(Ud),Wd=m$c({},sd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd=rd(Wd),Yd=m$c({},Ad,{deltaX:function(sn){return"deltaX"in sn?sn.deltaX:"wheelDeltaX"in sn?-sn.wheelDeltaX:0},deltaY:function(sn){return"deltaY"in sn?sn.deltaY:"wheelDeltaY"in sn?-sn.wheelDeltaY:"wheelDelta"in sn?-sn.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd=rd(Yd),$d=[9,13,27,32],ae$5=fa$3&&"CompositionEvent"in window,be$5=null;fa$3&&"documentMode"in document&&(be$5=document.documentMode);var ce$5=fa$3&&"TextEvent"in window&&!be$5,de$5=fa$3&&(!ae$5||be$5&&8<be$5&&11>=be$5),ee$5=String.fromCharCode(32),fe$5=!1;function ge$5(sn,ln){switch(sn){case"keyup":return $d.indexOf(ln.keyCode)!==-1;case"keydown":return ln.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$5(sn){return sn=sn.detail,typeof sn=="object"&&"data"in sn?sn.data:null}var ie$5=!1;function je$5(sn,ln){switch(sn){case"compositionend":return he$5(ln);case"keypress":return ln.which!==32?null:(fe$5=!0,ee$5);case"textInput":return sn=ln.data,sn===ee$5&&fe$5?null:sn;default:return null}}function ke$5(sn,ln){if(ie$5)return sn==="compositionend"||!ae$5&&ge$5(sn,ln)?(sn=nd(),md=ld=kd=null,ie$5=!1,sn):null;switch(sn){case"paste":return null;case"keypress":if(!(ln.ctrlKey||ln.altKey||ln.metaKey)||ln.ctrlKey&&ln.altKey){if(ln.char&&1<ln.char.length)return ln.char;if(ln.which)return String.fromCharCode(ln.which)}return null;case"compositionend":return de$5&&ln.locale!=="ko"?null:ln.data;default:return null}}var le$5={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$5(sn){var ln=sn&&sn.nodeName&&sn.nodeName.toLowerCase();return ln==="input"?!!le$5[sn.type]:ln==="textarea"}function ne$5(sn,ln,cn,dn){Eb(dn),ln=oe$5(ln,"onChange"),0<ln.length&&(cn=new td("onChange","change",null,cn,dn),sn.push({event:cn,listeners:ln}))}var pe$5=null,qe$5=null;function re$5(sn){se$5(sn,0)}function te$5(sn){var ln=ue$5(sn);if(Wa$2(ln))return sn}function ve$5(sn,ln){if(sn==="change")return ln}var we$5=!1;if(fa$3){var xe$5;if(fa$3){var ye$5="oninput"in document;if(!ye$5){var ze$5=document.createElement("div");ze$5.setAttribute("oninput","return;"),ye$5=typeof ze$5.oninput=="function"}xe$5=ye$5}else xe$5=!1;we$5=xe$5&&(!document.documentMode||9<document.documentMode)}function Ae$5(){pe$5&&(pe$5.detachEvent("onpropertychange",Be$4),qe$5=pe$5=null)}function Be$4(sn){if(sn.propertyName==="value"&&te$5(qe$5)){var ln=[];if(ne$5(ln,qe$5,sn,xb(sn)),sn=re$5,Kb)sn(ln);else{Kb=!0;try{Gb(sn,ln)}finally{Kb=!1,Mb()}}}}function Ce$5(sn,ln,cn){sn==="focusin"?(Ae$5(),pe$5=ln,qe$5=cn,pe$5.attachEvent("onpropertychange",Be$4)):sn==="focusout"&&Ae$5()}function De$4(sn){if(sn==="selectionchange"||sn==="keyup"||sn==="keydown")return te$5(qe$5)}function Ee$5(sn,ln){if(sn==="click")return te$5(ln)}function Fe$4(sn,ln){if(sn==="input"||sn==="change")return te$5(ln)}function Ge$4(sn,ln){return sn===ln&&(sn!==0||1/sn===1/ln)||sn!==sn&&ln!==ln}var He$4=typeof Object.is=="function"?Object.is:Ge$4,Ie$5=Object.prototype.hasOwnProperty;function Je$4(sn,ln){if(He$4(sn,ln))return!0;if(typeof sn!="object"||sn===null||typeof ln!="object"||ln===null)return!1;var cn=Object.keys(sn),dn=Object.keys(ln);if(cn.length!==dn.length)return!1;for(dn=0;dn<cn.length;dn++)if(!Ie$5.call(ln,cn[dn])||!He$4(sn[cn[dn]],ln[cn[dn]]))return!1;return!0}function Ke$4(sn){for(;sn&&sn.firstChild;)sn=sn.firstChild;return sn}function Le$5(sn,ln){var cn=Ke$4(sn);sn=0;for(var dn;cn;){if(cn.nodeType===3){if(dn=sn+cn.textContent.length,sn<=ln&&dn>=ln)return{node:cn,offset:ln-sn};sn=dn}e:{for(;cn;){if(cn.nextSibling){cn=cn.nextSibling;break e}cn=cn.parentNode}cn=void 0}cn=Ke$4(cn)}}function Me$5(sn,ln){return sn&&ln?sn===ln?!0:sn&&sn.nodeType===3?!1:ln&&ln.nodeType===3?Me$5(sn,ln.parentNode):"contains"in sn?sn.contains(ln):sn.compareDocumentPosition?!!(sn.compareDocumentPosition(ln)&16):!1:!1}function Ne$4(){for(var sn=window,ln=Xa$2();ln instanceof sn.HTMLIFrameElement;){try{var cn=typeof ln.contentWindow.location.href=="string"}catch{cn=!1}if(cn)sn=ln.contentWindow;else break;ln=Xa$2(sn.document)}return ln}function Oe$5(sn){var ln=sn&&sn.nodeName&&sn.nodeName.toLowerCase();return ln&&(ln==="input"&&(sn.type==="text"||sn.type==="search"||sn.type==="tel"||sn.type==="url"||sn.type==="password")||ln==="textarea"||sn.contentEditable==="true")}var Pe$5=fa$3&&"documentMode"in document&&11>=document.documentMode,Qe$4=null,Re$3=null,Se$5=null,Te$5=!1;function Ue$5(sn,ln,cn){var dn=cn.window===cn?cn.document:cn.nodeType===9?cn:cn.ownerDocument;Te$5||Qe$4==null||Qe$4!==Xa$2(dn)||(dn=Qe$4,"selectionStart"in dn&&Oe$5(dn)?dn={start:dn.selectionStart,end:dn.selectionEnd}:(dn=(dn.ownerDocument&&dn.ownerDocument.defaultView||window).getSelection(),dn={anchorNode:dn.anchorNode,anchorOffset:dn.anchorOffset,focusNode:dn.focusNode,focusOffset:dn.focusOffset}),Se$5&&Je$4(Se$5,dn)||(Se$5=dn,dn=oe$5(Re$3,"onSelect"),0<dn.length&&(ln=new td("onSelect","select",null,ln,cn),sn.push({event:ln,listeners:dn}),ln.target=Qe$4)))}Pc("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Pc("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Pc(Oc,2);for(var Ve$5="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),We$4=0;We$4<Ve$5.length;We$4++)Nc.set(Ve$5[We$4],0);ea$3("onMouseEnter",["mouseout","mouseover"]);ea$3("onMouseLeave",["mouseout","mouseover"]);ea$3("onPointerEnter",["pointerout","pointerover"]);ea$3("onPointerLeave",["pointerout","pointerover"]);da$3("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));da$3("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));da$3("onBeforeInput",["compositionend","keypress","textInput","paste"]);da$3("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));da$3("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));da$3("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xe$4="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ye$4=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xe$4));function Ze$4(sn,ln,cn){var dn=sn.type||"unknown-event";sn.currentTarget=cn,Yb(dn,ln,void 0,sn),sn.currentTarget=null}function se$5(sn,ln){ln=(ln&4)!==0;for(var cn=0;cn<sn.length;cn++){var dn=sn[cn],pn=dn.event;dn=dn.listeners;e:{var vn=void 0;if(ln)for(var kn=dn.length-1;0<=kn;kn--){var Sn=dn[kn],wn=Sn.instance,Pn=Sn.currentTarget;if(Sn=Sn.listener,wn!==vn&&pn.isPropagationStopped())break e;Ze$4(pn,Sn,Pn),vn=wn}else for(kn=0;kn<dn.length;kn++){if(Sn=dn[kn],wn=Sn.instance,Pn=Sn.currentTarget,Sn=Sn.listener,wn!==vn&&pn.isPropagationStopped())break e;Ze$4(pn,Sn,Pn),vn=wn}}}if(Ub)throw sn=Vb,Ub=!1,Vb=null,sn}function G$9(sn,ln){var cn=$e$4(ln),dn=sn+"__bubble";cn.has(dn)||(af$2(ln,sn,2,!1),cn.add(dn))}var bf$1="_reactListening"+Math.random().toString(36).slice(2);function cf$1(sn){sn[bf$1]||(sn[bf$1]=!0,ba$3.forEach(function(ln){Ye$4.has(ln)||df$1(ln,!1,sn,null),df$1(ln,!0,sn,null)}))}function df$1(sn,ln,cn,dn){var pn=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,vn=cn;if(sn==="selectionchange"&&cn.nodeType!==9&&(vn=cn.ownerDocument),dn!==null&&!ln&&Ye$4.has(sn)){if(sn!=="scroll")return;pn|=2,vn=dn}var kn=$e$4(vn),Sn=sn+"__"+(ln?"capture":"bubble");kn.has(Sn)||(ln&&(pn|=4),af$2(vn,sn,pn,ln),kn.add(Sn))}function af$2(sn,ln,cn,dn){var pn=Nc.get(ln);switch(pn===void 0?2:pn){case 0:pn=gd;break;case 1:pn=id$2;break;default:pn=hd}cn=pn.bind(null,ln,cn,sn),pn=void 0,!Pb||ln!=="touchstart"&&ln!=="touchmove"&&ln!=="wheel"||(pn=!0),dn?pn!==void 0?sn.addEventListener(ln,cn,{capture:!0,passive:pn}):sn.addEventListener(ln,cn,!0):pn!==void 0?sn.addEventListener(ln,cn,{passive:pn}):sn.addEventListener(ln,cn,!1)}function jd(sn,ln,cn,dn,pn){var vn=dn;if(!(ln&1)&&!(ln&2)&&dn!==null)e:for(;;){if(dn===null)return;var kn=dn.tag;if(kn===3||kn===4){var Sn=dn.stateNode.containerInfo;if(Sn===pn||Sn.nodeType===8&&Sn.parentNode===pn)break;if(kn===4)for(kn=dn.return;kn!==null;){var wn=kn.tag;if((wn===3||wn===4)&&(wn=kn.stateNode.containerInfo,wn===pn||wn.nodeType===8&&wn.parentNode===pn))return;kn=kn.return}for(;Sn!==null;){if(kn=wc(Sn),kn===null)return;if(wn=kn.tag,wn===5||wn===6){dn=vn=kn;continue e}Sn=Sn.parentNode}}dn=dn.return}Nb(function(){var Pn=vn,Nn=xb(cn),Ln=[];e:{var Fn=Mc.get(sn);if(Fn!==void 0){var zn=td,Dn=sn;switch(sn){case"keypress":if(od(cn)===0)break e;case"keydown":case"keyup":zn=Rd;break;case"focusin":Dn="focus",zn=Fd;break;case"focusout":Dn="blur",zn=Fd;break;case"beforeblur":case"afterblur":zn=Fd;break;case"click":if(cn.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":zn=Bd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":zn=Dd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":zn=Vd;break;case Ic:case Jc:case Kc:zn=Hd;break;case Lc:zn=Xd;break;case"scroll":zn=vd;break;case"wheel":zn=Zd;break;case"copy":case"cut":case"paste":zn=Jd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":zn=Td}var Kn=(ln&4)!==0,qn=!Kn&&sn==="scroll",Zn=Kn?Fn!==null?Fn+"Capture":null:Fn;Kn=[];for(var Yn=Pn,Jn;Yn!==null;){Jn=Yn;var rs=Jn.stateNode;if(Jn.tag===5&&rs!==null&&(Jn=rs,Zn!==null&&(rs=Ob(Yn,Zn),rs!=null&&Kn.push(ef$1(Yn,rs,Jn)))),qn)break;Yn=Yn.return}0<Kn.length&&(Fn=new zn(Fn,Dn,null,cn,Nn),Ln.push({event:Fn,listeners:Kn}))}}if(!(ln&7)){e:{if(Fn=sn==="mouseover"||sn==="pointerover",zn=sn==="mouseout"||sn==="pointerout",Fn&&!(ln&16)&&(Dn=cn.relatedTarget||cn.fromElement)&&(wc(Dn)||Dn[ff$2]))break e;if((zn||Fn)&&(Fn=Nn.window===Nn?Nn:(Fn=Nn.ownerDocument)?Fn.defaultView||Fn.parentWindow:window,zn?(Dn=cn.relatedTarget||cn.toElement,zn=Pn,Dn=Dn?wc(Dn):null,Dn!==null&&(qn=Zb(Dn),Dn!==qn||Dn.tag!==5&&Dn.tag!==6)&&(Dn=null)):(zn=null,Dn=Pn),zn!==Dn)){if(Kn=Bd,rs="onMouseLeave",Zn="onMouseEnter",Yn="mouse",(sn==="pointerout"||sn==="pointerover")&&(Kn=Td,rs="onPointerLeave",Zn="onPointerEnter",Yn="pointer"),qn=zn==null?Fn:ue$5(zn),Jn=Dn==null?Fn:ue$5(Dn),Fn=new Kn(rs,Yn+"leave",zn,cn,Nn),Fn.target=qn,Fn.relatedTarget=Jn,rs=null,wc(Nn)===Pn&&(Kn=new Kn(Zn,Yn+"enter",Dn,cn,Nn),Kn.target=Jn,Kn.relatedTarget=qn,rs=Kn),qn=rs,zn&&Dn)t:{for(Kn=zn,Zn=Dn,Yn=0,Jn=Kn;Jn;Jn=gf$1(Jn))Yn++;for(Jn=0,rs=Zn;rs;rs=gf$1(rs))Jn++;for(;0<Yn-Jn;)Kn=gf$1(Kn),Yn--;for(;0<Jn-Yn;)Zn=gf$1(Zn),Jn--;for(;Yn--;){if(Kn===Zn||Zn!==null&&Kn===Zn.alternate)break t;Kn=gf$1(Kn),Zn=gf$1(Zn)}Kn=null}else Kn=null;zn!==null&&hf$1(Ln,Fn,zn,Kn,!1),Dn!==null&&qn!==null&&hf$1(Ln,qn,Dn,Kn,!0)}}e:{if(Fn=Pn?ue$5(Pn):window,zn=Fn.nodeName&&Fn.nodeName.toLowerCase(),zn==="select"||zn==="input"&&Fn.type==="file")var ss=ve$5;else if(me$5(Fn))if(we$5)ss=Fe$4;else{ss=De$4;var as=Ce$5}else(zn=Fn.nodeName)&&zn.toLowerCase()==="input"&&(Fn.type==="checkbox"||Fn.type==="radio")&&(ss=Ee$5);if(ss&&(ss=ss(sn,Pn))){ne$5(Ln,ss,cn,Nn);break e}as&&as(sn,Fn,Pn),sn==="focusout"&&(as=Fn._wrapperState)&&as.controlled&&Fn.type==="number"&&bb(Fn,"number",Fn.value)}switch(as=Pn?ue$5(Pn):window,sn){case"focusin":(me$5(as)||as.contentEditable==="true")&&(Qe$4=as,Re$3=Pn,Se$5=null);break;case"focusout":Se$5=Re$3=Qe$4=null;break;case"mousedown":Te$5=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$5=!1,Ue$5(Ln,cn,Nn);break;case"selectionchange":if(Pe$5)break;case"keydown":case"keyup":Ue$5(Ln,cn,Nn)}var ds;if(ae$5)e:{switch(sn){case"compositionstart":var Es="onCompositionStart";break e;case"compositionend":Es="onCompositionEnd";break e;case"compositionupdate":Es="onCompositionUpdate";break e}Es=void 0}else ie$5?ge$5(sn,cn)&&(Es="onCompositionEnd"):sn==="keydown"&&cn.keyCode===229&&(Es="onCompositionStart");Es&&(de$5&&cn.locale!=="ko"&&(ie$5||Es!=="onCompositionStart"?Es==="onCompositionEnd"&&ie$5&&(ds=nd()):(kd=Nn,ld="value"in kd?kd.value:kd.textContent,ie$5=!0)),as=oe$5(Pn,Es),0<as.length&&(Es=new Ld(Es,sn,null,cn,Nn),Ln.push({event:Es,listeners:as}),ds?Es.data=ds:(ds=he$5(cn),ds!==null&&(Es.data=ds)))),(ds=ce$5?je$5(sn,cn):ke$5(sn,cn))&&(Pn=oe$5(Pn,"onBeforeInput"),0<Pn.length&&(Nn=new Ld("onBeforeInput","beforeinput",null,cn,Nn),Ln.push({event:Nn,listeners:Pn}),Nn.data=ds))}se$5(Ln,ln)})}function ef$1(sn,ln,cn){return{instance:sn,listener:ln,currentTarget:cn}}function oe$5(sn,ln){for(var cn=ln+"Capture",dn=[];sn!==null;){var pn=sn,vn=pn.stateNode;pn.tag===5&&vn!==null&&(pn=vn,vn=Ob(sn,cn),vn!=null&&dn.unshift(ef$1(sn,vn,pn)),vn=Ob(sn,ln),vn!=null&&dn.push(ef$1(sn,vn,pn))),sn=sn.return}return dn}function gf$1(sn){if(sn===null)return null;do sn=sn.return;while(sn&&sn.tag!==5);return sn||null}function hf$1(sn,ln,cn,dn,pn){for(var vn=ln._reactName,kn=[];cn!==null&&cn!==dn;){var Sn=cn,wn=Sn.alternate,Pn=Sn.stateNode;if(wn!==null&&wn===dn)break;Sn.tag===5&&Pn!==null&&(Sn=Pn,pn?(wn=Ob(cn,vn),wn!=null&&kn.unshift(ef$1(cn,wn,Sn))):pn||(wn=Ob(cn,vn),wn!=null&&kn.push(ef$1(cn,wn,Sn)))),cn=cn.return}kn.length!==0&&sn.push({event:ln,listeners:kn})}function jf$1(){}var kf=null,lf$1=null;function mf$1(sn,ln){switch(sn){case"button":case"input":case"select":case"textarea":return!!ln.autoFocus}return!1}function nf$1(sn,ln){return sn==="textarea"||sn==="option"||sn==="noscript"||typeof ln.children=="string"||typeof ln.children=="number"||typeof ln.dangerouslySetInnerHTML=="object"&&ln.dangerouslySetInnerHTML!==null&&ln.dangerouslySetInnerHTML.__html!=null}var of$1=typeof setTimeout=="function"?setTimeout:void 0,pf$1=typeof clearTimeout=="function"?clearTimeout:void 0;function qf$1(sn){sn.nodeType===1?sn.textContent="":sn.nodeType===9&&(sn=sn.body,sn!=null&&(sn.textContent=""))}function rf$1(sn){for(;sn!=null;sn=sn.nextSibling){var ln=sn.nodeType;if(ln===1||ln===3)break}return sn}function sf$2(sn){sn=sn.previousSibling;for(var ln=0;sn;){if(sn.nodeType===8){var cn=sn.data;if(cn==="$"||cn==="$!"||cn==="$?"){if(ln===0)return sn;ln--}else cn==="/$"&&ln++}sn=sn.previousSibling}return null}var tf$1=0;function uf$1(sn){return{$$typeof:Ga$2,toString:sn,valueOf:sn}}var vf$1=Math.random().toString(36).slice(2),wf$1="__reactFiber$"+vf$1,xf$1="__reactProps$"+vf$1,ff$2="__reactContainer$"+vf$1,yf$1="__reactEvents$"+vf$1;function wc(sn){var ln=sn[wf$1];if(ln)return ln;for(var cn=sn.parentNode;cn;){if(ln=cn[ff$2]||cn[wf$1]){if(cn=ln.alternate,ln.child!==null||cn!==null&&cn.child!==null)for(sn=sf$2(sn);sn!==null;){if(cn=sn[wf$1])return cn;sn=sf$2(sn)}return ln}sn=cn,cn=sn.parentNode}return null}function Cb(sn){return sn=sn[wf$1]||sn[ff$2],!sn||sn.tag!==5&&sn.tag!==6&&sn.tag!==13&&sn.tag!==3?null:sn}function ue$5(sn){if(sn.tag===5||sn.tag===6)return sn.stateNode;throw Error(y$c(33))}function Db(sn){return sn[xf$1]||null}function $e$4(sn){var ln=sn[yf$1];return ln===void 0&&(ln=sn[yf$1]=new Set),ln}var zf$1=[],Af$1=-1;function Bf$1(sn){return{current:sn}}function H$b(sn){0>Af$1||(sn.current=zf$1[Af$1],zf$1[Af$1]=null,Af$1--)}function I$c(sn,ln){Af$1++,zf$1[Af$1]=sn.current,sn.current=ln}var Cf$1={},M$9=Bf$1(Cf$1),N$9=Bf$1(!1),Df=Cf$1;function Ef$1(sn,ln){var cn=sn.type.contextTypes;if(!cn)return Cf$1;var dn=sn.stateNode;if(dn&&dn.__reactInternalMemoizedUnmaskedChildContext===ln)return dn.__reactInternalMemoizedMaskedChildContext;var pn={},vn;for(vn in cn)pn[vn]=ln[vn];return dn&&(sn=sn.stateNode,sn.__reactInternalMemoizedUnmaskedChildContext=ln,sn.__reactInternalMemoizedMaskedChildContext=pn),pn}function Ff$1(sn){return sn=sn.childContextTypes,sn!=null}function Gf(){H$b(N$9),H$b(M$9)}function Hf(sn,ln,cn){if(M$9.current!==Cf$1)throw Error(y$c(168));I$c(M$9,ln),I$c(N$9,cn)}function If$1(sn,ln,cn){var dn=sn.stateNode;if(sn=ln.childContextTypes,typeof dn.getChildContext!="function")return cn;dn=dn.getChildContext();for(var pn in dn)if(!(pn in sn))throw Error(y$c(108,Ra$3(ln)||"Unknown",pn));return m$c({},cn,dn)}function Jf(sn){return sn=(sn=sn.stateNode)&&sn.__reactInternalMemoizedMergedChildContext||Cf$1,Df=M$9.current,I$c(M$9,sn),I$c(N$9,N$9.current),!0}function Kf$1(sn,ln,cn){var dn=sn.stateNode;if(!dn)throw Error(y$c(169));cn?(sn=If$1(sn,ln,Df),dn.__reactInternalMemoizedMergedChildContext=sn,H$b(N$9),H$b(M$9),I$c(M$9,sn)):H$b(N$9),I$c(N$9,cn)}var Lf=null,Mf$1=null,Nf$1=r$8.unstable_runWithPriority,Of$1=r$8.unstable_scheduleCallback,Pf$1=r$8.unstable_cancelCallback,Qf$1=r$8.unstable_shouldYield,Rf$1=r$8.unstable_requestPaint,Sf$1=r$8.unstable_now,Tf$1=r$8.unstable_getCurrentPriorityLevel,Uf=r$8.unstable_ImmediatePriority,Vf=r$8.unstable_UserBlockingPriority,Wf$1=r$8.unstable_NormalPriority,Xf$1=r$8.unstable_LowPriority,Yf$1=r$8.unstable_IdlePriority,Zf$1={},$f$1=Rf$1!==void 0?Rf$1:function(){},ag=null,bg=null,cg=!1,dg=Sf$1(),O$a=1e4>dg?Sf$1:function(){return Sf$1()-dg};function eg(){switch(Tf$1()){case Uf:return 99;case Vf:return 98;case Wf$1:return 97;case Xf$1:return 96;case Yf$1:return 95;default:throw Error(y$c(332))}}function fg(sn){switch(sn){case 99:return Uf;case 98:return Vf;case 97:return Wf$1;case 96:return Xf$1;case 95:return Yf$1;default:throw Error(y$c(332))}}function gg(sn,ln){return sn=fg(sn),Nf$1(sn,ln)}function hg(sn,ln,cn){return sn=fg(sn),Of$1(sn,ln,cn)}function ig(){if(bg!==null){var sn=bg;bg=null,Pf$1(sn)}jg()}function jg(){if(!cg&&ag!==null){cg=!0;var sn=0;try{var ln=ag;gg(99,function(){for(;sn<ln.length;sn++){var cn=ln[sn];do cn=cn(!0);while(cn!==null)}}),ag=null}catch(cn){throw ag!==null&&(ag=ag.slice(sn+1)),Of$1(Uf,ig),cn}finally{cg=!1}}}var kg=ra$3.ReactCurrentBatchConfig;function lg(sn,ln){if(sn&&sn.defaultProps){ln=m$c({},ln),sn=sn.defaultProps;for(var cn in sn)ln[cn]===void 0&&(ln[cn]=sn[cn]);return ln}return ln}var mg=Bf$1(null),ng=null,og=null,pg=null;function qg(){pg=og=ng=null}function rg(sn){var ln=mg.current;H$b(mg),sn.type._context._currentValue=ln}function sg(sn,ln){for(;sn!==null;){var cn=sn.alternate;if((sn.childLanes&ln)===ln){if(cn===null||(cn.childLanes&ln)===ln)break;cn.childLanes|=ln}else sn.childLanes|=ln,cn!==null&&(cn.childLanes|=ln);sn=sn.return}}function tg(sn,ln){ng=sn,pg=og=null,sn=sn.dependencies,sn!==null&&sn.firstContext!==null&&(sn.lanes&ln&&(ug=!0),sn.firstContext=null)}function vg(sn,ln){if(pg!==sn&&ln!==!1&&ln!==0)if((typeof ln!="number"||ln===1073741823)&&(pg=sn,ln=1073741823),ln={context:sn,observedBits:ln,next:null},og===null){if(ng===null)throw Error(y$c(308));og=ln,ng.dependencies={lanes:0,firstContext:ln,responders:null}}else og=og.next=ln;return sn._currentValue}var wg=!1;function xg(sn){sn.updateQueue={baseState:sn.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function yg(sn,ln){sn=sn.updateQueue,ln.updateQueue===sn&&(ln.updateQueue={baseState:sn.baseState,firstBaseUpdate:sn.firstBaseUpdate,lastBaseUpdate:sn.lastBaseUpdate,shared:sn.shared,effects:sn.effects})}function zg(sn,ln){return{eventTime:sn,lane:ln,tag:0,payload:null,callback:null,next:null}}function Ag(sn,ln){if(sn=sn.updateQueue,sn!==null){sn=sn.shared;var cn=sn.pending;cn===null?ln.next=ln:(ln.next=cn.next,cn.next=ln),sn.pending=ln}}function Bg(sn,ln){var cn=sn.updateQueue,dn=sn.alternate;if(dn!==null&&(dn=dn.updateQueue,cn===dn)){var pn=null,vn=null;if(cn=cn.firstBaseUpdate,cn!==null){do{var kn={eventTime:cn.eventTime,lane:cn.lane,tag:cn.tag,payload:cn.payload,callback:cn.callback,next:null};vn===null?pn=vn=kn:vn=vn.next=kn,cn=cn.next}while(cn!==null);vn===null?pn=vn=ln:vn=vn.next=ln}else pn=vn=ln;cn={baseState:dn.baseState,firstBaseUpdate:pn,lastBaseUpdate:vn,shared:dn.shared,effects:dn.effects},sn.updateQueue=cn;return}sn=cn.lastBaseUpdate,sn===null?cn.firstBaseUpdate=ln:sn.next=ln,cn.lastBaseUpdate=ln}function Cg(sn,ln,cn,dn){var pn=sn.updateQueue;wg=!1;var vn=pn.firstBaseUpdate,kn=pn.lastBaseUpdate,Sn=pn.shared.pending;if(Sn!==null){pn.shared.pending=null;var wn=Sn,Pn=wn.next;wn.next=null,kn===null?vn=Pn:kn.next=Pn,kn=wn;var Nn=sn.alternate;if(Nn!==null){Nn=Nn.updateQueue;var Ln=Nn.lastBaseUpdate;Ln!==kn&&(Ln===null?Nn.firstBaseUpdate=Pn:Ln.next=Pn,Nn.lastBaseUpdate=wn)}}if(vn!==null){Ln=pn.baseState,kn=0,Nn=Pn=wn=null;do{Sn=vn.lane;var Fn=vn.eventTime;if((dn&Sn)===Sn){Nn!==null&&(Nn=Nn.next={eventTime:Fn,lane:0,tag:vn.tag,payload:vn.payload,callback:vn.callback,next:null});e:{var zn=sn,Dn=vn;switch(Sn=ln,Fn=cn,Dn.tag){case 1:if(zn=Dn.payload,typeof zn=="function"){Ln=zn.call(Fn,Ln,Sn);break e}Ln=zn;break e;case 3:zn.flags=zn.flags&-4097|64;case 0:if(zn=Dn.payload,Sn=typeof zn=="function"?zn.call(Fn,Ln,Sn):zn,Sn==null)break e;Ln=m$c({},Ln,Sn);break e;case 2:wg=!0}}vn.callback!==null&&(sn.flags|=32,Sn=pn.effects,Sn===null?pn.effects=[vn]:Sn.push(vn))}else Fn={eventTime:Fn,lane:Sn,tag:vn.tag,payload:vn.payload,callback:vn.callback,next:null},Nn===null?(Pn=Nn=Fn,wn=Ln):Nn=Nn.next=Fn,kn|=Sn;if(vn=vn.next,vn===null){if(Sn=pn.shared.pending,Sn===null)break;vn=Sn.next,Sn.next=null,pn.lastBaseUpdate=Sn,pn.shared.pending=null}}while(1);Nn===null&&(wn=Ln),pn.baseState=wn,pn.firstBaseUpdate=Pn,pn.lastBaseUpdate=Nn,Dg|=kn,sn.lanes=kn,sn.memoizedState=Ln}}function Eg(sn,ln,cn){if(sn=ln.effects,ln.effects=null,sn!==null)for(ln=0;ln<sn.length;ln++){var dn=sn[ln],pn=dn.callback;if(pn!==null){if(dn.callback=null,dn=cn,typeof pn!="function")throw Error(y$c(191,pn));pn.call(dn)}}}var Fg=new aa$3.Component().refs;function Gg(sn,ln,cn,dn){ln=sn.memoizedState,cn=cn(dn,ln),cn=cn==null?ln:m$c({},ln,cn),sn.memoizedState=cn,sn.lanes===0&&(sn.updateQueue.baseState=cn)}var Kg={isMounted:function(sn){return(sn=sn._reactInternals)?Zb(sn)===sn:!1},enqueueSetState:function(sn,ln,cn){sn=sn._reactInternals;var dn=Hg(),pn=Ig(sn),vn=zg(dn,pn);vn.payload=ln,cn!=null&&(vn.callback=cn),Ag(sn,vn),Jg(sn,pn,dn)},enqueueReplaceState:function(sn,ln,cn){sn=sn._reactInternals;var dn=Hg(),pn=Ig(sn),vn=zg(dn,pn);vn.tag=1,vn.payload=ln,cn!=null&&(vn.callback=cn),Ag(sn,vn),Jg(sn,pn,dn)},enqueueForceUpdate:function(sn,ln){sn=sn._reactInternals;var cn=Hg(),dn=Ig(sn),pn=zg(cn,dn);pn.tag=2,ln!=null&&(pn.callback=ln),Ag(sn,pn),Jg(sn,dn,cn)}};function Lg(sn,ln,cn,dn,pn,vn,kn){return sn=sn.stateNode,typeof sn.shouldComponentUpdate=="function"?sn.shouldComponentUpdate(dn,vn,kn):ln.prototype&&ln.prototype.isPureReactComponent?!Je$4(cn,dn)||!Je$4(pn,vn):!0}function Mg(sn,ln,cn){var dn=!1,pn=Cf$1,vn=ln.contextType;return typeof vn=="object"&&vn!==null?vn=vg(vn):(pn=Ff$1(ln)?Df:M$9.current,dn=ln.contextTypes,vn=(dn=dn!=null)?Ef$1(sn,pn):Cf$1),ln=new ln(cn,vn),sn.memoizedState=ln.state!==null&&ln.state!==void 0?ln.state:null,ln.updater=Kg,sn.stateNode=ln,ln._reactInternals=sn,dn&&(sn=sn.stateNode,sn.__reactInternalMemoizedUnmaskedChildContext=pn,sn.__reactInternalMemoizedMaskedChildContext=vn),ln}function Ng(sn,ln,cn,dn){sn=ln.state,typeof ln.componentWillReceiveProps=="function"&&ln.componentWillReceiveProps(cn,dn),typeof ln.UNSAFE_componentWillReceiveProps=="function"&&ln.UNSAFE_componentWillReceiveProps(cn,dn),ln.state!==sn&&Kg.enqueueReplaceState(ln,ln.state,null)}function Og(sn,ln,cn,dn){var pn=sn.stateNode;pn.props=cn,pn.state=sn.memoizedState,pn.refs=Fg,xg(sn);var vn=ln.contextType;typeof vn=="object"&&vn!==null?pn.context=vg(vn):(vn=Ff$1(ln)?Df:M$9.current,pn.context=Ef$1(sn,vn)),Cg(sn,cn,pn,dn),pn.state=sn.memoizedState,vn=ln.getDerivedStateFromProps,typeof vn=="function"&&(Gg(sn,ln,vn,cn),pn.state=sn.memoizedState),typeof ln.getDerivedStateFromProps=="function"||typeof pn.getSnapshotBeforeUpdate=="function"||typeof pn.UNSAFE_componentWillMount!="function"&&typeof pn.componentWillMount!="function"||(ln=pn.state,typeof pn.componentWillMount=="function"&&pn.componentWillMount(),typeof pn.UNSAFE_componentWillMount=="function"&&pn.UNSAFE_componentWillMount(),ln!==pn.state&&Kg.enqueueReplaceState(pn,pn.state,null),Cg(sn,cn,pn,dn),pn.state=sn.memoizedState),typeof pn.componentDidMount=="function"&&(sn.flags|=4)}var Pg=Array.isArray;function Qg(sn,ln,cn){if(sn=cn.ref,sn!==null&&typeof sn!="function"&&typeof sn!="object"){if(cn._owner){if(cn=cn._owner,cn){if(cn.tag!==1)throw Error(y$c(309));var dn=cn.stateNode}if(!dn)throw Error(y$c(147,sn));var pn=""+sn;return ln!==null&&ln.ref!==null&&typeof ln.ref=="function"&&ln.ref._stringRef===pn?ln.ref:(ln=function(vn){var kn=dn.refs;kn===Fg&&(kn=dn.refs={}),vn===null?delete kn[pn]:kn[pn]=vn},ln._stringRef=pn,ln)}if(typeof sn!="string")throw Error(y$c(284));if(!cn._owner)throw Error(y$c(290,sn))}return sn}function Rg(sn,ln){if(sn.type!=="textarea")throw Error(y$c(31,Object.prototype.toString.call(ln)==="[object Object]"?"object with keys {"+Object.keys(ln).join(", ")+"}":ln))}function Sg(sn){function ln(qn,Zn){if(sn){var Yn=qn.lastEffect;Yn!==null?(Yn.nextEffect=Zn,qn.lastEffect=Zn):qn.firstEffect=qn.lastEffect=Zn,Zn.nextEffect=null,Zn.flags=8}}function cn(qn,Zn){if(!sn)return null;for(;Zn!==null;)ln(qn,Zn),Zn=Zn.sibling;return null}function dn(qn,Zn){for(qn=new Map;Zn!==null;)Zn.key!==null?qn.set(Zn.key,Zn):qn.set(Zn.index,Zn),Zn=Zn.sibling;return qn}function pn(qn,Zn){return qn=Tg(qn,Zn),qn.index=0,qn.sibling=null,qn}function vn(qn,Zn,Yn){return qn.index=Yn,sn?(Yn=qn.alternate,Yn!==null?(Yn=Yn.index,Yn<Zn?(qn.flags=2,Zn):Yn):(qn.flags=2,Zn)):Zn}function kn(qn){return sn&&qn.alternate===null&&(qn.flags=2),qn}function Sn(qn,Zn,Yn,Jn){return Zn===null||Zn.tag!==6?(Zn=Ug(Yn,qn.mode,Jn),Zn.return=qn,Zn):(Zn=pn(Zn,Yn),Zn.return=qn,Zn)}function wn(qn,Zn,Yn,Jn){return Zn!==null&&Zn.elementType===Yn.type?(Jn=pn(Zn,Yn.props),Jn.ref=Qg(qn,Zn,Yn),Jn.return=qn,Jn):(Jn=Vg(Yn.type,Yn.key,Yn.props,null,qn.mode,Jn),Jn.ref=Qg(qn,Zn,Yn),Jn.return=qn,Jn)}function Pn(qn,Zn,Yn,Jn){return Zn===null||Zn.tag!==4||Zn.stateNode.containerInfo!==Yn.containerInfo||Zn.stateNode.implementation!==Yn.implementation?(Zn=Wg(Yn,qn.mode,Jn),Zn.return=qn,Zn):(Zn=pn(Zn,Yn.children||[]),Zn.return=qn,Zn)}function Nn(qn,Zn,Yn,Jn,rs){return Zn===null||Zn.tag!==7?(Zn=Xg(Yn,qn.mode,Jn,rs),Zn.return=qn,Zn):(Zn=pn(Zn,Yn),Zn.return=qn,Zn)}function Ln(qn,Zn,Yn){if(typeof Zn=="string"||typeof Zn=="number")return Zn=Ug(""+Zn,qn.mode,Yn),Zn.return=qn,Zn;if(typeof Zn=="object"&&Zn!==null){switch(Zn.$$typeof){case sa$3:return Yn=Vg(Zn.type,Zn.key,Zn.props,null,qn.mode,Yn),Yn.ref=Qg(qn,null,Zn),Yn.return=qn,Yn;case ta$3:return Zn=Wg(Zn,qn.mode,Yn),Zn.return=qn,Zn}if(Pg(Zn)||La$3(Zn))return Zn=Xg(Zn,qn.mode,Yn,null),Zn.return=qn,Zn;Rg(qn,Zn)}return null}function Fn(qn,Zn,Yn,Jn){var rs=Zn!==null?Zn.key:null;if(typeof Yn=="string"||typeof Yn=="number")return rs!==null?null:Sn(qn,Zn,""+Yn,Jn);if(typeof Yn=="object"&&Yn!==null){switch(Yn.$$typeof){case sa$3:return Yn.key===rs?Yn.type===ua$3?Nn(qn,Zn,Yn.props.children,Jn,rs):wn(qn,Zn,Yn,Jn):null;case ta$3:return Yn.key===rs?Pn(qn,Zn,Yn,Jn):null}if(Pg(Yn)||La$3(Yn))return rs!==null?null:Nn(qn,Zn,Yn,Jn,null);Rg(qn,Yn)}return null}function zn(qn,Zn,Yn,Jn,rs){if(typeof Jn=="string"||typeof Jn=="number")return qn=qn.get(Yn)||null,Sn(Zn,qn,""+Jn,rs);if(typeof Jn=="object"&&Jn!==null){switch(Jn.$$typeof){case sa$3:return qn=qn.get(Jn.key===null?Yn:Jn.key)||null,Jn.type===ua$3?Nn(Zn,qn,Jn.props.children,rs,Jn.key):wn(Zn,qn,Jn,rs);case ta$3:return qn=qn.get(Jn.key===null?Yn:Jn.key)||null,Pn(Zn,qn,Jn,rs)}if(Pg(Jn)||La$3(Jn))return qn=qn.get(Yn)||null,Nn(Zn,qn,Jn,rs,null);Rg(Zn,Jn)}return null}function Dn(qn,Zn,Yn,Jn){for(var rs=null,ss=null,as=Zn,ds=Zn=0,Es=null;as!==null&&ds<Yn.length;ds++){as.index>ds?(Es=as,as=null):Es=as.sibling;var Ss=Fn(qn,as,Yn[ds],Jn);if(Ss===null){as===null&&(as=Es);break}sn&&as&&Ss.alternate===null&&ln(qn,as),Zn=vn(Ss,Zn,ds),ss===null?rs=Ss:ss.sibling=Ss,ss=Ss,as=Es}if(ds===Yn.length)return cn(qn,as),rs;if(as===null){for(;ds<Yn.length;ds++)as=Ln(qn,Yn[ds],Jn),as!==null&&(Zn=vn(as,Zn,ds),ss===null?rs=as:ss.sibling=as,ss=as);return rs}for(as=dn(qn,as);ds<Yn.length;ds++)Es=zn(as,qn,ds,Yn[ds],Jn),Es!==null&&(sn&&Es.alternate!==null&&as.delete(Es.key===null?ds:Es.key),Zn=vn(Es,Zn,ds),ss===null?rs=Es:ss.sibling=Es,ss=Es);return sn&&as.forEach(function(Qn){return ln(qn,Qn)}),rs}function Kn(qn,Zn,Yn,Jn){var rs=La$3(Yn);if(typeof rs!="function")throw Error(y$c(150));if(Yn=rs.call(Yn),Yn==null)throw Error(y$c(151));for(var ss=rs=null,as=Zn,ds=Zn=0,Es=null,Ss=Yn.next();as!==null&&!Ss.done;ds++,Ss=Yn.next()){as.index>ds?(Es=as,as=null):Es=as.sibling;var Qn=Fn(qn,as,Ss.value,Jn);if(Qn===null){as===null&&(as=Es);break}sn&&as&&Qn.alternate===null&&ln(qn,as),Zn=vn(Qn,Zn,ds),ss===null?rs=Qn:ss.sibling=Qn,ss=Qn,as=Es}if(Ss.done)return cn(qn,as),rs;if(as===null){for(;!Ss.done;ds++,Ss=Yn.next())Ss=Ln(qn,Ss.value,Jn),Ss!==null&&(Zn=vn(Ss,Zn,ds),ss===null?rs=Ss:ss.sibling=Ss,ss=Ss);return rs}for(as=dn(qn,as);!Ss.done;ds++,Ss=Yn.next())Ss=zn(as,qn,ds,Ss.value,Jn),Ss!==null&&(sn&&Ss.alternate!==null&&as.delete(Ss.key===null?ds:Ss.key),Zn=vn(Ss,Zn,ds),ss===null?rs=Ss:ss.sibling=Ss,ss=Ss);return sn&&as.forEach(function(ms){return ln(qn,ms)}),rs}return function(qn,Zn,Yn,Jn){var rs=typeof Yn=="object"&&Yn!==null&&Yn.type===ua$3&&Yn.key===null;rs&&(Yn=Yn.props.children);var ss=typeof Yn=="object"&&Yn!==null;if(ss)switch(Yn.$$typeof){case sa$3:e:{for(ss=Yn.key,rs=Zn;rs!==null;){if(rs.key===ss){switch(rs.tag){case 7:if(Yn.type===ua$3){cn(qn,rs.sibling),Zn=pn(rs,Yn.props.children),Zn.return=qn,qn=Zn;break e}break;default:if(rs.elementType===Yn.type){cn(qn,rs.sibling),Zn=pn(rs,Yn.props),Zn.ref=Qg(qn,rs,Yn),Zn.return=qn,qn=Zn;break e}}cn(qn,rs);break}else ln(qn,rs);rs=rs.sibling}Yn.type===ua$3?(Zn=Xg(Yn.props.children,qn.mode,Jn,Yn.key),Zn.return=qn,qn=Zn):(Jn=Vg(Yn.type,Yn.key,Yn.props,null,qn.mode,Jn),Jn.ref=Qg(qn,Zn,Yn),Jn.return=qn,qn=Jn)}return kn(qn);case ta$3:e:{for(rs=Yn.key;Zn!==null;){if(Zn.key===rs)if(Zn.tag===4&&Zn.stateNode.containerInfo===Yn.containerInfo&&Zn.stateNode.implementation===Yn.implementation){cn(qn,Zn.sibling),Zn=pn(Zn,Yn.children||[]),Zn.return=qn,qn=Zn;break e}else{cn(qn,Zn);break}else ln(qn,Zn);Zn=Zn.sibling}Zn=Wg(Yn,qn.mode,Jn),Zn.return=qn,qn=Zn}return kn(qn)}if(typeof Yn=="string"||typeof Yn=="number")return Yn=""+Yn,Zn!==null&&Zn.tag===6?(cn(qn,Zn.sibling),Zn=pn(Zn,Yn),Zn.return=qn,qn=Zn):(cn(qn,Zn),Zn=Ug(Yn,qn.mode,Jn),Zn.return=qn,qn=Zn),kn(qn);if(Pg(Yn))return Dn(qn,Zn,Yn,Jn);if(La$3(Yn))return Kn(qn,Zn,Yn,Jn);if(ss&&Rg(qn,Yn),typeof Yn>"u"&&!rs)switch(qn.tag){case 1:case 22:case 0:case 11:case 15:throw Error(y$c(152,Ra$3(qn.type)||"Component"))}return cn(qn,Zn)}}var Yg=Sg(!0),Zg=Sg(!1),$g={},ah=Bf$1($g),bh=Bf$1($g),ch=Bf$1($g);function dh(sn){if(sn===$g)throw Error(y$c(174));return sn}function eh(sn,ln){switch(I$c(ch,ln),I$c(bh,sn),I$c(ah,$g),sn=ln.nodeType,sn){case 9:case 11:ln=(ln=ln.documentElement)?ln.namespaceURI:mb(null,"");break;default:sn=sn===8?ln.parentNode:ln,ln=sn.namespaceURI||null,sn=sn.tagName,ln=mb(ln,sn)}H$b(ah),I$c(ah,ln)}function fh(){H$b(ah),H$b(bh),H$b(ch)}function gh(sn){dh(ch.current);var ln=dh(ah.current),cn=mb(ln,sn.type);ln!==cn&&(I$c(bh,sn),I$c(ah,cn))}function hh(sn){bh.current===sn&&(H$b(ah),H$b(bh))}var P$8=Bf$1(0);function ih(sn){for(var ln=sn;ln!==null;){if(ln.tag===13){var cn=ln.memoizedState;if(cn!==null&&(cn=cn.dehydrated,cn===null||cn.data==="$?"||cn.data==="$!"))return ln}else if(ln.tag===19&&ln.memoizedProps.revealOrder!==void 0){if(ln.flags&64)return ln}else if(ln.child!==null){ln.child.return=ln,ln=ln.child;continue}if(ln===sn)break;for(;ln.sibling===null;){if(ln.return===null||ln.return===sn)return null;ln=ln.return}ln.sibling.return=ln.return,ln=ln.sibling}return null}var jh=null,kh=null,lh=!1;function mh(sn,ln){var cn=nh(5,null,null,0);cn.elementType="DELETED",cn.type="DELETED",cn.stateNode=ln,cn.return=sn,cn.flags=8,sn.lastEffect!==null?(sn.lastEffect.nextEffect=cn,sn.lastEffect=cn):sn.firstEffect=sn.lastEffect=cn}function oh(sn,ln){switch(sn.tag){case 5:var cn=sn.type;return ln=ln.nodeType!==1||cn.toLowerCase()!==ln.nodeName.toLowerCase()?null:ln,ln!==null?(sn.stateNode=ln,!0):!1;case 6:return ln=sn.pendingProps===""||ln.nodeType!==3?null:ln,ln!==null?(sn.stateNode=ln,!0):!1;case 13:return!1;default:return!1}}function ph(sn){if(lh){var ln=kh;if(ln){var cn=ln;if(!oh(sn,ln)){if(ln=rf$1(cn.nextSibling),!ln||!oh(sn,ln)){sn.flags=sn.flags&-1025|2,lh=!1,jh=sn;return}mh(jh,cn)}jh=sn,kh=rf$1(ln.firstChild)}else sn.flags=sn.flags&-1025|2,lh=!1,jh=sn}}function qh(sn){for(sn=sn.return;sn!==null&&sn.tag!==5&&sn.tag!==3&&sn.tag!==13;)sn=sn.return;jh=sn}function rh(sn){if(sn!==jh)return!1;if(!lh)return qh(sn),lh=!0,!1;var ln=sn.type;if(sn.tag!==5||ln!=="head"&&ln!=="body"&&!nf$1(ln,sn.memoizedProps))for(ln=kh;ln;)mh(sn,ln),ln=rf$1(ln.nextSibling);if(qh(sn),sn.tag===13){if(sn=sn.memoizedState,sn=sn!==null?sn.dehydrated:null,!sn)throw Error(y$c(317));e:{for(sn=sn.nextSibling,ln=0;sn;){if(sn.nodeType===8){var cn=sn.data;if(cn==="/$"){if(ln===0){kh=rf$1(sn.nextSibling);break e}ln--}else cn!=="$"&&cn!=="$!"&&cn!=="$?"||ln++}sn=sn.nextSibling}kh=null}}else kh=jh?rf$1(sn.stateNode.nextSibling):null;return!0}function sh(){kh=jh=null,lh=!1}var th=[];function uh(){for(var sn=0;sn<th.length;sn++)th[sn]._workInProgressVersionPrimary=null;th.length=0}var vh=ra$3.ReactCurrentDispatcher,wh=ra$3.ReactCurrentBatchConfig,xh=0,R$8=null,S$9=null,T$b=null,yh=!1,zh=!1;function Ah(){throw Error(y$c(321))}function Bh(sn,ln){if(ln===null)return!1;for(var cn=0;cn<ln.length&&cn<sn.length;cn++)if(!He$4(sn[cn],ln[cn]))return!1;return!0}function Ch(sn,ln,cn,dn,pn,vn){if(xh=vn,R$8=ln,ln.memoizedState=null,ln.updateQueue=null,ln.lanes=0,vh.current=sn===null||sn.memoizedState===null?Dh:Eh,sn=cn(dn,pn),zh){vn=0;do{if(zh=!1,!(25>vn))throw Error(y$c(301));vn+=1,T$b=S$9=null,ln.updateQueue=null,vh.current=Fh,sn=cn(dn,pn)}while(zh)}if(vh.current=Gh,ln=S$9!==null&&S$9.next!==null,xh=0,T$b=S$9=R$8=null,yh=!1,ln)throw Error(y$c(300));return sn}function Hh(){var sn={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return T$b===null?R$8.memoizedState=T$b=sn:T$b=T$b.next=sn,T$b}function Ih(){if(S$9===null){var sn=R$8.alternate;sn=sn!==null?sn.memoizedState:null}else sn=S$9.next;var ln=T$b===null?R$8.memoizedState:T$b.next;if(ln!==null)T$b=ln,S$9=sn;else{if(sn===null)throw Error(y$c(310));S$9=sn,sn={memoizedState:S$9.memoizedState,baseState:S$9.baseState,baseQueue:S$9.baseQueue,queue:S$9.queue,next:null},T$b===null?R$8.memoizedState=T$b=sn:T$b=T$b.next=sn}return T$b}function Jh(sn,ln){return typeof ln=="function"?ln(sn):ln}function Kh(sn){var ln=Ih(),cn=ln.queue;if(cn===null)throw Error(y$c(311));cn.lastRenderedReducer=sn;var dn=S$9,pn=dn.baseQueue,vn=cn.pending;if(vn!==null){if(pn!==null){var kn=pn.next;pn.next=vn.next,vn.next=kn}dn.baseQueue=pn=vn,cn.pending=null}if(pn!==null){pn=pn.next,dn=dn.baseState;var Sn=kn=vn=null,wn=pn;do{var Pn=wn.lane;if((xh&Pn)===Pn)Sn!==null&&(Sn=Sn.next={lane:0,action:wn.action,eagerReducer:wn.eagerReducer,eagerState:wn.eagerState,next:null}),dn=wn.eagerReducer===sn?wn.eagerState:sn(dn,wn.action);else{var Nn={lane:Pn,action:wn.action,eagerReducer:wn.eagerReducer,eagerState:wn.eagerState,next:null};Sn===null?(kn=Sn=Nn,vn=dn):Sn=Sn.next=Nn,R$8.lanes|=Pn,Dg|=Pn}wn=wn.next}while(wn!==null&&wn!==pn);Sn===null?vn=dn:Sn.next=kn,He$4(dn,ln.memoizedState)||(ug=!0),ln.memoizedState=dn,ln.baseState=vn,ln.baseQueue=Sn,cn.lastRenderedState=dn}return[ln.memoizedState,cn.dispatch]}function Lh(sn){var ln=Ih(),cn=ln.queue;if(cn===null)throw Error(y$c(311));cn.lastRenderedReducer=sn;var dn=cn.dispatch,pn=cn.pending,vn=ln.memoizedState;if(pn!==null){cn.pending=null;var kn=pn=pn.next;do vn=sn(vn,kn.action),kn=kn.next;while(kn!==pn);He$4(vn,ln.memoizedState)||(ug=!0),ln.memoizedState=vn,ln.baseQueue===null&&(ln.baseState=vn),cn.lastRenderedState=vn}return[vn,dn]}function Mh(sn,ln,cn){var dn=ln._getVersion;dn=dn(ln._source);var pn=ln._workInProgressVersionPrimary;if(pn!==null?sn=pn===dn:(sn=sn.mutableReadLanes,(sn=(xh&sn)===sn)&&(ln._workInProgressVersionPrimary=dn,th.push(ln))),sn)return cn(ln._source);throw th.push(ln),Error(y$c(350))}function Nh(sn,ln,cn,dn){var pn=U$8;if(pn===null)throw Error(y$c(349));var vn=ln._getVersion,kn=vn(ln._source),Sn=vh.current,wn=Sn.useState(function(){return Mh(pn,ln,cn)}),Pn=wn[1],Nn=wn[0];wn=T$b;var Ln=sn.memoizedState,Fn=Ln.refs,zn=Fn.getSnapshot,Dn=Ln.source;Ln=Ln.subscribe;var Kn=R$8;return sn.memoizedState={refs:Fn,source:ln,subscribe:dn},Sn.useEffect(function(){Fn.getSnapshot=cn,Fn.setSnapshot=Pn;var qn=vn(ln._source);if(!He$4(kn,qn)){qn=cn(ln._source),He$4(Nn,qn)||(Pn(qn),qn=Ig(Kn),pn.mutableReadLanes|=qn&pn.pendingLanes),qn=pn.mutableReadLanes,pn.entangledLanes|=qn;for(var Zn=pn.entanglements,Yn=qn;0<Yn;){var Jn=31-Vc(Yn),rs=1<<Jn;Zn[Jn]|=qn,Yn&=~rs}}},[cn,ln,dn]),Sn.useEffect(function(){return dn(ln._source,function(){var qn=Fn.getSnapshot,Zn=Fn.setSnapshot;try{Zn(qn(ln._source));var Yn=Ig(Kn);pn.mutableReadLanes|=Yn&pn.pendingLanes}catch(Jn){Zn(function(){throw Jn})}})},[ln,dn]),He$4(zn,cn)&&He$4(Dn,ln)&&He$4(Ln,dn)||(sn={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:Nn},sn.dispatch=Pn=Oh.bind(null,R$8,sn),wn.queue=sn,wn.baseQueue=null,Nn=Mh(pn,ln,cn),wn.memoizedState=wn.baseState=Nn),Nn}function Ph(sn,ln,cn){var dn=Ih();return Nh(dn,sn,ln,cn)}function Qh(sn){var ln=Hh();return typeof sn=="function"&&(sn=sn()),ln.memoizedState=ln.baseState=sn,sn=ln.queue={pending:null,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:sn},sn=sn.dispatch=Oh.bind(null,R$8,sn),[ln.memoizedState,sn]}function Rh(sn,ln,cn,dn){return sn={tag:sn,create:ln,destroy:cn,deps:dn,next:null},ln=R$8.updateQueue,ln===null?(ln={lastEffect:null},R$8.updateQueue=ln,ln.lastEffect=sn.next=sn):(cn=ln.lastEffect,cn===null?ln.lastEffect=sn.next=sn:(dn=cn.next,cn.next=sn,sn.next=dn,ln.lastEffect=sn)),sn}function Sh(sn){var ln=Hh();return sn={current:sn},ln.memoizedState=sn}function Th(){return Ih().memoizedState}function Uh(sn,ln,cn,dn){var pn=Hh();R$8.flags|=sn,pn.memoizedState=Rh(1|ln,cn,void 0,dn===void 0?null:dn)}function Vh(sn,ln,cn,dn){var pn=Ih();dn=dn===void 0?null:dn;var vn=void 0;if(S$9!==null){var kn=S$9.memoizedState;if(vn=kn.destroy,dn!==null&&Bh(dn,kn.deps)){Rh(ln,cn,vn,dn);return}}R$8.flags|=sn,pn.memoizedState=Rh(1|ln,cn,vn,dn)}function Wh(sn,ln){return Uh(516,4,sn,ln)}function Xh(sn,ln){return Vh(516,4,sn,ln)}function Yh(sn,ln){return Vh(4,2,sn,ln)}function Zh(sn,ln){if(typeof ln=="function")return sn=sn(),ln(sn),function(){ln(null)};if(ln!=null)return sn=sn(),ln.current=sn,function(){ln.current=null}}function $h(sn,ln,cn){return cn=cn!=null?cn.concat([sn]):null,Vh(4,2,Zh.bind(null,ln,sn),cn)}function ai(){}function bi(sn,ln){var cn=Ih();ln=ln===void 0?null:ln;var dn=cn.memoizedState;return dn!==null&&ln!==null&&Bh(ln,dn[1])?dn[0]:(cn.memoizedState=[sn,ln],sn)}function ci(sn,ln){var cn=Ih();ln=ln===void 0?null:ln;var dn=cn.memoizedState;return dn!==null&&ln!==null&&Bh(ln,dn[1])?dn[0]:(sn=sn(),cn.memoizedState=[sn,ln],sn)}function di(sn,ln){var cn=eg();gg(98>cn?98:cn,function(){sn(!0)}),gg(97<cn?97:cn,function(){var dn=wh.transition;wh.transition=1;try{sn(!1),ln()}finally{wh.transition=dn}})}function Oh(sn,ln,cn){var dn=Hg(),pn=Ig(sn),vn={lane:pn,action:cn,eagerReducer:null,eagerState:null,next:null},kn=ln.pending;if(kn===null?vn.next=vn:(vn.next=kn.next,kn.next=vn),ln.pending=vn,kn=sn.alternate,sn===R$8||kn!==null&&kn===R$8)zh=yh=!0;else{if(sn.lanes===0&&(kn===null||kn.lanes===0)&&(kn=ln.lastRenderedReducer,kn!==null))try{var Sn=ln.lastRenderedState,wn=kn(Sn,cn);if(vn.eagerReducer=kn,vn.eagerState=wn,He$4(wn,Sn))return}catch{}finally{}Jg(sn,pn,dn)}}var Gh={readContext:vg,useCallback:Ah,useContext:Ah,useEffect:Ah,useImperativeHandle:Ah,useLayoutEffect:Ah,useMemo:Ah,useReducer:Ah,useRef:Ah,useState:Ah,useDebugValue:Ah,useDeferredValue:Ah,useTransition:Ah,useMutableSource:Ah,useOpaqueIdentifier:Ah,unstable_isNewReconciler:!1},Dh={readContext:vg,useCallback:function(sn,ln){return Hh().memoizedState=[sn,ln===void 0?null:ln],sn},useContext:vg,useEffect:Wh,useImperativeHandle:function(sn,ln,cn){return cn=cn!=null?cn.concat([sn]):null,Uh(4,2,Zh.bind(null,ln,sn),cn)},useLayoutEffect:function(sn,ln){return Uh(4,2,sn,ln)},useMemo:function(sn,ln){var cn=Hh();return ln=ln===void 0?null:ln,sn=sn(),cn.memoizedState=[sn,ln],sn},useReducer:function(sn,ln,cn){var dn=Hh();return ln=cn!==void 0?cn(ln):ln,dn.memoizedState=dn.baseState=ln,sn=dn.queue={pending:null,dispatch:null,lastRenderedReducer:sn,lastRenderedState:ln},sn=sn.dispatch=Oh.bind(null,R$8,sn),[dn.memoizedState,sn]},useRef:Sh,useState:Qh,useDebugValue:ai,useDeferredValue:function(sn){var ln=Qh(sn),cn=ln[0],dn=ln[1];return Wh(function(){var pn=wh.transition;wh.transition=1;try{dn(sn)}finally{wh.transition=pn}},[sn]),cn},useTransition:function(){var sn=Qh(!1),ln=sn[0];return sn=di.bind(null,sn[1]),Sh(sn),[sn,ln]},useMutableSource:function(sn,ln,cn){var dn=Hh();return dn.memoizedState={refs:{getSnapshot:ln,setSnapshot:null},source:sn,subscribe:cn},Nh(dn,sn,ln,cn)},useOpaqueIdentifier:function(){if(lh){var sn=!1,ln=uf$1(function(){throw sn||(sn=!0,cn("r:"+(tf$1++).toString(36))),Error(y$c(355))}),cn=Qh(ln)[1];return!(R$8.mode&2)&&(R$8.flags|=516,Rh(5,function(){cn("r:"+(tf$1++).toString(36))},void 0,null)),ln}return ln="r:"+(tf$1++).toString(36),Qh(ln),ln},unstable_isNewReconciler:!1},Eh={readContext:vg,useCallback:bi,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci,useReducer:Kh,useRef:Th,useState:function(){return Kh(Jh)},useDebugValue:ai,useDeferredValue:function(sn){var ln=Kh(Jh),cn=ln[0],dn=ln[1];return Xh(function(){var pn=wh.transition;wh.transition=1;try{dn(sn)}finally{wh.transition=pn}},[sn]),cn},useTransition:function(){var sn=Kh(Jh)[0];return[Th().current,sn]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Kh(Jh)[0]},unstable_isNewReconciler:!1},Fh={readContext:vg,useCallback:bi,useContext:vg,useEffect:Xh,useImperativeHandle:$h,useLayoutEffect:Yh,useMemo:ci,useReducer:Lh,useRef:Th,useState:function(){return Lh(Jh)},useDebugValue:ai,useDeferredValue:function(sn){var ln=Lh(Jh),cn=ln[0],dn=ln[1];return Xh(function(){var pn=wh.transition;wh.transition=1;try{dn(sn)}finally{wh.transition=pn}},[sn]),cn},useTransition:function(){var sn=Lh(Jh)[0];return[Th().current,sn]},useMutableSource:Ph,useOpaqueIdentifier:function(){return Lh(Jh)[0]},unstable_isNewReconciler:!1},ei=ra$3.ReactCurrentOwner,ug=!1;function fi(sn,ln,cn,dn){ln.child=sn===null?Zg(ln,null,cn,dn):Yg(ln,sn.child,cn,dn)}function gi(sn,ln,cn,dn,pn){cn=cn.render;var vn=ln.ref;return tg(ln,pn),dn=Ch(sn,ln,cn,dn,vn,pn),sn!==null&&!ug?(ln.updateQueue=sn.updateQueue,ln.flags&=-517,sn.lanes&=~pn,hi(sn,ln,pn)):(ln.flags|=1,fi(sn,ln,dn,pn),ln.child)}function ii(sn,ln,cn,dn,pn,vn){if(sn===null){var kn=cn.type;return typeof kn=="function"&&!ji(kn)&&kn.defaultProps===void 0&&cn.compare===null&&cn.defaultProps===void 0?(ln.tag=15,ln.type=kn,ki(sn,ln,kn,dn,pn,vn)):(sn=Vg(cn.type,null,dn,ln,ln.mode,vn),sn.ref=ln.ref,sn.return=ln,ln.child=sn)}return kn=sn.child,!(pn&vn)&&(pn=kn.memoizedProps,cn=cn.compare,cn=cn!==null?cn:Je$4,cn(pn,dn)&&sn.ref===ln.ref)?hi(sn,ln,vn):(ln.flags|=1,sn=Tg(kn,dn),sn.ref=ln.ref,sn.return=ln,ln.child=sn)}function ki(sn,ln,cn,dn,pn,vn){if(sn!==null&&Je$4(sn.memoizedProps,dn)&&sn.ref===ln.ref)if(ug=!1,(vn&pn)!==0)sn.flags&16384&&(ug=!0);else return ln.lanes=sn.lanes,hi(sn,ln,vn);return li(sn,ln,cn,dn,vn)}function mi(sn,ln,cn){var dn=ln.pendingProps,pn=dn.children,vn=sn!==null?sn.memoizedState:null;if(dn.mode==="hidden"||dn.mode==="unstable-defer-without-hiding")if(!(ln.mode&4))ln.memoizedState={baseLanes:0},ni(ln,cn);else if(cn&1073741824)ln.memoizedState={baseLanes:0},ni(ln,vn!==null?vn.baseLanes:cn);else return sn=vn!==null?vn.baseLanes|cn:cn,ln.lanes=ln.childLanes=1073741824,ln.memoizedState={baseLanes:sn},ni(ln,sn),null;else vn!==null?(dn=vn.baseLanes|cn,ln.memoizedState=null):dn=cn,ni(ln,dn);return fi(sn,ln,pn,cn),ln.child}function oi(sn,ln){var cn=ln.ref;(sn===null&&cn!==null||sn!==null&&sn.ref!==cn)&&(ln.flags|=128)}function li(sn,ln,cn,dn,pn){var vn=Ff$1(cn)?Df:M$9.current;return vn=Ef$1(ln,vn),tg(ln,pn),cn=Ch(sn,ln,cn,dn,vn,pn),sn!==null&&!ug?(ln.updateQueue=sn.updateQueue,ln.flags&=-517,sn.lanes&=~pn,hi(sn,ln,pn)):(ln.flags|=1,fi(sn,ln,cn,pn),ln.child)}function pi(sn,ln,cn,dn,pn){if(Ff$1(cn)){var vn=!0;Jf(ln)}else vn=!1;if(tg(ln,pn),ln.stateNode===null)sn!==null&&(sn.alternate=null,ln.alternate=null,ln.flags|=2),Mg(ln,cn,dn),Og(ln,cn,dn,pn),dn=!0;else if(sn===null){var kn=ln.stateNode,Sn=ln.memoizedProps;kn.props=Sn;var wn=kn.context,Pn=cn.contextType;typeof Pn=="object"&&Pn!==null?Pn=vg(Pn):(Pn=Ff$1(cn)?Df:M$9.current,Pn=Ef$1(ln,Pn));var Nn=cn.getDerivedStateFromProps,Ln=typeof Nn=="function"||typeof kn.getSnapshotBeforeUpdate=="function";Ln||typeof kn.UNSAFE_componentWillReceiveProps!="function"&&typeof kn.componentWillReceiveProps!="function"||(Sn!==dn||wn!==Pn)&&Ng(ln,kn,dn,Pn),wg=!1;var Fn=ln.memoizedState;kn.state=Fn,Cg(ln,dn,kn,pn),wn=ln.memoizedState,Sn!==dn||Fn!==wn||N$9.current||wg?(typeof Nn=="function"&&(Gg(ln,cn,Nn,dn),wn=ln.memoizedState),(Sn=wg||Lg(ln,cn,Sn,dn,Fn,wn,Pn))?(Ln||typeof kn.UNSAFE_componentWillMount!="function"&&typeof kn.componentWillMount!="function"||(typeof kn.componentWillMount=="function"&&kn.componentWillMount(),typeof kn.UNSAFE_componentWillMount=="function"&&kn.UNSAFE_componentWillMount()),typeof kn.componentDidMount=="function"&&(ln.flags|=4)):(typeof kn.componentDidMount=="function"&&(ln.flags|=4),ln.memoizedProps=dn,ln.memoizedState=wn),kn.props=dn,kn.state=wn,kn.context=Pn,dn=Sn):(typeof kn.componentDidMount=="function"&&(ln.flags|=4),dn=!1)}else{kn=ln.stateNode,yg(sn,ln),Sn=ln.memoizedProps,Pn=ln.type===ln.elementType?Sn:lg(ln.type,Sn),kn.props=Pn,Ln=ln.pendingProps,Fn=kn.context,wn=cn.contextType,typeof wn=="object"&&wn!==null?wn=vg(wn):(wn=Ff$1(cn)?Df:M$9.current,wn=Ef$1(ln,wn));var zn=cn.getDerivedStateFromProps;(Nn=typeof zn=="function"||typeof kn.getSnapshotBeforeUpdate=="function")||typeof kn.UNSAFE_componentWillReceiveProps!="function"&&typeof kn.componentWillReceiveProps!="function"||(Sn!==Ln||Fn!==wn)&&Ng(ln,kn,dn,wn),wg=!1,Fn=ln.memoizedState,kn.state=Fn,Cg(ln,dn,kn,pn);var Dn=ln.memoizedState;Sn!==Ln||Fn!==Dn||N$9.current||wg?(typeof zn=="function"&&(Gg(ln,cn,zn,dn),Dn=ln.memoizedState),(Pn=wg||Lg(ln,cn,Pn,dn,Fn,Dn,wn))?(Nn||typeof kn.UNSAFE_componentWillUpdate!="function"&&typeof kn.componentWillUpdate!="function"||(typeof kn.componentWillUpdate=="function"&&kn.componentWillUpdate(dn,Dn,wn),typeof kn.UNSAFE_componentWillUpdate=="function"&&kn.UNSAFE_componentWillUpdate(dn,Dn,wn)),typeof kn.componentDidUpdate=="function"&&(ln.flags|=4),typeof kn.getSnapshotBeforeUpdate=="function"&&(ln.flags|=256)):(typeof kn.componentDidUpdate!="function"||Sn===sn.memoizedProps&&Fn===sn.memoizedState||(ln.flags|=4),typeof kn.getSnapshotBeforeUpdate!="function"||Sn===sn.memoizedProps&&Fn===sn.memoizedState||(ln.flags|=256),ln.memoizedProps=dn,ln.memoizedState=Dn),kn.props=dn,kn.state=Dn,kn.context=wn,dn=Pn):(typeof kn.componentDidUpdate!="function"||Sn===sn.memoizedProps&&Fn===sn.memoizedState||(ln.flags|=4),typeof kn.getSnapshotBeforeUpdate!="function"||Sn===sn.memoizedProps&&Fn===sn.memoizedState||(ln.flags|=256),dn=!1)}return qi(sn,ln,cn,dn,vn,pn)}function qi(sn,ln,cn,dn,pn,vn){oi(sn,ln);var kn=(ln.flags&64)!==0;if(!dn&&!kn)return pn&&Kf$1(ln,cn,!1),hi(sn,ln,vn);dn=ln.stateNode,ei.current=ln;var Sn=kn&&typeof cn.getDerivedStateFromError!="function"?null:dn.render();return ln.flags|=1,sn!==null&&kn?(ln.child=Yg(ln,sn.child,null,vn),ln.child=Yg(ln,null,Sn,vn)):fi(sn,ln,Sn,vn),ln.memoizedState=dn.state,pn&&Kf$1(ln,cn,!0),ln.child}function ri(sn){var ln=sn.stateNode;ln.pendingContext?Hf(sn,ln.pendingContext,ln.pendingContext!==ln.context):ln.context&&Hf(sn,ln.context,!1),eh(sn,ln.containerInfo)}var si={dehydrated:null,retryLane:0};function ti(sn,ln,cn){var dn=ln.pendingProps,pn=P$8.current,vn=!1,kn;return(kn=(ln.flags&64)!==0)||(kn=sn!==null&&sn.memoizedState===null?!1:(pn&2)!==0),kn?(vn=!0,ln.flags&=-65):sn!==null&&sn.memoizedState===null||dn.fallback===void 0||dn.unstable_avoidThisFallback===!0||(pn|=1),I$c(P$8,pn&1),sn===null?(dn.fallback!==void 0&&ph(ln),sn=dn.children,pn=dn.fallback,vn?(sn=ui(ln,sn,pn,cn),ln.child.memoizedState={baseLanes:cn},ln.memoizedState=si,sn):typeof dn.unstable_expectedLoadTime=="number"?(sn=ui(ln,sn,pn,cn),ln.child.memoizedState={baseLanes:cn},ln.memoizedState=si,ln.lanes=33554432,sn):(cn=vi({mode:"visible",children:sn},ln.mode,cn,null),cn.return=ln,ln.child=cn)):sn.memoizedState!==null?vn?(dn=wi(sn,ln,dn.children,dn.fallback,cn),vn=ln.child,pn=sn.child.memoizedState,vn.memoizedState=pn===null?{baseLanes:cn}:{baseLanes:pn.baseLanes|cn},vn.childLanes=sn.childLanes&~cn,ln.memoizedState=si,dn):(cn=xi(sn,ln,dn.children,cn),ln.memoizedState=null,cn):vn?(dn=wi(sn,ln,dn.children,dn.fallback,cn),vn=ln.child,pn=sn.child.memoizedState,vn.memoizedState=pn===null?{baseLanes:cn}:{baseLanes:pn.baseLanes|cn},vn.childLanes=sn.childLanes&~cn,ln.memoizedState=si,dn):(cn=xi(sn,ln,dn.children,cn),ln.memoizedState=null,cn)}function ui(sn,ln,cn,dn){var pn=sn.mode,vn=sn.child;return ln={mode:"hidden",children:ln},!(pn&2)&&vn!==null?(vn.childLanes=0,vn.pendingProps=ln):vn=vi(ln,pn,0,null),cn=Xg(cn,pn,dn,null),vn.return=sn,cn.return=sn,vn.sibling=cn,sn.child=vn,cn}function xi(sn,ln,cn,dn){var pn=sn.child;return sn=pn.sibling,cn=Tg(pn,{mode:"visible",children:cn}),!(ln.mode&2)&&(cn.lanes=dn),cn.return=ln,cn.sibling=null,sn!==null&&(sn.nextEffect=null,sn.flags=8,ln.firstEffect=ln.lastEffect=sn),ln.child=cn}function wi(sn,ln,cn,dn,pn){var vn=ln.mode,kn=sn.child;sn=kn.sibling;var Sn={mode:"hidden",children:cn};return!(vn&2)&&ln.child!==kn?(cn=ln.child,cn.childLanes=0,cn.pendingProps=Sn,kn=cn.lastEffect,kn!==null?(ln.firstEffect=cn.firstEffect,ln.lastEffect=kn,kn.nextEffect=null):ln.firstEffect=ln.lastEffect=null):cn=Tg(kn,Sn),sn!==null?dn=Tg(sn,dn):(dn=Xg(dn,vn,pn,null),dn.flags|=2),dn.return=ln,cn.return=ln,cn.sibling=dn,ln.child=cn,dn}function yi(sn,ln){sn.lanes|=ln;var cn=sn.alternate;cn!==null&&(cn.lanes|=ln),sg(sn.return,ln)}function zi(sn,ln,cn,dn,pn,vn){var kn=sn.memoizedState;kn===null?sn.memoizedState={isBackwards:ln,rendering:null,renderingStartTime:0,last:dn,tail:cn,tailMode:pn,lastEffect:vn}:(kn.isBackwards=ln,kn.rendering=null,kn.renderingStartTime=0,kn.last=dn,kn.tail=cn,kn.tailMode=pn,kn.lastEffect=vn)}function Ai(sn,ln,cn){var dn=ln.pendingProps,pn=dn.revealOrder,vn=dn.tail;if(fi(sn,ln,dn.children,cn),dn=P$8.current,dn&2)dn=dn&1|2,ln.flags|=64;else{if(sn!==null&&sn.flags&64)e:for(sn=ln.child;sn!==null;){if(sn.tag===13)sn.memoizedState!==null&&yi(sn,cn);else if(sn.tag===19)yi(sn,cn);else if(sn.child!==null){sn.child.return=sn,sn=sn.child;continue}if(sn===ln)break e;for(;sn.sibling===null;){if(sn.return===null||sn.return===ln)break e;sn=sn.return}sn.sibling.return=sn.return,sn=sn.sibling}dn&=1}if(I$c(P$8,dn),!(ln.mode&2))ln.memoizedState=null;else switch(pn){case"forwards":for(cn=ln.child,pn=null;cn!==null;)sn=cn.alternate,sn!==null&&ih(sn)===null&&(pn=cn),cn=cn.sibling;cn=pn,cn===null?(pn=ln.child,ln.child=null):(pn=cn.sibling,cn.sibling=null),zi(ln,!1,pn,cn,vn,ln.lastEffect);break;case"backwards":for(cn=null,pn=ln.child,ln.child=null;pn!==null;){if(sn=pn.alternate,sn!==null&&ih(sn)===null){ln.child=pn;break}sn=pn.sibling,pn.sibling=cn,cn=pn,pn=sn}zi(ln,!0,cn,null,vn,ln.lastEffect);break;case"together":zi(ln,!1,null,null,void 0,ln.lastEffect);break;default:ln.memoizedState=null}return ln.child}function hi(sn,ln,cn){if(sn!==null&&(ln.dependencies=sn.dependencies),Dg|=ln.lanes,cn&ln.childLanes){if(sn!==null&&ln.child!==sn.child)throw Error(y$c(153));if(ln.child!==null){for(sn=ln.child,cn=Tg(sn,sn.pendingProps),ln.child=cn,cn.return=ln;sn.sibling!==null;)sn=sn.sibling,cn=cn.sibling=Tg(sn,sn.pendingProps),cn.return=ln;cn.sibling=null}return ln.child}return null}var Bi,Ci,Di,Ei;Bi=function(sn,ln){for(var cn=ln.child;cn!==null;){if(cn.tag===5||cn.tag===6)sn.appendChild(cn.stateNode);else if(cn.tag!==4&&cn.child!==null){cn.child.return=cn,cn=cn.child;continue}if(cn===ln)break;for(;cn.sibling===null;){if(cn.return===null||cn.return===ln)return;cn=cn.return}cn.sibling.return=cn.return,cn=cn.sibling}};Ci=function(){};Di=function(sn,ln,cn,dn){var pn=sn.memoizedProps;if(pn!==dn){sn=ln.stateNode,dh(ah.current);var vn=null;switch(cn){case"input":pn=Ya$2(sn,pn),dn=Ya$2(sn,dn),vn=[];break;case"option":pn=eb(sn,pn),dn=eb(sn,dn),vn=[];break;case"select":pn=m$c({},pn,{value:void 0}),dn=m$c({},dn,{value:void 0}),vn=[];break;case"textarea":pn=gb(sn,pn),dn=gb(sn,dn),vn=[];break;default:typeof pn.onClick!="function"&&typeof dn.onClick=="function"&&(sn.onclick=jf$1)}vb(cn,dn);var kn;cn=null;for(Pn in pn)if(!dn.hasOwnProperty(Pn)&&pn.hasOwnProperty(Pn)&&pn[Pn]!=null)if(Pn==="style"){var Sn=pn[Pn];for(kn in Sn)Sn.hasOwnProperty(kn)&&(cn||(cn={}),cn[kn]="")}else Pn!=="dangerouslySetInnerHTML"&&Pn!=="children"&&Pn!=="suppressContentEditableWarning"&&Pn!=="suppressHydrationWarning"&&Pn!=="autoFocus"&&(ca$3.hasOwnProperty(Pn)?vn||(vn=[]):(vn=vn||[]).push(Pn,null));for(Pn in dn){var wn=dn[Pn];if(Sn=pn!=null?pn[Pn]:void 0,dn.hasOwnProperty(Pn)&&wn!==Sn&&(wn!=null||Sn!=null))if(Pn==="style")if(Sn){for(kn in Sn)!Sn.hasOwnProperty(kn)||wn&&wn.hasOwnProperty(kn)||(cn||(cn={}),cn[kn]="");for(kn in wn)wn.hasOwnProperty(kn)&&Sn[kn]!==wn[kn]&&(cn||(cn={}),cn[kn]=wn[kn])}else cn||(vn||(vn=[]),vn.push(Pn,cn)),cn=wn;else Pn==="dangerouslySetInnerHTML"?(wn=wn?wn.__html:void 0,Sn=Sn?Sn.__html:void 0,wn!=null&&Sn!==wn&&(vn=vn||[]).push(Pn,wn)):Pn==="children"?typeof wn!="string"&&typeof wn!="number"||(vn=vn||[]).push(Pn,""+wn):Pn!=="suppressContentEditableWarning"&&Pn!=="suppressHydrationWarning"&&(ca$3.hasOwnProperty(Pn)?(wn!=null&&Pn==="onScroll"&&G$9("scroll",sn),vn||Sn===wn||(vn=[])):typeof wn=="object"&&wn!==null&&wn.$$typeof===Ga$2?wn.toString():(vn=vn||[]).push(Pn,wn))}cn&&(vn=vn||[]).push("style",cn);var Pn=vn;(ln.updateQueue=Pn)&&(ln.flags|=4)}};Ei=function(sn,ln,cn,dn){cn!==dn&&(ln.flags|=4)};function Fi(sn,ln){if(!lh)switch(sn.tailMode){case"hidden":ln=sn.tail;for(var cn=null;ln!==null;)ln.alternate!==null&&(cn=ln),ln=ln.sibling;cn===null?sn.tail=null:cn.sibling=null;break;case"collapsed":cn=sn.tail;for(var dn=null;cn!==null;)cn.alternate!==null&&(dn=cn),cn=cn.sibling;dn===null?ln||sn.tail===null?sn.tail=null:sn.tail.sibling=null:dn.sibling=null}}function Gi(sn,ln,cn){var dn=ln.pendingProps;switch(ln.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Ff$1(ln.type)&&Gf(),null;case 3:return fh(),H$b(N$9),H$b(M$9),uh(),dn=ln.stateNode,dn.pendingContext&&(dn.context=dn.pendingContext,dn.pendingContext=null),(sn===null||sn.child===null)&&(rh(ln)?ln.flags|=4:dn.hydrate||(ln.flags|=256)),Ci(ln),null;case 5:hh(ln);var pn=dh(ch.current);if(cn=ln.type,sn!==null&&ln.stateNode!=null)Di(sn,ln,cn,dn,pn),sn.ref!==ln.ref&&(ln.flags|=128);else{if(!dn){if(ln.stateNode===null)throw Error(y$c(166));return null}if(sn=dh(ah.current),rh(ln)){dn=ln.stateNode,cn=ln.type;var vn=ln.memoizedProps;switch(dn[wf$1]=ln,dn[xf$1]=vn,cn){case"dialog":G$9("cancel",dn),G$9("close",dn);break;case"iframe":case"object":case"embed":G$9("load",dn);break;case"video":case"audio":for(sn=0;sn<Xe$4.length;sn++)G$9(Xe$4[sn],dn);break;case"source":G$9("error",dn);break;case"img":case"image":case"link":G$9("error",dn),G$9("load",dn);break;case"details":G$9("toggle",dn);break;case"input":Za$1(dn,vn),G$9("invalid",dn);break;case"select":dn._wrapperState={wasMultiple:!!vn.multiple},G$9("invalid",dn);break;case"textarea":hb(dn,vn),G$9("invalid",dn)}vb(cn,vn),sn=null;for(var kn in vn)vn.hasOwnProperty(kn)&&(pn=vn[kn],kn==="children"?typeof pn=="string"?dn.textContent!==pn&&(sn=["children",pn]):typeof pn=="number"&&dn.textContent!==""+pn&&(sn=["children",""+pn]):ca$3.hasOwnProperty(kn)&&pn!=null&&kn==="onScroll"&&G$9("scroll",dn));switch(cn){case"input":Va$2(dn),cb(dn,vn,!0);break;case"textarea":Va$2(dn),jb(dn);break;case"select":case"option":break;default:typeof vn.onClick=="function"&&(dn.onclick=jf$1)}dn=sn,ln.updateQueue=dn,dn!==null&&(ln.flags|=4)}else{switch(kn=pn.nodeType===9?pn:pn.ownerDocument,sn===kb.html&&(sn=lb(cn)),sn===kb.html?cn==="script"?(sn=kn.createElement("div"),sn.innerHTML="<script><\/script>",sn=sn.removeChild(sn.firstChild)):typeof dn.is=="string"?sn=kn.createElement(cn,{is:dn.is}):(sn=kn.createElement(cn),cn==="select"&&(kn=sn,dn.multiple?kn.multiple=!0:dn.size&&(kn.size=dn.size))):sn=kn.createElementNS(sn,cn),sn[wf$1]=ln,sn[xf$1]=dn,Bi(sn,ln,!1,!1),ln.stateNode=sn,kn=wb(cn,dn),cn){case"dialog":G$9("cancel",sn),G$9("close",sn),pn=dn;break;case"iframe":case"object":case"embed":G$9("load",sn),pn=dn;break;case"video":case"audio":for(pn=0;pn<Xe$4.length;pn++)G$9(Xe$4[pn],sn);pn=dn;break;case"source":G$9("error",sn),pn=dn;break;case"img":case"image":case"link":G$9("error",sn),G$9("load",sn),pn=dn;break;case"details":G$9("toggle",sn),pn=dn;break;case"input":Za$1(sn,dn),pn=Ya$2(sn,dn),G$9("invalid",sn);break;case"option":pn=eb(sn,dn);break;case"select":sn._wrapperState={wasMultiple:!!dn.multiple},pn=m$c({},dn,{value:void 0}),G$9("invalid",sn);break;case"textarea":hb(sn,dn),pn=gb(sn,dn),G$9("invalid",sn);break;default:pn=dn}vb(cn,pn);var Sn=pn;for(vn in Sn)if(Sn.hasOwnProperty(vn)){var wn=Sn[vn];vn==="style"?tb(sn,wn):vn==="dangerouslySetInnerHTML"?(wn=wn?wn.__html:void 0,wn!=null&&ob(sn,wn)):vn==="children"?typeof wn=="string"?(cn!=="textarea"||wn!=="")&&pb(sn,wn):typeof wn=="number"&&pb(sn,""+wn):vn!=="suppressContentEditableWarning"&&vn!=="suppressHydrationWarning"&&vn!=="autoFocus"&&(ca$3.hasOwnProperty(vn)?wn!=null&&vn==="onScroll"&&G$9("scroll",sn):wn!=null&&qa$2(sn,vn,wn,kn))}switch(cn){case"input":Va$2(sn),cb(sn,dn,!1);break;case"textarea":Va$2(sn),jb(sn);break;case"option":dn.value!=null&&sn.setAttribute("value",""+Sa$3(dn.value));break;case"select":sn.multiple=!!dn.multiple,vn=dn.value,vn!=null?fb(sn,!!dn.multiple,vn,!1):dn.defaultValue!=null&&fb(sn,!!dn.multiple,dn.defaultValue,!0);break;default:typeof pn.onClick=="function"&&(sn.onclick=jf$1)}mf$1(cn,dn)&&(ln.flags|=4)}ln.ref!==null&&(ln.flags|=128)}return null;case 6:if(sn&&ln.stateNode!=null)Ei(sn,ln,sn.memoizedProps,dn);else{if(typeof dn!="string"&&ln.stateNode===null)throw Error(y$c(166));cn=dh(ch.current),dh(ah.current),rh(ln)?(dn=ln.stateNode,cn=ln.memoizedProps,dn[wf$1]=ln,dn.nodeValue!==cn&&(ln.flags|=4)):(dn=(cn.nodeType===9?cn:cn.ownerDocument).createTextNode(dn),dn[wf$1]=ln,ln.stateNode=dn)}return null;case 13:return H$b(P$8),dn=ln.memoizedState,ln.flags&64?(ln.lanes=cn,ln):(dn=dn!==null,cn=!1,sn===null?ln.memoizedProps.fallback!==void 0&&rh(ln):cn=sn.memoizedState!==null,dn&&!cn&&ln.mode&2&&(sn===null&&ln.memoizedProps.unstable_avoidThisFallback!==!0||P$8.current&1?V$7===0&&(V$7=3):((V$7===0||V$7===3)&&(V$7=4),U$8===null||!(Dg&134217727)&&!(Hi&134217727)||Ii(U$8,W$9))),(dn||cn)&&(ln.flags|=4),null);case 4:return fh(),Ci(ln),sn===null&&cf$1(ln.stateNode.containerInfo),null;case 10:return rg(ln),null;case 17:return Ff$1(ln.type)&&Gf(),null;case 19:if(H$b(P$8),dn=ln.memoizedState,dn===null)return null;if(vn=(ln.flags&64)!==0,kn=dn.rendering,kn===null)if(vn)Fi(dn,!1);else{if(V$7!==0||sn!==null&&sn.flags&64)for(sn=ln.child;sn!==null;){if(kn=ih(sn),kn!==null){for(ln.flags|=64,Fi(dn,!1),vn=kn.updateQueue,vn!==null&&(ln.updateQueue=vn,ln.flags|=4),dn.lastEffect===null&&(ln.firstEffect=null),ln.lastEffect=dn.lastEffect,dn=cn,cn=ln.child;cn!==null;)vn=cn,sn=dn,vn.flags&=2,vn.nextEffect=null,vn.firstEffect=null,vn.lastEffect=null,kn=vn.alternate,kn===null?(vn.childLanes=0,vn.lanes=sn,vn.child=null,vn.memoizedProps=null,vn.memoizedState=null,vn.updateQueue=null,vn.dependencies=null,vn.stateNode=null):(vn.childLanes=kn.childLanes,vn.lanes=kn.lanes,vn.child=kn.child,vn.memoizedProps=kn.memoizedProps,vn.memoizedState=kn.memoizedState,vn.updateQueue=kn.updateQueue,vn.type=kn.type,sn=kn.dependencies,vn.dependencies=sn===null?null:{lanes:sn.lanes,firstContext:sn.firstContext}),cn=cn.sibling;return I$c(P$8,P$8.current&1|2),ln.child}sn=sn.sibling}dn.tail!==null&&O$a()>Ji&&(ln.flags|=64,vn=!0,Fi(dn,!1),ln.lanes=33554432)}else{if(!vn)if(sn=ih(kn),sn!==null){if(ln.flags|=64,vn=!0,cn=sn.updateQueue,cn!==null&&(ln.updateQueue=cn,ln.flags|=4),Fi(dn,!0),dn.tail===null&&dn.tailMode==="hidden"&&!kn.alternate&&!lh)return ln=ln.lastEffect=dn.lastEffect,ln!==null&&(ln.nextEffect=null),null}else 2*O$a()-dn.renderingStartTime>Ji&&cn!==1073741824&&(ln.flags|=64,vn=!0,Fi(dn,!1),ln.lanes=33554432);dn.isBackwards?(kn.sibling=ln.child,ln.child=kn):(cn=dn.last,cn!==null?cn.sibling=kn:ln.child=kn,dn.last=kn)}return dn.tail!==null?(cn=dn.tail,dn.rendering=cn,dn.tail=cn.sibling,dn.lastEffect=ln.lastEffect,dn.renderingStartTime=O$a(),cn.sibling=null,ln=P$8.current,I$c(P$8,vn?ln&1|2:ln&1),cn):null;case 23:case 24:return Ki(),sn!==null&&sn.memoizedState!==null!=(ln.memoizedState!==null)&&dn.mode!=="unstable-defer-without-hiding"&&(ln.flags|=4),null}throw Error(y$c(156,ln.tag))}function Li(sn){switch(sn.tag){case 1:Ff$1(sn.type)&&Gf();var ln=sn.flags;return ln&4096?(sn.flags=ln&-4097|64,sn):null;case 3:if(fh(),H$b(N$9),H$b(M$9),uh(),ln=sn.flags,ln&64)throw Error(y$c(285));return sn.flags=ln&-4097|64,sn;case 5:return hh(sn),null;case 13:return H$b(P$8),ln=sn.flags,ln&4096?(sn.flags=ln&-4097|64,sn):null;case 19:return H$b(P$8),null;case 4:return fh(),null;case 10:return rg(sn),null;case 23:case 24:return Ki(),null;default:return null}}function Mi(sn,ln){try{var cn="",dn=ln;do cn+=Qa$1(dn),dn=dn.return;while(dn);var pn=cn}catch(vn){pn=`
Error generating stack: `+vn.message+`
`+vn.stack}return{value:sn,source:ln,stack:pn}}function Ni(sn,ln){try{console.error(ln.value)}catch(cn){setTimeout(function(){throw cn})}}var Oi=typeof WeakMap=="function"?WeakMap:Map;function Pi(sn,ln,cn){cn=zg(-1,cn),cn.tag=3,cn.payload={element:null};var dn=ln.value;return cn.callback=function(){Qi||(Qi=!0,Ri=dn),Ni(sn,ln)},cn}function Si(sn,ln,cn){cn=zg(-1,cn),cn.tag=3;var dn=sn.type.getDerivedStateFromError;if(typeof dn=="function"){var pn=ln.value;cn.payload=function(){return Ni(sn,ln),dn(pn)}}var vn=sn.stateNode;return vn!==null&&typeof vn.componentDidCatch=="function"&&(cn.callback=function(){typeof dn!="function"&&(Ti===null?Ti=new Set([this]):Ti.add(this),Ni(sn,ln));var kn=ln.stack;this.componentDidCatch(ln.value,{componentStack:kn!==null?kn:""})}),cn}var Ui=typeof WeakSet=="function"?WeakSet:Set;function Vi(sn){var ln=sn.ref;if(ln!==null)if(typeof ln=="function")try{ln(null)}catch(cn){Wi(sn,cn)}else ln.current=null}function Xi(sn,ln){switch(ln.tag){case 0:case 11:case 15:case 22:return;case 1:if(ln.flags&256&&sn!==null){var cn=sn.memoizedProps,dn=sn.memoizedState;sn=ln.stateNode,ln=sn.getSnapshotBeforeUpdate(ln.elementType===ln.type?cn:lg(ln.type,cn),dn),sn.__reactInternalSnapshotBeforeUpdate=ln}return;case 3:ln.flags&256&&qf$1(ln.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(y$c(163))}function Yi(sn,ln,cn){switch(cn.tag){case 0:case 11:case 15:case 22:if(ln=cn.updateQueue,ln=ln!==null?ln.lastEffect:null,ln!==null){sn=ln=ln.next;do{if((sn.tag&3)===3){var dn=sn.create;sn.destroy=dn()}sn=sn.next}while(sn!==ln)}if(ln=cn.updateQueue,ln=ln!==null?ln.lastEffect:null,ln!==null){sn=ln=ln.next;do{var pn=sn;dn=pn.next,pn=pn.tag,pn&4&&pn&1&&(Zi(cn,sn),$i(cn,sn)),sn=dn}while(sn!==ln)}return;case 1:sn=cn.stateNode,cn.flags&4&&(ln===null?sn.componentDidMount():(dn=cn.elementType===cn.type?ln.memoizedProps:lg(cn.type,ln.memoizedProps),sn.componentDidUpdate(dn,ln.memoizedState,sn.__reactInternalSnapshotBeforeUpdate))),ln=cn.updateQueue,ln!==null&&Eg(cn,ln,sn);return;case 3:if(ln=cn.updateQueue,ln!==null){if(sn=null,cn.child!==null)switch(cn.child.tag){case 5:sn=cn.child.stateNode;break;case 1:sn=cn.child.stateNode}Eg(cn,ln,sn)}return;case 5:sn=cn.stateNode,ln===null&&cn.flags&4&&mf$1(cn.type,cn.memoizedProps)&&sn.focus();return;case 6:return;case 4:return;case 12:return;case 13:cn.memoizedState===null&&(cn=cn.alternate,cn!==null&&(cn=cn.memoizedState,cn!==null&&(cn=cn.dehydrated,cn!==null&&Cc(cn))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(y$c(163))}function aj(sn,ln){for(var cn=sn;;){if(cn.tag===5){var dn=cn.stateNode;if(ln)dn=dn.style,typeof dn.setProperty=="function"?dn.setProperty("display","none","important"):dn.display="none";else{dn=cn.stateNode;var pn=cn.memoizedProps.style;pn=pn!=null&&pn.hasOwnProperty("display")?pn.display:null,dn.style.display=sb("display",pn)}}else if(cn.tag===6)cn.stateNode.nodeValue=ln?"":cn.memoizedProps;else if((cn.tag!==23&&cn.tag!==24||cn.memoizedState===null||cn===sn)&&cn.child!==null){cn.child.return=cn,cn=cn.child;continue}if(cn===sn)break;for(;cn.sibling===null;){if(cn.return===null||cn.return===sn)return;cn=cn.return}cn.sibling.return=cn.return,cn=cn.sibling}}function bj(sn,ln){if(Mf$1&&typeof Mf$1.onCommitFiberUnmount=="function")try{Mf$1.onCommitFiberUnmount(Lf,ln)}catch{}switch(ln.tag){case 0:case 11:case 14:case 15:case 22:if(sn=ln.updateQueue,sn!==null&&(sn=sn.lastEffect,sn!==null)){var cn=sn=sn.next;do{var dn=cn,pn=dn.destroy;if(dn=dn.tag,pn!==void 0)if(dn&4)Zi(ln,cn);else{dn=ln;try{pn()}catch(vn){Wi(dn,vn)}}cn=cn.next}while(cn!==sn)}break;case 1:if(Vi(ln),sn=ln.stateNode,typeof sn.componentWillUnmount=="function")try{sn.props=ln.memoizedProps,sn.state=ln.memoizedState,sn.componentWillUnmount()}catch(vn){Wi(ln,vn)}break;case 5:Vi(ln);break;case 4:cj(sn,ln)}}function dj(sn){sn.alternate=null,sn.child=null,sn.dependencies=null,sn.firstEffect=null,sn.lastEffect=null,sn.memoizedProps=null,sn.memoizedState=null,sn.pendingProps=null,sn.return=null,sn.updateQueue=null}function ej(sn){return sn.tag===5||sn.tag===3||sn.tag===4}function fj(sn){e:{for(var ln=sn.return;ln!==null;){if(ej(ln))break e;ln=ln.return}throw Error(y$c(160))}var cn=ln;switch(ln=cn.stateNode,cn.tag){case 5:var dn=!1;break;case 3:ln=ln.containerInfo,dn=!0;break;case 4:ln=ln.containerInfo,dn=!0;break;default:throw Error(y$c(161))}cn.flags&16&&(pb(ln,""),cn.flags&=-17);e:t:for(cn=sn;;){for(;cn.sibling===null;){if(cn.return===null||ej(cn.return)){cn=null;break e}cn=cn.return}for(cn.sibling.return=cn.return,cn=cn.sibling;cn.tag!==5&&cn.tag!==6&&cn.tag!==18;){if(cn.flags&2||cn.child===null||cn.tag===4)continue t;cn.child.return=cn,cn=cn.child}if(!(cn.flags&2)){cn=cn.stateNode;break e}}dn?gj(sn,cn,ln):hj(sn,cn,ln)}function gj(sn,ln,cn){var dn=sn.tag,pn=dn===5||dn===6;if(pn)sn=pn?sn.stateNode:sn.stateNode.instance,ln?cn.nodeType===8?cn.parentNode.insertBefore(sn,ln):cn.insertBefore(sn,ln):(cn.nodeType===8?(ln=cn.parentNode,ln.insertBefore(sn,cn)):(ln=cn,ln.appendChild(sn)),cn=cn._reactRootContainer,cn!=null||ln.onclick!==null||(ln.onclick=jf$1));else if(dn!==4&&(sn=sn.child,sn!==null))for(gj(sn,ln,cn),sn=sn.sibling;sn!==null;)gj(sn,ln,cn),sn=sn.sibling}function hj(sn,ln,cn){var dn=sn.tag,pn=dn===5||dn===6;if(pn)sn=pn?sn.stateNode:sn.stateNode.instance,ln?cn.insertBefore(sn,ln):cn.appendChild(sn);else if(dn!==4&&(sn=sn.child,sn!==null))for(hj(sn,ln,cn),sn=sn.sibling;sn!==null;)hj(sn,ln,cn),sn=sn.sibling}function cj(sn,ln){for(var cn=ln,dn=!1,pn,vn;;){if(!dn){dn=cn.return;e:for(;;){if(dn===null)throw Error(y$c(160));switch(pn=dn.stateNode,dn.tag){case 5:vn=!1;break e;case 3:pn=pn.containerInfo,vn=!0;break e;case 4:pn=pn.containerInfo,vn=!0;break e}dn=dn.return}dn=!0}if(cn.tag===5||cn.tag===6){e:for(var kn=sn,Sn=cn,wn=Sn;;)if(bj(kn,wn),wn.child!==null&&wn.tag!==4)wn.child.return=wn,wn=wn.child;else{if(wn===Sn)break e;for(;wn.sibling===null;){if(wn.return===null||wn.return===Sn)break e;wn=wn.return}wn.sibling.return=wn.return,wn=wn.sibling}vn?(kn=pn,Sn=cn.stateNode,kn.nodeType===8?kn.parentNode.removeChild(Sn):kn.removeChild(Sn)):pn.removeChild(cn.stateNode)}else if(cn.tag===4){if(cn.child!==null){pn=cn.stateNode.containerInfo,vn=!0,cn.child.return=cn,cn=cn.child;continue}}else if(bj(sn,cn),cn.child!==null){cn.child.return=cn,cn=cn.child;continue}if(cn===ln)break;for(;cn.sibling===null;){if(cn.return===null||cn.return===ln)return;cn=cn.return,cn.tag===4&&(dn=!1)}cn.sibling.return=cn.return,cn=cn.sibling}}function ij(sn,ln){switch(ln.tag){case 0:case 11:case 14:case 15:case 22:var cn=ln.updateQueue;if(cn=cn!==null?cn.lastEffect:null,cn!==null){var dn=cn=cn.next;do(dn.tag&3)===3&&(sn=dn.destroy,dn.destroy=void 0,sn!==void 0&&sn()),dn=dn.next;while(dn!==cn)}return;case 1:return;case 5:if(cn=ln.stateNode,cn!=null){dn=ln.memoizedProps;var pn=sn!==null?sn.memoizedProps:dn;sn=ln.type;var vn=ln.updateQueue;if(ln.updateQueue=null,vn!==null){for(cn[xf$1]=dn,sn==="input"&&dn.type==="radio"&&dn.name!=null&&$a$2(cn,dn),wb(sn,pn),ln=wb(sn,dn),pn=0;pn<vn.length;pn+=2){var kn=vn[pn],Sn=vn[pn+1];kn==="style"?tb(cn,Sn):kn==="dangerouslySetInnerHTML"?ob(cn,Sn):kn==="children"?pb(cn,Sn):qa$2(cn,kn,Sn,ln)}switch(sn){case"input":ab(cn,dn);break;case"textarea":ib(cn,dn);break;case"select":sn=cn._wrapperState.wasMultiple,cn._wrapperState.wasMultiple=!!dn.multiple,vn=dn.value,vn!=null?fb(cn,!!dn.multiple,vn,!1):sn!==!!dn.multiple&&(dn.defaultValue!=null?fb(cn,!!dn.multiple,dn.defaultValue,!0):fb(cn,!!dn.multiple,dn.multiple?[]:"",!1))}}}return;case 6:if(ln.stateNode===null)throw Error(y$c(162));ln.stateNode.nodeValue=ln.memoizedProps;return;case 3:cn=ln.stateNode,cn.hydrate&&(cn.hydrate=!1,Cc(cn.containerInfo));return;case 12:return;case 13:ln.memoizedState!==null&&(jj=O$a(),aj(ln.child,!0)),kj(ln);return;case 19:kj(ln);return;case 17:return;case 23:case 24:aj(ln,ln.memoizedState!==null);return}throw Error(y$c(163))}function kj(sn){var ln=sn.updateQueue;if(ln!==null){sn.updateQueue=null;var cn=sn.stateNode;cn===null&&(cn=sn.stateNode=new Ui),ln.forEach(function(dn){var pn=lj.bind(null,sn,dn);cn.has(dn)||(cn.add(dn),dn.then(pn,pn))})}}function mj(sn,ln){return sn!==null&&(sn=sn.memoizedState,sn===null||sn.dehydrated!==null)?(ln=ln.memoizedState,ln!==null&&ln.dehydrated===null):!1}var nj=Math.ceil,oj=ra$3.ReactCurrentDispatcher,pj=ra$3.ReactCurrentOwner,X$5=0,U$8=null,Y$7=null,W$9=0,qj=0,rj=Bf$1(0),V$7=0,sj=null,tj=0,Dg=0,Hi=0,uj=0,vj=null,jj=0,Ji=1/0;function wj(){Ji=O$a()+500}var Z$6=null,Qi=!1,Ri=null,Ti=null,xj=!1,yj=null,zj=90,Aj=[],Bj=[],Cj=null,Dj=0,Ej=null,Fj=-1,Gj=0,Hj=0,Ij=null,Jj=!1;function Hg(){return X$5&48?O$a():Fj!==-1?Fj:Fj=O$a()}function Ig(sn){if(sn=sn.mode,!(sn&2))return 1;if(!(sn&4))return eg()===99?1:2;if(Gj===0&&(Gj=tj),kg.transition!==0){Hj!==0&&(Hj=vj!==null?vj.pendingLanes:0),sn=Gj;var ln=4186112&~Hj;return ln&=-ln,ln===0&&(sn=4186112&~sn,ln=sn&-sn,ln===0&&(ln=8192)),ln}return sn=eg(),X$5&4&&sn===98?sn=Xc(12,Gj):(sn=Sc(sn),sn=Xc(sn,Gj)),sn}function Jg(sn,ln,cn){if(50<Dj)throw Dj=0,Ej=null,Error(y$c(185));if(sn=Kj(sn,ln),sn===null)return null;$c(sn,ln,cn),sn===U$8&&(Hi|=ln,V$7===4&&Ii(sn,W$9));var dn=eg();ln===1?X$5&8&&!(X$5&48)?Lj(sn):(Mj(sn,cn),X$5===0&&(wj(),ig())):(!(X$5&4)||dn!==98&&dn!==99||(Cj===null?Cj=new Set([sn]):Cj.add(sn)),Mj(sn,cn)),vj=sn}function Kj(sn,ln){sn.lanes|=ln;var cn=sn.alternate;for(cn!==null&&(cn.lanes|=ln),cn=sn,sn=sn.return;sn!==null;)sn.childLanes|=ln,cn=sn.alternate,cn!==null&&(cn.childLanes|=ln),cn=sn,sn=sn.return;return cn.tag===3?cn.stateNode:null}function Mj(sn,ln){for(var cn=sn.callbackNode,dn=sn.suspendedLanes,pn=sn.pingedLanes,vn=sn.expirationTimes,kn=sn.pendingLanes;0<kn;){var Sn=31-Vc(kn),wn=1<<Sn,Pn=vn[Sn];if(Pn===-1){if(!(wn&dn)||wn&pn){Pn=ln,Rc(wn);var Nn=F$b;vn[Sn]=10<=Nn?Pn+250:6<=Nn?Pn+5e3:-1}}else Pn<=ln&&(sn.expiredLanes|=wn);kn&=~wn}if(dn=Uc(sn,sn===U$8?W$9:0),ln=F$b,dn===0)cn!==null&&(cn!==Zf$1&&Pf$1(cn),sn.callbackNode=null,sn.callbackPriority=0);else{if(cn!==null){if(sn.callbackPriority===ln)return;cn!==Zf$1&&Pf$1(cn)}ln===15?(cn=Lj.bind(null,sn),ag===null?(ag=[cn],bg=Of$1(Uf,jg)):ag.push(cn),cn=Zf$1):ln===14?cn=hg(99,Lj.bind(null,sn)):(cn=Tc(ln),cn=hg(cn,Nj.bind(null,sn))),sn.callbackPriority=ln,sn.callbackNode=cn}}function Nj(sn){if(Fj=-1,Hj=Gj=0,X$5&48)throw Error(y$c(327));var ln=sn.callbackNode;if(Oj()&&sn.callbackNode!==ln)return null;var cn=Uc(sn,sn===U$8?W$9:0);if(cn===0)return null;var dn=cn,pn=X$5;X$5|=16;var vn=Pj();(U$8!==sn||W$9!==dn)&&(wj(),Qj(sn,dn));do try{Rj();break}catch(Sn){Sj(sn,Sn)}while(1);if(qg(),oj.current=vn,X$5=pn,Y$7!==null?dn=0:(U$8=null,W$9=0,dn=V$7),tj&Hi)Qj(sn,0);else if(dn!==0){if(dn===2&&(X$5|=64,sn.hydrate&&(sn.hydrate=!1,qf$1(sn.containerInfo)),cn=Wc(sn),cn!==0&&(dn=Tj(sn,cn))),dn===1)throw ln=sj,Qj(sn,0),Ii(sn,cn),Mj(sn,O$a()),ln;switch(sn.finishedWork=sn.current.alternate,sn.finishedLanes=cn,dn){case 0:case 1:throw Error(y$c(345));case 2:Uj(sn);break;case 3:if(Ii(sn,cn),(cn&62914560)===cn&&(dn=jj+500-O$a(),10<dn)){if(Uc(sn,0)!==0)break;if(pn=sn.suspendedLanes,(pn&cn)!==cn){Hg(),sn.pingedLanes|=sn.suspendedLanes&pn;break}sn.timeoutHandle=of$1(Uj.bind(null,sn),dn);break}Uj(sn);break;case 4:if(Ii(sn,cn),(cn&4186112)===cn)break;for(dn=sn.eventTimes,pn=-1;0<cn;){var kn=31-Vc(cn);vn=1<<kn,kn=dn[kn],kn>pn&&(pn=kn),cn&=~vn}if(cn=pn,cn=O$a()-cn,cn=(120>cn?120:480>cn?480:1080>cn?1080:1920>cn?1920:3e3>cn?3e3:4320>cn?4320:1960*nj(cn/1960))-cn,10<cn){sn.timeoutHandle=of$1(Uj.bind(null,sn),cn);break}Uj(sn);break;case 5:Uj(sn);break;default:throw Error(y$c(329))}}return Mj(sn,O$a()),sn.callbackNode===ln?Nj.bind(null,sn):null}function Ii(sn,ln){for(ln&=~uj,ln&=~Hi,sn.suspendedLanes|=ln,sn.pingedLanes&=~ln,sn=sn.expirationTimes;0<ln;){var cn=31-Vc(ln),dn=1<<cn;sn[cn]=-1,ln&=~dn}}function Lj(sn){if(X$5&48)throw Error(y$c(327));if(Oj(),sn===U$8&&sn.expiredLanes&W$9){var ln=W$9,cn=Tj(sn,ln);tj&Hi&&(ln=Uc(sn,ln),cn=Tj(sn,ln))}else ln=Uc(sn,0),cn=Tj(sn,ln);if(sn.tag!==0&&cn===2&&(X$5|=64,sn.hydrate&&(sn.hydrate=!1,qf$1(sn.containerInfo)),ln=Wc(sn),ln!==0&&(cn=Tj(sn,ln))),cn===1)throw cn=sj,Qj(sn,0),Ii(sn,ln),Mj(sn,O$a()),cn;return sn.finishedWork=sn.current.alternate,sn.finishedLanes=ln,Uj(sn),Mj(sn,O$a()),null}function Vj(){if(Cj!==null){var sn=Cj;Cj=null,sn.forEach(function(ln){ln.expiredLanes|=24&ln.pendingLanes,Mj(ln,O$a())})}ig()}function Wj(sn,ln){var cn=X$5;X$5|=1;try{return sn(ln)}finally{X$5=cn,X$5===0&&(wj(),ig())}}function Xj(sn,ln){var cn=X$5;X$5&=-2,X$5|=8;try{return sn(ln)}finally{X$5=cn,X$5===0&&(wj(),ig())}}function ni(sn,ln){I$c(rj,qj),qj|=ln,tj|=ln}function Ki(){qj=rj.current,H$b(rj)}function Qj(sn,ln){sn.finishedWork=null,sn.finishedLanes=0;var cn=sn.timeoutHandle;if(cn!==-1&&(sn.timeoutHandle=-1,pf$1(cn)),Y$7!==null)for(cn=Y$7.return;cn!==null;){var dn=cn;switch(dn.tag){case 1:dn=dn.type.childContextTypes,dn!=null&&Gf();break;case 3:fh(),H$b(N$9),H$b(M$9),uh();break;case 5:hh(dn);break;case 4:fh();break;case 13:H$b(P$8);break;case 19:H$b(P$8);break;case 10:rg(dn);break;case 23:case 24:Ki()}cn=cn.return}U$8=sn,Y$7=Tg(sn.current,null),W$9=qj=tj=ln,V$7=0,sj=null,uj=Hi=Dg=0}function Sj(sn,ln){do{var cn=Y$7;try{if(qg(),vh.current=Gh,yh){for(var dn=R$8.memoizedState;dn!==null;){var pn=dn.queue;pn!==null&&(pn.pending=null),dn=dn.next}yh=!1}if(xh=0,T$b=S$9=R$8=null,zh=!1,pj.current=null,cn===null||cn.return===null){V$7=1,sj=ln,Y$7=null;break}e:{var vn=sn,kn=cn.return,Sn=cn,wn=ln;if(ln=W$9,Sn.flags|=2048,Sn.firstEffect=Sn.lastEffect=null,wn!==null&&typeof wn=="object"&&typeof wn.then=="function"){var Pn=wn;if(!(Sn.mode&2)){var Nn=Sn.alternate;Nn?(Sn.updateQueue=Nn.updateQueue,Sn.memoizedState=Nn.memoizedState,Sn.lanes=Nn.lanes):(Sn.updateQueue=null,Sn.memoizedState=null)}var Ln=(P$8.current&1)!==0,Fn=kn;do{var zn;if(zn=Fn.tag===13){var Dn=Fn.memoizedState;if(Dn!==null)zn=Dn.dehydrated!==null;else{var Kn=Fn.memoizedProps;zn=Kn.fallback===void 0?!1:Kn.unstable_avoidThisFallback!==!0?!0:!Ln}}if(zn){var qn=Fn.updateQueue;if(qn===null){var Zn=new Set;Zn.add(Pn),Fn.updateQueue=Zn}else qn.add(Pn);if(!(Fn.mode&2)){if(Fn.flags|=64,Sn.flags|=16384,Sn.flags&=-2981,Sn.tag===1)if(Sn.alternate===null)Sn.tag=17;else{var Yn=zg(-1,1);Yn.tag=2,Ag(Sn,Yn)}Sn.lanes|=1;break e}wn=void 0,Sn=ln;var Jn=vn.pingCache;if(Jn===null?(Jn=vn.pingCache=new Oi,wn=new Set,Jn.set(Pn,wn)):(wn=Jn.get(Pn),wn===void 0&&(wn=new Set,Jn.set(Pn,wn))),!wn.has(Sn)){wn.add(Sn);var rs=Yj.bind(null,vn,Pn,Sn);Pn.then(rs,rs)}Fn.flags|=4096,Fn.lanes=ln;break e}Fn=Fn.return}while(Fn!==null);wn=Error((Ra$3(Sn.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}V$7!==5&&(V$7=2),wn=Mi(wn,Sn),Fn=kn;do{switch(Fn.tag){case 3:vn=wn,Fn.flags|=4096,ln&=-ln,Fn.lanes|=ln;var ss=Pi(Fn,vn,ln);Bg(Fn,ss);break e;case 1:vn=wn;var as=Fn.type,ds=Fn.stateNode;if(!(Fn.flags&64)&&(typeof as.getDerivedStateFromError=="function"||ds!==null&&typeof ds.componentDidCatch=="function"&&(Ti===null||!Ti.has(ds)))){Fn.flags|=4096,ln&=-ln,Fn.lanes|=ln;var Es=Si(Fn,vn,ln);Bg(Fn,Es);break e}}Fn=Fn.return}while(Fn!==null)}Zj(cn)}catch(Ss){ln=Ss,Y$7===cn&&cn!==null&&(Y$7=cn=cn.return);continue}break}while(1)}function Pj(){var sn=oj.current;return oj.current=Gh,sn===null?Gh:sn}function Tj(sn,ln){var cn=X$5;X$5|=16;var dn=Pj();U$8===sn&&W$9===ln||Qj(sn,ln);do try{ak();break}catch(pn){Sj(sn,pn)}while(1);if(qg(),X$5=cn,oj.current=dn,Y$7!==null)throw Error(y$c(261));return U$8=null,W$9=0,V$7}function ak(){for(;Y$7!==null;)bk(Y$7)}function Rj(){for(;Y$7!==null&&!Qf$1();)bk(Y$7)}function bk(sn){var ln=ck(sn.alternate,sn,qj);sn.memoizedProps=sn.pendingProps,ln===null?Zj(sn):Y$7=ln,pj.current=null}function Zj(sn){var ln=sn;do{var cn=ln.alternate;if(sn=ln.return,ln.flags&2048){if(cn=Li(ln),cn!==null){cn.flags&=2047,Y$7=cn;return}sn!==null&&(sn.firstEffect=sn.lastEffect=null,sn.flags|=2048)}else{if(cn=Gi(cn,ln,qj),cn!==null){Y$7=cn;return}if(cn=ln,cn.tag!==24&&cn.tag!==23||cn.memoizedState===null||qj&1073741824||!(cn.mode&4)){for(var dn=0,pn=cn.child;pn!==null;)dn|=pn.lanes|pn.childLanes,pn=pn.sibling;cn.childLanes=dn}sn!==null&&!(sn.flags&2048)&&(sn.firstEffect===null&&(sn.firstEffect=ln.firstEffect),ln.lastEffect!==null&&(sn.lastEffect!==null&&(sn.lastEffect.nextEffect=ln.firstEffect),sn.lastEffect=ln.lastEffect),1<ln.flags&&(sn.lastEffect!==null?sn.lastEffect.nextEffect=ln:sn.firstEffect=ln,sn.lastEffect=ln))}if(ln=ln.sibling,ln!==null){Y$7=ln;return}Y$7=ln=sn}while(ln!==null);V$7===0&&(V$7=5)}function Uj(sn){var ln=eg();return gg(99,dk.bind(null,sn,ln)),null}function dk(sn,ln){do Oj();while(yj!==null);if(X$5&48)throw Error(y$c(327));var cn=sn.finishedWork;if(cn===null)return null;if(sn.finishedWork=null,sn.finishedLanes=0,cn===sn.current)throw Error(y$c(177));sn.callbackNode=null;var dn=cn.lanes|cn.childLanes,pn=dn,vn=sn.pendingLanes&~pn;sn.pendingLanes=pn,sn.suspendedLanes=0,sn.pingedLanes=0,sn.expiredLanes&=pn,sn.mutableReadLanes&=pn,sn.entangledLanes&=pn,pn=sn.entanglements;for(var kn=sn.eventTimes,Sn=sn.expirationTimes;0<vn;){var wn=31-Vc(vn),Pn=1<<wn;pn[wn]=0,kn[wn]=-1,Sn[wn]=-1,vn&=~Pn}if(Cj!==null&&!(dn&24)&&Cj.has(sn)&&Cj.delete(sn),sn===U$8&&(Y$7=U$8=null,W$9=0),1<cn.flags?cn.lastEffect!==null?(cn.lastEffect.nextEffect=cn,dn=cn.firstEffect):dn=cn:dn=cn.firstEffect,dn!==null){if(pn=X$5,X$5|=32,pj.current=null,kf=fd,kn=Ne$4(),Oe$5(kn)){if("selectionStart"in kn)Sn={start:kn.selectionStart,end:kn.selectionEnd};else e:if(Sn=(Sn=kn.ownerDocument)&&Sn.defaultView||window,(Pn=Sn.getSelection&&Sn.getSelection())&&Pn.rangeCount!==0){Sn=Pn.anchorNode,vn=Pn.anchorOffset,wn=Pn.focusNode,Pn=Pn.focusOffset;try{Sn.nodeType,wn.nodeType}catch{Sn=null;break e}var Nn=0,Ln=-1,Fn=-1,zn=0,Dn=0,Kn=kn,qn=null;t:for(;;){for(var Zn;Kn!==Sn||vn!==0&&Kn.nodeType!==3||(Ln=Nn+vn),Kn!==wn||Pn!==0&&Kn.nodeType!==3||(Fn=Nn+Pn),Kn.nodeType===3&&(Nn+=Kn.nodeValue.length),(Zn=Kn.firstChild)!==null;)qn=Kn,Kn=Zn;for(;;){if(Kn===kn)break t;if(qn===Sn&&++zn===vn&&(Ln=Nn),qn===wn&&++Dn===Pn&&(Fn=Nn),(Zn=Kn.nextSibling)!==null)break;Kn=qn,qn=Kn.parentNode}Kn=Zn}Sn=Ln===-1||Fn===-1?null:{start:Ln,end:Fn}}else Sn=null;Sn=Sn||{start:0,end:0}}else Sn=null;lf$1={focusedElem:kn,selectionRange:Sn},fd=!1,Ij=null,Jj=!1,Z$6=dn;do try{ek()}catch(Ss){if(Z$6===null)throw Error(y$c(330));Wi(Z$6,Ss),Z$6=Z$6.nextEffect}while(Z$6!==null);Ij=null,Z$6=dn;do try{for(kn=sn;Z$6!==null;){var Yn=Z$6.flags;if(Yn&16&&pb(Z$6.stateNode,""),Yn&128){var Jn=Z$6.alternate;if(Jn!==null){var rs=Jn.ref;rs!==null&&(typeof rs=="function"?rs(null):rs.current=null)}}switch(Yn&1038){case 2:fj(Z$6),Z$6.flags&=-3;break;case 6:fj(Z$6),Z$6.flags&=-3,ij(Z$6.alternate,Z$6);break;case 1024:Z$6.flags&=-1025;break;case 1028:Z$6.flags&=-1025,ij(Z$6.alternate,Z$6);break;case 4:ij(Z$6.alternate,Z$6);break;case 8:Sn=Z$6,cj(kn,Sn);var ss=Sn.alternate;dj(Sn),ss!==null&&dj(ss)}Z$6=Z$6.nextEffect}}catch(Ss){if(Z$6===null)throw Error(y$c(330));Wi(Z$6,Ss),Z$6=Z$6.nextEffect}while(Z$6!==null);if(rs=lf$1,Jn=Ne$4(),Yn=rs.focusedElem,kn=rs.selectionRange,Jn!==Yn&&Yn&&Yn.ownerDocument&&Me$5(Yn.ownerDocument.documentElement,Yn)){for(kn!==null&&Oe$5(Yn)&&(Jn=kn.start,rs=kn.end,rs===void 0&&(rs=Jn),"selectionStart"in Yn?(Yn.selectionStart=Jn,Yn.selectionEnd=Math.min(rs,Yn.value.length)):(rs=(Jn=Yn.ownerDocument||document)&&Jn.defaultView||window,rs.getSelection&&(rs=rs.getSelection(),Sn=Yn.textContent.length,ss=Math.min(kn.start,Sn),kn=kn.end===void 0?ss:Math.min(kn.end,Sn),!rs.extend&&ss>kn&&(Sn=kn,kn=ss,ss=Sn),Sn=Le$5(Yn,ss),vn=Le$5(Yn,kn),Sn&&vn&&(rs.rangeCount!==1||rs.anchorNode!==Sn.node||rs.anchorOffset!==Sn.offset||rs.focusNode!==vn.node||rs.focusOffset!==vn.offset)&&(Jn=Jn.createRange(),Jn.setStart(Sn.node,Sn.offset),rs.removeAllRanges(),ss>kn?(rs.addRange(Jn),rs.extend(vn.node,vn.offset)):(Jn.setEnd(vn.node,vn.offset),rs.addRange(Jn)))))),Jn=[],rs=Yn;rs=rs.parentNode;)rs.nodeType===1&&Jn.push({element:rs,left:rs.scrollLeft,top:rs.scrollTop});for(typeof Yn.focus=="function"&&Yn.focus(),Yn=0;Yn<Jn.length;Yn++)rs=Jn[Yn],rs.element.scrollLeft=rs.left,rs.element.scrollTop=rs.top}fd=!!kf,lf$1=kf=null,sn.current=cn,Z$6=dn;do try{for(Yn=sn;Z$6!==null;){var as=Z$6.flags;if(as&36&&Yi(Yn,Z$6.alternate,Z$6),as&128){Jn=void 0;var ds=Z$6.ref;if(ds!==null){var Es=Z$6.stateNode;switch(Z$6.tag){case 5:Jn=Es;break;default:Jn=Es}typeof ds=="function"?ds(Jn):ds.current=Jn}}Z$6=Z$6.nextEffect}}catch(Ss){if(Z$6===null)throw Error(y$c(330));Wi(Z$6,Ss),Z$6=Z$6.nextEffect}while(Z$6!==null);Z$6=null,$f$1(),X$5=pn}else sn.current=cn;if(xj)xj=!1,yj=sn,zj=ln;else for(Z$6=dn;Z$6!==null;)ln=Z$6.nextEffect,Z$6.nextEffect=null,Z$6.flags&8&&(as=Z$6,as.sibling=null,as.stateNode=null),Z$6=ln;if(dn=sn.pendingLanes,dn===0&&(Ti=null),dn===1?sn===Ej?Dj++:(Dj=0,Ej=sn):Dj=0,cn=cn.stateNode,Mf$1&&typeof Mf$1.onCommitFiberRoot=="function")try{Mf$1.onCommitFiberRoot(Lf,cn,void 0,(cn.current.flags&64)===64)}catch{}if(Mj(sn,O$a()),Qi)throw Qi=!1,sn=Ri,Ri=null,sn;return X$5&8||ig(),null}function ek(){for(;Z$6!==null;){var sn=Z$6.alternate;Jj||Ij===null||(Z$6.flags&8?dc(Z$6,Ij)&&(Jj=!0):Z$6.tag===13&&mj(sn,Z$6)&&dc(Z$6,Ij)&&(Jj=!0));var ln=Z$6.flags;ln&256&&Xi(sn,Z$6),!(ln&512)||xj||(xj=!0,hg(97,function(){return Oj(),null})),Z$6=Z$6.nextEffect}}function Oj(){if(zj!==90){var sn=97<zj?97:zj;return zj=90,gg(sn,fk)}return!1}function $i(sn,ln){Aj.push(ln,sn),xj||(xj=!0,hg(97,function(){return Oj(),null}))}function Zi(sn,ln){Bj.push(ln,sn),xj||(xj=!0,hg(97,function(){return Oj(),null}))}function fk(){if(yj===null)return!1;var sn=yj;if(yj=null,X$5&48)throw Error(y$c(331));var ln=X$5;X$5|=32;var cn=Bj;Bj=[];for(var dn=0;dn<cn.length;dn+=2){var pn=cn[dn],vn=cn[dn+1],kn=pn.destroy;if(pn.destroy=void 0,typeof kn=="function")try{kn()}catch(wn){if(vn===null)throw Error(y$c(330));Wi(vn,wn)}}for(cn=Aj,Aj=[],dn=0;dn<cn.length;dn+=2){pn=cn[dn],vn=cn[dn+1];try{var Sn=pn.create;pn.destroy=Sn()}catch(wn){if(vn===null)throw Error(y$c(330));Wi(vn,wn)}}for(Sn=sn.current.firstEffect;Sn!==null;)sn=Sn.nextEffect,Sn.nextEffect=null,Sn.flags&8&&(Sn.sibling=null,Sn.stateNode=null),Sn=sn;return X$5=ln,ig(),!0}function gk(sn,ln,cn){ln=Mi(cn,ln),ln=Pi(sn,ln,1),Ag(sn,ln),ln=Hg(),sn=Kj(sn,1),sn!==null&&($c(sn,1,ln),Mj(sn,ln))}function Wi(sn,ln){if(sn.tag===3)gk(sn,sn,ln);else for(var cn=sn.return;cn!==null;){if(cn.tag===3){gk(cn,sn,ln);break}else if(cn.tag===1){var dn=cn.stateNode;if(typeof cn.type.getDerivedStateFromError=="function"||typeof dn.componentDidCatch=="function"&&(Ti===null||!Ti.has(dn))){sn=Mi(ln,sn);var pn=Si(cn,sn,1);if(Ag(cn,pn),pn=Hg(),cn=Kj(cn,1),cn!==null)$c(cn,1,pn),Mj(cn,pn);else if(typeof dn.componentDidCatch=="function"&&(Ti===null||!Ti.has(dn)))try{dn.componentDidCatch(ln,sn)}catch{}break}}cn=cn.return}}function Yj(sn,ln,cn){var dn=sn.pingCache;dn!==null&&dn.delete(ln),ln=Hg(),sn.pingedLanes|=sn.suspendedLanes&cn,U$8===sn&&(W$9&cn)===cn&&(V$7===4||V$7===3&&(W$9&62914560)===W$9&&500>O$a()-jj?Qj(sn,0):uj|=cn),Mj(sn,ln)}function lj(sn,ln){var cn=sn.stateNode;cn!==null&&cn.delete(ln),ln=0,ln===0&&(ln=sn.mode,ln&2?ln&4?(Gj===0&&(Gj=tj),ln=Yc(62914560&~Gj),ln===0&&(ln=4194304)):ln=eg()===99?1:2:ln=1),cn=Hg(),sn=Kj(sn,ln),sn!==null&&($c(sn,ln,cn),Mj(sn,cn))}var ck;ck=function(sn,ln,cn){var dn=ln.lanes;if(sn!==null)if(sn.memoizedProps!==ln.pendingProps||N$9.current)ug=!0;else if(cn&dn)ug=!!(sn.flags&16384);else{switch(ug=!1,ln.tag){case 3:ri(ln),sh();break;case 5:gh(ln);break;case 1:Ff$1(ln.type)&&Jf(ln);break;case 4:eh(ln,ln.stateNode.containerInfo);break;case 10:dn=ln.memoizedProps.value;var pn=ln.type._context;I$c(mg,pn._currentValue),pn._currentValue=dn;break;case 13:if(ln.memoizedState!==null)return cn&ln.child.childLanes?ti(sn,ln,cn):(I$c(P$8,P$8.current&1),ln=hi(sn,ln,cn),ln!==null?ln.sibling:null);I$c(P$8,P$8.current&1);break;case 19:if(dn=(cn&ln.childLanes)!==0,sn.flags&64){if(dn)return Ai(sn,ln,cn);ln.flags|=64}if(pn=ln.memoizedState,pn!==null&&(pn.rendering=null,pn.tail=null,pn.lastEffect=null),I$c(P$8,P$8.current),dn)break;return null;case 23:case 24:return ln.lanes=0,mi(sn,ln,cn)}return hi(sn,ln,cn)}else ug=!1;switch(ln.lanes=0,ln.tag){case 2:if(dn=ln.type,sn!==null&&(sn.alternate=null,ln.alternate=null,ln.flags|=2),sn=ln.pendingProps,pn=Ef$1(ln,M$9.current),tg(ln,cn),pn=Ch(null,ln,dn,sn,pn,cn),ln.flags|=1,typeof pn=="object"&&pn!==null&&typeof pn.render=="function"&&pn.$$typeof===void 0){if(ln.tag=1,ln.memoizedState=null,ln.updateQueue=null,Ff$1(dn)){var vn=!0;Jf(ln)}else vn=!1;ln.memoizedState=pn.state!==null&&pn.state!==void 0?pn.state:null,xg(ln);var kn=dn.getDerivedStateFromProps;typeof kn=="function"&&Gg(ln,dn,kn,sn),pn.updater=Kg,ln.stateNode=pn,pn._reactInternals=ln,Og(ln,dn,sn,cn),ln=qi(null,ln,dn,!0,vn,cn)}else ln.tag=0,fi(null,ln,pn,cn),ln=ln.child;return ln;case 16:pn=ln.elementType;e:{switch(sn!==null&&(sn.alternate=null,ln.alternate=null,ln.flags|=2),sn=ln.pendingProps,vn=pn._init,pn=vn(pn._payload),ln.type=pn,vn=ln.tag=hk(pn),sn=lg(pn,sn),vn){case 0:ln=li(null,ln,pn,sn,cn);break e;case 1:ln=pi(null,ln,pn,sn,cn);break e;case 11:ln=gi(null,ln,pn,sn,cn);break e;case 14:ln=ii(null,ln,pn,lg(pn.type,sn),dn,cn);break e}throw Error(y$c(306,pn,""))}return ln;case 0:return dn=ln.type,pn=ln.pendingProps,pn=ln.elementType===dn?pn:lg(dn,pn),li(sn,ln,dn,pn,cn);case 1:return dn=ln.type,pn=ln.pendingProps,pn=ln.elementType===dn?pn:lg(dn,pn),pi(sn,ln,dn,pn,cn);case 3:if(ri(ln),dn=ln.updateQueue,sn===null||dn===null)throw Error(y$c(282));if(dn=ln.pendingProps,pn=ln.memoizedState,pn=pn!==null?pn.element:null,yg(sn,ln),Cg(ln,dn,null,cn),dn=ln.memoizedState.element,dn===pn)sh(),ln=hi(sn,ln,cn);else{if(pn=ln.stateNode,(vn=pn.hydrate)&&(kh=rf$1(ln.stateNode.containerInfo.firstChild),jh=ln,vn=lh=!0),vn){if(sn=pn.mutableSourceEagerHydrationData,sn!=null)for(pn=0;pn<sn.length;pn+=2)vn=sn[pn],vn._workInProgressVersionPrimary=sn[pn+1],th.push(vn);for(cn=Zg(ln,null,dn,cn),ln.child=cn;cn;)cn.flags=cn.flags&-3|1024,cn=cn.sibling}else fi(sn,ln,dn,cn),sh();ln=ln.child}return ln;case 5:return gh(ln),sn===null&&ph(ln),dn=ln.type,pn=ln.pendingProps,vn=sn!==null?sn.memoizedProps:null,kn=pn.children,nf$1(dn,pn)?kn=null:vn!==null&&nf$1(dn,vn)&&(ln.flags|=16),oi(sn,ln),fi(sn,ln,kn,cn),ln.child;case 6:return sn===null&&ph(ln),null;case 13:return ti(sn,ln,cn);case 4:return eh(ln,ln.stateNode.containerInfo),dn=ln.pendingProps,sn===null?ln.child=Yg(ln,null,dn,cn):fi(sn,ln,dn,cn),ln.child;case 11:return dn=ln.type,pn=ln.pendingProps,pn=ln.elementType===dn?pn:lg(dn,pn),gi(sn,ln,dn,pn,cn);case 7:return fi(sn,ln,ln.pendingProps,cn),ln.child;case 8:return fi(sn,ln,ln.pendingProps.children,cn),ln.child;case 12:return fi(sn,ln,ln.pendingProps.children,cn),ln.child;case 10:e:{dn=ln.type._context,pn=ln.pendingProps,kn=ln.memoizedProps,vn=pn.value;var Sn=ln.type._context;if(I$c(mg,Sn._currentValue),Sn._currentValue=vn,kn!==null)if(Sn=kn.value,vn=He$4(Sn,vn)?0:(typeof dn._calculateChangedBits=="function"?dn._calculateChangedBits(Sn,vn):1073741823)|0,vn===0){if(kn.children===pn.children&&!N$9.current){ln=hi(sn,ln,cn);break e}}else for(Sn=ln.child,Sn!==null&&(Sn.return=ln);Sn!==null;){var wn=Sn.dependencies;if(wn!==null){kn=Sn.child;for(var Pn=wn.firstContext;Pn!==null;){if(Pn.context===dn&&Pn.observedBits&vn){Sn.tag===1&&(Pn=zg(-1,cn&-cn),Pn.tag=2,Ag(Sn,Pn)),Sn.lanes|=cn,Pn=Sn.alternate,Pn!==null&&(Pn.lanes|=cn),sg(Sn.return,cn),wn.lanes|=cn;break}Pn=Pn.next}}else kn=Sn.tag===10&&Sn.type===ln.type?null:Sn.child;if(kn!==null)kn.return=Sn;else for(kn=Sn;kn!==null;){if(kn===ln){kn=null;break}if(Sn=kn.sibling,Sn!==null){Sn.return=kn.return,kn=Sn;break}kn=kn.return}Sn=kn}fi(sn,ln,pn.children,cn),ln=ln.child}return ln;case 9:return pn=ln.type,vn=ln.pendingProps,dn=vn.children,tg(ln,cn),pn=vg(pn,vn.unstable_observedBits),dn=dn(pn),ln.flags|=1,fi(sn,ln,dn,cn),ln.child;case 14:return pn=ln.type,vn=lg(pn,ln.pendingProps),vn=lg(pn.type,vn),ii(sn,ln,pn,vn,dn,cn);case 15:return ki(sn,ln,ln.type,ln.pendingProps,dn,cn);case 17:return dn=ln.type,pn=ln.pendingProps,pn=ln.elementType===dn?pn:lg(dn,pn),sn!==null&&(sn.alternate=null,ln.alternate=null,ln.flags|=2),ln.tag=1,Ff$1(dn)?(sn=!0,Jf(ln)):sn=!1,tg(ln,cn),Mg(ln,dn,pn),Og(ln,dn,pn,cn),qi(null,ln,dn,!0,sn,cn);case 19:return Ai(sn,ln,cn);case 23:return mi(sn,ln,cn);case 24:return mi(sn,ln,cn)}throw Error(y$c(156,ln.tag))};function ik(sn,ln,cn,dn){this.tag=sn,this.key=cn,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=ln,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=dn,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function nh(sn,ln,cn,dn){return new ik(sn,ln,cn,dn)}function ji(sn){return sn=sn.prototype,!(!sn||!sn.isReactComponent)}function hk(sn){if(typeof sn=="function")return ji(sn)?1:0;if(sn!=null){if(sn=sn.$$typeof,sn===Aa$3)return 11;if(sn===Da$3)return 14}return 2}function Tg(sn,ln){var cn=sn.alternate;return cn===null?(cn=nh(sn.tag,ln,sn.key,sn.mode),cn.elementType=sn.elementType,cn.type=sn.type,cn.stateNode=sn.stateNode,cn.alternate=sn,sn.alternate=cn):(cn.pendingProps=ln,cn.type=sn.type,cn.flags=0,cn.nextEffect=null,cn.firstEffect=null,cn.lastEffect=null),cn.childLanes=sn.childLanes,cn.lanes=sn.lanes,cn.child=sn.child,cn.memoizedProps=sn.memoizedProps,cn.memoizedState=sn.memoizedState,cn.updateQueue=sn.updateQueue,ln=sn.dependencies,cn.dependencies=ln===null?null:{lanes:ln.lanes,firstContext:ln.firstContext},cn.sibling=sn.sibling,cn.index=sn.index,cn.ref=sn.ref,cn}function Vg(sn,ln,cn,dn,pn,vn){var kn=2;if(dn=sn,typeof sn=="function")ji(sn)&&(kn=1);else if(typeof sn=="string")kn=5;else e:switch(sn){case ua$3:return Xg(cn.children,pn,vn,ln);case Ha$2:kn=8,pn|=16;break;case wa$3:kn=8,pn|=1;break;case xa$3:return sn=nh(12,cn,ln,pn|8),sn.elementType=xa$3,sn.type=xa$3,sn.lanes=vn,sn;case Ba$3:return sn=nh(13,cn,ln,pn),sn.type=Ba$3,sn.elementType=Ba$3,sn.lanes=vn,sn;case Ca$3:return sn=nh(19,cn,ln,pn),sn.elementType=Ca$3,sn.lanes=vn,sn;case Ia$3:return vi(cn,pn,vn,ln);case Ja$2:return sn=nh(24,cn,ln,pn),sn.elementType=Ja$2,sn.lanes=vn,sn;default:if(typeof sn=="object"&&sn!==null)switch(sn.$$typeof){case ya$3:kn=10;break e;case za$3:kn=9;break e;case Aa$3:kn=11;break e;case Da$3:kn=14;break e;case Ea$3:kn=16,dn=null;break e;case Fa$2:kn=22;break e}throw Error(y$c(130,sn==null?sn:typeof sn,""))}return ln=nh(kn,cn,ln,pn),ln.elementType=sn,ln.type=dn,ln.lanes=vn,ln}function Xg(sn,ln,cn,dn){return sn=nh(7,sn,dn,ln),sn.lanes=cn,sn}function vi(sn,ln,cn,dn){return sn=nh(23,sn,dn,ln),sn.elementType=Ia$3,sn.lanes=cn,sn}function Ug(sn,ln,cn){return sn=nh(6,sn,null,ln),sn.lanes=cn,sn}function Wg(sn,ln,cn){return ln=nh(4,sn.children!==null?sn.children:[],sn.key,ln),ln.lanes=cn,ln.stateNode={containerInfo:sn.containerInfo,pendingChildren:null,implementation:sn.implementation},ln}function jk(sn,ln,cn){this.tag=ln,this.containerInfo=sn,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=cn,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Zc(0),this.expirationTimes=Zc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zc(0),this.mutableSourceEagerHydrationData=null}function kk(sn,ln,cn){var dn=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ta$3,key:dn==null?null:""+dn,children:sn,containerInfo:ln,implementation:cn}}function lk(sn,ln,cn,dn){var pn=ln.current,vn=Hg(),kn=Ig(pn);e:if(cn){cn=cn._reactInternals;t:{if(Zb(cn)!==cn||cn.tag!==1)throw Error(y$c(170));var Sn=cn;do{switch(Sn.tag){case 3:Sn=Sn.stateNode.context;break t;case 1:if(Ff$1(Sn.type)){Sn=Sn.stateNode.__reactInternalMemoizedMergedChildContext;break t}}Sn=Sn.return}while(Sn!==null);throw Error(y$c(171))}if(cn.tag===1){var wn=cn.type;if(Ff$1(wn)){cn=If$1(cn,wn,Sn);break e}}cn=Sn}else cn=Cf$1;return ln.context===null?ln.context=cn:ln.pendingContext=cn,ln=zg(vn,kn),ln.payload={element:sn},dn=dn===void 0?null:dn,dn!==null&&(ln.callback=dn),Ag(pn,ln),Jg(pn,kn,vn),kn}function mk(sn){if(sn=sn.current,!sn.child)return null;switch(sn.child.tag){case 5:return sn.child.stateNode;default:return sn.child.stateNode}}function nk(sn,ln){if(sn=sn.memoizedState,sn!==null&&sn.dehydrated!==null){var cn=sn.retryLane;sn.retryLane=cn!==0&&cn<ln?cn:ln}}function ok(sn,ln){nk(sn,ln),(sn=sn.alternate)&&nk(sn,ln)}function pk(){return null}function qk(sn,ln,cn){var dn=cn!=null&&cn.hydrationOptions!=null&&cn.hydrationOptions.mutableSources||null;if(cn=new jk(sn,ln,cn!=null&&cn.hydrate===!0),ln=nh(3,null,null,ln===2?7:ln===1?3:0),cn.current=ln,ln.stateNode=cn,xg(ln),sn[ff$2]=cn.current,cf$1(sn.nodeType===8?sn.parentNode:sn),dn)for(sn=0;sn<dn.length;sn++){ln=dn[sn];var pn=ln._getVersion;pn=pn(ln._source),cn.mutableSourceEagerHydrationData==null?cn.mutableSourceEagerHydrationData=[ln,pn]:cn.mutableSourceEagerHydrationData.push(ln,pn)}this._internalRoot=cn}qk.prototype.render=function(sn){lk(sn,this._internalRoot,null,null)};qk.prototype.unmount=function(){var sn=this._internalRoot,ln=sn.containerInfo;lk(null,sn,null,function(){ln[ff$2]=null})};function rk(sn){return!(!sn||sn.nodeType!==1&&sn.nodeType!==9&&sn.nodeType!==11&&(sn.nodeType!==8||sn.nodeValue!==" react-mount-point-unstable "))}function sk(sn,ln){if(ln||(ln=sn?sn.nodeType===9?sn.documentElement:sn.firstChild:null,ln=!(!ln||ln.nodeType!==1||!ln.hasAttribute("data-reactroot"))),!ln)for(var cn;cn=sn.lastChild;)sn.removeChild(cn);return new qk(sn,0,ln?{hydrate:!0}:void 0)}function tk(sn,ln,cn,dn,pn){var vn=cn._reactRootContainer;if(vn){var kn=vn._internalRoot;if(typeof pn=="function"){var Sn=pn;pn=function(){var Pn=mk(kn);Sn.call(Pn)}}lk(ln,kn,sn,pn)}else{if(vn=cn._reactRootContainer=sk(cn,dn),kn=vn._internalRoot,typeof pn=="function"){var wn=pn;pn=function(){var Pn=mk(kn);wn.call(Pn)}}Xj(function(){lk(ln,kn,sn,pn)})}return mk(kn)}ec=function(sn){if(sn.tag===13){var ln=Hg();Jg(sn,4,ln),ok(sn,4)}};fc=function(sn){if(sn.tag===13){var ln=Hg();Jg(sn,67108864,ln),ok(sn,67108864)}};gc=function(sn){if(sn.tag===13){var ln=Hg(),cn=Ig(sn);Jg(sn,cn,ln),ok(sn,cn)}};hc=function(sn,ln){return ln()};yb=function(sn,ln,cn){switch(ln){case"input":if(ab(sn,cn),ln=cn.name,cn.type==="radio"&&ln!=null){for(cn=sn;cn.parentNode;)cn=cn.parentNode;for(cn=cn.querySelectorAll("input[name="+JSON.stringify(""+ln)+'][type="radio"]'),ln=0;ln<cn.length;ln++){var dn=cn[ln];if(dn!==sn&&dn.form===sn.form){var pn=Db(dn);if(!pn)throw Error(y$c(90));Wa$2(dn),ab(dn,pn)}}}break;case"textarea":ib(sn,cn);break;case"select":ln=cn.value,ln!=null&&fb(sn,!!cn.multiple,ln,!1)}};Gb=Wj;Hb=function(sn,ln,cn,dn,pn){var vn=X$5;X$5|=4;try{return gg(98,sn.bind(null,ln,cn,dn,pn))}finally{X$5=vn,X$5===0&&(wj(),ig())}};Ib=function(){!(X$5&49)&&(Vj(),Oj())};Jb=function(sn,ln){var cn=X$5;X$5|=2;try{return sn(ln)}finally{X$5=cn,X$5===0&&(wj(),ig())}};function uk(sn,ln){var cn=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rk(ln))throw Error(y$c(200));return kk(sn,ln,null,cn)}var vk={Events:[Cb,ue$5,Db,Eb,Fb,Oj,{current:!1}]},wk={findFiberByHostInstance:wc,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},xk={bundleType:wk.bundleType,version:wk.version,rendererPackageName:wk.rendererPackageName,rendererConfig:wk.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ra$3.ReactCurrentDispatcher,findHostInstanceByFiber:function(sn){return sn=cc(sn),sn===null?null:sn.stateNode},findFiberByHostInstance:wk.findFiberByHostInstance||pk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yk=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yk.isDisabled&&yk.supportsFiber)try{Lf=yk.inject(xk),Mf$1=yk}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vk;reactDom_production_min.createPortal=uk;reactDom_production_min.findDOMNode=function(sn){if(sn==null)return null;if(sn.nodeType===1)return sn;var ln=sn._reactInternals;if(ln===void 0)throw typeof sn.render=="function"?Error(y$c(188)):Error(y$c(268,Object.keys(sn)));return sn=cc(ln),sn=sn===null?null:sn.stateNode,sn};reactDom_production_min.flushSync=function(sn,ln){var cn=X$5;if(cn&48)return sn(ln);X$5|=1;try{if(sn)return gg(99,sn.bind(null,ln))}finally{X$5=cn,ig()}};reactDom_production_min.hydrate=function(sn,ln,cn){if(!rk(ln))throw Error(y$c(200));return tk(null,sn,ln,!0,cn)};reactDom_production_min.render=function(sn,ln,cn){if(!rk(ln))throw Error(y$c(200));return tk(null,sn,ln,!1,cn)};reactDom_production_min.unmountComponentAtNode=function(sn){if(!rk(sn))throw Error(y$c(40));return sn._reactRootContainer?(Xj(function(){tk(null,null,sn,!1,function(){sn._reactRootContainer=null,sn[ff$2]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Wj;reactDom_production_min.unstable_createPortal=function(sn,ln){return uk(sn,ln,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};reactDom_production_min.unstable_renderSubtreeIntoContainer=function(sn,ln,cn,dn){if(!rk(cn))throw Error(y$c(200));if(sn==null||sn._reactInternals===void 0)throw Error(y$c(38));return tk(sn,ln,cn,!1,dn)};reactDom_production_min.version="17.0.2";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(sn){console.error(sn)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM=getDefaultExportFromCjs(reactDomExports);var lib={exports:{}},Modal$3={},propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function sn(dn,pn,vn,kn,Sn,wn){if(wn!==ReactPropTypesSecret){var Pn=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw Pn.name="Invariant Violation",Pn}}sn.isRequired=sn;function ln(){return sn}var cn={array:sn,bigint:sn,bool:sn,func:sn,number:sn,object:sn,string:sn,symbol:sn,any:sn,arrayOf:ln,element:sn,elementType:sn,instanceOf:ln,node:sn,objectOf:ln,oneOf:ln,oneOfType:ln,shape:ln,exact:ln,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return cn.PropTypes=cn,cn};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const r$7=getDefaultExportFromCjs(propTypesExports);var ModalPortal={exports:{}},focusManager$1={},tabbable$1={exports:{}};tabbable$1.exports;(function(sn,ln){Object.defineProperty(ln,"__esModule",{value:!0}),ln.default=Nn;/*!
 * Adapted from jQuery UI core
 *
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */var cn="none",dn="contents",pn=/input|select|textarea|button|object|iframe/;function vn(Ln,Fn){return Fn.getPropertyValue("overflow")!=="visible"||Ln.scrollWidth<=0&&Ln.scrollHeight<=0}function kn(Ln){var Fn=Ln.offsetWidth<=0&&Ln.offsetHeight<=0;if(Fn&&!Ln.innerHTML)return!0;try{var zn=window.getComputedStyle(Ln),Dn=zn.getPropertyValue("display");return Fn?Dn!==dn&&vn(Ln,zn):Dn===cn}catch{return console.warn("Failed to inspect element style"),!1}}function Sn(Ln){for(var Fn=Ln,zn=Ln.getRootNode&&Ln.getRootNode();Fn&&Fn!==document.body;){if(zn&&Fn===zn&&(Fn=zn.host.parentNode),kn(Fn))return!1;Fn=Fn.parentNode}return!0}function wn(Ln,Fn){var zn=Ln.nodeName.toLowerCase(),Dn=pn.test(zn)&&!Ln.disabled||zn==="a"&&Ln.href||Fn;return Dn&&Sn(Ln)}function Pn(Ln){var Fn=Ln.getAttribute("tabindex");Fn===null&&(Fn=void 0);var zn=isNaN(Fn);return(zn||Fn>=0)&&wn(Ln,!zn)}function Nn(Ln){var Fn=[].slice.call(Ln.querySelectorAll("*"),0).reduce(function(zn,Dn){return zn.concat(Dn.shadowRoot?Nn(Dn.shadowRoot):[Dn])},[]);return Fn.filter(Pn)}sn.exports=ln.default})(tabbable$1,tabbable$1.exports);var tabbableExports=tabbable$1.exports;Object.defineProperty(focusManager$1,"__esModule",{value:!0});focusManager$1.resetState=resetState$4;focusManager$1.log=log$e;focusManager$1.handleBlur=handleBlur;focusManager$1.handleFocus=handleFocus;focusManager$1.markForFocusLater=markForFocusLater;focusManager$1.returnFocus=returnFocus;focusManager$1.popWithoutFocus=popWithoutFocus;focusManager$1.setupScopedFocus=setupScopedFocus;focusManager$1.teardownScopedFocus=teardownScopedFocus;var _tabbable=tabbableExports,_tabbable2=_interopRequireDefault$4(_tabbable);function _interopRequireDefault$4(sn){return sn&&sn.__esModule?sn:{default:sn}}var focusLaterElements=[],modalElement=null,needToFocus=!1;function resetState$4(){focusLaterElements=[]}function log$e(){}function handleBlur(){needToFocus=!0}function handleFocus(){if(needToFocus){if(needToFocus=!1,!modalElement)return;setTimeout(function(){if(!modalElement.contains(document.activeElement)){var sn=(0,_tabbable2.default)(modalElement)[0]||modalElement;sn.focus()}},0)}}function markForFocusLater(){focusLaterElements.push(document.activeElement)}function returnFocus(){var sn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ln=null;try{focusLaterElements.length!==0&&(ln=focusLaterElements.pop(),ln.focus({preventScroll:sn}));return}catch{console.warn(["You tried to return focus to",ln,"but it is not in the DOM anymore"].join(" "))}}function popWithoutFocus(){focusLaterElements.length>0&&focusLaterElements.pop()}function setupScopedFocus(sn){modalElement=sn,window.addEventListener?(window.addEventListener("blur",handleBlur,!1),document.addEventListener("focus",handleFocus,!0)):(window.attachEvent("onBlur",handleBlur),document.attachEvent("onFocus",handleFocus))}function teardownScopedFocus(){modalElement=null,window.addEventListener?(window.removeEventListener("blur",handleBlur),document.removeEventListener("focus",handleFocus)):(window.detachEvent("onBlur",handleBlur),document.detachEvent("onFocus",handleFocus))}var scopeTab$1={exports:{}};scopeTab$1.exports;(function(sn,ln){Object.defineProperty(ln,"__esModule",{value:!0}),ln.default=kn;var cn=tabbableExports,dn=pn(cn);function pn(Sn){return Sn&&Sn.__esModule?Sn:{default:Sn}}function vn(){var Sn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document;return Sn.activeElement.shadowRoot?vn(Sn.activeElement.shadowRoot):Sn.activeElement}function kn(Sn,wn){var Pn=(0,dn.default)(Sn);if(!Pn.length){wn.preventDefault();return}var Nn=void 0,Ln=wn.shiftKey,Fn=Pn[0],zn=Pn[Pn.length-1],Dn=vn();if(Sn===Dn){if(!Ln)return;Nn=zn}if(zn===Dn&&!Ln&&(Nn=Fn),Fn===Dn&&Ln&&(Nn=zn),Nn){wn.preventDefault(),Nn.focus();return}var Kn=/(\bChrome\b|\bSafari\b)\//.exec(navigator.userAgent),qn=Kn!=null&&Kn[1]!="Chrome"&&/\biPod\b|\biPad\b/g.exec(navigator.userAgent)==null;if(qn){var Zn=Pn.indexOf(Dn);if(Zn>-1&&(Zn+=Ln?-1:1),Nn=Pn[Zn],typeof Nn>"u"){wn.preventDefault(),Nn=Ln?zn:Fn,Nn.focus();return}wn.preventDefault(),Nn.focus()}}sn.exports=ln.default})(scopeTab$1,scopeTab$1.exports);var scopeTabExports=scopeTab$1.exports,ariaAppHider$1={},warning$1=function(){},warning_1=warning$1,safeHTMLElement={},exenv={exports:{}};/*!
  Copyright (c) 2015 Jed Watson.
  Based on code that is Copyright 2013-2015, Facebook, Inc.
  All rights reserved.
*/exenv.exports;(function(sn){(function(){var ln=!!(typeof window<"u"&&window.document&&window.document.createElement),cn={canUseDOM:ln,canUseWorkers:typeof Worker<"u",canUseEventListeners:ln&&!!(window.addEventListener||window.attachEvent),canUseViewport:ln&&!!window.screen};sn.exports?sn.exports=cn:window.ExecutionEnvironment=cn})()})(exenv);var exenvExports=exenv.exports;Object.defineProperty(safeHTMLElement,"__esModule",{value:!0});safeHTMLElement.canUseDOM=safeHTMLElement.SafeNodeList=safeHTMLElement.SafeHTMLCollection=void 0;var _exenv=exenvExports,_exenv2=_interopRequireDefault$3(_exenv);function _interopRequireDefault$3(sn){return sn&&sn.__esModule?sn:{default:sn}}var EE=_exenv2.default,SafeHTMLElement=EE.canUseDOM?window.HTMLElement:{};safeHTMLElement.SafeHTMLCollection=EE.canUseDOM?window.HTMLCollection:{};safeHTMLElement.SafeNodeList=EE.canUseDOM?window.NodeList:{};safeHTMLElement.canUseDOM=EE.canUseDOM;safeHTMLElement.default=SafeHTMLElement;Object.defineProperty(ariaAppHider$1,"__esModule",{value:!0});ariaAppHider$1.resetState=resetState$3;ariaAppHider$1.log=log$d;ariaAppHider$1.assertNodeList=assertNodeList;ariaAppHider$1.setElement=setElement;ariaAppHider$1.validateElement=validateElement;ariaAppHider$1.hide=hide;ariaAppHider$1.show=show;ariaAppHider$1.documentNotReadyOrSSRTesting=documentNotReadyOrSSRTesting;var _warning=warning_1,_warning2=_interopRequireDefault$2(_warning),_safeHTMLElement$1=safeHTMLElement;function _interopRequireDefault$2(sn){return sn&&sn.__esModule?sn:{default:sn}}var globalElement=null;function resetState$3(){globalElement&&(globalElement.removeAttribute?globalElement.removeAttribute("aria-hidden"):globalElement.length!=null?globalElement.forEach(function(sn){return sn.removeAttribute("aria-hidden")}):document.querySelectorAll(globalElement).forEach(function(sn){return sn.removeAttribute("aria-hidden")})),globalElement=null}function log$d(){}function assertNodeList(sn,ln){if(!sn||!sn.length)throw new Error("react-modal: No elements were found for selector "+ln+".")}function setElement(sn){var ln=sn;if(typeof ln=="string"&&_safeHTMLElement$1.canUseDOM){var cn=document.querySelectorAll(ln);assertNodeList(cn,ln),ln=cn}return globalElement=ln||globalElement,globalElement}function validateElement(sn){var ln=sn||globalElement;return ln?Array.isArray(ln)||ln instanceof HTMLCollection||ln instanceof NodeList?ln:[ln]:((0,_warning2.default)(!1,["react-modal: App element is not defined.","Please use `Modal.setAppElement(el)` or set `appElement={el}`.","This is needed so screen readers don't see main content","when modal is opened. It is not recommended, but you can opt-out","by setting `ariaHideApp={false}`."].join(" ")),[])}function hide(sn){var ln=!0,cn=!1,dn=void 0;try{for(var pn=validateElement(sn)[Symbol.iterator](),vn;!(ln=(vn=pn.next()).done);ln=!0){var kn=vn.value;kn.setAttribute("aria-hidden","true")}}catch(Sn){cn=!0,dn=Sn}finally{try{!ln&&pn.return&&pn.return()}finally{if(cn)throw dn}}}function show(sn){var ln=!0,cn=!1,dn=void 0;try{for(var pn=validateElement(sn)[Symbol.iterator](),vn;!(ln=(vn=pn.next()).done);ln=!0){var kn=vn.value;kn.removeAttribute("aria-hidden")}}catch(Sn){cn=!0,dn=Sn}finally{try{!ln&&pn.return&&pn.return()}finally{if(cn)throw dn}}}function documentNotReadyOrSSRTesting(){globalElement=null}var classList$2={};Object.defineProperty(classList$2,"__esModule",{value:!0});classList$2.resetState=resetState$2;classList$2.log=log$c;var htmlClassList={},docBodyClassList={};function removeClass(sn,ln){sn.classList.remove(ln)}function resetState$2(){var sn=document.getElementsByTagName("html")[0];for(var ln in htmlClassList)removeClass(sn,htmlClassList[ln]);var cn=document.body;for(var dn in docBodyClassList)removeClass(cn,docBodyClassList[dn]);htmlClassList={},docBodyClassList={}}function log$c(){}var incrementReference=function(ln,cn){return ln[cn]||(ln[cn]=0),ln[cn]+=1,cn},decrementReference=function(ln,cn){return ln[cn]&&(ln[cn]-=1),cn},trackClass=function(ln,cn,dn){dn.forEach(function(pn){incrementReference(cn,pn),ln.add(pn)})},untrackClass=function(ln,cn,dn){dn.forEach(function(pn){decrementReference(cn,pn),cn[pn]===0&&ln.remove(pn)})};classList$2.add=function(ln,cn){return trackClass(ln.classList,ln.nodeName.toLowerCase()=="html"?htmlClassList:docBodyClassList,cn.split(" "))};classList$2.remove=function(ln,cn){return untrackClass(ln.classList,ln.nodeName.toLowerCase()=="html"?htmlClassList:docBodyClassList,cn.split(" "))};var portalOpenInstances$1={};Object.defineProperty(portalOpenInstances$1,"__esModule",{value:!0});portalOpenInstances$1.log=log$b;portalOpenInstances$1.resetState=resetState$1;function _classCallCheck$2(sn,ln){if(!(sn instanceof ln))throw new TypeError("Cannot call a class as a function")}var PortalOpenInstances=function sn(){var ln=this;_classCallCheck$2(this,sn),this.register=function(cn){ln.openInstances.indexOf(cn)===-1&&(ln.openInstances.push(cn),ln.emit("register"))},this.deregister=function(cn){var dn=ln.openInstances.indexOf(cn);dn!==-1&&(ln.openInstances.splice(dn,1),ln.emit("deregister"))},this.subscribe=function(cn){ln.subscribers.push(cn)},this.emit=function(cn){ln.subscribers.forEach(function(dn){return dn(cn,ln.openInstances.slice())})},this.openInstances=[],this.subscribers=[]},portalOpenInstances=new PortalOpenInstances;function log$b(){console.log("portalOpenInstances ----------"),console.log(portalOpenInstances.openInstances.length),portalOpenInstances.openInstances.forEach(function(sn){return console.log(sn)}),console.log("end portalOpenInstances ----------")}function resetState$1(){portalOpenInstances=new PortalOpenInstances}portalOpenInstances$1.default=portalOpenInstances;var bodyTrap$1={};Object.defineProperty(bodyTrap$1,"__esModule",{value:!0});bodyTrap$1.resetState=resetState;bodyTrap$1.log=log$a;var _portalOpenInstances=portalOpenInstances$1,_portalOpenInstances2=_interopRequireDefault$1(_portalOpenInstances);function _interopRequireDefault$1(sn){return sn&&sn.__esModule?sn:{default:sn}}var before=void 0,after=void 0,instances=[];function resetState(){for(var sn=[before,after],ln=0;ln<sn.length;ln++){var cn=sn[ln];cn&&cn.parentNode&&cn.parentNode.removeChild(cn)}before=after=null,instances=[]}function log$a(){console.log("bodyTrap ----------"),console.log(instances.length);for(var sn=[before,after],ln=0;ln<sn.length;ln++){var cn=sn[ln],dn=cn||{};console.log(dn.nodeName,dn.className,dn.id)}console.log("edn bodyTrap ----------")}function focusContent(){instances.length!==0&&instances[instances.length-1].focusContent()}function bodyTrap(sn,ln){!before&&!after&&(before=document.createElement("div"),before.setAttribute("data-react-modal-body-trap",""),before.style.position="absolute",before.style.opacity="0",before.setAttribute("tabindex","0"),before.addEventListener("focus",focusContent),after=before.cloneNode(),after.addEventListener("focus",focusContent)),instances=ln,instances.length>0?(document.body.firstChild!==before&&document.body.insertBefore(before,document.body.firstChild),document.body.lastChild!==after&&document.body.appendChild(after)):(before.parentElement&&before.parentElement.removeChild(before),after.parentElement&&after.parentElement.removeChild(after))}_portalOpenInstances2.default.subscribe(bodyTrap);ModalPortal.exports;(function(sn,ln){Object.defineProperty(ln,"__esModule",{value:!0});var cn=Object.assign||function(ys){for(var _s=1;_s<arguments.length;_s++){var js=arguments[_s];for(var bs in js)Object.prototype.hasOwnProperty.call(js,bs)&&(ys[bs]=js[bs])}return ys},dn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ys){return typeof ys}:function(ys){return ys&&typeof Symbol=="function"&&ys.constructor===Symbol&&ys!==Symbol.prototype?"symbol":typeof ys},pn=function(){function ys(_s,js){for(var bs=0;bs<js.length;bs++){var ks=js[bs];ks.enumerable=ks.enumerable||!1,ks.configurable=!0,"value"in ks&&(ks.writable=!0),Object.defineProperty(_s,ks.key,ks)}}return function(_s,js,bs){return js&&ys(_s.prototype,js),bs&&ys(_s,bs),_s}}(),vn=reactExports,kn=propTypesExports,Sn=ss(kn),wn=focusManager$1,Pn=rs(wn),Nn=scopeTabExports,Ln=ss(Nn),Fn=ariaAppHider$1,zn=rs(Fn),Dn=classList$2,Kn=rs(Dn),qn=safeHTMLElement,Zn=ss(qn),Yn=portalOpenInstances$1,Jn=ss(Yn);function rs(ys){if(ys&&ys.__esModule)return ys;var _s={};if(ys!=null)for(var js in ys)Object.prototype.hasOwnProperty.call(ys,js)&&(_s[js]=ys[js]);return _s.default=ys,_s}function ss(ys){return ys&&ys.__esModule?ys:{default:ys}}function as(ys,_s){if(!(ys instanceof _s))throw new TypeError("Cannot call a class as a function")}function ds(ys,_s){if(!ys)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _s&&(typeof _s=="object"||typeof _s=="function")?_s:ys}function Es(ys,_s){if(typeof _s!="function"&&_s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _s);ys.prototype=Object.create(_s&&_s.prototype,{constructor:{value:ys,enumerable:!1,writable:!0,configurable:!0}}),_s&&(Object.setPrototypeOf?Object.setPrototypeOf(ys,_s):ys.__proto__=_s)}var Ss={overlay:"ReactModal__Overlay",content:"ReactModal__Content"},Qn=function(_s){return _s.code==="Tab"||_s.keyCode===9},ms=function(_s){return _s.code==="Escape"||_s.keyCode===27},Ts=0,Rs=function(ys){Es(_s,ys);function _s(js){as(this,_s);var bs=ds(this,(_s.__proto__||Object.getPrototypeOf(_s)).call(this,js));return bs.setOverlayRef=function(ks){bs.overlay=ks,bs.props.overlayRef&&bs.props.overlayRef(ks)},bs.setContentRef=function(ks){bs.content=ks,bs.props.contentRef&&bs.props.contentRef(ks)},bs.afterClose=function(){var ks=bs.props,xs=ks.appElement,Ks=ks.ariaHideApp,Vs=ks.htmlOpenClassName,Js=ks.bodyOpenClassName,ru=ks.parentSelector,hs=ru&&ru().ownerDocument||document;Js&&Kn.remove(hs.body,Js),Vs&&Kn.remove(hs.getElementsByTagName("html")[0],Vs),Ks&&Ts>0&&(Ts-=1,Ts===0&&zn.show(xs)),bs.props.shouldFocusAfterRender&&(bs.props.shouldReturnFocusAfterClose?(Pn.returnFocus(bs.props.preventScroll),Pn.teardownScopedFocus()):Pn.popWithoutFocus()),bs.props.onAfterClose&&bs.props.onAfterClose(),Jn.default.deregister(bs)},bs.open=function(){bs.beforeOpen(),bs.state.afterOpen&&bs.state.beforeClose?(clearTimeout(bs.closeTimer),bs.setState({beforeClose:!1})):(bs.props.shouldFocusAfterRender&&(Pn.setupScopedFocus(bs.node),Pn.markForFocusLater()),bs.setState({isOpen:!0},function(){bs.openAnimationFrame=requestAnimationFrame(function(){bs.setState({afterOpen:!0}),bs.props.isOpen&&bs.props.onAfterOpen&&bs.props.onAfterOpen({overlayEl:bs.overlay,contentEl:bs.content})})}))},bs.close=function(){bs.props.closeTimeoutMS>0?bs.closeWithTimeout():bs.closeWithoutTimeout()},bs.focusContent=function(){return bs.content&&!bs.contentHasFocus()&&bs.content.focus({preventScroll:!0})},bs.closeWithTimeout=function(){var ks=Date.now()+bs.props.closeTimeoutMS;bs.setState({beforeClose:!0,closesAt:ks},function(){bs.closeTimer=setTimeout(bs.closeWithoutTimeout,bs.state.closesAt-Date.now())})},bs.closeWithoutTimeout=function(){bs.setState({beforeClose:!1,isOpen:!1,afterOpen:!1,closesAt:null},bs.afterClose)},bs.handleKeyDown=function(ks){Qn(ks)&&(0,Ln.default)(bs.content,ks),bs.props.shouldCloseOnEsc&&ms(ks)&&(ks.stopPropagation(),bs.requestClose(ks))},bs.handleOverlayOnClick=function(ks){bs.shouldClose===null&&(bs.shouldClose=!0),bs.shouldClose&&bs.props.shouldCloseOnOverlayClick&&(bs.ownerHandlesClose()?bs.requestClose(ks):bs.focusContent()),bs.shouldClose=null},bs.handleContentOnMouseUp=function(){bs.shouldClose=!1},bs.handleOverlayOnMouseDown=function(ks){!bs.props.shouldCloseOnOverlayClick&&ks.target==bs.overlay&&ks.preventDefault()},bs.handleContentOnClick=function(){bs.shouldClose=!1},bs.handleContentOnMouseDown=function(){bs.shouldClose=!1},bs.requestClose=function(ks){return bs.ownerHandlesClose()&&bs.props.onRequestClose(ks)},bs.ownerHandlesClose=function(){return bs.props.onRequestClose},bs.shouldBeClosed=function(){return!bs.state.isOpen&&!bs.state.beforeClose},bs.contentHasFocus=function(){return document.activeElement===bs.content||bs.content.contains(document.activeElement)},bs.buildClassName=function(ks,xs){var Ks=(typeof xs>"u"?"undefined":dn(xs))==="object"?xs:{base:Ss[ks],afterOpen:Ss[ks]+"--after-open",beforeClose:Ss[ks]+"--before-close"},Vs=Ks.base;return bs.state.afterOpen&&(Vs=Vs+" "+Ks.afterOpen),bs.state.beforeClose&&(Vs=Vs+" "+Ks.beforeClose),typeof xs=="string"&&xs?Vs+" "+xs:Vs},bs.attributesFromObject=function(ks,xs){return Object.keys(xs).reduce(function(Ks,Vs){return Ks[ks+"-"+Vs]=xs[Vs],Ks},{})},bs.state={afterOpen:!1,beforeClose:!1},bs.shouldClose=null,bs.moveFromContentToOverlay=null,bs}return pn(_s,[{key:"componentDidMount",value:function(){this.props.isOpen&&this.open()}},{key:"componentDidUpdate",value:function(bs,ks){this.props.isOpen&&!bs.isOpen?this.open():!this.props.isOpen&&bs.isOpen&&this.close(),this.props.shouldFocusAfterRender&&this.state.isOpen&&!ks.isOpen&&this.focusContent()}},{key:"componentWillUnmount",value:function(){this.state.isOpen&&this.afterClose(),clearTimeout(this.closeTimer),cancelAnimationFrame(this.openAnimationFrame)}},{key:"beforeOpen",value:function(){var bs=this.props,ks=bs.appElement,xs=bs.ariaHideApp,Ks=bs.htmlOpenClassName,Vs=bs.bodyOpenClassName,Js=bs.parentSelector,ru=Js&&Js().ownerDocument||document;Vs&&Kn.add(ru.body,Vs),Ks&&Kn.add(ru.getElementsByTagName("html")[0],Ks),xs&&(Ts+=1,zn.hide(ks)),Jn.default.register(this)}},{key:"render",value:function(){var bs=this.props,ks=bs.id,xs=bs.className,Ks=bs.overlayClassName,Vs=bs.defaultStyles,Js=bs.children,ru=xs?{}:Vs.content,hs=Ks?{}:Vs.overlay;if(this.shouldBeClosed())return null;var lu={ref:this.setOverlayRef,className:this.buildClassName("overlay",Ks),style:cn({},hs,this.props.style.overlay),onClick:this.handleOverlayOnClick,onMouseDown:this.handleOverlayOnMouseDown},_u=cn({id:ks,ref:this.setContentRef,style:cn({},ru,this.props.style.content),className:this.buildClassName("content",xs),tabIndex:"-1",onKeyDown:this.handleKeyDown,onMouseDown:this.handleContentOnMouseDown,onMouseUp:this.handleContentOnMouseUp,onClick:this.handleContentOnClick,role:this.props.role,"aria-label":this.props.contentLabel},this.attributesFromObject("aria",cn({modal:!0},this.props.aria)),this.attributesFromObject("data",this.props.data||{}),{"data-testid":this.props.testId}),yu=this.props.contentElement(_u,Js);return this.props.overlayElement(lu,yu)}}]),_s}(vn.Component);Rs.defaultProps={style:{overlay:{},content:{}},defaultStyles:{}},Rs.propTypes={isOpen:Sn.default.bool.isRequired,defaultStyles:Sn.default.shape({content:Sn.default.object,overlay:Sn.default.object}),style:Sn.default.shape({content:Sn.default.object,overlay:Sn.default.object}),className:Sn.default.oneOfType([Sn.default.string,Sn.default.object]),overlayClassName:Sn.default.oneOfType([Sn.default.string,Sn.default.object]),parentSelector:Sn.default.func,bodyOpenClassName:Sn.default.string,htmlOpenClassName:Sn.default.string,ariaHideApp:Sn.default.bool,appElement:Sn.default.oneOfType([Sn.default.instanceOf(Zn.default),Sn.default.instanceOf(qn.SafeHTMLCollection),Sn.default.instanceOf(qn.SafeNodeList),Sn.default.arrayOf(Sn.default.instanceOf(Zn.default))]),onAfterOpen:Sn.default.func,onAfterClose:Sn.default.func,onRequestClose:Sn.default.func,closeTimeoutMS:Sn.default.number,shouldFocusAfterRender:Sn.default.bool,shouldCloseOnOverlayClick:Sn.default.bool,shouldReturnFocusAfterClose:Sn.default.bool,preventScroll:Sn.default.bool,role:Sn.default.string,contentLabel:Sn.default.string,aria:Sn.default.object,data:Sn.default.object,children:Sn.default.node,shouldCloseOnEsc:Sn.default.bool,overlayRef:Sn.default.func,contentRef:Sn.default.func,id:Sn.default.string,overlayElement:Sn.default.func,contentElement:Sn.default.func,testId:Sn.default.string},ln.default=Rs,sn.exports=ln.default})(ModalPortal,ModalPortal.exports);var ModalPortalExports=ModalPortal.exports;function componentWillMount(){var sn=this.constructor.getDerivedStateFromProps(this.props,this.state);sn!=null&&this.setState(sn)}function componentWillReceiveProps(sn){function ln(cn){var dn=this.constructor.getDerivedStateFromProps(sn,cn);return dn??null}this.setState(ln.bind(this))}function componentWillUpdate(sn,ln){try{var cn=this.props,dn=this.state;this.props=sn,this.state=ln,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(cn,dn)}finally{this.props=cn,this.state=dn}}componentWillMount.__suppressDeprecationWarning=!0;componentWillReceiveProps.__suppressDeprecationWarning=!0;componentWillUpdate.__suppressDeprecationWarning=!0;function polyfill(sn){var ln=sn.prototype;if(!ln||!ln.isReactComponent)throw new Error("Can only polyfill class components");if(typeof sn.getDerivedStateFromProps!="function"&&typeof ln.getSnapshotBeforeUpdate!="function")return sn;var cn=null,dn=null,pn=null;if(typeof ln.componentWillMount=="function"?cn="componentWillMount":typeof ln.UNSAFE_componentWillMount=="function"&&(cn="UNSAFE_componentWillMount"),typeof ln.componentWillReceiveProps=="function"?dn="componentWillReceiveProps":typeof ln.UNSAFE_componentWillReceiveProps=="function"&&(dn="UNSAFE_componentWillReceiveProps"),typeof ln.componentWillUpdate=="function"?pn="componentWillUpdate":typeof ln.UNSAFE_componentWillUpdate=="function"&&(pn="UNSAFE_componentWillUpdate"),cn!==null||dn!==null||pn!==null){var vn=sn.displayName||sn.name,kn=typeof sn.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+vn+" uses "+kn+" but also contains the following legacy lifecycles:"+(cn!==null?`
  `+cn:"")+(dn!==null?`
  `+dn:"")+(pn!==null?`
  `+pn:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof sn.getDerivedStateFromProps=="function"&&(ln.componentWillMount=componentWillMount,ln.componentWillReceiveProps=componentWillReceiveProps),typeof ln.getSnapshotBeforeUpdate=="function"){if(typeof ln.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");ln.componentWillUpdate=componentWillUpdate;var Sn=ln.componentDidUpdate;ln.componentDidUpdate=function(Pn,Nn,Ln){var Fn=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:Ln;Sn.call(this,Pn,Nn,Fn)}}return sn}const reactLifecyclesCompat_es=Object.freeze(Object.defineProperty({__proto__:null,polyfill},Symbol.toStringTag,{value:"Module"})),require$$6=getAugmentedNamespace(reactLifecyclesCompat_es);Object.defineProperty(Modal$3,"__esModule",{value:!0});Modal$3.bodyOpenClassName=Modal$3.portalClassName=void 0;var _extends$4=Object.assign||function(sn){for(var ln=1;ln<arguments.length;ln++){var cn=arguments[ln];for(var dn in cn)Object.prototype.hasOwnProperty.call(cn,dn)&&(sn[dn]=cn[dn])}return sn},_createClass$1=function(){function sn(ln,cn){for(var dn=0;dn<cn.length;dn++){var pn=cn[dn];pn.enumerable=pn.enumerable||!1,pn.configurable=!0,"value"in pn&&(pn.writable=!0),Object.defineProperty(ln,pn.key,pn)}}return function(ln,cn,dn){return cn&&sn(ln.prototype,cn),dn&&sn(ln,dn),ln}}(),_react=reactExports,_react2=_interopRequireDefault(_react),_reactDom=reactDomExports,_reactDom2=_interopRequireDefault(_reactDom),_propTypes=propTypesExports,_propTypes2=_interopRequireDefault(_propTypes),_ModalPortal=ModalPortalExports,_ModalPortal2=_interopRequireDefault(_ModalPortal),_ariaAppHider=ariaAppHider$1,ariaAppHider=_interopRequireWildcard(_ariaAppHider),_safeHTMLElement=safeHTMLElement,_safeHTMLElement2=_interopRequireDefault(_safeHTMLElement),_reactLifecyclesCompat=require$$6;function _interopRequireWildcard(sn){if(sn&&sn.__esModule)return sn;var ln={};if(sn!=null)for(var cn in sn)Object.prototype.hasOwnProperty.call(sn,cn)&&(ln[cn]=sn[cn]);return ln.default=sn,ln}function _interopRequireDefault(sn){return sn&&sn.__esModule?sn:{default:sn}}function _classCallCheck$1(sn,ln){if(!(sn instanceof ln))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(sn,ln){if(!sn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ln&&(typeof ln=="object"||typeof ln=="function")?ln:sn}function _inherits(sn,ln){if(typeof ln!="function"&&ln!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ln);sn.prototype=Object.create(ln&&ln.prototype,{constructor:{value:sn,enumerable:!1,writable:!0,configurable:!0}}),ln&&(Object.setPrototypeOf?Object.setPrototypeOf(sn,ln):sn.__proto__=ln)}var portalClassName=Modal$3.portalClassName="ReactModalPortal",bodyOpenClassName=Modal$3.bodyOpenClassName="ReactModal__Body--open",isReact16=_safeHTMLElement.canUseDOM&&_reactDom2.default.createPortal!==void 0,createHTMLElement=function(ln){return document.createElement(ln)},getCreatePortal=function(){return isReact16?_reactDom2.default.createPortal:_reactDom2.default.unstable_renderSubtreeIntoContainer};function getParentElement(sn){return sn()}var Modal$2=function(sn){_inherits(ln,sn);function ln(){var cn,dn,pn,vn;_classCallCheck$1(this,ln);for(var kn=arguments.length,Sn=Array(kn),wn=0;wn<kn;wn++)Sn[wn]=arguments[wn];return vn=(dn=(pn=_possibleConstructorReturn(this,(cn=ln.__proto__||Object.getPrototypeOf(ln)).call.apply(cn,[this].concat(Sn))),pn),pn.removePortal=function(){!isReact16&&_reactDom2.default.unmountComponentAtNode(pn.node);var Pn=getParentElement(pn.props.parentSelector);Pn&&Pn.contains(pn.node)?Pn.removeChild(pn.node):console.warn('React-Modal: "parentSelector" prop did not returned any DOM element. Make sure that the parent element is unmounted to avoid any memory leaks.')},pn.portalRef=function(Pn){pn.portal=Pn},pn.renderPortal=function(Pn){var Nn=getCreatePortal(),Ln=Nn(pn,_react2.default.createElement(_ModalPortal2.default,_extends$4({defaultStyles:ln.defaultStyles},Pn)),pn.node);pn.portalRef(Ln)},dn),_possibleConstructorReturn(pn,vn)}return _createClass$1(ln,[{key:"componentDidMount",value:function(){if(_safeHTMLElement.canUseDOM){isReact16||(this.node=createHTMLElement("div")),this.node.className=this.props.portalClassName;var dn=getParentElement(this.props.parentSelector);dn.appendChild(this.node),!isReact16&&this.renderPortal(this.props)}}},{key:"getSnapshotBeforeUpdate",value:function(dn){var pn=getParentElement(dn.parentSelector),vn=getParentElement(this.props.parentSelector);return{prevParent:pn,nextParent:vn}}},{key:"componentDidUpdate",value:function(dn,pn,vn){if(_safeHTMLElement.canUseDOM){var kn=this.props,Sn=kn.isOpen,wn=kn.portalClassName;dn.portalClassName!==wn&&(this.node.className=wn);var Pn=vn.prevParent,Nn=vn.nextParent;Nn!==Pn&&(Pn.removeChild(this.node),Nn.appendChild(this.node)),!(!dn.isOpen&&!Sn)&&!isReact16&&this.renderPortal(this.props)}}},{key:"componentWillUnmount",value:function(){if(!(!_safeHTMLElement.canUseDOM||!this.node||!this.portal)){var dn=this.portal.state,pn=Date.now(),vn=dn.isOpen&&this.props.closeTimeoutMS&&(dn.closesAt||pn+this.props.closeTimeoutMS);vn?(dn.beforeClose||this.portal.closeWithTimeout(),setTimeout(this.removePortal,vn-pn)):this.removePortal()}}},{key:"render",value:function(){if(!_safeHTMLElement.canUseDOM||!isReact16)return null;!this.node&&isReact16&&(this.node=createHTMLElement("div"));var dn=getCreatePortal();return dn(_react2.default.createElement(_ModalPortal2.default,_extends$4({ref:this.portalRef,defaultStyles:ln.defaultStyles},this.props)),this.node)}}],[{key:"setAppElement",value:function(dn){ariaAppHider.setElement(dn)}}]),ln}(_react.Component);Modal$2.propTypes={isOpen:_propTypes2.default.bool.isRequired,style:_propTypes2.default.shape({content:_propTypes2.default.object,overlay:_propTypes2.default.object}),portalClassName:_propTypes2.default.string,bodyOpenClassName:_propTypes2.default.string,htmlOpenClassName:_propTypes2.default.string,className:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.shape({base:_propTypes2.default.string.isRequired,afterOpen:_propTypes2.default.string.isRequired,beforeClose:_propTypes2.default.string.isRequired})]),overlayClassName:_propTypes2.default.oneOfType([_propTypes2.default.string,_propTypes2.default.shape({base:_propTypes2.default.string.isRequired,afterOpen:_propTypes2.default.string.isRequired,beforeClose:_propTypes2.default.string.isRequired})]),appElement:_propTypes2.default.oneOfType([_propTypes2.default.instanceOf(_safeHTMLElement2.default),_propTypes2.default.instanceOf(_safeHTMLElement.SafeHTMLCollection),_propTypes2.default.instanceOf(_safeHTMLElement.SafeNodeList),_propTypes2.default.arrayOf(_propTypes2.default.instanceOf(_safeHTMLElement2.default))]),onAfterOpen:_propTypes2.default.func,onRequestClose:_propTypes2.default.func,closeTimeoutMS:_propTypes2.default.number,ariaHideApp:_propTypes2.default.bool,shouldFocusAfterRender:_propTypes2.default.bool,shouldCloseOnOverlayClick:_propTypes2.default.bool,shouldReturnFocusAfterClose:_propTypes2.default.bool,preventScroll:_propTypes2.default.bool,parentSelector:_propTypes2.default.func,aria:_propTypes2.default.object,data:_propTypes2.default.object,role:_propTypes2.default.string,contentLabel:_propTypes2.default.string,shouldCloseOnEsc:_propTypes2.default.bool,overlayRef:_propTypes2.default.func,contentRef:_propTypes2.default.func,id:_propTypes2.default.string,overlayElement:_propTypes2.default.func,contentElement:_propTypes2.default.func};Modal$2.defaultProps={isOpen:!1,portalClassName,bodyOpenClassName,role:"dialog",ariaHideApp:!0,closeTimeoutMS:0,shouldFocusAfterRender:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldReturnFocusAfterClose:!0,preventScroll:!1,parentSelector:function(){return document.body},overlayElement:function(ln,cn){return _react2.default.createElement("div",ln,cn)},contentElement:function(ln,cn){return _react2.default.createElement("div",ln,cn)}};Modal$2.defaultStyles={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(255, 255, 255, 0.75)"},content:{position:"absolute",top:"40px",left:"40px",right:"40px",bottom:"40px",border:"1px solid #ccc",background:"#fff",overflow:"auto",WebkitOverflowScrolling:"touch",borderRadius:"4px",outline:"none",padding:"20px"}};(0,_reactLifecyclesCompat.polyfill)(Modal$2);Modal$3.default=Modal$2;lib.exports;(function(sn,ln){Object.defineProperty(ln,"__esModule",{value:!0});var cn=Modal$3,dn=pn(cn);function pn(vn){return vn&&vn.__esModule?vn:{default:vn}}ln.default=dn.default,sn.exports=ln.default})(lib,lib.exports);var libExports=lib.exports;const Modal$1=getDefaultExportFromCjs(libExports);globalThis.VITE_PLUGIN_SENTRY_CONFIG={release:"fdb0512"};var ConsoleApiName={log:"log",debug:"debug",info:"info",warn:"warn",error:"error"},display=function(sn){for(var ln=[],cn=1;cn<arguments.length;cn++)ln[cn-1]=arguments[cn];Object.prototype.hasOwnProperty.call(ConsoleApiName,sn)||(sn=ConsoleApiName.log),display[sn].apply(display,ln)},globalConsole=console;display.debug=globalConsole.debug.bind(globalConsole);display.log=globalConsole.log.bind(globalConsole);display.info=globalConsole.info.bind(globalConsole);display.warn=globalConsole.warn.bind(globalConsole);display.error=globalConsole.error.bind(globalConsole);function performDraw(sn){return sn!==0&&Math.random()*100<=sn}function round(sn,ln){return+sn.toFixed(ln)}function isPercentage(sn){return isNumber(sn)&&sn>=0&&sn<=100}function isNumber(sn){return typeof sn=="number"}var ONE_SECOND=1e3,ONE_MINUTE=60*ONE_SECOND,ONE_HOUR=60*ONE_MINUTE,ONE_DAY=24*ONE_HOUR,ONE_YEAR=365*ONE_DAY;function relativeToClocks(sn){return{relative:sn,timeStamp:getCorrectedTimeStamp(sn)}}function getCorrectedTimeStamp(sn){var ln=dateNow()-performance.now();return ln>getNavigationStart()?Math.round(addDuration(ln,sn)):getTimeStamp(sn)}function currentDrift(){return Math.round(dateNow()-addDuration(getNavigationStart(),performance.now()))}function toServerDuration(sn){return isNumber(sn)?round(sn*1e6,0):sn}function dateNow(){return new Date().getTime()}function timeStampNow(){return dateNow()}function relativeNow(){return performance.now()}function clocksNow(){return{relative:relativeNow(),timeStamp:timeStampNow()}}function clocksOrigin(){return{relative:0,timeStamp:getNavigationStart()}}function elapsed(sn,ln){return ln-sn}function addDuration(sn,ln){return sn+ln}function getRelativeTime(sn){return sn-getNavigationStart()}function getTimeStamp(sn){return Math.round(addDuration(getNavigationStart(),sn))}function looksLikeRelativeTime(sn){return sn<ONE_YEAR}var navigationStart;function getNavigationStart(){return navigationStart===void 0&&(navigationStart=performance.timing.navigationStart),navigationStart}function generateUUID(sn){return sn?(parseInt(sn,10)^Math.random()*16>>parseInt(sn,10)/4).toString(16):"".concat(1e7,"-").concat(1e3,"-").concat(4e3,"-").concat(8e3,"-").concat(1e11).replace(/[018]/g,generateUUID)}function findCommaSeparatedValue(sn,ln){var cn=new RegExp("(?:^|;)\\s*".concat(ln,"\\s*=\\s*([^;]+)")),dn=cn.exec(sn);return dn?dn[1]:void 0}function safeTruncate(sn,ln,cn){cn===void 0&&(cn="");var dn=sn.charCodeAt(ln-1),pn=dn>=55296&&dn<=56319,vn=pn?ln+1:ln;return sn.length<=vn?sn:"".concat(sn.slice(0,vn)).concat(cn)}var COOKIE_ACCESS_DELAY=ONE_SECOND;function setCookie(sn,ln,cn,dn){var pn=new Date;pn.setTime(pn.getTime()+cn);var vn="expires=".concat(pn.toUTCString()),kn=dn&&dn.crossSite?"none":"strict",Sn=dn&&dn.domain?";domain=".concat(dn.domain):"",wn=dn&&dn.secure?";secure":"";document.cookie="".concat(sn,"=").concat(ln,";").concat(vn,";path=/;samesite=").concat(kn).concat(Sn).concat(wn)}function getCookie(sn){return findCommaSeparatedValue(document.cookie,sn)}function deleteCookie(sn,ln){setCookie(sn,"",0,ln)}function areCookiesAuthorized(sn){if(document.cookie===void 0||document.cookie===null)return!1;try{var ln="dd_cookie_test_".concat(generateUUID()),cn="test";setCookie(ln,cn,ONE_MINUTE,sn);var dn=getCookie(ln)===cn;return deleteCookie(ln,sn),dn}catch(pn){return display.error(pn),!1}}var getCurrentSiteCache;function getCurrentSite(){if(getCurrentSiteCache===void 0){for(var sn="dd_site_test_".concat(generateUUID()),ln="test",cn=window.location.hostname.split("."),dn=cn.pop();cn.length&&!getCookie(sn);)dn="".concat(cn.pop(),".").concat(dn),setCookie(sn,ln,ONE_SECOND,{domain:dn});deleteCookie(sn,{domain:dn}),getCurrentSiteCache=dn}return getCurrentSiteCache}function catchUserErrors(sn,ln){return function(){for(var cn=[],dn=0;dn<arguments.length;dn++)cn[dn]=arguments[dn];try{return sn.apply(void 0,cn)}catch(pn){display.error(ln,pn)}}}var ExperimentalFeature;(function(sn){sn.PAGEHIDE="pagehide",sn.FEATURE_FLAGS="feature_flags",sn.RESOURCE_PAGE_STATES="resource_page_states",sn.COLLECT_FLUSH_REASON="collect_flush_reason"})(ExperimentalFeature||(ExperimentalFeature={}));var enabledExperimentalFeatures=new Set;function addExperimentalFeatures(sn){sn.forEach(function(ln){enabledExperimentalFeatures.add(ln)})}function isExperimentalFeatureEnabled(sn){return enabledExperimentalFeatures.has(sn)}function getExperimentalFeatures(){return enabledExperimentalFeatures}var ONE_KIBI_BYTE=1024,ONE_MEBI_BYTE=1024*ONE_KIBI_BYTE,HAS_MULTI_BYTES_CHARACTERS=/[^\u0000-\u007F]/;function computeBytesCount(sn){return HAS_MULTI_BYTES_CHARACTERS.test(sn)?window.TextEncoder!==void 0?new TextEncoder().encode(sn).length:new Blob([sn]).size:sn.length}function includes(sn,ln){return sn.indexOf(ln)!==-1}function arrayFrom$1(sn){if(Array.from)return Array.from(sn);var ln=[];if(sn instanceof Set)sn.forEach(function(dn){return ln.push(dn)});else for(var cn=0;cn<sn.length;cn++)ln.push(sn[cn]);return ln}function find$2(sn,ln){for(var cn=0;cn<sn.length;cn+=1){var dn=sn[cn];if(ln(dn,cn))return dn}}function findLast(sn,ln){for(var cn=sn.length-1;cn>=0;cn-=1){var dn=sn[cn];if(ln(dn,cn,sn))return dn}}function forEach$1(sn,ln){Array.prototype.forEach.call(sn,ln)}function objectValues(sn){return Object.keys(sn).map(function(ln){return sn[ln]})}function objectEntries(sn){return Object.keys(sn).map(function(ln){return[ln,sn[ln]]})}function startsWith(sn,ln){return sn.slice(0,ln.length)===ln}function endsWith(sn,ln){return sn.slice(-ln.length)===ln}function elementMatches(sn,ln){return sn.matches?sn.matches(ln):sn.msMatchesSelector?sn.msMatchesSelector(ln):!1}function cssEscape(sn){return window.CSS&&window.CSS.escape?window.CSS.escape(sn):sn.replace(/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g,function(ln,cn){return cn?ln==="\0"?"�":"".concat(ln.slice(0,-1),"\\").concat(ln.charCodeAt(ln.length-1).toString(16)," "):"\\".concat(ln)})}function assign$2(sn){for(var ln=[],cn=1;cn<arguments.length;cn++)ln[cn-1]=arguments[cn];return ln.forEach(function(dn){for(var pn in dn)Object.prototype.hasOwnProperty.call(dn,pn)&&(sn[pn]=dn[pn])}),sn}function shallowClone(sn){return assign$2({},sn)}function objectHasValue(sn,ln){return Object.keys(sn).some(function(cn){return sn[cn]===ln})}function isEmptyObject(sn){return Object.keys(sn).length===0}function mapValues(sn,ln){for(var cn={},dn=0,pn=Object.keys(sn);dn<pn.length;dn++){var vn=pn[dn];cn[vn]=ln(sn[vn])}return cn}function getGlobalObject$1(){if(typeof globalThis=="object")return globalThis;Object.defineProperty(Object.prototype,"_dd_temp_",{get:function(){return this},configurable:!0});var sn=_dd_temp_;return delete Object.prototype._dd_temp_,typeof sn!="object"&&(typeof self=="object"?sn=self:typeof window=="object"?sn=window:sn={}),sn}function getZoneJsOriginalValue(sn,ln){var cn=getGlobalObject$1(),dn;return cn.Zone&&typeof cn.Zone.__symbol__=="function"&&(dn=sn[cn.Zone.__symbol__(ln)]),dn||(dn=sn[ln]),dn}var __spreadArray$2=globalThis&&globalThis.__spreadArray||function(sn,ln,cn){if(cn||arguments.length===2)for(var dn=0,pn=ln.length,vn;dn<pn;dn++)(vn||!(dn in ln))&&(vn||(vn=Array.prototype.slice.call(ln,0,dn)),vn[dn]=ln[dn]);return sn.concat(vn||Array.prototype.slice.call(ln))},onMonitorErrorCollected,debugMode=!1;function startMonitorErrorCollection(sn){onMonitorErrorCollected=sn}function setDebugMode$1(sn){debugMode=sn}function monitored(sn,ln,cn){var dn=cn.value;cn.value=function(){for(var pn=[],vn=0;vn<arguments.length;vn++)pn[vn]=arguments[vn];var kn=onMonitorErrorCollected?monitor(dn):dn;return kn.apply(this,pn)}}function monitor(sn){return function(){return callMonitored(sn,this,arguments)}}function callMonitored(sn,ln,cn){try{return sn.apply(ln,cn)}catch(dn){if(displayIfDebugEnabled(ConsoleApiName.error,dn),onMonitorErrorCollected)try{onMonitorErrorCollected(dn)}catch(pn){displayIfDebugEnabled(ConsoleApiName.error,pn)}}}function displayIfDebugEnabled(sn){for(var ln=[],cn=1;cn<arguments.length;cn++)ln[cn-1]=arguments[cn];debugMode&&display.apply(void 0,__spreadArray$2([sn,"[MONITOR]"],ln,!1))}function setTimeout$1(sn,ln){return getZoneJsOriginalValue(getGlobalObject$1(),"setTimeout")(monitor(sn),ln)}function clearTimeout$1(sn){getZoneJsOriginalValue(getGlobalObject$1(),"clearTimeout")(sn)}function setInterval$1(sn,ln){return getZoneJsOriginalValue(window,"setInterval")(monitor(sn),ln)}function clearInterval$1(sn){getZoneJsOriginalValue(window,"clearInterval")(sn)}function throttle$1(sn,ln,cn){var dn=cn&&cn.leading!==void 0?cn.leading:!0,pn=cn&&cn.trailing!==void 0?cn.trailing:!0,vn=!1,kn,Sn;return{throttled:function(){for(var wn=[],Pn=0;Pn<arguments.length;Pn++)wn[Pn]=arguments[Pn];if(vn){kn=wn;return}dn?sn.apply(void 0,wn):kn=wn,vn=!0,Sn=setTimeout$1(function(){pn&&kn&&sn.apply(void 0,kn),vn=!1,kn=void 0},ln)},cancel:function(){clearTimeout$1(Sn),vn=!1,kn=void 0}}}function noop$7(){}function jsonStringify(sn,ln,cn){if(typeof sn!="object"||sn===null)return JSON.stringify(sn);var dn=detachToJsonMethod(Object.prototype),pn=detachToJsonMethod(Array.prototype),vn=detachToJsonMethod(Object.getPrototypeOf(sn)),kn=detachToJsonMethod(sn);try{return JSON.stringify(sn,ln,cn)}catch{return"<error: unable to serialize object>"}finally{dn(),pn(),vn(),kn()}}function detachToJsonMethod(sn){var ln=sn,cn=ln.toJSON;return cn?(delete ln.toJSON,function(){ln.toJSON=cn}):noop$7}function normalizeUrl(sn){return buildUrl(sn,getLocationOrigin()).href}function isValidUrl(sn){try{return!!buildUrl(sn)}catch{return!1}}function getOrigin(sn){return getLinkElementOrigin(buildUrl(sn))}function getPathName(sn){var ln=buildUrl(sn).pathname;return ln[0]==="/"?ln:"/".concat(ln)}function buildUrl(sn,ln){var cn=getSupportedUrl();if(cn)try{return ln!==void 0?new cn(sn,ln):new cn(sn)}catch(kn){throw new Error("Failed to construct URL: ".concat(String(kn)," ").concat(jsonStringify({url:sn,base:ln})))}if(ln===void 0&&!/:/.test(sn))throw new Error("Invalid URL: '".concat(sn,"'"));var dn=document,pn=dn.createElement("a");if(ln!==void 0){dn=document.implementation.createHTMLDocument("");var vn=dn.createElement("base");vn.href=ln,dn.head.appendChild(vn),dn.body.appendChild(pn)}return pn.href=sn,pn}var originalURL=URL,isURLSupported;function getSupportedUrl(){if(isURLSupported===void 0)try{var sn=new originalURL("http://test/path");isURLSupported=sn.href==="http://test/path"}catch{isURLSupported=!1}return isURLSupported?originalURL:void 0}function getLocationOrigin(){return getLinkElementOrigin(window.location)}function getLinkElementOrigin(sn){if(sn.origin)return sn.origin;var ln=sn.host.replace(/(:80|:443)$/,"");return"".concat(sn.protocol,"//").concat(ln)}var INTAKE_SITE_STAGING="datad0g.com",INTAKE_SITE_US1="datadoghq.com",INTAKE_SITE_EU1="datadoghq.eu",INTAKE_SITE_AP1="ap1.datadoghq.com",INTAKE_SITE_US1_FED="ddog-gov.com",ENDPOINTS={logs:"logs",rum:"rum",sessionReplay:"session-replay"},INTAKE_TRACKS={logs:"logs",rum:"rum",sessionReplay:"replay"};function createEndpointBuilder(sn,ln,cn){var dn=createEndpointUrlWithParametersBuilder(sn,ln);return{build:function(pn,vn,kn){var Sn=buildEndpointParameters(sn,ln,cn,pn,vn,kn);return dn(Sn)},urlPrefix:dn(""),endpointType:ln}}function createEndpointUrlWithParametersBuilder(sn,ln){var cn="/api/v2/".concat(INTAKE_TRACKS[ln]),dn=sn.proxy,pn=sn.proxyUrl;if(dn){var vn=normalizeUrl(dn);return function(wn){return"".concat(vn,"?ddforward=").concat(encodeURIComponent("".concat(cn,"?").concat(wn)))}}var kn=buildEndpointHost(sn,ln);if(dn===void 0&&pn){var Sn=normalizeUrl(pn);return function(wn){return"".concat(Sn,"?ddforward=").concat(encodeURIComponent("https://".concat(kn).concat(cn,"?").concat(wn)))}}return function(wn){return"https://".concat(kn).concat(cn,"?").concat(wn)}}function buildEndpointHost(sn,ln){var cn=sn.site,dn=cn===void 0?INTAKE_SITE_US1:cn,pn=sn.internalAnalyticsSubdomain;if(pn&&dn===INTAKE_SITE_US1)return"".concat(pn,".").concat(INTAKE_SITE_US1);var vn=dn.split("."),kn=vn.pop(),Sn=dn!==INTAKE_SITE_AP1?"".concat(ENDPOINTS[ln],"."):"";return"".concat(Sn,"browser-intake-").concat(vn.join("-"),".").concat(kn)}function buildEndpointParameters(sn,ln,cn,dn,pn,vn){var kn=sn.clientToken,Sn=sn.internalAnalyticsSubdomain,wn=["sdk_version:".concat("4.42.2"),"api:".concat(dn)].concat(cn);pn&&isExperimentalFeatureEnabled(ExperimentalFeature.COLLECT_FLUSH_REASON)&&wn.push("flush_reason:".concat(pn)),vn&&wn.push("retry_count:".concat(vn.count),"retry_after:".concat(vn.lastFailureStatus));var Pn=["ddsource=browser","ddtags=".concat(encodeURIComponent(wn.join(","))),"dd-api-key=".concat(kn),"dd-evp-origin-version=".concat(encodeURIComponent("4.42.2")),"dd-evp-origin=browser","dd-request-id=".concat(generateUUID())];return ln==="rum"&&Pn.push("batch_time=".concat(timeStampNow())),Sn&&Pn.reverse(),Pn.join("&")}var TAG_SIZE_LIMIT=200;function buildTags(sn){var ln=sn.env,cn=sn.service,dn=sn.version,pn=sn.datacenter,vn=[];return ln&&vn.push(buildTag("env",ln)),cn&&vn.push(buildTag("service",cn)),dn&&vn.push(buildTag("version",dn)),pn&&vn.push(buildTag("datacenter",pn)),vn}var FORBIDDEN_CHARACTERS=/[^a-z0-9_:./-]/;function buildTag(sn,ln){var cn=TAG_SIZE_LIMIT-sn.length-1;(ln.length>cn||FORBIDDEN_CHARACTERS.test(ln))&&display.warn("".concat(sn," value doesn't meet tag requirements and will be sanitized"));var dn=ln.replace(/,/g,"_");return"".concat(sn,":").concat(dn)}function computeTransportConfiguration(sn){var ln=buildTags(sn),cn=computeEndpointBuilders(sn,ln),dn=objectValues(cn).map(function(vn){return vn.urlPrefix}),pn=computeReplicaConfiguration(sn,dn,ln);return assign$2({isIntakeUrl:function(vn){return dn.some(function(kn){return vn.indexOf(kn)===0})},replica:pn,site:sn.site||INTAKE_SITE_US1},cn)}function computeEndpointBuilders(sn,ln){return{logsEndpointBuilder:createEndpointBuilder(sn,"logs",ln),rumEndpointBuilder:createEndpointBuilder(sn,"rum",ln),sessionReplayEndpointBuilder:createEndpointBuilder(sn,"sessionReplay",ln)}}function computeReplicaConfiguration(sn,ln,cn){if(sn.replica){var dn=assign$2({},sn,{site:INTAKE_SITE_US1,clientToken:sn.replica.clientToken}),pn={logsEndpointBuilder:createEndpointBuilder(dn,"logs",cn),rumEndpointBuilder:createEndpointBuilder(dn,"rum",cn)};return ln.push.apply(ln,objectValues(pn).map(function(vn){return vn.urlPrefix})),assign$2({applicationId:sn.replica.applicationId},pn)}}var DefaultPrivacyLevel={ALLOW:"allow",MASK:"mask",MASK_USER_INPUT:"mask-user-input"};function validateAndBuildConfiguration(sn){var ln,cn,dn;if(!sn||!sn.clientToken){display.error("Client Token is not configured, we will not send any data.");return}var pn=(ln=sn.sessionSampleRate)!==null&&ln!==void 0?ln:sn.sampleRate;if(pn!==void 0&&!isPercentage(pn)){display.error("Session Sample Rate should be a number between 0 and 100");return}if(sn.telemetrySampleRate!==void 0&&!isPercentage(sn.telemetrySampleRate)){display.error("Telemetry Sample Rate should be a number between 0 and 100");return}if(sn.telemetryConfigurationSampleRate!==void 0&&!isPercentage(sn.telemetryConfigurationSampleRate)){display.error("Telemetry Configuration Sample Rate should be a number between 0 and 100");return}return Array.isArray(sn.enableExperimentalFeatures)&&addExperimentalFeatures(sn.enableExperimentalFeatures.filter(function(vn){return objectHasValue(ExperimentalFeature,vn)})),assign$2({beforeSend:sn.beforeSend&&catchUserErrors(sn.beforeSend,"beforeSend threw an error:"),cookieOptions:buildCookieOptions(sn),sessionSampleRate:pn??100,telemetrySampleRate:(cn=sn.telemetrySampleRate)!==null&&cn!==void 0?cn:20,telemetryConfigurationSampleRate:(dn=sn.telemetryConfigurationSampleRate)!==null&&dn!==void 0?dn:5,service:sn.service,silentMultipleInit:!!sn.silentMultipleInit,batchBytesLimit:16*ONE_KIBI_BYTE,eventRateLimiterThreshold:3e3,maxTelemetryEventsPerPage:15,flushTimeout:30*ONE_SECOND,batchMessagesLimit:50,messageBytesLimit:256*ONE_KIBI_BYTE},computeTransportConfiguration(sn))}function buildCookieOptions(sn){var ln={};return ln.secure=mustUseSecureCookie(sn),ln.crossSite=!!sn.useCrossSiteSessionCookie,sn.trackSessionAcrossSubdomains&&(ln.domain=getCurrentSite()),ln}function mustUseSecureCookie(sn){return!!sn.useSecureSessionCookie||!!sn.useCrossSiteSessionCookie}function serializeConfiguration(sn){var ln,cn,dn=(ln=sn.proxy)!==null&&ln!==void 0?ln:sn.proxyUrl;return{session_sample_rate:(cn=sn.sessionSampleRate)!==null&&cn!==void 0?cn:sn.sampleRate,telemetry_sample_rate:sn.telemetrySampleRate,telemetry_configuration_sample_rate:sn.telemetryConfigurationSampleRate,use_before_send:!!sn.beforeSend,use_cross_site_session_cookie:sn.useCrossSiteSessionCookie,use_secure_session_cookie:sn.useSecureSessionCookie,use_proxy:dn!==void 0?!!dn:void 0,silent_multiple_init:sn.silentMultipleInit,track_session_across_subdomains:sn.trackSessionAcrossSubdomains,track_resources:sn.trackResources,track_long_task:sn.trackLongTasks}}var UNKNOWN_FUNCTION="?";function computeStackTrace(sn){var ln=[],cn=tryToGetString(sn,"stack"),dn=String(sn);return cn&&startsWith(cn,dn)&&(cn=cn.slice(dn.length)),cn&&cn.split(`
`).forEach(function(pn){var vn=parseChromeLine(pn)||parseChromeAnonymousLine(pn)||parseWinLine(pn)||parseGeckoLine(pn);vn&&(!vn.func&&vn.line&&(vn.func=UNKNOWN_FUNCTION),ln.push(vn))}),{message:tryToGetString(sn,"message"),name:tryToGetString(sn,"name"),stack:ln}}var fileUrl="((?:file|https?|blob|chrome-extension|native|eval|webpack|snippet|<anonymous>|\\w+\\.|\\/).*?)",filePosition="(?::(\\d+))",CHROME_LINE_RE=new RegExp("^\\s*at (.*?) ?\\(".concat(fileUrl).concat(filePosition,"?").concat(filePosition,"?\\)?\\s*$"),"i"),CHROME_EVAL_RE=new RegExp("\\((\\S*)".concat(filePosition).concat(filePosition,"\\)"));function parseChromeLine(sn){var ln=CHROME_LINE_RE.exec(sn);if(ln){var cn=ln[2]&&ln[2].indexOf("native")===0,dn=ln[2]&&ln[2].indexOf("eval")===0,pn=CHROME_EVAL_RE.exec(ln[2]);return dn&&pn&&(ln[2]=pn[1],ln[3]=pn[2],ln[4]=pn[3]),{args:cn?[ln[2]]:[],column:ln[4]?+ln[4]:void 0,func:ln[1]||UNKNOWN_FUNCTION,line:ln[3]?+ln[3]:void 0,url:cn?void 0:ln[2]}}}var CHROME_ANONYMOUS_FUNCTION_RE=new RegExp("^\\s*at ?".concat(fileUrl).concat(filePosition,"?").concat(filePosition,"??\\s*$"),"i");function parseChromeAnonymousLine(sn){var ln=CHROME_ANONYMOUS_FUNCTION_RE.exec(sn);if(ln)return{args:[],column:ln[3]?+ln[3]:void 0,func:UNKNOWN_FUNCTION,line:ln[2]?+ln[2]:void 0,url:ln[1]}}var WINJS_LINE_RE=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;function parseWinLine(sn){var ln=WINJS_LINE_RE.exec(sn);if(ln)return{args:[],column:ln[4]?+ln[4]:void 0,func:ln[1]||UNKNOWN_FUNCTION,line:+ln[3],url:ln[2]}}var GECKO_LINE_RE=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|capacitor|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,GECKO_EVAL_RE=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function parseGeckoLine(sn){var ln=GECKO_LINE_RE.exec(sn);if(ln){var cn=ln[3]&&ln[3].indexOf(" > eval")>-1,dn=GECKO_EVAL_RE.exec(ln[3]);return cn&&dn&&(ln[3]=dn[1],ln[4]=dn[2],ln[5]=void 0),{args:ln[2]?ln[2].split(","):[],column:ln[5]?+ln[5]:void 0,func:ln[1]||UNKNOWN_FUNCTION,line:ln[4]?+ln[4]:void 0,url:ln[3]}}}function tryToGetString(sn,ln){if(!(typeof sn!="object"||!sn||!(ln in sn))){var cn=sn[ln];return typeof cn=="string"?cn:void 0}}function instrumentMethod(sn,ln,cn){var dn=sn[ln],pn=cn(dn),vn=function(){if(typeof pn=="function")return pn.apply(this,arguments)};return sn[ln]=vn,{stop:function(){sn[ln]===vn?sn[ln]=dn:pn=dn}}}function instrumentMethodAndCallOriginal(sn,ln,cn){var dn=cn.before,pn=cn.after;return instrumentMethod(sn,ln,function(vn){return function(){var kn=arguments,Sn;return dn&&callMonitored(dn,this,kn),typeof vn=="function"&&(Sn=vn.apply(this,kn)),pn&&callMonitored(pn,this,kn),Sn}})}function instrumentSetter(sn,ln,cn){var dn=Object.getOwnPropertyDescriptor(sn,ln);if(!dn||!dn.set||!dn.configurable)return{stop:noop$7};var pn=function(kn,Sn){setTimeout$1(function(){cn(kn,Sn)},0)},vn=function(kn){dn.set.call(this,kn),pn(this,kn)};return Object.defineProperty(sn,ln,{set:vn}),{stop:function(){var kn;((kn=Object.getOwnPropertyDescriptor(sn,ln))===null||kn===void 0?void 0:kn.set)===vn?Object.defineProperty(sn,ln,dn):pn=noop$7}}}var ERROR_TYPES_RE=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/;function startUnhandledErrorCollection(sn){var ln=instrumentOnError(sn).stop,cn=instrumentUnhandledRejection(sn).stop;return{stop:function(){ln(),cn()}}}function instrumentOnError(sn){return instrumentMethodAndCallOriginal(window,"onerror",{before:function(ln,cn,dn,pn,vn){var kn;if(vn instanceof Error)kn=computeStackTrace(vn);else{var Sn=[{url:cn,column:pn,line:dn}],wn=tryToParseMessage(ln),Pn=wn.name,Nn=wn.message;kn={name:Pn,message:Nn,stack:Sn}}sn(kn,vn??ln)}})}function tryToParseMessage(sn){var ln,cn,dn;return{}.toString.call(sn)==="[object String]"&&(ln=ERROR_TYPES_RE.exec(sn),cn=ln[1],dn=ln[2]),{name:cn,message:dn}}function instrumentUnhandledRejection(sn){return instrumentMethodAndCallOriginal(window,"onunhandledrejection",{before:function(ln){var cn=ln.reason||"Empty reason",dn=computeStackTrace(cn);sn(dn,cn)}})}var SANITIZE_DEFAULT_MAX_CHARACTER_COUNT=220*ONE_KIBI_BYTE,JSON_PATH_ROOT_ELEMENT="$",KEY_DECORATION_LENGTH=3;function sanitize(sn,ln){var cn;ln===void 0&&(ln=SANITIZE_DEFAULT_MAX_CHARACTER_COUNT);var dn=detachToJsonMethod(Object.prototype),pn=detachToJsonMethod(Array.prototype),vn=[],kn=new WeakMap,Sn=sanitizeProcessor(sn,JSON_PATH_ROOT_ELEMENT,void 0,vn,kn),wn=((cn=JSON.stringify(Sn))===null||cn===void 0?void 0:cn.length)||0;if(wn>ln){warnOverCharacterLimit(ln,"discarded",sn);return}for(;vn.length>0&&wn<ln;){var Pn=vn.shift(),Nn=0;if(Array.isArray(Pn.source))for(var Ln=0;Ln<Pn.source.length;Ln++){var Fn=sanitizeProcessor(Pn.source[Ln],Pn.path,Ln,vn,kn);if(Fn!==void 0?wn+=JSON.stringify(Fn).length:wn+=4,wn+=Nn,Nn=1,wn>ln){warnOverCharacterLimit(ln,"truncated",sn);break}Pn.target[Ln]=Fn}else for(var Ln in Pn.source)if(Object.prototype.hasOwnProperty.call(Pn.source,Ln)){var Fn=sanitizeProcessor(Pn.source[Ln],Pn.path,Ln,vn,kn);if(Fn!==void 0&&(wn+=JSON.stringify(Fn).length+Nn+Ln.length+KEY_DECORATION_LENGTH,Nn=1),wn>ln){warnOverCharacterLimit(ln,"truncated",sn);break}Pn.target[Ln]=Fn}}return dn(),pn(),Sn}function sanitizeProcessor(sn,ln,cn,dn,pn){var vn=tryToApplyToJSON(sn);if(!vn||typeof vn!="object")return sanitizePrimitivesAndFunctions(vn);var kn=sanitizeObjects(vn);if(kn!=="[Object]"&&kn!=="[Array]"&&kn!=="[Error]")return kn;var Sn=sn;if(pn.has(Sn))return"[Reference seen at ".concat(pn.get(Sn),"]");var wn=cn!==void 0?"".concat(ln,".").concat(cn):ln,Pn=Array.isArray(vn)?[]:{};return pn.set(Sn,wn),dn.push({source:vn,target:Pn,path:wn}),Pn}function sanitizePrimitivesAndFunctions(sn){return typeof sn=="bigint"?"[BigInt] ".concat(sn.toString()):typeof sn=="function"?"[Function] ".concat(sn.name||"unknown"):typeof sn=="symbol"?"[Symbol] ".concat(sn.description||sn.toString()):sn}function sanitizeObjects(sn){try{if(sn instanceof Event)return{isTrusted:sn.isTrusted};var ln=Object.prototype.toString.call(sn),cn=ln.match(/\[object (.*)\]/);if(cn&&cn[1])return"[".concat(cn[1],"]")}catch{}return"[Unserializable]"}function tryToApplyToJSON(sn){var ln=sn;if(ln&&typeof ln.toJSON=="function")try{return ln.toJSON()}catch{}return sn}function warnOverCharacterLimit(sn,ln,cn){display.warn("The data provided has been ".concat(ln," as it is over the limit of ").concat(sn," characters:"),cn)}var NO_ERROR_STACK_PRESENT_MESSAGE="No stack, consider using an instance of Error";function computeRawError(sn){var ln=sn.stackTrace,cn=sn.originalError,dn=sn.handlingStack,pn=sn.startClocks,vn=sn.nonErrorPrefix,kn=sn.source,Sn=sn.handling,wn=cn instanceof Error,Pn=computeMessage(ln,wn,vn,cn),Nn=hasUsableStack(wn,ln)?toStackTraceString(ln):NO_ERROR_STACK_PRESENT_MESSAGE,Ln=wn?flattenErrorCauses(cn,kn):void 0,Fn=ln==null?void 0:ln.name,zn=tryToGetFingerprint(cn);return{startClocks:pn,source:kn,handling:Sn,handlingStack:dn,originalError:cn,type:Fn,message:Pn,stack:Nn,causes:Ln,fingerprint:zn}}function computeMessage(sn,ln,cn,dn){return sn!=null&&sn.message&&(sn!=null&&sn.name)?sn.message:ln?"Empty message":"".concat(cn," ").concat(jsonStringify(sanitize(dn)))}function hasUsableStack(sn,ln){return ln===void 0?!1:sn?!0:ln.stack.length>0&&(ln.stack.length>1||ln.stack[0].url!==void 0)}function tryToGetFingerprint(sn){return sn instanceof Error&&"dd_fingerprint"in sn?String(sn.dd_fingerprint):void 0}function toStackTraceString(sn){var ln=formatErrorMessage(sn);return sn.stack.forEach(function(cn){var dn=cn.func==="?"?"<anonymous>":cn.func,pn=cn.args&&cn.args.length>0?"(".concat(cn.args.join(", "),")"):"",vn=cn.line?":".concat(cn.line):"",kn=cn.line&&cn.column?":".concat(cn.column):"";ln+=`
  at `.concat(dn).concat(pn," @ ").concat(cn.url).concat(vn).concat(kn)}),ln}function getFileFromStackTraceString(sn){var ln;return(ln=/@ (.+)/.exec(sn))===null||ln===void 0?void 0:ln[1]}function formatErrorMessage(sn){return"".concat(sn.name||"Error",": ").concat(sn.message)}function createHandlingStack(){var sn=2,ln=new Error,cn;if(!ln.stack)try{throw ln}catch{}return callMonitored(function(){var dn=computeStackTrace(ln);dn.stack=dn.stack.slice(sn),cn=toStackTraceString(dn)}),cn}function flattenErrorCauses(sn,ln){for(var cn=sn,dn=[];(cn==null?void 0:cn.cause)instanceof Error&&dn.length<10;){var pn=computeStackTrace(cn.cause);dn.push({message:cn.cause.message,source:ln,type:pn==null?void 0:pn.name,stack:pn&&toStackTraceString(pn)}),cn=cn.cause}return dn.length?dn:void 0}var ErrorSource={AGENT:"agent",CONSOLE:"console",CUSTOM:"custom",LOGGER:"logger",NETWORK:"network",SOURCE:"source",REPORT:"report"};function trackRuntimeError(sn){return startUnhandledErrorCollection(function(ln,cn){sn.notify(computeRawError({stackTrace:ln,originalError:cn,startClocks:clocksNow(),nonErrorPrefix:"Uncaught",source:ErrorSource.SOURCE,handling:"unhandled"}))})}function makePublicApi(sn){var ln=assign$2({version:"4.42.2",onReady:function(cn){cn()}},sn);return Object.defineProperty(ln,"_setDebug",{get:function(){return setDebugMode$1},enumerable:!1}),ln}function defineGlobal(sn,ln,cn){var dn=sn[ln];sn[ln]=cn,dn&&dn.q&&dn.q.forEach(function(pn){return catchUserErrors(pn,"onReady callback threw an error:")()})}var Observable=function(){function sn(ln){this.onFirstSubscribe=ln,this.observers=[]}return sn.prototype.subscribe=function(ln){var cn=this;return!this.observers.length&&this.onFirstSubscribe&&(this.onLastUnsubscribe=this.onFirstSubscribe()||void 0),this.observers.push(ln),{unsubscribe:function(){cn.observers=cn.observers.filter(function(dn){return ln!==dn}),!cn.observers.length&&cn.onLastUnsubscribe&&cn.onLastUnsubscribe()}}},sn.prototype.notify=function(ln){this.observers.forEach(function(cn){return cn(ln)})},sn}();function mergeObservables(){for(var sn=[],ln=0;ln<arguments.length;ln++)sn[ln]=arguments[ln];var cn=new Observable(function(){var dn=sn.map(function(pn){return pn.subscribe(function(vn){return cn.notify(vn)})});return function(){return dn.forEach(function(pn){return pn.unsubscribe()})}});return cn}function addEventListener(sn,ln,cn,dn){return addEventListeners(sn,[ln],cn,dn)}function addEventListeners(sn,ln,cn,dn){var pn=dn===void 0?{}:dn,vn=pn.once,kn=pn.capture,Sn=pn.passive,wn=monitor(vn?function(Fn){Ln(),cn(Fn)}:cn),Pn=Sn?{capture:kn,passive:Sn}:kn,Nn=getZoneJsOriginalValue(sn,"addEventListener");ln.forEach(function(Fn){return Nn.call(sn,Fn,wn,Pn)});function Ln(){var Fn=getZoneJsOriginalValue(sn,"removeEventListener");ln.forEach(function(zn){return Fn.call(sn,zn,wn,Pn)})}return{stop:Ln}}var RawReportType={intervention:"intervention",deprecation:"deprecation",cspViolation:"csp_violation"};function initReportObservable(sn){var ln=[];includes(sn,RawReportType.cspViolation)&&ln.push(createCspViolationReportObservable());var cn=sn.filter(function(dn){return dn!==RawReportType.cspViolation});return cn.length&&ln.push(createReportObservable(cn)),mergeObservables.apply(void 0,ln)}function createReportObservable(sn){var ln=new Observable(function(){if(window.ReportingObserver){var cn=monitor(function(pn){return pn.forEach(function(vn){ln.notify(buildRawReportFromReport(vn))})}),dn=new window.ReportingObserver(cn,{types:sn,buffered:!0});return dn.observe(),function(){dn.disconnect()}}});return ln}function createCspViolationReportObservable(){var sn=new Observable(function(){var ln=addEventListener(document,"securitypolicyviolation",function(cn){sn.notify(buildRawReportFromCspViolation(cn))}).stop;return ln});return sn}function buildRawReportFromReport(sn){var ln=sn.type,cn=sn.body;return{type:ln,subtype:cn.id,message:"".concat(ln,": ").concat(cn.message),stack:buildStack(cn.id,cn.message,cn.sourceFile,cn.lineNumber,cn.columnNumber)}}function buildRawReportFromCspViolation(sn){var ln=RawReportType.cspViolation,cn="'".concat(sn.blockedURI,"' blocked by '").concat(sn.effectiveDirective,"' directive");return{type:RawReportType.cspViolation,subtype:sn.effectiveDirective,message:"".concat(ln,": ").concat(cn),stack:buildStack(sn.effectiveDirective,sn.originalPolicy?"".concat(cn,' of the policy "').concat(safeTruncate(sn.originalPolicy,100,"..."),'"'):"no policy",sn.sourceFile,sn.lineNumber,sn.columnNumber)}}function buildStack(sn,ln,cn,dn,pn){return cn&&toStackTraceString({name:sn,message:ln,stack:[{func:"?",url:cn,line:dn,column:pn}]})}function sendToExtension(sn,ln){var cn=window.__ddBrowserSdkExtensionCallback;cn&&cn({type:sn,payload:ln})}function getType(sn){return sn===null?"null":Array.isArray(sn)?"array":typeof sn}function mergeInto(sn,ln,cn){if(cn===void 0&&(cn=createCircularReferenceChecker()),ln===void 0)return sn;if(typeof ln!="object"||ln===null)return ln;if(ln instanceof Date)return new Date(ln.getTime());if(ln instanceof RegExp){var dn=ln.flags||[ln.global?"g":"",ln.ignoreCase?"i":"",ln.multiline?"m":"",ln.sticky?"y":"",ln.unicode?"u":""].join("");return new RegExp(ln.source,dn)}if(!cn.hasAlreadyBeenSeen(ln)){if(Array.isArray(ln)){for(var pn=Array.isArray(sn)?sn:[],vn=0;vn<ln.length;++vn)pn[vn]=mergeInto(pn[vn],ln[vn],cn);return pn}var kn=getType(sn)==="object"?sn:{};for(var Sn in ln)Object.prototype.hasOwnProperty.call(ln,Sn)&&(kn[Sn]=mergeInto(kn[Sn],ln[Sn],cn));return kn}}function deepClone(sn){return mergeInto(void 0,sn)}function combine$1(){for(var sn=[],ln=0;ln<arguments.length;ln++)sn[ln]=arguments[ln];for(var cn,dn=0,pn=sn;dn<pn.length;dn++){var vn=pn[dn];vn!=null&&(cn=mergeInto(cn,vn))}return cn}function createCircularReferenceChecker(){if(typeof WeakSet<"u"){var sn=new WeakSet;return{hasAlreadyBeenSeen:function(cn){var dn=sn.has(cn);return dn||sn.add(cn),dn}}}var ln=[];return{hasAlreadyBeenSeen:function(cn){var dn=ln.indexOf(cn)>=0;return dn||ln.push(cn),dn}}}var TelemetryType={log:"log",configuration:"configuration"},ALLOWED_FRAME_URLS=["https://www.datadoghq-browser-agent.com","https://www.datad0g-browser-agent.com","http://localhost","<anonymous>"],TELEMETRY_EXCLUDED_SITES=[INTAKE_SITE_US1_FED],telemetryConfiguration={maxEventsPerPage:0,sentEventCount:0,telemetryEnabled:!1,telemetryConfigurationEnabled:!1},onRawTelemetryEventCollected;function startTelemetry(sn,ln){var cn,dn=new Observable;telemetryConfiguration.telemetryEnabled=!includes(TELEMETRY_EXCLUDED_SITES,ln.site)&&performDraw(ln.telemetrySampleRate),telemetryConfiguration.telemetryConfigurationEnabled=telemetryConfiguration.telemetryEnabled&&performDraw(ln.telemetryConfigurationSampleRate),onRawTelemetryEventCollected=function(vn){if(telemetryConfiguration.telemetryEnabled){var kn=pn(sn,vn);dn.notify(kn),sendToExtension("telemetry",kn)}},startMonitorErrorCollection(addTelemetryError),assign$2(telemetryConfiguration,{maxEventsPerPage:ln.maxTelemetryEventsPerPage,sentEventCount:0});function pn(vn,kn){return combine$1({type:"telemetry",date:timeStampNow(),service:vn,version:"4.42.2",source:"browser",_dd:{format_version:2},telemetry:kn,experimental_features:arrayFrom$1(getExperimentalFeatures())},cn!==void 0?cn():{})}return{setContextProvider:function(vn){cn=vn},observable:dn,enabled:telemetryConfiguration.telemetryEnabled}}function isTelemetryReplicationAllowed(sn){return sn.site===INTAKE_SITE_STAGING}function addTelemetryDebug(sn,ln){displayIfDebugEnabled(ConsoleApiName.debug,sn,ln),addTelemetry(assign$2({type:TelemetryType.log,message:sn,status:"debug"},ln))}function addTelemetryError(sn){addTelemetry(assign$2({type:TelemetryType.log,status:"error"},formatError(sn)))}function addTelemetryConfiguration(sn){telemetryConfiguration.telemetryConfigurationEnabled&&addTelemetry({type:TelemetryType.configuration,configuration:sn})}function addTelemetry(sn){onRawTelemetryEventCollected&&telemetryConfiguration.sentEventCount<telemetryConfiguration.maxEventsPerPage&&(telemetryConfiguration.sentEventCount+=1,onRawTelemetryEventCollected(sn))}function formatError(sn){if(sn instanceof Error){var ln=computeStackTrace(sn);return{error:{kind:ln.name,stack:toStackTraceString(scrubCustomerFrames(ln))},message:ln.message}}return{error:{stack:NO_ERROR_STACK_PRESENT_MESSAGE},message:"".concat("Uncaught"," ").concat(jsonStringify(sn))}}function scrubCustomerFrames(sn){return sn.stack=sn.stack.filter(function(ln){return!ln.url||ALLOWED_FRAME_URLS.some(function(cn){return startsWith(ln.url,cn)})}),sn}var END_OF_TIMES=1/0,CLEAR_OLD_VALUES_INTERVAL=ONE_MINUTE,ValueHistory=function(){function sn(ln){var cn=this;this.expireDelay=ln,this.entries=[],this.clearOldValuesInterval=setInterval$1(function(){return cn.clearOldValues()},CLEAR_OLD_VALUES_INTERVAL)}return sn.prototype.add=function(ln,cn){var dn=this,pn={value:ln,startTime:cn,endTime:END_OF_TIMES,remove:function(){var vn=dn.entries.indexOf(pn);vn>=0&&dn.entries.splice(vn,1)},close:function(vn){pn.endTime=vn}};return this.entries.unshift(pn),pn},sn.prototype.find=function(ln){ln===void 0&&(ln=END_OF_TIMES);for(var cn=0,dn=this.entries;cn<dn.length;cn++){var pn=dn[cn];if(pn.startTime<=ln){if(ln<=pn.endTime)return pn.value;break}}},sn.prototype.closeActive=function(ln){var cn=this.entries[0];cn&&cn.endTime===END_OF_TIMES&&cn.close(ln)},sn.prototype.findAll=function(ln){return ln===void 0&&(ln=END_OF_TIMES),this.entries.filter(function(cn){return cn.startTime<=ln&&ln<=cn.endTime}).map(function(cn){return cn.value})},sn.prototype.reset=function(){this.entries=[]},sn.prototype.stop=function(){clearInterval$1(this.clearOldValuesInterval)},sn.prototype.clearOldValues=function(){for(var ln=relativeNow()-this.expireDelay;this.entries.length>0&&this.entries[this.entries.length-1].endTime<ln;)this.entries.pop()},sn}();function isIE$1(){return!!document.documentMode}function isChromium(){return!!window.chrome||/HeadlessChrome/.test(window.navigator.userAgent)}var SESSION_TIME_OUT_DELAY=4*ONE_HOUR,SESSION_EXPIRATION_DELAY=15*ONE_MINUTE,SESSION_ENTRY_REGEXP=/^([a-z]+)=([a-z0-9-]+)$/,SESSION_ENTRY_SEPARATOR="&",SESSION_COOKIE_NAME="_dd_s",LOCK_RETRY_DELAY=10,MAX_NUMBER_OF_LOCK_RETRIES=100,bufferedOperations=[],ongoingOperations;function withCookieLockAccess(sn,ln){var cn;if(ln===void 0&&(ln=0),ongoingOperations||(ongoingOperations=sn),sn!==ongoingOperations){bufferedOperations.push(sn);return}if(ln>=MAX_NUMBER_OF_LOCK_RETRIES){next$1();return}var dn,pn=retrieveSessionCookie();if(isCookieLockEnabled()){if(pn.lock){retryLater(sn,ln);return}if(dn=generateUUID(),pn.lock=dn,setSessionCookie(pn,sn.options),pn=retrieveSessionCookie(),pn.lock!==dn){retryLater(sn,ln);return}}var vn=sn.process(pn);if(isCookieLockEnabled()&&(pn=retrieveSessionCookie(),pn.lock!==dn)){retryLater(sn,ln);return}if(vn&&persistSessionCookie(vn,sn.options),isCookieLockEnabled()&&!(vn&&isExpiredState(vn))){if(pn=retrieveSessionCookie(),pn.lock!==dn){retryLater(sn,ln);return}delete pn.lock,setSessionCookie(pn,sn.options),vn=pn}(cn=sn.after)===null||cn===void 0||cn.call(sn,vn||pn),next$1()}function isCookieLockEnabled(){return isChromium()}function retryLater(sn,ln){setTimeout$1(function(){withCookieLockAccess(sn,ln+1)},LOCK_RETRY_DELAY)}function next$1(){ongoingOperations=void 0;var sn=bufferedOperations.shift();sn&&withCookieLockAccess(sn)}function persistSessionCookie(sn,ln){if(isExpiredState(sn)){deleteSessionCookie(ln);return}sn.expire=String(dateNow()+SESSION_EXPIRATION_DELAY),setSessionCookie(sn,ln)}function setSessionCookie(sn,ln){setCookie(SESSION_COOKIE_NAME,toSessionString(sn),SESSION_EXPIRATION_DELAY,ln)}function toSessionString(sn){return objectEntries(sn).map(function(ln){var cn=ln[0],dn=ln[1];return"".concat(cn,"=").concat(dn)}).join(SESSION_ENTRY_SEPARATOR)}function retrieveSessionCookie(){var sn=getCookie(SESSION_COOKIE_NAME),ln={};return isValidSessionString(sn)&&sn.split(SESSION_ENTRY_SEPARATOR).forEach(function(cn){var dn=SESSION_ENTRY_REGEXP.exec(cn);if(dn!==null){var pn=dn[1],vn=dn[2];ln[pn]=vn}}),ln}function deleteSessionCookie(sn){deleteCookie(SESSION_COOKIE_NAME,sn)}function isValidSessionString(sn){return sn!==void 0&&(sn.indexOf(SESSION_ENTRY_SEPARATOR)!==-1||SESSION_ENTRY_REGEXP.test(sn))}function isExpiredState(sn){return isEmptyObject(sn)}var OLD_SESSION_COOKIE_NAME="_dd",OLD_RUM_COOKIE_NAME="_dd_r",OLD_LOGS_COOKIE_NAME="_dd_l",RUM_SESSION_KEY$1="rum",LOGS_SESSION_KEY$1="logs";function tryOldCookiesMigration(sn){var ln=getCookie(SESSION_COOKIE_NAME),cn=getCookie(OLD_SESSION_COOKIE_NAME),dn=getCookie(OLD_RUM_COOKIE_NAME),pn=getCookie(OLD_LOGS_COOKIE_NAME);if(!ln){var vn={};cn&&(vn.id=cn),pn&&/^[01]$/.test(pn)&&(vn[LOGS_SESSION_KEY$1]=pn),dn&&/^[012]$/.test(dn)&&(vn[RUM_SESSION_KEY$1]=dn),persistSessionCookie(vn,sn)}}function startSessionStore(sn,ln,cn){var dn=new Observable,pn=new Observable,vn=setInterval$1(Pn,COOKIE_ACCESS_DELAY),kn=qn();function Sn(){var Yn;withCookieLockAccess({options:sn,process:function(Jn){var rs=Nn(Jn);return Yn=Ln(rs),rs},after:function(Jn){Yn&&!Fn()&&Kn(Jn),kn=Jn}})}function wn(){withCookieLockAccess({options:sn,process:function(Yn){return Fn()?Nn(Yn):void 0}})}function Pn(){withCookieLockAccess({options:sn,process:function(Yn){return Zn(Yn)?void 0:{}},after:Nn})}function Nn(Yn){return Zn(Yn)||(Yn={}),Fn()&&(zn(Yn)?Dn():kn=Yn),Yn}function Ln(Yn){var Jn=cn(Yn[ln]),rs=Jn.trackingType,ss=Jn.isTracked;return Yn[ln]=rs,ss&&!Yn.id&&(Yn.id=generateUUID(),Yn.created=String(dateNow())),ss}function Fn(){return kn[ln]!==void 0}function zn(Yn){return kn.id!==Yn.id||kn[ln]!==Yn[ln]}function Dn(){kn={},pn.notify()}function Kn(Yn){kn=Yn,dn.notify()}function qn(){var Yn=retrieveSessionCookie();return Zn(Yn)?Yn:{}}function Zn(Yn){return(Yn.created===void 0||dateNow()-Number(Yn.created)<SESSION_TIME_OUT_DELAY)&&(Yn.expire===void 0||dateNow()<Number(Yn.expire))}return{expandOrRenewSession:throttle$1(Sn,COOKIE_ACCESS_DELAY).throttled,expandSession:wn,getSession:function(){return kn},renewObservable:dn,expireObservable:pn,expire:function(){deleteSessionCookie(sn),Nn({})},stop:function(){clearInterval$1(vn)}}}var VISIBILITY_CHECK_DELAY=ONE_MINUTE,SESSION_CONTEXT_TIMEOUT_DELAY=SESSION_TIME_OUT_DELAY;function startSessionManager(sn,ln,cn){tryOldCookiesMigration(sn);var dn=startSessionStore(sn,ln,cn),pn=new ValueHistory(SESSION_CONTEXT_TIMEOUT_DELAY);dn.renewObservable.subscribe(function(){pn.add(vn(),relativeNow())}),dn.expireObservable.subscribe(function(){pn.closeActive(relativeNow())}),dn.expandOrRenewSession(),pn.add(vn(),clocksOrigin().relative),trackActivity(function(){return dn.expandOrRenewSession()}),trackVisibility(function(){return dn.expandSession()});function vn(){return{id:dn.getSession().id,trackingType:dn.getSession()[ln]}}return{findActiveSession:function(kn){return pn.find(kn)},renewObservable:dn.renewObservable,expireObservable:dn.expireObservable,expire:dn.expire}}function trackActivity(sn){addEventListeners(window,["click","touchstart","keydown","scroll"],sn,{capture:!0,passive:!0}).stop}function trackVisibility(sn){var ln=function(){document.visibilityState==="visible"&&sn()};addEventListener(document,"visibilitychange",ln).stop,setInterval$1(ln,VISIBILITY_CHECK_DELAY)}function isServerError(sn){return sn>=500}function tryToClone(sn){try{return sn.clone()}catch{return}}var MAX_ONGOING_BYTES_COUNT=80*ONE_KIBI_BYTE,MAX_ONGOING_REQUESTS=32,MAX_QUEUE_BYTES_COUNT=3*ONE_MEBI_BYTE,MAX_BACKOFF_TIME=ONE_MINUTE,INITIAL_BACKOFF_TIME=ONE_SECOND;function sendWithRetryStrategy(sn,ln,cn,dn,pn){ln.transportStatus===0&&ln.queuedPayloads.size()===0&&ln.bandwidthMonitor.canHandle(sn)?send(sn,ln,cn,{onSuccess:function(){return retryQueuedPayloads(0,ln,cn,dn,pn)},onFailure:function(){ln.queuedPayloads.enqueue(sn),scheduleRetry(ln,cn,dn,pn)}}):ln.queuedPayloads.enqueue(sn)}function scheduleRetry(sn,ln,cn,dn){sn.transportStatus===2&&setTimeout$1(function(){var pn=sn.queuedPayloads.first();send(pn,sn,ln,{onSuccess:function(){sn.queuedPayloads.dequeue(),sn.currentBackoffTime=INITIAL_BACKOFF_TIME,retryQueuedPayloads(1,sn,ln,cn,dn)},onFailure:function(){sn.currentBackoffTime=Math.min(MAX_BACKOFF_TIME,sn.currentBackoffTime*2),scheduleRetry(sn,ln,cn,dn)}})},sn.currentBackoffTime)}function send(sn,ln,cn,dn){var pn=dn.onSuccess,vn=dn.onFailure;ln.bandwidthMonitor.add(sn),cn(sn,function(kn){ln.bandwidthMonitor.remove(sn),shouldRetryRequest(kn)?(ln.transportStatus=ln.bandwidthMonitor.ongoingRequestCount>0?1:2,sn.retry={count:sn.retry?sn.retry.count+1:1,lastFailureStatus:kn.status},vn()):(ln.transportStatus=0,pn())})}function retryQueuedPayloads(sn,ln,cn,dn,pn){sn===0&&ln.queuedPayloads.isFull()&&!ln.queueFullReported&&(pn({message:"Reached max ".concat(dn," events size queued for upload: ").concat(MAX_QUEUE_BYTES_COUNT/ONE_MEBI_BYTE,"MiB"),source:ErrorSource.AGENT,startClocks:clocksNow()}),ln.queueFullReported=!0);var vn=ln.queuedPayloads;for(ln.queuedPayloads=newPayloadQueue();vn.size()>0;)sendWithRetryStrategy(vn.dequeue(),ln,cn,dn,pn)}function shouldRetryRequest(sn){return sn.type!=="opaque"&&(sn.status===0&&!navigator.onLine||sn.status===408||sn.status===429||isServerError(sn.status))}function newRetryState(){return{transportStatus:0,currentBackoffTime:INITIAL_BACKOFF_TIME,bandwidthMonitor:newBandwidthMonitor(),queuedPayloads:newPayloadQueue(),queueFullReported:!1}}function newPayloadQueue(){var sn=[];return{bytesCount:0,enqueue:function(ln){this.isFull()||(sn.push(ln),this.bytesCount+=ln.bytesCount)},first:function(){return sn[0]},dequeue:function(){var ln=sn.shift();return ln&&(this.bytesCount-=ln.bytesCount),ln},size:function(){return sn.length},isFull:function(){return this.bytesCount>=MAX_QUEUE_BYTES_COUNT}}}function newBandwidthMonitor(){return{ongoingRequestCount:0,ongoingByteCount:0,canHandle:function(sn){return this.ongoingRequestCount===0||this.ongoingByteCount+sn.bytesCount<=MAX_ONGOING_BYTES_COUNT&&this.ongoingRequestCount<MAX_ONGOING_REQUESTS},add:function(sn){this.ongoingRequestCount+=1,this.ongoingByteCount+=sn.bytesCount},remove:function(sn){this.ongoingRequestCount-=1,this.ongoingByteCount-=sn.bytesCount}}}function createHttpRequest(sn,ln,cn){var dn=newRetryState(),pn=function(vn,kn){return fetchKeepAliveStrategy(sn,ln,vn,kn)};return{send:function(vn){sendWithRetryStrategy(vn,dn,pn,sn.endpointType,cn)},sendOnExit:function(vn){sendBeaconStrategy(sn,ln,vn)}}}function sendBeaconStrategy(sn,ln,cn){var dn=cn.data,pn=cn.bytesCount,vn=cn.flushReason,kn=!!navigator.sendBeacon&&pn<ln;if(kn)try{var Sn=sn.build("beacon",vn),wn=navigator.sendBeacon(Sn,dn);if(wn)return}catch(Nn){reportBeaconError(Nn)}var Pn=sn.build("xhr",vn);sendXHR(Pn,dn)}var hasReportedBeaconError=!1;function reportBeaconError(sn){hasReportedBeaconError||(hasReportedBeaconError=!0,addTelemetryError(sn))}function fetchKeepAliveStrategy(sn,ln,cn,dn){var pn=cn.data,vn=cn.bytesCount,kn=cn.flushReason,Sn=cn.retry,wn=isKeepAliveSupported()&&vn<ln;if(wn){var Pn=sn.build("fetch",kn,Sn);fetch(Pn,{method:"POST",body:pn,keepalive:!0,mode:"cors"}).then(monitor(function(Ln){return dn==null?void 0:dn({status:Ln.status,type:Ln.type})}),monitor(function(){var Ln=sn.build("xhr",kn,Sn);sendXHR(Ln,pn,dn)}))}else{var Nn=sn.build("xhr",kn,Sn);sendXHR(Nn,pn,dn)}}function isKeepAliveSupported(){try{return window.Request&&"keepalive"in new Request("http://a")}catch{return!1}}function sendXHR(sn,ln,cn){var dn=new XMLHttpRequest;dn.open("POST",sn,!0),addEventListener(dn,"loadend",function(){cn==null||cn({status:dn.status})},{once:!0}),dn.send(ln)}var PageExitReason={HIDDEN:"visibility_hidden",UNLOADING:"before_unload",PAGEHIDE:"page_hide",FROZEN:"page_frozen"};function createPageExitObservable(){var sn=new Observable(function(){var ln=isExperimentalFeatureEnabled(ExperimentalFeature.PAGEHIDE),cn=addEventListeners(window,["visibilitychange","freeze","pagehide"],function(pn){pn.type==="pagehide"&&ln?sn.notify({reason:PageExitReason.PAGEHIDE}):pn.type==="visibilitychange"&&document.visibilityState==="hidden"?sn.notify({reason:PageExitReason.HIDDEN}):pn.type==="freeze"&&sn.notify({reason:PageExitReason.FROZEN})},{capture:!0}).stop,dn=noop$7;return ln||(dn=addEventListener(window,"beforeunload",function(){sn.notify({reason:PageExitReason.UNLOADING})}).stop),function(){cn(),dn()}});return sn}function isPageExitReason(sn){return includes(objectValues(PageExitReason),sn)}var Batch=function(){function sn(ln,cn,dn){var pn=this;this.request=ln,this.flushController=cn,this.messageBytesLimit=dn,this.pushOnlyBuffer=[],this.upsertBuffer={},this.flushController.flushObservable.subscribe(function(vn){return pn.flush(vn)})}return sn.prototype.add=function(ln){this.addOrUpdate(ln)},sn.prototype.upsert=function(ln,cn){this.addOrUpdate(ln,cn)},sn.prototype.flush=function(ln){var cn=this.pushOnlyBuffer.concat(objectValues(this.upsertBuffer));this.pushOnlyBuffer=[],this.upsertBuffer={};var dn={data:cn.join(`
`),bytesCount:ln.bytesCount,flushReason:ln.reason};isPageExitReason(ln.reason)?this.request.sendOnExit(dn):this.request.send(dn)},sn.prototype.addOrUpdate=function(ln,cn){var dn=this.process(ln),pn=dn.processedMessage,vn=dn.messageBytesCount;if(vn>=this.messageBytesLimit){display.warn("Discarded a message whose size was bigger than the maximum allowed size ".concat(this.messageBytesLimit,"KB."));return}this.hasMessageFor(cn)&&this.remove(cn),this.push(pn,vn,cn)},sn.prototype.process=function(ln){var cn=jsonStringify(ln),dn=computeBytesCount(cn);return{processedMessage:cn,messageBytesCount:dn}},sn.prototype.push=function(ln,cn,dn){var pn=this.flushController.messagesCount>0?1:0;this.flushController.notifyBeforeAddMessage(cn+pn),dn!==void 0?this.upsertBuffer[dn]=ln:this.pushOnlyBuffer.push(ln),this.flushController.notifyAfterAddMessage()},sn.prototype.remove=function(ln){var cn=this.upsertBuffer[ln];delete this.upsertBuffer[ln];var dn=computeBytesCount(cn),pn=this.flushController.messagesCount>1?1:0;this.flushController.notifyAfterRemoveMessage(dn+pn)},sn.prototype.hasMessageFor=function(ln){return ln!==void 0&&this.upsertBuffer[ln]!==void 0},sn}();function getEventBridge(){var sn=getEventBridgeGlobal();if(sn)return{getAllowedWebViewHosts:function(){return JSON.parse(sn.getAllowedWebViewHosts())},send:function(ln,cn){sn.send(JSON.stringify({eventType:ln,event:cn}))}}}function canUseEventBridge(sn){var ln;sn===void 0&&(sn=(ln=getGlobalObject$1().location)===null||ln===void 0?void 0:ln.hostname);var cn=getEventBridge();return!!cn&&cn.getAllowedWebViewHosts().some(function(dn){return sn===dn||endsWith(sn,".".concat(dn))})}function getEventBridgeGlobal(){return getGlobalObject$1().DatadogEventBridge}function createFlushController(sn){var ln=sn.messagesLimit,cn=sn.bytesLimit,dn=sn.durationLimit,pn=sn.pageExitObservable,vn=sn.sessionExpireObservable,kn=new Observable;pn.subscribe(function(zn){return Pn(zn.reason)}),vn.subscribe(function(){return Pn("session_expire")});var Sn=0,wn=0;function Pn(zn){if(wn!==0){var Dn=wn,Kn=Sn;wn=0,Sn=0,Fn(),kn.notify({reason:zn,messagesCount:Dn,bytesCount:Kn})}}var Nn;function Ln(){Nn===void 0&&(Nn=setTimeout$1(function(){Pn("duration_limit")},dn))}function Fn(){clearTimeout$1(Nn),Nn=void 0}return{flushObservable:kn,get messagesCount(){return wn},notifyBeforeAddMessage:function(zn){Sn+zn>=cn&&Pn("bytes_limit"),wn+=1,Sn+=zn,Ln()},notifyAfterAddMessage:function(){wn>=ln?Pn("messages_limit"):Sn>=cn&&Pn("bytes_limit")},notifyAfterRemoveMessage:function(zn){Sn-=zn,wn-=1,wn===0&&Fn()}}}function startBatchWithReplica(sn,ln,cn,dn,pn,vn){var kn=wn(ln),Sn;vn&&(Sn=wn(vn));function wn(Pn){return new Batch(createHttpRequest(Pn,sn.batchBytesLimit,cn),createFlushController({messagesLimit:sn.batchMessagesLimit,bytesLimit:sn.batchBytesLimit,durationLimit:sn.flushTimeout,pageExitObservable:dn,sessionExpireObservable:pn}),sn.messageBytesLimit)}return{add:function(Pn,Nn){Nn===void 0&&(Nn=!0),kn.add(Pn),Sn&&Nn&&Sn.add(Pn)}}}function removeDuplicates(sn){var ln=new Set;return sn.forEach(function(cn){return ln.add(cn)}),arrayFrom$1(ln)}var AbstractLifeCycle=function(){function sn(){this.callbacks={}}return sn.prototype.notify=function(ln,cn){var dn=this.callbacks[ln];dn&&dn.forEach(function(pn){return pn(cn)})},sn.prototype.subscribe=function(ln,cn){var dn=this;return this.callbacks[ln]||(this.callbacks[ln]=[]),this.callbacks[ln].push(cn),{unsubscribe:function(){dn.callbacks[ln]=dn.callbacks[ln].filter(function(pn){return cn!==pn})}}},sn}();function createEventRateLimiter(sn,ln,cn){var dn=0,pn=!1;return{isLimitReached:function(){if(dn===0&&setTimeout$1(function(){dn=0},ONE_MINUTE),dn+=1,dn<=ln||pn)return pn=!1,!1;if(dn===ln+1){pn=!0;try{cn({message:"Reached max number of ".concat(sn,"s by minute: ").concat(ln),source:ErrorSource.AGENT,startClocks:clocksNow()})}finally{pn=!1}}return!0}}}function runOnReadyState(sn,ln){if(document.readyState===sn||document.readyState==="complete")ln();else{var cn=sn==="complete"?"load":"DOMContentLoaded";addEventListener(window,cn,ln,{once:!0})}}var xhrObservable,xhrContexts=new WeakMap;function initXhrObservable(){return xhrObservable||(xhrObservable=createXhrObservable()),xhrObservable}function createXhrObservable(){var sn=new Observable(function(){var ln=instrumentMethodAndCallOriginal(XMLHttpRequest.prototype,"open",{before:openXhr}).stop,cn=instrumentMethodAndCallOriginal(XMLHttpRequest.prototype,"send",{before:function(){sendXhr.call(this,sn)}}).stop,dn=instrumentMethodAndCallOriginal(XMLHttpRequest.prototype,"abort",{before:abortXhr}).stop;return function(){ln(),cn(),dn()}});return sn}function openXhr(sn,ln){xhrContexts.set(this,{state:"open",method:sn,url:normalizeUrl(String(ln))})}function sendXhr(sn){var ln=this,cn=xhrContexts.get(this);if(cn){var dn=cn;dn.state="start",dn.startTime=relativeNow(),dn.startClocks=clocksNow(),dn.isAborted=!1,dn.xhr=this;var pn=!1,vn=instrumentMethodAndCallOriginal(this,"onreadystatechange",{before:function(){this.readyState===XMLHttpRequest.DONE&&kn()}}).stop,kn=function(){if(Sn(),vn(),!pn){pn=!0;var wn=cn;wn.state="complete",wn.duration=elapsed(dn.startClocks.timeStamp,timeStampNow()),wn.status=ln.status,sn.notify(shallowClone(wn))}},Sn=addEventListener(this,"loadend",kn).stop;sn.notify(dn)}}function abortXhr(){var sn=xhrContexts.get(this);sn&&(sn.isAborted=!0)}var fetchObservable;function initFetchObservable(){return fetchObservable||(fetchObservable=createFetchObservable()),fetchObservable}function createFetchObservable(){var sn=new Observable(function(){if(window.fetch){var ln=instrumentMethod(window,"fetch",function(cn){return function(dn,pn){var vn,kn=callMonitored(beforeSend,null,[sn,dn,pn]);return kn?(vn=cn.call(this,kn.input,kn.init),callMonitored(afterSend,null,[sn,vn,kn])):vn=cn.call(this,dn,pn),vn}}).stop;return ln}});return sn}function beforeSend(sn,ln,cn){var dn=cn&&cn.method||ln instanceof Request&&ln.method||"GET",pn=ln instanceof Request?ln.url:normalizeUrl(String(ln)),vn=clocksNow(),kn={state:"start",init:cn,input:ln,method:dn,startClocks:vn,url:pn};return sn.notify(kn),kn}function afterSend(sn,ln,cn){var dn=function(pn){var vn=cn;vn.state="resolve","stack"in pn||pn instanceof Error?(vn.status=0,vn.isAborted=pn instanceof DOMException&&pn.code===DOMException.ABORT_ERR,vn.error=pn):"status"in pn&&(vn.response=pn,vn.responseType=pn.type,vn.status=pn.status,vn.isAborted=!1),sn.notify(vn)};ln.then(monitor(dn),monitor(dn))}var consoleObservablesByApi={};function initConsoleObservable(sn){var ln=sn.map(function(cn){return consoleObservablesByApi[cn]||(consoleObservablesByApi[cn]=createConsoleObservable(cn)),consoleObservablesByApi[cn]});return mergeObservables.apply(void 0,ln)}function createConsoleObservable(sn){var ln=new Observable(function(){var cn=globalConsole[sn];return globalConsole[sn]=function(){for(var dn=[],pn=0;pn<arguments.length;pn++)dn[pn]=arguments[pn];cn.apply(console,dn);var vn=createHandlingStack();callMonitored(function(){ln.notify(buildConsoleLog(dn,sn,vn))})},function(){globalConsole[sn]=cn}});return ln}function buildConsoleLog(sn,ln,cn){var dn=sn.map(function(Sn){return formatConsoleParameters(Sn)}).join(" "),pn,vn;if(ln===ConsoleApiName.error){var kn=find$2(sn,function(Sn){return Sn instanceof Error});pn=kn?toStackTraceString(computeStackTrace(kn)):void 0,vn=tryToGetFingerprint(kn),dn="console error: ".concat(dn)}return{api:ln,message:dn,stack:pn,handlingStack:cn,fingerprint:vn}}function formatConsoleParameters(sn){return typeof sn=="string"?sanitize(sn):sn instanceof Error?formatErrorMessage(computeStackTrace(sn)):jsonStringify(sanitize(sn),void 0,2)}var BUFFER_LIMIT=500,BoundedBuffer=function(){function sn(){this.buffer=[]}return sn.prototype.add=function(ln){var cn=this.buffer.push(ln);cn>BUFFER_LIMIT&&this.buffer.splice(0,1)},sn.prototype.drain=function(){this.buffer.forEach(function(ln){return ln()}),this.buffer.length=0},sn}(),CUSTOMER_DATA_BYTES_LIMIT=3*ONE_KIBI_BYTE;function warnIfCustomerDataLimitReached(sn,ln){return sn>CUSTOMER_DATA_BYTES_LIMIT?(display.warn("The ".concat(ln," data is over ").concat(CUSTOMER_DATA_BYTES_LIMIT/ONE_KIBI_BYTE,"KiB. On low connectivity, the SDK has the potential to exhaust the user's upload bandwidth.")),!0):!1}var BYTES_COMPUTATION_THROTTLING_DELAY$1=200;function createContextManager(sn,ln){ln===void 0&&(ln=computeBytesCount);var cn={},dn,pn=!1,vn=throttle$1(function(kn){dn=ln(jsonStringify(kn)),pn||(pn=warnIfCustomerDataLimitReached(dn,sn))},BYTES_COMPUTATION_THROTTLING_DELAY$1).throttled;return{getBytesCount:function(){return dn},get:function(){return cn},add:function(kn,Sn){cn[kn]=Sn,vn(cn)},remove:function(kn){delete cn[kn],vn(cn)},set:function(kn){cn=kn,vn(cn)},getContext:function(){return deepClone(cn)},setContext:function(kn){cn=sanitize(kn),vn(cn)},setContextProperty:function(kn,Sn){cn[kn]=sanitize(Sn),vn(cn)},removeContextProperty:function(kn){delete cn[kn],vn(cn)},clearContext:function(){cn={},dn=0}}}function readBytesFromStream(sn,ln,cn){var dn=sn.getReader(),pn=[],vn=0;kn();function kn(){dn.read().then(monitor(function(wn){if(wn.done){Sn();return}cn.collectStreamBody&&pn.push(wn.value),vn+=wn.value.length,vn>cn.bytesLimit?Sn():kn()}),monitor(function(wn){return ln(wn)}))}function Sn(){dn.cancel().catch(noop$7);var wn,Pn;if(cn.collectStreamBody){var Nn;if(pn.length===1)Nn=pn[0];else{Nn=new Uint8Array(vn);var Ln=0;pn.forEach(function(Fn){Nn.set(Fn,Ln),Ln+=Fn.length})}wn=Nn.slice(0,cn.bytesLimit),Pn=Nn.length>cn.bytesLimit}ln(void 0,wn,Pn)}}var SYNTHETICS_TEST_ID_COOKIE_NAME="datadog-synthetics-public-id",SYNTHETICS_RESULT_ID_COOKIE_NAME="datadog-synthetics-result-id",SYNTHETICS_INJECTS_RUM_COOKIE_NAME="datadog-synthetics-injects-rum";function willSyntheticsInjectRum(){return!!(window._DATADOG_SYNTHETICS_INJECTS_RUM||getCookie(SYNTHETICS_INJECTS_RUM_COOKIE_NAME))}function getSyntheticsTestId(){var sn=window._DATADOG_SYNTHETICS_PUBLIC_ID||getCookie(SYNTHETICS_TEST_ID_COOKIE_NAME);return typeof sn=="string"?sn:void 0}function getSyntheticsResultId(){var sn=window._DATADOG_SYNTHETICS_RESULT_ID||getCookie(SYNTHETICS_RESULT_ID_COOKIE_NAME);return typeof sn=="string"?sn:void 0}function sanitizeUser$1(sn){var ln=assign$2({},sn),cn=["id","name","email"];return cn.forEach(function(dn){dn in ln&&(ln[dn]=String(ln[dn]))}),ln}function checkUser(sn){var ln=getType(sn)==="object";return ln||display.error("Unsupported user:",sn),ln}function isMatchOption(sn){var ln=getType(sn);return ln==="string"||ln==="function"||sn instanceof RegExp}function matchList(sn,ln,cn){return cn===void 0&&(cn=!1),sn.some(function(dn){try{if(typeof dn=="function")return dn(ln);if(dn instanceof RegExp)return dn.test(ln);if(typeof dn=="string")return cn?startsWith(ln,dn):dn===ln}catch(pn){display.error(pn)}return!1})}function isTracingOption(sn){var ln=sn;return getType(ln)==="object"&&isMatchOption(ln.match)&&Array.isArray(ln.propagatorTypes)}function clearTracingIfNeeded(sn){sn.status===0&&!sn.isAborted&&(sn.traceId=void 0,sn.spanId=void 0,sn.traceSampled=void 0)}function startTracer(sn,ln){return{clearTracingIfNeeded,traceFetch:function(cn){return injectHeadersIfTracingAllowed(sn,cn,ln,function(dn){var pn;if(cn.input instanceof Request&&!(!((pn=cn.init)===null||pn===void 0)&&pn.headers))cn.input=new Request(cn.input),Object.keys(dn).forEach(function(kn){cn.input.headers.append(kn,dn[kn])});else{cn.init=shallowClone(cn.init);var vn=[];cn.init.headers instanceof Headers?cn.init.headers.forEach(function(kn,Sn){vn.push([Sn,kn])}):Array.isArray(cn.init.headers)?cn.init.headers.forEach(function(kn){vn.push(kn)}):cn.init.headers&&Object.keys(cn.init.headers).forEach(function(kn){vn.push([kn,cn.init.headers[kn]])}),cn.init.headers=vn.concat(objectEntries(dn))}})},traceXhr:function(cn,dn){return injectHeadersIfTracingAllowed(sn,cn,ln,function(pn){Object.keys(pn).forEach(function(vn){dn.setRequestHeader(vn,pn[vn])})})}}}function injectHeadersIfTracingAllowed(sn,ln,cn,dn){if(!(!isTracingSupported()||!cn.findTrackedSession())){var pn=find$2(sn.allowedTracingUrls,function(vn){return matchList([vn.match],ln.url,!0)});pn&&(ln.traceId=new TraceIdentifier,ln.spanId=new TraceIdentifier,ln.traceSampled=!isNumber(sn.traceSampleRate)||performDraw(sn.traceSampleRate),dn(makeTracingHeaders(ln.traceId,ln.spanId,ln.traceSampled,pn.propagatorTypes)))}}function isTracingSupported(){return getCrypto()!==void 0}function getCrypto(){return window.crypto||window.msCrypto}function makeTracingHeaders(sn,ln,cn,dn){var pn={};return dn.forEach(function(vn){switch(vn){case"datadog":{assign$2(pn,{"x-datadog-origin":"rum","x-datadog-parent-id":ln.toDecimalString(),"x-datadog-sampling-priority":cn?"1":"0","x-datadog-trace-id":sn.toDecimalString()});break}case"tracecontext":{assign$2(pn,{traceparent:"00-0000000000000000".concat(sn.toPaddedHexadecimalString(),"-").concat(ln.toPaddedHexadecimalString(),"-0").concat(cn?"1":"0")});break}case"b3":{assign$2(pn,{b3:"".concat(sn.toPaddedHexadecimalString(),"-").concat(ln.toPaddedHexadecimalString(),"-").concat(cn?"1":"0")});break}case"b3multi":{assign$2(pn,{"X-B3-TraceId":sn.toPaddedHexadecimalString(),"X-B3-SpanId":ln.toPaddedHexadecimalString(),"X-B3-Sampled":cn?"1":"0"});break}}}),pn}var TraceIdentifier=function(){function sn(){this.buffer=new Uint8Array(8),getCrypto().getRandomValues(this.buffer),this.buffer[0]=this.buffer[0]&127}return sn.prototype.toString=function(ln){var cn=this.readInt32(0),dn=this.readInt32(4),pn="";do{var vn=cn%ln*4294967296+dn;cn=Math.floor(cn/ln),dn=Math.floor(vn/ln),pn=(vn%ln).toString(ln)+pn}while(cn||dn);return pn},sn.prototype.toDecimalString=function(){return this.toString(10)},sn.prototype.toPaddedHexadecimalString=function(){var ln=this.toString(16);return Array(17-ln.length).join("0")+ln},sn.prototype.readInt32=function(ln){return this.buffer[ln]*16777216+(this.buffer[ln+1]<<16)+(this.buffer[ln+2]<<8)+this.buffer[ln+3]},sn}();function validateAndBuildRumConfiguration(sn){var ln,cn,dn,pn,vn,kn;if(!sn.applicationId){display.error("Application ID is not configured, no RUM data will be collected.");return}if(sn.sessionReplaySampleRate!==void 0&&!isPercentage(sn.sessionReplaySampleRate)){display.error("Session Replay Sample Rate should be a number between 0 and 100");return}var Sn=(ln=sn.premiumSampleRate)!==null&&ln!==void 0?ln:sn.replaySampleRate;if(Sn!==void 0&&sn.sessionReplaySampleRate!==void 0&&(display.warn("Ignoring Premium Sample Rate because Session Replay Sample Rate is set"),Sn=void 0),Sn!==void 0&&!isPercentage(Sn)){display.error("Premium Sample Rate should be a number between 0 and 100");return}var wn=(cn=sn.traceSampleRate)!==null&&cn!==void 0?cn:sn.tracingSampleRate;if(wn!==void 0&&!isPercentage(wn)){display.error("Trace Sample Rate should be a number between 0 and 100");return}if(sn.excludedActivityUrls!==void 0&&!Array.isArray(sn.excludedActivityUrls)){display.error("Excluded Activity Urls should be an array");return}var Pn=validateAndBuildTracingOptions(sn);if(Pn){var Nn=validateAndBuildConfiguration(sn);if(Nn){var Ln=!!((dn=sn.trackUserInteractions)!==null&&dn!==void 0?dn:sn.trackInteractions),Fn=!!sn.trackFrustrations;return assign$2({applicationId:sn.applicationId,version:sn.version,actionNameAttribute:sn.actionNameAttribute,sessionReplaySampleRate:(vn=(pn=sn.sessionReplaySampleRate)!==null&&pn!==void 0?pn:Sn)!==null&&vn!==void 0?vn:100,oldPlansBehavior:sn.sessionReplaySampleRate===void 0,traceSampleRate:wn,allowedTracingUrls:Pn,excludedActivityUrls:(kn=sn.excludedActivityUrls)!==null&&kn!==void 0?kn:[],trackUserInteractions:Ln||Fn,trackFrustrations:Fn,trackViewsManually:!!sn.trackViewsManually,trackResources:sn.trackResources,trackLongTasks:sn.trackLongTasks,subdomain:sn.subdomain,defaultPrivacyLevel:objectHasValue(DefaultPrivacyLevel,sn.defaultPrivacyLevel)?sn.defaultPrivacyLevel:DefaultPrivacyLevel.MASK_USER_INPUT,customerDataTelemetrySampleRate:1},Nn)}}}function validateAndBuildTracingOptions(sn){if(sn.allowedTracingUrls!==void 0&&sn.allowedTracingOrigins!==void 0&&display.warn("Both allowedTracingUrls and allowedTracingOrigins (deprecated) have been defined. The parameter allowedTracingUrls will override allowedTracingOrigins."),sn.allowedTracingUrls!==void 0){if(!Array.isArray(sn.allowedTracingUrls)){display.error("Allowed Tracing URLs should be an array");return}if(sn.allowedTracingUrls.length!==0&&sn.service===void 0){display.error("Service needs to be configured when tracing is enabled");return}var ln=[];return sn.allowedTracingUrls.forEach(function(dn){isMatchOption(dn)?ln.push({match:dn,propagatorTypes:["datadog"]}):isTracingOption(dn)?ln.push(dn):display.warn("Allowed Tracing Urls parameters should be a string, RegExp, function, or an object. Ignoring parameter",dn)}),ln}if(sn.allowedTracingOrigins!==void 0){if(!Array.isArray(sn.allowedTracingOrigins)){display.error("Allowed Tracing Origins should be an array");return}if(sn.allowedTracingOrigins.length!==0&&sn.service===void 0){display.error("Service needs to be configured when tracing is enabled");return}var cn=[];return sn.allowedTracingOrigins.forEach(function(dn){var pn=convertLegacyMatchOptionToTracingOption(dn);pn&&cn.push(pn)}),cn}return[]}function convertLegacyMatchOptionToTracingOption(sn){var ln;if(typeof sn=="string"?ln=sn:sn instanceof RegExp?ln=function(cn){return sn.test(getOrigin(cn))}:typeof sn=="function"&&(ln=function(cn){return sn(getOrigin(cn))}),ln===void 0){display.warn("Allowed Tracing Origins parameters should be a string, RegExp or function. Ignoring parameter",sn);return}return{match:ln,propagatorTypes:["datadog"]}}function getSelectedTracingPropagators(sn){var ln=new Set;return Array.isArray(sn.allowedTracingUrls)&&sn.allowedTracingUrls.length>0&&sn.allowedTracingUrls.forEach(function(cn){isMatchOption(cn)?ln.add("datadog"):getType(cn)==="object"&&Array.isArray(cn.propagatorTypes)&&cn.propagatorTypes.forEach(function(dn){return ln.add(dn)})}),Array.isArray(sn.allowedTracingOrigins)&&sn.allowedTracingOrigins.length>0&&ln.add("datadog"),arrayFrom$1(ln)}function serializeRumConfiguration(sn){var ln,cn,dn=serializeConfiguration(sn);return assign$2({premium_sample_rate:sn.premiumSampleRate,replay_sample_rate:sn.replaySampleRate,session_replay_sample_rate:sn.sessionReplaySampleRate,trace_sample_rate:(ln=sn.traceSampleRate)!==null&&ln!==void 0?ln:sn.tracingSampleRate,action_name_attribute:sn.actionNameAttribute,use_allowed_tracing_origins:Array.isArray(sn.allowedTracingOrigins)&&sn.allowedTracingOrigins.length>0,use_allowed_tracing_urls:Array.isArray(sn.allowedTracingUrls)&&sn.allowedTracingUrls.length>0,selected_tracing_propagators:getSelectedTracingPropagators(sn),default_privacy_level:sn.defaultPrivacyLevel,use_excluded_activity_urls:Array.isArray(sn.excludedActivityUrls)&&sn.excludedActivityUrls.length>0,track_frustrations:sn.trackFrustrations,track_views_manually:sn.trackViewsManually,track_user_interactions:(cn=sn.trackUserInteractions)!==null&&cn!==void 0?cn:sn.trackInteractions},dn)}function buildCommonContext(sn,ln,cn){return{context:sn.getContext(),user:ln.getContext(),hasReplay:cn.isRecording()?!0:void 0}}function makeRumPublicApi(sn,ln,cn){var dn=cn===void 0?{}:cn,pn=dn.ignoreInitIfSyntheticsWillInjectRum,vn=pn===void 0?!0:pn,kn=!1,Sn=createContextManager("global context"),wn=createContextManager("user"),Pn=function(){},Nn=function(){},Ln=noop$7,Fn=function(){},zn=new BoundedBuffer,Dn=function(ms,Ts){Ts===void 0&&(Ts=timeStampNow()),zn.add(function(){return Dn(ms,Ts)})},Kn=function(ms,Ts){Ts===void 0&&(Ts=clocksNow()),zn.add(function(){return Kn(ms,Ts)})},qn=function(ms,Ts){Ts===void 0&&(Ts=buildCommonContext(Sn,wn,ln)),zn.add(function(){return qn(ms,Ts)})},Zn=function(ms,Ts){Ts===void 0&&(Ts=buildCommonContext(Sn,wn,ln)),zn.add(function(){return Zn(ms,Ts)})},Yn=function(ms,Ts){zn.add(function(){return Yn(ms,Ts)})};function Jn(ms){if(Nn=function(){return deepClone(ms)},!(vn&&willSyntheticsInjectRum())){if(canUseEventBridge())ms=Ss(ms);else if(!ds(ms))return;if(Es(ms)){var Ts=validateAndBuildRumConfiguration(ms);if(Ts){if(!Ts.trackViewsManually)rs(ms,Ts);else{var Rs=zn;zn=new BoundedBuffer,Kn=function(ys){rs(ms,Ts,ys)},Rs.drain()}kn=!0}}}}function rs(ms,Ts,Rs){var ys=sn(ms,Ts,ln,Sn,wn,Rs);Fn=function(){return ln.getSessionReplayLink(Ts,ys.session,ys.viewContexts)},Kn=ys.startView,qn=ys.addAction,Zn=ys.addError,Dn=ys.addTiming,Yn=ys.addFeatureFlagEvaluation,Pn=ys.getInternalContext,Ln=ys.stopSession,zn.drain(),ln.onRumStart(ys.lifeCycle,Ts,ys.session,ys.viewContexts)}var ss=monitor(function(ms){var Ts=typeof ms=="object"?ms:{name:ms};Kn(Ts)}),as=makePublicApi({init:monitor(Jn),addRumGlobalContext:monitor(Sn.add),setGlobalContextProperty:monitor(Sn.setContextProperty),removeRumGlobalContext:monitor(Sn.remove),removeGlobalContextProperty:monitor(Sn.removeContextProperty),getRumGlobalContext:monitor(Sn.get),getGlobalContext:monitor(Sn.getContext),setRumGlobalContext:monitor(Sn.set),setGlobalContext:monitor(Sn.setContext),clearGlobalContext:monitor(Sn.clearContext),getInternalContext:monitor(function(ms){return Pn(ms)}),getInitConfiguration:monitor(function(){return Nn()}),addAction:monitor(function(ms,Ts){qn({name:sanitize(ms),context:sanitize(Ts),startClocks:clocksNow(),type:"custom"})}),addError:function(ms,Ts){var Rs=createHandlingStack();callMonitored(function(){Zn({error:ms,handlingStack:Rs,context:sanitize(Ts),startClocks:clocksNow()})})},addTiming:monitor(function(ms,Ts){Dn(sanitize(ms),Ts)}),setUser:monitor(function(ms){checkUser(ms)&&wn.setContext(sanitizeUser$1(ms))}),getUser:monitor(wn.getContext),setUserProperty:monitor(function(ms,Ts){var Rs,ys=sanitizeUser$1((Rs={},Rs[ms]=Ts,Rs))[ms];wn.setContextProperty(ms,ys)}),removeUserProperty:monitor(wn.removeContextProperty),removeUser:monitor(wn.clearContext),clearUser:monitor(wn.clearContext),startView:ss,stopSession:monitor(function(){Ln()}),startSessionReplayRecording:monitor(ln.start),stopSessionReplayRecording:monitor(ln.stop),addFeatureFlagEvaluation:monitor(function(ms,Ts){Yn(sanitize(ms),sanitize(Ts))}),getSessionReplayLink:monitor(function(){return Fn()})});return as;function ds(ms){return areCookiesAuthorized(buildCookieOptions(ms))?Qn()?(display.error("Execution is not allowed in the current context."),!1):!0:(display.warn("Cookies are not authorized, we will not send any data."),!1)}function Es(ms){return kn?(ms.silentMultipleInit||display.error("DD_RUM is already initialized."),!1):!0}function Ss(ms){return assign$2({},ms,{applicationId:"00000000-aaaa-0000-aaaa-000000000000",clientToken:"empty",sessionSampleRate:100})}function Qn(){return window.location.protocol==="file:"}}function createDOMMutationObservable(){var sn=getMutationObserverConstructor(),ln=new Observable(function(){if(sn){var cn=new sn(monitor(function(){return ln.notify()}));return cn.observe(document,{attributes:!0,characterData:!0,childList:!0,subtree:!0}),function(){return cn.disconnect()}}});return ln}function getMutationObserverConstructor(){var sn,ln=window;if(ln.Zone&&(sn=getZoneJsOriginalValue(ln,"MutationObserver"),ln.MutationObserver&&sn===ln.MutationObserver)){var cn=new ln.MutationObserver(noop$7),dn=getZoneJsOriginalValue(cn,"originalInstance");sn=dn&&dn.constructor}return sn||(sn=ln.MutationObserver),sn}var FAKE_INITIAL_DOCUMENT="initial_document",RESOURCE_TYPES=[["document",function(sn){return FAKE_INITIAL_DOCUMENT===sn}],["xhr",function(sn){return sn==="xmlhttprequest"}],["fetch",function(sn){return sn==="fetch"}],["beacon",function(sn){return sn==="beacon"}],["css",function(sn,ln){return/\.css$/i.test(ln)}],["js",function(sn,ln){return/\.js$/i.test(ln)}],["image",function(sn,ln){return includes(["image","img","icon"],sn)||/\.(gif|jpg|jpeg|tiff|png|svg|ico)$/i.exec(ln)!==null}],["font",function(sn,ln){return/\.(woff|eot|woff2|ttf)$/i.exec(ln)!==null}],["media",function(sn,ln){return includes(["audio","video"],sn)||/\.(mp3|mp4)$/i.exec(ln)!==null}]];function computeResourceKind(sn){var ln=sn.name;if(!isValidUrl(ln))return addTelemetryDebug('Failed to construct URL for "'.concat(sn.name,'"')),"other";for(var cn=getPathName(ln),dn=0,pn=RESOURCE_TYPES;dn<pn.length;dn++){var vn=pn[dn],kn=vn[0],Sn=vn[1];if(Sn(sn.initiatorType,cn))return kn}return"other"}function areInOrder(){for(var sn=[],ln=0;ln<arguments.length;ln++)sn[ln]=arguments[ln];for(var cn=1;cn<sn.length;cn+=1)if(sn[cn-1]>sn[cn])return!1;return!0}function isRequestKind(sn){return sn.initiatorType==="xmlhttprequest"||sn.initiatorType==="fetch"}function computePerformanceResourceDuration(sn){var ln=sn.duration,cn=sn.startTime,dn=sn.responseEnd;return ln===0&&cn<dn?toServerDuration(elapsed(cn,dn)):toServerDuration(ln)}function computePerformanceResourceDetails(sn){var ln=toValidEntry(sn);if(ln){var cn=ln.startTime,dn=ln.fetchStart,pn=ln.redirectStart,vn=ln.redirectEnd,kn=ln.domainLookupStart,Sn=ln.domainLookupEnd,wn=ln.connectStart,Pn=ln.secureConnectionStart,Nn=ln.connectEnd,Ln=ln.requestStart,Fn=ln.responseStart,zn=ln.responseEnd,Dn={download:formatTiming(cn,Fn,zn),first_byte:formatTiming(cn,Ln,Fn)};return Nn!==dn&&(Dn.connect=formatTiming(cn,wn,Nn),areInOrder(wn,Pn,Nn)&&(Dn.ssl=formatTiming(cn,Pn,Nn))),Sn!==dn&&(Dn.dns=formatTiming(cn,kn,Sn)),hasRedirection(sn)&&(Dn.redirect=formatTiming(cn,pn,vn)),Dn}}function toValidEntry(sn){if(areInOrder(sn.startTime,sn.fetchStart,sn.domainLookupStart,sn.domainLookupEnd,sn.connectStart,sn.connectEnd,sn.requestStart,sn.responseStart,sn.responseEnd)){if(!hasRedirection(sn))return sn;var ln=sn.redirectStart,cn=sn.redirectEnd;if(ln<sn.startTime&&(ln=sn.startTime),cn<sn.startTime&&(cn=sn.fetchStart),!!areInOrder(sn.startTime,ln,cn,sn.fetchStart))return assign$2({},sn,{redirectEnd:cn,redirectStart:ln})}}function hasRedirection(sn){return sn.fetchStart!==sn.startTime}function formatTiming(sn,ln,cn){return{duration:toServerDuration(elapsed(ln,cn)),start:toServerDuration(elapsed(sn,ln))}}function computeSize(sn){if(sn.startTime<sn.responseStart)return sn.decodedBodySize}function isAllowedRequestUrl(sn,ln){return ln&&!sn.isIntakeUrl(ln)}function isTextNode(sn){return sn.nodeType===Node.TEXT_NODE}function isCommentNode(sn){return sn.nodeType===Node.COMMENT_NODE}function isElementNode(sn){return sn.nodeType===Node.ELEMENT_NODE}function isNodeShadowHost(sn){return isElementNode(sn)&&!!sn.shadowRoot}function isNodeShadowRoot(sn){var ln=sn;return!!ln.host&&ln.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&isElementNode(ln.host)}function getChildNodes(sn){return isNodeShadowHost(sn)?sn.shadowRoot.childNodes:sn.childNodes}function getParentNode(sn){return isNodeShadowRoot(sn)?sn.host:sn.parentNode}var INITIAL_DOCUMENT_OUTDATED_TRACE_ID_THRESHOLD=2*ONE_MINUTE;function getDocumentTraceId(sn){var ln=getDocumentTraceDataFromMeta(sn)||getDocumentTraceDataFromComment(sn);if(!(!ln||ln.traceTime<=dateNow()-INITIAL_DOCUMENT_OUTDATED_TRACE_ID_THRESHOLD))return ln.traceId}function getDocumentTraceDataFromMeta(sn){var ln=sn.querySelector("meta[name=dd-trace-id]"),cn=sn.querySelector("meta[name=dd-trace-time]");return createDocumentTraceData(ln&&ln.content,cn&&cn.content)}function getDocumentTraceDataFromComment(sn){var ln=findTraceComment(sn);if(ln)return createDocumentTraceData(findCommaSeparatedValue(ln,"trace-id"),findCommaSeparatedValue(ln,"trace-time"))}function createDocumentTraceData(sn,ln){var cn=ln&&Number(ln);if(!(!sn||!cn))return{traceId:sn,traceTime:cn}}function findTraceComment(sn){for(var ln=0;ln<sn.childNodes.length;ln+=1){var cn=getTraceCommentFromNode(sn.childNodes[ln]);if(cn)return cn}if(sn.body)for(var ln=sn.body.childNodes.length-1;ln>=0;ln-=1){var dn=sn.body.childNodes[ln],cn=getTraceCommentFromNode(dn);if(cn)return cn;if(!isTextNode(dn))break}}function getTraceCommentFromNode(sn){if(sn&&isCommentNode(sn)){var ln=/^\s*DATADOG;(.*?)\s*$/.exec(sn.data);if(ln)return ln[1]}}function supportPerformanceObject(){return window.performance!==void 0&&"getEntries"in performance}function supportPerformanceTimingEvent(sn){return window.PerformanceObserver&&PerformanceObserver.supportedEntryTypes!==void 0&&PerformanceObserver.supportedEntryTypes.includes(sn)}function startPerformanceCollection(sn,ln){if(retrieveInitialDocumentResourceTiming(function(Sn){handleRumPerformanceEntries(sn,ln,[Sn])}),supportPerformanceObject()){var cn=performance.getEntries();setTimeout$1(function(){return handleRumPerformanceEntries(sn,ln,cn)})}if(window.PerformanceObserver){var dn=monitor(function(Sn){return handleRumPerformanceEntries(sn,ln,Sn.getEntries())}),pn=["resource","navigation","longtask","paint"],vn=["largest-contentful-paint","first-input","layout-shift"];try{vn.forEach(function(Sn){var wn=new PerformanceObserver(dn);wn.observe({type:Sn,buffered:!0})})}catch{pn.push.apply(pn,vn)}var kn=new PerformanceObserver(dn);kn.observe({entryTypes:pn}),supportPerformanceObject()&&"addEventListener"in performance&&addEventListener(performance,"resourcetimingbufferfull",function(){performance.clearResourceTimings()})}supportPerformanceTimingEvent("navigation")||retrieveNavigationTiming(function(Sn){handleRumPerformanceEntries(sn,ln,[Sn])}),supportPerformanceTimingEvent("first-input")||retrieveFirstInputTiming(function(Sn){handleRumPerformanceEntries(sn,ln,[Sn])})}function retrieveInitialDocumentResourceTiming(sn){runOnReadyState("interactive",function(){var ln,cn={entryType:"resource",initiatorType:FAKE_INITIAL_DOCUMENT,traceId:getDocumentTraceId(document)};if(supportPerformanceTimingEvent("navigation")&&performance.getEntriesByType("navigation").length>0){var dn=performance.getEntriesByType("navigation")[0];ln=assign$2(dn.toJSON(),cn)}else{var pn=computeRelativePerformanceTiming();ln=assign$2(pn,{decodedBodySize:0,duration:pn.responseEnd,name:window.location.href,startTime:0},cn)}sn(ln)})}function retrieveNavigationTiming(sn){function ln(){sn(assign$2(computeRelativePerformanceTiming(),{entryType:"navigation"}))}runOnReadyState("complete",function(){setTimeout$1(ln)})}function retrieveFirstInputTiming(sn){var ln=dateNow(),cn=!1,dn=addEventListeners(window,["click","mousedown","keydown","touchstart","pointerdown"],function(kn){if(kn.cancelable){var Sn={entryType:"first-input",processingStart:relativeNow(),startTime:kn.timeStamp};kn.type==="pointerdown"?pn(Sn):vn(Sn)}},{passive:!0,capture:!0}).stop;function pn(kn){addEventListeners(window,["pointerup","pointercancel"],function(Sn){Sn.type==="pointerup"&&vn(kn)},{once:!0})}function vn(kn){if(!cn){cn=!0,dn();var Sn=kn.processingStart-kn.startTime;Sn>=0&&Sn<dateNow()-ln&&sn(kn)}}}function computeRelativePerformanceTiming(){var sn={},ln=performance.timing;for(var cn in ln)if(isNumber(ln[cn])){var dn=cn,pn=ln[dn];sn[dn]=pn===0?0:getRelativeTime(pn)}return sn}function handleRumPerformanceEntries(sn,ln,cn){var dn=cn.filter(function(vn){return vn.entryType==="resource"||vn.entryType==="navigation"||vn.entryType==="paint"||vn.entryType==="longtask"||vn.entryType==="largest-contentful-paint"||vn.entryType==="first-input"||vn.entryType==="layout-shift"}),pn=dn.filter(function(vn){return!isIncompleteNavigation(vn)&&!isForbiddenResource(ln,vn)});pn.length&&sn.notify(0,pn)}function isIncompleteNavigation(sn){return sn.entryType==="navigation"&&sn.loadEventEnd<=0}function isForbiddenResource(sn,ln){return ln.entryType==="resource"&&!isAllowedRequestUrl(sn,ln.name)}function getSyntheticsContext(){var sn=getSyntheticsTestId(),ln=getSyntheticsResultId();if(sn&&ln)return{test_id:sn,result_id:ln,injected:willSyntheticsInjectRum()}}function getCiTestContext(){var sn,ln=(sn=window.Cypress)===null||sn===void 0?void 0:sn.env("traceId");if(typeof ln=="string")return{test_execution_id:ln}}var viewportObservable;function initViewportObservable(){return viewportObservable||(viewportObservable=createViewportObservable()),viewportObservable}function createViewportObservable(){var sn=new Observable(function(){var ln=throttle$1(function(){sn.notify(getViewportDimension())},200).throttled;return addEventListener(window,"resize",ln,{capture:!0,passive:!0}).stop});return sn}function getViewportDimension(){var sn=window.visualViewport;return sn?{width:Number(sn.width*sn.scale),height:Number(sn.height*sn.scale)}:{width:Number(window.innerWidth||0),height:Number(window.innerHeight||0)}}var viewport;function getDisplayContext(){return viewport||(viewport=getViewportDimension(),initViewportObservable().subscribe(function(sn){viewport=sn}).unsubscribe),{viewport}}function limitModification(sn,ln,cn){var dn=deepClone(sn),pn=cn(dn);return objectEntries(ln).forEach(function(vn){var kn=vn[0],Sn=vn[1],wn=get$2(dn,kn),Pn=getType(wn);Pn===Sn?set$2(sn,kn,sanitize(wn)):Sn==="object"&&(Pn==="undefined"||Pn==="null")&&set$2(sn,kn,{})}),pn}function get$2(sn,ln){for(var cn=sn,dn=0,pn=ln.split(".");dn<pn.length;dn++){var vn=pn[dn];if(!isValidObjectContaining(cn,vn))return;cn=cn[vn]}return cn}function set$2(sn,ln,cn){for(var dn=sn,pn=ln.split("."),vn=0;vn<pn.length;vn+=1){var kn=pn[vn];if(!isValidObject(dn))return;vn!==pn.length-1?dn=dn[kn]:dn[kn]=cn}}function isValidObject(sn){return getType(sn)==="object"}function isValidObjectContaining(sn,ln){return isValidObject(sn)&&Object.prototype.hasOwnProperty.call(sn,ln)}var VIEW_MODIFIABLE_FIELD_PATHS={"view.url":"string","view.referrer":"string"},USER_CUSTOMIZABLE_FIELD_PATHS={context:"object"},modifiableFieldPathsByEvent;function startRumAssembly(sn,ln,cn,dn,pn,vn,kn,Sn){var wn,Pn;modifiableFieldPathsByEvent=(wn={},wn.view=VIEW_MODIFIABLE_FIELD_PATHS,wn.error=assign$2({"error.message":"string","error.stack":"string","error.resource.url":"string","error.fingerprint":"string"},USER_CUSTOMIZABLE_FIELD_PATHS,VIEW_MODIFIABLE_FIELD_PATHS),wn.resource=assign$2({"resource.url":"string"},USER_CUSTOMIZABLE_FIELD_PATHS,VIEW_MODIFIABLE_FIELD_PATHS),wn.action=assign$2({"action.target.name":"string"},USER_CUSTOMIZABLE_FIELD_PATHS,VIEW_MODIFIABLE_FIELD_PATHS),wn.long_task=assign$2({},USER_CUSTOMIZABLE_FIELD_PATHS,VIEW_MODIFIABLE_FIELD_PATHS),wn);var Nn=(Pn={},Pn.error=createEventRateLimiter("error",sn.eventRateLimiterThreshold,Sn),Pn.action=createEventRateLimiter("action",sn.eventRateLimiterThreshold,Sn),Pn),Ln=getSyntheticsContext(),Fn=getCiTestContext();ln.subscribe(10,function(zn){var Dn=zn.startTime,Kn=zn.rawRumEvent,qn=zn.domainContext,Zn=zn.savedCommonContext,Yn=zn.customerContext,Jn=dn.findView(Dn),rs=pn.findUrl(Dn),ss=cn.findTrackedSession(Dn);if(ss&&Jn&&rs){var as=Zn||kn(),ds=vn.findActionId(Dn),Es={_dd:{format_version:2,drift:currentDrift(),session:{plan:ss.plan},browser_sdk_version:canUseEventBridge()?"4.42.2":void 0},application:{id:sn.applicationId},date:timeStampNow(),service:Jn.service||sn.service,version:Jn.version||sn.version,source:"browser",session:{id:ss.id,type:Ln?"synthetics":Fn?"ci_test":"user"},view:{id:Jn.id,name:Jn.name,url:rs.url,referrer:rs.referrer},action:needToAssembleWithAction(Kn)&&ds?{id:ds}:void 0,synthetics:Ln,ci_test:Fn,display:getDisplayContext()},Ss=combine$1(Es,Kn);Ss.context=combine$1(as.context,Yn),"has_replay"in Ss.session||(Ss.session.has_replay=as.hasReplay),isEmptyObject(as.user)||(Ss.usr=as.user),shouldSend(Ss,sn.beforeSend,qn,Nn)&&(isEmptyObject(Ss.context)&&delete Ss.context,ln.notify(11,Ss))}})}function shouldSend(sn,ln,cn,dn){var pn;if(ln){var vn=limitModification(sn,modifiableFieldPathsByEvent[sn.type],function(Sn){return ln(Sn,cn)});if(vn===!1&&sn.type!=="view")return!1;vn===!1&&display.warn("Can't dismiss view events using beforeSend!")}var kn=(pn=dn[sn.type])===null||pn===void 0?void 0:pn.isLimitReached();return!kn}function needToAssembleWithAction(sn){return["error","resource","long_task"].indexOf(sn.type)!==-1}var MAX_NUMBER_OF_SELECTABLE_FOREGROUND_PERIODS=500,MAX_NUMBER_OF_STORED_FOREGROUND_PERIODS=2500,foregroundPeriods=[];function startForegroundContexts(){document.hasFocus()&&addNewForegroundPeriod();var sn=trackFocus(addNewForegroundPeriod).stop,ln=trackBlur(closeForegroundPeriod).stop;return{isInForegroundAt,selectInForegroundPeriodsFor,stop:function(){foregroundPeriods=[],sn(),ln()}}}function addNewForegroundPeriod(){if(!(foregroundPeriods.length>MAX_NUMBER_OF_STORED_FOREGROUND_PERIODS)){var sn=foregroundPeriods[foregroundPeriods.length-1],ln=relativeNow();sn!==void 0&&sn.end===void 0||foregroundPeriods.push({start:ln})}}function closeForegroundPeriod(){if(foregroundPeriods.length!==0){var sn=foregroundPeriods[foregroundPeriods.length-1],ln=relativeNow();sn.end===void 0&&(sn.end=ln)}}function trackFocus(sn){return addEventListener(window,"focus",function(ln){ln.isTrusted&&sn()})}function trackBlur(sn){return addEventListener(window,"blur",function(ln){ln.isTrusted&&sn()})}function isInForegroundAt(sn){for(var ln=foregroundPeriods.length-1;ln>=0;ln--){var cn=foregroundPeriods[ln];if(cn.end!==void 0&&sn>cn.end)break;if(sn>cn.start&&(cn.end===void 0||sn<cn.end))return!0}return!1}function selectInForegroundPeriodsFor(sn,ln){for(var cn=addDuration(sn,ln),dn=[],pn=Math.max(0,foregroundPeriods.length-MAX_NUMBER_OF_SELECTABLE_FOREGROUND_PERIODS),vn=foregroundPeriods.length-1;vn>=pn;vn--){var kn=foregroundPeriods[vn];if(kn.end!==void 0&&sn>kn.end)break;if(!(cn<kn.start)){var Sn=sn>kn.start?sn:kn.start,wn=elapsed(sn,Sn),Pn=kn.end===void 0||cn<kn.end?cn:kn.end,Nn=elapsed(Sn,Pn);dn.unshift({start:toServerDuration(wn),duration:toServerDuration(Nn)})}}return dn}function startInternalContext$1(sn,ln,cn,dn,pn){return{get:function(vn){var kn=cn.findView(vn),Sn=pn.findUrl(vn),wn=ln.findTrackedSession(vn);if(wn&&kn&&Sn){var Pn=dn.findActionId(vn);return{application_id:sn,session_id:wn.id,user_action:Pn?{id:Pn}:void 0,view:{id:kn.id,name:kn.name,referrer:Sn.referrer,url:Sn.url}}}}}}var LifeCycle$1=AbstractLifeCycle,VIEW_CONTEXT_TIME_OUT_DELAY=SESSION_TIME_OUT_DELAY;function startViewContexts(sn){var ln=new ValueHistory(VIEW_CONTEXT_TIME_OUT_DELAY);sn.subscribe(2,function(dn){ln.add(cn(dn),dn.startClocks.relative)}),sn.subscribe(4,function(dn){var pn=dn.endClocks;ln.closeActive(pn.relative)}),sn.subscribe(8,function(){ln.reset()});function cn(dn){return{service:dn.service,version:dn.version,id:dn.id,name:dn.name,startClocks:dn.startClocks}}return{findView:function(dn){return ln.find(dn)},stop:function(){ln.stop()}}}var nextRequestIndex=1;function startRequestCollection(sn,ln,cn){var dn=startTracer(ln,cn);trackXhr(sn,ln,dn),trackFetch(sn,ln,dn)}function trackXhr(sn,ln,cn){var dn=initXhrObservable().subscribe(function(pn){var vn=pn;if(isAllowedRequestUrl(ln,vn.url))switch(vn.state){case"start":cn.traceXhr(vn,vn.xhr),vn.requestIndex=getNextRequestIndex(),sn.notify(5,{requestIndex:vn.requestIndex,url:vn.url});break;case"complete":cn.clearTracingIfNeeded(vn),sn.notify(6,{duration:vn.duration,method:vn.method,requestIndex:vn.requestIndex,spanId:vn.spanId,startClocks:vn.startClocks,status:vn.status,traceId:vn.traceId,traceSampled:vn.traceSampled,type:"xhr",url:vn.url,xhr:vn.xhr});break}});return{stop:function(){return dn.unsubscribe()}}}function trackFetch(sn,ln,cn){var dn=initFetchObservable().subscribe(function(pn){var vn=pn;if(isAllowedRequestUrl(ln,vn.url))switch(vn.state){case"start":cn.traceFetch(vn),vn.requestIndex=getNextRequestIndex(),sn.notify(5,{requestIndex:vn.requestIndex,url:vn.url});break;case"resolve":waitForResponseToComplete(vn,function(kn){cn.clearTracingIfNeeded(vn),sn.notify(6,{duration:kn,method:vn.method,requestIndex:vn.requestIndex,responseType:vn.responseType,spanId:vn.spanId,startClocks:vn.startClocks,status:vn.status,traceId:vn.traceId,traceSampled:vn.traceSampled,type:"fetch",url:vn.url,response:vn.response,init:vn.init,input:vn.input})});break}});return{stop:function(){return dn.unsubscribe()}}}function getNextRequestIndex(){var sn=nextRequestIndex;return nextRequestIndex+=1,sn}function waitForResponseToComplete(sn,ln){var cn=sn.response&&tryToClone(sn.response);!cn||!cn.body?ln(elapsed(sn.startClocks.timeStamp,timeStampNow())):readBytesFromStream(cn.body,function(){ln(elapsed(sn.startClocks.timeStamp,timeStampNow()))},{bytesLimit:Number.POSITIVE_INFINITY,collectStreamBody:!1})}function trackEventCounts(sn){var ln=sn.lifeCycle,cn=sn.isChildEvent,dn=sn.onChange,pn=dn===void 0?noop$7:dn,vn={errorCount:0,longTaskCount:0,resourceCount:0,actionCount:0,frustrationCount:0},kn=ln.subscribe(11,function(Sn){if(!(Sn.type==="view"||!cn(Sn)))switch(Sn.type){case"error":vn.errorCount+=1,pn();break;case"action":vn.actionCount+=1,Sn.action.frustration&&(vn.frustrationCount+=Sn.action.frustration.type.length),pn();break;case"long_task":vn.longTaskCount+=1,pn();break;case"resource":vn.resourceCount+=1,pn();break}});return{stop:function(){kn.unsubscribe()},eventCounts:vn}}var PAGE_ACTIVITY_VALIDATION_DELAY=100,PAGE_ACTIVITY_END_DELAY=100;function waitPageActivityEnd(sn,ln,cn,dn,pn){var vn=createPageActivityObservable(sn,ln,cn);return doWaitPageActivityEnd(vn,dn,pn)}function doWaitPageActivityEnd(sn,ln,cn){var dn,pn=!1,vn=setTimeout$1(monitor(function(){return Pn({hadActivity:!1})}),PAGE_ACTIVITY_VALIDATION_DELAY),kn=cn!==void 0?setTimeout$1(monitor(function(){return Pn({hadActivity:!0,end:timeStampNow()})}),cn):void 0,Sn=sn.subscribe(function(Nn){var Ln=Nn.isBusy;clearTimeout$1(vn),clearTimeout$1(dn);var Fn=timeStampNow();Ln||(dn=setTimeout$1(monitor(function(){return Pn({hadActivity:!0,end:Fn})}),PAGE_ACTIVITY_END_DELAY))}),wn=function(){pn=!0,clearTimeout$1(vn),clearTimeout$1(dn),clearTimeout$1(kn),Sn.unsubscribe()};function Pn(Nn){pn||(wn(),ln(Nn))}return{stop:wn}}function createPageActivityObservable(sn,ln,cn){var dn=new Observable(function(){var pn=[],vn,kn=0;pn.push(ln.subscribe(wn),sn.subscribe(0,function(Pn){Pn.some(function(Nn){return Nn.entryType==="resource"&&!isExcludedUrl(cn,Nn.name)})&&wn()}),sn.subscribe(5,function(Pn){isExcludedUrl(cn,Pn.url)||(vn===void 0&&(vn=Pn.requestIndex),kn+=1,wn())}),sn.subscribe(6,function(Pn){isExcludedUrl(cn,Pn.url)||vn===void 0||Pn.requestIndex<vn||(kn-=1,wn())}));var Sn=trackWindowOpen(wn).stop;return function(){Sn(),pn.forEach(function(Pn){return Pn.unsubscribe()})};function wn(){dn.notify({isBusy:kn>0})}});return dn}function isExcludedUrl(sn,ln){return matchList(sn.excludedActivityUrls,ln)}function trackWindowOpen(sn){return instrumentMethodAndCallOriginal(window,"open",{before:sn})}var MAX_DURATION_BETWEEN_CLICKS=ONE_SECOND,MAX_DISTANCE_BETWEEN_CLICKS=100;function createClickChain(sn,ln){var cn=[],dn=0,pn;vn(sn);function vn(wn){wn.stopObservable.subscribe(kn),cn.push(wn),clearTimeout$1(pn),pn=setTimeout$1(Sn,MAX_DURATION_BETWEEN_CLICKS)}function kn(){dn===1&&cn.every(function(wn){return wn.isStopped()})&&(dn=2,ln(cn))}function Sn(){clearTimeout$1(pn),dn===0&&(dn=1,kn())}return{tryAppend:function(wn){return dn!==0?!1:cn.length>0&&!areEventsSimilar(cn[cn.length-1].event,wn.event)?(Sn(),!1):(vn(wn),!0)},stop:function(){Sn()}}}function areEventsSimilar(sn,ln){return sn.target===ln.target&&mouseEventDistance(sn,ln)<=MAX_DISTANCE_BETWEEN_CLICKS&&sn.timeStamp-ln.timeStamp<=MAX_DURATION_BETWEEN_CLICKS}function mouseEventDistance(sn,ln){return Math.sqrt(Math.pow(sn.clientX-ln.clientX,2)+Math.pow(sn.clientY-ln.clientY,2))}var DEFAULT_PROGRAMMATIC_ACTION_NAME_ATTRIBUTE="data-dd-action-name";function getActionNameFromElement(sn,ln){return getActionNameFromElementProgrammatically(sn,DEFAULT_PROGRAMMATIC_ACTION_NAME_ATTRIBUTE)||ln&&getActionNameFromElementProgrammatically(sn,ln)||getActionNameFromElementForStrategies(sn,ln,priorityStrategies)||getActionNameFromElementForStrategies(sn,ln,fallbackStrategies)||""}function getActionNameFromElementProgrammatically(sn,ln){var cn;if(supportsElementClosest())cn=sn.closest("[".concat(ln,"]"));else for(var dn=sn;dn;){if(dn.hasAttribute(ln)){cn=dn;break}dn=dn.parentElement}if(cn){var pn=cn.getAttribute(ln);return truncate$1(normalizeWhitespace(pn.trim()))}}var priorityStrategies=[function(sn,ln){if(supportsLabelProperty()){if("labels"in sn&&sn.labels&&sn.labels.length>0)return getTextualContent(sn.labels[0],ln)}else if(sn.id){var cn=sn.ownerDocument&&find$2(sn.ownerDocument.querySelectorAll("label"),function(dn){return dn.htmlFor===sn.id});return cn&&getTextualContent(cn,ln)}},function(sn){if(sn.nodeName==="INPUT"){var ln=sn,cn=ln.getAttribute("type");if(cn==="button"||cn==="submit"||cn==="reset")return ln.value}},function(sn,ln){if(sn.nodeName==="BUTTON"||sn.nodeName==="LABEL"||sn.getAttribute("role")==="button")return getTextualContent(sn,ln)},function(sn){return sn.getAttribute("aria-label")},function(sn,ln){var cn=sn.getAttribute("aria-labelledby");if(cn)return cn.split(/\s+/).map(function(dn){return getElementById(sn,dn)}).filter(function(dn){return!!dn}).map(function(dn){return getTextualContent(dn,ln)}).join(" ")},function(sn){return sn.getAttribute("alt")},function(sn){return sn.getAttribute("name")},function(sn){return sn.getAttribute("title")},function(sn){return sn.getAttribute("placeholder")},function(sn,ln){if("options"in sn&&sn.options.length>0)return getTextualContent(sn.options[0],ln)}],fallbackStrategies=[function(sn,ln){return getTextualContent(sn,ln)}],MAX_PARENTS_TO_CONSIDER=10;function getActionNameFromElementForStrategies(sn,ln,cn){for(var dn=sn,pn=0;pn<=MAX_PARENTS_TO_CONSIDER&&dn&&dn.nodeName!=="BODY"&&dn.nodeName!=="HTML"&&dn.nodeName!=="HEAD";){for(var vn=0,kn=cn;vn<kn.length;vn++){var Sn=kn[vn],wn=Sn(dn,ln);if(typeof wn=="string"){var Pn=wn.trim();if(Pn)return truncate$1(normalizeWhitespace(Pn))}}if(dn.nodeName==="FORM")break;dn=dn.parentElement,pn+=1}}function normalizeWhitespace(sn){return sn.replace(/\s+/g," ")}function truncate$1(sn){return sn.length>100?"".concat(safeTruncate(sn,100)," [...]"):sn}function getElementById(sn,ln){return sn.ownerDocument?sn.ownerDocument.getElementById(ln):null}function getTextualContent(sn,ln){if(!sn.isContentEditable){if("innerText"in sn){var cn=sn.innerText,dn=function(pn){for(var vn=sn.querySelectorAll(pn),kn=0;kn<vn.length;kn+=1){var Sn=vn[kn];if("innerText"in Sn){var wn=Sn.innerText;wn&&wn.trim().length>0&&(cn=cn.replace(wn,""))}}};return supportsInnerTextScriptAndStyleRemoval()||dn("script, style"),dn("[".concat(DEFAULT_PROGRAMMATIC_ACTION_NAME_ATTRIBUTE,"]")),ln&&dn("[".concat(ln,"]")),cn}return sn.textContent}}function supportsInnerTextScriptAndStyleRemoval(){return!isIE$1()}var supportsLabelPropertyResult;function supportsLabelProperty(){return supportsLabelPropertyResult===void 0&&(supportsLabelPropertyResult="labels"in HTMLInputElement.prototype),supportsLabelPropertyResult}var supportsElementClosestResult;function supportsElementClosest(){return supportsElementClosestResult===void 0&&(supportsElementClosestResult="closest"in HTMLElement.prototype),supportsElementClosestResult}var STABLE_ATTRIBUTES=[DEFAULT_PROGRAMMATIC_ACTION_NAME_ATTRIBUTE,"data-testid","data-test","data-qa","data-cy","data-test-id","data-qa-id","data-testing","data-component","data-element","data-source-file"],GLOBALLY_UNIQUE_SELECTOR_GETTERS=[getStableAttributeSelector,getIDSelector],UNIQUE_AMONG_CHILDREN_SELECTOR_GETTERS=[getStableAttributeSelector,getClassSelector,getTagNameSelector];function getSelectorFromElement(sn,ln){for(var cn="",dn=sn;dn&&dn.nodeName!=="HTML";){var pn=findSelector(dn,GLOBALLY_UNIQUE_SELECTOR_GETTERS,isSelectorUniqueGlobally,ln,cn);if(pn)return pn;var vn=findSelector(dn,UNIQUE_AMONG_CHILDREN_SELECTOR_GETTERS,isSelectorUniqueAmongSiblings,ln,cn);cn=vn||combineSelector(getPositionSelector(dn),cn),dn=dn.parentElement}return cn}function isGeneratedValue(sn){return/[0-9]/.test(sn)}function getIDSelector(sn){if(sn.id&&!isGeneratedValue(sn.id))return"#".concat(cssEscape(sn.id))}function getClassSelector(sn){if(sn.tagName!=="BODY"&&sn.classList.length>0)for(var ln=0;ln<sn.classList.length;ln+=1){var cn=sn.classList[ln];if(!isGeneratedValue(cn))return"".concat(sn.tagName,".").concat(cssEscape(cn))}}function getTagNameSelector(sn){return sn.tagName}function getStableAttributeSelector(sn,ln){if(ln){var cn=kn(ln);if(cn)return cn}for(var dn=0,pn=STABLE_ATTRIBUTES;dn<pn.length;dn++){var vn=pn[dn],cn=kn(vn);if(cn)return cn}function kn(Sn){if(sn.hasAttribute(Sn))return"".concat(sn.tagName,"[").concat(Sn,'="').concat(cssEscape(sn.getAttribute(Sn)),'"]')}}function getPositionSelector(sn){for(var ln=sn.parentElement.firstElementChild,cn=1;ln&&ln!==sn;)ln.tagName===sn.tagName&&(cn+=1),ln=ln.nextElementSibling;return"".concat(sn.tagName,":nth-of-type(").concat(cn,")")}function findSelector(sn,ln,cn,dn,pn){for(var vn=0,kn=ln;vn<kn.length;vn++){var Sn=kn[vn],wn=Sn(sn,dn);if(wn){var Pn=combineSelector(wn,pn);if(cn(sn,Pn))return Pn}}}function isSelectorUniqueGlobally(sn,ln){return sn.ownerDocument.querySelectorAll(ln).length===1}function isSelectorUniqueAmongSiblings(sn,ln){return sn.parentElement.querySelectorAll(supportScopeSelector()?combineSelector(":scope",ln):ln).length===1}function combineSelector(sn,ln){return ln?"".concat(sn,">").concat(ln):sn}var supportScopeSelectorCache;function supportScopeSelector(){if(supportScopeSelectorCache===void 0)try{document.querySelector(":scope"),supportScopeSelectorCache=!0}catch{supportScopeSelectorCache=!1}return supportScopeSelectorCache}function listenActionEvents(sn){var ln=sn.onPointerDown,cn=sn.onPointerUp,dn,pn={selection:!1,input:!1},vn,kn=[addEventListener(window,"pointerdown",function(Sn){isValidPointerEvent(Sn)&&(dn=isSelectionEmpty(),pn={selection:!1,input:!1},vn=ln(Sn))},{capture:!0}),addEventListener(window,"selectionchange",function(){(!dn||!isSelectionEmpty())&&(pn.selection=!0)},{capture:!0}),addEventListener(window,"pointerup",function(Sn){if(isValidPointerEvent(Sn)&&vn){var wn=pn;cn(vn,Sn,function(){return wn}),vn=void 0}},{capture:!0}),addEventListener(window,"input",function(){pn.input=!0},{capture:!0})];return{stop:function(){kn.forEach(function(Sn){return Sn.stop()})}}}function isSelectionEmpty(){var sn=window.getSelection();return!sn||sn.isCollapsed}function isValidPointerEvent(sn){return sn.target instanceof Element&&sn.isPrimary!==!1}var MIN_CLICKS_PER_SECOND_TO_CONSIDER_RAGE=3;function computeFrustration(sn,ln){if(isRage(sn))return ln.addFrustration("rage_click"),sn.some(isDead)&&ln.addFrustration("dead_click"),ln.hasError&&ln.addFrustration("error_click"),{isRage:!0};var cn=sn.some(function(dn){return dn.getUserActivity().selection});return sn.forEach(function(dn){dn.hasError&&dn.addFrustration("error_click"),isDead(dn)&&!cn&&dn.addFrustration("dead_click")}),{isRage:!1}}function isRage(sn){if(sn.some(function(cn){return cn.getUserActivity().selection}))return!1;for(var ln=0;ln<sn.length-(MIN_CLICKS_PER_SECOND_TO_CONSIDER_RAGE-1);ln+=1)if(sn[ln+MIN_CLICKS_PER_SECOND_TO_CONSIDER_RAGE-1].event.timeStamp-sn[ln].event.timeStamp<=ONE_SECOND)return!0;return!1}var DEAD_CLICK_EXCLUDE_SELECTOR='input:not([type="checkbox"]):not([type="radio"]):not([type="button"]):not([type="submit"]):not([type="reset"]):not([type="range"]),textarea,select,[contenteditable],[contenteditable] *,canvas,a[href],a[href] *';function isDead(sn){return sn.hasPageActivity||sn.getUserActivity().input?!1:!elementMatches(sn.event.target,DEAD_CLICK_EXCLUDE_SELECTOR)}var CLICK_ACTION_MAX_DURATION=10*ONE_SECOND,ACTION_CONTEXT_TIME_OUT_DELAY=5*ONE_MINUTE;function trackClickActions(sn,ln,cn){var dn=new ValueHistory(ACTION_CONTEXT_TIME_OUT_DELAY),pn=new Observable,vn;sn.subscribe(8,function(){dn.reset()}),sn.subscribe(4,Pn);var kn=listenActionEvents({onPointerDown:function(Nn){return processPointerDown(cn,sn,ln,dn,Nn)},onPointerUp:function(Nn,Ln,Fn){var zn=Nn.clickActionBase,Dn=Nn.hadActivityOnPointerDown;return startClickAction(cn,sn,ln,dn,pn,wn,zn,Ln,Fn,Dn)}}).stop,Sn={findActionId:function(Nn){return cn.trackFrustrations?dn.findAll(Nn):dn.find(Nn)}};return{stop:function(){Pn(),pn.notify(),kn()},actionContexts:Sn};function wn(Nn){if(!vn||!vn.tryAppend(Nn)){var Ln=Nn.clone();vn=createClickChain(Nn,function(Fn){finalizeClicks(Fn,Ln)})}}function Pn(){vn&&vn.stop()}}function processPointerDown(sn,ln,cn,dn,pn){if(!(!sn.trackFrustrations&&dn.find())){var vn=computeClickActionBase(pn,sn.actionNameAttribute);if(!(!sn.trackFrustrations&&!vn.name)){var kn=!1;return waitPageActivityEnd(ln,cn,sn,function(Sn){kn=Sn.hadActivity},PAGE_ACTIVITY_VALIDATION_DELAY),{clickActionBase:vn,hadActivityOnPointerDown:function(){return kn}}}}}function startClickAction(sn,ln,cn,dn,pn,vn,kn,Sn,wn,Pn){var Nn=newClick(ln,dn,wn,kn,Sn);sn.trackFrustrations&&vn(Nn);var Ln=waitPageActivityEnd(ln,cn,sn,function(Dn){Dn.hadActivity&&Dn.end<Nn.startClocks.timeStamp?Nn.discard():(Dn.hadActivity?Nn.stop(Dn.end):Pn()?Nn.stop(Nn.startClocks.timeStamp):Nn.stop(),sn.trackFrustrations||(Dn.hadActivity?Nn.validate():Nn.discard()))},CLICK_ACTION_MAX_DURATION).stop,Fn=ln.subscribe(4,function(Dn){var Kn=Dn.endClocks;Nn.stop(Kn.timeStamp)}),zn=pn.subscribe(function(){Nn.stop()});Nn.stopObservable.subscribe(function(){Fn.unsubscribe(),Ln(),zn.unsubscribe()})}function computeClickActionBase(sn,ln){var cn=sn.target.getBoundingClientRect();return{type:"click",target:{width:Math.round(cn.width),height:Math.round(cn.height),selector:getSelectorFromElement(sn.target,ln)},position:{x:Math.round(sn.clientX-cn.left),y:Math.round(sn.clientY-cn.top)},name:getActionNameFromElement(sn.target,ln)}}function newClick(sn,ln,cn,dn,pn){var vn=generateUUID(),kn=clocksNow(),Sn=ln.add(vn,kn.relative),wn=trackEventCounts({lifeCycle:sn,isChildEvent:function(Dn){return Dn.action!==void 0&&(Array.isArray(Dn.action.id)?includes(Dn.action.id,vn):Dn.action.id===vn)}}),Pn=0,Nn,Ln=[],Fn=new Observable;function zn(Dn){Pn===0&&(Nn=Dn,Pn=1,Nn?Sn.close(getRelativeTime(Nn)):Sn.remove(),wn.stop(),Fn.notify())}return{event:pn,stop:zn,stopObservable:Fn,get hasError(){return wn.eventCounts.errorCount>0},get hasPageActivity(){return Nn!==void 0},getUserActivity:cn,addFrustration:function(Dn){Ln.push(Dn)},startClocks:kn,isStopped:function(){return Pn===1||Pn===2},clone:function(){return newClick(sn,ln,cn,dn,pn)},validate:function(Dn){if(zn(),Pn===1){var Kn=wn.eventCounts,qn=Kn.resourceCount,Zn=Kn.errorCount,Yn=Kn.longTaskCount,Jn=assign$2({type:"click",duration:Nn&&elapsed(kn.timeStamp,Nn),startClocks:kn,id:vn,frustrationTypes:Ln,counts:{resourceCount:qn,errorCount:Zn,longTaskCount:Yn},events:Dn??[pn],event:pn},dn);sn.notify(1,Jn),Pn=2}},discard:function(){zn(),Pn=2}}}function finalizeClicks(sn,ln){var cn=computeFrustration(sn,ln).isRage;cn?(sn.forEach(function(dn){return dn.discard()}),ln.stop(timeStampNow()),ln.validate(sn.map(function(dn){return dn.event}))):(ln.discard(),sn.forEach(function(dn){return dn.validate()}))}function startActionCollection(sn,ln,cn,dn){sn.subscribe(1,function(vn){return sn.notify(10,processAction(vn,dn))});var pn={findActionId:noop$7};return cn.trackUserInteractions&&(pn=trackClickActions(sn,ln,cn).actionContexts),{addAction:function(vn,kn){sn.notify(10,assign$2({savedCommonContext:kn},processAction(vn,dn)))},actionContexts:pn}}function processAction(sn,ln){var cn=isAutoAction(sn)?{action:{id:sn.id,loading_time:toServerDuration(sn.duration),frustration:{type:sn.frustrationTypes},error:{count:sn.counts.errorCount},long_task:{count:sn.counts.longTaskCount},resource:{count:sn.counts.resourceCount}},_dd:{action:{target:sn.target,position:sn.position}}}:void 0,dn=isAutoAction(sn)?void 0:sn.context,pn=combine$1({action:{id:generateUUID(),target:{name:sn.name},type:sn.type},date:sn.startClocks.timeStamp,type:"action"},cn),vn=ln.isInForegroundAt(sn.startClocks.relative);return vn!==void 0&&(pn.view={in_foreground:vn}),{customerContext:dn,rawRumEvent:pn,startTime:sn.startClocks.relative,domainContext:isAutoAction(sn)?{event:sn.event,events:sn.events}:{}}}function isAutoAction(sn){return sn.type!=="custom"}function trackConsoleError(sn){var ln=initConsoleObservable([ConsoleApiName.error]).subscribe(function(cn){return sn.notify({startClocks:clocksNow(),message:cn.message,stack:cn.stack,fingerprint:cn.fingerprint,source:ErrorSource.CONSOLE,handling:"handled",handlingStack:cn.handlingStack})});return{stop:function(){ln.unsubscribe()}}}function trackReportError(sn){var ln=initReportObservable([RawReportType.cspViolation,RawReportType.intervention]).subscribe(function(cn){return sn.notify({startClocks:clocksNow(),message:cn.message,stack:cn.stack,type:cn.subtype,source:ErrorSource.REPORT,handling:"unhandled"})});return{stop:function(){ln.unsubscribe()}}}function startErrorCollection(sn,ln,cn){var dn=new Observable;return trackConsoleError(dn),trackRuntimeError(dn),trackReportError(dn),dn.subscribe(function(pn){return sn.notify(12,{error:pn})}),doStartErrorCollection(sn,ln,cn)}function doStartErrorCollection(sn,ln,cn){return sn.subscribe(12,function(dn){var pn=dn.error,vn=dn.customerContext,kn=dn.savedCommonContext;sn.notify(10,assign$2({customerContext:vn,savedCommonContext:kn},processError(pn,ln,cn)))}),{addError:function(dn,pn){var vn=dn.error,kn=dn.handlingStack,Sn=dn.startClocks,wn=dn.context,Pn=vn instanceof Error?computeStackTrace(vn):void 0,Nn=computeRawError({stackTrace:Pn,originalError:vn,handlingStack:kn,startClocks:Sn,nonErrorPrefix:"Provided",source:ErrorSource.CUSTOM,handling:"handled"});sn.notify(12,{customerContext:wn,savedCommonContext:pn,error:Nn})}}}function processError(sn,ln,cn){var dn={date:sn.startClocks.timeStamp,error:{id:generateUUID(),message:sn.message,source:sn.source,stack:sn.stack,handling_stack:sn.handlingStack,type:sn.type,handling:sn.handling,causes:sn.causes,source_type:"browser",fingerprint:sn.fingerprint},type:"error"},pn=ln.isInForegroundAt(sn.startClocks.relative);pn&&(dn.view={in_foreground:pn});var vn=cn.findFeatureFlagEvaluations(sn.startClocks.relative);return vn&&!isEmptyObject(vn)&&(dn.feature_flags=vn),{rawRumEvent:dn,startTime:sn.startClocks.relative,domainContext:{error:sn.originalError}}}function startLongTaskCollection(sn,ln){sn.subscribe(0,function(cn){for(var dn=0,pn=cn;dn<pn.length;dn++){var vn=pn[dn];if(vn.entryType!=="longtask")break;var kn=ln.findTrackedSession(vn.startTime);if(!kn||!kn.longTaskAllowed)break;var Sn=relativeToClocks(vn.startTime),wn={date:Sn.timeStamp,long_task:{id:generateUUID(),duration:toServerDuration(vn.duration)},type:"long_task",_dd:{discarded:!1}};sn.notify(10,{rawRumEvent:wn,startTime:Sn.relative,domainContext:{performanceEntry:vn.toJSON()}})}})}function matchRequestTiming(sn){if(!(!performance||!("getEntriesByName"in performance))){var ln=performance.getEntriesByName(sn.url,"resource");if(!(!ln.length||!("toJSON"in ln[0]))){var cn=ln.map(function(dn){return dn.toJSON()}).filter(toValidEntry).filter(function(dn){return isBetween$2(dn,sn.startClocks.relative,endTime({startTime:sn.startClocks.relative,duration:sn.duration}))});if(cn.length===1)return cn[0]}}}function endTime(sn){return addDuration(sn.startTime,sn.duration)}function isBetween$2(sn,ln,cn){var dn=1;return sn.startTime>=ln-dn&&endTime(sn)<=addDuration(cn,dn)}function startResourceCollection(sn,ln,cn,dn){sn.subscribe(6,function(pn){sn.notify(10,processRequest(pn,ln,cn,dn))}),sn.subscribe(0,function(pn){for(var vn=0,kn=pn;vn<kn.length;vn++){var Sn=kn[vn];Sn.entryType==="resource"&&!isRequestKind(Sn)&&sn.notify(10,processResourceEntry(Sn,ln,cn,dn))}})}function processRequest(sn,ln,cn,dn){var pn,vn=sn.type==="xhr"?"xhr":"fetch",kn=matchRequestTiming(sn),Sn=kn?relativeToClocks(kn.startTime):sn.startClocks,wn=kn?computePerformanceEntryMetrics(kn):void 0,Pn=computeRequestTracingInfo(sn,ln),Nn=computeIndexingInfo(cn,Sn),Ln=toServerDuration(sn.duration),Fn=computePageStateInfo(dn,Sn,(pn=kn==null?void 0:kn.duration)!==null&&pn!==void 0?pn:sn.duration),zn=combine$1({date:Sn.timeStamp,resource:{id:generateUUID(),type:vn,duration:Ln,method:sn.method,status_code:sn.status,url:sn.url},type:"resource"},Pn,wn,Nn,Fn);return{startTime:Sn.relative,rawRumEvent:zn,domainContext:{performanceEntry:kn&&kn,xhr:sn.xhr,response:sn.response,requestInput:sn.input,requestInit:sn.init,error:sn.error}}}function processResourceEntry(sn,ln,cn,dn){var pn=computeResourceKind(sn),vn=computePerformanceEntryMetrics(sn),kn=relativeToClocks(sn.startTime),Sn=computeEntryTracingInfo(sn,ln),wn=computeIndexingInfo(cn,kn),Pn=computePageStateInfo(dn,kn,sn.duration),Nn=combine$1({date:kn.timeStamp,resource:{id:generateUUID(),type:pn,url:sn.name},type:"resource"},Sn,vn,wn,Pn);return{startTime:kn.relative,rawRumEvent:Nn,domainContext:{performanceEntry:sn}}}function computePerformanceEntryMetrics(sn){return{resource:assign$2({duration:computePerformanceResourceDuration(sn),size:computeSize(sn)},computePerformanceResourceDetails(sn))}}function computeRequestTracingInfo(sn,ln){var cn=sn.traceSampled&&sn.traceId&&sn.spanId;if(cn)return{_dd:{span_id:sn.spanId.toDecimalString(),trace_id:sn.traceId.toDecimalString(),rule_psr:getRulePsr(ln)}}}function computeEntryTracingInfo(sn,ln){var cn=sn.traceId;if(cn)return{_dd:{trace_id:sn.traceId,rule_psr:getRulePsr(ln)}}}function toPerformanceEntryRepresentation(sn){return sn}function getRulePsr(sn){return isNumber(sn.traceSampleRate)?sn.traceSampleRate/100:void 0}function computeIndexingInfo(sn,ln){var cn=sn.findTrackedSession(ln.relative);return{_dd:{discarded:!cn||!cn.resourceAllowed}}}function computePageStateInfo(sn,ln,cn){if(isExperimentalFeatureEnabled(ExperimentalFeature.RESOURCE_PAGE_STATES))return{_dd:{page_states:sn.findAll(ln.relative,cn),page_was_discarded:String(document.wasDiscarded)}}}var trackFirstHiddenSingleton,stopListeners;function trackFirstHidden(sn){return sn===void 0&&(sn=window),trackFirstHiddenSingleton||(document.visibilityState==="hidden"?trackFirstHiddenSingleton={timeStamp:0}:(trackFirstHiddenSingleton={timeStamp:1/0},stopListeners=addEventListeners(sn,["pagehide","visibilitychange"],function(ln){(ln.type==="pagehide"||document.visibilityState==="hidden")&&(trackFirstHiddenSingleton.timeStamp=ln.timeStamp,stopListeners())},{capture:!0}).stop)),trackFirstHiddenSingleton}var TIMING_MAXIMUM_DELAY=10*ONE_MINUTE,KEEP_TRACKING_TIMINGS_AFTER_VIEW_DELAY=5*ONE_MINUTE;function trackInitialViewTimings(sn,ln,cn){var dn={};function pn(Nn){assign$2(dn,Nn),cn()}var vn=trackNavigationTimings(sn,function(Nn){ln(Nn.loadEvent),pn(Nn)}).stop,kn=trackFirstContentfulPaintTiming(sn,function(Nn){return pn({firstContentfulPaint:Nn})}).stop,Sn=trackLargestContentfulPaintTiming(sn,window,function(Nn){pn({largestContentfulPaint:Nn})}).stop,wn=trackFirstInputTimings(sn,function(Nn){var Ln=Nn.firstInputDelay,Fn=Nn.firstInputTime;pn({firstInputDelay:Ln,firstInputTime:Fn})}).stop;function Pn(){vn(),kn(),Sn(),wn()}return{stop:Pn,timings:dn,scheduleStop:function(){setTimeout$1(Pn,KEEP_TRACKING_TIMINGS_AFTER_VIEW_DELAY)}}}function trackNavigationTimings(sn,ln){var cn=sn.subscribe(0,function(dn){for(var pn=0,vn=dn;pn<vn.length;pn++){var kn=vn[pn];kn.entryType==="navigation"&&ln({domComplete:kn.domComplete,domContentLoaded:kn.domContentLoadedEventEnd,domInteractive:kn.domInteractive,loadEvent:kn.loadEventEnd,firstByte:kn.responseStart>=0&&kn.responseStart<=relativeNow()?kn.responseStart:void 0})}}).unsubscribe;return{stop:cn}}function trackFirstContentfulPaintTiming(sn,ln){var cn=trackFirstHidden(),dn=sn.subscribe(0,function(pn){var vn=find$2(pn,function(kn){return kn.entryType==="paint"&&kn.name==="first-contentful-paint"&&kn.startTime<cn.timeStamp&&kn.startTime<TIMING_MAXIMUM_DELAY});vn&&ln(vn.startTime)}).unsubscribe;return{stop:dn}}function trackLargestContentfulPaintTiming(sn,ln,cn){var dn=trackFirstHidden(),pn=1/0,vn=addEventListeners(ln,["pointerdown","keydown"],function(Sn){pn=Sn.timeStamp},{capture:!0,once:!0}).stop,kn=sn.subscribe(0,function(Sn){var wn=findLast(Sn,function(Pn){return Pn.entryType==="largest-contentful-paint"&&Pn.startTime<pn&&Pn.startTime<dn.timeStamp&&Pn.startTime<TIMING_MAXIMUM_DELAY});wn&&cn(wn.startTime)}).unsubscribe;return{stop:function(){vn(),kn()}}}function trackFirstInputTimings(sn,ln){var cn=trackFirstHidden(),dn=sn.subscribe(0,function(pn){var vn=find$2(pn,function(Sn){return Sn.entryType==="first-input"&&Sn.startTime<cn.timeStamp});if(vn){var kn=elapsed(vn.startTime,vn.processingStart);ln({firstInputDelay:kn>=0?kn:0,firstInputTime:vn.startTime})}}).unsubscribe;return{stop:dn}}function trackViewMetrics(sn,ln,cn,dn,pn,vn){var kn={},Sn=trackLoadingTime(sn,ln,cn,pn,vn,function(Ln){kn.loadingTime=Ln,dn()}),wn=Sn.stop,Pn=Sn.setLoadEvent,Nn;return isLayoutShiftSupported()?(kn.cumulativeLayoutShift=0,Nn=trackCumulativeLayoutShift(sn,function(Ln){kn.cumulativeLayoutShift=Ln,dn()}).stop):Nn=noop$7,{stop:function(){wn(),Nn()},setLoadEvent:Pn,viewMetrics:kn}}function trackLoadingTime(sn,ln,cn,dn,pn,vn){var kn=dn==="initial_load",Sn=!0,wn=[];function Pn(){!Sn&&!kn&&wn.length>0&&vn(Math.max.apply(Math,wn))}var Nn=waitPageActivityEnd(sn,ln,cn,function(Ln){Sn&&(Sn=!1,Ln.hadActivity&&wn.push(elapsed(pn.timeStamp,Ln.end)),Pn())}).stop;return{stop:Nn,setLoadEvent:function(Ln){kn&&(kn=!1,wn.push(Ln),Pn())}}}function trackCumulativeLayoutShift(sn,ln){var cn=0,dn=slidingSessionWindow(),pn=sn.subscribe(0,function(vn){for(var kn=0,Sn=vn;kn<Sn.length;kn++){var wn=Sn[kn];wn.entryType==="layout-shift"&&!wn.hadRecentInput&&(dn.update(wn),dn.value()>cn&&(cn=dn.value(),ln(round(cn,4))))}}).unsubscribe;return{stop:pn}}function slidingSessionWindow(){var sn=0,ln,cn;return{update:function(dn){var pn=ln===void 0||dn.startTime-cn>=ONE_SECOND||dn.startTime-ln>=5*ONE_SECOND;pn?(ln=cn=dn.startTime,sn=dn.value):(sn+=dn.value,cn=dn.startTime)},value:function(){return sn}}}function isLayoutShiftSupported(){return supportPerformanceTimingEvent("layout-shift")}var KEEP_TRACKING_EVENT_COUNTS_AFTER_VIEW_DELAY=5*ONE_MINUTE;function trackViewEventCounts(sn,ln,cn){var dn=trackEventCounts({lifeCycle:sn,isChildEvent:function(kn){return kn.view.id===ln},onChange:cn}),pn=dn.stop,vn=dn.eventCounts;return{scheduleStop:function(){setTimeout$1(pn,KEEP_TRACKING_EVENT_COUNTS_AFTER_VIEW_DELAY)},eventCounts:vn}}var THROTTLE_VIEW_UPDATE_PERIOD=3e3,SESSION_KEEP_ALIVE_INTERVAL=5*ONE_MINUTE;function trackViews(sn,ln,cn,dn,pn,vn,kn){var Sn=Pn("initial_load",clocksOrigin(),kn);Nn();var wn;vn&&(wn=Ln(pn));function Pn(Fn,zn,Dn){return newView(ln,cn,dn,sn,Fn,zn,Dn)}function Nn(){ln.subscribe(8,function(){Sn=Pn("route_change",void 0,{name:Sn.name,service:Sn.service,version:Sn.version})}),ln.subscribe(7,function(){Sn.end({sessionIsActive:!1})}),ln.subscribe(9,function(Fn){(Fn.reason===PageExitReason.UNLOADING||Fn.reason===PageExitReason.PAGEHIDE)&&Sn.end()})}function Ln(Fn){return Fn.subscribe(function(zn){var Dn=zn.oldLocation,Kn=zn.newLocation;areDifferentLocation(Dn,Kn)&&(Sn.end(),Sn=Pn("route_change"))})}return{addTiming:function(Fn,zn){zn===void 0&&(zn=timeStampNow()),Sn.addTiming(Fn,zn)},startView:function(Fn,zn){Sn.end({endClocks:zn}),Sn=Pn("route_change",zn,Fn)},stop:function(){wn==null||wn.unsubscribe(),Sn.end()}}}function newView(sn,ln,cn,dn,pn,vn,kn){vn===void 0&&(vn=clocksNow());var Sn=generateUUID(),wn={},Pn=0,Nn,Ln=shallowClone(dn),Fn=!0,zn,Dn,Kn;kn&&(zn=kn.name,Dn=kn.service,Kn=kn.version),sn.notify(2,{id:Sn,name:zn,startClocks:vn,service:Dn,version:Kn});var qn=throttle$1(ys,THROTTLE_VIEW_UPDATE_PERIOD,{leading:!1}),Zn=qn.throttled,Yn=qn.cancel,Jn=trackViewMetrics(sn,ln,cn,Zn,pn,vn),rs=Jn.setLoadEvent,ss=Jn.stop,as=Jn.viewMetrics,ds=pn==="initial_load"?trackInitialViewTimings(sn,rs,Zn):{scheduleStop:noop$7,timings:{}},Es=ds.scheduleStop,Ss=ds.timings,Qn=trackViewEventCounts(sn,Sn,Zn),ms=Qn.scheduleStop,Ts=Qn.eventCounts,Rs=setInterval$1(ys,SESSION_KEEP_ALIVE_INTERVAL);ys();function ys(){Yn(),Pn+=1;var _s=Nn===void 0?timeStampNow():Nn.timeStamp;sn.notify(3,assign$2({customTimings:wn,documentVersion:Pn,id:Sn,name:zn,service:Dn,version:Kn,loadingType:pn,location:Ln,startClocks:vn,timings:Ss,duration:elapsed(vn.timeStamp,_s),isActive:Nn===void 0,sessionIsActive:Fn,eventCounts:Ts},as))}return{name:zn,service:Dn,version:Kn,end:function(_s){var js,bs;_s===void 0&&(_s={}),!Nn&&(Nn=(js=_s.endClocks)!==null&&js!==void 0?js:clocksNow(),Fn=(bs=_s.sessionIsActive)!==null&&bs!==void 0?bs:!0,sn.notify(4,{endClocks:Nn}),clearInterval$1(Rs),ss(),Es(),ms(),ys())},addTiming:function(_s,js){if(!Nn){var bs=looksLikeRelativeTime(js)?js:elapsed(vn.timeStamp,js);wn[sanitizeTiming(_s)]=bs,Zn()}}}}function sanitizeTiming(sn){var ln=sn.replace(/[^a-zA-Z0-9-_.@$]/g,"_");return ln!==sn&&display.warn("Invalid timing name: ".concat(sn,", sanitized to: ").concat(ln)),ln}function areDifferentLocation(sn,ln){return sn.pathname!==ln.pathname||!isHashAnAnchor(ln.hash)&&getPathFromHash(ln.hash)!==getPathFromHash(sn.hash)}function isHashAnAnchor(sn){var ln=sn.substr(1);return!!document.getElementById(ln)}function getPathFromHash(sn){var ln=sn.indexOf("?");return ln<0?sn:sn.slice(0,ln)}function startViewCollection(sn,ln,cn,dn,pn,vn,kn,Sn,wn){return sn.subscribe(3,function(Pn){return sn.notify(10,processViewUpdate(Pn,vn,kn,Sn))}),trackViews(cn,sn,dn,ln,pn,!ln.trackViewsManually,wn)}function processViewUpdate(sn,ln,cn,dn){var pn=dn.getReplayStats(sn.id),vn=cn.findFeatureFlagEvaluations(sn.startClocks.relative),kn={_dd:{document_version:sn.documentVersion,replay_stats:pn},date:sn.startClocks.timeStamp,type:"view",view:{action:{count:sn.eventCounts.actionCount},frustration:{count:sn.eventCounts.frustrationCount},cumulative_layout_shift:sn.cumulativeLayoutShift,first_byte:toServerDuration(sn.timings.firstByte),dom_complete:toServerDuration(sn.timings.domComplete),dom_content_loaded:toServerDuration(sn.timings.domContentLoaded),dom_interactive:toServerDuration(sn.timings.domInteractive),error:{count:sn.eventCounts.errorCount},first_contentful_paint:toServerDuration(sn.timings.firstContentfulPaint),first_input_delay:toServerDuration(sn.timings.firstInputDelay),first_input_time:toServerDuration(sn.timings.firstInputTime),is_active:sn.isActive,name:sn.name,largest_contentful_paint:toServerDuration(sn.timings.largestContentfulPaint),load_event:toServerDuration(sn.timings.loadEvent),loading_time:discardNegativeDuration(toServerDuration(sn.loadingTime)),loading_type:sn.loadingType,long_task:{count:sn.eventCounts.longTaskCount},resource:{count:sn.eventCounts.resourceCount},time_spent:toServerDuration(sn.duration),in_foreground_periods:ln.selectInForegroundPeriodsFor(sn.startClocks.relative,sn.duration)},feature_flags:vn&&!isEmptyObject(vn)?vn:void 0,session:{has_replay:pn?!0:void 0,is_active:sn.sessionIsActive?void 0:!1}};return isEmptyObject(sn.customTimings)||(kn.view.custom_timings=mapValues(sn.customTimings,toServerDuration)),{rawRumEvent:kn,startTime:sn.startClocks.relative,domainContext:{location:sn.location}}}function discardNegativeDuration(sn){return isNumber(sn)&&sn<0?void 0:sn}var RUM_SESSION_KEY="rum";function startRumSessionManager(sn,ln){var cn=startSessionManager(sn.cookieOptions,RUM_SESSION_KEY,function(dn){return computeSessionState$1(sn,dn)});return cn.expireObservable.subscribe(function(){ln.notify(7)}),cn.renewObservable.subscribe(function(){ln.notify(8)}),{findTrackedSession:function(dn){var pn=cn.findActiveSession(dn);if(!(!pn||!isTypeTracked(pn.trackingType))){var vn=pn.trackingType==="1"?2:1;return{id:pn.id,plan:vn,sessionReplayAllowed:vn===2,longTaskAllowed:sn.trackLongTasks!==void 0?sn.trackLongTasks:sn.oldPlansBehavior&&vn===2,resourceAllowed:sn.trackResources!==void 0?sn.trackResources:sn.oldPlansBehavior&&vn===2}}},expire:cn.expire,expireObservable:cn.expireObservable}}function startRumSessionManagerStub(){var sn={id:"00000000-aaaa-0000-aaaa-000000000000",plan:1,sessionReplayAllowed:!1,longTaskAllowed:!0,resourceAllowed:!0};return{findTrackedSession:function(){return sn},expire:noop$7,expireObservable:new Observable}}function computeSessionState$1(sn,ln){var cn;return hasValidRumSession(ln)?cn=ln:performDraw(sn.sessionSampleRate)?performDraw(sn.sessionReplaySampleRate)?cn="1":cn="2":cn="0",{trackingType:cn,isTracked:isTypeTracked(cn)}}function hasValidRumSession(sn){return sn==="0"||sn==="1"||sn==="2"}function isTypeTracked(sn){return sn==="2"||sn==="1"}function startRumBatch(sn,ln,cn,dn,pn,vn){var kn=makeRumBatch(sn,dn,pn,vn);return ln.subscribe(11,function(Sn){Sn.type==="view"?kn.upsert(Sn,Sn.view.id):kn.add(Sn)}),cn.subscribe(function(Sn){return kn.add(Sn,isTelemetryReplicationAllowed(sn))}),kn}function makeRumBatch(sn,ln,cn,dn){var pn=Pn(sn.rumEndpointBuilder),vn=pn.batch,kn=pn.flushController,Sn,wn=sn.replica;wn!==void 0&&(Sn=Pn(wn.rumEndpointBuilder).batch);function Pn(Ln){var Fn=createFlushController({messagesLimit:sn.batchMessagesLimit,bytesLimit:sn.batchBytesLimit,durationLimit:sn.flushTimeout,pageExitObservable:cn,sessionExpireObservable:dn}),zn=new Batch(createHttpRequest(Ln,sn.batchBytesLimit,ln),Fn,sn.messageBytesLimit);return{batch:zn,flushController:Fn}}function Nn(Ln){return combine$1(Ln,{application:{id:wn.applicationId}})}return{flushObservable:kn.flushObservable,add:function(Ln,Fn){Fn===void 0&&(Fn=!0),vn.add(Ln),Sn&&Fn&&Sn.add(Nn(Ln))},upsert:function(Ln,Fn){vn.upsert(Ln,Fn),Sn&&Sn.upsert(Nn(Ln),Fn)}}}function startRumEventBridge(sn){var ln=getEventBridge();sn.subscribe(11,function(cn){ln.send("rum",cn)})}var URL_CONTEXT_TIME_OUT_DELAY=SESSION_TIME_OUT_DELAY;function startUrlContexts(sn,ln,cn){var dn=new ValueHistory(URL_CONTEXT_TIME_OUT_DELAY),pn;sn.subscribe(4,function(Sn){var wn=Sn.endClocks;dn.closeActive(wn.relative)}),sn.subscribe(2,function(Sn){var wn=Sn.startClocks,Pn=cn.href;dn.add(kn({url:Pn,referrer:pn||document.referrer}),wn.relative),pn=Pn});var vn=ln.subscribe(function(Sn){var wn=Sn.newLocation,Pn=dn.find();if(Pn){var Nn=relativeNow();dn.closeActive(Nn),dn.add(kn({url:wn.href,referrer:Pn.referrer}),Nn)}});function kn(Sn){var wn=Sn.url,Pn=Sn.referrer;return{url:wn,referrer:Pn}}return{findUrl:function(Sn){return dn.find(Sn)},stop:function(){vn.unsubscribe(),dn.stop()}}}function createLocationChangeObservable(sn){var ln=shallowClone(sn),cn=new Observable(function(){var pn=trackHistory(dn).stop,vn=trackHash(dn).stop;return function(){pn(),vn()}});function dn(){if(ln.href!==sn.href){var pn=shallowClone(sn);cn.notify({newLocation:pn,oldLocation:ln}),ln=pn}}return cn}function trackHistory(sn){var ln=instrumentMethodAndCallOriginal(history,"pushState",{after:sn}).stop,cn=instrumentMethodAndCallOriginal(history,"replaceState",{after:sn}).stop,dn=addEventListener(window,"popstate",sn).stop;return{stop:function(){ln(),cn(),dn()}}}function trackHash(sn){return addEventListener(window,"hashchange",sn)}var FEATURE_FLAG_CONTEXT_TIME_OUT_DELAY=SESSION_TIME_OUT_DELAY,BYTES_COMPUTATION_THROTTLING_DELAY=200;function startFeatureFlagContexts(sn,ln){if(ln===void 0&&(ln=computeBytesCount),!isExperimentalFeatureEnabled(ExperimentalFeature.FEATURE_FLAGS))return{findFeatureFlagEvaluations:function(){},getFeatureFlagBytesCount:function(){return 0},addFeatureFlagEvaluation:noop$7,stop:noop$7};var cn=new ValueHistory(FEATURE_FLAG_CONTEXT_TIME_OUT_DELAY),dn=0,pn=!1;sn.subscribe(4,function(wn){var Pn=wn.endClocks;cn.closeActive(Pn.relative)}),sn.subscribe(2,function(wn){var Pn=wn.startClocks;cn.add({},Pn.relative),dn=0});var vn=throttle$1(function(wn){dn=ln(jsonStringify(wn)),pn||(pn=warnIfCustomerDataLimitReached(dn,"feature flag evaluation"))},BYTES_COMPUTATION_THROTTLING_DELAY),kn=vn.throttled,Sn=vn.cancel;return{findFeatureFlagEvaluations:function(wn){return cn.find(wn)},getFeatureFlagBytesCount:function(){var wn=cn.find();return wn?dn:0},addFeatureFlagEvaluation:function(wn,Pn){var Nn=cn.find();Nn&&(Nn[wn]=Pn,kn(Nn))},stop:Sn}}var MEASURES_PERIOD_DURATION=10*ONE_SECOND,currentPeriodMeasures,currentBatchMeasures,batchHasRumEvent;function startCustomerDataTelemetry(sn,ln,cn,dn,pn,vn,kn){var Sn=ln.enabled&&performDraw(sn.customerDataTelemetrySampleRate);Sn&&(initCurrentPeriodMeasures(),initCurrentBatchMeasures(),cn.subscribe(11,function(wn){batchHasRumEvent=!0,updateMeasure(currentBatchMeasures.globalContextBytes,isEmptyObject(dn.get())?0:dn.getBytesCount()),updateMeasure(currentBatchMeasures.userContextBytes,isEmptyObject(pn.get())?0:pn.getBytesCount());var Pn=vn.findFeatureFlagEvaluations(),Nn=includes(["view","error"],wn.type)&&Pn&&!isEmptyObject(Pn);updateMeasure(currentBatchMeasures.featureFlagBytes,Nn?vn.getFeatureFlagBytesCount():0)}),kn.subscribe(function(wn){var Pn=wn.bytesCount,Nn=wn.messagesCount;batchHasRumEvent&&(currentPeriodMeasures.batchCount+=1,updateMeasure(currentPeriodMeasures.batchBytesCount,Pn),updateMeasure(currentPeriodMeasures.batchMessagesCount,Nn),mergeMeasure(currentPeriodMeasures.globalContextBytes,currentBatchMeasures.globalContextBytes),mergeMeasure(currentPeriodMeasures.userContextBytes,currentBatchMeasures.userContextBytes),mergeMeasure(currentPeriodMeasures.featureFlagBytes,currentBatchMeasures.featureFlagBytes),initCurrentBatchMeasures())}),setInterval$1(sendCurrentPeriodMeasures,MEASURES_PERIOD_DURATION))}function sendCurrentPeriodMeasures(){currentPeriodMeasures.batchCount!==0&&(addTelemetryDebug("Customer data measures",currentPeriodMeasures),initCurrentPeriodMeasures())}function createMeasure(){return{min:1/0,max:0,sum:0}}function updateMeasure(sn,ln){sn.sum+=ln,sn.min=Math.min(sn.min,ln),sn.max=Math.max(sn.max,ln)}function mergeMeasure(sn,ln){sn.sum+=ln.sum,sn.min=Math.min(sn.min,ln.min),sn.max=Math.max(sn.max,ln.max)}function initCurrentPeriodMeasures(){currentPeriodMeasures={batchCount:0,batchBytesCount:createMeasure(),batchMessagesCount:createMeasure(),globalContextBytes:createMeasure(),userContextBytes:createMeasure(),featureFlagBytes:createMeasure()}}function initCurrentBatchMeasures(){batchHasRumEvent=!1,currentBatchMeasures={globalContextBytes:createMeasure(),userContextBytes:createMeasure(),featureFlagBytes:createMeasure()}}var MAX_PAGE_STATE_ENTRIES=500,pageStateEntries=[],currentPageState;function startPageStateHistory(){addPageState(getPageState());var sn=addEventListeners(window,["pageshow","focus","blur","visibilitychange","resume","freeze","pagehide"],function(ln){ln.isTrusted&&(ln.type==="freeze"?addPageState("frozen"):ln.type==="pagehide"?addPageState(ln.persisted?"frozen":"terminated"):addPageState(getPageState()))},{capture:!0}).stop;return{findAll:function(ln,cn){for(var dn=[],pn=addDuration(ln,cn),vn=pageStateEntries.length-1;vn>=0;vn--){var kn=pageStateEntries[vn].startTime;if(!(kn>=pn)&&(dn.unshift(pageStateEntries[vn]),kn<ln))break}return dn.length?dn:void 0},stop:sn}}function getPageState(){return document.visibilityState==="hidden"?"hidden":document.hasFocus()?"active":"passive"}function addPageState(sn,ln){ln===void 0&&(ln=MAX_PAGE_STATE_ENTRIES),sn!==currentPageState&&(currentPageState=sn,pageStateEntries.length===ln&&pageStateEntries.shift(),pageStateEntries.push({state:currentPageState,startTime:relativeNow()}))}function startRum(sn,ln,cn,dn,pn,vn){var kn=new LifeCycle$1;kn.subscribe(11,function(ms){return sendToExtension("rum",ms)});var Sn=startRumTelemetry(ln);Sn.setContextProvider(function(){var ms,Ts;return{application:{id:ln.applicationId},session:{id:(ms=Ln.findTrackedSession())===null||ms===void 0?void 0:ms.id},view:{id:(Ts=qn.findView())===null||Ts===void 0?void 0:Ts.id},action:{id:Jn.findActionId()}}});var wn=function(ms){kn.notify(12,{error:ms})},Pn=startFeatureFlagContexts(kn),Nn=createPageExitObservable();Nn.subscribe(function(ms){kn.notify(9,ms)});var Ln=canUseEventBridge()?startRumSessionManagerStub():startRumSessionManager(ln,kn);if(canUseEventBridge())startRumEventBridge(kn);else{var Fn=startRumBatch(ln,kn,Sn.observable,wn,Nn,Ln.expireObservable);startCustomerDataTelemetry(ln,Sn,kn,dn,pn,Pn,Fn.flushObservable)}var zn=createDOMMutationObservable(),Dn=createLocationChangeObservable(location),Kn=startRumEventCollection(kn,ln,location,Ln,Dn,zn,function(){return buildCommonContext(dn,pn,cn)},wn),qn=Kn.viewContexts,Zn=Kn.foregroundContexts,Yn=Kn.urlContexts,Jn=Kn.actionContexts,rs=Kn.addAction;addTelemetryConfiguration(serializeRumConfiguration(sn)),startLongTaskCollection(kn,Ln);var ss=startPageStateHistory();startResourceCollection(kn,ln,Ln,ss);var as=startViewCollection(kn,ln,location,zn,Dn,Zn,Pn,cn,vn),ds=as.addTiming,Es=as.startView,Ss=startErrorCollection(kn,Zn,Pn).addError;startRequestCollection(kn,ln,Ln),startPerformanceCollection(kn,ln);var Qn=startInternalContext$1(ln.applicationId,Ln,qn,Jn,Yn);return{addAction:rs,addError:Ss,addTiming:ds,addFeatureFlagEvaluation:Pn.addFeatureFlagEvaluation,startView:Es,lifeCycle:kn,viewContexts:qn,session:Ln,stopSession:function(){return Ln.expire()},getInternalContext:Qn.get}}function startRumTelemetry(sn){var ln=startTelemetry("browser-rum-sdk",sn);if(canUseEventBridge()){var cn=getEventBridge();ln.observable.subscribe(function(dn){return cn.send("internal_telemetry",dn)})}return ln}function startRumEventCollection(sn,ln,cn,dn,pn,vn,kn,Sn){var wn=startViewContexts(sn),Pn=startUrlContexts(sn,pn,cn),Nn=startForegroundContexts(),Ln=startActionCollection(sn,vn,ln,Nn),Fn=Ln.addAction,zn=Ln.actionContexts;return startRumAssembly(ln,sn,dn,wn,Pn,zn,kn,Sn),{viewContexts:wn,foregroundContexts:Nn,urlContexts:Pn,addAction:Fn,actionContexts:zn,stop:function(){wn.stop(),Nn.stop()}}}function getSessionReplayUrl(sn,ln){var cn=ln.session,dn=ln.viewContext,pn=ln.errorType,vn=cn?cn.id:"no-session-id",kn=[];pn!==void 0&&kn.push("error-type=".concat(pn)),dn&&(kn.push("seed=".concat(dn.id)),kn.push("from=".concat(dn.startClocks.timeStamp)));var Sn=getDatadogSiteUrl(sn),wn="/rum/replay/sessions/".concat(vn);return"".concat(Sn).concat(wn,"?").concat(kn.join("&"))}function getDatadogSiteUrl(sn){var ln=sn.site,cn=sn.subdomain||getSiteDefaultSubdomain(sn);return"https://".concat(cn?"".concat(cn,"."):"").concat(ln)}function getSiteDefaultSubdomain(sn){switch(sn.site){case INTAKE_SITE_US1:case INTAKE_SITE_EU1:return"app";case INTAKE_SITE_STAGING:return"dd";default:return}}var RecordType={FullSnapshot:2,IncrementalSnapshot:3,Meta:4,Focus:6,ViewEnd:7,VisualViewport:8,FrustrationRecord:9},NodeType={Document:0,DocumentType:1,Element:2,Text:3,CDATA:4,DocumentFragment:11},IncrementalSource={Mutation:0,MouseMove:1,MouseInteraction:2,Scroll:3,ViewportResize:4,Input:5,TouchMove:6,MediaInteraction:7,StyleSheetRule:8},MouseInteractionType={MouseUp:0,MouseDown:1,Click:2,ContextMenu:3,DblClick:4,Focus:5,Blur:6,TouchStart:7,TouchEnd:9},MediaInteractionType={Play:0,Pause:1};function assembleIncrementalSnapshot(sn,ln){return{data:assign$2({source:sn},ln),type:RecordType.IncrementalSnapshot,timestamp:timeStampNow()}}var NodePrivacyLevel={IGNORE:"ignore",HIDDEN:"hidden",ALLOW:DefaultPrivacyLevel.ALLOW,MASK:DefaultPrivacyLevel.MASK,MASK_USER_INPUT:DefaultPrivacyLevel.MASK_USER_INPUT},PRIVACY_ATTR_NAME="data-dd-privacy",PRIVACY_ATTR_VALUE_ALLOW="allow",PRIVACY_ATTR_VALUE_MASK="mask",PRIVACY_ATTR_VALUE_MASK_USER_INPUT="mask-user-input",PRIVACY_ATTR_VALUE_HIDDEN="hidden",PRIVACY_CLASS_ALLOW="dd-privacy-allow",PRIVACY_CLASS_MASK="dd-privacy-mask",PRIVACY_CLASS_MASK_USER_INPUT="dd-privacy-mask-user-input",PRIVACY_CLASS_HIDDEN="dd-privacy-hidden",CENSORED_STRING_MARK="***",CENSORED_IMG_MARK="data:image/gif;base64,R0lGODlhAQABAIAAAMLCwgAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw==",FORM_PRIVATE_TAG_NAMES={INPUT:!0,OUTPUT:!0,TEXTAREA:!0,SELECT:!0,OPTION:!0,DATALIST:!0,OPTGROUP:!0},MAX_ATTRIBUTE_VALUE_CHAR_LENGTH=1e5,TEXT_MASKING_CHAR="x";function getNodePrivacyLevel(sn,ln){var cn=getParentNode(sn),dn=cn?getNodePrivacyLevel(cn,ln):ln,pn=getNodeSelfPrivacyLevel(sn);return reducePrivacyLevel(pn,dn)}function reducePrivacyLevel(sn,ln){switch(ln){case NodePrivacyLevel.HIDDEN:case NodePrivacyLevel.IGNORE:return ln}switch(sn){case NodePrivacyLevel.ALLOW:case NodePrivacyLevel.MASK:case NodePrivacyLevel.MASK_USER_INPUT:case NodePrivacyLevel.HIDDEN:case NodePrivacyLevel.IGNORE:return sn;default:return ln}}function getNodeSelfPrivacyLevel(sn){if(isElementNode(sn)){var ln=sn.getAttribute(PRIVACY_ATTR_NAME);if(sn.tagName==="BASE")return NodePrivacyLevel.ALLOW;if(sn.tagName==="INPUT"){var cn=sn;if(cn.type==="password"||cn.type==="email"||cn.type==="tel"||cn.type==="hidden")return NodePrivacyLevel.MASK;var dn=cn.getAttribute("autocomplete");if(dn&&dn.indexOf("cc-")===0)return NodePrivacyLevel.MASK}if(ln===PRIVACY_ATTR_VALUE_HIDDEN||sn.classList.contains(PRIVACY_CLASS_HIDDEN))return NodePrivacyLevel.HIDDEN;if(ln===PRIVACY_ATTR_VALUE_MASK||sn.classList.contains(PRIVACY_CLASS_MASK))return NodePrivacyLevel.MASK;if(ln===PRIVACY_ATTR_VALUE_MASK_USER_INPUT||sn.classList.contains(PRIVACY_CLASS_MASK_USER_INPUT))return NodePrivacyLevel.MASK_USER_INPUT;if(ln===PRIVACY_ATTR_VALUE_ALLOW||sn.classList.contains(PRIVACY_CLASS_ALLOW))return NodePrivacyLevel.ALLOW;if(shouldIgnoreElement(sn))return NodePrivacyLevel.IGNORE}}function shouldMaskNode(sn,ln){switch(ln){case NodePrivacyLevel.MASK:case NodePrivacyLevel.HIDDEN:case NodePrivacyLevel.IGNORE:return!0;case NodePrivacyLevel.MASK_USER_INPUT:return isTextNode(sn)?isFormElement(sn.parentNode):isFormElement(sn);default:return!1}}function isFormElement(sn){if(!sn||sn.nodeType!==sn.ELEMENT_NODE)return!1;var ln=sn;if(ln.tagName==="INPUT")switch(ln.type){case"button":case"color":case"reset":case"submit":return!1}return!!FORM_PRIVATE_TAG_NAMES[ln.tagName]}var censorText=function(sn){return sn.replace(/\S/g,TEXT_MASKING_CHAR)};function getTextContent(sn,ln,cn){var dn,pn=(dn=sn.parentElement)===null||dn===void 0?void 0:dn.tagName,vn=sn.textContent||"";if(!(ln&&!vn.trim())){var kn=cn,Sn=pn==="STYLE"?!0:void 0,wn=pn==="SCRIPT";if(wn)vn=CENSORED_STRING_MARK;else if(kn===NodePrivacyLevel.HIDDEN)vn=CENSORED_STRING_MARK;else if(shouldMaskNode(sn,kn)&&!Sn)if(pn==="DATALIST"||pn==="SELECT"||pn==="OPTGROUP"){if(!vn.trim())return}else pn==="OPTION"?vn=CENSORED_STRING_MARK:vn=censorText(vn);return vn}}function shouldIgnoreElement(sn){if(sn.nodeName==="SCRIPT")return!0;if(sn.nodeName==="LINK"){var ln=pn("rel");return/preload|prefetch/i.test(ln)&&pn("as")==="script"||ln==="shortcut icon"||ln==="icon"}if(sn.nodeName==="META"){var cn=pn("name"),ln=pn("rel"),dn=pn("property");return/^msapplication-tile(image|color)$/.test(cn)||cn==="application-name"||ln==="icon"||ln==="apple-touch-icon"||ln==="shortcut icon"||cn==="keywords"||cn==="description"||/^(og|twitter|fb):/.test(dn)||/^(og|twitter):/.test(cn)||cn==="pinterest"||cn==="robots"||cn==="googlebot"||cn==="bingbot"||sn.hasAttribute("http-equiv")||cn==="author"||cn==="generator"||cn==="framework"||cn==="publisher"||cn==="progid"||/^article:/.test(dn)||/^product:/.test(dn)||cn==="google-site-verification"||cn==="yandex-verification"||cn==="csrf-token"||cn==="p:domain_verify"||cn==="verify-v1"||cn==="verification"||cn==="shopify-checkout-api-token"}function pn(vn){return(sn.getAttribute(vn)||"").toLowerCase()}return!1}var serializedNodeIds=new WeakMap;function hasSerializedNode(sn){return serializedNodeIds.has(sn)}function nodeAndAncestorsHaveSerializedNode(sn){for(var ln=sn;ln;){if(!hasSerializedNode(ln)&&!isNodeShadowRoot(ln))return!1;ln=getParentNode(ln)}return!0}function getSerializedNodeId(sn){return serializedNodeIds.get(sn)}function setSerializedNodeId(sn,ln){serializedNodeIds.set(sn,ln)}function getElementInputValue(sn,ln){var cn=sn.tagName,dn=sn.value;if(shouldMaskNode(sn,ln)){var pn=sn.type;return cn==="INPUT"&&(pn==="button"||pn==="submit"||pn==="reset")?dn:!dn||cn==="OPTION"?void 0:CENSORED_STRING_MARK}if(cn==="OPTION"||cn==="SELECT")return sn.value;if(!(cn!=="INPUT"&&cn!=="TEXTAREA"))return dn}var URL_IN_CSS_REF=/url\((?:(')([^']*)'|(")([^"]*)"|([^)]*))\)/gm,ABSOLUTE_URL=/^[A-Za-z]+:|^\/\//,DATA_URI=/^data:.*,/i;function switchToAbsoluteUrl(sn,ln){return sn.replace(URL_IN_CSS_REF,function(cn,dn,pn,vn,kn,Sn){var wn=pn||kn||Sn;if(!ln||!wn||ABSOLUTE_URL.test(wn)||DATA_URI.test(wn))return cn;var Pn=dn||vn||"";return"url(".concat(Pn).concat(makeUrlAbsolute(wn,ln)).concat(Pn,")")})}function makeUrlAbsolute(sn,ln){try{return buildUrl(sn,ln).href}catch{return sn}}var TAG_NAME_REGEX=/[^a-z1-6-_]/;function getValidTagName(sn){var ln=sn.toLowerCase().trim();return TAG_NAME_REGEX.test(ln)?"div":ln}function serializeStyleSheets(sn){if(!(sn===void 0||sn.length===0))return sn.map(function(ln){var cn=ln.cssRules||ln.rules,dn=Array.from(cn,function(vn){return vn.cssText}),pn={cssRules:dn,disabled:ln.disabled||void 0,media:ln.media.length>0?Array.from(ln.media):void 0};return pn})}function serializeAttribute(sn,ln,cn,dn){if(ln===NodePrivacyLevel.HIDDEN)return null;var pn=sn.getAttribute(cn);if(ln===NodePrivacyLevel.MASK&&cn!==PRIVACY_ATTR_NAME&&!STABLE_ATTRIBUTES.includes(cn)&&cn!==dn.actionNameAttribute){var vn=sn.tagName;switch(cn){case"title":case"alt":case"placeholder":return CENSORED_STRING_MARK}if((vn==="IMG"||vn==="SOURCE")&&(cn==="src"||cn==="srcset"))return CENSORED_IMG_MARK;if(vn==="A"&&cn==="href"||pn&&startsWith(cn,"data-"))return CENSORED_STRING_MARK}return!pn||typeof pn!="string"?pn:pn.length>MAX_ATTRIBUTE_VALUE_CHAR_LENGTH&&pn.slice(0,5)==="data:"?"data:truncated":pn}function serializeAttributes(sn,ln,cn){var dn;if(ln===NodePrivacyLevel.HIDDEN)return{};for(var pn={},vn=getValidTagName(sn.tagName),kn=sn.ownerDocument,Sn=0;Sn<sn.attributes.length;Sn+=1){var wn=sn.attributes.item(Sn),Pn=wn.name,Nn=serializeAttribute(sn,ln,Pn,cn.configuration);Nn!==null&&(pn[Pn]=Nn)}if(sn.value&&(vn==="textarea"||vn==="select"||vn==="option"||vn==="input")){var Ln=getElementInputValue(sn,ln);Ln!==void 0&&(pn.value=Ln)}if(vn==="option"&&ln===NodePrivacyLevel.ALLOW){var Fn=sn;Fn.selected&&(pn.selected=Fn.selected)}if(vn==="link"){var zn=Array.from(kn.styleSheets).find(function(rs){return rs.href===sn.href}),Dn=getCssRulesString(zn);Dn&&zn&&(pn._cssText=Dn)}if(vn==="style"&&sn.sheet&&!(sn.innerText||sn.textContent||"").trim().length){var Dn=getCssRulesString(sn.sheet);Dn&&(pn._cssText=Dn)}var Kn=sn;if(vn==="input"&&(Kn.type==="radio"||Kn.type==="checkbox")&&(ln===NodePrivacyLevel.ALLOW?pn.checked=!!Kn.checked:shouldMaskNode(Kn,ln)&&delete pn.checked),vn==="audio"||vn==="video"){var qn=sn;pn.rr_mediaState=qn.paused?"paused":"played"}var Zn,Yn,Jn=cn.serializationContext;switch(Jn.status){case 0:Zn=Math.round(sn.scrollTop),Yn=Math.round(sn.scrollLeft),(Zn||Yn)&&Jn.elementsScrollPositions.set(sn,{scrollTop:Zn,scrollLeft:Yn});break;case 1:Jn.elementsScrollPositions.has(sn)&&(dn=Jn.elementsScrollPositions.get(sn),Zn=dn.scrollTop,Yn=dn.scrollLeft);break}return Yn&&(pn.rr_scrollLeft=Yn),Zn&&(pn.rr_scrollTop=Zn),pn}function getCssRulesString(sn){if(!sn)return null;var ln;try{ln=sn.rules||sn.cssRules}catch{}if(!ln)return null;var cn=Array.from(ln,getCssRuleString).join("");return switchToAbsoluteUrl(cn,sn.href)}function getCssRuleString(sn){return isCSSImportRule(sn)?getCssRulesString(sn.styleSheet)||"":sn.cssText}function isCSSImportRule(sn){return"styleSheet"in sn}function serializeNodeWithId(sn,ln){var cn=serializeNode(sn,ln);if(!cn)return null;var dn=getSerializedNodeId(sn)||generateNextId(),pn=cn;return pn.id=dn,setSerializedNodeId(sn,dn),ln.serializedNodeIds&&ln.serializedNodeIds.add(dn),pn}var _nextId=1;function generateNextId(){return _nextId++}function serializeChildNodes(sn,ln){var cn=[];return sn.childNodes.forEach(function(dn){var pn=serializeNodeWithId(dn,ln);pn&&cn.push(pn)}),cn}function serializeNode(sn,ln){switch(sn.nodeType){case sn.DOCUMENT_NODE:return serializeDocumentNode(sn,ln);case sn.DOCUMENT_FRAGMENT_NODE:return serializeDocumentFragmentNode(sn,ln);case sn.DOCUMENT_TYPE_NODE:return serializeDocumentTypeNode(sn);case sn.ELEMENT_NODE:return serializeElementNode(sn,ln);case sn.TEXT_NODE:return serializeTextNode(sn,ln);case sn.CDATA_SECTION_NODE:return serializeCDataNode()}}function serializeDocumentNode(sn,ln){return{type:NodeType.Document,childNodes:serializeChildNodes(sn,ln),adoptedStyleSheets:serializeStyleSheets(sn.adoptedStyleSheets)}}function serializeDocumentFragmentNode(sn,ln){var cn=[];sn.childNodes.length&&(cn=serializeChildNodes(sn,ln));var dn=isNodeShadowRoot(sn);return dn&&ln.serializationContext.shadowRootsController.addShadowRoot(sn),{type:NodeType.DocumentFragment,childNodes:cn,isShadowRoot:dn,adoptedStyleSheets:dn?serializeStyleSheets(sn.adoptedStyleSheets):void 0}}function serializeDocumentTypeNode(sn){return{type:NodeType.DocumentType,name:sn.name,publicId:sn.publicId,systemId:sn.systemId}}function serializeElementNode(sn,ln){var cn,dn=getValidTagName(sn.tagName),pn=isSVGElement(sn)||void 0,vn=reducePrivacyLevel(getNodeSelfPrivacyLevel(sn),ln.parentNodePrivacyLevel);if(vn===NodePrivacyLevel.HIDDEN){var kn=sn.getBoundingClientRect(),Sn=kn.width,wn=kn.height;return{type:NodeType.Element,tagName:dn,attributes:(cn={rr_width:"".concat(Sn,"px"),rr_height:"".concat(wn,"px")},cn[PRIVACY_ATTR_NAME]=PRIVACY_ATTR_VALUE_HIDDEN,cn),childNodes:[],isSVG:pn}}if(vn!==NodePrivacyLevel.IGNORE){var Pn=serializeAttributes(sn,vn,ln),Nn=[];if(sn.childNodes.length){var Ln=void 0;ln.parentNodePrivacyLevel===vn&&ln.ignoreWhiteSpace===(dn==="head")?Ln=ln:Ln=assign$2({},ln,{parentNodePrivacyLevel:vn,ignoreWhiteSpace:dn==="head"}),Nn=serializeChildNodes(sn,Ln)}if(isNodeShadowHost(sn)){var Fn=serializeNodeWithId(sn.shadowRoot,ln);Fn!==null&&Nn.push(Fn)}return{type:NodeType.Element,tagName:dn,attributes:Pn,childNodes:Nn,isSVG:pn}}}function isSVGElement(sn){return sn.tagName==="svg"||sn instanceof SVGElement}function serializeTextNode(sn,ln){var cn,dn=(cn=sn.parentElement)===null||cn===void 0?void 0:cn.tagName,pn=getTextContent(sn,ln.ignoreWhiteSpace||!1,ln.parentNodePrivacyLevel);if(pn!==void 0)return{type:NodeType.Text,textContent:pn,isStyle:dn==="STYLE"?!0:void 0}}function serializeCDataNode(){return{type:NodeType.CDATA,textContent:""}}function serializeDocument(sn,ln,cn){return serializeNodeWithId(sn,{serializationContext:cn,parentNodePrivacyLevel:ln.defaultPrivacyLevel,configuration:ln})}function isTouchEvent(sn){return!!sn.changedTouches}function getEventTarget(sn){return sn.composed===!0&&isNodeShadowHost(sn.target)?sn.composedPath()[0]:sn.target}var TOLERANCE=25;function isVisualViewportFactoredIn(sn){return Math.abs(sn.pageTop-sn.offsetTop-window.scrollY)>TOLERANCE||Math.abs(sn.pageLeft-sn.offsetLeft-window.scrollX)>TOLERANCE}var convertMouseEventToLayoutCoordinates=function(sn,ln){var cn=window.visualViewport,dn={layoutViewportX:sn,layoutViewportY:ln,visualViewportX:sn,visualViewportY:ln};if(cn)isVisualViewportFactoredIn(cn)?(dn.layoutViewportX=Math.round(sn+cn.offsetLeft),dn.layoutViewportY=Math.round(ln+cn.offsetTop)):(dn.visualViewportX=Math.round(sn-cn.offsetLeft),dn.visualViewportY=Math.round(ln-cn.offsetTop));else return dn;return dn},getVisualViewport=function(sn){return{scale:sn.scale,offsetLeft:sn.offsetLeft,offsetTop:sn.offsetTop,pageLeft:sn.pageLeft,pageTop:sn.pageTop,height:sn.height,width:sn.width}};function getScrollX(){var sn,ln=window.visualViewport;return ln?sn=ln.pageLeft-ln.offsetLeft:window.scrollX!==void 0?sn=window.scrollX:sn=window.pageXOffset||0,Math.round(sn)}function getScrollY(){var sn,ln=window.visualViewport;return ln?sn=ln.pageTop-ln.offsetTop:window.scrollY!==void 0?sn=window.scrollY:sn=window.pageYOffset||0,Math.round(sn)}var MOUSE_MOVE_OBSERVER_THRESHOLD=50;function initMoveObserver(sn){var ln=throttle$1(function(cn){var dn=getEventTarget(cn);if(hasSerializedNode(dn)){var pn=tryToComputeCoordinates(cn);if(!pn)return;var vn={id:getSerializedNodeId(dn),timeOffset:0,x:pn.x,y:pn.y};sn([vn],isTouchEvent(cn)?IncrementalSource.TouchMove:IncrementalSource.MouseMove)}},MOUSE_MOVE_OBSERVER_THRESHOLD,{trailing:!1}).throttled;return addEventListeners(document,["mousemove","touchmove"],ln,{capture:!0,passive:!0}).stop}function tryToComputeCoordinates(sn){var ln=isTouchEvent(sn)?sn.changedTouches[0]:sn,cn=ln.clientX,dn=ln.clientY;if(window.visualViewport){var pn=convertMouseEventToLayoutCoordinates(cn,dn),vn=pn.visualViewportX,kn=pn.visualViewportY;cn=vn,dn=kn}if(!Number.isFinite(cn)||!Number.isFinite(dn)){sn.isTrusted&&addTelemetryDebug("mouse/touch event without x/y");return}return{x:cn,y:dn}}var SCROLL_OBSERVER_THRESHOLD=100;function initScrollObserver(sn,ln,cn){var dn=throttle$1(function(pn){var vn=getEventTarget(pn);if(!(!vn||getNodePrivacyLevel(vn,ln)===NodePrivacyLevel.HIDDEN||!hasSerializedNode(vn))){var kn=getSerializedNodeId(vn),Sn=vn===document?{scrollTop:getScrollY(),scrollLeft:getScrollX()}:{scrollTop:Math.round(vn.scrollTop),scrollLeft:Math.round(vn.scrollLeft)};cn.set(vn,Sn),sn({id:kn,x:Sn.scrollLeft,y:Sn.scrollTop})}},SCROLL_OBSERVER_THRESHOLD).throttled;return addEventListener(document,"scroll",dn,{capture:!0,passive:!0}).stop}var _a$6,eventTypeToMouseInteraction=(_a$6={},_a$6.pointerup=MouseInteractionType.MouseUp,_a$6.mousedown=MouseInteractionType.MouseDown,_a$6.click=MouseInteractionType.Click,_a$6.contextmenu=MouseInteractionType.ContextMenu,_a$6.dblclick=MouseInteractionType.DblClick,_a$6.focus=MouseInteractionType.Focus,_a$6.blur=MouseInteractionType.Blur,_a$6.touchstart=MouseInteractionType.TouchStart,_a$6.touchend=MouseInteractionType.TouchEnd,_a$6);function initMouseInteractionObserver(sn,ln,cn){var dn=function(pn){var vn=getEventTarget(pn);if(!(getNodePrivacyLevel(vn,ln)===NodePrivacyLevel.HIDDEN||!hasSerializedNode(vn))){var kn=getSerializedNodeId(vn),Sn=eventTypeToMouseInteraction[pn.type],wn;if(Sn!==MouseInteractionType.Blur&&Sn!==MouseInteractionType.Focus){var Pn=tryToComputeCoordinates(pn);if(!Pn)return;wn={id:kn,type:Sn,x:Pn.x,y:Pn.y}}else wn={id:kn,type:Sn};var Nn=assign$2({id:cn.getIdForEvent(pn)},assembleIncrementalSnapshot(IncrementalSource.MouseInteraction,wn));sn(Nn)}};return addEventListeners(document,Object.keys(eventTypeToMouseInteraction),dn,{capture:!0,passive:!0}).stop}function initInputObserver(sn,ln,cn){var dn=cn===void 0?{}:cn,pn=dn.domEvents,vn=pn===void 0?["input","change"]:pn,kn=dn.target,Sn=kn===void 0?document:kn,wn=new WeakMap;function Pn(zn){var Dn=getNodePrivacyLevel(zn,ln);if(Dn!==NodePrivacyLevel.HIDDEN){var Kn=zn.type,qn;if(Kn==="radio"||Kn==="checkbox"){if(shouldMaskNode(zn,Dn))return;qn={isChecked:zn.checked}}else{var Zn=getElementInputValue(zn,Dn);if(Zn===void 0)return;qn={text:Zn}}Nn(zn,qn);var Yn=zn.name;Kn==="radio"&&Yn&&zn.checked&&forEach$1(document.querySelectorAll('input[type="radio"][name="'.concat(Yn,'"]')),function(Jn){Jn!==zn&&Nn(Jn,{isChecked:!1})})}}function Nn(zn,Dn){if(hasSerializedNode(zn)){var Kn=wn.get(zn);(!Kn||Kn.text!==Dn.text||Kn.isChecked!==Dn.isChecked)&&(wn.set(zn,Dn),sn(assign$2({id:getSerializedNodeId(zn)},Dn)))}}var Ln=addEventListeners(Sn,vn,function(zn){var Dn=getEventTarget(zn);(Dn instanceof HTMLInputElement||Dn instanceof HTMLTextAreaElement||Dn instanceof HTMLSelectElement)&&Pn(Dn)},{capture:!0,passive:!0}).stop,Fn=[instrumentSetter(HTMLInputElement.prototype,"value",Pn),instrumentSetter(HTMLInputElement.prototype,"checked",Pn),instrumentSetter(HTMLSelectElement.prototype,"value",Pn),instrumentSetter(HTMLTextAreaElement.prototype,"value",Pn),instrumentSetter(HTMLSelectElement.prototype,"selectedIndex",Pn)];return function(){Fn.forEach(function(zn){return zn.stop()}),Ln()}}function initStyleSheetObserver(sn){function ln(pn,vn){pn&&hasSerializedNode(pn.ownerNode)&&vn(getSerializedNodeId(pn.ownerNode))}var cn=[instrumentMethodAndCallOriginal(CSSStyleSheet.prototype,"insertRule",{before:function(pn,vn){ln(this,function(kn){return sn({id:kn,adds:[{rule:pn,index:vn}]})})}}),instrumentMethodAndCallOriginal(CSSStyleSheet.prototype,"deleteRule",{before:function(pn){ln(this,function(vn){return sn({id:vn,removes:[{index:pn}]})})}})];typeof CSSGroupingRule<"u"?dn(CSSGroupingRule):(dn(CSSMediaRule),dn(CSSSupportsRule));function dn(pn){cn.push(instrumentMethodAndCallOriginal(pn.prototype,"insertRule",{before:function(vn,kn){var Sn=this;ln(this.parentStyleSheet,function(wn){var Pn=getPathToNestedCSSRule(Sn);Pn&&(Pn.push(kn||0),sn({id:wn,adds:[{rule:vn,index:Pn}]}))})}}),instrumentMethodAndCallOriginal(pn.prototype,"deleteRule",{before:function(vn){var kn=this;ln(this.parentStyleSheet,function(Sn){var wn=getPathToNestedCSSRule(kn);wn&&(wn.push(vn),sn({id:Sn,removes:[{index:wn}]}))})}}))}return function(){return cn.forEach(function(pn){return pn.stop()})}}function getPathToNestedCSSRule(sn){for(var ln=[],cn=sn;cn.parentRule;){var dn=Array.from(cn.parentRule.cssRules),pn=dn.indexOf(cn);ln.unshift(pn),cn=cn.parentRule}if(cn.parentStyleSheet){var vn=Array.from(cn.parentStyleSheet.cssRules),kn=vn.indexOf(cn);return ln.unshift(kn),ln}}function initMediaInteractionObserver(sn,ln){var cn=function(dn){var pn=getEventTarget(dn);!pn||getNodePrivacyLevel(pn,ln)===NodePrivacyLevel.HIDDEN||!hasSerializedNode(pn)||sn({id:getSerializedNodeId(pn),type:dn.type==="play"?MediaInteractionType.Play:MediaInteractionType.Pause})};return addEventListeners(document,["play","pause"],cn,{capture:!0,passive:!0}).stop}function initFrustrationObserver(sn,ln,cn){return sn.subscribe(10,function(dn){var pn,vn,kn;dn.rawRumEvent.type==="action"&&dn.rawRumEvent.action.type==="click"&&(!((vn=(pn=dn.rawRumEvent.action.frustration)===null||pn===void 0?void 0:pn.type)===null||vn===void 0)&&vn.length)&&"events"in dn.domainContext&&(!((kn=dn.domainContext.events)===null||kn===void 0)&&kn.length)&&ln({timestamp:dn.rawRumEvent.date,type:RecordType.FrustrationRecord,data:{frustrationTypes:dn.rawRumEvent.action.frustration.type,recordIds:dn.domainContext.events.map(function(Sn){return cn.getIdForEvent(Sn)})}})}).unsubscribe}var VISUAL_VIEWPORT_OBSERVER_THRESHOLD=200;function initViewportResizeObserver(sn){return initViewportObservable().subscribe(sn).unsubscribe}function initVisualViewportResizeObserver(sn){var ln=window.visualViewport;if(!ln)return noop$7;var cn=throttle$1(function(){sn(getVisualViewport(ln))},VISUAL_VIEWPORT_OBSERVER_THRESHOLD,{trailing:!1}),dn=cn.throttled,pn=cn.cancel,vn=addEventListeners(ln,["resize","scroll"],dn,{capture:!0,passive:!0}).stop;return function(){vn(),pn()}}var MUTATION_PROCESS_MAX_DELAY=100;function createMutationBatch(sn){var ln=noop$7,cn=[];function dn(){ln(),sn(cn),cn=[]}return{addMutations:function(pn){cn.length===0&&(ln=requestIdleCallback(dn,{timeout:MUTATION_PROCESS_MAX_DELAY})),cn.push.apply(cn,pn)},flush:dn,stop:function(){ln()}}}function requestIdleCallback(sn,ln){if(window.requestIdleCallback&&window.cancelIdleCallback){var cn=window.requestIdleCallback(monitor(sn),ln);return function(){return window.cancelIdleCallback(cn)}}var dn=window.requestAnimationFrame(monitor(sn));return function(){return window.cancelAnimationFrame(dn)}}function initMutationObserver(sn,ln,cn,dn){var pn=getMutationObserverConstructor();if(!pn)return{stop:noop$7,flush:noop$7};var vn=createMutationBatch(function(Sn){processMutations(Sn.concat(kn.takeRecords()),sn,ln,cn,dn)}),kn=new pn(monitor(vn.addMutations));return kn.observe(dn,{attributeOldValue:!0,attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),{stop:function(){kn.disconnect(),vn.stop()},flush:function(){vn.flush()}}}function processMutations(sn,ln,cn,dn,pn){sn.filter(function(Fn){return Fn.type==="childList"}).forEach(function(Fn){Fn.removedNodes.forEach(function(zn){traverseRemovedShadowDom(zn,dn.removeShadowRoot)})});var vn=sn.filter(function(Fn){return pn.contains(Fn.target)&&nodeAndAncestorsHaveSerializedNode(Fn.target)&&getNodePrivacyLevel(Fn.target,cn.defaultPrivacyLevel)!==NodePrivacyLevel.HIDDEN}),kn=processChildListMutations(vn.filter(function(Fn){return Fn.type==="childList"}),cn,dn),Sn=kn.adds,wn=kn.removes,Pn=kn.hasBeenSerialized,Nn=processCharacterDataMutations(vn.filter(function(Fn){return Fn.type==="characterData"&&!Pn(Fn.target)}),cn),Ln=processAttributesMutations(vn.filter(function(Fn){return Fn.type==="attributes"&&!Pn(Fn.target)}),cn);!Nn.length&&!Ln.length&&!wn.length&&!Sn.length||ln({adds:Sn,removes:wn,texts:Nn,attributes:Ln})}function processChildListMutations(sn,ln,cn){for(var dn=new Set,pn=new Map,vn=function(ss){ss.addedNodes.forEach(function(as){dn.add(as)}),ss.removedNodes.forEach(function(as){dn.has(as)||pn.set(as,ss.target),dn.delete(as)})},kn=0,Sn=sn;kn<Sn.length;kn++){var wn=Sn[kn];vn(wn)}var Pn=Array.from(dn);sortAddedAndMovedNodes(Pn);for(var Nn=new Set,Ln=[],Fn=0,zn=Pn;Fn<zn.length;Fn++){var Dn=zn[Fn];if(!Jn(Dn)){var Kn=getNodePrivacyLevel(Dn.parentNode,ln.defaultPrivacyLevel);if(!(Kn===NodePrivacyLevel.HIDDEN||Kn===NodePrivacyLevel.IGNORE)){var qn=serializeNodeWithId(Dn,{serializedNodeIds:Nn,parentNodePrivacyLevel:Kn,serializationContext:{status:2,shadowRootsController:cn},configuration:ln});if(qn){var Zn=getParentNode(Dn);Ln.push({nextId:rs(Dn),parentId:getSerializedNodeId(Zn),node:qn})}}}}var Yn=[];return pn.forEach(function(ss,as){hasSerializedNode(as)&&Yn.push({parentId:getSerializedNodeId(ss),id:getSerializedNodeId(as)})}),{adds:Ln,removes:Yn,hasBeenSerialized:Jn};function Jn(ss){return hasSerializedNode(ss)&&Nn.has(getSerializedNodeId(ss))}function rs(ss){for(var as=ss.nextSibling;as;){if(hasSerializedNode(as))return getSerializedNodeId(as);as=as.nextSibling}return null}}function processCharacterDataMutations(sn,ln){for(var cn,dn=[],pn=new Set,vn=sn.filter(function(Ln){return pn.has(Ln.target)?!1:(pn.add(Ln.target),!0)}),kn=0,Sn=vn;kn<Sn.length;kn++){var wn=Sn[kn],Pn=wn.target.textContent;if(Pn!==wn.oldValue){var Nn=getNodePrivacyLevel(getParentNode(wn.target),ln.defaultPrivacyLevel);Nn===NodePrivacyLevel.HIDDEN||Nn===NodePrivacyLevel.IGNORE||dn.push({id:getSerializedNodeId(wn.target),value:(cn=getTextContent(wn.target,!1,Nn))!==null&&cn!==void 0?cn:null})}}return dn}function processAttributesMutations(sn,ln){for(var cn=[],dn=new Map,pn=sn.filter(function(Kn){var qn=dn.get(Kn.target);return qn!=null&&qn.has(Kn.attributeName)?!1:(qn?qn.add(Kn.attributeName):dn.set(Kn.target,new Set([Kn.attributeName])),!0)}),vn=new Map,kn=0,Sn=pn;kn<Sn.length;kn++){var wn=Sn[kn],Pn=wn.target.getAttribute(wn.attributeName);if(Pn!==wn.oldValue){var Nn=getNodePrivacyLevel(wn.target,ln.defaultPrivacyLevel),Ln=serializeAttribute(wn.target,Nn,wn.attributeName,ln),Fn=void 0;if(wn.attributeName==="value"){var zn=getElementInputValue(wn.target,Nn);if(zn===void 0)continue;Fn=zn}else typeof Ln=="string"?Fn=Ln:Fn=null;var Dn=vn.get(wn.target);Dn||(Dn={id:getSerializedNodeId(wn.target),attributes:{}},cn.push(Dn),vn.set(wn.target,Dn)),Dn.attributes[wn.attributeName]=Fn}}return cn}function sortAddedAndMovedNodes(sn){sn.sort(function(ln,cn){var dn=ln.compareDocumentPosition(cn);return dn&Node.DOCUMENT_POSITION_CONTAINED_BY?-1:dn&Node.DOCUMENT_POSITION_CONTAINS||dn&Node.DOCUMENT_POSITION_FOLLOWING?1:dn&Node.DOCUMENT_POSITION_PRECEDING?-1:0})}function traverseRemovedShadowDom(sn,ln){isNodeShadowHost(sn)&&ln(sn.shadowRoot),getChildNodes(sn).forEach(function(cn){return traverseRemovedShadowDom(cn,ln)})}function initFocusObserver(sn){return addEventListeners(window,["focus","blur"],function(){sn({has_focus:document.hasFocus()})}).stop}function initRecordIds(){var sn=new WeakMap,ln=1;return{getIdForEvent:function(cn){return sn.has(cn)||sn.set(cn,ln++),sn.get(cn)}}}function initObservers(sn){var ln=initRecordIds(),cn=initMutationObserver(sn.mutationCb,sn.configuration,sn.shadowRootsController,document),dn=initMoveObserver(sn.mousemoveCb),pn=initMouseInteractionObserver(sn.mouseInteractionCb,sn.configuration.defaultPrivacyLevel,ln),vn=initScrollObserver(sn.scrollCb,sn.configuration.defaultPrivacyLevel,sn.elementsScrollPositions),kn=initViewportResizeObserver(sn.viewportResizeCb),Sn=initInputObserver(sn.inputCb,sn.configuration.defaultPrivacyLevel),wn=initMediaInteractionObserver(sn.mediaInteractionCb,sn.configuration.defaultPrivacyLevel),Pn=initStyleSheetObserver(sn.styleSheetCb),Nn=initFocusObserver(sn.focusCb),Ln=initVisualViewportResizeObserver(sn.visualViewportResizeCb),Fn=initFrustrationObserver(sn.lifeCycle,sn.frustrationCb,ln);return{flush:function(){cn.flush()},stop:function(){cn.stop(),dn(),pn(),vn(),kn(),Sn(),wn(),Pn(),Nn(),Ln(),Fn()}}}function createElementsScrollPositions(){var sn=new WeakMap;return{set:function(ln,cn){ln===document&&!document.scrollingElement||sn.set(ln===document?document.scrollingElement:ln,cn)},get:function(ln){return sn.get(ln)},has:function(ln){return sn.has(ln)}}}var initShadowRootsController=function(sn,ln){var cn=ln.mutationCb,dn=ln.inputCb,pn=new Map,vn={addShadowRoot:function(kn){var Sn=initMutationObserver(cn,sn,vn,kn),wn=Sn.stop,Pn=Sn.flush,Nn=initInputObserver(dn,sn.defaultPrivacyLevel,{target:kn,domEvents:["change"]});pn.set(kn,{flush:Pn,stop:function(){wn(),Nn()}})},removeShadowRoot:function(kn){var Sn=pn.get(kn);Sn&&(Sn.stop(),pn.delete(kn))},stop:function(){pn.forEach(function(kn){var Sn=kn.stop;return Sn()})},flush:function(){pn.forEach(function(kn){var Sn=kn.flush;return Sn()})}};return vn};function record(sn){var ln=sn.emit;if(!ln)throw new Error("emit function is required");var cn=createElementsScrollPositions(),dn=function(Ln){ln(assembleIncrementalSnapshot(IncrementalSource.Mutation,Ln))},pn=function(Ln){return ln(assembleIncrementalSnapshot(IncrementalSource.Input,Ln))},vn=initShadowRootsController(sn.configuration,{mutationCb:dn,inputCb:pn}),kn=function(Ln,Fn){Ln===void 0&&(Ln=timeStampNow()),Fn===void 0&&(Fn={status:0,elementsScrollPositions:cn,shadowRootsController:vn});var zn=getViewportDimension(),Dn=zn.width,Kn=zn.height;ln({data:{height:Kn,href:window.location.href,width:Dn},type:RecordType.Meta,timestamp:Ln}),ln({data:{has_focus:document.hasFocus()},type:RecordType.Focus,timestamp:Ln}),ln({data:{node:serializeDocument(document,sn.configuration,Fn),initialOffset:{left:getScrollX(),top:getScrollY()}},type:RecordType.FullSnapshot,timestamp:Ln}),window.visualViewport&&ln({data:getVisualViewport(window.visualViewport),type:RecordType.VisualViewport,timestamp:Ln})};kn();var Sn=initObservers({lifeCycle:sn.lifeCycle,configuration:sn.configuration,elementsScrollPositions:cn,inputCb:pn,mediaInteractionCb:function(Ln){return ln(assembleIncrementalSnapshot(IncrementalSource.MediaInteraction,Ln))},mouseInteractionCb:function(Ln){return ln(Ln)},mousemoveCb:function(Ln,Fn){return ln(assembleIncrementalSnapshot(Fn,{positions:Ln}))},mutationCb:dn,scrollCb:function(Ln){return ln(assembleIncrementalSnapshot(IncrementalSource.Scroll,Ln))},styleSheetCb:function(Ln){return ln(assembleIncrementalSnapshot(IncrementalSource.StyleSheetRule,Ln))},viewportResizeCb:function(Ln){return ln(assembleIncrementalSnapshot(IncrementalSource.ViewportResize,Ln))},frustrationCb:function(Ln){return ln(Ln)},focusCb:function(Ln){return ln({data:Ln,type:RecordType.Focus,timestamp:timeStampNow()})},visualViewportResizeCb:function(Ln){ln({data:Ln,type:RecordType.VisualViewport,timestamp:timeStampNow()})},shadowRootsController:vn}),wn=Sn.stop,Pn=Sn.flush;function Nn(){vn.flush(),Pn()}return{stop:function(){vn.stop(),wn()},takeSubsequentFullSnapshot:function(Ln){Nn(),kn(Ln,{shadowRootsController:vn,status:1,elementsScrollPositions:cn})},flushMutations:Nn,shadowRootsController:vn}}function buildReplayPayload(sn,ln,cn){var dn=new FormData;dn.append("segment",new Blob([sn],{type:"application/octet-stream"}),"".concat(ln.session.id,"-").concat(ln.start));var pn=assign$2({raw_segment_size:cn,compressed_segment_size:sn.byteLength},ln),vn=JSON.stringify(pn);return dn.append("event",new Blob([vn],{type:"application/json"})),{data:dn,bytesCount:sn.byteLength}}var MAX_STATS_HISTORY=10,statsPerView;function getSegmentsCount(sn){return getOrCreateReplayStats(sn).segments_count}function addSegment(sn){getOrCreateReplayStats(sn).segments_count+=1}function addRecord(sn){getOrCreateReplayStats(sn).records_count+=1}function addWroteData(sn,ln){getOrCreateReplayStats(sn).segments_total_raw_size+=ln}function getReplayStats(sn){return statsPerView==null?void 0:statsPerView.get(sn)}function getOrCreateReplayStats(sn){statsPerView||(statsPerView=new Map);var ln;return statsPerView.has(sn)?ln=statsPerView.get(sn):(ln={records_count:0,segments_count:0,segments_total_raw_size:0},statsPerView.set(sn,ln),statsPerView.size>MAX_STATS_HISTORY&&deleteOldestStats()),ln}function deleteOldestStats(){if(statsPerView)if(statsPerView.keys)statsPerView.delete(statsPerView.keys().next().value);else{var sn=!0;statsPerView.forEach(function(ln,cn){sn&&(statsPerView.delete(cn),sn=!1)})}}var nextId=0,Segment$1=function(){function sn(ln,cn,dn,pn,vn,kn){var Sn=this;this.worker=ln,this.id=nextId++;var wn=cn.view.id;this.metadata=assign$2({start:pn.timestamp,end:pn.timestamp,creation_reason:dn,records_count:1,has_full_snapshot:pn.type===RecordType.FullSnapshot,index_in_view:getSegmentsCount(wn),source:"browser"},cn),addSegment(wn),addRecord(wn);var Pn=addEventListener(ln,"message",function(Nn){var Ln=Nn.data;Ln.type==="errored"||Ln.type==="initialized"||(Ln.id===Sn.id?(addWroteData(wn,Ln.additionalBytesCount),Ln.type==="flushed"?(kn(Ln.result,Ln.rawBytesCount),Pn()):vn(Ln.compressedBytesCount)):Ln.id>Sn.id&&(Pn(),addTelemetryDebug("Segment did not receive a 'flush' response before being replaced.")))}).stop;sendToExtension("record",{record:pn,segment:this.metadata}),this.worker.postMessage({data:'{"records":['.concat(JSON.stringify(pn)),id:this.id,action:"write"})}return sn.prototype.addRecord=function(ln){var cn;this.metadata.start=Math.min(this.metadata.start,ln.timestamp),this.metadata.end=Math.max(this.metadata.end,ln.timestamp),this.metadata.records_count+=1,addRecord(this.metadata.view.id),(cn=this.metadata).has_full_snapshot||(cn.has_full_snapshot=ln.type===RecordType.FullSnapshot),sendToExtension("record",{record:ln,segment:this.metadata}),this.worker.postMessage({data:",".concat(JSON.stringify(ln)),id:this.id,action:"write"})},sn.prototype.flush=function(ln){this.worker.postMessage({data:"],".concat(JSON.stringify(this.metadata).slice(1),`
`),id:this.id,action:"flush"}),this.flushReason=ln},sn}(),SEGMENT_DURATION_LIMIT=30*ONE_SECOND,SEGMENT_BYTES_LIMIT=6e4;function startSegmentCollection(sn,ln,cn,dn,pn,vn){return doStartSegmentCollection(sn,function(){return computeSegmentContext(ln,cn,dn)},pn,vn)}function doStartSegmentCollection(sn,ln,cn,dn){var pn={status:0,nextSegmentCreationReason:"init"},vn=sn.subscribe(2,function(){Sn("view_change")}).unsubscribe,kn=sn.subscribe(9,function(Pn){Sn(Pn.reason)}).unsubscribe;function Sn(Pn){pn.status===1&&(pn.segment.flush(Pn),clearTimeout$1(pn.expirationTimeoutId)),Pn!=="stop"?pn={status:0,nextSegmentCreationReason:Pn}:pn={status:2}}function wn(Pn,Nn){var Ln=ln();if(Ln){var Fn=new Segment$1(dn,Ln,Pn,Nn,function(zn){!Fn.flushReason&&zn>SEGMENT_BYTES_LIMIT&&Sn("segment_bytes_limit")},function(zn,Dn){var Kn=buildReplayPayload(zn,Fn.metadata,Dn);isPageExitReason(Fn.flushReason)?cn.sendOnExit(Kn):cn.send(Kn)});pn={status:1,segment:Fn,expirationTimeoutId:setTimeout$1(function(){Sn("segment_duration_limit")},SEGMENT_DURATION_LIMIT)}}}return{addRecord:function(Pn){switch(pn.status){case 0:wn(pn.nextSegmentCreationReason,Pn);break;case 1:pn.segment.addRecord(Pn);break}},stop:function(){Sn("stop"),vn(),kn()}}}function computeSegmentContext(sn,ln,cn){var dn=ln.findTrackedSession(),pn=cn.findView();if(!(!dn||!pn))return{application:{id:sn},session:{id:dn.id},view:{id:pn.id}}}var workerURL;function createDeflateWorker(){return workerURL||(workerURL=URL.createObjectURL(new Blob(["(".concat(workerCodeFn,")(self)")]))),new Worker(workerURL)}function workerCodeFn(){sn(function(){var cn=ln(),dn=cn.Deflate,pn=cn.constants,vn=cn.string2buf,kn=new dn,Sn=0;self.addEventListener("message",sn(function(Pn){var Nn=Pn.data;switch(Nn.action){case"init":self.postMessage({type:"initialized"});break;case"write":{var Ln=wn(Nn.data);self.postMessage({type:"wrote",id:Nn.id,compressedBytesCount:kn.chunks.reduce(function(Fn,zn){return Fn+zn.length},0),additionalBytesCount:Ln});break}case"flush":{var Ln=Nn.data?wn(Nn.data):0;kn.push("",pn.Z_FINISH),self.postMessage({type:"flushed",id:Nn.id,result:kn.result,additionalBytesCount:Ln,rawBytesCount:Sn}),kn=new dn,Sn=0;break}}}));function wn(Pn){var Nn=vn(Pn);return kn.push(Nn,pn.Z_SYNC_FLUSH),Sn+=Nn.length,Nn.length}})();function sn(cn){return function(){try{return cn.apply(this,arguments)}catch(dn){try{self.postMessage({type:"errored",error:dn})}catch{self.postMessage({type:"errored",error:"".concat(dn)})}}}}function ln(){var cn=4,dn=0,pn=1,vn=2;function kn(su){for(var _i=su.length;--_i>=0;)su[_i]=0}var Sn=0,wn=1,Pn=2,Nn=3,Ln=258,Fn=29,zn=256,Dn=zn+1+Fn,Kn=30,qn=19,Zn=2*Dn+1,Yn=15,Jn=16,rs=7,ss=256,as=16,ds=17,Es=18,Ss=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Qn=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),ms=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),Ts=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Rs=512,ys=new Array((Dn+2)*2);kn(ys);var _s=new Array(Kn*2);kn(_s);var js=new Array(Rs);kn(js);var bs=new Array(Ln-Nn+1);kn(bs);var ks=new Array(Fn);kn(ks);var xs=new Array(Kn);kn(xs);function Ks(su,_i,As,Hs,Us){this.static_tree=su,this.extra_bits=_i,this.extra_base=As,this.elems=Hs,this.max_length=Us,this.has_stree=su&&su.length}var Vs,Js,ru;function hs(su,_i){this.dyn_tree=su,this.max_code=0,this.stat_desc=_i}var lu=function(_i){return _i<256?js[_i]:js[256+(_i>>>7)]},_u=function(_i,As){_i.pending_buf[_i.pending++]=As&255,_i.pending_buf[_i.pending++]=As>>>8&255},yu=function(_i,As,Hs){_i.bi_valid>Jn-Hs?(_i.bi_buf|=As<<_i.bi_valid&65535,_u(_i,_i.bi_buf),_i.bi_buf=As>>Jn-_i.bi_valid,_i.bi_valid+=Hs-Jn):(_i.bi_buf|=As<<_i.bi_valid&65535,_i.bi_valid+=Hs)},Xu=function(_i,As,Hs){yu(_i,Hs[As*2],Hs[As*2+1])},Du=function(_i,As){var Hs=0;do Hs|=_i&1,_i>>>=1,Hs<<=1;while(--As>0);return Hs>>>1},Fl=function(_i){_i.bi_valid===16?(_u(_i,_i.bi_buf),_i.bi_buf=0,_i.bi_valid=0):_i.bi_valid>=8&&(_i.pending_buf[_i.pending++]=_i.bi_buf&255,_i.bi_buf>>=8,_i.bi_valid-=8)},Vp=function(_i,As){var Hs=As.dyn_tree,Us=As.max_code,$s=As.stat_desc.static_tree,mu=As.stat_desc.has_stree,uu=As.stat_desc.extra_bits,fu=As.stat_desc.extra_base,El=As.stat_desc.max_length,wu,jp,Ll,Bl,Dy,Ly,U_=0;for(Bl=0;Bl<=Yn;Bl++)_i.bl_count[Bl]=0;for(Hs[_i.heap[_i.heap_max]*2+1]=0,wu=_i.heap_max+1;wu<Zn;wu++)jp=_i.heap[wu],Bl=Hs[Hs[jp*2+1]*2+1]+1,Bl>El&&(Bl=El,U_++),Hs[jp*2+1]=Bl,!(jp>Us)&&(_i.bl_count[Bl]++,Dy=0,jp>=fu&&(Dy=uu[jp-fu]),Ly=Hs[jp*2],_i.opt_len+=Ly*(Bl+Dy),mu&&(_i.static_len+=Ly*($s[jp*2+1]+Dy)));if(U_!==0){do{for(Bl=El-1;_i.bl_count[Bl]===0;)Bl--;_i.bl_count[Bl]--,_i.bl_count[Bl+1]+=2,_i.bl_count[El]--,U_-=2}while(U_>0);for(Bl=El;Bl!==0;Bl--)for(jp=_i.bl_count[Bl];jp!==0;)Ll=_i.heap[--wu],!(Ll>Us)&&(Hs[Ll*2+1]!==Bl&&(_i.opt_len+=(Bl-Hs[Ll*2+1])*Hs[Ll*2],Hs[Ll*2+1]=Bl),jp--)}},Ys=function(_i,As,Hs){var Us=new Array(Yn+1),$s=0,mu,uu;for(mu=1;mu<=Yn;mu++)Us[mu]=$s=$s+Hs[mu-1]<<1;for(uu=0;uu<=As;uu++){var fu=_i[uu*2+1];fu!==0&&(_i[uu*2]=Du(Us[fu]++,fu))}},vu=function(){var _i,As,Hs,Us,$s,mu=new Array(Yn+1);for(Hs=0,Us=0;Us<Fn-1;Us++)for(ks[Us]=Hs,_i=0;_i<1<<Ss[Us];_i++)bs[Hs++]=Us;for(bs[Hs-1]=Us,$s=0,Us=0;Us<16;Us++)for(xs[Us]=$s,_i=0;_i<1<<Qn[Us];_i++)js[$s++]=Us;for($s>>=7;Us<Kn;Us++)for(xs[Us]=$s<<7,_i=0;_i<1<<Qn[Us]-7;_i++)js[256+$s++]=Us;for(As=0;As<=Yn;As++)mu[As]=0;for(_i=0;_i<=143;)ys[_i*2+1]=8,_i++,mu[8]++;for(;_i<=255;)ys[_i*2+1]=9,_i++,mu[9]++;for(;_i<=279;)ys[_i*2+1]=7,_i++,mu[7]++;for(;_i<=287;)ys[_i*2+1]=8,_i++,mu[8]++;for(Ys(ys,Dn+1,mu),_i=0;_i<Kn;_i++)_s[_i*2+1]=5,_s[_i*2]=Du(_i,5);Vs=new Ks(ys,Ss,zn+1,Dn,Yn),Js=new Ks(_s,Qn,0,Kn,Yn),ru=new Ks(new Array(0),ms,0,qn,rs)},Wl=function(_i){var As;for(As=0;As<Dn;As++)_i.dyn_ltree[As*2]=0;for(As=0;As<Kn;As++)_i.dyn_dtree[As*2]=0;for(As=0;As<qn;As++)_i.bl_tree[As*2]=0;_i.dyn_ltree[ss*2]=1,_i.opt_len=_i.static_len=0,_i.last_lit=_i.matches=0},lp=function(_i){_i.bi_valid>8?_u(_i,_i.bi_buf):_i.bi_valid>0&&(_i.pending_buf[_i.pending++]=_i.bi_buf),_i.bi_buf=0,_i.bi_valid=0},am=function(_i,As,Hs,Us){lp(_i),Us&&(_u(_i,Hs),_u(_i,~Hs)),_i.pending_buf.set(_i.window.subarray(As,As+Hs),_i.pending),_i.pending+=Hs},fl=function(_i,As,Hs,Us){var $s=As*2,mu=Hs*2;return _i[$s]<_i[mu]||_i[$s]===_i[mu]&&Us[As]<=Us[Hs]},Tu=function(_i,As,Hs){for(var Us=_i.heap[Hs],$s=Hs<<1;$s<=_i.heap_len&&($s<_i.heap_len&&fl(As,_i.heap[$s+1],_i.heap[$s],_i.depth)&&$s++,!fl(As,Us,_i.heap[$s],_i.depth));)_i.heap[Hs]=_i.heap[$s],Hs=$s,$s<<=1;_i.heap[Hs]=Us},cp=function(_i,As,Hs){var Us,$s,mu=0,uu,fu;if(_i.last_lit!==0)do Us=_i.pending_buf[_i.d_buf+mu*2]<<8|_i.pending_buf[_i.d_buf+mu*2+1],$s=_i.pending_buf[_i.l_buf+mu],mu++,Us===0?Xu(_i,$s,As):(uu=bs[$s],Xu(_i,uu+zn+1,As),fu=Ss[uu],fu!==0&&($s-=ks[uu],yu(_i,$s,fu)),Us--,uu=lu(Us),Xu(_i,uu,Hs),fu=Qn[uu],fu!==0&&(Us-=xs[uu],yu(_i,Us,fu)));while(mu<_i.last_lit);Xu(_i,ss,As)},wp=function(_i,As){var Hs=As.dyn_tree,Us=As.stat_desc.static_tree,$s=As.stat_desc.has_stree,mu=As.stat_desc.elems,uu,fu,El=-1,wu;for(_i.heap_len=0,_i.heap_max=Zn,uu=0;uu<mu;uu++)Hs[uu*2]!==0?(_i.heap[++_i.heap_len]=El=uu,_i.depth[uu]=0):Hs[uu*2+1]=0;for(;_i.heap_len<2;)wu=_i.heap[++_i.heap_len]=El<2?++El:0,Hs[wu*2]=1,_i.depth[wu]=0,_i.opt_len--,$s&&(_i.static_len-=Us[wu*2+1]);for(As.max_code=El,uu=_i.heap_len>>1;uu>=1;uu--)Tu(_i,Hs,uu);wu=mu;do uu=_i.heap[1],_i.heap[1]=_i.heap[_i.heap_len--],Tu(_i,Hs,1),fu=_i.heap[1],_i.heap[--_i.heap_max]=uu,_i.heap[--_i.heap_max]=fu,Hs[wu*2]=Hs[uu*2]+Hs[fu*2],_i.depth[wu]=(_i.depth[uu]>=_i.depth[fu]?_i.depth[uu]:_i.depth[fu])+1,Hs[uu*2+1]=Hs[fu*2+1]=wu,_i.heap[1]=wu++,Tu(_i,Hs,1);while(_i.heap_len>=2);_i.heap[--_i.heap_max]=_i.heap[1],Vp(_i,As),Ys(Hs,El,_i.bl_count)},ry=function(_i,As,Hs){var Us,$s=-1,mu,uu=As[0*2+1],fu=0,El=7,wu=4;for(uu===0&&(El=138,wu=3),As[(Hs+1)*2+1]=65535,Us=0;Us<=Hs;Us++)mu=uu,uu=As[(Us+1)*2+1],!(++fu<El&&mu===uu)&&(fu<wu?_i.bl_tree[mu*2]+=fu:mu!==0?(mu!==$s&&_i.bl_tree[mu*2]++,_i.bl_tree[as*2]++):fu<=10?_i.bl_tree[ds*2]++:_i.bl_tree[Es*2]++,fu=0,$s=mu,uu===0?(El=138,wu=3):mu===uu?(El=6,wu=3):(El=7,wu=4))},vp=function(_i,As,Hs){var Us,$s=-1,mu,uu=As[0*2+1],fu=0,El=7,wu=4;for(uu===0&&(El=138,wu=3),Us=0;Us<=Hs;Us++)if(mu=uu,uu=As[(Us+1)*2+1],!(++fu<El&&mu===uu)){if(fu<wu)do Xu(_i,mu,_i.bl_tree);while(--fu!==0);else mu!==0?(mu!==$s&&(Xu(_i,mu,_i.bl_tree),fu--),Xu(_i,as,_i.bl_tree),yu(_i,fu-3,2)):fu<=10?(Xu(_i,ds,_i.bl_tree),yu(_i,fu-3,3)):(Xu(_i,Es,_i.bl_tree),yu(_i,fu-11,7));fu=0,$s=mu,uu===0?(El=138,wu=3):mu===uu?(El=6,wu=3):(El=7,wu=4)}},Qv=function(_i){var As;for(ry(_i,_i.dyn_ltree,_i.l_desc.max_code),ry(_i,_i.dyn_dtree,_i.d_desc.max_code),wp(_i,_i.bl_desc),As=qn-1;As>=3&&_i.bl_tree[Ts[As]*2+1]===0;As--);return _i.opt_len+=3*(As+1)+5+5+4,As},Jy=function(_i,As,Hs,Us){var $s;for(yu(_i,As-257,5),yu(_i,Hs-1,5),yu(_i,Us-4,4),$s=0;$s<Us;$s++)yu(_i,_i.bl_tree[Ts[$s]*2+1],3);vp(_i,_i.dyn_ltree,As-1),vp(_i,_i.dyn_dtree,Hs-1)},Fu=function(_i){var As=4093624447,Hs;for(Hs=0;Hs<=31;Hs++,As>>>=1)if(As&1&&_i.dyn_ltree[Hs*2]!==0)return dn;if(_i.dyn_ltree[9*2]!==0||_i.dyn_ltree[10*2]!==0||_i.dyn_ltree[13*2]!==0)return pn;for(Hs=32;Hs<zn;Hs++)if(_i.dyn_ltree[Hs*2]!==0)return pn;return dn},Eu=!1,el=function(_i){Eu||(vu(),Eu=!0),_i.l_desc=new hs(_i.dyn_ltree,Vs),_i.d_desc=new hs(_i.dyn_dtree,Js),_i.bl_desc=new hs(_i.bl_tree,ru),_i.bi_buf=0,_i.bi_valid=0,Wl(_i)},pl=function(_i,As,Hs,Us){yu(_i,(Sn<<1)+(Us?1:0),3),am(_i,As,Hs,!0)},Xp=function(_i){yu(_i,wn<<1,3),Xu(_i,ss,ys),Fl(_i)},_p=function(_i,As,Hs,Us){var $s,mu,uu=0;_i.level>0?(_i.strm.data_type===vn&&(_i.strm.data_type=Fu(_i)),wp(_i,_i.l_desc),wp(_i,_i.d_desc),uu=Qv(_i),$s=_i.opt_len+3+7>>>3,mu=_i.static_len+3+7>>>3,mu<=$s&&($s=mu)):$s=mu=Hs+5,Hs+4<=$s&&As!==-1?pl(_i,As,Hs,Us):_i.strategy===cn||mu===$s?(yu(_i,(wn<<1)+(Us?1:0),3),cp(_i,ys,_s)):(yu(_i,(Pn<<1)+(Us?1:0),3),Jy(_i,_i.l_desc.max_code+1,_i.d_desc.max_code+1,uu+1),cp(_i,_i.dyn_ltree,_i.dyn_dtree)),Wl(_i),Us&&lp(_i)},Cu=function(_i,As,Hs){return _i.pending_buf[_i.d_buf+_i.last_lit*2]=As>>>8&255,_i.pending_buf[_i.d_buf+_i.last_lit*2+1]=As&255,_i.pending_buf[_i.l_buf+_i.last_lit]=Hs&255,_i.last_lit++,As===0?_i.dyn_ltree[Hs*2]++:(_i.matches++,As--,_i.dyn_ltree[(bs[Hs]+zn+1)*2]++,_i.dyn_dtree[lu(As)*2]++),_i.last_lit===_i.lit_bufsize-1},Iu=el,Gp=pl,Qp=_p,wy=Cu,Ay=Xp,ny={_tr_init:Iu,_tr_stored_block:Gp,_tr_flush_block:Qp,_tr_tally:wy,_tr_align:Ay},zE=function(_i,As,Hs,Us){for(var $s=_i&65535|0,mu=_i>>>16&65535|0,uu=0;Hs!==0;){uu=Hs>2e3?2e3:Hs,Hs-=uu;do $s=$s+As[Us++]|0,mu=mu+$s|0;while(--uu);$s%=65521,mu%=65521}return $s|mu<<16|0},Tv=zE,HE=function(){for(var _i,As=[],Hs=0;Hs<256;Hs++){_i=Hs;for(var Us=0;Us<8;Us++)_i=_i&1?3988292384^_i>>>1:_i>>>1;As[Hs]=_i}return As},kv=new Uint32Array(HE()),KE=function(_i,As,Hs,Us){var $s=kv,mu=Us+Hs;_i^=-1;for(var uu=Us;uu<mu;uu++)_i=_i>>>8^$s[(_i^As[uu])&255];return _i^-1},Iy=KE,Py={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Il={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8},zs=ny._tr_init,O0=ny._tr_stored_block,Zv=ny._tr_flush_block,Zl=ny._tr_tally,Zp=ny._tr_align,Mp=Il.Z_NO_FLUSH,Lm=Il.Z_PARTIAL_FLUSH,ev=Il.Z_FULL_FLUSH,Vu=Il.Z_FINISH,Pu=Il.Z_BLOCK,rp=Il.Z_OK,om=Il.Z_STREAM_END,Bs=Il.Z_STREAM_ERROR,O_=Il.Z_DATA_ERROR,Rp=Il.Z_BUF_ERROR,ol=Il.Z_DEFAULT_COMPRESSION,M0=Il.Z_FILTERED,pm=Il.Z_HUFFMAN_ONLY,iy=Il.Z_RLE,$v=Il.Z_FIXED,R0=Il.Z_DEFAULT_STRATEGY,WE=Il.Z_UNKNOWN,np=Il.Z_DEFLATED,MT=9,H$=15,qE=8,Jv=29,M_=256,bv=M_+1+Jv,R_=30,dp=19,zp=2*bv+1,tv=15,Wu=3,Np=258,Zu=Np+Wu+1,tl=32,N_=42,bl=69,Dp=73,ay=91,Hu=103,Ap=113,Em=666,Yl=1,Um=2,Ep=3,Oy=4,D_=3,hm=function(_i,As){return _i.msg=Py[As],As},L_=function(_i){return(_i<<1)-(_i>4?9:0)},gl=function(_i){for(var As=_i.length;--As>=0;)_i[As]=0},YE=function(_i,As,Hs){return(As<<_i.hash_shift^Hs)&_i.hash_mask},Jp=YE,ap=function(_i){var As=_i.state,Hs=As.pending;Hs>_i.avail_out&&(Hs=_i.avail_out),Hs!==0&&(_i.output.set(As.pending_buf.subarray(As.pending_out,As.pending_out+Hs),_i.next_out),_i.next_out+=Hs,As.pending_out+=Hs,_i.total_out+=Hs,_i.avail_out-=Hs,As.pending-=Hs,As.pending===0&&(As.pending_out=0))},Jl=function(_i,As){Zv(_i,_i.block_start>=0?_i.block_start:-1,_i.strstart-_i.block_start,As),_i.block_start=_i.strstart,ap(_i.strm)},Ou=function(_i,As){_i.pending_buf[_i.pending++]=As},Ip=function(_i,As){_i.pending_buf[_i.pending++]=As>>>8&255,_i.pending_buf[_i.pending++]=As&255},My=function(_i,As,Hs,Us){var $s=_i.avail_in;return $s>Us&&($s=Us),$s===0?0:(_i.avail_in-=$s,As.set(_i.input.subarray(_i.next_in,_i.next_in+$s),Hs),_i.state.wrap===1?_i.adler=Tv(_i.adler,As,$s,Hs):_i.state.wrap===2&&(_i.adler=Iy(_i.adler,As,$s,Hs)),_i.next_in+=$s,_i.total_in+=$s,$s)},fp=function(_i,As){var Hs=_i.max_chain_length,Us=_i.strstart,$s,mu,uu=_i.prev_length,fu=_i.nice_match,El=_i.strstart>_i.w_size-Zu?_i.strstart-(_i.w_size-Zu):0,wu=_i.window,jp=_i.w_mask,Ll=_i.prev,Bl=_i.strstart+Np,Dy=wu[Us+uu-1],Ly=wu[Us+uu];_i.prev_length>=_i.good_match&&(Hs>>=2),fu>_i.lookahead&&(fu=_i.lookahead);do if($s=As,!(wu[$s+uu]!==Ly||wu[$s+uu-1]!==Dy||wu[$s]!==wu[Us]||wu[++$s]!==wu[Us+1])){Us+=2,$s++;do;while(wu[++Us]===wu[++$s]&&wu[++Us]===wu[++$s]&&wu[++Us]===wu[++$s]&&wu[++Us]===wu[++$s]&&wu[++Us]===wu[++$s]&&wu[++Us]===wu[++$s]&&wu[++Us]===wu[++$s]&&wu[++Us]===wu[++$s]&&Us<Bl);if(mu=Np-(Bl-Us),Us=Bl-Np,mu>uu){if(_i.match_start=As,uu=mu,mu>=fu)break;Dy=wu[Us+uu-1],Ly=wu[Us+uu]}}while((As=Ll[As&jp])>El&&--Hs!==0);return uu<=_i.lookahead?uu:_i.lookahead},Ku=function(_i){var As=_i.w_size,Hs,Us,$s,mu,uu;do{if(mu=_i.window_size-_i.lookahead-_i.strstart,_i.strstart>=As+(As-Zu)){_i.window.set(_i.window.subarray(As,As+As),0),_i.match_start-=As,_i.strstart-=As,_i.block_start-=As,Us=_i.hash_size,Hs=Us;do $s=_i.head[--Hs],_i.head[Hs]=$s>=As?$s-As:0;while(--Us);Us=As,Hs=Us;do $s=_i.prev[--Hs],_i.prev[Hs]=$s>=As?$s-As:0;while(--Us);mu+=As}if(_i.strm.avail_in===0)break;if(Us=My(_i.strm,_i.window,_i.strstart+_i.lookahead,mu),_i.lookahead+=Us,_i.lookahead+_i.insert>=Wu)for(uu=_i.strstart-_i.insert,_i.ins_h=_i.window[uu],_i.ins_h=Jp(_i,_i.ins_h,_i.window[uu+1]);_i.insert&&(_i.ins_h=Jp(_i,_i.ins_h,_i.window[uu+Wu-1]),_i.prev[uu&_i.w_mask]=_i.head[_i.ins_h],_i.head[_i.ins_h]=uu,uu++,_i.insert--,!(_i.lookahead+_i.insert<Wu)););}while(_i.lookahead<Zu&&_i.strm.avail_in!==0)},Hp=function(_i,As){var Hs=65535;for(Hs>_i.pending_buf_size-5&&(Hs=_i.pending_buf_size-5);;){if(_i.lookahead<=1){if(Ku(_i),_i.lookahead===0&&As===Mp)return Yl;if(_i.lookahead===0)break}_i.strstart+=_i.lookahead,_i.lookahead=0;var Us=_i.block_start+Hs;if((_i.strstart===0||_i.strstart>=Us)&&(_i.lookahead=_i.strstart-Us,_i.strstart=Us,Jl(_i,!1),_i.strm.avail_out===0)||_i.strstart-_i.block_start>=_i.w_size-Zu&&(Jl(_i,!1),_i.strm.avail_out===0))return Yl}return _i.insert=0,As===Vu?(Jl(_i,!0),_i.strm.avail_out===0?Ep:Oy):(_i.strstart>_i.block_start&&(Jl(_i,!1),_i.strm.avail_out===0),Yl)},jm=function(_i,As){for(var Hs,Us;;){if(_i.lookahead<Zu){if(Ku(_i),_i.lookahead<Zu&&As===Mp)return Yl;if(_i.lookahead===0)break}if(Hs=0,_i.lookahead>=Wu&&(_i.ins_h=Jp(_i,_i.ins_h,_i.window[_i.strstart+Wu-1]),Hs=_i.prev[_i.strstart&_i.w_mask]=_i.head[_i.ins_h],_i.head[_i.ins_h]=_i.strstart),Hs!==0&&_i.strstart-Hs<=_i.w_size-Zu&&(_i.match_length=fp(_i,Hs)),_i.match_length>=Wu)if(Us=Zl(_i,_i.strstart-_i.match_start,_i.match_length-Wu),_i.lookahead-=_i.match_length,_i.match_length<=_i.max_lazy_match&&_i.lookahead>=Wu){_i.match_length--;do _i.strstart++,_i.ins_h=Jp(_i,_i.ins_h,_i.window[_i.strstart+Wu-1]),Hs=_i.prev[_i.strstart&_i.w_mask]=_i.head[_i.ins_h],_i.head[_i.ins_h]=_i.strstart;while(--_i.match_length!==0);_i.strstart++}else _i.strstart+=_i.match_length,_i.match_length=0,_i.ins_h=_i.window[_i.strstart],_i.ins_h=Jp(_i,_i.ins_h,_i.window[_i.strstart+1]);else Us=Zl(_i,0,_i.window[_i.strstart]),_i.lookahead--,_i.strstart++;if(Us&&(Jl(_i,!1),_i.strm.avail_out===0))return Yl}return _i.insert=_i.strstart<Wu-1?_i.strstart:Wu-1,As===Vu?(Jl(_i,!0),_i.strm.avail_out===0?Ep:Oy):_i.last_lit&&(Jl(_i,!1),_i.strm.avail_out===0)?Yl:Um},_l=function(_i,As){for(var Hs,Us,$s;;){if(_i.lookahead<Zu){if(Ku(_i),_i.lookahead<Zu&&As===Mp)return Yl;if(_i.lookahead===0)break}if(Hs=0,_i.lookahead>=Wu&&(_i.ins_h=Jp(_i,_i.ins_h,_i.window[_i.strstart+Wu-1]),Hs=_i.prev[_i.strstart&_i.w_mask]=_i.head[_i.ins_h],_i.head[_i.ins_h]=_i.strstart),_i.prev_length=_i.match_length,_i.prev_match=_i.match_start,_i.match_length=Wu-1,Hs!==0&&_i.prev_length<_i.max_lazy_match&&_i.strstart-Hs<=_i.w_size-Zu&&(_i.match_length=fp(_i,Hs),_i.match_length<=5&&(_i.strategy===M0||_i.match_length===Wu&&_i.strstart-_i.match_start>4096)&&(_i.match_length=Wu-1)),_i.prev_length>=Wu&&_i.match_length<=_i.prev_length){$s=_i.strstart+_i.lookahead-Wu,Us=Zl(_i,_i.strstart-1-_i.prev_match,_i.prev_length-Wu),_i.lookahead-=_i.prev_length-1,_i.prev_length-=2;do++_i.strstart<=$s&&(_i.ins_h=Jp(_i,_i.ins_h,_i.window[_i.strstart+Wu-1]),Hs=_i.prev[_i.strstart&_i.w_mask]=_i.head[_i.ins_h],_i.head[_i.ins_h]=_i.strstart);while(--_i.prev_length!==0);if(_i.match_available=0,_i.match_length=Wu-1,_i.strstart++,Us&&(Jl(_i,!1),_i.strm.avail_out===0))return Yl}else if(_i.match_available){if(Us=Zl(_i,0,_i.window[_i.strstart-1]),Us&&Jl(_i,!1),_i.strstart++,_i.lookahead--,_i.strm.avail_out===0)return Yl}else _i.match_available=1,_i.strstart++,_i.lookahead--}return _i.match_available&&(Us=Zl(_i,0,_i.window[_i.strstart-1]),_i.match_available=0),_i.insert=_i.strstart<Wu-1?_i.strstart:Wu-1,As===Vu?(Jl(_i,!0),_i.strm.avail_out===0?Ep:Oy):_i.last_lit&&(Jl(_i,!1),_i.strm.avail_out===0)?Yl:Um},Sm=function(_i,As){for(var Hs,Us,$s,mu,uu=_i.window;;){if(_i.lookahead<=Np){if(Ku(_i),_i.lookahead<=Np&&As===Mp)return Yl;if(_i.lookahead===0)break}if(_i.match_length=0,_i.lookahead>=Wu&&_i.strstart>0&&($s=_i.strstart-1,Us=uu[$s],Us===uu[++$s]&&Us===uu[++$s]&&Us===uu[++$s])){mu=_i.strstart+Np;do;while(Us===uu[++$s]&&Us===uu[++$s]&&Us===uu[++$s]&&Us===uu[++$s]&&Us===uu[++$s]&&Us===uu[++$s]&&Us===uu[++$s]&&Us===uu[++$s]&&$s<mu);_i.match_length=Np-(mu-$s),_i.match_length>_i.lookahead&&(_i.match_length=_i.lookahead)}if(_i.match_length>=Wu?(Hs=Zl(_i,1,_i.match_length-Wu),_i.lookahead-=_i.match_length,_i.strstart+=_i.match_length,_i.match_length=0):(Hs=Zl(_i,0,_i.window[_i.strstart]),_i.lookahead--,_i.strstart++),Hs&&(Jl(_i,!1),_i.strm.avail_out===0))return Yl}return _i.insert=0,As===Vu?(Jl(_i,!0),_i.strm.avail_out===0?Ep:Oy):_i.last_lit&&(Jl(_i,!1),_i.strm.avail_out===0)?Yl:Um},mm=function(_i,As){for(var Hs;;){if(_i.lookahead===0&&(Ku(_i),_i.lookahead===0)){if(As===Mp)return Yl;break}if(_i.match_length=0,Hs=Zl(_i,0,_i.window[_i.strstart]),_i.lookahead--,_i.strstart++,Hs&&(Jl(_i,!1),_i.strm.avail_out===0))return Yl}return _i.insert=0,As===Vu?(Jl(_i,!0),_i.strm.avail_out===0?Ep:Oy):_i.last_lit&&(Jl(_i,!1),_i.strm.avail_out===0)?Yl:Um};function ku(su,_i,As,Hs,Us){this.good_length=su,this.max_lazy=_i,this.nice_length=As,this.max_chain=Hs,this.func=Us}var Sp=[new ku(0,0,0,0,Hp),new ku(4,4,8,4,jm),new ku(4,5,16,8,jm),new ku(4,6,32,32,jm),new ku(4,4,16,16,_l),new ku(8,16,32,32,_l),new ku(8,16,128,128,_l),new ku(8,32,128,256,_l),new ku(32,128,258,1024,_l),new ku(32,258,258,4096,_l)],oy=function(_i){_i.window_size=2*_i.w_size,gl(_i.head),_i.max_lazy_match=Sp[_i.level].max_lazy,_i.good_match=Sp[_i.level].good_length,_i.nice_match=Sp[_i.level].nice_length,_i.max_chain_length=Sp[_i.level].max_chain,_i.strstart=0,_i.block_start=0,_i.lookahead=0,_i.insert=0,_i.match_length=_i.prev_length=Wu-1,_i.match_available=0,_i.ins_h=0};function e_(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=np,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(zp*2),this.dyn_dtree=new Uint16Array((2*R_+1)*2),this.bl_tree=new Uint16Array((2*dp+1)*2),gl(this.dyn_ltree),gl(this.dyn_dtree),gl(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(tv+1),this.heap=new Uint16Array(2*bv+1),gl(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*bv+1),gl(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}var xv=function(_i){if(!_i||!_i.state)return hm(_i,Bs);_i.total_in=_i.total_out=0,_i.data_type=WE;var As=_i.state;return As.pending=0,As.pending_out=0,As.wrap<0&&(As.wrap=-As.wrap),As.status=As.wrap?N_:Ap,_i.adler=As.wrap===2?0:1,As.last_flush=Mp,zs(As),rp},Fm=function(_i){var As=xv(_i);return As===rp&&oy(_i.state),As},XE=function(_i,As){return!_i||!_i.state||_i.state.wrap!==2?Bs:(_i.state.gzhead=As,rp)},rv=function(_i,As,Hs,Us,$s,mu){if(!_i)return Bs;var uu=1;if(As===ol&&(As=6),Us<0?(uu=0,Us=-Us):Us>15&&(uu=2,Us-=16),$s<1||$s>MT||Hs!==np||Us<8||Us>15||As<0||As>9||mu<0||mu>$v)return hm(_i,Bs);Us===8&&(Us=9);var fu=new e_;return _i.state=fu,fu.strm=_i,fu.wrap=uu,fu.gzhead=null,fu.w_bits=Us,fu.w_size=1<<fu.w_bits,fu.w_mask=fu.w_size-1,fu.hash_bits=$s+7,fu.hash_size=1<<fu.hash_bits,fu.hash_mask=fu.hash_size-1,fu.hash_shift=~~((fu.hash_bits+Wu-1)/Wu),fu.window=new Uint8Array(fu.w_size*2),fu.head=new Uint16Array(fu.hash_size),fu.prev=new Uint16Array(fu.w_size),fu.lit_bufsize=1<<$s+6,fu.pending_buf_size=fu.lit_bufsize*4,fu.pending_buf=new Uint8Array(fu.pending_buf_size),fu.d_buf=1*fu.lit_bufsize,fu.l_buf=(1+2)*fu.lit_bufsize,fu.level=As,fu.strategy=mu,fu.method=Hs,Fm(_i)},t_=function(_i,As){return rv(_i,As,np,H$,qE,R0)},N0=function(_i,As){var Hs,Us;if(!_i||!_i.state||As>Pu||As<0)return _i?hm(_i,Bs):Bs;var $s=_i.state;if(!_i.output||!_i.input&&_i.avail_in!==0||$s.status===Em&&As!==Vu)return hm(_i,_i.avail_out===0?Rp:Bs);$s.strm=_i;var mu=$s.last_flush;if($s.last_flush=As,$s.status===N_)if($s.wrap===2)_i.adler=0,Ou($s,31),Ou($s,139),Ou($s,8),$s.gzhead?(Ou($s,($s.gzhead.text?1:0)+($s.gzhead.hcrc?2:0)+($s.gzhead.extra?4:0)+($s.gzhead.name?8:0)+($s.gzhead.comment?16:0)),Ou($s,$s.gzhead.time&255),Ou($s,$s.gzhead.time>>8&255),Ou($s,$s.gzhead.time>>16&255),Ou($s,$s.gzhead.time>>24&255),Ou($s,$s.level===9?2:$s.strategy>=pm||$s.level<2?4:0),Ou($s,$s.gzhead.os&255),$s.gzhead.extra&&$s.gzhead.extra.length&&(Ou($s,$s.gzhead.extra.length&255),Ou($s,$s.gzhead.extra.length>>8&255)),$s.gzhead.hcrc&&(_i.adler=Iy(_i.adler,$s.pending_buf,$s.pending,0)),$s.gzindex=0,$s.status=bl):(Ou($s,0),Ou($s,0),Ou($s,0),Ou($s,0),Ou($s,0),Ou($s,$s.level===9?2:$s.strategy>=pm||$s.level<2?4:0),Ou($s,D_),$s.status=Ap);else{var uu=np+($s.w_bits-8<<4)<<8,fu=-1;$s.strategy>=pm||$s.level<2?fu=0:$s.level<6?fu=1:$s.level===6?fu=2:fu=3,uu|=fu<<6,$s.strstart!==0&&(uu|=tl),uu+=31-uu%31,$s.status=Ap,Ip($s,uu),$s.strstart!==0&&(Ip($s,_i.adler>>>16),Ip($s,_i.adler&65535)),_i.adler=1}if($s.status===bl)if($s.gzhead.extra){for(Hs=$s.pending;$s.gzindex<($s.gzhead.extra.length&65535)&&!($s.pending===$s.pending_buf_size&&($s.gzhead.hcrc&&$s.pending>Hs&&(_i.adler=Iy(_i.adler,$s.pending_buf,$s.pending-Hs,Hs)),ap(_i),Hs=$s.pending,$s.pending===$s.pending_buf_size));)Ou($s,$s.gzhead.extra[$s.gzindex]&255),$s.gzindex++;$s.gzhead.hcrc&&$s.pending>Hs&&(_i.adler=Iy(_i.adler,$s.pending_buf,$s.pending-Hs,Hs)),$s.gzindex===$s.gzhead.extra.length&&($s.gzindex=0,$s.status=Dp)}else $s.status=Dp;if($s.status===Dp)if($s.gzhead.name){Hs=$s.pending;do{if($s.pending===$s.pending_buf_size&&($s.gzhead.hcrc&&$s.pending>Hs&&(_i.adler=Iy(_i.adler,$s.pending_buf,$s.pending-Hs,Hs)),ap(_i),Hs=$s.pending,$s.pending===$s.pending_buf_size)){Us=1;break}$s.gzindex<$s.gzhead.name.length?Us=$s.gzhead.name.charCodeAt($s.gzindex++)&255:Us=0,Ou($s,Us)}while(Us!==0);$s.gzhead.hcrc&&$s.pending>Hs&&(_i.adler=Iy(_i.adler,$s.pending_buf,$s.pending-Hs,Hs)),Us===0&&($s.gzindex=0,$s.status=ay)}else $s.status=ay;if($s.status===ay)if($s.gzhead.comment){Hs=$s.pending;do{if($s.pending===$s.pending_buf_size&&($s.gzhead.hcrc&&$s.pending>Hs&&(_i.adler=Iy(_i.adler,$s.pending_buf,$s.pending-Hs,Hs)),ap(_i),Hs=$s.pending,$s.pending===$s.pending_buf_size)){Us=1;break}$s.gzindex<$s.gzhead.comment.length?Us=$s.gzhead.comment.charCodeAt($s.gzindex++)&255:Us=0,Ou($s,Us)}while(Us!==0);$s.gzhead.hcrc&&$s.pending>Hs&&(_i.adler=Iy(_i.adler,$s.pending_buf,$s.pending-Hs,Hs)),Us===0&&($s.status=Hu)}else $s.status=Hu;if($s.status===Hu&&($s.gzhead.hcrc?($s.pending+2>$s.pending_buf_size&&ap(_i),$s.pending+2<=$s.pending_buf_size&&(Ou($s,_i.adler&255),Ou($s,_i.adler>>8&255),_i.adler=0,$s.status=Ap)):$s.status=Ap),$s.pending!==0){if(ap(_i),_i.avail_out===0)return $s.last_flush=-1,rp}else if(_i.avail_in===0&&L_(As)<=L_(mu)&&As!==Vu)return hm(_i,Rp);if($s.status===Em&&_i.avail_in!==0)return hm(_i,Rp);if(_i.avail_in!==0||$s.lookahead!==0||As!==Mp&&$s.status!==Em){var El=$s.strategy===pm?mm($s,As):$s.strategy===iy?Sm($s,As):Sp[$s.level].func($s,As);if((El===Ep||El===Oy)&&($s.status=Em),El===Yl||El===Ep)return _i.avail_out===0&&($s.last_flush=-1),rp;if(El===Um&&(As===Lm?Zp($s):As!==Pu&&(O0($s,0,0,!1),As===ev&&(gl($s.head),$s.lookahead===0&&($s.strstart=0,$s.block_start=0,$s.insert=0))),ap(_i),_i.avail_out===0))return $s.last_flush=-1,rp}return As!==Vu?rp:$s.wrap<=0?om:($s.wrap===2?(Ou($s,_i.adler&255),Ou($s,_i.adler>>8&255),Ou($s,_i.adler>>16&255),Ou($s,_i.adler>>24&255),Ou($s,_i.total_in&255),Ou($s,_i.total_in>>8&255),Ou($s,_i.total_in>>16&255),Ou($s,_i.total_in>>24&255)):(Ip($s,_i.adler>>>16),Ip($s,_i.adler&65535)),ap(_i),$s.wrap>0&&($s.wrap=-$s.wrap),$s.pending!==0?rp:om)},wl=function(_i){if(!_i||!_i.state)return Bs;var As=_i.state.status;return As!==N_&&As!==bl&&As!==Dp&&As!==ay&&As!==Hu&&As!==Ap&&As!==Em?hm(_i,Bs):(_i.state=null,As===Ap?hm(_i,O_):rp)},RT=function(_i,As){var Hs=As.length;if(!_i||!_i.state)return Bs;var Us=_i.state,$s=Us.wrap;if($s===2||$s===1&&Us.status!==N_||Us.lookahead)return Bs;if($s===1&&(_i.adler=Tv(_i.adler,As,Hs,0)),Us.wrap=0,Hs>=Us.w_size){$s===0&&(gl(Us.head),Us.strstart=0,Us.block_start=0,Us.insert=0);var mu=new Uint8Array(Us.w_size);mu.set(As.subarray(Hs-Us.w_size,Hs),0),As=mu,Hs=Us.w_size}var uu=_i.avail_in,fu=_i.next_in,El=_i.input;for(_i.avail_in=Hs,_i.next_in=0,_i.input=As,Ku(Us);Us.lookahead>=Wu;){var wu=Us.strstart,jp=Us.lookahead-(Wu-1);do Us.ins_h=Jp(Us,Us.ins_h,Us.window[wu+Wu-1]),Us.prev[wu&Us.w_mask]=Us.head[Us.ins_h],Us.head[Us.ins_h]=wu,wu++;while(--jp);Us.strstart=wu,Us.lookahead=Wu-1,Ku(Us)}return Us.strstart+=Us.lookahead,Us.block_start=Us.strstart,Us.insert=Us.lookahead,Us.lookahead=0,Us.match_length=Us.prev_length=Wu-1,Us.match_available=0,_i.next_in=fu,_i.input=El,_i.avail_in=uu,Us.wrap=$s,rp},D0=t_,_h=rv,Tm=Fm,xl=xv,Ry=XE,Bm=N0,Kp=wl,r_=RT,QE="pako deflate (from Nodeca project)",km={deflateInit:D0,deflateInit2:_h,deflateReset:Tm,deflateResetKeep:xl,deflateSetHeader:Ry,deflate:Bm,deflateEnd:Kp,deflateSetDictionary:r_,deflateInfo:QE};function ZE(su){for(var _i=0,As=0,Hs=su.length;As<Hs;As++)_i+=su[As].length;for(var Us=new Uint8Array(_i),$s=0,mu=0,uu=su.length;$s<uu;$s++){var fu=su[$s];Us.set(fu,mu),mu+=fu.length}return Us}for(var Ny=new Uint8Array(256),Lp=0;Lp<256;Lp++)Ny[Lp]=Lp>=252?6:Lp>=248?5:Lp>=240?4:Lp>=224?3:Lp>=192?2:1;Ny[254]=Ny[254]=1;function n_(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var _c=n_,Up=Object.prototype.toString,Cv=Il.Z_NO_FLUSH,i_=Il.Z_SYNC_FLUSH,a_=Il.Z_FULL_FLUSH,ml=Il.Z_FINISH,$m=Il.Z_OK,L0=Il.Z_STREAM_END,U0=Il.Z_DEFAULT_COMPRESSION,wv=Il.Z_DEFAULT_STRATEGY,NT=Il.Z_DEFLATED;function sy(){this.options={level:U0,method:NT,chunkSize:16384,windowBits:15,memLevel:8,strategy:wv};var su=this.options;su.raw&&su.windowBits>0?su.windowBits=-su.windowBits:su.gzip&&su.windowBits>0&&su.windowBits<16&&(su.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new _c,this.strm.avail_out=0;var _i=km.deflateInit2(this.strm,su.level,su.method,su.windowBits,su.memLevel,su.strategy);if(_i!==$m)throw new Error(Py[_i]);if(su.header&&km.deflateSetHeader(this.strm,su.header),su.dictionary){var As;if(Up.call(su.dictionary)==="[object ArrayBuffer]"?As=new Uint8Array(su.dictionary):As=su.dictionary,_i=km.deflateSetDictionary(this.strm,As),_i!==$m)throw new Error(Py[_i]);this._dict_set=!0}}sy.prototype.push=function(su,_i){var As=this.strm,Hs=this.options.chunkSize,Us,$s;if(this.ended)return!1;for(_i===~~_i?$s=_i:$s=_i===!0?ml:Cv,Up.call(su)==="[object ArrayBuffer]"?As.input=new Uint8Array(su):As.input=su,As.next_in=0,As.avail_in=As.input.length;;){if(As.avail_out===0&&(As.output=new Uint8Array(Hs),As.next_out=0,As.avail_out=Hs),($s===i_||$s===a_)&&As.avail_out<=6){this.onData(As.output.subarray(0,As.next_out)),As.avail_out=0;continue}if(Us=km.deflate(As,$s),Us===L0)return As.next_out>0&&this.onData(As.output.subarray(0,As.next_out)),Us=km.deflateEnd(this.strm),this.onEnd(Us),this.ended=!0,Us===$m;if(As.avail_out===0){this.onData(As.output);continue}if($s>0&&As.next_out>0){this.onData(As.output.subarray(0,As.next_out)),As.avail_out=0;continue}if(As.avail_in===0)break}return!0},sy.prototype.onData=function(su){this.chunks.push(su)},sy.prototype.onEnd=function(su){su===$m&&(this.result=ZE(this.chunks)),this.chunks=[],this.err=su,this.msg=this.strm.msg};function Vm(su){if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(su);var _i,As,Hs,Us,$s,mu=su.length,uu=0;for(Us=0;Us<mu;Us++)As=su.charCodeAt(Us),(As&64512)===55296&&Us+1<mu&&(Hs=su.charCodeAt(Us+1),(Hs&64512)===56320&&(As=65536+(As-55296<<10)+(Hs-56320),Us++)),uu+=As<128?1:As<2048?2:As<65536?3:4;for(_i=new Uint8Array(uu),$s=0,Us=0;$s<uu;Us++)As=su.charCodeAt(Us),(As&64512)===55296&&Us+1<mu&&(Hs=su.charCodeAt(Us+1),(Hs&64512)===56320&&(As=65536+(As-55296<<10)+(Hs-56320),Us++)),As<128?_i[$s++]=As:As<2048?(_i[$s++]=192|As>>>6,_i[$s++]=128|As&63):As<65536?(_i[$s++]=224|As>>>12,_i[$s++]=128|As>>>6&63,_i[$s++]=128|As&63):(_i[$s++]=240|As>>>18,_i[$s++]=128|As>>>12&63,_i[$s++]=128|As>>>6&63,_i[$s++]=128|As&63);return _i}return{Deflate:sy,constants:Il,string2buf:Vm}}}var state={status:0};function startDeflateWorker(sn,ln){switch(ln===void 0&&(ln=createDeflateWorker),state.status){case 0:state={status:1,callbacks:[sn]},doStartDeflateWorker(ln);break;case 1:state.callbacks.push(sn);break;case 2:sn();break;case 3:sn(state.worker);break}}function doStartDeflateWorker(sn){sn===void 0&&(sn=createDeflateWorker);try{var ln=sn();return addEventListener(ln,"error",onError),addEventListener(ln,"message",function(cn){var dn=cn.data;dn.type==="errored"?onError(dn.error):dn.type==="initialized"&&onInitialized(ln)}),ln.postMessage({action:"init"}),ln}catch(cn){onError(cn)}}function onInitialized(sn){state.status===1&&(state.callbacks.forEach(function(ln){return ln(sn)}),state={status:3,worker:sn})}function onError(sn){state.status===1?(display.error("Session Replay recording failed to start: an error occurred while creating the Worker:",sn),sn instanceof Event||sn instanceof Error&&isMessageCspRelated(sn.message)?display.error("Please make sure CSP is correctly configured https://docs.datadoghq.com/real_user_monitoring/faq/content_security_policy"):addTelemetryError(sn),state.callbacks.forEach(function(ln){return ln()}),state={status:2}):addTelemetryError(sn)}function isMessageCspRelated(sn){return includes(sn,"Content Security Policy")||includes(sn,"requires 'TrustedScriptURL'")}function startRecording(sn,ln,cn,dn,pn,vn){var kn=function(Zn){sn.notify(12,{error:Zn})},Sn=vn||createHttpRequest(ln.sessionReplayEndpointBuilder,SEGMENT_BYTES_LIMIT,kn),wn=startSegmentCollection(sn,ln.applicationId,cn,dn,Sn,pn),Pn=wn.addRecord,Nn=wn.stop,Ln=record({emit:Pn,configuration:ln,lifeCycle:sn}),Fn=Ln.stop,zn=Ln.takeSubsequentFullSnapshot,Dn=Ln.flushMutations,Kn=sn.subscribe(4,function(){Dn(),Pn({timestamp:timeStampNow(),type:RecordType.ViewEnd})}).unsubscribe,qn=sn.subscribe(2,function(Zn){zn(Zn.startClocks.timeStamp)}).unsubscribe;return{stop:function(){Kn(),qn(),Fn(),Nn()}}}function isBrowserSupported(){return typeof Array.from=="function"&&typeof CSSSupportsRule=="function"&&typeof URL.createObjectURL=="function"&&"forEach"in NodeList.prototype}function getSessionReplayLink(sn,ln,cn,dn){var pn=ln.findTrackedSession(),vn=getErrorType(pn,dn),kn=cn.findView();return getSessionReplayUrl(sn,{viewContext:kn,errorType:vn,session:pn})}function getErrorType(sn,ln){if(!isBrowserSupported())return"browser-not-supported";if(!sn)return"rum-not-tracked";if(!sn.sessionReplayAllowed)return"incorrect-session-plan";if(!ln)return"replay-not-started"}function makeRecorderApi(sn,ln){if(ln===void 0&&(ln=startDeflateWorker),canUseEventBridge()||!isBrowserSupported())return{start:noop$7,stop:noop$7,getReplayStats:function(){},onRumStart:noop$7,isRecording:function(){return!1},getSessionReplayLink:function(){}};var cn={status:0},dn=function(){cn={status:1}},pn=function(){cn={status:0}};return{start:function(){return dn()},stop:function(){return pn()},getReplayStats,getSessionReplayLink:function(vn,kn,Sn){return getSessionReplayLink(vn,kn,Sn,cn.status!==0)},onRumStart:function(vn,kn,Sn,wn){vn.subscribe(7,function(){(cn.status===2||cn.status===3)&&(pn(),cn={status:1})}),vn.subscribe(8,function(){cn.status===1&&dn()}),dn=function(){var Pn=Sn.findTrackedSession();if(!Pn||!Pn.sessionReplayAllowed){cn={status:1};return}cn.status===2||cn.status===3||(cn={status:2},runOnReadyState("interactive",function(){cn.status===2&&ln(function(Nn){if(cn.status===2){if(!Nn){cn={status:0};return}var Ln=sn(vn,kn,Sn,wn,Nn).stop;cn={status:3,stopRecording:Ln}}})}))},pn=function(){cn.status!==0&&(cn.status===3&&cn.stopRecording(),cn={status:0})},cn.status===1&&dn()},isRecording:function(){return cn.status===3}}}var recorderApi=makeRecorderApi(startRecording),datadogRum=makeRumPublicApi(startRum,recorderApi);defineGlobal(getGlobalObject$1(),"DD_RUM",datadogRum);function _setPrototypeOf$1(sn,ln){return _setPrototypeOf$1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(dn,pn){return dn.__proto__=pn,dn},_setPrototypeOf$1(sn,ln)}function _inheritsLoose$1(sn,ln){sn.prototype=Object.create(ln.prototype),sn.prototype.constructor=sn,_setPrototypeOf$1(sn,ln)}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$8=reactExports,g$a=60103;reactJsxRuntime_production_min.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var h$a=Symbol.for;g$a=h$a("react.element"),reactJsxRuntime_production_min.Fragment=h$a("react.fragment")}var m$b=f$8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n$b=Object.prototype.hasOwnProperty,p$9={key:!0,ref:!0,__self:!0,__source:!0};function q$9(sn,ln,cn){var dn,pn={},vn=null,kn=null;cn!==void 0&&(vn=""+cn),ln.key!==void 0&&(vn=""+ln.key),ln.ref!==void 0&&(kn=ln.ref);for(dn in ln)n$b.call(ln,dn)&&!p$9.hasOwnProperty(dn)&&(pn[dn]=ln[dn]);if(sn&&sn.defaultProps)for(dn in ln=sn.defaultProps,ln)pn[dn]===void 0&&(pn[dn]=ln[dn]);return{$$typeof:g$a,type:sn,key:vn,ref:kn,props:pn,_owner:m$b.current}}reactJsxRuntime_production_min.jsx=q$9;reactJsxRuntime_production_min.jsxs=q$9;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports;const Fragment$2=jsxRuntimeExports.Fragment,jsx$2=jsxRuntimeExports.jsx,jsxs$2=jsxRuntimeExports.jsxs;function sheetForTag(sn){if(sn.sheet)return sn.sheet;for(var ln=0;ln<document.styleSheets.length;ln++)if(document.styleSheets[ln].ownerNode===sn)return document.styleSheets[ln]}function createStyleElement(sn){var ln=document.createElement("style");return ln.setAttribute("data-emotion",sn.key),sn.nonce!==void 0&&ln.setAttribute("nonce",sn.nonce),ln.appendChild(document.createTextNode("")),ln.setAttribute("data-s",""),ln}var StyleSheet=function(){function sn(cn){var dn=this;this._insertTag=function(pn){var vn;dn.tags.length===0?dn.insertionPoint?vn=dn.insertionPoint.nextSibling:dn.prepend?vn=dn.container.firstChild:vn=dn.before:vn=dn.tags[dn.tags.length-1].nextSibling,dn.container.insertBefore(pn,vn),dn.tags.push(pn)},this.isSpeedy=cn.speedy===void 0?!0:cn.speedy,this.tags=[],this.ctr=0,this.nonce=cn.nonce,this.key=cn.key,this.container=cn.container,this.prepend=cn.prepend,this.insertionPoint=cn.insertionPoint,this.before=null}var ln=sn.prototype;return ln.hydrate=function(dn){dn.forEach(this._insertTag)},ln.insert=function(dn){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(createStyleElement(this));var pn=this.tags[this.tags.length-1];if(this.isSpeedy){var vn=sheetForTag(pn);try{vn.insertRule(dn,vn.cssRules.length)}catch{}}else pn.appendChild(document.createTextNode(dn));this.ctr++},ln.flush=function(){this.tags.forEach(function(dn){return dn.parentNode&&dn.parentNode.removeChild(dn)}),this.tags=[],this.ctr=0},sn}(),MS="-ms-",MOZ="-moz-",WEBKIT$1="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",LAYER="@layer",abs=Math.abs,from$1=String.fromCharCode,assign$1=Object.assign;function hash(sn,ln){return charat(sn,0)^45?(((ln<<2^charat(sn,0))<<2^charat(sn,1))<<2^charat(sn,2))<<2^charat(sn,3):0}function trim(sn){return sn.trim()}function match$1(sn,ln){return(sn=ln.exec(sn))?sn[0]:sn}function replace$2(sn,ln,cn){return sn.replace(ln,cn)}function indexof(sn,ln){return sn.indexOf(ln)}function charat(sn,ln){return sn.charCodeAt(ln)|0}function substr(sn,ln,cn){return sn.slice(ln,cn)}function strlen(sn){return sn.length}function sizeof(sn){return sn.length}function append(sn,ln){return ln.push(sn),sn}function combine(sn,ln){return sn.map(ln).join("")}var line=1,column=1,length=0,position=0,character=0,characters="";function node$1(sn,ln,cn,dn,pn,vn,kn){return{value:sn,root:ln,parent:cn,type:dn,props:pn,children:vn,line,column,length:kn,return:""}}function copy(sn,ln){return assign$1(node$1("",null,null,"",null,null,0),sn,{length:-sn.length},ln)}function char(){return character}function prev(){return character=position>0?charat(characters,--position):0,column--,character===10&&(column=1,line--),character}function next(){return character=position<length?charat(characters,position++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position)}function caret(){return position}function slice$4(sn,ln){return substr(characters,sn,ln)}function token$1(sn){switch(sn){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(sn){return line=column=1,length=strlen(characters=sn),position=0,[]}function dealloc(sn){return characters="",sn}function delimit(sn){return trim(slice$4(position-1,delimiter(sn===91?sn+2:sn===40?sn+1:sn)))}function whitespace(sn){for(;(character=peek())&&character<33;)next();return token$1(sn)>2||token$1(character)>3?"":" "}function escaping(sn,ln){for(;--ln&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice$4(sn,caret()+(ln<6&&peek()==32&&next()==32))}function delimiter(sn){for(;next();)switch(character){case sn:return position;case 34:case 39:sn!==34&&sn!==39&&delimiter(character);break;case 40:sn===41&&delimiter(sn);break;case 92:next();break}return position}function commenter(sn,ln){for(;next()&&sn+character!==47+10;)if(sn+character===42+42&&peek()===47)break;return"/*"+slice$4(ln,position-1)+"*"+from$1(sn===47?sn:next())}function identifier(sn){for(;!token$1(peek());)next();return slice$4(sn,position)}function compile(sn){return dealloc(parse$3("",null,null,null,[""],sn=alloc(sn),0,[0],sn))}function parse$3(sn,ln,cn,dn,pn,vn,kn,Sn,wn){for(var Pn=0,Nn=0,Ln=kn,Fn=0,zn=0,Dn=0,Kn=1,qn=1,Zn=1,Yn=0,Jn="",rs=pn,ss=vn,as=dn,ds=Jn;qn;)switch(Dn=Yn,Yn=next()){case 40:if(Dn!=108&&charat(ds,Ln-1)==58){indexof(ds+=replace$2(delimit(Yn),"&","&\f"),"&\f")!=-1&&(Zn=-1);break}case 34:case 39:case 91:ds+=delimit(Yn);break;case 9:case 10:case 13:case 32:ds+=whitespace(Dn);break;case 92:ds+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),ln,cn),wn);break;default:ds+="/"}break;case 123*Kn:Sn[Pn++]=strlen(ds)*Zn;case 125*Kn:case 59:case 0:switch(Yn){case 0:case 125:qn=0;case 59+Nn:Zn==-1&&(ds=replace$2(ds,/\f/g,"")),zn>0&&strlen(ds)-Ln&&append(zn>32?declaration(ds+";",dn,cn,Ln-1):declaration(replace$2(ds," ","")+";",dn,cn,Ln-2),wn);break;case 59:ds+=";";default:if(append(as=ruleset(ds,ln,cn,Pn,Nn,pn,Sn,Jn,rs=[],ss=[],Ln),vn),Yn===123)if(Nn===0)parse$3(ds,ln,as,as,rs,vn,Ln,Sn,ss);else switch(Fn===99&&charat(ds,3)===110?100:Fn){case 100:case 108:case 109:case 115:parse$3(sn,as,as,dn&&append(ruleset(sn,as,as,0,0,pn,Sn,Jn,pn,rs=[],Ln),ss),pn,ss,Ln,Sn,dn?rs:ss);break;default:parse$3(ds,as,as,as,[""],ss,0,Sn,ss)}}Pn=Nn=zn=0,Kn=Zn=1,Jn=ds="",Ln=kn;break;case 58:Ln=1+strlen(ds),zn=Dn;default:if(Kn<1){if(Yn==123)--Kn;else if(Yn==125&&Kn++==0&&prev()==125)continue}switch(ds+=from$1(Yn),Yn*Kn){case 38:Zn=Nn>0?1:(ds+="\f",-1);break;case 44:Sn[Pn++]=(strlen(ds)-1)*Zn,Zn=1;break;case 64:peek()===45&&(ds+=delimit(next())),Fn=peek(),Nn=Ln=strlen(Jn=ds+=identifier(caret())),Yn++;break;case 45:Dn===45&&strlen(ds)==2&&(Kn=0)}}return vn}function ruleset(sn,ln,cn,dn,pn,vn,kn,Sn,wn,Pn,Nn){for(var Ln=pn-1,Fn=pn===0?vn:[""],zn=sizeof(Fn),Dn=0,Kn=0,qn=0;Dn<dn;++Dn)for(var Zn=0,Yn=substr(sn,Ln+1,Ln=abs(Kn=kn[Dn])),Jn=sn;Zn<zn;++Zn)(Jn=trim(Kn>0?Fn[Zn]+" "+Yn:replace$2(Yn,/&\f/g,Fn[Zn])))&&(wn[qn++]=Jn);return node$1(sn,ln,cn,pn===0?RULESET:Sn,wn,Pn,Nn)}function comment(sn,ln,cn){return node$1(sn,ln,cn,COMMENT,from$1(char()),substr(sn,2,-2),0)}function declaration(sn,ln,cn,dn){return node$1(sn,ln,cn,DECLARATION,substr(sn,0,dn),substr(sn,dn+1,-1),dn)}function serialize(sn,ln){for(var cn="",dn=sizeof(sn),pn=0;pn<dn;pn++)cn+=ln(sn[pn],pn,sn,ln)||"";return cn}function stringify$1(sn,ln,cn,dn){switch(sn.type){case LAYER:if(sn.children.length)break;case IMPORT:case DECLARATION:return sn.return=sn.return||sn.value;case COMMENT:return"";case KEYFRAMES:return sn.return=sn.value+"{"+serialize(sn.children,dn)+"}";case RULESET:sn.value=sn.props.join(",")}return strlen(cn=serialize(sn.children,dn))?sn.return=sn.value+"{"+cn+"}":""}function middleware(sn){var ln=sizeof(sn);return function(cn,dn,pn,vn){for(var kn="",Sn=0;Sn<ln;Sn++)kn+=sn[Sn](cn,dn,pn,vn)||"";return kn}}function rulesheet(sn){return function(ln){ln.root||(ln=ln.return)&&sn(ln)}}function memoize$1(sn){var ln=Object.create(null);return function(cn){return ln[cn]===void 0&&(ln[cn]=sn(cn)),ln[cn]}}var identifierWithPointTracking=function(ln,cn,dn){for(var pn=0,vn=0;pn=vn,vn=peek(),pn===38&&vn===12&&(cn[dn]=1),!token$1(vn);)next();return slice$4(ln,position)},toRules=function(ln,cn){var dn=-1,pn=44;do switch(token$1(pn)){case 0:pn===38&&peek()===12&&(cn[dn]=1),ln[dn]+=identifierWithPointTracking(position-1,cn,dn);break;case 2:ln[dn]+=delimit(pn);break;case 4:if(pn===44){ln[++dn]=peek()===58?"&\f":"",cn[dn]=ln[dn].length;break}default:ln[dn]+=from$1(pn)}while(pn=next());return ln},getRules=function(ln,cn){return dealloc(toRules(alloc(ln),cn))},fixedElements=new WeakMap,compat=function(ln){if(!(ln.type!=="rule"||!ln.parent||ln.length<1)){for(var cn=ln.value,dn=ln.parent,pn=ln.column===dn.column&&ln.line===dn.line;dn.type!=="rule";)if(dn=dn.parent,!dn)return;if(!(ln.props.length===1&&cn.charCodeAt(0)!==58&&!fixedElements.get(dn))&&!pn){fixedElements.set(ln,!0);for(var vn=[],kn=getRules(cn,vn),Sn=dn.props,wn=0,Pn=0;wn<kn.length;wn++)for(var Nn=0;Nn<Sn.length;Nn++,Pn++)ln.props[Pn]=vn[wn]?kn[wn].replace(/&\f/g,Sn[Nn]):Sn[Nn]+" "+kn[wn]}}},removeLabel=function(ln){if(ln.type==="decl"){var cn=ln.value;cn.charCodeAt(0)===108&&cn.charCodeAt(2)===98&&(ln.return="",ln.value="")}};function prefix(sn,ln){switch(hash(sn,ln)){case 5103:return WEBKIT$1+"print-"+sn+sn;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT$1+sn+sn;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT$1+sn+MOZ+sn+MS+sn+sn;case 6828:case 4268:return WEBKIT$1+sn+MS+sn+sn;case 6165:return WEBKIT$1+sn+MS+"flex-"+sn+sn;case 5187:return WEBKIT$1+sn+replace$2(sn,/(\w+).+(:[^]+)/,WEBKIT$1+"box-$1$2"+MS+"flex-$1$2")+sn;case 5443:return WEBKIT$1+sn+MS+"flex-item-"+replace$2(sn,/flex-|-self/,"")+sn;case 4675:return WEBKIT$1+sn+MS+"flex-line-pack"+replace$2(sn,/align-content|flex-|-self/,"")+sn;case 5548:return WEBKIT$1+sn+MS+replace$2(sn,"shrink","negative")+sn;case 5292:return WEBKIT$1+sn+MS+replace$2(sn,"basis","preferred-size")+sn;case 6060:return WEBKIT$1+"box-"+replace$2(sn,"-grow","")+WEBKIT$1+sn+MS+replace$2(sn,"grow","positive")+sn;case 4554:return WEBKIT$1+replace$2(sn,/([^-])(transform)/g,"$1"+WEBKIT$1+"$2")+sn;case 6187:return replace$2(replace$2(replace$2(sn,/(zoom-|grab)/,WEBKIT$1+"$1"),/(image-set)/,WEBKIT$1+"$1"),sn,"")+sn;case 5495:case 3959:return replace$2(sn,/(image-set\([^]*)/,WEBKIT$1+"$1$`$1");case 4968:return replace$2(replace$2(sn,/(.+:)(flex-)?(.*)/,WEBKIT$1+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT$1+sn+sn;case 4095:case 3583:case 4068:case 2532:return replace$2(sn,/(.+)-inline(.+)/,WEBKIT$1+"$1$2")+sn;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(sn)-1-ln>6)switch(charat(sn,ln+1)){case 109:if(charat(sn,ln+4)!==45)break;case 102:return replace$2(sn,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT$1+"$2-$3$1"+MOZ+(charat(sn,ln+3)==108?"$3":"$2-$3"))+sn;case 115:return~indexof(sn,"stretch")?prefix(replace$2(sn,"stretch","fill-available"),ln)+sn:sn}break;case 4949:if(charat(sn,ln+1)!==115)break;case 6444:switch(charat(sn,strlen(sn)-3-(~indexof(sn,"!important")&&10))){case 107:return replace$2(sn,":",":"+WEBKIT$1)+sn;case 101:return replace$2(sn,/(.+:)([^;!]+)(;|!.+)?/,"$1"+WEBKIT$1+(charat(sn,14)===45?"inline-":"")+"box$3$1"+WEBKIT$1+"$2$3$1"+MS+"$2box$3")+sn}break;case 5936:switch(charat(sn,ln+11)){case 114:return WEBKIT$1+sn+MS+replace$2(sn,/[svh]\w+-[tblr]{2}/,"tb")+sn;case 108:return WEBKIT$1+sn+MS+replace$2(sn,/[svh]\w+-[tblr]{2}/,"tb-rl")+sn;case 45:return WEBKIT$1+sn+MS+replace$2(sn,/[svh]\w+-[tblr]{2}/,"lr")+sn}return WEBKIT$1+sn+MS+sn+sn}return sn}var prefixer=function(ln,cn,dn,pn){if(ln.length>-1&&!ln.return)switch(ln.type){case DECLARATION:ln.return=prefix(ln.value,ln.length);break;case KEYFRAMES:return serialize([copy(ln,{value:replace$2(ln.value,"@","@"+WEBKIT$1)})],pn);case RULESET:if(ln.length)return combine(ln.props,function(vn){switch(match$1(vn,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return serialize([copy(ln,{props:[replace$2(vn,/:(read-\w+)/,":"+MOZ+"$1")]})],pn);case"::placeholder":return serialize([copy(ln,{props:[replace$2(vn,/:(plac\w+)/,":"+WEBKIT$1+"input-$1")]}),copy(ln,{props:[replace$2(vn,/:(plac\w+)/,":"+MOZ+"$1")]}),copy(ln,{props:[replace$2(vn,/:(plac\w+)/,MS+"input-$1")]})],pn)}return""})}},defaultStylisPlugins=[prefixer],createCache=function(ln){var cn=ln.key;if(cn==="css"){var dn=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(dn,function(Kn){var qn=Kn.getAttribute("data-emotion");qn.indexOf(" ")!==-1&&(document.head.appendChild(Kn),Kn.setAttribute("data-s",""))})}var pn=ln.stylisPlugins||defaultStylisPlugins,vn={},kn,Sn=[];kn=ln.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+cn+' "]'),function(Kn){for(var qn=Kn.getAttribute("data-emotion").split(" "),Zn=1;Zn<qn.length;Zn++)vn[qn[Zn]]=!0;Sn.push(Kn)});var wn,Pn=[compat,removeLabel];{var Nn,Ln=[stringify$1,rulesheet(function(Kn){Nn.insert(Kn)})],Fn=middleware(Pn.concat(pn,Ln)),zn=function(qn){return serialize(compile(qn),Fn)};wn=function(qn,Zn,Yn,Jn){Nn=Yn,zn(qn?qn+"{"+Zn.styles+"}":Zn.styles),Jn&&(Dn.inserted[Zn.name]=!0)}}var Dn={key:cn,sheet:new StyleSheet({key:cn,container:kn,nonce:ln.nonce,speedy:ln.speedy,prepend:ln.prepend,insertionPoint:ln.insertionPoint}),nonce:ln.nonce,inserted:vn,registered:{},insert:wn};return Dn.sheet.hydrate(Sn),Dn};function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(sn){for(var ln=1;ln<arguments.length;ln++){var cn=arguments[ln];for(var dn in cn)Object.prototype.hasOwnProperty.call(cn,dn)&&(sn[dn]=cn[dn])}return sn},_extends$3.apply(this,arguments)}var isBrowser$1=!0;function getRegisteredStyles(sn,ln,cn){var dn="";return cn.split(" ").forEach(function(pn){sn[pn]!==void 0?ln.push(sn[pn]+";"):dn+=pn+" "}),dn}var registerStyles=function(ln,cn,dn){var pn=ln.key+"-"+cn.name;(dn===!1||isBrowser$1===!1)&&ln.registered[pn]===void 0&&(ln.registered[pn]=cn.styles)},insertStyles=function(ln,cn,dn){registerStyles(ln,cn,dn);var pn=ln.key+"-"+cn.name;if(ln.inserted[cn.name]===void 0){var vn=cn;do ln.insert(cn===vn?"."+pn:"",vn,ln.sheet,!0),vn=vn.next;while(vn!==void 0)}};function murmur2(sn){for(var ln=0,cn,dn=0,pn=sn.length;pn>=4;++dn,pn-=4)cn=sn.charCodeAt(dn)&255|(sn.charCodeAt(++dn)&255)<<8|(sn.charCodeAt(++dn)&255)<<16|(sn.charCodeAt(++dn)&255)<<24,cn=(cn&65535)*1540483477+((cn>>>16)*59797<<16),cn^=cn>>>24,ln=(cn&65535)*1540483477+((cn>>>16)*59797<<16)^(ln&65535)*1540483477+((ln>>>16)*59797<<16);switch(pn){case 3:ln^=(sn.charCodeAt(dn+2)&255)<<16;case 2:ln^=(sn.charCodeAt(dn+1)&255)<<8;case 1:ln^=sn.charCodeAt(dn)&255,ln=(ln&65535)*1540483477+((ln>>>16)*59797<<16)}return ln^=ln>>>13,ln=(ln&65535)*1540483477+((ln>>>16)*59797<<16),((ln^ln>>>15)>>>0).toString(36)}var unitlessKeys={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hyphenateRegex=/[A-Z]|^ms/g,animationRegex=/_EMO_([^_]+?)_([^]*?)_EMO_/g,isCustomProperty=function(ln){return ln.charCodeAt(1)===45},isProcessableValue=function(ln){return ln!=null&&typeof ln!="boolean"},processStyleName=memoize$1(function(sn){return isCustomProperty(sn)?sn:sn.replace(hyphenateRegex,"-$&").toLowerCase()}),processStyleValue=function(ln,cn){switch(ln){case"animation":case"animationName":if(typeof cn=="string")return cn.replace(animationRegex,function(dn,pn,vn){return cursor={name:pn,styles:vn,next:cursor},pn})}return unitlessKeys[ln]!==1&&!isCustomProperty(ln)&&typeof cn=="number"&&cn!==0?cn+"px":cn},noComponentSelectorMessage="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function handleInterpolation(sn,ln,cn){if(cn==null)return"";if(cn.__emotion_styles!==void 0)return cn;switch(typeof cn){case"boolean":return"";case"object":{if(cn.anim===1)return cursor={name:cn.name,styles:cn.styles,next:cursor},cn.name;if(cn.styles!==void 0){var dn=cn.next;if(dn!==void 0)for(;dn!==void 0;)cursor={name:dn.name,styles:dn.styles,next:cursor},dn=dn.next;var pn=cn.styles+";";return pn}return createStringFromObject(sn,ln,cn)}case"function":{if(sn!==void 0){var vn=cursor,kn=cn(sn);return cursor=vn,handleInterpolation(sn,ln,kn)}break}}if(ln==null)return cn;var Sn=ln[cn];return Sn!==void 0?Sn:cn}function createStringFromObject(sn,ln,cn){var dn="";if(Array.isArray(cn))for(var pn=0;pn<cn.length;pn++)dn+=handleInterpolation(sn,ln,cn[pn])+";";else for(var vn in cn){var kn=cn[vn];if(typeof kn!="object")ln!=null&&ln[kn]!==void 0?dn+=vn+"{"+ln[kn]+"}":isProcessableValue(kn)&&(dn+=processStyleName(vn)+":"+processStyleValue(vn,kn)+";");else if(Array.isArray(kn)&&typeof kn[0]=="string"&&(ln==null||ln[kn[0]]===void 0))for(var Sn=0;Sn<kn.length;Sn++)isProcessableValue(kn[Sn])&&(dn+=processStyleName(vn)+":"+processStyleValue(vn,kn[Sn])+";");else{var wn=handleInterpolation(sn,ln,kn);switch(vn){case"animation":case"animationName":{dn+=processStyleName(vn)+":"+wn+";";break}default:dn+=vn+"{"+wn+"}"}}}return dn}var labelPattern=/label:\s*([^\s;\n{]+)\s*(;|$)/g,cursor,serializeStyles=function(ln,cn,dn){if(ln.length===1&&typeof ln[0]=="object"&&ln[0]!==null&&ln[0].styles!==void 0)return ln[0];var pn=!0,vn="";cursor=void 0;var kn=ln[0];kn==null||kn.raw===void 0?(pn=!1,vn+=handleInterpolation(dn,cn,kn)):vn+=kn[0];for(var Sn=1;Sn<ln.length;Sn++)vn+=handleInterpolation(dn,cn,ln[Sn]),pn&&(vn+=kn[Sn]);labelPattern.lastIndex=0;for(var wn="",Pn;(Pn=labelPattern.exec(vn))!==null;)wn+="-"+Pn[1];var Nn=murmur2(vn)+wn;return{name:Nn,styles:vn,next:cursor}},syncFallback=function(ln){return ln()},useInsertionEffect$1=React$1["useInsertionEffect"]?React$1["useInsertionEffect"]:!1,useInsertionEffectAlwaysWithSyncFallback=useInsertionEffect$1||syncFallback,hasOwnProperty$h={}.hasOwnProperty,EmotionCacheContext=reactExports.createContext(typeof HTMLElement<"u"?createCache({key:"css"}):null);EmotionCacheContext.Provider;var withEmotionCache=function(ln){return reactExports.forwardRef(function(cn,dn){var pn=reactExports.useContext(EmotionCacheContext);return ln(cn,pn,dn)})},ThemeContext=reactExports.createContext({}),typePropName="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",createEmotionProps=function(ln,cn){var dn={};for(var pn in cn)hasOwnProperty$h.call(cn,pn)&&(dn[pn]=cn[pn]);return dn[typePropName]=ln,dn},Insertion=function(ln){var cn=ln.cache,dn=ln.serialized,pn=ln.isStringTag;return registerStyles(cn,dn,pn),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(cn,dn,pn)}),null},Emotion=withEmotionCache(function(sn,ln,cn){var dn=sn.css;typeof dn=="string"&&ln.registered[dn]!==void 0&&(dn=ln.registered[dn]);var pn=sn[typePropName],vn=[dn],kn="";typeof sn.className=="string"?kn=getRegisteredStyles(ln.registered,vn,sn.className):sn.className!=null&&(kn=sn.className+" ");var Sn=serializeStyles(vn,void 0,reactExports.useContext(ThemeContext));kn+=ln.key+"-"+Sn.name;var wn={};for(var Pn in sn)hasOwnProperty$h.call(sn,Pn)&&Pn!=="css"&&Pn!==typePropName&&(wn[Pn]=sn[Pn]);return wn.ref=cn,wn.className=kn,jsxs$1(Fragment$1,{children:[jsx$1(Insertion,{cache:ln,serialized:Sn,isStringTag:typeof pn=="string"}),jsx$1(pn,{...wn})]})}),Emotion$1=Emotion,Fragment$1=Fragment$2;function jsx$1(sn,ln,cn){return hasOwnProperty$h.call(ln,"css")?jsx$2(Emotion$1,createEmotionProps(sn,ln),cn):jsx$2(sn,ln,cn)}function jsxs$1(sn,ln,cn){return hasOwnProperty$h.call(ln,"css")?jsxs$2(Emotion$1,createEmotionProps(sn,ln),cn):jsxs$2(sn,ln,cn)}var changedArray=function(ln,cn){return ln===void 0&&(ln=[]),cn===void 0&&(cn=[]),ln.length!==cn.length||ln.some(function(dn,pn){return!Object.is(dn,cn[pn])})},initialState={error:null},ErrorBoundary=function(sn){_inheritsLoose$1(ln,sn);function ln(){for(var dn,pn=arguments.length,vn=new Array(pn),kn=0;kn<pn;kn++)vn[kn]=arguments[kn];return dn=sn.call.apply(sn,[this].concat(vn))||this,dn.state=initialState,dn.resetErrorBoundary=function(){for(var Sn,wn=arguments.length,Pn=new Array(wn),Nn=0;Nn<wn;Nn++)Pn[Nn]=arguments[Nn];dn.props.onReset==null||(Sn=dn.props).onReset.apply(Sn,Pn),dn.reset()},dn}ln.getDerivedStateFromError=function(pn){return{error:pn}};var cn=ln.prototype;return cn.reset=function(){this.setState(initialState)},cn.componentDidCatch=function(pn,vn){var kn,Sn;(kn=(Sn=this.props).onError)==null||kn.call(Sn,pn,vn)},cn.componentDidUpdate=function(pn,vn){var kn=this.state.error,Sn=this.props.resetKeys;if(kn!==null&&vn.error!==null&&changedArray(pn.resetKeys,Sn)){var wn,Pn;(wn=(Pn=this.props).onResetKeysChange)==null||wn.call(Pn,pn.resetKeys,Sn),this.reset()}},cn.render=function(){var pn=this.state.error,vn=this.props,kn=vn.fallbackRender,Sn=vn.FallbackComponent,wn=vn.fallback;if(pn!==null){var Pn={error:pn,resetErrorBoundary:this.resetErrorBoundary};if(reactExports.isValidElement(wn))return wn;if(typeof kn=="function")return kn(Pn);if(Sn)return jsx$1(Sn,{...Pn});throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},ln}(reactExports.Component);/**
 * @remix-run/router v1.5.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(sn){for(var ln=1;ln<arguments.length;ln++){var cn=arguments[ln];for(var dn in cn)Object.prototype.hasOwnProperty.call(cn,dn)&&(sn[dn]=cn[dn])}return sn},_extends$2.apply(this,arguments)}var Action;(function(sn){sn.Pop="POP",sn.Push="PUSH",sn.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(sn){sn===void 0&&(sn={});function ln(dn,pn){let{pathname:vn,search:kn,hash:Sn}=dn.location;return createLocation("",{pathname:vn,search:kn,hash:Sn},pn.state&&pn.state.usr||null,pn.state&&pn.state.key||"default")}function cn(dn,pn){return typeof pn=="string"?pn:createPath(pn)}return getUrlBasedHistory(ln,cn,null,sn)}function invariant$1(sn,ln){if(sn===!1||sn===null||typeof sn>"u")throw new Error(ln)}function warning(sn,ln){if(!sn){typeof console<"u"&&console.warn(ln);try{throw new Error(ln)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(sn,ln){return{usr:sn.state,key:sn.key,idx:ln}}function createLocation(sn,ln,cn,dn){return cn===void 0&&(cn=null),_extends$2({pathname:typeof sn=="string"?sn:sn.pathname,search:"",hash:""},typeof ln=="string"?parsePath(ln):ln,{state:cn,key:ln&&ln.key||dn||createKey()})}function createPath(sn){let{pathname:ln="/",search:cn="",hash:dn=""}=sn;return cn&&cn!=="?"&&(ln+=cn.charAt(0)==="?"?cn:"?"+cn),dn&&dn!=="#"&&(ln+=dn.charAt(0)==="#"?dn:"#"+dn),ln}function parsePath(sn){let ln={};if(sn){let cn=sn.indexOf("#");cn>=0&&(ln.hash=sn.substr(cn),sn=sn.substr(0,cn));let dn=sn.indexOf("?");dn>=0&&(ln.search=sn.substr(dn),sn=sn.substr(0,dn)),sn&&(ln.pathname=sn)}return ln}function getUrlBasedHistory(sn,ln,cn,dn){dn===void 0&&(dn={});let{window:pn=document.defaultView,v5Compat:vn=!1}=dn,kn=pn.history,Sn=Action.Pop,wn=null,Pn=Nn();Pn==null&&(Pn=0,kn.replaceState(_extends$2({},kn.state,{idx:Pn}),""));function Nn(){return(kn.state||{idx:null}).idx}function Ln(){Sn=Action.Pop;let qn=Nn(),Zn=qn==null?null:qn-Pn;Pn=qn,wn&&wn({action:Sn,location:Kn.location,delta:Zn})}function Fn(qn,Zn){Sn=Action.Push;let Yn=createLocation(Kn.location,qn,Zn);cn&&cn(Yn,qn),Pn=Nn()+1;let Jn=getHistoryState(Yn,Pn),rs=Kn.createHref(Yn);try{kn.pushState(Jn,"",rs)}catch{pn.location.assign(rs)}vn&&wn&&wn({action:Sn,location:Kn.location,delta:1})}function zn(qn,Zn){Sn=Action.Replace;let Yn=createLocation(Kn.location,qn,Zn);cn&&cn(Yn,qn),Pn=Nn();let Jn=getHistoryState(Yn,Pn),rs=Kn.createHref(Yn);kn.replaceState(Jn,"",rs),vn&&wn&&wn({action:Sn,location:Kn.location,delta:0})}function Dn(qn){let Zn=pn.location.origin!=="null"?pn.location.origin:pn.location.href,Yn=typeof qn=="string"?qn:createPath(qn);return invariant$1(Zn,"No window.location.(origin|href) available to create URL for href: "+Yn),new URL(Yn,Zn)}let Kn={get action(){return Sn},get location(){return sn(pn,kn)},listen(qn){if(wn)throw new Error("A history only accepts one active listener");return pn.addEventListener(PopStateEventType,Ln),wn=qn,()=>{pn.removeEventListener(PopStateEventType,Ln),wn=null}},createHref(qn){return ln(pn,qn)},createURL:Dn,encodeLocation(qn){let Zn=Dn(qn);return{pathname:Zn.pathname,search:Zn.search,hash:Zn.hash}},push:Fn,replace:zn,go(qn){return kn.go(qn)}};return Kn}var ResultType;(function(sn){sn.data="data",sn.deferred="deferred",sn.redirect="redirect",sn.error="error"})(ResultType||(ResultType={}));function matchRoutes(sn,ln,cn){cn===void 0&&(cn="/");let dn=typeof ln=="string"?parsePath(ln):ln,pn=stripBasename(dn.pathname||"/",cn);if(pn==null)return null;let vn=flattenRoutes(sn);rankRouteBranches(vn);let kn=null;for(let Sn=0;kn==null&&Sn<vn.length;++Sn)kn=matchRouteBranch(vn[Sn],safelyDecodeURI(pn));return kn}function flattenRoutes(sn,ln,cn,dn){ln===void 0&&(ln=[]),cn===void 0&&(cn=[]),dn===void 0&&(dn="");let pn=(vn,kn,Sn)=>{let wn={relativePath:Sn===void 0?vn.path||"":Sn,caseSensitive:vn.caseSensitive===!0,childrenIndex:kn,route:vn};wn.relativePath.startsWith("/")&&(invariant$1(wn.relativePath.startsWith(dn),'Absolute route path "'+wn.relativePath+'" nested under path '+('"'+dn+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),wn.relativePath=wn.relativePath.slice(dn.length));let Pn=joinPaths([dn,wn.relativePath]),Nn=cn.concat(wn);vn.children&&vn.children.length>0&&(invariant$1(vn.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+Pn+'".')),flattenRoutes(vn.children,ln,Nn,Pn)),!(vn.path==null&&!vn.index)&&ln.push({path:Pn,score:computeScore(Pn,vn.index),routesMeta:Nn})};return sn.forEach((vn,kn)=>{var Sn;if(vn.path===""||!((Sn=vn.path)!=null&&Sn.includes("?")))pn(vn,kn);else for(let wn of explodeOptionalSegments(vn.path))pn(vn,kn,wn)}),ln}function explodeOptionalSegments(sn){let ln=sn.split("/");if(ln.length===0)return[];let[cn,...dn]=ln,pn=cn.endsWith("?"),vn=cn.replace(/\?$/,"");if(dn.length===0)return pn?[vn,""]:[vn];let kn=explodeOptionalSegments(dn.join("/")),Sn=[];return Sn.push(...kn.map(wn=>wn===""?vn:[vn,wn].join("/"))),pn&&Sn.push(...kn),Sn.map(wn=>sn.startsWith("/")&&wn===""?"/":wn)}function rankRouteBranches(sn){sn.sort((ln,cn)=>ln.score!==cn.score?cn.score-ln.score:compareIndexes(ln.routesMeta.map(dn=>dn.childrenIndex),cn.routesMeta.map(dn=>dn.childrenIndex)))}const paramRe=/^:\w+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=sn=>sn==="*";function computeScore(sn,ln){let cn=sn.split("/"),dn=cn.length;return cn.some(isSplat)&&(dn+=splatPenalty),ln&&(dn+=indexRouteValue),cn.filter(pn=>!isSplat(pn)).reduce((pn,vn)=>pn+(paramRe.test(vn)?dynamicSegmentValue:vn===""?emptySegmentValue:staticSegmentValue),dn)}function compareIndexes(sn,ln){return sn.length===ln.length&&sn.slice(0,-1).every((dn,pn)=>dn===ln[pn])?sn[sn.length-1]-ln[ln.length-1]:0}function matchRouteBranch(sn,ln){let{routesMeta:cn}=sn,dn={},pn="/",vn=[];for(let kn=0;kn<cn.length;++kn){let Sn=cn[kn],wn=kn===cn.length-1,Pn=pn==="/"?ln:ln.slice(pn.length)||"/",Nn=matchPath({path:Sn.relativePath,caseSensitive:Sn.caseSensitive,end:wn},Pn);if(!Nn)return null;Object.assign(dn,Nn.params);let Ln=Sn.route;vn.push({params:dn,pathname:joinPaths([pn,Nn.pathname]),pathnameBase:normalizePathname(joinPaths([pn,Nn.pathnameBase])),route:Ln}),Nn.pathnameBase!=="/"&&(pn=joinPaths([pn,Nn.pathnameBase]))}return vn}function matchPath(sn,ln){typeof sn=="string"&&(sn={path:sn,caseSensitive:!1,end:!0});let[cn,dn]=compilePath(sn.path,sn.caseSensitive,sn.end),pn=ln.match(cn);if(!pn)return null;let vn=pn[0],kn=vn.replace(/(.)\/+$/,"$1"),Sn=pn.slice(1);return{params:dn.reduce((Pn,Nn,Ln)=>{if(Nn==="*"){let Fn=Sn[Ln]||"";kn=vn.slice(0,vn.length-Fn.length).replace(/(.)\/+$/,"$1")}return Pn[Nn]=safelyDecodeURIComponent(Sn[Ln]||"",Nn),Pn},{}),pathname:vn,pathnameBase:kn,pattern:sn}}function compilePath(sn,ln,cn){ln===void 0&&(ln=!1),cn===void 0&&(cn=!0),warning(sn==="*"||!sn.endsWith("*")||sn.endsWith("/*"),'Route path "'+sn+'" will be treated as if it were '+('"'+sn.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+sn.replace(/\*$/,"/*")+'".'));let dn=[],pn="^"+sn.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(kn,Sn)=>(dn.push(Sn),"/([^\\/]+)"));return sn.endsWith("*")?(dn.push("*"),pn+=sn==="*"||sn==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):cn?pn+="\\/*$":sn!==""&&sn!=="/"&&(pn+="(?:(?=\\/|$))"),[new RegExp(pn,ln?void 0:"i"),dn]}function safelyDecodeURI(sn){try{return decodeURI(sn)}catch(ln){return warning(!1,'The URL path "'+sn+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+ln+").")),sn}}function safelyDecodeURIComponent(sn,ln){try{return decodeURIComponent(sn)}catch(cn){return warning(!1,'The value for the URL param "'+ln+'" will not be decoded because'+(' the string "'+sn+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+cn+").")),sn}}function stripBasename(sn,ln){if(ln==="/")return sn;if(!sn.toLowerCase().startsWith(ln.toLowerCase()))return null;let cn=ln.endsWith("/")?ln.length-1:ln.length,dn=sn.charAt(cn);return dn&&dn!=="/"?null:sn.slice(cn)||"/"}function resolvePath(sn,ln){ln===void 0&&(ln="/");let{pathname:cn,search:dn="",hash:pn=""}=typeof sn=="string"?parsePath(sn):sn;return{pathname:cn?cn.startsWith("/")?cn:resolvePathname(cn,ln):ln,search:normalizeSearch(dn),hash:normalizeHash(pn)}}function resolvePathname(sn,ln){let cn=ln.replace(/\/+$/,"").split("/");return sn.split("/").forEach(pn=>{pn===".."?cn.length>1&&cn.pop():pn!=="."&&cn.push(pn)}),cn.length>1?cn.join("/"):"/"}function getInvalidPathError(sn,ln,cn,dn){return"Cannot include a '"+sn+"' character in a manually specified "+("`to."+ln+"` field ["+JSON.stringify(dn)+"].  Please separate it out to the ")+("`to."+cn+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(sn){return sn.filter((ln,cn)=>cn===0||ln.route.path&&ln.route.path.length>0)}function resolveTo(sn,ln,cn,dn){dn===void 0&&(dn=!1);let pn;typeof sn=="string"?pn=parsePath(sn):(pn=_extends$2({},sn),invariant$1(!pn.pathname||!pn.pathname.includes("?"),getInvalidPathError("?","pathname","search",pn)),invariant$1(!pn.pathname||!pn.pathname.includes("#"),getInvalidPathError("#","pathname","hash",pn)),invariant$1(!pn.search||!pn.search.includes("#"),getInvalidPathError("#","search","hash",pn)));let vn=sn===""||pn.pathname==="",kn=vn?"/":pn.pathname,Sn;if(dn||kn==null)Sn=cn;else{let Ln=ln.length-1;if(kn.startsWith("..")){let Fn=kn.split("/");for(;Fn[0]==="..";)Fn.shift(),Ln-=1;pn.pathname=Fn.join("/")}Sn=Ln>=0?ln[Ln]:"/"}let wn=resolvePath(pn,Sn),Pn=kn&&kn!=="/"&&kn.endsWith("/"),Nn=(vn||kn===".")&&cn.endsWith("/");return!wn.pathname.endsWith("/")&&(Pn||Nn)&&(wn.pathname+="/"),wn}const joinPaths=sn=>sn.join("/").replace(/\/\/+/g,"/"),normalizePathname=sn=>sn.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=sn=>!sn||sn==="?"?"":sn.startsWith("?")?sn:"?"+sn,normalizeHash=sn=>!sn||sn==="#"?"":sn.startsWith("#")?sn:"#"+sn;function isRouteErrorResponse(sn){return sn!=null&&typeof sn.status=="number"&&typeof sn.statusText=="string"&&typeof sn.internal=="boolean"&&"data"in sn}const validMutationMethodsArr=["post","put","patch","delete"];[...validMutationMethodsArr];/**
 * React Router v6.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function isPolyfill(sn,ln){return sn===ln&&(sn!==0||1/sn===1/ln)||sn!==sn&&ln!==ln}const is=typeof Object.is=="function"?Object.is:isPolyfill,{useState,useEffect,useLayoutEffect,useDebugValue}=React$1;function useSyncExternalStore$2(sn,ln,cn){const dn=ln(),[{inst:pn},vn]=useState({inst:{value:dn,getSnapshot:ln}});return useLayoutEffect(()=>{pn.value=dn,pn.getSnapshot=ln,checkIfSnapshotChanged(pn)&&vn({inst:pn})},[sn,dn,ln]),useEffect(()=>(checkIfSnapshotChanged(pn)&&vn({inst:pn}),sn(()=>{checkIfSnapshotChanged(pn)&&vn({inst:pn})})),[sn]),useDebugValue(dn),dn}function checkIfSnapshotChanged(sn){const ln=sn.getSnapshot,cn=sn.value;try{const dn=ln();return!is(cn,dn)}catch{return!0}}function useSyncExternalStore$1(sn,ln,cn){return ln()}const canUseDOM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",isServerEnvironment=!canUseDOM,shim=isServerEnvironment?useSyncExternalStore$1:useSyncExternalStore$2;"useSyncExternalStore"in React$1&&(sn=>sn.useSyncExternalStore)(React$1);const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[]}),RouteErrorContext=reactExports.createContext(null);function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(sn){for(var ln=1;ln<arguments.length;ln++){var cn=arguments[ln];for(var dn in cn)Object.prototype.hasOwnProperty.call(cn,dn)&&(sn[dn]=cn[dn])}return sn},_extends$1.apply(this,arguments)}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant$1(!1),reactExports.useContext(LocationContext).location}function useNavigate(){useInRouterContext()||invariant$1(!1);let{basename:sn,navigator:ln}=reactExports.useContext(NavigationContext),{matches:cn}=reactExports.useContext(RouteContext),{pathname:dn}=useLocation(),pn=JSON.stringify(getPathContributingMatches(cn).map(Sn=>Sn.pathnameBase)),vn=reactExports.useRef(!1);return reactExports.useEffect(()=>{vn.current=!0}),reactExports.useCallback(function(Sn,wn){if(wn===void 0&&(wn={}),!vn.current)return;if(typeof Sn=="number"){ln.go(Sn);return}let Pn=resolveTo(Sn,JSON.parse(pn),dn,wn.relative==="path");sn!=="/"&&(Pn.pathname=Pn.pathname==="/"?sn:joinPaths([sn,Pn.pathname])),(wn.replace?ln.replace:ln.push)(Pn,wn.state,wn)},[sn,ln,pn,dn])}function useRoutes(sn,ln){useInRouterContext()||invariant$1(!1);let{navigator:cn}=reactExports.useContext(NavigationContext),dn=reactExports.useContext(DataRouterStateContext),{matches:pn}=reactExports.useContext(RouteContext),vn=pn[pn.length-1],kn=vn?vn.params:{};vn&&vn.pathname;let Sn=vn?vn.pathnameBase:"/";vn&&vn.route;let wn=useLocation(),Pn;if(ln){var Nn;let Kn=typeof ln=="string"?parsePath(ln):ln;Sn==="/"||(Nn=Kn.pathname)!=null&&Nn.startsWith(Sn)||invariant$1(!1),Pn=Kn}else Pn=wn;let Ln=Pn.pathname||"/",Fn=Sn==="/"?Ln:Ln.slice(Sn.length)||"/",zn=matchRoutes(sn,{pathname:Fn}),Dn=_renderMatches(zn&&zn.map(Kn=>Object.assign({},Kn,{params:Object.assign({},kn,Kn.params),pathname:joinPaths([Sn,cn.encodeLocation?cn.encodeLocation(Kn.pathname).pathname:Kn.pathname]),pathnameBase:Kn.pathnameBase==="/"?Sn:joinPaths([Sn,cn.encodeLocation?cn.encodeLocation(Kn.pathnameBase).pathname:Kn.pathnameBase])})),pn,dn||void 0);return ln&&Dn?jsx$1(LocationContext.Provider,{value:{location:_extends$1({pathname:"/",search:"",hash:"",state:null,key:"default"},Pn),navigationType:Action.Pop},children:Dn}):Dn}function DefaultErrorComponent(){let sn=useRouteError(),ln=isRouteErrorResponse(sn)?sn.status+" "+sn.statusText:sn instanceof Error?sn.message:JSON.stringify(sn),cn=sn instanceof Error?sn.stack:null;return jsxs$1(Fragment$1,{children:[jsx$1("h2",{children:"Unexpected Application Error!"}),jsx$1("h3",{style:{fontStyle:"italic"},children:ln}),cn?jsx$1("pre",{style:{padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},children:cn}):null,null]})}class RenderErrorBoundary extends reactExports.Component{constructor(ln){super(ln),this.state={location:ln.location,error:ln.error}}static getDerivedStateFromError(ln){return{error:ln}}static getDerivedStateFromProps(ln,cn){return cn.location!==ln.location?{error:ln.error,location:ln.location}:{error:ln.error||cn.error,location:cn.location}}componentDidCatch(ln,cn){console.error("React Router caught the following error during render",ln,cn)}render(){return this.state.error?jsx$1(RouteContext.Provider,{value:this.props.routeContext,children:jsx$1(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})}):this.props.children}}function RenderedRoute(sn){let{routeContext:ln,match:cn,children:dn}=sn,pn=reactExports.useContext(DataRouterContext);return pn&&pn.static&&pn.staticContext&&(cn.route.errorElement||cn.route.ErrorBoundary)&&(pn.staticContext._deepestRenderedBoundaryId=cn.route.id),jsx$1(RouteContext.Provider,{value:ln,children:dn})}function _renderMatches(sn,ln,cn){if(ln===void 0&&(ln=[]),sn==null)if(cn!=null&&cn.errors)sn=cn.matches;else return null;let dn=sn,pn=cn==null?void 0:cn.errors;if(pn!=null){let vn=dn.findIndex(kn=>kn.route.id&&(pn==null?void 0:pn[kn.route.id]));vn>=0||invariant$1(!1),dn=dn.slice(0,Math.min(dn.length,vn+1))}return dn.reduceRight((vn,kn,Sn)=>{let wn=kn.route.id?pn==null?void 0:pn[kn.route.id]:null,Pn=null;cn&&(kn.route.ErrorBoundary?Pn=reactExports.createElement(kn.route.ErrorBoundary,null):kn.route.errorElement?Pn=kn.route.errorElement:Pn=jsx$1(DefaultErrorComponent,{}));let Nn=ln.concat(dn.slice(0,Sn+1)),Ln=()=>{let Fn=vn;return wn?Fn=Pn:kn.route.Component?Fn=reactExports.createElement(kn.route.Component,null):kn.route.element&&(Fn=kn.route.element),jsx$1(RenderedRoute,{match:kn,routeContext:{outlet:vn,matches:Nn},children:Fn})};return cn&&(kn.route.ErrorBoundary||kn.route.errorElement||Sn===0)?jsx$1(RenderErrorBoundary,{location:cn.location,component:Pn,error:wn,children:Ln(),routeContext:{outlet:null,matches:Nn}}):Ln()},null)}var DataRouterHook$1;(function(sn){sn.UseBlocker="useBlocker",sn.UseRevalidator="useRevalidator"})(DataRouterHook$1||(DataRouterHook$1={}));var DataRouterStateHook$1;(function(sn){sn.UseBlocker="useBlocker",sn.UseLoaderData="useLoaderData",sn.UseActionData="useActionData",sn.UseRouteError="useRouteError",sn.UseNavigation="useNavigation",sn.UseRouteLoaderData="useRouteLoaderData",sn.UseMatches="useMatches",sn.UseRevalidator="useRevalidator"})(DataRouterStateHook$1||(DataRouterStateHook$1={}));function useDataRouterState(sn){let ln=reactExports.useContext(DataRouterStateContext);return ln||invariant$1(!1),ln}function useRouteContext(sn){let ln=reactExports.useContext(RouteContext);return ln||invariant$1(!1),ln}function useCurrentRouteId(sn){let ln=useRouteContext(),cn=ln.matches[ln.matches.length-1];return cn.route.id||invariant$1(!1),cn.route.id}function useRouteError(){var sn;let ln=reactExports.useContext(RouteErrorContext),cn=useDataRouterState(DataRouterStateHook$1.UseRouteError),dn=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return ln||((sn=cn.errors)==null?void 0:sn[dn])}function Route(sn){invariant$1(!1)}function Router(sn){let{basename:ln="/",children:cn=null,location:dn,navigationType:pn=Action.Pop,navigator:vn,static:kn=!1}=sn;useInRouterContext()&&invariant$1(!1);let Sn=ln.replace(/^\/*/,"/"),wn=reactExports.useMemo(()=>({basename:Sn,navigator:vn,static:kn}),[Sn,vn,kn]);typeof dn=="string"&&(dn=parsePath(dn));let{pathname:Pn="/",search:Nn="",hash:Ln="",state:Fn=null,key:zn="default"}=dn,Dn=reactExports.useMemo(()=>{let Kn=stripBasename(Pn,Sn);return Kn==null?null:{location:{pathname:Kn,search:Nn,hash:Ln,state:Fn,key:zn},navigationType:pn}},[Sn,Pn,Nn,Ln,Fn,zn,pn]);return Dn==null?null:jsx$1(NavigationContext.Provider,{value:wn,children:jsx$1(LocationContext.Provider,{children:cn,value:Dn})})}function Routes(sn){let{children:ln,location:cn}=sn,dn=reactExports.useContext(DataRouterContext),pn=dn&&!ln?dn.router.routes:createRoutesFromChildren(ln);return useRoutes(pn,cn)}var AwaitRenderStatus;(function(sn){sn[sn.pending=0]="pending",sn[sn.success=1]="success",sn[sn.error=2]="error"})(AwaitRenderStatus||(AwaitRenderStatus={}));new Promise(()=>{});function createRoutesFromChildren(sn,ln){ln===void 0&&(ln=[]);let cn=[];return reactExports.Children.forEach(sn,(dn,pn)=>{if(!reactExports.isValidElement(dn))return;let vn=[...ln,pn];if(dn.type===reactExports.Fragment){cn.push.apply(cn,createRoutesFromChildren(dn.props.children,vn));return}dn.type!==Route&&invariant$1(!1),!dn.props.index||!dn.props.children||invariant$1(!1);let kn={id:dn.props.id||vn.join("-"),caseSensitive:dn.props.caseSensitive,element:dn.props.element,Component:dn.props.Component,index:dn.props.index,path:dn.props.path,loader:dn.props.loader,action:dn.props.action,errorElement:dn.props.errorElement,ErrorBoundary:dn.props.ErrorBoundary,hasErrorBoundary:dn.props.ErrorBoundary!=null||dn.props.errorElement!=null,shouldRevalidate:dn.props.shouldRevalidate,handle:dn.props.handle,lazy:dn.props.lazy};dn.props.children&&(kn.children=createRoutesFromChildren(dn.props.children,vn)),cn.push(kn)}),cn}/**
 * React Router DOM v6.10.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function createSearchParams(sn){return sn===void 0&&(sn=""),new URLSearchParams(typeof sn=="string"||Array.isArray(sn)||sn instanceof URLSearchParams?sn:Object.keys(sn).reduce((ln,cn)=>{let dn=sn[cn];return ln.concat(Array.isArray(dn)?dn.map(pn=>[cn,pn]):[[cn,dn]])},[]))}function getSearchParamsForLocation(sn,ln){let cn=createSearchParams(sn);if(ln)for(let dn of ln.keys())cn.has(dn)||ln.getAll(dn).forEach(pn=>{cn.append(dn,pn)});return cn}function BrowserRouter(sn){let{basename:ln,children:cn,window:dn}=sn,pn=reactExports.useRef();pn.current==null&&(pn.current=createBrowserHistory({window:dn,v5Compat:!0}));let vn=pn.current,[kn,Sn]=reactExports.useState({action:vn.action,location:vn.location});return reactExports.useLayoutEffect(()=>vn.listen(Sn),[vn]),jsx$1(Router,{basename:ln,children:cn,location:kn.location,navigationType:kn.action,navigator:vn})}var DataRouterHook;(function(sn){sn.UseScrollRestoration="useScrollRestoration",sn.UseSubmitImpl="useSubmitImpl",sn.UseFetcher="useFetcher"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(sn){sn.UseFetchers="useFetchers",sn.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useSearchParams(sn){let ln=reactExports.useRef(createSearchParams(sn)),cn=reactExports.useRef(!1),dn=useLocation(),pn=reactExports.useMemo(()=>getSearchParamsForLocation(dn.search,cn.current?null:ln.current),[dn.search]),vn=useNavigate(),kn=reactExports.useCallback((Sn,wn)=>{const Pn=createSearchParams(typeof Sn=="function"?Sn(pn):Sn);cn.current=!0,vn("?"+Pn,wn)},[vn,pn]);return[pn,kn]}const MODE="production",CDN_URL="https://cdn.inflearn.com",ANTMAN_APP_URL="https://www.inflearn.com",APP_URL="https://www.inflearn.com",API_ENDPOINT$1={}.VITE_USE_DEV?"/api":"https://www.inflearn.com/api",ACCOUNT_API_URL="https://account.inflearn.com",DEVOPS_API_URL="https://devops-api.inflearn.com",ACCOUNT_API_ENDPOINT={}.VITE_USE_DEV?"/account":`${ACCOUNT_API_URL}/api`,DEVOPS_API_ENDPOINT={}.VITE_USE_DEV?"/devops":DEVOPS_API_URL,DATADOG_RUM_PRIVACY_LEVEL="mask-user-input",HACKLE_BROWSER_SDK_KEY="rb1wDPCB39swIGfTAhDcz0QXvmh6hayS",PASSPHRASE$1="GL0jQCB0pfftR6QLGFiL",MIXPANEL_TOKEN="c05d8cc017a29af05e50c0d43d848d2d",RALLIT_B2C_URL="https://www.rallit.com",COMMIT_HASH="fdb0512",appConfig={MODE,CDN_URL,ANTMAN_APP_URL,APP_URL,DATADOG_RUM_PRIVACY_LEVEL,HACKLE_BROWSER_SDK_KEY,PASSPHRASE:PASSPHRASE$1,API_ENDPOINT:API_ENDPOINT$1,MIXPANEL_TOKEN,RALLIT_B2C_URL,ACCOUNT_API_ENDPOINT,COMMIT_HASH,DEVOPS_API_ENDPOINT};var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global;const freeGlobal$1=freeGlobal;var freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal$1||freeSelf||Function("return this")();const root$1=root;var Symbol$2=root$1.Symbol;const Symbol$3=Symbol$2;var objectProto$i=Object.prototype,hasOwnProperty$g=objectProto$i.hasOwnProperty,nativeObjectToString$1=objectProto$i.toString,symToStringTag$1=Symbol$3?Symbol$3.toStringTag:void 0;function getRawTag(sn){var ln=hasOwnProperty$g.call(sn,symToStringTag$1),cn=sn[symToStringTag$1];try{sn[symToStringTag$1]=void 0;var dn=!0}catch{}var pn=nativeObjectToString$1.call(sn);return dn&&(ln?sn[symToStringTag$1]=cn:delete sn[symToStringTag$1]),pn}var objectProto$h=Object.prototype,nativeObjectToString=objectProto$h.toString;function objectToString$2(sn){return nativeObjectToString.call(sn)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$3?Symbol$3.toStringTag:void 0;function baseGetTag(sn){return sn==null?sn===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(sn)?getRawTag(sn):objectToString$2(sn)}function isObjectLike(sn){return sn!=null&&typeof sn=="object"}var symbolTag$3="[object Symbol]";function isSymbol$3(sn){return typeof sn=="symbol"||isObjectLike(sn)&&baseGetTag(sn)==symbolTag$3}function arrayMap(sn,ln){for(var cn=-1,dn=sn==null?0:sn.length,pn=Array(dn);++cn<dn;)pn[cn]=ln(sn[cn],cn,sn);return pn}var isArray$8=Array.isArray;const isArray$9=isArray$8;var INFINITY$2=1/0,symbolProto$2=Symbol$3?Symbol$3.prototype:void 0,symbolToString=symbolProto$2?symbolProto$2.toString:void 0;function baseToString(sn){if(typeof sn=="string")return sn;if(isArray$9(sn))return arrayMap(sn,baseToString)+"";if(isSymbol$3(sn))return symbolToString?symbolToString.call(sn):"";var ln=sn+"";return ln=="0"&&1/sn==-INFINITY$2?"-0":ln}var reWhitespace=/\s/;function trimmedEndIndex(sn){for(var ln=sn.length;ln--&&reWhitespace.test(sn.charAt(ln)););return ln}var reTrimStart=/^\s+/;function baseTrim(sn){return sn&&sn.slice(0,trimmedEndIndex(sn)+1).replace(reTrimStart,"")}function isObject$g(sn){var ln=typeof sn;return sn!=null&&(ln=="object"||ln=="function")}var NAN=0/0,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(sn){if(typeof sn=="number")return sn;if(isSymbol$3(sn))return NAN;if(isObject$g(sn)){var ln=typeof sn.valueOf=="function"?sn.valueOf():sn;sn=isObject$g(ln)?ln+"":ln}if(typeof sn!="string")return sn===0?sn:+sn;sn=baseTrim(sn);var cn=reIsBinary.test(sn);return cn||reIsOctal.test(sn)?freeParseInt(sn.slice(2),cn?2:8):reIsBadHex.test(sn)?NAN:+sn}var INFINITY$1=1/0,MAX_INTEGER=17976931348623157e292;function toFinite(sn){if(!sn)return sn===0?sn:0;if(sn=toNumber(sn),sn===INFINITY$1||sn===-INFINITY$1){var ln=sn<0?-1:1;return ln*MAX_INTEGER}return sn===sn?sn:0}function toInteger(sn){var ln=toFinite(sn),cn=ln%1;return ln===ln?cn?ln-cn:ln:0}function identity$1(sn){return sn}var asyncTag="[object AsyncFunction]",funcTag$2="[object Function]",genTag$1="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(sn){if(!isObject$g(sn))return!1;var ln=baseGetTag(sn);return ln==funcTag$2||ln==genTag$1||ln==asyncTag||ln==proxyTag}var coreJsData=root$1["__core-js_shared__"];const coreJsData$1=coreJsData;var maskSrcKey=function(){var sn=/[^.]+$/.exec(coreJsData$1&&coreJsData$1.keys&&coreJsData$1.keys.IE_PROTO||"");return sn?"Symbol(src)_1."+sn:""}();function isMasked(sn){return!!maskSrcKey&&maskSrcKey in sn}var funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource(sn){if(sn!=null){try{return funcToString$2.call(sn)}catch{}try{return sn+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$g=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$f=objectProto$g.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$f).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(sn){if(!isObject$g(sn)||isMasked(sn))return!1;var ln=isFunction(sn)?reIsNative:reIsHostCtor;return ln.test(toSource(sn))}function getValue(sn,ln){return sn==null?void 0:sn[ln]}function getNative(sn,ln){var cn=getValue(sn,ln);return baseIsNative(cn)?cn:void 0}var WeakMap$3=getNative(root$1,"WeakMap");const WeakMap$4=WeakMap$3;var objectCreate$2=Object.create,baseCreate=function(){function sn(){}return function(ln){if(!isObject$g(ln))return{};if(objectCreate$2)return objectCreate$2(ln);sn.prototype=ln;var cn=new sn;return sn.prototype=void 0,cn}}();const baseCreate$1=baseCreate;function apply$3(sn,ln,cn){switch(cn.length){case 0:return sn.call(ln);case 1:return sn.call(ln,cn[0]);case 2:return sn.call(ln,cn[0],cn[1]);case 3:return sn.call(ln,cn[0],cn[1],cn[2])}return sn.apply(ln,cn)}function copyArray(sn,ln){var cn=-1,dn=sn.length;for(ln||(ln=Array(dn));++cn<dn;)ln[cn]=sn[cn];return ln}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(sn){var ln=0,cn=0;return function(){var dn=nativeNow(),pn=HOT_SPAN-(dn-cn);if(cn=dn,pn>0){if(++ln>=HOT_COUNT)return arguments[0]}else ln=0;return sn.apply(void 0,arguments)}}function constant(sn){return function(){return sn}}var defineProperty$8=function(){try{var sn=getNative(Object,"defineProperty");return sn({},"",{}),sn}catch{}}();const defineProperty$9=defineProperty$8;var baseSetToString=defineProperty$9?function(sn,ln){return defineProperty$9(sn,"toString",{configurable:!0,enumerable:!1,value:constant(ln),writable:!0})}:identity$1;const baseSetToString$1=baseSetToString;var setToString=shortOut(baseSetToString$1);const setToString$1=setToString;function arrayEach(sn,ln){for(var cn=-1,dn=sn==null?0:sn.length;++cn<dn&&ln(sn[cn],cn,sn)!==!1;);return sn}function baseFindIndex(sn,ln,cn,dn){for(var pn=sn.length,vn=cn+(dn?1:-1);dn?vn--:++vn<pn;)if(ln(sn[vn],vn,sn))return vn;return-1}var MAX_SAFE_INTEGER$2=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(sn,ln){var cn=typeof sn;return ln=ln??MAX_SAFE_INTEGER$2,!!ln&&(cn=="number"||cn!="symbol"&&reIsUint.test(sn))&&sn>-1&&sn%1==0&&sn<ln}function baseAssignValue(sn,ln,cn){ln=="__proto__"&&defineProperty$9?defineProperty$9(sn,ln,{configurable:!0,enumerable:!0,value:cn,writable:!0}):sn[ln]=cn}function eq(sn,ln){return sn===ln||sn!==sn&&ln!==ln}var objectProto$f=Object.prototype,hasOwnProperty$e=objectProto$f.hasOwnProperty;function assignValue(sn,ln,cn){var dn=sn[ln];(!(hasOwnProperty$e.call(sn,ln)&&eq(dn,cn))||cn===void 0&&!(ln in sn))&&baseAssignValue(sn,ln,cn)}function copyObject(sn,ln,cn,dn){var pn=!cn;cn||(cn={});for(var vn=-1,kn=ln.length;++vn<kn;){var Sn=ln[vn],wn=dn?dn(cn[Sn],sn[Sn],Sn,cn,sn):void 0;wn===void 0&&(wn=sn[Sn]),pn?baseAssignValue(cn,Sn,wn):assignValue(cn,Sn,wn)}return cn}var nativeMax$3=Math.max;function overRest(sn,ln,cn){return ln=nativeMax$3(ln===void 0?sn.length-1:ln,0),function(){for(var dn=arguments,pn=-1,vn=nativeMax$3(dn.length-ln,0),kn=Array(vn);++pn<vn;)kn[pn]=dn[ln+pn];pn=-1;for(var Sn=Array(ln+1);++pn<ln;)Sn[pn]=dn[pn];return Sn[ln]=cn(kn),apply$3(sn,this,Sn)}}function baseRest(sn,ln){return setToString$1(overRest(sn,ln,identity$1),sn+"")}var MAX_SAFE_INTEGER$1=9007199254740991;function isLength(sn){return typeof sn=="number"&&sn>-1&&sn%1==0&&sn<=MAX_SAFE_INTEGER$1}function isArrayLike(sn){return sn!=null&&isLength(sn.length)&&!isFunction(sn)}function isIterateeCall(sn,ln,cn){if(!isObject$g(cn))return!1;var dn=typeof ln;return(dn=="number"?isArrayLike(cn)&&isIndex(ln,cn.length):dn=="string"&&ln in cn)?eq(cn[ln],sn):!1}function createAssigner(sn){return baseRest(function(ln,cn){var dn=-1,pn=cn.length,vn=pn>1?cn[pn-1]:void 0,kn=pn>2?cn[2]:void 0;for(vn=sn.length>3&&typeof vn=="function"?(pn--,vn):void 0,kn&&isIterateeCall(cn[0],cn[1],kn)&&(vn=pn<3?void 0:vn,pn=1),ln=Object(ln);++dn<pn;){var Sn=cn[dn];Sn&&sn(ln,Sn,dn,vn)}return ln})}var objectProto$e=Object.prototype;function isPrototype(sn){var ln=sn&&sn.constructor,cn=typeof ln=="function"&&ln.prototype||objectProto$e;return sn===cn}function baseTimes(sn,ln){for(var cn=-1,dn=Array(sn);++cn<sn;)dn[cn]=ln(cn);return dn}var argsTag$3="[object Arguments]";function baseIsArguments(sn){return isObjectLike(sn)&&baseGetTag(sn)==argsTag$3}var objectProto$d=Object.prototype,hasOwnProperty$d=objectProto$d.hasOwnProperty,propertyIsEnumerable$1=objectProto$d.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(sn){return isObjectLike(sn)&&hasOwnProperty$d.call(sn,"callee")&&!propertyIsEnumerable$1.call(sn,"callee")};const isArguments$1=isArguments;function stubFalse(){return!1}var freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$1=moduleExports$2?root$1.Buffer:void 0,nativeIsBuffer=Buffer$1?Buffer$1.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse;const isBuffer$1=isBuffer;var argsTag$2="[object Arguments]",arrayTag$2="[object Array]",boolTag$3="[object Boolean]",dateTag$3="[object Date]",errorTag$2="[object Error]",funcTag$1="[object Function]",mapTag$6="[object Map]",numberTag$3="[object Number]",objectTag$4="[object Object]",regexpTag$3="[object RegExp]",setTag$6="[object Set]",stringTag$3="[object String]",weakMapTag$2="[object WeakMap]",arrayBufferTag$3="[object ArrayBuffer]",dataViewTag$4="[object DataView]",float32Tag$2="[object Float32Array]",float64Tag$2="[object Float64Array]",int8Tag$2="[object Int8Array]",int16Tag$2="[object Int16Array]",int32Tag$2="[object Int32Array]",uint8Tag$2="[object Uint8Array]",uint8ClampedTag$2="[object Uint8ClampedArray]",uint16Tag$2="[object Uint16Array]",uint32Tag$2="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag$2]=typedArrayTags[float64Tag$2]=typedArrayTags[int8Tag$2]=typedArrayTags[int16Tag$2]=typedArrayTags[int32Tag$2]=typedArrayTags[uint8Tag$2]=typedArrayTags[uint8ClampedTag$2]=typedArrayTags[uint16Tag$2]=typedArrayTags[uint32Tag$2]=!0;typedArrayTags[argsTag$2]=typedArrayTags[arrayTag$2]=typedArrayTags[arrayBufferTag$3]=typedArrayTags[boolTag$3]=typedArrayTags[dataViewTag$4]=typedArrayTags[dateTag$3]=typedArrayTags[errorTag$2]=typedArrayTags[funcTag$1]=typedArrayTags[mapTag$6]=typedArrayTags[numberTag$3]=typedArrayTags[objectTag$4]=typedArrayTags[regexpTag$3]=typedArrayTags[setTag$6]=typedArrayTags[stringTag$3]=typedArrayTags[weakMapTag$2]=!1;function baseIsTypedArray(sn){return isObjectLike(sn)&&isLength(sn.length)&&!!typedArrayTags[baseGetTag(sn)]}function baseUnary(sn){return function(ln){return sn(ln)}}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,freeProcess=moduleExports$1&&freeGlobal$1.process,nodeUtil=function(){try{var sn=freeModule$1&&freeModule$1.require&&freeModule$1.require("util").types;return sn||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}();const nodeUtil$1=nodeUtil;var nodeIsTypedArray=nodeUtil$1&&nodeUtil$1.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;const isTypedArray$1=isTypedArray;var objectProto$c=Object.prototype,hasOwnProperty$c=objectProto$c.hasOwnProperty;function arrayLikeKeys(sn,ln){var cn=isArray$9(sn),dn=!cn&&isArguments$1(sn),pn=!cn&&!dn&&isBuffer$1(sn),vn=!cn&&!dn&&!pn&&isTypedArray$1(sn),kn=cn||dn||pn||vn,Sn=kn?baseTimes(sn.length,String):[],wn=Sn.length;for(var Pn in sn)(ln||hasOwnProperty$c.call(sn,Pn))&&!(kn&&(Pn=="length"||pn&&(Pn=="offset"||Pn=="parent")||vn&&(Pn=="buffer"||Pn=="byteLength"||Pn=="byteOffset")||isIndex(Pn,wn)))&&Sn.push(Pn);return Sn}function overArg(sn,ln){return function(cn){return sn(ln(cn))}}var nativeKeys=overArg(Object.keys,Object);const nativeKeys$1=nativeKeys;var objectProto$b=Object.prototype,hasOwnProperty$b=objectProto$b.hasOwnProperty;function baseKeys(sn){if(!isPrototype(sn))return nativeKeys$1(sn);var ln=[];for(var cn in Object(sn))hasOwnProperty$b.call(sn,cn)&&cn!="constructor"&&ln.push(cn);return ln}function keys$1(sn){return isArrayLike(sn)?arrayLikeKeys(sn):baseKeys(sn)}function nativeKeysIn(sn){var ln=[];if(sn!=null)for(var cn in Object(sn))ln.push(cn);return ln}var objectProto$a=Object.prototype,hasOwnProperty$a=objectProto$a.hasOwnProperty;function baseKeysIn(sn){if(!isObject$g(sn))return nativeKeysIn(sn);var ln=isPrototype(sn),cn=[];for(var dn in sn)dn=="constructor"&&(ln||!hasOwnProperty$a.call(sn,dn))||cn.push(dn);return cn}function keysIn(sn){return isArrayLike(sn)?arrayLikeKeys(sn,!0):baseKeysIn(sn)}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(sn,ln){if(isArray$9(sn))return!1;var cn=typeof sn;return cn=="number"||cn=="symbol"||cn=="boolean"||sn==null||isSymbol$3(sn)?!0:reIsPlainProp.test(sn)||!reIsDeepProp.test(sn)||ln!=null&&sn in Object(ln)}var nativeCreate=getNative(Object,"create");const nativeCreate$1=nativeCreate;function hashClear(){this.__data__=nativeCreate$1?nativeCreate$1(null):{},this.size=0}function hashDelete(sn){var ln=this.has(sn)&&delete this.__data__[sn];return this.size-=ln?1:0,ln}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$9=Object.prototype,hasOwnProperty$9=objectProto$9.hasOwnProperty;function hashGet(sn){var ln=this.__data__;if(nativeCreate$1){var cn=ln[sn];return cn===HASH_UNDEFINED$2?void 0:cn}return hasOwnProperty$9.call(ln,sn)?ln[sn]:void 0}var objectProto$8=Object.prototype,hasOwnProperty$8=objectProto$8.hasOwnProperty;function hashHas(sn){var ln=this.__data__;return nativeCreate$1?ln[sn]!==void 0:hasOwnProperty$8.call(ln,sn)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(sn,ln){var cn=this.__data__;return this.size+=this.has(sn)?0:1,cn[sn]=nativeCreate$1&&ln===void 0?HASH_UNDEFINED$1:ln,this}function Hash(sn){var ln=-1,cn=sn==null?0:sn.length;for(this.clear();++ln<cn;){var dn=sn[ln];this.set(dn[0],dn[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(sn,ln){for(var cn=sn.length;cn--;)if(eq(sn[cn][0],ln))return cn;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(sn){var ln=this.__data__,cn=assocIndexOf(ln,sn);if(cn<0)return!1;var dn=ln.length-1;return cn==dn?ln.pop():splice.call(ln,cn,1),--this.size,!0}function listCacheGet(sn){var ln=this.__data__,cn=assocIndexOf(ln,sn);return cn<0?void 0:ln[cn][1]}function listCacheHas(sn){return assocIndexOf(this.__data__,sn)>-1}function listCacheSet(sn,ln){var cn=this.__data__,dn=assocIndexOf(cn,sn);return dn<0?(++this.size,cn.push([sn,ln])):cn[dn][1]=ln,this}function ListCache(sn){var ln=-1,cn=sn==null?0:sn.length;for(this.clear();++ln<cn;){var dn=sn[ln];this.set(dn[0],dn[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$3=getNative(root$1,"Map");const Map$4=Map$3;function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$4||ListCache),string:new Hash}}function isKeyable(sn){var ln=typeof sn;return ln=="string"||ln=="number"||ln=="symbol"||ln=="boolean"?sn!=="__proto__":sn===null}function getMapData(sn,ln){var cn=sn.__data__;return isKeyable(ln)?cn[typeof ln=="string"?"string":"hash"]:cn.map}function mapCacheDelete(sn){var ln=getMapData(this,sn).delete(sn);return this.size-=ln?1:0,ln}function mapCacheGet(sn){return getMapData(this,sn).get(sn)}function mapCacheHas(sn){return getMapData(this,sn).has(sn)}function mapCacheSet(sn,ln){var cn=getMapData(this,sn),dn=cn.size;return cn.set(sn,ln),this.size+=cn.size==dn?0:1,this}function MapCache(sn){var ln=-1,cn=sn==null?0:sn.length;for(this.clear();++ln<cn;){var dn=sn[ln];this.set(dn[0],dn[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT$2="Expected a function";function memoize(sn,ln){if(typeof sn!="function"||ln!=null&&typeof ln!="function")throw new TypeError(FUNC_ERROR_TEXT$2);var cn=function(){var dn=arguments,pn=ln?ln.apply(this,dn):dn[0],vn=cn.cache;if(vn.has(pn))return vn.get(pn);var kn=sn.apply(this,dn);return cn.cache=vn.set(pn,kn)||vn,kn};return cn.cache=new(memoize.Cache||MapCache),cn}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(sn){var ln=memoize(sn,function(dn){return cn.size===MAX_MEMOIZE_SIZE&&cn.clear(),dn}),cn=ln.cache;return ln}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(sn){var ln=[];return sn.charCodeAt(0)===46&&ln.push(""),sn.replace(rePropName,function(cn,dn,pn,vn){ln.push(pn?vn.replace(reEscapeChar,"$1"):dn||cn)}),ln});const stringToPath$1=stringToPath;function toString$8(sn){return sn==null?"":baseToString(sn)}function castPath(sn,ln){return isArray$9(sn)?sn:isKey(sn,ln)?[sn]:stringToPath$1(toString$8(sn))}var INFINITY=1/0;function toKey(sn){if(typeof sn=="string"||isSymbol$3(sn))return sn;var ln=sn+"";return ln=="0"&&1/sn==-INFINITY?"-0":ln}function baseGet(sn,ln){ln=castPath(ln,sn);for(var cn=0,dn=ln.length;sn!=null&&cn<dn;)sn=sn[toKey(ln[cn++])];return cn&&cn==dn?sn:void 0}function get$1(sn,ln,cn){var dn=sn==null?void 0:baseGet(sn,ln);return dn===void 0?cn:dn}function arrayPush(sn,ln){for(var cn=-1,dn=ln.length,pn=sn.length;++cn<dn;)sn[pn+cn]=ln[cn];return sn}var spreadableSymbol=Symbol$3?Symbol$3.isConcatSpreadable:void 0;function isFlattenable(sn){return isArray$9(sn)||isArguments$1(sn)||!!(spreadableSymbol&&sn&&sn[spreadableSymbol])}function baseFlatten(sn,ln,cn,dn,pn){var vn=-1,kn=sn.length;for(cn||(cn=isFlattenable),pn||(pn=[]);++vn<kn;){var Sn=sn[vn];ln>0&&cn(Sn)?ln>1?baseFlatten(Sn,ln-1,cn,dn,pn):arrayPush(pn,Sn):dn||(pn[pn.length]=Sn)}return pn}function flatten(sn){var ln=sn==null?0:sn.length;return ln?baseFlatten(sn,1):[]}function flatRest(sn){return setToString$1(overRest(sn,void 0,flatten),sn+"")}var getPrototype=overArg(Object.getPrototypeOf,Object);const getPrototype$1=getPrototype;var objectTag$3="[object Object]",funcProto=Function.prototype,objectProto$7=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$7=objectProto$7.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject$4(sn){if(!isObjectLike(sn)||baseGetTag(sn)!=objectTag$3)return!1;var ln=getPrototype$1(sn);if(ln===null)return!0;var cn=hasOwnProperty$7.call(ln,"constructor")&&ln.constructor;return typeof cn=="function"&&cn instanceof cn&&funcToString.call(cn)==objectCtorString}function baseSlice(sn,ln,cn){var dn=-1,pn=sn.length;ln<0&&(ln=-ln>pn?0:pn+ln),cn=cn>pn?pn:cn,cn<0&&(cn+=pn),pn=ln>cn?0:cn-ln>>>0,ln>>>=0;for(var vn=Array(pn);++dn<pn;)vn[dn]=sn[dn+ln];return vn}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(sn){var ln=this.__data__,cn=ln.delete(sn);return this.size=ln.size,cn}function stackGet(sn){return this.__data__.get(sn)}function stackHas(sn){return this.__data__.has(sn)}var LARGE_ARRAY_SIZE=200;function stackSet(sn,ln){var cn=this.__data__;if(cn instanceof ListCache){var dn=cn.__data__;if(!Map$4||dn.length<LARGE_ARRAY_SIZE-1)return dn.push([sn,ln]),this.size=++cn.size,this;cn=this.__data__=new MapCache(dn)}return cn.set(sn,ln),this.size=cn.size,this}function Stack$1(sn){var ln=this.__data__=new ListCache(sn);this.size=ln.size}Stack$1.prototype.clear=stackClear;Stack$1.prototype.delete=stackDelete;Stack$1.prototype.get=stackGet;Stack$1.prototype.has=stackHas;Stack$1.prototype.set=stackSet;function baseAssign(sn,ln){return sn&&copyObject(ln,keys$1(ln),sn)}function baseAssignIn(sn,ln){return sn&&copyObject(ln,keysIn(ln),sn)}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,Buffer=moduleExports?root$1.Buffer:void 0,allocUnsafe=Buffer?Buffer.allocUnsafe:void 0;function cloneBuffer(sn,ln){if(ln)return sn.slice();var cn=sn.length,dn=allocUnsafe?allocUnsafe(cn):new sn.constructor(cn);return sn.copy(dn),dn}function arrayFilter(sn,ln){for(var cn=-1,dn=sn==null?0:sn.length,pn=0,vn=[];++cn<dn;){var kn=sn[cn];ln(kn,cn,sn)&&(vn[pn++]=kn)}return vn}function stubArray(){return[]}var objectProto$6=Object.prototype,propertyIsEnumerable=objectProto$6.propertyIsEnumerable,nativeGetSymbols$1=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols$1?function(sn){return sn==null?[]:(sn=Object(sn),arrayFilter(nativeGetSymbols$1(sn),function(ln){return propertyIsEnumerable.call(sn,ln)}))}:stubArray;const getSymbols$1=getSymbols;function copySymbols(sn,ln){return copyObject(sn,getSymbols$1(sn),ln)}var nativeGetSymbols=Object.getOwnPropertySymbols,getSymbolsIn=nativeGetSymbols?function(sn){for(var ln=[];sn;)arrayPush(ln,getSymbols$1(sn)),sn=getPrototype$1(sn);return ln}:stubArray;const getSymbolsIn$1=getSymbolsIn;function copySymbolsIn(sn,ln){return copyObject(sn,getSymbolsIn$1(sn),ln)}function baseGetAllKeys(sn,ln,cn){var dn=ln(sn);return isArray$9(sn)?dn:arrayPush(dn,cn(sn))}function getAllKeys(sn){return baseGetAllKeys(sn,keys$1,getSymbols$1)}function getAllKeysIn(sn){return baseGetAllKeys(sn,keysIn,getSymbolsIn$1)}var DataView$1=getNative(root$1,"DataView");const DataView$2=DataView$1;var Promise$3=getNative(root$1,"Promise");const Promise$4=Promise$3;var Set$1=getNative(root$1,"Set");const Set$2=Set$1;var mapTag$5="[object Map]",objectTag$2="[object Object]",promiseTag="[object Promise]",setTag$5="[object Set]",weakMapTag$1="[object WeakMap]",dataViewTag$3="[object DataView]",dataViewCtorString=toSource(DataView$2),mapCtorString=toSource(Map$4),promiseCtorString=toSource(Promise$4),setCtorString=toSource(Set$2),weakMapCtorString=toSource(WeakMap$4),getTag=baseGetTag;(DataView$2&&getTag(new DataView$2(new ArrayBuffer(1)))!=dataViewTag$3||Map$4&&getTag(new Map$4)!=mapTag$5||Promise$4&&getTag(Promise$4.resolve())!=promiseTag||Set$2&&getTag(new Set$2)!=setTag$5||WeakMap$4&&getTag(new WeakMap$4)!=weakMapTag$1)&&(getTag=function(sn){var ln=baseGetTag(sn),cn=ln==objectTag$2?sn.constructor:void 0,dn=cn?toSource(cn):"";if(dn)switch(dn){case dataViewCtorString:return dataViewTag$3;case mapCtorString:return mapTag$5;case promiseCtorString:return promiseTag;case setCtorString:return setTag$5;case weakMapCtorString:return weakMapTag$1}return ln});const getTag$1=getTag;var objectProto$5=Object.prototype,hasOwnProperty$6=objectProto$5.hasOwnProperty;function initCloneArray(sn){var ln=sn.length,cn=new sn.constructor(ln);return ln&&typeof sn[0]=="string"&&hasOwnProperty$6.call(sn,"index")&&(cn.index=sn.index,cn.input=sn.input),cn}var Uint8Array$1=root$1.Uint8Array;const Uint8Array$2=Uint8Array$1;function cloneArrayBuffer(sn){var ln=new sn.constructor(sn.byteLength);return new Uint8Array$2(ln).set(new Uint8Array$2(sn)),ln}function cloneDataView(sn,ln){var cn=ln?cloneArrayBuffer(sn.buffer):sn.buffer;return new sn.constructor(cn,sn.byteOffset,sn.byteLength)}var reFlags=/\w*$/;function cloneRegExp(sn){var ln=new sn.constructor(sn.source,reFlags.exec(sn));return ln.lastIndex=sn.lastIndex,ln}var symbolProto$1=Symbol$3?Symbol$3.prototype:void 0,symbolValueOf$1=symbolProto$1?symbolProto$1.valueOf:void 0;function cloneSymbol(sn){return symbolValueOf$1?Object(symbolValueOf$1.call(sn)):{}}function cloneTypedArray(sn,ln){var cn=ln?cloneArrayBuffer(sn.buffer):sn.buffer;return new sn.constructor(cn,sn.byteOffset,sn.length)}var boolTag$2="[object Boolean]",dateTag$2="[object Date]",mapTag$4="[object Map]",numberTag$2="[object Number]",regexpTag$2="[object RegExp]",setTag$4="[object Set]",stringTag$2="[object String]",symbolTag$2="[object Symbol]",arrayBufferTag$2="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag$1="[object Float32Array]",float64Tag$1="[object Float64Array]",int8Tag$1="[object Int8Array]",int16Tag$1="[object Int16Array]",int32Tag$1="[object Int32Array]",uint8Tag$1="[object Uint8Array]",uint8ClampedTag$1="[object Uint8ClampedArray]",uint16Tag$1="[object Uint16Array]",uint32Tag$1="[object Uint32Array]";function initCloneByTag(sn,ln,cn){var dn=sn.constructor;switch(ln){case arrayBufferTag$2:return cloneArrayBuffer(sn);case boolTag$2:case dateTag$2:return new dn(+sn);case dataViewTag$2:return cloneDataView(sn,cn);case float32Tag$1:case float64Tag$1:case int8Tag$1:case int16Tag$1:case int32Tag$1:case uint8Tag$1:case uint8ClampedTag$1:case uint16Tag$1:case uint32Tag$1:return cloneTypedArray(sn,cn);case mapTag$4:return new dn;case numberTag$2:case stringTag$2:return new dn(sn);case regexpTag$2:return cloneRegExp(sn);case setTag$4:return new dn;case symbolTag$2:return cloneSymbol(sn)}}function initCloneObject(sn){return typeof sn.constructor=="function"&&!isPrototype(sn)?baseCreate$1(getPrototype$1(sn)):{}}var mapTag$3="[object Map]";function baseIsMap(sn){return isObjectLike(sn)&&getTag$1(sn)==mapTag$3}var nodeIsMap=nodeUtil$1&&nodeUtil$1.isMap,isMap=nodeIsMap?baseUnary(nodeIsMap):baseIsMap;const isMap$1=isMap;var setTag$3="[object Set]";function baseIsSet(sn){return isObjectLike(sn)&&getTag$1(sn)==setTag$3}var nodeIsSet=nodeUtil$1&&nodeUtil$1.isSet,isSet=nodeIsSet?baseUnary(nodeIsSet):baseIsSet;const isSet$1=isSet;var CLONE_DEEP_FLAG$1=1,CLONE_FLAT_FLAG$1=2,CLONE_SYMBOLS_FLAG$1=4,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",genTag="[object GeneratorFunction]",mapTag$2="[object Map]",numberTag$1="[object Number]",objectTag$1="[object Object]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",symbolTag$1="[object Symbol]",weakMapTag="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",cloneableTags={};cloneableTags[argsTag$1]=cloneableTags[arrayTag$1]=cloneableTags[arrayBufferTag$1]=cloneableTags[dataViewTag$1]=cloneableTags[boolTag$1]=cloneableTags[dateTag$1]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[mapTag$2]=cloneableTags[numberTag$1]=cloneableTags[objectTag$1]=cloneableTags[regexpTag$1]=cloneableTags[setTag$2]=cloneableTags[stringTag$1]=cloneableTags[symbolTag$1]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=!0;cloneableTags[errorTag$1]=cloneableTags[funcTag]=cloneableTags[weakMapTag]=!1;function baseClone(sn,ln,cn,dn,pn,vn){var kn,Sn=ln&CLONE_DEEP_FLAG$1,wn=ln&CLONE_FLAT_FLAG$1,Pn=ln&CLONE_SYMBOLS_FLAG$1;if(cn&&(kn=pn?cn(sn,dn,pn,vn):cn(sn)),kn!==void 0)return kn;if(!isObject$g(sn))return sn;var Nn=isArray$9(sn);if(Nn){if(kn=initCloneArray(sn),!Sn)return copyArray(sn,kn)}else{var Ln=getTag$1(sn),Fn=Ln==funcTag||Ln==genTag;if(isBuffer$1(sn))return cloneBuffer(sn,Sn);if(Ln==objectTag$1||Ln==argsTag$1||Fn&&!pn){if(kn=wn||Fn?{}:initCloneObject(sn),!Sn)return wn?copySymbolsIn(sn,baseAssignIn(kn,sn)):copySymbols(sn,baseAssign(kn,sn))}else{if(!cloneableTags[Ln])return pn?sn:{};kn=initCloneByTag(sn,Ln,Sn)}}vn||(vn=new Stack$1);var zn=vn.get(sn);if(zn)return zn;vn.set(sn,kn),isSet$1(sn)?sn.forEach(function(qn){kn.add(baseClone(qn,ln,cn,qn,sn,vn))}):isMap$1(sn)&&sn.forEach(function(qn,Zn){kn.set(Zn,baseClone(qn,ln,cn,Zn,sn,vn))});var Dn=Pn?wn?getAllKeysIn:getAllKeys:wn?keysIn:keys$1,Kn=Nn?void 0:Dn(sn);return arrayEach(Kn||sn,function(qn,Zn){Kn&&(Zn=qn,qn=sn[Zn]),assignValue(kn,Zn,baseClone(qn,ln,cn,Zn,sn,vn))}),kn}var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(sn){return this.__data__.set(sn,HASH_UNDEFINED),this}function setCacheHas(sn){return this.__data__.has(sn)}function SetCache(sn){var ln=-1,cn=sn==null?0:sn.length;for(this.__data__=new MapCache;++ln<cn;)this.add(sn[ln])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(sn,ln){for(var cn=-1,dn=sn==null?0:sn.length;++cn<dn;)if(ln(sn[cn],cn,sn))return!0;return!1}function cacheHas(sn,ln){return sn.has(ln)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(sn,ln,cn,dn,pn,vn){var kn=cn&COMPARE_PARTIAL_FLAG$5,Sn=sn.length,wn=ln.length;if(Sn!=wn&&!(kn&&wn>Sn))return!1;var Pn=vn.get(sn),Nn=vn.get(ln);if(Pn&&Nn)return Pn==ln&&Nn==sn;var Ln=-1,Fn=!0,zn=cn&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(vn.set(sn,ln),vn.set(ln,sn);++Ln<Sn;){var Dn=sn[Ln],Kn=ln[Ln];if(dn)var qn=kn?dn(Kn,Dn,Ln,ln,sn,vn):dn(Dn,Kn,Ln,sn,ln,vn);if(qn!==void 0){if(qn)continue;Fn=!1;break}if(zn){if(!arraySome(ln,function(Zn,Yn){if(!cacheHas(zn,Yn)&&(Dn===Zn||pn(Dn,Zn,cn,dn,vn)))return zn.push(Yn)})){Fn=!1;break}}else if(!(Dn===Kn||pn(Dn,Kn,cn,dn,vn))){Fn=!1;break}}return vn.delete(sn),vn.delete(ln),Fn}function mapToArray(sn){var ln=-1,cn=Array(sn.size);return sn.forEach(function(dn,pn){cn[++ln]=[pn,dn]}),cn}function setToArray(sn){var ln=-1,cn=Array(sn.size);return sn.forEach(function(dn){cn[++ln]=dn}),cn}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag$1="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag$1="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$3?Symbol$3.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(sn,ln,cn,dn,pn,vn,kn){switch(cn){case dataViewTag:if(sn.byteLength!=ln.byteLength||sn.byteOffset!=ln.byteOffset)return!1;sn=sn.buffer,ln=ln.buffer;case arrayBufferTag:return!(sn.byteLength!=ln.byteLength||!vn(new Uint8Array$2(sn),new Uint8Array$2(ln)));case boolTag:case dateTag:case numberTag:return eq(+sn,+ln);case errorTag:return sn.name==ln.name&&sn.message==ln.message;case regexpTag:case stringTag:return sn==ln+"";case mapTag$1:var Sn=mapToArray;case setTag$1:var wn=dn&COMPARE_PARTIAL_FLAG$4;if(Sn||(Sn=setToArray),sn.size!=ln.size&&!wn)return!1;var Pn=kn.get(sn);if(Pn)return Pn==ln;dn|=COMPARE_UNORDERED_FLAG$2,kn.set(sn,ln);var Nn=equalArrays(Sn(sn),Sn(ln),dn,pn,vn,kn);return kn.delete(sn),Nn;case symbolTag:if(symbolValueOf)return symbolValueOf.call(sn)==symbolValueOf.call(ln)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$4=Object.prototype,hasOwnProperty$5=objectProto$4.hasOwnProperty;function equalObjects(sn,ln,cn,dn,pn,vn){var kn=cn&COMPARE_PARTIAL_FLAG$3,Sn=getAllKeys(sn),wn=Sn.length,Pn=getAllKeys(ln),Nn=Pn.length;if(wn!=Nn&&!kn)return!1;for(var Ln=wn;Ln--;){var Fn=Sn[Ln];if(!(kn?Fn in ln:hasOwnProperty$5.call(ln,Fn)))return!1}var zn=vn.get(sn),Dn=vn.get(ln);if(zn&&Dn)return zn==ln&&Dn==sn;var Kn=!0;vn.set(sn,ln),vn.set(ln,sn);for(var qn=kn;++Ln<wn;){Fn=Sn[Ln];var Zn=sn[Fn],Yn=ln[Fn];if(dn)var Jn=kn?dn(Yn,Zn,Fn,ln,sn,vn):dn(Zn,Yn,Fn,sn,ln,vn);if(!(Jn===void 0?Zn===Yn||pn(Zn,Yn,cn,dn,vn):Jn)){Kn=!1;break}qn||(qn=Fn=="constructor")}if(Kn&&!qn){var rs=sn.constructor,ss=ln.constructor;rs!=ss&&"constructor"in sn&&"constructor"in ln&&!(typeof rs=="function"&&rs instanceof rs&&typeof ss=="function"&&ss instanceof ss)&&(Kn=!1)}return vn.delete(sn),vn.delete(ln),Kn}var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto$3=Object.prototype,hasOwnProperty$4=objectProto$3.hasOwnProperty;function baseIsEqualDeep(sn,ln,cn,dn,pn,vn){var kn=isArray$9(sn),Sn=isArray$9(ln),wn=kn?arrayTag:getTag$1(sn),Pn=Sn?arrayTag:getTag$1(ln);wn=wn==argsTag?objectTag:wn,Pn=Pn==argsTag?objectTag:Pn;var Nn=wn==objectTag,Ln=Pn==objectTag,Fn=wn==Pn;if(Fn&&isBuffer$1(sn)){if(!isBuffer$1(ln))return!1;kn=!0,Nn=!1}if(Fn&&!Nn)return vn||(vn=new Stack$1),kn||isTypedArray$1(sn)?equalArrays(sn,ln,cn,dn,pn,vn):equalByTag(sn,ln,wn,cn,dn,pn,vn);if(!(cn&COMPARE_PARTIAL_FLAG$2)){var zn=Nn&&hasOwnProperty$4.call(sn,"__wrapped__"),Dn=Ln&&hasOwnProperty$4.call(ln,"__wrapped__");if(zn||Dn){var Kn=zn?sn.value():sn,qn=Dn?ln.value():ln;return vn||(vn=new Stack$1),pn(Kn,qn,cn,dn,vn)}}return Fn?(vn||(vn=new Stack$1),equalObjects(sn,ln,cn,dn,pn,vn)):!1}function baseIsEqual(sn,ln,cn,dn,pn){return sn===ln?!0:sn==null||ln==null||!isObjectLike(sn)&&!isObjectLike(ln)?sn!==sn&&ln!==ln:baseIsEqualDeep(sn,ln,cn,dn,baseIsEqual,pn)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(sn,ln,cn,dn){var pn=cn.length,vn=pn,kn=!dn;if(sn==null)return!vn;for(sn=Object(sn);pn--;){var Sn=cn[pn];if(kn&&Sn[2]?Sn[1]!==sn[Sn[0]]:!(Sn[0]in sn))return!1}for(;++pn<vn;){Sn=cn[pn];var wn=Sn[0],Pn=sn[wn],Nn=Sn[1];if(kn&&Sn[2]){if(Pn===void 0&&!(wn in sn))return!1}else{var Ln=new Stack$1;if(dn)var Fn=dn(Pn,Nn,wn,sn,ln,Ln);if(!(Fn===void 0?baseIsEqual(Nn,Pn,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,dn,Ln):Fn))return!1}}return!0}function isStrictComparable(sn){return sn===sn&&!isObject$g(sn)}function getMatchData(sn){for(var ln=keys$1(sn),cn=ln.length;cn--;){var dn=ln[cn],pn=sn[dn];ln[cn]=[dn,pn,isStrictComparable(pn)]}return ln}function matchesStrictComparable(sn,ln){return function(cn){return cn==null?!1:cn[sn]===ln&&(ln!==void 0||sn in Object(cn))}}function baseMatches(sn){var ln=getMatchData(sn);return ln.length==1&&ln[0][2]?matchesStrictComparable(ln[0][0],ln[0][1]):function(cn){return cn===sn||baseIsMatch(cn,sn,ln)}}function baseHasIn(sn,ln){return sn!=null&&ln in Object(sn)}function hasPath(sn,ln,cn){ln=castPath(ln,sn);for(var dn=-1,pn=ln.length,vn=!1;++dn<pn;){var kn=toKey(ln[dn]);if(!(vn=sn!=null&&cn(sn,kn)))break;sn=sn[kn]}return vn||++dn!=pn?vn:(pn=sn==null?0:sn.length,!!pn&&isLength(pn)&&isIndex(kn,pn)&&(isArray$9(sn)||isArguments$1(sn)))}function hasIn(sn,ln){return sn!=null&&hasPath(sn,ln,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(sn,ln){return isKey(sn)&&isStrictComparable(ln)?matchesStrictComparable(toKey(sn),ln):function(cn){var dn=get$1(cn,sn);return dn===void 0&&dn===ln?hasIn(cn,sn):baseIsEqual(ln,dn,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(sn){return function(ln){return ln==null?void 0:ln[sn]}}function basePropertyDeep(sn){return function(ln){return baseGet(ln,sn)}}function property(sn){return isKey(sn)?baseProperty(toKey(sn)):basePropertyDeep(sn)}function baseIteratee(sn){return typeof sn=="function"?sn:sn==null?identity$1:typeof sn=="object"?isArray$9(sn)?baseMatchesProperty(sn[0],sn[1]):baseMatches(sn):property(sn)}function createBaseFor(sn){return function(ln,cn,dn){for(var pn=-1,vn=Object(ln),kn=dn(ln),Sn=kn.length;Sn--;){var wn=kn[sn?Sn:++pn];if(cn(vn[wn],wn,vn)===!1)break}return ln}}var baseFor=createBaseFor();const baseFor$1=baseFor;var now=function(){return root$1.Date.now()};const now$1=now;var FUNC_ERROR_TEXT$1="Expected a function",nativeMax$2=Math.max,nativeMin$1=Math.min;function debounce(sn,ln,cn){var dn,pn,vn,kn,Sn,wn,Pn=0,Nn=!1,Ln=!1,Fn=!0;if(typeof sn!="function")throw new TypeError(FUNC_ERROR_TEXT$1);ln=toNumber(ln)||0,isObject$g(cn)&&(Nn=!!cn.leading,Ln="maxWait"in cn,vn=Ln?nativeMax$2(toNumber(cn.maxWait)||0,ln):vn,Fn="trailing"in cn?!!cn.trailing:Fn);function zn(as){var ds=dn,Es=pn;return dn=pn=void 0,Pn=as,kn=sn.apply(Es,ds),kn}function Dn(as){return Pn=as,Sn=setTimeout(Zn,ln),Nn?zn(as):kn}function Kn(as){var ds=as-wn,Es=as-Pn,Ss=ln-ds;return Ln?nativeMin$1(Ss,vn-Es):Ss}function qn(as){var ds=as-wn,Es=as-Pn;return wn===void 0||ds>=ln||ds<0||Ln&&Es>=vn}function Zn(){var as=now$1();if(qn(as))return Yn(as);Sn=setTimeout(Zn,Kn(as))}function Yn(as){return Sn=void 0,Fn&&dn?zn(as):(dn=pn=void 0,kn)}function Jn(){Sn!==void 0&&clearTimeout(Sn),Pn=0,dn=wn=pn=Sn=void 0}function rs(){return Sn===void 0?kn:Yn(now$1())}function ss(){var as=now$1(),ds=qn(as);if(dn=arguments,pn=this,wn=as,ds){if(Sn===void 0)return Dn(wn);if(Ln)return clearTimeout(Sn),Sn=setTimeout(Zn,ln),zn(wn)}return Sn===void 0&&(Sn=setTimeout(Zn,ln)),kn}return ss.cancel=Jn,ss.flush=rs,ss}var objectProto$2=Object.prototype,hasOwnProperty$3=objectProto$2.hasOwnProperty,defaults=baseRest(function(sn,ln){sn=Object(sn);var cn=-1,dn=ln.length,pn=dn>2?ln[2]:void 0;for(pn&&isIterateeCall(ln[0],ln[1],pn)&&(dn=1);++cn<dn;)for(var vn=ln[cn],kn=keysIn(vn),Sn=-1,wn=kn.length;++Sn<wn;){var Pn=kn[Sn],Nn=sn[Pn];(Nn===void 0||eq(Nn,objectProto$2[Pn])&&!hasOwnProperty$3.call(sn,Pn))&&(sn[Pn]=vn[Pn])}return sn});const defaults$1=defaults;function assignMergeValue(sn,ln,cn){(cn!==void 0&&!eq(sn[ln],cn)||cn===void 0&&!(ln in sn))&&baseAssignValue(sn,ln,cn)}function isArrayLikeObject(sn){return isObjectLike(sn)&&isArrayLike(sn)}function safeGet(sn,ln){if(!(ln==="constructor"&&typeof sn[ln]=="function")&&ln!="__proto__")return sn[ln]}function toPlainObject(sn){return copyObject(sn,keysIn(sn))}function baseMergeDeep(sn,ln,cn,dn,pn,vn,kn){var Sn=safeGet(sn,cn),wn=safeGet(ln,cn),Pn=kn.get(wn);if(Pn){assignMergeValue(sn,cn,Pn);return}var Nn=vn?vn(Sn,wn,cn+"",sn,ln,kn):void 0,Ln=Nn===void 0;if(Ln){var Fn=isArray$9(wn),zn=!Fn&&isBuffer$1(wn),Dn=!Fn&&!zn&&isTypedArray$1(wn);Nn=wn,Fn||zn||Dn?isArray$9(Sn)?Nn=Sn:isArrayLikeObject(Sn)?Nn=copyArray(Sn):zn?(Ln=!1,Nn=cloneBuffer(wn,!0)):Dn?(Ln=!1,Nn=cloneTypedArray(wn,!0)):Nn=[]:isPlainObject$4(wn)||isArguments$1(wn)?(Nn=Sn,isArguments$1(Sn)?Nn=toPlainObject(Sn):(!isObject$g(Sn)||isFunction(Sn))&&(Nn=initCloneObject(wn))):Ln=!1}Ln&&(kn.set(wn,Nn),pn(Nn,wn,dn,vn,kn),kn.delete(wn)),assignMergeValue(sn,cn,Nn)}function baseMerge(sn,ln,cn,dn,pn){sn!==ln&&baseFor$1(ln,function(vn,kn){if(pn||(pn=new Stack$1),isObject$g(vn))baseMergeDeep(sn,ln,kn,cn,baseMerge,dn,pn);else{var Sn=dn?dn(safeGet(sn,kn),vn,kn+"",sn,ln,pn):void 0;Sn===void 0&&(Sn=vn),assignMergeValue(sn,kn,Sn)}},keysIn)}function last$1(sn){var ln=sn==null?0:sn.length;return ln?sn[ln-1]:void 0}function createFind(sn){return function(ln,cn,dn){var pn=Object(ln);if(!isArrayLike(ln)){var vn=baseIteratee(cn);ln=keys$1(ln),cn=function(Sn){return vn(pn[Sn],Sn,pn)}}var kn=sn(ln,cn,dn);return kn>-1?pn[vn?ln[kn]:kn]:void 0}}var nativeMax$1=Math.max;function findIndex(sn,ln,cn){var dn=sn==null?0:sn.length;if(!dn)return-1;var pn=cn==null?0:toInteger(cn);return pn<0&&(pn=nativeMax$1(dn+pn,0)),baseFindIndex(sn,baseIteratee(ln),pn)}var find=createFind(findIndex);const find$1=find;var nativeMax=Math.max,nativeMin=Math.min;function findLastIndex(sn,ln,cn){var dn=sn==null?0:sn.length;if(!dn)return-1;var pn=dn-1;return cn!==void 0&&(pn=toInteger(cn),pn=cn<0?nativeMax(dn+pn,0):nativeMin(pn,dn-1)),baseFindIndex(sn,baseIteratee(ln),pn,!0)}function head$1(sn){return sn&&sn.length?sn[0]:void 0}var objectProto$1=Object.prototype,hasOwnProperty$2=objectProto$1.hasOwnProperty;function baseHas(sn,ln){return sn!=null&&hasOwnProperty$2.call(sn,ln)}function has$1(sn,ln){return sn!=null&&hasPath(sn,ln,baseHas)}function parent$6(sn,ln){return ln.length<2?sn:baseGet(sn,baseSlice(ln,0,-1))}var mapTag="[object Map]",setTag="[object Set]",objectProto=Object.prototype,hasOwnProperty$1=objectProto.hasOwnProperty;function isEmpty(sn){if(sn==null)return!0;if(isArrayLike(sn)&&(isArray$9(sn)||typeof sn=="string"||typeof sn.splice=="function"||isBuffer$1(sn)||isTypedArray$1(sn)||isArguments$1(sn)))return!sn.length;var ln=getTag$1(sn);if(ln==mapTag||ln==setTag)return!sn.size;if(isPrototype(sn))return!baseKeys(sn).length;for(var cn in sn)if(hasOwnProperty$1.call(sn,cn))return!1;return!0}function isNil(sn){return sn==null}function baseLt(sn,ln){return sn<ln}function baseExtremum(sn,ln,cn){for(var dn=-1,pn=sn.length;++dn<pn;){var vn=sn[dn],kn=ln(vn);if(kn!=null&&(Sn===void 0?kn===kn&&!isSymbol$3(kn):cn(kn,Sn)))var Sn=kn,wn=vn}return wn}var merge$1=createAssigner(function(sn,ln,cn){baseMerge(sn,ln,cn)});const j$8=merge$1;function min$6(sn){return sn&&sn.length?baseExtremum(sn,identity$1,baseLt):void 0}function baseUnset(sn,ln){return ln=castPath(ln,sn),sn=parent$6(sn,ln),sn==null||delete sn[toKey(last$1(ln))]}function customOmitClone(sn){return isPlainObject$4(sn)?void 0:sn}var CLONE_DEEP_FLAG=1,CLONE_FLAT_FLAG=2,CLONE_SYMBOLS_FLAG=4,omit=flatRest(function(sn,ln){var cn={};if(sn==null)return cn;var dn=!1;ln=arrayMap(ln,function(vn){return vn=castPath(vn,sn),dn||(dn=vn.length>1),vn}),copyObject(sn,getAllKeysIn(sn),cn),dn&&(cn=baseClone(cn,CLONE_DEEP_FLAG|CLONE_FLAT_FLAG|CLONE_SYMBOLS_FLAG,customOmitClone));for(var pn=ln.length;pn--;)baseUnset(cn,ln[pn]);return cn});const omit$1=omit;var FUNC_ERROR_TEXT="Expected a function";function throttle(sn,ln,cn){var dn=!0,pn=!0;if(typeof sn!="function")throw new TypeError(FUNC_ERROR_TEXT);return isObject$g(cn)&&(dn="leading"in cn?!!cn.leading:dn,pn="trailing"in cn?!!cn.trailing:pn),debounce(sn,ln,{leading:dn,maxWait:ln,trailing:pn})}function useFirstMountState(){var sn=reactExports.useRef(!0);return sn.current?(sn.current=!1,!0):sn.current}var noop$6=function(){};function on$2(sn){for(var ln=[],cn=1;cn<arguments.length;cn++)ln[cn-1]=arguments[cn];sn&&sn.addEventListener&&sn.addEventListener.apply(sn,ln)}function off(sn){for(var ln=[],cn=1;cn<arguments.length;cn++)ln[cn-1]=arguments[cn];sn&&sn.removeEventListener&&sn.removeEventListener.apply(sn,ln)}var isBrowser=typeof window<"u",useIsomorphicLayoutEffect$1=isBrowser?reactExports.useLayoutEffect:reactExports.useEffect;const useIsomorphicLayoutEffect$2=useIsomorphicLayoutEffect$1;var defaultTarget=isBrowser?window:null,isListenerType1=function(sn){return!!sn.addEventListener},isListenerType2=function(sn){return!!sn.on},useEvent$1=function(sn,ln,cn,dn){cn===void 0&&(cn=defaultTarget),reactExports.useEffect(function(){if(ln&&cn)return isListenerType1(cn)?on$2(cn,sn,ln,dn):isListenerType2(cn)&&cn.on(sn,ln,dn),function(){isListenerType1(cn)?off(cn,sn,ln,dn):isListenerType2(cn)&&cn.off(sn,ln,dn)}},[sn,ln,cn,JSON.stringify(dn)])};const useEvent$2=useEvent$1;var useLocalStorage=function(sn,ln,cn){if(!isBrowser)return[ln,noop$6,noop$6];if(!sn)throw new Error("useLocalStorage key may not be falsy");var dn=cn?cn.raw?function(Nn){return Nn}:cn.deserializer:JSON.parse,pn=reactExports.useRef(function(Nn){try{var Ln=cn?cn.raw?String:cn.serializer:JSON.stringify,Fn=localStorage.getItem(Nn);return Fn!==null?dn(Fn):(ln&&localStorage.setItem(Nn,Ln(ln)),ln)}catch{return ln}}),vn=reactExports.useState(function(){return pn.current(sn)}),kn=vn[0],Sn=vn[1];reactExports.useLayoutEffect(function(){return Sn(pn.current(sn))},[sn]);var wn=reactExports.useCallback(function(Nn){try{var Ln=typeof Nn=="function"?Nn(kn):Nn;if(typeof Ln>"u")return;var Fn=void 0;cn?cn.raw?typeof Ln=="string"?Fn=Ln:Fn=JSON.stringify(Ln):cn.serializer?Fn=cn.serializer(Ln):Fn=JSON.stringify(Ln):Fn=JSON.stringify(Ln),localStorage.setItem(sn,Fn),Sn(dn(Fn))}catch{}},[sn,Sn]),Pn=reactExports.useCallback(function(){try{localStorage.removeItem(sn),Sn(void 0)}catch{}},[sn,Sn]);return[kn,wn,Pn]};const useLocalStorage$1=useLocalStorage;var getInitialState=function(sn,ln){return ln!==void 0?ln:isBrowser?window.matchMedia(sn).matches:!1},useMedia=function(sn,ln){var cn=reactExports.useState(getInitialState(sn,ln)),dn=cn[0],pn=cn[1];return reactExports.useEffect(function(){var vn=!0,kn=window.matchMedia(sn),Sn=function(){vn&&pn(!!kn.matches)};return kn.addListener(Sn),pn(kn.matches),function(){vn=!1,kn.removeListener(Sn)}},[sn]),dn};const useMedia$1=useMedia;var defaultState={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function useMeasure(){var sn=reactExports.useState(null),ln=sn[0],cn=sn[1],dn=reactExports.useState(defaultState),pn=dn[0],vn=dn[1],kn=reactExports.useMemo(function(){return new window.ResizeObserver(function(Sn){if(Sn[0]){var wn=Sn[0].contentRect,Pn=wn.x,Nn=wn.y,Ln=wn.width,Fn=wn.height,zn=wn.top,Dn=wn.left,Kn=wn.bottom,qn=wn.right;vn({x:Pn,y:Nn,width:Ln,height:Fn,top:zn,left:Dn,bottom:Kn,right:qn})}})},[]);return useIsomorphicLayoutEffect$2(function(){if(ln)return kn.observe(ln),function(){kn.disconnect()}},[ln]),[cn,pn]}const useMeasure$1=isBrowser&&typeof window.ResizeObserver<"u"?useMeasure:function(){return[noop$6,defaultState]};var Fragment=Fragment$2;function jsx(sn,ln,cn){return hasOwnProperty$i.call(ln,"css")?jsx$2(Emotion$2,createEmotionProps$1(sn,ln),cn):jsx$2(sn,ln,cn)}function jsxs(sn,ln,cn){return hasOwnProperty$i.call(ln,"css")?jsxs$2(Emotion$2,createEmotionProps$1(sn,ln),cn):jsxs$2(sn,ln,cn)}const FULLPAGE_MODAL_KEY="fullpageModal",ModalsDispatchContext=reactExports.createContext({open:()=>{},close:()=>{}}),ModalsStateContext=reactExports.createContext([]),ModalsProvider$1=({children:sn})=>{const[ln,cn]=reactExports.useState([]),vn={open:kn=>{ln.findIndex(Sn=>Sn.props.id===kn.props.id)>-1||cn(Sn=>[...Sn,kn])},close:kn=>{cn(Sn=>Sn.filter(wn=>wn.props.id!==kn))}};return useEvent$2("popstate",()=>{const kn=findLastIndex(ln,Sn=>Sn.props.id.includes(FULLPAGE_MODAL_KEY));cn(Sn=>Sn.filter((wn,Pn)=>Pn!==kn))}),jsx(ModalsStateContext.Provider,{value:ln,children:jsx(ModalsDispatchContext.Provider,{value:vn,children:sn})})};function Modals(){const sn=reactExports.useContext(ModalsStateContext);return jsx(Fragment,{children:sn.map((ln,cn)=>{const{Component:dn}=ln;return jsx(dn,{...ln.props},cn)})})}function ownKeys$6(sn,ln){var cn=Object.keys(sn);if(Object.getOwnPropertySymbols){var dn=Object.getOwnPropertySymbols(sn);ln&&(dn=dn.filter(function(pn){return Object.getOwnPropertyDescriptor(sn,pn).enumerable})),cn.push.apply(cn,dn)}return cn}function _objectSpread2$3(sn){for(var ln=1;ln<arguments.length;ln++){var cn=arguments[ln]!=null?arguments[ln]:{};ln%2?ownKeys$6(Object(cn),!0).forEach(function(dn){_defineProperty$4(sn,dn,cn[dn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(sn,Object.getOwnPropertyDescriptors(cn)):ownKeys$6(Object(cn)).forEach(function(dn){Object.defineProperty(sn,dn,Object.getOwnPropertyDescriptor(cn,dn))})}return sn}function _typeof$2(sn){return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ln){return typeof ln}:function(ln){return ln&&typeof Symbol=="function"&&ln.constructor===Symbol&&ln!==Symbol.prototype?"symbol":typeof ln},_typeof$2(sn)}function _classCallCheck(sn,ln){if(!(sn instanceof ln))throw new TypeError("Cannot call a class as a function")}function _defineProperties(sn,ln){for(var cn=0;cn<ln.length;cn++){var dn=ln[cn];dn.enumerable=dn.enumerable||!1,dn.configurable=!0,"value"in dn&&(dn.writable=!0),Object.defineProperty(sn,dn.key,dn)}}function _createClass(sn,ln,cn){return ln&&_defineProperties(sn.prototype,ln),cn&&_defineProperties(sn,cn),Object.defineProperty(sn,"prototype",{writable:!1}),sn}function _defineProperty$4(sn,ln,cn){return ln in sn?Object.defineProperty(sn,ln,{value:cn,enumerable:!0,configurable:!0,writable:!0}):sn[ln]=cn,sn}function _slicedToArray(sn,ln){return _arrayWithHoles(sn)||_iterableToArrayLimit(sn,ln)||_unsupportedIterableToArray$1(sn,ln)||_nonIterableRest()}function _toConsumableArray$1(sn){return _arrayWithoutHoles$1(sn)||_iterableToArray$1(sn)||_unsupportedIterableToArray$1(sn)||_nonIterableSpread$1()}function _arrayWithoutHoles$1(sn){if(Array.isArray(sn))return _arrayLikeToArray$1(sn)}function _arrayWithHoles(sn){if(Array.isArray(sn))return sn}function _iterableToArray$1(sn){if(typeof Symbol<"u"&&sn[Symbol.iterator]!=null||sn["@@iterator"]!=null)return Array.from(sn)}function _iterableToArrayLimit(sn,ln){var cn=sn==null?null:typeof Symbol<"u"&&sn[Symbol.iterator]||sn["@@iterator"];if(cn!=null){var dn=[],pn=!0,vn=!1,kn,Sn;try{for(cn=cn.call(sn);!(pn=(kn=cn.next()).done)&&(dn.push(kn.value),!(ln&&dn.length===ln));pn=!0);}catch(wn){vn=!0,Sn=wn}finally{try{!pn&&cn.return!=null&&cn.return()}finally{if(vn)throw Sn}}return dn}}function _unsupportedIterableToArray$1(sn,ln){if(sn){if(typeof sn=="string")return _arrayLikeToArray$1(sn,ln);var cn=Object.prototype.toString.call(sn).slice(8,-1);if(cn==="Object"&&sn.constructor&&(cn=sn.constructor.name),cn==="Map"||cn==="Set")return Array.from(sn);if(cn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(cn))return _arrayLikeToArray$1(sn,ln)}}function _arrayLikeToArray$1(sn,ln){(ln==null||ln>sn.length)&&(ln=sn.length);for(var cn=0,dn=new Array(ln);cn<ln;cn++)dn[cn]=sn[cn];return dn}function _nonIterableSpread$1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var noop$5=function(){},_WINDOW={},_DOCUMENT={},_MUTATION_OBSERVER=null,_PERFORMANCE={mark:noop$5,measure:noop$5};try{typeof window<"u"&&(_WINDOW=window),typeof document<"u"&&(_DOCUMENT=document),typeof MutationObserver<"u"&&(_MUTATION_OBSERVER=MutationObserver),typeof performance<"u"&&(_PERFORMANCE=performance)}catch{}var _ref$8=_WINDOW.navigator||{},_ref$userAgent=_ref$8.userAgent,userAgent$6=_ref$userAgent===void 0?"":_ref$userAgent,WINDOW$2=_WINDOW,DOCUMENT=_DOCUMENT,MUTATION_OBSERVER=_MUTATION_OBSERVER,PERFORMANCE=_PERFORMANCE;WINDOW$2.document;var IS_DOM=!!DOCUMENT.documentElement&&!!DOCUMENT.head&&typeof DOCUMENT.addEventListener=="function"&&typeof DOCUMENT.createElement=="function",IS_IE=~userAgent$6.indexOf("MSIE")||~userAgent$6.indexOf("Trident/"),_familyProxy,_familyProxy2,_familyProxy3,_familyProxy4,_familyProxy5,NAMESPACE_IDENTIFIER="___FONT_AWESOME___",UNITS_IN_GRID=16,DEFAULT_CSS_PREFIX="fa",DEFAULT_REPLACEMENT_CLASS="svg-inline--fa",DATA_FA_I2SVG="data-fa-i2svg",DATA_FA_PSEUDO_ELEMENT="data-fa-pseudo-element",DATA_FA_PSEUDO_ELEMENT_PENDING="data-fa-pseudo-element-pending",DATA_PREFIX="data-prefix",DATA_ICON="data-icon",HTML_CLASS_I2SVG_BASE_CLASS="fontawesome-i2svg",MUTATION_APPROACH_ASYNC="async",TAGNAMES_TO_SKIP_FOR_PSEUDOELEMENTS=["HTML","HEAD","STYLE","SCRIPT"],PRODUCTION$1=function(){try{return!0}catch{return!1}}(),FAMILY_CLASSIC="classic",FAMILY_SHARP="sharp",FAMILIES=[FAMILY_CLASSIC,FAMILY_SHARP];function familyProxy(sn){return new Proxy(sn,{get:function(cn,dn){return dn in cn?cn[dn]:cn[FAMILY_CLASSIC]}})}var PREFIX_TO_STYLE=familyProxy((_familyProxy={},_defineProperty$4(_familyProxy,FAMILY_CLASSIC,{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fad:"duotone","fa-duotone":"duotone",fab:"brands","fa-brands":"brands",fak:"kit","fa-kit":"kit"}),_defineProperty$4(_familyProxy,FAMILY_SHARP,{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light"}),_familyProxy)),STYLE_TO_PREFIX=familyProxy((_familyProxy2={},_defineProperty$4(_familyProxy2,FAMILY_CLASSIC,{solid:"fas",regular:"far",light:"fal",thin:"fat",duotone:"fad",brands:"fab",kit:"fak"}),_defineProperty$4(_familyProxy2,FAMILY_SHARP,{solid:"fass",regular:"fasr",light:"fasl"}),_familyProxy2)),PREFIX_TO_LONG_STYLE=familyProxy((_familyProxy3={},_defineProperty$4(_familyProxy3,FAMILY_CLASSIC,{fab:"fa-brands",fad:"fa-duotone",fak:"fa-kit",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"}),_defineProperty$4(_familyProxy3,FAMILY_SHARP,{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light"}),_familyProxy3)),LONG_STYLE_TO_PREFIX=familyProxy((_familyProxy4={},_defineProperty$4(_familyProxy4,FAMILY_CLASSIC,{"fa-brands":"fab","fa-duotone":"fad","fa-kit":"fak","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"}),_defineProperty$4(_familyProxy4,FAMILY_SHARP,{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl"}),_familyProxy4)),ICON_SELECTION_SYNTAX_PATTERN=/fa(s|r|l|t|d|b|k|ss|sr|sl)?[\-\ ]/,LAYERS_TEXT_CLASSNAME="fa-layers-text",FONT_FAMILY_PATTERN=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp|Kit)?.*/i,FONT_WEIGHT_TO_PREFIX=familyProxy((_familyProxy5={},_defineProperty$4(_familyProxy5,FAMILY_CLASSIC,{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"}),_defineProperty$4(_familyProxy5,FAMILY_SHARP,{900:"fass",400:"fasr",300:"fasl"}),_familyProxy5)),oneToTen=[1,2,3,4,5,6,7,8,9,10],oneToTwenty=oneToTen.concat([11,12,13,14,15,16,17,18,19,20]),ATTRIBUTES_WATCHED_FOR_MUTATION=["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"],DUOTONE_CLASSES={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},prefixes=new Set;Object.keys(STYLE_TO_PREFIX[FAMILY_CLASSIC]).map(prefixes.add.bind(prefixes));Object.keys(STYLE_TO_PREFIX[FAMILY_SHARP]).map(prefixes.add.bind(prefixes));var RESERVED_CLASSES=[].concat(FAMILIES,_toConsumableArray$1(prefixes),["2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",DUOTONE_CLASSES.GROUP,DUOTONE_CLASSES.SWAP_OPACITY,DUOTONE_CLASSES.PRIMARY,DUOTONE_CLASSES.SECONDARY]).concat(oneToTen.map(function(sn){return"".concat(sn,"x")})).concat(oneToTwenty.map(function(sn){return"w-".concat(sn)})),initial=WINDOW$2.FontAwesomeConfig||{};function getAttrConfig(sn){var ln=DOCUMENT.querySelector("script["+sn+"]");if(ln)return ln.getAttribute(sn)}function coerce(sn){return sn===""?!0:sn==="false"?!1:sn==="true"?!0:sn}if(DOCUMENT&&typeof DOCUMENT.querySelector=="function"){var attrs=[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];attrs.forEach(function(sn){var ln=_slicedToArray(sn,2),cn=ln[0],dn=ln[1],pn=coerce(getAttrConfig(cn));pn!=null&&(initial[dn]=pn)})}var _default={styleDefault:"solid",familyDefault:"classic",cssPrefix:DEFAULT_CSS_PREFIX,replacementClass:DEFAULT_REPLACEMENT_CLASS,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};initial.familyPrefix&&(initial.cssPrefix=initial.familyPrefix);var _config=_objectSpread2$3(_objectSpread2$3({},_default),initial);_config.autoReplaceSvg||(_config.observeMutations=!1);var config$2={};Object.keys(_default).forEach(function(sn){Object.defineProperty(config$2,sn,{enumerable:!0,set:function(cn){_config[sn]=cn,_onChangeCb.forEach(function(dn){return dn(config$2)})},get:function(){return _config[sn]}})});Object.defineProperty(config$2,"familyPrefix",{enumerable:!0,set:function(ln){_config.cssPrefix=ln,_onChangeCb.forEach(function(cn){return cn(config$2)})},get:function(){return _config.cssPrefix}});WINDOW$2.FontAwesomeConfig=config$2;var _onChangeCb=[];function onChange(sn){return _onChangeCb.push(sn),function(){_onChangeCb.splice(_onChangeCb.indexOf(sn),1)}}var d$d=UNITS_IN_GRID,meaninglessTransform={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function insertCss(sn){if(!(!sn||!IS_DOM)){var ln=DOCUMENT.createElement("style");ln.setAttribute("type","text/css"),ln.innerHTML=sn;for(var cn=DOCUMENT.head.childNodes,dn=null,pn=cn.length-1;pn>-1;pn--){var vn=cn[pn],kn=(vn.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(kn)>-1&&(dn=vn)}return DOCUMENT.head.insertBefore(ln,dn),sn}}var idPool="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function nextUniqueId(){for(var sn=12,ln="";sn-- >0;)ln+=idPool[Math.random()*62|0];return ln}function toArray$1(sn){for(var ln=[],cn=(sn||[]).length>>>0;cn--;)ln[cn]=sn[cn];return ln}function classArray(sn){return sn.classList?toArray$1(sn.classList):(sn.getAttribute("class")||"").split(" ").filter(function(ln){return ln})}function htmlEscape(sn){return"".concat(sn).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function joinAttributes(sn){return Object.keys(sn||{}).reduce(function(ln,cn){return ln+"".concat(cn,'="').concat(htmlEscape(sn[cn]),'" ')},"").trim()}function joinStyles(sn){return Object.keys(sn||{}).reduce(function(ln,cn){return ln+"".concat(cn,": ").concat(sn[cn].trim(),";")},"")}function transformIsMeaningful(sn){return sn.size!==meaninglessTransform.size||sn.x!==meaninglessTransform.x||sn.y!==meaninglessTransform.y||sn.rotate!==meaninglessTransform.rotate||sn.flipX||sn.flipY}function transformForSvg(sn){var ln=sn.transform,cn=sn.containerWidth,dn=sn.iconWidth,pn={transform:"translate(".concat(cn/2," 256)")},vn="translate(".concat(ln.x*32,", ").concat(ln.y*32,") "),kn="scale(".concat(ln.size/16*(ln.flipX?-1:1),", ").concat(ln.size/16*(ln.flipY?-1:1),") "),Sn="rotate(".concat(ln.rotate," 0 0)"),wn={transform:"".concat(vn," ").concat(kn," ").concat(Sn)},Pn={transform:"translate(".concat(dn/2*-1," -256)")};return{outer:pn,inner:wn,path:Pn}}function transformForCss(sn){var ln=sn.transform,cn=sn.width,dn=cn===void 0?UNITS_IN_GRID:cn,pn=sn.height,vn=pn===void 0?UNITS_IN_GRID:pn,kn=sn.startCentered,Sn=kn===void 0?!1:kn,wn="";return Sn&&IS_IE?wn+="translate(".concat(ln.x/d$d-dn/2,"em, ").concat(ln.y/d$d-vn/2,"em) "):Sn?wn+="translate(calc(-50% + ".concat(ln.x/d$d,"em), calc(-50% + ").concat(ln.y/d$d,"em)) "):wn+="translate(".concat(ln.x/d$d,"em, ").concat(ln.y/d$d,"em) "),wn+="scale(".concat(ln.size/d$d*(ln.flipX?-1:1),", ").concat(ln.size/d$d*(ln.flipY?-1:1),") "),wn+="rotate(".concat(ln.rotate,"deg) "),wn}var baseStyles=`:root, :host {
  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Solid";
  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Regular";
  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Light";
  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Thin";
  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";
  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";
  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";
  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";
}

svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
  overflow: visible;
  box-sizing: content-box;
}

.svg-inline--fa {
  display: var(--fa-display, inline-block);
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-2xs {
  vertical-align: 0.1em;
}
.svg-inline--fa.fa-xs {
  vertical-align: 0em;
}
.svg-inline--fa.fa-sm {
  vertical-align: -0.0714285705em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.2em;
}
.svg-inline--fa.fa-xl {
  vertical-align: -0.25em;
}
.svg-inline--fa.fa-2xl {
  vertical-align: -0.3125em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: var(--fa-pull-margin, 0.3em);
  width: auto;
}
.svg-inline--fa.fa-li {
  width: var(--fa-li-width, 2em);
  top: 0.25em;
}
.svg-inline--fa.fa-fw {
  width: var(--fa-fw-width, 1.25em);
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: var(--fa-counter-background-color, #ff253a);
  border-radius: var(--fa-counter-border-radius, 1em);
  box-sizing: border-box;
  color: var(--fa-inverse, #fff);
  line-height: var(--fa-counter-line-height, 1);
  max-width: var(--fa-counter-max-width, 5em);
  min-width: var(--fa-counter-min-width, 1.5em);
  overflow: hidden;
  padding: var(--fa-counter-padding, 0.25em 0.5em);
  right: var(--fa-right, 0);
  text-overflow: ellipsis;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-counter-scale, 0.25));
          transform: scale(var(--fa-counter-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: var(--fa-bottom, 0);
  right: var(--fa-right, 0);
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: var(--fa-bottom, 0);
  left: var(--fa-left, 0);
  right: auto;
  top: auto;
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  top: var(--fa-top, 0);
  right: var(--fa-right, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: var(--fa-left, 0);
  right: auto;
  top: var(--fa-top, 0);
  -webkit-transform: scale(var(--fa-layers-scale, 0.25));
          transform: scale(var(--fa-layers-scale, 0.25));
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-2xs {
  font-size: 0.625em;
  line-height: 0.1em;
  vertical-align: 0.225em;
}

.fa-xs {
  font-size: 0.75em;
  line-height: 0.0833333337em;
  vertical-align: 0.125em;
}

.fa-sm {
  font-size: 0.875em;
  line-height: 0.0714285718em;
  vertical-align: 0.0535714295em;
}

.fa-lg {
  font-size: 1.25em;
  line-height: 0.05em;
  vertical-align: -0.075em;
}

.fa-xl {
  font-size: 1.5em;
  line-height: 0.0416666682em;
  vertical-align: -0.125em;
}

.fa-2xl {
  font-size: 2em;
  line-height: 0.03125em;
  vertical-align: -0.1875em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: var(--fa-li-margin, 2.5em);
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: calc(var(--fa-li-width, 2em) * -1);
  position: absolute;
  text-align: center;
  width: var(--fa-li-width, 2em);
  line-height: inherit;
}

.fa-border {
  border-color: var(--fa-border-color, #eee);
  border-radius: var(--fa-border-radius, 0.1em);
  border-style: var(--fa-border-style, solid);
  border-width: var(--fa-border-width, 0.08em);
  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);
}

.fa-pull-left {
  float: left;
  margin-right: var(--fa-pull-margin, 0.3em);
}

.fa-pull-right {
  float: right;
  margin-left: var(--fa-pull-margin, 0.3em);
}

.fa-beat {
  -webkit-animation-name: fa-beat;
          animation-name: fa-beat;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-bounce {
  -webkit-animation-name: fa-bounce;
          animation-name: fa-bounce;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));
}

.fa-fade {
  -webkit-animation-name: fa-fade;
          animation-name: fa-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-beat-fade {
  -webkit-animation-name: fa-beat-fade;
          animation-name: fa-beat-fade;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
          animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));
}

.fa-flip {
  -webkit-animation-name: fa-flip;
          animation-name: fa-flip;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, ease-in-out);
          animation-timing-function: var(--fa-animation-timing, ease-in-out);
}

.fa-shake {
  -webkit-animation-name: fa-shake;
          animation-name: fa-shake;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-delay: var(--fa-animation-delay, 0s);
          animation-delay: var(--fa-animation-delay, 0s);
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 2s);
          animation-duration: var(--fa-animation-duration, 2s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, linear);
          animation-timing-function: var(--fa-animation-timing, linear);
}

.fa-spin-reverse {
  --fa-animation-direction: reverse;
}

.fa-pulse,
.fa-spin-pulse {
  -webkit-animation-name: fa-spin;
          animation-name: fa-spin;
  -webkit-animation-direction: var(--fa-animation-direction, normal);
          animation-direction: var(--fa-animation-direction, normal);
  -webkit-animation-duration: var(--fa-animation-duration, 1s);
          animation-duration: var(--fa-animation-duration, 1s);
  -webkit-animation-iteration-count: var(--fa-animation-iteration-count, infinite);
          animation-iteration-count: var(--fa-animation-iteration-count, infinite);
  -webkit-animation-timing-function: var(--fa-animation-timing, steps(8));
          animation-timing-function: var(--fa-animation-timing, steps(8));
}

@media (prefers-reduced-motion: reduce) {
  .fa-beat,
.fa-bounce,
.fa-fade,
.fa-beat-fade,
.fa-flip,
.fa-pulse,
.fa-shake,
.fa-spin,
.fa-spin-pulse {
    -webkit-animation-delay: -1ms;
            animation-delay: -1ms;
    -webkit-animation-duration: 1ms;
            animation-duration: 1ms;
    -webkit-animation-iteration-count: 1;
            animation-iteration-count: 1;
    -webkit-transition-delay: 0s;
            transition-delay: 0s;
    -webkit-transition-duration: 0s;
            transition-duration: 0s;
  }
}
@-webkit-keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@keyframes fa-beat {
  0%, 90% {
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  45% {
    -webkit-transform: scale(var(--fa-beat-scale, 1.25));
            transform: scale(var(--fa-beat-scale, 1.25));
  }
}
@-webkit-keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@keyframes fa-bounce {
  0% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  10% {
    -webkit-transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
            transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);
  }
  30% {
    -webkit-transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
            transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));
  }
  50% {
    -webkit-transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
            transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);
  }
  57% {
    -webkit-transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
            transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));
  }
  64% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
  100% {
    -webkit-transform: scale(1, 1) translateY(0);
            transform: scale(1, 1) translateY(0);
  }
}
@-webkit-keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@keyframes fa-fade {
  50% {
    opacity: var(--fa-fade-opacity, 0.4);
  }
}
@-webkit-keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@keyframes fa-beat-fade {
  0%, 100% {
    opacity: var(--fa-beat-fade-opacity, 0.4);
    -webkit-transform: scale(1);
            transform: scale(1);
  }
  50% {
    opacity: 1;
    -webkit-transform: scale(var(--fa-beat-fade-scale, 1.125));
            transform: scale(var(--fa-beat-fade-scale, 1.125));
  }
}
@-webkit-keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@keyframes fa-flip {
  50% {
    -webkit-transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
            transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));
  }
}
@-webkit-keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@keyframes fa-shake {
  0% {
    -webkit-transform: rotate(-15deg);
            transform: rotate(-15deg);
  }
  4% {
    -webkit-transform: rotate(15deg);
            transform: rotate(15deg);
  }
  8%, 24% {
    -webkit-transform: rotate(-18deg);
            transform: rotate(-18deg);
  }
  12%, 28% {
    -webkit-transform: rotate(18deg);
            transform: rotate(18deg);
  }
  16% {
    -webkit-transform: rotate(-22deg);
            transform: rotate(-22deg);
  }
  20% {
    -webkit-transform: rotate(22deg);
            transform: rotate(22deg);
  }
  32% {
    -webkit-transform: rotate(-12deg);
            transform: rotate(-12deg);
  }
  36% {
    -webkit-transform: rotate(12deg);
            transform: rotate(12deg);
  }
  40%, 100% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
}
@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both,
.fa-flip-horizontal.fa-flip-vertical {
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

.fa-rotate-by {
  -webkit-transform: rotate(var(--fa-rotate-angle, none));
          transform: rotate(var(--fa-rotate-angle, none));
}

.fa-stack {
  display: inline-block;
  vertical-align: middle;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
  z-index: var(--fa-stack-z-index, auto);
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: var(--fa-inverse, #fff);
}

.sr-only,
.fa-sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only-focusable:not(:focus),
.fa-sr-only-focusable:not(:focus) {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse,
.fa-duotone.fa-inverse {
  color: var(--fa-inverse, #fff);
}`;function css(){var sn=DEFAULT_CSS_PREFIX,ln=DEFAULT_REPLACEMENT_CLASS,cn=config$2.cssPrefix,dn=config$2.replacementClass,pn=baseStyles;if(cn!==sn||dn!==ln){var vn=new RegExp("\\.".concat(sn,"\\-"),"g"),kn=new RegExp("\\--".concat(sn,"\\-"),"g"),Sn=new RegExp("\\.".concat(ln),"g");pn=pn.replace(vn,".".concat(cn,"-")).replace(kn,"--".concat(cn,"-")).replace(Sn,".".concat(dn))}return pn}var _cssInserted=!1;function ensureCss(){config$2.autoAddCss&&!_cssInserted&&(insertCss(css()),_cssInserted=!0)}var InjectCSS={mixout:function(){return{dom:{css,insertCss:ensureCss}}},hooks:function(){return{beforeDOMElementCreation:function(){ensureCss()},beforeI2svg:function(){ensureCss()}}}},w$b=WINDOW$2||{};w$b[NAMESPACE_IDENTIFIER]||(w$b[NAMESPACE_IDENTIFIER]={});w$b[NAMESPACE_IDENTIFIER].styles||(w$b[NAMESPACE_IDENTIFIER].styles={});w$b[NAMESPACE_IDENTIFIER].hooks||(w$b[NAMESPACE_IDENTIFIER].hooks={});w$b[NAMESPACE_IDENTIFIER].shims||(w$b[NAMESPACE_IDENTIFIER].shims=[]);var namespace=w$b[NAMESPACE_IDENTIFIER],functions=[],listener$1=function sn(){DOCUMENT.removeEventListener("DOMContentLoaded",sn),loaded=1,functions.map(function(ln){return ln()})},loaded=!1;IS_DOM&&(loaded=(DOCUMENT.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(DOCUMENT.readyState),loaded||DOCUMENT.addEventListener("DOMContentLoaded",listener$1));function domready(sn){IS_DOM&&(loaded?setTimeout(sn,0):functions.push(sn))}function toHtml(sn){var ln=sn.tag,cn=sn.attributes,dn=cn===void 0?{}:cn,pn=sn.children,vn=pn===void 0?[]:pn;return typeof sn=="string"?htmlEscape(sn):"<".concat(ln," ").concat(joinAttributes(dn),">").concat(vn.map(toHtml).join(""),"</").concat(ln,">")}function iconFromMapping(sn,ln,cn){if(sn&&sn[ln]&&sn[ln][cn])return{prefix:ln,iconName:cn,icon:sn[ln][cn]}}var bindInternal4=function(ln,cn){return function(dn,pn,vn,kn){return ln.call(cn,dn,pn,vn,kn)}},reduce=function(ln,cn,dn,pn){var vn=Object.keys(ln),kn=vn.length,Sn=pn!==void 0?bindInternal4(cn,pn):cn,wn,Pn,Nn;for(dn===void 0?(wn=1,Nn=ln[vn[0]]):(wn=0,Nn=dn);wn<kn;wn++)Pn=vn[wn],Nn=Sn(Nn,ln[Pn],Pn,ln);return Nn};function ucs2decode(sn){for(var ln=[],cn=0,dn=sn.length;cn<dn;){var pn=sn.charCodeAt(cn++);if(pn>=55296&&pn<=56319&&cn<dn){var vn=sn.charCodeAt(cn++);(vn&64512)==56320?ln.push(((pn&1023)<<10)+(vn&1023)+65536):(ln.push(pn),cn--)}else ln.push(pn)}return ln}function toHex(sn){var ln=ucs2decode(sn);return ln.length===1?ln[0].toString(16):null}function codePointAt(sn,ln){var cn=sn.length,dn=sn.charCodeAt(ln),pn;return dn>=55296&&dn<=56319&&cn>ln+1&&(pn=sn.charCodeAt(ln+1),pn>=56320&&pn<=57343)?(dn-55296)*1024+pn-56320+65536:dn}function normalizeIcons(sn){return Object.keys(sn).reduce(function(ln,cn){var dn=sn[cn],pn=!!dn.icon;return pn?ln[dn.iconName]=dn.icon:ln[cn]=dn,ln},{})}function defineIcons(sn,ln){var cn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},dn=cn.skipHooks,pn=dn===void 0?!1:dn,vn=normalizeIcons(ln);typeof namespace.hooks.addPack=="function"&&!pn?namespace.hooks.addPack(sn,normalizeIcons(ln)):namespace.styles[sn]=_objectSpread2$3(_objectSpread2$3({},namespace.styles[sn]||{}),vn),sn==="fas"&&defineIcons("fa",ln)}var _LONG_STYLE,_PREFIXES,_PREFIXES_FOR_FAMILY,styles$1=namespace.styles,shims=namespace.shims,LONG_STYLE=(_LONG_STYLE={},_defineProperty$4(_LONG_STYLE,FAMILY_CLASSIC,Object.values(PREFIX_TO_LONG_STYLE[FAMILY_CLASSIC])),_defineProperty$4(_LONG_STYLE,FAMILY_SHARP,Object.values(PREFIX_TO_LONG_STYLE[FAMILY_SHARP])),_LONG_STYLE),_defaultUsablePrefix=null,_byUnicode={},_byLigature={},_byOldName={},_byOldUnicode={},_byAlias={},PREFIXES=(_PREFIXES={},_defineProperty$4(_PREFIXES,FAMILY_CLASSIC,Object.keys(PREFIX_TO_STYLE[FAMILY_CLASSIC])),_defineProperty$4(_PREFIXES,FAMILY_SHARP,Object.keys(PREFIX_TO_STYLE[FAMILY_SHARP])),_PREFIXES);function isReserved(sn){return~RESERVED_CLASSES.indexOf(sn)}function getIconName(sn,ln){var cn=ln.split("-"),dn=cn[0],pn=cn.slice(1).join("-");return dn===sn&&pn!==""&&!isReserved(pn)?pn:null}var build=function(){var ln=function(vn){return reduce(styles$1,function(kn,Sn,wn){return kn[wn]=reduce(Sn,vn,{}),kn},{})};_byUnicode=ln(function(pn,vn,kn){if(vn[3]&&(pn[vn[3]]=kn),vn[2]){var Sn=vn[2].filter(function(wn){return typeof wn=="number"});Sn.forEach(function(wn){pn[wn.toString(16)]=kn})}return pn}),_byLigature=ln(function(pn,vn,kn){if(pn[kn]=kn,vn[2]){var Sn=vn[2].filter(function(wn){return typeof wn=="string"});Sn.forEach(function(wn){pn[wn]=kn})}return pn}),_byAlias=ln(function(pn,vn,kn){var Sn=vn[2];return pn[kn]=kn,Sn.forEach(function(wn){pn[wn]=kn}),pn});var cn="far"in styles$1||config$2.autoFetchSvg,dn=reduce(shims,function(pn,vn){var kn=vn[0],Sn=vn[1],wn=vn[2];return Sn==="far"&&!cn&&(Sn="fas"),typeof kn=="string"&&(pn.names[kn]={prefix:Sn,iconName:wn}),typeof kn=="number"&&(pn.unicodes[kn.toString(16)]={prefix:Sn,iconName:wn}),pn},{names:{},unicodes:{}});_byOldName=dn.names,_byOldUnicode=dn.unicodes,_defaultUsablePrefix=getCanonicalPrefix(config$2.styleDefault,{family:config$2.familyDefault})};onChange(function(sn){_defaultUsablePrefix=getCanonicalPrefix(sn.styleDefault,{family:config$2.familyDefault})});build();function byUnicode(sn,ln){return(_byUnicode[sn]||{})[ln]}function byLigature(sn,ln){return(_byLigature[sn]||{})[ln]}function byAlias(sn,ln){return(_byAlias[sn]||{})[ln]}function byOldName(sn){return _byOldName[sn]||{prefix:null,iconName:null}}function byOldUnicode(sn){var ln=_byOldUnicode[sn],cn=byUnicode("fas",sn);return ln||(cn?{prefix:"fas",iconName:cn}:null)||{prefix:null,iconName:null}}function getDefaultUsablePrefix(){return _defaultUsablePrefix}var emptyCanonicalIcon=function(){return{prefix:null,iconName:null,rest:[]}};function getCanonicalPrefix(sn){var ln=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},cn=ln.family,dn=cn===void 0?FAMILY_CLASSIC:cn,pn=PREFIX_TO_STYLE[dn][sn],vn=STYLE_TO_PREFIX[dn][sn]||STYLE_TO_PREFIX[dn][pn],kn=sn in namespace.styles?sn:null;return vn||kn||null}var PREFIXES_FOR_FAMILY=(_PREFIXES_FOR_FAMILY={},_defineProperty$4(_PREFIXES_FOR_FAMILY,FAMILY_CLASSIC,Object.keys(PREFIX_TO_LONG_STYLE[FAMILY_CLASSIC])),_defineProperty$4(_PREFIXES_FOR_FAMILY,FAMILY_SHARP,Object.keys(PREFIX_TO_LONG_STYLE[FAMILY_SHARP])),_PREFIXES_FOR_FAMILY);function getCanonicalIcon(sn){var ln,cn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},dn=cn.skipLookups,pn=dn===void 0?!1:dn,vn=(ln={},_defineProperty$4(ln,FAMILY_CLASSIC,"".concat(config$2.cssPrefix,"-").concat(FAMILY_CLASSIC)),_defineProperty$4(ln,FAMILY_SHARP,"".concat(config$2.cssPrefix,"-").concat(FAMILY_SHARP)),ln),kn=null,Sn=FAMILY_CLASSIC;(sn.includes(vn[FAMILY_CLASSIC])||sn.some(function(Pn){return PREFIXES_FOR_FAMILY[FAMILY_CLASSIC].includes(Pn)}))&&(Sn=FAMILY_CLASSIC),(sn.includes(vn[FAMILY_SHARP])||sn.some(function(Pn){return PREFIXES_FOR_FAMILY[FAMILY_SHARP].includes(Pn)}))&&(Sn=FAMILY_SHARP);var wn=sn.reduce(function(Pn,Nn){var Ln=getIconName(config$2.cssPrefix,Nn);if(styles$1[Nn]?(Nn=LONG_STYLE[Sn].includes(Nn)?LONG_STYLE_TO_PREFIX[Sn][Nn]:Nn,kn=Nn,Pn.prefix=Nn):PREFIXES[Sn].indexOf(Nn)>-1?(kn=Nn,Pn.prefix=getCanonicalPrefix(Nn,{family:Sn})):Ln?Pn.iconName=Ln:Nn!==config$2.replacementClass&&Nn!==vn[FAMILY_CLASSIC]&&Nn!==vn[FAMILY_SHARP]&&Pn.rest.push(Nn),!pn&&Pn.prefix&&Pn.iconName){var Fn=kn==="fa"?byOldName(Pn.iconName):{},zn=byAlias(Pn.prefix,Pn.iconName);Fn.prefix&&(kn=null),Pn.iconName=Fn.iconName||zn||Pn.iconName,Pn.prefix=Fn.prefix||Pn.prefix,Pn.prefix==="far"&&!styles$1.far&&styles$1.fas&&!config$2.autoFetchSvg&&(Pn.prefix="fas")}return Pn},emptyCanonicalIcon());return(sn.includes("fa-brands")||sn.includes("fab"))&&(wn.prefix="fab"),(sn.includes("fa-duotone")||sn.includes("fad"))&&(wn.prefix="fad"),!wn.prefix&&Sn===FAMILY_SHARP&&(styles$1.fass||config$2.autoFetchSvg)&&(wn.prefix="fass",wn.iconName=byAlias(wn.prefix,wn.iconName)||wn.iconName),(wn.prefix==="fa"||kn==="fa")&&(wn.prefix=getDefaultUsablePrefix()||"fas"),wn}var Library=function(){function sn(){_classCallCheck(this,sn),this.definitions={}}return _createClass(sn,[{key:"add",value:function(){for(var cn=this,dn=arguments.length,pn=new Array(dn),vn=0;vn<dn;vn++)pn[vn]=arguments[vn];var kn=pn.reduce(this._pullDefinitions,{});Object.keys(kn).forEach(function(Sn){cn.definitions[Sn]=_objectSpread2$3(_objectSpread2$3({},cn.definitions[Sn]||{}),kn[Sn]),defineIcons(Sn,kn[Sn]);var wn=PREFIX_TO_LONG_STYLE[FAMILY_CLASSIC][Sn];wn&&defineIcons(wn,kn[Sn]),build()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(cn,dn){var pn=dn.prefix&&dn.iconName&&dn.icon?{0:dn}:dn;return Object.keys(pn).map(function(vn){var kn=pn[vn],Sn=kn.prefix,wn=kn.iconName,Pn=kn.icon,Nn=Pn[2];cn[Sn]||(cn[Sn]={}),Nn.length>0&&Nn.forEach(function(Ln){typeof Ln=="string"&&(cn[Sn][Ln]=Pn)}),cn[Sn][wn]=Pn}),cn}}]),sn}(),_plugins=[],_hooks={},providers={},defaultProviderKeys=Object.keys(providers);function registerPlugins(sn,ln){var cn=ln.mixoutsTo;return _plugins=sn,_hooks={},Object.keys(providers).forEach(function(dn){defaultProviderKeys.indexOf(dn)===-1&&delete providers[dn]}),_plugins.forEach(function(dn){var pn=dn.mixout?dn.mixout():{};if(Object.keys(pn).forEach(function(kn){typeof pn[kn]=="function"&&(cn[kn]=pn[kn]),_typeof$2(pn[kn])==="object"&&Object.keys(pn[kn]).forEach(function(Sn){cn[kn]||(cn[kn]={}),cn[kn][Sn]=pn[kn][Sn]})}),dn.hooks){var vn=dn.hooks();Object.keys(vn).forEach(function(kn){_hooks[kn]||(_hooks[kn]=[]),_hooks[kn].push(vn[kn])})}dn.provides&&dn.provides(providers)}),cn}function chainHooks(sn,ln){for(var cn=arguments.length,dn=new Array(cn>2?cn-2:0),pn=2;pn<cn;pn++)dn[pn-2]=arguments[pn];var vn=_hooks[sn]||[];return vn.forEach(function(kn){ln=kn.apply(null,[ln].concat(dn))}),ln}function callHooks(sn){for(var ln=arguments.length,cn=new Array(ln>1?ln-1:0),dn=1;dn<ln;dn++)cn[dn-1]=arguments[dn];var pn=_hooks[sn]||[];pn.forEach(function(vn){vn.apply(null,cn)})}function callProvided(){var sn=arguments[0],ln=Array.prototype.slice.call(arguments,1);return providers[sn]?providers[sn].apply(null,ln):void 0}function findIconDefinition(sn){sn.prefix==="fa"&&(sn.prefix="fas");var ln=sn.iconName,cn=sn.prefix||getDefaultUsablePrefix();if(ln)return ln=byAlias(cn,ln)||ln,iconFromMapping(library.definitions,cn,ln)||iconFromMapping(namespace.styles,cn,ln)}var library=new Library,noAuto=function(){config$2.autoReplaceSvg=!1,config$2.observeMutations=!1,callHooks("noAuto")},dom={i2svg:function(){var ln=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return IS_DOM?(callHooks("beforeI2svg",ln),callProvided("pseudoElements2svg",ln),callProvided("i2svg",ln)):Promise.reject("Operation requires a DOM of some kind.")},watch:function(){var ln=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},cn=ln.autoReplaceSvgRoot;config$2.autoReplaceSvg===!1&&(config$2.autoReplaceSvg=!0),config$2.observeMutations=!0,domready(function(){autoReplace({autoReplaceSvgRoot:cn}),callHooks("watch",ln)})}},parse$2={icon:function(ln){if(ln===null)return null;if(_typeof$2(ln)==="object"&&ln.prefix&&ln.iconName)return{prefix:ln.prefix,iconName:byAlias(ln.prefix,ln.iconName)||ln.iconName};if(Array.isArray(ln)&&ln.length===2){var cn=ln[1].indexOf("fa-")===0?ln[1].slice(3):ln[1],dn=getCanonicalPrefix(ln[0]);return{prefix:dn,iconName:byAlias(dn,cn)||cn}}if(typeof ln=="string"&&(ln.indexOf("".concat(config$2.cssPrefix,"-"))>-1||ln.match(ICON_SELECTION_SYNTAX_PATTERN))){var pn=getCanonicalIcon(ln.split(" "),{skipLookups:!0});return{prefix:pn.prefix||getDefaultUsablePrefix(),iconName:byAlias(pn.prefix,pn.iconName)||pn.iconName}}if(typeof ln=="string"){var vn=getDefaultUsablePrefix();return{prefix:vn,iconName:byAlias(vn,ln)||ln}}}},api$1={noAuto,config:config$2,dom,parse:parse$2,library,findIconDefinition,toHtml},autoReplace=function(){var ln=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},cn=ln.autoReplaceSvgRoot,dn=cn===void 0?DOCUMENT:cn;(Object.keys(namespace.styles).length>0||config$2.autoFetchSvg)&&IS_DOM&&config$2.autoReplaceSvg&&api$1.dom.i2svg({node:dn})};function domVariants(sn,ln){return Object.defineProperty(sn,"abstract",{get:ln}),Object.defineProperty(sn,"html",{get:function(){return sn.abstract.map(function(dn){return toHtml(dn)})}}),Object.defineProperty(sn,"node",{get:function(){if(IS_DOM){var dn=DOCUMENT.createElement("div");return dn.innerHTML=sn.html,dn.children}}}),sn}function asIcon(sn){var ln=sn.children,cn=sn.main,dn=sn.mask,pn=sn.attributes,vn=sn.styles,kn=sn.transform;if(transformIsMeaningful(kn)&&cn.found&&!dn.found){var Sn=cn.width,wn=cn.height,Pn={x:Sn/wn/2,y:.5};pn.style=joinStyles(_objectSpread2$3(_objectSpread2$3({},vn),{},{"transform-origin":"".concat(Pn.x+kn.x/16,"em ").concat(Pn.y+kn.y/16,"em")}))}return[{tag:"svg",attributes:pn,children:ln}]}function asSymbol(sn){var ln=sn.prefix,cn=sn.iconName,dn=sn.children,pn=sn.attributes,vn=sn.symbol,kn=vn===!0?"".concat(ln,"-").concat(config$2.cssPrefix,"-").concat(cn):vn;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:_objectSpread2$3(_objectSpread2$3({},pn),{},{id:kn}),children:dn}]}]}function makeInlineSvgAbstract(sn){var ln=sn.icons,cn=ln.main,dn=ln.mask,pn=sn.prefix,vn=sn.iconName,kn=sn.transform,Sn=sn.symbol,wn=sn.title,Pn=sn.maskId,Nn=sn.titleId,Ln=sn.extra,Fn=sn.watchable,zn=Fn===void 0?!1:Fn,Dn=dn.found?dn:cn,Kn=Dn.width,qn=Dn.height,Zn=pn==="fak",Yn=[config$2.replacementClass,vn?"".concat(config$2.cssPrefix,"-").concat(vn):""].filter(function(Ss){return Ln.classes.indexOf(Ss)===-1}).filter(function(Ss){return Ss!==""||!!Ss}).concat(Ln.classes).join(" "),Jn={children:[],attributes:_objectSpread2$3(_objectSpread2$3({},Ln.attributes),{},{"data-prefix":pn,"data-icon":vn,class:Yn,role:Ln.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(Kn," ").concat(qn)})},rs=Zn&&!~Ln.classes.indexOf("fa-fw")?{width:"".concat(Kn/qn*16*.0625,"em")}:{};zn&&(Jn.attributes[DATA_FA_I2SVG]=""),wn&&(Jn.children.push({tag:"title",attributes:{id:Jn.attributes["aria-labelledby"]||"title-".concat(Nn||nextUniqueId())},children:[wn]}),delete Jn.attributes.title);var ss=_objectSpread2$3(_objectSpread2$3({},Jn),{},{prefix:pn,iconName:vn,main:cn,mask:dn,maskId:Pn,transform:kn,symbol:Sn,styles:_objectSpread2$3(_objectSpread2$3({},rs),Ln.styles)}),as=dn.found&&cn.found?callProvided("generateAbstractMask",ss)||{children:[],attributes:{}}:callProvided("generateAbstractIcon",ss)||{children:[],attributes:{}},ds=as.children,Es=as.attributes;return ss.children=ds,ss.attributes=Es,Sn?asSymbol(ss):asIcon(ss)}function makeLayersTextAbstract(sn){var ln=sn.content,cn=sn.width,dn=sn.height,pn=sn.transform,vn=sn.title,kn=sn.extra,Sn=sn.watchable,wn=Sn===void 0?!1:Sn,Pn=_objectSpread2$3(_objectSpread2$3(_objectSpread2$3({},kn.attributes),vn?{title:vn}:{}),{},{class:kn.classes.join(" ")});wn&&(Pn[DATA_FA_I2SVG]="");var Nn=_objectSpread2$3({},kn.styles);transformIsMeaningful(pn)&&(Nn.transform=transformForCss({transform:pn,startCentered:!0,width:cn,height:dn}),Nn["-webkit-transform"]=Nn.transform);var Ln=joinStyles(Nn);Ln.length>0&&(Pn.style=Ln);var Fn=[];return Fn.push({tag:"span",attributes:Pn,children:[ln]}),vn&&Fn.push({tag:"span",attributes:{class:"sr-only"},children:[vn]}),Fn}function makeLayersCounterAbstract(sn){var ln=sn.content,cn=sn.title,dn=sn.extra,pn=_objectSpread2$3(_objectSpread2$3(_objectSpread2$3({},dn.attributes),cn?{title:cn}:{}),{},{class:dn.classes.join(" ")}),vn=joinStyles(dn.styles);vn.length>0&&(pn.style=vn);var kn=[];return kn.push({tag:"span",attributes:pn,children:[ln]}),cn&&kn.push({tag:"span",attributes:{class:"sr-only"},children:[cn]}),kn}var styles$1$1=namespace.styles;function asFoundIcon(sn){var ln=sn[0],cn=sn[1],dn=sn.slice(4),pn=_slicedToArray(dn,1),vn=pn[0],kn=null;return Array.isArray(vn)?kn={tag:"g",attributes:{class:"".concat(config$2.cssPrefix,"-").concat(DUOTONE_CLASSES.GROUP)},children:[{tag:"path",attributes:{class:"".concat(config$2.cssPrefix,"-").concat(DUOTONE_CLASSES.SECONDARY),fill:"currentColor",d:vn[0]}},{tag:"path",attributes:{class:"".concat(config$2.cssPrefix,"-").concat(DUOTONE_CLASSES.PRIMARY),fill:"currentColor",d:vn[1]}}]}:kn={tag:"path",attributes:{fill:"currentColor",d:vn}},{found:!0,width:ln,height:cn,icon:kn}}var missingIconResolutionMixin={found:!1,width:512,height:512};function maybeNotifyMissing(sn,ln){!PRODUCTION$1&&!config$2.showMissingIcons&&sn&&console.error('Icon with name "'.concat(sn,'" and prefix "').concat(ln,'" is missing.'))}function findIcon(sn,ln){var cn=ln;return ln==="fa"&&config$2.styleDefault!==null&&(ln=getDefaultUsablePrefix()),new Promise(function(dn,pn){if(callProvided("missingIconAbstract"),cn==="fa"){var vn=byOldName(sn)||{};sn=vn.iconName||sn,ln=vn.prefix||ln}if(sn&&ln&&styles$1$1[ln]&&styles$1$1[ln][sn]){var kn=styles$1$1[ln][sn];return dn(asFoundIcon(kn))}maybeNotifyMissing(sn,ln),dn(_objectSpread2$3(_objectSpread2$3({},missingIconResolutionMixin),{},{icon:config$2.showMissingIcons&&sn?callProvided("missingIconAbstract")||{}:{}}))})}var noop$1$1=function(){},p$8=config$2.measurePerformance&&PERFORMANCE&&PERFORMANCE.mark&&PERFORMANCE.measure?PERFORMANCE:{mark:noop$1$1,measure:noop$1$1},preamble='FA "6.4.2"',begin=function(ln){return p$8.mark("".concat(preamble," ").concat(ln," begins")),function(){return end(ln)}},end=function(ln){p$8.mark("".concat(preamble," ").concat(ln," ends")),p$8.measure("".concat(preamble," ").concat(ln),"".concat(preamble," ").concat(ln," begins"),"".concat(preamble," ").concat(ln," ends"))},perf={begin,end},noop$2$1=function(){};function isWatched(sn){var ln=sn.getAttribute?sn.getAttribute(DATA_FA_I2SVG):null;return typeof ln=="string"}function hasPrefixAndIcon(sn){var ln=sn.getAttribute?sn.getAttribute(DATA_PREFIX):null,cn=sn.getAttribute?sn.getAttribute(DATA_ICON):null;return ln&&cn}function hasBeenReplaced(sn){return sn&&sn.classList&&sn.classList.contains&&sn.classList.contains(config$2.replacementClass)}function getMutator(){if(config$2.autoReplaceSvg===!0)return mutators.replace;var sn=mutators[config$2.autoReplaceSvg];return sn||mutators.replace}function createElementNS(sn){return DOCUMENT.createElementNS("http://www.w3.org/2000/svg",sn)}function createElement$2(sn){return DOCUMENT.createElement(sn)}function convertSVG(sn){var ln=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},cn=ln.ceFn,dn=cn===void 0?sn.tag==="svg"?createElementNS:createElement$2:cn;if(typeof sn=="string")return DOCUMENT.createTextNode(sn);var pn=dn(sn.tag);Object.keys(sn.attributes||[]).forEach(function(kn){pn.setAttribute(kn,sn.attributes[kn])});var vn=sn.children||[];return vn.forEach(function(kn){pn.appendChild(convertSVG(kn,{ceFn:dn}))}),pn}function nodeAsComment(sn){var ln=" ".concat(sn.outerHTML," ");return ln="".concat(ln,"Font Awesome fontawesome.com "),ln}var mutators={replace:function(ln){var cn=ln[0];if(cn.parentNode)if(ln[1].forEach(function(pn){cn.parentNode.insertBefore(convertSVG(pn),cn)}),cn.getAttribute(DATA_FA_I2SVG)===null&&config$2.keepOriginalSource){var dn=DOCUMENT.createComment(nodeAsComment(cn));cn.parentNode.replaceChild(dn,cn)}else cn.remove()},nest:function(ln){var cn=ln[0],dn=ln[1];if(~classArray(cn).indexOf(config$2.replacementClass))return mutators.replace(ln);var pn=new RegExp("".concat(config$2.cssPrefix,"-.*"));if(delete dn[0].attributes.id,dn[0].attributes.class){var vn=dn[0].attributes.class.split(" ").reduce(function(Sn,wn){return wn===config$2.replacementClass||wn.match(pn)?Sn.toSvg.push(wn):Sn.toNode.push(wn),Sn},{toNode:[],toSvg:[]});dn[0].attributes.class=vn.toSvg.join(" "),vn.toNode.length===0?cn.removeAttribute("class"):cn.setAttribute("class",vn.toNode.join(" "))}var kn=dn.map(function(Sn){return toHtml(Sn)}).join(`
`);cn.setAttribute(DATA_FA_I2SVG,""),cn.innerHTML=kn}};function performOperationSync(sn){sn()}function perform$7(sn,ln){var cn=typeof ln=="function"?ln:noop$2$1;if(sn.length===0)cn();else{var dn=performOperationSync;config$2.mutateApproach===MUTATION_APPROACH_ASYNC&&(dn=WINDOW$2.requestAnimationFrame||performOperationSync),dn(function(){var pn=getMutator(),vn=perf.begin("mutate");sn.map(pn),vn(),cn()})}}var disabled=!1;function disableObservation(){disabled=!0}function enableObservation(){disabled=!1}var mo$3=null;function observe(sn){if(MUTATION_OBSERVER&&config$2.observeMutations){var ln=sn.treeCallback,cn=ln===void 0?noop$2$1:ln,dn=sn.nodeCallback,pn=dn===void 0?noop$2$1:dn,vn=sn.pseudoElementsCallback,kn=vn===void 0?noop$2$1:vn,Sn=sn.observeMutationsRoot,wn=Sn===void 0?DOCUMENT:Sn;mo$3=new MUTATION_OBSERVER(function(Pn){if(!disabled){var Nn=getDefaultUsablePrefix();toArray$1(Pn).forEach(function(Ln){if(Ln.type==="childList"&&Ln.addedNodes.length>0&&!isWatched(Ln.addedNodes[0])&&(config$2.searchPseudoElements&&kn(Ln.target),cn(Ln.target)),Ln.type==="attributes"&&Ln.target.parentNode&&config$2.searchPseudoElements&&kn(Ln.target.parentNode),Ln.type==="attributes"&&isWatched(Ln.target)&&~ATTRIBUTES_WATCHED_FOR_MUTATION.indexOf(Ln.attributeName))if(Ln.attributeName==="class"&&hasPrefixAndIcon(Ln.target)){var Fn=getCanonicalIcon(classArray(Ln.target)),zn=Fn.prefix,Dn=Fn.iconName;Ln.target.setAttribute(DATA_PREFIX,zn||Nn),Dn&&Ln.target.setAttribute(DATA_ICON,Dn)}else hasBeenReplaced(Ln.target)&&pn(Ln.target)})}}),IS_DOM&&mo$3.observe(wn,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}}function disconnect(){mo$3&&mo$3.disconnect()}function styleParser(sn){var ln=sn.getAttribute("style"),cn=[];return ln&&(cn=ln.split(";").reduce(function(dn,pn){var vn=pn.split(":"),kn=vn[0],Sn=vn.slice(1);return kn&&Sn.length>0&&(dn[kn]=Sn.join(":").trim()),dn},{})),cn}function classParser(sn){var ln=sn.getAttribute("data-prefix"),cn=sn.getAttribute("data-icon"),dn=sn.innerText!==void 0?sn.innerText.trim():"",pn=getCanonicalIcon(classArray(sn));return pn.prefix||(pn.prefix=getDefaultUsablePrefix()),ln&&cn&&(pn.prefix=ln,pn.iconName=cn),pn.iconName&&pn.prefix||(pn.prefix&&dn.length>0&&(pn.iconName=byLigature(pn.prefix,sn.innerText)||byUnicode(pn.prefix,toHex(sn.innerText))),!pn.iconName&&config$2.autoFetchSvg&&sn.firstChild&&sn.firstChild.nodeType===Node.TEXT_NODE&&(pn.iconName=sn.firstChild.data)),pn}function attributesParser(sn){var ln=toArray$1(sn.attributes).reduce(function(pn,vn){return pn.name!=="class"&&pn.name!=="style"&&(pn[vn.name]=vn.value),pn},{}),cn=sn.getAttribute("title"),dn=sn.getAttribute("data-fa-title-id");return config$2.autoA11y&&(cn?ln["aria-labelledby"]="".concat(config$2.replacementClass,"-title-").concat(dn||nextUniqueId()):(ln["aria-hidden"]="true",ln.focusable="false")),ln}function blankMeta(){return{iconName:null,title:null,titleId:null,prefix:null,transform:meaninglessTransform,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}}}function parseMeta(sn){var ln=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{styleParser:!0},cn=classParser(sn),dn=cn.iconName,pn=cn.prefix,vn=cn.rest,kn=attributesParser(sn),Sn=chainHooks("parseNodeAttributes",{},sn),wn=ln.styleParser?styleParser(sn):[];return _objectSpread2$3({iconName:dn,title:sn.getAttribute("title"),titleId:sn.getAttribute("data-fa-title-id"),prefix:pn,transform:meaninglessTransform,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:vn,styles:wn,attributes:kn}},Sn)}var styles$2=namespace.styles;function generateMutation(sn){var ln=config$2.autoReplaceSvg==="nest"?parseMeta(sn,{styleParser:!1}):parseMeta(sn);return~ln.extra.classes.indexOf(LAYERS_TEXT_CLASSNAME)?callProvided("generateLayersText",sn,ln):callProvided("generateSvgReplacementMutation",sn,ln)}var knownPrefixes=new Set;FAMILIES.map(function(sn){knownPrefixes.add("fa-".concat(sn))});Object.keys(PREFIX_TO_STYLE[FAMILY_CLASSIC]).map(knownPrefixes.add.bind(knownPrefixes));Object.keys(PREFIX_TO_STYLE[FAMILY_SHARP]).map(knownPrefixes.add.bind(knownPrefixes));knownPrefixes=_toConsumableArray$1(knownPrefixes);function onTree(sn){var ln=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!IS_DOM)return Promise.resolve();var cn=DOCUMENT.documentElement.classList,dn=function(Ln){return cn.add("".concat(HTML_CLASS_I2SVG_BASE_CLASS,"-").concat(Ln))},pn=function(Ln){return cn.remove("".concat(HTML_CLASS_I2SVG_BASE_CLASS,"-").concat(Ln))},vn=config$2.autoFetchSvg?knownPrefixes:FAMILIES.map(function(Nn){return"fa-".concat(Nn)}).concat(Object.keys(styles$2));vn.includes("fa")||vn.push("fa");var kn=[".".concat(LAYERS_TEXT_CLASSNAME,":not([").concat(DATA_FA_I2SVG,"])")].concat(vn.map(function(Nn){return".".concat(Nn,":not([").concat(DATA_FA_I2SVG,"])")})).join(", ");if(kn.length===0)return Promise.resolve();var Sn=[];try{Sn=toArray$1(sn.querySelectorAll(kn))}catch{}if(Sn.length>0)dn("pending"),pn("complete");else return Promise.resolve();var wn=perf.begin("onTree"),Pn=Sn.reduce(function(Nn,Ln){try{var Fn=generateMutation(Ln);Fn&&Nn.push(Fn)}catch(zn){PRODUCTION$1||zn.name==="MissingIcon"&&console.error(zn)}return Nn},[]);return new Promise(function(Nn,Ln){Promise.all(Pn).then(function(Fn){perform$7(Fn,function(){dn("active"),dn("complete"),pn("pending"),typeof ln=="function"&&ln(),wn(),Nn()})}).catch(function(Fn){wn(),Ln(Fn)})})}function onNode(sn){var ln=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;generateMutation(sn).then(function(cn){cn&&perform$7([cn],ln)})}function resolveIcons(sn){return function(ln){var cn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},dn=(ln||{}).icon?ln:findIconDefinition(ln||{}),pn=cn.mask;return pn&&(pn=(pn||{}).icon?pn:findIconDefinition(pn||{})),sn(dn,_objectSpread2$3(_objectSpread2$3({},cn),{},{mask:pn}))}}var render=function(ln){var cn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},dn=cn.transform,pn=dn===void 0?meaninglessTransform:dn,vn=cn.symbol,kn=vn===void 0?!1:vn,Sn=cn.mask,wn=Sn===void 0?null:Sn,Pn=cn.maskId,Nn=Pn===void 0?null:Pn,Ln=cn.title,Fn=Ln===void 0?null:Ln,zn=cn.titleId,Dn=zn===void 0?null:zn,Kn=cn.classes,qn=Kn===void 0?[]:Kn,Zn=cn.attributes,Yn=Zn===void 0?{}:Zn,Jn=cn.styles,rs=Jn===void 0?{}:Jn;if(ln){var ss=ln.prefix,as=ln.iconName,ds=ln.icon;return domVariants(_objectSpread2$3({type:"icon"},ln),function(){return callHooks("beforeDOMElementCreation",{iconDefinition:ln,params:cn}),config$2.autoA11y&&(Fn?Yn["aria-labelledby"]="".concat(config$2.replacementClass,"-title-").concat(Dn||nextUniqueId()):(Yn["aria-hidden"]="true",Yn.focusable="false")),makeInlineSvgAbstract({icons:{main:asFoundIcon(ds),mask:wn?asFoundIcon(wn.icon):{found:!1,width:null,height:null,icon:{}}},prefix:ss,iconName:as,transform:_objectSpread2$3(_objectSpread2$3({},meaninglessTransform),pn),symbol:kn,title:Fn,maskId:Nn,titleId:Dn,extra:{attributes:Yn,styles:rs,classes:qn}})})}},ReplaceElements={mixout:function(){return{icon:resolveIcons(render)}},hooks:function(){return{mutationObserverCallbacks:function(cn){return cn.treeCallback=onTree,cn.nodeCallback=onNode,cn}}},provides:function(ln){ln.i2svg=function(cn){var dn=cn.node,pn=dn===void 0?DOCUMENT:dn,vn=cn.callback,kn=vn===void 0?function(){}:vn;return onTree(pn,kn)},ln.generateSvgReplacementMutation=function(cn,dn){var pn=dn.iconName,vn=dn.title,kn=dn.titleId,Sn=dn.prefix,wn=dn.transform,Pn=dn.symbol,Nn=dn.mask,Ln=dn.maskId,Fn=dn.extra;return new Promise(function(zn,Dn){Promise.all([findIcon(pn,Sn),Nn.iconName?findIcon(Nn.iconName,Nn.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then(function(Kn){var qn=_slicedToArray(Kn,2),Zn=qn[0],Yn=qn[1];zn([cn,makeInlineSvgAbstract({icons:{main:Zn,mask:Yn},prefix:Sn,iconName:pn,transform:wn,symbol:Pn,maskId:Ln,title:vn,titleId:kn,extra:Fn,watchable:!0})])}).catch(Dn)})},ln.generateAbstractIcon=function(cn){var dn=cn.children,pn=cn.attributes,vn=cn.main,kn=cn.transform,Sn=cn.styles,wn=joinStyles(Sn);wn.length>0&&(pn.style=wn);var Pn;return transformIsMeaningful(kn)&&(Pn=callProvided("generateAbstractTransformGrouping",{main:vn,transform:kn,containerWidth:vn.width,iconWidth:vn.width})),dn.push(Pn||vn.icon),{children:dn,attributes:pn}}}},Layers={mixout:function(){return{layer:function(cn){var dn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pn=dn.classes,vn=pn===void 0?[]:pn;return domVariants({type:"layer"},function(){callHooks("beforeDOMElementCreation",{assembler:cn,params:dn});var kn=[];return cn(function(Sn){Array.isArray(Sn)?Sn.map(function(wn){kn=kn.concat(wn.abstract)}):kn=kn.concat(Sn.abstract)}),[{tag:"span",attributes:{class:["".concat(config$2.cssPrefix,"-layers")].concat(_toConsumableArray$1(vn)).join(" ")},children:kn}]})}}}},LayersCounter={mixout:function(){return{counter:function(cn){var dn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pn=dn.title,vn=pn===void 0?null:pn,kn=dn.classes,Sn=kn===void 0?[]:kn,wn=dn.attributes,Pn=wn===void 0?{}:wn,Nn=dn.styles,Ln=Nn===void 0?{}:Nn;return domVariants({type:"counter",content:cn},function(){return callHooks("beforeDOMElementCreation",{content:cn,params:dn}),makeLayersCounterAbstract({content:cn.toString(),title:vn,extra:{attributes:Pn,styles:Ln,classes:["".concat(config$2.cssPrefix,"-layers-counter")].concat(_toConsumableArray$1(Sn))}})})}}}},LayersText={mixout:function(){return{text:function(cn){var dn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},pn=dn.transform,vn=pn===void 0?meaninglessTransform:pn,kn=dn.title,Sn=kn===void 0?null:kn,wn=dn.classes,Pn=wn===void 0?[]:wn,Nn=dn.attributes,Ln=Nn===void 0?{}:Nn,Fn=dn.styles,zn=Fn===void 0?{}:Fn;return domVariants({type:"text",content:cn},function(){return callHooks("beforeDOMElementCreation",{content:cn,params:dn}),makeLayersTextAbstract({content:cn,transform:_objectSpread2$3(_objectSpread2$3({},meaninglessTransform),vn),title:Sn,extra:{attributes:Ln,styles:zn,classes:["".concat(config$2.cssPrefix,"-layers-text")].concat(_toConsumableArray$1(Pn))}})})}}},provides:function(ln){ln.generateLayersText=function(cn,dn){var pn=dn.title,vn=dn.transform,kn=dn.extra,Sn=null,wn=null;if(IS_IE){var Pn=parseInt(getComputedStyle(cn).fontSize,10),Nn=cn.getBoundingClientRect();Sn=Nn.width/Pn,wn=Nn.height/Pn}return config$2.autoA11y&&!pn&&(kn.attributes["aria-hidden"]="true"),Promise.resolve([cn,makeLayersTextAbstract({content:cn.innerHTML,width:Sn,height:wn,transform:vn,title:pn,extra:kn,watchable:!0})])}}},CLEAN_CONTENT_PATTERN=new RegExp('"',"ug"),SECONDARY_UNICODE_RANGE=[1105920,1112319];function hexValueFromContent(sn){var ln=sn.replace(CLEAN_CONTENT_PATTERN,""),cn=codePointAt(ln,0),dn=cn>=SECONDARY_UNICODE_RANGE[0]&&cn<=SECONDARY_UNICODE_RANGE[1],pn=ln.length===2?ln[0]===ln[1]:!1;return{value:toHex(pn?ln[0]:ln),isSecondary:dn||pn}}function replaceForPosition(sn,ln){var cn="".concat(DATA_FA_PSEUDO_ELEMENT_PENDING).concat(ln.replace(":","-"));return new Promise(function(dn,pn){if(sn.getAttribute(cn)!==null)return dn();var vn=toArray$1(sn.children),kn=vn.filter(function(ds){return ds.getAttribute(DATA_FA_PSEUDO_ELEMENT)===ln})[0],Sn=WINDOW$2.getComputedStyle(sn,ln),wn=Sn.getPropertyValue("font-family").match(FONT_FAMILY_PATTERN),Pn=Sn.getPropertyValue("font-weight"),Nn=Sn.getPropertyValue("content");if(kn&&!wn)return sn.removeChild(kn),dn();if(wn&&Nn!=="none"&&Nn!==""){var Ln=Sn.getPropertyValue("content"),Fn=~["Sharp"].indexOf(wn[2])?FAMILY_SHARP:FAMILY_CLASSIC,zn=~["Solid","Regular","Light","Thin","Duotone","Brands","Kit"].indexOf(wn[2])?STYLE_TO_PREFIX[Fn][wn[2].toLowerCase()]:FONT_WEIGHT_TO_PREFIX[Fn][Pn],Dn=hexValueFromContent(Ln),Kn=Dn.value,qn=Dn.isSecondary,Zn=wn[0].startsWith("FontAwesome"),Yn=byUnicode(zn,Kn),Jn=Yn;if(Zn){var rs=byOldUnicode(Kn);rs.iconName&&rs.prefix&&(Yn=rs.iconName,zn=rs.prefix)}if(Yn&&!qn&&(!kn||kn.getAttribute(DATA_PREFIX)!==zn||kn.getAttribute(DATA_ICON)!==Jn)){sn.setAttribute(cn,Jn),kn&&sn.removeChild(kn);var ss=blankMeta(),as=ss.extra;as.attributes[DATA_FA_PSEUDO_ELEMENT]=ln,findIcon(Yn,zn).then(function(ds){var Es=makeInlineSvgAbstract(_objectSpread2$3(_objectSpread2$3({},ss),{},{icons:{main:ds,mask:emptyCanonicalIcon()},prefix:zn,iconName:Jn,extra:as,watchable:!0})),Ss=DOCUMENT.createElementNS("http://www.w3.org/2000/svg","svg");ln==="::before"?sn.insertBefore(Ss,sn.firstChild):sn.appendChild(Ss),Ss.outerHTML=Es.map(function(Qn){return toHtml(Qn)}).join(`
`),sn.removeAttribute(cn),dn()}).catch(pn)}else dn()}else dn()})}function replace$1(sn){return Promise.all([replaceForPosition(sn,"::before"),replaceForPosition(sn,"::after")])}function processable(sn){return sn.parentNode!==document.head&&!~TAGNAMES_TO_SKIP_FOR_PSEUDOELEMENTS.indexOf(sn.tagName.toUpperCase())&&!sn.getAttribute(DATA_FA_PSEUDO_ELEMENT)&&(!sn.parentNode||sn.parentNode.tagName!=="svg")}function searchPseudoElements(sn){if(IS_DOM)return new Promise(function(ln,cn){var dn=toArray$1(sn.querySelectorAll("*")).filter(processable).map(replace$1),pn=perf.begin("searchPseudoElements");disableObservation(),Promise.all(dn).then(function(){pn(),enableObservation(),ln()}).catch(function(){pn(),enableObservation(),cn()})})}var PseudoElements={hooks:function(){return{mutationObserverCallbacks:function(cn){return cn.pseudoElementsCallback=searchPseudoElements,cn}}},provides:function(ln){ln.pseudoElements2svg=function(cn){var dn=cn.node,pn=dn===void 0?DOCUMENT:dn;config$2.searchPseudoElements&&searchPseudoElements(pn)}}},_unwatched=!1,MutationObserver$1$1={mixout:function(){return{dom:{unwatch:function(){disableObservation(),_unwatched=!0}}}},hooks:function(){return{bootstrap:function(){observe(chainHooks("mutationObserverCallbacks",{}))},noAuto:function(){disconnect()},watch:function(cn){var dn=cn.observeMutationsRoot;_unwatched?enableObservation():observe(chainHooks("mutationObserverCallbacks",{observeMutationsRoot:dn}))}}}},parseTransformString=function(ln){var cn={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return ln.toLowerCase().split(" ").reduce(function(dn,pn){var vn=pn.toLowerCase().split("-"),kn=vn[0],Sn=vn.slice(1).join("-");if(kn&&Sn==="h")return dn.flipX=!0,dn;if(kn&&Sn==="v")return dn.flipY=!0,dn;if(Sn=parseFloat(Sn),isNaN(Sn))return dn;switch(kn){case"grow":dn.size=dn.size+Sn;break;case"shrink":dn.size=dn.size-Sn;break;case"left":dn.x=dn.x-Sn;break;case"right":dn.x=dn.x+Sn;break;case"up":dn.y=dn.y-Sn;break;case"down":dn.y=dn.y+Sn;break;case"rotate":dn.rotate=dn.rotate+Sn;break}return dn},cn)},PowerTransforms={mixout:function(){return{parse:{transform:function(cn){return parseTransformString(cn)}}}},hooks:function(){return{parseNodeAttributes:function(cn,dn){var pn=dn.getAttribute("data-fa-transform");return pn&&(cn.transform=parseTransformString(pn)),cn}}},provides:function(ln){ln.generateAbstractTransformGrouping=function(cn){var dn=cn.main,pn=cn.transform,vn=cn.containerWidth,kn=cn.iconWidth,Sn={transform:"translate(".concat(vn/2," 256)")},wn="translate(".concat(pn.x*32,", ").concat(pn.y*32,") "),Pn="scale(".concat(pn.size/16*(pn.flipX?-1:1),", ").concat(pn.size/16*(pn.flipY?-1:1),") "),Nn="rotate(".concat(pn.rotate," 0 0)"),Ln={transform:"".concat(wn," ").concat(Pn," ").concat(Nn)},Fn={transform:"translate(".concat(kn/2*-1," -256)")},zn={outer:Sn,inner:Ln,path:Fn};return{tag:"g",attributes:_objectSpread2$3({},zn.outer),children:[{tag:"g",attributes:_objectSpread2$3({},zn.inner),children:[{tag:dn.icon.tag,children:dn.icon.children,attributes:_objectSpread2$3(_objectSpread2$3({},dn.icon.attributes),zn.path)}]}]}}}},ALL_SPACE={x:0,y:0,width:"100%",height:"100%"};function fillBlack(sn){var ln=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return sn.attributes&&(sn.attributes.fill||ln)&&(sn.attributes.fill="black"),sn}function deGroup(sn){return sn.tag==="g"?sn.children:[sn]}var Masks={hooks:function(){return{parseNodeAttributes:function(cn,dn){var pn=dn.getAttribute("data-fa-mask"),vn=pn?getCanonicalIcon(pn.split(" ").map(function(kn){return kn.trim()})):emptyCanonicalIcon();return vn.prefix||(vn.prefix=getDefaultUsablePrefix()),cn.mask=vn,cn.maskId=dn.getAttribute("data-fa-mask-id"),cn}}},provides:function(ln){ln.generateAbstractMask=function(cn){var dn=cn.children,pn=cn.attributes,vn=cn.main,kn=cn.mask,Sn=cn.maskId,wn=cn.transform,Pn=vn.width,Nn=vn.icon,Ln=kn.width,Fn=kn.icon,zn=transformForSvg({transform:wn,containerWidth:Ln,iconWidth:Pn}),Dn={tag:"rect",attributes:_objectSpread2$3(_objectSpread2$3({},ALL_SPACE),{},{fill:"white"})},Kn=Nn.children?{children:Nn.children.map(fillBlack)}:{},qn={tag:"g",attributes:_objectSpread2$3({},zn.inner),children:[fillBlack(_objectSpread2$3({tag:Nn.tag,attributes:_objectSpread2$3(_objectSpread2$3({},Nn.attributes),zn.path)},Kn))]},Zn={tag:"g",attributes:_objectSpread2$3({},zn.outer),children:[qn]},Yn="mask-".concat(Sn||nextUniqueId()),Jn="clip-".concat(Sn||nextUniqueId()),rs={tag:"mask",attributes:_objectSpread2$3(_objectSpread2$3({},ALL_SPACE),{},{id:Yn,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[Dn,Zn]},ss={tag:"defs",children:[{tag:"clipPath",attributes:{id:Jn},children:deGroup(Fn)},rs]};return dn.push(ss,{tag:"rect",attributes:_objectSpread2$3({fill:"currentColor","clip-path":"url(#".concat(Jn,")"),mask:"url(#".concat(Yn,")")},ALL_SPACE)}),{children:dn,attributes:pn}}}},MissingIconIndicator={provides:function(ln){var cn=!1;WINDOW$2.matchMedia&&(cn=WINDOW$2.matchMedia("(prefers-reduced-motion: reduce)").matches),ln.missingIconAbstract=function(){var dn=[],pn={fill:"currentColor"},vn={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};dn.push({tag:"path",attributes:_objectSpread2$3(_objectSpread2$3({},pn),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});var kn=_objectSpread2$3(_objectSpread2$3({},vn),{},{attributeName:"opacity"}),Sn={tag:"circle",attributes:_objectSpread2$3(_objectSpread2$3({},pn),{},{cx:"256",cy:"364",r:"28"}),children:[]};return cn||Sn.children.push({tag:"animate",attributes:_objectSpread2$3(_objectSpread2$3({},vn),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:_objectSpread2$3(_objectSpread2$3({},kn),{},{values:"1;0;1;1;0;1;"})}),dn.push(Sn),dn.push({tag:"path",attributes:_objectSpread2$3(_objectSpread2$3({},pn),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:cn?[]:[{tag:"animate",attributes:_objectSpread2$3(_objectSpread2$3({},kn),{},{values:"1;0;0;0;0;1;"})}]}),cn||dn.push({tag:"path",attributes:_objectSpread2$3(_objectSpread2$3({},pn),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:_objectSpread2$3(_objectSpread2$3({},kn),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:dn}}}},SvgSymbols={hooks:function(){return{parseNodeAttributes:function(cn,dn){var pn=dn.getAttribute("data-fa-symbol"),vn=pn===null?!1:pn===""?!0:pn;return cn.symbol=vn,cn}}}},plugins=[InjectCSS,ReplaceElements,Layers,LayersCounter,LayersText,PseudoElements,MutationObserver$1$1,PowerTransforms,Masks,MissingIconIndicator,SvgSymbols];registerPlugins(plugins,{mixoutsTo:api$1});api$1.noAuto;api$1.config;api$1.library;api$1.dom;var parse$1$1=api$1.parse;api$1.findIconDefinition;api$1.toHtml;var icon=api$1.icon;api$1.layer;api$1.text;api$1.counter;function ownKeys$5(sn,ln){var cn=Object.keys(sn);if(Object.getOwnPropertySymbols){var dn=Object.getOwnPropertySymbols(sn);ln&&(dn=dn.filter(function(pn){return Object.getOwnPropertyDescriptor(sn,pn).enumerable})),cn.push.apply(cn,dn)}return cn}function _objectSpread2$2(sn){for(var ln=1;ln<arguments.length;ln++){var cn=arguments[ln]!=null?arguments[ln]:{};ln%2?ownKeys$5(Object(cn),!0).forEach(function(dn){_defineProperty$3(sn,dn,cn[dn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(sn,Object.getOwnPropertyDescriptors(cn)):ownKeys$5(Object(cn)).forEach(function(dn){Object.defineProperty(sn,dn,Object.getOwnPropertyDescriptor(cn,dn))})}return sn}function _typeof$1(sn){return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ln){return typeof ln}:function(ln){return ln&&typeof Symbol=="function"&&ln.constructor===Symbol&&ln!==Symbol.prototype?"symbol":typeof ln},_typeof$1(sn)}function _defineProperty$3(sn,ln,cn){return ln in sn?Object.defineProperty(sn,ln,{value:cn,enumerable:!0,configurable:!0,writable:!0}):sn[ln]=cn,sn}function _objectWithoutPropertiesLoose$1(sn,ln){if(sn==null)return{};var cn={},dn=Object.keys(sn),pn,vn;for(vn=0;vn<dn.length;vn++)pn=dn[vn],!(ln.indexOf(pn)>=0)&&(cn[pn]=sn[pn]);return cn}function _objectWithoutProperties(sn,ln){if(sn==null)return{};var cn=_objectWithoutPropertiesLoose$1(sn,ln),dn,pn;if(Object.getOwnPropertySymbols){var vn=Object.getOwnPropertySymbols(sn);for(pn=0;pn<vn.length;pn++)dn=vn[pn],!(ln.indexOf(dn)>=0)&&Object.prototype.propertyIsEnumerable.call(sn,dn)&&(cn[dn]=sn[dn])}return cn}function _toConsumableArray(sn){return _arrayWithoutHoles(sn)||_iterableToArray(sn)||_unsupportedIterableToArray(sn)||_nonIterableSpread()}function _arrayWithoutHoles(sn){if(Array.isArray(sn))return _arrayLikeToArray(sn)}function _iterableToArray(sn){if(typeof Symbol<"u"&&sn[Symbol.iterator]!=null||sn["@@iterator"]!=null)return Array.from(sn)}function _unsupportedIterableToArray(sn,ln){if(sn){if(typeof sn=="string")return _arrayLikeToArray(sn,ln);var cn=Object.prototype.toString.call(sn).slice(8,-1);if(cn==="Object"&&sn.constructor&&(cn=sn.constructor.name),cn==="Map"||cn==="Set")return Array.from(sn);if(cn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(cn))return _arrayLikeToArray(sn,ln)}}function _arrayLikeToArray(sn,ln){(ln==null||ln>sn.length)&&(ln=sn.length);for(var cn=0,dn=new Array(ln);cn<ln;cn++)dn[cn]=sn[cn];return dn}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function classList$1(sn){var ln,cn=sn.beat,dn=sn.fade,pn=sn.beatFade,vn=sn.bounce,kn=sn.shake,Sn=sn.flash,wn=sn.spin,Pn=sn.spinPulse,Nn=sn.spinReverse,Ln=sn.pulse,Fn=sn.fixedWidth,zn=sn.inverse,Dn=sn.border,Kn=sn.listItem,qn=sn.flip,Zn=sn.size,Yn=sn.rotation,Jn=sn.pull,rs=(ln={"fa-beat":cn,"fa-fade":dn,"fa-beat-fade":pn,"fa-bounce":vn,"fa-shake":kn,"fa-flash":Sn,"fa-spin":wn,"fa-spin-reverse":Nn,"fa-spin-pulse":Pn,"fa-pulse":Ln,"fa-fw":Fn,"fa-inverse":zn,"fa-border":Dn,"fa-li":Kn,"fa-flip":qn===!0,"fa-flip-horizontal":qn==="horizontal"||qn==="both","fa-flip-vertical":qn==="vertical"||qn==="both"},_defineProperty$3(ln,"fa-".concat(Zn),typeof Zn<"u"&&Zn!==null),_defineProperty$3(ln,"fa-rotate-".concat(Yn),typeof Yn<"u"&&Yn!==null&&Yn!==0),_defineProperty$3(ln,"fa-pull-".concat(Jn),typeof Jn<"u"&&Jn!==null),_defineProperty$3(ln,"fa-swap-opacity",sn.swapOpacity),ln);return Object.keys(rs).map(function(ss){return rs[ss]?ss:null}).filter(function(ss){return ss})}function _isNumerical(sn){return sn=sn-0,sn===sn}function camelize(sn){return _isNumerical(sn)?sn:(sn=sn.replace(/[\-_\s]+(.)?/g,function(ln,cn){return cn?cn.toUpperCase():""}),sn.substr(0,1).toLowerCase()+sn.substr(1))}var _excluded=["style"];function capitalize(sn){return sn.charAt(0).toUpperCase()+sn.slice(1)}function styleToObject(sn){return sn.split(";").map(function(ln){return ln.trim()}).filter(function(ln){return ln}).reduce(function(ln,cn){var dn=cn.indexOf(":"),pn=camelize(cn.slice(0,dn)),vn=cn.slice(dn+1).trim();return pn.startsWith("webkit")?ln[capitalize(pn)]=vn:ln[pn]=vn,ln},{})}function convert(sn,ln){var cn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof ln=="string")return ln;var dn=(ln.children||[]).map(function(wn){return convert(sn,wn)}),pn=Object.keys(ln.attributes||{}).reduce(function(wn,Pn){var Nn=ln.attributes[Pn];switch(Pn){case"class":wn.attrs.className=Nn,delete ln.attributes.class;break;case"style":wn.attrs.style=styleToObject(Nn);break;default:Pn.indexOf("aria-")===0||Pn.indexOf("data-")===0?wn.attrs[Pn.toLowerCase()]=Nn:wn.attrs[camelize(Pn)]=Nn}return wn},{attrs:{}}),vn=cn.style,kn=vn===void 0?{}:vn,Sn=_objectWithoutProperties(cn,_excluded);return pn.attrs.style=_objectSpread2$2(_objectSpread2$2({},pn.attrs.style),kn),sn.apply(void 0,[ln.tag,_objectSpread2$2(_objectSpread2$2({},pn.attrs),Sn)].concat(_toConsumableArray(dn)))}var PRODUCTION=!1;try{PRODUCTION=!0}catch{}function log$9(){if(!PRODUCTION&&console&&typeof console.error=="function"){var sn;(sn=console).error.apply(sn,arguments)}}function normalizeIconArgs(sn){if(sn&&_typeof$1(sn)==="object"&&sn.prefix&&sn.iconName&&sn.icon)return sn;if(parse$1$1.icon)return parse$1$1.icon(sn);if(sn===null)return null;if(sn&&_typeof$1(sn)==="object"&&sn.prefix&&sn.iconName)return sn;if(Array.isArray(sn)&&sn.length===2)return{prefix:sn[0],iconName:sn[1]};if(typeof sn=="string")return{prefix:"fas",iconName:sn}}function objectWithKey(sn,ln){return Array.isArray(ln)&&ln.length>0||!Array.isArray(ln)&&ln?_defineProperty$3({},sn,ln):{}}var FontAwesomeIcon=React.forwardRef(function(sn,ln){var cn=sn.icon,dn=sn.mask,pn=sn.symbol,vn=sn.className,kn=sn.title,Sn=sn.titleId,wn=sn.maskId,Pn=normalizeIconArgs(cn),Nn=objectWithKey("classes",[].concat(_toConsumableArray(classList$1(sn)),_toConsumableArray(vn.split(" ")))),Ln=objectWithKey("transform",typeof sn.transform=="string"?parse$1$1.transform(sn.transform):sn.transform),Fn=objectWithKey("mask",normalizeIconArgs(dn)),zn=icon(Pn,_objectSpread2$2(_objectSpread2$2(_objectSpread2$2(_objectSpread2$2({},Nn),Ln),Fn),{},{symbol:pn,title:kn,titleId:Sn,maskId:wn}));if(!zn)return log$9("Could not find icon",Pn),null;var Dn=zn.abstract,Kn={ref:ln};return Object.keys(sn).forEach(function(qn){FontAwesomeIcon.defaultProps.hasOwnProperty(qn)||(Kn[qn]=sn[qn])}),convertCurry(Dn[0],Kn)});FontAwesomeIcon.displayName="FontAwesomeIcon";FontAwesomeIcon.propTypes={beat:r$7.bool,border:r$7.bool,beatFade:r$7.bool,bounce:r$7.bool,className:r$7.string,fade:r$7.bool,flash:r$7.bool,mask:r$7.oneOfType([r$7.object,r$7.array,r$7.string]),maskId:r$7.string,fixedWidth:r$7.bool,inverse:r$7.bool,flip:r$7.oneOf([!0,!1,"horizontal","vertical","both"]),icon:r$7.oneOfType([r$7.object,r$7.array,r$7.string]),listItem:r$7.bool,pull:r$7.oneOf(["right","left"]),pulse:r$7.bool,rotation:r$7.oneOf([0,90,180,270]),shake:r$7.bool,size:r$7.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:r$7.bool,spinPulse:r$7.bool,spinReverse:r$7.bool,symbol:r$7.oneOfType([r$7.bool,r$7.string]),title:r$7.string,titleId:r$7.string,transform:r$7.oneOfType([r$7.string,r$7.object]),swapOpacity:r$7.bool};FontAwesomeIcon.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var convertCurry=convert.bind(null,React.createElement),__assign$2=function(){return __assign$2=Object.assign||function(ln){for(var cn,dn=1,pn=arguments.length;dn<pn;dn++){cn=arguments[dn];for(var vn in cn)Object.prototype.hasOwnProperty.call(cn,vn)&&(ln[vn]=cn[vn])}return ln},__assign$2.apply(this,arguments)};function __rest(sn,ln){var cn={};for(var dn in sn)Object.prototype.hasOwnProperty.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&typeof Object.getOwnPropertySymbols=="function")for(var pn=0,dn=Object.getOwnPropertySymbols(sn);pn<dn.length;pn++)ln.indexOf(dn[pn])<0&&Object.prototype.propertyIsEnumerable.call(sn,dn[pn])&&(cn[dn[pn]]=sn[dn[pn]]);return cn}function __spreadArray$1(sn,ln,cn){if(cn||arguments.length===2)for(var dn=0,pn=ln.length,vn;dn<pn;dn++)(vn||!(dn in ln))&&(vn||(vn=Array.prototype.slice.call(ln,0,dn)),vn[dn]=ln[dn]);return sn.concat(vn||Array.prototype.slice.call(ln))}typeof SuppressedError=="function"&&SuppressedError;var zeroRightClassName="right-scroll-bar-position",fullWidthClassName="width-before-scroll-bar",noScrollbarsClassName="with-scroll-bars-hidden",removedBarSizeVariable="--removed-body-scroll-bar-size";function assignRef$1(sn,ln){return typeof sn=="function"?sn(ln):sn&&(sn.current=ln),sn}function useCallbackRef(sn,ln){var cn=reactExports.useState(function(){return{value:sn,callback:ln,facade:{get current(){return cn.value},set current(dn){var pn=cn.value;pn!==dn&&(cn.value=dn,cn.callback(dn,pn))}}}})[0];return cn.callback=ln,cn.facade}function useMergeRefs(sn,ln){return useCallbackRef(ln||null,function(cn){return sn.forEach(function(dn){return assignRef$1(dn,cn)})})}function ItoI(sn){return sn}function innerCreateMedium(sn,ln){ln===void 0&&(ln=ItoI);var cn=[],dn=!1,pn={read:function(){if(dn)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return cn.length?cn[cn.length-1]:sn},useMedium:function(vn){var kn=ln(vn,dn);return cn.push(kn),function(){cn=cn.filter(function(Sn){return Sn!==kn})}},assignSyncMedium:function(vn){for(dn=!0;cn.length;){var kn=cn;cn=[],kn.forEach(vn)}cn={push:function(Sn){return vn(Sn)},filter:function(){return cn}}},assignMedium:function(vn){dn=!0;var kn=[];if(cn.length){var Sn=cn;cn=[],Sn.forEach(vn),kn=cn}var wn=function(){var Nn=kn;kn=[],Nn.forEach(vn)},Pn=function(){return Promise.resolve().then(wn)};Pn(),cn={push:function(Nn){kn.push(Nn),Pn()},filter:function(Nn){return kn=kn.filter(Nn),cn}}}};return pn}function createSidecarMedium(sn){sn===void 0&&(sn={});var ln=innerCreateMedium(null);return ln.options=__assign$2({async:!0,ssr:!1},sn),ln}var SideCar$1=function(sn){var ln=sn.sideCar,cn=__rest(sn,["sideCar"]);if(!ln)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var dn=ln.read();if(!dn)throw new Error("Sidecar medium not found");return jsx$1(dn,{...__assign$2({},cn)})};SideCar$1.isSideCarExport=!0;function exportSidecar(sn,ln){return sn.useMedium(ln),SideCar$1}var effectCar=createSidecarMedium(),nothing=function(){},RemoveScroll$1=reactExports.forwardRef(function(sn,ln){var cn=reactExports.useRef(null),dn=reactExports.useState({onScrollCapture:nothing,onWheelCapture:nothing,onTouchMoveCapture:nothing}),pn=dn[0],vn=dn[1],kn=sn.forwardProps,Sn=sn.children,wn=sn.className,Pn=sn.removeScrollBar,Nn=sn.enabled,Ln=sn.shards,Fn=sn.sideCar,zn=sn.noIsolation,Dn=sn.inert,Kn=sn.allowPinchZoom,qn=sn.as,Zn=qn===void 0?"div":qn,Yn=sn.gapMode,Jn=__rest(sn,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),rs=Fn,ss=useMergeRefs([cn,ln]),as=__assign$2(__assign$2({},Jn),pn);return jsxs$1(Fragment$1,{children:[Nn&&jsx$1(rs,{sideCar:effectCar,removeScrollBar:Pn,shards:Ln,noIsolation:zn,inert:Dn,setCallbacks:vn,allowPinchZoom:!!Kn,lockRef:cn,gapMode:Yn}),kn?reactExports.cloneElement(reactExports.Children.only(Sn),__assign$2(__assign$2({},as),{ref:ss})):jsx$1(Zn,{...__assign$2({},as,{className:wn,ref:ss}),children:Sn})]})});RemoveScroll$1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll$1.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var getNonce=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function makeStyleTag(){if(!document)return null;var sn=document.createElement("style");sn.type="text/css";var ln=getNonce();return ln&&sn.setAttribute("nonce",ln),sn}function injectStyles(sn,ln){sn.styleSheet?sn.styleSheet.cssText=ln:sn.appendChild(document.createTextNode(ln))}function insertStyleTag(sn){var ln=document.head||document.getElementsByTagName("head")[0];ln.appendChild(sn)}var stylesheetSingleton=function(){var sn=0,ln=null;return{add:function(cn){sn==0&&(ln=makeStyleTag())&&(injectStyles(ln,cn),insertStyleTag(ln)),sn++},remove:function(){sn--,!sn&&ln&&(ln.parentNode&&ln.parentNode.removeChild(ln),ln=null)}}},styleHookSingleton=function(){var sn=stylesheetSingleton();return function(ln,cn){reactExports.useEffect(function(){return sn.add(ln),function(){sn.remove()}},[ln&&cn])}},styleSingleton=function(){var sn=styleHookSingleton(),ln=function(cn){var dn=cn.styles,pn=cn.dynamic;return sn(dn,pn),null};return ln},zeroGap={left:0,top:0,right:0,gap:0},parse$1=function(sn){return parseInt(sn||"",10)||0},getOffset=function(sn){var ln=window.getComputedStyle(document.body),cn=ln[sn==="padding"?"paddingLeft":"marginLeft"],dn=ln[sn==="padding"?"paddingTop":"marginTop"],pn=ln[sn==="padding"?"paddingRight":"marginRight"];return[parse$1(cn),parse$1(dn),parse$1(pn)]},getGapWidth=function(sn){if(sn===void 0&&(sn="margin"),typeof window>"u")return zeroGap;var ln=getOffset(sn),cn=document.documentElement.clientWidth,dn=window.innerWidth;return{left:ln[0],top:ln[1],right:ln[2],gap:Math.max(0,dn-cn+ln[2]-ln[0])}},Style=styleSingleton(),getStyles$1=function(sn,ln,cn,dn){var pn=sn.left,vn=sn.top,kn=sn.right,Sn=sn.gap;return cn===void 0&&(cn="margin"),`
  .`.concat(noScrollbarsClassName,` {
   overflow: hidden `).concat(dn,`;
   padding-right: `).concat(Sn,"px ").concat(dn,`;
  }
  body {
    overflow: hidden `).concat(dn,`;
    overscroll-behavior: contain;
    `).concat([ln&&"position: relative ".concat(dn,";"),cn==="margin"&&`
    padding-left: `.concat(pn,`px;
    padding-top: `).concat(vn,`px;
    padding-right: `).concat(kn,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(Sn,"px ").concat(dn,`;
    `),cn==="padding"&&"padding-right: ".concat(Sn,"px ").concat(dn,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zeroRightClassName,` {
    right: `).concat(Sn,"px ").concat(dn,`;
  }
  
  .`).concat(fullWidthClassName,` {
    margin-right: `).concat(Sn,"px ").concat(dn,`;
  }
  
  .`).concat(zeroRightClassName," .").concat(zeroRightClassName,` {
    right: 0 `).concat(dn,`;
  }
  
  .`).concat(fullWidthClassName," .").concat(fullWidthClassName,` {
    margin-right: 0 `).concat(dn,`;
  }
  
  body {
    `).concat(removedBarSizeVariable,": ").concat(Sn,`px;
  }
`)},RemoveScrollBar=function(sn){var ln=sn.noRelative,cn=sn.noImportant,dn=sn.gapMode,pn=dn===void 0?"margin":dn,vn=reactExports.useMemo(function(){return getGapWidth(pn)},[pn]);return jsx$1(Style,{styles:getStyles$1(vn,!ln,pn,cn?"":"!important")})},passiveSupported=!1;if(typeof window<"u")try{var options=Object.defineProperty({},"passive",{get:function(){return passiveSupported=!0,!0}});window.addEventListener("test",options,options),window.removeEventListener("test",options,options)}catch{passiveSupported=!1}var nonPassive=passiveSupported?{passive:!1}:!1,alwaysContainsScroll=function(sn){return sn.tagName==="TEXTAREA"},elementCanBeScrolled=function(sn,ln){var cn=window.getComputedStyle(sn);return cn[ln]!=="hidden"&&!(cn.overflowY===cn.overflowX&&!alwaysContainsScroll(sn)&&cn[ln]==="visible")},elementCouldBeVScrolled=function(sn){return elementCanBeScrolled(sn,"overflowY")},elementCouldBeHScrolled=function(sn){return elementCanBeScrolled(sn,"overflowX")},locationCouldBeScrolled=function(sn,ln){var cn=ln.ownerDocument,dn=ln;do{typeof ShadowRoot<"u"&&dn instanceof ShadowRoot&&(dn=dn.host);var pn=elementCouldBeScrolled(sn,dn);if(pn){var vn=getScrollVariables(sn,dn),kn=vn[1],Sn=vn[2];if(kn>Sn)return!0}dn=dn.parentNode}while(dn&&dn!==cn.body);return!1},getVScrollVariables=function(sn){var ln=sn.scrollTop,cn=sn.scrollHeight,dn=sn.clientHeight;return[ln,cn,dn]},getHScrollVariables=function(sn){var ln=sn.scrollLeft,cn=sn.scrollWidth,dn=sn.clientWidth;return[ln,cn,dn]},elementCouldBeScrolled=function(sn,ln){return sn==="v"?elementCouldBeVScrolled(ln):elementCouldBeHScrolled(ln)},getScrollVariables=function(sn,ln){return sn==="v"?getVScrollVariables(ln):getHScrollVariables(ln)},getDirectionFactor=function(sn,ln){return sn==="h"&&ln==="rtl"?-1:1},handleScroll=function(sn,ln,cn,dn,pn){var vn=getDirectionFactor(sn,window.getComputedStyle(ln).direction),kn=vn*dn,Sn=cn.target,wn=ln.contains(Sn),Pn=!1,Nn=kn>0,Ln=0,Fn=0;do{var zn=getScrollVariables(sn,Sn),Dn=zn[0],Kn=zn[1],qn=zn[2],Zn=Kn-qn-vn*Dn;(Dn||Zn)&&elementCouldBeScrolled(sn,Sn)&&(Ln+=Zn,Fn+=Dn),Sn=Sn.parentNode}while(!wn&&Sn!==document.body||wn&&(ln.contains(Sn)||ln===Sn));return(Nn&&(pn&&Ln===0||!pn&&kn>Ln)||!Nn&&(pn&&Fn===0||!pn&&-kn>Fn))&&(Pn=!0),Pn},getTouchXY=function(sn){return"changedTouches"in sn?[sn.changedTouches[0].clientX,sn.changedTouches[0].clientY]:[0,0]},getDeltaXY=function(sn){return[sn.deltaX,sn.deltaY]},extractRef=function(sn){return sn&&"current"in sn?sn.current:sn},deltaCompare=function(sn,ln){return sn[0]===ln[0]&&sn[1]===ln[1]},generateStyle=function(sn){return`
  .block-interactivity-`.concat(sn,` {pointer-events: none;}
  .allow-interactivity-`).concat(sn,` {pointer-events: all;}
`)},idCounter=0,lockStack=[];function RemoveScrollSideCar(sn){var ln=reactExports.useRef([]),cn=reactExports.useRef([0,0]),dn=reactExports.useRef(),pn=reactExports.useState(idCounter++)[0],vn=reactExports.useState(styleSingleton)[0],kn=reactExports.useRef(sn);reactExports.useEffect(function(){kn.current=sn},[sn]),reactExports.useEffect(function(){if(sn.inert){document.body.classList.add("block-interactivity-".concat(pn));var Kn=__spreadArray$1([sn.lockRef.current],(sn.shards||[]).map(extractRef),!0).filter(Boolean);return Kn.forEach(function(qn){return qn.classList.add("allow-interactivity-".concat(pn))}),function(){document.body.classList.remove("block-interactivity-".concat(pn)),Kn.forEach(function(qn){return qn.classList.remove("allow-interactivity-".concat(pn))})}}},[sn.inert,sn.lockRef.current,sn.shards]);var Sn=reactExports.useCallback(function(Kn,qn){if("touches"in Kn&&Kn.touches.length===2)return!kn.current.allowPinchZoom;var Zn=getTouchXY(Kn),Yn=cn.current,Jn="deltaX"in Kn?Kn.deltaX:Yn[0]-Zn[0],rs="deltaY"in Kn?Kn.deltaY:Yn[1]-Zn[1],ss,as=Kn.target,ds=Math.abs(Jn)>Math.abs(rs)?"h":"v";if("touches"in Kn&&ds==="h"&&as.type==="range")return!1;var Es=locationCouldBeScrolled(ds,as);if(!Es)return!0;if(Es?ss=ds:(ss=ds==="v"?"h":"v",Es=locationCouldBeScrolled(ds,as)),!Es)return!1;if(!dn.current&&"changedTouches"in Kn&&(Jn||rs)&&(dn.current=ss),!ss)return!0;var Ss=dn.current||ss;return handleScroll(Ss,qn,Kn,Ss==="h"?Jn:rs,!0)},[]),wn=reactExports.useCallback(function(Kn){var qn=Kn;if(!(!lockStack.length||lockStack[lockStack.length-1]!==vn)){var Zn="deltaY"in qn?getDeltaXY(qn):getTouchXY(qn),Yn=ln.current.filter(function(ss){return ss.name===qn.type&&ss.target===qn.target&&deltaCompare(ss.delta,Zn)})[0];if(Yn&&Yn.should){qn.cancelable&&qn.preventDefault();return}if(!Yn){var Jn=(kn.current.shards||[]).map(extractRef).filter(Boolean).filter(function(ss){return ss.contains(qn.target)}),rs=Jn.length>0?Sn(qn,Jn[0]):!kn.current.noIsolation;rs&&qn.cancelable&&qn.preventDefault()}}},[]),Pn=reactExports.useCallback(function(Kn,qn,Zn,Yn){var Jn={name:Kn,delta:qn,target:Zn,should:Yn};ln.current.push(Jn),setTimeout(function(){ln.current=ln.current.filter(function(rs){return rs!==Jn})},1)},[]),Nn=reactExports.useCallback(function(Kn){cn.current=getTouchXY(Kn),dn.current=void 0},[]),Ln=reactExports.useCallback(function(Kn){Pn(Kn.type,getDeltaXY(Kn),Kn.target,Sn(Kn,sn.lockRef.current))},[]),Fn=reactExports.useCallback(function(Kn){Pn(Kn.type,getTouchXY(Kn),Kn.target,Sn(Kn,sn.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack.push(vn),sn.setCallbacks({onScrollCapture:Ln,onWheelCapture:Ln,onTouchMoveCapture:Fn}),document.addEventListener("wheel",wn,nonPassive),document.addEventListener("touchmove",wn,nonPassive),document.addEventListener("touchstart",Nn,nonPassive),function(){lockStack=lockStack.filter(function(Kn){return Kn!==vn}),document.removeEventListener("wheel",wn,nonPassive),document.removeEventListener("touchmove",wn,nonPassive),document.removeEventListener("touchstart",Nn,nonPassive)}},[]);var zn=sn.removeScrollBar,Dn=sn.inert;return jsxs$1(Fragment$1,{children:[Dn?jsx$1(vn,{styles:generateStyle(pn)}):null,zn?jsx$1(RemoveScrollBar,{gapMode:sn.gapMode}):null]})}const SideCar=exportSidecar(effectCar,RemoveScrollSideCar);var ReactRemoveScroll=reactExports.forwardRef(function(sn,ln){return jsx$1(RemoveScroll$1,{...__assign$2({},sn,{ref:ln,sideCar:SideCar})})});ReactRemoveScroll.classNames=RemoveScroll$1.classNames;const RemoveScroll=ReactRemoveScroll;function createPolymorphicComponent(sn){return sn}function findElementAncestor(sn,ln){let cn=sn;for(;(cn=cn.parentElement)&&!cn.matches(ln););return cn}function getPreviousIndex(sn,ln,cn){for(let dn=sn-1;dn>=0;dn-=1)if(!ln[dn].disabled)return dn;if(cn){for(let dn=ln.length-1;dn>-1;dn-=1)if(!ln[dn].disabled)return dn}return sn}function getNextIndex(sn,ln,cn){for(let dn=sn+1;dn<ln.length;dn+=1)if(!ln[dn].disabled)return dn;if(cn){for(let dn=0;dn<ln.length;dn+=1)if(!ln[dn].disabled)return dn}return sn}function onSameLevel(sn,ln,cn){return findElementAncestor(sn,cn)===findElementAncestor(ln,cn)}function createScopedKeydownHandler({parentSelector:sn,siblingSelector:ln,onKeyDown:cn,loop:dn=!0,activateOnFocus:pn=!1,dir:vn="rtl",orientation:kn}){return Sn=>{var wn;cn==null||cn(Sn);const Pn=Array.from(((wn=findElementAncestor(Sn.currentTarget,sn))==null?void 0:wn.querySelectorAll(ln))||[]).filter(Kn=>onSameLevel(Sn.currentTarget,Kn,sn)),Nn=Pn.findIndex(Kn=>Sn.currentTarget===Kn),Ln=getNextIndex(Nn,Pn,dn),Fn=getPreviousIndex(Nn,Pn,dn),zn=vn==="rtl"?Fn:Ln,Dn=vn==="rtl"?Ln:Fn;switch(Sn.key){case"ArrowRight":{kn==="horizontal"&&(Sn.stopPropagation(),Sn.preventDefault(),Pn[zn].focus(),pn&&Pn[zn].click());break}case"ArrowLeft":{kn==="horizontal"&&(Sn.stopPropagation(),Sn.preventDefault(),Pn[Dn].focus(),pn&&Pn[Dn].click());break}case"ArrowUp":{kn==="vertical"&&(Sn.stopPropagation(),Sn.preventDefault(),Pn[Fn].focus(),pn&&Pn[Fn].click());break}case"ArrowDown":{kn==="vertical"&&(Sn.stopPropagation(),Sn.preventDefault(),Pn[Ln].focus(),pn&&Pn[Ln].click());break}case"Home":{Sn.stopPropagation(),Sn.preventDefault(),!Pn[0].disabled&&Pn[0].focus();break}case"End":{Sn.stopPropagation(),Sn.preventDefault();const Kn=Pn.length-1;!Pn[Kn].disabled&&Pn[Kn].focus();break}}}}function getContextItemIndex(sn,ln,cn){var dn;return cn?Array.from(((dn=findElementAncestor(cn,ln))==null?void 0:dn.querySelectorAll(sn))||[]).findIndex(pn=>pn===cn):null}function createSafeContext(sn){const ln=reactExports.createContext(null);return[({children:pn,value:vn})=>jsx$1(ln.Provider,{value:vn,children:pn}),()=>{const pn=reactExports.useContext(ln);if(pn===null)throw new Error(sn);return pn}]}function packSx(sn){return Array.isArray(sn)?sn:[sn]}const noop$4=()=>{};function closeOnEscape(sn,ln={active:!0}){return typeof sn!="function"||!ln.active?ln.onKeyDown||noop$4:cn=>{var dn;cn.key==="Escape"&&(sn(cn),(dn=ln.onTrigger)==null||dn.call(ln))}}function createEventHandler(sn,ln){return cn=>{sn==null||sn(cn),ln==null||ln(cn)}}function useHovered(){const[sn,ln]=reactExports.useState(-1);return[sn,{setHovered:ln,resetHovered:()=>ln(-1)}]}function isElement$2(sn){return Array.isArray(sn)||sn===null?!1:typeof sn=="object"?sn.type!==React.Fragment:!1}function toVal(sn){var ln,cn,dn="";if(typeof sn=="string"||typeof sn=="number")dn+=sn;else if(typeof sn=="object")if(Array.isArray(sn))for(ln=0;ln<sn.length;ln++)sn[ln]&&(cn=toVal(sn[ln]))&&(dn&&(dn+=" "),dn+=cn);else for(ln in sn)sn[ln]&&(dn&&(dn+=" "),dn+=ln);return dn}function clsx(){for(var sn=0,ln,cn,dn="";sn<arguments.length;)(ln=arguments[sn++])&&(cn=toVal(ln))&&(dn&&(dn+=" "),dn+=cn);return dn}const DEFAULT_COLORS={dark:["#C1C2C5","#A6A7AB","#909296","#5c5f66","#373A40","#2C2E33","#25262b","#1A1B1E","#141517","#101113"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]};function fontStyles(sn){return()=>({fontFamily:sn.fontFamily||"sans-serif"})}var __defProp$1r=Object.defineProperty,__getOwnPropSymbols$1t=Object.getOwnPropertySymbols,__hasOwnProp$1t=Object.prototype.hasOwnProperty,__propIsEnum$1t=Object.prototype.propertyIsEnumerable,__defNormalProp$1r=(sn,ln,cn)=>ln in sn?__defProp$1r(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$1r=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$1t.call(ln,cn)&&__defNormalProp$1r(sn,cn,ln[cn]);if(__getOwnPropSymbols$1t)for(var cn of __getOwnPropSymbols$1t(ln))__propIsEnum$1t.call(ln,cn)&&__defNormalProp$1r(sn,cn,ln[cn]);return sn};function focusStyles(sn){return ln=>({WebkitTapHighlightColor:"transparent",[ln||"&:focus"]:__spreadValues$1r({},sn.focusRing==="always"||sn.focusRing==="auto"?sn.focusRingStyles.styles(sn):sn.focusRingStyles.resetStyles(sn)),[ln?ln.replace(":focus",":focus:not(:focus-visible)"):"&:focus:not(:focus-visible)"]:__spreadValues$1r({},sn.focusRing==="auto"||sn.focusRing==="never"?sn.focusRingStyles.resetStyles(sn):null)})}function primaryShade(sn){return ln=>typeof sn.primaryShade=="number"?sn.primaryShade:sn.primaryShade[ln||sn.colorScheme]}function themeColor(sn){const ln=primaryShade(sn);return(cn,dn,pn=!0,vn=!0)=>{if(typeof cn=="string"&&cn.includes(".")){const[Sn,wn]=cn.split("."),Pn=parseInt(wn,10);if(Sn in sn.colors&&Pn>=0&&Pn<10)return sn.colors[Sn][typeof dn=="number"&&!vn?dn:Pn]}const kn=typeof dn=="number"?dn:ln();return cn in sn.colors?sn.colors[cn][kn]:pn?sn.colors[sn.primaryColor][kn]:cn}}function getGradientColorStops(sn){let ln="";for(let cn=1;cn<sn.length-1;cn+=1)ln+=`${sn[cn]} ${cn/(sn.length-1)*100}%, `;return`${sn[0]} 0%, ${ln}${sn[sn.length-1]} 100%`}function linearGradient(sn,...ln){return`linear-gradient(${sn}deg, ${getGradientColorStops(ln)})`}function radialGradient(...sn){return`radial-gradient(circle, ${getGradientColorStops(sn)})`}function gradient(sn){const ln=themeColor(sn),cn=primaryShade(sn);return dn=>{const pn={from:(dn==null?void 0:dn.from)||sn.defaultGradient.from,to:(dn==null?void 0:dn.to)||sn.defaultGradient.to,deg:(dn==null?void 0:dn.deg)||sn.defaultGradient.deg};return`linear-gradient(${pn.deg}deg, ${ln(pn.from,cn(),!1)} 0%, ${ln(pn.to,cn(),!1)} 100%)`}}function createConverter(sn){return ln=>{if(typeof ln=="number")return`${ln/16}${sn}`;if(typeof ln=="string"){const cn=ln.replace("px","");if(!Number.isNaN(Number(cn)))return`${Number(cn)/16}${sn}`}return ln}}const rem=createConverter("rem"),em=createConverter("em");function getSize({size:sn,sizes:ln,units:cn}){return sn in ln?ln[sn]:typeof sn=="number"?cn==="em"?em(sn):rem(sn):sn||ln.md}function getBreakpointValue(sn){return typeof sn=="number"?sn:typeof sn=="string"&&sn.includes("rem")?Number(sn.replace("rem",""))*16:typeof sn=="string"&&sn.includes("em")?Number(sn.replace("em",""))*16:Number(sn)}function largerThan(sn){return ln=>`@media (min-width: ${em(getBreakpointValue(getSize({size:ln,sizes:sn.breakpoints})))})`}function smallerThan(sn){return ln=>`@media (max-width: ${em(getBreakpointValue(getSize({size:ln,sizes:sn.breakpoints}))-1)})`}function isHexColor(sn){return/^#?([0-9A-F]{3}){1,2}$/i.test(sn)}function hexToRgba(sn){let ln=sn.replace("#","");if(ln.length===3){const kn=ln.split("");ln=[kn[0],kn[0],kn[1],kn[1],kn[2],kn[2]].join("")}const cn=parseInt(ln,16),dn=cn>>16&255,pn=cn>>8&255,vn=cn&255;return{r:dn,g:pn,b:vn,a:1}}function rgbStringToRgba(sn){const[ln,cn,dn,pn]=sn.replace(/[^0-9,.]/g,"").split(",").map(Number);return{r:ln,g:cn,b:dn,a:pn||1}}function toRgba(sn){return isHexColor(sn)?hexToRgba(sn):sn.startsWith("rgb")?rgbStringToRgba(sn):{r:0,g:0,b:0,a:1}}function rgba(sn,ln){if(typeof sn!="string"||ln>1||ln<0)return"rgba(0, 0, 0, 1)";if(sn.startsWith("var(--"))return sn;const{r:cn,g:dn,b:pn}=toRgba(sn);return`rgba(${cn}, ${dn}, ${pn}, ${ln})`}function cover(sn=0){return{position:"absolute",top:rem(sn),right:rem(sn),left:rem(sn),bottom:rem(sn)}}function darken(sn,ln){if(typeof sn=="string"&&sn.startsWith("var(--"))return sn;const{r:cn,g:dn,b:pn,a:vn}=toRgba(sn),kn=1-ln,Sn=wn=>Math.round(wn*kn);return`rgba(${Sn(cn)}, ${Sn(dn)}, ${Sn(pn)}, ${vn})`}function lighten(sn,ln){if(typeof sn=="string"&&sn.startsWith("var(--"))return sn;const{r:cn,g:dn,b:pn,a:vn}=toRgba(sn),kn=Sn=>Math.round(Sn+(255-Sn)*ln);return`rgba(${kn(cn)}, ${kn(dn)}, ${kn(pn)}, ${vn})`}function radius(sn){return ln=>{if(typeof ln=="number")return rem(ln);const cn=typeof sn.defaultRadius=="number"?sn.defaultRadius:sn.radius[sn.defaultRadius]||sn.defaultRadius;return sn.radius[ln]||ln||cn}}function getColorIndexInfo(sn,ln){if(typeof sn=="string"&&sn.includes(".")){const[cn,dn]=sn.split("."),pn=parseInt(dn,10);if(cn in ln.colors&&pn>=0&&pn<10)return{isSplittedColor:!0,key:cn,shade:pn}}return{isSplittedColor:!1}}function variant(sn){const ln=themeColor(sn),cn=primaryShade(sn),dn=gradient(sn);return({variant:pn,color:vn,gradient:kn,primaryFallback:Sn})=>{const wn=getColorIndexInfo(vn,sn);switch(pn){case"light":return{border:"transparent",background:rgba(ln(vn,sn.colorScheme==="dark"?8:0,Sn,!1),sn.colorScheme==="dark"?.2:1),color:vn==="dark"?sn.colorScheme==="dark"?sn.colors.dark[0]:sn.colors.dark[9]:ln(vn,sn.colorScheme==="dark"?2:cn("light")),hover:rgba(ln(vn,sn.colorScheme==="dark"?7:1,Sn,!1),sn.colorScheme==="dark"?.25:.65)};case"subtle":return{border:"transparent",background:"transparent",color:vn==="dark"?sn.colorScheme==="dark"?sn.colors.dark[0]:sn.colors.dark[9]:ln(vn,sn.colorScheme==="dark"?2:cn("light")),hover:rgba(ln(vn,sn.colorScheme==="dark"?8:0,Sn,!1),sn.colorScheme==="dark"?.2:1)};case"outline":return{border:ln(vn,sn.colorScheme==="dark"?5:cn("light")),background:"transparent",color:ln(vn,sn.colorScheme==="dark"?5:cn("light")),hover:sn.colorScheme==="dark"?rgba(ln(vn,5,Sn,!1),.05):rgba(ln(vn,0,Sn,!1),.35)};case"default":return{border:sn.colorScheme==="dark"?sn.colors.dark[4]:sn.colors.gray[4],background:sn.colorScheme==="dark"?sn.colors.dark[6]:sn.white,color:sn.colorScheme==="dark"?sn.white:sn.black,hover:sn.colorScheme==="dark"?sn.colors.dark[5]:sn.colors.gray[0]};case"white":return{border:"transparent",background:sn.white,color:ln(vn,cn()),hover:null};case"transparent":return{border:"transparent",color:vn==="dark"?sn.colorScheme==="dark"?sn.colors.dark[0]:sn.colors.dark[9]:ln(vn,sn.colorScheme==="dark"?2:cn("light")),background:"transparent",hover:null};case"gradient":return{background:dn(kn),color:sn.white,border:"transparent",hover:null};default:{const Pn=cn(),Nn=wn.isSplittedColor?wn.shade:Pn,Ln=wn.isSplittedColor?wn.key:vn;return{border:"transparent",background:ln(Ln,Nn,Sn),color:sn.white,hover:ln(Ln,Nn===9?8:Nn+1)}}}}}function primaryColor(sn){return ln=>{const cn=primaryShade(sn)(ln);return sn.colors[sn.primaryColor][cn]}}function hover(sn){return{"@media (hover: hover)":{"&:hover":sn},"@media (hover: none)":{"&:active":sn}}}function placeholderStyles(sn){return()=>({userSelect:"none",color:sn.colorScheme==="dark"?sn.colors.dark[3]:sn.colors.gray[5]})}function dimmed(sn){return()=>sn.colorScheme==="dark"?sn.colors.dark[2]:sn.colors.gray[6]}const fns={fontStyles,themeColor,focusStyles,linearGradient,radialGradient,smallerThan,largerThan,rgba,cover,darken,lighten,radius,variant,primaryShade,hover,gradient,primaryColor,placeholderStyles,dimmed};var __defProp$1q=Object.defineProperty,__defProps$F=Object.defineProperties,__getOwnPropDescs$F=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$1s=Object.getOwnPropertySymbols,__hasOwnProp$1s=Object.prototype.hasOwnProperty,__propIsEnum$1s=Object.prototype.propertyIsEnumerable,__defNormalProp$1q=(sn,ln,cn)=>ln in sn?__defProp$1q(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$1q=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$1s.call(ln,cn)&&__defNormalProp$1q(sn,cn,ln[cn]);if(__getOwnPropSymbols$1s)for(var cn of __getOwnPropSymbols$1s(ln))__propIsEnum$1s.call(ln,cn)&&__defNormalProp$1q(sn,cn,ln[cn]);return sn},__spreadProps$F=(sn,ln)=>__defProps$F(sn,__getOwnPropDescs$F(ln));function attachFunctions(sn){return __spreadProps$F(__spreadValues$1q({},sn),{fn:{fontStyles:fns.fontStyles(sn),themeColor:fns.themeColor(sn),focusStyles:fns.focusStyles(sn),largerThan:fns.largerThan(sn),smallerThan:fns.smallerThan(sn),radialGradient:fns.radialGradient,linearGradient:fns.linearGradient,gradient:fns.gradient(sn),rgba:fns.rgba,cover:fns.cover,lighten:fns.lighten,darken:fns.darken,primaryShade:fns.primaryShade(sn),radius:fns.radius(sn),variant:fns.variant(sn),hover:fns.hover,primaryColor:fns.primaryColor(sn),placeholderStyles:fns.placeholderStyles(sn),dimmed:fns.dimmed(sn)}})}const MANTINE_COLORS=Object.keys(DEFAULT_COLORS),_DEFAULT_THEME={dir:"ltr",primaryShade:{light:6,dark:8},focusRing:"auto",loader:"oval",colorScheme:"light",white:"#fff",black:"#000",defaultRadius:"sm",transitionTimingFunction:"ease",colors:DEFAULT_COLORS,lineHeight:1.55,fontFamily:"-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",primaryColor:"blue",respectReducedMotion:!0,cursorType:"default",defaultGradient:{from:"indigo",to:"cyan",deg:45},shadows:{xs:"0 0.0625rem 0.1875rem rgba(0, 0, 0, 0.05), 0 0.0625rem 0.125rem rgba(0, 0, 0, 0.1)",sm:"0 0.0625rem 0.1875rem rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 0.625rem 0.9375rem -0.3125rem, rgba(0, 0, 0, 0.04) 0 0.4375rem 0.4375rem -0.3125rem",md:"0 0.0625rem 0.1875rem rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 1.25rem 1.5625rem -0.3125rem, rgba(0, 0, 0, 0.04) 0 0.625rem 0.625rem -0.3125rem",lg:"0 0.0625rem 0.1875rem rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 1.75rem 1.4375rem -0.4375rem, rgba(0, 0, 0, 0.04) 0 0.75rem 0.75rem -0.4375rem",xl:"0 0.0625rem 0.1875rem rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 2.25rem 1.75rem -0.4375rem, rgba(0, 0, 0, 0.04) 0 1.0625rem 1.0625rem -0.4375rem"},fontSizes:{xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem"},radius:{xs:"0.125rem",sm:"0.25rem",md:"0.5rem",lg:"1rem",xl:"2rem"},spacing:{xs:"0.625rem",sm:"0.75rem",md:"1rem",lg:"1.25rem",xl:"1.5rem"},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},headings:{fontFamily:"-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",fontWeight:700,sizes:{h1:{fontSize:"2.125rem",lineHeight:1.3,fontWeight:void 0},h2:{fontSize:"1.625rem",lineHeight:1.35,fontWeight:void 0},h3:{fontSize:"1.375rem",lineHeight:1.4,fontWeight:void 0},h4:{fontSize:"1.125rem",lineHeight:1.45,fontWeight:void 0},h5:{fontSize:"1rem",lineHeight:1.5,fontWeight:void 0},h6:{fontSize:"0.875rem",lineHeight:1.5,fontWeight:void 0}}},other:{},components:{},activeStyles:{transform:"translateY(0.0625rem)"},datesLocale:"en",globalStyles:void 0,focusRingStyles:{styles:sn=>({outlineOffset:"0.125rem",outline:`0.125rem solid ${sn.colors[sn.primaryColor][sn.colorScheme==="dark"?7:5]}`}),resetStyles:()=>({outline:"none"}),inputStyles:sn=>({outline:"none",borderColor:sn.colors[sn.primaryColor][typeof sn.primaryShade=="object"?sn.primaryShade[sn.colorScheme]:sn.primaryShade]})}},DEFAULT_THEME=attachFunctions(_DEFAULT_THEME);var __defProp$1p=Object.defineProperty,__defProps$E=Object.defineProperties,__getOwnPropDescs$E=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$1r=Object.getOwnPropertySymbols,__hasOwnProp$1r=Object.prototype.hasOwnProperty,__propIsEnum$1r=Object.prototype.propertyIsEnumerable,__defNormalProp$1p=(sn,ln,cn)=>ln in sn?__defProp$1p(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$1p=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$1r.call(ln,cn)&&__defNormalProp$1p(sn,cn,ln[cn]);if(__getOwnPropSymbols$1r)for(var cn of __getOwnPropSymbols$1r(ln))__propIsEnum$1r.call(ln,cn)&&__defNormalProp$1p(sn,cn,ln[cn]);return sn},__spreadProps$E=(sn,ln)=>__defProps$E(sn,__getOwnPropDescs$E(ln));function GlobalStyles({theme:sn}){return jsx(Global$1,{styles:{"*, *::before, *::after":{boxSizing:"border-box"},html:{colorScheme:sn.colorScheme==="dark"?"dark":"light"},body:__spreadProps$E(__spreadValues$1p({},sn.fn.fontStyles()),{backgroundColor:sn.colorScheme==="dark"?sn.colors.dark[7]:sn.white,color:sn.colorScheme==="dark"?sn.colors.dark[0]:sn.black,lineHeight:sn.lineHeight,fontSize:sn.fontSizes.md,WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale"})}})}function assignSizeVariables(sn,ln,cn,dn=rem){Object.keys(ln).forEach(pn=>{sn[`--mantine-${cn}-${pn}`]=dn(ln[pn])})}function MantineCssVariables({theme:sn}){const ln={"--mantine-color-white":sn.white,"--mantine-color-black":sn.black,"--mantine-transition-timing-function":sn.transitionTimingFunction,"--mantine-line-height":`${sn.lineHeight}`,"--mantine-font-family":sn.fontFamily,"--mantine-font-family-monospace":sn.fontFamilyMonospace,"--mantine-font-family-headings":sn.headings.fontFamily,"--mantine-heading-font-weight":`${sn.headings.fontWeight}`};assignSizeVariables(ln,sn.shadows,"shadow"),assignSizeVariables(ln,sn.fontSizes,"font-size"),assignSizeVariables(ln,sn.radius,"radius"),assignSizeVariables(ln,sn.spacing,"spacing"),assignSizeVariables(ln,sn.breakpoints,"breakpoints",em),Object.keys(sn.colors).forEach(dn=>{sn.colors[dn].forEach((pn,vn)=>{ln[`--mantine-color-${dn}-${vn}`]=pn})});const cn=sn.headings.sizes;return Object.keys(cn).forEach(dn=>{ln[`--mantine-${dn}-font-size`]=cn[dn].fontSize,ln[`--mantine-${dn}-line-height`]=`${cn[dn].lineHeight}`}),jsx(Global$1,{styles:{":root":ln}})}var __defProp$1o=Object.defineProperty,__defProps$D=Object.defineProperties,__getOwnPropDescs$D=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$1q=Object.getOwnPropertySymbols,__hasOwnProp$1q=Object.prototype.hasOwnProperty,__propIsEnum$1q=Object.prototype.propertyIsEnumerable,__defNormalProp$1o=(sn,ln,cn)=>ln in sn?__defProp$1o(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$1o=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$1q.call(ln,cn)&&__defNormalProp$1o(sn,cn,ln[cn]);if(__getOwnPropSymbols$1q)for(var cn of __getOwnPropSymbols$1q(ln))__propIsEnum$1q.call(ln,cn)&&__defNormalProp$1o(sn,cn,ln[cn]);return sn},__spreadProps$D=(sn,ln)=>__defProps$D(sn,__getOwnPropDescs$D(ln));function mergeTheme(sn,ln){var cn;if(!ln)return sn;const dn=Object.keys(sn).reduce((pn,vn)=>{if(vn==="headings"&&ln.headings){const kn=ln.headings.sizes?Object.keys(sn.headings.sizes).reduce((Sn,wn)=>(Sn[wn]=__spreadValues$1o(__spreadValues$1o({},sn.headings.sizes[wn]),ln.headings.sizes[wn]),Sn),{}):sn.headings.sizes;return __spreadProps$D(__spreadValues$1o({},pn),{headings:__spreadProps$D(__spreadValues$1o(__spreadValues$1o({},sn.headings),ln.headings),{sizes:kn})})}if(vn==="breakpoints"&&ln.breakpoints){const kn=__spreadValues$1o(__spreadValues$1o({},sn.breakpoints),ln.breakpoints);return __spreadProps$D(__spreadValues$1o({},pn),{breakpoints:Object.fromEntries(Object.entries(kn).sort((Sn,wn)=>getBreakpointValue(Sn[1])-getBreakpointValue(wn[1])))})}return pn[vn]=typeof ln[vn]=="object"?__spreadValues$1o(__spreadValues$1o({},sn[vn]),ln[vn]):typeof ln[vn]=="number"||typeof ln[vn]=="boolean"||typeof ln[vn]=="function"?ln[vn]:ln[vn]||sn[vn],pn},{});if(ln!=null&&ln.fontFamily&&!((cn=ln==null?void 0:ln.headings)!=null&&cn.fontFamily)&&(dn.headings.fontFamily=ln.fontFamily),!(dn.primaryColor in dn.colors))throw new Error("MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more – https://mantine.dev/theming/colors/#primary-color");return dn}function mergeThemeWithFunctions(sn,ln){return attachFunctions(mergeTheme(sn,ln))}function filterProps(sn){return Object.keys(sn).reduce((ln,cn)=>(sn[cn]!==void 0&&(ln[cn]=sn[cn]),ln),{})}const styles={html:{fontFamily:"sans-serif",lineHeight:"1.15",textSizeAdjust:"100%"},body:{margin:0},"article, aside, footer, header, nav, section, figcaption, figure, main":{display:"block"},h1:{fontSize:"2em"},hr:{boxSizing:"content-box",height:0,overflow:"visible"},pre:{fontFamily:"monospace, monospace",fontSize:"1em"},a:{background:"transparent",textDecorationSkip:"objects"},"a:active, a:hover":{outlineWidth:0},"abbr[title]":{borderBottom:"none",textDecoration:"underline"},"b, strong":{fontWeight:"bolder"},"code, kbp, samp":{fontFamily:"monospace, monospace",fontSize:"1em"},dfn:{fontStyle:"italic"},mark:{backgroundColor:"#ff0",color:"#000"},small:{fontSize:"80%"},"sub, sup":{fontSize:"75%",lineHeight:0,position:"relative",verticalAlign:"baseline"},sup:{top:"-0.5em"},sub:{bottom:"-0.25em"},"audio, video":{display:"inline-block"},"audio:not([controls])":{display:"none",height:0},img:{borderStyle:"none",verticalAlign:"middle"},"svg:not(:root)":{overflow:"hidden"},"button, input, optgroup, select, textarea":{fontFamily:"sans-serif",fontSize:"100%",lineHeight:"1.15",margin:0},"button, input":{overflow:"visible"},"button, select":{textTransform:"none"},"button, [type=reset], [type=submit]":{WebkitAppearance:"button"},"button::-moz-focus-inner, [type=button]::-moz-focus-inner, [type=reset]::-moz-focus-inner, [type=submit]::-moz-focus-inner":{borderStyle:"none",padding:0},"button:-moz-focusring, [type=button]:-moz-focusring, [type=reset]:-moz-focusring, [type=submit]:-moz-focusring":{outline:`${rem(1)} dotted ButtonText`},legend:{boxSizing:"border-box",color:"inherit",display:"table",maxWidth:"100%",padding:0,whiteSpace:"normal"},progress:{display:"inline-block",verticalAlign:"baseline"},textarea:{overflow:"auto"},"[type=checkbox], [type=radio]":{boxSizing:"border-box",padding:0},"[type=number]::-webkit-inner-spin-button, [type=number]::-webkit-outer-spin-button":{height:"auto"},"[type=search]":{appearance:"none"},"[type=search]::-webkit-search-cancel-button, [type=search]::-webkit-search-decoration":{appearance:"none"},"::-webkit-file-upload-button":{appearance:"button",font:"inherit"},"details, menu":{display:"block"},summary:{display:"list-item"},canvas:{display:"inline-block"},template:{display:"none"}};function NormalizeCSS(){return jsx(Global$1,{styles})}var __defProp$1n=Object.defineProperty,__getOwnPropSymbols$1p=Object.getOwnPropertySymbols,__hasOwnProp$1p=Object.prototype.hasOwnProperty,__propIsEnum$1p=Object.prototype.propertyIsEnumerable,__defNormalProp$1n=(sn,ln,cn)=>ln in sn?__defProp$1n(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$1n=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$1p.call(ln,cn)&&__defNormalProp$1n(sn,cn,ln[cn]);if(__getOwnPropSymbols$1p)for(var cn of __getOwnPropSymbols$1p(ln))__propIsEnum$1p.call(ln,cn)&&__defNormalProp$1n(sn,cn,ln[cn]);return sn};const MantineProviderContext=reactExports.createContext({theme:DEFAULT_THEME});function useMantineTheme(){var sn;return((sn=reactExports.useContext(MantineProviderContext))==null?void 0:sn.theme)||DEFAULT_THEME}function useMantineProviderStyles(sn){const ln=useMantineTheme(),cn=dn=>{var pn,vn,kn,Sn;return{styles:((pn=ln.components[dn])==null?void 0:pn.styles)||{},classNames:((vn=ln.components[dn])==null?void 0:vn.classNames)||{},variants:(kn=ln.components[dn])==null?void 0:kn.variants,sizes:(Sn=ln.components[dn])==null?void 0:Sn.sizes}};return Array.isArray(sn)?sn.map(cn):[cn(sn)]}function useMantineEmotionCache(){var sn;return(sn=reactExports.useContext(MantineProviderContext))==null?void 0:sn.emotionCache}function useComponentDefaultProps(sn,ln,cn){var dn;const pn=useMantineTheme(),vn=(dn=pn.components[sn])==null?void 0:dn.defaultProps,kn=typeof vn=="function"?vn(pn):vn;return __spreadValues$1n(__spreadValues$1n(__spreadValues$1n({},ln),kn),filterProps(cn))}function MantineProvider({theme:sn,emotionCache:ln,withNormalizeCSS:cn=!1,withGlobalStyles:dn=!1,withCSSVariables:pn=!1,inherit:vn=!1,children:kn}){const Sn=reactExports.useContext(MantineProviderContext),wn=mergeThemeWithFunctions(DEFAULT_THEME,vn?__spreadValues$1n(__spreadValues$1n({},Sn.theme),sn):sn);return jsx(ThemeProvider,{theme:wn,children:jsxs(MantineProviderContext.Provider,{value:{theme:wn,emotionCache:ln},children:[cn&&jsx(NormalizeCSS,{}),dn&&jsx(GlobalStyles,{theme:wn}),pn&&jsx(MantineCssVariables,{theme:wn}),typeof wn.globalStyles=="function"&&jsx(Global$1,{styles:wn.globalStyles(wn)}),kn]})})}MantineProvider.displayName="@mantine/core/MantineProvider";const elevations={app:100,modal:200,popover:300,overlay:400,max:9999};function getDefaultZIndex(sn){return elevations[sn]}function useGuaranteedMemo(sn,ln){const cn=reactExports.useRef();return(!cn.current||ln.length!==cn.current.prevDeps.length||cn.current.prevDeps.map((dn,pn)=>dn===ln[pn]).indexOf(!1)>=0)&&(cn.current={v:sn(),prevDeps:[...ln]}),cn.current.v}const defaultMantineEmotionCache=createCache$1({key:"mantine",prepend:!0});function useEmotionCache(){return useMantineEmotionCache()||defaultMantineEmotionCache}var __defProp$1m=Object.defineProperty,__getOwnPropSymbols$1o=Object.getOwnPropertySymbols,__hasOwnProp$1o=Object.prototype.hasOwnProperty,__propIsEnum$1o=Object.prototype.propertyIsEnumerable,__defNormalProp$1m=(sn,ln,cn)=>ln in sn?__defProp$1m(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$1m=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$1o.call(ln,cn)&&__defNormalProp$1m(sn,cn,ln[cn]);if(__getOwnPropSymbols$1o)for(var cn of __getOwnPropSymbols$1o(ln))__propIsEnum$1o.call(ln,cn)&&__defNormalProp$1m(sn,cn,ln[cn]);return sn};const refPropertyName="ref";function getRef(sn){let ln;if(sn.length!==1)return{args:sn,ref:ln};const[cn]=sn;if(!(cn instanceof Object))return{args:sn,ref:ln};if(!(refPropertyName in cn))return{args:sn,ref:ln};ln=cn[refPropertyName];const dn=__spreadValues$1m({},cn);return delete dn[refPropertyName],{args:[dn],ref:ln}}const{cssFactory}=(()=>{function sn(cn,dn,pn){const vn=[],kn=getRegisteredStyles$1(cn,vn,pn);return vn.length<2?pn:kn+dn(vn)}function ln(cn){const{cache:dn}=cn,pn=(...kn)=>{const{ref:Sn,args:wn}=getRef(kn),Pn=serializeStyles(wn,dn.registered);return insertStyles$1(dn,Pn,!1),`${dn.key}-${Pn.name}${Sn===void 0?"":` ${Sn}`}`};return{css:pn,cx:(...kn)=>sn(dn.registered,pn,clsx(kn))}}return{cssFactory:ln}})();function useCss(){const sn=useEmotionCache();return useGuaranteedMemo(()=>cssFactory({cache:sn}),[sn])}function mergeClassNames({cx:sn,classes:ln,context:cn,classNames:dn,name:pn,cache:vn}){const kn=cn.reduce((Sn,wn)=>(Object.keys(wn.classNames).forEach(Pn=>{typeof Sn[Pn]!="string"?Sn[Pn]=`${wn.classNames[Pn]}`:Sn[Pn]=`${Sn[Pn]} ${wn.classNames[Pn]}`}),Sn),{});return Object.keys(ln).reduce((Sn,wn)=>(Sn[wn]=sn(ln[wn],kn[wn],dn!=null&&dn[wn],Array.isArray(pn)?pn.filter(Boolean).map(Pn=>`${(vn==null?void 0:vn.key)||"mantine"}-${Pn}-${wn}`).join(" "):pn?`${(vn==null?void 0:vn.key)||"mantine"}-${pn}-${wn}`:null),Sn),{})}var __defProp$1l=Object.defineProperty,__getOwnPropSymbols$1n=Object.getOwnPropertySymbols,__hasOwnProp$1n=Object.prototype.hasOwnProperty,__propIsEnum$1n=Object.prototype.propertyIsEnumerable,__defNormalProp$1l=(sn,ln,cn)=>ln in sn?__defProp$1l(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$1l=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$1n.call(ln,cn)&&__defNormalProp$1l(sn,cn,ln[cn]);if(__getOwnPropSymbols$1n)for(var cn of __getOwnPropSymbols$1n(ln))__propIsEnum$1n.call(ln,cn)&&__defNormalProp$1l(sn,cn,ln[cn]);return sn};function assignAccStyles(sn,ln){return ln&&Object.keys(ln).forEach(cn=>{sn[cn]?sn[cn]=__spreadValues$1l(__spreadValues$1l({},sn[cn]),ln[cn]):sn[cn]=__spreadValues$1l({},ln[cn])}),sn}function getStyles(sn,ln,cn,dn){const pn=vn=>typeof vn=="function"?vn(ln,cn||{},dn):vn||{};return Array.isArray(sn)?sn.map(vn=>pn(vn.styles)).reduce((vn,kn)=>assignAccStyles(vn,kn),{}):pn(sn)}function getContextVariation({ctx:sn,theme:ln,params:cn,variant:dn,size:pn}){return sn.reduce((vn,kn)=>(kn.variants&&dn in kn.variants&&assignAccStyles(vn,kn.variants[dn](ln,cn,{variant:dn,size:pn})),kn.sizes&&pn in kn.sizes&&assignAccStyles(vn,kn.sizes[pn](ln,cn,{variant:dn,size:pn})),vn),{})}function createStyles(sn){const ln=typeof sn=="function"?sn:()=>sn;function cn(dn,pn){const vn=useMantineTheme(),kn=useMantineProviderStyles(pn==null?void 0:pn.name),Sn=useMantineEmotionCache(),wn={variant:pn==null?void 0:pn.variant,size:pn==null?void 0:pn.size},{css:Pn,cx:Nn}=useCss(),Ln=ln(vn,dn,wn),Fn=getStyles(pn==null?void 0:pn.styles,vn,dn,wn),zn=getStyles(kn,vn,dn,wn),Dn=getContextVariation({ctx:kn,theme:vn,params:dn,variant:pn==null?void 0:pn.variant,size:pn==null?void 0:pn.size}),Kn=Object.fromEntries(Object.keys(Ln).map(qn=>{const Zn=Nn({[Pn(Ln[qn])]:!(pn!=null&&pn.unstyled)},Pn(Dn[qn]),Pn(zn[qn]),Pn(Fn[qn]));return[qn,Zn]}));return{classes:mergeClassNames({cx:Nn,classes:Kn,context:kn,classNames:pn==null?void 0:pn.classNames,name:pn==null?void 0:pn.name,cache:Sn}),cx:Nn,theme:vn}}return cn}function getStylesRef(sn){return`___ref-${sn||""}`}function Global({styles:sn}){const ln=useMantineTheme();return jsx(Global$1,{styles:css$1(typeof sn=="function"?sn(ln):sn)})}var __defProp$1k=Object.defineProperty,__defProps$C=Object.defineProperties,__getOwnPropDescs$C=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$1m=Object.getOwnPropertySymbols,__hasOwnProp$1m=Object.prototype.hasOwnProperty,__propIsEnum$1m=Object.prototype.propertyIsEnumerable,__defNormalProp$1k=(sn,ln,cn)=>ln in sn?__defProp$1k(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$1k=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$1m.call(ln,cn)&&__defNormalProp$1k(sn,cn,ln[cn]);if(__getOwnPropSymbols$1m)for(var cn of __getOwnPropSymbols$1m(ln))__propIsEnum$1m.call(ln,cn)&&__defNormalProp$1k(sn,cn,ln[cn]);return sn},__spreadProps$C=(sn,ln)=>__defProps$C(sn,__getOwnPropDescs$C(ln));const popIn={in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${rem(10)})`},transitionProperty:"transform, opacity"},transitions={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(-${rem(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${rem(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${rem(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${rem(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:__spreadProps$C(__spreadValues$1k({},popIn),{common:{transformOrigin:"center center"}}),"pop-bottom-left":__spreadProps$C(__spreadValues$1k({},popIn),{common:{transformOrigin:"bottom left"}}),"pop-bottom-right":__spreadProps$C(__spreadValues$1k({},popIn),{common:{transformOrigin:"bottom right"}}),"pop-top-left":__spreadProps$C(__spreadValues$1k({},popIn),{common:{transformOrigin:"top left"}}),"pop-top-right":__spreadProps$C(__spreadValues$1k({},popIn),{common:{transformOrigin:"top right"}})},DEFAULT_EVENTS=["mousedown","touchstart"];function useClickOutside(sn,ln,cn){const dn=reactExports.useRef();return reactExports.useEffect(()=>{const pn=vn=>{const{target:kn}=vn??{};if(Array.isArray(cn)){const Sn=(kn==null?void 0:kn.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(kn)&&kn.tagName!=="HTML";cn.every(Pn=>!!Pn&&!vn.composedPath().includes(Pn))&&!Sn&&sn()}else dn.current&&!dn.current.contains(kn)&&sn()};return(ln||DEFAULT_EVENTS).forEach(vn=>document.addEventListener(vn,pn)),()=>{(ln||DEFAULT_EVENTS).forEach(vn=>document.removeEventListener(vn,pn))}},[dn,sn,cn]),dn}function attachMediaListener(sn,ln){try{return sn.addEventListener("change",ln),()=>sn.removeEventListener("change",ln)}catch{return sn.addListener(ln),()=>sn.removeListener(ln)}}function getInitialValue(sn,ln){return typeof ln=="boolean"?ln:typeof window<"u"&&"matchMedia"in window?window.matchMedia(sn).matches:!1}function useMediaQuery(sn,ln,{getInitialValueInEffect:cn}={getInitialValueInEffect:!0}){const[dn,pn]=reactExports.useState(cn?ln:getInitialValue(sn,ln)),vn=reactExports.useRef();return reactExports.useEffect(()=>{if("matchMedia"in window)return vn.current=window.matchMedia(sn),pn(vn.current.matches),attachMediaListener(vn.current,kn=>pn(kn.matches))},[sn]),dn}function clamp(sn,ln,cn){return Math.min(Math.max(sn,ln),cn)}const useIsomorphicEffect$1=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function useDidUpdate(sn,ln){const cn=reactExports.useRef(!1);reactExports.useEffect(()=>()=>{cn.current=!1},[]),reactExports.useEffect(()=>{if(cn.current)return sn();cn.current=!0},ln)}function useFocusReturn({opened:sn,shouldReturnFocus:ln=!0}){const cn=reactExports.useRef(),dn=()=>{var pn;cn.current&&"focus"in cn.current&&typeof cn.current.focus=="function"&&((pn=cn.current)==null||pn.focus({preventScroll:!0}))};return useDidUpdate(()=>{let pn=-1;const vn=kn=>{kn.key==="Tab"&&window.clearTimeout(pn)};return document.addEventListener("keydown",vn),sn?cn.current=document.activeElement:ln&&(pn=window.setTimeout(dn,10)),()=>{window.clearTimeout(pn),document.removeEventListener("keydown",vn)}},[sn,ln]),dn}const TABBABLE_NODES=/input|select|textarea|button|object/,FOCUS_SELECTOR="a, input, select, textarea, button, object, [tabindex]";function hidden(sn){return sn.style.display==="none"}function visible(sn){if(sn.getAttribute("aria-hidden")||sn.getAttribute("hidden")||sn.getAttribute("type")==="hidden")return!1;let cn=sn;for(;cn&&!(cn===document.body||cn.nodeType===11);){if(hidden(cn))return!1;cn=cn.parentNode}return!0}function getElementTabIndex(sn){let ln=sn.getAttribute("tabindex");return ln===null&&(ln=void 0),parseInt(ln,10)}function focusable(sn){const ln=sn.nodeName.toLowerCase(),cn=!Number.isNaN(getElementTabIndex(sn));return(TABBABLE_NODES.test(ln)&&!sn.disabled||sn instanceof HTMLAnchorElement&&sn.href||cn)&&visible(sn)}function tabbable(sn){const ln=getElementTabIndex(sn);return(Number.isNaN(ln)||ln>=0)&&focusable(sn)}function findTabbableDescendants(sn){return Array.from(sn.querySelectorAll(FOCUS_SELECTOR)).filter(tabbable)}function scopeTab(sn,ln){const cn=findTabbableDescendants(sn);if(!cn.length){ln.preventDefault();return}const dn=cn[ln.shiftKey?0:cn.length-1],pn=sn.getRootNode();if(!(dn===pn.activeElement||sn===pn.activeElement))return;ln.preventDefault();const kn=cn[ln.shiftKey?cn.length-1:0];kn&&kn.focus()}function randomId(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function createAriaHider(sn,ln="body > :not(script)"){const cn=randomId(),dn=Array.from(document.querySelectorAll(ln)).map(pn=>{var vn;if((vn=pn==null?void 0:pn.shadowRoot)!=null&&vn.contains(sn)||pn.contains(sn))return;const kn=pn.getAttribute("aria-hidden"),Sn=pn.getAttribute("data-hidden"),wn=pn.getAttribute("data-focus-id");return pn.setAttribute("data-focus-id",cn),kn===null||kn==="false"?pn.setAttribute("aria-hidden","true"):!Sn&&!wn&&pn.setAttribute("data-hidden",kn),{node:pn,ariaHidden:Sn||null}});return()=>{dn.forEach(pn=>{!pn||cn!==pn.node.getAttribute("data-focus-id")||(pn.ariaHidden===null?pn.node.removeAttribute("aria-hidden"):pn.node.setAttribute("aria-hidden",pn.ariaHidden),pn.node.removeAttribute("data-focus-id"),pn.node.removeAttribute("data-hidden"))})}}function useFocusTrap(sn=!0){const ln=reactExports.useRef(),cn=reactExports.useRef(null),dn=vn=>{let kn=vn.querySelector("[data-autofocus]");if(!kn){const Sn=Array.from(vn.querySelectorAll(FOCUS_SELECTOR));kn=Sn.find(tabbable)||Sn.find(focusable)||null,!kn&&focusable(vn)&&(kn=vn)}kn&&kn.focus({preventScroll:!0})},pn=reactExports.useCallback(vn=>{if(sn){if(vn===null){cn.current&&(cn.current(),cn.current=null);return}cn.current=createAriaHider(vn),ln.current!==vn&&(vn?(setTimeout(()=>{vn.getRootNode()&&dn(vn)}),ln.current=vn):ln.current=null)}},[sn]);return reactExports.useEffect(()=>{if(!sn)return;ln.current&&setTimeout(()=>dn(ln.current));const vn=kn=>{kn.key==="Tab"&&ln.current&&scopeTab(ln.current,kn)};return document.addEventListener("keydown",vn),()=>{document.removeEventListener("keydown",vn),cn.current&&cn.current()}},[sn]),pn}const reducer$1=sn=>(sn+1)%1e6;function useForceUpdate(){const[,sn]=reactExports.useReducer(reducer$1,0);return sn}const __useId=React["useId".toString()]||(()=>{});function useReactId$1(){const sn=__useId();return sn?`mantine-${sn.replace(/:/g,"")}`:""}function useId$1(sn){const ln=useReactId$1(),[cn,dn]=reactExports.useState(ln);return useIsomorphicEffect$1(()=>{dn(randomId())},[]),typeof sn=="string"?sn:typeof window>"u"?ln:cn}function useWindowEvent(sn,ln,cn){reactExports.useEffect(()=>(window.addEventListener(sn,ln,cn),()=>window.removeEventListener(sn,ln,cn)),[sn,ln])}function assignRef(sn,ln){typeof sn=="function"?sn(ln):typeof sn=="object"&&sn!==null&&"current"in sn&&(sn.current=ln)}function mergeRefs(...sn){return ln=>{sn.forEach(cn=>assignRef(cn,ln))}}function useMergedRef(...sn){return reactExports.useCallback(mergeRefs(...sn),sn)}function useUncontrolled({value:sn,defaultValue:ln,finalValue:cn,onChange:dn=()=>{}}){const[pn,vn]=reactExports.useState(ln!==void 0?ln:cn),kn=Sn=>{vn(Sn),dn==null||dn(Sn)};return sn!==void 0?[sn,dn,!0]:[pn,kn,!1]}function useQueue({initialValues:sn=[],limit:ln}){const[{state:cn,queue:dn},pn]=reactExports.useState({state:sn.slice(0,ln),queue:sn.slice(ln)});return{state:cn,queue:dn,add:(...wn)=>pn(Pn=>{const Nn=[...Pn.state,...Pn.queue,...wn];return{state:Nn.slice(0,ln),queue:Nn.slice(ln)}}),update:wn=>pn(Pn=>{const Nn=wn([...Pn.state,...Pn.queue]);return{state:Nn.slice(0,ln),queue:Nn.slice(ln)}}),cleanQueue:()=>pn(wn=>({state:wn.state,queue:[]}))}}function useReducedMotion(sn,ln){return useMediaQuery("(prefers-reduced-motion: reduce)",sn,ln)}function useDisclosure(sn=!1,ln){const{onOpen:cn,onClose:dn}=ln||{},[pn,vn]=reactExports.useState(sn),kn=reactExports.useCallback(()=>{vn(Pn=>Pn||(cn==null||cn(),!0))},[cn]),Sn=reactExports.useCallback(()=>{vn(Pn=>Pn&&(dn==null||dn(),!1))},[dn]),wn=reactExports.useCallback(()=>{pn?Sn():kn()},[Sn,kn,pn]);return[pn,{open:kn,close:Sn,toggle:wn}]}var __getOwnPropSymbols$1l=Object.getOwnPropertySymbols,__hasOwnProp$1l=Object.prototype.hasOwnProperty,__propIsEnum$1l=Object.prototype.propertyIsEnumerable,__objRest$Y=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$1l.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$1l)for(var dn of __getOwnPropSymbols$1l(sn))ln.indexOf(dn)<0&&__propIsEnum$1l.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};function extractSystemStyles(sn){const ln=sn,{m:cn,mx:dn,my:pn,mt:vn,mb:kn,ml:Sn,mr:wn,p:Pn,px:Nn,py:Ln,pt:Fn,pb:zn,pl:Dn,pr:Kn,bg:qn,c:Zn,opacity:Yn,ff:Jn,fz:rs,fw:ss,lts:as,ta:ds,lh:Es,fs:Ss,tt:Qn,td:ms,w:Ts,miw:Rs,maw:ys,h:_s,mih:js,mah:bs,bgsz:ks,bgp:xs,bgr:Ks,bga:Vs,pos:Js,top:ru,left:hs,bottom:lu,right:_u,inset:yu,display:Xu}=ln,Du=__objRest$Y(ln,["m","mx","my","mt","mb","ml","mr","p","px","py","pt","pb","pl","pr","bg","c","opacity","ff","fz","fw","lts","ta","lh","fs","tt","td","w","miw","maw","h","mih","mah","bgsz","bgp","bgr","bga","pos","top","left","bottom","right","inset","display"]);return{systemStyles:filterProps({m:cn,mx:dn,my:pn,mt:vn,mb:kn,ml:Sn,mr:wn,p:Pn,px:Nn,py:Ln,pt:Fn,pb:zn,pl:Dn,pr:Kn,bg:qn,c:Zn,opacity:Yn,ff:Jn,fz:rs,fw:ss,lts:as,ta:ds,lh:Es,fs:Ss,tt:Qn,td:ms,w:Ts,miw:Rs,maw:ys,h:_s,mih:js,mah:bs,bgsz:ks,bgp:xs,bgr:Ks,bga:Vs,pos:Js,top:ru,left:hs,bottom:lu,right:_u,inset:yu,display:Xu}),rest:Du}}function getSortedKeys(sn,ln){const cn=Object.keys(sn).filter(dn=>dn!=="base").sort((dn,pn)=>getBreakpointValue(getSize({size:dn,sizes:ln.breakpoints}))-getBreakpointValue(getSize({size:pn,sizes:ln.breakpoints})));return"base"in sn?["base",...cn]:cn}function getResponsiveValue({value:sn,theme:ln,getValue:cn,property:dn}){if(sn==null)return;if(typeof sn=="object")return getSortedKeys(sn,ln).reduce((kn,Sn)=>{if(Sn==="base"&&sn.base!==void 0){const Pn=cn(sn.base,ln);return Array.isArray(dn)?(dn.forEach(Nn=>{kn[Nn]=Pn}),kn):(kn[dn]=Pn,kn)}const wn=cn(sn[Sn],ln);return Array.isArray(dn)?(kn[ln.fn.largerThan(Sn)]={},dn.forEach(Pn=>{kn[ln.fn.largerThan(Sn)][Pn]=wn}),kn):(kn[ln.fn.largerThan(Sn)]={[dn]:wn},kn)},{});const pn=cn(sn,ln);return Array.isArray(dn)?dn.reduce((vn,kn)=>(vn[kn]=pn,vn),{}):{[dn]:pn}}function getColorValue(sn,ln){return sn==="dimmed"?ln.colorScheme==="dark"?ln.colors.dark[2]:ln.colors.gray[6]:ln.fn.variant({variant:"filled",color:sn,primaryFallback:!1}).background}function getSizeValue(sn){return rem(sn)}function identity(sn){return sn}function getFontSizeValue(sn,ln){return getSize({size:sn,sizes:ln.fontSizes})}const NEGATIVE_VALUES=["-xs","-sm","-md","-lg","-xl"];function getSpacingValue(sn,ln){return NEGATIVE_VALUES.includes(sn)?`calc(${getSize({size:sn.replace("-",""),sizes:ln.spacing})} * -1)`:getSize({size:sn,sizes:ln.spacing})}const valueGetters={identity,color:getColorValue,size:getSizeValue,fontSize:getFontSizeValue,spacing:getSpacingValue},SYSTEM_PROPS={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},mx:{type:"spacing",property:["marginRight","marginLeft"]},my:{type:"spacing",property:["marginTop","marginBottom"]},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},px:{type:"spacing",property:["paddingRight","paddingLeft"]},py:{type:"spacing",property:["paddingTop","paddingBottom"]},bg:{type:"color",property:"background"},c:{type:"color",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"identity",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"identity",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"}};var __defProp$1j=Object.defineProperty,__getOwnPropSymbols$1k=Object.getOwnPropertySymbols,__hasOwnProp$1k=Object.prototype.hasOwnProperty,__propIsEnum$1k=Object.prototype.propertyIsEnumerable,__defNormalProp$1j=(sn,ln,cn)=>ln in sn?__defProp$1j(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$1j=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$1k.call(ln,cn)&&__defNormalProp$1j(sn,cn,ln[cn]);if(__getOwnPropSymbols$1k)for(var cn of __getOwnPropSymbols$1k(ln))__propIsEnum$1k.call(ln,cn)&&__defNormalProp$1j(sn,cn,ln[cn]);return sn};function getSystemStyles(sn,ln,cn=SYSTEM_PROPS){return Object.keys(cn).reduce((pn,vn)=>(vn in sn&&sn[vn]!==void 0&&pn.push(getResponsiveValue({value:sn[vn],getValue:valueGetters[cn[vn].type],property:cn[vn].property,theme:ln})),pn),[]).reduce((pn,vn)=>(Object.keys(vn).forEach(kn=>{typeof vn[kn]=="object"&&vn[kn]!==null&&kn in pn?pn[kn]=__spreadValues$1j(__spreadValues$1j({},pn[kn]),vn[kn]):pn[kn]=vn[kn]}),pn),{})}function extractSx(sn,ln){return typeof sn=="function"?sn(ln):sn}function useSx(sn,ln,cn){const dn=useMantineTheme(),{css:pn,cx:vn}=useCss();return Array.isArray(sn)?vn(cn,pn(getSystemStyles(ln,dn)),sn.map(kn=>pn(extractSx(kn,dn)))):vn(cn,pn(extractSx(sn,dn)),pn(getSystemStyles(ln,dn)))}var __defProp$1i=Object.defineProperty,__getOwnPropSymbols$1j=Object.getOwnPropertySymbols,__hasOwnProp$1j=Object.prototype.hasOwnProperty,__propIsEnum$1j=Object.prototype.propertyIsEnumerable,__defNormalProp$1i=(sn,ln,cn)=>ln in sn?__defProp$1i(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$1i=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$1j.call(ln,cn)&&__defNormalProp$1i(sn,cn,ln[cn]);if(__getOwnPropSymbols$1j)for(var cn of __getOwnPropSymbols$1j(ln))__propIsEnum$1j.call(ln,cn)&&__defNormalProp$1i(sn,cn,ln[cn]);return sn},__objRest$X=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$1j.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$1j)for(var dn of __getOwnPropSymbols$1j(sn))ln.indexOf(dn)<0&&__propIsEnum$1j.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const _Box=reactExports.forwardRef((sn,ln)=>{var cn=sn,{className:dn,component:pn,style:vn,sx:kn}=cn,Sn=__objRest$X(cn,["className","component","style","sx"]);const{systemStyles:wn,rest:Pn}=extractSystemStyles(Sn);return jsx$1(pn||"div",{...__spreadValues$1i({ref:ln,className:useSx(kn,wn,dn),style:vn},Pn)})});_Box.displayName="@mantine/core/Box";const Box=_Box;var __defProp$1h=Object.defineProperty,__defProps$B=Object.defineProperties,__getOwnPropDescs$B=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$1i=Object.getOwnPropertySymbols,__hasOwnProp$1i=Object.prototype.hasOwnProperty,__propIsEnum$1i=Object.prototype.propertyIsEnumerable,__defNormalProp$1h=(sn,ln,cn)=>ln in sn?__defProp$1h(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$1h=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$1i.call(ln,cn)&&__defNormalProp$1h(sn,cn,ln[cn]);if(__getOwnPropSymbols$1i)for(var cn of __getOwnPropSymbols$1i(ln))__propIsEnum$1i.call(ln,cn)&&__defNormalProp$1h(sn,cn,ln[cn]);return sn},__spreadProps$B=(sn,ln)=>__defProps$B(sn,__getOwnPropDescs$B(ln)),useStyles$1g=createStyles(sn=>({root:__spreadProps$B(__spreadValues$1h(__spreadValues$1h({},sn.fn.focusStyles()),sn.fn.fontStyles()),{cursor:"pointer",border:0,padding:0,appearance:"none",fontSize:sn.fontSizes.md,backgroundColor:"transparent",textAlign:"left",color:sn.colorScheme==="dark"?sn.colors.dark[0]:sn.black,textDecoration:"none",boxSizing:"border-box"})}));const useStyles$1h=useStyles$1g;var __defProp$1g=Object.defineProperty,__getOwnPropSymbols$1h=Object.getOwnPropertySymbols,__hasOwnProp$1h=Object.prototype.hasOwnProperty,__propIsEnum$1h=Object.prototype.propertyIsEnumerable,__defNormalProp$1g=(sn,ln,cn)=>ln in sn?__defProp$1g(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$1g=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$1h.call(ln,cn)&&__defNormalProp$1g(sn,cn,ln[cn]);if(__getOwnPropSymbols$1h)for(var cn of __getOwnPropSymbols$1h(ln))__propIsEnum$1h.call(ln,cn)&&__defNormalProp$1g(sn,cn,ln[cn]);return sn},__objRest$W=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$1h.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$1h)for(var dn of __getOwnPropSymbols$1h(sn))ln.indexOf(dn)<0&&__propIsEnum$1h.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const _UnstyledButton=reactExports.forwardRef((sn,ln)=>{const cn=useComponentDefaultProps("UnstyledButton",{},sn),{className:dn,component:pn="button",unstyled:vn,variant:kn}=cn,Sn=__objRest$W(cn,["className","component","unstyled","variant"]),{classes:wn,cx:Pn}=useStyles$1h(null,{name:"UnstyledButton",unstyled:vn,variant:kn});return jsx$1(Box,{...__spreadValues$1g({component:pn,ref:ln,className:Pn(wn.root,dn),type:pn==="button"?"button":void 0},Sn)})});_UnstyledButton.displayName="@mantine/core/UnstyledButton";const UnstyledButton=_UnstyledButton;var __defProp$1f=Object.defineProperty,__defProps$A=Object.defineProperties,__getOwnPropDescs$A=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$1g=Object.getOwnPropertySymbols,__hasOwnProp$1g=Object.prototype.hasOwnProperty,__propIsEnum$1g=Object.prototype.propertyIsEnumerable,__defNormalProp$1f=(sn,ln,cn)=>ln in sn?__defProp$1f(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$1f=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$1g.call(ln,cn)&&__defNormalProp$1f(sn,cn,ln[cn]);if(__getOwnPropSymbols$1g)for(var cn of __getOwnPropSymbols$1g(ln))__propIsEnum$1g.call(ln,cn)&&__defNormalProp$1f(sn,cn,ln[cn]);return sn},__spreadProps$A=(sn,ln)=>__defProps$A(sn,__getOwnPropDescs$A(ln));const ACTION_ICON_VARIANTS=["subtle","filled","outline","light","default","transparent","gradient"],sizes$8={xs:rem(18),sm:rem(22),md:rem(28),lg:rem(34),xl:rem(44)};function getVariantStyles$4({variant:sn,theme:ln,color:cn,gradient:dn}){const pn=ln.fn.variant({color:cn,variant:sn,gradient:dn});return sn==="gradient"?{border:0,backgroundImage:pn.background,color:pn.color,"&:hover":ln.fn.hover({backgroundSize:"200%"})}:ACTION_ICON_VARIANTS.includes(sn)?__spreadValues$1f({border:`${rem(1)} solid ${pn.border}`,backgroundColor:pn.background,color:pn.color},ln.fn.hover({backgroundColor:pn.hover})):null}var useStyles$1e=createStyles((sn,{radius:ln,color:cn,gradient:dn},{variant:pn,size:vn})=>({root:__spreadProps$A(__spreadValues$1f({position:"relative",borderRadius:sn.fn.radius(ln),padding:0,lineHeight:1,display:"flex",alignItems:"center",justifyContent:"center",height:getSize({size:vn,sizes:sizes$8}),minHeight:getSize({size:vn,sizes:sizes$8}),width:getSize({size:vn,sizes:sizes$8}),minWidth:getSize({size:vn,sizes:sizes$8})},getVariantStyles$4({variant:pn,theme:sn,color:cn,gradient:dn})),{"&:active":sn.activeStyles,"& [data-action-icon-loader]":{maxWidth:"70%"},"&:disabled, &[data-disabled]":{color:sn.colors.gray[sn.colorScheme==="dark"?6:4],cursor:"not-allowed",backgroundColor:pn==="transparent"?void 0:sn.fn.themeColor("gray",sn.colorScheme==="dark"?8:1),borderColor:pn==="transparent"?void 0:sn.fn.themeColor("gray",sn.colorScheme==="dark"?8:1),backgroundImage:"none",pointerEvents:"none","&:active":{transform:"none"}},"&[data-loading]":{pointerEvents:"none","&::before":__spreadProps$A(__spreadValues$1f({content:'""'},sn.fn.cover(rem(-1))),{backgroundColor:sn.colorScheme==="dark"?sn.fn.rgba(sn.colors.dark[7],.5):"rgba(255, 255, 255, .5)",borderRadius:sn.fn.radius(ln),cursor:"not-allowed"})}})}));const useStyles$1f=useStyles$1e;var __defProp$1e=Object.defineProperty,__getOwnPropSymbols$1f=Object.getOwnPropertySymbols,__hasOwnProp$1f=Object.prototype.hasOwnProperty,__propIsEnum$1f=Object.prototype.propertyIsEnumerable,__defNormalProp$1e=(sn,ln,cn)=>ln in sn?__defProp$1e(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$1e=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$1f.call(ln,cn)&&__defNormalProp$1e(sn,cn,ln[cn]);if(__getOwnPropSymbols$1f)for(var cn of __getOwnPropSymbols$1f(ln))__propIsEnum$1f.call(ln,cn)&&__defNormalProp$1e(sn,cn,ln[cn]);return sn},__objRest$V=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$1f.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$1f)for(var dn of __getOwnPropSymbols$1f(sn))ln.indexOf(dn)<0&&__propIsEnum$1f.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};function Bars(sn){var ln=sn,{size:cn,color:dn}=ln,pn=__objRest$V(ln,["size","color"]);return jsxs$1("svg",{...__spreadValues$1e({viewBox:"0 0 135 140",xmlns:"http://www.w3.org/2000/svg",fill:dn,width:cn},pn),children:[jsxs$1("rect",{y:"10",width:"15",height:"120",rx:"6",children:[jsx$1("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),jsx$1("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]}),jsxs$1("rect",{x:"30",y:"10",width:"15",height:"120",rx:"6",children:[jsx$1("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),jsx$1("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]}),jsxs$1("rect",{x:"60",width:"15",height:"140",rx:"6",children:[jsx$1("animate",{attributeName:"height",begin:"0s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),jsx$1("animate",{attributeName:"y",begin:"0s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]}),jsxs$1("rect",{x:"90",y:"10",width:"15",height:"120",rx:"6",children:[jsx$1("animate",{attributeName:"height",begin:"0.25s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),jsx$1("animate",{attributeName:"y",begin:"0.25s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]}),jsxs$1("rect",{x:"120",y:"10",width:"15",height:"120",rx:"6",children:[jsx$1("animate",{attributeName:"height",begin:"0.5s",dur:"1s",values:"120;110;100;90;80;70;60;50;40;140;120",calcMode:"linear",repeatCount:"indefinite"}),jsx$1("animate",{attributeName:"y",begin:"0.5s",dur:"1s",values:"10;15;20;25;30;35;40;45;50;0;10",calcMode:"linear",repeatCount:"indefinite"})]})]})}var __defProp$1d=Object.defineProperty,__getOwnPropSymbols$1e=Object.getOwnPropertySymbols,__hasOwnProp$1e=Object.prototype.hasOwnProperty,__propIsEnum$1e=Object.prototype.propertyIsEnumerable,__defNormalProp$1d=(sn,ln,cn)=>ln in sn?__defProp$1d(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$1d=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$1e.call(ln,cn)&&__defNormalProp$1d(sn,cn,ln[cn]);if(__getOwnPropSymbols$1e)for(var cn of __getOwnPropSymbols$1e(ln))__propIsEnum$1e.call(ln,cn)&&__defNormalProp$1d(sn,cn,ln[cn]);return sn},__objRest$U=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$1e.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$1e)for(var dn of __getOwnPropSymbols$1e(sn))ln.indexOf(dn)<0&&__propIsEnum$1e.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};function Oval(sn){var ln=sn,{size:cn,color:dn}=ln,pn=__objRest$U(ln,["size","color"]);return jsx$1("svg",{...__spreadValues$1d({width:cn,height:cn,viewBox:"0 0 38 38",xmlns:"http://www.w3.org/2000/svg",stroke:dn},pn),children:jsx$1("g",{fill:"none",fillRule:"evenodd",children:jsxs$1("g",{transform:"translate(2.5 2.5)",strokeWidth:"5",children:[jsx$1("circle",{strokeOpacity:".5",cx:"16",cy:"16",r:"16"}),jsx$1("path",{d:"M32 16c0-9.94-8.06-16-16-16",children:jsx$1("animateTransform",{attributeName:"transform",type:"rotate",from:"0 16 16",to:"360 16 16",dur:"1s",repeatCount:"indefinite"})})]})})})}var __defProp$1c=Object.defineProperty,__getOwnPropSymbols$1d=Object.getOwnPropertySymbols,__hasOwnProp$1d=Object.prototype.hasOwnProperty,__propIsEnum$1d=Object.prototype.propertyIsEnumerable,__defNormalProp$1c=(sn,ln,cn)=>ln in sn?__defProp$1c(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$1c=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$1d.call(ln,cn)&&__defNormalProp$1c(sn,cn,ln[cn]);if(__getOwnPropSymbols$1d)for(var cn of __getOwnPropSymbols$1d(ln))__propIsEnum$1d.call(ln,cn)&&__defNormalProp$1c(sn,cn,ln[cn]);return sn},__objRest$T=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$1d.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$1d)for(var dn of __getOwnPropSymbols$1d(sn))ln.indexOf(dn)<0&&__propIsEnum$1d.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};function Dots(sn){var ln=sn,{size:cn,color:dn}=ln,pn=__objRest$T(ln,["size","color"]);return jsxs$1("svg",{...__spreadValues$1c({width:cn,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",fill:dn},pn),children:[jsxs$1("circle",{cx:"15",cy:"15",r:"15",children:[jsx$1("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),jsx$1("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]}),jsxs$1("circle",{cx:"60",cy:"15",r:"9",fillOpacity:"0.3",children:[jsx$1("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),jsx$1("animate",{attributeName:"fill-opacity",from:"0.5",to:"0.5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})]}),jsxs$1("circle",{cx:"105",cy:"15",r:"15",children:[jsx$1("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),jsx$1("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]})]})}var __defProp$1b=Object.defineProperty,__getOwnPropSymbols$1c=Object.getOwnPropertySymbols,__hasOwnProp$1c=Object.prototype.hasOwnProperty,__propIsEnum$1c=Object.prototype.propertyIsEnumerable,__defNormalProp$1b=(sn,ln,cn)=>ln in sn?__defProp$1b(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$1b=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$1c.call(ln,cn)&&__defNormalProp$1b(sn,cn,ln[cn]);if(__getOwnPropSymbols$1c)for(var cn of __getOwnPropSymbols$1c(ln))__propIsEnum$1c.call(ln,cn)&&__defNormalProp$1b(sn,cn,ln[cn]);return sn},__objRest$S=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$1c.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$1c)for(var dn of __getOwnPropSymbols$1c(sn))ln.indexOf(dn)<0&&__propIsEnum$1c.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const LOADERS={bars:Bars,oval:Oval,dots:Dots},sizes$7={xs:rem(18),sm:rem(22),md:rem(36),lg:rem(44),xl:rem(58)},defaultProps$L={size:"md"};function Loader(sn){const ln=useComponentDefaultProps("Loader",defaultProps$L,sn),{size:cn,color:dn,variant:pn}=ln,vn=__objRest$S(ln,["size","color","variant"]),kn=useMantineTheme(),Sn=pn in LOADERS?pn:kn.loader;return jsx$1(Box,{...__spreadValues$1b({role:"presentation",component:LOADERS[Sn]||LOADERS.bars,size:getSize({size:cn,sizes:sizes$7}),color:kn.fn.variant({variant:"filled",primaryFallback:!1,color:dn||kn.primaryColor}).background},vn)})}Loader.displayName="@mantine/core/Loader";var __defProp$1a=Object.defineProperty,__getOwnPropSymbols$1b=Object.getOwnPropertySymbols,__hasOwnProp$1b=Object.prototype.hasOwnProperty,__propIsEnum$1b=Object.prototype.propertyIsEnumerable,__defNormalProp$1a=(sn,ln,cn)=>ln in sn?__defProp$1a(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$1a=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$1b.call(ln,cn)&&__defNormalProp$1a(sn,cn,ln[cn]);if(__getOwnPropSymbols$1b)for(var cn of __getOwnPropSymbols$1b(ln))__propIsEnum$1b.call(ln,cn)&&__defNormalProp$1a(sn,cn,ln[cn]);return sn},__objRest$R=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$1b.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$1b)for(var dn of __getOwnPropSymbols$1b(sn))ln.indexOf(dn)<0&&__propIsEnum$1b.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$K={color:"gray",size:"md",variant:"subtle"},_ActionIcon=reactExports.forwardRef((sn,ln)=>{const cn=useComponentDefaultProps("ActionIcon",defaultProps$K,sn),{className:dn,color:pn,children:vn,radius:kn,size:Sn,variant:wn,gradient:Pn,disabled:Nn,loaderProps:Ln,loading:Fn,unstyled:zn,__staticSelector:Dn}=cn,Kn=__objRest$R(cn,["className","color","children","radius","size","variant","gradient","disabled","loaderProps","loading","unstyled","__staticSelector"]),{classes:qn,cx:Zn,theme:Yn}=useStyles$1f({radius:kn,color:pn,gradient:Pn},{name:["ActionIcon",Dn],unstyled:zn,size:Sn,variant:wn}),Jn=jsx$1(Loader,{...__spreadValues$1a({color:Yn.fn.variant({color:pn,variant:wn}).color,size:"100%","data-action-icon-loader":!0},Ln)});return jsx$1(UnstyledButton,{...__spreadValues$1a({className:Zn(qn.root,dn),ref:ln,disabled:Nn,"data-disabled":Nn||void 0,"data-loading":Fn||void 0,unstyled:zn},Kn),children:Fn?Jn:vn})});_ActionIcon.displayName="@mantine/core/ActionIcon";const ActionIcon=_ActionIcon;var __defProp$19=Object.defineProperty,__defProps$z=Object.defineProperties,__getOwnPropDescs$z=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$1a=Object.getOwnPropertySymbols,__hasOwnProp$1a=Object.prototype.hasOwnProperty,__propIsEnum$1a=Object.prototype.propertyIsEnumerable,__defNormalProp$19=(sn,ln,cn)=>ln in sn?__defProp$19(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$19=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$1a.call(ln,cn)&&__defNormalProp$19(sn,cn,ln[cn]);if(__getOwnPropSymbols$1a)for(var cn of __getOwnPropSymbols$1a(ln))__propIsEnum$1a.call(ln,cn)&&__defNormalProp$19(sn,cn,ln[cn]);return sn},__spreadProps$z=(sn,ln)=>__defProps$z(sn,__getOwnPropDescs$z(ln)),__objRest$Q=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$1a.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$1a)for(var dn of __getOwnPropSymbols$1a(sn))ln.indexOf(dn)<0&&__propIsEnum$1a.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};function Portal(sn){const ln=useComponentDefaultProps("Portal",{},sn),{children:cn,target:dn,className:pn,innerRef:vn}=ln,kn=__objRest$Q(ln,["children","target","className","innerRef"]),Sn=useMantineTheme(),[wn,Pn]=reactExports.useState(!1),Nn=reactExports.useRef();return useIsomorphicEffect$1(()=>(Pn(!0),Nn.current=dn?typeof dn=="string"?document.querySelector(dn):dn:document.createElement("div"),dn||document.body.appendChild(Nn.current),()=>{!dn&&document.body.removeChild(Nn.current)}),[dn]),wn?reactDomExports.createPortal(jsx$1("div",{...__spreadProps$z(__spreadValues$19({className:pn,dir:Sn.dir},kn),{ref:vn}),children:cn}),Nn.current):null}Portal.displayName="@mantine/core/Portal";var __defProp$18=Object.defineProperty,__getOwnPropSymbols$19=Object.getOwnPropertySymbols,__hasOwnProp$19=Object.prototype.hasOwnProperty,__propIsEnum$19=Object.prototype.propertyIsEnumerable,__defNormalProp$18=(sn,ln,cn)=>ln in sn?__defProp$18(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$18=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$19.call(ln,cn)&&__defNormalProp$18(sn,cn,ln[cn]);if(__getOwnPropSymbols$19)for(var cn of __getOwnPropSymbols$19(ln))__propIsEnum$19.call(ln,cn)&&__defNormalProp$18(sn,cn,ln[cn]);return sn},__objRest$P=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$19.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$19)for(var dn of __getOwnPropSymbols$19(sn))ln.indexOf(dn)<0&&__propIsEnum$19.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};function OptionalPortal(sn){var ln=sn,{withinPortal:cn=!0,children:dn}=ln,pn=__objRest$P(ln,["withinPortal","children"]);return cn?jsx$1(Portal,{...__spreadValues$18({},pn),children:dn}):jsx$1(Fragment$1,{children:dn})}OptionalPortal.displayName="@mantine/core/OptionalPortal";var __defProp$17=Object.defineProperty,__defProps$y=Object.defineProperties,__getOwnPropDescs$y=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$18=Object.getOwnPropertySymbols,__hasOwnProp$18=Object.prototype.hasOwnProperty,__propIsEnum$18=Object.prototype.propertyIsEnumerable,__defNormalProp$17=(sn,ln,cn)=>ln in sn?__defProp$17(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$17=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$18.call(ln,cn)&&__defNormalProp$17(sn,cn,ln[cn]);if(__getOwnPropSymbols$18)for(var cn of __getOwnPropSymbols$18(ln))__propIsEnum$18.call(ln,cn)&&__defNormalProp$17(sn,cn,ln[cn]);return sn},__spreadProps$y=(sn,ln)=>__defProps$y(sn,__getOwnPropDescs$y(ln));function getVariantStyles$3({variant:sn,color:ln,theme:cn}){if(sn==="filled")return{backgroundColor:cn.fn.variant({variant:"filled",color:ln}).background,color:cn.white};if(sn==="outline"){const dn=cn.fn.variant({variant:"outline",color:ln});return{color:dn.color,borderColor:dn.border,backgroundColor:cn.colorScheme==="dark"?cn.colors.dark[6]:cn.white}}if(sn==="light"){const dn=cn.fn.variant({variant:"light",color:ln});return{backgroundColor:dn.background,color:dn.color}}return null}var useStyles$1c=createStyles((sn,{radius:ln,color:cn},{variant:dn})=>({root:__spreadValues$17(__spreadProps$y(__spreadValues$17({},sn.fn.fontStyles()),{position:"relative",overflow:"hidden",paddingTop:sn.spacing.sm,paddingBottom:sn.spacing.sm,paddingLeft:sn.spacing.md,paddingRight:sn.spacing.sm,borderRadius:sn.fn.radius(ln),border:`${rem(1)} solid transparent`}),getVariantStyles$3({variant:dn,color:cn,theme:sn})),wrapper:{display:"flex"},body:{flex:1},title:{boxSizing:"border-box",margin:0,marginBottom:sn.spacing.xs,display:"flex",alignItems:"center",justifyContent:"space-between",lineHeight:sn.lineHeight,fontSize:sn.fontSizes.sm,fontWeight:700,"&[data-with-close-button]":{paddingRight:sn.spacing.md}},label:{display:"block",overflow:"hidden",textOverflow:"ellipsis"},icon:{lineHeight:1,width:rem(20),height:rem(20),display:"flex",alignItems:"center",justifyContent:"flex-start",marginRight:sn.spacing.md,marginTop:1},message:__spreadProps$y(__spreadValues$17({},sn.fn.fontStyles()),{lineHeight:sn.lineHeight,textOverflow:"ellipsis",overflow:"hidden",fontSize:sn.fontSizes.sm,color:dn==="filled"?sn.white:sn.colorScheme==="dark"?dn==="light"?sn.white:sn.colors.dark[0]:sn.black}),closeButton:{width:rem(10),height:rem(10)}}));const useStyles$1d=useStyles$1c;var __defProp$16=Object.defineProperty,__getOwnPropSymbols$17=Object.getOwnPropertySymbols,__hasOwnProp$17=Object.prototype.hasOwnProperty,__propIsEnum$17=Object.prototype.propertyIsEnumerable,__defNormalProp$16=(sn,ln,cn)=>ln in sn?__defProp$16(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$16=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$17.call(ln,cn)&&__defNormalProp$16(sn,cn,ln[cn]);if(__getOwnPropSymbols$17)for(var cn of __getOwnPropSymbols$17(ln))__propIsEnum$17.call(ln,cn)&&__defNormalProp$16(sn,cn,ln[cn]);return sn};function CloseIcon(sn){return jsx$1("svg",{...__spreadValues$16({viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},sn),children:jsx$1("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}CloseIcon.displayName="@mantine/core/CloseIcon";var __defProp$15=Object.defineProperty,__getOwnPropSymbols$16=Object.getOwnPropertySymbols,__hasOwnProp$16=Object.prototype.hasOwnProperty,__propIsEnum$16=Object.prototype.propertyIsEnumerable,__defNormalProp$15=(sn,ln,cn)=>ln in sn?__defProp$15(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$15=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$16.call(ln,cn)&&__defNormalProp$15(sn,cn,ln[cn]);if(__getOwnPropSymbols$16)for(var cn of __getOwnPropSymbols$16(ln))__propIsEnum$16.call(ln,cn)&&__defNormalProp$15(sn,cn,ln[cn]);return sn},__objRest$O=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$16.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$16)for(var dn of __getOwnPropSymbols$16(sn))ln.indexOf(dn)<0&&__propIsEnum$16.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const iconSizes$1={xs:rem(12),sm:rem(16),md:rem(20),lg:rem(28),xl:rem(34)},defaultProps$J={size:"sm"},_CloseButton=reactExports.forwardRef((sn,ln)=>{const cn=useComponentDefaultProps("CloseButton",defaultProps$J,sn),{iconSize:dn,size:pn,children:vn}=cn,kn=__objRest$O(cn,["iconSize","size","children"]),Sn=rem(dn||iconSizes$1[pn]);return jsx$1(ActionIcon,{...__spreadValues$15({ref:ln,__staticSelector:"CloseButton",size:pn},kn),children:vn||jsx$1(CloseIcon,{width:Sn,height:Sn})})});_CloseButton.displayName="@mantine/core/CloseButton";const CloseButton=_CloseButton;var __defProp$14=Object.defineProperty,__getOwnPropSymbols$15=Object.getOwnPropertySymbols,__hasOwnProp$15=Object.prototype.hasOwnProperty,__propIsEnum$15=Object.prototype.propertyIsEnumerable,__defNormalProp$14=(sn,ln,cn)=>ln in sn?__defProp$14(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$14=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$15.call(ln,cn)&&__defNormalProp$14(sn,cn,ln[cn]);if(__getOwnPropSymbols$15)for(var cn of __getOwnPropSymbols$15(ln))__propIsEnum$15.call(ln,cn)&&__defNormalProp$14(sn,cn,ln[cn]);return sn},__objRest$N=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$15.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$15)for(var dn of __getOwnPropSymbols$15(sn))ln.indexOf(dn)<0&&__propIsEnum$15.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$I={variant:"light"},Alert=reactExports.forwardRef((sn,ln)=>{const cn=useComponentDefaultProps("Alert",defaultProps$I,sn),{id:dn,className:pn,title:vn,variant:kn,children:Sn,color:wn,classNames:Pn,icon:Nn,styles:Ln,onClose:Fn,radius:zn,withCloseButton:Dn,closeButtonLabel:Kn,unstyled:qn}=cn,Zn=__objRest$N(cn,["id","className","title","variant","children","color","classNames","icon","styles","onClose","radius","withCloseButton","closeButtonLabel","unstyled"]),{classes:Yn,cx:Jn}=useStyles$1d({color:wn,radius:zn},{classNames:Pn,styles:Ln,unstyled:qn,variant:kn,name:"Alert"}),rs=useId$1(dn),ss=vn&&`${rs}-title`,as=`${rs}-body`;return jsx$1(Box,{...__spreadValues$14({id:rs,role:"alert","aria-labelledby":ss,"aria-describedby":as,className:Jn(Yn.root,Yn[kn],pn),ref:ln},Zn),children:jsxs$1("div",{className:Yn.wrapper,children:[Nn&&jsx$1("div",{className:Yn.icon,children:Nn}),jsxs$1("div",{className:Yn.body,children:[vn&&jsx$1("div",{className:Yn.title,"data-with-close-button":Dn||void 0,children:jsx$1("span",{id:ss,className:Yn.label,children:vn})}),jsx$1("div",{id:as,className:Yn.message,children:Sn})]}),Dn&&jsx$1(CloseButton,{className:Yn.closeButton,onClick:Fn,variant:"transparent",size:16,iconSize:16,"aria-label":Kn})]})})});Alert.displayName="@mantine/core/Alert";var __defProp$13=Object.defineProperty,__defProps$x=Object.defineProperties,__getOwnPropDescs$x=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$14=Object.getOwnPropertySymbols,__hasOwnProp$14=Object.prototype.hasOwnProperty,__propIsEnum$14=Object.prototype.propertyIsEnumerable,__defNormalProp$13=(sn,ln,cn)=>ln in sn?__defProp$13(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$13=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$14.call(ln,cn)&&__defNormalProp$13(sn,cn,ln[cn]);if(__getOwnPropSymbols$14)for(var cn of __getOwnPropSymbols$14(ln))__propIsEnum$14.call(ln,cn)&&__defNormalProp$13(sn,cn,ln[cn]);return sn},__spreadProps$x=(sn,ln)=>__defProps$x(sn,__getOwnPropDescs$x(ln));function getTextDecoration({underline:sn,strikethrough:ln}){const cn=[];return sn&&cn.push("underline"),ln&&cn.push("line-through"),cn.length>0?cn.join(" "):"none"}function getTextColor({theme:sn,color:ln}){return ln==="dimmed"?sn.fn.dimmed():typeof ln=="string"&&(ln in sn.colors||ln.split(".")[0]in sn.colors)?sn.fn.variant({variant:"filled",color:ln}).background:ln||"inherit"}function getLineClamp(sn){return typeof sn=="number"?{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:sn,WebkitBoxOrient:"vertical"}:null}function getTruncate({theme:sn,truncate:ln}){return ln==="start"?{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",direction:sn.dir==="ltr"?"rtl":"ltr",textAlign:sn.dir==="ltr"?"right":"left"}:ln?{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}:null}var useStyles$1a=createStyles((sn,{color:ln,lineClamp:cn,truncate:dn,inline:pn,inherit:vn,underline:kn,gradient:Sn,weight:wn,transform:Pn,align:Nn,strikethrough:Ln,italic:Fn},{size:zn})=>{const Dn=sn.fn.variant({variant:"gradient",gradient:Sn});return{root:__spreadProps$x(__spreadValues$13(__spreadValues$13(__spreadValues$13(__spreadValues$13({},sn.fn.fontStyles()),sn.fn.focusStyles()),getLineClamp(cn)),getTruncate({theme:sn,truncate:dn})),{color:getTextColor({color:ln,theme:sn}),fontFamily:vn?"inherit":sn.fontFamily,fontSize:vn||zn===void 0?"inherit":getSize({size:zn,sizes:sn.fontSizes}),lineHeight:vn?"inherit":pn?1:sn.lineHeight,textDecoration:getTextDecoration({underline:kn,strikethrough:Ln}),WebkitTapHighlightColor:"transparent",fontWeight:vn?"inherit":wn,textTransform:Pn,textAlign:Nn,fontStyle:Fn?"italic":void 0}),gradient:{backgroundImage:Dn.background,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}}});const useStyles$1b=useStyles$1a;var __defProp$12=Object.defineProperty,__getOwnPropSymbols$13=Object.getOwnPropertySymbols,__hasOwnProp$13=Object.prototype.hasOwnProperty,__propIsEnum$13=Object.prototype.propertyIsEnumerable,__defNormalProp$12=(sn,ln,cn)=>ln in sn?__defProp$12(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$12=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$13.call(ln,cn)&&__defNormalProp$12(sn,cn,ln[cn]);if(__getOwnPropSymbols$13)for(var cn of __getOwnPropSymbols$13(ln))__propIsEnum$13.call(ln,cn)&&__defNormalProp$12(sn,cn,ln[cn]);return sn},__objRest$M=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$13.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$13)for(var dn of __getOwnPropSymbols$13(sn))ln.indexOf(dn)<0&&__propIsEnum$13.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$H={variant:"text"},_Text=reactExports.forwardRef((sn,ln)=>{const cn=useComponentDefaultProps("Text",defaultProps$H,sn),{className:dn,size:pn,weight:vn,transform:kn,color:Sn,align:wn,variant:Pn,lineClamp:Nn,truncate:Ln,gradient:Fn,inline:zn,inherit:Dn,underline:Kn,strikethrough:qn,italic:Zn,classNames:Yn,styles:Jn,unstyled:rs,span:ss,__staticSelector:as}=cn,ds=__objRest$M(cn,["className","size","weight","transform","color","align","variant","lineClamp","truncate","gradient","inline","inherit","underline","strikethrough","italic","classNames","styles","unstyled","span","__staticSelector"]),{classes:Es,cx:Ss}=useStyles$1b({color:Sn,lineClamp:Nn,truncate:Ln,inline:zn,inherit:Dn,underline:Kn,strikethrough:qn,italic:Zn,weight:vn,transform:kn,align:wn,gradient:Fn},{unstyled:rs,name:as||"Text",variant:Pn,size:pn});return jsx$1(Box,{...__spreadValues$12({ref:ln,className:Ss(Es.root,{[Es.gradient]:Pn==="gradient"},dn),component:ss?"span":"div"},ds)})});_Text.displayName="@mantine/core/Text";const Text=_Text;function t$7(sn){return sn.split("-")[1]}function e$5(sn){return sn==="y"?"height":"width"}function n$a(sn){return sn.split("-")[0]}function o$b(sn){return["top","bottom"].includes(n$a(sn))?"x":"y"}function i$b(sn,ln,cn){let{reference:dn,floating:pn}=sn;const vn=dn.x+dn.width/2-pn.width/2,kn=dn.y+dn.height/2-pn.height/2,Sn=o$b(ln),wn=e$5(Sn),Pn=dn[wn]/2-pn[wn]/2,Nn=Sn==="x";let Ln;switch(n$a(ln)){case"top":Ln={x:vn,y:dn.y-pn.height};break;case"bottom":Ln={x:vn,y:dn.y+dn.height};break;case"right":Ln={x:dn.x+dn.width,y:kn};break;case"left":Ln={x:dn.x-pn.width,y:kn};break;default:Ln={x:dn.x,y:dn.y}}switch(t$7(ln)){case"start":Ln[Sn]-=Pn*(cn&&Nn?-1:1);break;case"end":Ln[Sn]+=Pn*(cn&&Nn?-1:1)}return Ln}const r$6=async(sn,ln,cn)=>{const{placement:dn="bottom",strategy:pn="absolute",middleware:vn=[],platform:kn}=cn,Sn=vn.filter(Boolean),wn=await(kn.isRTL==null?void 0:kn.isRTL(ln));let Pn=await kn.getElementRects({reference:sn,floating:ln,strategy:pn}),{x:Nn,y:Ln}=i$b(Pn,dn,wn),Fn=dn,zn={},Dn=0;for(let Kn=0;Kn<Sn.length;Kn++){const{name:qn,fn:Zn}=Sn[Kn],{x:Yn,y:Jn,data:rs,reset:ss}=await Zn({x:Nn,y:Ln,initialPlacement:dn,placement:Fn,strategy:pn,middlewareData:zn,rects:Pn,platform:kn,elements:{reference:sn,floating:ln}});Nn=Yn??Nn,Ln=Jn??Ln,zn={...zn,[qn]:{...zn[qn],...rs}},ss&&Dn<=50&&(Dn++,typeof ss=="object"&&(ss.placement&&(Fn=ss.placement),ss.rects&&(Pn=ss.rects===!0?await kn.getElementRects({reference:sn,floating:ln,strategy:pn}):ss.rects),{x:Nn,y:Ln}=i$b(Pn,Fn,wn)),Kn=-1)}return{x:Nn,y:Ln,placement:Fn,strategy:pn,middlewareData:zn}};function a$b(sn,ln){return typeof sn=="function"?sn(ln):sn}function l$7(sn){return typeof sn!="number"?function(ln){return{top:0,right:0,bottom:0,left:0,...ln}}(sn):{top:sn,right:sn,bottom:sn,left:sn}}function s$9(sn){return{...sn,top:sn.y,left:sn.x,right:sn.x+sn.width,bottom:sn.y+sn.height}}async function c$e(sn,ln){var cn;ln===void 0&&(ln={});const{x:dn,y:pn,platform:vn,rects:kn,elements:Sn,strategy:wn}=sn,{boundary:Pn="clippingAncestors",rootBoundary:Nn="viewport",elementContext:Ln="floating",altBoundary:Fn=!1,padding:zn=0}=a$b(ln,sn),Dn=l$7(zn),Kn=Sn[Fn?Ln==="floating"?"reference":"floating":Ln],qn=s$9(await vn.getClippingRect({element:(cn=await(vn.isElement==null?void 0:vn.isElement(Kn)))==null||cn?Kn:Kn.contextElement||await(vn.getDocumentElement==null?void 0:vn.getDocumentElement(Sn.floating)),boundary:Pn,rootBoundary:Nn,strategy:wn})),Zn=Ln==="floating"?{...kn.floating,x:dn,y:pn}:kn.reference,Yn=await(vn.getOffsetParent==null?void 0:vn.getOffsetParent(Sn.floating)),Jn=await(vn.isElement==null?void 0:vn.isElement(Yn))&&await(vn.getScale==null?void 0:vn.getScale(Yn))||{x:1,y:1},rs=s$9(vn.convertOffsetParentRelativeRectToViewportRelativeRect?await vn.convertOffsetParentRelativeRectToViewportRelativeRect({rect:Zn,offsetParent:Yn,strategy:wn}):Zn);return{top:(qn.top-rs.top+Dn.top)/Jn.y,bottom:(rs.bottom-qn.bottom+Dn.bottom)/Jn.y,left:(qn.left-rs.left+Dn.left)/Jn.x,right:(rs.right-qn.right+Dn.right)/Jn.x}}const f$7=Math.min,m$a=Math.max;function u$a(sn,ln,cn){return m$a(sn,f$7(ln,cn))}const g$9=sn=>({name:"arrow",options:sn,async fn(ln){const{x:cn,y:dn,placement:pn,rects:vn,platform:kn,elements:Sn}=ln,{element:wn,padding:Pn=0}=a$b(sn,ln)||{};if(wn==null)return{};const Nn=l$7(Pn),Ln={x:cn,y:dn},Fn=o$b(pn),zn=e$5(Fn),Dn=await kn.getDimensions(wn),Kn=Fn==="y",qn=Kn?"top":"left",Zn=Kn?"bottom":"right",Yn=Kn?"clientHeight":"clientWidth",Jn=vn.reference[zn]+vn.reference[Fn]-Ln[Fn]-vn.floating[zn],rs=Ln[Fn]-vn.reference[Fn],ss=await(kn.getOffsetParent==null?void 0:kn.getOffsetParent(wn));let as=ss?ss[Yn]:0;as&&await(kn.isElement==null?void 0:kn.isElement(ss))||(as=Sn.floating[Yn]||vn.floating[zn]);const ds=Jn/2-rs/2,Es=as/2-Dn[zn]/2-1,Ss=f$7(Nn[qn],Es),Qn=f$7(Nn[Zn],Es),ms=Ss,Ts=as-Dn[zn]-Qn,Rs=as/2-Dn[zn]/2+ds,ys=u$a(ms,Rs,Ts),_s=t$7(pn)!=null&&Rs!=ys&&vn.reference[zn]/2-(Rs<ms?Ss:Qn)-Dn[zn]/2<0;return{[Fn]:Ln[Fn]-(_s?Rs<ms?ms-Rs:Ts-Rs:0),data:{[Fn]:ys,centerOffset:Rs-ys}}}}),d$c=["top","right","bottom","left"];d$c.reduce((sn,ln)=>sn.concat(ln,ln+"-start",ln+"-end"),[]);const h$9={left:"right",right:"left",bottom:"top",top:"bottom"};function y$b(sn){return sn.replace(/left|right|bottom|top/g,ln=>h$9[ln])}function x$e(sn,ln,cn){cn===void 0&&(cn=!1);const dn=t$7(sn),pn=o$b(sn),vn=e$5(pn);let kn=pn==="x"?dn===(cn?"end":"start")?"right":"left":dn==="start"?"bottom":"top";return ln.reference[vn]>ln.floating[vn]&&(kn=y$b(kn)),{main:kn,cross:y$b(kn)}}const w$a={start:"end",end:"start"};function v$9(sn){return sn.replace(/start|end/g,ln=>w$a[ln])}const A$a=function(sn){return sn===void 0&&(sn={}),{name:"flip",options:sn,async fn(ln){var cn;const{placement:dn,middlewareData:pn,rects:vn,initialPlacement:kn,platform:Sn,elements:wn}=ln,{mainAxis:Pn=!0,crossAxis:Nn=!0,fallbackPlacements:Ln,fallbackStrategy:Fn="bestFit",fallbackAxisSideDirection:zn="none",flipAlignment:Dn=!0,...Kn}=a$b(sn,ln),qn=n$a(dn),Zn=n$a(kn)===kn,Yn=await(Sn.isRTL==null?void 0:Sn.isRTL(wn.floating)),Jn=Ln||(Zn||!Dn?[y$b(kn)]:function(ms){const Ts=y$b(ms);return[v$9(ms),Ts,v$9(Ts)]}(kn));Ln||zn==="none"||Jn.push(...function(ms,Ts,Rs,ys){const _s=t$7(ms);let js=function(bs,ks,xs){const Ks=["left","right"],Vs=["right","left"],Js=["top","bottom"],ru=["bottom","top"];switch(bs){case"top":case"bottom":return xs?ks?Vs:Ks:ks?Ks:Vs;case"left":case"right":return ks?Js:ru;default:return[]}}(n$a(ms),Rs==="start",ys);return _s&&(js=js.map(bs=>bs+"-"+_s),Ts&&(js=js.concat(js.map(v$9)))),js}(kn,Dn,zn,Yn));const rs=[kn,...Jn],ss=await c$e(ln,Kn),as=[];let ds=((cn=pn.flip)==null?void 0:cn.overflows)||[];if(Pn&&as.push(ss[qn]),Nn){const{main:ms,cross:Ts}=x$e(dn,vn,Yn);as.push(ss[ms],ss[Ts])}if(ds=[...ds,{placement:dn,overflows:as}],!as.every(ms=>ms<=0)){var Es,Ss;const ms=(((Es=pn.flip)==null?void 0:Es.index)||0)+1,Ts=rs[ms];if(Ts)return{data:{index:ms,overflows:ds},reset:{placement:Ts}};let Rs=(Ss=ds.filter(ys=>ys.overflows[0]<=0).sort((ys,_s)=>ys.overflows[1]-_s.overflows[1])[0])==null?void 0:Ss.placement;if(!Rs)switch(Fn){case"bestFit":{var Qn;const ys=(Qn=ds.map(_s=>[_s.placement,_s.overflows.filter(js=>js>0).reduce((js,bs)=>js+bs,0)]).sort((_s,js)=>_s[1]-js[1])[0])==null?void 0:Qn[0];ys&&(Rs=ys);break}case"initialPlacement":Rs=kn}if(dn!==Rs)return{reset:{placement:Rs}}}return{}}}};function T$a(sn){const ln=f$7(...sn.map(dn=>dn.left)),cn=f$7(...sn.map(dn=>dn.top));return{x:ln,y:cn,width:m$a(...sn.map(dn=>dn.right))-ln,height:m$a(...sn.map(dn=>dn.bottom))-cn}}const D$a=function(sn){return sn===void 0&&(sn={}),{name:"inline",options:sn,async fn(ln){const{placement:cn,elements:dn,rects:pn,platform:vn,strategy:kn}=ln,{padding:Sn=2,x:wn,y:Pn}=a$b(sn,ln),Nn=Array.from(await(vn.getClientRects==null?void 0:vn.getClientRects(dn.reference))||[]),Ln=function(Kn){const qn=Kn.slice().sort((Jn,rs)=>Jn.y-rs.y),Zn=[];let Yn=null;for(let Jn=0;Jn<qn.length;Jn++){const rs=qn[Jn];!Yn||rs.y-Yn.y>Yn.height/2?Zn.push([rs]):Zn[Zn.length-1].push(rs),Yn=rs}return Zn.map(Jn=>s$9(T$a(Jn)))}(Nn),Fn=s$9(T$a(Nn)),zn=l$7(Sn),Dn=await vn.getElementRects({reference:{getBoundingClientRect:function(){if(Ln.length===2&&Ln[0].left>Ln[1].right&&wn!=null&&Pn!=null)return Ln.find(Kn=>wn>Kn.left-zn.left&&wn<Kn.right+zn.right&&Pn>Kn.top-zn.top&&Pn<Kn.bottom+zn.bottom)||Fn;if(Ln.length>=2){if(o$b(cn)==="x"){const ss=Ln[0],as=Ln[Ln.length-1],ds=n$a(cn)==="top",Es=ss.top,Ss=as.bottom,Qn=ds?ss.left:as.left,ms=ds?ss.right:as.right;return{top:Es,bottom:Ss,left:Qn,right:ms,width:ms-Qn,height:Ss-Es,x:Qn,y:Es}}const Kn=n$a(cn)==="left",qn=m$a(...Ln.map(ss=>ss.right)),Zn=f$7(...Ln.map(ss=>ss.left)),Yn=Ln.filter(ss=>Kn?ss.left===Zn:ss.right===qn),Jn=Yn[0].top,rs=Yn[Yn.length-1].bottom;return{top:Jn,bottom:rs,left:Zn,right:qn,width:qn-Zn,height:rs-Jn,x:Zn,y:Jn}}return Fn}},floating:dn.floating,strategy:kn});return pn.reference.x!==Dn.reference.x||pn.reference.y!==Dn.reference.y||pn.reference.width!==Dn.reference.width||pn.reference.height!==Dn.reference.height?{reset:{rects:Dn}}:{}}}},L$9=function(sn){return sn===void 0&&(sn=0),{name:"offset",options:sn,async fn(ln){const{x:cn,y:dn}=ln,pn=await async function(vn,kn){const{placement:Sn,platform:wn,elements:Pn}=vn,Nn=await(wn.isRTL==null?void 0:wn.isRTL(Pn.floating)),Ln=n$a(Sn),Fn=t$7(Sn),zn=o$b(Sn)==="x",Dn=["left","top"].includes(Ln)?-1:1,Kn=Nn&&zn?-1:1,qn=a$b(kn,vn);let{mainAxis:Zn,crossAxis:Yn,alignmentAxis:Jn}=typeof qn=="number"?{mainAxis:qn,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...qn};return Fn&&typeof Jn=="number"&&(Yn=Fn==="end"?-1*Jn:Jn),zn?{x:Yn*Kn,y:Zn*Dn}:{x:Zn*Dn,y:Yn*Kn}}(ln,sn);return{x:cn+pn.x,y:dn+pn.y,data:pn}}}};function k$a(sn){return sn==="x"?"y":"x"}const O$9=function(sn){return sn===void 0&&(sn={}),{name:"shift",options:sn,async fn(ln){const{x:cn,y:dn,placement:pn}=ln,{mainAxis:vn=!0,crossAxis:kn=!1,limiter:Sn={fn:qn=>{let{x:Zn,y:Yn}=qn;return{x:Zn,y:Yn}}},...wn}=a$b(sn,ln),Pn={x:cn,y:dn},Nn=await c$e(ln,wn),Ln=o$b(n$a(pn)),Fn=k$a(Ln);let zn=Pn[Ln],Dn=Pn[Fn];if(vn){const qn=Ln==="y"?"bottom":"right";zn=u$a(zn+Nn[Ln==="y"?"top":"left"],zn,zn-Nn[qn])}if(kn){const qn=Fn==="y"?"bottom":"right";Dn=u$a(Dn+Nn[Fn==="y"?"top":"left"],Dn,Dn-Nn[qn])}const Kn=Sn.fn({...ln,[Ln]:zn,[Fn]:Dn});return{...Kn,data:{x:Kn.x-cn,y:Kn.y-dn}}}}},B$a=function(sn){return sn===void 0&&(sn={}),{options:sn,fn(ln){const{x:cn,y:dn,placement:pn,rects:vn,middlewareData:kn}=ln,{offset:Sn=0,mainAxis:wn=!0,crossAxis:Pn=!0}=a$b(sn,ln),Nn={x:cn,y:dn},Ln=o$b(pn),Fn=k$a(Ln);let zn=Nn[Ln],Dn=Nn[Fn];const Kn=a$b(Sn,ln),qn=typeof Kn=="number"?{mainAxis:Kn,crossAxis:0}:{mainAxis:0,crossAxis:0,...Kn};if(wn){const Jn=Ln==="y"?"height":"width",rs=vn.reference[Ln]-vn.floating[Jn]+qn.mainAxis,ss=vn.reference[Ln]+vn.reference[Jn]-qn.mainAxis;zn<rs?zn=rs:zn>ss&&(zn=ss)}if(Pn){var Zn,Yn;const Jn=Ln==="y"?"width":"height",rs=["top","left"].includes(n$a(pn)),ss=vn.reference[Fn]-vn.floating[Jn]+(rs&&((Zn=kn.offset)==null?void 0:Zn[Fn])||0)+(rs?0:qn.crossAxis),as=vn.reference[Fn]+vn.reference[Jn]+(rs?0:((Yn=kn.offset)==null?void 0:Yn[Fn])||0)-(rs?qn.crossAxis:0);Dn<ss?Dn=ss:Dn>as&&(Dn=as)}return{[Ln]:zn,[Fn]:Dn}}}},C$9=function(sn){return sn===void 0&&(sn={}),{name:"size",options:sn,async fn(ln){const{placement:cn,rects:dn,platform:pn,elements:vn}=ln,{apply:kn=()=>{},...Sn}=a$b(sn,ln),wn=await c$e(ln,Sn),Pn=n$a(cn),Nn=t$7(cn),Ln=o$b(cn)==="x",{width:Fn,height:zn}=dn.floating;let Dn,Kn;Pn==="top"||Pn==="bottom"?(Dn=Pn,Kn=Nn===(await(pn.isRTL==null?void 0:pn.isRTL(vn.floating))?"start":"end")?"left":"right"):(Kn=Pn,Dn=Nn==="end"?"top":"bottom");const qn=zn-wn[Dn],Zn=Fn-wn[Kn],Yn=!ln.middlewareData.shift;let Jn=qn,rs=Zn;if(Ln){const as=Fn-wn.left-wn.right;rs=Nn||Yn?f$7(Zn,as):as}else{const as=zn-wn.top-wn.bottom;Jn=Nn||Yn?f$7(qn,as):as}if(Yn&&!Nn){const as=m$a(wn.left,0),ds=m$a(wn.right,0),Es=m$a(wn.top,0),Ss=m$a(wn.bottom,0);Ln?rs=Fn-2*(as!==0||ds!==0?as+ds:m$a(wn.left,wn.right)):Jn=zn-2*(Es!==0||Ss!==0?Es+Ss:m$a(wn.top,wn.bottom))}await kn({...ln,availableWidth:rs,availableHeight:Jn});const ss=await pn.getDimensions(vn.floating);return Fn!==ss.width||zn!==ss.height?{reset:{rects:!0}}:{}}}};function n$9(sn){var ln;return((ln=sn.ownerDocument)==null?void 0:ln.defaultView)||window}function o$a(sn){return n$9(sn).getComputedStyle(sn)}function i$a(sn){return sn instanceof n$9(sn).Node}function r$5(sn){return i$a(sn)?(sn.nodeName||"").toLowerCase():""}function l$6(sn){return sn instanceof n$9(sn).HTMLElement}function c$d(sn){return sn instanceof n$9(sn).Element}function s$8(sn){return typeof ShadowRoot>"u"?!1:sn instanceof n$9(sn).ShadowRoot||sn instanceof ShadowRoot}function f$6(sn){const{overflow:ln,overflowX:cn,overflowY:dn,display:pn}=o$a(sn);return/auto|scroll|overlay|hidden|clip/.test(ln+dn+cn)&&!["inline","contents"].includes(pn)}function u$9(sn){return["table","td","th"].includes(r$5(sn))}function a$a(sn){const ln=d$b(),cn=o$a(sn);return cn.transform!=="none"||cn.perspective!=="none"||!ln&&!!cn.backdropFilter&&cn.backdropFilter!=="none"||!ln&&!!cn.filter&&cn.filter!=="none"||["transform","perspective","filter"].some(dn=>(cn.willChange||"").includes(dn))||["paint","layout","strict","content"].some(dn=>(cn.contain||"").includes(dn))}function d$b(){return!(typeof CSS>"u"||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function h$8(sn){return["html","body","#document"].includes(r$5(sn))}const p$7=Math.min,m$9=Math.max,g$8=Math.round;function y$a(sn){const ln=o$a(sn);let cn=parseFloat(ln.width)||0,dn=parseFloat(ln.height)||0;const pn=l$6(sn),vn=pn?sn.offsetWidth:cn,kn=pn?sn.offsetHeight:dn,Sn=g$8(cn)!==vn||g$8(dn)!==kn;return Sn&&(cn=vn,dn=kn),{width:cn,height:dn,fallback:Sn}}function x$d(sn){return c$d(sn)?sn:sn.contextElement}const w$9={x:1,y:1};function v$8(sn){const ln=x$d(sn);if(!l$6(ln))return w$9;const cn=ln.getBoundingClientRect(),{width:dn,height:pn,fallback:vn}=y$a(ln);let kn=(vn?g$8(cn.width):cn.width)/dn,Sn=(vn?g$8(cn.height):cn.height)/pn;return kn&&Number.isFinite(kn)||(kn=1),Sn&&Number.isFinite(Sn)||(Sn=1),{x:kn,y:Sn}}const b$b={x:0,y:0};function L$8(sn,ln,cn){var dn,pn;if(ln===void 0&&(ln=!0),!d$b())return b$b;const vn=sn?n$9(sn):window;return!cn||ln&&cn!==vn?b$b:{x:((dn=vn.visualViewport)==null?void 0:dn.offsetLeft)||0,y:((pn=vn.visualViewport)==null?void 0:pn.offsetTop)||0}}function E$b(sn,ln,cn,dn){ln===void 0&&(ln=!1),cn===void 0&&(cn=!1);const pn=sn.getBoundingClientRect(),vn=x$d(sn);let kn=w$9;ln&&(dn?c$d(dn)&&(kn=v$8(dn)):kn=v$8(sn));const Sn=L$8(vn,cn,dn);let wn=(pn.left+Sn.x)/kn.x,Pn=(pn.top+Sn.y)/kn.y,Nn=pn.width/kn.x,Ln=pn.height/kn.y;if(vn){const Fn=n$9(vn),zn=dn&&c$d(dn)?n$9(dn):dn;let Dn=Fn.frameElement;for(;Dn&&dn&&zn!==Fn;){const Kn=v$8(Dn),qn=Dn.getBoundingClientRect(),Zn=getComputedStyle(Dn);qn.x+=(Dn.clientLeft+parseFloat(Zn.paddingLeft))*Kn.x,qn.y+=(Dn.clientTop+parseFloat(Zn.paddingTop))*Kn.y,wn*=Kn.x,Pn*=Kn.y,Nn*=Kn.x,Ln*=Kn.y,wn+=qn.x,Pn+=qn.y,Dn=n$9(Dn).frameElement}}return s$9({width:Nn,height:Ln,x:wn,y:Pn})}function R$7(sn){return((i$a(sn)?sn.ownerDocument:sn.document)||window.document).documentElement}function T$9(sn){return c$d(sn)?{scrollLeft:sn.scrollLeft,scrollTop:sn.scrollTop}:{scrollLeft:sn.pageXOffset,scrollTop:sn.pageYOffset}}function S$8(sn){return E$b(R$7(sn)).left+T$9(sn).scrollLeft}function C$8(sn){if(r$5(sn)==="html")return sn;const ln=sn.assignedSlot||sn.parentNode||s$8(sn)&&sn.host||R$7(sn);return s$8(ln)?ln.host:ln}function F$a(sn){const ln=C$8(sn);return h$8(ln)?ln.ownerDocument.body:l$6(ln)&&f$6(ln)?ln:F$a(ln)}function W$8(sn,ln){var cn;ln===void 0&&(ln=[]);const dn=F$a(sn),pn=dn===((cn=sn.ownerDocument)==null?void 0:cn.body),vn=n$9(dn);return pn?ln.concat(vn,vn.visualViewport||[],f$6(dn)?dn:[]):ln.concat(dn,W$8(dn))}function D$9(sn,ln,cn){let dn;if(ln==="viewport")dn=function(pn,vn){const kn=n$9(pn),Sn=R$7(pn),wn=kn.visualViewport;let Pn=Sn.clientWidth,Nn=Sn.clientHeight,Ln=0,Fn=0;if(wn){Pn=wn.width,Nn=wn.height;const zn=d$b();(!zn||zn&&vn==="fixed")&&(Ln=wn.offsetLeft,Fn=wn.offsetTop)}return{width:Pn,height:Nn,x:Ln,y:Fn}}(sn,cn);else if(ln==="document")dn=function(pn){const vn=R$7(pn),kn=T$9(pn),Sn=pn.ownerDocument.body,wn=m$9(vn.scrollWidth,vn.clientWidth,Sn.scrollWidth,Sn.clientWidth),Pn=m$9(vn.scrollHeight,vn.clientHeight,Sn.scrollHeight,Sn.clientHeight);let Nn=-kn.scrollLeft+S$8(pn);const Ln=-kn.scrollTop;return o$a(Sn).direction==="rtl"&&(Nn+=m$9(vn.clientWidth,Sn.clientWidth)-wn),{width:wn,height:Pn,x:Nn,y:Ln}}(R$7(sn));else if(c$d(ln))dn=function(pn,vn){const kn=E$b(pn,!0,vn==="fixed"),Sn=kn.top+pn.clientTop,wn=kn.left+pn.clientLeft,Pn=l$6(pn)?v$8(pn):{x:1,y:1};return{width:pn.clientWidth*Pn.x,height:pn.clientHeight*Pn.y,x:wn*Pn.x,y:Sn*Pn.y}}(ln,cn);else{const pn=L$8(sn);dn={...ln,x:ln.x-pn.x,y:ln.y-pn.y}}return s$9(dn)}function H$a(sn,ln){const cn=C$8(sn);return!(cn===ln||!c$d(cn)||h$8(cn))&&(o$a(cn).position==="fixed"||H$a(cn,ln))}function O$8(sn,ln){return l$6(sn)&&o$a(sn).position!=="fixed"?ln?ln(sn):sn.offsetParent:null}function P$7(sn,ln){const cn=n$9(sn);if(!l$6(sn))return cn;let dn=O$8(sn,ln);for(;dn&&u$9(dn)&&o$a(dn).position==="static";)dn=O$8(dn,ln);return dn&&(r$5(dn)==="html"||r$5(dn)==="body"&&o$a(dn).position==="static"&&!a$a(dn))?cn:dn||function(pn){let vn=C$8(pn);for(;l$6(vn)&&!h$8(vn);){if(a$a(vn))return vn;vn=C$8(vn)}return null}(sn)||cn}function V$6(sn,ln,cn){const dn=l$6(ln),pn=R$7(ln),vn=cn==="fixed",kn=E$b(sn,!0,vn,ln);let Sn={scrollLeft:0,scrollTop:0};const wn={x:0,y:0};if(dn||!dn&&!vn)if((r$5(ln)!=="body"||f$6(pn))&&(Sn=T$9(ln)),l$6(ln)){const Pn=E$b(ln,!0,vn,ln);wn.x=Pn.x+ln.clientLeft,wn.y=Pn.y+ln.clientTop}else pn&&(wn.x=S$8(pn));return{x:kn.left+Sn.scrollLeft-wn.x,y:kn.top+Sn.scrollTop-wn.y,width:kn.width,height:kn.height}}const k$9={getClippingRect:function(sn){let{element:ln,boundary:cn,rootBoundary:dn,strategy:pn}=sn;const vn=cn==="clippingAncestors"?function(Pn,Nn){const Ln=Nn.get(Pn);if(Ln)return Ln;let Fn=W$8(Pn).filter(qn=>c$d(qn)&&r$5(qn)!=="body"),zn=null;const Dn=o$a(Pn).position==="fixed";let Kn=Dn?C$8(Pn):Pn;for(;c$d(Kn)&&!h$8(Kn);){const qn=o$a(Kn),Zn=a$a(Kn);Zn||qn.position!=="fixed"||(zn=null),(Dn?!Zn&&!zn:!Zn&&qn.position==="static"&&zn&&["absolute","fixed"].includes(zn.position)||f$6(Kn)&&!Zn&&H$a(Pn,Kn))?Fn=Fn.filter(Yn=>Yn!==Kn):zn=qn,Kn=C$8(Kn)}return Nn.set(Pn,Fn),Fn}(ln,this._c):[].concat(cn),kn=[...vn,dn],Sn=kn[0],wn=kn.reduce((Pn,Nn)=>{const Ln=D$9(ln,Nn,pn);return Pn.top=m$9(Ln.top,Pn.top),Pn.right=p$7(Ln.right,Pn.right),Pn.bottom=p$7(Ln.bottom,Pn.bottom),Pn.left=m$9(Ln.left,Pn.left),Pn},D$9(ln,Sn,pn));return{width:wn.right-wn.left,height:wn.bottom-wn.top,x:wn.left,y:wn.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(sn){let{rect:ln,offsetParent:cn,strategy:dn}=sn;const pn=l$6(cn),vn=R$7(cn);if(cn===vn)return ln;let kn={scrollLeft:0,scrollTop:0},Sn={x:1,y:1};const wn={x:0,y:0};if((pn||!pn&&dn!=="fixed")&&((r$5(cn)!=="body"||f$6(vn))&&(kn=T$9(cn)),l$6(cn))){const Pn=E$b(cn);Sn=v$8(cn),wn.x=Pn.x+cn.clientLeft,wn.y=Pn.y+cn.clientTop}return{width:ln.width*Sn.x,height:ln.height*Sn.y,x:ln.x*Sn.x-kn.scrollLeft*Sn.x+wn.x,y:ln.y*Sn.y-kn.scrollTop*Sn.y+wn.y}},isElement:c$d,getDimensions:function(sn){return y$a(sn)},getOffsetParent:P$7,getDocumentElement:R$7,getScale:v$8,async getElementRects(sn){let{reference:ln,floating:cn,strategy:dn}=sn;const pn=this.getOffsetParent||P$7,vn=this.getDimensions;return{reference:V$6(ln,await pn(cn),dn),floating:{x:0,y:0,...await vn(cn)}}},getClientRects:sn=>Array.from(sn.getClientRects()),isRTL:sn=>o$a(sn).direction==="rtl"};function z$8(sn,ln,cn,dn){dn===void 0&&(dn={});const{ancestorScroll:pn=!0,ancestorResize:vn=!0,elementResize:kn=!0,animationFrame:Sn=!1}=dn,wn=pn||vn?[...c$d(sn)?W$8(sn):sn.contextElement?W$8(sn.contextElement):[],...W$8(ln)]:[];wn.forEach(Fn=>{const zn=!c$d(Fn)&&Fn.toString().includes("V");!pn||Sn&&!zn||Fn.addEventListener("scroll",cn,{passive:!0}),vn&&Fn.addEventListener("resize",cn)});let Pn,Nn=null;kn&&(Nn=new ResizeObserver(()=>{cn()}),c$d(sn)&&!Sn&&Nn.observe(sn),c$d(sn)||!sn.contextElement||Sn||Nn.observe(sn.contextElement),Nn.observe(ln));let Ln=Sn?E$b(sn):null;return Sn&&function Fn(){const zn=E$b(sn);!Ln||zn.x===Ln.x&&zn.y===Ln.y&&zn.width===Ln.width&&zn.height===Ln.height||cn(),Ln=zn,Pn=requestAnimationFrame(Fn)}(),cn(),()=>{var Fn;wn.forEach(zn=>{pn&&zn.removeEventListener("scroll",cn),vn&&zn.removeEventListener("resize",cn)}),(Fn=Nn)==null||Fn.disconnect(),Nn=null,Sn&&cancelAnimationFrame(Pn)}}const M$8=(sn,ln,cn)=>{const dn=new Map,pn={platform:k$9,...cn},vn={...pn.platform,_c:dn};return r$6(sn,ln,{...pn,platform:vn})},arrow=sn=>{const{element:ln,padding:cn}=sn;function dn(pn){return Object.prototype.hasOwnProperty.call(pn,"current")}return{name:"arrow",options:sn,fn(pn){return dn(ln)?ln.current!=null?g$9({element:ln.current,padding:cn}).fn(pn):{}:ln?g$9({element:ln,padding:cn}).fn(pn):{}}}};var index$4=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function deepEqual(sn,ln){if(sn===ln)return!0;if(typeof sn!=typeof ln)return!1;if(typeof sn=="function"&&sn.toString()===ln.toString())return!0;let cn,dn,pn;if(sn&&ln&&typeof sn=="object"){if(Array.isArray(sn)){if(cn=sn.length,cn!=ln.length)return!1;for(dn=cn;dn--!==0;)if(!deepEqual(sn[dn],ln[dn]))return!1;return!0}if(pn=Object.keys(sn),cn=pn.length,cn!==Object.keys(ln).length)return!1;for(dn=cn;dn--!==0;)if(!Object.prototype.hasOwnProperty.call(ln,pn[dn]))return!1;for(dn=cn;dn--!==0;){const vn=pn[dn];if(!(vn==="_owner"&&sn.$$typeof)&&!deepEqual(sn[vn],ln[vn]))return!1}return!0}return sn!==sn&&ln!==ln}function useLatestRef$1(sn){const ln=reactExports.useRef(sn);return index$4(()=>{ln.current=sn}),ln}function useFloating$1(sn){sn===void 0&&(sn={});const{placement:ln="bottom",strategy:cn="absolute",middleware:dn=[],platform:pn,whileElementsMounted:vn,open:kn}=sn,[Sn,wn]=reactExports.useState({x:null,y:null,strategy:cn,placement:ln,middlewareData:{},isPositioned:!1}),[Pn,Nn]=reactExports.useState(dn);deepEqual(Pn,dn)||Nn(dn);const Ln=reactExports.useRef(null),Fn=reactExports.useRef(null),zn=reactExports.useRef(Sn),Dn=useLatestRef$1(vn),Kn=useLatestRef$1(pn),[qn,Zn]=reactExports.useState(null),[Yn,Jn]=reactExports.useState(null),rs=reactExports.useCallback(Qn=>{Ln.current!==Qn&&(Ln.current=Qn,Zn(Qn))},[]),ss=reactExports.useCallback(Qn=>{Fn.current!==Qn&&(Fn.current=Qn,Jn(Qn))},[]),as=reactExports.useCallback(()=>{if(!Ln.current||!Fn.current)return;const Qn={placement:ln,strategy:cn,middleware:Pn};Kn.current&&(Qn.platform=Kn.current),M$8(Ln.current,Fn.current,Qn).then(ms=>{const Ts={...ms,isPositioned:!0};ds.current&&!deepEqual(zn.current,Ts)&&(zn.current=Ts,reactDomExports.flushSync(()=>{wn(Ts)}))})},[Pn,ln,cn,Kn]);index$4(()=>{kn===!1&&zn.current.isPositioned&&(zn.current.isPositioned=!1,wn(Qn=>({...Qn,isPositioned:!1})))},[kn]);const ds=reactExports.useRef(!1);index$4(()=>(ds.current=!0,()=>{ds.current=!1}),[]),index$4(()=>{if(qn&&Yn){if(Dn.current)return Dn.current(qn,Yn,as);as()}},[qn,Yn,as,Dn]);const Es=reactExports.useMemo(()=>({reference:Ln,floating:Fn,setReference:rs,setFloating:ss}),[rs,ss]),Ss=reactExports.useMemo(()=>({reference:qn,floating:Yn}),[qn,Yn]);return reactExports.useMemo(()=>({...Sn,update:as,refs:Es,elements:Ss,reference:rs,floating:ss}),[Sn,as,Es,Ss,rs,ss])}var index$3=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;let serverHandoffComplete=!1,count=0;const genId=()=>"floating-ui-"+count++;function useFloatingId(){const[sn,ln]=reactExports.useState(()=>serverHandoffComplete?genId():void 0);return index$3(()=>{sn==null&&ln(genId())},[]),reactExports.useEffect(()=>{serverHandoffComplete||(serverHandoffComplete=!0)},[]),sn}const useReactId=React$1["useId".toString()],useId=useReactId||useFloatingId;function createPubSub(){const sn=new Map;return{emit(ln,cn){var dn;(dn=sn.get(ln))==null||dn.forEach(pn=>pn(cn))},on(ln,cn){sn.set(ln,[...sn.get(ln)||[],cn])},off(ln,cn){sn.set(ln,(sn.get(ln)||[]).filter(dn=>dn!==cn))}}}const FloatingNodeContext=reactExports.createContext(null),FloatingTreeContext=reactExports.createContext(null),useFloatingParentNodeId=()=>{var sn;return((sn=reactExports.useContext(FloatingNodeContext))==null?void 0:sn.id)||null},useFloatingTree=()=>reactExports.useContext(FloatingTreeContext);function getDocument(sn){return(sn==null?void 0:sn.ownerDocument)||document}function getPlatform(){const sn=navigator.userAgentData;return sn!=null&&sn.platform?sn.platform:navigator.platform}function getUserAgent(){const sn=navigator.userAgentData;return sn&&Array.isArray(sn.brands)?sn.brands.map(ln=>{let{brand:cn,version:dn}=ln;return cn+"/"+dn}).join(" "):navigator.userAgent}function getWindow(sn){return getDocument(sn).defaultView||window}function isElement$1(sn){return sn?sn instanceof getWindow(sn).Element:!1}function isHTMLElement(sn){return sn?sn instanceof getWindow(sn).HTMLElement:!1}function isShadowRoot(sn){if(typeof ShadowRoot>"u")return!1;const ln=getWindow(sn).ShadowRoot;return sn instanceof ln||sn instanceof ShadowRoot}function isVirtualClick(sn){if(sn.mozInputSource===0&&sn.isTrusted)return!0;const ln=/Android/i;return(ln.test(getPlatform())||ln.test(getUserAgent()))&&sn.pointerType?sn.type==="click"&&sn.buttons===1:sn.detail===0&&!sn.pointerType}function isVirtualPointerEvent(sn){return sn.width===0&&sn.height===0||sn.width===1&&sn.height===1&&sn.pressure===0&&sn.detail===0&&sn.pointerType!=="mouse"||sn.width<1&&sn.height<1&&sn.pressure===0&&sn.detail===0}function isMouseLikePointerType(sn,ln){const cn=["mouse","pen"];return ln||cn.push("",void 0),cn.includes(sn)}function useLatestRef(sn){const ln=reactExports.useRef(sn);return index$3(()=>{ln.current=sn}),ln}const safePolygonIdentifier="data-floating-ui-safe-polygon";function getDelay(sn,ln,cn){return cn&&!isMouseLikePointerType(cn)?0:typeof sn=="number"?sn:sn==null?void 0:sn[ln]}const useHover=function(sn,ln){let{enabled:cn=!0,delay:dn=0,handleClose:pn=null,mouseOnly:vn=!1,restMs:kn=0,move:Sn=!0}=ln===void 0?{}:ln;const{open:wn,onOpenChange:Pn,dataRef:Nn,events:Ln,elements:{domReference:Fn,floating:zn},refs:Dn}=sn,Kn=useFloatingTree(),qn=useFloatingParentNodeId(),Zn=useLatestRef(pn),Yn=useLatestRef(dn),Jn=reactExports.useRef(),rs=reactExports.useRef(),ss=reactExports.useRef(),as=reactExports.useRef(),ds=reactExports.useRef(!0),Es=reactExports.useRef(!1),Ss=reactExports.useRef(()=>{}),Qn=reactExports.useCallback(()=>{var ys;const _s=(ys=Nn.current.openEvent)==null?void 0:ys.type;return(_s==null?void 0:_s.includes("mouse"))&&_s!=="mousedown"},[Nn]);reactExports.useEffect(()=>{if(!cn)return;function ys(){clearTimeout(rs.current),clearTimeout(as.current),ds.current=!0}return Ln.on("dismiss",ys),()=>{Ln.off("dismiss",ys)}},[cn,Ln]),reactExports.useEffect(()=>{if(!cn||!Zn.current||!wn)return;function ys(){Qn()&&Pn(!1)}const _s=getDocument(zn).documentElement;return _s.addEventListener("mouseleave",ys),()=>{_s.removeEventListener("mouseleave",ys)}},[zn,wn,Pn,cn,Zn,Nn,Qn]);const ms=reactExports.useCallback(function(ys){ys===void 0&&(ys=!0);const _s=getDelay(Yn.current,"close",Jn.current);_s&&!ss.current?(clearTimeout(rs.current),rs.current=setTimeout(()=>Pn(!1),_s)):ys&&(clearTimeout(rs.current),Pn(!1))},[Yn,Pn]),Ts=reactExports.useCallback(()=>{Ss.current(),ss.current=void 0},[]),Rs=reactExports.useCallback(()=>{if(Es.current){const ys=getDocument(Dn.floating.current).body;ys.style.pointerEvents="",ys.removeAttribute(safePolygonIdentifier),Es.current=!1}},[Dn]);return reactExports.useEffect(()=>{if(!cn)return;function ys(){return Nn.current.openEvent?["click","mousedown"].includes(Nn.current.openEvent.type):!1}function _s(ks){if(clearTimeout(rs.current),ds.current=!1,vn&&!isMouseLikePointerType(Jn.current)||kn>0&&getDelay(Yn.current,"open")===0)return;Nn.current.openEvent=ks;const xs=getDelay(Yn.current,"open",Jn.current);xs?rs.current=setTimeout(()=>{Pn(!0)},xs):Pn(!0)}function js(ks){if(ys())return;Ss.current();const xs=getDocument(zn);if(clearTimeout(as.current),Zn.current){wn||clearTimeout(rs.current),ss.current=Zn.current({...sn,tree:Kn,x:ks.clientX,y:ks.clientY,onClose(){Rs(),Ts(),ms()}});const Ks=ss.current;xs.addEventListener("mousemove",Ks),Ss.current=()=>{xs.removeEventListener("mousemove",Ks)};return}ms()}function bs(ks){ys()||Zn.current==null||Zn.current({...sn,tree:Kn,x:ks.clientX,y:ks.clientY,onClose(){Rs(),Ts(),ms()}})(ks)}if(isElement$1(Fn)){const ks=Fn;return wn&&ks.addEventListener("mouseleave",bs),zn==null||zn.addEventListener("mouseleave",bs),Sn&&ks.addEventListener("mousemove",_s,{once:!0}),ks.addEventListener("mouseenter",_s),ks.addEventListener("mouseleave",js),()=>{wn&&ks.removeEventListener("mouseleave",bs),zn==null||zn.removeEventListener("mouseleave",bs),Sn&&ks.removeEventListener("mousemove",_s),ks.removeEventListener("mouseenter",_s),ks.removeEventListener("mouseleave",js)}}},[Fn,zn,cn,sn,vn,kn,Sn,ms,Ts,Rs,Pn,wn,Kn,Yn,Zn,Nn]),index$3(()=>{var ys;if(cn&&wn&&(ys=Zn.current)!=null&&ys.__options.blockPointerEvents&&Qn()){const bs=getDocument(zn).body;if(bs.setAttribute(safePolygonIdentifier,""),bs.style.pointerEvents="none",Es.current=!0,isElement$1(Fn)&&zn){var _s,js;const ks=Fn,xs=Kn==null||(_s=Kn.nodesRef.current.find(Ks=>Ks.id===qn))==null||(js=_s.context)==null?void 0:js.elements.floating;return xs&&(xs.style.pointerEvents=""),ks.style.pointerEvents="auto",zn.style.pointerEvents="auto",()=>{ks.style.pointerEvents="",zn.style.pointerEvents=""}}}},[cn,wn,qn,zn,Fn,Kn,Zn,Nn,Qn]),index$3(()=>{wn||(Jn.current=void 0,Ts(),Rs())},[wn,Ts,Rs]),reactExports.useEffect(()=>()=>{Ts(),clearTimeout(rs.current),clearTimeout(as.current),Rs()},[cn,Ts,Rs]),reactExports.useMemo(()=>{if(!cn)return{};function ys(_s){Jn.current=_s.pointerType}return{reference:{onPointerDown:ys,onPointerEnter:ys,onMouseMove(){wn||kn===0||(clearTimeout(as.current),as.current=setTimeout(()=>{ds.current||Pn(!0)},kn))}},floating:{onMouseEnter(){clearTimeout(rs.current)},onMouseLeave(){Ln.emit("dismiss",{type:"mouseLeave",data:{returnFocus:!1}}),ms(!1)}}}},[Ln,cn,kn,wn,Pn,ms])},FloatingDelayGroupContext=reactExports.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:()=>{},setState:()=>{},isInstantPhase:!1}),useDelayGroupContext=()=>reactExports.useContext(FloatingDelayGroupContext),FloatingDelayGroup=sn=>{let{children:ln,delay:cn,timeoutMs:dn=0}=sn;const[pn,vn]=reactExports.useReducer((wn,Pn)=>({...wn,...Pn}),{delay:cn,timeoutMs:dn,initialDelay:cn,currentId:null,isInstantPhase:!1}),kn=reactExports.useRef(null),Sn=reactExports.useCallback(wn=>{vn({currentId:wn})},[]);return index$3(()=>{pn.currentId?kn.current===null?kn.current=pn.currentId:vn({isInstantPhase:!0}):(vn({isInstantPhase:!1}),kn.current=null)},[pn.currentId]),jsx$1(FloatingDelayGroupContext.Provider,{value:reactExports.useMemo(()=>({...pn,setState:vn,setCurrentId:Sn}),[pn,vn,Sn]),children:ln})},useDelayGroup=(sn,ln)=>{let{open:cn,onOpenChange:dn}=sn,{id:pn}=ln;const{currentId:vn,setCurrentId:kn,initialDelay:Sn,setState:wn,timeoutMs:Pn}=useDelayGroupContext();reactExports.useEffect(()=>{vn&&(wn({delay:{open:1,close:getDelay(Sn,"close")}}),vn!==pn&&dn(!1))},[pn,dn,wn,vn,Sn]),reactExports.useEffect(()=>{function Nn(){dn(!1),wn({delay:Sn,currentId:null})}if(!cn&&vn===pn)if(Pn){const Ln=window.setTimeout(Nn,Pn);return()=>{clearTimeout(Ln)}}else Nn()},[cn,wn,vn,pn,dn,Sn,Pn]),reactExports.useEffect(()=>{cn&&kn(pn)},[cn,kn,pn])};function activeElement$1(sn){let ln=sn.activeElement;for(;((cn=ln)==null||(dn=cn.shadowRoot)==null?void 0:dn.activeElement)!=null;){var cn,dn;ln=ln.shadowRoot.activeElement}return ln}function contains(sn,ln){if(!sn||!ln)return!1;const cn=ln.getRootNode&&ln.getRootNode();if(sn.contains(ln))return!0;if(cn&&isShadowRoot(cn)){let dn=ln;do{if(dn&&sn===dn)return!0;dn=dn.parentNode||dn.host}while(dn)}return!1}function getChildren(sn,ln){let cn=sn.filter(pn=>{var vn;return pn.parentId===ln&&((vn=pn.context)==null?void 0:vn.open)})||[],dn=cn;for(;dn.length;)dn=sn.filter(pn=>{var vn;return(vn=dn)==null?void 0:vn.some(kn=>{var Sn;return pn.parentId===kn.id&&((Sn=pn.context)==null?void 0:Sn.open)})})||[],cn=cn.concat(dn);return cn}function getTarget(sn){return"composedPath"in sn?sn.composedPath()[0]:sn.target}const useInsertionEffect=React$1["useInsertionEffect".toString()],useSafeInsertionEffect=useInsertionEffect||(sn=>sn());function useEvent(sn){const ln=reactExports.useRef(()=>{});return useSafeInsertionEffect(()=>{ln.current=sn}),reactExports.useCallback(function(){for(var cn=arguments.length,dn=new Array(cn),pn=0;pn<cn;pn++)dn[pn]=arguments[pn];return ln.current==null?void 0:ln.current(...dn)},[])}function isEventTargetWithin(sn,ln){if(ln==null)return!1;if("composedPath"in sn)return sn.composedPath().includes(ln);const cn=sn;return cn.target!=null&&ln.contains(cn.target)}const bubbleHandlerKeys={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},captureHandlerKeys={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},normalizeBubblesProp=function(sn){var ln,cn;return sn===void 0&&(sn=!0),{escapeKeyBubbles:typeof sn=="boolean"?sn:(ln=sn.escapeKey)!=null?ln:!0,outsidePressBubbles:typeof sn=="boolean"?sn:(cn=sn.outsidePress)!=null?cn:!0}},useDismiss=function(sn,ln){let{open:cn,onOpenChange:dn,events:pn,nodeId:vn,elements:{reference:kn,domReference:Sn,floating:wn},dataRef:Pn}=sn,{enabled:Nn=!0,escapeKey:Ln=!0,outsidePress:Fn=!0,outsidePressEvent:zn="pointerdown",referencePress:Dn=!1,referencePressEvent:Kn="pointerdown",ancestorScroll:qn=!1,bubbles:Zn=!0}=ln===void 0?{}:ln;const Yn=useFloatingTree(),Jn=useFloatingParentNodeId()!=null,rs=useEvent(typeof Fn=="function"?Fn:()=>!1),ss=typeof Fn=="function"?rs:Fn,as=reactExports.useRef(!1),{escapeKeyBubbles:ds,outsidePressBubbles:Es}=normalizeBubblesProp(Zn);return reactExports.useEffect(()=>{if(!cn||!Nn)return;Pn.current.__escapeKeyBubbles=ds,Pn.current.__outsidePressBubbles=Es;function Ss(ys){if(ys.key==="Escape"){const _s=Yn?getChildren(Yn.nodesRef.current,vn):[];if(_s.length>0){let js=!0;if(_s.forEach(bs=>{var ks;if((ks=bs.context)!=null&&ks.open&&!bs.context.dataRef.current.__escapeKeyBubbles){js=!1;return}}),!js)return}pn.emit("dismiss",{type:"escapeKey",data:{returnFocus:{preventScroll:!1}}}),dn(!1)}}function Qn(ys){const _s=as.current;if(as.current=!1,_s||typeof ss=="function"&&!ss(ys))return;const js=getTarget(ys);if(isHTMLElement(js)&&wn){const xs=wn.ownerDocument.defaultView||window,Ks=js.scrollWidth>js.clientWidth,Vs=js.scrollHeight>js.clientHeight;let Js=Vs&&ys.offsetX>js.clientWidth;if(Vs&&xs.getComputedStyle(js).direction==="rtl"&&(Js=ys.offsetX<=js.offsetWidth-js.clientWidth),Js||Ks&&ys.offsetY>js.clientHeight)return}const bs=Yn&&getChildren(Yn.nodesRef.current,vn).some(xs=>{var Ks;return isEventTargetWithin(ys,(Ks=xs.context)==null?void 0:Ks.elements.floating)});if(isEventTargetWithin(ys,wn)||isEventTargetWithin(ys,Sn)||bs)return;const ks=Yn?getChildren(Yn.nodesRef.current,vn):[];if(ks.length>0){let xs=!0;if(ks.forEach(Ks=>{var Vs;if((Vs=Ks.context)!=null&&Vs.open&&!Ks.context.dataRef.current.__outsidePressBubbles){xs=!1;return}}),!xs)return}pn.emit("dismiss",{type:"outsidePress",data:{returnFocus:Jn?{preventScroll:!0}:isVirtualClick(ys)||isVirtualPointerEvent(ys)}}),dn(!1)}function ms(){dn(!1)}const Ts=getDocument(wn);Ln&&Ts.addEventListener("keydown",Ss),ss&&Ts.addEventListener(zn,Qn);let Rs=[];return qn&&(isElement$1(Sn)&&(Rs=W$8(Sn)),isElement$1(wn)&&(Rs=Rs.concat(W$8(wn))),!isElement$1(kn)&&kn&&kn.contextElement&&(Rs=Rs.concat(W$8(kn.contextElement)))),Rs=Rs.filter(ys=>{var _s;return ys!==((_s=Ts.defaultView)==null?void 0:_s.visualViewport)}),Rs.forEach(ys=>{ys.addEventListener("scroll",ms,{passive:!0})}),()=>{Ln&&Ts.removeEventListener("keydown",Ss),ss&&Ts.removeEventListener(zn,Qn),Rs.forEach(ys=>{ys.removeEventListener("scroll",ms)})}},[Pn,wn,Sn,kn,Ln,ss,zn,pn,Yn,vn,cn,dn,qn,Nn,ds,Es,Jn]),reactExports.useEffect(()=>{as.current=!1},[ss,zn]),reactExports.useMemo(()=>Nn?{reference:{[bubbleHandlerKeys[Kn]]:()=>{Dn&&(pn.emit("dismiss",{type:"referencePress",data:{returnFocus:!1}}),dn(!1))}},floating:{[captureHandlerKeys[zn]]:()=>{as.current=!0}}}:{},[Nn,pn,Dn,zn,Kn,dn])},useFocus=function(sn,ln){let{open:cn,onOpenChange:dn,dataRef:pn,events:vn,refs:kn,elements:{floating:Sn,domReference:wn}}=sn,{enabled:Pn=!0,keyboardOnly:Nn=!0}=ln===void 0?{}:ln;const Ln=reactExports.useRef(""),Fn=reactExports.useRef(!1),zn=reactExports.useRef();return reactExports.useEffect(()=>{if(!Pn)return;const Kn=getDocument(Sn).defaultView||window;function qn(){!cn&&isHTMLElement(wn)&&wn===activeElement$1(getDocument(wn))&&(Fn.current=!0)}return Kn.addEventListener("blur",qn),()=>{Kn.removeEventListener("blur",qn)}},[Sn,wn,cn,Pn]),reactExports.useEffect(()=>{if(!Pn)return;function Dn(Kn){(Kn.type==="referencePress"||Kn.type==="escapeKey")&&(Fn.current=!0)}return vn.on("dismiss",Dn),()=>{vn.off("dismiss",Dn)}},[vn,Pn]),reactExports.useEffect(()=>()=>{clearTimeout(zn.current)},[]),reactExports.useMemo(()=>Pn?{reference:{onPointerDown(Dn){let{pointerType:Kn}=Dn;Ln.current=Kn,Fn.current=!!(Kn&&Nn)},onMouseLeave(){Fn.current=!1},onFocus(Dn){var Kn;Fn.current||Dn.type==="focus"&&((Kn=pn.current.openEvent)==null?void 0:Kn.type)==="mousedown"&&pn.current.openEvent&&isEventTargetWithin(pn.current.openEvent,wn)||(pn.current.openEvent=Dn.nativeEvent,dn(!0))},onBlur(Dn){Fn.current=!1;const Kn=Dn.relatedTarget,qn=isElement$1(Kn)&&Kn.hasAttribute("data-floating-ui-focus-guard")&&Kn.getAttribute("data-type")==="outside";zn.current=setTimeout(()=>{contains(kn.floating.current,Kn)||contains(wn,Kn)||qn||dn(!1)})}}}:{},[Pn,Nn,wn,kn,pn,dn])},useRole=function(sn,ln){let{open:cn}=sn,{enabled:dn=!0,role:pn="dialog"}=ln===void 0?{}:ln;const vn=useId(),kn=useId();return reactExports.useMemo(()=>{const Sn={id:vn,role:pn};return dn?pn==="tooltip"?{reference:{"aria-describedby":cn?vn:void 0},floating:Sn}:{reference:{"aria-expanded":cn?"true":"false","aria-haspopup":pn==="alertdialog"?"dialog":pn,"aria-controls":cn?vn:void 0,...pn==="listbox"&&{role:"combobox"},...pn==="menu"&&{id:kn}},floating:{...Sn,...pn==="menu"&&{"aria-labelledby":kn}}}:{}},[dn,pn,cn,vn,kn])};function useFloating(sn){sn===void 0&&(sn={});const{open:ln=!1,onOpenChange:cn,nodeId:dn}=sn,pn=useFloating$1(sn),vn=useFloatingTree(),kn=reactExports.useRef(null),Sn=reactExports.useRef({}),wn=reactExports.useState(()=>createPubSub())[0],[Pn,Nn]=reactExports.useState(null),Ln=reactExports.useCallback(Zn=>{const Yn=isElement$1(Zn)?{getBoundingClientRect:()=>Zn.getBoundingClientRect(),contextElement:Zn}:Zn;pn.refs.setReference(Yn)},[pn.refs]),Fn=reactExports.useCallback(Zn=>{(isElement$1(Zn)||Zn===null)&&(kn.current=Zn,Nn(Zn)),(isElement$1(pn.refs.reference.current)||pn.refs.reference.current===null||Zn!==null&&!isElement$1(Zn))&&pn.refs.setReference(Zn)},[pn.refs]),zn=reactExports.useMemo(()=>({...pn.refs,setReference:Fn,setPositionReference:Ln,domReference:kn}),[pn.refs,Fn,Ln]),Dn=reactExports.useMemo(()=>({...pn.elements,domReference:Pn}),[pn.elements,Pn]),Kn=useEvent(cn),qn=reactExports.useMemo(()=>({...pn,refs:zn,elements:Dn,dataRef:Sn,nodeId:dn,events:wn,open:ln,onOpenChange:Kn}),[pn,dn,wn,ln,Kn,zn,Dn]);return index$3(()=>{const Zn=vn==null?void 0:vn.nodesRef.current.find(Yn=>Yn.id===dn);Zn&&(Zn.context=qn)}),reactExports.useMemo(()=>({...pn,context:qn,refs:zn,reference:Fn,positionReference:Ln}),[pn,zn,qn,Fn,Ln])}function mergeProps(sn,ln,cn){const dn=new Map;return{...cn==="floating"&&{tabIndex:-1},...sn,...ln.map(pn=>pn?pn[cn]:null).concat(sn).reduce((pn,vn)=>(vn&&Object.entries(vn).forEach(kn=>{let[Sn,wn]=kn;if(Sn.indexOf("on")===0){if(dn.has(Sn)||dn.set(Sn,[]),typeof wn=="function"){var Pn;(Pn=dn.get(Sn))==null||Pn.push(wn),pn[Sn]=function(){for(var Nn,Ln=arguments.length,Fn=new Array(Ln),zn=0;zn<Ln;zn++)Fn[zn]=arguments[zn];(Nn=dn.get(Sn))==null||Nn.forEach(Dn=>Dn(...Fn))}}}else pn[Sn]=wn}),pn),{})}}const useInteractions=function(sn){sn===void 0&&(sn=[]);const ln=sn,cn=reactExports.useCallback(vn=>mergeProps(vn,sn,"reference"),ln),dn=reactExports.useCallback(vn=>mergeProps(vn,sn,"floating"),ln),pn=reactExports.useCallback(vn=>mergeProps(vn,sn,"item"),sn.map(vn=>vn==null?void 0:vn.item));return reactExports.useMemo(()=>({getReferenceProps:cn,getFloatingProps:dn,getItemProps:pn}),[cn,dn,pn])};function useFloatingAutoUpdate({opened:sn,floating:ln,position:cn,positionDependencies:dn}){const[pn,vn]=reactExports.useState(0);reactExports.useEffect(()=>{if(ln.refs.reference.current&&ln.refs.floating.current)return z$8(ln.refs.reference.current,ln.refs.floating.current,ln.update)},[ln.refs.reference.current,ln.refs.floating.current,sn,pn,cn]),useDidUpdate(()=>{ln.update()},dn),useDidUpdate(()=>{vn(kn=>kn+1)},[sn])}function getPopoverMiddlewares(sn){const ln=[L$9(sn.offset)];return sn.middlewares.shift&&ln.push(O$9({limiter:B$a()})),sn.middlewares.flip&&ln.push(A$a()),sn.middlewares.inline&&ln.push(D$a()),ln.push(arrow({element:sn.arrowRef,padding:sn.arrowOffset})),ln}function usePopover(sn){const[ln,cn]=useUncontrolled({value:sn.opened,defaultValue:sn.defaultOpened,finalValue:!1,onChange:sn.onChange}),dn=()=>{var kn;(kn=sn.onClose)==null||kn.call(sn),cn(!1)},pn=()=>{var kn,Sn;ln?((kn=sn.onClose)==null||kn.call(sn),cn(!1)):((Sn=sn.onOpen)==null||Sn.call(sn),cn(!0))},vn=useFloating({placement:sn.position,middleware:[...getPopoverMiddlewares(sn),...sn.width==="target"?[C$9({apply({rects:kn}){var Sn,wn;Object.assign((wn=(Sn=vn.refs.floating.current)==null?void 0:Sn.style)!=null?wn:{},{width:`${kn.reference.width}px`})}})]:[]]});return useFloatingAutoUpdate({opened:sn.opened,position:sn.position,positionDependencies:sn.positionDependencies,floating:vn}),useDidUpdate(()=>{var kn;(kn=sn.onPositionChange)==null||kn.call(sn,vn.placement)},[vn.placement]),useDidUpdate(()=>{var kn,Sn;sn.opened?(Sn=sn.onOpen)==null||Sn.call(sn):(kn=sn.onClose)==null||kn.call(sn)},[sn.opened]),{floating:vn,controlled:typeof sn.opened=="boolean",opened:ln,onClose:dn,onToggle:pn}}const POPOVER_ERRORS={context:"Popover component was not found in the tree",children:"Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported"},[PopoverContextProvider,usePopoverContext]=createSafeContext(POPOVER_ERRORS.context);var __defProp$11=Object.defineProperty,__defProps$w=Object.defineProperties,__getOwnPropDescs$w=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$12=Object.getOwnPropertySymbols,__hasOwnProp$12=Object.prototype.hasOwnProperty,__propIsEnum$12=Object.prototype.propertyIsEnumerable,__defNormalProp$11=(sn,ln,cn)=>ln in sn?__defProp$11(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$11=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$12.call(ln,cn)&&__defNormalProp$11(sn,cn,ln[cn]);if(__getOwnPropSymbols$12)for(var cn of __getOwnPropSymbols$12(ln))__propIsEnum$12.call(ln,cn)&&__defNormalProp$11(sn,cn,ln[cn]);return sn},__spreadProps$w=(sn,ln)=>__defProps$w(sn,__getOwnPropDescs$w(ln)),__objRest$L=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$12.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$12)for(var dn of __getOwnPropSymbols$12(sn))ln.indexOf(dn)<0&&__propIsEnum$12.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$G={refProp:"ref",popupType:"dialog"},PopoverTarget=reactExports.forwardRef((sn,ln)=>{const cn=useComponentDefaultProps("PopoverTarget",defaultProps$G,sn),{children:dn,refProp:pn,popupType:vn}=cn,kn=__objRest$L(cn,["children","refProp","popupType"]);if(!isElement$2(dn))throw new Error(POPOVER_ERRORS.children);const Sn=kn,wn=usePopoverContext(),Pn=useMergedRef(wn.reference,dn.ref,ln),Nn=wn.withRoles?{"aria-haspopup":vn,"aria-expanded":wn.opened,"aria-controls":wn.getDropdownId(),id:wn.getTargetId()}:{};return reactExports.cloneElement(dn,__spreadValues$11(__spreadProps$w(__spreadValues$11(__spreadValues$11(__spreadValues$11({},Sn),Nn),wn.targetProps),{className:clsx(wn.targetProps.className,Sn.className,dn.props.className),[pn]:Pn}),wn.controlled?null:{onClick:wn.onToggle}))});PopoverTarget.displayName="@mantine/core/PopoverTarget";var useStyles$18=createStyles((sn,{radius:ln,shadow:cn})=>({dropdown:{position:"absolute",backgroundColor:sn.white,background:sn.colorScheme==="dark"?sn.colors.dark[6]:sn.white,border:`${rem(1)} solid ${sn.colorScheme==="dark"?sn.colors.dark[4]:sn.colors.gray[2]}`,padding:`${sn.spacing.sm} ${sn.spacing.md}`,boxShadow:sn.shadows[cn]||cn||"none",borderRadius:sn.fn.radius(ln),"&:focus":{outline:0}},arrow:{backgroundColor:"inherit",border:`${rem(1)} solid ${sn.colorScheme==="dark"?sn.colors.dark[4]:sn.colors.gray[2]}`,zIndex:1}}));const useStyles$19=useStyles$18;var __defProp$10=Object.defineProperty,__getOwnPropSymbols$11=Object.getOwnPropertySymbols,__hasOwnProp$11=Object.prototype.hasOwnProperty,__propIsEnum$11=Object.prototype.propertyIsEnumerable,__defNormalProp$10=(sn,ln,cn)=>ln in sn?__defProp$10(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$10=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$11.call(ln,cn)&&__defNormalProp$10(sn,cn,ln[cn]);if(__getOwnPropSymbols$11)for(var cn of __getOwnPropSymbols$11(ln))__propIsEnum$11.call(ln,cn)&&__defNormalProp$10(sn,cn,ln[cn]);return sn};const transitionStatuses={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function getTransitionStyles({transition:sn,state:ln,duration:cn,timingFunction:dn}){const pn={transitionDuration:`${cn}ms`,transitionTimingFunction:dn};return typeof sn=="string"?sn in transitions?__spreadValues$10(__spreadValues$10(__spreadValues$10({transitionProperty:transitions[sn].transitionProperty},pn),transitions[sn].common),transitions[sn][transitionStatuses[ln]]):null:__spreadValues$10(__spreadValues$10(__spreadValues$10({transitionProperty:sn.transitionProperty},pn),sn.common),sn[transitionStatuses[ln]])}function useTransition({duration:sn,exitDuration:ln,timingFunction:cn,mounted:dn,onEnter:pn,onExit:vn,onEntered:kn,onExited:Sn}){const wn=useMantineTheme(),Pn=useReducedMotion(),Nn=wn.respectReducedMotion?Pn:!1,[Ln,Fn]=reactExports.useState(Nn?0:sn),[zn,Dn]=reactExports.useState(dn?"entered":"exited"),Kn=reactExports.useRef(-1),qn=Zn=>{const Yn=Zn?pn:vn,Jn=Zn?kn:Sn;Dn(Zn?"pre-entering":"pre-exiting"),window.clearTimeout(Kn.current);const rs=Nn?0:Zn?sn:ln;if(Fn(rs),rs===0)typeof Yn=="function"&&Yn(),typeof Jn=="function"&&Jn(),Dn(Zn?"entered":"exited");else{const ss=window.setTimeout(()=>{typeof Yn=="function"&&Yn(),Dn(Zn?"entering":"exiting")},10);Kn.current=window.setTimeout(()=>{window.clearTimeout(ss),typeof Jn=="function"&&Jn(),Dn(Zn?"entered":"exited")},rs)}};return useDidUpdate(()=>{qn(dn)},[dn]),reactExports.useEffect(()=>()=>window.clearTimeout(Kn.current),[]),{transitionDuration:Ln,transitionStatus:zn,transitionTimingFunction:cn||wn.transitionTimingFunction}}function Transition$2({keepMounted:sn,transition:ln,duration:cn=250,exitDuration:dn=cn,mounted:pn,children:vn,timingFunction:kn,onExit:Sn,onEntered:wn,onEnter:Pn,onExited:Nn}){const{transitionDuration:Ln,transitionStatus:Fn,transitionTimingFunction:zn}=useTransition({mounted:pn,exitDuration:dn,duration:cn,timingFunction:kn,onExit:Sn,onEntered:wn,onEnter:Pn,onExited:Nn});return Ln===0?pn?jsx$1(Fragment$1,{children:vn({})}):sn?vn({display:"none"}):null:Fn==="exited"?sn?vn({display:"none"}):null:jsx$1(Fragment$1,{children:vn(getTransitionStyles({transition:ln,duration:Ln,state:Fn,timingFunction:zn}))})}Transition$2.displayName="@mantine/core/Transition";function FocusTrap({children:sn,active:ln=!0,refProp:cn="ref"}){const dn=useFocusTrap(ln),pn=useMergedRef(dn,sn==null?void 0:sn.ref);return isElement$2(sn)?reactExports.cloneElement(sn,{[cn]:pn}):sn}FocusTrap.displayName="@mantine/core/FocusTrap";var __defProp$$=Object.defineProperty,__defProps$v=Object.defineProperties,__getOwnPropDescs$v=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$10=Object.getOwnPropertySymbols,__hasOwnProp$10=Object.prototype.hasOwnProperty,__propIsEnum$10=Object.prototype.propertyIsEnumerable,__defNormalProp$$=(sn,ln,cn)=>ln in sn?__defProp$$(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$$=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$10.call(ln,cn)&&__defNormalProp$$(sn,cn,ln[cn]);if(__getOwnPropSymbols$10)for(var cn of __getOwnPropSymbols$10(ln))__propIsEnum$10.call(ln,cn)&&__defNormalProp$$(sn,cn,ln[cn]);return sn},__spreadProps$v=(sn,ln)=>__defProps$v(sn,__getOwnPropDescs$v(ln));function horizontalSide(sn,ln,cn,dn){return sn==="center"||dn==="center"?{top:ln}:sn==="end"?{bottom:cn}:sn==="start"?{top:cn}:{}}function verticalSide(sn,ln,cn,dn,pn){return sn==="center"||dn==="center"?{left:ln}:sn==="end"?{[pn==="ltr"?"right":"left"]:cn}:sn==="start"?{[pn==="ltr"?"left":"right"]:cn}:{}}const radiusByFloatingSide={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function getArrowPositionStyles({position:sn,arrowSize:ln,arrowOffset:cn,arrowRadius:dn,arrowPosition:pn,arrowX:vn,arrowY:kn,dir:Sn}){const[wn,Pn="center"]=sn.split("-"),Nn={width:rem(ln),height:rem(ln),transform:"rotate(45deg)",position:"absolute",[radiusByFloatingSide[wn]]:rem(dn)},Ln=rem(-ln/2);return wn==="left"?__spreadProps$v(__spreadValues$$(__spreadValues$$({},Nn),horizontalSide(Pn,kn,cn,pn)),{right:Ln,borderLeftColor:"transparent",borderBottomColor:"transparent"}):wn==="right"?__spreadProps$v(__spreadValues$$(__spreadValues$$({},Nn),horizontalSide(Pn,kn,cn,pn)),{left:Ln,borderRightColor:"transparent",borderTopColor:"transparent"}):wn==="top"?__spreadProps$v(__spreadValues$$(__spreadValues$$({},Nn),verticalSide(Pn,vn,cn,pn,Sn)),{bottom:Ln,borderTopColor:"transparent",borderLeftColor:"transparent"}):wn==="bottom"?__spreadProps$v(__spreadValues$$(__spreadValues$$({},Nn),verticalSide(Pn,vn,cn,pn,Sn)),{top:Ln,borderBottomColor:"transparent",borderRightColor:"transparent"}):{}}var __defProp$_=Object.defineProperty,__defProps$u=Object.defineProperties,__getOwnPropDescs$u=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$$=Object.getOwnPropertySymbols,__hasOwnProp$$=Object.prototype.hasOwnProperty,__propIsEnum$$=Object.prototype.propertyIsEnumerable,__defNormalProp$_=(sn,ln,cn)=>ln in sn?__defProp$_(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$_=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$$.call(ln,cn)&&__defNormalProp$_(sn,cn,ln[cn]);if(__getOwnPropSymbols$$)for(var cn of __getOwnPropSymbols$$(ln))__propIsEnum$$.call(ln,cn)&&__defNormalProp$_(sn,cn,ln[cn]);return sn},__spreadProps$u=(sn,ln)=>__defProps$u(sn,__getOwnPropDescs$u(ln)),__objRest$K=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$$.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$$)for(var dn of __getOwnPropSymbols$$(sn))ln.indexOf(dn)<0&&__propIsEnum$$.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const FloatingArrow=reactExports.forwardRef((sn,ln)=>{var cn=sn,{position:dn,arrowSize:pn,arrowOffset:vn,arrowRadius:kn,arrowPosition:Sn,visible:wn,arrowX:Pn,arrowY:Nn}=cn,Ln=__objRest$K(cn,["position","arrowSize","arrowOffset","arrowRadius","arrowPosition","visible","arrowX","arrowY"]);const Fn=useMantineTheme();return wn?jsx$1("div",{...__spreadProps$u(__spreadValues$_({},Ln),{ref:ln,style:getArrowPositionStyles({position:dn,arrowSize:pn,arrowOffset:vn,arrowRadius:kn,arrowPosition:Sn,dir:Fn.dir,arrowX:Pn,arrowY:Nn})})}):null});FloatingArrow.displayName="@mantine/core/FloatingArrow";var __defProp$Z=Object.defineProperty,__defProps$t=Object.defineProperties,__getOwnPropDescs$t=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$_=Object.getOwnPropertySymbols,__hasOwnProp$_=Object.prototype.hasOwnProperty,__propIsEnum$_=Object.prototype.propertyIsEnumerable,__defNormalProp$Z=(sn,ln,cn)=>ln in sn?__defProp$Z(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$Z=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$_.call(ln,cn)&&__defNormalProp$Z(sn,cn,ln[cn]);if(__getOwnPropSymbols$_)for(var cn of __getOwnPropSymbols$_(ln))__propIsEnum$_.call(ln,cn)&&__defNormalProp$Z(sn,cn,ln[cn]);return sn},__spreadProps$t=(sn,ln)=>__defProps$t(sn,__getOwnPropDescs$t(ln)),__objRest$J=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$_.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$_)for(var dn of __getOwnPropSymbols$_(sn))ln.indexOf(dn)<0&&__propIsEnum$_.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$F={};function PopoverDropdown(sn){var ln;const cn=useComponentDefaultProps("PopoverDropdown",defaultProps$F,sn),{style:dn,className:pn,children:vn,onKeyDownCapture:kn}=cn,Sn=__objRest$J(cn,["style","className","children","onKeyDownCapture"]),wn=usePopoverContext(),{classes:Pn,cx:Nn}=useStyles$19({radius:wn.radius,shadow:wn.shadow},{name:wn.__staticSelector,classNames:wn.classNames,styles:wn.styles,unstyled:wn.unstyled,variant:wn.variant}),Ln=useFocusReturn({opened:wn.opened,shouldReturnFocus:wn.returnFocus}),Fn=wn.withRoles?{"aria-labelledby":wn.getTargetId(),id:wn.getDropdownId(),role:"dialog"}:{};return wn.disabled?null:jsx$1(OptionalPortal,{...__spreadProps$t(__spreadValues$Z({},wn.portalProps),{withinPortal:wn.withinPortal}),children:jsx$1(Transition$2,{...__spreadProps$t(__spreadValues$Z({mounted:wn.opened},wn.transitionProps),{transition:wn.transitionProps.transition||"fade",duration:(ln=wn.transitionProps.duration)!=null?ln:150,keepMounted:wn.keepMounted,exitDuration:typeof wn.transitionProps.exitDuration=="number"?wn.transitionProps.exitDuration:wn.transitionProps.duration}),children:zn=>{var Dn,Kn;return jsx$1(FocusTrap,{active:wn.trapFocus,children:jsxs$1(Box,{...__spreadValues$Z(__spreadProps$t(__spreadValues$Z({},Fn),{tabIndex:-1,ref:wn.floating,style:__spreadProps$t(__spreadValues$Z(__spreadValues$Z({},dn),zn),{zIndex:wn.zIndex,top:(Dn=wn.y)!=null?Dn:0,left:(Kn=wn.x)!=null?Kn:0,width:wn.width==="target"?void 0:rem(wn.width)}),className:Nn(Pn.dropdown,pn),onKeyDownCapture:closeOnEscape(wn.onClose,{active:wn.closeOnEscape,onTrigger:Ln,onKeyDown:kn}),"data-position":wn.placement}),Sn),children:[vn,jsx$1(FloatingArrow,{ref:wn.arrowRef,arrowX:wn.arrowX,arrowY:wn.arrowY,visible:wn.withArrow,position:wn.placement,arrowSize:wn.arrowSize,arrowRadius:wn.arrowRadius,arrowOffset:wn.arrowOffset,arrowPosition:wn.arrowPosition,className:Pn.arrow})]})})}})})}PopoverDropdown.displayName="@mantine/core/PopoverDropdown";function getFloatingPosition(sn,ln){if(sn==="rtl"&&(ln.includes("right")||ln.includes("left"))){const[cn,dn]=ln.split("-"),pn=cn==="right"?"left":"right";return dn===void 0?pn:`${pn}-${dn}`}return ln}var __getOwnPropSymbols$Z=Object.getOwnPropertySymbols,__hasOwnProp$Z=Object.prototype.hasOwnProperty,__propIsEnum$Z=Object.prototype.propertyIsEnumerable,__objRest$I=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$Z.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$Z)for(var dn of __getOwnPropSymbols$Z(sn))ln.indexOf(dn)<0&&__propIsEnum$Z.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$E={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!1,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:getDefaultZIndex("popover"),__staticSelector:"Popover",width:"max-content"};function Popover(sn){var ln,cn,dn,pn,vn,kn;const Sn=reactExports.useRef(null),wn=useComponentDefaultProps("Popover",defaultProps$E,sn),{children:Pn,position:Nn,offset:Ln,onPositionChange:Fn,positionDependencies:zn,opened:Dn,transitionProps:Kn,width:qn,middlewares:Zn,withArrow:Yn,arrowSize:Jn,arrowOffset:rs,arrowRadius:ss,arrowPosition:as,unstyled:ds,classNames:Es,styles:Ss,closeOnClickOutside:Qn,withinPortal:ms,portalProps:Ts,closeOnEscape:Rs,clickOutsideEvents:ys,trapFocus:_s,onClose:js,onOpen:bs,onChange:ks,zIndex:xs,radius:Ks,shadow:Vs,id:Js,defaultOpened:ru,__staticSelector:hs,withRoles:lu,disabled:_u,returnFocus:yu,variant:Xu,keepMounted:Du}=wn,Fl=__objRest$I(wn,["children","position","offset","onPositionChange","positionDependencies","opened","transitionProps","width","middlewares","withArrow","arrowSize","arrowOffset","arrowRadius","arrowPosition","unstyled","classNames","styles","closeOnClickOutside","withinPortal","portalProps","closeOnEscape","clickOutsideEvents","trapFocus","onClose","onOpen","onChange","zIndex","radius","shadow","id","defaultOpened","__staticSelector","withRoles","disabled","returnFocus","variant","keepMounted"]),[Vp,Ys]=reactExports.useState(null),[vu,Wl]=reactExports.useState(null),lp=useId$1(Js),am=useMantineTheme(),fl=usePopover({middlewares:Zn,width:qn,position:getFloatingPosition(am.dir,Nn),offset:typeof Ln=="number"?Ln+(Yn?Jn/2:0):Ln,arrowRef:Sn,arrowOffset:rs,onPositionChange:Fn,positionDependencies:zn,opened:Dn,defaultOpened:ru,onChange:ks,onOpen:bs,onClose:js});useClickOutside(()=>fl.opened&&Qn&&fl.onClose(),ys,[Vp,vu]);const Tu=reactExports.useCallback(wp=>{Ys(wp),fl.floating.reference(wp)},[fl.floating.reference]),cp=reactExports.useCallback(wp=>{Wl(wp),fl.floating.floating(wp)},[fl.floating.floating]);return jsx$1(PopoverContextProvider,{value:{returnFocus:yu,disabled:_u,controlled:fl.controlled,reference:Tu,floating:cp,x:fl.floating.x,y:fl.floating.y,arrowX:(dn=(cn=(ln=fl.floating)==null?void 0:ln.middlewareData)==null?void 0:cn.arrow)==null?void 0:dn.x,arrowY:(kn=(vn=(pn=fl.floating)==null?void 0:pn.middlewareData)==null?void 0:vn.arrow)==null?void 0:kn.y,opened:fl.opened,arrowRef:Sn,transitionProps:Kn,width:qn,withArrow:Yn,arrowSize:Jn,arrowOffset:rs,arrowRadius:ss,arrowPosition:as,placement:fl.floating.placement,trapFocus:_s,withinPortal:ms,portalProps:Ts,zIndex:xs,radius:Ks,shadow:Vs,closeOnEscape:Rs,onClose:fl.onClose,onToggle:fl.onToggle,getTargetId:()=>`${lp}-target`,getDropdownId:()=>`${lp}-dropdown`,withRoles:lu,targetProps:Fl,__staticSelector:hs,classNames:Es,styles:Ss,unstyled:ds,variant:Xu,keepMounted:Du},children:Pn})}Popover.Target=PopoverTarget;Popover.Dropdown=PopoverDropdown;Popover.displayName="@mantine/core/Popover";var useStyles$16=createStyles((sn,ln,{size:cn})=>({label:{display:"inline-block",fontSize:getSize({size:cn,sizes:sn.fontSizes}),fontWeight:500,color:sn.colorScheme==="dark"?sn.colors.dark[0]:sn.colors.gray[9],wordBreak:"break-word",cursor:"default",WebkitTapHighlightColor:"transparent"},required:{color:sn.fn.variant({variant:"filled",color:"red"}).background}}));const useStyles$17=useStyles$16;var __defProp$Y=Object.defineProperty,__getOwnPropSymbols$Y=Object.getOwnPropertySymbols,__hasOwnProp$Y=Object.prototype.hasOwnProperty,__propIsEnum$Y=Object.prototype.propertyIsEnumerable,__defNormalProp$Y=(sn,ln,cn)=>ln in sn?__defProp$Y(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$Y=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$Y.call(ln,cn)&&__defNormalProp$Y(sn,cn,ln[cn]);if(__getOwnPropSymbols$Y)for(var cn of __getOwnPropSymbols$Y(ln))__propIsEnum$Y.call(ln,cn)&&__defNormalProp$Y(sn,cn,ln[cn]);return sn},__objRest$H=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$Y.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$Y)for(var dn of __getOwnPropSymbols$Y(sn))ln.indexOf(dn)<0&&__propIsEnum$Y.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$D={labelElement:"label",size:"sm"},InputLabel=reactExports.forwardRef((sn,ln)=>{const cn=useComponentDefaultProps("InputLabel",defaultProps$D,sn),{labelElement:dn,children:pn,required:vn,size:kn,classNames:Sn,styles:wn,unstyled:Pn,className:Nn,htmlFor:Ln,__staticSelector:Fn,variant:zn,onMouseDown:Dn}=cn,Kn=__objRest$H(cn,["labelElement","children","required","size","classNames","styles","unstyled","className","htmlFor","__staticSelector","variant","onMouseDown"]),{classes:qn,cx:Zn}=useStyles$17(null,{name:["InputWrapper",Fn],classNames:Sn,styles:wn,unstyled:Pn,variant:zn,size:kn});return jsxs$1(Box,{...__spreadValues$Y({component:dn,ref:ln,className:Zn(qn.label,Nn),htmlFor:dn==="label"?Ln:void 0,onMouseDown:Yn=>{Dn==null||Dn(Yn),!Yn.defaultPrevented&&Yn.detail>1&&Yn.preventDefault()}},Kn),children:[pn,vn&&jsx$1("span",{className:qn.required,"aria-hidden":!0,children:" *"})]})});InputLabel.displayName="@mantine/core/InputLabel";var useStyles$14=createStyles((sn,ln,{size:cn})=>({error:{wordBreak:"break-word",color:sn.fn.variant({variant:"filled",color:"red"}).background,fontSize:`calc(${getSize({size:cn,sizes:sn.fontSizes})} - ${rem(2)})`,lineHeight:1.2,display:"block"}}));const useStyles$15=useStyles$14;var __defProp$X=Object.defineProperty,__getOwnPropSymbols$X=Object.getOwnPropertySymbols,__hasOwnProp$X=Object.prototype.hasOwnProperty,__propIsEnum$X=Object.prototype.propertyIsEnumerable,__defNormalProp$X=(sn,ln,cn)=>ln in sn?__defProp$X(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$X=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$X.call(ln,cn)&&__defNormalProp$X(sn,cn,ln[cn]);if(__getOwnPropSymbols$X)for(var cn of __getOwnPropSymbols$X(ln))__propIsEnum$X.call(ln,cn)&&__defNormalProp$X(sn,cn,ln[cn]);return sn},__objRest$G=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$X.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$X)for(var dn of __getOwnPropSymbols$X(sn))ln.indexOf(dn)<0&&__propIsEnum$X.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$C={size:"sm"},InputError=reactExports.forwardRef((sn,ln)=>{const cn=useComponentDefaultProps("InputError",defaultProps$C,sn),{children:dn,className:pn,classNames:vn,styles:kn,unstyled:Sn,size:wn,__staticSelector:Pn,variant:Nn}=cn,Ln=__objRest$G(cn,["children","className","classNames","styles","unstyled","size","__staticSelector","variant"]),{classes:Fn,cx:zn}=useStyles$15(null,{name:["InputWrapper",Pn],classNames:vn,styles:kn,unstyled:Sn,variant:Nn,size:wn});return jsx$1(Text,{...__spreadValues$X({className:zn(Fn.error,pn),ref:ln},Ln),children:dn})});InputError.displayName="@mantine/core/InputError";var useStyles$12=createStyles((sn,ln,{size:cn})=>({description:{wordBreak:"break-word",color:sn.colorScheme==="dark"?sn.colors.dark[2]:sn.colors.gray[6],fontSize:`calc(${getSize({size:cn,sizes:sn.fontSizes})} - ${rem(2)})`,lineHeight:1.2,display:"block"}}));const useStyles$13=useStyles$12;var __defProp$W=Object.defineProperty,__getOwnPropSymbols$W=Object.getOwnPropertySymbols,__hasOwnProp$W=Object.prototype.hasOwnProperty,__propIsEnum$W=Object.prototype.propertyIsEnumerable,__defNormalProp$W=(sn,ln,cn)=>ln in sn?__defProp$W(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$W=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$W.call(ln,cn)&&__defNormalProp$W(sn,cn,ln[cn]);if(__getOwnPropSymbols$W)for(var cn of __getOwnPropSymbols$W(ln))__propIsEnum$W.call(ln,cn)&&__defNormalProp$W(sn,cn,ln[cn]);return sn},__objRest$F=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$W.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$W)for(var dn of __getOwnPropSymbols$W(sn))ln.indexOf(dn)<0&&__propIsEnum$W.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$B={size:"sm"},InputDescription=reactExports.forwardRef((sn,ln)=>{const cn=useComponentDefaultProps("InputDescription",defaultProps$B,sn),{children:dn,className:pn,classNames:vn,styles:kn,unstyled:Sn,size:wn,__staticSelector:Pn,variant:Nn}=cn,Ln=__objRest$F(cn,["children","className","classNames","styles","unstyled","size","__staticSelector","variant"]),{classes:Fn,cx:zn}=useStyles$13(null,{name:["InputWrapper",Pn],classNames:vn,styles:kn,unstyled:Sn,variant:Nn,size:wn});return jsx$1(Text,{...__spreadValues$W({color:"dimmed",className:zn(Fn.description,pn),ref:ln,unstyled:Sn},Ln),children:dn})});InputDescription.displayName="@mantine/core/InputDescription";const InputWrapperContext=reactExports.createContext({offsetBottom:!1,offsetTop:!1,describedBy:void 0}),InputWrapperProvider=InputWrapperContext.Provider,useInputWrapperContext=()=>reactExports.useContext(InputWrapperContext);function getInputOffsets(sn,{hasDescription:ln,hasError:cn}){const dn=sn.findIndex(wn=>wn==="input"),pn=sn[dn-1],vn=sn[dn+1];return{offsetBottom:ln&&vn==="description"||cn&&vn==="error",offsetTop:ln&&pn==="description"||cn&&pn==="error"}}var __defProp$V=Object.defineProperty,__defProps$s=Object.defineProperties,__getOwnPropDescs$s=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$V=Object.getOwnPropertySymbols,__hasOwnProp$V=Object.prototype.hasOwnProperty,__propIsEnum$V=Object.prototype.propertyIsEnumerable,__defNormalProp$V=(sn,ln,cn)=>ln in sn?__defProp$V(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$V=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$V.call(ln,cn)&&__defNormalProp$V(sn,cn,ln[cn]);if(__getOwnPropSymbols$V)for(var cn of __getOwnPropSymbols$V(ln))__propIsEnum$V.call(ln,cn)&&__defNormalProp$V(sn,cn,ln[cn]);return sn},__spreadProps$s=(sn,ln)=>__defProps$s(sn,__getOwnPropDescs$s(ln)),useStyles$10=createStyles(sn=>({root:__spreadProps$s(__spreadValues$V({},sn.fn.fontStyles()),{lineHeight:sn.lineHeight})}));const useStyles$11=useStyles$10;var __defProp$U=Object.defineProperty,__defProps$r=Object.defineProperties,__getOwnPropDescs$r=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$U=Object.getOwnPropertySymbols,__hasOwnProp$U=Object.prototype.hasOwnProperty,__propIsEnum$U=Object.prototype.propertyIsEnumerable,__defNormalProp$U=(sn,ln,cn)=>ln in sn?__defProp$U(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$U=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$U.call(ln,cn)&&__defNormalProp$U(sn,cn,ln[cn]);if(__getOwnPropSymbols$U)for(var cn of __getOwnPropSymbols$U(ln))__propIsEnum$U.call(ln,cn)&&__defNormalProp$U(sn,cn,ln[cn]);return sn},__spreadProps$r=(sn,ln)=>__defProps$r(sn,__getOwnPropDescs$r(ln)),__objRest$E=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$U.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$U)for(var dn of __getOwnPropSymbols$U(sn))ln.indexOf(dn)<0&&__propIsEnum$U.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$A={labelElement:"label",size:"sm",inputContainer:sn=>sn,inputWrapperOrder:["label","description","input","error"]},InputWrapper=reactExports.forwardRef((sn,ln)=>{const cn=useComponentDefaultProps("InputWrapper",defaultProps$A,sn),{className:dn,label:pn,children:vn,required:kn,id:Sn,error:wn,description:Pn,labelElement:Nn,labelProps:Ln,descriptionProps:Fn,errorProps:zn,classNames:Dn,styles:Kn,size:qn,inputContainer:Zn,__staticSelector:Yn,unstyled:Jn,inputWrapperOrder:rs,withAsterisk:ss,variant:as}=cn,ds=__objRest$E(cn,["className","label","children","required","id","error","description","labelElement","labelProps","descriptionProps","errorProps","classNames","styles","size","inputContainer","__staticSelector","unstyled","inputWrapperOrder","withAsterisk","variant"]),{classes:Es,cx:Ss}=useStyles$11(null,{classNames:Dn,styles:Kn,name:["InputWrapper",Yn],unstyled:Jn,variant:as,size:qn}),Qn={classNames:Dn,styles:Kn,unstyled:Jn,size:qn,variant:as,__staticSelector:Yn},ms=typeof ss=="boolean"?ss:kn,Ts=Sn?`${Sn}-error`:zn==null?void 0:zn.id,Rs=Sn?`${Sn}-description`:Fn==null?void 0:Fn.id,_s=`${!!wn&&typeof wn!="boolean"?Ts:""} ${Pn?Rs:""}`,js=_s.trim().length>0?_s.trim():void 0,bs=pn&&jsx$1(InputLabel,{...__spreadValues$U(__spreadValues$U({key:"label",labelElement:Nn,id:Sn?`${Sn}-label`:void 0,htmlFor:Sn,required:ms},Qn),Ln),children:pn}),ks=Pn&&jsx$1(InputDescription,{...__spreadProps$r(__spreadValues$U(__spreadValues$U({key:"description"},Fn),Qn),{size:(Fn==null?void 0:Fn.size)||Qn.size,id:(Fn==null?void 0:Fn.id)||Rs}),children:Pn}),xs=jsx$1(reactExports.Fragment,{children:Zn(vn)},"input"),Ks=typeof wn!="boolean"&&wn&&jsx$1(InputError,{...__spreadProps$r(__spreadValues$U(__spreadValues$U({},zn),Qn),{size:(zn==null?void 0:zn.size)||Qn.size,key:"error",id:(zn==null?void 0:zn.id)||Ts}),children:wn}),Vs=rs.map(Js=>{switch(Js){case"label":return bs;case"input":return xs;case"description":return ks;case"error":return Ks;default:return null}});return jsx$1(InputWrapperProvider,{value:__spreadValues$U({describedBy:js},getInputOffsets(rs,{hasDescription:!!ks,hasError:!!Ks})),children:jsx$1(Box,{...__spreadValues$U({className:Ss(Es.root,dn),ref:ln},ds),children:Vs})})});InputWrapper.displayName="@mantine/core/InputWrapper";var __defProp$T=Object.defineProperty,__getOwnPropSymbols$T=Object.getOwnPropertySymbols,__hasOwnProp$T=Object.prototype.hasOwnProperty,__propIsEnum$T=Object.prototype.propertyIsEnumerable,__defNormalProp$T=(sn,ln,cn)=>ln in sn?__defProp$T(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$T=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$T.call(ln,cn)&&__defNormalProp$T(sn,cn,ln[cn]);if(__getOwnPropSymbols$T)for(var cn of __getOwnPropSymbols$T(ln))__propIsEnum$T.call(ln,cn)&&__defNormalProp$T(sn,cn,ln[cn]);return sn},__objRest$D=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$T.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$T)for(var dn of __getOwnPropSymbols$T(sn))ln.indexOf(dn)<0&&__propIsEnum$T.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$z={},InputPlaceholder=reactExports.forwardRef((sn,ln)=>{const cn=useComponentDefaultProps("InputPlaceholder",defaultProps$z,sn),{sx:dn}=cn,pn=__objRest$D(cn,["sx"]);return jsx$1(Box,{...__spreadValues$T({component:"span",sx:[vn=>vn.fn.placeholderStyles(),...packSx(dn)],ref:ln},pn)})});InputPlaceholder.displayName="@mantine/core/InputPlaceholder";var __defProp$S=Object.defineProperty,__defProps$q=Object.defineProperties,__getOwnPropDescs$q=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$S=Object.getOwnPropertySymbols,__hasOwnProp$S=Object.prototype.hasOwnProperty,__propIsEnum$S=Object.prototype.propertyIsEnumerable,__defNormalProp$S=(sn,ln,cn)=>ln in sn?__defProp$S(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$S=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$S.call(ln,cn)&&__defNormalProp$S(sn,cn,ln[cn]);if(__getOwnPropSymbols$S)for(var cn of __getOwnPropSymbols$S(ln))__propIsEnum$S.call(ln,cn)&&__defNormalProp$S(sn,cn,ln[cn]);return sn},__spreadProps$q=(sn,ln)=>__defProps$q(sn,__getOwnPropDescs$q(ln));const sizes$6={xs:rem(30),sm:rem(36),md:rem(42),lg:rem(50),xl:rem(60)},INPUT_VARIANTS=["default","filled","unstyled"];function getVariantStyles$2({theme:sn,variant:ln}){return INPUT_VARIANTS.includes(ln)?ln==="default"?{border:`${rem(1)} solid ${sn.colorScheme==="dark"?sn.colors.dark[4]:sn.colors.gray[4]}`,backgroundColor:sn.colorScheme==="dark"?sn.colors.dark[6]:sn.white,transition:"border-color 100ms ease","&:focus, &:focus-within":sn.focusRingStyles.inputStyles(sn)}:ln==="filled"?{border:`${rem(1)} solid transparent`,backgroundColor:sn.colorScheme==="dark"?sn.colors.dark[5]:sn.colors.gray[1],"&:focus, &:focus-within":sn.focusRingStyles.inputStyles(sn)}:{borderWidth:0,color:sn.colorScheme==="dark"?sn.colors.dark[0]:sn.black,backgroundColor:"transparent",minHeight:rem(28),outline:0,"&:focus, &:focus-within":{outline:"none",borderColor:"transparent"},"&:disabled":{backgroundColor:"transparent","&:focus, &:focus-within":{outline:"none",borderColor:"transparent"}}}:null}var useStyles$_=createStyles((sn,{multiline:ln,radius:cn,invalid:dn,rightSectionWidth:pn,withRightSection:vn,iconWidth:kn,offsetBottom:Sn,offsetTop:wn,pointer:Pn},{variant:Nn,size:Ln})=>{const Fn=sn.fn.variant({variant:"filled",color:"red"}).background,zn=Nn==="default"||Nn==="filled"?{minHeight:getSize({size:Ln,sizes:sizes$6}),paddingLeft:`calc(${getSize({size:Ln,sizes:sizes$6})}  / 3)`,paddingRight:vn?pn||getSize({size:Ln,sizes:sizes$6}):`calc(${getSize({size:Ln,sizes:sizes$6})}  / 3)`,borderRadius:sn.fn.radius(cn)}:Nn==="unstyled"&&vn?{paddingRight:pn||getSize({size:Ln,sizes:sizes$6})}:null;return{wrapper:{position:"relative",marginTop:wn?`calc(${sn.spacing.xs} / 2)`:void 0,marginBottom:Sn?`calc(${sn.spacing.xs} / 2)`:void 0,"&:has(input:disabled)":{"& .mantine-Input-rightSection":{display:"none"}}},input:__spreadProps$q(__spreadValues$S(__spreadValues$S(__spreadProps$q(__spreadValues$S({},sn.fn.fontStyles()),{height:ln?Nn==="unstyled"?void 0:"auto":getSize({size:Ln,sizes:sizes$6}),WebkitTapHighlightColor:"transparent",lineHeight:ln?sn.lineHeight:`calc(${getSize({size:Ln,sizes:sizes$6})} - ${rem(2)})`,appearance:"none",resize:"none",boxSizing:"border-box",fontSize:getSize({size:Ln,sizes:sn.fontSizes}),width:"100%",color:sn.colorScheme==="dark"?sn.colors.dark[0]:sn.black,display:"block",textAlign:"left",cursor:Pn?"pointer":void 0}),getVariantStyles$2({theme:sn,variant:Nn})),zn),{"&:disabled, &[data-disabled]":{backgroundColor:sn.colorScheme==="dark"?sn.colors.dark[6]:sn.colors.gray[1],color:sn.colors.dark[2],opacity:.6,cursor:"not-allowed",pointerEvents:"none","&::placeholder":{color:sn.colors.dark[2]}},"&[data-invalid]":{color:Fn,borderColor:Fn,"&::placeholder":{opacity:1,color:Fn}},"&[data-with-icon]":{paddingLeft:typeof kn=="number"?rem(kn):getSize({size:Ln,sizes:sizes$6})},"&::placeholder":__spreadProps$q(__spreadValues$S({},sn.fn.placeholderStyles()),{opacity:1}),"&::-webkit-inner-spin-button, &::-webkit-outer-spin-button, &::-webkit-search-decoration, &::-webkit-search-cancel-button, &::-webkit-search-results-button, &::-webkit-search-results-decoration":{appearance:"none"},"&[type=number]":{MozAppearance:"textfield"}}),icon:{pointerEvents:"none",position:"absolute",zIndex:1,left:0,top:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",width:kn?rem(kn):getSize({size:Ln,sizes:sizes$6}),color:dn?sn.colors.red[sn.colorScheme==="dark"?6:7]:sn.colorScheme==="dark"?sn.colors.dark[2]:sn.colors.gray[5]},rightSection:{position:"absolute",top:0,bottom:0,right:0,display:"flex",alignItems:"center",justifyContent:"center",width:pn||getSize({size:Ln,sizes:sizes$6})}}});const useStyles$$=useStyles$_;var __defProp$R=Object.defineProperty,__defProps$p=Object.defineProperties,__getOwnPropDescs$p=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$R=Object.getOwnPropertySymbols,__hasOwnProp$R=Object.prototype.hasOwnProperty,__propIsEnum$R=Object.prototype.propertyIsEnumerable,__defNormalProp$R=(sn,ln,cn)=>ln in sn?__defProp$R(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$R=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$R.call(ln,cn)&&__defNormalProp$R(sn,cn,ln[cn]);if(__getOwnPropSymbols$R)for(var cn of __getOwnPropSymbols$R(ln))__propIsEnum$R.call(ln,cn)&&__defNormalProp$R(sn,cn,ln[cn]);return sn},__spreadProps$p=(sn,ln)=>__defProps$p(sn,__getOwnPropDescs$p(ln)),__objRest$C=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$R.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$R)for(var dn of __getOwnPropSymbols$R(sn))ln.indexOf(dn)<0&&__propIsEnum$R.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$y={size:"sm",variant:"default"},_Input=reactExports.forwardRef((sn,ln)=>{const cn=useComponentDefaultProps("Input",defaultProps$y,sn),{className:dn,error:pn,required:vn,disabled:kn,variant:Sn,icon:wn,style:Pn,rightSectionWidth:Nn,iconWidth:Ln,rightSection:Fn,rightSectionProps:zn,radius:Dn,size:Kn,wrapperProps:qn,classNames:Zn,styles:Yn,__staticSelector:Jn,multiline:rs,sx:ss,unstyled:as,pointer:ds}=cn,Es=__objRest$C(cn,["className","error","required","disabled","variant","icon","style","rightSectionWidth","iconWidth","rightSection","rightSectionProps","radius","size","wrapperProps","classNames","styles","__staticSelector","multiline","sx","unstyled","pointer"]),{offsetBottom:Ss,offsetTop:Qn,describedBy:ms}=useInputWrapperContext(),{classes:Ts,cx:Rs}=useStyles$$({radius:Dn,multiline:rs,invalid:!!pn,rightSectionWidth:Nn?rem(Nn):void 0,iconWidth:Ln,withRightSection:!!Fn,offsetBottom:Ss,offsetTop:Qn,pointer:ds},{classNames:Zn,styles:Yn,name:["Input",Jn],unstyled:as,variant:Sn,size:Kn}),{systemStyles:ys,rest:_s}=extractSystemStyles(Es);return jsxs$1(Box,{...__spreadValues$R(__spreadValues$R({className:Rs(Ts.wrapper,dn),sx:ss,style:Pn},ys),qn),children:[wn&&jsx$1("div",{className:Ts.icon,children:wn}),jsx$1(Box,{...__spreadProps$p(__spreadValues$R({component:"input"},_s),{ref:ln,required:vn,"aria-invalid":!!pn,"aria-describedby":ms,disabled:kn,"data-disabled":kn||void 0,"data-with-icon":!!wn||void 0,"data-invalid":!!pn||void 0,className:Ts.input})}),Fn&&jsx$1("div",{...__spreadProps$p(__spreadValues$R({},zn),{className:Ts.rightSection}),children:Fn})]})});_Input.displayName="@mantine/core/Input";_Input.Wrapper=InputWrapper;_Input.Label=InputLabel;_Input.Description=InputDescription;_Input.Error=InputError;_Input.Placeholder=InputPlaceholder;const Input=_Input;var useStyles$Y=createStyles((sn,{orientation:ln,buttonBorderWidth:cn})=>({root:{display:"flex",flexDirection:ln==="vertical"?"column":"row","& [data-button]":{"&:first-of-type:not(:last-of-type)":{borderBottomRightRadius:0,[ln==="vertical"?"borderBottomLeftRadius":"borderTopRightRadius"]:0,[ln==="vertical"?"borderBottomWidth":"borderRightWidth"]:`calc(${rem(cn)} / 2)`},"&:last-of-type:not(:first-of-type)":{borderTopLeftRadius:0,[ln==="vertical"?"borderTopRightRadius":"borderBottomLeftRadius"]:0,[ln==="vertical"?"borderTopWidth":"borderLeftWidth"]:`calc(${rem(cn)} / 2)`},"&:not(:first-of-type):not(:last-of-type)":{borderRadius:0,[ln==="vertical"?"borderTopWidth":"borderLeftWidth"]:`calc(${rem(cn)} / 2)`,[ln==="vertical"?"borderBottomWidth":"borderRightWidth"]:`calc(${rem(cn)} / 2)`},"& + [data-button]":{[ln==="vertical"?"marginTop":"marginLeft"]:`calc(${cn} * -1)`,"@media (min-resolution: 192dpi)":{[ln==="vertical"?"marginTop":"marginLeft"]:0}}}}}));const useStyles$Z=useStyles$Y;var __defProp$Q=Object.defineProperty,__getOwnPropSymbols$Q=Object.getOwnPropertySymbols,__hasOwnProp$Q=Object.prototype.hasOwnProperty,__propIsEnum$Q=Object.prototype.propertyIsEnumerable,__defNormalProp$Q=(sn,ln,cn)=>ln in sn?__defProp$Q(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$Q=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$Q.call(ln,cn)&&__defNormalProp$Q(sn,cn,ln[cn]);if(__getOwnPropSymbols$Q)for(var cn of __getOwnPropSymbols$Q(ln))__propIsEnum$Q.call(ln,cn)&&__defNormalProp$Q(sn,cn,ln[cn]);return sn},__objRest$B=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$Q.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$Q)for(var dn of __getOwnPropSymbols$Q(sn))ln.indexOf(dn)<0&&__propIsEnum$Q.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$x={orientation:"horizontal",buttonBorderWidth:1},ButtonGroup=reactExports.forwardRef((sn,ln)=>{const cn=useComponentDefaultProps("ButtonGroup",defaultProps$x,sn),{className:dn,orientation:pn,buttonBorderWidth:vn,unstyled:kn}=cn,Sn=__objRest$B(cn,["className","orientation","buttonBorderWidth","unstyled"]),{classes:wn,cx:Pn}=useStyles$Z({orientation:pn,buttonBorderWidth:vn},{name:"ButtonGroup",unstyled:kn});return jsx$1(Box,{...__spreadValues$Q({className:Pn(wn.root,dn),ref:ln},Sn)})});ButtonGroup.displayName="@mantine/core/ButtonGroup";var __defProp$P=Object.defineProperty,__defProps$o=Object.defineProperties,__getOwnPropDescs$o=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$P=Object.getOwnPropertySymbols,__hasOwnProp$P=Object.prototype.hasOwnProperty,__propIsEnum$P=Object.prototype.propertyIsEnumerable,__defNormalProp$P=(sn,ln,cn)=>ln in sn?__defProp$P(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$P=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$P.call(ln,cn)&&__defNormalProp$P(sn,cn,ln[cn]);if(__getOwnPropSymbols$P)for(var cn of __getOwnPropSymbols$P(ln))__propIsEnum$P.call(ln,cn)&&__defNormalProp$P(sn,cn,ln[cn]);return sn},__spreadProps$o=(sn,ln)=>__defProps$o(sn,__getOwnPropDescs$o(ln));const BUTTON_VARIANTS=["filled","outline","light","white","default","subtle","gradient"],sizes$5={xs:{height:sizes$6.xs,paddingLeft:rem(14),paddingRight:rem(14)},sm:{height:sizes$6.sm,paddingLeft:rem(18),paddingRight:rem(18)},md:{height:sizes$6.md,paddingLeft:rem(22),paddingRight:rem(22)},lg:{height:sizes$6.lg,paddingLeft:rem(26),paddingRight:rem(26)},xl:{height:sizes$6.xl,paddingLeft:rem(32),paddingRight:rem(32)},"compact-xs":{height:rem(22),paddingLeft:rem(7),paddingRight:rem(7)},"compact-sm":{height:rem(26),paddingLeft:rem(8),paddingRight:rem(8)},"compact-md":{height:rem(30),paddingLeft:rem(10),paddingRight:rem(10)},"compact-lg":{height:rem(34),paddingLeft:rem(12),paddingRight:rem(12)},"compact-xl":{height:rem(40),paddingLeft:rem(14),paddingRight:rem(14)}};function getSizeStyles({compact:sn,size:ln,withLeftIcon:cn,withRightIcon:dn}){if(sn)return sizes$5[`compact-${ln}`];const pn=sizes$5[ln];return pn?__spreadProps$o(__spreadValues$P({},pn),{paddingLeft:cn?`calc(${pn.paddingLeft}  / 1.5)`:pn.paddingLeft,paddingRight:dn?`calc(${pn.paddingRight}  / 1.5)`:pn.paddingRight}):{}}const getWidthStyles=sn=>({display:sn?"block":"inline-block",width:sn?"100%":"auto"});function getVariantStyles$1({variant:sn,theme:ln,color:cn,gradient:dn}){if(!BUTTON_VARIANTS.includes(sn))return null;const pn=ln.fn.variant({color:cn,variant:sn,gradient:dn});return sn==="gradient"?__spreadValues$P({border:0,backgroundImage:pn.background,color:pn.color},ln.fn.hover({backgroundSize:"200%"})):__spreadValues$P({border:`${rem(1)} solid ${pn.border}`,backgroundColor:pn.background,color:pn.color},ln.fn.hover({backgroundColor:pn.hover}))}var useStyles$W=createStyles((sn,{radius:ln,fullWidth:cn,compact:dn,withLeftIcon:pn,withRightIcon:vn,color:kn,gradient:Sn},{variant:wn,size:Pn})=>({root:__spreadProps$o(__spreadValues$P(__spreadProps$o(__spreadValues$P(__spreadValues$P(__spreadValues$P(__spreadValues$P({},getSizeStyles({compact:dn,size:Pn,withLeftIcon:pn,withRightIcon:vn})),sn.fn.fontStyles()),sn.fn.focusStyles()),getWidthStyles(cn)),{borderRadius:sn.fn.radius(ln),fontWeight:600,position:"relative",lineHeight:1,fontSize:getSize({size:Pn,sizes:sn.fontSizes}),userSelect:"none",cursor:"pointer"}),getVariantStyles$1({variant:wn,theme:sn,color:kn,gradient:Sn})),{"&:active":sn.activeStyles,"&:disabled, &[data-disabled]":{borderColor:"transparent",backgroundColor:sn.colorScheme==="dark"?sn.colors.dark[4]:sn.colors.gray[2],color:sn.colorScheme==="dark"?sn.colors.dark[6]:sn.colors.gray[5],cursor:"not-allowed",backgroundImage:"none",pointerEvents:"none","&:active":{transform:"none"}},"&[data-loading]":{pointerEvents:"none","&::before":__spreadProps$o(__spreadValues$P({content:'""'},sn.fn.cover(rem(-1))),{backgroundColor:sn.colorScheme==="dark"?sn.fn.rgba(sn.colors.dark[7],.5):"rgba(255, 255, 255, .5)",borderRadius:sn.fn.radius(ln),cursor:"not-allowed"})}}),icon:{display:"flex",alignItems:"center"},leftIcon:{marginRight:sn.spacing.xs},rightIcon:{marginLeft:sn.spacing.xs},centerLoader:{position:"absolute",left:"50%",transform:"translateX(-50%)",opacity:.5},inner:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",overflow:"visible"},label:{whiteSpace:"nowrap",height:"100%",overflow:"hidden",display:"flex",alignItems:"center"}}));const useStyles$X=useStyles$W;var __defProp$O=Object.defineProperty,__getOwnPropSymbols$O=Object.getOwnPropertySymbols,__hasOwnProp$O=Object.prototype.hasOwnProperty,__propIsEnum$O=Object.prototype.propertyIsEnumerable,__defNormalProp$O=(sn,ln,cn)=>ln in sn?__defProp$O(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$O=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$O.call(ln,cn)&&__defNormalProp$O(sn,cn,ln[cn]);if(__getOwnPropSymbols$O)for(var cn of __getOwnPropSymbols$O(ln))__propIsEnum$O.call(ln,cn)&&__defNormalProp$O(sn,cn,ln[cn]);return sn},__objRest$A=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$O.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$O)for(var dn of __getOwnPropSymbols$O(sn))ln.indexOf(dn)<0&&__propIsEnum$O.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$w={size:"sm",type:"button",variant:"filled",loaderPosition:"left"},_Button=reactExports.forwardRef((sn,ln)=>{const cn=useComponentDefaultProps("Button",defaultProps$w,sn),{className:dn,size:pn,color:vn,type:kn,disabled:Sn,children:wn,leftIcon:Pn,rightIcon:Nn,fullWidth:Ln,variant:Fn,radius:zn,uppercase:Dn,compact:Kn,loading:qn,loaderPosition:Zn,loaderProps:Yn,gradient:Jn,classNames:rs,styles:ss,unstyled:as}=cn,ds=__objRest$A(cn,["className","size","color","type","disabled","children","leftIcon","rightIcon","fullWidth","variant","radius","uppercase","compact","loading","loaderPosition","loaderProps","gradient","classNames","styles","unstyled"]),{classes:Es,cx:Ss,theme:Qn}=useStyles$X({radius:zn,color:vn,fullWidth:Ln,compact:Kn,gradient:Jn,withLeftIcon:!!Pn,withRightIcon:!!Nn},{name:"Button",unstyled:as,classNames:rs,styles:ss,variant:Fn,size:pn}),ms=Qn.fn.variant({color:vn,variant:Fn}),Ts=jsx$1(Loader,{...__spreadValues$O({color:ms.color,size:`calc(${getSize({size:pn,sizes:sizes$5}).height} / 2)`},Yn)});return jsx$1(UnstyledButton,{...__spreadValues$O({className:Ss(Es.root,dn),type:kn,disabled:Sn,"data-button":!0,"data-disabled":Sn||void 0,"data-loading":qn||void 0,ref:ln,unstyled:as},ds),children:jsxs$1("div",{className:Es.inner,children:[(Pn||qn&&Zn==="left")&&jsx$1("span",{className:Ss(Es.icon,Es.leftIcon),children:qn&&Zn==="left"?Ts:Pn}),qn&&Zn==="center"&&jsx$1("span",{className:Es.centerLoader,children:Ts}),jsx$1("span",{className:Es.label,style:{textTransform:Dn?"uppercase":void 0},children:wn}),(Nn||qn&&Zn==="right")&&jsx$1("span",{className:Ss(Es.icon,Es.rightIcon),children:qn&&Zn==="right"?Ts:Nn})]})})});_Button.displayName="@mantine/core/Button";_Button.Group=ButtonGroup;const Button=_Button;var useStyles$U=createStyles((sn,{radius:ln,shadow:cn})=>({root:{outline:0,WebkitTapHighlightColor:"transparent",display:"block",textDecoration:"none",color:sn.colorScheme==="dark"?sn.colors.dark[0]:sn.black,backgroundColor:sn.colorScheme==="dark"?sn.colors.dark[7]:sn.white,boxSizing:"border-box",borderRadius:sn.fn.radius(ln),boxShadow:sn.shadows[cn]||cn||"none","&[data-with-border]":{border:`${rem(1)} solid ${sn.colorScheme==="dark"?sn.colors.dark[4]:sn.colors.gray[3]}`}}}));const useStyles$V=useStyles$U;var __defProp$N=Object.defineProperty,__getOwnPropSymbols$N=Object.getOwnPropertySymbols,__hasOwnProp$N=Object.prototype.hasOwnProperty,__propIsEnum$N=Object.prototype.propertyIsEnumerable,__defNormalProp$N=(sn,ln,cn)=>ln in sn?__defProp$N(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$N=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$N.call(ln,cn)&&__defNormalProp$N(sn,cn,ln[cn]);if(__getOwnPropSymbols$N)for(var cn of __getOwnPropSymbols$N(ln))__propIsEnum$N.call(ln,cn)&&__defNormalProp$N(sn,cn,ln[cn]);return sn},__objRest$z=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$N.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$N)for(var dn of __getOwnPropSymbols$N(sn))ln.indexOf(dn)<0&&__propIsEnum$N.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$v={},_Paper=reactExports.forwardRef((sn,ln)=>{const cn=useComponentDefaultProps("Paper",defaultProps$v,sn),{className:dn,children:pn,radius:vn,withBorder:kn,shadow:Sn,unstyled:wn,variant:Pn}=cn,Nn=__objRest$z(cn,["className","children","radius","withBorder","shadow","unstyled","variant"]),{classes:Ln,cx:Fn}=useStyles$V({radius:vn,shadow:Sn},{name:"Paper",unstyled:wn,variant:Pn});return jsx$1(Box,{...__spreadValues$N({className:Fn(Ln.root,dn),"data-with-border":kn||void 0,ref:ln},Nn),children:pn})});_Paper.displayName="@mantine/core/Paper";const Paper=_Paper;var __defProp$M=Object.defineProperty,__getOwnPropSymbols$M=Object.getOwnPropertySymbols,__hasOwnProp$M=Object.prototype.hasOwnProperty,__propIsEnum$M=Object.prototype.propertyIsEnumerable,__defNormalProp$M=(sn,ln,cn)=>ln in sn?__defProp$M(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$M=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$M.call(ln,cn)&&__defNormalProp$M(sn,cn,ln[cn]);if(__getOwnPropSymbols$M)for(var cn of __getOwnPropSymbols$M(ln))__propIsEnum$M.call(ln,cn)&&__defNormalProp$M(sn,cn,ln[cn]);return sn};function CheckIcon(sn){return jsx$1("svg",{...__spreadValues$M({viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg"},sn),children:jsx$1("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var __defProp$L=Object.defineProperty,__defProps$n=Object.defineProperties,__getOwnPropDescs$n=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$L=Object.getOwnPropertySymbols,__hasOwnProp$L=Object.prototype.hasOwnProperty,__propIsEnum$L=Object.prototype.propertyIsEnumerable,__defNormalProp$L=(sn,ln,cn)=>ln in sn?__defProp$L(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$L=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$L.call(ln,cn)&&__defNormalProp$L(sn,cn,ln[cn]);if(__getOwnPropSymbols$L)for(var cn of __getOwnPropSymbols$L(ln))__propIsEnum$L.call(ln,cn)&&__defNormalProp$L(sn,cn,ln[cn]);return sn},__spreadProps$n=(sn,ln)=>__defProps$n(sn,__getOwnPropDescs$n(ln));const sizes$4={xs:rem(16),sm:rem(20),md:rem(24),lg:rem(30),xl:rem(36)};var useStyles$S=createStyles((sn,{labelPosition:ln},{size:cn})=>({root:{},body:{display:"flex","&:has(input:disabled) label":{color:sn.colorScheme==="dark"?sn.colors.dark[3]:sn.colors.gray[5]}},labelWrapper:__spreadProps$n(__spreadValues$L({},sn.fn.fontStyles()),{display:"inline-flex",flexDirection:"column",WebkitTapHighlightColor:"transparent",fontSize:cn in sizes$4?getSize({size:cn,sizes:sn.fontSizes}):void 0,lineHeight:cn in sizes$4?getSize({size:cn,sizes:sizes$4}):void 0,color:sn.colorScheme==="dark"?sn.colors.dark[0]:sn.black,cursor:sn.cursorType,order:ln==="left"?1:2}),description:{marginTop:`calc(${sn.spacing.xs} / 2)`,[ln==="left"?"paddingRight":"paddingLeft"]:sn.spacing.sm},error:{marginTop:`calc(${sn.spacing.xs} / 2)`,[ln==="left"?"paddingRight":"paddingLeft"]:sn.spacing.sm},label:{cursor:sn.cursorType,[ln==="left"?"paddingRight":"paddingLeft"]:sn.spacing.sm,"&:disabled, &[data-disabled]":{color:sn.colorScheme==="dark"?sn.colors.dark[3]:sn.colors.gray[5]}}}));const useStyles$T=useStyles$S;var __defProp$K=Object.defineProperty,__getOwnPropSymbols$K=Object.getOwnPropertySymbols,__hasOwnProp$K=Object.prototype.hasOwnProperty,__propIsEnum$K=Object.prototype.propertyIsEnumerable,__defNormalProp$K=(sn,ln,cn)=>ln in sn?__defProp$K(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$K=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$K.call(ln,cn)&&__defNormalProp$K(sn,cn,ln[cn]);if(__getOwnPropSymbols$K)for(var cn of __getOwnPropSymbols$K(ln))__propIsEnum$K.call(ln,cn)&&__defNormalProp$K(sn,cn,ln[cn]);return sn},__objRest$y=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$K.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$K)for(var dn of __getOwnPropSymbols$K(sn))ln.indexOf(dn)<0&&__propIsEnum$K.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const InlineInput=reactExports.forwardRef((sn,ln)=>{var cn=sn,{__staticSelector:dn,className:pn,classNames:vn,styles:kn,unstyled:Sn,children:wn,label:Pn,description:Nn,id:Ln,disabled:Fn,error:zn,size:Dn,labelPosition:Kn,variant:qn}=cn,Zn=__objRest$y(cn,["__staticSelector","className","classNames","styles","unstyled","children","label","description","id","disabled","error","size","labelPosition","variant"]);const{classes:Yn,cx:Jn}=useStyles$T({labelPosition:Kn},{name:dn,styles:kn,classNames:vn,unstyled:Sn,variant:qn,size:Dn});return jsx$1(Box,{...__spreadValues$K({className:Jn(Yn.root,pn),ref:ln},Zn),children:jsxs$1("div",{className:Jn(Yn.body),children:[wn,jsxs$1("div",{className:Yn.labelWrapper,children:[Pn&&jsx$1("label",{className:Yn.label,"data-disabled":Fn||void 0,htmlFor:Ln,children:Pn}),Nn&&jsx$1(Input.Description,{className:Yn.description,children:Nn}),zn&&zn!=="boolean"&&jsx$1(Input.Error,{className:Yn.error,children:zn})]})]})})});InlineInput.displayName="@mantine/core/InlineInput";const ChipGroupContext=reactExports.createContext(null),ChipGroupProvider=ChipGroupContext.Provider,useChipGroup=()=>reactExports.useContext(ChipGroupContext),defaultProps$u={};function ChipGroup(sn){const{value:ln,defaultValue:cn,onChange:dn,multiple:pn,children:vn}=useComponentDefaultProps("ChipGroup",defaultProps$u,sn),[kn,Sn]=useUncontrolled({value:ln,defaultValue:cn,finalValue:pn?[]:null,onChange:dn});return jsx$1(ChipGroupProvider,{value:{isChipSelected:Nn=>Array.isArray(kn)?kn.includes(Nn):Nn===kn,onChange:Nn=>{const Ln=Nn.currentTarget.value;Array.isArray(kn)?Sn(kn.includes(Ln)?kn.filter(Fn=>Fn!==Ln):[...kn,Ln]):Sn(Ln)},multiple:pn},children:vn})}ChipGroup.displayName="@mantine/core/ChipGroup";var __defProp$J=Object.defineProperty,__defProps$m=Object.defineProperties,__getOwnPropDescs$m=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$J=Object.getOwnPropertySymbols,__hasOwnProp$J=Object.prototype.hasOwnProperty,__propIsEnum$J=Object.prototype.propertyIsEnumerable,__defNormalProp$J=(sn,ln,cn)=>ln in sn?__defProp$J(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$J=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$J.call(ln,cn)&&__defNormalProp$J(sn,cn,ln[cn]);if(__getOwnPropSymbols$J)for(var cn of __getOwnPropSymbols$J(ln))__propIsEnum$J.call(ln,cn)&&__defNormalProp$J(sn,cn,ln[cn]);return sn},__spreadProps$m=(sn,ln)=>__defProps$m(sn,__getOwnPropDescs$m(ln));const sizes$3={xs:rem(24),sm:rem(28),md:rem(32),lg:rem(36),xl:rem(40)},iconSizes={xs:rem(10),sm:rem(12),md:rem(14),lg:rem(16),xl:rem(18)},padding={xs:rem(16),sm:rem(20),md:rem(24),lg:rem(28),xl:rem(32)},checkedPadding={xs:rem(7.5),sm:rem(10),md:rem(11.5),lg:rem(13),xl:rem(15)};function getVariantStyles(sn,{color:ln},cn){const dn=sn.fn.variant({variant:"filled",color:ln}),pn=sn.fn.variant({variant:"light",color:ln});return cn==="light"?{label:__spreadValues$J({backgroundColor:sn.colorScheme==="dark"?sn.colors.dark[6]:sn.colors.gray[1]},sn.fn.hover({backgroundColor:sn.colorScheme==="dark"?sn.colors.dark[5]:sn.colors.gray[0]})),checked:__spreadProps$m(__spreadValues$J({color:pn.color,backgroundColor:pn.background},sn.fn.hover({backgroundColor:pn.hover})),{"&, &:hover":{backgroundColor:sn.fn.variant({variant:"light",color:ln}).background}})}:cn==="filled"?{label:__spreadValues$J({backgroundColor:sn.colorScheme==="dark"?sn.colors.dark[6]:sn.colors.gray[1]},sn.fn.hover({backgroundColor:sn.colorScheme==="dark"?sn.colors.dark[5]:sn.colors.gray[0]})),checked:__spreadValues$J({color:dn.color,backgroundColor:dn.background},sn.fn.hover({backgroundColor:dn.hover}))}:cn==="outline"?{label:__spreadValues$J({backgroundColor:sn.colorScheme==="dark"?sn.colors.dark[6]:sn.white,borderColor:sn.colorScheme==="dark"?sn.colors.dark[4]:sn.colors.gray[4]},sn.fn.hover({backgroundColor:sn.colorScheme==="dark"?sn.colors.dark[5]:sn.colors.gray[0]})),checked:{border:`${rem(1)} solid ${dn.background}`}}:{label:null,checked:null}}var useStyles$Q=createStyles((sn,{radius:ln,color:cn},{size:dn,variant:pn})=>{const vn=getVariantStyles(sn,{color:cn},pn);return{root:{},label:__spreadProps$m(__spreadValues$J(__spreadProps$m(__spreadValues$J({ref:getStylesRef("label")},sn.fn.fontStyles()),{boxSizing:"border-box",color:sn.colorScheme==="dark"?sn.colors.dark[0]:sn.black,display:"inline-flex",alignItems:"center",userSelect:"none",border:`${rem(1)} solid transparent`,borderRadius:sn.fn.radius(ln),height:getSize({size:dn,sizes:sizes$3}),fontSize:getSize({size:dn,sizes:sn.fontSizes}),lineHeight:`calc(${getSize({size:dn,sizes:sizes$3})} - ${rem(2)})`,paddingLeft:getSize({size:dn,sizes:padding}),paddingRight:getSize({size:dn,sizes:padding}),cursor:"pointer",whiteSpace:"nowrap",transition:"background-color 100ms ease",WebkitTapHighlightColor:"transparent"}),vn.label),{"&[data-disabled]":__spreadProps$m(__spreadValues$J({backgroundColor:sn.colorScheme==="dark"?sn.colors.dark[5]:sn.colors.gray[1],borderColor:sn.colorScheme==="dark"?sn.colors.dark[5]:sn.colors.gray[1],color:sn.colorScheme==="dark"?sn.colors.dark[3]:sn.colors.gray[5],cursor:"not-allowed",pointerEvents:"none"},sn.fn.hover({backgroundColor:sn.colorScheme==="dark"?sn.colors.dark[5]:sn.colors.gray[1]})),{[`& .${getStylesRef("iconWrapper")}`]:{color:sn.colorScheme==="dark"?sn.colors.dark[3]:sn.colors.gray[5]}}),"&[data-checked]":{paddingLeft:getSize({size:dn,sizes:checkedPadding}),paddingRight:getSize({size:dn,sizes:checkedPadding}),"&:not([data-disabled])":vn.checked}}),iconWrapper:{ref:getStylesRef("iconWrapper"),color:pn==="filled"?sn.white:sn.fn.variant({variant:"filled",color:cn}).background,width:`calc(${getSize({size:dn,sizes:iconSizes})} + (${getSize({size:dn,sizes:sn.spacing})} / 1.5))`,maxWidth:`calc(${getSize({size:dn,sizes:iconSizes})} + (${getSize({size:dn,sizes:sn.spacing})} / 1.5))`,height:getSize({size:dn,sizes:iconSizes}),display:"inline-block",verticalAlign:"middle",overflow:"hidden"},checkIcon:{width:getSize({size:dn,sizes:iconSizes}),height:`calc(${getSize({size:dn,sizes:iconSizes})} / 1.1)`,display:"block"},input:{width:0,height:0,padding:0,opacity:0,margin:0,"&:disabled + label":__spreadProps$m(__spreadValues$J({backgroundColor:sn.colorScheme==="dark"?sn.colors.dark[5]:sn.colors.gray[1],borderColor:sn.colorScheme==="dark"?sn.colors.dark[5]:sn.colors.gray[1],color:sn.colorScheme==="dark"?sn.colors.dark[3]:sn.colors.gray[5],cursor:"not-allowed",pointerEvents:"none"},sn.fn.hover({backgroundColor:sn.colorScheme==="dark"?sn.colors.dark[5]:sn.colors.gray[1]})),{[`& .${getStylesRef("iconWrapper")}`]:{color:sn.colorScheme==="dark"?sn.colors.dark[3]:sn.colors.gray[5]},"&[data-checked]":{paddingLeft:getSize({size:dn,sizes:checkedPadding}),paddingRight:getSize({size:dn,sizes:checkedPadding}),"&:not([data-disabled])":{backgroundColor:sn.colorScheme==="dark"?sn.colors.dark[5]:sn.colors.gray[1],borderColor:sn.colorScheme==="dark"?sn.colors.dark[5]:sn.colors.gray[1],color:sn.colorScheme==="dark"?sn.colors.dark[3]:sn.colors.gray[5]}}}),"&:focus":{outline:"none",[`& + .${getStylesRef("label")}`]:__spreadValues$J({},sn.focusRing==="always"||sn.focusRing==="auto"?sn.focusRingStyles.styles(sn):sn.focusRingStyles.resetStyles(sn)),"&:focus:not(:focus-visible)":{[`& + .${getStylesRef("label")}`]:__spreadValues$J({},sn.focusRing==="auto"||sn.focusRing==="never"?sn.focusRingStyles.resetStyles(sn):null)}}}}});const useStyles$R=useStyles$Q;var __defProp$I=Object.defineProperty,__getOwnPropSymbols$I=Object.getOwnPropertySymbols,__hasOwnProp$I=Object.prototype.hasOwnProperty,__propIsEnum$I=Object.prototype.propertyIsEnumerable,__defNormalProp$I=(sn,ln,cn)=>ln in sn?__defProp$I(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$I=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$I.call(ln,cn)&&__defNormalProp$I(sn,cn,ln[cn]);if(__getOwnPropSymbols$I)for(var cn of __getOwnPropSymbols$I(ln))__propIsEnum$I.call(ln,cn)&&__defNormalProp$I(sn,cn,ln[cn]);return sn},__objRest$x=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$I.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$I)for(var dn of __getOwnPropSymbols$I(sn))ln.indexOf(dn)<0&&__propIsEnum$I.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$t={type:"checkbox",size:"sm",radius:"xl",variant:"outline"},Chip=reactExports.forwardRef((sn,ln)=>{const cn=useComponentDefaultProps("Chip",defaultProps$t,sn),{radius:dn,type:pn,size:vn,variant:kn,disabled:Sn,id:wn,color:Pn,children:Nn,className:Ln,classNames:Fn,style:zn,styles:Dn,checked:Kn,defaultChecked:qn,onChange:Zn,sx:Yn,wrapperProps:Jn,value:rs,unstyled:ss}=cn,as=__objRest$x(cn,["radius","type","size","variant","disabled","id","color","children","className","classNames","style","styles","checked","defaultChecked","onChange","sx","wrapperProps","value","unstyled"]),ds=useChipGroup(),Es=useId$1(wn),{systemStyles:Ss,rest:Qn}=extractSystemStyles(as),{classes:ms,cx:Ts}=useStyles$R({radius:dn,color:Pn},{classNames:Fn,styles:Dn,unstyled:ss,name:"Chip",variant:kn,size:vn}),[Rs,ys]=useUncontrolled({value:Kn,defaultValue:qn,finalValue:!1,onChange:Zn}),_s=ds?{checked:ds.isChipSelected(rs),onChange:ds.onChange,type:ds.multiple?"checkbox":"radio"}:{},js=_s.checked||Rs;return jsxs$1(Box,{...__spreadValues$I(__spreadValues$I({className:Ts(ms.root,Ln),style:zn,sx:Yn},Ss),Jn),children:[jsx$1("input",{...__spreadValues$I(__spreadValues$I({type:pn,className:ms.input,checked:js,onChange:bs=>ys(bs.currentTarget.checked),id:Es,disabled:Sn,ref:ln,value:rs},_s),Qn)}),jsxs$1("label",{htmlFor:Es,"data-checked":js||void 0,"data-disabled":Sn||void 0,className:ms.label,children:[js&&jsx$1("span",{className:ms.iconWrapper,children:jsx$1(CheckIcon,{className:ms.checkIcon})}),Nn]})]})});Chip.displayName="@mantine/core/Chip";Chip.Group=ChipGroup;const[ModalBaseProvider,useModalBaseContext]=createSafeContext("ModalBase component was not found in tree");var useStyles$O=createStyles(()=>({close:{marginLeft:"auto",marginRight:0}}));const useStyles$P=useStyles$O;var __defProp$H=Object.defineProperty,__getOwnPropSymbols$H=Object.getOwnPropertySymbols,__hasOwnProp$H=Object.prototype.hasOwnProperty,__propIsEnum$H=Object.prototype.propertyIsEnumerable,__defNormalProp$H=(sn,ln,cn)=>ln in sn?__defProp$H(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$H=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$H.call(ln,cn)&&__defNormalProp$H(sn,cn,ln[cn]);if(__getOwnPropSymbols$H)for(var cn of __getOwnPropSymbols$H(ln))__propIsEnum$H.call(ln,cn)&&__defNormalProp$H(sn,cn,ln[cn]);return sn},__objRest$w=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$H.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$H)for(var dn of __getOwnPropSymbols$H(sn))ln.indexOf(dn)<0&&__propIsEnum$H.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$s={size:"sm"},ModalBaseCloseButton=reactExports.forwardRef((sn,ln)=>{const cn=useModalBaseContext(),dn=useComponentDefaultProps(`${cn.__staticSelector}CloseButton`,defaultProps$s,sn),{className:pn}=dn,vn=__objRest$w(dn,["className"]),{classes:kn,cx:Sn}=useStyles$P(null,cn.stylesApi);return jsx$1(CloseButton,{...__spreadValues$H({className:Sn(kn.close,pn),ref:ln,onClick:cn.onClose},vn)})});var useStyles$M=createStyles(()=>({overlay:{}}));const useStyles$N=useStyles$M;var __defProp$G=Object.defineProperty,__defProps$l=Object.defineProperties,__getOwnPropDescs$l=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$G=Object.getOwnPropertySymbols,__hasOwnProp$G=Object.prototype.hasOwnProperty,__propIsEnum$G=Object.prototype.propertyIsEnumerable,__defNormalProp$G=(sn,ln,cn)=>ln in sn?__defProp$G(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$G=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$G.call(ln,cn)&&__defNormalProp$G(sn,cn,ln[cn]);if(__getOwnPropSymbols$G)for(var cn of __getOwnPropSymbols$G(ln))__propIsEnum$G.call(ln,cn)&&__defNormalProp$G(sn,cn,ln[cn]);return sn},__spreadProps$l=(sn,ln)=>__defProps$l(sn,__getOwnPropDescs$l(ln)),useStyles$K=createStyles((sn,{color:ln,opacity:cn,blur:dn,radius:pn,gradient:vn,fixed:kn,zIndex:Sn})=>({root:__spreadProps$l(__spreadValues$G({},sn.fn.cover(0)),{position:kn?"fixed":"absolute",backgroundColor:vn?void 0:sn.fn.rgba(ln,cn),backgroundImage:vn,backdropFilter:dn?`blur(${rem(dn)})`:void 0,borderRadius:sn.fn.radius(pn),zIndex:Sn,"&[data-center]":{display:"flex",alignItems:"center",justifyContent:"center"}})}));const useStyles$L=useStyles$K;var __defProp$F=Object.defineProperty,__getOwnPropSymbols$F=Object.getOwnPropertySymbols,__hasOwnProp$F=Object.prototype.hasOwnProperty,__propIsEnum$F=Object.prototype.propertyIsEnumerable,__defNormalProp$F=(sn,ln,cn)=>ln in sn?__defProp$F(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$F=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$F.call(ln,cn)&&__defNormalProp$F(sn,cn,ln[cn]);if(__getOwnPropSymbols$F)for(var cn of __getOwnPropSymbols$F(ln))__propIsEnum$F.call(ln,cn)&&__defNormalProp$F(sn,cn,ln[cn]);return sn},__objRest$v=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$F.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$F)for(var dn of __getOwnPropSymbols$F(sn))ln.indexOf(dn)<0&&__propIsEnum$F.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$r={opacity:.6,color:"#000",zIndex:getDefaultZIndex("modal"),radius:0},_Overlay=reactExports.forwardRef((sn,ln)=>{const cn=useComponentDefaultProps("Overlay",defaultProps$r,sn),{variant:dn,opacity:pn,color:vn,blur:kn,gradient:Sn,zIndex:wn,radius:Pn,children:Nn,className:Ln,classNames:Fn,styles:zn,unstyled:Dn,center:Kn,fixed:qn}=cn,Zn=__objRest$v(cn,["variant","opacity","color","blur","gradient","zIndex","radius","children","className","classNames","styles","unstyled","center","fixed"]),{classes:Yn,cx:Jn}=useStyles$L({color:vn,opacity:pn,blur:kn,radius:Pn,gradient:Sn,fixed:qn,zIndex:wn},{name:"Overlay",classNames:Fn,styles:zn,unstyled:Dn,variant:dn});return jsx$1(Box,{...__spreadValues$F({ref:ln,className:Jn(Yn.root,Ln),"data-center":Kn||void 0},Zn),children:Nn})});_Overlay.displayName="@mantine/core/Overlay";const Overlay=_Overlay;var __defProp$E=Object.defineProperty,__defProps$k=Object.defineProperties,__getOwnPropDescs$k=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$E=Object.getOwnPropertySymbols,__hasOwnProp$E=Object.prototype.hasOwnProperty,__propIsEnum$E=Object.prototype.propertyIsEnumerable,__defNormalProp$E=(sn,ln,cn)=>ln in sn?__defProp$E(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$E=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$E.call(ln,cn)&&__defNormalProp$E(sn,cn,ln[cn]);if(__getOwnPropSymbols$E)for(var cn of __getOwnPropSymbols$E(ln))__propIsEnum$E.call(ln,cn)&&__defNormalProp$E(sn,cn,ln[cn]);return sn},__spreadProps$k=(sn,ln)=>__defProps$k(sn,__getOwnPropDescs$k(ln)),__objRest$u=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$E.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$E)for(var dn of __getOwnPropSymbols$E(sn))ln.indexOf(dn)<0&&__propIsEnum$E.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$q={},ModalBaseOverlay=reactExports.forwardRef((sn,ln)=>{const cn=useModalBaseContext(),dn=useComponentDefaultProps(`${cn.__staticSelector}Overlay`,defaultProps$q,sn),{onClick:pn,transitionProps:vn,style:kn,className:Sn}=dn,wn=__objRest$u(dn,["onClick","transitionProps","style","className"]),{classes:Pn,cx:Nn}=useStyles$N(null,cn.stylesApi),Ln=Fn=>{pn==null||pn(Fn),cn.closeOnClickOutside&&cn.onClose()};return jsx$1(Transition$2,{...__spreadProps$k(__spreadValues$E(__spreadValues$E({mounted:cn.opened},cn.transitionProps),vn),{transition:"fade"}),children:Fn=>jsx$1(Overlay,{...__spreadValues$E({ref:ln,onClick:Ln,fixed:!0,style:__spreadValues$E(__spreadValues$E({},kn),Fn),className:Nn(Pn.overlay,Sn),zIndex:cn.zIndex},wn)})})});var useStyles$I=createStyles((sn,{zIndex:ln})=>({inner:{position:"fixed",width:"100%",top:0,bottom:0,maxHeight:"100%",zIndex:ln,pointerEvents:"none"},content:{pointerEvents:"all"}}));const useStyles$J=useStyles$I;var __defProp$D=Object.defineProperty,__getOwnPropSymbols$D=Object.getOwnPropertySymbols,__hasOwnProp$D=Object.prototype.hasOwnProperty,__propIsEnum$D=Object.prototype.propertyIsEnumerable,__defNormalProp$D=(sn,ln,cn)=>ln in sn?__defProp$D(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$D=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$D.call(ln,cn)&&__defNormalProp$D(sn,cn,ln[cn]);if(__getOwnPropSymbols$D)for(var cn of __getOwnPropSymbols$D(ln))__propIsEnum$D.call(ln,cn)&&__defNormalProp$D(sn,cn,ln[cn]);return sn},__objRest$t=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$D.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$D)for(var dn of __getOwnPropSymbols$D(sn))ln.indexOf(dn)<0&&__propIsEnum$D.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$p={},ModalBaseContent=reactExports.forwardRef((sn,ln)=>{const cn=useModalBaseContext(),dn=useComponentDefaultProps(`${cn.__staticSelector}Content`,defaultProps$p,sn),{className:pn,transitionProps:vn,style:kn,onKeyDown:Sn}=dn,wn=__objRest$t(dn,["className","transitionProps","style","onKeyDown"]),{classes:Pn,cx:Nn}=useStyles$J({zIndex:cn.zIndex+1},cn.stylesApi),Ln=Fn=>{var zn;((zn=Fn.target)==null?void 0:zn.getAttribute("data-mantine-stop-propagation"))!=="true"&&Fn.key==="Escape"&&cn.closeOnEscape&&cn.onClose(),Sn==null||Sn(Fn)};return jsx$1(Transition$2,{...__spreadValues$D(__spreadValues$D({mounted:cn.opened,transition:"pop"},cn.transitionProps),vn),children:Fn=>jsx$1("div",{className:Nn(Pn.inner),children:jsx$1(FocusTrap,{active:cn.opened&&cn.trapFocus,children:jsx$1(Paper,{...__spreadValues$D({component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":cn.bodyMounted?cn.getBodyId():void 0,"aria-labelledby":cn.titleMounted?cn.getTitleId():void 0,onKeyDown:Ln,ref:ln,className:Nn(Pn.content,pn),style:__spreadValues$D(__spreadValues$D({},kn),Fn),shadow:cn.shadow},wn),children:wn.children})})})})});var useStyles$G=createStyles((sn,{padding:ln})=>{const cn=getSize({size:ln,sizes:sn.spacing});return{header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:cn,paddingRight:`calc(${cn} - ${rem(5)})`,position:"sticky",top:0,backgroundColor:sn.colorScheme==="dark"?sn.colors.dark[7]:sn.white,zIndex:1e3}}});const useStyles$H=useStyles$G;var __defProp$C=Object.defineProperty,__getOwnPropSymbols$C=Object.getOwnPropertySymbols,__hasOwnProp$C=Object.prototype.hasOwnProperty,__propIsEnum$C=Object.prototype.propertyIsEnumerable,__defNormalProp$C=(sn,ln,cn)=>ln in sn?__defProp$C(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$C=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$C.call(ln,cn)&&__defNormalProp$C(sn,cn,ln[cn]);if(__getOwnPropSymbols$C)for(var cn of __getOwnPropSymbols$C(ln))__propIsEnum$C.call(ln,cn)&&__defNormalProp$C(sn,cn,ln[cn]);return sn},__objRest$s=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$C.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$C)for(var dn of __getOwnPropSymbols$C(sn))ln.indexOf(dn)<0&&__propIsEnum$C.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$o={},ModalBaseHeader=reactExports.forwardRef((sn,ln)=>{const cn=useModalBaseContext(),dn=useComponentDefaultProps(`${cn.__staticSelector}Header`,defaultProps$o,sn),{className:pn}=dn,vn=__objRest$s(dn,["className"]),{classes:kn,cx:Sn}=useStyles$H({padding:cn.padding},cn.stylesApi);return jsx$1(Box,{...__spreadValues$C({ref:ln,className:Sn(kn.header,pn)},vn)})});var useStyles$E=createStyles(sn=>({title:{lineHeight:1,padding:0,margin:0,fontWeight:400,fontSize:sn.fontSizes.md}}));const useStyles$F=useStyles$E;var __defProp$B=Object.defineProperty,__getOwnPropSymbols$B=Object.getOwnPropertySymbols,__hasOwnProp$B=Object.prototype.hasOwnProperty,__propIsEnum$B=Object.prototype.propertyIsEnumerable,__defNormalProp$B=(sn,ln,cn)=>ln in sn?__defProp$B(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$B=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$B.call(ln,cn)&&__defNormalProp$B(sn,cn,ln[cn]);if(__getOwnPropSymbols$B)for(var cn of __getOwnPropSymbols$B(ln))__propIsEnum$B.call(ln,cn)&&__defNormalProp$B(sn,cn,ln[cn]);return sn},__objRest$r=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$B.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$B)for(var dn of __getOwnPropSymbols$B(sn))ln.indexOf(dn)<0&&__propIsEnum$B.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$n={},ModalBaseTitle=reactExports.forwardRef((sn,ln)=>{const cn=useModalBaseContext(),dn=useComponentDefaultProps(`${cn.__staticSelector}Title`,defaultProps$n,sn),{className:pn}=dn,vn=__objRest$r(dn,["className"]),{classes:kn,cx:Sn}=useStyles$F(null,cn.stylesApi);return reactExports.useEffect(()=>(cn.setTitleMounted(!0),()=>cn.setTitleMounted(!1)),[]),jsx$1(Box,{...__spreadValues$B({component:"h2",id:cn.getTitleId(),className:Sn(kn.title,pn),ref:ln},vn)})});var useStyles$C=createStyles((sn,{padding:ln})=>({body:{padding:getSize({size:ln,sizes:sn.spacing}),"&:not(:only-child)":{paddingTop:0}}}));const useStyles$D=useStyles$C;var __defProp$A=Object.defineProperty,__getOwnPropSymbols$A=Object.getOwnPropertySymbols,__hasOwnProp$A=Object.prototype.hasOwnProperty,__propIsEnum$A=Object.prototype.propertyIsEnumerable,__defNormalProp$A=(sn,ln,cn)=>ln in sn?__defProp$A(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$A=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$A.call(ln,cn)&&__defNormalProp$A(sn,cn,ln[cn]);if(__getOwnPropSymbols$A)for(var cn of __getOwnPropSymbols$A(ln))__propIsEnum$A.call(ln,cn)&&__defNormalProp$A(sn,cn,ln[cn]);return sn},__objRest$q=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$A.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$A)for(var dn of __getOwnPropSymbols$A(sn))ln.indexOf(dn)<0&&__propIsEnum$A.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$m={},ModalBaseBody=reactExports.forwardRef((sn,ln)=>{const cn=useModalBaseContext(),dn=useComponentDefaultProps(`${cn.__staticSelector}Body`,defaultProps$m,sn),{className:pn}=dn,vn=__objRest$q(dn,["className"]),{classes:kn,cx:Sn}=useStyles$D({padding:cn.padding},cn.stylesApi);return reactExports.useEffect(()=>(cn.setBodyMounted(!0),()=>cn.setBodyMounted(!1)),[]),jsx$1(Box,{...__spreadValues$A({id:cn.getBodyId(),className:Sn(kn.body,pn),ref:ln},vn)})});function NativeScrollArea({children:sn}){return jsx$1(Fragment$1,{children:sn})}function useLockScroll({opened:sn,transitionDuration:ln}){const[cn,dn]=reactExports.useState(sn),pn=reactExports.useRef(),kn=useReducedMotion()?0:ln;return reactExports.useEffect(()=>(sn?(dn(!0),window.clearTimeout(pn.current)):kn===0?dn(!1):pn.current=window.setTimeout(()=>dn(!1),kn),()=>window.clearTimeout(pn.current)),[sn,kn]),cn}var useStyles$A=createStyles(()=>({root:{}}));const useStyles$B=useStyles$A;var __defProp$z=Object.defineProperty,__defProps$j=Object.defineProperties,__getOwnPropDescs$j=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$z=Object.getOwnPropertySymbols,__hasOwnProp$z=Object.prototype.hasOwnProperty,__propIsEnum$z=Object.prototype.propertyIsEnumerable,__defNormalProp$z=(sn,ln,cn)=>ln in sn?__defProp$z(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$z=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$z.call(ln,cn)&&__defNormalProp$z(sn,cn,ln[cn]);if(__getOwnPropSymbols$z)for(var cn of __getOwnPropSymbols$z(ln))__propIsEnum$z.call(ln,cn)&&__defNormalProp$z(sn,cn,ln[cn]);return sn},__spreadProps$j=(sn,ln)=>__defProps$j(sn,__getOwnPropDescs$j(ln)),__objRest$p=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$z.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$z)for(var dn of __getOwnPropSymbols$z(sn))ln.indexOf(dn)<0&&__propIsEnum$z.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const ModalBaseDefaultProps={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:getDefaultZIndex("modal"),padding:"md",size:"md",shadow:"xl"};function ModalBase(sn){const ln=useComponentDefaultProps("ModalBase",ModalBaseDefaultProps,sn),{opened:cn,onClose:dn,children:pn,closeOnClickOutside:vn,__staticSelector:kn,transitionProps:Sn,withinPortal:wn,portalProps:Pn,keepMounted:Nn,target:Ln,zIndex:Fn,lockScroll:zn,trapFocus:Dn,closeOnEscape:Kn,returnFocus:qn,padding:Zn,shadow:Yn,id:Jn,size:rs,variant:ss,classNames:as,unstyled:ds,styles:Es,className:Ss}=ln,Qn=__objRest$p(ln,["opened","onClose","children","closeOnClickOutside","__staticSelector","transitionProps","withinPortal","portalProps","keepMounted","target","zIndex","lockScroll","trapFocus","closeOnEscape","returnFocus","padding","shadow","id","size","variant","classNames","unstyled","styles","className"]),{classes:ms,cx:Ts}=useStyles$B(null,{name:kn,classNames:as,styles:Es,unstyled:ds,variant:ss,size:rs}),Rs=useId$1(Jn),[ys,_s]=reactExports.useState(!1),[js,bs]=reactExports.useState(!1),ks=typeof(Sn==null?void 0:Sn.duration)=="number"?Sn==null?void 0:Sn.duration:200,xs=useLockScroll({opened:cn,transitionDuration:ks});return useWindowEvent("keydown",Ks=>{!Dn&&Ks.key==="Escape"&&Kn&&dn()}),useFocusReturn({opened:cn,shouldReturnFocus:Dn&&qn}),jsx$1(OptionalPortal,{...__spreadProps$j(__spreadValues$z({},Pn),{withinPortal:wn,target:Ln}),children:jsx$1(ModalBaseProvider,{value:{__staticSelector:kn,opened:cn,onClose:dn,closeOnClickOutside:vn,transitionProps:__spreadProps$j(__spreadValues$z({},Sn),{duration:ks,keepMounted:Nn}),zIndex:Fn,padding:Zn,id:Rs,getTitleId:()=>`${Rs}-title`,getBodyId:()=>`${Rs}-body`,titleMounted:ys,bodyMounted:js,setTitleMounted:_s,setBodyMounted:bs,trapFocus:Dn,closeOnEscape:Kn,shadow:Yn,stylesApi:{name:kn,size:rs,variant:ss,classNames:as,styles:Es,unstyled:ds}},children:jsx$1(RemoveScroll,{enabled:xs&&zn,children:jsx$1(Box,{...__spreadValues$z({className:Ts(ms.root,Ss)},Qn),children:pn})})})})}ModalBase.CloseButton=ModalBaseCloseButton;ModalBase.Overlay=ModalBaseOverlay;ModalBase.Content=ModalBaseContent;ModalBase.Header=ModalBaseHeader;ModalBase.Title=ModalBaseTitle;ModalBase.Body=ModalBaseBody;ModalBase.NativeScrollArea=NativeScrollArea;function filterFalsyChildren(sn){return reactExports.Children.toArray(sn).filter(Boolean)}const GROUP_POSITIONS={left:"flex-start",center:"center",right:"flex-end",apart:"space-between"};var useStyles$y=createStyles((sn,{spacing:ln,position:cn,noWrap:dn,grow:pn,align:vn,count:kn})=>({root:{boxSizing:"border-box",display:"flex",flexDirection:"row",alignItems:vn||"center",flexWrap:dn?"nowrap":"wrap",justifyContent:GROUP_POSITIONS[cn],gap:getSize({size:ln,sizes:sn.spacing}),"& > *":{boxSizing:"border-box",maxWidth:pn?`calc(${100/kn}% - (${rem(getSize({size:ln,sizes:sn.spacing}))} - ${getSize({size:ln,sizes:sn.spacing})} / ${kn}))`:void 0,flexGrow:pn?1:0}}}));const useStyles$z=useStyles$y;var __defProp$y=Object.defineProperty,__getOwnPropSymbols$y=Object.getOwnPropertySymbols,__hasOwnProp$y=Object.prototype.hasOwnProperty,__propIsEnum$y=Object.prototype.propertyIsEnumerable,__defNormalProp$y=(sn,ln,cn)=>ln in sn?__defProp$y(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$y=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$y.call(ln,cn)&&__defNormalProp$y(sn,cn,ln[cn]);if(__getOwnPropSymbols$y)for(var cn of __getOwnPropSymbols$y(ln))__propIsEnum$y.call(ln,cn)&&__defNormalProp$y(sn,cn,ln[cn]);return sn},__objRest$o=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$y.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$y)for(var dn of __getOwnPropSymbols$y(sn))ln.indexOf(dn)<0&&__propIsEnum$y.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$l={position:"left",spacing:"md"},Group=reactExports.forwardRef((sn,ln)=>{const cn=useComponentDefaultProps("Group",defaultProps$l,sn),{className:dn,position:pn,align:vn,children:kn,noWrap:Sn,grow:wn,spacing:Pn,unstyled:Nn,variant:Ln}=cn,Fn=__objRest$o(cn,["className","position","align","children","noWrap","grow","spacing","unstyled","variant"]),zn=filterFalsyChildren(kn),{classes:Dn,cx:Kn}=useStyles$z({align:vn,grow:wn,noWrap:Sn,spacing:Pn,position:pn,count:zn.length},{unstyled:Nn,name:"Group",variant:Ln});return jsx$1(Box,{...__spreadValues$y({className:Kn(Dn.root,dn),ref:ln},Fn),children:zn})});Group.displayName="@mantine/core/Group";function useDelayedHover({open:sn,close:ln,openDelay:cn,closeDelay:dn}){const pn=reactExports.useRef(-1),vn=reactExports.useRef(-1),kn=()=>{window.clearTimeout(pn.current),window.clearTimeout(vn.current)},Sn=()=>{kn(),cn===0?sn():pn.current=window.setTimeout(sn,cn)},wn=()=>{kn(),dn===0?ln():vn.current=window.setTimeout(ln,dn)};return reactExports.useEffect(()=>kn,[]),{openDropdown:Sn,closeDropdown:wn}}var __defProp$x=Object.defineProperty,__defProps$i=Object.defineProperties,__getOwnPropDescs$i=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$x=Object.getOwnPropertySymbols,__hasOwnProp$x=Object.prototype.hasOwnProperty,__propIsEnum$x=Object.prototype.propertyIsEnumerable,__defNormalProp$x=(sn,ln,cn)=>ln in sn?__defProp$x(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$x=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$x.call(ln,cn)&&__defNormalProp$x(sn,cn,ln[cn]);if(__getOwnPropSymbols$x)for(var cn of __getOwnPropSymbols$x(ln))__propIsEnum$x.call(ln,cn)&&__defNormalProp$x(sn,cn,ln[cn]);return sn},__spreadProps$i=(sn,ln)=>__defProps$i(sn,__getOwnPropDescs$i(ln));const processingAnimation=sn=>keyframes({from:{boxShadow:`0 0 ${rem(.5)} 0 ${sn}`,opacity:.6},to:{boxShadow:`0 0 ${rem(.5)} ${rem(4.4)} ${sn}`,opacity:0}});function getPositionStyles$1(sn,ln=0){const cn={},[dn,pn]=sn.split("-");let vn="",kn="";return dn==="top"&&(cn.top=ln,kn="-50%"),dn==="middle"&&(cn.top="50%",kn="-50%"),dn==="bottom"&&(cn.bottom=ln,kn="50%"),pn==="start"&&(cn.left=ln,vn="-50%"),pn==="center"&&(cn.left="50%",vn="-50%"),pn==="end"&&(cn.right=ln,vn="50%"),cn.transform=`translate(${vn}, ${kn})`,cn}var useStyles$w=createStyles((sn,{radius:ln,color:cn,position:dn,offset:pn,inline:vn,withBorder:kn,withLabel:Sn,zIndex:wn},{size:Pn})=>{const{background:Nn}=sn.fn.variant({variant:"filled",primaryFallback:!1,color:cn||sn.primaryColor}),Ln=rem(Pn);return{root:{position:"relative",display:vn?"inline-block":"block"},indicator:__spreadProps$i(__spreadValues$x({},getPositionStyles$1(dn,pn)),{zIndex:wn,position:"absolute",[Sn?"minWidth":"width"]:Ln,height:Ln,display:"flex",justifyContent:"center",alignItems:"center",fontSize:sn.fontSizes.xs,paddingLeft:Sn?`calc(${sn.spacing.xs} / 2)`:0,paddingRight:Sn?`calc(${sn.spacing.xs} / 2)`:0,borderRadius:sn.fn.radius(ln),backgroundColor:sn.fn.variant({variant:"filled",primaryFallback:!1,color:cn||sn.primaryColor}).background,border:kn?`${rem(2)} solid ${sn.colorScheme==="dark"?sn.colors.dark[7]:sn.white}`:void 0,color:sn.white,whiteSpace:"nowrap"}),processing:{animation:`${processingAnimation(Nn)} 1000ms linear infinite`},common:__spreadProps$i(__spreadValues$x({},getPositionStyles$1(dn,pn)),{position:"absolute",[Sn?"minWidth":"width"]:Ln,height:Ln,borderRadius:sn.fn.radius(ln)})}});const useStyles$x=useStyles$w;var __defProp$w=Object.defineProperty,__getOwnPropSymbols$w=Object.getOwnPropertySymbols,__hasOwnProp$w=Object.prototype.hasOwnProperty,__propIsEnum$w=Object.prototype.propertyIsEnumerable,__defNormalProp$w=(sn,ln,cn)=>ln in sn?__defProp$w(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$w=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$w.call(ln,cn)&&__defNormalProp$w(sn,cn,ln[cn]);if(__getOwnPropSymbols$w)for(var cn of __getOwnPropSymbols$w(ln))__propIsEnum$w.call(ln,cn)&&__defNormalProp$w(sn,cn,ln[cn]);return sn},__objRest$n=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$w.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$w)for(var dn of __getOwnPropSymbols$w(sn))ln.indexOf(dn)<0&&__propIsEnum$w.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$k={position:"top-end",offset:0,inline:!1,withBorder:!1,disabled:!1,processing:!1,size:10,radius:1e3,zIndex:getDefaultZIndex("app")},Indicator=reactExports.forwardRef((sn,ln)=>{const cn=useComponentDefaultProps("Indicator",defaultProps$k,sn),{children:dn,position:pn,offset:vn,size:kn,radius:Sn,inline:wn,withBorder:Pn,className:Nn,color:Ln,styles:Fn,label:zn,classNames:Dn,disabled:Kn,zIndex:qn,unstyled:Zn,processing:Yn,variant:Jn}=cn,rs=__objRest$n(cn,["children","position","offset","size","radius","inline","withBorder","className","color","styles","label","classNames","disabled","zIndex","unstyled","processing","variant"]),{classes:ss,cx:as}=useStyles$x({position:pn,offset:vn,radius:Sn,inline:wn,color:Ln,withBorder:Pn,zIndex:qn,withLabel:!!zn},{name:"Indicator",classNames:Dn,styles:Fn,unstyled:Zn,variant:Jn,size:kn});return jsxs$1(Box,{...__spreadValues$w({ref:ln,className:as(ss.root,Nn)},rs),children:[!Kn&&jsxs$1(Fragment$1,{children:[jsx$1("div",{className:as(ss.indicator,ss.common),children:zn}),Yn&&jsx$1("div",{className:as(ss.processing,ss.common)})]}),dn]})});Indicator.displayName="@mantine/core/Indicator";function _objectWithoutPropertiesLoose(sn,ln){if(sn==null)return{};var cn={},dn=Object.keys(sn),pn,vn;for(vn=0;vn<dn.length;vn++)pn=dn[vn],!(ln.indexOf(pn)>=0)&&(cn[pn]=sn[pn]);return cn}var index$2=reactExports.useLayoutEffect,useLatest=function(ln){var cn=reactExports.useRef(ln);return index$2(function(){cn.current=ln}),cn},updateRef=function(ln,cn){if(typeof ln=="function"){ln(cn);return}ln.current=cn},useComposedRef=function(ln,cn){var dn=reactExports.useRef();return reactExports.useCallback(function(pn){ln.current=pn,dn.current&&updateRef(dn.current,null),dn.current=cn,cn&&updateRef(cn,pn)},[cn])},HIDDEN_TEXTAREA_STYLE={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},forceHiddenStyles=function(ln){Object.keys(HIDDEN_TEXTAREA_STYLE).forEach(function(cn){ln.style.setProperty(cn,HIDDEN_TEXTAREA_STYLE[cn],"important")})},hiddenTextarea=null,getHeight=function(ln,cn){var dn=ln.scrollHeight;return cn.sizingStyle.boxSizing==="border-box"?dn+cn.borderSize:dn-cn.paddingSize};function calculateNodeHeight(sn,ln,cn,dn){cn===void 0&&(cn=1),dn===void 0&&(dn=1/0),hiddenTextarea||(hiddenTextarea=document.createElement("textarea"),hiddenTextarea.setAttribute("tabindex","-1"),hiddenTextarea.setAttribute("aria-hidden","true"),forceHiddenStyles(hiddenTextarea)),hiddenTextarea.parentNode===null&&document.body.appendChild(hiddenTextarea);var pn=sn.paddingSize,vn=sn.borderSize,kn=sn.sizingStyle,Sn=kn.boxSizing;Object.keys(kn).forEach(function(Fn){var zn=Fn;hiddenTextarea.style[zn]=kn[zn]}),forceHiddenStyles(hiddenTextarea),hiddenTextarea.value=ln;var wn=getHeight(hiddenTextarea,sn);hiddenTextarea.value="x";var Pn=hiddenTextarea.scrollHeight-pn,Nn=Pn*cn;Sn==="border-box"&&(Nn=Nn+pn+vn),wn=Math.max(Nn,wn);var Ln=Pn*dn;return Sn==="border-box"&&(Ln=Ln+pn+vn),wn=Math.min(Ln,wn),[wn,Pn]}var noop$3=function(){},pick=function(ln,cn){return ln.reduce(function(dn,pn){return dn[pn]=cn[pn],dn},{})},SIZING_STYLE=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],isIE=!!document.documentElement.currentStyle,getSizingData=function(ln){var cn=window.getComputedStyle(ln);if(cn===null)return null;var dn=pick(SIZING_STYLE,cn),pn=dn.boxSizing;if(pn==="")return null;isIE&&pn==="border-box"&&(dn.width=parseFloat(dn.width)+parseFloat(dn.borderRightWidth)+parseFloat(dn.borderLeftWidth)+parseFloat(dn.paddingRight)+parseFloat(dn.paddingLeft)+"px");var vn=parseFloat(dn.paddingBottom)+parseFloat(dn.paddingTop),kn=parseFloat(dn.borderBottomWidth)+parseFloat(dn.borderTopWidth);return{sizingStyle:dn,paddingSize:vn,borderSize:kn}},useWindowResizeListener=function(ln){var cn=useLatest(ln);reactExports.useLayoutEffect(function(){var dn=function(vn){cn.current(vn)};return window.addEventListener("resize",dn),function(){window.removeEventListener("resize",dn)}},[])},TextareaAutosize=function(ln,cn){var dn=ln.cacheMeasurements,pn=ln.maxRows,vn=ln.minRows,kn=ln.onChange,Sn=kn===void 0?noop$3:kn,wn=ln.onHeightChange,Pn=wn===void 0?noop$3:wn,Nn=_objectWithoutPropertiesLoose(ln,["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"]),Ln=Nn.value!==void 0,Fn=reactExports.useRef(null),zn=useComposedRef(Fn,cn),Dn=reactExports.useRef(0),Kn=reactExports.useRef(),qn=function(){var Jn=Fn.current,rs=dn&&Kn.current?Kn.current:getSizingData(Jn);if(rs){Kn.current=rs;var ss=calculateNodeHeight(rs,Jn.value||Jn.placeholder||"x",vn,pn),as=ss[0],ds=ss[1];Dn.current!==as&&(Dn.current=as,Jn.style.setProperty("height",as+"px","important"),Pn(as,{rowHeight:ds}))}},Zn=function(Jn){Ln||qn(),Sn(Jn)};return reactExports.useLayoutEffect(qn),useWindowResizeListener(qn),reactExports.createElement("textarea",_extends$3({},Nn,{onChange:Zn,ref:zn}))},index$1=reactExports.forwardRef(TextareaAutosize);const TextareaAutosize$1=index$1;var useStyles$u=createStyles(sn=>({input:{paddingTop:sn.spacing.xs,paddingBottom:sn.spacing.xs}}));const useStyles$v=useStyles$u;var __defProp$v=Object.defineProperty,__defProps$h=Object.defineProperties,__getOwnPropDescs$h=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$v=Object.getOwnPropertySymbols,__hasOwnProp$v=Object.prototype.hasOwnProperty,__propIsEnum$v=Object.prototype.propertyIsEnumerable,__defNormalProp$v=(sn,ln,cn)=>ln in sn?__defProp$v(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$v=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$v.call(ln,cn)&&__defNormalProp$v(sn,cn,ln[cn]);if(__getOwnPropSymbols$v)for(var cn of __getOwnPropSymbols$v(ln))__propIsEnum$v.call(ln,cn)&&__defNormalProp$v(sn,cn,ln[cn]);return sn},__spreadProps$h=(sn,ln)=>__defProps$h(sn,__getOwnPropDescs$h(ln)),__objRest$m=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$v.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$v)for(var dn of __getOwnPropSymbols$v(sn))ln.indexOf(dn)<0&&__propIsEnum$v.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$j={autosize:!1,size:"sm",__staticSelector:"Textarea"},Textarea=reactExports.forwardRef((sn,ln)=>{const cn=useComponentDefaultProps("Textarea",defaultProps$j,sn),{autosize:dn,maxRows:pn,minRows:vn,label:kn,error:Sn,description:wn,id:Pn,className:Nn,required:Ln,style:Fn,wrapperProps:zn,classNames:Dn,styles:Kn,size:qn,__staticSelector:Zn,sx:Yn,errorProps:Jn,descriptionProps:rs,labelProps:ss,inputWrapperOrder:as,inputContainer:ds,unstyled:Es,withAsterisk:Ss,variant:Qn}=cn,ms=__objRest$m(cn,["autosize","maxRows","minRows","label","error","description","id","className","required","style","wrapperProps","classNames","styles","size","__staticSelector","sx","errorProps","descriptionProps","labelProps","inputWrapperOrder","inputContainer","unstyled","withAsterisk","variant"]),Ts=useId$1(Pn),{classes:Rs,cx:ys}=useStyles$v(),{systemStyles:_s,rest:js}=extractSystemStyles(ms),bs=__spreadValues$v({required:Ln,ref:ln,error:Sn,id:Ts,classNames:__spreadProps$h(__spreadValues$v({},Dn),{input:ys(Rs.input,Dn==null?void 0:Dn.input)}),styles:Kn,__staticSelector:Zn,size:qn,multiline:!0,unstyled:Es,variant:Qn},js);return jsx$1(Input.Wrapper,{...__spreadValues$v(__spreadValues$v({label:kn,error:Sn,id:Ts,description:wn,required:Ln,style:Fn,className:Nn,classNames:Dn,styles:Kn,size:qn,__staticSelector:Zn,sx:Yn,errorProps:Jn,labelProps:ss,descriptionProps:rs,inputContainer:ds,inputWrapperOrder:as,unstyled:Es,withAsterisk:Ss,variant:Qn},_s),zn),children:dn?jsx$1(Input,{...__spreadProps$h(__spreadValues$v({},bs),{component:TextareaAutosize$1,maxRows:pn,minRows:vn})}):jsx$1(Input,{...__spreadProps$h(__spreadValues$v({},bs),{component:"textarea",rows:vn})})})});Textarea.displayName="@mantine/core/Textarea";const sizes$2={xs:{padding:`${rem(2)} ${rem(4)}`,fontSize:rem(10)},sm:{padding:`${rem(3)} ${rem(5)}`,fontSize:rem(12)},md:{padding:`${rem(4)} ${rem(7)}`,fontSize:rem(14)},lg:{padding:`${rem(5)} ${rem(9)}`,fontSize:rem(16)},xl:{padding:`${rem(8)} ${rem(14)}`,fontSize:rem(20)}};var useStyles$s=createStyles((sn,ln,{size:cn})=>{const dn=cn in sizes$2?sizes$2[cn]:sizes$2.sm;return{root:{lineHeight:sn.lineHeight,fontFamily:sn.fontFamilyMonospace,fontSize:dn.fontSize,fontWeight:700,backgroundColor:sn.colorScheme==="dark"?sn.colors.dark[5]:sn.colors.gray[0],color:sn.colorScheme==="dark"?sn.colors.dark[0]:sn.colors.gray[7],padding:dn.padding,borderRadius:sn.radius.sm,border:`${rem(1)} solid ${sn.colorScheme==="dark"?sn.colors.dark[4]:sn.colors.gray[3]}`,borderBottom:`${rem(3)} solid ${sn.colorScheme==="dark"?sn.colors.dark[4]:sn.colors.gray[3]}`}}});const useStyles$t=useStyles$s;var __defProp$u=Object.defineProperty,__getOwnPropSymbols$u=Object.getOwnPropertySymbols,__hasOwnProp$u=Object.prototype.hasOwnProperty,__propIsEnum$u=Object.prototype.propertyIsEnumerable,__defNormalProp$u=(sn,ln,cn)=>ln in sn?__defProp$u(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$u=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$u.call(ln,cn)&&__defNormalProp$u(sn,cn,ln[cn]);if(__getOwnPropSymbols$u)for(var cn of __getOwnPropSymbols$u(ln))__propIsEnum$u.call(ln,cn)&&__defNormalProp$u(sn,cn,ln[cn]);return sn},__objRest$l=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$u.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$u)for(var dn of __getOwnPropSymbols$u(sn))ln.indexOf(dn)<0&&__propIsEnum$u.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$i={size:"sm"},Kbd=reactExports.forwardRef((sn,ln)=>{const cn=useComponentDefaultProps("Kbd",defaultProps$i,sn),{className:dn,children:pn,unstyled:vn,variant:kn,size:Sn}=cn,wn=__objRest$l(cn,["className","children","unstyled","variant","size"]),{classes:Pn,cx:Nn}=useStyles$t(null,{name:"Kbd",unstyled:vn,variant:kn,size:Sn});return jsx$1(Box,{...__spreadValues$u({component:"kbd",className:Nn(Pn.root,dn),ref:ln},wn),children:pn})});Kbd.displayName="@mantine/core/Kbd";const MENU_ERRORS={context:"Menu component was not found in the tree",children:"Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported"},[MenuContextProvider,useMenuContext]=createSafeContext(MENU_ERRORS.context);var useStyles$q=createStyles(sn=>({divider:{marginTop:rem(4),marginBottom:rem(4),borderTop:`${rem(1)} solid ${sn.colorScheme==="dark"?sn.colors.dark[4]:sn.colors.gray[2]}`}}));const useStyles$r=useStyles$q;var __defProp$t=Object.defineProperty,__getOwnPropSymbols$t=Object.getOwnPropertySymbols,__hasOwnProp$t=Object.prototype.hasOwnProperty,__propIsEnum$t=Object.prototype.propertyIsEnumerable,__defNormalProp$t=(sn,ln,cn)=>ln in sn?__defProp$t(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$t=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$t.call(ln,cn)&&__defNormalProp$t(sn,cn,ln[cn]);if(__getOwnPropSymbols$t)for(var cn of __getOwnPropSymbols$t(ln))__propIsEnum$t.call(ln,cn)&&__defNormalProp$t(sn,cn,ln[cn]);return sn},__objRest$k=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$t.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$t)for(var dn of __getOwnPropSymbols$t(sn))ln.indexOf(dn)<0&&__propIsEnum$t.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$h={},MenuDivider=reactExports.forwardRef((sn,ln)=>{const cn=useComponentDefaultProps("MenuDivider",defaultProps$h,sn),{children:dn,className:pn}=cn,vn=__objRest$k(cn,["children","className"]),{classNames:kn,styles:Sn,unstyled:wn,variant:Pn}=useMenuContext(),{classes:Nn,cx:Ln}=useStyles$r(null,{name:"Menu",classNames:kn,styles:Sn,unstyled:wn,variant:Pn});return jsx$1(Box,{...__spreadValues$t({className:Ln(Nn.divider,pn),ref:ln},vn)})});MenuDivider.displayName="@mantine/core/MenuDivider";var __defProp$s=Object.defineProperty,__getOwnPropSymbols$s=Object.getOwnPropertySymbols,__hasOwnProp$s=Object.prototype.hasOwnProperty,__propIsEnum$s=Object.prototype.propertyIsEnumerable,__defNormalProp$s=(sn,ln,cn)=>ln in sn?__defProp$s(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$s=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$s.call(ln,cn)&&__defNormalProp$s(sn,cn,ln[cn]);if(__getOwnPropSymbols$s)for(var cn of __getOwnPropSymbols$s(ln))__propIsEnum$s.call(ln,cn)&&__defNormalProp$s(sn,cn,ln[cn]);return sn},__objRest$j=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$s.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$s)for(var dn of __getOwnPropSymbols$s(sn))ln.indexOf(dn)<0&&__propIsEnum$s.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$g={};function MenuDropdown(sn){const ln=useComponentDefaultProps("MenuDropdown",defaultProps$g,sn),{children:cn,onMouseEnter:dn,onMouseLeave:pn}=ln,vn=__objRest$j(ln,["children","onMouseEnter","onMouseLeave"]),kn=reactExports.useRef(),Sn=useMenuContext(),wn=Ln=>{(Ln.key==="ArrowUp"||Ln.key==="ArrowDown")&&(Ln.preventDefault(),kn.current.querySelectorAll("[data-menu-item]")[0].focus())},Pn=createEventHandler(dn,()=>Sn.trigger==="hover"&&Sn.openDropdown()),Nn=createEventHandler(pn,()=>Sn.trigger==="hover"&&Sn.closeDropdown());return jsx$1(Popover.Dropdown,{...__spreadValues$s({onMouseEnter:Pn,onMouseLeave:Nn,role:"menu","aria-orientation":"vertical"},vn),children:jsx$1("div",{tabIndex:-1,"data-menu-dropdown":!0,"data-autofocus":!0,onKeyDown:wn,ref:kn,style:{outline:0},children:cn})})}MenuDropdown.displayName="@mantine/core/MenuDropdown";var __defProp$r=Object.defineProperty,__defProps$g=Object.defineProperties,__getOwnPropDescs$g=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$r=Object.getOwnPropertySymbols,__hasOwnProp$r=Object.prototype.hasOwnProperty,__propIsEnum$r=Object.prototype.propertyIsEnumerable,__defNormalProp$r=(sn,ln,cn)=>ln in sn?__defProp$r(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$r=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$r.call(ln,cn)&&__defNormalProp$r(sn,cn,ln[cn]);if(__getOwnPropSymbols$r)for(var cn of __getOwnPropSymbols$r(ln))__propIsEnum$r.call(ln,cn)&&__defNormalProp$r(sn,cn,ln[cn]);return sn},__spreadProps$g=(sn,ln)=>__defProps$g(sn,__getOwnPropDescs$g(ln)),useStyles$o=createStyles((sn,{color:ln,radius:cn})=>({item:__spreadProps$g(__spreadValues$r({},sn.fn.fontStyles()),{WebkitTapHighlightColor:"transparent",fontSize:sn.fontSizes.sm,border:0,backgroundColor:"transparent",outline:0,width:"100%",textAlign:"left",textDecoration:"none",boxSizing:"border-box",padding:`${sn.spacing.xs} ${sn.spacing.sm}`,cursor:"pointer",borderRadius:sn.fn.radius(cn),color:ln?sn.fn.variant({variant:"filled",primaryFallback:!1,color:ln}).background:sn.colorScheme==="dark"?sn.colors.dark[0]:sn.black,display:"flex",alignItems:"center","&:disabled":{color:sn.colorScheme==="dark"?sn.colors.dark[3]:sn.colors.gray[5],pointerEvents:"none",userSelect:"none"},"&[data-hovered]":{backgroundColor:ln?sn.fn.variant({variant:"light",color:ln}).background:sn.colorScheme==="dark"?sn.fn.rgba(sn.colors.dark[3],.35):sn.colors.gray[1]}}),itemLabel:{flex:1},itemIcon:{display:"flex",justifyContent:"center",alignItems:"center",marginRight:sn.spacing.xs},itemRightSection:{}}));const useStyles$p=useStyles$o;var __defProp$q=Object.defineProperty,__defProps$f=Object.defineProperties,__getOwnPropDescs$f=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$q=Object.getOwnPropertySymbols,__hasOwnProp$q=Object.prototype.hasOwnProperty,__propIsEnum$q=Object.prototype.propertyIsEnumerable,__defNormalProp$q=(sn,ln,cn)=>ln in sn?__defProp$q(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$q=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$q.call(ln,cn)&&__defNormalProp$q(sn,cn,ln[cn]);if(__getOwnPropSymbols$q)for(var cn of __getOwnPropSymbols$q(ln))__propIsEnum$q.call(ln,cn)&&__defNormalProp$q(sn,cn,ln[cn]);return sn},__spreadProps$f=(sn,ln)=>__defProps$f(sn,__getOwnPropDescs$f(ln)),__objRest$i=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$q.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$q)for(var dn of __getOwnPropSymbols$q(sn))ln.indexOf(dn)<0&&__propIsEnum$q.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$f={},_MenuItem=reactExports.forwardRef((sn,ln)=>{const cn=useComponentDefaultProps("MenuItem",defaultProps$f,sn),{children:dn,className:pn,color:vn,closeMenuOnClick:kn,icon:Sn,rightSection:wn}=cn,Pn=__objRest$i(cn,["children","className","color","closeMenuOnClick","icon","rightSection"]),Nn=useMenuContext(),{classes:Ln,cx:Fn,theme:zn}=useStyles$p({radius:Nn.radius,color:vn},{name:"Menu",classNames:Nn.classNames,styles:Nn.styles,unstyled:Nn.unstyled,variant:Nn.variant}),Dn=reactExports.useRef(),Kn=Nn.getItemIndex(Dn.current),qn=Pn,Zn=createEventHandler(qn.onMouseLeave,()=>Nn.setHovered(-1)),Yn=createEventHandler(qn.onMouseEnter,()=>Nn.setHovered(Nn.getItemIndex(Dn.current))),Jn=createEventHandler(qn.onClick,()=>{typeof kn=="boolean"?kn&&Nn.closeDropdownImmediately():Nn.closeOnItemClick&&Nn.closeDropdownImmediately()}),rs=createEventHandler(qn.onFocus,()=>Nn.setHovered(Nn.getItemIndex(Dn.current)));return jsxs$1(Box,{...__spreadProps$f(__spreadValues$q({component:"button",type:"button"},Pn),{tabIndex:-1,onFocus:rs,className:Fn(Ln.item,pn),ref:useMergedRef(Dn,ln),role:"menuitem","data-menu-item":!0,"data-hovered":Nn.hovered===Kn?!0:void 0,onMouseEnter:Yn,onMouseLeave:Zn,onClick:Jn,onKeyDown:createScopedKeydownHandler({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:Nn.loop,dir:zn.dir,orientation:"vertical",onKeyDown:qn.onKeydown})}),children:[Sn&&jsx$1("div",{className:Ln.itemIcon,children:Sn}),dn&&jsx$1("div",{className:Ln.itemLabel,children:dn}),wn&&jsx$1("div",{className:Ln.itemRightSection,children:wn})]})});_MenuItem.displayName="@mantine/core/MenuItem";const MenuItem=_MenuItem;var useStyles$m=createStyles(sn=>({label:{color:sn.colorScheme==="dark"?sn.colors.dark[2]:sn.colors.gray[6],fontWeight:500,fontSize:sn.fontSizes.xs,padding:`calc(${sn.spacing.xs} / 2) ${sn.spacing.sm}`,cursor:"default"}}));const useStyles$n=useStyles$m;var __defProp$p=Object.defineProperty,__getOwnPropSymbols$p=Object.getOwnPropertySymbols,__hasOwnProp$p=Object.prototype.hasOwnProperty,__propIsEnum$p=Object.prototype.propertyIsEnumerable,__defNormalProp$p=(sn,ln,cn)=>ln in sn?__defProp$p(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$p=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$p.call(ln,cn)&&__defNormalProp$p(sn,cn,ln[cn]);if(__getOwnPropSymbols$p)for(var cn of __getOwnPropSymbols$p(ln))__propIsEnum$p.call(ln,cn)&&__defNormalProp$p(sn,cn,ln[cn]);return sn},__objRest$h=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$p.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$p)for(var dn of __getOwnPropSymbols$p(sn))ln.indexOf(dn)<0&&__propIsEnum$p.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$e={},MenuLabel=reactExports.forwardRef((sn,ln)=>{const cn=useComponentDefaultProps("MenuLabel",defaultProps$e,sn),{children:dn,className:pn}=cn,vn=__objRest$h(cn,["children","className"]),{classNames:kn,styles:Sn,unstyled:wn,variant:Pn}=useMenuContext(),{classes:Nn,cx:Ln}=useStyles$n(null,{name:"Menu",classNames:kn,styles:Sn,unstyled:wn,variant:Pn});return jsx$1(Text,{...__spreadValues$p({className:Ln(Nn.label,pn),ref:ln},vn),children:dn})});MenuLabel.displayName="@mantine/core/MenuLabel";var __defProp$o=Object.defineProperty,__getOwnPropSymbols$o=Object.getOwnPropertySymbols,__hasOwnProp$o=Object.prototype.hasOwnProperty,__propIsEnum$o=Object.prototype.propertyIsEnumerable,__defNormalProp$o=(sn,ln,cn)=>ln in sn?__defProp$o(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$o=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$o.call(ln,cn)&&__defNormalProp$o(sn,cn,ln[cn]);if(__getOwnPropSymbols$o)for(var cn of __getOwnPropSymbols$o(ln))__propIsEnum$o.call(ln,cn)&&__defNormalProp$o(sn,cn,ln[cn]);return sn},__objRest$g=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$o.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$o)for(var dn of __getOwnPropSymbols$o(sn))ln.indexOf(dn)<0&&__propIsEnum$o.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$d={refProp:"ref"},MenuTarget=reactExports.forwardRef((sn,ln)=>{const cn=useComponentDefaultProps("MenuTarget",defaultProps$d,sn),{children:dn,refProp:pn}=cn,vn=__objRest$g(cn,["children","refProp"]);if(!isElement$2(dn))throw new Error(MENU_ERRORS.children);const kn=useMenuContext(),Sn=createEventHandler(dn.props.onClick,()=>kn.trigger==="click"&&kn.toggleDropdown()),wn=createEventHandler(dn.props.onMouseEnter,()=>kn.trigger==="hover"&&kn.openDropdown()),Pn=createEventHandler(dn.props.onMouseLeave,()=>kn.trigger==="hover"&&kn.closeDropdown());return jsx$1(Popover.Target,{...__spreadValues$o({refProp:pn,popupType:"menu",ref:ln},vn),children:reactExports.cloneElement(dn,{onClick:Sn,onMouseEnter:wn,onMouseLeave:Pn,"data-expanded":kn.opened?!0:void 0})})});MenuTarget.displayName="@mantine/core/MenuTarget";var useStyles$k=createStyles({dropdown:{padding:rem(4)}});const useStyles$l=useStyles$k;var __defProp$n=Object.defineProperty,__defProps$e=Object.defineProperties,__getOwnPropDescs$e=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$n=Object.getOwnPropertySymbols,__hasOwnProp$n=Object.prototype.hasOwnProperty,__propIsEnum$n=Object.prototype.propertyIsEnumerable,__defNormalProp$n=(sn,ln,cn)=>ln in sn?__defProp$n(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$n=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$n.call(ln,cn)&&__defNormalProp$n(sn,cn,ln[cn]);if(__getOwnPropSymbols$n)for(var cn of __getOwnPropSymbols$n(ln))__propIsEnum$n.call(ln,cn)&&__defNormalProp$n(sn,cn,ln[cn]);return sn},__spreadProps$e=(sn,ln)=>__defProps$e(sn,__getOwnPropDescs$e(ln)),__objRest$f=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$n.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$n)for(var dn of __getOwnPropSymbols$n(sn))ln.indexOf(dn)<0&&__propIsEnum$n.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$c={closeOnItemClick:!0,loop:!0,trigger:"click",openDelay:0,closeDelay:100};function Menu(sn){const ln=useComponentDefaultProps("Menu",defaultProps$c,sn),{children:cn,onOpen:dn,onClose:pn,opened:vn,defaultOpened:kn,onChange:Sn,closeOnItemClick:wn,loop:Pn,closeOnEscape:Nn,trigger:Ln,openDelay:Fn,closeDelay:zn,classNames:Dn,styles:Kn,unstyled:qn,radius:Zn,variant:Yn}=ln,Jn=__objRest$f(ln,["children","onOpen","onClose","opened","defaultOpened","onChange","closeOnItemClick","loop","closeOnEscape","trigger","openDelay","closeDelay","classNames","styles","unstyled","radius","variant"]),{classes:rs,cx:ss}=useStyles$l(),[as,{setHovered:ds,resetHovered:Es}]=useHovered(),[Ss,Qn]=useUncontrolled({value:vn,defaultValue:kn,finalValue:!1,onChange:Sn}),ms=()=>{Qn(!1),Ss&&(pn==null||pn())},Ts=()=>{Qn(!0),!Ss&&(dn==null||dn())},Rs=()=>Ss?ms():Ts(),{openDropdown:ys,closeDropdown:_s}=useDelayedHover({open:Ts,close:ms,closeDelay:zn,openDelay:Fn}),js=bs=>getContextItemIndex("[data-menu-item]","[data-menu-dropdown]",bs);return useDidUpdate(()=>{Es()},[Ss]),jsx$1(MenuContextProvider,{value:{opened:Ss,toggleDropdown:Rs,getItemIndex:js,hovered:as,setHovered:ds,closeOnItemClick:wn,closeDropdown:Ln==="click"?ms:_s,openDropdown:Ln==="click"?Ts:ys,closeDropdownImmediately:ms,loop:Pn,trigger:Ln,radius:Zn,classNames:Dn,styles:Kn,unstyled:qn,variant:Yn},children:jsx$1(Popover,{...__spreadProps$e(__spreadValues$n({},Jn),{radius:Zn,opened:Ss,onChange:Rs,defaultOpened:kn,trapFocus:Ln==="click",closeOnEscape:Nn&&Ln==="click",__staticSelector:"Menu",classNames:__spreadProps$e(__spreadValues$n({},Dn),{dropdown:ss(rs.dropdown,Dn==null?void 0:Dn.dropdown)}),styles:Kn,unstyled:qn,variant:Yn}),children:cn})})}Menu.displayName="@mantine/core/Menu";Menu.Item=MenuItem;Menu.Label=MenuLabel;Menu.Dropdown=MenuDropdown;Menu.Target=MenuTarget;Menu.Divider=MenuDivider;const[ModalProvider,useModalContext]=createSafeContext("Modal component was not found in tree"),sizes$1={xs:rem(320),sm:rem(380),md:rem(440),lg:rem(620),xl:rem(780)};var useStyles$i=createStyles((sn,{yOffset:ln,xOffset:cn,centered:dn,fullScreen:pn},{size:vn})=>({content:{flex:pn?"0 0 100%":`0 0 ${getSize({size:vn,sizes:sizes$1})}`,maxWidth:"100%",maxHeight:pn?void 0:`calc(100vh - (${rem(ln)} * 2))`,height:pn?"100vh":void 0,borderRadius:pn?0:void 0,overflowY:"auto"},inner:{paddingTop:pn?0:ln,paddingBottom:pn?0:ln,paddingLeft:pn?0:cn,paddingRight:pn?0:cn,display:"flex",justifyContent:"center",alignItems:dn?"center":"flex-start"}}));const useStyles$j=useStyles$i;var __defProp$m=Object.defineProperty,__defProps$d=Object.defineProperties,__getOwnPropDescs$d=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$m=Object.getOwnPropertySymbols,__hasOwnProp$m=Object.prototype.hasOwnProperty,__propIsEnum$m=Object.prototype.propertyIsEnumerable,__defNormalProp$m=(sn,ln,cn)=>ln in sn?__defProp$m(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$m=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$m.call(ln,cn)&&__defNormalProp$m(sn,cn,ln[cn]);if(__getOwnPropSymbols$m)for(var cn of __getOwnPropSymbols$m(ln))__propIsEnum$m.call(ln,cn)&&__defNormalProp$m(sn,cn,ln[cn]);return sn},__spreadProps$d=(sn,ln)=>__defProps$d(sn,__getOwnPropDescs$d(ln)),__objRest$e=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$m.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$m)for(var dn of __getOwnPropSymbols$m(sn))ln.indexOf(dn)<0&&__propIsEnum$m.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$b=__spreadProps$d(__spreadValues$m({},ModalBaseDefaultProps),{yOffset:"5vh",xOffset:"5vw"});function ModalRoot(sn){const ln=useComponentDefaultProps("ModalRoot",defaultProps$b,sn),{classNames:cn,variant:dn,size:pn,yOffset:vn,xOffset:kn,scrollAreaComponent:Sn,radius:wn,centered:Pn,fullScreen:Nn}=ln,Ln=__objRest$e(ln,["classNames","variant","size","yOffset","xOffset","scrollAreaComponent","radius","centered","fullScreen"]),{classes:Fn,cx:zn}=useStyles$j({yOffset:vn,xOffset:kn,centered:Pn,fullScreen:Nn},{name:"Modal",variant:dn,size:pn});return jsx$1(ModalProvider,{value:{yOffset:vn,scrollAreaComponent:Sn,radius:wn},children:jsx$1(ModalBase,{...__spreadValues$m({__staticSelector:"Modal",size:pn,variant:dn,classNames:__spreadProps$d(__spreadValues$m({},cn),{content:zn(Fn.content,cn==null?void 0:cn.content),inner:zn(Fn.inner,cn==null?void 0:cn.inner)})},Ln)})})}var __defProp$l=Object.defineProperty,__getOwnPropSymbols$l=Object.getOwnPropertySymbols,__hasOwnProp$l=Object.prototype.hasOwnProperty,__propIsEnum$l=Object.prototype.propertyIsEnumerable,__defNormalProp$l=(sn,ln,cn)=>ln in sn?__defProp$l(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$l=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$l.call(ln,cn)&&__defNormalProp$l(sn,cn,ln[cn]);if(__getOwnPropSymbols$l)for(var cn of __getOwnPropSymbols$l(ln))__propIsEnum$l.call(ln,cn)&&__defNormalProp$l(sn,cn,ln[cn]);return sn},__objRest$d=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$l.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$l)for(var dn of __getOwnPropSymbols$l(sn))ln.indexOf(dn)<0&&__propIsEnum$l.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$a={shadow:"xl"},ModalContent=reactExports.forwardRef((sn,ln)=>{const cn=useComponentDefaultProps("ModalContent",defaultProps$a,sn),{children:dn,scrollAreaComponent:pn}=cn,vn=__objRest$d(cn,["children","scrollAreaComponent"]),kn=useModalContext(),Sn=pn||kn.scrollAreaComponent||ModalBase.NativeScrollArea;return jsx$1(ModalBase.Content,{...__spreadValues$l({ref:ln,radius:kn.radius},vn),children:jsx$1(Sn,{style:{maxHeight:`calc(100vh - (${rem(kn.yOffset)} * 2))`},children:dn})})});var __defProp$k=Object.defineProperty,__defProps$c=Object.defineProperties,__getOwnPropDescs$c=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$k=Object.getOwnPropertySymbols,__hasOwnProp$k=Object.prototype.hasOwnProperty,__propIsEnum$k=Object.prototype.propertyIsEnumerable,__defNormalProp$k=(sn,ln,cn)=>ln in sn?__defProp$k(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$k=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$k.call(ln,cn)&&__defNormalProp$k(sn,cn,ln[cn]);if(__getOwnPropSymbols$k)for(var cn of __getOwnPropSymbols$k(ln))__propIsEnum$k.call(ln,cn)&&__defNormalProp$k(sn,cn,ln[cn]);return sn},__spreadProps$c=(sn,ln)=>__defProps$c(sn,__getOwnPropDescs$c(ln)),__objRest$c=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$k.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$k)for(var dn of __getOwnPropSymbols$k(sn))ln.indexOf(dn)<0&&__propIsEnum$k.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$9=__spreadProps$c(__spreadValues$k({},ModalBaseDefaultProps),{transitionProps:{duration:200,transition:"pop"},withOverlay:!0,withCloseButton:!0});function Modal(sn){const ln=useComponentDefaultProps("Modal",defaultProps$9,sn),{title:cn,withOverlay:dn,overlayProps:pn,withCloseButton:vn,closeButtonProps:kn,children:Sn}=ln,wn=__objRest$c(ln,["title","withOverlay","overlayProps","withCloseButton","closeButtonProps","children"]),Pn=!!cn||vn;return jsxs$1(ModalRoot,{...__spreadValues$k({},wn),children:[dn&&jsx$1(ModalBase.Overlay,{...__spreadValues$k({},pn)}),jsxs$1(ModalContent,{children:[Pn&&jsxs$1(ModalBase.Header,{children:[cn&&jsx$1(ModalBase.Title,{children:cn}),vn&&jsx$1(ModalBase.CloseButton,{...__spreadValues$k({},kn)})]}),jsx$1(ModalBase.Body,{children:Sn})]})]})}Modal.Root=ModalRoot;Modal.CloseButton=ModalBase.CloseButton;Modal.Overlay=ModalBase.Overlay;Modal.Content=ModalContent;Modal.Header=ModalBase.Header;Modal.Title=ModalBase.Title;Modal.Body=ModalBase.Body;Modal.NativeScrollArea=ModalBase.NativeScrollArea;var useStyles$g=createStyles((sn,{color:ln,radius:cn,withTitle:dn})=>{const pn=sn.fn.radius(cn),vn=sn.fn.variant({variant:"filled",color:ln});return{closeButton:sn.fn.hover({backgroundColor:sn.colorScheme==="dark"?sn.colors.dark[8]:sn.colors.gray[0]}),icon:{boxSizing:"border-box",marginRight:sn.spacing.md,width:rem(28),height:rem(28),borderRadius:rem(28),display:"flex",flex:"none",alignItems:"center",justifyContent:"center",backgroundColor:vn.background,color:sn.white},root:{overflow:"hidden",boxSizing:"border-box",position:"relative",display:"flex",alignItems:"center",paddingLeft:rem(22),paddingRight:sn.spacing.xs,paddingTop:sn.spacing.xs,paddingBottom:sn.spacing.xs,borderRadius:pn,backgroundColor:sn.colorScheme==="dark"?sn.colors.dark[6]:sn.white,boxShadow:sn.shadows.lg,"&::before":{content:'""',display:"block",position:"absolute",width:rem(6),top:pn,bottom:pn,left:rem(4),borderRadius:pn,backgroundColor:vn.background},"&[data-with-icon]":{paddingLeft:sn.spacing.xs,"&::before":{display:"none"}},"&[data-with-border]":{border:`${rem(1)} solid ${sn.colorScheme==="dark"?sn.colors.dark[4]:sn.colors.gray[3]}`}},body:{flex:1,overflow:"hidden",marginRight:sn.spacing.xs},loader:{marginRight:sn.spacing.md},title:{lineHeight:1.4,marginBottom:rem(2),overflow:"hidden",textOverflow:"ellipsis",color:sn.colorScheme==="dark"?sn.white:sn.colors.gray[9]},description:{color:dn?sn.colorScheme==="dark"?sn.colors.dark[2]:sn.colors.gray[6]:sn.colorScheme==="dark"?sn.colors.dark[0]:sn.black,lineHeight:1.4,overflow:"hidden",textOverflow:"ellipsis"}}});const useStyles$h=useStyles$g;var __defProp$j=Object.defineProperty,__defProps$b=Object.defineProperties,__getOwnPropDescs$b=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$j=Object.getOwnPropertySymbols,__hasOwnProp$j=Object.prototype.hasOwnProperty,__propIsEnum$j=Object.prototype.propertyIsEnumerable,__defNormalProp$j=(sn,ln,cn)=>ln in sn?__defProp$j(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$j=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$j.call(ln,cn)&&__defNormalProp$j(sn,cn,ln[cn]);if(__getOwnPropSymbols$j)for(var cn of __getOwnPropSymbols$j(ln))__propIsEnum$j.call(ln,cn)&&__defNormalProp$j(sn,cn,ln[cn]);return sn},__spreadProps$b=(sn,ln)=>__defProps$b(sn,__getOwnPropDescs$b(ln)),__objRest$b=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$j.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$j)for(var dn of __getOwnPropSymbols$j(sn))ln.indexOf(dn)<0&&__propIsEnum$j.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$8={withCloseButton:!0},Notification=reactExports.forwardRef((sn,ln)=>{const cn=useComponentDefaultProps("Notification",defaultProps$8,sn),{className:dn,color:pn,radius:vn,loading:kn,withCloseButton:Sn,withBorder:wn,title:Pn,icon:Nn,children:Ln,onClose:Fn,closeButtonProps:zn,classNames:Dn,styles:Kn,unstyled:qn,variant:Zn}=cn,Yn=__objRest$b(cn,["className","color","radius","loading","withCloseButton","withBorder","title","icon","children","onClose","closeButtonProps","classNames","styles","unstyled","variant"]),{classes:Jn,cx:rs}=useStyles$h({color:pn,radius:vn,withTitle:!!Pn},{name:"Notification",classNames:Dn,styles:Kn,unstyled:qn,variant:Zn});return jsxs$1(Box,{...__spreadValues$j({className:rs(Jn.root,dn),"data-with-icon":!!Nn||kn||void 0,"data-with-border":wn||void 0,role:"alert",ref:ln},Yn),children:[Nn&&!kn&&jsx$1("div",{className:Jn.icon,children:Nn}),kn&&jsx$1(Loader,{size:28,color:pn,className:Jn.loader}),jsxs$1("div",{className:Jn.body,children:[Pn&&jsx$1(Text,{className:Jn.title,size:"sm",weight:500,children:Pn}),jsx$1(Text,{color:"dimmed",className:Jn.description,size:"sm",children:Ln})]}),Sn&&jsx$1(CloseButton,{...__spreadProps$b(__spreadValues$j({iconSize:16,color:"gray"},zn),{onClick:Fn,className:Jn.closeButton})})]})});Notification.displayName="@mantine/core/Notification";const TooltipGroupContext=reactExports.createContext(!1),TooltipGroupProvider=TooltipGroupContext.Provider,useTooltipGroupContext=()=>reactExports.useContext(TooltipGroupContext);function TooltipGroup({children:sn,openDelay:ln=0,closeDelay:cn=0}){return jsx$1(TooltipGroupProvider,{value:!0,children:jsx$1(FloatingDelayGroup,{delay:{open:ln,close:cn},children:sn})})}TooltipGroup.displayName="@mantine/core/TooltipGroup";var __defProp$i=Object.defineProperty,__defProps$a=Object.defineProperties,__getOwnPropDescs$a=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$i=Object.getOwnPropertySymbols,__hasOwnProp$i=Object.prototype.hasOwnProperty,__propIsEnum$i=Object.prototype.propertyIsEnumerable,__defNormalProp$i=(sn,ln,cn)=>ln in sn?__defProp$i(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$i=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$i.call(ln,cn)&&__defNormalProp$i(sn,cn,ln[cn]);if(__getOwnPropSymbols$i)for(var cn of __getOwnPropSymbols$i(ln))__propIsEnum$i.call(ln,cn)&&__defNormalProp$i(sn,cn,ln[cn]);return sn},__spreadProps$a=(sn,ln)=>__defProps$a(sn,__getOwnPropDescs$a(ln));function getColors(sn,ln){if(!ln)return{backgroundColor:sn.colorScheme==="dark"?sn.colors.gray[2]:sn.colors.gray[9],color:sn.colorScheme==="dark"?sn.black:sn.white};const cn=sn.fn.variant({variant:"filled",color:ln,primaryFallback:!1});return{backgroundColor:cn.background,color:cn.color}}var useStyles$e=createStyles((sn,{color:ln,radius:cn,width:dn,multiline:pn})=>({tooltip:__spreadProps$a(__spreadValues$i(__spreadValues$i({},sn.fn.fontStyles()),getColors(sn,ln)),{lineHeight:sn.lineHeight,fontSize:sn.fontSizes.sm,borderRadius:sn.fn.radius(cn),padding:`calc(${sn.spacing.xs} / 2) ${sn.spacing.xs}`,position:"absolute",whiteSpace:pn?"unset":"nowrap",pointerEvents:"none",width:dn}),arrow:{backgroundColor:"inherit",border:0,zIndex:1}}));const useStyles$f=useStyles$e,TOOLTIP_ERRORS={children:"Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported"};function useFloatingTooltip({offset:sn,position:ln}){const[cn,dn]=reactExports.useState(!1),pn=reactExports.useRef(),{x:vn,y:kn,reference:Sn,floating:wn,refs:Pn,update:Nn,placement:Ln}=useFloating({placement:ln,middleware:[O$9({crossAxis:!0,padding:5,rootBoundary:"document"})]}),Fn=Ln.includes("right")?sn:ln.includes("left")?sn*-1:0,zn=Ln.includes("bottom")?sn:ln.includes("top")?sn*-1:0,Dn=reactExports.useCallback(({clientX:Kn,clientY:qn})=>{Sn({getBoundingClientRect(){return{width:0,height:0,x:Kn,y:qn,left:Kn+Fn,top:qn+zn,right:Kn,bottom:qn}}})},[Sn]);return reactExports.useEffect(()=>{if(Pn.floating.current){const Kn=pn.current;Kn.addEventListener("mousemove",Dn);const qn=W$8(Pn.floating.current);return qn.forEach(Zn=>{Zn.addEventListener("scroll",Nn)}),()=>{Kn.removeEventListener("mousemove",Dn),qn.forEach(Zn=>{Zn.removeEventListener("scroll",Nn)})}}},[Sn,Pn.floating.current,Nn,Dn,cn]),{handleMouseMove:Dn,x:vn,y:kn,opened:cn,setOpened:dn,boundaryRef:pn,floating:wn}}var __defProp$h=Object.defineProperty,__defProps$9=Object.defineProperties,__getOwnPropDescs$9=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$h=Object.getOwnPropertySymbols,__hasOwnProp$h=Object.prototype.hasOwnProperty,__propIsEnum$h=Object.prototype.propertyIsEnumerable,__defNormalProp$h=(sn,ln,cn)=>ln in sn?__defProp$h(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$h=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$h.call(ln,cn)&&__defNormalProp$h(sn,cn,ln[cn]);if(__getOwnPropSymbols$h)for(var cn of __getOwnPropSymbols$h(ln))__propIsEnum$h.call(ln,cn)&&__defNormalProp$h(sn,cn,ln[cn]);return sn},__spreadProps$9=(sn,ln)=>__defProps$9(sn,__getOwnPropDescs$9(ln)),__objRest$a=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$h.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$h)for(var dn of __getOwnPropSymbols$h(sn))ln.indexOf(dn)<0&&__propIsEnum$h.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$7={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:getDefaultZIndex("popover")};function TooltipFloating(sn){var ln;const cn=useComponentDefaultProps("TooltipFloating",defaultProps$7,sn),{children:dn,refProp:pn,withinPortal:vn,portalProps:kn,style:Sn,className:wn,classNames:Pn,styles:Nn,unstyled:Ln,radius:Fn,color:zn,label:Dn,offset:Kn,position:qn,multiline:Zn,width:Yn,zIndex:Jn,disabled:rs,variant:ss}=cn,as=__objRest$a(cn,["children","refProp","withinPortal","portalProps","style","className","classNames","styles","unstyled","radius","color","label","offset","position","multiline","width","zIndex","disabled","variant"]),{handleMouseMove:ds,x:Es,y:Ss,opened:Qn,boundaryRef:ms,floating:Ts,setOpened:Rs}=useFloatingTooltip({offset:Kn,position:qn}),{classes:ys,cx:_s}=useStyles$f({radius:Fn,color:zn,multiline:Zn,width:Yn},{name:"TooltipFloating",classNames:Pn,styles:Nn,unstyled:Ln,variant:ss});if(!isElement$2(dn))throw new Error(TOOLTIP_ERRORS.children);const js=useMergedRef(ms,dn.ref),bs=xs=>{var Ks,Vs;(Vs=(Ks=dn.props).onMouseEnter)==null||Vs.call(Ks,xs),ds(xs),Rs(!0)},ks=xs=>{var Ks,Vs;(Vs=(Ks=dn.props).onMouseLeave)==null||Vs.call(Ks,xs),Rs(!1)};return jsxs$1(Fragment$1,{children:[jsx$1(OptionalPortal,{...__spreadProps$9(__spreadValues$h({},kn),{withinPortal:vn}),children:jsx$1(Box,{...__spreadProps$9(__spreadValues$h({},as),{ref:Ts,className:_s(ys.tooltip,wn),style:__spreadProps$9(__spreadValues$h({},Sn),{zIndex:Jn,display:!rs&&Qn?"block":"none",top:Ss??"",left:(ln=Math.round(Es))!=null?ln:""})}),children:Dn})}),reactExports.cloneElement(dn,__spreadProps$9(__spreadValues$h({},dn.props),{[pn]:js,onMouseEnter:bs,onMouseLeave:ks}))]})}TooltipFloating.displayName="@mantine/core/TooltipFloating";function useTooltip(sn){const[ln,cn]=reactExports.useState(!1),pn=typeof sn.opened=="boolean"?sn.opened:ln,vn=useTooltipGroupContext(),kn=useId$1(),{delay:Sn,currentId:wn,setCurrentId:Pn}=useDelayGroupContext(),Nn=reactExports.useCallback(Es=>{cn(Es),Es&&Pn(kn)},[Pn,kn]),{x:Ln,y:Fn,reference:zn,floating:Dn,context:Kn,refs:qn,update:Zn,placement:Yn,middlewareData:{arrow:{x:Jn,y:rs}={}}}=useFloating({placement:sn.position,open:pn,onOpenChange:Nn,middleware:[L$9(sn.offset),O$9({padding:8}),A$a(),arrow({element:sn.arrowRef,padding:sn.arrowOffset}),...sn.inline?[D$a()]:[]]}),{getReferenceProps:ss,getFloatingProps:as}=useInteractions([useHover(Kn,{enabled:sn.events.hover,delay:vn?Sn:{open:sn.openDelay,close:sn.closeDelay},mouseOnly:!sn.events.touch}),useFocus(Kn,{enabled:sn.events.focus,keyboardOnly:!0}),useRole(Kn,{role:"tooltip"}),useDismiss(Kn,{enabled:typeof sn.opened===void 0}),useDelayGroup(Kn,{id:kn})]);return useFloatingAutoUpdate({opened:pn,position:sn.position,positionDependencies:sn.positionDependencies,floating:{refs:qn,update:Zn}}),useDidUpdate(()=>{var Es;(Es=sn.onPositionChange)==null||Es.call(sn,Yn)},[Yn]),{x:Ln,y:Fn,arrowX:Jn,arrowY:rs,reference:zn,floating:Dn,getFloatingProps:as,getReferenceProps:ss,isGroupPhase:pn&&wn&&wn!==kn,opened:pn,placement:Yn}}var __defProp$g=Object.defineProperty,__defProps$8=Object.defineProperties,__getOwnPropDescs$8=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$g=Object.getOwnPropertySymbols,__hasOwnProp$g=Object.prototype.hasOwnProperty,__propIsEnum$g=Object.prototype.propertyIsEnumerable,__defNormalProp$g=(sn,ln,cn)=>ln in sn?__defProp$g(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$g=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$g.call(ln,cn)&&__defNormalProp$g(sn,cn,ln[cn]);if(__getOwnPropSymbols$g)for(var cn of __getOwnPropSymbols$g(ln))__propIsEnum$g.call(ln,cn)&&__defNormalProp$g(sn,cn,ln[cn]);return sn},__spreadProps$8=(sn,ln)=>__defProps$8(sn,__getOwnPropDescs$8(ln)),__objRest$9=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$g.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$g)for(var dn of __getOwnPropSymbols$g(sn))ln.indexOf(dn)<0&&__propIsEnum$g.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$6={position:"top",refProp:"ref",withinPortal:!1,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},width:"auto",events:{hover:!0,focus:!1,touch:!1},zIndex:getDefaultZIndex("popover"),positionDependencies:[]},_Tooltip=reactExports.forwardRef((sn,ln)=>{var cn;const dn=reactExports.useRef(null),pn=useComponentDefaultProps("Tooltip",defaultProps$6,sn),{children:vn,position:kn,refProp:Sn,label:wn,openDelay:Pn,closeDelay:Nn,onPositionChange:Ln,opened:Fn,withinPortal:zn,portalProps:Dn,radius:Kn,color:qn,classNames:Zn,styles:Yn,unstyled:Jn,style:rs,className:ss,withArrow:as,arrowSize:ds,arrowOffset:Es,arrowRadius:Ss,arrowPosition:Qn,offset:ms,transitionProps:Ts,multiline:Rs,width:ys,events:_s,zIndex:js,disabled:bs,positionDependencies:ks,onClick:xs,onMouseEnter:Ks,onMouseLeave:Vs,inline:Js,variant:ru,keepMounted:hs}=pn,lu=__objRest$9(pn,["children","position","refProp","label","openDelay","closeDelay","onPositionChange","opened","withinPortal","portalProps","radius","color","classNames","styles","unstyled","style","className","withArrow","arrowSize","arrowOffset","arrowRadius","arrowPosition","offset","transitionProps","multiline","width","events","zIndex","disabled","positionDependencies","onClick","onMouseEnter","onMouseLeave","inline","variant","keepMounted"]),{classes:_u,cx:yu,theme:Xu}=useStyles$f({radius:Kn,color:qn,width:ys,multiline:Rs},{name:"Tooltip",classNames:Zn,styles:Yn,unstyled:Jn,variant:ru}),Du=useTooltip({position:getFloatingPosition(Xu.dir,kn),closeDelay:Nn,openDelay:Pn,onPositionChange:Ln,opened:Fn,events:_s,arrowRef:dn,arrowOffset:Es,offset:ms+(as?ds/2:0),positionDependencies:[...ks,vn],inline:Js});if(!isElement$2(vn))throw new Error(TOOLTIP_ERRORS.children);const Fl=useMergedRef(Du.reference,vn.ref,ln);return jsxs$1(Fragment$1,{children:[jsx$1(OptionalPortal,{...__spreadProps$8(__spreadValues$g({},Dn),{withinPortal:zn}),children:jsx$1(Transition$2,{...__spreadProps$8(__spreadValues$g({keepMounted:hs,mounted:!bs&&Du.opened},Ts),{transition:Ts.transition||"fade",duration:Du.isGroupPhase?10:(cn=Ts.duration)!=null?cn:100}),children:Vp=>{var Ys,vu;return jsxs$1(Box,{...__spreadValues$g(__spreadValues$g({},lu),Du.getFloatingProps({ref:Du.floating,className:_u.tooltip,style:__spreadProps$8(__spreadValues$g(__spreadValues$g({},rs),Vp),{zIndex:js,top:(Ys=Du.y)!=null?Ys:0,left:(vu=Du.x)!=null?vu:0})})),children:[wn,jsx$1(FloatingArrow,{ref:dn,arrowX:Du.arrowX,arrowY:Du.arrowY,visible:as,position:Du.placement,arrowSize:ds,arrowOffset:Es,arrowRadius:Ss,arrowPosition:Qn,className:_u.arrow})]})}})}),reactExports.cloneElement(vn,Du.getReferenceProps(__spreadValues$g({onClick:xs,onMouseEnter:Ks,onMouseLeave:Vs,onMouseMove:sn.onMouseMove,onPointerDown:sn.onPointerDown,onPointerEnter:sn.onPointerEnter,[Sn]:Fl,className:yu(ss,vn.props.className)},vn.props)))]})});_Tooltip.Group=TooltipGroup;_Tooltip.Floating=TooltipFloating;_Tooltip.displayName="@mantine/core/Tooltip";const Tooltip=_Tooltip;var __defProp$f=Object.defineProperty,__getOwnPropSymbols$f=Object.getOwnPropertySymbols,__hasOwnProp$f=Object.prototype.hasOwnProperty,__propIsEnum$f=Object.prototype.propertyIsEnumerable,__defNormalProp$f=(sn,ln,cn)=>ln in sn?__defProp$f(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$f=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$f.call(ln,cn)&&__defNormalProp$f(sn,cn,ln[cn]);if(__getOwnPropSymbols$f)for(var cn of __getOwnPropSymbols$f(ln))__propIsEnum$f.call(ln,cn)&&__defNormalProp$f(sn,cn,ln[cn]);return sn};function StarIcon(sn){return jsx$1("svg",{...__spreadValues$f({viewBox:"0 0 24 24",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",xmlns:"http://www.w3.org/2000/svg"},sn),children:jsx$1("path",{d:"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z"})})}StarIcon.displayName="@mantine/core/StarIcon";const sizes={xs:rem(14),sm:rem(18),md:rem(20),lg:rem(28),xl:rem(32)};var useStyles$c=createStyles((sn,{type:ln,color:cn},{size:dn})=>{const pn=sn.colorScheme==="light"?sn.colors.gray[3]:sn.colors.gray[8],vn=sn.fn.variant({variant:"filled",color:cn,primaryFallback:!1}).background;return{icon:{stroke:ln==="empty"?pn:vn,fill:ln==="empty"?pn:vn,width:getSize({size:dn,sizes}),height:getSize({size:dn,sizes})}}});const useStyles$d=useStyles$c;function StarSymbol({size:sn,type:ln,color:cn}){const{classes:dn}=useStyles$d({type:ln,color:cn},{name:"Rating",size:sn});return jsx$1(StarIcon,{className:dn.icon})}StarSymbol.displayName="@mantine/core/StarSymbol";var useStyles$a=createStyles(sn=>({input:{height:0,width:0,position:"absolute",overflow:"hidden",whiteSpace:"nowrap",opacity:0,"&:focus":{[`& + .${getStylesRef("label")}`]:{outline:sn.focusRing==="always"||sn.focusRing==="auto"?`${rem(1)} solid ${sn.colors[sn.primaryColor][sn.colorScheme==="dark"?7:5]}`:void 0},"&:focus:not(:focus-visible)":{[`& + .${getStylesRef("label")}`]:{outline:sn.focusRing==="auto"||sn.focusRing==="never"?"none":void 0}}}},label:{ref:getStylesRef("label"),display:"block",boxSizing:"border-box",margin:rem(1),top:0,left:0,cursor:"pointer",position:"absolute",zIndex:0,"&[data-read-only]":{cursor:"default"},"&:last-of-type":{position:"relative",zIndex:0}},symbolBody:{display:"grid",placeContent:"center",placeItems:"center"}}));const useStyles$b=useStyles$a;var __defProp$e=Object.defineProperty,__getOwnPropSymbols$e=Object.getOwnPropertySymbols,__hasOwnProp$e=Object.prototype.hasOwnProperty,__propIsEnum$e=Object.prototype.propertyIsEnumerable,__defNormalProp$e=(sn,ln,cn)=>ln in sn?__defProp$e(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$e=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$e.call(ln,cn)&&__defNormalProp$e(sn,cn,ln[cn]);if(__getOwnPropSymbols$e)for(var cn of __getOwnPropSymbols$e(ln))__propIsEnum$e.call(ln,cn)&&__defNormalProp$e(sn,cn,ln[cn]);return sn},__objRest$8=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$e.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$e)for(var dn of __getOwnPropSymbols$e(sn))ln.indexOf(dn)<0&&__propIsEnum$e.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};function RatingItem(sn){var ln=sn,{size:cn,getSymbolLabel:dn,emptyIcon:pn,fullIcon:vn,full:kn,active:Sn,value:wn,readOnly:Pn,fractionValue:Nn,classNames:Ln,styles:Fn,unstyled:zn,color:Dn,id:Kn,variant:qn,onChange:Zn}=ln,Yn=__objRest$8(ln,["size","getSymbolLabel","emptyIcon","fullIcon","full","active","value","readOnly","fractionValue","classNames","styles","unstyled","color","id","variant","onChange"]);const{classes:Jn}=useStyles$b(null,{name:"Rating",classNames:Ln,styles:Fn,unstyled:zn,size:cn,variant:qn}),rs=typeof vn=="function"?vn(wn):vn,ss=typeof pn=="function"?pn(wn):pn;return jsxs$1(Fragment$1,{children:[!Pn&&jsx$1("input",{...__spreadValues$e({onKeyDown:as=>as.key===" "&&Zn(wn),className:Jn.input,id:Kn,type:"radio","data-active":Sn,"aria-label":dn(wn),value:wn,onChange:Zn},Yn)}),jsx$1(Box,{component:Pn?"div":"label",className:Jn.label,"data-read-only":Pn||void 0,htmlFor:Kn,sx:Nn===1?void 0:{zIndex:Sn?2:0},onClick:()=>Zn(wn),children:jsx$1(Box,{className:Jn.symbolBody,sx:Nn===1?void 0:{clipPath:`inset(0 ${Sn?100-Nn*100:100}% 0 0)`},children:kn?rs||jsx$1(StarSymbol,{color:Dn,size:cn,type:"full"}):ss||jsx$1(StarSymbol,{color:Dn,size:cn,type:"empty"})})})]})}RatingItem.displayName="@mantine/core/RatingItem";var useStyles$8=createStyles(()=>({root:{display:"flex",width:"max-content","&:has(input:disabled)":{pointerEvents:"none",cursor:"not-allowed"}},symbolGroup:{position:"relative",transition:"transform 100ms ease",'&[data-active="true"]':{zIndex:1,transform:"scale(1.2)"}}}));const useStyles$9=useStyles$8;var __defProp$d=Object.defineProperty,__getOwnPropSymbols$d=Object.getOwnPropertySymbols,__hasOwnProp$d=Object.prototype.hasOwnProperty,__propIsEnum$d=Object.prototype.propertyIsEnumerable,__defNormalProp$d=(sn,ln,cn)=>ln in sn?__defProp$d(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$d=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$d.call(ln,cn)&&__defNormalProp$d(sn,cn,ln[cn]);if(__getOwnPropSymbols$d)for(var cn of __getOwnPropSymbols$d(ln))__propIsEnum$d.call(ln,cn)&&__defNormalProp$d(sn,cn,ln[cn]);return sn},__objRest$7=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$d.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$d)for(var dn of __getOwnPropSymbols$d(sn))ln.indexOf(dn)<0&&__propIsEnum$d.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};function roundValueTo(sn,ln){var cn;const dn=Math.round(sn/ln)*ln,pn=((cn=`${ln}`.split(".")[1])==null?void 0:cn.length)||0;return Number(dn.toFixed(pn))}const defaultProps$5={size:"sm",getSymbolLabel:sn=>`${sn}`,count:5,fractions:1,color:"yellow"},Rating=reactExports.forwardRef((sn,ln)=>{const cn=useComponentDefaultProps("Rating",defaultProps$5,sn),{defaultValue:dn,value:pn,emptySymbol:vn,fullSymbol:kn,size:Sn,count:wn,fractions:Pn,onChange:Nn,onHover:Ln,getSymbolLabel:Fn,name:zn,readOnly:Dn,className:Kn,classNames:qn,styles:Zn,unstyled:Yn,onMouseEnter:Jn,onMouseMove:rs,onMouseLeave:ss,highlightSelectedOnly:as,color:ds,id:Es,variant:Ss}=cn,Qn=__objRest$7(cn,["defaultValue","value","emptySymbol","fullSymbol","size","count","fractions","onChange","onHover","getSymbolLabel","name","readOnly","className","classNames","styles","unstyled","onMouseEnter","onMouseMove","onMouseLeave","highlightSelectedOnly","color","id","variant"]),{classes:ms,cx:Ts,theme:Rs}=useStyles$9(null,{name:"Rating",classNames:qn,styles:Zn,unstyled:Yn,variant:Ss,size:Sn}),ys=useId$1(zn),_s=useId$1(Es),js=reactExports.useRef(null),[bs,ks]=useUncontrolled({value:pn,defaultValue:dn,finalValue:0,onChange:Nn}),[xs,Ks]=reactExports.useState(-1),[Vs,Js]=reactExports.useState(!0),ru=Math.floor(Pn),hs=Math.floor(wn),lu=1/ru,_u=roundValueTo(bs,lu),yu=xs!==-1?xs:_u,Xu=Wl=>{Jn==null||Jn(Wl),!Dn&&Js(!1)},Du=Wl=>{if(rs==null||rs(Wl),Dn)return;const{left:lp,right:am,width:fl}=js.current.getBoundingClientRect(),Tu=fl/hs,wp=(Rs.dir==="rtl"?am-Wl.clientX:Wl.clientX-lp)/Tu,ry=clamp(roundValueTo(wp+lu/2,lu),lu,hs);Ks(ry),ry!==xs&&(Ln==null||Ln(ry))},Fl=Wl=>{ss==null||ss(Wl),!Dn&&(Ks(-1),Js(!0),xs!==-1&&(Ln==null||Ln(-1)))},Vp=()=>Vs&&Ks(-1),Ys=Wl=>{ks(typeof Wl=="number"?Wl:parseFloat(Wl.target.value))},vu=Array(hs).fill(0).map((Wl,lp)=>{const am=lp+1,fl=Array.from(new Array(lp===0?ru+1:ru)),Tu=!Dn&&Math.ceil(xs)===am;return jsx$1("div",{"data-active":Tu,className:ms.symbolGroup,children:fl.map((cp,wp)=>{const ry=lu*(lp===0?wp:wp+1),vp=roundValueTo(am-1+ry,lu);return jsx$1(RatingItem,{size:Sn,variant:Ss,getSymbolLabel:Fn,emptyIcon:vn,fullIcon:kn,full:as?vp===yu:vp<=yu,active:vp===yu,checked:vp===_u,readOnly:Dn,fractionValue:ry,value:vp,name:ys,onChange:Ys,onBlur:Vp,classNames:qn,styles:Zn,unstyled:Yn,color:ds,id:`${_s}-${lp}-${wp}`},`${am}-${vp}`)})},am)});return jsx$1(Box,{...__spreadValues$d({ref:useMergedRef(js,ln),className:Ts(ms.root,Kn),onMouseMove:Du,onMouseEnter:Xu,onMouseLeave:Fl},Qn),children:vu})});Rating.displayName="@mantine/core/Rating";var useStyles$6=createStyles((sn,{spacing:ln,align:cn,justify:dn})=>({root:{display:"flex",flexDirection:"column",alignItems:cn,justifyContent:dn,gap:getSize({size:ln,sizes:sn.spacing})}}));const useStyles$7=useStyles$6;var __defProp$c=Object.defineProperty,__getOwnPropSymbols$c=Object.getOwnPropertySymbols,__hasOwnProp$c=Object.prototype.hasOwnProperty,__propIsEnum$c=Object.prototype.propertyIsEnumerable,__defNormalProp$c=(sn,ln,cn)=>ln in sn?__defProp$c(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$c=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$c.call(ln,cn)&&__defNormalProp$c(sn,cn,ln[cn]);if(__getOwnPropSymbols$c)for(var cn of __getOwnPropSymbols$c(ln))__propIsEnum$c.call(ln,cn)&&__defNormalProp$c(sn,cn,ln[cn]);return sn},__objRest$6=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$c.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$c)for(var dn of __getOwnPropSymbols$c(sn))ln.indexOf(dn)<0&&__propIsEnum$c.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$4={spacing:"md",align:"stretch",justify:"flex-start"},Stack=reactExports.forwardRef((sn,ln)=>{const cn=useComponentDefaultProps("Stack",defaultProps$4,sn),{spacing:dn,className:pn,align:vn,justify:kn,unstyled:Sn,variant:wn}=cn,Pn=__objRest$6(cn,["spacing","className","align","justify","unstyled","variant"]),{classes:Nn,cx:Ln}=useStyles$7({spacing:dn,align:vn,justify:kn},{name:"Stack",unstyled:Sn,variant:wn});return jsx$1(Box,{...__spreadValues$c({className:Ln(Nn.root,pn),ref:ln},Pn)})});Stack.displayName="@mantine/core/Stack";const SwitchGroupContext=reactExports.createContext(null),SwitchGroupProvider=SwitchGroupContext.Provider,useSwitchGroupContext=()=>reactExports.useContext(SwitchGroupContext);var __defProp$b=Object.defineProperty,__getOwnPropSymbols$b=Object.getOwnPropertySymbols,__hasOwnProp$b=Object.prototype.hasOwnProperty,__propIsEnum$b=Object.prototype.propertyIsEnumerable,__defNormalProp$b=(sn,ln,cn)=>ln in sn?__defProp$b(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$b=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$b.call(ln,cn)&&__defNormalProp$b(sn,cn,ln[cn]);if(__getOwnPropSymbols$b)for(var cn of __getOwnPropSymbols$b(ln))__propIsEnum$b.call(ln,cn)&&__defNormalProp$b(sn,cn,ln[cn]);return sn},__objRest$5=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$b.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$b)for(var dn of __getOwnPropSymbols$b(sn))ln.indexOf(dn)<0&&__propIsEnum$b.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$3={size:"sm"},SwitchGroup=reactExports.forwardRef((sn,ln)=>{const cn=useComponentDefaultProps("SwitchGroup",defaultProps$3,sn),{children:dn,value:pn,defaultValue:vn,onChange:kn,size:Sn,wrapperProps:wn}=cn,Pn=__objRest$5(cn,["children","value","defaultValue","onChange","size","wrapperProps"]),[Nn,Ln]=useUncontrolled({value:pn,defaultValue:vn,finalValue:[],onChange:kn});return jsx$1(SwitchGroupProvider,{value:{value:Nn,onChange:zn=>{const Dn=zn.currentTarget.value;Ln(Nn.includes(Dn)?Nn.filter(Kn=>Kn!==Dn):[...Nn,Dn])},size:Sn},children:jsx$1(Input.Wrapper,{...__spreadValues$b(__spreadValues$b({labelElement:"div",size:Sn,__staticSelector:"SwitchGroup",ref:ln},wn),Pn),children:dn})})});SwitchGroup.displayName="@mantine/core/SwitchGroup";var __defProp$a=Object.defineProperty,__defProps$7=Object.defineProperties,__getOwnPropDescs$7=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$a=Object.getOwnPropertySymbols,__hasOwnProp$a=Object.prototype.hasOwnProperty,__propIsEnum$a=Object.prototype.propertyIsEnumerable,__defNormalProp$a=(sn,ln,cn)=>ln in sn?__defProp$a(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$a=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$a.call(ln,cn)&&__defNormalProp$a(sn,cn,ln[cn]);if(__getOwnPropSymbols$a)for(var cn of __getOwnPropSymbols$a(ln))__propIsEnum$a.call(ln,cn)&&__defNormalProp$a(sn,cn,ln[cn]);return sn},__spreadProps$7=(sn,ln)=>__defProps$7(sn,__getOwnPropDescs$7(ln));const switchHeight={xs:rem(16),sm:rem(20),md:rem(24),lg:rem(30),xl:rem(36)},switchWidth={xs:rem(32),sm:rem(38),md:rem(46),lg:rem(56),xl:rem(72)},handleSizes={xs:rem(12),sm:rem(14),md:rem(18),lg:rem(22),xl:rem(28)},labelFontSizes={xs:rem(5),sm:rem(6),md:rem(7),lg:rem(9),xl:rem(11)},trackLabelPaddings={xs:rem(4),sm:rem(5),md:rem(6),lg:rem(8),xl:rem(10)};var useStyles$4=createStyles((sn,{radius:ln,color:cn,labelPosition:dn,error:pn},{size:vn})=>{const kn=getSize({size:vn,sizes:handleSizes}),Sn=getSize({size:ln,sizes:sn.radius}),wn=sn.fn.variant({variant:"filled",color:cn}),Pn=getSize({size:vn,sizes:switchWidth}),Nn=rem(vn==="xs"?1:2),Ln=sn.fn.variant({variant:"filled",color:"red"}).background;return{root:{position:"relative"},input:{height:0,width:0,overflow:"hidden",whiteSpace:"nowrap",padding:0,WebkitClipPath:"inset(50%)",clipPath:"inset(50%)",position:"absolute"},track:__spreadProps$7(__spreadValues$a({},sn.fn.focusStyles("input:focus + &")),{cursor:sn.cursorType,overflow:"hidden",WebkitTapHighlightColor:"transparent",position:"relative",borderRadius:Sn,backgroundColor:sn.colorScheme==="dark"?sn.colors.dark[6]:sn.colors.gray[2],border:`${rem(1)} solid ${pn?Ln:sn.colorScheme==="dark"?sn.colors.dark[4]:sn.colors.gray[3]}`,height:getSize({size:vn,sizes:switchHeight}),minWidth:Pn,margin:0,transitionProperty:"background-color, border-color",transitionTimingFunction:sn.transitionTimingFunction,transitionDuration:"150ms",boxSizing:"border-box",appearance:"none",display:"flex",alignItems:"center",fontSize:getSize({size:vn,sizes:labelFontSizes}),fontWeight:600,order:dn==="left"?2:1,userSelect:"none",zIndex:0,lineHeight:0,color:sn.colorScheme==="dark"?sn.colors.dark[1]:sn.colors.gray[6],transition:`color 150ms ${sn.transitionTimingFunction}`,"input:checked + &":{backgroundColor:wn.background,borderColor:wn.background,color:sn.white,transition:`color 150ms ${sn.transitionTimingFunction}`},"input:disabled + &":{backgroundColor:sn.colorScheme==="dark"?sn.colors.dark[4]:sn.colors.gray[2],borderColor:sn.colorScheme==="dark"?sn.colors.dark[4]:sn.colors.gray[2],cursor:"not-allowed",pointerEvents:"none"}}),thumb:{position:"absolute",zIndex:1,borderRadius:Sn,boxSizing:"border-box",display:"flex",backgroundColor:sn.white,height:kn,width:kn,border:`${rem(1)} solid ${sn.colorScheme==="dark"?sn.white:sn.colors.gray[3]}`,left:Nn,transition:`left 150ms ${sn.transitionTimingFunction}`,"& > *":{margin:"auto"},"@media (prefers-reduced-motion)":{transitionDuration:sn.respectReducedMotion?"0ms":""},"input:checked + * > &":{left:`calc(100% - ${kn} - ${Nn})`,borderColor:sn.white},"input:disabled + * > &":{borderColor:sn.colorScheme==="dark"?sn.colors.dark[4]:sn.colors.gray[2],backgroundColor:sn.colorScheme==="dark"?sn.colors.dark[3]:sn.colors.gray[0]}},trackLabel:{height:"100%",display:"grid",placeContent:"center",minWidth:`calc(${Pn} - ${kn})`,paddingInline:getSize({size:vn,sizes:trackLabelPaddings}),margin:`0 0 0 calc(${kn} + ${Nn})`,transition:`margin 150ms ${sn.transitionTimingFunction}`,"input:checked + * > &":{margin:`0 calc(${kn} + ${Nn}) 0 0`}}}});const useStyles$5=useStyles$4;var __defProp$9=Object.defineProperty,__defProps$6=Object.defineProperties,__getOwnPropDescs$6=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$9=Object.getOwnPropertySymbols,__hasOwnProp$9=Object.prototype.hasOwnProperty,__propIsEnum$9=Object.prototype.propertyIsEnumerable,__defNormalProp$9=(sn,ln,cn)=>ln in sn?__defProp$9(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$9=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$9.call(ln,cn)&&__defNormalProp$9(sn,cn,ln[cn]);if(__getOwnPropSymbols$9)for(var cn of __getOwnPropSymbols$9(ln))__propIsEnum$9.call(ln,cn)&&__defNormalProp$9(sn,cn,ln[cn]);return sn},__spreadProps$6=(sn,ln)=>__defProps$6(sn,__getOwnPropDescs$6(ln)),__objRest$4=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$9.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$9)for(var dn of __getOwnPropSymbols$9(sn))ln.indexOf(dn)<0&&__propIsEnum$9.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$2={offLabel:"",onLabel:"",size:"sm",radius:"xl",error:!1},Switch=reactExports.forwardRef((sn,ln)=>{var cn;const dn=useComponentDefaultProps("Switch",defaultProps$2,sn),{className:pn,color:vn,label:kn,offLabel:Sn,onLabel:wn,id:Pn,style:Nn,size:Ln,radius:Fn,wrapperProps:zn,children:Dn,unstyled:Kn,styles:qn,classNames:Zn,thumbIcon:Yn,sx:Jn,checked:rs,defaultChecked:ss,onChange:as,labelPosition:ds,description:Es,error:Ss,disabled:Qn,variant:ms}=dn,Ts=__objRest$4(dn,["className","color","label","offLabel","onLabel","id","style","size","radius","wrapperProps","children","unstyled","styles","classNames","thumbIcon","sx","checked","defaultChecked","onChange","labelPosition","description","error","disabled","variant"]),Rs=useSwitchGroupContext(),ys=(Rs==null?void 0:Rs.size)||Ln,{classes:_s,cx:js}=useStyles$5({color:vn,radius:Fn,labelPosition:ds,error:!!Ss},{name:"Switch",classNames:Zn,styles:qn,unstyled:Kn,size:ys,variant:ms}),{systemStyles:bs,rest:ks}=extractSystemStyles(Ts),xs=useId$1(Pn),Ks=Rs?{checked:Rs.value.includes(ks.value),onChange:Rs.onChange}:{},[Vs,Js]=useUncontrolled({value:(cn=Ks.checked)!=null?cn:rs,defaultValue:ss,finalValue:!1});return jsxs$1(InlineInput,{...__spreadValues$9(__spreadValues$9({className:js(pn,_s.root),sx:Jn,style:Nn,id:xs,size:(Rs==null?void 0:Rs.size)||Ln,labelPosition:ds,label:kn,description:Es,error:Ss,disabled:Qn,__staticSelector:"Switch",classNames:Zn,styles:qn,unstyled:Kn,"data-checked":Ks.checked||void 0,variant:ms},bs),zn),children:[jsx$1("input",{...__spreadProps$6(__spreadValues$9({},ks),{disabled:Qn,checked:Vs,onChange:ru=>{Rs?Ks.onChange(ru):as==null||as(ru),Js(ru.currentTarget.checked)},id:xs,ref:ln,type:"checkbox",className:_s.input})}),jsxs$1("label",{htmlFor:xs,className:_s.track,children:[jsx$1("div",{className:_s.thumb,children:Yn}),jsx$1("div",{className:_s.trackLabel,children:Vs?wn:Sn})]})]})});Switch.displayName="@mantine/core/Switch";Switch.Group=SwitchGroup;var __defProp$8=Object.defineProperty,__defProps$5=Object.defineProperties,__getOwnPropDescs$5=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$8=Object.getOwnPropertySymbols,__hasOwnProp$8=Object.prototype.hasOwnProperty,__propIsEnum$8=Object.prototype.propertyIsEnumerable,__defNormalProp$8=(sn,ln,cn)=>ln in sn?__defProp$8(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$8=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$8.call(ln,cn)&&__defNormalProp$8(sn,cn,ln[cn]);if(__getOwnPropSymbols$8)for(var cn of __getOwnPropSymbols$8(ln))__propIsEnum$8.call(ln,cn)&&__defNormalProp$8(sn,cn,ln[cn]);return sn},__spreadProps$5=(sn,ln)=>__defProps$5(sn,__getOwnPropDescs$5(ln));function getFontSize(sn,ln,cn){return typeof sn<"u"?sn in cn.headings.sizes?cn.headings.sizes[sn].fontSize:rem(sn):cn.headings.sizes[ln].fontSize}function getLineHeight(sn,ln,cn){return typeof sn<"u"&&sn in cn.headings.sizes?cn.headings.sizes[sn].lineHeight:cn.headings.sizes[ln].lineHeight}var useStyles$2=createStyles((sn,{element:ln,weight:cn,inline:dn},{size:pn})=>({root:__spreadProps$5(__spreadValues$8({},sn.fn.fontStyles()),{fontFamily:sn.headings.fontFamily,fontWeight:cn||sn.headings.sizes[ln].fontWeight||sn.headings.fontWeight,fontSize:getFontSize(pn,ln,sn),lineHeight:dn?1:getLineHeight(pn,ln,sn),margin:0})}));const useStyles$3=useStyles$2;var __defProp$7=Object.defineProperty,__getOwnPropSymbols$7=Object.getOwnPropertySymbols,__hasOwnProp$7=Object.prototype.hasOwnProperty,__propIsEnum$7=Object.prototype.propertyIsEnumerable,__defNormalProp$7=(sn,ln,cn)=>ln in sn?__defProp$7(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$7=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$7.call(ln,cn)&&__defNormalProp$7(sn,cn,ln[cn]);if(__getOwnPropSymbols$7)for(var cn of __getOwnPropSymbols$7(ln))__propIsEnum$7.call(ln,cn)&&__defNormalProp$7(sn,cn,ln[cn]);return sn},__objRest$3=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$7.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$7)for(var dn of __getOwnPropSymbols$7(sn))ln.indexOf(dn)<0&&__propIsEnum$7.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const defaultProps$1={order:1},Title=reactExports.forwardRef((sn,ln)=>{const cn=useComponentDefaultProps("Title",defaultProps$1,sn),{className:dn,order:pn,children:vn,unstyled:kn,size:Sn,weight:wn,inline:Pn,variant:Nn}=cn,Ln=__objRest$3(cn,["className","order","children","unstyled","size","weight","inline","variant"]),{classes:Fn,cx:zn}=useStyles$3({element:`h${pn}`,weight:wn,inline:Pn},{name:"Title",unstyled:kn,variant:Nn,size:Sn});return[1,2,3,4,5,6].includes(pn)?jsx$1(Text,{...__spreadValues$7({variant:Nn,component:`h${pn}`,ref:ln,className:zn(Fn.root,dn)},Ln),children:vn}):null});Title.displayName="@mantine/core/Title";var A$9={infgreen:["#E5F9F1","#BFF0DB","#99E7C6","#73DFB1","#4CD69C","#26CD86","#00C471","#00A760","#00894F","#006C3E"],rallit:["#E5FAF7","#BFF2EA","#99EBDD","#73E3D0","#4DDBC3","#26D4B7","#00CCAA","#00AD90","#008F77","#00705D"],dark:["#C1C2C5","#A6A7AB","#909296","#5c5f66","#373A40","#2C2E33","#25262b","#1A1B1E","#141517","#101113"],gray:["#F8F9FA","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},y$9={xs:576,sm:768,md:1024,lg:1200,xl:1400},lr$3=16,D$8=sn=>`${sn/lr$3}em`,xt$3={xs:D$8(y$9.xs),sm:D$8(y$9.sm),md:D$8(y$9.md),lg:D$8(y$9.lg),xl:D$8(y$9.xl)},P$6={tablet:y$9.md,mobile:y$9.sm,smallMobile:y$9.xs},q$8=sn=>`@media (max-width: ${sn}px)`,sr$3={tablet:q$8(P$6.tablet),mobile:q$8(P$6.mobile),smallMobile:q$8(P$6.smallMobile)},pr$3=typeof global=="object"&&global&&global.Object===Object&&global,Q$5=pr$3,ur$3=typeof self=="object"&&self&&self.Object===Object&&self,mr$3=Q$5||ur$3||Function("return this")(),c$c=mr$3,dr$3=c$c.Symbol,b$a=dr$3,ht$3=Object.prototype,cr$3=ht$3.hasOwnProperty,xr$3=ht$3.toString,W$7=b$a?b$a.toStringTag:void 0;function hr$3(sn){var ln=cr$3.call(sn,W$7),cn=sn[W$7];try{sn[W$7]=void 0;var dn=!0}catch{}var pn=xr$3.call(sn);return dn&&(ln?sn[W$7]=cn:delete sn[W$7]),pn}var gt$3=hr$3,gr$3=Object.prototype,yr$3=gr$3.toString;function br$3(sn){return yr$3.call(sn)}var yt$3=br$3,_r$3="[object Null]",Tr$2="[object Undefined]",bt$3=b$a?b$a.toStringTag:void 0;function Sr$2(sn){return sn==null?sn===void 0?Tr$2:_r$3:bt$3&&bt$3 in Object(sn)?gt$3(sn):yt$3(sn)}var h$7=Sr$2;function wr$3(sn){return sn!=null&&typeof sn=="object"}var x$c=wr$3,vr$2="[object Symbol]";function Or$2(sn){return typeof sn=="symbol"||x$c(sn)&&h$7(sn)==vr$2}var C$7=Or$2;function Ar$2(sn,ln){for(var cn=-1,dn=sn==null?0:sn.length,pn=Array(dn);++cn<dn;)pn[cn]=ln(sn[cn],cn,sn);return pn}var _t$3=Ar$2,Pr$3=Array.isArray,d$a=Pr$3,Cr$2=1/0,Tt$3=b$a?b$a.prototype:void 0,St$3=Tt$3?Tt$3.toString:void 0;function wt$3(sn){if(typeof sn=="string")return sn;if(d$a(sn))return _t$3(sn,wt$3)+"";if(C$7(sn))return St$3?St$3.call(sn):"";var ln=sn+"";return ln=="0"&&1/sn==-Cr$2?"-0":ln}var vt$3=wt$3;function Ir$2(sn){var ln=typeof sn;return sn!=null&&(ln=="object"||ln=="function")}var u$8=Ir$2;function Mr$3(sn){return sn}var Z$5=Mr$3,Er$2="[object AsyncFunction]",Rr$3="[object Function]",Kr$2="[object GeneratorFunction]",Nr$2="[object Proxy]";function Fr$2(sn){if(!u$8(sn))return!1;var ln=h$7(sn);return ln==Rr$3||ln==Kr$2||ln==Er$2||ln==Nr$2}var I$b=Fr$2,Xr$2=c$c["__core-js_shared__"],Y$6=Xr$2,Ot$3=function(){var sn=/[^.]+$/.exec(Y$6&&Y$6.keys&&Y$6.keys.IE_PROTO||"");return sn?"Symbol(src)_1."+sn:""}();function Br$2(sn){return!!Ot$3&&Ot$3 in sn}var At$3=Br$2,$r$2=Function.prototype,jr$2=$r$2.toString;function zr$3(sn){if(sn!=null){try{return jr$2.call(sn)}catch{}try{return sn+""}catch{}}return""}var Pt$2=zr$3,Dr$3=/[\\^$.*+?()[\]{}|]/g,Wr$2=/^\[object .+?Constructor\]$/,Gr$2=Function.prototype,Ur$2=Object.prototype,Hr$2=Gr$2.toString,Vr$2=Ur$2.hasOwnProperty,qr$2=RegExp("^"+Hr$2.call(Vr$2).replace(Dr$3,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Qr$2(sn){if(!u$8(sn)||At$3(sn))return!1;var ln=I$b(sn)?qr$2:Wr$2;return ln.test(Pt$2(sn))}var Ct$3=Qr$2;function Zr$2(sn,ln){return sn==null?void 0:sn[ln]}var It$3=Zr$2;function Yr$2(sn,ln){var cn=It$3(sn,ln);return Ct$3(cn)?cn:void 0}var M$7=Yr$2,Mt$3=Object.create,Jr$2=function(){function sn(){}return function(ln){if(!u$8(ln))return{};if(Mt$3)return Mt$3(ln);sn.prototype=ln;var cn=new sn;return sn.prototype=void 0,cn}}(),Et$3=Jr$2;function Lr$2(sn,ln,cn){switch(cn.length){case 0:return sn.call(ln);case 1:return sn.call(ln,cn[0]);case 2:return sn.call(ln,cn[0],cn[1]);case 3:return sn.call(ln,cn[0],cn[1],cn[2])}return sn.apply(ln,cn)}var Rt$3=Lr$2;function kr$2(sn,ln){var cn=-1,dn=sn.length;for(ln||(ln=Array(dn));++cn<dn;)ln[cn]=sn[cn];return ln}var Kt$3=kr$2,to$2=800,eo$2=16,ro$2=Date.now;function oo$2(sn){var ln=0,cn=0;return function(){var dn=ro$2(),pn=eo$2-(dn-cn);if(cn=dn,pn>0){if(++ln>=to$2)return arguments[0]}else ln=0;return sn.apply(void 0,arguments)}}var Nt$3=oo$2;function ao$2(sn){return function(){return sn}}var Ft$3=ao$2,fo$2=function(){try{var sn=M$7(Object,"defineProperty");return sn({},"",{}),sn}catch{}}(),E$a=fo$2,io$2=E$a?function(sn,ln){return E$a(sn,"toString",{configurable:!0,enumerable:!1,value:Ft$3(ln),writable:!0})}:Z$5,Xt$3=io$2,lo$2=Nt$3(Xt$3),Bt$3=lo$2,no$2=9007199254740991,so$2=/^(?:0|[1-9]\d*)$/;function po$2(sn,ln){var cn=typeof sn;return ln=ln??no$2,!!ln&&(cn=="number"||cn!="symbol"&&so$2.test(sn))&&sn>-1&&sn%1==0&&sn<ln}var R$6=po$2;function uo$2(sn,ln,cn){ln=="__proto__"&&E$a?E$a(sn,ln,{configurable:!0,enumerable:!0,value:cn,writable:!0}):sn[ln]=cn}var K$6=uo$2;function mo$2(sn,ln){return sn===ln||sn!==sn&&ln!==ln}var T$8=mo$2,co$2=Object.prototype,xo$2=co$2.hasOwnProperty;function ho$2(sn,ln,cn){var dn=sn[ln];(!(xo$2.call(sn,ln)&&T$8(dn,cn))||cn===void 0&&!(ln in sn))&&K$6(sn,ln,cn)}var $t$3=ho$2;function go$2(sn,ln,cn,dn){var pn=!cn;cn||(cn={});for(var vn=-1,kn=ln.length;++vn<kn;){var Sn=ln[vn],wn=dn?dn(cn[Sn],sn[Sn],Sn,cn,sn):void 0;wn===void 0&&(wn=sn[Sn]),pn?K$6(cn,Sn,wn):$t$3(cn,Sn,wn)}return cn}var jt$3=go$2,zt$3=Math.max;function yo$2(sn,ln,cn){return ln=zt$3(ln===void 0?sn.length-1:ln,0),function(){for(var dn=arguments,pn=-1,vn=zt$3(dn.length-ln,0),kn=Array(vn);++pn<vn;)kn[pn]=dn[ln+pn];pn=-1;for(var Sn=Array(ln+1);++pn<ln;)Sn[pn]=dn[pn];return Sn[ln]=cn(kn),Rt$3(sn,this,Sn)}}var Dt$3=yo$2;function bo$2(sn,ln){return Bt$3(Dt$3(sn,ln,Z$5),sn+"")}var Wt$3=bo$2,_o$2=9007199254740991;function To$2(sn){return typeof sn=="number"&&sn>-1&&sn%1==0&&sn<=_o$2}var N$8=To$2;function So$2(sn){return sn!=null&&N$8(sn.length)&&!I$b(sn)}var F$9=So$2;function wo$2(sn,ln,cn){if(!u$8(cn))return!1;var dn=typeof ln;return(dn=="number"?F$9(cn)&&R$6(ln,cn.length):dn=="string"&&ln in cn)?T$8(cn[ln],sn):!1}var Gt$3=wo$2;function vo$2(sn){return Wt$3(function(ln,cn){var dn=-1,pn=cn.length,vn=pn>1?cn[pn-1]:void 0,kn=pn>2?cn[2]:void 0;for(vn=sn.length>3&&typeof vn=="function"?(pn--,vn):void 0,kn&&Gt$3(cn[0],cn[1],kn)&&(vn=pn<3?void 0:vn,pn=1),ln=Object(ln);++dn<pn;){var Sn=cn[dn];Sn&&sn(ln,Sn,dn,vn)}return ln})}var Ut$3=vo$2,Oo$2=Object.prototype;function Ao$2(sn){var ln=sn&&sn.constructor,cn=typeof ln=="function"&&ln.prototype||Oo$2;return sn===cn}var J$5=Ao$2;function Po$2(sn,ln){for(var cn=-1,dn=Array(sn);++cn<sn;)dn[cn]=ln(cn);return dn}var Ht$3=Po$2,Co$2="[object Arguments]";function Io$2(sn){return x$c(sn)&&h$7(sn)==Co$2}var it$3=Io$2,Vt$3=Object.prototype,Mo$2=Vt$3.hasOwnProperty,Eo$2=Vt$3.propertyIsEnumerable,Ro$2=it$3(function(){return arguments}())?it$3:function(sn){return x$c(sn)&&Mo$2.call(sn,"callee")&&!Eo$2.call(sn,"callee")},O$7=Ro$2;function Ko$2(){return!1}var qt$3=Ko$2,Yt$3=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Qt$3=Yt$3&&typeof module=="object"&&module&&!module.nodeType&&module,No$2=Qt$3&&Qt$3.exports===Yt$3,Zt$3=No$2?c$c.Buffer:void 0,Fo$2=Zt$3?Zt$3.isBuffer:void 0,Xo$2=Fo$2||qt$3,L$7=Xo$2,Bo$2="[object Arguments]",$o$2="[object Array]",jo$2="[object Boolean]",zo$2="[object Date]",Do$2="[object Error]",Wo$2="[object Function]",Go$2="[object Map]",Uo$2="[object Number]",Ho$2="[object Object]",Vo$2="[object RegExp]",qo$2="[object Set]",Qo$2="[object String]",Zo$2="[object WeakMap]",Yo$2="[object ArrayBuffer]",Jo$2="[object DataView]",Lo$2="[object Float32Array]",ko$3="[object Float64Array]",ta$2="[object Int8Array]",ea$2="[object Int16Array]",ra$2="[object Int32Array]",oa$2="[object Uint8Array]",aa$2="[object Uint8ClampedArray]",fa$2="[object Uint16Array]",ia$2="[object Uint32Array]",s$7={};s$7[Lo$2]=s$7[ko$3]=s$7[ta$2]=s$7[ea$2]=s$7[ra$2]=s$7[oa$2]=s$7[aa$2]=s$7[fa$2]=s$7[ia$2]=!0;s$7[Bo$2]=s$7[$o$2]=s$7[Yo$2]=s$7[jo$2]=s$7[Jo$2]=s$7[zo$2]=s$7[Do$2]=s$7[Wo$2]=s$7[Go$2]=s$7[Uo$2]=s$7[Ho$2]=s$7[Vo$2]=s$7[qo$2]=s$7[Qo$2]=s$7[Zo$2]=!1;function la$2(sn){return x$c(sn)&&N$8(sn.length)&&!!s$7[h$7(sn)]}var Jt$3=la$2;function na$2(sn){return function(ln){return sn(ln)}}var Lt$3=na$2,kt$3=typeof exports=="object"&&exports&&!exports.nodeType&&exports,G$8=kt$3&&typeof module=="object"&&module&&!module.nodeType&&module,sa$2=G$8&&G$8.exports===kt$3,lt$2=sa$2&&Q$5.process,pa$2=function(){try{var sn=G$8&&G$8.require&&G$8.require("util").types;return sn||lt$2&&lt$2.binding&&lt$2.binding("util")}catch{}}(),nt$3=pa$2,te$4=nt$3&&nt$3.isTypedArray,ua$2=te$4?Lt$3(te$4):Jt$3,k$8=ua$2,ma$2=Object.prototype,da$2=ma$2.hasOwnProperty;function ca$2(sn,ln){var cn=d$a(sn),dn=!cn&&O$7(sn),pn=!cn&&!dn&&L$7(sn),vn=!cn&&!dn&&!pn&&k$8(sn),kn=cn||dn||pn||vn,Sn=kn?Ht$3(sn.length,String):[],wn=Sn.length;for(var Pn in sn)(ln||da$2.call(sn,Pn))&&!(kn&&(Pn=="length"||pn&&(Pn=="offset"||Pn=="parent")||vn&&(Pn=="buffer"||Pn=="byteLength"||Pn=="byteOffset")||R$6(Pn,wn)))&&Sn.push(Pn);return Sn}var ee$4=ca$2;function xa$2(sn,ln){return function(cn){return sn(ln(cn))}}var re$4=xa$2;function ha$2(sn){var ln=[];if(sn!=null)for(var cn in Object(sn))ln.push(cn);return ln}var oe$4=ha$2,ga$2=Object.prototype,ya$2=ga$2.hasOwnProperty;function ba$2(sn){if(!u$8(sn))return oe$4(sn);var ln=J$5(sn),cn=[];for(var dn in sn)dn=="constructor"&&(ln||!ya$2.call(sn,dn))||cn.push(dn);return cn}var ae$4=ba$2;function _a$5(sn){return F$9(sn)?ee$4(sn,!0):ae$4(sn)}var tt$2=_a$5,Ta$2=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Sa$2=/^\w*$/;function wa$2(sn,ln){if(d$a(sn))return!1;var cn=typeof sn;return cn=="number"||cn=="symbol"||cn=="boolean"||sn==null||C$7(sn)?!0:Sa$2.test(sn)||!Ta$2.test(sn)||ln!=null&&sn in Object(ln)}var fe$4=wa$2,va$2=M$7(Object,"create"),_$7=va$2;function Oa$2(){this.__data__=_$7?_$7(null):{},this.size=0}var ie$4=Oa$2;function Aa$2(sn){var ln=this.has(sn)&&delete this.__data__[sn];return this.size-=ln?1:0,ln}var le$4=Aa$2,Pa$2="__lodash_hash_undefined__",Ca$2=Object.prototype,Ia$2=Ca$2.hasOwnProperty;function Ma$2(sn){var ln=this.__data__;if(_$7){var cn=ln[sn];return cn===Pa$2?void 0:cn}return Ia$2.call(ln,sn)?ln[sn]:void 0}var ne$4=Ma$2,Ea$2=Object.prototype,Ra$2=Ea$2.hasOwnProperty;function Ka$1(sn){var ln=this.__data__;return _$7?ln[sn]!==void 0:Ra$2.call(ln,sn)}var se$4=Ka$1,Na$1="__lodash_hash_undefined__";function Fa$1(sn,ln){var cn=this.__data__;return this.size+=this.has(sn)?0:1,cn[sn]=_$7&&ln===void 0?Na$1:ln,this}var pe$4=Fa$1;function X$4(sn){var ln=-1,cn=sn==null?0:sn.length;for(this.clear();++ln<cn;){var dn=sn[ln];this.set(dn[0],dn[1])}}X$4.prototype.clear=ie$4;X$4.prototype.delete=le$4;X$4.prototype.get=ne$4;X$4.prototype.has=se$4;X$4.prototype.set=pe$4;var st$3=X$4;function Xa$1(){this.__data__=[],this.size=0}var ue$4=Xa$1;function Ba$2(sn,ln){for(var cn=sn.length;cn--;)if(T$8(sn[cn][0],ln))return cn;return-1}var S$7=Ba$2,$a$1=Array.prototype,ja$2=$a$1.splice;function za$2(sn){var ln=this.__data__,cn=S$7(ln,sn);if(cn<0)return!1;var dn=ln.length-1;return cn==dn?ln.pop():ja$2.call(ln,cn,1),--this.size,!0}var me$4=za$2;function Da$2(sn){var ln=this.__data__,cn=S$7(ln,sn);return cn<0?void 0:ln[cn][1]}var de$4=Da$2;function Wa$1(sn){return S$7(this.__data__,sn)>-1}var ce$4=Wa$1;function Ga$1(sn,ln){var cn=this.__data__,dn=S$7(cn,sn);return dn<0?(++this.size,cn.push([sn,ln])):cn[dn][1]=ln,this}var xe$4=Ga$1;function B$9(sn){var ln=-1,cn=sn==null?0:sn.length;for(this.clear();++ln<cn;){var dn=sn[ln];this.set(dn[0],dn[1])}}B$9.prototype.clear=ue$4;B$9.prototype.delete=me$4;B$9.prototype.get=de$4;B$9.prototype.has=ce$4;B$9.prototype.set=xe$4;var w$8=B$9,Ua$1=M$7(c$c,"Map"),et$3=Ua$1;function Ha$1(){this.size=0,this.__data__={hash:new st$3,map:new(et$3||w$8),string:new st$3}}var he$4=Ha$1;function Va$1(sn){var ln=typeof sn;return ln=="string"||ln=="number"||ln=="symbol"||ln=="boolean"?sn!=="__proto__":sn===null}var ge$4=Va$1;function qa$1(sn,ln){var cn=sn.__data__;return ge$4(ln)?cn[typeof ln=="string"?"string":"hash"]:cn.map}var v$7=qa$1;function Qa(sn){var ln=v$7(this,sn).delete(sn);return this.size-=ln?1:0,ln}var ye$4=Qa;function Za(sn){return v$7(this,sn).get(sn)}var be$4=Za;function Ya$1(sn){return v$7(this,sn).has(sn)}var _e$4=Ya$1;function Ja$1(sn,ln){var cn=v$7(this,sn),dn=cn.size;return cn.set(sn,ln),this.size+=cn.size==dn?0:1,this}var Te$4=Ja$1;function $$_(sn){var ln=-1,cn=sn==null?0:sn.length;for(this.clear();++ln<cn;){var dn=sn[ln];this.set(dn[0],dn[1])}}$$_.prototype.clear=he$4;$$_.prototype.delete=ye$4;$$_.prototype.get=be$4;$$_.prototype.has=_e$4;$$_.prototype.set=Te$4;var U$7=$$_,La$2="Expected a function";function pt$3(sn,ln){if(typeof sn!="function"||ln!=null&&typeof ln!="function")throw new TypeError(La$2);var cn=function(){var dn=arguments,pn=ln?ln.apply(this,dn):dn[0],vn=cn.cache;if(vn.has(pn))return vn.get(pn);var kn=sn.apply(this,dn);return cn.cache=vn.set(pn,kn)||vn,kn};return cn.cache=new(pt$3.Cache||U$7),cn}pt$3.Cache=U$7;var Se$4=pt$3,ka$1=500;function tf(sn){var ln=Se$4(sn,function(dn){return cn.size===ka$1&&cn.clear(),dn}),cn=ln.cache;return ln}var we$4=tf,ef=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rf=/\\(\\)?/g,of=we$4(function(sn){var ln=[];return sn.charCodeAt(0)===46&&ln.push(""),sn.replace(ef,function(cn,dn,pn,vn){ln.push(pn?vn.replace(rf,"$1"):dn||cn)}),ln}),ve$4=of;function af$1(sn){return sn==null?"":vt$3(sn)}var Oe$4=af$1;function ff$1(sn,ln){return d$a(sn)?sn:fe$4(sn,ln)?[sn]:ve$4(Oe$4(sn))}var Ae$4=ff$1,lf=1/0;function nf(sn){if(typeof sn=="string"||C$7(sn))return sn;var ln=sn+"";return ln=="0"&&1/sn==-lf?"-0":ln}var Pe$4=nf,sf$1=re$4(Object.getPrototypeOf,Object),rt$3=sf$1,pf="[object Object]",uf=Function.prototype,mf=Object.prototype,Ce$4=uf.toString,df=mf.hasOwnProperty,cf=Ce$4.call(Object);function xf(sn){if(!x$c(sn)||h$7(sn)!=pf)return!1;var ln=rt$3(sn);if(ln===null)return!0;var cn=df.call(ln,"constructor")&&ln.constructor;return typeof cn=="function"&&cn instanceof cn&&Ce$4.call(cn)==cf}var Ie$4=xf;function hf(){this.__data__=new w$8,this.size=0}var Me$4=hf;function gf(sn){var ln=this.__data__,cn=ln.delete(sn);return this.size=ln.size,cn}var Ee$4=gf;function yf(sn){return this.__data__.get(sn)}var Re$2=yf;function bf(sn){return this.__data__.has(sn)}var Ke$3=bf,_f=200;function Tf(sn,ln){var cn=this.__data__;if(cn instanceof w$8){var dn=cn.__data__;if(!et$3||dn.length<_f-1)return dn.push([sn,ln]),this.size=++cn.size,this;cn=this.__data__=new U$7(dn)}return cn.set(sn,ln),this.size=cn.size,this}var Ne$3=Tf;function j$7(sn){var ln=this.__data__=new w$8(sn);this.size=ln.size}j$7.prototype.clear=Me$4;j$7.prototype.delete=Ee$4;j$7.prototype.get=Re$2;j$7.prototype.has=Ke$3;j$7.prototype.set=Ne$3;var Fe$3=j$7,je$4=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Xe$3=je$4&&typeof module=="object"&&module&&!module.nodeType&&module,Sf=Xe$3&&Xe$3.exports===je$4,Be$3=Sf?c$c.Buffer:void 0,$e$3=Be$3?Be$3.allocUnsafe:void 0;function wf(sn,ln){if(ln)return sn.slice();var cn=sn.length,dn=$e$3?$e$3(cn):new sn.constructor(cn);return sn.copy(dn),dn}var ze$4=wf,vf=c$c.Uint8Array,ut$3=vf;function Of(sn){var ln=new sn.constructor(sn.byteLength);return new ut$3(ln).set(new ut$3(sn)),ln}var De$3=Of;function Af(sn,ln){var cn=ln?De$3(sn.buffer):sn.buffer;return new sn.constructor(cn,sn.byteOffset,sn.length)}var We$3=Af;function Pf(sn){return typeof sn.constructor=="function"&&!J$5(sn)?Et$3(rt$3(sn)):{}}var Ge$3=Pf;function Cf(sn,ln,cn){ln=Ae$4(ln,sn);for(var dn=-1,pn=ln.length,vn=!1;++dn<pn;){var kn=Pe$4(ln[dn]);if(!(vn=sn!=null&&cn(sn,kn)))break;sn=sn[kn]}return vn||++dn!=pn?vn:(pn=sn==null?0:sn.length,!!pn&&N$8(pn)&&R$6(kn,pn)&&(d$a(sn)||O$7(sn)))}var Ue$4=Cf;function If(sn){return function(ln,cn,dn){for(var pn=-1,vn=Object(ln),kn=dn(ln),Sn=kn.length;Sn--;){var wn=kn[sn?Sn:++pn];if(cn(vn[wn],wn,vn)===!1)break}return ln}}var He$3=If,Mf=He$3(),Ve$4=Mf;function Ef(sn,ln,cn){(cn!==void 0&&!T$8(sn[ln],cn)||cn===void 0&&!(ln in sn))&&K$6(sn,ln,cn)}var H$9=Ef;function Rf(sn){return x$c(sn)&&F$9(sn)}var qe$4=Rf;function Kf(sn,ln){if(!(ln==="constructor"&&typeof sn[ln]=="function")&&ln!="__proto__")return sn[ln]}var V$5=Kf;function Nf(sn){return jt$3(sn,tt$2(sn))}var Qe$3=Nf;function Ff(sn,ln,cn,dn,pn,vn,kn){var Sn=V$5(sn,cn),wn=V$5(ln,cn),Pn=kn.get(wn);if(Pn){H$9(sn,cn,Pn);return}var Nn=vn?vn(Sn,wn,cn+"",sn,ln,kn):void 0,Ln=Nn===void 0;if(Ln){var Fn=d$a(wn),zn=!Fn&&L$7(wn),Dn=!Fn&&!zn&&k$8(wn);Nn=wn,Fn||zn||Dn?d$a(Sn)?Nn=Sn:qe$4(Sn)?Nn=Kt$3(Sn):zn?(Ln=!1,Nn=ze$4(wn,!0)):Dn?(Ln=!1,Nn=We$3(wn,!0)):Nn=[]:Ie$4(wn)||O$7(wn)?(Nn=Sn,O$7(Sn)?Nn=Qe$3(Sn):(!u$8(Sn)||I$b(Sn))&&(Nn=Ge$3(wn))):Ln=!1}Ln&&(kn.set(wn,Nn),pn(Nn,wn,dn,vn,kn),kn.delete(wn)),H$9(sn,cn,Nn)}var Ze$3=Ff;function Ye$3(sn,ln,cn,dn,pn){sn!==ln&&Ve$4(ln,function(vn,kn){if(pn||(pn=new Fe$3),u$8(vn))Ze$3(sn,ln,kn,cn,Ye$3,dn,pn);else{var Sn=dn?dn(V$5(sn,kn),vn,kn+"",sn,ln,pn):void 0;Sn===void 0&&(Sn=vn),H$9(sn,kn,Sn)}},tt$2)}var Je$3=Ye$3,Xf=Object.prototype,Bf=Xf.hasOwnProperty;function $f(sn,ln){return sn!=null&&Bf.call(sn,ln)}var Le$4=$f;function jf(sn,ln){return sn!=null&&Ue$4(sn,ln,Le$4)}var mt$3=jf,zf=Ut$3(function(sn,ln,cn){Je$3(sn,ln,cn)}),dt$3=zf,ke$4=sn=>[{"@font-face":{fontFamily:"KaTeX_AMS",fontWeight:400,fontStyle:"normal",src:`url('${sn}/font/KaTeX_AMS-Regular.woff2') format('woff2'), url('${sn}/font/KaTeX_AMS-Regular.woff') format('woff'), url('${sn}/font/KaTeX_AMS-Regular.ttf') format('truetype')`}},{"@font-face":{fontFamily:"KaTeX_Caligraphic",fontWeight:700,fontStyle:"normal",src:`url('${sn}/font/KaTeX_Caligraphic-Bold.woff2') format('woff2'), url('${sn}/font/KaTeX_Caligraphic-Bold.woff') format('woff'), url('${sn}/font/KaTeX_Caligraphic-Bold.ttf') format('truetype')`}},{"@font-face":{fontFamily:"KaTeX_Caligraphic",fontWeight:400,fontStyle:"normal",src:`url('${sn}/font/KaTeX_Caligraphic-Regular.woff2') format('woff2'), url('${sn}/font/KaTeX_Caligraphic-Regular.woff') format('woff'), url('${sn}/font/KaTeX_Caligraphic-Regular.ttf') format('truetype')`}},{"@font-face":{fontFamily:"KaTeX_Fraktur",fontWeight:700,fontStyle:"normal",src:`url('${sn}/font/KaTeX_Fraktur-Bold.woff2') format('woff2'), url('${sn}/font/KaTeX_Fraktur-Bold.woff') format('woff'), url('${sn}/font/KaTeX_Fraktur-Bold.ttf') format('truetype')`}},{"@font-face":{fontFamily:"KaTeX_Fraktur",fontWeight:400,fontStyle:"normal",src:`url('${sn}/font/KaTeX_Fraktur-Regular.woff2') format('woff2'), url('${sn}/font/KaTeX_Fraktur-Regular.woff') format('woff'), url('${sn}/font/KaTeX_Fraktur-Regular.ttf') format('truetype')`}},{"@font-face":{fontFamily:"KaTeX_Main",fontWeight:700,fontStyle:"normal",src:`url('${sn}/font/KaTeX_Main-Bold.woff2') format('woff2'), url('${sn}/font/KaTeX_Main-Bold.woff') format('woff'), url('${sn}/font/KaTeX_Main-Bold.ttf') format('truetype')`}},{"@font-face":{fontFamily:"KaTeX_Main",fontWeight:700,fontStyle:"italic",src:`url('${sn}/font/KaTeX_Main-BoldItalic.woff2') format('woff2'), url('${sn}/font/KaTeX_Main-BoldItalic.woff') format('woff'), url('${sn}/font/KaTeX_Main-BoldItalic.ttf') format('truetype')`}},{"@font-face":{fontFamily:"KaTeX_Main",fontWeight:400,fontStyle:"italic",src:`url('${sn}/font/KaTeX_Main-Italic.woff2') format('woff2'), url('${sn}/font/KaTeX_Main-Italic.woff') format('woff'), url('${sn}/font/KaTeX_Main-Italic.ttf') format('truetype')`}},{"@font-face":{fontFamily:"KaTeX_Main",fontWeight:400,fontStyle:"normal",src:`url('${sn}/font/KaTeX_Main-Regular.woff2') format('woff2'), url('${sn}/font/KaTeX_Main-Regular.woff') format('woff'), url('${sn}/font/KaTeX_Main-Regular.ttf') format('truetype')`}},{"@font-face":{fontFamily:"KaTeX_Math",fontWeight:700,fontStyle:"italic",src:`url('${sn}/font/KaTeX_Math-BoldItalic.woff2') format('woff2'), url('${sn}/font/KaTeX_Math-BoldItalic.woff') format('woff'), url('${sn}/font/KaTeX_Math-BoldItalic.ttf') format('truetype')`}},{"@font-face":{fontFamily:"KaTeX_Math",fontWeight:400,fontStyle:"italic",src:`url('${sn}/font/KaTeX_Math-Italic.woff2') format('woff2'), url('${sn}/font/KaTeX_Math-Italic.woff') format('woff'), url('${sn}/font/KaTeX_Math-Italic.ttf') format('truetype')`}},{"@font-face":{fontFamily:"KaTeX_SansSerif",fontWeight:700,fontStyle:"normal",src:`url('${sn}/font/KaTeX_SansSerif-Bold.woff2') format('woff2'), url('${sn}/font/KaTeX_SansSerif-Bold.woff') format('woff'), url('${sn}/font/KaTeX_SansSerif-Bold.ttf') format('truetype')`}},{"@font-face":{fontFamily:"KaTeX_SansSerif",fontWeight:400,fontStyle:"italic",src:`url('${sn}/font/KaTeX_SansSerif-Italic.woff2') format('woff2'), url('${sn}/font/KaTeX_SansSerif-Italic.woff') format('woff'), url('${sn}/font/KaTeX_SansSerif-Italic.ttf') format('truetype')`}},{"@font-face":{fontFamily:"KaTeX_SansSerif",fontWeight:400,fontStyle:"normal",src:`url('${sn}/font/KaTeX_SansSerif-Regular.woff2') format('woff2'), url('${sn}/font/KaTeX_SansSerif-Regular.woff') format('woff'), url('${sn}/font/KaTeX_SansSerif-Regular.ttf') format('truetype')`}},{"@font-face":{fontFamily:"KaTeX_Script",fontWeight:400,fontStyle:"normal",src:`url('${sn}/font/KaTeX_Script-Regular.woff2') format('woff2'), url('${sn}/font/KaTeX_Script-Regular.woff') format('woff'), url('${sn}/font/KaTeX_Script-Regular.ttf') format('truetype')`}},{"@font-face":{fontFamily:"KaTeX_Size1",fontWeight:400,fontStyle:"normal",src:`url('${sn}/font/KaTeX_Size1-Regular.woff2') format('woff2'), url('${sn}/font/KaTeX_Size1-Regular.woff') format('woff'), url('${sn}/font/KaTeX_Size1-Regular.ttf') format('truetype')`}},{"@font-face":{fontFamily:"KaTeX_Size2",fontWeight:400,fontStyle:"normal",src:`url('${sn}/font/KaTeX_Size2-Regular.woff2') format('woff2'), url('${sn}/font/KaTeX_Size2-Regular.woff') format('woff'), url('${sn}/font/KaTeX_Size2-Regular.ttf') format('truetype')`}},{"@font-face":{fontFamily:"KaTeX_Size3",fontWeight:400,fontStyle:"normal",src:`url('${sn}/font/KaTeX_Size3-Regular.woff2') format('woff2'), url('${sn}/font/KaTeX_Size3-Regular.woff') format('woff'), url('${sn}/font/KaTeX_Size3-Regular.ttf') format('truetype')`}},{"@font-face":{fontFamily:"KaTeX_Size4",fontWeight:400,fontStyle:"normal",src:`url('${sn}/font/KaTeX_Size4-Regular.woff2') format('woff2'), url('${sn}/font/KaTeX_Size4-Regular.woff') format('woff'), url('${sn}/font/KaTeX_Size4-Regular.ttf') format('truetype')`}},{"@font-face":{fontFamily:"KaTeX_Typewriter",fontWeight:400,fontStyle:"normal",src:`url('${sn}/font/KaTeX_Typewriter-Regular.woff2') format('woff2'), url('${sn}/font/KaTeX_Typewriter-Regular.woff') format('woff'), url('${sn}/font/KaTeX_Typewriter-Regular.ttf') format('truetype')`}}],tr$3=sn=>[{"@font-face":{fontFamily:"Pretendard",fontWeight:700,src:`url('${sn}/font/Pretendard-Bold.woff2') format('woff2'), url('${sn}/font/Pretendard-Bold.woff') format('woff')`}},{"@font-face":{fontFamily:"Pretendard",fontWeight:500,src:`url('${sn}/font/Pretendard-Medium.woff2') format('woff2'), url('${sn}/font/Pretendard-Medium.woff') format('woff')`}},{"@font-face":{fontFamily:"Pretendard",fontWeight:400,src:`url('${sn}/font/Pretendard-Regular.woff2') format('woff2'), url('${sn}/font/Pretendard-Regular.woff') format('woff')`}}],er$3=(sn,ln)=>{let[cn]=ln.split(".");return mt$3(sn.colors,cn)?sn.colors[cn][7]:ln},rr$3=[...MANTINE_COLORS,"infgreen","white","rallit"],Wf=Array.from(Array(10).keys());rr$3.flatMap(sn=>Wf.map(ln=>`${sn}.${ln}`));var or$3=["subtle","light","outline"],ar$3='Pretendard, -apple-system, BlinkMacSystemFont, system-ui, Roboto, "Helvetica Neue", "Segoe UI", "Apple SD Gothic Neo", "Noto Sans KR", "Malgun Gothic", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif',fr$3={radius:"lg",centered:!0,zIndex:400},qf={radius:"md",shadow:"sm"},Qf={closeButtonProps:{variant:"subtle",color:"gray",size:"lg"}},Zf={defaultRadius:"md",breakpoints:xt$3,lineHeight:1.5,focusRingStyles:{styles:sn=>({outlineOffset:"0.125rem",outline:`0.125rem solid ${sn.colors.gray[sn.other.focusRingColorShade[sn.colorScheme]]}`}),resetStyles:()=>({outline:"none"}),inputStyles:sn=>({outline:"none",borderColor:sn.colors.gray[sn.other.focusRingColorShade[sn.colorScheme]]})},components:{Radio:{styles:()=>({root:{display:"flex"},label:{cursor:"pointer"},radio:{cursor:"pointer"}})},Chip:{sizes:{xs:()=>({root:{height:24}}),sm:()=>({root:{height:28}}),md:()=>({root:{height:32}}),lg:()=>({root:{height:36}}),xl:()=>({root:{height:40}})}},Modal:{defaultProps:fr$3,styles:sn=>({title:{width:"100%",fontSize:"18px",fontWeight:700,color:sn.colors.gray[9]},content:{fontSize:"14px",fontWeight:400,color:sn.colors.gray[7],padding:"20px","> *+*":{marginTop:"16px"}},inner:{paddingLeft:"16px",paddingRight:"16px"}})},ModalRoot:{defaultProps:fr$3},ModalHeader:{defaultProps:{p:0}},ModalBody:{defaultProps:{p:0}},ModalCloseButton:{defaultProps:{size:31,iconSize:20}},Notification:{defaultProps:Qf,styles:(sn,{withTitle:ln})=>({root:{padding:"12px 5px 12px 22px",backgroundColor:sn.colors.dark[3],borderColor:"transparent"},title:{color:"white"},icon:{pointerEvents:"none"},description:{color:ln?sn.colors.gray[4]:sn.colors.gray[0]},closeButton:{"&:hover":{backgroundColor:sn.colors.dark[4]}}})},Avatar:{styles:sn=>({root:{border:`1px solid ${sn.colors.gray[3]}`}})},PopOver:{defaultProps:qf},Button:{styles:(sn,ln,cn)=>({inner:{pointerEvents:"none"},leftIcon:{marginRight:"6px"},rightIcon:{marginLeft:"6px"},...or$3.includes(cn.variant||"")&&{label:{color:er$3(sn,ln.color??sn.primaryColor)}}})},Badge:{styles:{rightSection:{lineHeight:"100%"},leftSection:{lineHeight:"100%"},inner:{lineHeight:"100%"},root:{textTransform:"none"}}},Alert:{styles:(sn,{color:ln})=>{var cn,dn,pn;return{title:{color:(cn=sn.colors[ln])==null?void 0:cn[8]},icon:{color:(dn=sn.colors[ln])==null?void 0:dn[8]},closeButton:{color:(pn=sn.colors[ln])==null?void 0:pn[8]},message:{color:sn.colors.gray[9]}}}},Input:{styles:(sn,ln,{variant:cn})=>({input:{'&[aria-invalid="true"]':{":focus":cn==="unstyled"?{}:{borderColor:sn.colors.red[6],boxShadow:`0px 0px 0px 1px ${sn.colors.red[6]}`}}},icon:{color:sn.colors.gray[5]}})}},headings:{fontFamily:ar$3},fontFamily:ar$3,colors:A$9,primaryColor:"infgreen",other:{characterPrimary:A$9.gray[9],characterSecondary:A$9.gray[7],characterTertiary:A$9.gray[5],bottomSpacingSmall:"16px",bottomSpacingLarge:"80px",focusRingColorShade:{light:9,dark:4}}};function ir$3(sn){let{children:ln,theme:cn,cdnLink:dn,withGlobalStyles:pn=!0,withNormalizeCSS:vn=!0,withCSSVariables:kn=!0,...Sn}=sn;typeof window<"u"&&(window.__DS__||(window.__DS__=!0));let wn=dt$3(Zf,cn);return jsxs$2(MantineProvider,{...Sn,withGlobalStyles:pn,withNormalizeCSS:vn,withCSSVariables:kn,theme:wn,children:[jsx$2(Global,{styles:Pn=>[{body:{color:Pn.colorScheme==="dark"?Pn.colors.dark[0]:Pn.other.characterPrimary},".overflow-hidden":{overflow:"hidden"}},...tr$3(dn),...ke$4(dn)]}),ln]})}var Yf=useMantineTheme;/*! Bundled license information:

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/var m$8=(sn,ln)=>{if(ln==="white")return"white";let[cn,dn=""]=ln.split("."),pn=parseInt(dn,10);if(!has$1(sn.colors,cn))return ln;let vn=sn.colors[cn];return!Number.isNaN(pn)&&pn<10&&pn>=0?vn[pn]:vn[sn.fn.primaryShade()]},t$6=16,c$b={"2xs":10,xs:12,sm:14,md:16,lg:20,xl:24,"2xl":32,"1x":t$6*1,"2x":t$6*2,"3x":t$6*3,"4x":t$6*4,"5x":t$6*5,"6x":t$6*6,"7x":t$6*7,"8x":t$6*8,"9x":t$6*9,"10x":t$6*10},a$9=[...MANTINE_COLORS,"infgreen","white","rallit"],x$b=Array.from(Array(10).keys());a$9.flatMap(sn=>x$b.map(ln=>`${sn}.${ln}`));var l$5=sn=>sn==="inherit"?"inherit":typeof sn=="number"?`${sn}px`:`${c$b[sn]}px`,I$a=reactExports.forwardRef((sn,ln)=>{let{color:cn="inherit",size:dn="1x",style:pn,...vn}=sn,kn=Yf();return jsx$2(FontAwesomeIcon,{...vn,ref:ln,style:{fontSize:l$5(dn),color:m$8(kn,cn),...pn}})});I$a.displayName="inflearnDsIcon";var wt$2=typeof global=="object"&&global&&global.Object===Object&&global,M$6=wt$2,Mt$2=typeof self=="object"&&self&&self.Object===Object&&self,Rt$2=M$6||Mt$2||Function("return this")(),x$a=Rt$2,zt$2=x$a.Symbol,l$4=zt$2,R$5=Object.prototype,Dt$2=R$5.hasOwnProperty,jt$2=R$5.toString,b$9=l$4?l$4.toStringTag:void 0;function Wt$2(sn){var ln=Dt$2.call(sn,b$9),cn=sn[b$9];try{sn[b$9]=void 0;var dn=!0}catch{}var pn=jt$2.call(sn);return dn&&(ln?sn[b$9]=cn:delete sn[b$9]),pn}var z$7=Wt$2,Bt$2=Object.prototype,Lt$2=Bt$2.toString;function Ft$2(sn){return Lt$2.call(sn)}var D$7=Ft$2,Ht$2="[object Null]",kt$2="[object Undefined]",j$6=l$4?l$4.toStringTag:void 0;function Gt$2(sn){return sn==null?sn===void 0?kt$2:Ht$2:j$6&&j$6 in Object(sn)?z$7(sn):D$7(sn)}var c$a=Gt$2;function Ut$2(sn){return sn!=null&&typeof sn=="object"}var h$6=Ut$2,$t$2="[object Symbol]";function qt$2(sn){return typeof sn=="symbol"||h$6(sn)&&c$a(sn)==$t$2}var y$8=qt$2;function Kt$2(sn,ln){for(var cn=-1,dn=sn==null?0:sn.length,pn=Array(dn);++cn<dn;)pn[cn]=ln(sn[cn],cn,sn);return pn}var W$6=Kt$2,Xt$2=Array.isArray,i$9=Xt$2,Zt$2=1/0,B$8=l$4?l$4.prototype:void 0,L$6=B$8?B$8.toString:void 0;function F$8(sn){if(typeof sn=="string")return sn;if(i$9(sn))return W$6(sn,F$8)+"";if(y$8(sn))return L$6?L$6.call(sn):"";var ln=sn+"";return ln=="0"&&1/sn==-Zt$2?"-0":ln}var H$8=F$8;function Vt$2(sn){var ln=typeof sn;return sn!=null&&(ln=="object"||ln=="function")}var E$9=Vt$2,Jt$2="[object AsyncFunction]",Yt$2="[object Function]",Qt$2="[object GeneratorFunction]",te$3="[object Proxy]";function ee$3(sn){if(!E$9(sn))return!1;var ln=c$a(sn);return ln==Yt$2||ln==Qt$2||ln==Jt$2||ln==te$3}var k$7=ee$3,re$3=x$a["__core-js_shared__"],S$6=re$3,G$7=function(){var sn=/[^.]+$/.exec(S$6&&S$6.keys&&S$6.keys.IE_PROTO||"");return sn?"Symbol(src)_1."+sn:""}();function oe$3(sn){return!!G$7&&G$7 in sn}var U$6=oe$3,ae$3=Function.prototype,fe$3=ae$3.toString;function se$3(sn){if(sn!=null){try{return fe$3.call(sn)}catch{}try{return sn+""}catch{}}return""}var $$Z=se$3,pe$3=/[\\^$.*+?()[\]{}|]/g,ne$3=/^\[object .+?Constructor\]$/,le$3=Function.prototype,me$3=Object.prototype,ie$3=le$3.toString,ue$3=me$3.hasOwnProperty,de$3=RegExp("^"+ie$3.call(ue$3).replace(pe$3,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function xe$3(sn){if(!E$9(sn)||U$6(sn))return!1;var ln=k$7(sn)?de$3:ne$3;return ln.test($$Z(sn))}var q$7=xe$3;function ce$3(sn,ln){return sn==null?void 0:sn[ln]}var K$5=ce$3;function he$3(sn,ln){var cn=K$5(sn,ln);return q$7(cn)?cn:void 0}var T$7=he$3,ye$3=9007199254740991,ge$3=/^(?:0|[1-9]\d*)$/;function _e$3(sn,ln){var cn=typeof sn;return ln=ln??ye$3,!!ln&&(cn=="number"||cn!="symbol"&&ge$3.test(sn))&&sn>-1&&sn%1==0&&sn<ln}var X$3=_e$3;function Ie$3(sn,ln){return sn===ln||sn!==sn&&ln!==ln}var Z$4=Ie$3,be$3=9007199254740991;function Oe$3(sn){return typeof sn=="number"&&sn>-1&&sn%1==0&&sn<=be$3}var V$4=Oe$3,Ee$3="[object Arguments]";function Se$3(sn){return h$6(sn)&&c$a(sn)==Ee$3}var N$7=Se$3,J$4=Object.prototype,Te$3=J$4.hasOwnProperty,Ae$3=J$4.propertyIsEnumerable,Ne$2=N$7(function(){return arguments}())?N$7:function(sn){return h$6(sn)&&Te$3.call(sn,"callee")&&!Ae$3.call(sn,"callee")},Y$5=Ne$2,Ce$3=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ve$3=/^\w*$/;function Pe$3(sn,ln){if(i$9(sn))return!1;var cn=typeof sn;return cn=="number"||cn=="symbol"||cn=="boolean"||sn==null||y$8(sn)?!0:ve$3.test(sn)||!Ce$3.test(sn)||ln!=null&&sn in Object(ln)}var Q$4=Pe$3,we$3=T$7(Object,"create"),m$7=we$3;function Me$3(){this.__data__=m$7?m$7(null):{},this.size=0}var tt$1=Me$3;function Re$1(sn){var ln=this.has(sn)&&delete this.__data__[sn];return this.size-=ln?1:0,ln}var et$2=Re$1,ze$3="__lodash_hash_undefined__",De$2=Object.prototype,je$3=De$2.hasOwnProperty;function We$2(sn){var ln=this.__data__;if(m$7){var cn=ln[sn];return cn===ze$3?void 0:cn}return je$3.call(ln,sn)?ln[sn]:void 0}var rt$2=We$2,Be$2=Object.prototype,Le$3=Be$2.hasOwnProperty;function Fe$2(sn){var ln=this.__data__;return m$7?ln[sn]!==void 0:Le$3.call(ln,sn)}var ot$1=Fe$2,He$2="__lodash_hash_undefined__";function ke$3(sn,ln){var cn=this.__data__;return this.size+=this.has(sn)?0:1,cn[sn]=m$7&&ln===void 0?He$2:ln,this}var at$2=ke$3;function g$7(sn){var ln=-1,cn=sn==null?0:sn.length;for(this.clear();++ln<cn;){var dn=sn[ln];this.set(dn[0],dn[1])}}g$7.prototype.clear=tt$1;g$7.prototype.delete=et$2;g$7.prototype.get=rt$2;g$7.prototype.has=ot$1;g$7.prototype.set=at$2;var C$6=g$7;function Ge$2(){this.__data__=[],this.size=0}var ft$2=Ge$2;function Ue$3(sn,ln){for(var cn=sn.length;cn--;)if(Z$4(sn[cn][0],ln))return cn;return-1}var u$7=Ue$3,$e$2=Array.prototype,qe$3=$e$2.splice;function Ke$2(sn){var ln=this.__data__,cn=u$7(ln,sn);if(cn<0)return!1;var dn=ln.length-1;return cn==dn?ln.pop():qe$3.call(ln,cn,1),--this.size,!0}var st$2=Ke$2;function Xe$2(sn){var ln=this.__data__,cn=u$7(ln,sn);return cn<0?void 0:ln[cn][1]}var pt$2=Xe$2;function Ze$2(sn){return u$7(this.__data__,sn)>-1}var nt$2=Ze$2;function Ve$3(sn,ln){var cn=this.__data__,dn=u$7(cn,sn);return dn<0?(++this.size,cn.push([sn,ln])):cn[dn][1]=ln,this}var lt$1=Ve$3;function _$6(sn){var ln=-1,cn=sn==null?0:sn.length;for(this.clear();++ln<cn;){var dn=sn[ln];this.set(dn[0],dn[1])}}_$6.prototype.clear=ft$2;_$6.prototype.delete=st$2;_$6.prototype.get=pt$2;_$6.prototype.has=nt$2;_$6.prototype.set=lt$1;var mt$2=_$6,Je$2=T$7(x$a,"Map"),it$2=Je$2;function Ye$2(){this.size=0,this.__data__={hash:new C$6,map:new(it$2||mt$2),string:new C$6}}var ut$2=Ye$2;function Qe$2(sn){var ln=typeof sn;return ln=="string"||ln=="number"||ln=="symbol"||ln=="boolean"?sn!=="__proto__":sn===null}var dt$2=Qe$2;function tr$2(sn,ln){var cn=sn.__data__;return dt$2(ln)?cn[typeof ln=="string"?"string":"hash"]:cn.map}var d$9=tr$2;function er$2(sn){var ln=d$9(this,sn).delete(sn);return this.size-=ln?1:0,ln}var xt$2=er$2;function rr$2(sn){return d$9(this,sn).get(sn)}var ct$2=rr$2;function or$2(sn){return d$9(this,sn).has(sn)}var ht$2=or$2;function ar$2(sn,ln){var cn=d$9(this,sn),dn=cn.size;return cn.set(sn,ln),this.size+=cn.size==dn?0:1,this}var yt$2=ar$2;function I$9(sn){var ln=-1,cn=sn==null?0:sn.length;for(this.clear();++ln<cn;){var dn=sn[ln];this.set(dn[0],dn[1])}}I$9.prototype.clear=ut$2;I$9.prototype.delete=xt$2;I$9.prototype.get=ct$2;I$9.prototype.has=ht$2;I$9.prototype.set=yt$2;var v$6=I$9,fr$2="Expected a function";function P$5(sn,ln){if(typeof sn!="function"||ln!=null&&typeof ln!="function")throw new TypeError(fr$2);var cn=function(){var dn=arguments,pn=ln?ln.apply(this,dn):dn[0],vn=cn.cache;if(vn.has(pn))return vn.get(pn);var kn=sn.apply(this,dn);return cn.cache=vn.set(pn,kn)||vn,kn};return cn.cache=new(P$5.Cache||v$6),cn}P$5.Cache=v$6;var gt$2=P$5,sr$2=500;function pr$2(sn){var ln=gt$2(sn,function(dn){return cn.size===sr$2&&cn.clear(),dn}),cn=ln.cache;return ln}var _t$2=pr$2,nr$2=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,lr$2=/\\(\\)?/g,mr$2=_t$2(function(sn){var ln=[];return sn.charCodeAt(0)===46&&ln.push(""),sn.replace(nr$2,function(cn,dn,pn,vn){ln.push(pn?vn.replace(lr$2,"$1"):dn||cn)}),ln}),It$2=mr$2;function ir$2(sn){return sn==null?"":H$8(sn)}var bt$2=ir$2;function ur$2(sn,ln){return i$9(sn)?sn:Q$4(sn,ln)?[sn]:It$2(bt$2(sn))}var Ot$2=ur$2,dr$2=1/0;function xr$2(sn){if(typeof sn=="string"||y$8(sn))return sn;var ln=sn+"";return ln=="0"&&1/sn==-dr$2?"-0":ln}var Et$2=xr$2;function cr$2(sn,ln,cn){ln=Ot$2(ln,sn);for(var dn=-1,pn=ln.length,vn=!1;++dn<pn;){var kn=Et$2(ln[dn]);if(!(vn=sn!=null&&cn(sn,kn)))break;sn=sn[kn]}return vn||++dn!=pn?vn:(pn=sn==null?0:sn.length,!!pn&&V$4(pn)&&X$3(kn,pn)&&(i$9(sn)||Y$5(sn)))}var St$2=cr$2,hr$2=Object.prototype,yr$2=hr$2.hasOwnProperty;function gr$2(sn,ln){return sn!=null&&yr$2.call(sn,ln)}var Tt$2=gr$2;function _r$2(sn,ln){return sn!=null&&St$2(sn,ln,Tt$2)}var w$7=_r$2,At$2=[...MANTINE_COLORS,"infgreen","white","rallit"],br$2=Array.from(Array(10).keys());At$2.flatMap(sn=>br$2.map(ln=>`${sn}.${ln}`));var Nt$2=["subtle","light","outline"],Pr$2=sn=>reactExports.isValidElement(sn)&&sn.type.displayName==="inflearnDsIcon",Ct$2=reactExports.forwardRef((sn,ln)=>{let cn=Yf(),{children:dn,size:pn="md",color:vn="gray",...kn}=sn,Sn=Rr$2(pn)?Mr$2[pn]:pn;return jsx$2(ActionIcon,{ref:ln,size:Sn,color:vn,...kn,children:reactExports.Children.map(dn,wn=>Pr$2(wn)&&typeof pn!="number"?reactExports.cloneElement(wn,{size:vt$2[pn],...Nt$2.includes(kn.variant||"")&&{color:zr$2(cn,vn)}}):wn)})});Ct$2.displayName="ActionIcon";var wr$2=Ct$2,vt$2={xs:"2xs",sm:"xs",md:"sm",lg:"md",xl:"lg","n-xs":"xs","n-sm":"sm","n-md":"md","n-lg":"lg","n-xl":"xl"},Mr$2={"n-xs":rem(30),"n-sm":rem(36),"n-md":rem(42),"n-lg":rem(50),"n-xl":rem(60)},Rr$2=sn=>sn==="n-xs"||sn==="n-sm"||sn==="n-md"||sn==="n-lg"||sn==="n-xl",zr$2=(sn,ln)=>{let[cn]=ln.split(".");return w$7(sn.colors,cn)?sn.colors[cn][7]:ln},Dr$2=wr$2,O$6=2;rem(30-O$6),rem(36-O$6),rem(42-O$6),rem(50-O$6),rem(60-O$6);/*! Bundled license information:

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/var o$9={default:"gray",success:"infgreen",information:"blue",error:"red",warning:"yellow"},n$8=(sn,ln)=>sn||(ln?o$9[ln]:"infgreen");function p$6(sn){let{children:ln,color:cn,type:dn,...pn}=sn;return jsx(Alert,{...pn,styles:()=>j$8({title:{marginBottom:ln?"":0},icon:{marginTop:ln?"1px":0}},pn.styles),color:n$8(cn,dn),children:ln||null})}var o$8=reactExports.forwardRef((sn,ln)=>jsx$2(Box,{...sn,ref:ln}));o$8.displayName="Box";var m$6=o$8,B$7=m$6,x$9={xs:14,sm:18,md:22,lg:26,xl:32},u$6=({size:sn,compact:ln,leftIcon:cn,rightIcon:dn})=>ln||cn&&dn?{}:cn?{paddingLeft:x$9[sn]}:dn?{paddingRight:x$9[sn]}:{},t$5=16,p$5={"2xs":10,xs:12,sm:14,md:16,lg:20,xl:24,"2xl":32,"1x":t$5*1,"2x":t$5*2,"3x":t$5*3,"4x":t$5*4,"5x":t$5*5,"6x":t$5*6,"7x":t$5*7,"8x":t$5*8,"9x":t$5*9,"10x":t$5*10},N$6=[...MANTINE_COLORS,"infgreen","white","rallit"],T$6=Array.from(Array(10).keys());N$6.flatMap(sn=>T$6.map(ln=>`${sn}.${ln}`));var s$6=reactExports.forwardRef((sn,ln)=>{let{children:cn,sx:dn,leftIcon:pn,rightIcon:vn,size:kn="sm",compact:Sn,...wn}=sn,Pn=()=>j$8({icon:{svg:{width:p$5[kn],height:p$5[kn]}}},wn.styles);return jsx$2(Button,{ref:ln,sx:[u$6({size:kn,compact:Sn,leftIcon:pn,rightIcon:vn}),...packSx(dn)],compact:Sn,leftIcon:pn,rightIcon:vn,size:kn,styles:Pn,...wn,children:cn})}),d$8=reactExports.forwardRef((sn,ln)=>jsx$2(Button.Group,{ref:ln,...sn}));s$6.displayName="Button";d$8.displayName="ButtonGroup";s$6.Group=d$8;var A$8=s$6,i$8=reactExports.forwardRef((sn,ln)=>{let{color:cn="infgreen",variant:dn,children:pn,...vn}=sn;return jsx(Chip,{...vn,color:cn,variant:dn,ref:ln,children:pn})});function e$4(sn){let{children:ln,...cn}=sn;return jsx(Chip.Group,{...cn,children:ln})}i$8.Group=e$4;i$8.displayName="Chip";e$4.displayName="ChipGroup";var f$5=i$8,o$7=reactExports.forwardRef((sn,ln)=>{let{spacing:cn=0,...dn}=sn;return jsx(Group,{spacing:cn,...dn,ref:ln})});o$7.displayName="Group";var a$8=o$7,m$5=a$8;function o$6(sn){let{withBorder:ln=!0,styles:cn,...dn}=sn;return jsx$2(Menu,{...dn,styles:(pn,vn,kn)=>j$8(ln?{}:{dropdown:{border:"none"}},typeof cn=="function"?cn(pn,vn,kn):cn)})}var s$5=reactExports.forwardRef((sn,ln)=>jsx$2(Menu.Item,{...sn,ref:ln}));s$5.displayName="MenuItem";var f$4=s$5;function y$7(sn){return jsx$2(Menu.Label,{...sn})}function c$9(sn){return jsx$2(Menu.Dropdown,{...sn})}var M$5=reactExports.forwardRef((sn,ln)=>jsx$2(Menu.Target,{...sn,ref:ln}));M$5.displayName="MenuTarget";function D$6(sn){return jsx$2(Menu.Divider,{...sn})}var w$6=o$6;o$6.Item=f$4;o$6.Label=y$7;o$6.Dropdown=c$9;o$6.Target=M$5;o$6.Divider=D$6;const ModalsContext=reactExports.createContext(null);ModalsContext.displayName="@mantine/modals/ModalsContext";function useModals$1(){const sn=reactExports.useContext(ModalsContext);if(!sn)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return sn}var __defProp$6=Object.defineProperty,__defProps$4=Object.defineProperties,__getOwnPropDescs$4=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$6=Object.getOwnPropertySymbols,__hasOwnProp$6=Object.prototype.hasOwnProperty,__propIsEnum$6=Object.prototype.propertyIsEnumerable,__defNormalProp$6=(sn,ln,cn)=>ln in sn?__defProp$6(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$6=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$6.call(ln,cn)&&__defNormalProp$6(sn,cn,ln[cn]);if(__getOwnPropSymbols$6)for(var cn of __getOwnPropSymbols$6(ln))__propIsEnum$6.call(ln,cn)&&__defNormalProp$6(sn,cn,ln[cn]);return sn},__spreadProps$4=(sn,ln)=>__defProps$4(sn,__getOwnPropDescs$4(ln));function ConfirmModal({id:sn,cancelProps:ln,confirmProps:cn,labels:dn={cancel:"",confirm:""},closeOnConfirm:pn=!0,closeOnCancel:vn=!0,groupProps:kn,onCancel:Sn,onConfirm:wn,children:Pn}){const{cancel:Nn,confirm:Ln}=dn,Fn=useModals$1(),zn=Kn=>{typeof(ln==null?void 0:ln.onClick)=="function"&&(ln==null||ln.onClick(Kn)),typeof Sn=="function"&&Sn(),vn&&Fn.closeModal(sn)},Dn=Kn=>{typeof(cn==null?void 0:cn.onClick)=="function"&&(cn==null||cn.onClick(Kn)),typeof wn=="function"&&wn(),pn&&Fn.closeModal(sn)};return jsxs$1(Fragment$1,{children:[Pn&&jsx$1(Box,{mb:"md",children:Pn}),jsxs$1(Group,{...__spreadValues$6({position:"right"},kn),children:[jsx$1(Button,{...__spreadProps$4(__spreadValues$6({variant:"default"},ln),{onClick:zn}),children:(ln==null?void 0:ln.children)||Nn}),jsx$1(Button,{...__spreadProps$4(__spreadValues$6({},cn),{onClick:Dn}),children:(cn==null?void 0:cn.children)||Ln})]})]})}function handleCloseModal(sn,ln){var cn,dn,pn,vn;ln&&sn.type==="confirm"&&((dn=(cn=sn.props).onCancel)==null||dn.call(cn)),(vn=(pn=sn.props).onClose)==null||vn.call(pn)}function modalsReducer(sn,ln){switch(ln.type){case"OPEN":return{current:ln.modal,modals:[...sn.modals,ln.modal]};case"CLOSE":{const cn=sn.modals.find(pn=>pn.id===ln.modalId);if(!cn)return sn;handleCloseModal(cn,ln.canceled);const dn=sn.modals.filter(pn=>pn.id!==ln.modalId);return{current:dn[dn.length-1]||sn.current,modals:dn}}case"CLOSE_ALL":return sn.modals.length?(sn.modals.concat().reverse().forEach(cn=>{handleCloseModal(cn,ln.canceled)}),{current:sn.current,modals:[]}):sn;default:return sn}}function dispatchEvent$1(sn,ln){window.dispatchEvent(new CustomEvent(sn,{detail:ln}))}const useIsomorphicEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function createUseExternalEvents(sn){function ln(dn){const pn=Object.keys(dn).reduce((vn,kn)=>(vn[`${sn}:${kn}`]=Sn=>dn[kn](Sn.detail),vn),{});useIsomorphicEffect(()=>(Object.keys(pn).forEach(vn=>{window.removeEventListener(vn,pn[vn]),window.addEventListener(vn,pn[vn])}),()=>Object.keys(pn).forEach(vn=>{window.removeEventListener(vn,pn[vn])})),[pn])}function cn(dn){return(...pn)=>dispatchEvent$1(`${sn}:${String(dn)}`,pn[0])}return[ln,cn]}const[useModalsEvents,createEvent$1]=createUseExternalEvents("mantine-modals"),openModal=createEvent$1("openModal");createEvent$1("closeModal");const closeAllModals=createEvent$1("closeAllModals");createEvent$1("openConfirmModal");const openContextModal=sn=>createEvent$1("openContextModal")(sn);var __defProp$5=Object.defineProperty,__defProps$3=Object.defineProperties,__getOwnPropDescs$3=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$5=Object.getOwnPropertySymbols,__hasOwnProp$5=Object.prototype.hasOwnProperty,__propIsEnum$5=Object.prototype.propertyIsEnumerable,__defNormalProp$5=(sn,ln,cn)=>ln in sn?__defProp$5(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$5=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$5.call(ln,cn)&&__defNormalProp$5(sn,cn,ln[cn]);if(__getOwnPropSymbols$5)for(var cn of __getOwnPropSymbols$5(ln))__propIsEnum$5.call(ln,cn)&&__defNormalProp$5(sn,cn,ln[cn]);return sn},__spreadProps$3=(sn,ln)=>__defProps$3(sn,__getOwnPropDescs$3(ln)),__objRest$2=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$5.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$5)for(var dn of __getOwnPropSymbols$5(sn))ln.indexOf(dn)<0&&__propIsEnum$5.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};function separateConfirmModalProps(sn){if(!sn)return{confirmProps:{},modalProps:{}};const ln=sn,{id:cn,children:dn,onCancel:pn,onConfirm:vn,closeOnConfirm:kn,closeOnCancel:Sn,cancelProps:wn,confirmProps:Pn,groupProps:Nn,labels:Ln}=ln,Fn=__objRest$2(ln,["id","children","onCancel","onConfirm","closeOnConfirm","closeOnCancel","cancelProps","confirmProps","groupProps","labels"]);return{confirmProps:{id:cn,children:dn,onCancel:pn,onConfirm:vn,closeOnConfirm:kn,closeOnCancel:Sn,cancelProps:wn,confirmProps:Pn,groupProps:Nn,labels:Ln},modalProps:__spreadValues$5({id:cn},Fn)}}function ModalsProvider({children:sn,modalProps:ln,labels:cn,modals:dn}){const[pn,vn]=reactExports.useReducer(modalsReducer,{modals:[],current:null}),kn=reactExports.useRef(pn);kn.current=pn;const Sn=reactExports.useCallback(qn=>{vn({type:"CLOSE_ALL",canceled:qn})},[kn,vn]),wn=reactExports.useCallback(qn=>{var Zn=qn,{modalId:Yn}=Zn,Jn=__objRest$2(Zn,["modalId"]);const rs=Yn||randomId();return vn({type:"OPEN",modal:{id:rs,type:"content",props:Jn}}),rs},[vn]),Pn=reactExports.useCallback(qn=>{var Zn=qn,{modalId:Yn}=Zn,Jn=__objRest$2(Zn,["modalId"]);const rs=Yn||randomId();return vn({type:"OPEN",modal:{id:rs,type:"confirm",props:Jn}}),rs},[vn]),Nn=reactExports.useCallback((qn,Zn)=>{var Yn=Zn,{modalId:Jn}=Yn,rs=__objRest$2(Yn,["modalId"]);const ss=Jn||randomId();return vn({type:"OPEN",modal:{id:ss,type:"context",props:rs,ctx:qn}}),ss},[vn]),Ln=reactExports.useCallback((qn,Zn)=>{vn({type:"CLOSE",modalId:qn,canceled:Zn})},[kn,vn]);useModalsEvents({openModal:wn,openConfirmModal:Pn,openContextModal:qn=>{var Zn=qn,{modal:Yn}=Zn,Jn=__objRest$2(Zn,["modal"]);return Nn(Yn,Jn)},closeModal:Ln,closeContextModal:Ln,closeAllModals:Sn});const Fn={modals:pn.modals,openModal:wn,openConfirmModal:Pn,openContextModal:Nn,closeModal:Ln,closeContextModal:Ln,closeAll:Sn},zn=()=>{const qn=kn.current.current;switch(qn==null?void 0:qn.type){case"context":{const Zn=qn.props,{innerProps:Yn}=Zn,Jn=__objRest$2(Zn,["innerProps"]),rs=dn[qn.ctx];return{modalProps:Jn,content:jsx$1(rs,{innerProps:Yn,context:Fn,id:qn.id})}}case"confirm":{const{modalProps:Zn,confirmProps:Yn}=separateConfirmModalProps(qn.props);return{modalProps:Zn,content:jsx$1(ConfirmModal,{...__spreadProps$3(__spreadValues$5({},Yn),{id:qn.id,labels:qn.props.labels||cn})})}}case"content":{const Zn=qn.props,{children:Yn}=Zn;return{modalProps:__objRest$2(Zn,["children"]),content:jsx$1(Fragment$1,{children:Yn})}}default:return{modalProps:{},content:null}}},{modalProps:Dn,content:Kn}=zn();return jsxs$1(ModalsContext.Provider,{value:Fn,children:[jsx$1(Modal,{...__spreadProps$3(__spreadValues$5(__spreadValues$5({zIndex:getDefaultZIndex("modal")+1},ln),Dn),{opened:pn.modals.length>0,onClose:()=>Ln(pn.current.id)}),children:Kn}),sn]})}var s$4={"1.5":1.5,"1.7":1.7};function i$7(sn){let{sx:ln,lineHeight:cn=s$4["1.5"],children:dn,...pn}=sn;return jsx$2(Text,{component:"p",sx:[{lineHeight:cn},...packSx(ln)],...pn,children:dn})}var a$7=i$7,c$8=a$7,e$3=reactExports.forwardRef((sn,ln)=>{let{children:cn,...dn}=sn;return jsx$2(Title,{...dn,ref:ln,children:cn})});e$3.displayName="Title";var n$7=e$3;function x$8({title:sn,withCloseButton:ln=!1,closeOnClickOutside:cn=!0,size:dn=320,...pn}){openContextModal({modal:"confirmModal",title:jsx(n$7,{order:2,color:"dark",size:"h4",children:sn}),withCloseButton:ln,closeOnClickOutside:cn,size:dn,innerProps:{...pn}})}function c$7({context:sn,id:ln,innerProps:{children:cn,labels:dn={cancel:"",confirm:""},onConfirm:pn,onCancel:vn,closeOnConfirm:kn=!0,closeOnCancel:Sn=!0}}){let{cancel:wn,confirm:Pn}=dn,Nn=()=>sn.closeModal(ln);return jsxs(Fragment,{children:[cn&&jsx(B$7,{mb:"md",sx:Ln=>({fontSize:Ln.fontSizes.sm,color:Ln.colors.gray[7]}),children:jsx(c$8,{component:"div",size:"sm",children:cn})}),jsxs(m$5,{position:"right",spacing:16,children:[wn&&jsx(A$8,{variant:"default",color:"white",size:"md",radius:"md",onClick:()=>{vn&&vn(Nn),Sn&&sn.closeModal(ln)},children:wn}),Pn&&jsx(A$8,{variant:"filled",size:"md",radius:"md",onClick:()=>{typeof pn=="function"&&pn(Nn),kn&&sn.closeModal(ln)},color:"infgreen",children:Pn})]})]})}function y$6({title:sn,withCloseButton:ln=!1,closeOnClickOutside:cn=!0,size:dn=320,...pn}){openContextModal({modal:"contextModal",title:jsx(n$7,{order:2,color:"dark",size:"h4",children:sn}),withCloseButton:ln,closeOnClickOutside:cn,size:dn,innerProps:{...pn}})}function _$5({context:sn,id:ln,innerProps:{children:cn,labels:dn={cancel:"",confirm:""},onConfirm:pn,onCancel:vn,closeOnConfirm:kn=!0,closeOnCancel:Sn=!0}}){let{cancel:wn,confirm:Pn}=dn,Nn=()=>sn.closeModal(ln);return jsxs(Fragment,{children:[cn&&jsx(B$7,{mb:"md",sx:Ln=>({fontSize:Ln.fontSizes.sm,color:Ln.colors.gray[7]}),children:jsx(c$8,{component:"div",size:"sm",children:cn})}),jsxs(m$5,{align:"stretch",spacing:16,noWrap:!0,children:[wn&&jsx(A$8,{variant:"default",color:"white",size:"md",radius:"md",onClick:()=>{vn&&vn(Nn),Sn&&sn.closeModal(ln)},sx:{flex:"1 1 50%"},children:wn}),Pn&&jsx(A$8,{variant:"filled",size:"md",radius:"md",onClick:()=>{typeof pn=="function"&&pn(Nn),kn&&sn.closeModal(ln)},color:"infgreen",sx:{flex:"1 1 50%"},children:Pn})]})]})}function E$8(sn){let{children:ln,modals:cn,...dn}=sn;return typeof window<"u"&&(window.__DS_MODALS__||(window.__DS_MODALS__=!0)),jsx(ModalsProvider,{modals:{confirmModal:c$7,contextModal:_$5,...cn},...dn,children:ln})}function _setPrototypeOf(sn,ln){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(dn,pn){return dn.__proto__=pn,dn},_setPrototypeOf(sn,ln)}function _inheritsLoose(sn,ln){sn.prototype=Object.create(ln.prototype),sn.prototype.constructor=sn,_setPrototypeOf(sn,ln)}const config$1={disabled:!1},TransitionGroupContext=React.createContext(null);var UNMOUNTED="unmounted",EXITED="exited",ENTERING="entering",ENTERED="entered",EXITING="exiting",Transition=function(sn){_inheritsLoose(ln,sn);function ln(dn,pn){var vn;vn=sn.call(this,dn,pn)||this;var kn=pn,Sn=kn&&!kn.isMounting?dn.enter:dn.appear,wn;return vn.appearStatus=null,dn.in?Sn?(wn=EXITED,vn.appearStatus=ENTERING):wn=ENTERED:dn.unmountOnExit||dn.mountOnEnter?wn=UNMOUNTED:wn=EXITED,vn.state={status:wn},vn.nextCallback=null,vn}ln.getDerivedStateFromProps=function(pn,vn){var kn=pn.in;return kn&&vn.status===UNMOUNTED?{status:EXITED}:null};var cn=ln.prototype;return cn.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},cn.componentDidUpdate=function(pn){var vn=null;if(pn!==this.props){var kn=this.state.status;this.props.in?kn!==ENTERING&&kn!==ENTERED&&(vn=ENTERING):(kn===ENTERING||kn===ENTERED)&&(vn=EXITING)}this.updateStatus(!1,vn)},cn.componentWillUnmount=function(){this.cancelNextCallback()},cn.getTimeouts=function(){var pn=this.props.timeout,vn,kn,Sn;return vn=kn=Sn=pn,pn!=null&&typeof pn!="number"&&(vn=pn.exit,kn=pn.enter,Sn=pn.appear!==void 0?pn.appear:kn),{exit:vn,enter:kn,appear:Sn}},cn.updateStatus=function(pn,vn){pn===void 0&&(pn=!1),vn!==null?(this.cancelNextCallback(),vn===ENTERING?this.performEnter(pn):this.performExit()):this.props.unmountOnExit&&this.state.status===EXITED&&this.setState({status:UNMOUNTED})},cn.performEnter=function(pn){var vn=this,kn=this.props.enter,Sn=this.context?this.context.isMounting:pn,wn=this.props.nodeRef?[Sn]:[ReactDOM.findDOMNode(this),Sn],Pn=wn[0],Nn=wn[1],Ln=this.getTimeouts(),Fn=Sn?Ln.appear:Ln.enter;if(!pn&&!kn||config$1.disabled){this.safeSetState({status:ENTERED},function(){vn.props.onEntered(Pn)});return}this.props.onEnter(Pn,Nn),this.safeSetState({status:ENTERING},function(){vn.props.onEntering(Pn,Nn),vn.onTransitionEnd(Fn,function(){vn.safeSetState({status:ENTERED},function(){vn.props.onEntered(Pn,Nn)})})})},cn.performExit=function(){var pn=this,vn=this.props.exit,kn=this.getTimeouts(),Sn=this.props.nodeRef?void 0:ReactDOM.findDOMNode(this);if(!vn||config$1.disabled){this.safeSetState({status:EXITED},function(){pn.props.onExited(Sn)});return}this.props.onExit(Sn),this.safeSetState({status:EXITING},function(){pn.props.onExiting(Sn),pn.onTransitionEnd(kn.exit,function(){pn.safeSetState({status:EXITED},function(){pn.props.onExited(Sn)})})})},cn.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},cn.safeSetState=function(pn,vn){vn=this.setNextCallback(vn),this.setState(pn,vn)},cn.setNextCallback=function(pn){var vn=this,kn=!0;return this.nextCallback=function(Sn){kn&&(kn=!1,vn.nextCallback=null,pn(Sn))},this.nextCallback.cancel=function(){kn=!1},this.nextCallback},cn.onTransitionEnd=function(pn,vn){this.setNextCallback(vn);var kn=this.props.nodeRef?this.props.nodeRef.current:ReactDOM.findDOMNode(this),Sn=pn==null&&!this.props.addEndListener;if(!kn||Sn){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var wn=this.props.nodeRef?[this.nextCallback]:[kn,this.nextCallback],Pn=wn[0],Nn=wn[1];this.props.addEndListener(Pn,Nn)}pn!=null&&setTimeout(this.nextCallback,pn)},cn.render=function(){var pn=this.state.status;if(pn===UNMOUNTED)return null;var vn=this.props,kn=vn.children;vn.in,vn.mountOnEnter,vn.unmountOnExit,vn.appear,vn.enter,vn.exit,vn.timeout,vn.addEndListener,vn.onEnter,vn.onEntering,vn.onEntered,vn.onExit,vn.onExiting,vn.onExited,vn.nodeRef;var Sn=_objectWithoutPropertiesLoose(vn,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return jsx$1(TransitionGroupContext.Provider,{value:null,children:typeof kn=="function"?kn(pn,Sn):React.cloneElement(React.Children.only(kn),Sn)})},ln}(React.Component);Transition.contextType=TransitionGroupContext;Transition.propTypes={};function noop$2(){}Transition.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:noop$2,onEntering:noop$2,onEntered:noop$2,onExit:noop$2,onExiting:noop$2,onExited:noop$2};Transition.UNMOUNTED=UNMOUNTED;Transition.EXITED=EXITED;Transition.ENTERING=ENTERING;Transition.ENTERED=ENTERED;Transition.EXITING=EXITING;const Transition$1=Transition;function _assertThisInitialized(sn){if(sn===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return sn}function getChildMapping(sn,ln){var cn=function(vn){return ln&&reactExports.isValidElement(vn)?ln(vn):vn},dn=Object.create(null);return sn&&reactExports.Children.map(sn,function(pn){return pn}).forEach(function(pn){dn[pn.key]=cn(pn)}),dn}function mergeChildMappings(sn,ln){sn=sn||{},ln=ln||{};function cn(Nn){return Nn in ln?ln[Nn]:sn[Nn]}var dn=Object.create(null),pn=[];for(var vn in sn)vn in ln?pn.length&&(dn[vn]=pn,pn=[]):pn.push(vn);var kn,Sn={};for(var wn in ln){if(dn[wn])for(kn=0;kn<dn[wn].length;kn++){var Pn=dn[wn][kn];Sn[dn[wn][kn]]=cn(Pn)}Sn[wn]=cn(wn)}for(kn=0;kn<pn.length;kn++)Sn[pn[kn]]=cn(pn[kn]);return Sn}function getProp(sn,ln,cn){return cn[ln]!=null?cn[ln]:sn.props[ln]}function getInitialChildMapping(sn,ln){return getChildMapping(sn.children,function(cn){return reactExports.cloneElement(cn,{onExited:ln.bind(null,cn),in:!0,appear:getProp(cn,"appear",sn),enter:getProp(cn,"enter",sn),exit:getProp(cn,"exit",sn)})})}function getNextChildMapping(sn,ln,cn){var dn=getChildMapping(sn.children),pn=mergeChildMappings(ln,dn);return Object.keys(pn).forEach(function(vn){var kn=pn[vn];if(reactExports.isValidElement(kn)){var Sn=vn in ln,wn=vn in dn,Pn=ln[vn],Nn=reactExports.isValidElement(Pn)&&!Pn.props.in;wn&&(!Sn||Nn)?pn[vn]=reactExports.cloneElement(kn,{onExited:cn.bind(null,kn),in:!0,exit:getProp(kn,"exit",sn),enter:getProp(kn,"enter",sn)}):!wn&&Sn&&!Nn?pn[vn]=reactExports.cloneElement(kn,{in:!1}):wn&&Sn&&reactExports.isValidElement(Pn)&&(pn[vn]=reactExports.cloneElement(kn,{onExited:cn.bind(null,kn),in:Pn.props.in,exit:getProp(kn,"exit",sn),enter:getProp(kn,"enter",sn)}))}}),pn}var values$1=Object.values||function(sn){return Object.keys(sn).map(function(ln){return sn[ln]})},defaultProps={component:"div",childFactory:function(ln){return ln}},TransitionGroup=function(sn){_inheritsLoose(ln,sn);function ln(dn,pn){var vn;vn=sn.call(this,dn,pn)||this;var kn=vn.handleExited.bind(_assertThisInitialized(vn));return vn.state={contextValue:{isMounting:!0},handleExited:kn,firstRender:!0},vn}var cn=ln.prototype;return cn.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},cn.componentWillUnmount=function(){this.mounted=!1},ln.getDerivedStateFromProps=function(pn,vn){var kn=vn.children,Sn=vn.handleExited,wn=vn.firstRender;return{children:wn?getInitialChildMapping(pn,Sn):getNextChildMapping(pn,kn,Sn),firstRender:!1}},cn.handleExited=function(pn,vn){var kn=getChildMapping(this.props.children);pn.key in kn||(pn.props.onExited&&pn.props.onExited(vn),this.mounted&&this.setState(function(Sn){var wn=_extends$3({},Sn.children);return delete wn[pn.key],{children:wn}}))},cn.render=function(){var pn=this.props,vn=pn.component,kn=pn.childFactory,Sn=_objectWithoutPropertiesLoose(pn,["component","childFactory"]),wn=this.state.contextValue,Pn=values$1(this.state.children).map(kn);return delete Sn.appear,delete Sn.enter,delete Sn.exit,vn===null?jsx$1(TransitionGroupContext.Provider,{value:wn,children:Pn}):jsx$1(TransitionGroupContext.Provider,{value:wn,children:jsx$1(vn,{...Sn,children:Pn})})},ln}(React.Component);TransitionGroup.propTypes={};TransitionGroup.defaultProps=defaultProps;const TransitionGroup$1=TransitionGroup,[useNotificationsEvents,createEvent]=createUseExternalEvents("mantine-notifications"),showNotification=createEvent("show"),hideNotification=createEvent("hide"),cleanNotifications=createEvent("clean"),cleanNotificationsQueue=createEvent("cleanQueue"),updateNotification=createEvent("update"),notifications={show:showNotification,hide:hideNotification,clean:cleanNotifications,cleanQueue:cleanNotificationsQueue,update:updateNotification};function getPositionStyles([sn,ln],cn){const dn={};return sn==="top"&&(dn.top=cn),sn==="bottom"&&(dn.bottom=cn),ln==="left"&&(dn.left=cn),ln==="right"&&(dn.right=cn),ln==="center"&&(dn.left="50%",dn.transform="translateX(-50%)"),dn}var __defProp$4=Object.defineProperty,__getOwnPropSymbols$4=Object.getOwnPropertySymbols,__hasOwnProp$4=Object.prototype.hasOwnProperty,__propIsEnum$4=Object.prototype.propertyIsEnumerable,__defNormalProp$4=(sn,ln,cn)=>ln in sn?__defProp$4(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$4=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$4.call(ln,cn)&&__defNormalProp$4(sn,cn,ln[cn]);if(__getOwnPropSymbols$4)for(var cn of __getOwnPropSymbols$4(ln))__propIsEnum$4.call(ln,cn)&&__defNormalProp$4(sn,cn,ln[cn]);return sn};const transforms={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},noTransform={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function getNotificationStateStyles({state:sn,maxHeight:ln,positioning:cn,transitionDuration:dn}){const[pn,vn]=cn,kn=vn==="center"?`${pn}-center`:vn,Sn={opacity:0,maxHeight:ln,transform:transforms[kn],transitionDuration:`${dn}ms, ${dn}ms, ${dn}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},wn={opacity:1,transform:noTransform[kn]},Pn={opacity:0,maxHeight:0,transform:transforms[kn]},Nn={entering:wn,entered:wn,exiting:Pn,exited:Pn};return __spreadValues$4(__spreadValues$4({},Sn),Nn[sn])}function getAutoClose(sn,ln){return typeof ln=="number"?ln:ln===!1||sn===!1?!1:sn}var __defProp$3=Object.defineProperty,__defProps$2=Object.defineProperties,__getOwnPropDescs$2=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$3=Object.getOwnPropertySymbols,__hasOwnProp$3=Object.prototype.hasOwnProperty,__propIsEnum$3=Object.prototype.propertyIsEnumerable,__defNormalProp$3=(sn,ln,cn)=>ln in sn?__defProp$3(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$3=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$3.call(ln,cn)&&__defNormalProp$3(sn,cn,ln[cn]);if(__getOwnPropSymbols$3)for(var cn of __getOwnPropSymbols$3(ln))__propIsEnum$3.call(ln,cn)&&__defNormalProp$3(sn,cn,ln[cn]);return sn},__spreadProps$2=(sn,ln)=>__defProps$2(sn,__getOwnPropDescs$2(ln)),__objRest$1=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$3.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$3)for(var dn of __getOwnPropSymbols$3(sn))ln.indexOf(dn)<0&&__propIsEnum$3.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};function NotificationContainer(sn){var ln=sn,{notification:cn,autoClose:dn,onHide:pn,innerRef:vn}=ln,kn=__objRest$1(ln,["notification","autoClose","onHide","innerRef"]);const Sn=cn,{autoClose:wn,message:Pn}=Sn,Nn=__objRest$1(Sn,["autoClose","message"]),Ln=getAutoClose(dn,wn),Fn=reactExports.useRef(),zn=()=>{pn(cn.id),window.clearTimeout(Fn.current)},Dn=()=>{clearTimeout(Fn.current)},Kn=()=>{typeof Ln=="number"&&(Fn.current=window.setTimeout(zn,Ln))};return reactExports.useEffect(()=>{typeof cn.onOpen=="function"&&cn.onOpen(cn)},[]),reactExports.useEffect(()=>(Kn(),Dn),[dn,cn.autoClose]),jsx$1(Notification,{...__spreadProps$2(__spreadValues$3(__spreadValues$3({},Nn),kn),{onClose:zn,onMouseEnter:Dn,onMouseLeave:Kn,ref:vn}),children:Pn})}NotificationContainer.displayName="@mantine/notifications/NotificationContainer";var useStyles=createStyles((sn,{zIndex:ln})=>({notifications:{width:`calc(100% - ${sn.spacing.md} * 2)`,boxSizing:"border-box",position:"fixed",zIndex:ln},notification:{"&:not(:first-of-type)":{marginTop:sn.spacing.sm}}}));const useStyles$1=useStyles;var __defProp$2=Object.defineProperty,__defProps$1=Object.defineProperties,__getOwnPropDescs$1=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$2=Object.getOwnPropertySymbols,__hasOwnProp$2=Object.prototype.hasOwnProperty,__propIsEnum$2=Object.prototype.propertyIsEnumerable,__defNormalProp$2=(sn,ln,cn)=>ln in sn?__defProp$2(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$2=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$2.call(ln,cn)&&__defNormalProp$2(sn,cn,ln[cn]);if(__getOwnPropSymbols$2)for(var cn of __getOwnPropSymbols$2(ln))__propIsEnum$2.call(ln,cn)&&__defNormalProp$2(sn,cn,ln[cn]);return sn},__spreadProps$1=(sn,ln)=>__defProps$1(sn,__getOwnPropDescs$1(ln));function useNotificationsState({limit:sn}){const{state:ln,queue:cn,update:dn,cleanQueue:pn}=useQueue({initialValues:[],limit:sn});return{notifications:ln,queue:cn,showNotification:Pn=>{const Nn=Pn.id||randomId();return dn(Ln=>Pn.id&&Ln.some(Fn=>Fn.id===Pn.id)?Ln:[...Ln,__spreadProps$1(__spreadValues$2({},Pn),{id:Nn})]),Nn},updateNotification:Pn=>dn(Nn=>{const Ln=Nn.findIndex(zn=>zn.id===Pn.id);if(Ln===-1)return Nn;const Fn=[...Nn];return Fn[Ln]=Pn,Fn}),hideNotification:Pn=>dn(Nn=>Nn.filter(Ln=>Ln.id===Pn?(typeof Ln.onClose=="function"&&Ln.onClose(Ln),!1):!0)),cleanQueue:pn,clean:()=>dn(()=>[])}}var __defProp$1=Object.defineProperty,__getOwnPropSymbols$1=Object.getOwnPropertySymbols,__hasOwnProp$1=Object.prototype.hasOwnProperty,__propIsEnum$1=Object.prototype.propertyIsEnumerable,__defNormalProp$1=(sn,ln,cn)=>ln in sn?__defProp$1(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn,__spreadValues$1=(sn,ln)=>{for(var cn in ln||(ln={}))__hasOwnProp$1.call(ln,cn)&&__defNormalProp$1(sn,cn,ln[cn]);if(__getOwnPropSymbols$1)for(var cn of __getOwnPropSymbols$1(ln))__propIsEnum$1.call(ln,cn)&&__defNormalProp$1(sn,cn,ln[cn]);return sn},__objRest=(sn,ln)=>{var cn={};for(var dn in sn)__hasOwnProp$1.call(sn,dn)&&ln.indexOf(dn)<0&&(cn[dn]=sn[dn]);if(sn!=null&&__getOwnPropSymbols$1)for(var dn of __getOwnPropSymbols$1(sn))ln.indexOf(dn)<0&&__propIsEnum$1.call(sn,dn)&&(cn[dn]=sn[dn]);return cn};const POSITIONS=["top-left","top-right","top-center","bottom-left","bottom-right","bottom-center"],Notifications=sn=>{var ln=sn,{className:cn,position:dn="bottom-right",autoClose:pn=4e3,transitionDuration:vn=250,containerWidth:kn=rem(440),notificationMaxHeight:Sn=rem(200),limit:wn=5,zIndex:Pn=getDefaultZIndex("overlay"),style:Nn,children:Ln,target:Fn}=ln,zn=__objRest(ln,["className","position","autoClose","transitionDuration","containerWidth","notificationMaxHeight","limit","zIndex","style","children","target"]);const Dn=useForceUpdate(),Kn=reactExports.useRef({}),qn=reactExports.useRef(0),{notifications:Zn,showNotification:Yn,updateNotification:Jn,hideNotification:rs,clean:ss,cleanQueue:as}=useNotificationsState({limit:wn}),{classes:ds,cx:Es,theme:Ss}=useStyles$1({zIndex:Pn}),Qn=useReducedMotion(),Ts=(Ss.respectReducedMotion?Qn:!1)?1:vn,Rs=(POSITIONS.includes(dn)?dn:"bottom-right").split("-");useDidUpdate(()=>{Zn.length>qn.current&&setTimeout(()=>Dn(),0),qn.current=Zn.length},[Zn]),useNotificationsEvents({show:Yn,hide:rs,update:Jn,clean:ss,cleanQueue:as});const ys=Zn.map(_s=>jsx$1(Transition$1,{timeout:Ts,onEnter:()=>Kn.current[_s.id].offsetHeight,nodeRef:{current:Kn.current[_s.id]},children:js=>jsx$1(NotificationContainer,{innerRef:bs=>{Kn.current[_s.id]=bs},notification:_s,onHide:rs,className:ds.notification,autoClose:pn,sx:[__spreadValues$1({},getNotificationStateStyles({state:js,positioning:Rs,transitionDuration:Ts,maxHeight:Sn})),...Array.isArray(_s.sx)?_s.sx:[_s.sx]]})},_s.id));return jsx$1(Portal,{target:Fn,children:jsx$1(Box,{...__spreadValues$1({className:Es(ds.notifications,cn),style:Nn,sx:__spreadValues$1({maxWidth:kn},getPositionStyles(Rs,Ss.spacing.md))},zn),children:jsx$1(TransitionGroup$1,{children:ys})})})};Notifications.displayName="@mantine/notifications/Notifications";Notifications.show=notifications.show;Notifications.hide=notifications.hide;Notifications.update=notifications.update;Notifications.clean=notifications.clean;Notifications.cleanQueue=notifications.cleanQueue;var faBookmark={prefix:"fas",iconName:"bookmark",icon:[384,512,[128278,61591],"f02e","M0 48V487.7C0 501.1 10.9 512 24.3 512c5 0 9.9-1.5 14-4.4L192 400 345.7 507.6c4.1 2.9 9 4.4 14 4.4c13.4 0 24.3-10.9 24.3-24.3V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48z"]},faStar={prefix:"fas",iconName:"star",icon:[576,512,[11088,61446],"f005","M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"]},faHeart={prefix:"fas",iconName:"heart",icon:[512,512,[128153,128154,128155,128156,128420,129293,129294,129505,9829,10084,61578],"f004","M47.6 300.4L228.3 469.1c7.5 7 17.4 10.9 27.7 10.9s20.2-3.9 27.7-10.9L464.4 300.4c30.4-28.3 47.6-68 47.6-109.5v-5.8c0-69.9-50.5-129.5-119.4-141C347 36.5 300.6 51.4 268 84L256 96 244 84c-32.6-32.6-79-47.5-124.6-39.9C50.5 55.6 0 115.2 0 185.1v5.8c0 41.5 17.2 81.2 47.6 109.5z"]},faBell={prefix:"fas",iconName:"bell",icon:[448,512,[128276,61602],"f0f3","M224 0c-17.7 0-32 14.3-32 32V51.2C119 66 64 130.6 64 208v18.8c0 47-17.3 92.4-48.5 127.6l-7.4 8.3c-8.4 9.4-10.4 22.9-5.3 34.4S19.4 416 32 416H416c12.6 0 24-7.4 29.2-18.9s3.1-25-5.3-34.4l-7.4-8.3C401.3 319.2 384 273.9 384 226.8V208c0-77.4-55-142-128-156.8V32c0-17.7-14.3-32-32-32zm45.3 493.3c12-12 18.7-28.3 18.7-45.3H224 160c0 17 6.7 33.3 18.7 45.3s28.3 18.7 45.3 18.7s33.3-6.7 45.3-18.7z"]},faXmark={prefix:"fas",iconName:"xmark",icon:[384,512,[128473,10005,10006,10060,215,"close","multiply","remove","times"],"f00d","M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"]},faCheck$1={prefix:"fas",iconName:"check",icon:[448,512,[10003,10004],"f00c","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"]},d$7="notification-action-button",b$8={variant:"light",color:"dark",size:"sm",styles:()=>({root:{marginLeft:"10px"}})},I$8=reactExports.forwardRef((sn,ln)=>jsx$2(A$8,{ref:ln,...sn,...b$8,id:d$7}));I$8.displayName="NotificationActionButton";function H$7(sn){return jsx$2(Notifications,{style:{bottom:0},position:"bottom-center",autoClose:3e3,zIndex:500,...sn})}var K$4=["small","large"],[N$5]=K$4,T$5={success:{color:"infgreen",icon:jsx$2(I$a,{icon:faCheck$1})},error:{color:"red",icon:jsx$2(I$a,{icon:faXmark})},information:{color:"blue",icon:jsx$2(I$a,{icon:faBell})},default:{color:"dark",icon:jsx$2(I$a,{icon:faBell})}};function g$6(sn){let ln=null,cn=null,dn=70;return{onTouchStart:pn=>{cn=null,ln=pn.targetTouches[0].clientX},onTouchMove:pn=>{cn=pn.targetTouches[0].clientX},onTouchEnd:pn=>{if(!ln||!cn)return;let vn=ln-cn;if(!(vn<0&&Math.abs(vn)>dn))return;if(sn){hideNotification(sn);return}let kn=pn.currentTarget,Sn=kn&&kn.id;Sn&&hideNotification(Sn)}}}function E$7(sn){return{onTouchEnd:ln=>{var cn;if(sn){hideNotification(sn);return}if(ln.target instanceof HTMLElement&&ln.target.id===d$7)return;let dn=(cn=ln.currentTarget)==null?void 0:cn.id;dn&&hideNotification(dn)}}}var A$7=sn=>"title"in sn&&"message"in sn,z$6=()=>{let sn=useMediaQuery(`(max-width: ${y$9.sm}px)`);function ln(dn,pn){let vn=sn&&dn,kn=g$6(pn),Sn=E$7(pn);return vn?{...kn,...Sn}:{}}function cn({hasIcon:dn=!0,type:pn="default",bottom:vn=N$5,actionButton:kn,...Sn}){let wn=ln(!!kn,Sn.id),Pn=Ln=>({bottom:Ln.other.bottomSpacingSmall,[sr$3.tablet]:{bottom:vn===N$5?Ln.other.bottomSpacingSmall:Ln.other.bottomSpacingLarge}}),Nn={icon:dn&&T$5[pn].icon,color:T$5[pn].color,withCloseButton:sn&&kn?!0:Sn.withCloseButton};return A$7(Sn)?showNotification({...Nn,styles:Ln=>({root:Pn(Ln),title:{marginBottom:0}}),...Sn,message:"",...wn,title:jsxs$2(m$5,{position:"apart",noWrap:!0,children:[jsxs$2("div",{children:[Sn.title,jsx$2(c$8,{size:"sm",weight:400,color:"gray.4",m:"2px 0 0 0",children:Sn.message})]}),!!kn&&kn]})}):showNotification({...Nn,message:"",styles:Ln=>({root:Pn(Ln),title:{marginBottom:0}}),...Sn,...wn,title:jsxs$2(m$5,{position:"apart",noWrap:!0,children:[Sn.title,!!kn&&kn]})})}return{showNotification:cn}},t$4=reactExports.forwardRef((sn,ln)=>{let{spacing:cn=0,...dn}=sn;return jsx(Stack,{spacing:cn,...dn,ref:ln})});t$4.displayName="Stack";var k$6=t$4,S$5=k$6,Ce$2=typeof global=="object"&&global&&global.Object===Object&&global,N$4=Ce$2,Pe$2=typeof self=="object"&&self&&self.Object===Object&&self,Me$2=N$4||Pe$2||Function("return this")(),d$6=Me$2,Be$1=d$6.Symbol,_$4=Be$1,at$1=Object.prototype,Le$2=at$1.hasOwnProperty,Ee$2=at$1.toString,B$6=_$4?_$4.toStringTag:void 0;function De$1(sn){var ln=Le$2.call(sn,B$6),cn=sn[B$6];try{sn[B$6]=void 0;var dn=!0}catch{}var pn=Ee$2.call(sn);return dn&&(ln?sn[B$6]=cn:delete sn[B$6]),pn}var ft$1=De$1,Re=Object.prototype,Fe$1=Re.toString;function Ne$1(sn){return Fe$1.call(sn)}var pt$1=Ne$1,ze$2="[object Null]",We$1="[object Undefined]",st$1=_$4?_$4.toStringTag:void 0;function Ge$1(sn){return sn==null?sn===void 0?We$1:ze$2:st$1&&st$1 in Object(sn)?ft$1(sn):pt$1(sn)}var h$5=Ge$1;function Ue$2(sn){return sn!=null&&typeof sn=="object"}var x$7=Ue$2,He$1=Array.isArray,L$5=He$1;function qe$2(sn){var ln=typeof sn;return sn!=null&&(ln=="object"||ln=="function")}var u$5=qe$2;function Ke$1(sn){return sn}var z$5=Ke$1,Ve$2="[object AsyncFunction]",ke$2="[object Function]",$e$1="[object GeneratorFunction]",Je$1="[object Proxy]";function Xe$1(sn){if(!u$5(sn))return!1;var ln=h$5(sn);return ln==ke$2||ln==$e$1||ln==Ve$2||ln==Je$1}var O$5=Xe$1,Ye$1=d$6["__core-js_shared__"],W$5=Ye$1,it$1=function(){var sn=/[^.]+$/.exec(W$5&&W$5.keys&&W$5.keys.IE_PROTO||"");return sn?"Symbol(src)_1."+sn:""}();function Ze$1(sn){return!!it$1&&it$1 in sn}var nt$1=Ze$1,Qe$1=Function.prototype,tr$1=Qe$1.toString;function er$1(sn){if(sn!=null){try{return tr$1.call(sn)}catch{}try{return sn+""}catch{}}return""}var ut$1=er$1,rr$1=/[\\^$.*+?()[\]{}|]/g,or$1=/^\[object .+?Constructor\]$/,ar$1=Function.prototype,fr$1=Object.prototype,pr$1=ar$1.toString,sr$1=fr$1.hasOwnProperty,ir$1=RegExp("^"+pr$1.call(sr$1).replace(rr$1,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function nr$1(sn){if(!u$5(sn)||nt$1(sn))return!1;var ln=O$5(sn)?ir$1:or$1;return ln.test(ut$1(sn))}var lt=nr$1;function ur$1(sn,ln){return sn==null?void 0:sn[ln]}var mt$1=ur$1;function lr$1(sn,ln){var cn=mt$1(sn,ln);return lt(cn)?cn:void 0}var j$5=lr$1,dt$1=Object.create,mr$1=function(){function sn(){}return function(ln){if(!u$5(ln))return{};if(dt$1)return dt$1(ln);sn.prototype=ln;var cn=new sn;return sn.prototype=void 0,cn}}(),xt$1=mr$1;function dr$1(sn,ln,cn){switch(cn.length){case 0:return sn.call(ln);case 1:return sn.call(ln,cn[0]);case 2:return sn.call(ln,cn[0],cn[1]);case 3:return sn.call(ln,cn[0],cn[1],cn[2])}return sn.apply(ln,cn)}var ct$1=dr$1;function xr$1(sn,ln){var cn=-1,dn=sn.length;for(ln||(ln=Array(dn));++cn<dn;)ln[cn]=sn[cn];return ln}var ht$1=xr$1,cr$1=800,hr$1=16,gr$1=Date.now;function yr$1(sn){var ln=0,cn=0;return function(){var dn=gr$1(),pn=hr$1-(dn-cn);if(cn=dn,pn>0){if(++ln>=cr$1)return arguments[0]}else ln=0;return sn.apply(void 0,arguments)}}var gt$1=yr$1;function br$1(sn){return function(){return sn}}var yt$1=br$1,vr$1=function(){try{var sn=j$5(Object,"defineProperty");return sn({},"",{}),sn}catch{}}(),T$4=vr$1,_r$1=T$4?function(sn,ln){return T$4(sn,"toString",{configurable:!0,enumerable:!1,value:yt$1(ln),writable:!0})}:z$5,bt$1=_r$1,Or$1=gt$1(bt$1),vt$1=Or$1,jr$1=9007199254740991,Tr$1=/^(?:0|[1-9]\d*)$/;function wr$1(sn,ln){var cn=typeof sn;return ln=ln??jr$1,!!ln&&(cn=="number"||cn!="symbol"&&Tr$1.test(sn))&&sn>-1&&sn%1==0&&sn<ln}var G$6=wr$1;function Ar$1(sn,ln,cn){ln=="__proto__"&&T$4?T$4(sn,ln,{configurable:!0,enumerable:!0,value:cn,writable:!0}):sn[ln]=cn}var w$5=Ar$1;function Sr$1(sn,ln){return sn===ln||sn!==sn&&ln!==ln}var g$5=Sr$1,Ir$1=Object.prototype,Cr$1=Ir$1.hasOwnProperty;function Pr$1(sn,ln,cn){var dn=sn[ln];(!(Cr$1.call(sn,ln)&&g$5(dn,cn))||cn===void 0&&!(ln in sn))&&w$5(sn,ln,cn)}var _t$1=Pr$1;function Mr$1(sn,ln,cn,dn){var pn=!cn;cn||(cn={});for(var vn=-1,kn=ln.length;++vn<kn;){var Sn=ln[vn],wn=dn?dn(cn[Sn],sn[Sn],Sn,cn,sn):void 0;wn===void 0&&(wn=sn[Sn]),pn?w$5(cn,Sn,wn):_t$1(cn,Sn,wn)}return cn}var Ot$1=Mr$1,jt$1=Math.max;function Br$1(sn,ln,cn){return ln=jt$1(ln===void 0?sn.length-1:ln,0),function(){for(var dn=arguments,pn=-1,vn=jt$1(dn.length-ln,0),kn=Array(vn);++pn<vn;)kn[pn]=dn[ln+pn];pn=-1;for(var Sn=Array(ln+1);++pn<ln;)Sn[pn]=dn[pn];return Sn[ln]=cn(kn),ct$1(sn,this,Sn)}}var Tt$1=Br$1;function Lr$1(sn,ln){return vt$1(Tt$1(sn,ln,z$5),sn+"")}var wt$1=Lr$1,Er$1=9007199254740991;function Dr$1(sn){return typeof sn=="number"&&sn>-1&&sn%1==0&&sn<=Er$1}var U$5=Dr$1;function Rr$1(sn){return sn!=null&&U$5(sn.length)&&!O$5(sn)}var A$6=Rr$1;function Fr$1(sn,ln,cn){if(!u$5(cn))return!1;var dn=typeof ln;return(dn=="number"?A$6(cn)&&G$6(ln,cn.length):dn=="string"&&ln in cn)?g$5(cn[ln],sn):!1}var At$1=Fr$1;function Nr$1(sn){return wt$1(function(ln,cn){var dn=-1,pn=cn.length,vn=pn>1?cn[pn-1]:void 0,kn=pn>2?cn[2]:void 0;for(vn=sn.length>3&&typeof vn=="function"?(pn--,vn):void 0,kn&&At$1(cn[0],cn[1],kn)&&(vn=pn<3?void 0:vn,pn=1),ln=Object(ln);++dn<pn;){var Sn=cn[dn];Sn&&sn(ln,Sn,dn,vn)}return ln})}var St$1=Nr$1,zr$1=Object.prototype;function Wr$1(sn){var ln=sn&&sn.constructor,cn=typeof ln=="function"&&ln.prototype||zr$1;return sn===cn}var H$6=Wr$1;function Gr$1(sn,ln){for(var cn=-1,dn=Array(sn);++cn<sn;)dn[cn]=ln(cn);return dn}var It$1=Gr$1,Ur$1="[object Arguments]";function Hr$1(sn){return x$7(sn)&&h$5(sn)==Ur$1}var Y$4=Hr$1,Ct$1=Object.prototype,qr$1=Ct$1.hasOwnProperty,Kr$1=Ct$1.propertyIsEnumerable,Vr$1=Y$4(function(){return arguments}())?Y$4:function(sn){return x$7(sn)&&qr$1.call(sn,"callee")&&!Kr$1.call(sn,"callee")},E$6=Vr$1;function kr$1(){return!1}var Pt$1=kr$1,Lt$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Mt$1=Lt$1&&typeof module=="object"&&module&&!module.nodeType&&module,$r$1=Mt$1&&Mt$1.exports===Lt$1,Bt$1=$r$1?d$6.Buffer:void 0,Jr$1=Bt$1?Bt$1.isBuffer:void 0,Xr$1=Jr$1||Pt$1,q$6=Xr$1,Yr$1="[object Arguments]",Zr$1="[object Array]",Qr$1="[object Boolean]",to$1="[object Date]",eo$1="[object Error]",ro$1="[object Function]",oo$1="[object Map]",ao$1="[object Number]",fo$1="[object Object]",po$1="[object RegExp]",so$1="[object Set]",io$1="[object String]",no$1="[object WeakMap]",uo$1="[object ArrayBuffer]",lo$1="[object DataView]",mo$1="[object Float32Array]",xo$1="[object Float64Array]",co$1="[object Int8Array]",ho$1="[object Int16Array]",go$1="[object Int32Array]",yo$1="[object Uint8Array]",bo$1="[object Uint8ClampedArray]",vo$1="[object Uint16Array]",_o$1="[object Uint32Array]",s$3={};s$3[mo$1]=s$3[xo$1]=s$3[co$1]=s$3[ho$1]=s$3[go$1]=s$3[yo$1]=s$3[bo$1]=s$3[vo$1]=s$3[_o$1]=!0;s$3[Yr$1]=s$3[Zr$1]=s$3[uo$1]=s$3[Qr$1]=s$3[lo$1]=s$3[to$1]=s$3[eo$1]=s$3[ro$1]=s$3[oo$1]=s$3[ao$1]=s$3[fo$1]=s$3[po$1]=s$3[so$1]=s$3[io$1]=s$3[no$1]=!1;function Oo$1(sn){return x$7(sn)&&U$5(sn.length)&&!!s$3[h$5(sn)]}var Et$1=Oo$1;function jo$1(sn){return function(ln){return sn(ln)}}var Dt$1=jo$1,Rt$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,D$5=Rt$1&&typeof module=="object"&&module&&!module.nodeType&&module,To$1=D$5&&D$5.exports===Rt$1,Z$3=To$1&&N$4.process,wo$1=function(){try{var sn=D$5&&D$5.require&&D$5.require("util").types;return sn||Z$3&&Z$3.binding&&Z$3.binding("util")}catch{}}(),Q$3=wo$1,Ft$1=Q$3&&Q$3.isTypedArray,Ao$1=Ft$1?Dt$1(Ft$1):Et$1,K$3=Ao$1,So$1=Object.prototype,Io$1=So$1.hasOwnProperty;function Co$1(sn,ln){var cn=L$5(sn),dn=!cn&&E$6(sn),pn=!cn&&!dn&&q$6(sn),vn=!cn&&!dn&&!pn&&K$3(sn),kn=cn||dn||pn||vn,Sn=kn?It$1(sn.length,String):[],wn=Sn.length;for(var Pn in sn)(ln||Io$1.call(sn,Pn))&&!(kn&&(Pn=="length"||pn&&(Pn=="offset"||Pn=="parent")||vn&&(Pn=="buffer"||Pn=="byteLength"||Pn=="byteOffset")||G$6(Pn,wn)))&&Sn.push(Pn);return Sn}var Nt$1=Co$1;function Po$1(sn,ln){return function(cn){return sn(ln(cn))}}var zt$1=Po$1;function Mo$1(sn){var ln=[];if(sn!=null)for(var cn in Object(sn))ln.push(cn);return ln}var Wt$1=Mo$1,Bo$1=Object.prototype,Lo$1=Bo$1.hasOwnProperty;function Eo$1(sn){if(!u$5(sn))return Wt$1(sn);var ln=H$6(sn),cn=[];for(var dn in sn)dn=="constructor"&&(ln||!Lo$1.call(sn,dn))||cn.push(dn);return cn}var Gt$1=Eo$1;function Do$1(sn){return A$6(sn)?Nt$1(sn,!0):Gt$1(sn)}var V$3=Do$1,Ro$1=j$5(Object,"create"),c$6=Ro$1;function Fo$1(){this.__data__=c$6?c$6(null):{},this.size=0}var Ut$1=Fo$1;function No$1(sn){var ln=this.has(sn)&&delete this.__data__[sn];return this.size-=ln?1:0,ln}var Ht$1=No$1,zo$1="__lodash_hash_undefined__",Wo$1=Object.prototype,Go$1=Wo$1.hasOwnProperty;function Uo$1(sn){var ln=this.__data__;if(c$6){var cn=ln[sn];return cn===zo$1?void 0:cn}return Go$1.call(ln,sn)?ln[sn]:void 0}var qt$1=Uo$1,Ho$1=Object.prototype,qo$1=Ho$1.hasOwnProperty;function Ko$1(sn){var ln=this.__data__;return c$6?ln[sn]!==void 0:qo$1.call(ln,sn)}var Kt$1=Ko$1,Vo$1="__lodash_hash_undefined__";function ko$2(sn,ln){var cn=this.__data__;return this.size+=this.has(sn)?0:1,cn[sn]=c$6&&ln===void 0?Vo$1:ln,this}var Vt$1=ko$2;function S$4(sn){var ln=-1,cn=sn==null?0:sn.length;for(this.clear();++ln<cn;){var dn=sn[ln];this.set(dn[0],dn[1])}}S$4.prototype.clear=Ut$1;S$4.prototype.delete=Ht$1;S$4.prototype.get=qt$1;S$4.prototype.has=Kt$1;S$4.prototype.set=Vt$1;var tt=S$4;function $o$1(){this.__data__=[],this.size=0}var kt$1=$o$1;function Jo$1(sn,ln){for(var cn=sn.length;cn--;)if(g$5(sn[cn][0],ln))return cn;return-1}var y$5=Jo$1,Xo$1=Array.prototype,Yo$1=Xo$1.splice;function Zo$1(sn){var ln=this.__data__,cn=y$5(ln,sn);if(cn<0)return!1;var dn=ln.length-1;return cn==dn?ln.pop():Yo$1.call(ln,cn,1),--this.size,!0}var $t$1=Zo$1;function Qo$1(sn){var ln=this.__data__,cn=y$5(ln,sn);return cn<0?void 0:ln[cn][1]}var Jt$1=Qo$1;function ta$1(sn){return y$5(this.__data__,sn)>-1}var Xt$1=ta$1;function ea$1(sn,ln){var cn=this.__data__,dn=y$5(cn,sn);return dn<0?(++this.size,cn.push([sn,ln])):cn[dn][1]=ln,this}var Yt$1=ea$1;function I$7(sn){var ln=-1,cn=sn==null?0:sn.length;for(this.clear();++ln<cn;){var dn=sn[ln];this.set(dn[0],dn[1])}}I$7.prototype.clear=kt$1;I$7.prototype.delete=$t$1;I$7.prototype.get=Jt$1;I$7.prototype.has=Xt$1;I$7.prototype.set=Yt$1;var b$7=I$7,ra$1=j$5(d$6,"Map"),k$5=ra$1;function oa$1(){this.size=0,this.__data__={hash:new tt,map:new(k$5||b$7),string:new tt}}var Zt$1=oa$1;function aa$1(sn){var ln=typeof sn;return ln=="string"||ln=="number"||ln=="symbol"||ln=="boolean"?sn!=="__proto__":sn===null}var Qt$1=aa$1;function fa$1(sn,ln){var cn=sn.__data__;return Qt$1(ln)?cn[typeof ln=="string"?"string":"hash"]:cn.map}var v$5=fa$1;function pa$1(sn){var ln=v$5(this,sn).delete(sn);return this.size-=ln?1:0,ln}var te$2=pa$1;function sa$1(sn){return v$5(this,sn).get(sn)}var ee$2=sa$1;function ia$1(sn){return v$5(this,sn).has(sn)}var re$2=ia$1;function na$1(sn,ln){var cn=v$5(this,sn),dn=cn.size;return cn.set(sn,ln),this.size+=cn.size==dn?0:1,this}var oe$2=na$1;function C$5(sn){var ln=-1,cn=sn==null?0:sn.length;for(this.clear();++ln<cn;){var dn=sn[ln];this.set(dn[0],dn[1])}}C$5.prototype.clear=Zt$1;C$5.prototype.delete=te$2;C$5.prototype.get=ee$2;C$5.prototype.has=re$2;C$5.prototype.set=oe$2;var ae$2=C$5,ua$1=zt$1(Object.getPrototypeOf,Object),$$Y=ua$1,la$1="[object Object]",ma$1=Function.prototype,da$1=Object.prototype,fe$2=ma$1.toString,xa$1=da$1.hasOwnProperty,ca$1=fe$2.call(Object);function ha$1(sn){if(!x$7(sn)||h$5(sn)!=la$1)return!1;var ln=$$Y(sn);if(ln===null)return!0;var cn=xa$1.call(ln,"constructor")&&ln.constructor;return typeof cn=="function"&&cn instanceof cn&&fe$2.call(cn)==ca$1}var pe$2=ha$1;function ga$1(){this.__data__=new b$7,this.size=0}var se$2=ga$1;function ya$1(sn){var ln=this.__data__,cn=ln.delete(sn);return this.size=ln.size,cn}var ie$2=ya$1;function ba$1(sn){return this.__data__.get(sn)}var ne$2=ba$1;function va$1(sn){return this.__data__.has(sn)}var ue$2=va$1,_a$4=200;function Oa$1(sn,ln){var cn=this.__data__;if(cn instanceof b$7){var dn=cn.__data__;if(!k$5||dn.length<_a$4-1)return dn.push([sn,ln]),this.size=++cn.size,this;cn=this.__data__=new ae$2(dn)}return cn.set(sn,ln),this.size=cn.size,this}var le$2=Oa$1;function P$4(sn){var ln=this.__data__=new b$7(sn);this.size=ln.size}P$4.prototype.clear=se$2;P$4.prototype.delete=ie$2;P$4.prototype.get=ne$2;P$4.prototype.has=ue$2;P$4.prototype.set=le$2;var me$2=P$4,he$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,de$2=he$2&&typeof module=="object"&&module&&!module.nodeType&&module,ja$1=de$2&&de$2.exports===he$2,xe$2=ja$1?d$6.Buffer:void 0,ce$2=xe$2?xe$2.allocUnsafe:void 0;function Ta$1(sn,ln){if(ln)return sn.slice();var cn=sn.length,dn=ce$2?ce$2(cn):new sn.constructor(cn);return sn.copy(dn),dn}var ge$2=Ta$1,wa$1=d$6.Uint8Array,et$1=wa$1;function Aa$1(sn){var ln=new sn.constructor(sn.byteLength);return new et$1(ln).set(new et$1(sn)),ln}var ye$2=Aa$1;function Sa$1(sn,ln){var cn=ln?ye$2(sn.buffer):sn.buffer;return new sn.constructor(cn,sn.byteOffset,sn.length)}var be$2=Sa$1;function Ia$1(sn){return typeof sn.constructor=="function"&&!H$6(sn)?xt$1($$Y(sn)):{}}var ve$2=Ia$1;function Ca$1(sn){return function(ln,cn,dn){for(var pn=-1,vn=Object(ln),kn=dn(ln),Sn=kn.length;Sn--;){var wn=kn[sn?Sn:++pn];if(cn(vn[wn],wn,vn)===!1)break}return ln}}var _e$2=Ca$1,Pa$1=_e$2(),Oe$2=Pa$1;function Ma$1(sn,ln,cn){(cn!==void 0&&!g$5(sn[ln],cn)||cn===void 0&&!(ln in sn))&&w$5(sn,ln,cn)}var R$4=Ma$1;function Ba$1(sn){return x$7(sn)&&A$6(sn)}var je$2=Ba$1;function La$1(sn,ln){if(!(ln==="constructor"&&typeof sn[ln]=="function")&&ln!="__proto__")return sn[ln]}var F$7=La$1;function Ea$1(sn){return Ot$1(sn,V$3(sn))}var Te$2=Ea$1;function Da$1(sn,ln,cn,dn,pn,vn,kn){var Sn=F$7(sn,cn),wn=F$7(ln,cn),Pn=kn.get(wn);if(Pn){R$4(sn,cn,Pn);return}var Nn=vn?vn(Sn,wn,cn+"",sn,ln,kn):void 0,Ln=Nn===void 0;if(Ln){var Fn=L$5(wn),zn=!Fn&&q$6(wn),Dn=!Fn&&!zn&&K$3(wn);Nn=wn,Fn||zn||Dn?L$5(Sn)?Nn=Sn:je$2(Sn)?Nn=ht$1(Sn):zn?(Ln=!1,Nn=ge$2(wn,!0)):Dn?(Ln=!1,Nn=be$2(wn,!0)):Nn=[]:pe$2(wn)||E$6(wn)?(Nn=Sn,E$6(Sn)?Nn=Te$2(Sn):(!u$5(Sn)||O$5(Sn))&&(Nn=ve$2(wn))):Ln=!1}Ln&&(kn.set(wn,Nn),pn(Nn,wn,dn,vn,kn),kn.delete(wn)),R$4(sn,cn,Nn)}var we$2=Da$1;function Ae$2(sn,ln,cn,dn,pn){sn!==ln&&Oe$2(ln,function(vn,kn){if(pn||(pn=new me$2),u$5(vn))we$2(sn,ln,kn,cn,Ae$2,dn,pn);else{var Sn=dn?dn(F$7(sn,kn),vn,kn+"",sn,ln,pn):void 0;Sn===void 0&&(Sn=vn),R$4(sn,kn,Sn)}},V$3)}var Se$2=Ae$2,Ra$1=St$1(function(sn,ln,cn){Se$2(sn,ln,cn)}),rt$1=Ra$1,Ie$2=reactExports.forwardRef((sn,ln)=>{let cn=rt$1({track:{cursor:"pointer"},label:{cursor:"pointer"}},sn.styles);return jsx(Switch,{styles:cn,...sn,ref:ln})}),za$1=Ie$2;Ie$2.displayName="Switch";/**
* @license
* Lodash (Custom Build) <https://lodash.com/>
* Build: `lodash modularize exports="es" -o ./`
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/var e$2=reactExports.forwardRef((sn,ln)=>jsx(Textarea,{...sn,ref:ln})),x$6=e$2;e$2.displayName="Textarea";var T$3=x$6;function o$5(sn){return jsx(Tooltip,{...sn})}function n$6({children:sn,...ln}){return jsx(Indicator,{...ln,children:sn})}var a$6=n$6,Ve$1=typeof global=="object"&&global&&global.Object===Object&&global,G$5=Ve$1,qe$1=typeof self=="object"&&self&&self.Object===Object&&self,Ke=G$5||qe$1||Function("return this")(),d$5=Ke,$e=d$5.Symbol,M$4=$e,nt=Object.prototype,ke$1=nt.hasOwnProperty,Je=nt.toString,L$4=M$4?M$4.toStringTag:void 0;function Xe(sn){var ln=ke$1.call(sn,L$4),cn=sn[L$4];try{sn[L$4]=void 0;var dn=!0}catch{}var pn=Je.call(sn);return dn&&(ln?sn[L$4]=cn:delete sn[L$4]),pn}var ut=Xe,Ye=Object.prototype,Ze=Ye.toString;function Qe(sn){return Ze.call(sn)}var mt=Qe,tr="[object Null]",er="[object Undefined]",dt=M$4?M$4.toStringTag:void 0;function rr(sn){return sn==null?sn===void 0?er:tr:dt&&dt in Object(sn)?ut(sn):mt(sn)}var b$6=rr;function or(sn){return sn!=null&&typeof sn=="object"}var x$5=or,ar=Array.isArray,F$6=ar;function fr(sn){var ln=typeof sn;return sn!=null&&(ln=="object"||ln=="function")}var n$5=fr;function sr(sn){return sn}var U$4=sr,pr="[object AsyncFunction]",ir="[object Function]",lr="[object GeneratorFunction]",nr="[object Proxy]";function ur(sn){if(!n$5(sn))return!1;var ln=b$6(sn);return ln==ir||ln==lr||ln==pr||ln==nr}var A$5=ur,mr=d$5["__core-js_shared__"],V$2=mr,xt=function(){var sn=/[^.]+$/.exec(V$2&&V$2.keys&&V$2.keys.IE_PROTO||"");return sn?"Symbol(src)_1."+sn:""}();function dr(sn){return!!xt&&xt in sn}var ct=dr,xr=Function.prototype,cr=xr.toString;function hr(sn){if(sn!=null){try{return cr.call(sn)}catch{}try{return sn+""}catch{}}return""}var ht=hr,yr=/[\\^$.*+?()[\]{}|]/g,gr=/^\[object .+?Constructor\]$/,br=Function.prototype,vr=Object.prototype,_r=br.toString,Or=vr.hasOwnProperty,Tr=RegExp("^"+_r.call(Or).replace(yr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Mr(sn){if(!n$5(sn)||ct(sn))return!1;var ln=A$5(sn)?Tr:gr;return ln.test(ht(sn))}var yt=Mr;function Ar(sn,ln){return sn==null?void 0:sn[ln]}var gt=Ar;function jr(sn,ln){var cn=gt(sn,ln);return yt(cn)?cn:void 0}var j$4=jr,bt=Object.create,wr=function(){function sn(){}return function(ln){if(!n$5(ln))return{};if(bt)return bt(ln);sn.prototype=ln;var cn=new sn;return sn.prototype=void 0,cn}}(),vt=wr;function Sr(sn,ln,cn){switch(cn.length){case 0:return sn.call(ln);case 1:return sn.call(ln,cn[0]);case 2:return sn.call(ln,cn[0],cn[1]);case 3:return sn.call(ln,cn[0],cn[1],cn[2])}return sn.apply(ln,cn)}var _t=Sr;function Pr(sn,ln){var cn=-1,dn=sn.length;for(ln||(ln=Array(dn));++cn<dn;)ln[cn]=sn[cn];return ln}var Ot=Pr,Cr=800,Br=16,Ir=Date.now;function Er(sn){var ln=0,cn=0;return function(){var dn=Ir(),pn=Br-(dn-cn);if(cn=dn,pn>0){if(++ln>=Cr)return arguments[0]}else ln=0;return sn.apply(void 0,arguments)}}var Tt=Er;function Nr(sn){return function(){return sn}}var Mt=Nr,Rr=function(){try{var sn=j$4(Object,"defineProperty");return sn({},"",{}),sn}catch{}}(),w$4=Rr,Lr=w$4?function(sn,ln){return w$4(sn,"toString",{configurable:!0,enumerable:!1,value:Mt(ln),writable:!0})}:U$4,At=Lr,Fr=Tt(At),jt=Fr,Dr=9007199254740991,Hr=/^(?:0|[1-9]\d*)$/;function zr(sn,ln){var cn=typeof sn;return ln=ln??Dr,!!ln&&(cn=="number"||cn!="symbol"&&Hr.test(sn))&&sn>-1&&sn%1==0&&sn<ln}var q$5=zr;function Wr(sn,ln,cn){ln=="__proto__"&&w$4?w$4(sn,ln,{configurable:!0,enumerable:!0,value:cn,writable:!0}):sn[ln]=cn}var S$3=Wr;function Gr(sn,ln){return sn===ln||sn!==sn&&ln!==ln}var v$4=Gr,Ur=Object.prototype,Vr=Ur.hasOwnProperty;function qr(sn,ln,cn){var dn=sn[ln];(!(Vr.call(sn,ln)&&v$4(dn,cn))||cn===void 0&&!(ln in sn))&&S$3(sn,ln,cn)}var wt=qr;function Kr(sn,ln,cn,dn){var pn=!cn;cn||(cn={});for(var vn=-1,kn=ln.length;++vn<kn;){var Sn=ln[vn],wn=dn?dn(cn[Sn],sn[Sn],Sn,cn,sn):void 0;wn===void 0&&(wn=sn[Sn]),pn?S$3(cn,Sn,wn):wt(cn,Sn,wn)}return cn}var St=Kr,Pt=Math.max;function $r(sn,ln,cn){return ln=Pt(ln===void 0?sn.length-1:ln,0),function(){for(var dn=arguments,pn=-1,vn=Pt(dn.length-ln,0),kn=Array(vn);++pn<vn;)kn[pn]=dn[ln+pn];pn=-1;for(var Sn=Array(ln+1);++pn<ln;)Sn[pn]=dn[pn];return Sn[ln]=cn(kn),_t(sn,this,Sn)}}var Ct=$r;function kr(sn,ln){return jt(Ct(sn,ln,U$4),sn+"")}var Bt=kr,Jr=9007199254740991;function Xr(sn){return typeof sn=="number"&&sn>-1&&sn%1==0&&sn<=Jr}var K$2=Xr;function Yr(sn){return sn!=null&&K$2(sn.length)&&!A$5(sn)}var P$3=Yr;function Zr(sn,ln,cn){if(!n$5(cn))return!1;var dn=typeof ln;return(dn=="number"?P$3(cn)&&q$5(ln,cn.length):dn=="string"&&ln in cn)?v$4(cn[ln],sn):!1}var It=Zr;function Qr(sn){return Bt(function(ln,cn){var dn=-1,pn=cn.length,vn=pn>1?cn[pn-1]:void 0,kn=pn>2?cn[2]:void 0;for(vn=sn.length>3&&typeof vn=="function"?(pn--,vn):void 0,kn&&It(cn[0],cn[1],kn)&&(vn=pn<3?void 0:vn,pn=1),ln=Object(ln);++dn<pn;){var Sn=cn[dn];Sn&&sn(ln,Sn,dn,vn)}return ln})}var Et=Qr,to=Object.prototype;function eo(sn){var ln=sn&&sn.constructor,cn=typeof ln=="function"&&ln.prototype||to;return sn===cn}var $$X=eo;function ro(sn,ln){for(var cn=-1,dn=Array(sn);++cn<sn;)dn[cn]=ln(cn);return dn}var Nt=ro,oo="[object Arguments]";function ao(sn){return x$5(sn)&&b$6(sn)==oo}var et=ao,Rt=Object.prototype,fo=Rt.hasOwnProperty,so=Rt.propertyIsEnumerable,po=et(function(){return arguments}())?et:function(sn){return x$5(sn)&&fo.call(sn,"callee")&&!so.call(sn,"callee")},D$4=po;function io(){return!1}var Lt=io,Ht=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ft=Ht&&typeof module=="object"&&module&&!module.nodeType&&module,lo=Ft&&Ft.exports===Ht,Dt=lo?d$5.Buffer:void 0,no=Dt?Dt.isBuffer:void 0,uo=no||Lt,k$4=uo,mo="[object Arguments]",xo="[object Array]",co="[object Boolean]",ho="[object Date]",yo="[object Error]",go="[object Function]",bo="[object Map]",vo="[object Number]",_o="[object Object]",Oo="[object RegExp]",To="[object Set]",Mo="[object String]",Ao="[object WeakMap]",jo="[object ArrayBuffer]",wo="[object DataView]",So="[object Float32Array]",Po="[object Float64Array]",Co="[object Int8Array]",Bo="[object Int16Array]",Io="[object Int32Array]",Eo="[object Uint8Array]",No="[object Uint8ClampedArray]",Ro="[object Uint16Array]",Lo="[object Uint32Array]",p$4={};p$4[So]=p$4[Po]=p$4[Co]=p$4[Bo]=p$4[Io]=p$4[Eo]=p$4[No]=p$4[Ro]=p$4[Lo]=!0;p$4[mo]=p$4[xo]=p$4[jo]=p$4[co]=p$4[wo]=p$4[ho]=p$4[yo]=p$4[go]=p$4[bo]=p$4[vo]=p$4[_o]=p$4[Oo]=p$4[To]=p$4[Mo]=p$4[Ao]=!1;function Fo(sn){return x$5(sn)&&K$2(sn.length)&&!!p$4[b$6(sn)]}var zt=Fo;function Do(sn){return function(ln){return sn(ln)}}var Wt=Do,Gt=typeof exports=="object"&&exports&&!exports.nodeType&&exports,H$5=Gt&&typeof module=="object"&&module&&!module.nodeType&&module,Ho=H$5&&H$5.exports===Gt,rt=Ho&&G$5.process,zo=function(){try{var sn=H$5&&H$5.require&&H$5.require("util").types;return sn||rt&&rt.binding&&rt.binding("util")}catch{}}(),ot=zo,Ut=ot&&ot.isTypedArray,Wo=Ut?Wt(Ut):zt,J$3=Wo,Go=Object.prototype,Uo=Go.hasOwnProperty;function Vo(sn,ln){var cn=F$6(sn),dn=!cn&&D$4(sn),pn=!cn&&!dn&&k$4(sn),vn=!cn&&!dn&&!pn&&J$3(sn),kn=cn||dn||pn||vn,Sn=kn?Nt(sn.length,String):[],wn=Sn.length;for(var Pn in sn)(ln||Uo.call(sn,Pn))&&!(kn&&(Pn=="length"||pn&&(Pn=="offset"||Pn=="parent")||vn&&(Pn=="buffer"||Pn=="byteLength"||Pn=="byteOffset")||q$5(Pn,wn)))&&Sn.push(Pn);return Sn}var Vt=Vo;function qo(sn,ln){return function(cn){return sn(ln(cn))}}var qt=qo;function Ko(sn){var ln=[];if(sn!=null)for(var cn in Object(sn))ln.push(cn);return ln}var Kt=Ko,$o=Object.prototype,ko$1=$o.hasOwnProperty;function Jo(sn){if(!n$5(sn))return Kt(sn);var ln=$$X(sn),cn=[];for(var dn in sn)dn=="constructor"&&(ln||!ko$1.call(sn,dn))||cn.push(dn);return cn}var $t=Jo;function Xo(sn){return P$3(sn)?Vt(sn,!0):$t(sn)}var X$2=Xo,Yo=j$4(Object,"create"),h$4=Yo;function Zo(){this.__data__=h$4?h$4(null):{},this.size=0}var kt=Zo;function Qo(sn){var ln=this.has(sn)&&delete this.__data__[sn];return this.size-=ln?1:0,ln}var Jt=Qo,ta="__lodash_hash_undefined__",ea=Object.prototype,ra=ea.hasOwnProperty;function oa(sn){var ln=this.__data__;if(h$4){var cn=ln[sn];return cn===ta?void 0:cn}return ra.call(ln,sn)?ln[sn]:void 0}var Xt=oa,aa=Object.prototype,fa=aa.hasOwnProperty;function sa(sn){var ln=this.__data__;return h$4?ln[sn]!==void 0:fa.call(ln,sn)}var Yt=sa,pa="__lodash_hash_undefined__";function ia(sn,ln){var cn=this.__data__;return this.size+=this.has(sn)?0:1,cn[sn]=h$4&&ln===void 0?pa:ln,this}var Zt=ia;function C$4(sn){var ln=-1,cn=sn==null?0:sn.length;for(this.clear();++ln<cn;){var dn=sn[ln];this.set(dn[0],dn[1])}}C$4.prototype.clear=kt;C$4.prototype.delete=Jt;C$4.prototype.get=Xt;C$4.prototype.has=Yt;C$4.prototype.set=Zt;var at=C$4;function la(){this.__data__=[],this.size=0}var Qt=la;function na(sn,ln){for(var cn=sn.length;cn--;)if(v$4(sn[cn][0],ln))return cn;return-1}var _$3=na,ua=Array.prototype,ma=ua.splice;function da(sn){var ln=this.__data__,cn=_$3(ln,sn);if(cn<0)return!1;var dn=ln.length-1;return cn==dn?ln.pop():ma.call(ln,cn,1),--this.size,!0}var te$1=da;function xa(sn){var ln=this.__data__,cn=_$3(ln,sn);return cn<0?void 0:ln[cn][1]}var ee$1=xa;function ca(sn){return _$3(this.__data__,sn)>-1}var re$1=ca;function ha(sn,ln){var cn=this.__data__,dn=_$3(cn,sn);return dn<0?(++this.size,cn.push([sn,ln])):cn[dn][1]=ln,this}var oe$1=ha;function B$5(sn){var ln=-1,cn=sn==null?0:sn.length;for(this.clear();++ln<cn;){var dn=sn[ln];this.set(dn[0],dn[1])}}B$5.prototype.clear=Qt;B$5.prototype.delete=te$1;B$5.prototype.get=ee$1;B$5.prototype.has=re$1;B$5.prototype.set=oe$1;var O$4=B$5,ya=j$4(d$5,"Map"),Y$3=ya;function ga(){this.size=0,this.__data__={hash:new at,map:new(Y$3||O$4),string:new at}}var ae$1=ga;function ba(sn){var ln=typeof sn;return ln=="string"||ln=="number"||ln=="symbol"||ln=="boolean"?sn!=="__proto__":sn===null}var fe$1=ba;function va(sn,ln){var cn=sn.__data__;return fe$1(ln)?cn[typeof ln=="string"?"string":"hash"]:cn.map}var T$2=va;function _a$3(sn){var ln=T$2(this,sn).delete(sn);return this.size-=ln?1:0,ln}var se$1=_a$3;function Oa(sn){return T$2(this,sn).get(sn)}var pe$1=Oa;function Ta(sn){return T$2(this,sn).has(sn)}var ie$1=Ta;function Ma(sn,ln){var cn=T$2(this,sn),dn=cn.size;return cn.set(sn,ln),this.size+=cn.size==dn?0:1,this}var le$1=Ma;function I$6(sn){var ln=-1,cn=sn==null?0:sn.length;for(this.clear();++ln<cn;){var dn=sn[ln];this.set(dn[0],dn[1])}}I$6.prototype.clear=ae$1;I$6.prototype.delete=se$1;I$6.prototype.get=pe$1;I$6.prototype.has=ie$1;I$6.prototype.set=le$1;var ne$1=I$6,Aa=qt(Object.getPrototypeOf,Object),Z$2=Aa,ja="[object Object]",wa=Function.prototype,Sa=Object.prototype,ue$1=wa.toString,Pa=Sa.hasOwnProperty,Ca=ue$1.call(Object);function Ba(sn){if(!x$5(sn)||b$6(sn)!=ja)return!1;var ln=Z$2(sn);if(ln===null)return!0;var cn=Pa.call(ln,"constructor")&&ln.constructor;return typeof cn=="function"&&cn instanceof cn&&ue$1.call(cn)==Ca}var me$1=Ba;function Ia(){this.__data__=new O$4,this.size=0}var de$1=Ia;function Ea(sn){var ln=this.__data__,cn=ln.delete(sn);return this.size=ln.size,cn}var xe$1=Ea;function Na(sn){return this.__data__.get(sn)}var ce$1=Na;function Ra(sn){return this.__data__.has(sn)}var he$1=Ra,La=200;function Fa(sn,ln){var cn=this.__data__;if(cn instanceof O$4){var dn=cn.__data__;if(!Y$3||dn.length<La-1)return dn.push([sn,ln]),this.size=++cn.size,this;cn=this.__data__=new ne$1(dn)}return cn.set(sn,ln),this.size=cn.size,this}var ye$1=Fa;function E$5(sn){var ln=this.__data__=new O$4(sn);this.size=ln.size}E$5.prototype.clear=de$1;E$5.prototype.delete=xe$1;E$5.prototype.get=ce$1;E$5.prototype.has=he$1;E$5.prototype.set=ye$1;var ge$1=E$5,Oe$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,be$1=Oe$1&&typeof module=="object"&&module&&!module.nodeType&&module,Da=be$1&&be$1.exports===Oe$1,ve$1=Da?d$5.Buffer:void 0,_e$1=ve$1?ve$1.allocUnsafe:void 0;function Ha(sn,ln){if(ln)return sn.slice();var cn=sn.length,dn=_e$1?_e$1(cn):new sn.constructor(cn);return sn.copy(dn),dn}var Te$1=Ha,za=d$5.Uint8Array,ft=za;function Wa(sn){var ln=new sn.constructor(sn.byteLength);return new ft(ln).set(new ft(sn)),ln}var Me$1=Wa;function Ga(sn,ln){var cn=ln?Me$1(sn.buffer):sn.buffer;return new sn.constructor(cn,sn.byteOffset,sn.length)}var Ae$1=Ga;function Ua(sn){return typeof sn.constructor=="function"&&!$$X(sn)?vt(Z$2(sn)):{}}var je$1=Ua;function Va(sn){return function(ln,cn,dn){for(var pn=-1,vn=Object(ln),kn=dn(ln),Sn=kn.length;Sn--;){var wn=kn[sn?Sn:++pn];if(cn(vn[wn],wn,vn)===!1)break}return ln}}var we$1=Va,qa=we$1(),Se$1=qa;function Ka(sn,ln,cn){(cn!==void 0&&!v$4(sn[ln],cn)||cn===void 0&&!(ln in sn))&&S$3(sn,ln,cn)}var z$4=Ka;function $a(sn){return x$5(sn)&&P$3(sn)}var Pe$1=$a;function ka(sn,ln){if(!(ln==="constructor"&&typeof sn[ln]=="function")&&ln!="__proto__")return sn[ln]}var W$4=ka;function Ja(sn){return St(sn,X$2(sn))}var Ce$1=Ja;function Xa(sn,ln,cn,dn,pn,vn,kn){var Sn=W$4(sn,cn),wn=W$4(ln,cn),Pn=kn.get(wn);if(Pn){z$4(sn,cn,Pn);return}var Nn=vn?vn(Sn,wn,cn+"",sn,ln,kn):void 0,Ln=Nn===void 0;if(Ln){var Fn=F$6(wn),zn=!Fn&&k$4(wn),Dn=!Fn&&!zn&&J$3(wn);Nn=wn,Fn||zn||Dn?F$6(Sn)?Nn=Sn:Pe$1(Sn)?Nn=Ot(Sn):zn?(Ln=!1,Nn=Te$1(wn,!0)):Dn?(Ln=!1,Nn=Ae$1(wn,!0)):Nn=[]:me$1(wn)||D$4(wn)?(Nn=Sn,D$4(Sn)?Nn=Ce$1(Sn):(!n$5(Sn)||A$5(Sn))&&(Nn=je$1(wn))):Ln=!1}Ln&&(kn.set(wn,Nn),pn(Nn,wn,dn,vn,kn),kn.delete(wn)),z$4(sn,cn,Nn)}var Be=Xa;function Ie$1(sn,ln,cn,dn,pn){sn!==ln&&Se$1(ln,function(vn,kn){if(pn||(pn=new ge$1),n$5(vn))Be(sn,ln,kn,cn,Ie$1,dn,pn);else{var Sn=dn?dn(W$4(sn,kn),vn,kn+"",sn,ln,pn):void 0;Sn===void 0&&(Sn=vn),z$4(sn,kn,Sn)}},X$2)}var Ee$1=Ie$1,Ya=Et(function(sn,ln,cn){Ee$1(sn,ln,cn)}),st=Ya,pt=css$1({flexWrap:"nowrap",">*":{width:"100%"}}),it=css$1({flexWrap:"wrap",gap:8,">*":{width:"100%"}});function Le$1({children:sn,styleWrapper:ln,align:cn="right",...dn}){return jsx$2("footer",{css:[af,ln],children:jsx$2(m$5,{spacing:16,position:"right",css:[cn==="grow"?pt:void 0,cn==="vertical"?it:void 0],...dn,children:reactExports.Children.map(sn,pn=>reactExports.isValidElement(pn)&&reactExports.cloneElement(pn,{size:"md"}))})})}var af=css$1({padding:"0"}),Fe=sn=>(ln,cn,dn)=>st({content:{display:"flex",flexDirection:"column"},body:{flexGrow:1,overflow:"auto"}},typeof sn=="function"?sn(ln,cn,dn):sn);function c$5(sn){let{styles:ln,...cn}=sn;return jsx$2(Modal,{...cn,styles:Fe(ln)})}function ff(sn){let{styles:ln,...cn}=sn;return jsx$2(Modal.Root,{...cn,styles:Fe(ln)})}var De=reactExports.forwardRef((sn,ln)=>jsx$2(Modal.CloseButton,{...sn,ref:ln})),He=reactExports.forwardRef((sn,ln)=>jsx$2(Modal.Overlay,{...sn,ref:ln})),ze$1=reactExports.forwardRef((sn,ln)=>jsx$2(Modal.Content,{...sn,ref:ln})),We=reactExports.forwardRef((sn,ln)=>jsx$2(Modal.Header,{...sn,ref:ln})),Ge=reactExports.forwardRef((sn,ln)=>jsx$2(Modal.Title,{...sn,ref:ln})),Ue$1=reactExports.forwardRef((sn,ln)=>jsx$2(Modal.Body,{...sn,ref:ln}));function sf({children:sn}){return jsx$2(Modal.NativeScrollArea,{children:sn})}De.displayName="ModalCloseButton";He.displayName="ModalOverlay";ze$1.displayName="ModalContent";We.displayName="ModalHeader";Ge.displayName="ModalTitle";Ue$1.displayName="ModalBody";c$5.Root=ff;c$5.CloseButton=De;c$5.Overlay=He;c$5.Content=ze$1;c$5.Header=We;c$5.Title=Ge;c$5.Body=Ue$1;c$5.NativeScrollArea=sf;c$5.Footer=Le$1;/*! Bundled license information:

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/function r$4(sn){let{children:ln}=sn;return jsx(Popover,{...sn,children:ln})}r$4.Target=Popover.Target;r$4.Dropdown=Popover.Dropdown;var t$3=r$4;function p$3(sn){return jsx(Kbd,{...sn})}var t$2=p$3;function LogoLoading({styleWrapper:sn}){return jsx("div",{"aria-label":"loading",css:[styleContainer,sn,"",""],children:jsx("div",{css:styleSessionLoading})})}const styleContainer={name:"12a04nj",styles:"display:flex;align-items:center;justify-content:center;height:100%"},shadowPulse=keyframes({"0%":{boxShadow:"0 0 0 0px rgba(0, 0, 0, 0.2)"},"100%":{boxShadow:"0 0 0 35px rgba(0, 0, 0, 0)"}}),styleSessionLoading=css$1({animation:`${shadowPulse} 1s infinite`,backgroundImage:"url(https://cdn.inflearn.com/public/main/profile/default_profile.png)",width:"50px",height:"50px",borderRadius:"50%",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundSize:"cover"},"",""),styleLogoLoading={name:"tlxyv9",styles:"height:calc(var(--vh, 1vh) * 100)"};function ErrorNotification({errorMessage:sn}){return jsx("div",{children:sn?jsx("p",{children:sn}):jsxs("p",{children:["새로고침을 진행해주세요.",jsx("br",{}),"오류가 지속되면 관리자에게 문의해주세요."]})})}var _ref$7={name:"s1n8ed",styles:"height:100vh"};function AppErrorFallback({resetErrorBoundary:sn}){const{showNotification:ln}=z$6(),cn="app-error",dn=reactExports.useCallback(()=>{hideNotification(cn),setTimeout(()=>{sn()},500)},[]);return reactExports.useEffect(()=>{ln({id:cn,title:"일시적인 오류가 발생했습니다.",autoClose:!1,type:"error",message:jsx(ErrorNotification,{onReset:dn})})},[]),jsx("section",{css:_ref$7,children:jsx(LogoLoading,{})})}const IGNORE_ERRORS=["Network Error","Load failed","TypeError: Load failed","Failed to fetch","TypeError: Failed to fetch","console error: TypeError: Failed to fetch","console error: TypeError: Load failed","NetworkError when attempting to fetch resource.","The network connection was lost.","네트워크 연결이 유실되었습니다.","The operation couldn’t be completed. Software caused connection abort","작업을 완료할 수 없습니다. 소프트웨어에 의한 연결 중단","WebKit encountered an internal error","The Internet connection appears to be offline.","Non-Error promise rejection captured with keys: currentTarget, isTrusted, target, type","취소됨","cannot parse response","Network request failed","Loading chunk","Loading CSS chunk","Could not connect to the server","An SSL error has occurred","checkDomStatus",'Uncaught "Script error."','Uncaught "ResizeObserver loop completed with undelivered notifications."'],URL_VOUCHER="/vouchers",URL_CARTS=()=>`${appConfig.ANTMAN_APP_URL}/carts`,URL_COURSE_DESCRIPTION=(sn,ln)=>{const cn=ln?`?inst=${ln}`:"";return`${appConfig.ANTMAN_APP_URL}/course/${sn}`+cn},URL_COURSE_DASHBOARD=sn=>`${appConfig.ANTMAN_APP_URL}/course/${sn}/dashboard`,URL_SIGNIN=sn=>`${appConfig.ANTMAN_APP_URL}/signin`+(sn?`?referUrl=${encodeURIComponent(sn)}`:""),URL_INFLEARN_FAQ=`${appConfig.ANTMAN_APP_URL}/faq`,URL_LECTURE_V2="/course/lecture";function useSetMobileVh(){const sn=()=>{const ln=window.innerHeight*.01;document.documentElement.style.setProperty("--vh",`${ln}px`)};reactExports.useEffect(()=>{sn()},[]),useEvent$2("resize",sn),useEvent$2("deviceorientation",sn)}const isBot=sn=>{const ln="(googlebot/|bot|Googlebot-Mobile|Googlebot-Image|Google favicon|Mediapartners-Google|bingbot|slurp|java|wget|curl|Commons-HttpClient|Python-urllib|libwww|httpunit|nutch|phpcrawl|msnbot|jyxobot|FAST-WebCrawler|FAST Enterprise Crawler|biglotron|teoma|convera|seekbot|gigablast|exabot|ngbot|ia_archiver|GingerCrawler|webmon |httrack|webcrawler|grub.org|UsineNouvelleCrawler|antibot|netresearchserver|speedy|fluffy|bibnum.bnf|findlink|msrbot|panscient|yacybot|AISearchBot|IOI|ips-agent|tagoobot|MJ12bot|dotbot|woriobot|yanga|buzzbot|mlbot|yandexbot|purebot|Linguee Bot|Voyager|CyberPatrol|voilabot|baiduspider|citeseerxbot|spbot|twengabot|postrank|turnitinbot|scribdbot|page2rss|sitebot|linkdex|Adidxbot|blekkobot|ezooms|dotbot|Mail.RU_Bot|discobot|heritrix|findthatfile|europarchive.org|NerdByNature.Bot|sistrix crawler|ahrefsbot|Aboundex|domaincrawler|wbsearchbot|summify|ccbot|edisterbot|seznambot|ec2linkfinder|gslfbot|aihitbot|intelium_bot|facebookexternalhit|yeti|RetrevoPageAnalyzer|lb-spider|sogou|lssbot|careerbot|wotbox|wocbot|ichiro|DuckDuckBot|lssrocketcrawler|drupact|webcompanycrawler|acoonbot|openindexspider|gnam gnam spider|web-archive-net.com.bot|backlinkcrawler|coccoc|integromedb|content crawler spider|toplistbot|seokicks-robot|it2media-domain-crawler|ip-web-crawler.com|siteexplorer.info|elisabot|proximic|changedetection|blexbot|arabot|WeSEE:Search|niki-bot|CrystalSemanticsBot|rogerbot|360Spider|psbot|InterfaxScanBot|Lipperhey SEO Service|CC Metadata Scaper|g00g1e.net|GrapeshotCrawler|urlappendbot|brainobot|fr-crawler|binlar|SimpleCrawler|Livelapbot|Twitterbot|cXensebot|smtbot|bnf.fr_bot|A6-Indexer|ADmantX|Facebot|Twitterbot|OrangeBot|memorybot|AdvBot|MegaIndex|SemanticScholarBot|ltx71|nerdybot|xovibot|BUbiNG|Qwantify|archive.org_bot|Applebot|TweetmemeBot|crawler4j|findxbot|SemrushBot|yoozBot|lipperhey|y!j-asr|Domain Re-Animator Bot|AddThis)";return new RegExp(ln,"i").test(sn)},scriptRel="modulepreload",assetsURL=function(sn){return"https://cdn.inflearn.com/monolith/lecture/"+sn},seen={},__vitePreload=function(ln,cn,dn){if(!cn||cn.length===0)return ln();const pn=document.getElementsByTagName("link");return Promise.all(cn.map(vn=>{if(vn=assetsURL(vn),vn in seen)return;seen[vn]=!0;const kn=vn.endsWith(".css"),Sn=kn?'[rel="stylesheet"]':"";if(!!dn)for(let Nn=pn.length-1;Nn>=0;Nn--){const Ln=pn[Nn];if(Ln.href===vn&&(!kn||Ln.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${vn}"]${Sn}`))return;const Pn=document.createElement("link");if(Pn.rel=kn?"stylesheet":scriptRel,kn||(Pn.as="script",Pn.crossOrigin=""),Pn.href=vn,document.head.appendChild(Pn),kn)return new Promise((Nn,Ln)=>{Pn.addEventListener("load",Nn),Pn.addEventListener("error",()=>Ln(new Error(`Unable to preload CSS for ${vn}`)))})})).then(()=>ln())};/*! js-cookie v3.0.5 | MIT */function assign(sn){for(var ln=1;ln<arguments.length;ln++){var cn=arguments[ln];for(var dn in cn)sn[dn]=cn[dn]}return sn}var defaultConverter={read:function(sn){return sn[0]==='"'&&(sn=sn.slice(1,-1)),sn.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(sn){return encodeURIComponent(sn).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function init(sn,ln){function cn(pn,vn,kn){if(!(typeof document>"u")){kn=assign({},ln,kn),typeof kn.expires=="number"&&(kn.expires=new Date(Date.now()+kn.expires*864e5)),kn.expires&&(kn.expires=kn.expires.toUTCString()),pn=encodeURIComponent(pn).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var Sn="";for(var wn in kn)kn[wn]&&(Sn+="; "+wn,kn[wn]!==!0&&(Sn+="="+kn[wn].split(";")[0]));return document.cookie=pn+"="+sn.write(vn,pn)+Sn}}function dn(pn){if(!(typeof document>"u"||arguments.length&&!pn)){for(var vn=document.cookie?document.cookie.split("; "):[],kn={},Sn=0;Sn<vn.length;Sn++){var wn=vn[Sn].split("="),Pn=wn.slice(1).join("=");try{var Nn=decodeURIComponent(wn[0]);if(kn[Nn]=sn.read(Pn,Nn),pn===Nn)break}catch{}}return pn?kn[pn]:kn}}return Object.create({set:cn,get:dn,remove:function(pn,vn){cn(pn,"",assign({},vn,{expires:-1}))},withAttributes:function(pn){return init(this.converter,assign({},this.attributes,pn))},withConverter:function(pn){return init(assign({},this.converter,pn),this.attributes)}},{attributes:{value:Object.freeze(ln)},converter:{value:Object.freeze(sn)}})}var api=init(defaultConverter,{path:"/"}),queryString$1={},strictUriEncode=sn=>encodeURIComponent(sn).replace(/[!'()*]/g,ln=>`%${ln.charCodeAt(0).toString(16).toUpperCase()}`),token="%[a-f0-9]{2}",singleMatcher=new RegExp("("+token+")|([^%]+?)","gi"),multiMatcher=new RegExp("("+token+")+","gi");function decodeComponents(sn,ln){try{return[decodeURIComponent(sn.join(""))]}catch{}if(sn.length===1)return sn;ln=ln||1;var cn=sn.slice(0,ln),dn=sn.slice(ln);return Array.prototype.concat.call([],decodeComponents(cn),decodeComponents(dn))}function decode$1(sn){try{return decodeURIComponent(sn)}catch{for(var ln=sn.match(singleMatcher)||[],cn=1;cn<ln.length;cn++)sn=decodeComponents(ln,cn).join(""),ln=sn.match(singleMatcher)||[];return sn}}function customDecodeURIComponent(sn){for(var ln={"%FE%FF":"��","%FF%FE":"��"},cn=multiMatcher.exec(sn);cn;){try{ln[cn[0]]=decodeURIComponent(cn[0])}catch{var dn=decode$1(cn[0]);dn!==cn[0]&&(ln[cn[0]]=dn)}cn=multiMatcher.exec(sn)}ln["%C2"]="�";for(var pn=Object.keys(ln),vn=0;vn<pn.length;vn++){var kn=pn[vn];sn=sn.replace(new RegExp(kn,"g"),ln[kn])}return sn}var decodeUriComponent=function(sn){if(typeof sn!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof sn+"`");try{return sn=sn.replace(/\+/g," "),decodeURIComponent(sn)}catch{return customDecodeURIComponent(sn)}},splitOnFirst=(sn,ln)=>{if(!(typeof sn=="string"&&typeof ln=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(ln==="")return[sn];const cn=sn.indexOf(ln);return cn===-1?[sn]:[sn.slice(0,cn),sn.slice(cn+ln.length)]},filterObj=function(sn,ln){for(var cn={},dn=Object.keys(sn),pn=Array.isArray(ln),vn=0;vn<dn.length;vn++){var kn=dn[vn],Sn=sn[kn];(pn?ln.indexOf(kn)!==-1:ln(kn,Sn,sn))&&(cn[kn]=Sn)}return cn};(function(sn){const ln=strictUriEncode,cn=decodeUriComponent,dn=splitOnFirst,pn=filterObj,vn=Yn=>Yn==null,kn=Symbol("encodeFragmentIdentifier");function Sn(Yn){switch(Yn.arrayFormat){case"index":return Jn=>(rs,ss)=>{const as=rs.length;return ss===void 0||Yn.skipNull&&ss===null||Yn.skipEmptyString&&ss===""?rs:ss===null?[...rs,[Nn(Jn,Yn),"[",as,"]"].join("")]:[...rs,[Nn(Jn,Yn),"[",Nn(as,Yn),"]=",Nn(ss,Yn)].join("")]};case"bracket":return Jn=>(rs,ss)=>ss===void 0||Yn.skipNull&&ss===null||Yn.skipEmptyString&&ss===""?rs:ss===null?[...rs,[Nn(Jn,Yn),"[]"].join("")]:[...rs,[Nn(Jn,Yn),"[]=",Nn(ss,Yn)].join("")];case"colon-list-separator":return Jn=>(rs,ss)=>ss===void 0||Yn.skipNull&&ss===null||Yn.skipEmptyString&&ss===""?rs:ss===null?[...rs,[Nn(Jn,Yn),":list="].join("")]:[...rs,[Nn(Jn,Yn),":list=",Nn(ss,Yn)].join("")];case"comma":case"separator":case"bracket-separator":{const Jn=Yn.arrayFormat==="bracket-separator"?"[]=":"=";return rs=>(ss,as)=>as===void 0||Yn.skipNull&&as===null||Yn.skipEmptyString&&as===""?ss:(as=as===null?"":as,ss.length===0?[[Nn(rs,Yn),Jn,Nn(as,Yn)].join("")]:[[ss,Nn(as,Yn)].join(Yn.arrayFormatSeparator)])}default:return Jn=>(rs,ss)=>ss===void 0||Yn.skipNull&&ss===null||Yn.skipEmptyString&&ss===""?rs:ss===null?[...rs,Nn(Jn,Yn)]:[...rs,[Nn(Jn,Yn),"=",Nn(ss,Yn)].join("")]}}function wn(Yn){let Jn;switch(Yn.arrayFormat){case"index":return(rs,ss,as)=>{if(Jn=/\[(\d*)\]$/.exec(rs),rs=rs.replace(/\[\d*\]$/,""),!Jn){as[rs]=ss;return}as[rs]===void 0&&(as[rs]={}),as[rs][Jn[1]]=ss};case"bracket":return(rs,ss,as)=>{if(Jn=/(\[\])$/.exec(rs),rs=rs.replace(/\[\]$/,""),!Jn){as[rs]=ss;return}if(as[rs]===void 0){as[rs]=[ss];return}as[rs]=[].concat(as[rs],ss)};case"colon-list-separator":return(rs,ss,as)=>{if(Jn=/(:list)$/.exec(rs),rs=rs.replace(/:list$/,""),!Jn){as[rs]=ss;return}if(as[rs]===void 0){as[rs]=[ss];return}as[rs]=[].concat(as[rs],ss)};case"comma":case"separator":return(rs,ss,as)=>{const ds=typeof ss=="string"&&ss.includes(Yn.arrayFormatSeparator),Es=typeof ss=="string"&&!ds&&Ln(ss,Yn).includes(Yn.arrayFormatSeparator);ss=Es?Ln(ss,Yn):ss;const Ss=ds||Es?ss.split(Yn.arrayFormatSeparator).map(Qn=>Ln(Qn,Yn)):ss===null?ss:Ln(ss,Yn);as[rs]=Ss};case"bracket-separator":return(rs,ss,as)=>{const ds=/(\[\])$/.test(rs);if(rs=rs.replace(/\[\]$/,""),!ds){as[rs]=ss&&Ln(ss,Yn);return}const Es=ss===null?[]:ss.split(Yn.arrayFormatSeparator).map(Ss=>Ln(Ss,Yn));if(as[rs]===void 0){as[rs]=Es;return}as[rs]=[].concat(as[rs],Es)};default:return(rs,ss,as)=>{if(as[rs]===void 0){as[rs]=ss;return}as[rs]=[].concat(as[rs],ss)}}}function Pn(Yn){if(typeof Yn!="string"||Yn.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function Nn(Yn,Jn){return Jn.encode?Jn.strict?ln(Yn):encodeURIComponent(Yn):Yn}function Ln(Yn,Jn){return Jn.decode?cn(Yn):Yn}function Fn(Yn){return Array.isArray(Yn)?Yn.sort():typeof Yn=="object"?Fn(Object.keys(Yn)).sort((Jn,rs)=>Number(Jn)-Number(rs)).map(Jn=>Yn[Jn]):Yn}function zn(Yn){const Jn=Yn.indexOf("#");return Jn!==-1&&(Yn=Yn.slice(0,Jn)),Yn}function Dn(Yn){let Jn="";const rs=Yn.indexOf("#");return rs!==-1&&(Jn=Yn.slice(rs)),Jn}function Kn(Yn){Yn=zn(Yn);const Jn=Yn.indexOf("?");return Jn===-1?"":Yn.slice(Jn+1)}function qn(Yn,Jn){return Jn.parseNumbers&&!Number.isNaN(Number(Yn))&&typeof Yn=="string"&&Yn.trim()!==""?Yn=Number(Yn):Jn.parseBooleans&&Yn!==null&&(Yn.toLowerCase()==="true"||Yn.toLowerCase()==="false")&&(Yn=Yn.toLowerCase()==="true"),Yn}function Zn(Yn,Jn){Jn=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},Jn),Pn(Jn.arrayFormatSeparator);const rs=wn(Jn),ss=Object.create(null);if(typeof Yn!="string"||(Yn=Yn.trim().replace(/^[?#&]/,""),!Yn))return ss;for(const as of Yn.split("&")){if(as==="")continue;let[ds,Es]=dn(Jn.decode?as.replace(/\+/g," "):as,"=");Es=Es===void 0?null:["comma","separator","bracket-separator"].includes(Jn.arrayFormat)?Es:Ln(Es,Jn),rs(Ln(ds,Jn),Es,ss)}for(const as of Object.keys(ss)){const ds=ss[as];if(typeof ds=="object"&&ds!==null)for(const Es of Object.keys(ds))ds[Es]=qn(ds[Es],Jn);else ss[as]=qn(ds,Jn)}return Jn.sort===!1?ss:(Jn.sort===!0?Object.keys(ss).sort():Object.keys(ss).sort(Jn.sort)).reduce((as,ds)=>{const Es=ss[ds];return Es&&typeof Es=="object"&&!Array.isArray(Es)?as[ds]=Fn(Es):as[ds]=Es,as},Object.create(null))}sn.extract=Kn,sn.parse=Zn,sn.stringify=(Yn,Jn)=>{if(!Yn)return"";Jn=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},Jn),Pn(Jn.arrayFormatSeparator);const rs=Es=>Jn.skipNull&&vn(Yn[Es])||Jn.skipEmptyString&&Yn[Es]==="",ss=Sn(Jn),as={};for(const Es of Object.keys(Yn))rs(Es)||(as[Es]=Yn[Es]);const ds=Object.keys(as);return Jn.sort!==!1&&ds.sort(Jn.sort),ds.map(Es=>{const Ss=Yn[Es];return Ss===void 0?"":Ss===null?Nn(Es,Jn):Array.isArray(Ss)?Ss.length===0&&Jn.arrayFormat==="bracket-separator"?Nn(Es,Jn)+"[]":Ss.reduce(ss(Es),[]).join("&"):Nn(Es,Jn)+"="+Nn(Ss,Jn)}).filter(Es=>Es.length>0).join("&")},sn.parseUrl=(Yn,Jn)=>{Jn=Object.assign({decode:!0},Jn);const[rs,ss]=dn(Yn,"#");return Object.assign({url:rs.split("?")[0]||"",query:Zn(Kn(Yn),Jn)},Jn&&Jn.parseFragmentIdentifier&&ss?{fragmentIdentifier:Ln(ss,Jn)}:{})},sn.stringifyUrl=(Yn,Jn)=>{Jn=Object.assign({encode:!0,strict:!0,[kn]:!0},Jn);const rs=zn(Yn.url).split("?")[0]||"",ss=sn.extract(Yn.url),as=sn.parse(ss,{sort:!1}),ds=Object.assign(as,Yn.query);let Es=sn.stringify(ds,Jn);Es&&(Es=`?${Es}`);let Ss=Dn(Yn.url);return Yn.fragmentIdentifier&&(Ss=`#${Jn[kn]?Nn(Yn.fragmentIdentifier,Jn):Yn.fragmentIdentifier}`),`${rs}${Es}${Ss}`},sn.pick=(Yn,Jn,rs)=>{rs=Object.assign({parseFragmentIdentifier:!0,[kn]:!1},rs);const{url:ss,query:as,fragmentIdentifier:ds}=sn.parseUrl(Yn,rs);return sn.stringifyUrl({url:ss,query:pn(as,Jn),fragmentIdentifier:ds},rs)},sn.exclude=(Yn,Jn,rs)=>{const ss=Array.isArray(Jn)?as=>!Jn.includes(as):(as,ds)=>!Jn(as,ds);return sn.pick(Yn,ss,rs)}})(queryString$1);const queryString=getDefaultExportFromCjs(queryString$1);var ReactReduxContext=React.createContext(null);function defaultNoopBatch(sn){sn()}var batch=defaultNoopBatch,setBatch=function(ln){return batch=ln},getBatch=function(){return batch};function createListenerCollection(){var sn=getBatch(),ln=null,cn=null;return{clear:function(){ln=null,cn=null},notify:function(){sn(function(){for(var pn=ln;pn;)pn.callback(),pn=pn.next})},get:function(){for(var pn=[],vn=ln;vn;)pn.push(vn),vn=vn.next;return pn},subscribe:function(pn){var vn=!0,kn=cn={callback:pn,next:null,prev:cn};return kn.prev?kn.prev.next=kn:ln=kn,function(){!vn||ln===null||(vn=!1,kn.next?kn.next.prev=kn.prev:cn=kn.prev,kn.prev?kn.prev.next=kn.next:ln=kn.next)}}}}var nullListeners={notify:function(){},get:function(){return[]}};function createSubscription(sn,ln){var cn,dn=nullListeners;function pn(Ln){return wn(),dn.subscribe(Ln)}function vn(){dn.notify()}function kn(){Nn.onStateChange&&Nn.onStateChange()}function Sn(){return!!cn}function wn(){cn||(cn=ln?ln.addNestedSub(kn):sn.subscribe(kn),dn=createListenerCollection())}function Pn(){cn&&(cn(),cn=void 0,dn.clear(),dn=nullListeners)}var Nn={addNestedSub:pn,notifyNestedSubs:vn,handleChangeWrapper:kn,isSubscribed:Sn,trySubscribe:wn,tryUnsubscribe:Pn,getListeners:function(){return dn}};return Nn}var useIsomorphicLayoutEffect=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function Provider(sn){var ln=sn.store,cn=sn.context,dn=sn.children,pn=reactExports.useMemo(function(){var Sn=createSubscription(ln);return{store:ln,subscription:Sn}},[ln]),vn=reactExports.useMemo(function(){return ln.getState()},[ln]);useIsomorphicLayoutEffect(function(){var Sn=pn.subscription;return Sn.onStateChange=Sn.notifyNestedSubs,Sn.trySubscribe(),vn!==ln.getState()&&Sn.notifyNestedSubs(),function(){Sn.tryUnsubscribe(),Sn.onStateChange=null}},[pn,vn]);var kn=cn||ReactReduxContext;return jsx$1(kn.Provider,{value:pn,children:dn})}var reactIs_production_min={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b$5=60103,c$4=60106,d$4=60107,e$1=60108,f$3=60114,g$4=60109,h$3=60110,k$3=60112,l$3=60113,m$4=60120,n$4=60115,p$2=60116,q$4=60121,r$3=60122,u$4=60117,v$3=60129,w$3=60131;if(typeof Symbol=="function"&&Symbol.for){var x$4=Symbol.for;b$5=x$4("react.element"),c$4=x$4("react.portal"),d$4=x$4("react.fragment"),e$1=x$4("react.strict_mode"),f$3=x$4("react.profiler"),g$4=x$4("react.provider"),h$3=x$4("react.context"),k$3=x$4("react.forward_ref"),l$3=x$4("react.suspense"),m$4=x$4("react.suspense_list"),n$4=x$4("react.memo"),p$2=x$4("react.lazy"),q$4=x$4("react.block"),r$3=x$4("react.server.block"),u$4=x$4("react.fundamental"),v$3=x$4("react.debug_trace_mode"),w$3=x$4("react.legacy_hidden")}function y$4(sn){if(typeof sn=="object"&&sn!==null){var ln=sn.$$typeof;switch(ln){case b$5:switch(sn=sn.type,sn){case d$4:case f$3:case e$1:case l$3:case m$4:return sn;default:switch(sn=sn&&sn.$$typeof,sn){case h$3:case k$3:case p$2:case n$4:case g$4:return sn;default:return ln}}case c$4:return ln}}}var z$3=g$4,A$4=b$5,B$4=k$3,C$3=d$4,D$3=p$2,E$4=n$4,F$5=c$4,G$4=f$3,H$4=e$1,I$5=l$3;reactIs_production_min.ContextConsumer=h$3;reactIs_production_min.ContextProvider=z$3;reactIs_production_min.Element=A$4;reactIs_production_min.ForwardRef=B$4;reactIs_production_min.Fragment=C$3;reactIs_production_min.Lazy=D$3;reactIs_production_min.Memo=E$4;reactIs_production_min.Portal=F$5;reactIs_production_min.Profiler=G$4;reactIs_production_min.StrictMode=H$4;reactIs_production_min.Suspense=I$5;reactIs_production_min.isAsyncMode=function(){return!1};reactIs_production_min.isConcurrentMode=function(){return!1};reactIs_production_min.isContextConsumer=function(sn){return y$4(sn)===h$3};reactIs_production_min.isContextProvider=function(sn){return y$4(sn)===g$4};reactIs_production_min.isElement=function(sn){return typeof sn=="object"&&sn!==null&&sn.$$typeof===b$5};reactIs_production_min.isForwardRef=function(sn){return y$4(sn)===k$3};reactIs_production_min.isFragment=function(sn){return y$4(sn)===d$4};reactIs_production_min.isLazy=function(sn){return y$4(sn)===p$2};reactIs_production_min.isMemo=function(sn){return y$4(sn)===n$4};reactIs_production_min.isPortal=function(sn){return y$4(sn)===c$4};reactIs_production_min.isProfiler=function(sn){return y$4(sn)===f$3};reactIs_production_min.isStrictMode=function(sn){return y$4(sn)===e$1};reactIs_production_min.isSuspense=function(sn){return y$4(sn)===l$3};reactIs_production_min.isValidElementType=function(sn){return typeof sn=="string"||typeof sn=="function"||sn===d$4||sn===f$3||sn===v$3||sn===e$1||sn===l$3||sn===m$4||sn===w$3||typeof sn=="object"&&sn!==null&&(sn.$$typeof===p$2||sn.$$typeof===n$4||sn.$$typeof===g$4||sn.$$typeof===h$3||sn.$$typeof===k$3||sn.$$typeof===u$4||sn.$$typeof===q$4||sn[0]===r$3)};reactIs_production_min.typeOf=y$4;function useReduxContext(){var sn=reactExports.useContext(ReactReduxContext);return sn}function createStoreHook(sn){sn===void 0&&(sn=ReactReduxContext);var ln=sn===ReactReduxContext?useReduxContext:function(){return reactExports.useContext(sn)};return function(){var dn=ln(),pn=dn.store;return pn}}var useStore=createStoreHook();function createDispatchHook(sn){sn===void 0&&(sn=ReactReduxContext);var ln=sn===ReactReduxContext?useStore:createStoreHook(sn);return function(){var dn=ln();return dn.dispatch}}var useDispatch=createDispatchHook(),refEquality=function(ln,cn){return ln===cn};function useSelectorWithStoreAndSubscription(sn,ln,cn,dn){var pn=reactExports.useReducer(function(Dn){return Dn+1},0),vn=pn[1],kn=reactExports.useMemo(function(){return createSubscription(cn,dn)},[cn,dn]),Sn=reactExports.useRef(),wn=reactExports.useRef(),Pn=reactExports.useRef(),Nn=reactExports.useRef(),Ln=cn.getState(),Fn;try{if(sn!==wn.current||Ln!==Pn.current||Sn.current){var zn=sn(Ln);Nn.current===void 0||!ln(zn,Nn.current)?Fn=zn:Fn=Nn.current}else Fn=Nn.current}catch(Dn){throw Sn.current&&(Dn.message+=`
The error may be correlated with this previous error:
`+Sn.current.stack+`

`),Dn}return useIsomorphicLayoutEffect(function(){wn.current=sn,Pn.current=Ln,Nn.current=Fn,Sn.current=void 0}),useIsomorphicLayoutEffect(function(){function Dn(){try{var Kn=cn.getState();if(Kn===Pn.current)return;var qn=wn.current(Kn);if(ln(qn,Nn.current))return;Nn.current=qn,Pn.current=Kn}catch(Zn){Sn.current=Zn}vn()}return kn.onStateChange=Dn,kn.trySubscribe(),Dn(),function(){return kn.tryUnsubscribe()}},[cn,kn]),Fn}function createSelectorHook(sn){sn===void 0&&(sn=ReactReduxContext);var ln=sn===ReactReduxContext?useReduxContext:function(){return reactExports.useContext(sn)};return function(dn,pn){pn===void 0&&(pn=refEquality);var vn=ln(),kn=vn.store,Sn=vn.subscription,wn=useSelectorWithStoreAndSubscription(dn,pn,kn,Sn);return reactExports.useDebugValue(wn),wn}}var useSelector=createSelectorHook();setBatch(reactDomExports.unstable_batchedUpdates);const useAppDispatch=()=>useDispatch(),useAppSelector=useSelector,tabletSize=769,laptopSize=1025,desktopSize=1366,queries={tablet:`(min-width: ${tabletSize}px)`,laptop:`(min-width: ${laptopSize}px)`,desktop:`(min-width: ${desktopSize}px)`},mediaQueries={tablet:`@media  ${queries.tablet}`,laptop:`@media  ${queries.laptop}`,desktop:`@media ${queries.desktop} `},PC_REACTIVE_MEDIA_QUERY=mediaQueries.laptop;function useScreen(){const sn=useMedia$1(queries.tablet),ln=useMedia$1(queries.laptop),cn=useMedia$1(queries.desktop);return{isTablet:sn,isLaptop:ln,isDesktop:cn}}function n$3(sn){for(var ln=arguments.length,cn=Array(ln>1?ln-1:0),dn=1;dn<ln;dn++)cn[dn-1]=arguments[dn];throw Error("[Immer] minified error nr: "+sn+(cn.length?" "+cn.map(function(pn){return"'"+pn+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function r$2(sn){return!!sn&&!!sn[Q$2]}function t$1(sn){var ln;return!!sn&&(function(cn){if(!cn||typeof cn!="object")return!1;var dn=Object.getPrototypeOf(cn);if(dn===null)return!0;var pn=Object.hasOwnProperty.call(dn,"constructor")&&dn.constructor;return pn===Object||typeof pn=="function"&&Function.toString.call(pn)===Z$1}(sn)||Array.isArray(sn)||!!sn[L$3]||!!(!((ln=sn.constructor)===null||ln===void 0)&&ln[L$3])||s$2(sn)||v$2(sn))}function i$6(sn,ln,cn){cn===void 0&&(cn=!1),o$4(sn)===0?(cn?Object.keys:nn$1)(sn).forEach(function(dn){cn&&typeof dn=="symbol"||ln(dn,sn[dn],sn)}):sn.forEach(function(dn,pn){return ln(pn,dn,sn)})}function o$4(sn){var ln=sn[Q$2];return ln?ln.i>3?ln.i-4:ln.i:Array.isArray(sn)?1:s$2(sn)?2:v$2(sn)?3:0}function u$3(sn,ln){return o$4(sn)===2?sn.has(ln):Object.prototype.hasOwnProperty.call(sn,ln)}function a$5(sn,ln){return o$4(sn)===2?sn.get(ln):sn[ln]}function f$2(sn,ln,cn){var dn=o$4(sn);dn===2?sn.set(ln,cn):dn===3?sn.add(cn):sn[ln]=cn}function c$3(sn,ln){return sn===ln?sn!==0||1/sn==1/ln:sn!=sn&&ln!=ln}function s$2(sn){return X$1&&sn instanceof Map}function v$2(sn){return q$3&&sn instanceof Set}function p$1(sn){return sn.o||sn.t}function l$2(sn){if(Array.isArray(sn))return Array.prototype.slice.call(sn);var ln=rn$1(sn);delete ln[Q$2];for(var cn=nn$1(ln),dn=0;dn<cn.length;dn++){var pn=cn[dn],vn=ln[pn];vn.writable===!1&&(vn.writable=!0,vn.configurable=!0),(vn.get||vn.set)&&(ln[pn]={configurable:!0,writable:!0,enumerable:vn.enumerable,value:sn[pn]})}return Object.create(Object.getPrototypeOf(sn),ln)}function d$3(sn,ln){return ln===void 0&&(ln=!1),y$3(sn)||r$2(sn)||!t$1(sn)||(o$4(sn)>1&&(sn.set=sn.add=sn.clear=sn.delete=h$2),Object.freeze(sn),ln&&i$6(sn,function(cn,dn){return d$3(dn,!0)},!0)),sn}function h$2(){n$3(2)}function y$3(sn){return sn==null||typeof sn!="object"||Object.isFrozen(sn)}function b$4(sn){var ln=tn[sn];return ln||n$3(18,sn),ln}function m$3(sn,ln){tn[sn]||(tn[sn]=ln)}function _$2(){return U$3}function j$3(sn,ln){ln&&(b$4("Patches"),sn.u=[],sn.s=[],sn.v=ln)}function g$3(sn){O$3(sn),sn.p.forEach(S$2),sn.p=null}function O$3(sn){sn===U$3&&(U$3=sn.l)}function w$2(sn){return U$3={p:[],l:U$3,h:sn,m:!0,_:0}}function S$2(sn){var ln=sn[Q$2];ln.i===0||ln.i===1?ln.j():ln.g=!0}function P$2(sn,ln){ln._=ln.p.length;var cn=ln.p[0],dn=sn!==void 0&&sn!==cn;return ln.h.O||b$4("ES5").S(ln,sn,dn),dn?(cn[Q$2].P&&(g$3(ln),n$3(4)),t$1(sn)&&(sn=M$3(ln,sn),ln.l||x$3(ln,sn)),ln.u&&b$4("Patches").M(cn[Q$2].t,sn,ln.u,ln.s)):sn=M$3(ln,cn,[]),g$3(ln),ln.u&&ln.v(ln.u,ln.s),sn!==H$3?sn:void 0}function M$3(sn,ln,cn){if(y$3(ln))return ln;var dn=ln[Q$2];if(!dn)return i$6(ln,function(Sn,wn){return A$3(sn,dn,ln,Sn,wn,cn)},!0),ln;if(dn.A!==sn)return ln;if(!dn.P)return x$3(sn,dn.t,!0),dn.t;if(!dn.I){dn.I=!0,dn.A._--;var pn=dn.i===4||dn.i===5?dn.o=l$2(dn.k):dn.o,vn=pn,kn=!1;dn.i===3&&(vn=new Set(pn),pn.clear(),kn=!0),i$6(vn,function(Sn,wn){return A$3(sn,dn,pn,Sn,wn,cn,kn)}),x$3(sn,pn,!1),cn&&sn.u&&b$4("Patches").N(dn,cn,sn.u,sn.s)}return dn.o}function A$3(sn,ln,cn,dn,pn,vn,kn){if(r$2(pn)){var Sn=M$3(sn,pn,vn&&ln&&ln.i!==3&&!u$3(ln.R,dn)?vn.concat(dn):void 0);if(f$2(cn,dn,Sn),!r$2(Sn))return;sn.m=!1}else kn&&cn.add(pn);if(t$1(pn)&&!y$3(pn)){if(!sn.h.D&&sn._<1)return;M$3(sn,pn),ln&&ln.A.l||x$3(sn,pn)}}function x$3(sn,ln,cn){cn===void 0&&(cn=!1),!sn.l&&sn.h.D&&sn.m&&d$3(ln,cn)}function z$2(sn,ln){var cn=sn[Q$2];return(cn?p$1(cn):sn)[ln]}function I$4(sn,ln){if(ln in sn)for(var cn=Object.getPrototypeOf(sn);cn;){var dn=Object.getOwnPropertyDescriptor(cn,ln);if(dn)return dn;cn=Object.getPrototypeOf(cn)}}function k$2(sn){sn.P||(sn.P=!0,sn.l&&k$2(sn.l))}function E$3(sn){sn.o||(sn.o=l$2(sn.t))}function N$3(sn,ln,cn){var dn=s$2(ln)?b$4("MapSet").F(ln,cn):v$2(ln)?b$4("MapSet").T(ln,cn):sn.O?function(pn,vn){var kn=Array.isArray(pn),Sn={i:kn?1:0,A:vn?vn.A:_$2(),P:!1,I:!1,R:{},l:vn,t:pn,k:null,o:null,j:null,C:!1},wn=Sn,Pn=en;kn&&(wn=[Sn],Pn=on$1);var Nn=Proxy.revocable(wn,Pn),Ln=Nn.revoke,Fn=Nn.proxy;return Sn.k=Fn,Sn.j=Ln,Fn}(ln,cn):b$4("ES5").J(ln,cn);return(cn?cn.A:_$2()).p.push(dn),dn}function R$3(sn){return r$2(sn)||n$3(22,sn),function ln(cn){if(!t$1(cn))return cn;var dn,pn=cn[Q$2],vn=o$4(cn);if(pn){if(!pn.P&&(pn.i<4||!b$4("ES5").K(pn)))return pn.t;pn.I=!0,dn=D$2(cn,vn),pn.I=!1}else dn=D$2(cn,vn);return i$6(dn,function(kn,Sn){pn&&a$5(pn.t,kn)===Sn||f$2(dn,kn,ln(Sn))}),vn===3?new Set(dn):dn}(sn)}function D$2(sn,ln){switch(ln){case 2:return new Map(sn);case 3:return Array.from(sn)}return l$2(sn)}function F$4(){function sn(vn,kn){var Sn=pn[vn];return Sn?Sn.enumerable=kn:pn[vn]=Sn={configurable:!0,enumerable:kn,get:function(){var wn=this[Q$2];return en.get(wn,vn)},set:function(wn){var Pn=this[Q$2];en.set(Pn,vn,wn)}},Sn}function ln(vn){for(var kn=vn.length-1;kn>=0;kn--){var Sn=vn[kn][Q$2];if(!Sn.P)switch(Sn.i){case 5:dn(Sn)&&k$2(Sn);break;case 4:cn(Sn)&&k$2(Sn)}}}function cn(vn){for(var kn=vn.t,Sn=vn.k,wn=nn$1(Sn),Pn=wn.length-1;Pn>=0;Pn--){var Nn=wn[Pn];if(Nn!==Q$2){var Ln=kn[Nn];if(Ln===void 0&&!u$3(kn,Nn))return!0;var Fn=Sn[Nn],zn=Fn&&Fn[Q$2];if(zn?zn.t!==Ln:!c$3(Fn,Ln))return!0}}var Dn=!!kn[Q$2];return wn.length!==nn$1(kn).length+(Dn?0:1)}function dn(vn){var kn=vn.k;if(kn.length!==vn.t.length)return!0;var Sn=Object.getOwnPropertyDescriptor(kn,kn.length-1);if(Sn&&!Sn.get)return!0;for(var wn=0;wn<kn.length;wn++)if(!kn.hasOwnProperty(wn))return!0;return!1}var pn={};m$3("ES5",{J:function(vn,kn){var Sn=Array.isArray(vn),wn=function(Nn,Ln){if(Nn){for(var Fn=Array(Ln.length),zn=0;zn<Ln.length;zn++)Object.defineProperty(Fn,""+zn,sn(zn,!0));return Fn}var Dn=rn$1(Ln);delete Dn[Q$2];for(var Kn=nn$1(Dn),qn=0;qn<Kn.length;qn++){var Zn=Kn[qn];Dn[Zn]=sn(Zn,Nn||!!Dn[Zn].enumerable)}return Object.create(Object.getPrototypeOf(Ln),Dn)}(Sn,vn),Pn={i:Sn?5:4,A:kn?kn.A:_$2(),P:!1,I:!1,R:{},l:kn,t:vn,k:wn,o:null,g:!1,C:!1};return Object.defineProperty(wn,Q$2,{value:Pn,writable:!0}),wn},S:function(vn,kn,Sn){Sn?r$2(kn)&&kn[Q$2].A===vn&&ln(vn.p):(vn.u&&function wn(Pn){if(Pn&&typeof Pn=="object"){var Nn=Pn[Q$2];if(Nn){var Ln=Nn.t,Fn=Nn.k,zn=Nn.R,Dn=Nn.i;if(Dn===4)i$6(Fn,function(Jn){Jn!==Q$2&&(Ln[Jn]!==void 0||u$3(Ln,Jn)?zn[Jn]||wn(Fn[Jn]):(zn[Jn]=!0,k$2(Nn)))}),i$6(Ln,function(Jn){Fn[Jn]!==void 0||u$3(Fn,Jn)||(zn[Jn]=!1,k$2(Nn))});else if(Dn===5){if(dn(Nn)&&(k$2(Nn),zn.length=!0),Fn.length<Ln.length)for(var Kn=Fn.length;Kn<Ln.length;Kn++)zn[Kn]=!1;else for(var qn=Ln.length;qn<Fn.length;qn++)zn[qn]=!0;for(var Zn=Math.min(Fn.length,Ln.length),Yn=0;Yn<Zn;Yn++)Fn.hasOwnProperty(Yn)||(zn[Yn]=!0),zn[Yn]===void 0&&wn(Fn[Yn])}}}}(vn.p[0]),ln(vn.p))},K:function(vn){return vn.i===4?cn(vn):dn(vn)}})}var G$3,U$3,W$3=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",X$1=typeof Map<"u",q$3=typeof Set<"u",B$3=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",H$3=W$3?Symbol.for("immer-nothing"):((G$3={})["immer-nothing"]=!0,G$3),L$3=W$3?Symbol.for("immer-draftable"):"__$immer_draftable",Q$2=W$3?Symbol.for("immer-state"):"__$immer_state",Z$1=""+Object.prototype.constructor,nn$1=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(sn){return Object.getOwnPropertyNames(sn).concat(Object.getOwnPropertySymbols(sn))}:Object.getOwnPropertyNames,rn$1=Object.getOwnPropertyDescriptors||function(sn){var ln={};return nn$1(sn).forEach(function(cn){ln[cn]=Object.getOwnPropertyDescriptor(sn,cn)}),ln},tn={},en={get:function(sn,ln){if(ln===Q$2)return sn;var cn=p$1(sn);if(!u$3(cn,ln))return function(pn,vn,kn){var Sn,wn=I$4(vn,kn);return wn?"value"in wn?wn.value:(Sn=wn.get)===null||Sn===void 0?void 0:Sn.call(pn.k):void 0}(sn,cn,ln);var dn=cn[ln];return sn.I||!t$1(dn)?dn:dn===z$2(sn.t,ln)?(E$3(sn),sn.o[ln]=N$3(sn.A.h,dn,sn)):dn},has:function(sn,ln){return ln in p$1(sn)},ownKeys:function(sn){return Reflect.ownKeys(p$1(sn))},set:function(sn,ln,cn){var dn=I$4(p$1(sn),ln);if(dn!=null&&dn.set)return dn.set.call(sn.k,cn),!0;if(!sn.P){var pn=z$2(p$1(sn),ln),vn=pn==null?void 0:pn[Q$2];if(vn&&vn.t===cn)return sn.o[ln]=cn,sn.R[ln]=!1,!0;if(c$3(cn,pn)&&(cn!==void 0||u$3(sn.t,ln)))return!0;E$3(sn),k$2(sn)}return sn.o[ln]===cn&&(cn!==void 0||ln in sn.o)||Number.isNaN(cn)&&Number.isNaN(sn.o[ln])||(sn.o[ln]=cn,sn.R[ln]=!0),!0},deleteProperty:function(sn,ln){return z$2(sn.t,ln)!==void 0||ln in sn.t?(sn.R[ln]=!1,E$3(sn),k$2(sn)):delete sn.R[ln],sn.o&&delete sn.o[ln],!0},getOwnPropertyDescriptor:function(sn,ln){var cn=p$1(sn),dn=Reflect.getOwnPropertyDescriptor(cn,ln);return dn&&{writable:!0,configurable:sn.i!==1||ln!=="length",enumerable:dn.enumerable,value:cn[ln]}},defineProperty:function(){n$3(11)},getPrototypeOf:function(sn){return Object.getPrototypeOf(sn.t)},setPrototypeOf:function(){n$3(12)}},on$1={};i$6(en,function(sn,ln){on$1[sn]=function(){return arguments[0]=arguments[0][0],ln.apply(this,arguments)}}),on$1.deleteProperty=function(sn,ln){return on$1.set.call(this,sn,ln,void 0)},on$1.set=function(sn,ln,cn){return en.set.call(this,sn[0],ln,cn,sn[0])};var un$1=function(){function sn(cn){var dn=this;this.O=B$3,this.D=!0,this.produce=function(pn,vn,kn){if(typeof pn=="function"&&typeof vn!="function"){var Sn=vn;vn=pn;var wn=dn;return function(Kn){var qn=this;Kn===void 0&&(Kn=Sn);for(var Zn=arguments.length,Yn=Array(Zn>1?Zn-1:0),Jn=1;Jn<Zn;Jn++)Yn[Jn-1]=arguments[Jn];return wn.produce(Kn,function(rs){var ss;return(ss=vn).call.apply(ss,[qn,rs].concat(Yn))})}}var Pn;if(typeof vn!="function"&&n$3(6),kn!==void 0&&typeof kn!="function"&&n$3(7),t$1(pn)){var Nn=w$2(dn),Ln=N$3(dn,pn,void 0),Fn=!0;try{Pn=vn(Ln),Fn=!1}finally{Fn?g$3(Nn):O$3(Nn)}return typeof Promise<"u"&&Pn instanceof Promise?Pn.then(function(Kn){return j$3(Nn,kn),P$2(Kn,Nn)},function(Kn){throw g$3(Nn),Kn}):(j$3(Nn,kn),P$2(Pn,Nn))}if(!pn||typeof pn!="object"){if((Pn=vn(pn))===void 0&&(Pn=pn),Pn===H$3&&(Pn=void 0),dn.D&&d$3(Pn,!0),kn){var zn=[],Dn=[];b$4("Patches").M(pn,Pn,zn,Dn),kn(zn,Dn)}return Pn}n$3(21,pn)},this.produceWithPatches=function(pn,vn){if(typeof pn=="function")return function(Pn){for(var Nn=arguments.length,Ln=Array(Nn>1?Nn-1:0),Fn=1;Fn<Nn;Fn++)Ln[Fn-1]=arguments[Fn];return dn.produceWithPatches(Pn,function(zn){return pn.apply(void 0,[zn].concat(Ln))})};var kn,Sn,wn=dn.produce(pn,vn,function(Pn,Nn){kn=Pn,Sn=Nn});return typeof Promise<"u"&&wn instanceof Promise?wn.then(function(Pn){return[Pn,kn,Sn]}):[wn,kn,Sn]},typeof(cn==null?void 0:cn.useProxies)=="boolean"&&this.setUseProxies(cn.useProxies),typeof(cn==null?void 0:cn.autoFreeze)=="boolean"&&this.setAutoFreeze(cn.autoFreeze)}var ln=sn.prototype;return ln.createDraft=function(cn){t$1(cn)||n$3(8),r$2(cn)&&(cn=R$3(cn));var dn=w$2(this),pn=N$3(this,cn,void 0);return pn[Q$2].C=!0,O$3(dn),pn},ln.finishDraft=function(cn,dn){var pn=cn&&cn[Q$2],vn=pn.A;return j$3(vn,dn),P$2(void 0,vn)},ln.setAutoFreeze=function(cn){this.D=cn},ln.setUseProxies=function(cn){cn&&!B$3&&n$3(20),this.O=cn},ln.applyPatches=function(cn,dn){var pn;for(pn=dn.length-1;pn>=0;pn--){var vn=dn[pn];if(vn.path.length===0&&vn.op==="replace"){cn=vn.value;break}}pn>-1&&(dn=dn.slice(pn+1));var kn=b$4("Patches").$;return r$2(cn)?kn(cn,dn):this.produce(cn,function(Sn){return kn(Sn,dn)})},sn}(),an=new un$1,fn=an.produce;an.produceWithPatches.bind(an);an.setAutoFreeze.bind(an);an.setUseProxies.bind(an);an.applyPatches.bind(an);an.createDraft.bind(an);an.finishDraft.bind(an);const produce=fn;function _typeof(sn){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ln){return typeof ln}:function(ln){return ln&&typeof Symbol=="function"&&ln.constructor===Symbol&&ln!==Symbol.prototype?"symbol":typeof ln},_typeof(sn)}function _toPrimitive(sn,ln){if(_typeof(sn)!=="object"||sn===null)return sn;var cn=sn[Symbol.toPrimitive];if(cn!==void 0){var dn=cn.call(sn,ln||"default");if(_typeof(dn)!=="object")return dn;throw new TypeError("@@toPrimitive must return a primitive value.")}return(ln==="string"?String:Number)(sn)}function _toPropertyKey(sn){var ln=_toPrimitive(sn,"string");return _typeof(ln)==="symbol"?ln:String(ln)}function _defineProperty$2(sn,ln,cn){return ln=_toPropertyKey(ln),ln in sn?Object.defineProperty(sn,ln,{value:cn,enumerable:!0,configurable:!0,writable:!0}):sn[ln]=cn,sn}function ownKeys$4(sn,ln){var cn=Object.keys(sn);if(Object.getOwnPropertySymbols){var dn=Object.getOwnPropertySymbols(sn);ln&&(dn=dn.filter(function(pn){return Object.getOwnPropertyDescriptor(sn,pn).enumerable})),cn.push.apply(cn,dn)}return cn}function _objectSpread2$1(sn){for(var ln=1;ln<arguments.length;ln++){var cn=arguments[ln]!=null?arguments[ln]:{};ln%2?ownKeys$4(Object(cn),!0).forEach(function(dn){_defineProperty$2(sn,dn,cn[dn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(sn,Object.getOwnPropertyDescriptors(cn)):ownKeys$4(Object(cn)).forEach(function(dn){Object.defineProperty(sn,dn,Object.getOwnPropertyDescriptor(cn,dn))})}return sn}function formatProdErrorMessage(sn){return"Minified Redux error #"+sn+"; visit https://redux.js.org/Errors?code="+sn+" for the full message or use the non-minified dev environment for full errors. "}var $$observable=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),randomString=function(){return Math.random().toString(36).substring(7).split("").join(".")},ActionTypes={INIT:"@@redux/INIT"+randomString(),REPLACE:"@@redux/REPLACE"+randomString(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+randomString()}};function isPlainObject$3(sn){if(typeof sn!="object"||sn===null)return!1;for(var ln=sn;Object.getPrototypeOf(ln)!==null;)ln=Object.getPrototypeOf(ln);return Object.getPrototypeOf(sn)===ln}function createStore(sn,ln,cn){var dn;if(typeof ln=="function"&&typeof cn=="function"||typeof cn=="function"&&typeof arguments[3]=="function")throw new Error(formatProdErrorMessage(0));if(typeof ln=="function"&&typeof cn>"u"&&(cn=ln,ln=void 0),typeof cn<"u"){if(typeof cn!="function")throw new Error(formatProdErrorMessage(1));return cn(createStore)(sn,ln)}if(typeof sn!="function")throw new Error(formatProdErrorMessage(2));var pn=sn,vn=ln,kn=[],Sn=kn,wn=!1;function Pn(){Sn===kn&&(Sn=kn.slice())}function Nn(){if(wn)throw new Error(formatProdErrorMessage(3));return vn}function Ln(Kn){if(typeof Kn!="function")throw new Error(formatProdErrorMessage(4));if(wn)throw new Error(formatProdErrorMessage(5));var qn=!0;return Pn(),Sn.push(Kn),function(){if(qn){if(wn)throw new Error(formatProdErrorMessage(6));qn=!1,Pn();var Yn=Sn.indexOf(Kn);Sn.splice(Yn,1),kn=null}}}function Fn(Kn){if(!isPlainObject$3(Kn))throw new Error(formatProdErrorMessage(7));if(typeof Kn.type>"u")throw new Error(formatProdErrorMessage(8));if(wn)throw new Error(formatProdErrorMessage(9));try{wn=!0,vn=pn(vn,Kn)}finally{wn=!1}for(var qn=kn=Sn,Zn=0;Zn<qn.length;Zn++){var Yn=qn[Zn];Yn()}return Kn}function zn(Kn){if(typeof Kn!="function")throw new Error(formatProdErrorMessage(10));pn=Kn,Fn({type:ActionTypes.REPLACE})}function Dn(){var Kn,qn=Ln;return Kn={subscribe:function(Yn){if(typeof Yn!="object"||Yn===null)throw new Error(formatProdErrorMessage(11));function Jn(){Yn.next&&Yn.next(Nn())}Jn();var rs=qn(Jn);return{unsubscribe:rs}}},Kn[$$observable]=function(){return this},Kn}return Fn({type:ActionTypes.INIT}),dn={dispatch:Fn,subscribe:Ln,getState:Nn,replaceReducer:zn},dn[$$observable]=Dn,dn}function assertReducerShape(sn){Object.keys(sn).forEach(function(ln){var cn=sn[ln],dn=cn(void 0,{type:ActionTypes.INIT});if(typeof dn>"u")throw new Error(formatProdErrorMessage(12));if(typeof cn(void 0,{type:ActionTypes.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(formatProdErrorMessage(13))})}function combineReducers(sn){for(var ln=Object.keys(sn),cn={},dn=0;dn<ln.length;dn++){var pn=ln[dn];typeof sn[pn]=="function"&&(cn[pn]=sn[pn])}var vn=Object.keys(cn),kn;try{assertReducerShape(cn)}catch(Sn){kn=Sn}return function(wn,Pn){if(wn===void 0&&(wn={}),kn)throw kn;for(var Nn=!1,Ln={},Fn=0;Fn<vn.length;Fn++){var zn=vn[Fn],Dn=cn[zn],Kn=wn[zn],qn=Dn(Kn,Pn);if(typeof qn>"u")throw Pn&&Pn.type,new Error(formatProdErrorMessage(14));Ln[zn]=qn,Nn=Nn||qn!==Kn}return Nn=Nn||vn.length!==Object.keys(wn).length,Nn?Ln:wn}}function compose(){for(var sn=arguments.length,ln=new Array(sn),cn=0;cn<sn;cn++)ln[cn]=arguments[cn];return ln.length===0?function(dn){return dn}:ln.length===1?ln[0]:ln.reduce(function(dn,pn){return function(){return dn(pn.apply(void 0,arguments))}})}function applyMiddleware(){for(var sn=arguments.length,ln=new Array(sn),cn=0;cn<sn;cn++)ln[cn]=arguments[cn];return function(dn){return function(){var pn=dn.apply(void 0,arguments),vn=function(){throw new Error(formatProdErrorMessage(15))},kn={getState:pn.getState,dispatch:function(){return vn.apply(void 0,arguments)}},Sn=ln.map(function(wn){return wn(kn)});return vn=compose.apply(void 0,Sn)(pn.dispatch),_objectSpread2$1(_objectSpread2$1({},pn),{},{dispatch:vn})}}}function createThunkMiddleware(sn){var ln=function(dn){var pn=dn.dispatch,vn=dn.getState;return function(kn){return function(Sn){return typeof Sn=="function"?Sn(pn,vn,sn):kn(Sn)}}};return ln}var thunk=createThunkMiddleware();thunk.withExtraArgument=createThunkMiddleware;const thunkMiddleware=thunk;var __extends$2=globalThis&&globalThis.__extends||function(){var sn=function(ln,cn){return sn=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(dn,pn){dn.__proto__=pn}||function(dn,pn){for(var vn in pn)Object.prototype.hasOwnProperty.call(pn,vn)&&(dn[vn]=pn[vn])},sn(ln,cn)};return function(ln,cn){if(typeof cn!="function"&&cn!==null)throw new TypeError("Class extends value "+String(cn)+" is not a constructor or null");sn(ln,cn);function dn(){this.constructor=ln}ln.prototype=cn===null?Object.create(cn):(dn.prototype=cn.prototype,new dn)}}(),__generator$1=globalThis&&globalThis.__generator||function(sn,ln){var cn={label:0,sent:function(){if(vn[0]&1)throw vn[1];return vn[1]},trys:[],ops:[]},dn,pn,vn,kn;return kn={next:Sn(0),throw:Sn(1),return:Sn(2)},typeof Symbol=="function"&&(kn[Symbol.iterator]=function(){return this}),kn;function Sn(Pn){return function(Nn){return wn([Pn,Nn])}}function wn(Pn){if(dn)throw new TypeError("Generator is already executing.");for(;cn;)try{if(dn=1,pn&&(vn=Pn[0]&2?pn.return:Pn[0]?pn.throw||((vn=pn.return)&&vn.call(pn),0):pn.next)&&!(vn=vn.call(pn,Pn[1])).done)return vn;switch(pn=0,vn&&(Pn=[Pn[0]&2,vn.value]),Pn[0]){case 0:case 1:vn=Pn;break;case 4:return cn.label++,{value:Pn[1],done:!1};case 5:cn.label++,pn=Pn[1],Pn=[0];continue;case 7:Pn=cn.ops.pop(),cn.trys.pop();continue;default:if(vn=cn.trys,!(vn=vn.length>0&&vn[vn.length-1])&&(Pn[0]===6||Pn[0]===2)){cn=0;continue}if(Pn[0]===3&&(!vn||Pn[1]>vn[0]&&Pn[1]<vn[3])){cn.label=Pn[1];break}if(Pn[0]===6&&cn.label<vn[1]){cn.label=vn[1],vn=Pn;break}if(vn&&cn.label<vn[2]){cn.label=vn[2],cn.ops.push(Pn);break}vn[2]&&cn.ops.pop(),cn.trys.pop();continue}Pn=ln.call(sn,cn)}catch(Nn){Pn=[6,Nn],pn=0}finally{dn=vn=0}if(Pn[0]&5)throw Pn[1];return{value:Pn[0]?Pn[1]:void 0,done:!0}}},__spreadArray=globalThis&&globalThis.__spreadArray||function(sn,ln){for(var cn=0,dn=ln.length,pn=sn.length;cn<dn;cn++,pn++)sn[pn]=ln[cn];return sn},__defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=function(sn,ln,cn){return ln in sn?__defProp(sn,ln,{enumerable:!0,configurable:!0,writable:!0,value:cn}):sn[ln]=cn},__spreadValues=function(sn,ln){for(var cn in ln||(ln={}))__hasOwnProp.call(ln,cn)&&__defNormalProp(sn,cn,ln[cn]);if(__getOwnPropSymbols)for(var dn=0,pn=__getOwnPropSymbols(ln);dn<pn.length;dn++){var cn=pn[dn];__propIsEnum.call(ln,cn)&&__defNormalProp(sn,cn,ln[cn])}return sn},__spreadProps=function(sn,ln){return __defProps(sn,__getOwnPropDescs(ln))},__async=function(sn,ln,cn){return new Promise(function(dn,pn){var vn=function(wn){try{Sn(cn.next(wn))}catch(Pn){pn(Pn)}},kn=function(wn){try{Sn(cn.throw(wn))}catch(Pn){pn(Pn)}},Sn=function(wn){return wn.done?dn(wn.value):Promise.resolve(wn.value).then(vn,kn)};Sn((cn=cn.apply(sn,ln)).next())})},composeWithDevTools=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?compose:compose.apply(null,arguments)};function isPlainObject$2(sn){if(typeof sn!="object"||sn===null)return!1;var ln=Object.getPrototypeOf(sn);if(ln===null)return!0;for(var cn=ln;Object.getPrototypeOf(cn)!==null;)cn=Object.getPrototypeOf(cn);return ln===cn}var MiddlewareArray=function(sn){__extends$2(ln,sn);function ln(){for(var cn=[],dn=0;dn<arguments.length;dn++)cn[dn]=arguments[dn];var pn=sn.apply(this,cn)||this;return Object.setPrototypeOf(pn,ln.prototype),pn}return Object.defineProperty(ln,Symbol.species,{get:function(){return ln},enumerable:!1,configurable:!0}),ln.prototype.concat=function(){for(var cn=[],dn=0;dn<arguments.length;dn++)cn[dn]=arguments[dn];return sn.prototype.concat.apply(this,cn)},ln.prototype.prepend=function(){for(var cn=[],dn=0;dn<arguments.length;dn++)cn[dn]=arguments[dn];return cn.length===1&&Array.isArray(cn[0])?new(ln.bind.apply(ln,__spreadArray([void 0],cn[0].concat(this)))):new(ln.bind.apply(ln,__spreadArray([void 0],cn.concat(this))))},ln}(Array),EnhancerArray=function(sn){__extends$2(ln,sn);function ln(){for(var cn=[],dn=0;dn<arguments.length;dn++)cn[dn]=arguments[dn];var pn=sn.apply(this,cn)||this;return Object.setPrototypeOf(pn,ln.prototype),pn}return Object.defineProperty(ln,Symbol.species,{get:function(){return ln},enumerable:!1,configurable:!0}),ln.prototype.concat=function(){for(var cn=[],dn=0;dn<arguments.length;dn++)cn[dn]=arguments[dn];return sn.prototype.concat.apply(this,cn)},ln.prototype.prepend=function(){for(var cn=[],dn=0;dn<arguments.length;dn++)cn[dn]=arguments[dn];return cn.length===1&&Array.isArray(cn[0])?new(ln.bind.apply(ln,__spreadArray([void 0],cn[0].concat(this)))):new(ln.bind.apply(ln,__spreadArray([void 0],cn.concat(this))))},ln}(Array);function freezeDraftable(sn){return t$1(sn)?produce(sn,function(){}):sn}function isBoolean(sn){return typeof sn=="boolean"}function curryGetDefaultMiddleware(){return function(ln){return getDefaultMiddleware(ln)}}function getDefaultMiddleware(sn){sn===void 0&&(sn={});var ln=sn.thunk,cn=ln===void 0?!0:ln;sn.immutableCheck,sn.serializableCheck;var dn=new MiddlewareArray;return cn&&(isBoolean(cn)?dn.push(thunkMiddleware):dn.push(thunkMiddleware.withExtraArgument(cn.extraArgument))),dn}var IS_PRODUCTION=!0;function configureStore(sn){var ln=curryGetDefaultMiddleware(),cn=sn||{},dn=cn.reducer,pn=dn===void 0?void 0:dn,vn=cn.middleware,kn=vn===void 0?ln():vn,Sn=cn.devTools,wn=Sn===void 0?!0:Sn,Pn=cn.preloadedState,Nn=Pn===void 0?void 0:Pn,Ln=cn.enhancers,Fn=Ln===void 0?void 0:Ln,zn;if(typeof pn=="function")zn=pn;else if(isPlainObject$2(pn))zn=combineReducers(pn);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var Dn=kn;typeof Dn=="function"&&(Dn=Dn(ln));var Kn=applyMiddleware.apply(void 0,Dn),qn=compose;wn&&(qn=composeWithDevTools(__spreadValues({trace:!IS_PRODUCTION},typeof wn=="object"&&wn)));var Zn=new EnhancerArray(Kn),Yn=Zn;Array.isArray(Fn)?Yn=__spreadArray([Kn],Fn):typeof Fn=="function"&&(Yn=Fn(Zn));var Jn=qn.apply(void 0,Yn);return createStore(zn,Nn,Jn)}function createAction(sn,ln){function cn(){for(var dn=[],pn=0;pn<arguments.length;pn++)dn[pn]=arguments[pn];if(ln){var vn=ln.apply(void 0,dn);if(!vn)throw new Error("prepareAction did not return an object");return __spreadValues(__spreadValues({type:sn,payload:vn.payload},"meta"in vn&&{meta:vn.meta}),"error"in vn&&{error:vn.error})}return{type:sn,payload:dn[0]}}return cn.toString=function(){return""+sn},cn.type=sn,cn.match=function(dn){return dn.type===sn},cn}function executeReducerBuilderCallback(sn){var ln={},cn=[],dn,pn={addCase:function(vn,kn){var Sn=typeof vn=="string"?vn:vn.type;if(Sn in ln)throw new Error("addCase cannot be called with two reducers for the same action type");return ln[Sn]=kn,pn},addMatcher:function(vn,kn){return cn.push({matcher:vn,reducer:kn}),pn},addDefaultCase:function(vn){return dn=vn,pn}};return sn(pn),[ln,cn,dn]}function isStateFunction(sn){return typeof sn=="function"}function createReducer(sn,ln,cn,dn){cn===void 0&&(cn=[]);var pn=typeof ln=="function"?executeReducerBuilderCallback(ln):[ln,cn,dn],vn=pn[0],kn=pn[1],Sn=pn[2],wn;if(isStateFunction(sn))wn=function(){return freezeDraftable(sn())};else{var Pn=freezeDraftable(sn);wn=function(){return Pn}}function Nn(Ln,Fn){Ln===void 0&&(Ln=wn());var zn=__spreadArray([vn[Fn.type]],kn.filter(function(Dn){var Kn=Dn.matcher;return Kn(Fn)}).map(function(Dn){var Kn=Dn.reducer;return Kn}));return zn.filter(function(Dn){return!!Dn}).length===0&&(zn=[Sn]),zn.reduce(function(Dn,Kn){if(Kn)if(r$2(Dn)){var qn=Dn,Zn=Kn(qn,Fn);return Zn===void 0?Dn:Zn}else{if(t$1(Dn))return produce(Dn,function(Yn){return Kn(Yn,Fn)});var Zn=Kn(Dn,Fn);if(Zn===void 0){if(Dn===null)return Dn;throw Error("A case reducer on a non-draftable value must not return undefined")}return Zn}return Dn},Ln)}return Nn.getInitialState=wn,Nn}function getType2(sn,ln){return sn+"/"+ln}function createSlice(sn){var ln=sn.name;if(!ln)throw new Error("`name` is a required option for createSlice");typeof process<"u";var cn=typeof sn.initialState=="function"?sn.initialState:freezeDraftable(sn.initialState),dn=sn.reducers||{},pn=Object.keys(dn),vn={},kn={},Sn={};pn.forEach(function(Nn){var Ln=dn[Nn],Fn=getType2(ln,Nn),zn,Dn;"reducer"in Ln?(zn=Ln.reducer,Dn=Ln.prepare):zn=Ln,vn[Nn]=zn,kn[Fn]=zn,Sn[Nn]=Dn?createAction(Fn,Dn):createAction(Fn)});function wn(){var Nn=typeof sn.extraReducers=="function"?executeReducerBuilderCallback(sn.extraReducers):[sn.extraReducers],Ln=Nn[0],Fn=Ln===void 0?{}:Ln,zn=Nn[1],Dn=zn===void 0?[]:zn,Kn=Nn[2],qn=Kn===void 0?void 0:Kn,Zn=__spreadValues(__spreadValues({},Fn),kn);return createReducer(cn,function(Yn){for(var Jn in Zn)Yn.addCase(Jn,Zn[Jn]);for(var rs=0,ss=Dn;rs<ss.length;rs++){var as=ss[rs];Yn.addMatcher(as.matcher,as.reducer)}qn&&Yn.addDefaultCase(qn)})}var Pn;return{name:ln,reducer:function(Nn,Ln){return Pn||(Pn=wn()),Pn(Nn,Ln)},actions:Sn,caseReducers:vn,getInitialState:function(){return Pn||(Pn=wn()),Pn.getInitialState()}}}var urlAlphabet="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",nanoid=function(sn){sn===void 0&&(sn=21);for(var ln="",cn=sn;cn--;)ln+=urlAlphabet[Math.random()*64|0];return ln},commonProperties=["name","message","stack","code"],RejectWithValue=function(){function sn(ln,cn){this.payload=ln,this.meta=cn}return sn}(),FulfillWithMeta=function(){function sn(ln,cn){this.payload=ln,this.meta=cn}return sn}(),miniSerializeError=function(sn){if(typeof sn=="object"&&sn!==null){for(var ln={},cn=0,dn=commonProperties;cn<dn.length;cn++){var pn=dn[cn];typeof sn[pn]=="string"&&(ln[pn]=sn[pn])}return ln}return{message:String(sn)}};(function(){function sn(ln,cn,dn){var pn=createAction(ln+"/fulfilled",function(Pn,Nn,Ln,Fn){return{payload:Pn,meta:__spreadProps(__spreadValues({},Fn||{}),{arg:Ln,requestId:Nn,requestStatus:"fulfilled"})}}),vn=createAction(ln+"/pending",function(Pn,Nn,Ln){return{payload:void 0,meta:__spreadProps(__spreadValues({},Ln||{}),{arg:Nn,requestId:Pn,requestStatus:"pending"})}}),kn=createAction(ln+"/rejected",function(Pn,Nn,Ln,Fn,zn){return{payload:Fn,error:(dn&&dn.serializeError||miniSerializeError)(Pn||"Rejected"),meta:__spreadProps(__spreadValues({},zn||{}),{arg:Ln,requestId:Nn,rejectedWithValue:!!Fn,requestStatus:"rejected",aborted:(Pn==null?void 0:Pn.name)==="AbortError",condition:(Pn==null?void 0:Pn.name)==="ConditionError"})}}),Sn=typeof AbortController<"u"?AbortController:function(){function Pn(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return Pn.prototype.abort=function(){},Pn}();function wn(Pn){return function(Nn,Ln,Fn){var zn=dn!=null&&dn.idGenerator?dn.idGenerator(Pn):nanoid(),Dn=new Sn,Kn;function qn(Yn){Kn=Yn,Dn.abort()}var Zn=function(){return __async(this,null,function(){var Yn,Jn,rs,ss,as,ds,Es;return __generator$1(this,function(Ss){switch(Ss.label){case 0:return Ss.trys.push([0,4,,5]),ss=(Yn=dn==null?void 0:dn.condition)==null?void 0:Yn.call(dn,Pn,{getState:Ln,extra:Fn}),isThenable$2(ss)?[4,ss]:[3,2];case 1:ss=Ss.sent(),Ss.label=2;case 2:if(ss===!1||Dn.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return as=new Promise(function(Qn,ms){return Dn.signal.addEventListener("abort",function(){return ms({name:"AbortError",message:Kn||"Aborted"})})}),Nn(vn(zn,Pn,(Jn=dn==null?void 0:dn.getPendingMeta)==null?void 0:Jn.call(dn,{requestId:zn,arg:Pn},{getState:Ln,extra:Fn}))),[4,Promise.race([as,Promise.resolve(cn(Pn,{dispatch:Nn,getState:Ln,extra:Fn,requestId:zn,signal:Dn.signal,abort:qn,rejectWithValue:function(Qn,ms){return new RejectWithValue(Qn,ms)},fulfillWithValue:function(Qn,ms){return new FulfillWithMeta(Qn,ms)}})).then(function(Qn){if(Qn instanceof RejectWithValue)throw Qn;return Qn instanceof FulfillWithMeta?pn(Qn.payload,zn,Pn,Qn.meta):pn(Qn,zn,Pn)})])];case 3:return rs=Ss.sent(),[3,5];case 4:return ds=Ss.sent(),rs=ds instanceof RejectWithValue?kn(null,zn,Pn,ds.payload,ds.meta):kn(ds,zn,Pn),[3,5];case 5:return Es=dn&&!dn.dispatchConditionRejection&&kn.match(rs)&&rs.meta.condition,Es||Nn(rs),[2,rs]}})})}();return Object.assign(Zn,{abort:qn,requestId:zn,arg:Pn,unwrap:function(){return Zn.then(unwrapResult)}})}}return Object.assign(wn,{pending:vn,rejected:kn,fulfilled:pn,typePrefix:ln})}return sn.withTypes=function(){return sn},sn})();function unwrapResult(sn){if(sn.meta&&sn.meta.rejectedWithValue)throw sn.payload;if(sn.error)throw sn.error;return sn.payload}function isThenable$2(sn){return sn!==null&&typeof sn=="object"&&typeof sn.then=="function"}var alm="listenerMiddleware";createAction(alm+"/add");createAction(alm+"/removeAll");createAction(alm+"/remove");var promise$6;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);F$4();const initialLecture$1={slug:"",unitId:0,prevRequestTime:0,progress:0,instCode:void 0,isBegin:!1,isMobileView:!1,isCompleteModalOpened:!1,isReviewModalOpened:!1,isRecommendReviewModalOpened:!1},slice$3=createSlice({name:"lecture",initialState:initialLecture$1,reducers:{setLecture(sn,{payload:ln}){sn.slug=ln.slug,sn.unitId=ln.unitId},setUnitId(sn,{payload:ln}){sn.unitId=ln},setPrevRequestTime(sn,{payload:ln}){sn.prevRequestTime=ln},setProgress(sn,{payload:ln}){sn.progress=ln},setInstCode(sn,{payload:ln}){sn.instCode=ln},setIsBegin(sn,{payload:ln}){sn.isBegin=ln},setIsMobileView(sn,{payload:ln}){sn.isMobileView=ln},setIsCompleteModalOpened(sn,{payload:ln}){sn.isCompleteModalOpened=ln},setIsReviewModalOpened(sn,{payload:ln}){sn.isReviewModalOpened=ln},setIsRecommendReviewModalOpened(sn,{payload:ln}){sn.isRecommendReviewModalOpened=ln}}}),{reducer:lectureReducer}=slice$3,lectureActions=slice$3.actions;function DeviceBranch({desktopComponent:sn,mobileComponent:ln}){const cn=useAppSelector(wn=>wn.lecture.isMobileView),dn=useAppDispatch(),{isLaptop:pn}=useScreen(),vn=useFirstMountState(),[kn,Sn]=reactExports.useState(vn);return reactExports.useEffect(()=>{dn(lectureActions.setIsMobileView(!pn)),Sn(!1)},[dn]),kn?null:cn?jsx(Fragment,{children:ln}):jsx(Fragment,{children:sn})}var faCircleExclamation={};const useLectureParams=()=>{const[sn]=useSearchParams(),ln=sn.get("unitId"),cn=sn.get("courseSlug");return{unitId:Number(ln),slug:String(cn)}};var Subscribable=function(){function sn(){this.listeners=[]}var ln=sn.prototype;return ln.subscribe=function(dn){var pn=this,vn=dn||function(){};return this.listeners.push(vn),this.onSubscribe(),function(){pn.listeners=pn.listeners.filter(function(kn){return kn!==vn}),pn.onUnsubscribe()}},ln.hasListeners=function(){return this.listeners.length>0},ln.onSubscribe=function(){},ln.onUnsubscribe=function(){},sn}();function _extends(){return _extends=Object.assign?Object.assign.bind():function(sn){for(var ln=1;ln<arguments.length;ln++){var cn=arguments[ln];for(var dn in cn)Object.prototype.hasOwnProperty.call(cn,dn)&&(sn[dn]=cn[dn])}return sn},_extends.apply(this,arguments)}var isServer=typeof window>"u";function noop$1(){}function functionalUpdate(sn,ln){return typeof sn=="function"?sn(ln):sn}function isValidTimeout(sn){return typeof sn=="number"&&sn>=0&&sn!==1/0}function ensureQueryKeyArray(sn){return Array.isArray(sn)?sn:[sn]}function timeUntilStale(sn,ln){return Math.max(sn+(ln||0)-Date.now(),0)}function parseQueryArgs(sn,ln,cn){return isQueryKey(sn)?typeof ln=="function"?_extends({},cn,{queryKey:sn,queryFn:ln}):_extends({},ln,{queryKey:sn}):sn}function parseMutationArgs(sn,ln,cn){return isQueryKey(sn)?typeof ln=="function"?_extends({},cn,{mutationKey:sn,mutationFn:ln}):_extends({},ln,{mutationKey:sn}):typeof sn=="function"?_extends({},ln,{mutationFn:sn}):_extends({},sn)}function parseFilterArgs(sn,ln,cn){return isQueryKey(sn)?[_extends({},ln,{queryKey:sn}),cn]:[sn||{},ln]}function mapQueryStatusFilter(sn,ln){if(sn===!0&&ln===!0||sn==null&&ln==null)return"all";if(sn===!1&&ln===!1)return"none";var cn=sn??!ln;return cn?"active":"inactive"}function matchQuery(sn,ln){var cn=sn.active,dn=sn.exact,pn=sn.fetching,vn=sn.inactive,kn=sn.predicate,Sn=sn.queryKey,wn=sn.stale;if(isQueryKey(Sn)){if(dn){if(ln.queryHash!==hashQueryKeyByOptions(Sn,ln.options))return!1}else if(!partialMatchKey(ln.queryKey,Sn))return!1}var Pn=mapQueryStatusFilter(cn,vn);if(Pn==="none")return!1;if(Pn!=="all"){var Nn=ln.isActive();if(Pn==="active"&&!Nn||Pn==="inactive"&&Nn)return!1}return!(typeof wn=="boolean"&&ln.isStale()!==wn||typeof pn=="boolean"&&ln.isFetching()!==pn||kn&&!kn(ln))}function matchMutation(sn,ln){var cn=sn.exact,dn=sn.fetching,pn=sn.predicate,vn=sn.mutationKey;if(isQueryKey(vn)){if(!ln.options.mutationKey)return!1;if(cn){if(hashQueryKey(ln.options.mutationKey)!==hashQueryKey(vn))return!1}else if(!partialMatchKey(ln.options.mutationKey,vn))return!1}return!(typeof dn=="boolean"&&ln.state.status==="loading"!==dn||pn&&!pn(ln))}function hashQueryKeyByOptions(sn,ln){var cn=(ln==null?void 0:ln.queryKeyHashFn)||hashQueryKey;return cn(sn)}function hashQueryKey(sn){var ln=ensureQueryKeyArray(sn);return stableValueHash(ln)}function stableValueHash(sn){return JSON.stringify(sn,function(ln,cn){return isPlainObject$1(cn)?Object.keys(cn).sort().reduce(function(dn,pn){return dn[pn]=cn[pn],dn},{}):cn})}function partialMatchKey(sn,ln){return partialDeepEqual(ensureQueryKeyArray(sn),ensureQueryKeyArray(ln))}function partialDeepEqual(sn,ln){return sn===ln?!0:typeof sn!=typeof ln?!1:sn&&ln&&typeof sn=="object"&&typeof ln=="object"?!Object.keys(ln).some(function(cn){return!partialDeepEqual(sn[cn],ln[cn])}):!1}function replaceEqualDeep(sn,ln){if(sn===ln)return sn;var cn=Array.isArray(sn)&&Array.isArray(ln);if(cn||isPlainObject$1(sn)&&isPlainObject$1(ln)){for(var dn=cn?sn.length:Object.keys(sn).length,pn=cn?ln:Object.keys(ln),vn=pn.length,kn=cn?[]:{},Sn=0,wn=0;wn<vn;wn++){var Pn=cn?wn:pn[wn];kn[Pn]=replaceEqualDeep(sn[Pn],ln[Pn]),kn[Pn]===sn[Pn]&&Sn++}return dn===vn&&Sn===dn?sn:kn}return ln}function shallowEqualObjects(sn,ln){if(sn&&!ln||ln&&!sn)return!1;for(var cn in sn)if(sn[cn]!==ln[cn])return!1;return!0}function isPlainObject$1(sn){if(!hasObjectPrototype(sn))return!1;var ln=sn.constructor;if(typeof ln>"u")return!0;var cn=ln.prototype;return!(!hasObjectPrototype(cn)||!cn.hasOwnProperty("isPrototypeOf"))}function hasObjectPrototype(sn){return Object.prototype.toString.call(sn)==="[object Object]"}function isQueryKey(sn){return typeof sn=="string"||Array.isArray(sn)}function sleep(sn){return new Promise(function(ln){setTimeout(ln,sn)})}function scheduleMicrotask(sn){Promise.resolve().then(sn).catch(function(ln){return setTimeout(function(){throw ln})})}function getAbortController(){if(typeof AbortController=="function")return new AbortController}var FocusManager=function(sn){_inheritsLoose$1(ln,sn);function ln(){var dn;return dn=sn.call(this)||this,dn.setup=function(pn){var vn;if(!isServer&&((vn=window)!=null&&vn.addEventListener)){var kn=function(){return pn()};return window.addEventListener("visibilitychange",kn,!1),window.addEventListener("focus",kn,!1),function(){window.removeEventListener("visibilitychange",kn),window.removeEventListener("focus",kn)}}},dn}var cn=ln.prototype;return cn.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},cn.onUnsubscribe=function(){if(!this.hasListeners()){var pn;(pn=this.cleanup)==null||pn.call(this),this.cleanup=void 0}},cn.setEventListener=function(pn){var vn,kn=this;this.setup=pn,(vn=this.cleanup)==null||vn.call(this),this.cleanup=pn(function(Sn){typeof Sn=="boolean"?kn.setFocused(Sn):kn.onFocus()})},cn.setFocused=function(pn){this.focused=pn,pn&&this.onFocus()},cn.onFocus=function(){this.listeners.forEach(function(pn){pn()})},cn.isFocused=function(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)},ln}(Subscribable),focusManager=new FocusManager,OnlineManager=function(sn){_inheritsLoose$1(ln,sn);function ln(){var dn;return dn=sn.call(this)||this,dn.setup=function(pn){var vn;if(!isServer&&((vn=window)!=null&&vn.addEventListener)){var kn=function(){return pn()};return window.addEventListener("online",kn,!1),window.addEventListener("offline",kn,!1),function(){window.removeEventListener("online",kn),window.removeEventListener("offline",kn)}}},dn}var cn=ln.prototype;return cn.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},cn.onUnsubscribe=function(){if(!this.hasListeners()){var pn;(pn=this.cleanup)==null||pn.call(this),this.cleanup=void 0}},cn.setEventListener=function(pn){var vn,kn=this;this.setup=pn,(vn=this.cleanup)==null||vn.call(this),this.cleanup=pn(function(Sn){typeof Sn=="boolean"?kn.setOnline(Sn):kn.onOnline()})},cn.setOnline=function(pn){this.online=pn,pn&&this.onOnline()},cn.onOnline=function(){this.listeners.forEach(function(pn){pn()})},cn.isOnline=function(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine},ln}(Subscribable),onlineManager=new OnlineManager;function defaultRetryDelay(sn){return Math.min(1e3*Math.pow(2,sn),3e4)}function isCancelable(sn){return typeof(sn==null?void 0:sn.cancel)=="function"}var CancelledError=function(ln){this.revert=ln==null?void 0:ln.revert,this.silent=ln==null?void 0:ln.silent};function isCancelledError(sn){return sn instanceof CancelledError}var Retryer=function(ln){var cn=this,dn=!1,pn,vn,kn,Sn;this.abort=ln.abort,this.cancel=function(Fn){return pn==null?void 0:pn(Fn)},this.cancelRetry=function(){dn=!0},this.continueRetry=function(){dn=!1},this.continue=function(){return vn==null?void 0:vn()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(Fn,zn){kn=Fn,Sn=zn});var wn=function(zn){cn.isResolved||(cn.isResolved=!0,ln.onSuccess==null||ln.onSuccess(zn),vn==null||vn(),kn(zn))},Pn=function(zn){cn.isResolved||(cn.isResolved=!0,ln.onError==null||ln.onError(zn),vn==null||vn(),Sn(zn))},Nn=function(){return new Promise(function(zn){vn=zn,cn.isPaused=!0,ln.onPause==null||ln.onPause()}).then(function(){vn=void 0,cn.isPaused=!1,ln.onContinue==null||ln.onContinue()})},Ln=function Fn(){if(!cn.isResolved){var zn;try{zn=ln.fn()}catch(Dn){zn=Promise.reject(Dn)}pn=function(Kn){if(!cn.isResolved&&(Pn(new CancelledError(Kn)),cn.abort==null||cn.abort(),isCancelable(zn)))try{zn.cancel()}catch{}},cn.isTransportCancelable=isCancelable(zn),Promise.resolve(zn).then(wn).catch(function(Dn){var Kn,qn;if(!cn.isResolved){var Zn=(Kn=ln.retry)!=null?Kn:3,Yn=(qn=ln.retryDelay)!=null?qn:defaultRetryDelay,Jn=typeof Yn=="function"?Yn(cn.failureCount,Dn):Yn,rs=Zn===!0||typeof Zn=="number"&&cn.failureCount<Zn||typeof Zn=="function"&&Zn(cn.failureCount,Dn);if(dn||!rs){Pn(Dn);return}cn.failureCount++,ln.onFail==null||ln.onFail(cn.failureCount,Dn),sleep(Jn).then(function(){if(!focusManager.isFocused()||!onlineManager.isOnline())return Nn()}).then(function(){dn?Pn(Dn):Fn()})}})}};Ln()},NotifyManager=function(){function sn(){this.queue=[],this.transactions=0,this.notifyFn=function(cn){cn()},this.batchNotifyFn=function(cn){cn()}}var ln=sn.prototype;return ln.batch=function(dn){var pn;this.transactions++;try{pn=dn()}finally{this.transactions--,this.transactions||this.flush()}return pn},ln.schedule=function(dn){var pn=this;this.transactions?this.queue.push(dn):scheduleMicrotask(function(){pn.notifyFn(dn)})},ln.batchCalls=function(dn){var pn=this;return function(){for(var vn=arguments.length,kn=new Array(vn),Sn=0;Sn<vn;Sn++)kn[Sn]=arguments[Sn];pn.schedule(function(){dn.apply(void 0,kn)})}},ln.flush=function(){var dn=this,pn=this.queue;this.queue=[],pn.length&&scheduleMicrotask(function(){dn.batchNotifyFn(function(){pn.forEach(function(vn){dn.notifyFn(vn)})})})},ln.setNotifyFunction=function(dn){this.notifyFn=dn},ln.setBatchNotifyFunction=function(dn){this.batchNotifyFn=dn},sn}(),notifyManager=new NotifyManager,logger$2=console;function getLogger(){return logger$2}function setLogger(sn){logger$2=sn}var Query=function(){function sn(cn){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=cn.defaultOptions,this.setOptions(cn.options),this.observers=[],this.cache=cn.cache,this.queryKey=cn.queryKey,this.queryHash=cn.queryHash,this.initialState=cn.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=cn.meta,this.scheduleGc()}var ln=sn.prototype;return ln.setOptions=function(dn){var pn;this.options=_extends({},this.defaultOptions,dn),this.meta=dn==null?void 0:dn.meta,this.cacheTime=Math.max(this.cacheTime||0,(pn=this.options.cacheTime)!=null?pn:5*60*1e3)},ln.setDefaultOptions=function(dn){this.defaultOptions=dn},ln.scheduleGc=function(){var dn=this;this.clearGcTimeout(),isValidTimeout(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){dn.optionalRemove()},this.cacheTime))},ln.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},ln.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},ln.setData=function(dn,pn){var vn,kn,Sn=this.state.data,wn=functionalUpdate(dn,Sn);return(vn=(kn=this.options).isDataEqual)!=null&&vn.call(kn,Sn,wn)?wn=Sn:this.options.structuralSharing!==!1&&(wn=replaceEqualDeep(Sn,wn)),this.dispatch({data:wn,type:"success",dataUpdatedAt:pn==null?void 0:pn.updatedAt}),wn},ln.setState=function(dn,pn){this.dispatch({type:"setState",state:dn,setStateOptions:pn})},ln.cancel=function(dn){var pn,vn=this.promise;return(pn=this.retryer)==null||pn.cancel(dn),vn?vn.then(noop$1).catch(noop$1):Promise.resolve()},ln.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},ln.reset=function(){this.destroy(),this.setState(this.initialState)},ln.isActive=function(){return this.observers.some(function(dn){return dn.options.enabled!==!1})},ln.isFetching=function(){return this.state.isFetching},ln.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(dn){return dn.getCurrentResult().isStale})},ln.isStaleByTime=function(dn){return dn===void 0&&(dn=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!timeUntilStale(this.state.dataUpdatedAt,dn)},ln.onFocus=function(){var dn,pn=this.observers.find(function(vn){return vn.shouldFetchOnWindowFocus()});pn&&pn.refetch(),(dn=this.retryer)==null||dn.continue()},ln.onOnline=function(){var dn,pn=this.observers.find(function(vn){return vn.shouldFetchOnReconnect()});pn&&pn.refetch(),(dn=this.retryer)==null||dn.continue()},ln.addObserver=function(dn){this.observers.indexOf(dn)===-1&&(this.observers.push(dn),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:dn}))},ln.removeObserver=function(dn){this.observers.indexOf(dn)!==-1&&(this.observers=this.observers.filter(function(pn){return pn!==dn}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:dn}))},ln.getObserversCount=function(){return this.observers.length},ln.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},ln.fetch=function(dn,pn){var vn=this,kn,Sn,wn;if(this.state.isFetching){if(this.state.dataUpdatedAt&&(pn!=null&&pn.cancelRefetch))this.cancel({silent:!0});else if(this.promise){var Pn;return(Pn=this.retryer)==null||Pn.continueRetry(),this.promise}}if(dn&&this.setOptions(dn),!this.options.queryFn){var Nn=this.observers.find(function(Yn){return Yn.options.queryFn});Nn&&this.setOptions(Nn.options)}var Ln=ensureQueryKeyArray(this.queryKey),Fn=getAbortController(),zn={queryKey:Ln,pageParam:void 0,meta:this.meta};Object.defineProperty(zn,"signal",{enumerable:!0,get:function(){if(Fn)return vn.abortSignalConsumed=!0,Fn.signal}});var Dn=function(){return vn.options.queryFn?(vn.abortSignalConsumed=!1,vn.options.queryFn(zn)):Promise.reject("Missing queryFn")},Kn={fetchOptions:pn,options:this.options,queryKey:Ln,state:this.state,fetchFn:Dn,meta:this.meta};if((kn=this.options.behavior)!=null&&kn.onFetch){var qn;(qn=this.options.behavior)==null||qn.onFetch(Kn)}if(this.revertState=this.state,!this.state.isFetching||this.state.fetchMeta!==((Sn=Kn.fetchOptions)==null?void 0:Sn.meta)){var Zn;this.dispatch({type:"fetch",meta:(Zn=Kn.fetchOptions)==null?void 0:Zn.meta})}return this.retryer=new Retryer({fn:Kn.fetchFn,abort:Fn==null||(wn=Fn.abort)==null?void 0:wn.bind(Fn),onSuccess:function(Jn){vn.setData(Jn),vn.cache.config.onSuccess==null||vn.cache.config.onSuccess(Jn,vn),vn.cacheTime===0&&vn.optionalRemove()},onError:function(Jn){isCancelledError(Jn)&&Jn.silent||vn.dispatch({type:"error",error:Jn}),isCancelledError(Jn)||(vn.cache.config.onError==null||vn.cache.config.onError(Jn,vn),getLogger().error(Jn)),vn.cacheTime===0&&vn.optionalRemove()},onFail:function(){vn.dispatch({type:"failed"})},onPause:function(){vn.dispatch({type:"pause"})},onContinue:function(){vn.dispatch({type:"continue"})},retry:Kn.options.retry,retryDelay:Kn.options.retryDelay}),this.promise=this.retryer.promise,this.promise},ln.dispatch=function(dn){var pn=this;this.state=this.reducer(this.state,dn),notifyManager.batch(function(){pn.observers.forEach(function(vn){vn.onQueryUpdate(dn)}),pn.cache.notify({query:pn,type:"queryUpdated",action:dn})})},ln.getDefaultState=function(dn){var pn=typeof dn.initialData=="function"?dn.initialData():dn.initialData,vn=typeof dn.initialData<"u",kn=vn?typeof dn.initialDataUpdatedAt=="function"?dn.initialDataUpdatedAt():dn.initialDataUpdatedAt:0,Sn=typeof pn<"u";return{data:pn,dataUpdateCount:0,dataUpdatedAt:Sn?kn??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:Sn?"success":"idle"}},ln.reducer=function(dn,pn){var vn,kn;switch(pn.type){case"failed":return _extends({},dn,{fetchFailureCount:dn.fetchFailureCount+1});case"pause":return _extends({},dn,{isPaused:!0});case"continue":return _extends({},dn,{isPaused:!1});case"fetch":return _extends({},dn,{fetchFailureCount:0,fetchMeta:(vn=pn.meta)!=null?vn:null,isFetching:!0,isPaused:!1},!dn.dataUpdatedAt&&{error:null,status:"loading"});case"success":return _extends({},dn,{data:pn.data,dataUpdateCount:dn.dataUpdateCount+1,dataUpdatedAt:(kn=pn.dataUpdatedAt)!=null?kn:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var Sn=pn.error;return isCancelledError(Sn)&&Sn.revert&&this.revertState?_extends({},this.revertState):_extends({},dn,{error:Sn,errorUpdateCount:dn.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:dn.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return _extends({},dn,{isInvalidated:!0});case"setState":return _extends({},dn,pn.state);default:return dn}},sn}(),QueryCache=function(sn){_inheritsLoose$1(ln,sn);function ln(dn){var pn;return pn=sn.call(this)||this,pn.config=dn||{},pn.queries=[],pn.queriesMap={},pn}var cn=ln.prototype;return cn.build=function(pn,vn,kn){var Sn,wn=vn.queryKey,Pn=(Sn=vn.queryHash)!=null?Sn:hashQueryKeyByOptions(wn,vn),Nn=this.get(Pn);return Nn||(Nn=new Query({cache:this,queryKey:wn,queryHash:Pn,options:pn.defaultQueryOptions(vn),state:kn,defaultOptions:pn.getQueryDefaults(wn),meta:vn.meta}),this.add(Nn)),Nn},cn.add=function(pn){this.queriesMap[pn.queryHash]||(this.queriesMap[pn.queryHash]=pn,this.queries.push(pn),this.notify({type:"queryAdded",query:pn}))},cn.remove=function(pn){var vn=this.queriesMap[pn.queryHash];vn&&(pn.destroy(),this.queries=this.queries.filter(function(kn){return kn!==pn}),vn===pn&&delete this.queriesMap[pn.queryHash],this.notify({type:"queryRemoved",query:pn}))},cn.clear=function(){var pn=this;notifyManager.batch(function(){pn.queries.forEach(function(vn){pn.remove(vn)})})},cn.get=function(pn){return this.queriesMap[pn]},cn.getAll=function(){return this.queries},cn.find=function(pn,vn){var kn=parseFilterArgs(pn,vn),Sn=kn[0];return typeof Sn.exact>"u"&&(Sn.exact=!0),this.queries.find(function(wn){return matchQuery(Sn,wn)})},cn.findAll=function(pn,vn){var kn=parseFilterArgs(pn,vn),Sn=kn[0];return Object.keys(Sn).length>0?this.queries.filter(function(wn){return matchQuery(Sn,wn)}):this.queries},cn.notify=function(pn){var vn=this;notifyManager.batch(function(){vn.listeners.forEach(function(kn){kn(pn)})})},cn.onFocus=function(){var pn=this;notifyManager.batch(function(){pn.queries.forEach(function(vn){vn.onFocus()})})},cn.onOnline=function(){var pn=this;notifyManager.batch(function(){pn.queries.forEach(function(vn){vn.onOnline()})})},ln}(Subscribable),Mutation=function(){function sn(cn){this.options=_extends({},cn.defaultOptions,cn.options),this.mutationId=cn.mutationId,this.mutationCache=cn.mutationCache,this.observers=[],this.state=cn.state||getDefaultState(),this.meta=cn.meta}var ln=sn.prototype;return ln.setState=function(dn){this.dispatch({type:"setState",state:dn})},ln.addObserver=function(dn){this.observers.indexOf(dn)===-1&&this.observers.push(dn)},ln.removeObserver=function(dn){this.observers=this.observers.filter(function(pn){return pn!==dn})},ln.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(noop$1).catch(noop$1)):Promise.resolve()},ln.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},ln.execute=function(){var dn=this,pn,vn=this.state.status==="loading",kn=Promise.resolve();return vn||(this.dispatch({type:"loading",variables:this.options.variables}),kn=kn.then(function(){dn.mutationCache.config.onMutate==null||dn.mutationCache.config.onMutate(dn.state.variables,dn)}).then(function(){return dn.options.onMutate==null?void 0:dn.options.onMutate(dn.state.variables)}).then(function(Sn){Sn!==dn.state.context&&dn.dispatch({type:"loading",context:Sn,variables:dn.state.variables})})),kn.then(function(){return dn.executeMutation()}).then(function(Sn){pn=Sn,dn.mutationCache.config.onSuccess==null||dn.mutationCache.config.onSuccess(pn,dn.state.variables,dn.state.context,dn)}).then(function(){return dn.options.onSuccess==null?void 0:dn.options.onSuccess(pn,dn.state.variables,dn.state.context)}).then(function(){return dn.options.onSettled==null?void 0:dn.options.onSettled(pn,null,dn.state.variables,dn.state.context)}).then(function(){return dn.dispatch({type:"success",data:pn}),pn}).catch(function(Sn){return dn.mutationCache.config.onError==null||dn.mutationCache.config.onError(Sn,dn.state.variables,dn.state.context,dn),getLogger().error(Sn),Promise.resolve().then(function(){return dn.options.onError==null?void 0:dn.options.onError(Sn,dn.state.variables,dn.state.context)}).then(function(){return dn.options.onSettled==null?void 0:dn.options.onSettled(void 0,Sn,dn.state.variables,dn.state.context)}).then(function(){throw dn.dispatch({type:"error",error:Sn}),Sn})})},ln.executeMutation=function(){var dn=this,pn;return this.retryer=new Retryer({fn:function(){return dn.options.mutationFn?dn.options.mutationFn(dn.state.variables):Promise.reject("No mutationFn found")},onFail:function(){dn.dispatch({type:"failed"})},onPause:function(){dn.dispatch({type:"pause"})},onContinue:function(){dn.dispatch({type:"continue"})},retry:(pn=this.options.retry)!=null?pn:0,retryDelay:this.options.retryDelay}),this.retryer.promise},ln.dispatch=function(dn){var pn=this;this.state=reducer(this.state,dn),notifyManager.batch(function(){pn.observers.forEach(function(vn){vn.onMutationUpdate(dn)}),pn.mutationCache.notify(pn)})},sn}();function getDefaultState(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}function reducer(sn,ln){switch(ln.type){case"failed":return _extends({},sn,{failureCount:sn.failureCount+1});case"pause":return _extends({},sn,{isPaused:!0});case"continue":return _extends({},sn,{isPaused:!1});case"loading":return _extends({},sn,{context:ln.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:ln.variables});case"success":return _extends({},sn,{data:ln.data,error:null,status:"success",isPaused:!1});case"error":return _extends({},sn,{data:void 0,error:ln.error,failureCount:sn.failureCount+1,isPaused:!1,status:"error"});case"setState":return _extends({},sn,ln.state);default:return sn}}var MutationCache=function(sn){_inheritsLoose$1(ln,sn);function ln(dn){var pn;return pn=sn.call(this)||this,pn.config=dn||{},pn.mutations=[],pn.mutationId=0,pn}var cn=ln.prototype;return cn.build=function(pn,vn,kn){var Sn=new Mutation({mutationCache:this,mutationId:++this.mutationId,options:pn.defaultMutationOptions(vn),state:kn,defaultOptions:vn.mutationKey?pn.getMutationDefaults(vn.mutationKey):void 0,meta:vn.meta});return this.add(Sn),Sn},cn.add=function(pn){this.mutations.push(pn),this.notify(pn)},cn.remove=function(pn){this.mutations=this.mutations.filter(function(vn){return vn!==pn}),pn.cancel(),this.notify(pn)},cn.clear=function(){var pn=this;notifyManager.batch(function(){pn.mutations.forEach(function(vn){pn.remove(vn)})})},cn.getAll=function(){return this.mutations},cn.find=function(pn){return typeof pn.exact>"u"&&(pn.exact=!0),this.mutations.find(function(vn){return matchMutation(pn,vn)})},cn.findAll=function(pn){return this.mutations.filter(function(vn){return matchMutation(pn,vn)})},cn.notify=function(pn){var vn=this;notifyManager.batch(function(){vn.listeners.forEach(function(kn){kn(pn)})})},cn.onFocus=function(){this.resumePausedMutations()},cn.onOnline=function(){this.resumePausedMutations()},cn.resumePausedMutations=function(){var pn=this.mutations.filter(function(vn){return vn.state.isPaused});return notifyManager.batch(function(){return pn.reduce(function(vn,kn){return vn.then(function(){return kn.continue().catch(noop$1)})},Promise.resolve())})},ln}(Subscribable);function infiniteQueryBehavior(){return{onFetch:function(ln){ln.fetchFn=function(){var cn,dn,pn,vn,kn,Sn,wn=(cn=ln.fetchOptions)==null||(dn=cn.meta)==null?void 0:dn.refetchPage,Pn=(pn=ln.fetchOptions)==null||(vn=pn.meta)==null?void 0:vn.fetchMore,Nn=Pn==null?void 0:Pn.pageParam,Ln=(Pn==null?void 0:Pn.direction)==="forward",Fn=(Pn==null?void 0:Pn.direction)==="backward",zn=((kn=ln.state.data)==null?void 0:kn.pages)||[],Dn=((Sn=ln.state.data)==null?void 0:Sn.pageParams)||[],Kn=getAbortController(),qn=Kn==null?void 0:Kn.signal,Zn=Dn,Yn=!1,Jn=ln.options.queryFn||function(){return Promise.reject("Missing queryFn")},rs=function(ys,_s,js,bs){return Zn=bs?[_s].concat(Zn):[].concat(Zn,[_s]),bs?[js].concat(ys):[].concat(ys,[js])},ss=function(ys,_s,js,bs){if(Yn)return Promise.reject("Cancelled");if(typeof js>"u"&&!_s&&ys.length)return Promise.resolve(ys);var ks={queryKey:ln.queryKey,signal:qn,pageParam:js,meta:ln.meta},xs=Jn(ks),Ks=Promise.resolve(xs).then(function(Js){return rs(ys,js,Js,bs)});if(isCancelable(xs)){var Vs=Ks;Vs.cancel=xs.cancel}return Ks},as;if(!zn.length)as=ss([]);else if(Ln){var ds=typeof Nn<"u",Es=ds?Nn:getNextPageParam(ln.options,zn);as=ss(zn,ds,Es)}else if(Fn){var Ss=typeof Nn<"u",Qn=Ss?Nn:getPreviousPageParam(ln.options,zn);as=ss(zn,Ss,Qn,!0)}else(function(){Zn=[];var Rs=typeof ln.options.getNextPageParam>"u",ys=wn&&zn[0]?wn(zn[0],0,zn):!0;as=ys?ss([],Rs,Dn[0]):Promise.resolve(rs([],Dn[0],zn[0]));for(var _s=function(ks){as=as.then(function(xs){var Ks=wn&&zn[ks]?wn(zn[ks],ks,zn):!0;if(Ks){var Vs=Rs?Dn[ks]:getNextPageParam(ln.options,xs);return ss(xs,Rs,Vs)}return Promise.resolve(rs(xs,Dn[ks],zn[ks]))})},js=1;js<zn.length;js++)_s(js)})();var ms=as.then(function(Rs){return{pages:Rs,pageParams:Zn}}),Ts=ms;return Ts.cancel=function(){Yn=!0,Kn==null||Kn.abort(),isCancelable(as)&&as.cancel()},ms}}}}function getNextPageParam(sn,ln){return sn.getNextPageParam==null?void 0:sn.getNextPageParam(ln[ln.length-1],ln)}function getPreviousPageParam(sn,ln){return sn.getPreviousPageParam==null?void 0:sn.getPreviousPageParam(ln[0],ln)}function hasNextPage(sn,ln){if(sn.getNextPageParam&&Array.isArray(ln)){var cn=getNextPageParam(sn,ln);return typeof cn<"u"&&cn!==null&&cn!==!1}}function hasPreviousPage(sn,ln){if(sn.getPreviousPageParam&&Array.isArray(ln)){var cn=getPreviousPageParam(sn,ln);return typeof cn<"u"&&cn!==null&&cn!==!1}}var QueryClient=function(){function sn(cn){cn===void 0&&(cn={}),this.queryCache=cn.queryCache||new QueryCache,this.mutationCache=cn.mutationCache||new MutationCache,this.defaultOptions=cn.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var ln=sn.prototype;return ln.mount=function(){var dn=this;this.unsubscribeFocus=focusManager.subscribe(function(){focusManager.isFocused()&&onlineManager.isOnline()&&(dn.mutationCache.onFocus(),dn.queryCache.onFocus())}),this.unsubscribeOnline=onlineManager.subscribe(function(){focusManager.isFocused()&&onlineManager.isOnline()&&(dn.mutationCache.onOnline(),dn.queryCache.onOnline())})},ln.unmount=function(){var dn,pn;(dn=this.unsubscribeFocus)==null||dn.call(this),(pn=this.unsubscribeOnline)==null||pn.call(this)},ln.isFetching=function(dn,pn){var vn=parseFilterArgs(dn,pn),kn=vn[0];return kn.fetching=!0,this.queryCache.findAll(kn).length},ln.isMutating=function(dn){return this.mutationCache.findAll(_extends({},dn,{fetching:!0})).length},ln.getQueryData=function(dn,pn){var vn;return(vn=this.queryCache.find(dn,pn))==null?void 0:vn.state.data},ln.getQueriesData=function(dn){return this.getQueryCache().findAll(dn).map(function(pn){var vn=pn.queryKey,kn=pn.state,Sn=kn.data;return[vn,Sn]})},ln.setQueryData=function(dn,pn,vn){var kn=parseQueryArgs(dn),Sn=this.defaultQueryOptions(kn);return this.queryCache.build(this,Sn).setData(pn,vn)},ln.setQueriesData=function(dn,pn,vn){var kn=this;return notifyManager.batch(function(){return kn.getQueryCache().findAll(dn).map(function(Sn){var wn=Sn.queryKey;return[wn,kn.setQueryData(wn,pn,vn)]})})},ln.getQueryState=function(dn,pn){var vn;return(vn=this.queryCache.find(dn,pn))==null?void 0:vn.state},ln.removeQueries=function(dn,pn){var vn=parseFilterArgs(dn,pn),kn=vn[0],Sn=this.queryCache;notifyManager.batch(function(){Sn.findAll(kn).forEach(function(wn){Sn.remove(wn)})})},ln.resetQueries=function(dn,pn,vn){var kn=this,Sn=parseFilterArgs(dn,pn,vn),wn=Sn[0],Pn=Sn[1],Nn=this.queryCache,Ln=_extends({},wn,{active:!0});return notifyManager.batch(function(){return Nn.findAll(wn).forEach(function(Fn){Fn.reset()}),kn.refetchQueries(Ln,Pn)})},ln.cancelQueries=function(dn,pn,vn){var kn=this,Sn=parseFilterArgs(dn,pn,vn),wn=Sn[0],Pn=Sn[1],Nn=Pn===void 0?{}:Pn;typeof Nn.revert>"u"&&(Nn.revert=!0);var Ln=notifyManager.batch(function(){return kn.queryCache.findAll(wn).map(function(Fn){return Fn.cancel(Nn)})});return Promise.all(Ln).then(noop$1).catch(noop$1)},ln.invalidateQueries=function(dn,pn,vn){var kn,Sn,wn,Pn=this,Nn=parseFilterArgs(dn,pn,vn),Ln=Nn[0],Fn=Nn[1],zn=_extends({},Ln,{active:(kn=(Sn=Ln.refetchActive)!=null?Sn:Ln.active)!=null?kn:!0,inactive:(wn=Ln.refetchInactive)!=null?wn:!1});return notifyManager.batch(function(){return Pn.queryCache.findAll(Ln).forEach(function(Dn){Dn.invalidate()}),Pn.refetchQueries(zn,Fn)})},ln.refetchQueries=function(dn,pn,vn){var kn=this,Sn=parseFilterArgs(dn,pn,vn),wn=Sn[0],Pn=Sn[1],Nn=notifyManager.batch(function(){return kn.queryCache.findAll(wn).map(function(Fn){return Fn.fetch(void 0,_extends({},Pn,{meta:{refetchPage:wn==null?void 0:wn.refetchPage}}))})}),Ln=Promise.all(Nn).then(noop$1);return Pn!=null&&Pn.throwOnError||(Ln=Ln.catch(noop$1)),Ln},ln.fetchQuery=function(dn,pn,vn){var kn=parseQueryArgs(dn,pn,vn),Sn=this.defaultQueryOptions(kn);typeof Sn.retry>"u"&&(Sn.retry=!1);var wn=this.queryCache.build(this,Sn);return wn.isStaleByTime(Sn.staleTime)?wn.fetch(Sn):Promise.resolve(wn.state.data)},ln.prefetchQuery=function(dn,pn,vn){return this.fetchQuery(dn,pn,vn).then(noop$1).catch(noop$1)},ln.fetchInfiniteQuery=function(dn,pn,vn){var kn=parseQueryArgs(dn,pn,vn);return kn.behavior=infiniteQueryBehavior(),this.fetchQuery(kn)},ln.prefetchInfiniteQuery=function(dn,pn,vn){return this.fetchInfiniteQuery(dn,pn,vn).then(noop$1).catch(noop$1)},ln.cancelMutations=function(){var dn=this,pn=notifyManager.batch(function(){return dn.mutationCache.getAll().map(function(vn){return vn.cancel()})});return Promise.all(pn).then(noop$1).catch(noop$1)},ln.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},ln.executeMutation=function(dn){return this.mutationCache.build(this,dn).execute()},ln.getQueryCache=function(){return this.queryCache},ln.getMutationCache=function(){return this.mutationCache},ln.getDefaultOptions=function(){return this.defaultOptions},ln.setDefaultOptions=function(dn){this.defaultOptions=dn},ln.setQueryDefaults=function(dn,pn){var vn=this.queryDefaults.find(function(kn){return hashQueryKey(dn)===hashQueryKey(kn.queryKey)});vn?vn.defaultOptions=pn:this.queryDefaults.push({queryKey:dn,defaultOptions:pn})},ln.getQueryDefaults=function(dn){var pn;return dn?(pn=this.queryDefaults.find(function(vn){return partialMatchKey(dn,vn.queryKey)}))==null?void 0:pn.defaultOptions:void 0},ln.setMutationDefaults=function(dn,pn){var vn=this.mutationDefaults.find(function(kn){return hashQueryKey(dn)===hashQueryKey(kn.mutationKey)});vn?vn.defaultOptions=pn:this.mutationDefaults.push({mutationKey:dn,defaultOptions:pn})},ln.getMutationDefaults=function(dn){var pn;return dn?(pn=this.mutationDefaults.find(function(vn){return partialMatchKey(dn,vn.mutationKey)}))==null?void 0:pn.defaultOptions:void 0},ln.defaultQueryOptions=function(dn){if(dn!=null&&dn._defaulted)return dn;var pn=_extends({},this.defaultOptions.queries,this.getQueryDefaults(dn==null?void 0:dn.queryKey),dn,{_defaulted:!0});return!pn.queryHash&&pn.queryKey&&(pn.queryHash=hashQueryKeyByOptions(pn.queryKey,pn)),pn},ln.defaultQueryObserverOptions=function(dn){return this.defaultQueryOptions(dn)},ln.defaultMutationOptions=function(dn){return dn!=null&&dn._defaulted?dn:_extends({},this.defaultOptions.mutations,this.getMutationDefaults(dn==null?void 0:dn.mutationKey),dn,{_defaulted:!0})},ln.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},sn}(),QueryObserver=function(sn){_inheritsLoose$1(ln,sn);function ln(dn,pn){var vn;return vn=sn.call(this)||this,vn.client=dn,vn.options=pn,vn.trackedProps=[],vn.selectError=null,vn.bindMethods(),vn.setOptions(pn),vn}var cn=ln.prototype;return cn.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},cn.onSubscribe=function(){this.listeners.length===1&&(this.currentQuery.addObserver(this),shouldFetchOnMount(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},cn.onUnsubscribe=function(){this.listeners.length||this.destroy()},cn.shouldFetchOnReconnect=function(){return shouldFetchOn(this.currentQuery,this.options,this.options.refetchOnReconnect)},cn.shouldFetchOnWindowFocus=function(){return shouldFetchOn(this.currentQuery,this.options,this.options.refetchOnWindowFocus)},cn.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},cn.setOptions=function(pn,vn){var kn=this.options,Sn=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(pn),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=kn.queryKey),this.updateQuery();var wn=this.hasListeners();wn&&shouldFetchOptionally(this.currentQuery,Sn,this.options,kn)&&this.executeFetch(),this.updateResult(vn),wn&&(this.currentQuery!==Sn||this.options.enabled!==kn.enabled||this.options.staleTime!==kn.staleTime)&&this.updateStaleTimeout();var Pn=this.computeRefetchInterval();wn&&(this.currentQuery!==Sn||this.options.enabled!==kn.enabled||Pn!==this.currentRefetchInterval)&&this.updateRefetchInterval(Pn)},cn.getOptimisticResult=function(pn){var vn=this.client.defaultQueryObserverOptions(pn),kn=this.client.getQueryCache().build(this.client,vn);return this.createResult(kn,vn)},cn.getCurrentResult=function(){return this.currentResult},cn.trackResult=function(pn,vn){var kn=this,Sn={},wn=function(Nn){kn.trackedProps.includes(Nn)||kn.trackedProps.push(Nn)};return Object.keys(pn).forEach(function(Pn){Object.defineProperty(Sn,Pn,{configurable:!1,enumerable:!0,get:function(){return wn(Pn),pn[Pn]}})}),(vn.useErrorBoundary||vn.suspense)&&wn("error"),Sn},cn.getNextResult=function(pn){var vn=this;return new Promise(function(kn,Sn){var wn=vn.subscribe(function(Pn){Pn.isFetching||(wn(),Pn.isError&&(pn!=null&&pn.throwOnError)?Sn(Pn.error):kn(Pn))})})},cn.getCurrentQuery=function(){return this.currentQuery},cn.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},cn.refetch=function(pn){return this.fetch(_extends({},pn,{meta:{refetchPage:pn==null?void 0:pn.refetchPage}}))},cn.fetchOptimistic=function(pn){var vn=this,kn=this.client.defaultQueryObserverOptions(pn),Sn=this.client.getQueryCache().build(this.client,kn);return Sn.fetch().then(function(){return vn.createResult(Sn,kn)})},cn.fetch=function(pn){var vn=this;return this.executeFetch(pn).then(function(){return vn.updateResult(),vn.currentResult})},cn.executeFetch=function(pn){this.updateQuery();var vn=this.currentQuery.fetch(this.options,pn);return pn!=null&&pn.throwOnError||(vn=vn.catch(noop$1)),vn},cn.updateStaleTimeout=function(){var pn=this;if(this.clearStaleTimeout(),!(isServer||this.currentResult.isStale||!isValidTimeout(this.options.staleTime))){var vn=timeUntilStale(this.currentResult.dataUpdatedAt,this.options.staleTime),kn=vn+1;this.staleTimeoutId=setTimeout(function(){pn.currentResult.isStale||pn.updateResult()},kn)}},cn.computeRefetchInterval=function(){var pn;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(pn=this.options.refetchInterval)!=null?pn:!1},cn.updateRefetchInterval=function(pn){var vn=this;this.clearRefetchInterval(),this.currentRefetchInterval=pn,!(isServer||this.options.enabled===!1||!isValidTimeout(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(function(){(vn.options.refetchIntervalInBackground||focusManager.isFocused())&&vn.executeFetch()},this.currentRefetchInterval))},cn.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())},cn.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},cn.clearStaleTimeout=function(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)},cn.clearRefetchInterval=function(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)},cn.createResult=function(pn,vn){var kn=this.currentQuery,Sn=this.options,wn=this.currentResult,Pn=this.currentResultState,Nn=this.currentResultOptions,Ln=pn!==kn,Fn=Ln?pn.state:this.currentQueryInitialState,zn=Ln?this.currentResult:this.previousQueryResult,Dn=pn.state,Kn=Dn.dataUpdatedAt,qn=Dn.error,Zn=Dn.errorUpdatedAt,Yn=Dn.isFetching,Jn=Dn.status,rs=!1,ss=!1,as;if(vn.optimisticResults){var ds=this.hasListeners(),Es=!ds&&shouldFetchOnMount(pn,vn),Ss=ds&&shouldFetchOptionally(pn,kn,vn,Sn);(Es||Ss)&&(Yn=!0,Kn||(Jn="loading"))}if(vn.keepPreviousData&&!Dn.dataUpdateCount&&(zn!=null&&zn.isSuccess)&&Jn!=="error")as=zn.data,Kn=zn.dataUpdatedAt,Jn=zn.status,rs=!0;else if(vn.select&&typeof Dn.data<"u")if(wn&&Dn.data===(Pn==null?void 0:Pn.data)&&vn.select===this.selectFn)as=this.selectResult;else try{this.selectFn=vn.select,as=vn.select(Dn.data),vn.structuralSharing!==!1&&(as=replaceEqualDeep(wn==null?void 0:wn.data,as)),this.selectResult=as,this.selectError=null}catch(Ts){getLogger().error(Ts),this.selectError=Ts}else as=Dn.data;if(typeof vn.placeholderData<"u"&&typeof as>"u"&&(Jn==="loading"||Jn==="idle")){var Qn;if(wn!=null&&wn.isPlaceholderData&&vn.placeholderData===(Nn==null?void 0:Nn.placeholderData))Qn=wn.data;else if(Qn=typeof vn.placeholderData=="function"?vn.placeholderData():vn.placeholderData,vn.select&&typeof Qn<"u")try{Qn=vn.select(Qn),vn.structuralSharing!==!1&&(Qn=replaceEqualDeep(wn==null?void 0:wn.data,Qn)),this.selectError=null}catch(Ts){getLogger().error(Ts),this.selectError=Ts}typeof Qn<"u"&&(Jn="success",as=Qn,ss=!0)}this.selectError&&(qn=this.selectError,as=this.selectResult,Zn=Date.now(),Jn="error");var ms={status:Jn,isLoading:Jn==="loading",isSuccess:Jn==="success",isError:Jn==="error",isIdle:Jn==="idle",data:as,dataUpdatedAt:Kn,error:qn,errorUpdatedAt:Zn,failureCount:Dn.fetchFailureCount,errorUpdateCount:Dn.errorUpdateCount,isFetched:Dn.dataUpdateCount>0||Dn.errorUpdateCount>0,isFetchedAfterMount:Dn.dataUpdateCount>Fn.dataUpdateCount||Dn.errorUpdateCount>Fn.errorUpdateCount,isFetching:Yn,isRefetching:Yn&&Jn!=="loading",isLoadingError:Jn==="error"&&Dn.dataUpdatedAt===0,isPlaceholderData:ss,isPreviousData:rs,isRefetchError:Jn==="error"&&Dn.dataUpdatedAt!==0,isStale:isStale(pn,vn),refetch:this.refetch,remove:this.remove};return ms},cn.shouldNotifyListeners=function(pn,vn){if(!vn)return!0;var kn=this.options,Sn=kn.notifyOnChangeProps,wn=kn.notifyOnChangePropsExclusions;if(!Sn&&!wn||Sn==="tracked"&&!this.trackedProps.length)return!0;var Pn=Sn==="tracked"?this.trackedProps:Sn;return Object.keys(pn).some(function(Nn){var Ln=Nn,Fn=pn[Ln]!==vn[Ln],zn=Pn==null?void 0:Pn.some(function(Kn){return Kn===Nn}),Dn=wn==null?void 0:wn.some(function(Kn){return Kn===Nn});return Fn&&!Dn&&(!Pn||zn)})},cn.updateResult=function(pn){var vn=this.currentResult;if(this.currentResult=this.createResult(this.currentQuery,this.options),this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!shallowEqualObjects(this.currentResult,vn)){var kn={cache:!0};(pn==null?void 0:pn.listeners)!==!1&&this.shouldNotifyListeners(this.currentResult,vn)&&(kn.listeners=!0),this.notify(_extends({},kn,pn))}},cn.updateQuery=function(){var pn=this.client.getQueryCache().build(this.client,this.options);if(pn!==this.currentQuery){var vn=this.currentQuery;this.currentQuery=pn,this.currentQueryInitialState=pn.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(vn==null||vn.removeObserver(this),pn.addObserver(this))}},cn.onQueryUpdate=function(pn){var vn={};pn.type==="success"?vn.onSuccess=!0:pn.type==="error"&&!isCancelledError(pn.error)&&(vn.onError=!0),this.updateResult(vn),this.hasListeners()&&this.updateTimers()},cn.notify=function(pn){var vn=this;notifyManager.batch(function(){pn.onSuccess?(vn.options.onSuccess==null||vn.options.onSuccess(vn.currentResult.data),vn.options.onSettled==null||vn.options.onSettled(vn.currentResult.data,null)):pn.onError&&(vn.options.onError==null||vn.options.onError(vn.currentResult.error),vn.options.onSettled==null||vn.options.onSettled(void 0,vn.currentResult.error)),pn.listeners&&vn.listeners.forEach(function(kn){kn(vn.currentResult)}),pn.cache&&vn.client.getQueryCache().notify({query:vn.currentQuery,type:"observerResultsUpdated"})})},ln}(Subscribable);function shouldLoadOnMount(sn,ln){return ln.enabled!==!1&&!sn.state.dataUpdatedAt&&!(sn.state.status==="error"&&ln.retryOnMount===!1)}function shouldFetchOnMount(sn,ln){return shouldLoadOnMount(sn,ln)||sn.state.dataUpdatedAt>0&&shouldFetchOn(sn,ln,ln.refetchOnMount)}function shouldFetchOn(sn,ln,cn){if(ln.enabled!==!1){var dn=typeof cn=="function"?cn(sn):cn;return dn==="always"||dn!==!1&&isStale(sn,ln)}return!1}function shouldFetchOptionally(sn,ln,cn,dn){return cn.enabled!==!1&&(sn!==ln||dn.enabled===!1)&&(!cn.suspense||sn.state.status!=="error")&&isStale(sn,cn)}function isStale(sn,ln){return sn.isStaleByTime(ln.staleTime)}var MutationObserver$2=function(sn){_inheritsLoose$1(ln,sn);function ln(dn,pn){var vn;return vn=sn.call(this)||this,vn.client=dn,vn.setOptions(pn),vn.bindMethods(),vn.updateResult(),vn}var cn=ln.prototype;return cn.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},cn.setOptions=function(pn){this.options=this.client.defaultMutationOptions(pn)},cn.onUnsubscribe=function(){if(!this.listeners.length){var pn;(pn=this.currentMutation)==null||pn.removeObserver(this)}},cn.onMutationUpdate=function(pn){this.updateResult();var vn={listeners:!0};pn.type==="success"?vn.onSuccess=!0:pn.type==="error"&&(vn.onError=!0),this.notify(vn)},cn.getCurrentResult=function(){return this.currentResult},cn.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},cn.mutate=function(pn,vn){return this.mutateOptions=vn,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,_extends({},this.options,{variables:typeof pn<"u"?pn:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},cn.updateResult=function(){var pn=this.currentMutation?this.currentMutation.state:getDefaultState(),vn=_extends({},pn,{isLoading:pn.status==="loading",isSuccess:pn.status==="success",isError:pn.status==="error",isIdle:pn.status==="idle",mutate:this.mutate,reset:this.reset});this.currentResult=vn},cn.notify=function(pn){var vn=this;notifyManager.batch(function(){vn.mutateOptions&&(pn.onSuccess?(vn.mutateOptions.onSuccess==null||vn.mutateOptions.onSuccess(vn.currentResult.data,vn.currentResult.variables,vn.currentResult.context),vn.mutateOptions.onSettled==null||vn.mutateOptions.onSettled(vn.currentResult.data,null,vn.currentResult.variables,vn.currentResult.context)):pn.onError&&(vn.mutateOptions.onError==null||vn.mutateOptions.onError(vn.currentResult.error,vn.currentResult.variables,vn.currentResult.context),vn.mutateOptions.onSettled==null||vn.mutateOptions.onSettled(void 0,vn.currentResult.error,vn.currentResult.variables,vn.currentResult.context))),pn.listeners&&vn.listeners.forEach(function(kn){kn(vn.currentResult)})})},ln}(Subscribable),unstable_batchedUpdates=ReactDOM.unstable_batchedUpdates;notifyManager.setBatchNotifyFunction(unstable_batchedUpdates);var logger$1=console;setLogger(logger$1);var defaultContext=React.createContext(void 0),QueryClientSharingContext=React.createContext(!1);function getQueryClientContext(sn){return sn&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=defaultContext),window.ReactQueryClientContext):defaultContext}var useQueryClient=function(){var ln=React.useContext(getQueryClientContext(React.useContext(QueryClientSharingContext)));if(!ln)throw new Error("No QueryClient set, use QueryClientProvider to set one");return ln},QueryClientProvider=function(ln){var cn=ln.client,dn=ln.contextSharing,pn=dn===void 0?!1:dn,vn=ln.children;React.useEffect(function(){return cn.mount(),function(){cn.unmount()}},[cn]);var kn=getQueryClientContext(pn);return jsx$1(QueryClientSharingContext.Provider,{value:pn,children:jsx$1(kn.Provider,{value:cn,children:vn})})};function createValue(){var sn=!1;return{clearReset:function(){sn=!1},reset:function(){sn=!0},isReset:function(){return sn}}}var QueryErrorResetBoundaryContext=React.createContext(createValue()),useQueryErrorResetBoundary=function(){return React.useContext(QueryErrorResetBoundaryContext)};function shouldThrowError(sn,ln,cn){return typeof ln=="function"?ln.apply(void 0,cn):typeof ln=="boolean"?ln:!!sn}function useMutation(sn,ln,cn){var dn=React.useRef(!1),pn=React.useState(0),vn=pn[1],kn=parseMutationArgs(sn,ln,cn),Sn=useQueryClient(),wn=React.useRef();wn.current?wn.current.setOptions(kn):wn.current=new MutationObserver$2(Sn,kn);var Pn=wn.current.getCurrentResult();React.useEffect(function(){dn.current=!0;var Ln=wn.current.subscribe(notifyManager.batchCalls(function(){dn.current&&vn(function(Fn){return Fn+1})}));return function(){dn.current=!1,Ln()}},[]);var Nn=React.useCallback(function(Ln,Fn){wn.current.mutate(Ln,Fn).catch(noop$1)},[]);if(Pn.error&&shouldThrowError(void 0,wn.current.options.useErrorBoundary,[Pn.error]))throw Pn.error;return _extends({},Pn,{mutate:Nn,mutateAsync:Pn.mutate})}function useBaseQuery(sn,ln){var cn=React.useRef(!1),dn=React.useState(0),pn=dn[1],vn=useQueryClient(),kn=useQueryErrorResetBoundary(),Sn=vn.defaultQueryObserverOptions(sn);Sn.optimisticResults=!0,Sn.onError&&(Sn.onError=notifyManager.batchCalls(Sn.onError)),Sn.onSuccess&&(Sn.onSuccess=notifyManager.batchCalls(Sn.onSuccess)),Sn.onSettled&&(Sn.onSettled=notifyManager.batchCalls(Sn.onSettled)),Sn.suspense&&(typeof Sn.staleTime!="number"&&(Sn.staleTime=1e3),Sn.cacheTime===0&&(Sn.cacheTime=1)),(Sn.suspense||Sn.useErrorBoundary)&&(kn.isReset()||(Sn.retryOnMount=!1));var wn=React.useState(function(){return new ln(vn,Sn)}),Pn=wn[0],Nn=Pn.getOptimisticResult(Sn);if(React.useEffect(function(){cn.current=!0,kn.clearReset();var Ln=Pn.subscribe(notifyManager.batchCalls(function(){cn.current&&pn(function(Fn){return Fn+1})}));return Pn.updateResult(),function(){cn.current=!1,Ln()}},[kn,Pn]),React.useEffect(function(){Pn.setOptions(Sn,{listeners:!1})},[Sn,Pn]),Sn.suspense&&Nn.isLoading)throw Pn.fetchOptimistic(Sn).then(function(Ln){var Fn=Ln.data;Sn.onSuccess==null||Sn.onSuccess(Fn),Sn.onSettled==null||Sn.onSettled(Fn,null)}).catch(function(Ln){kn.clearReset(),Sn.onError==null||Sn.onError(Ln),Sn.onSettled==null||Sn.onSettled(void 0,Ln)});if(Nn.isError&&!kn.isReset()&&!Nn.isFetching&&shouldThrowError(Sn.suspense,Sn.useErrorBoundary,[Nn.error,Pn.getCurrentQuery()]))throw Nn.error;return Sn.notifyOnChangeProps==="tracked"&&(Nn=Pn.trackResult(Nn,Sn)),Nn}function useQuery(sn,ln,cn){var dn=parseQueryArgs(sn,ln,cn);return useBaseQuery(dn,QueryObserver)}var global$o=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof global$o<"u"&&global$o,support={searchParams:"URLSearchParams"in global$o,iterable:"Symbol"in global$o&&"iterator"in Symbol,blob:"FileReader"in global$o&&"Blob"in global$o&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in global$o,arrayBuffer:"ArrayBuffer"in global$o};function isDataView(sn){return sn&&DataView.prototype.isPrototypeOf(sn)}if(support.arrayBuffer)var viewClasses=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],isArrayBufferView=ArrayBuffer.isView||function(sn){return sn&&viewClasses.indexOf(Object.prototype.toString.call(sn))>-1};function normalizeName(sn){if(typeof sn!="string"&&(sn=String(sn)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(sn)||sn==="")throw new TypeError('Invalid character in header field name: "'+sn+'"');return sn.toLowerCase()}function normalizeValue(sn){return typeof sn!="string"&&(sn=String(sn)),sn}function iteratorFor(sn){var ln={next:function(){var cn=sn.shift();return{done:cn===void 0,value:cn}}};return support.iterable&&(ln[Symbol.iterator]=function(){return ln}),ln}function Headers$1(sn){this.map={},sn instanceof Headers$1?sn.forEach(function(ln,cn){this.append(cn,ln)},this):Array.isArray(sn)?sn.forEach(function(ln){this.append(ln[0],ln[1])},this):sn&&Object.getOwnPropertyNames(sn).forEach(function(ln){this.append(ln,sn[ln])},this)}Headers$1.prototype.append=function(sn,ln){sn=normalizeName(sn),ln=normalizeValue(ln);var cn=this.map[sn];this.map[sn]=cn?cn+", "+ln:ln};Headers$1.prototype.delete=function(sn){delete this.map[normalizeName(sn)]};Headers$1.prototype.get=function(sn){return sn=normalizeName(sn),this.has(sn)?this.map[sn]:null};Headers$1.prototype.has=function(sn){return this.map.hasOwnProperty(normalizeName(sn))};Headers$1.prototype.set=function(sn,ln){this.map[normalizeName(sn)]=normalizeValue(ln)};Headers$1.prototype.forEach=function(sn,ln){for(var cn in this.map)this.map.hasOwnProperty(cn)&&sn.call(ln,this.map[cn],cn,this)};Headers$1.prototype.keys=function(){var sn=[];return this.forEach(function(ln,cn){sn.push(cn)}),iteratorFor(sn)};Headers$1.prototype.values=function(){var sn=[];return this.forEach(function(ln){sn.push(ln)}),iteratorFor(sn)};Headers$1.prototype.entries=function(){var sn=[];return this.forEach(function(ln,cn){sn.push([cn,ln])}),iteratorFor(sn)};support.iterable&&(Headers$1.prototype[Symbol.iterator]=Headers$1.prototype.entries);function consumed(sn){if(sn.bodyUsed)return Promise.reject(new TypeError("Already read"));sn.bodyUsed=!0}function fileReaderReady(sn){return new Promise(function(ln,cn){sn.onload=function(){ln(sn.result)},sn.onerror=function(){cn(sn.error)}})}function readBlobAsArrayBuffer(sn){var ln=new FileReader,cn=fileReaderReady(ln);return ln.readAsArrayBuffer(sn),cn}function readBlobAsText(sn){var ln=new FileReader,cn=fileReaderReady(ln);return ln.readAsText(sn),cn}function readArrayBufferAsText(sn){for(var ln=new Uint8Array(sn),cn=new Array(ln.length),dn=0;dn<ln.length;dn++)cn[dn]=String.fromCharCode(ln[dn]);return cn.join("")}function bufferClone(sn){if(sn.slice)return sn.slice(0);var ln=new Uint8Array(sn.byteLength);return ln.set(new Uint8Array(sn)),ln.buffer}function Body(){return this.bodyUsed=!1,this._initBody=function(sn){this.bodyUsed=this.bodyUsed,this._bodyInit=sn,sn?typeof sn=="string"?this._bodyText=sn:support.blob&&Blob.prototype.isPrototypeOf(sn)?this._bodyBlob=sn:support.formData&&FormData.prototype.isPrototypeOf(sn)?this._bodyFormData=sn:support.searchParams&&URLSearchParams.prototype.isPrototypeOf(sn)?this._bodyText=sn.toString():support.arrayBuffer&&support.blob&&isDataView(sn)?(this._bodyArrayBuffer=bufferClone(sn.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):support.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(sn)||isArrayBufferView(sn))?this._bodyArrayBuffer=bufferClone(sn):this._bodyText=sn=Object.prototype.toString.call(sn):this._bodyText="",this.headers.get("content-type")||(typeof sn=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):support.searchParams&&URLSearchParams.prototype.isPrototypeOf(sn)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},support.blob&&(this.blob=function(){var sn=consumed(this);if(sn)return sn;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var sn=consumed(this);return sn||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(readBlobAsArrayBuffer)}),this.text=function(){var sn=consumed(this);if(sn)return sn;if(this._bodyBlob)return readBlobAsText(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},support.formData&&(this.formData=function(){return this.text().then(decode)}),this.json=function(){return this.text().then(JSON.parse)},this}var methods=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function normalizeMethod(sn){var ln=sn.toUpperCase();return methods.indexOf(ln)>-1?ln:sn}function Request$1(sn,ln){if(!(this instanceof Request$1))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');ln=ln||{};var cn=ln.body;if(sn instanceof Request$1){if(sn.bodyUsed)throw new TypeError("Already read");this.url=sn.url,this.credentials=sn.credentials,ln.headers||(this.headers=new Headers$1(sn.headers)),this.method=sn.method,this.mode=sn.mode,this.signal=sn.signal,!cn&&sn._bodyInit!=null&&(cn=sn._bodyInit,sn.bodyUsed=!0)}else this.url=String(sn);if(this.credentials=ln.credentials||this.credentials||"same-origin",(ln.headers||!this.headers)&&(this.headers=new Headers$1(ln.headers)),this.method=normalizeMethod(ln.method||this.method||"GET"),this.mode=ln.mode||this.mode||null,this.signal=ln.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&cn)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(cn),(this.method==="GET"||this.method==="HEAD")&&(ln.cache==="no-store"||ln.cache==="no-cache")){var dn=/([?&])_=[^&]*/;if(dn.test(this.url))this.url=this.url.replace(dn,"$1_="+new Date().getTime());else{var pn=/\?/;this.url+=(pn.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}Request$1.prototype.clone=function(){return new Request$1(this,{body:this._bodyInit})};function decode(sn){var ln=new FormData;return sn.trim().split("&").forEach(function(cn){if(cn){var dn=cn.split("="),pn=dn.shift().replace(/\+/g," "),vn=dn.join("=").replace(/\+/g," ");ln.append(decodeURIComponent(pn),decodeURIComponent(vn))}}),ln}function parseHeaders(sn){var ln=new Headers$1,cn=sn.replace(/\r?\n[\t ]+/g," ");return cn.split("\r").map(function(dn){return dn.indexOf(`
`)===0?dn.substr(1,dn.length):dn}).forEach(function(dn){var pn=dn.split(":"),vn=pn.shift().trim();if(vn){var kn=pn.join(":").trim();ln.append(vn,kn)}}),ln}Body.call(Request$1.prototype);function Response$1(sn,ln){if(!(this instanceof Response$1))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');ln||(ln={}),this.type="default",this.status=ln.status===void 0?200:ln.status,this.ok=this.status>=200&&this.status<300,this.statusText=ln.statusText===void 0?"":""+ln.statusText,this.headers=new Headers$1(ln.headers),this.url=ln.url||"",this._initBody(sn)}Body.call(Response$1.prototype);Response$1.prototype.clone=function(){return new Response$1(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Headers$1(this.headers),url:this.url})};Response$1.error=function(){var sn=new Response$1(null,{status:0,statusText:""});return sn.type="error",sn};var redirectStatuses=[301,302,303,307,308];Response$1.redirect=function(sn,ln){if(redirectStatuses.indexOf(ln)===-1)throw new RangeError("Invalid status code");return new Response$1(null,{status:ln,headers:{location:sn}})};var DOMException$1=global$o.DOMException;try{new DOMException$1}catch{DOMException$1=function(ln,cn){this.message=ln,this.name=cn;var dn=Error(ln);this.stack=dn.stack},DOMException$1.prototype=Object.create(Error.prototype),DOMException$1.prototype.constructor=DOMException$1}function fetch$1(sn,ln){return new Promise(function(cn,dn){var pn=new Request$1(sn,ln);if(pn.signal&&pn.signal.aborted)return dn(new DOMException$1("Aborted","AbortError"));var vn=new XMLHttpRequest;function kn(){vn.abort()}vn.onload=function(){var wn={status:vn.status,statusText:vn.statusText,headers:parseHeaders(vn.getAllResponseHeaders()||"")};wn.url="responseURL"in vn?vn.responseURL:wn.headers.get("X-Request-URL");var Pn="response"in vn?vn.response:vn.responseText;setTimeout(function(){cn(new Response$1(Pn,wn))},0)},vn.onerror=function(){setTimeout(function(){dn(new TypeError("Network request failed"))},0)},vn.ontimeout=function(){setTimeout(function(){dn(new TypeError("Network request failed"))},0)},vn.onabort=function(){setTimeout(function(){dn(new DOMException$1("Aborted","AbortError"))},0)};function Sn(wn){try{return wn===""&&global$o.location.href?global$o.location.href:wn}catch{return wn}}vn.open(pn.method,Sn(pn.url),!0),pn.credentials==="include"?vn.withCredentials=!0:pn.credentials==="omit"&&(vn.withCredentials=!1),"responseType"in vn&&(support.blob?vn.responseType="blob":support.arrayBuffer&&pn.headers.get("Content-Type")&&pn.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(vn.responseType="arraybuffer")),ln&&typeof ln.headers=="object"&&!(ln.headers instanceof Headers$1)?Object.getOwnPropertyNames(ln.headers).forEach(function(wn){vn.setRequestHeader(wn,normalizeValue(ln.headers[wn]))}):pn.headers.forEach(function(wn,Pn){vn.setRequestHeader(Pn,wn)}),pn.signal&&(pn.signal.addEventListener("abort",kn),vn.onreadystatechange=function(){vn.readyState===4&&pn.signal.removeEventListener("abort",kn)}),vn.send(typeof pn._bodyInit>"u"?null:pn._bodyInit)})}fetch$1.polyfill=!0;global$o.fetch||(global$o.fetch=fetch$1,global$o.Headers=Headers$1,global$o.Request=Request$1,global$o.Response=Response$1);self.fetch.bind(self);class ApiError extends Error{constructor(ln){super(),this.response=ln,this.name="ApiError",this.response=ln}get statusCode(){return this.response.statusCode}get message(){return this.response.message}get isNotFound(){return this.statusCode===ResponseStatus.NOT_FOUND}get isUnauthorized(){return this.statusCode===ResponseStatus.UNAUTHORIZED}get idServerError(){return this.statusCode===ResponseStatus.SERVER_ERROR}get isDuplicate(){return this.statusCode===ResponseStatus.DUPLICATE}get isBadRequest(){return this.statusCode===ResponseStatus.BAD_REQUEST}get isBadParameter(){return this.statusCode===ResponseStatus.BAD_PARAMETER}get isConflict(){return this.statusCode===ResponseStatus.CONFLICT}get isForbidden(){return this.statusCode===ResponseStatus.FORBIDDEN}get isPayloadTooLarge(){return this.statusCode===ResponseStatus.PAYLOAD_TOO_LARGE}get isTooManyRequests(){return this.statusCode==="TOO_MANY_REQUESTS"}}function isRecordType(sn){return isPlainObject$4(sn)&&!isEmpty(sn)}const REQUEST_TIME_OUT=10*1e3;class Fetcher{constructor(ln){Tl(this,"defaultHeader");Tl(this,"BASE_URL");this.defaultHeader={"Content-Type":"application/json"},this.BASE_URL=ln||appConfig.API_ENDPOINT}async get(ln,cn){const dn=await this._request({path:ln,method:"GET",options:cn});return await this.successResponse(dn)}async post(ln,cn,dn){const pn=await this._request({path:ln,method:"POST",body:cn,options:dn});return await this.successResponse(pn)}async patch(ln,cn,dn){const pn=await this._request({path:ln,method:"PATCH",body:cn,options:dn});return await this.successResponse(pn)}async put(ln,cn,dn){const pn=await this._request({path:ln,method:"PUT",body:cn,options:dn});return await this.successResponse(pn)}async delete(ln,cn,dn){const pn=await this._request({path:ln,method:"DELETE",body:cn,options:dn});return await this.successResponse(pn)}abortSignal(ln){var pn;const cn=new AbortController,dn=setTimeout(()=>{cn.abort(),clearTimeout(dn)},ln??REQUEST_TIME_OUT);return(pn=dn==null?void 0:dn.unref)==null||pn.call(dn),cn.signal}isErrorResponse(ln){return isRecordType(ln)&&has$1(ln,"data")&&has$1(ln,"statusCode")&&has$1(ln,"message")&&ln.statusCode!==ResponseStatus.OK}log({level:ln,status:cn,url:dn,data:pn,handled:vn}){const Sn=`fetch: [${vn?"HANDLED":"UNHANDLED"} ${cn}] *url: ${dn} *data: ${pn??""} *release: ${window.__RELEASE__}`;console[ln](Sn)}isInfoLevelError(ln){return ln===ResponseStatus.NOT_FOUND||ln===ResponseStatus.UNAUTHORIZED||ln===ResponseStatus.CONFLICT||ln===ResponseStatus.DUPLICATE||ln===ResponseStatus.FORBIDDEN||ln===ResponseStatus.PAYLOAD_TOO_LARGE||ln===ResponseStatus.TOO_MANY_REQUESTS}async successResponse(ln){if(!ln.ok){const dn=await ln.text();try{const pn=JSON.parse(dn);if(this.log({level:"error",status:`${ln.status} error`,url:ln.url,data:dn,handled:!1}),this.isErrorResponse(pn))throw new ApiError({statusCode:pn.statusCode,message:pn.message,data:null})}catch(pn){this.log({level:"info",status:`${ln.status} info`,url:ln.url,data:`${dn}, ${JSON.stringify(pn)}`,handled:!1})}throw new ApiError({statusCode:ln.status.toString(),message:ln.statusText,data:null})}const cn=await ln.json();if(this.isErrorResponse(cn)){const dn=this.isInfoLevelError(cn.statusCode)?"info":"error";throw this.log({level:dn,status:`${ln.status} error ${cn.statusCode}: ${cn.message}`,url:ln.url,handled:!0}),new ApiError({...cn,statusCode:cn.statusCode})}return cn}async _request({path:ln,method:cn,body:dn,options:pn}){const vn=this.abortSignal(pn==null?void 0:pn.timeout),kn={signal:vn,headers:this.defaultHeader},Sn=Object.assign(kn,{body:dn instanceof FormData?dn:JSON.stringify(dn)},omit$1(pn,"baseURL"),{credentials:(pn==null?void 0:pn.credentials)||"include"}),wn=(pn==null?void 0:pn.baseURL)??this.BASE_URL;return fetch(`${wn}${ln}`,{method:cn,...Sn}).catch(Pn=>{throw Pn instanceof DOMException&&Pn.name==="AbortError"&&vn.aborted&&this.log({level:"info",status:`${Pn.name} error ${Pn.message}`,url:ln,handled:!0}),Pn})}}const fetcher=new Fetcher;var ResponseStatus=(sn=>(sn.OK="OK",sn.SERVER_ERROR="SERVER_ERROR",sn.DUPLICATE="DUPLICATE",sn.NOT_FOUND="NOT_FOUND",sn.BAD_REQUEST="BAD_REQUEST",sn.BAD_PARAMETER="BAD_PARAMETER",sn.CONFLICT="CONFLICT",sn.UNAUTHORIZED="UNAUTHORIZED",sn.FORBIDDEN="FORBIDDEN",sn.PAYLOAD_TOO_LARGE="PAYLOAD_TOO_LARGE",sn.TOO_MANY_REQUESTS="TOO_MANY_REQUESTS",sn))(ResponseStatus||{});const API_ENDPOINT={V1_HEALTH:"/v1/health",V2_USER_USERID_INTRODUCE:sn=>`/v2/user/${sn}/introduce`,V2_USER_ID:"/v2/user/id",V2_USER_PROFILE:"/v2/user/profile",V2_USER_USERID_PROFILE:sn=>`/v2/user/${sn}/profile`,V2_USER_USERID_IS_FOLLOWING:sn=>`/v2/user/${sn}/is-following`,V2_USER_ID_SLUG:sn=>`/v2/user/${sn}/slug`,V2_USER_ID_QUESTION_META:sn=>`/v2/user/${sn}/question-meta`,V2_INSTRUCTOR_ID_PROFILE:sn=>`/v2/instructor/${sn}/profile`,V1_SESSION:"/v1/session",V2_SESSION:"/v2/session",V1_UNIT_BY_VOD:"/v1/unit/by-vod",V1_UNIT:"/v1/unit",V1_UNIT_ATTACHMENT:"/v1/unit/attachment",V1_UNIT_COMPLETE:"/v1/unit/complete",V1_UNIT_FIRST:"/v1/unit/first",V1_UNIT_CURRENT:"/v1/unit/current",V1_UNIT_PREVIEW:"/v1/unit/preview",V1_UNIT_ID:sn=>`/v1/unit/${sn}`,V2_UNIT:"/v2/unit",V2_UNIT_COMPLETE:"/v2/unit/complete",V2_UNIT_ATTACHMENT:"/v2/unit/attachment",V2_UNIT_ID:sn=>`/v2/unit/${sn}`,V1_COURSE_ID_REVIEW_STATS:sn=>`/v1/course/${sn}/review-stats`,V1_COURSE_ID_REVIEW:sn=>`/v1/course/${sn}/review`,V1_COURSE_REVIEW:"/v1/course/review",V1_COURSE:"/v1/course",V1_COURSE_ID_PAYMENT_INFO:sn=>`/v1/course/${sn}/payment-info`,V1_COURSE_BY_SLUG:"/v1/course/by-slug",V1_COURSE_MY_VOUCHER:"/v1/course/my-voucher",V2_COURSE_USER_USERID:sn=>`/v2/course/user/${sn}`,V2_COURSE_ID_SKILL_TAG:sn=>`/v2/course/${sn}/skill-tag`,V2_COURSE_MY_VOUCHER:"/v2/course/my-voucher",V2_COURSE_BY_SLUG:"/v2/course/by-slug",V2_COURSE_ID_PAYMENT_INFO:sn=>`/v2/course/${sn}/payment-info`,V2_COURSE_REVIEW:"/v2/course/review",V2_COURSE_COURSEID_LIKE:sn=>`/v2/course/${sn}/like`,V1_AUDIT_LECTURE_UNIT:"/v1/audit/lecture/unit",V2_UNIT_COMPLETE_CURRENT_TIME:"/v2/unit/complete/current-time",V1_POST_ID_SLUG:sn=>`/v1/post/${sn}/slug`,V1_POST_BY_USER:"/v1/post/by-user",V1_POST_BY_ADMIN:"/v1/post/by-admin",V1_POST_QUESTION:"/v1/post/question",V1_POST_CHAT:"/v1/post/chat",V1_POST_STUDY:"/v1/post/study",V1_POST:"/v1/post",V1_POST_POPULAR_TAG:"/v1/post/popular-tag",V1_POST_ID:sn=>`/v1/post/${sn}`,V1_POST_STUDY_ID:sn=>`/v1/post/study/${sn}`,V1_POST_CHAT_ID:sn=>`/v1/post/chat/${sn}`,V1_POST_QUESTION_ID:sn=>`/v1/post/question/${sn}`,V1_POST_ID_IS_SPAM:sn=>`/v1/post/${sn}/is-spam`,V1_SEARCH_ADMIN_POST_ID_IS_SPAM:sn=>`/v1/search-admin/post/${sn}/is-spam`,V1_SEARCH_ADMIN_POST_WRITER_ID_IS_SPAM:sn=>`/v1/search-admin/post/writer/${sn}/is-spam`,V2_POST_USER_USERID:sn=>`/v2/post/user/${sn}`,V2_POST_ID_SIMILAR_POST:sn=>`/v2/post/${sn}/similar-post`,V2_POST_COURSE_REVIEW_USER_USERID:sn=>`/v2/post/course-review/user/${sn}`,V1_COURSE_FAQ:"/v1/course-faq",V2_COURSE_FAQ:"/v2/course-faq",V1_REACTION_POST_ID:sn=>`/v1/reaction/post/${sn}`,V1_REACTION_COMMENT_ID:sn=>`/v1/reaction/comment/${sn}`,V2_REACTION_REVIEW_ID:sn=>`/v2/reaction/review/${sn}`,V2_REACTION_POST_ID:sn=>`/v2/reaction/post/${sn}`,V2_REACTION_COMMENT_ID:sn=>`/v2/reaction/comment/${sn}`,V2_REACTION_RE_COMMENT_ID:sn=>`/v2/reaction/re-comment/${sn}`,V2_REACTION_BLOG_ID:sn=>`/v2/reaction/blog/${sn}`,V1_BOOKMARK:"/v1/bookmark",V2_BOOKMARK_QUESTION_ID:sn=>`/v2/bookmark/question/${sn}`,V1_FILE_HLS_ENCRYPTURL:"/v1/file/hls-encrypt-url",V1_FILE_HLS_ENCRYPTSTATUS:"/v1/file/hls-encrypt-status",V1_FILE_POST_IMAGE:"/v1/file/post-image",V2_FILE_POST_IMAGE:"/v2/file/post-image",V2_FILE_UNIT_VIDEO:"/v2/file/unit-video",V1_COMMENT_BY_ADMIN:"/v1/comment/by-admin",V1_COMMENT_ID_IS_SPAM:sn=>`/v1/comment/${sn}/is-spam`,V1_COMMENT:"/v1/comment",V1_COMMENT_ID:sn=>`/v1/comment/${sn}`,V1_RE_COMMENT:"/v1/re-comment",V1_RE_COMMENT_ID:sn=>`/v1/re-comment/${sn}`,V2_COMMENT_ID:sn=>`/v2/comment/${sn}`,V2_COMMENT_QUESTION_ID:sn=>`/v2/comment/question/${sn}`,V2_COMMENT_QUESTION:"/v2/comment/question",V2_COMMENT_CHAT:"/v2/comment/chat",V2_COMMENT_CHAT_ID:sn=>`/v2/comment/chat/${sn}`,V2_COMMENT_FEED_ID:sn=>`/v2/comment/feed/${sn}`,V2_RE_COMMENT:"/v2/re-comment",V2_RE_COMMENT_ID:sn=>`/v2/re-comment/${sn}`,V1_NOTE_ID:sn=>`/v1/note/${sn}`,V1_NOTE:"/v1/note",V1_NOTE_BY_USER:"/v1/note/by-user",V1_NOTE_BY_USER_SEARCH:"/v1/note/by-user/search",V1_NOTE_BY_ADMIN:"/v1/note/by-admin",V2_NOTE_ID:sn=>`/v2/note/${sn}`,V2_NOTE:"/v2/note",V2_NOTE_ME:"/v2/note/me",V1_CART:"/v1/cart",V2_CART:"/v2/cart",V1_SEARCH_COURSE_SEQUENCE:"/v1/search/course/sequence",V1_SEARCH_COURSE_ID:sn=>`/v1/search/course/${sn}`,V1_SEARCH_USER_ID:sn=>`/v1/search/user/${sn}`,V1_SEARCH_USERS:"/v1/search/users",V1_SEARCH_QUESTION_ID:sn=>`/v1/search/question/${sn}`,V1_SEARCH_CHAT_ID:sn=>`/v1/search/chat/${sn}`,V1_SEARCH_STUDY_ID:sn=>`/v1/search/study/${sn}`,V1_SEARCH_PROJECT_ID:sn=>`/v1/search/project/${sn}`,V1_SEARCH_ROADMAP_ID:sn=>`/v1/search/roadmap/${sn}`,V1_SEARCH_COMMENT_ID:sn=>`/v1/search/comment/${sn}`,V1_QUESTION_COMMUNITY:"/v1/question/community",V1_QUESTION_COURSE:"/v1/question/course",V1_QUESTION_LECTURE:"/v1/question/lecture",V1_QUESTION_STATUS:"/v1/question/status",V1_QUESTION_ID:sn=>`/v1/question/${sn}`,V2_QUESTION_ID_SPAM:sn=>`/v2/question/${sn}/spam`,V2_QUESTION_UNCOMMENTED:"/v2/question/uncommented",V2_QUESTION_ID:sn=>`/v2/question/${sn}`,V2_QUESTION:"/v2/question",V2_QUESTION_ID_STATUS:sn=>`/v2/question/${sn}/status`,V1_COURSE_SKILL_SEARCH:"/v1/course-skill/search",V1_COURSE_SKILL:"/v1/course-skill",V2_COURSE_SKILL_SEARCH:"/v2/course-skill/search",V2_MENTOR_ID:sn=>`/v2/mentor/${sn}`,V2_MENTOR_ID_MENTORING_BYDATE:sn=>`/v2/mentor/${sn}/mentoring-by-date`,V1_STUDY_COMMUNITY:"/v1/study/community",V1_STUDY_COURSE:"/v1/study/course",V1_STUDY_LECTURE:"/v1/study/lecture",V1_STUDY_STATUS:"/v1/study/status",V1_STUDY_ID:sn=>`/v1/study/${sn}`,V1_CHAT_COMMUNITY:"/v1/chat/community",V1_CHAT_COURSE:"/v1/chat/course",V1_CHAT_LECTURE:"/v1/chat/lecture",V1_CHAT_ID:sn=>`/v1/chat/${sn}`,V2_CHAT_ID:sn=>`/v2/chat/${sn}`,V2_CHAT:"/v2/chat",V2_VOTE_QUESTION_ID:sn=>`/v2/vote/question/${sn}`,V2_VOTE_COMMENT_ID:sn=>`/v2/vote/comment/${sn}`,V1_BLOG_ID_IS_SPAM:sn=>`/v1/blog/${sn}/is-spam`,V1_BLOG_BY_ADMIN:"/v1/blog/by-admin",V1_BLOG_BY_ADMIN_ID:sn=>`/v1/blog/by-admin/${sn}`,V2_BLOG_USER_USERID:sn=>`/v2/blog/user/${sn}`,V2_BLOG_USER_USERID_CATEGORY:sn=>`/v2/blog/user/${sn}/category`,V2_BLOG_USER_USERID_TAG:sn=>`/v2/blog/user/${sn}/tag`,V2_BLOG:"/v2/blog",V2_BLOG_ID:sn=>`/v2/blog/${sn}`,V1_MENTORING_BY_ADMIN_IDS:"/v1/mentoring/by-admin/ids",V2_MENTORING_RESERVED:"/v2/mentoring/reserved",V1_ROADMAP:"/v1/roadmap",V1_COMMUNITY_STATS_DAILY:"/v1/community/stats/daily",V1_COMMUNITY_RANK_USER:"/v1/community/rank/user",V1_COMMUNITY_RANK_POST:"/v1/community/rank/post",V1_NOTIFICATION_COUPON_BEFOREEXPIRE:"/v1/notification/coupon-before-expire",V1_NOTIFICATION_COURSE_REVIEWCOMMENT:"/v1/notification/course-review-comment",V1_NOTIFICATION_MENTORING_APPLYFORMENTEE:"/v1/notification/mentoring-apply-for-mentee",V1_NOTIFICATION_MENTORING_APPLYFORMENTOR:"/v1/notification/mentoring-apply-for-mentor",V1_NOTIFICATION_MENTORING_AUTOCANCEL:"/v1/notification/mentoring-auto-cancel",V1_NOTIFICATION_MENTORING_APPROVEDFORMENTEE:"/v1/notification/mentoring-approved-for-mentee",V1_NOTIFICATION_MENTORING_MESSAGEFORMENTEE:"/v1/notification/mentoring-message-for-mentee",V1_NOTIFICATION_MENTORING_CANCELEDBYMENTORFORMENTEE:"/v1/notification/mentoring-canceled-by-mentor-for-mentee",V1_NOTIFICATION_MENTORING_REMINDER:"/v1/notification/mentoring-reminder",V1_NOTIFICATION_MENTORING_AUTOCANCELFORMENTOR:"/v1/notification/mentoring-auto-cancel-for-mentor",V1_NOTIFICATION_MENTORING_REVIEW:"/v1/notification/mentoring-review",V1_NOTIFICATION_MENTORING_CHANGESCHEDULEFORMENTEE:"/v1/notification/mentoring-change-schedule-for-mentee",V1_NOTIFICATION_MENTORING_CANCELFORMENTOR:"/v1/notification/mentoring-cancel-for-mentor",V1_NOTIFICATION_MENTORING_NOSHOWREMINDERFORMENTEE:"/v1/notification/mentoring-no-show-reminder-for-mentee",V1_NOTIFICATION_MENTORING_NOSHOWREMINDERFORMENTOR:"/v1/notification/mentoring-no-show-reminder-for-mentor",V2_BLOG_COMMENT:"/v2/blog-comment",V2_BLOG_COMMENT_ID:sn=>`/v2/blog-comment/${sn}`,V2_BLOG_RECOMMENT:"/v2/blog-re-comment",V2_BLOG_RECOMMENT_ID:sn=>`/v2/blog-re-comment/${sn}`,V2_OFFLINE_COURSE_COURSEID_PRE_OPENNOTIFICATION:sn=>`/v2/offline-course/${sn}/pre-open-notification`,V1_OFFLINE_COURSE_SCHEDULE_PRE_OPENNOTIFICATION:"/v1/offline-course/schedule/pre-open-notification",V1_OFFLINE_COURSE_SCHEDULE_CANCEL_SURVEYUNANSWEREDVOUCHERS:"/v1/offline-course/schedule/cancel-survey-unanswered-vouchers",V1_OFFLINE_COURSE_SCHEDULE_SURVEY_ANSWERREQUESTNOTIFICATION:"/v1/offline-course/schedule/survey-answer-request-notification",V2_PROJECT:"/v2/project",V2_PROJECT_STATUS:"/v2/project/status",V2_PROJECT_ID:sn=>`/v2/project/${sn}`,V2_COURSE_NEWS_PINNED_COUNT:"/v2/course-news/pinned-count",V2_COURSE_NEWS_ID_PIN:sn=>`/v2/course-news/${sn}/pin`,V2_COURSE_NEWS_LATEST:"/v2/course-news/latest",V2_COURSE_NEWS:"/v2/course-news",V2_COURSE_NEWS_ID:sn=>`/v2/course-news/${sn}`,V2_COURSE_NEWS_DRAFT_ID:sn=>`/v2/course-news/draft/${sn}`,V2_COURSE_NEWS_DRAFT:"/v2/course-news/draft",V2_REVIEW_ID_STATUS:sn=>`/v2/review/${sn}/status`,V2_REVIEW_ID_COMMENT:sn=>`/v2/review/${sn}/comment`,V2_REVIEW_COMMENT_ID:sn=>`/v2/review/comment/${sn}`,V2_REVIEW_ID:sn=>`/v2/review/${sn}`,V2_REVIEW:"/v2/review",V2_REVIEW_COURSE_ID:sn=>`/v2/review/course/${sn}`,V2_REVIEW_ID_COURSE:sn=>`/v2/review/${sn}/course`,V2_FOLLOW_USER_ID:sn=>`/v2/follow/user/${sn}`,V2_CHAT_GPT_POST_FOR_SPAM:"/v2/chat-gpt/post/for-spam",V1_VOD_SUBTITLE_BY_VOD:"/v1/vod-subtitle/by-vod",V1_VOD_SUBTITLE_STATUS:"/v1/vod-subtitle/status",V2_VOD_SUBTITLESUGGESTION:"/v2/vod-subtitle-suggestion",V1_VOD_SUBTITLESUGGESTION_FORCE_UPDATEBYADMIN:"/v1/vod-subtitle-suggestion/force-update-by-admin",V1_VOD_SUBTITLESUGGESTION_BY_ADMIN:"/v1/vod-subtitle-suggestion/by-admin",V1_VOD_SUBTITLESUGGESTION_ERROR:"/v1/vod-subtitle-suggestion/error",V1_VOD_SUBTITLESUGGESTION_INVALID:"/v1/vod-subtitle-suggestion/invalid",V1_VOD_SUBTITLESUGGESTION_FORCE_UPDATE:"/v1/vod-subtitle-suggestion/force-update",V1_VOD_SUBTITLESUGGESTION_COMPLETE:"/v1/vod-subtitle-suggestion/complete",V1_VOD_SUBTITLESUGGESTION_REJECT:"/v1/vod-subtitle-suggestion/reject"};function useV2UnitCompleteUpdateMutation({url:sn,options:ln,requestOptions:cn}){var pn;const dn=useMutation(vn=>fetcher.put(sn,vn,cn),ln);return{...dn,data:(pn=dn.data)==null?void 0:pn.data}}function useV2UnitCompleteCurrentTimeUpdateMutation({url:sn,options:ln,requestOptions:cn}){var pn;const dn=useMutation(vn=>fetcher.patch(sn,vn,cn),ln);return{...dn,data:(pn=dn.data)==null?void 0:pn.data}}function useV2ReactionPostIdUpdateMutation({url:sn,options:ln,requestOptions:cn}){var pn;const dn=useMutation(vn=>fetcher.put(sn,vn,cn),ln);return{...dn,data:(pn=dn.data)==null?void 0:pn.data}}function useV2ReactionCommentIdUpdateMutation({url:sn,options:ln,requestOptions:cn}){var pn;const dn=useMutation(vn=>fetcher.put(sn,vn,cn),ln);return{...dn,data:(pn=dn.data)==null?void 0:pn.data}}function useV2ReactionReCommentIdUpdateMutation({url:sn,options:ln,requestOptions:cn}){var pn;const dn=useMutation(vn=>fetcher.put(sn,vn,cn),ln);return{...dn,data:(pn=dn.data)==null?void 0:pn.data}}function useV2BookmarkQuestionIdUpdateMutation({url:sn,options:ln,requestOptions:cn}){var pn;const dn=useMutation(vn=>fetcher.put(sn,vn,cn),ln);return{...dn,data:(pn=dn.data)==null?void 0:pn.data}}function useV2CommentQuestionIdCreateMutation({url:sn,options:ln,requestOptions:cn}){var pn;const dn=useMutation(vn=>fetcher.post(sn,vn,cn),ln);return{...dn,data:(pn=dn.data)==null?void 0:pn.data}}function useV2CommentQuestionUpdateMutation({url:sn,options:ln,requestOptions:cn}){var pn;const dn=useMutation(vn=>fetcher.put(sn,vn,cn),ln);return{...dn,data:(pn=dn.data)==null?void 0:pn.data}}function useV2CommentQuestionDeleteMutation({url:sn,options:ln,requestOptions:cn}){var pn;const dn=useMutation(vn=>fetcher.delete(sn,vn,cn),ln);return{...dn,data:(pn=dn.data)==null?void 0:pn.data}}function useV2CommentChatUpdateMutation({url:sn,options:ln,requestOptions:cn}){var pn;const dn=useMutation(vn=>fetcher.put(sn,vn,cn),ln);return{...dn,data:(pn=dn.data)==null?void 0:pn.data}}function useV2CommentChatDeleteMutation({url:sn,options:ln,requestOptions:cn}){var pn;const dn=useMutation(vn=>fetcher.delete(sn,vn,cn),ln);return{...dn,data:(pn=dn.data)==null?void 0:pn.data}}function useV2CommentChatIdCreateMutation({url:sn,options:ln,requestOptions:cn}){var pn;const dn=useMutation(vn=>fetcher.post(sn,vn,cn),ln);return{...dn,data:(pn=dn.data)==null?void 0:pn.data}}function useV2ReCommentCreateMutation({url:sn,options:ln,requestOptions:cn}){var pn;const dn=useMutation(vn=>fetcher.post(sn,vn,cn),ln);return{...dn,data:(pn=dn.data)==null?void 0:pn.data}}function useV2ReCommentIdUpdateMutation({url:sn,options:ln,requestOptions:cn}){var pn;const dn=useMutation(vn=>fetcher.put(sn,vn,cn),ln);return{...dn,data:(pn=dn.data)==null?void 0:pn.data}}function useV2ReCommentIdDeleteMutation({url:sn,options:ln,requestOptions:cn}){var pn;const dn=useMutation(vn=>fetcher.delete(sn,vn,cn),ln);return{...dn,data:(pn=dn.data)==null?void 0:pn.data}}function useV2NoteIdUpdateMutation({url:sn,options:ln,requestOptions:cn}){var pn;const dn=useMutation(vn=>fetcher.patch(sn,vn,cn),ln);return{...dn,data:(pn=dn.data)==null?void 0:pn.data}}function useV2NoteIdDeleteMutation({url:sn,options:ln,requestOptions:cn}){var pn;const dn=useMutation(vn=>fetcher.delete(sn,vn,cn),ln);return{...dn,data:(pn=dn.data)==null?void 0:pn.data}}function useV2NoteCreateMutation({url:sn,options:ln,requestOptions:cn}){var pn;const dn=useMutation(vn=>fetcher.post(sn,vn,cn),ln);return{...dn,data:(pn=dn.data)==null?void 0:pn.data}}function useV1CartCreateMutation({url:sn,options:ln,requestOptions:cn}){var pn;const dn=useMutation(vn=>fetcher.post(sn,vn,cn),ln);return{...dn,data:(pn=dn.data)==null?void 0:pn.data}}function useV2QuestionIdUpdateMutation({url:sn,options:ln,requestOptions:cn}){var pn;const dn=useMutation(vn=>fetcher.put(sn,vn,cn),ln);return{...dn,data:(pn=dn.data)==null?void 0:pn.data}}function useV2QuestionCreateMutation({url:sn,options:ln,requestOptions:cn}){var pn;const dn=useMutation(vn=>fetcher.post(sn,vn,cn),ln);return{...dn,data:(pn=dn.data)==null?void 0:pn.data}}function useV2ChatIdUpdateMutation({url:sn,options:ln,requestOptions:cn}){var pn;const dn=useMutation(vn=>fetcher.put(sn,vn,cn),ln);return{...dn,data:(pn=dn.data)==null?void 0:pn.data}}function useV2ChatCreateMutation({url:sn,options:ln,requestOptions:cn}){var pn;const dn=useMutation(vn=>fetcher.post(sn,vn,cn),ln);return{...dn,data:(pn=dn.data)==null?void 0:pn.data}}function useV2VoteQuestionIdCreateMutation({url:sn,options:ln,requestOptions:cn}){var pn;const dn=useMutation(vn=>fetcher.post(sn,vn,cn),ln);return{...dn,data:(pn=dn.data)==null?void 0:pn.data}}function useV2VoteCommentIdCreateMutation({url:sn,options:ln,requestOptions:cn}){var pn;const dn=useMutation(vn=>fetcher.post(sn,vn,cn),ln);return{...dn,data:(pn=dn.data)==null?void 0:pn.data}}function useV2ReviewCreateMutation({url:sn,options:ln,requestOptions:cn}){var pn;const dn=useMutation(vn=>fetcher.post(sn,vn,cn),ln);return{...dn,data:(pn=dn.data)==null?void 0:pn.data}}function useV2VodSubtitleSuggestionCreateMutation({url:sn,options:ln,requestOptions:cn}){var pn;const dn=useMutation(vn=>fetcher.post(sn,vn,cn),ln);return{...dn,data:(pn=dn.data)==null?void 0:pn.data}}const fetchV2Session=async(sn,ln)=>fetcher.get(sn,ln);function useV2SessionQuery({queryKey:sn,url:ln,options:cn,requestOptions:dn}){var vn;const pn=useQuery(sn,()=>fetchV2Session(ln,dn),cn);return{...pn,data:(vn=pn.data)==null?void 0:vn.data}}const fetchV2Unit=async(sn,ln)=>fetcher.get(sn,ln);function useV2UnitQuery({queryKey:sn,url:ln,options:cn,requestOptions:dn}){var vn;const pn=useQuery(sn,()=>fetchV2Unit(ln,dn),cn);return{...pn,data:(vn=pn.data)==null?void 0:vn.data}}const fetchV2UnitAttachment=async(sn,ln)=>fetcher.get(sn,ln);function useV2UnitAttachmentQuery({queryKey:sn,url:ln,options:cn,requestOptions:dn}){var vn;const pn=useQuery(sn,()=>fetchV2UnitAttachment(ln,dn),cn);return{...pn,data:(vn=pn.data)==null?void 0:vn.data}}const fetchV2UnitId=async(sn,ln)=>fetcher.get(sn,ln);function useV2UnitIdQuery({queryKey:sn,url:ln,options:cn,requestOptions:dn}){var vn;const pn=useQuery(sn,()=>fetchV2UnitId(ln,dn),cn);return{...pn,data:(vn=pn.data)==null?void 0:vn.data}}const fetchV2CourseIdSkillTag=async(sn,ln)=>fetcher.get(sn,ln);function useV2CourseIdSkillTagQuery({queryKey:sn,url:ln,options:cn,requestOptions:dn}){var vn;const pn=useQuery(sn,()=>fetchV2CourseIdSkillTag(ln,dn),cn);return{...pn,data:(vn=pn.data)==null?void 0:vn.data}}const fetchV2CourseMyVoucher=async(sn,ln)=>fetcher.get(sn,ln);function useV2CourseMyVoucherQuery({queryKey:sn,url:ln,options:cn,requestOptions:dn}){var vn;const pn=useQuery(sn,()=>fetchV2CourseMyVoucher(ln,dn),cn);return{...pn,data:(vn=pn.data)==null?void 0:vn.data}}const fetchV2CourseBySlug=async(sn,ln)=>fetcher.get(sn,ln);function useV2CourseBySlugQuery({queryKey:sn,url:ln,options:cn,requestOptions:dn}){var vn;const pn=useQuery(sn,()=>fetchV2CourseBySlug(ln,dn),cn);return{...pn,data:(vn=pn.data)==null?void 0:vn.data}}const fetchV2CourseIdPaymentInfo=async(sn,ln)=>fetcher.get(sn,ln);function useV2CourseIdPaymentInfoQuery({queryKey:sn,url:ln,options:cn,requestOptions:dn}){var vn;const pn=useQuery(sn,()=>fetchV2CourseIdPaymentInfo(ln,dn),cn);return{...pn,data:(vn=pn.data)==null?void 0:vn.data}}const fetchV2CourseFaq=async(sn,ln)=>fetcher.get(sn,ln);function useV2CourseFaqQuery({queryKey:sn,url:ln,options:cn,requestOptions:dn}){var vn;const pn=useQuery(sn,()=>fetchV2CourseFaq(ln,dn),cn);return{...pn,data:(vn=pn.data)==null?void 0:vn.data}}const fetchV2CommentId=async(sn,ln)=>fetcher.get(sn,ln),fetchV2Note=async(sn,ln)=>fetcher.get(sn,ln);function useV2NoteQuery({queryKey:sn,url:ln,options:cn,requestOptions:dn}){var vn;const pn=useQuery(sn,()=>fetchV2Note(ln,dn),cn);return{...pn,data:(vn=pn.data)==null?void 0:vn.data}}const fetchV2QuestionId=async(sn,ln)=>fetcher.get(sn,ln);function useV2QuestionIdQuery({queryKey:sn,url:ln,options:cn,requestOptions:dn}){var vn;const pn=useQuery(sn,()=>fetchV2QuestionId(ln,dn),cn);return{...pn,data:(vn=pn.data)==null?void 0:vn.data}}const fetchV2ChatId=async(sn,ln)=>fetcher.get(sn,ln);function useV2ChatIdQuery({queryKey:sn,url:ln,options:cn,requestOptions:dn}){var vn;const pn=useQuery(sn,()=>fetchV2ChatId(ln,dn),cn);return{...pn,data:(vn=pn.data)==null?void 0:vn.data}}function useCourse(sn){const ln=useNavigate();return useV2CourseBySlugQuery({queryKey:courseQueryKey(sn),url:`${API_ENDPOINT.V2_COURSE_BY_SLUG}?${queryString$1.stringify({slug:sn})}`,options:{enabled:!!sn,onError:cn=>{if(cn instanceof ApiError&&cn.isNotFound)return ln("/not-found"),!1},useErrorBoundary:cn=>cn instanceof ApiError?!cn.isForbidden:!0}})}const courseQueryKey=sn=>["course",sn];function useSession(sn){return useV2SessionQuery({queryKey:["session"],url:API_ENDPOINT.V2_SESSION,options:{useErrorBoundary:ln=>ln instanceof ApiError?!ln.isUnauthorized:!0,...sn}})}function useMyVoucher(sn){const ln=useNavigate();return useV2CourseMyVoucherQuery({queryKey:myVoucherQueryKey,url:`${API_ENDPOINT.V2_COURSE_MY_VOUCHER}?${queryString$1.stringify({slug:sn})}`,options:{enabled:!!sn,useErrorBoundary:cn=>cn instanceof ApiError?cn.statusCode!==ResponseStatus.NOT_FOUND:!0,onError:cn=>{cn instanceof ApiError&&cn.statusCode===ResponseStatus.NOT_FOUND&&ln("/not-found")}}})}const myVoucherQueryKey=["myVoucher"];function ownKeys$3(sn,ln){var cn=Object.keys(sn);if(Object.getOwnPropertySymbols){var dn=Object.getOwnPropertySymbols(sn);ln&&(dn=dn.filter(function(pn){return Object.getOwnPropertyDescriptor(sn,pn).enumerable})),cn.push.apply(cn,dn)}return cn}function _objectSpread(sn){for(var ln=1;ln<arguments.length;ln++){var cn=arguments[ln]!=null?arguments[ln]:{};ln%2?ownKeys$3(Object(cn),!0).forEach(function(dn){_defineProperty$1(sn,dn,cn[dn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(sn,Object.getOwnPropertyDescriptors(cn)):ownKeys$3(Object(cn)).forEach(function(dn){Object.defineProperty(sn,dn,Object.getOwnPropertyDescriptor(cn,dn))})}return sn}function _defineProperty$1(sn,ln,cn){return ln in sn?Object.defineProperty(sn,ln,{value:cn,enumerable:!0,configurable:!0,writable:!0}):sn[ln]=cn,sn}var config={debug:!1,containerId:null,dataLayerName:"dataLayer",dataLayer:void 0,preview:void 0,auth:void 0,execution:"async"},initializedDataLayerName;function googleTagManager(){var sn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ln="https://www.googletagmanager.com/gtm.js";return{name:"google-tag-manager",config:_objectSpread(_objectSpread({},config),sn),initialize:function(dn){var pn=dn.config,vn=pn.containerId,kn=pn.dataLayerName,Sn=pn.customScriptSrc,wn=pn.preview,Pn=pn.auth,Nn=pn.execution;if(!vn)throw new Error("No google tag manager containerId defined");if(wn&&!Pn)throw new Error("When enabling preview mode, both preview and auth parameters must be defined");var Ln=Sn||ln;scriptLoaded(vn)||(function(Fn,zn,Dn,Kn,qn){Fn[Kn]=Fn[Kn]||[],Fn[Kn].push({"gtm.start":new Date().getTime(),event:"gtm.js"});var Zn=zn.getElementsByTagName(Dn)[0],Yn=zn.createElement(Dn),Jn=Kn!="dataLayer"?"&l="+Kn:"",rs=wn?"&gtm_preview="+wn+"&gtm_auth="+Pn+"&gtm_cookies_win=x":"";Nn&&(Yn[Nn]=!0),Yn.src="".concat(Ln,"?id=")+qn+Jn+rs,Zn.parentNode.insertBefore(Yn,Zn)}(window,document,"script",kn,vn),initializedDataLayerName=kn,pn.dataLayer=window[kn])},page:function(dn){var pn=dn.payload;dn.options,dn.instance;var vn=dn.config;typeof vn.dataLayer<"u"&&vn.dataLayer.push(pn.properties)},track:function(dn){var pn=dn.payload;dn.options;var vn=dn.config;if(typeof vn.dataLayer<"u"){var kn=pn.anonymousId,Sn=pn.userId,wn=pn.properties,Pn=wn;Sn&&(Pn.userId=Sn),kn&&(Pn.anonymousId=kn),wn.category||(Pn.category="All"),vn.debug&&console.log("gtag push",_objectSpread({event:pn.event},Pn)),vn.dataLayer.push(_objectSpread({event:pn.event},Pn))}},loaded:function(){var dn=!!initializedDataLayerName&&!!(window[initializedDataLayerName]&&Array.prototype.push!==window[initializedDataLayerName].push);return scriptLoaded(sn.containerId,sn.customScriptSrc||ln)&&dn}}}var regexCache={};function scriptLoaded(sn,ln){var cn=regexCache[sn];if(!cn){var dn=ln.replace(/^https?:\/\//,"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&");cn=new RegExp(dn+".*[?&]id="+sn),regexCache[sn]=cn}var pn=document.querySelectorAll("script[src]");return!!Object.keys(pn).filter(function(vn){return(pn[vn].src||"").match(cn)}).length}var index=googleTagManager;function i$5(sn,ln,cn,dn,pn){for(ln=ln.split?ln.split("."):ln,dn=0;dn<ln.length;dn++)sn=sn?sn[ln[dn]]:pn;return sn===pn?cn:sn}var e="undefined",o$3="object",g$2="any",m$2="*",j$2="__",F$3=typeof process<"u"?process:{};F$3.env&&F$3.env.NODE_ENV;var $$W=typeof window<"u";F$3.versions!=null&&F$3.versions.node!=null;typeof Deno<"u"&&Deno.core;$$W&&window.name==="nodejs"||typeof navigator<"u"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom"));function M$2(sn,ln){return ln.charAt(0)[sn]()+ln.slice(1)}var U$2=M$2.bind(null,"toUpperCase"),H$2=M$2.bind(null,"toLowerCase");function J$2(sn){return Y$2(sn)?U$2("null"):typeof sn=="object"?yn(sn):Object.prototype.toString.call(sn).slice(8,-1)}function R$2(sn,ln){ln===void 0&&(ln=!0);var cn=J$2(sn);return ln?H$2(cn):cn}function V$1(sn,ln){return typeof ln===sn}var W$2=V$1.bind(null,"function"),q$2=V$1.bind(null,"string"),I$3=V$1.bind(null,"undefined"),Q$1=V$1.bind(null,"boolean");V$1.bind(null,"symbol");function Y$2(sn){return sn===null}function nn(sn){return R$2(sn)==="number"&&!isNaN(sn)}function rn(sn){return R$2(sn)==="array"}function on(sn){if(!un(sn))return!1;for(var ln=sn;Object.getPrototypeOf(ln)!==null;)ln=Object.getPrototypeOf(ln);return Object.getPrototypeOf(sn)===ln}function un(sn){return sn&&(typeof sn=="object"||sn!==null)}function yn(sn){return W$2(sn.constructor)?sn.constructor.name:null}function hn(sn){return sn instanceof Error||q$2(sn.message)&&sn.constructor&&nn(sn.constructor.stackTraceLimit)}function On(sn,ln){if(typeof ln!="object"||Y$2(ln))return!1;if(ln instanceof sn)return!0;var cn=R$2(new sn(""));if(hn(ln))for(;ln;){if(R$2(ln)===cn)return!0;ln=Object.getPrototypeOf(ln)}return!1}On.bind(null,TypeError);On.bind(null,SyntaxError);function $n(sn,ln){var cn=sn instanceof Element||sn instanceof HTMLDocument;return cn&&ln?Tn(sn,ln):cn}function Tn(sn,ln){return ln===void 0&&(ln=""),sn&&sn.nodeName===ln.toUpperCase()}function _n(sn){var ln=[].slice.call(arguments,1);return function(){return sn.apply(void 0,[].slice.call(arguments).concat(ln))}}_n($n,"form");_n($n,"button");_n($n,"input");_n($n,"select");function n$2(sn){try{return decodeURIComponent(sn.replace(/\+/g," "))}catch{return null}}function o$2(){if($$W){var sn=navigator,ln=sn.languages;return sn.userLanguage||(ln&&ln.length?ln[0]:sn.language)}}function a$4(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{}}function s$1(sn){return function(ln){for(var cn,dn=Object.create(null),pn=/([^&=]+)=?([^&]*)/g;cn=pn.exec(ln);){var vn=n$2(cn[1]),kn=n$2(cn[2]);vn.substring(vn.length-2)==="[]"?(dn[vn=vn.substring(0,vn.length-2)]||(dn[vn]=[])).push(kn):dn[vn]=kn===""||kn}for(var Sn in dn){var wn=Sn.split("[");wn.length>1&&(m$1(dn,wn.map(function(Pn){return Pn.replace(/[?[\]\\ ]/g,"")}),dn[Sn]),delete dn[Sn])}return dn}(function(ln){if(ln){var cn=ln.match(/\?(.*)/);return cn&&cn[1]?cn[1].split("#")[0]:""}return $$W&&window.location.search.substring(1)}(sn))}function m$1(sn,ln,cn){for(var dn=ln.length-1,pn=0;pn<dn;++pn){var vn=ln[pn];if(vn==="__proto__"||vn==="constructor")break;vn in sn||(sn[vn]={}),sn=sn[vn]}sn[ln[dn]]=cn}function y$2(){for(var sn="",ln=0,cn=4294967295*Math.random()|0;ln++<36;){var dn="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx"[ln-1],pn=15&cn;sn+=dn=="-"||dn=="4"?dn:(dn=="x"?pn:3&pn|8).toString(16),cn=ln%8==0?4294967295*Math.random()|0:cn>>4}return sn}var l$1="global",o$1=j$2+"global"+j$2,n$1=typeof self===o$3&&self.self===self&&self||typeof global===o$3&&global.global===global&&global||void 0;function a$3(sn){return n$1[o$1][sn]}function f$1(sn,ln){return n$1[o$1][sn]=ln}function i$4(sn){delete n$1[o$1][sn]}function u$2(sn,ln,cn){var dn;try{if(b$3(sn)){var pn=window[sn];dn=pn[ln].bind(pn)}}catch{}return dn||cn}n$1[o$1]||(n$1[o$1]={});var c$2={};function b$3(sn){if(typeof c$2[sn]!==e)return c$2[sn];try{var ln=window[sn];ln.setItem(e,e),ln.removeItem(e)}catch{return c$2[sn]=!1}return c$2[sn]=!0}function v$1(){return v$1=Object.assign||function(sn){for(var ln=1;ln<arguments.length;ln++){var cn=arguments[ln];for(var dn in cn)Object.prototype.hasOwnProperty.call(cn,dn)&&(sn[dn]=cn[dn])}return sn},v$1.apply(this,arguments)}var y$1="function",b$2="undefined",I$2="@@redux/"+Math.random().toString(36),w$1=function(){return typeof Symbol===y$1&&Symbol.observable||"@@observable"}(),E$2=" != "+y$1;function P$1(sn,ln,cn){var dn;if(typeof ln===y$1&&typeof cn===b$2&&(cn=ln,ln=void 0),typeof cn!==b$2){if(typeof cn!==y$1)throw new Error("enhancer"+E$2);return cn(P$1)(sn,ln)}if(typeof sn!==y$1)throw new Error("reducer"+E$2);var pn=sn,vn=ln,kn=[],Sn=kn,wn=!1;function Pn(){Sn===kn&&(Sn=kn.slice())}function Nn(){return vn}function Ln(zn){if(typeof zn!==y$1)throw new Error("Listener"+E$2);var Dn=!0;return Pn(),Sn.push(zn),function(){if(Dn){Dn=!1,Pn();var Kn=Sn.indexOf(zn);Sn.splice(Kn,1)}}}function Fn(zn){if(!on(zn))throw new Error("Act != obj");if(typeof zn.type===b$2)throw new Error("ActType "+b$2);if(wn)throw new Error("Dispatch in reducer");try{wn=!0,vn=pn(vn,zn)}finally{wn=!1}for(var Dn=kn=Sn,Kn=0;Kn<Dn.length;Kn++)(0,Dn[Kn])();return zn}return Fn({type:"@@redux/INIT"}),(dn={dispatch:Fn,subscribe:Ln,getState:Nn,replaceReducer:function(zn){if(typeof zn!==y$1)throw new Error("next reducer"+E$2);pn=zn,Fn({type:"@@redux/INIT"})}})[w$1]=function(){var zn,Dn=Ln;return(zn={subscribe:function(Kn){if(typeof Kn!="object")throw new TypeError("Observer != obj");function qn(){Kn.next&&Kn.next(Nn())}return qn(),{unsubscribe:Dn(qn)}}})[w$1]=function(){return this},zn},dn}function S$1(sn,ln){var cn=ln&&ln.type;return"action "+(cn&&cn.toString()||"?")+"reducer "+sn+" returns "+b$2}function N$2(){var sn=[].slice.call(arguments);return sn.length===0?function(ln){return ln}:sn.length===1?sn[0]:sn.reduce(function(ln,cn){return function(){return ln(cn.apply(void 0,[].slice.call(arguments)))}})}function O$2(){var sn=arguments;return function(ln){return function(cn,dn,pn){var vn,kn=ln(cn,dn,pn),Sn=kn.dispatch,wn={getState:kn.getState,dispatch:function(Pn){return Sn(Pn)}};return vn=[].slice.call(sn).map(function(Pn){return Pn(wn)}),v$1({},kn,{dispatch:Sn=N$2.apply(void 0,vn)(kn.dispatch)})}}}var A$2=j$2+"anon_id",_$1=j$2+"user_id",x$2=j$2+"user_traits",j$1="userId",T$1="anonymousId",z$1=["bootstrap","params","campaign","initializeStart","initialize","initializeEnd","ready","resetStart","reset","resetEnd","pageStart","page","pageEnd","pageAborted","trackStart","track","trackEnd","trackAborted","identifyStart","identify","identifyEnd","identifyAborted","userIdChanged","registerPlugins","enablePlugin","disablePlugin","online","offline","setItemStart","setItem","setItemEnd","setItemAborted","removeItemStart","removeItem","removeItemEnd","removeItemAborted"],M$1=["name","EVENTS","config","loaded"],q$1=z$1.reduce(function(sn,ln){return sn[ln]=ln,sn},{registerPluginType:function(sn){return"registerPlugin:"+sn},pluginReadyType:function(sn){return"ready:"+sn}}),U$1=/^utm_/,V=/^an_prop_/,L$2=/^an_trait_/;function C$2(sn){var ln=sn.storage.setItem;return function(cn){return function(dn){return function(pn){if(pn.type===q$1.bootstrap){var vn=pn.params,kn=pn.user,Sn=pn.persistedUser,wn=pn.initialUser,Pn=Sn.userId===kn.userId;Sn.anonymousId!==kn.anonymousId&&ln(A$2,kn.anonymousId),Pn||ln(_$1,kn.userId),wn.traits&&ln(x$2,v$1({},Pn&&Sn.traits?Sn.traits:{},wn.traits));var Nn=Object.keys(pn.params);if(Nn.length){var Ln=vn.an_uid,Fn=vn.an_event,zn=Nn.reduce(function(Dn,Kn){if(Kn.match(U$1)||Kn.match(/^(d|g)clid/)){var qn=Kn.replace(U$1,"");Dn.campaign[qn==="campaign"?"name":qn]=vn[Kn]}return Kn.match(V)&&(Dn.props[Kn.replace(V,"")]=vn[Kn]),Kn.match(L$2)&&(Dn.traits[Kn.replace(L$2,"")]=vn[Kn]),Dn},{campaign:{},props:{},traits:{}});cn.dispatch(v$1({type:q$1.params,raw:vn},zn,Ln?{userId:Ln}:{})),Ln&&setTimeout(function(){return sn.identify(Ln,zn.traits)},0),Fn&&setTimeout(function(){return sn.track(Fn,zn.props)},0),Object.keys(zn.campaign).length&&cn.dispatch({type:q$1.campaign,campaign:zn.campaign})}}return dn(pn)}}}}function R$1(sn){return function(ln,cn){if(ln===void 0&&(ln={}),cn===void 0&&(cn={}),cn.type===q$1.setItemEnd){if(cn.key===A$2)return v$1({},ln,{anonymousId:cn.value});if(cn.key===_$1)return v$1({},ln,{userId:cn.value})}switch(cn.type){case q$1.identify:return Object.assign({},ln,{userId:cn.userId,traits:v$1({},ln.traits,cn.traits)});case q$1.reset:return[_$1,A$2,x$2].forEach(function(dn){sn.removeItem(dn)}),Object.assign({},ln,{userId:null,anonymousId:null,traits:{}});default:return ln}}}function $$V(sn){return{userId:sn.getItem(_$1),anonymousId:sn.getItem(A$2),traits:sn.getItem(x$2)}}var D$1=function(sn){return j$2+"TEMP"+j$2+sn};function B$2(sn){var ln=sn.storage,cn=ln.setItem,dn=ln.removeItem,pn=ln.getItem;return function(vn){return function(kn){return function(Sn){var wn=Sn.userId,Pn=Sn.traits,Nn=Sn.options;if(Sn.type===q$1.reset&&([_$1,x$2,A$2].forEach(function(zn){dn(zn)}),[j$1,T$1,"traits"].forEach(function(zn){i$4(D$1(zn))})),Sn.type===q$1.identify){pn(A$2)||cn(A$2,y$2());var Ln=pn(_$1),Fn=pn(x$2)||{};Ln&&Ln!==wn&&vn.dispatch({type:q$1.userIdChanged,old:{userId:Ln,traits:Fn},new:{userId:wn,traits:Pn},options:Nn}),wn&&cn(_$1,wn),Pn&&cn(x$2,v$1({},Fn,Pn))}return kn(Sn)}}}}var X={};function J$1(sn,ln){X[sn]&&W$2(X[sn])&&(X[sn](ln),delete X[sn])}function W$1(sn,ln,cn){return new Promise(function(dn,pn){return ln()?dn(sn):cn<1?pn(v$1({},sn,{queue:!0})):new Promise(function(vn){return setTimeout(vn,10)}).then(function(vn){return W$1(sn,ln,cn-10).then(dn,pn)})})}function H$1(sn,ln,cn){var dn=ln(),pn=sn.getState(),vn=pn.plugins,kn=pn.queue,Sn=pn.user;if(!pn.context.offline&&kn&&kn.actions&&kn.actions.length){var wn=kn.actions.reduce(function(Nn,Ln,Fn){return vn[Ln.plugin].loaded?(Nn.process.push(Ln),Nn.processIndex.push(Fn)):(Nn.requeue.push(Ln),Nn.requeueIndex.push(Fn)),Nn},{processIndex:[],process:[],requeue:[],requeueIndex:[]});if(wn.processIndex&&wn.processIndex.length){wn.processIndex.forEach(function(Nn){var Ln=kn.actions[Nn],Fn=Ln.plugin,zn=Ln.payload.type,Dn=dn[Fn][zn];if(Dn&&W$2(Dn)){var Kn=function(Zn,Yn){return Zn===void 0&&(Zn={}),Yn===void 0&&(Yn={}),[j$1,T$1].reduce(function(Jn,rs){return Zn.hasOwnProperty(rs)&&Yn[rs]&&Yn[rs]!==Zn[rs]&&(Jn[rs]=Yn[rs]),Jn},Zn)}(Ln.payload,Sn);Dn({payload:Kn,config:vn[Fn].config,instance:cn});var qn=zn+":"+Fn;sn.dispatch(v$1({},Kn,{type:qn,_:{called:qn,from:"queueDrain"}}))}});var Pn=kn.actions.filter(function(Nn,Ln){return!~wn.processIndex.indexOf(Ln)});kn.actions=Pn}}}var F$2=function(sn){var ln=sn.data,cn=sn.action,dn=sn.instance,pn=sn.state,vn=sn.allPlugins,kn=sn.allMatches,Sn=sn.store,wn=sn.EVENTS;try{var Pn=pn.plugins,Nn=pn.context,Ln=cn.type,Fn=Ln.match(G$2),zn=ln.exact.map(function(qn){return qn.pluginName});Fn&&(zn=kn.during.map(function(qn){return qn.pluginName}));var Dn=function(qn,Zn){return function(Yn,Jn,rs){var ss=Jn.config,as=Jn.name,ds=as+"."+Yn.type;rs&&(ds=rs.event);var Es=Yn.type.match(G$2)?function(Ss,Qn,ms,Ts,Rs){return function(ys,_s){var js=Ts?Ts.name:Ss,bs=_s&&ie(_s)?_s:ms;if(Ts&&(!(bs=_s&&ie(_s)?_s:[Ss]).includes(Ss)||bs.length!==1))throw new Error("Method "+Qn+" can only abort "+Ss+" plugin. "+JSON.stringify(bs)+" input valid");return v$1({},Rs,{abort:{reason:ys,plugins:bs,caller:Qn,_:js}})}}(as,ds,Zn,rs,Yn):function(Ss,Qn){return function(){throw new Error(Ss.type+" action not cancellable. Remove abort in "+Qn)}}(Yn,ds);return{payload:ue(Yn),instance:qn,config:ss||{},abort:Es}}}(dn,zn),Kn=ln.exact.reduce(function(qn,Zn){var Yn=Zn.pluginName,Jn=Zn.methodName,rs=!1;return Jn.match(/^initialize/)||Jn.match(/^reset/)||(rs=!Pn[Yn].loaded),Nn.offline&&Jn.match(/^(page|track|identify)/)&&(rs=!0),qn[""+Yn]=rs,qn},{});return Promise.resolve(ln.exact.reduce(function(qn,Zn,Yn){var Jn=Zn.pluginName;return Promise.resolve(qn).then(function(rs){function ss(){return Promise.resolve(rs)}var as=function(){if(ln.namespaced&&ln.namespaced[Jn])return Promise.resolve(ln.namespaced[Jn].reduce(function(ds,Es,Ss){return Promise.resolve(ds).then(function(Qn){return Es.method&&W$2(Es.method)?(function(ys,_s){var js=oe(ys);if(js&&js.name===_s){var bs=oe(js.method);throw new Error([_s+" plugin is calling method "+ys,"Plugins cant call self","Use "+js.method+" "+(bs?"or "+bs.method:"")+" in "+_s+" plugin insteadof "+ys].join(`
`))}}(Es.methodName,Es.pluginName),Promise.resolve(Es.method({payload:Qn,instance:dn,abort:(ms=Qn,Ts=Jn,Rs=Es.pluginName,function(ys,_s){return v$1({},ms,{abort:{reason:ys,plugins:_s||[Ts],caller:Ln,from:Rs||Ts}})}),config:Z(Es.pluginName,Pn,vn),plugins:Pn})).then(function(ys){var _s=on(ys)?ys:{};return Promise.resolve(v$1({},Qn,_s))})):Qn;var ms,Ts,Rs})},Promise.resolve(cn))).then(function(ds){rs[Jn]=ds});rs[Jn]=cn}();return as&&as.then?as.then(ss):ss()})},Promise.resolve({}))).then(function(qn){return Promise.resolve(ln.exact.reduce(function(Zn,Yn,Jn){try{var rs=ln.exact.length===Jn+1,ss=Yn.pluginName,as=vn[ss];return Promise.resolve(Zn).then(function(ds){var Es=qn[ss]?qn[ss]:{};if(Fn&&(Es=ds),te(Es,ss))return Y$1({data:Es,method:Ln,instance:dn,pluginName:ss,store:Sn}),Promise.resolve(ds);if(te(ds,ss))return rs&&Y$1({data:ds,method:Ln,instance:dn,store:Sn}),Promise.resolve(ds);if(Kn.hasOwnProperty(ss)&&Kn[ss]===!0)return Sn.dispatch({type:"queue",plugin:ss,payload:Es,_:{called:"queue",from:"queueMechanism"}}),Promise.resolve(ds);var Ss=Dn(qn[ss],vn[ss]);return Promise.resolve(as[Ln]({abort:Ss.abort,payload:Es,instance:dn,config:Z(ss,Pn,vn),plugins:Pn})).then(function(Qn){var ms=on(Qn)?Qn:{},Ts=v$1({},ds,ms),Rs=qn[ss];if(te(Rs,ss))Y$1({data:Rs,method:Ln,instance:dn,pluginName:ss,store:Sn});else{var ys=Ln+":"+ss;(ys.match(/:/g)||[]).length<2&&!Ln.match(K$1)&&!Ln.match(Q)&&dn.dispatch(v$1({},Fn?Ts:Es,{type:ys,_:{called:ys,from:"submethod"}}))}return Promise.resolve(Ts)})})}catch(ds){return Promise.reject(ds)}},Promise.resolve(cn))).then(function(Zn){if(!(Ln.match(G$2)||Ln.match(/^registerPlugin/)||Ln.match(Q)||Ln.match(K$1)||Ln.match(/^params/)||Ln.match(/^userIdChanged/))){if(wn.plugins.includes(Ln),Zn._&&Zn._.originalAction===Ln)return Zn;var Yn=v$1({},Zn,{_:{originalAction:Zn.type,called:Zn.type,from:"engineEnd"}});re(Zn,ln.exact.length)&&!Ln.match(/End$/)&&(Yn=v$1({},Yn,{type:Zn.type+"Aborted"})),Sn.dispatch(Yn)}return Zn})})}catch(qn){return Promise.reject(qn)}},G$2=/Start$/,K$1=/^bootstrap/,Q=/^ready/;function Y$1(sn){var ln=sn.pluginName,cn=sn.method+"Aborted"+(ln?":"+ln:"");sn.store.dispatch(v$1({},sn.data,{type:cn,_:{called:cn,from:"abort"}}))}function Z(sn,ln,cn){var dn=ln[sn]||cn[sn];return dn&&dn.config?dn.config:{}}function ee(sn,ln){return ln.reduce(function(cn,dn){return dn[sn]?cn.concat({methodName:sn,pluginName:dn.name,method:dn[sn]}):cn},[])}function ne(sn,ln){var cn=sn.replace(G$2,""),dn=ln?":"+ln:"";return[""+sn+dn,""+cn+dn,cn+"End"+dn]}function te(sn,ln){var cn=sn.abort;return!!cn&&(cn===!0||ae(cn,ln)||cn&&ae(cn.plugins,ln))}function re(sn,ln){var cn=sn.abort;if(!cn)return!1;if(cn===!0||q$2(cn))return!0;var dn=cn.plugins;return ie(cn)&&cn.length===ln||ie(dn)&&dn.length===ln}function ie(sn){return Array.isArray(sn)}function ae(sn,ln){return!(!sn||!ie(sn))&&sn.includes(ln)}function oe(sn){var ln=sn.match(/(.*):(.*)/);return!!ln&&{method:ln[1],name:ln[2]}}function ue(sn){return Object.keys(sn).reduce(function(ln,cn){return cn==="type"||(ln[cn]=on(sn[cn])?Object.assign({},sn[cn]):sn[cn]),ln},{})}function ce(sn,ln,cn){var dn={};return function(pn){return function(vn){return function(kn){try{var Sn,wn=function(rs){return Sn?rs:vn(Ln)},Pn=kn.type,Nn=kn.plugins,Ln=kn;if(kn.abort)return Promise.resolve(vn(kn));if(Pn===q$1.enablePlugin&&pn.dispatch({type:q$1.initializeStart,plugins:Nn,disabled:[],fromEnable:!0,meta:kn.meta}),Pn===q$1.disablePlugin&&setTimeout(function(){return J$1(kn.meta.rid,{payload:kn})},0),Pn===q$1.initializeEnd){var Fn=ln(),zn=Object.keys(Fn),Dn=zn.filter(function(rs){return Nn.includes(rs)}).map(function(rs){return Fn[rs]}),Kn=[],qn=[],Zn=kn.disabled,Yn=Dn.map(function(rs){var ss=rs.name;return W$1(rs,rs.loaded,1e4).then(function(as){return dn[ss]||(pn.dispatch({type:q$1.pluginReadyType(ss),name:ss,events:Object.keys(rs).filter(function(ds){return!M$1.includes(ds)})}),dn[ss]=!0),Kn=Kn.concat(ss),rs}).catch(function(as){if(as instanceof Error)throw new Error(as);return qn=qn.concat(as.name),as})});Promise.all(Yn).then(function(rs){var ss={plugins:Kn,failed:qn,disabled:Zn};setTimeout(function(){zn.length===Yn.length+Zn.length&&pn.dispatch(v$1({},{type:q$1.ready},ss))},0)})}var Jn=function(){if(Pn!==q$1.bootstrap)return/^ready:([^:]*)$/.test(Pn)&&setTimeout(function(){return H$1(pn,ln,sn)},0),Promise.resolve(function(rs,ss,as,ds,Es){try{var Ss=W$2(ss)?ss():ss,Qn=rs.type,ms=Qn.replace(G$2,"");if(rs._&&rs._.called)return Promise.resolve(rs);var Ts=as.getState(),Rs=(js=Ss,(bs=Ts.plugins)===void 0&&(bs={}),(ks=rs.options)===void 0&&(ks={}),Object.keys(js).filter(function(xs){var Ks=ks.plugins||{};return Q$1(Ks[xs])?Ks[xs]:Ks.all!==!1&&(!bs[xs]||bs[xs].enabled!==!1)}).map(function(xs){return js[xs]}));Qn===q$1.initializeStart&&rs.fromEnable&&(Rs=Object.keys(Ts.plugins).filter(function(xs){var Ks=Ts.plugins[xs];return rs.plugins.includes(xs)&&!Ks.initialized}).map(function(xs){return Ss[xs]}));var ys=Rs.map(function(xs){return xs.name}),_s=function(xs,Ks,Vs){var Js=ne(xs).map(function(ru){return ee(ru,Ks)});return Ks.reduce(function(ru,hs){var lu=hs.name,_u=ne(xs,lu).map(function(Fl){return ee(Fl,Ks)}),yu=_u[0],Xu=_u[1],Du=_u[2];return yu.length&&(ru.beforeNS[lu]=yu),Xu.length&&(ru.duringNS[lu]=Xu),Du.length&&(ru.afterNS[lu]=Du),ru},{before:Js[0],beforeNS:{},during:Js[1],duringNS:{},after:Js[2],afterNS:{}})}(Qn,Rs);return Promise.resolve(F$2({action:rs,data:{exact:_s.before,namespaced:_s.beforeNS},state:Ts,allPlugins:Ss,allMatches:_s,instance:as,store:ds,EVENTS:Es})).then(function(xs){function Ks(){var ru=function(){if(Qn.match(G$2))return Promise.resolve(F$2({action:v$1({},Vs,{type:ms+"End"}),data:{exact:_s.after,namespaced:_s.afterNS},state:Ts,allPlugins:Ss,allMatches:_s,instance:as,store:ds,EVENTS:Es})).then(function(hs){hs.meta&&hs.meta.hasCallback&&J$1(hs.meta.rid,{payload:hs})})}();return ru&&ru.then?ru.then(function(){return xs}):xs}if(re(xs,ys.length))return xs;var Vs,Js=function(){if(Qn!==ms)return Promise.resolve(F$2({action:v$1({},xs,{type:ms}),data:{exact:_s.during,namespaced:_s.duringNS},state:Ts,allPlugins:Ss,allMatches:_s,instance:as,store:ds,EVENTS:Es})).then(function(ru){Vs=ru});Vs=xs}();return Js&&Js.then?Js.then(Ks):Ks()})}catch(xs){return Promise.reject(xs)}var js,bs,ks}(kn,ln,sn,pn,cn)).then(function(rs){var ss=vn(rs);return Sn=1,ss})}();return Promise.resolve(Jn&&Jn.then?Jn.then(wn):wn(Jn))}catch(rs){return Promise.reject(rs)}}}}}function se(sn){return function(ln){return function(cn){return function(dn){var pn=dn.type,vn=dn.key,kn=dn.value,Sn=dn.options;if(pn===q$1.setItem||pn===q$1.removeItem){if(dn.abort)return cn(dn);pn===q$1.setItem?sn.setItem(vn,kn,Sn):sn.removeItem(vn,Sn)}return cn(dn)}}}}var le=function(){var sn=this;this.before=[],this.after=[],this.addMiddleware=function(ln,cn){sn[cn]=sn[cn].concat(ln)},this.removeMiddleware=function(ln,cn){var dn=sn[cn].findIndex(function(pn){return pn===ln});dn!==-1&&(sn[cn]=[].concat(sn[cn].slice(0,dn),sn[cn].slice(dn+1)))},this.dynamicMiddlewares=function(ln){return function(cn){return function(dn){return function(pn){var vn={getState:cn.getState,dispatch:function(Sn){return cn.dispatch(Sn)}},kn=sn[ln].map(function(Sn){return Sn(vn)});return N$2.apply(void 0,kn)(dn)(pn)}}}}};function fe(sn){return function(ln,cn){ln===void 0&&(ln={});var dn={};if(cn.type==="initialize:aborted")return ln;if(/^registerPlugin:([^:]*)$/.test(cn.type)){var pn=de(cn.type,"registerPlugin"),vn=sn()[pn];if(!vn||!pn)return ln;var kn=cn.enabled;return dn[pn]={enabled:kn,initialized:!!kn&&!vn.initialize,loaded:!!kn&&!!vn.loaded(),config:vn.config||{}},v$1({},ln,dn)}if(/^initialize:([^:]*)$/.test(cn.type)){var Sn=de(cn.type,q$1.initialize),wn=sn()[Sn];return wn&&Sn?(dn[Sn]=v$1({},ln[Sn],{initialized:!0,loaded:!!wn.loaded()}),v$1({},ln,dn)):ln}if(/^ready:([^:]*)$/.test(cn.type))return dn[cn.name]=v$1({},ln[cn.name],{loaded:!0}),v$1({},ln,dn);switch(cn.type){case q$1.disablePlugin:return v$1({},ln,pe(cn.plugins,!1,ln));case q$1.enablePlugin:return v$1({},ln,pe(cn.plugins,!0,ln));default:return ln}}}function de(sn,ln){return sn.substring(ln.length+1,sn.length)}function pe(sn,ln,cn){return sn.reduce(function(dn,pn){return dn[pn]=v$1({},cn[pn],{enabled:ln}),dn},cn)}function me(sn){try{return JSON.parse(JSON.stringify(sn))}catch{}return sn}var ge={last:{},history:[]};function he(sn,ln){sn===void 0&&(sn=ge);var cn=ln.options,dn=ln.meta;if(ln.type===q$1.track){var pn=me(v$1({event:ln.event,properties:ln.properties},Object.keys(cn).length&&{options:cn},{meta:dn}));return v$1({},sn,{last:pn,history:sn.history.concat(pn)})}return sn}var ve={actions:[]};function ye(sn,ln){sn===void 0&&(sn=ve);var cn=ln.payload;switch(ln.type){case"queue":var dn;return dn=cn&&cn.type&&cn.type===q$1.identify?[ln].concat(sn.actions):sn.actions.concat(ln),v$1({},sn,{actions:dn});case"dequeue":return[];default:return sn}}var be=/#.*$/;function Ie(sn){var ln=/(http[s]?:\/\/)?([^\/\s]+\/)(.*)/g.exec(sn);return"/"+(ln&&ln[3]?ln[3].split("?")[0].replace(be,""):"")}var we,Ee,Pe,Se,Ne=function(sn){if(sn===void 0&&(sn={}),!$$W)return sn;var ln=document,cn=ln.title,dn=ln.referrer,pn=window,vn=pn.location,kn=pn.innerWidth,Sn=pn.innerHeight,wn=vn.hash,Pn=vn.search,Nn=function(Fn){var zn=function(){if($$W){for(var Dn,Kn=document.getElementsByTagName("link"),qn=0;Dn=Kn[qn];qn++)if(Dn.getAttribute("rel")==="canonical")return Dn.getAttribute("href")}}();return zn?zn.match(/\?/)?zn:zn+Fn:window.location.href.replace(be,"")}(Pn),Ln={title:cn,url:Nn,path:Ie(Nn),hash:wn,search:Pn,width:kn,height:Sn};return dn&&dn!==""&&(Ln.referrer=dn),v$1({},Ln,sn)},Oe={last:{},history:[]};function Ae(sn,ln){sn===void 0&&(sn=Oe);var cn=ln.options;if(ln.type===q$1.page){var dn=me(v$1({properties:ln.properties,meta:ln.meta},Object.keys(cn).length&&{options:cn}));return v$1({},sn,{last:dn,history:sn.history.concat(dn)})}return sn}we=function(){if(!$$W)return!1;var sn=navigator.appVersion;return~sn.indexOf("Win")?"Windows":~sn.indexOf("Mac")?"MacOS":~sn.indexOf("X11")?"UNIX":~sn.indexOf("Linux")?"Linux":"Unknown OS"}(),Ee=$$W?document.referrer:null,Pe=o$2(),Se=a$4();var _e={initialized:!1,sessionId:y$2(),app:null,version:null,debug:!1,offline:!!$$W&&!navigator.onLine,os:{name:we},userAgent:$$W?navigator.userAgent:"node",library:{name:"analytics",version:"0.11.0"},timezone:Se,locale:Pe,campaign:{},referrer:Ee};function xe(sn,ln){sn===void 0&&(sn=_e);var cn=sn.initialized,dn=ln.campaign;switch(ln.type){case q$1.campaign:return v$1({},sn,{campaign:dn});case q$1.offline:return v$1({},sn,{offline:!0});case q$1.online:return v$1({},sn,{offline:!1});default:return cn?sn:v$1({},_e,sn,{initialized:!0})}}var ke=["plugins","reducers","storage"];function je(sn,ln,cn){if($$W){var dn=window[(cn?"add":"remove")+"EventListener"];sn.split(" ").forEach(function(pn){dn(pn,ln)})}}function Te(sn){var ln=je.bind(null,"online offline",function(cn){return Promise.resolve(!navigator.onLine).then(sn)});return ln(!0),function(cn){return ln(!1)}}function ze(){return f$1("analytics",[]),function(sn){return function(ln,cn,dn){var pn=sn(ln,cn,dn),vn=pn.dispatch;return Object.assign(pn,{dispatch:function(kn){return n$1[o$1].analytics.push(kn.action||kn),vn(kn)}})}}}function Me(sn){return function(){return N$2(N$2.apply(null,arguments),ze())}}function qe(sn){return sn?rn(sn)?sn:[sn]:[]}function Ue(sn,ln,cn){sn===void 0&&(sn={});var dn,pn,vn=y$2();return ln&&(X[vn]=(dn=ln,pn=function(kn){for(var Sn,wn=kn||Array.prototype.slice.call(arguments),Pn=0;Pn<wn.length;Pn++)if(W$2(wn[Pn])){Sn=wn[Pn];break}return Sn}(cn),function(kn){pn&&pn(kn),dn(kn)})),v$1({},sn,{rid:vn,ts:new Date().getTime()},ln?{hasCallback:!0}:{})}function Ve(sn){sn===void 0&&(sn={});var ln=sn.reducers||{},cn=sn.initialUser||{},dn=(sn.plugins||[]).reduce(function(ks,xs){if(W$2(xs))return ks.middlewares=ks.middlewares.concat(xs),ks;if(xs.NAMESPACE&&(xs.name=xs.NAMESPACE),!xs.name)throw new Error("https://lytics.dev/errors/1");var Ks=xs.EVENTS?Object.keys(xs.EVENTS).map(function(ru){return xs.EVENTS[ru]}):[];ks.pluginEnabled[xs.name]=!(xs.enabled===!1||xs.config&&xs.config.enabled===!1),delete xs.enabled,xs.methods&&(ks.methods[xs.name]=Object.keys(xs.methods).reduce(function(ru,hs){var lu;return ru[hs]=(lu=xs.methods[hs],function(){for(var _u=Array.prototype.slice.call(arguments),yu=new Array(lu.length),Xu=0;Xu<_u.length;Xu++)yu[Xu]=_u[Xu];return yu[yu.length]=rs,lu.apply({instance:rs},yu)}),ru},{}),delete xs.methods);var Vs=Object.keys(xs).concat(Ks),Js=new Set(ks.events.concat(Vs));if(ks.events=Array.from(Js),ks.pluginsArray=ks.pluginsArray.concat(xs),ks.plugins[xs.name])throw new Error(xs.name+"AlreadyLoaded");return ks.plugins[xs.name]=xs,ks.plugins[xs.name].loaded||(ks.plugins[xs.name].loaded=function(){return!0}),ks},{plugins:{},pluginEnabled:{},methods:{},pluginsArray:[],middlewares:[],events:[]}),pn=sn.storage?sn.storage:{getItem:a$3,setItem:f$1,removeItem:i$4},vn=function(ks){return function(xs,Ks,Vs){return Ks.getState("user")[xs]||(Vs&&on(Vs)&&Vs[xs]?Vs[xs]:$$V(ks)[xs]||a$3(D$1(xs))||null)}}(pn),kn=dn.plugins,Sn=dn.events.filter(function(ks){return!M$1.includes(ks)}).sort(),wn=new Set(Sn.concat(z$1).filter(function(ks){return!M$1.includes(ks)})),Pn=Array.from(wn).sort(),Nn=function(){return kn},Ln=new le,Fn=Ln.addMiddleware,zn=Ln.removeMiddleware,Dn=Ln.dynamicMiddlewares,Kn=function(){throw new Error("Abort disabled inListener")},qn=s$1(),Zn=$$V(pn),Yn=v$1({},Zn,cn,qn.an_uid?{userId:qn.an_uid}:{},qn.an_aid?{anonymousId:qn.an_aid}:{});Yn.anonymousId||(Yn.anonymousId=y$2());var Jn=v$1({enable:function(ks,xs){return new Promise(function(Ks){ys.dispatch({type:q$1.enablePlugin,plugins:qe(ks),_:{originalAction:q$1.enablePlugin}},Ks,[xs])})},disable:function(ks,xs){return new Promise(function(Ks){ys.dispatch({type:q$1.disablePlugin,plugins:qe(ks),_:{originalAction:q$1.disablePlugin}},Ks,[xs])})}},dn.methods),rs={identify:function(ks,xs,Ks,Vs){try{var Js=q$2(ks)?ks:null,ru=on(ks)?ks:xs,hs=Ks||{},lu=rs.user();f$1(D$1(j$1),Js);var _u=Js||ru.userId||vn(j$1,rs,ru);return Promise.resolve(new Promise(function(yu){ys.dispatch(v$1({type:q$1.identifyStart,userId:_u,traits:ru||{},options:hs,anonymousId:lu.anonymousId},lu.id&&lu.id!==Js&&{previousId:lu.id}),yu,[xs,Ks,Vs])}))}catch(yu){return Promise.reject(yu)}},track:function(ks,xs,Ks,Vs){try{var Js=on(ks)?ks.event:ks;if(!Js||!q$2(Js))throw new Error("EventMissing");var ru=on(ks)?ks:xs||{},hs=on(Ks)?Ks:{};return Promise.resolve(new Promise(function(lu){ys.dispatch({type:q$1.trackStart,event:Js,properties:ru,options:hs,userId:vn(j$1,rs,xs),anonymousId:vn(T$1,rs,xs)},lu,[xs,Ks,Vs])}))}catch(lu){return Promise.reject(lu)}},page:function(ks,xs,Ks){try{var Vs=on(ks)?ks:{},Js=on(xs)?xs:{};return Promise.resolve(new Promise(function(ru){ys.dispatch({type:q$1.pageStart,properties:Ne(Vs),options:Js,userId:vn(j$1,rs,Vs),anonymousId:vn(T$1,rs,Vs)},ru,[ks,xs,Ks])}))}catch(ru){return Promise.reject(ru)}},user:function(ks){if(ks===j$1||ks==="id")return vn(j$1,rs);if(ks===T$1||ks==="anonId")return vn(T$1,rs);var xs=rs.getState("user");return ks?i$5(xs,ks):xs},reset:function(ks){return new Promise(function(xs){ys.dispatch({type:q$1.resetStart},xs,ks)})},ready:function(ks){return rs.on(q$1.ready,ks)},on:function(ks,xs){if(!ks||!W$2(xs))return!1;if(ks===q$1.bootstrap)throw new Error(".on disabled for "+ks);var Ks=/Start$|Start:/;if(ks==="*"){var Vs=function(lu){return function(_u){return function(yu){return yu.type.match(Ks)&&xs({payload:yu,instance:rs,plugins:kn}),_u(yu)}}},Js=function(lu){return function(_u){return function(yu){return yu.type.match(Ks)||xs({payload:yu,instance:rs,plugins:kn}),_u(yu)}}};return Fn(Vs,Le),Fn(Js,Ce),function(){zn(Vs,Le),zn(Js,Ce)}}var ru=ks.match(Ks)?Le:Ce,hs=function(lu){return function(_u){return function(yu){return yu.type===ks&&xs({payload:yu,instance:rs,plugins:kn,abort:Kn}),_u(yu)}}};return Fn(hs,ru),function(){return zn(hs,ru)}},once:function(ks,xs){if(!ks||!W$2(xs))return!1;if(ks===q$1.bootstrap)throw new Error(".once disabled for "+ks);var Ks=rs.on(ks,function(Vs){xs({payload:Vs.payload,instance:rs,plugins:kn,abort:Kn}),Ks()});return Ks},getState:function(ks){var xs=ys.getState();return ks?i$5(xs,ks):Object.assign({},xs)},dispatch:function(ks){var xs=q$2(ks)?{type:ks}:ks;if(z$1.includes(xs.type))throw new Error("reserved action "+xs.type);var Ks=v$1({},xs,{_:v$1({originalAction:xs.type},ks._||{})});ys.dispatch(Ks)},enablePlugin:Jn.enable,disablePlugin:Jn.disable,plugins:Jn,storage:{getItem:pn.getItem,setItem:function(ks,xs,Ks){ys.dispatch({type:q$1.setItemStart,key:ks,value:xs,options:Ks})},removeItem:function(ks,xs){ys.dispatch({type:q$1.removeItemStart,key:ks,options:xs})}},setAnonymousId:function(ks,xs){rs.storage.setItem(A$2,ks,xs)},events:{core:z$1,plugins:Sn}},ss=dn.middlewares.concat([function(ks){return function(xs){return function(Ks){return Ks.meta||(Ks.meta=Ue()),xs(Ks)}}},Dn(Le),ce(rs,Nn,{all:Pn,plugins:Sn}),se(pn),C$2(rs),B$2(rs),Dn(Ce)]),as={context:xe,user:R$1(pn),page:Ae,track:he,plugins:fe(Nn),queue:ye},ds=N$2,Es=N$2;if($$W&&sn.debug){var Ss=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__;Ss&&(ds=Ss({trace:!0,traceLimit:25})),Es=function(){return arguments.length===0?ze():on(typeof arguments[0])?Me():Me().apply(null,arguments)}}var Qn,ms=function(ks){return Object.keys(ks).reduce(function(xs,Ks){return ke.includes(Ks)||(xs[Ks]=ks[Ks]),xs},{})}(sn),Ts=dn.pluginsArray.reduce(function(ks,xs){var Ks=xs.name,Vs=xs.config,Js=xs.loaded,ru=dn.pluginEnabled[Ks];return ks[Ks]={enabled:ru,initialized:!!ru&&!xs.initialize,loaded:!!Js(),config:Vs||{}},ks},{}),Rs={context:ms,user:Yn,plugins:Ts},ys=P$1(function(ks){for(var xs=Object.keys(ks),Ks={},Vs=0;Vs<xs.length;Vs++){var Js=xs[Vs];typeof ks[Js]===y$1&&(Ks[Js]=ks[Js])}var ru,hs=Object.keys(Ks);try{(function(lu){Object.keys(lu).forEach(function(_u){var yu=lu[_u];if(typeof yu(void 0,{type:"@@redux/INIT"})===b$2||typeof yu(void 0,{type:I$2})===b$2)throw new Error("reducer "+_u+" "+b$2)})})(Ks)}catch(lu){ru=lu}return function(lu,_u){if(lu===void 0&&(lu={}),ru)throw ru;for(var yu=!1,Xu={},Du=0;Du<hs.length;Du++){var Fl=hs[Du],Vp=lu[Fl],Ys=(0,Ks[Fl])(Vp,_u);if(typeof Ys===b$2){var vu=S$1(Fl,_u);throw new Error(vu)}Xu[Fl]=Ys,yu=yu||Ys!==Vp}return yu?Xu:lu}}(v$1({},as,ln)),Rs,Es(ds(O$2.apply(void 0,ss))));ys.dispatch=(Qn=ys.dispatch,function(ks,xs,Ks){var Vs=v$1({},ks,{meta:Ue(ks.meta,xs,qe(Ks))});return Qn.apply(null,[Vs])});var _s=Object.keys(kn);ys.dispatch({type:q$1.bootstrap,plugins:_s,config:ms,params:qn,user:Yn,initialUser:cn,persistedUser:Zn});var js=_s.filter(function(ks){return dn.pluginEnabled[ks]}),bs=_s.filter(function(ks){return!dn.pluginEnabled[ks]});return ys.dispatch({type:q$1.registerPlugins,plugins:_s,enabled:dn.pluginEnabled}),dn.pluginsArray.map(function(ks,xs){var Ks=ks.bootstrap,Vs=ks.config,Js=ks.name;Ks&&W$2(Ks)&&Ks({instance:rs,config:Vs,payload:ks}),ys.dispatch({type:q$1.registerPluginType(Js),name:Js,enabled:dn.pluginEnabled[Js],plugin:ks}),dn.pluginsArray.length===xs+1&&ys.dispatch({type:q$1.initializeStart,plugins:js,disabled:bs})}),Te(function(ks){ys.dispatch({type:ks?q$1.offline:q$1.online})}),function(ks,xs,Ks){setInterval(function(){return H$1(ks,xs,Ks)},3e3)}(ys,Nn,rs),rs}var Le="before",Ce="after",t="cookie",i$3=a$2(),r$1=d$2,c$1=d$2;function u$1(sn){return i$3?d$2(sn,"",-1):i$4(sn)}function a$2(){if(i$3!==void 0)return i$3;var sn="cookiecookie";try{d$2(sn,sn),i$3=document.cookie.indexOf(sn)!==-1,u$1(sn)}catch{i$3=!1}return i$3}function d$2(sn,ln,cn,dn,pn,vn){if(typeof window<"u"){var kn=arguments.length>1;return i$3===!1&&(kn?f$1(sn,ln):a$3(sn)),kn?document.cookie=sn+"="+encodeURIComponent(ln)+(cn?"; expires="+new Date(+new Date+1e3*cn).toUTCString()+(dn?"; path="+dn:"")+(pn?"; domain="+pn:"")+(vn?"; secure":""):""):decodeURIComponent((("; "+document.cookie).split("; "+sn+"=")[1]||"").split(";")[0])}}var r="localStorage",g$1=b$3.bind(null,"localStorage");u$2("localStorage","getItem",a$3);u$2("localStorage","setItem",f$1);u$2("localStorage","removeItem",i$4);var a$1="sessionStorage",i$2=b$3.bind(null,"sessionStorage");u$2("sessionStorage","getItem",a$3);u$2("sessionStorage","setItem",f$1);u$2("sessionStorage","removeItem",i$4);function I$1(sn){var ln=sn;try{if((ln=JSON.parse(sn))==="true")return!0;if(ln==="false")return!1;if(on(ln))return ln;parseFloat(ln)===ln&&(ln=parseFloat(ln))}catch{}if(ln!==null&&ln!=="")return ln}var k$1=g$1(),O$1=i$2(),x$1=a$2();function C$1(sn,ln){if(sn){var cn=A$1(ln),dn=!N$1(cn),pn=d$1(cn)?I$1(localStorage.getItem(sn)):void 0;if(dn&&!I$3(pn))return pn;var vn=h$1(cn)?I$1(r$1(sn)):void 0;if(dn&&vn)return vn;var kn=E$1(cn)?I$1(sessionStorage.getItem(sn)):void 0;if(dn&&kn)return kn;var Sn=a$3(sn);return dn?Sn:{localStorage:pn,sessionStorage:kn,cookie:vn,global:Sn}}}function L$1(sn,ln,cn){if(sn&&!I$3(ln)){var dn={},pn=A$1(cn),vn=JSON.stringify(ln),kn=!N$1(pn);return d$1(pn)&&(dn[r]=F$1(r,ln,I$1(localStorage.getItem(sn))),localStorage.setItem(sn,vn),kn)?dn[r]:h$1(pn)&&(dn[t]=F$1(t,ln,I$1(r$1(sn))),c$1(sn,vn),kn)?dn[t]:E$1(pn)&&(dn[a$1]=F$1(a$1,ln,I$1(sessionStorage.getItem(sn))),sessionStorage.setItem(sn,vn),kn)?dn[a$1]:(dn[l$1]=F$1(l$1,ln,a$3(sn)),f$1(sn,ln),kn?dn[l$1]:dn)}}function b$1(sn,ln){if(sn){var cn=A$1(ln),dn=C$1(sn,m$2),pn={};return!I$3(dn.localStorage)&&d$1(cn)&&(localStorage.removeItem(sn),pn[r]=dn.localStorage),!I$3(dn.cookie)&&h$1(cn)&&(u$1(sn),pn[t]=dn.cookie),!I$3(dn.sessionStorage)&&E$1(cn)&&(sessionStorage.removeItem(sn),pn[a$1]=dn.sessionStorage),!I$3(dn.global)&&G$1(cn,l$1)&&(i$4(sn),pn[l$1]=dn.global),pn}}function A$1(sn){return sn?q$2(sn)?sn:sn.storage:g$2}function d$1(sn){return k$1&&G$1(sn,r)}function h$1(sn){return x$1&&G$1(sn,t)}function E$1(sn){return O$1&&G$1(sn,a$1)}function N$1(sn){return sn===m$2||sn==="all"}function G$1(sn,ln){return sn===g$2||sn===ln||N$1(sn)}function F$1(sn,ln,cn){return{location:sn,current:ln,previous:cn}}var J={setItem:L$1,getItem:C$1,removeItem:b$1};function _defineProperty(sn,ln,cn){return ln in sn?Object.defineProperty(sn,ln,{value:cn,enumerable:!0,configurable:!0,writable:!0}):sn[ln]=cn,sn}function ownKeys$2(sn,ln){var cn=Object.keys(sn);if(Object.getOwnPropertySymbols){var dn=Object.getOwnPropertySymbols(sn);ln&&(dn=dn.filter(function(pn){return Object.getOwnPropertyDescriptor(sn,pn).enumerable})),cn.push.apply(cn,dn)}return cn}function _objectSpread2(sn){for(var ln=1;ln<arguments.length;ln++){var cn=arguments[ln]!=null?arguments[ln]:{};ln%2?ownKeys$2(Object(cn),!0).forEach(function(dn){_defineProperty(sn,dn,cn[dn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(sn,Object.getOwnPropertyDescriptors(cn)):ownKeys$2(Object(cn)).forEach(function(dn){Object.defineProperty(sn,dn,Object.getOwnPropertyDescriptor(cn,dn))})}return sn}function analyticsLib(){var sn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ln={storage:J};return Ve(_objectSpread2(_objectSpread2({},ln),sn))}const analytics=analyticsLib({app:"inflearn-monolith",plugins:[index({containerId:"GTM-MVM7ZHX"})]}),eventNames={GTM_CUSTOM_INIT:"gtm.customInit",PLAYER_GUIDE_FAQ_CLICK:"Player_Guide_Faq-click",PLAYER_GUIDE_HOTKEY_CLICK:"Player_Guide_Hotkey-click",UNIT__VIDEO_CONTENT_REPLAY_FLOATBTN_CLICK:"Unit_VideoContent_replay-floatbtn-click",UNIT__VIDEO_CONTENT_NEXT_FLOATBTN_CLICK:"Unit_VideoContent_next-floatbtn-click",UNIT__VIDEO_CONTENT_NEXT_BTN_CLICK:"Unit_VideoContent_next-btn-click",UNIT__VIDEO_CONTENT_COMPLETE_BTN_CLICK:"Unit_VideoContent_complete-btn-click",UNIT__VIDEO_CONTENT_PREVIOUS_BTN_CLICK:"Unit_VideoContent_previous-btn-click",UNIT__VIDEO_CONTENT_ADD_REVIEW_BTN_CLICK:"Unit_VideoContent_add-review-btn-click",UNIT__VIDEO_CONTENT_EXIT_BTN_CLICK:"Unit_VideoContent_exit-btn-click",UNIT__COMMUNITY_CHAT_SEARCH:"Unit_Community_chat-search",UNIT__COMMUNITY_STUDIES_SEARCH:"Unit_Community_studies-search",UNIT__COMMUNITY_QUESTION_SEARCH:"Unit_Community_question-search",UNIT__NOTE_DELETE_CLICK:"Unit_Note_delete-click",UNIT__NOTE_MODIFY_CLICK:"Unit_Note_modify-click",UNIT__COMMUNITY_ADD_POST_CLICK:"Unit_Community_addPost-click",UNIT__COMMUNITY_POST_ITEM_CLICK:"Unit_Community_postItem-click",UNIT__VIDEO_CONTENT_PLAYBACK_RATE:"Unit_VideoContent_PlaybackRate-click",TIPTAP__TOOLBAR_BOLD_CLICK:"Tiptap_Toolbar_bold-click",TIPTAP__TOOLBAR_ITALIC_CLICK:"Tiptap_Toolbar_italic-click",TIPTAP__TOOLBAR_STRIKE_CLICK:"Tiptap_Toolbar_strike-click",TIPTAP__TOOLBAR_LINK_CLICK:"Tiptap_Toolbar_link-click",TIPTAP__TOOLBAR_CODE_CLICK:"Tiptap_Toolbar_code-click",TIPTAP__TOOLBAR_CODEBLOCK_CLICK:"Tiptap_Toolbar_codeblock-click",TIPTAP__TOOLBAR_BLOCKQUOTE_CLICK:"Tiptap_Toolbar_blockquote-click",TIPTAP__TOOLBAR_IMAGE_CLICK:"Tiptap_Toolbar_image-click",TIPTAP__TOOLBAR_HEADING1_CLICK:"Tiptap_Toolbar_heading1-click",TIPTAP__TOOLBAR_HEADING2_CLICK:"Tiptap_Toolbar_heading2-click",TIPTAP__TOOLBAR_HEADING3_CLICK:"Tiptap_Toolbar_heading3-click",TIPTAP__TOOLBAR_BULLETLIST_CLICK:"Tiptap_Toolbar_bulletlist-click",TIPTAP__TOOLBAR_NUMBERLIST_CLICK:"Tiptap_Toolbar_numberlist-click",TIPTAP__TOOLBAR_DIVIDER_CLICK:"Tiptap_Toolbar_divider-click",TIPTAP__TOOLBAR_UNDO_CLICK:"Tiptap_Toolbar_undo-click",TIPTAP__TOOLBAR_REDO_CLICK:"Tiptap_Toolbar_redo-click",LECTUREM_FULLSCREEN_CLICK:"lecturem_fullscreen-click",LECTUREM_WRITE_VIEW:"lecturem_write-review",LECTUREM_CURRICULUM_TAB_CLICK:"lecturem_curriculum-tab-click",LECTUREM_REFERENCE_TAB_CLICK:"lecturem_reference-tab-click",LECTUREM_COMMUNITY_TAB_CLICK:"lecturem_community-tab-click",LECTUREM_NOTE_TAB_CLICK:"lecturem_note-tab-click",LECTUREM_REFERENCE_FULLPAGE_CLICK:"lecturem_reference-fullpage-click",LECTURE_SAVE_REVIEW:"lecture_save-review","LECTURE_30%_REVIEW_LATER_CLICK":"lecture_30%review-later-click","LECTURE_30%_REVIEW_SAVE_CLICK":"lecture_30%review-save-click","LECTURE_60%_REVIEW_LATER_CLICK":"lecture_60%review-later-click","LECTURE_60%_REVIEW_SAVE_CLICK":"lecture_60%review-save-click",LECTURE_REVIEW_STARS_CLICK:"lecture_review-stars-click",LECTURE_ROADMAP_EVENT_CLICK:"lecture_roadmap_event-click",LECTUREPC_COMM_TAB_CLICK:"lecturepc_comm-tab-click",LECTUREPC_COMM_UNIT_QUESTION_CLICK:"lecturepc_comm-unit-question-click",LECTUREPC_COMM_COURSE_QUESTION_CLICK:"lecturepc_comm-course-question-click",LECTUREPC_COMM_SEARCH_HAS_RESULT:"lecturepc_comm-search-has-result",LECTUREPC_COMM_SEARCH_NO_RESULT:"lecturepc_comm-search-no-result",LECTUREPC_COMM_SHARE_POST_CLICK:"Unit_Community_Share",LECTURE_VIEW_UNIT:"view_unit",LECTURE_VIEW_UNIT_COMMUNITY_QUESTION_LIST:"view_unit_community_question_list",LECTURE_VIEW_UNIT_COMMUNITY_CHAT_LIST:"view_unit_community_chat_list",LECTURE_VIEW_UNIT_COMMUNITY_QUESTION:"view_unit_community_question",LECTURE_VIEW_UNIT_COMMUNITY_CHAT:"view_unit_community_chat",LECTURE_SUBMIT_REVIEW_ON_UNIT:"submit_review_on_unit",LECTURE_SEARCH_UNIT_COMMUNITY_KEYWORD:"search_unit_community_keyword",LECTURE_SUBMIT_QUESTION_ON_UNIT:"submit_questions_on_unit",LECTURE_SUBMIT_NOTE_ON_UNIT:"submit_note_on_unit",LECTURE_CLICK_COMPLETES:"click_completes",GROWTH_LOG_CLICK_RECENT_LOG:"growth-log-click-recent-log",GROWTH_LOG_CLICK_REFRESH:"growth-log-click-refresh",GROWTH_LOG_CLOSE_LOG_TAB:"growth-log-close-log-tab",GROWTH_LOG_END_TO_SCROLL:"growth-log-end-to-scroll",GROWTH_LOG_INSTITUTION_VERIFY:"growth-log-institution-verify",GROWTH_LOG_OPEN_LOG_TAB:"growth-log-open-log-tab",GROWTH_LOG_SEND_MESSAGE:"growth-log-send-message",GROWTH_LOG_TAB_CLICK_OPEN_CURRICULUM:"growth-log-tab-click-open-curriculum",GROWTH_LOG_TAB_CLICK_OPEN_COMMUNITY:"growth-log-tab-click-open-community",GROWTH_LOG_TAB_CLICK_OPEN_NOTE:"growth-log-tab-click-open-note",GROWTH_LOG_TAB_CLICK_OPEN_LOG:"growth-log-tab-click-open-log",GROWTH_LOG_TAB_CLICK_CLOSE_CURRICULUM:"growth-log-tab-click-close-curriculum",GROWTH_LOG_TAB_CLICK_CLOSE_COMMUNITY:"growth-log-tab-click-close-community",GROWTH_LOG_TAB_CLICK_CLOSE_NOTE:"growth-log-tab-click-close-note",GROWTH_LOG_TAB_CLICK_CLOSE_LOG:"growth-log-tab-click-close-log",GROWTH_LOG_BUTTON_CLICK_CLOSE_CURRICULUM:"growth-log-button-click-close-curriculum",GROWTH_LOG_BUTTON_CLICK_CLOSE_COMMUNITY:"growth-log-button-click-close-community",GROWTH_LOG_BUTTON_CLICK_CLOSE_LOG:"growth-log-button-click-close-log",GROWTH_LOG_BUTTON_CLICK_CLOSE_NOTE:"growth-log-button-click-close-note",UNIT_GROWTHLOG_COMPLETESTATISTICS_TAB_CLICK:"Unit_GrowthLog_completestatistics_tab_click",UNIT_GROWTHLOG_LEARNINGTIME_TAB_CLICK:"Unit_GrowthLog_learningtime_tab_click",UNIT_GROWTHLOG_GOALSETTING_BTN_CLICK:"Unit_GrowthLog_goalsetting_btn_click",UNIT_GROWTHLOG_CLOSE_STATISTICS_CLICK:"Unit_GrowthLog_close-statistics_click",UNIT_GROWTHLOG_OPEN_STATISTICS_CLICK:"Unit_GrowthLog_open-statistics_click",UNIT_GROWTHLOG_GOALSETTING_SAVE_CLICK:"Unit_GrowthLog_goalsetting_save_click",CLICK_SUBTITLE:"click_subtitle",CLICK_SUBTITLE_ON:"click_subtitle_on",CLICK_SUBTITLE_UNDER_PLAYER:"click_subtitle_under_player",CLICK_SCRIPT_OPEN:"click_script_open",CLICK_SCRIPT_CLOSE:"click_script_close",CLICK_SCRIPT_TEXT:"click_script_text",CLICK_SCRIPT_TO_PLAYPOINT:"click_script_to_playpoint",CLICK_SCRIPT_EDIT:"click_script_edit",CLICK_SCRIPT_EDIT_CANCEL:"click_script_edit_cancel",CLICK_SCRIPT_EDIT_APPLY:"click_script_edit_apply"};function trackEvent(sn,ln){return analytics.track(sn,ln)}function trackMixpanelEvent(sn,ln){return analytics.track(sn,{mixpanelToken:appConfig.MIXPANEL_TOKEN,...ln})}function useReviewModal(){const{slug:sn}=useLectureParams(),ln=useAppDispatch(),{data:cn}=useSession(),{data:dn}=useMyVoucher(sn),pn=()=>{trackEvent("Unit_VideoContent_add-review-btn-click"),ln(lectureActions.setIsReviewModalOpened(!0))};return{isReviewable:(dn==null?void 0:dn.hasVoucher)&&!(cn!=null&&cn.isBlocked)&&dn.voucher.isReviewable&&dn.voucher.completeCount>=3,openReviewModal:pn}}var _ref$6={name:"l83cut",styles:"position:absolute;height:60px;top:-60px;width:100%;background:linear-gradient(180deg, rgba(255, 255, 255, 0.00) 0%, #FFF 100%)"},_ref2$4={name:"6my24z",styles:"position:sticky;bottom:0;padding:20px 0;background-color:#fff;margin-top:0"},_ref3$1={name:"1sdjnkx",styles:"word-break:break-word"},_ref4$1={name:"1i9vogi",styles:"margin-top:0"},_ref5={name:"1w92ebd",styles:"padding:20px 0"},_ref6={name:"a3z6ut",styles:"padding:0 20px"};function CompleteModal({isOpened:sn,onClose:ln}){const{slug:cn}=useLectureParams(),{data:dn}=useCourse(cn),{openReviewModal:pn,isReviewable:vn}=useReviewModal(),kn=reactExports.useRef(null),[Sn,wn]=reactExports.useState(!1),Pn=()=>{if(!kn.current)return;const zn=kn.current.scrollTop+kn.current.clientHeight,Dn=kn.current.scrollHeight;return wn(zn<Dn)};reactExports.useEffect(Pn,[kn.current]),useEvent$2("scroll",throttle(Pn,200),kn.current);const Nn=(dn==null?void 0:dn.completeMessage)||"강의를 모두 학습하셨습니다.",Fn=vn?jsxs(Fragment,{children:[jsx(A$8,{variant:"default",size:"md",onClick:ln,children:"다음에"}),jsx(A$8,{variant:"filled",size:"md",color:"infgreen.5",onClick:()=>{ln(),pn()},children:"수강평 남기기"})]}):jsx(A$8,{variant:"filled",size:"md",color:"infgreen.5",onClick:ln,children:"확인"});return jsxs(c$5.Root,{id:"complateModal",opened:sn,onClose:ln,closeOnEscape:!0,closeOnClickOutside:!1,children:[jsx(c$5.Overlay,{}),jsxs(c$5.Content,{css:_ref6,ref:kn,children:[jsxs(c$5.Header,{css:_ref5,children:[jsx(c$5.Title,{children:"완강! 축하합니다. 🎉"}),jsx(c$5.CloseButton,{})]}),jsx(c$5.Body,{css:_ref4$1,children:jsxs(S$5,{h:"100%",children:[jsx(p$6,{className:"alert-instance",withCloseButton:!1,type:"success",icon:jsx(I$a,{icon:faCircleExclamation.faCircleExclamation}),radius:"md",title:"복습을 하면서 다음 수업 자동재생을 이용해보세요!"}),jsx(c$8,{my:16,css:_ref3$1,children:Nn})]})}),jsxs(c$5.Footer,{align:"grow",styleWrapper:_ref2$4,children:[Sn?jsx(B$7,{css:_ref$6}):null,Fn]})]})]})}function RecommendReviewModal({isOpened:sn,onClose:ln}){const cn=useAppSelector(vn=>vn.lecture.progress),{openReviewModal:dn}=useReviewModal(),pn=()=>{ln(),dn(),cn===30&&trackEvent(eventNames["LECTURE_30%_REVIEW_SAVE_CLICK"]),cn===60&&trackEvent(eventNames["LECTURE_60%_REVIEW_SAVE_CLICK"])};return jsxs(c$5.Root,{opened:sn,onClose:ln,closeOnEscape:!0,children:[jsx(c$5.Overlay,{}),jsxs(c$5.Content,{children:[jsxs(c$5.Header,{children:[jsx(c$5.Title,{children:"강의가 마음에 드셨나요?"}),jsx(c$5.CloseButton,{})]}),jsx(c$5.Body,{children:jsx(c$8,{my:16,children:"강의에 대한 여러분의 생각을 남겨주세요."})}),jsxs(c$5.Footer,{align:"grow",children:[jsx(A$8,{variant:"default",size:"md",onClick:ln,children:"다음에"}),jsx(A$8,{variant:"filled",size:"md",color:"infgreen.5",onClick:pn,children:"수강평 남기기"})]})]})]})}const DEFAULT_VALUE={REASONS:["강의 난이도","사운드 문제","영상 화질 문제","강의 자료 부족","질문 답변 소통","강의 퀄리티"],MIN_STAR_COUNT:1,MIN_REVIEW_BODY_LENGTH:5,validateForm:()=>!0},ReviewFormContext=reactExports.createContext(null);function useReviewFormContext(){const sn=React.useContext(ReviewFormContext);if(!sn)throw new Error("useReviewFormContext must be used within a ReviewFormContext");return sn}function ReviewModal({form:sn,onClose:ln,isOpened:cn,title:dn="힘이 되는 수강평을 남겨주세요!"}){return jsxs(c$5,{size:"md",radius:"lg",onClose:ln,opened:cn,withCloseButton:!1,centered:!0,children:[jsx(c$8,{size:18,weight:"bold",align:"center",mb:"24px",children:dn}),sn]})}function ReviewForm({formValue:sn,onCancel:ln,onSubmit:cn,isLoading:dn,label:pn={cancel:"취소",submit:"저장하기"},...vn}){const{MIN_STAR_COUNT:kn,MIN_REVIEW_BODY_LENGTH:Sn,REASONS:wn,validateForm:Pn}=useReviewFormContext(),[Nn,Ln]=reactExports.useState((sn==null?void 0:sn.body)||""),[Fn,zn]=reactExports.useState((sn==null?void 0:sn.star)||0),[Dn,Kn]=reactExports.useState((sn==null?void 0:sn.reasons)||[]),qn=Fn>0&&Fn<=kn,Zn=ds=>{var Es;Ln(ds.target.value),(Es=vn.onChangeBody)==null||Es.call(vn)},Yn=ds=>{var Es;zn(ds),Kn([]),(Es=vn.onChangeStars)==null||Es.call(vn)},Jn=ds=>{var Es;Kn(ds),(Es=vn.onChangeReasons)==null||Es.call(vn)},rs=()=>{zn(0),Kn([]),ln()},ss=()=>{cn({body:Nn,star:Fn,reasons:Dn})},as=()=>{const ds=Fn!==0,Es=Dn.length!==0,Ss=Nn.trim().length>=Sn;return qn?!Ss||!Es:!Ss||!ds};return jsxs(B$7,{children:[jsx(m$5,{spacing:10,position:"center",mb:"24px",children:jsx(Rating,{value:Fn,onChange:Yn,fullSymbol:jsx(I$a,{size:"2xl",color:"yellow.5",icon:faStar}),emptySymbol:jsx(I$a,{size:"2xl",color:"gray.3",icon:faStar})})}),qn&&jsxs("section",{children:[jsx(c$8,{size:"md",weight:"bold",align:"center",mb:"16px",children:"아쉬웠던 점을 1개 이상 선택해 주세요."}),jsx(f$5.Group,{value:Dn,onChange:Jn,multiple:!0,children:jsx(m$5,{position:"center",mb:"24px",spacing:8,children:wn.map(ds=>jsx(f$5,{value:ds,size:"sm",radius:"xl",variant:"light",children:ds},ds))})})]}),!!Fn&&jsx(T$3,{maxRows:4,minRows:4,size:"sm",variant:"default",value:Nn,onChange:Zn,placeholder:"수강평을 작성해보세요! (5자 이상)"}),jsxs(m$5,{spacing:16,position:"apart",mt:"16px",grow:!0,children:[jsx(A$8,{size:"md",radius:"md",variant:"default",disabled:dn,onClick:rs,children:pn==null?void 0:pn.cancel}),jsx(A$8,{size:"md",radius:"md",variant:"filled",disabled:dn||as()||!(Pn!=null&&Pn({body:Nn,star:Fn,reasons:Dn})),onClick:ss,children:pn==null?void 0:pn.submit})]})]})}var faCheckCircle={},faCircleCheck={};(function(sn){Object.defineProperty(sn,"__esModule",{value:!0});var ln="fal",cn="circle-check",dn=512,pn=512,vn=[61533,"check-circle"],kn="f058",Sn="M256 32a224 224 0 1 1 0 448 224 224 0 1 1 0-448zm0 480A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM363.3 203.3c6.2-6.2 6.2-16.4 0-22.6s-16.4-6.2-22.6 0L224 297.4l-52.7-52.7c-6.2-6.2-16.4-6.2-22.6 0s-6.2 16.4 0 22.6l64 64c6.2 6.2 16.4 6.2 22.6 0l128-128z";sn.definition={prefix:ln,iconName:cn,icon:[dn,pn,vn,kn,Sn]},sn.faCircleCheck=sn.definition,sn.prefix=ln,sn.iconName=cn,sn.width=dn,sn.height=pn,sn.ligatures=vn,sn.unicode=kn,sn.svgPathData=Sn,sn.aliases=vn})(faCircleCheck);(function(sn){Object.defineProperty(sn,"__esModule",{value:!0});var ln=faCircleCheck;sn.definition={prefix:ln.prefix,iconName:ln.iconName,icon:[ln.width,ln.height,ln.aliases,ln.unicode,ln.svgPathData]},sn.faCheckCircle=sn.definition,sn.prefix=ln.prefix,sn.iconName=ln.iconName,sn.width=ln.width,sn.height=ln.height,sn.ligatures=ln.aliases,sn.unicode=ln.unicode,sn.svgPathData=ln.svgPathData,sn.aliases=ln.aliases})(faCheckCircle);function useModals(){const{open:sn,close:ln}=reactExports.useContext(ModalsDispatchContext);return{openModal:(pn,vn,kn)=>{const Sn=kn||nanoid();sn({Component:pn,props:{...vn||{},id:Sn,close:()=>ln(Sn)}})},closeModal:pn=>{ln(pn)}}}const colors={basicWhite:"#ffffff",basicGray50:"#fcfcfd",basicGray100:"#f8f9fa",basicGray200:"#f1f3f5",basicGray300:"#e9ebee",basicGray400:"#d5dbe2",basicGray500:"#abb0b5",basicGray600:"#858a8d",basicGray700:"#616568",basicGray800:"#3e4042",basicGray900:"#1b1c1d",primary100:"#EBFFF7",primary200:"#D5F5EB",primary300:"#B7EFD7",primary400:"#8BE4BE",primary500:"#00C471",primary600:"#00a65f",primary700:"#028c52",primary800:"#006a3d",primary900:"#07362A",primaryDisabled:"#B3EDD4",point100:"#FFF8B1",point200:"#FFE816",point300:"#FFC816",point400:"#FFA016",point500:"#FF8216",point600:"#FF6F16",point700:"#FF5B16",point800:"#FF645C",point900:"#C93B00",systemSuccess50:"#EBF4FF",systemSuccess100:"#157EFD",systemInfo50:"#EBFFF7",systemInfo100:"#00C471",systemWarning50:"#FFF0DA",systemWarning100:"#FFA016",systemDanger50:"#FFD7C7",systemDanger100:"#FF5B16",secondary:"#E5503C",star:"#FDCC0E",muteBlue:"#639CBF",muteOrange:"#D18E40",muteGreen:"#43D140"},body16={fontSize:"16px",lineHeight:1.5,letterSpacing:"-0.3px"},body15={fontSize:"15px",lineHeight:1.47,letterSpacing:"-0.3px"},body14={fontSize:"14px",lineHeight:1.43,letterSpacing:"-0.3px"},cssCommonButton={display:"inline-flex",alignItems:"center",justifyContent:"center",padding:"0 16px",height:"40px",border:"none",borderRadius:"3px",...body15,fontWeight:500,cursor:"pointer",color:"#000","&:disabled":{backgroundColor:`${colors.basicGray300} !important`,color:`${colors.basicWhite} !important`,border:"0 !important",boxShadow:"none !important",cursor:"default"}},styleCommonButton=css$1({...cssCommonButton},"",""),styleGray800Button=css$1({...cssCommonButton,background:colors.basicGray800,color:colors.basicWhite},"",""),styleOutlinedButton=css$1({...cssCommonButton,borderColor:"#dee2e6",border:"1px solid",background:"none"},"",""),styleResetButton={name:"ru28w9",styles:"margin:0;padding:0;display:inline-flex;align-items:center;justify-content:center;border:none;outline:none;background-color:transparent;cursor:pointer;color:white"},header24={fontSize:"24px",lineHeight:1.25,letterSpacing:"-0.3px"},header22={fontSize:"22px",lineHeight:1.45,letterSpacing:"-0.3px"},header20={fontSize:"20px",lineHeight:1.4,letterSpacing:"-0.3px"},header18={fontSize:"18px",lineHeight:1.4,letterSpacing:"-0.3px"};function UtilModalContent({icon:sn,isConfirm:ln,onCancel:cn,onConfirm:dn,description:pn,title:vn,confirmText:kn="확인",cancelText:Sn="취소"}){return jsxs("div",{css:styleModalContainer,children:[jsx("span",{css:styleModalIconWrapper,children:sn}),jsx("p",{css:styleModalTitle(!!pn),children:vn}),pn&&jsx("p",{css:styleModalDescription,children:pn}),jsxs("div",{css:styleModalButtons,children:[ln&&jsx("button",{type:"button",onClick:cn,css:[styleCommonButton,styleModalCancelButton,"",""],children:Sn}),jsx("button",{type:"button",onClick:dn,css:[styleCommonButton,styleModalConfirmButton,"",""],children:kn})]})]})}const styleModalContainer={name:"11en623",styles:"display:flex;flex-direction:column;align-items:center;justify-content:center"},styleModalIconWrapper={name:"1uc1l9l",styles:"width:56px;height:56px;margin-bottom:20px"},styleModalTitle=sn=>css$1({marginBottom:sn?"6px":"28px",...header22,fontWeight:500,color:"#212529",wordBreak:"keep-all",textAlign:"center"},"",""),styleModalDescription=css$1({marginBottom:"28px",...body16,color:"#343a40",textAlign:"center",wordBreak:"keep-all"},"",""),styleModalButtons={name:"zjik7",styles:"display:flex"},styleModalCancelButton=css$1({marginRight:"12px",backgroundColor:colors.basicWhite,color:"#454b54"},"",""),styleModalConfirmButton=css$1({backgroundColor:colors.primary500,color:colors.basicWhite,"&:hover":{backgroundColor:colors.primary600}},"",""),FOOTER_BAR_Z_INDEX=100,SIDE_BAR_Z_INDEX=100,TAB_ASIDE_Z_INDEX=99,MODAL_Z_INDEX=401;function BasicModal({contentLabel:sn,onCloseModal:ln,styleContent:cn,children:dn,shouldCloseOnOverlayClick:pn=!0}){return jsx(Modal$1,{shouldCloseOnOverlayClick:pn,isOpen:!0,onRequestClose:ln,contentLabel:sn,ariaHideApp:appConfig.MODE==="production",css:cn,style:{overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(11,19,30,.37)",zIndex:MODAL_Z_INDEX}},children:dn})}function UtilModal({isConfirm:sn,contentLabel:ln,onConfirm:cn,onCancel:dn,Icon:pn,title:vn,description:kn,close:Sn,confirmText:wn,cancelText:Pn,shouldCloseOnOverlayClick:Nn=!0}){const Ln=()=>{cn&&cn(),Sn()},Fn=()=>{dn&&dn(),Sn()};return jsx(BasicModal,{contentLabel:ln,onCloseModal:()=>{Sn(),Fn()},styleContent:styleModalWrapper,shouldCloseOnOverlayClick:Nn,children:jsx(UtilModalContent,{icon:pn,title:vn,description:kn,isConfirm:sn,onCancel:Fn,onConfirm:Ln,confirmText:wn,cancelText:Pn})})}const styleModalWrapper=css$1({padding:"38px 64px",width:"calc(100% - 40px)",maxWidth:"416px",minWidth:"320px",borderRadius:"4px",backgroundColor:colors.basicWhite},"","");function useCourseReviewThanksModal(){const sn=useAppSelector(kn=>kn.lecture.isMobileView),{openModal:ln}=useModals(),cn=useQueryClient(),dn=()=>ln(UtilModal,{isConfirm:!1,contentLabel:"수강평 성공 모달",onConfirm:()=>{cn.invalidateQueries(["myVoucher"])},title:"수강평을 남겨주셔서 감사합니다!",description:"앞으로 더 좋은 지식을 전달하도록 노력하겠습니다. 😊",Icon:jsx(I$a,{color:"infgreen",size:56,icon:faCheckCircle.faCheckCircle})}),pn=()=>y$6({title:"수강평을 남겨주셔서 감사합니다.",children:"앞으로 더 좋은 지식을 전달하도록 노력하겠습니다. ",labels:{confirm:"확인"},onConfirm:()=>{cn.invalidateQueries(["myVoucher"])}});return{openCourseReviewThanksModal:()=>sn?pn():dn()}}function WriteReviewModal({onClose:sn,isOpened:ln}){const{slug:cn,unitId:dn}=useLectureParams(),{data:pn}=useCourse(cn),{mutate:vn,isLoading:kn}=useV2ReviewCreateMutation({url:API_ENDPOINT.V2_REVIEW}),Sn=useQueryClient(),{showNotification:wn}=z$6(),{openCourseReviewThanksModal:Pn}=useCourseReviewThanksModal(),Nn=({body:Ln,star:Fn,reasons:zn})=>{pn&&vn({content:Ln,rating:Fn,courseId:pn.id,isPost:!1},{onSuccess:()=>{sn(),trackMixpanelEvent(eventNames.LECTURE_SUBMIT_REVIEW_ON_UNIT,{course_identification:pn.id,unit_id:dn,unit_review_tag:zn||[],my_star_rate:Fn,review_body:Ln}),Sn.invalidateQueries(["myVoucher"]),Pn(),trackEvent(eventNames.LECTURE_SAVE_REVIEW,{oneStarTag:zn})},onError:()=>{wn({id:"review-error",title:"일시적인 오류가 발생했습니다.",autoClose:!1,type:"error",message:jsx(ErrorNotification,{})})}})};return jsx(ReviewModal,{form:jsx(ReviewFormContext.Provider,{value:DEFAULT_VALUE,children:jsx(ReviewForm,{onCancel:sn,isLoading:kn,onSubmit:Nn,onChangeStars:()=>void trackEvent(eventNames.LECTURE_REVIEW_STARS_CLICK)})}),onClose:sn,isOpened:ln})}function useShortcutGuide(){return{openShortcutGuideModal:()=>{y$6({title:"단축키",size:380,withCloseButton:!0,closeOnClickOutside:!0,children:jsx(ShortcutTable,{}),labels:{confirm:"확인"}})}}}const SHORTCUTS=[{label:"재생 / 일시정지",shortcut:jsx(t$2,{children:"Space bar"})},{label:"배속 조정",shortcut:jsxs(m$5,{spacing:8,children:[jsx(t$2,{children:"<"}),jsx(t$2,{children:">"}),jsx(c$8,{component:"span",size:"md",weight:400,color:"gray.7",css:{name:"1989ovb",styles:"vertical-align:middle"},children:"Shift + , ."})]})},{label:"5초이동(연속 클릭: 10초)",shortcut:jsxs(m$5,{spacing:8,children:[jsx(t$2,{children:"←"}),jsx(t$2,{children:"→"}),jsx(c$8,{component:"span",size:"md",weight:400,color:"gray.7",ml:8,css:{name:"1989ovb",styles:"vertical-align:middle"},children:"방향키"})]})},{label:"음량 조절",shortcut:jsxs(m$5,{spacing:8,children:[jsx(t$2,{children:"↑"}),jsx(t$2,{children:"↓"}),jsx(c$8,{component:"span",size:"md",weight:400,color:"gray.7",ml:8,css:{name:"1989ovb",styles:"vertical-align:middle"},children:"방향키"})]})},{label:"음소거 ON / OFF",shortcut:jsx(t$2,{children:"m"})},{label:"자막 ON / OFF",shortcut:jsx(t$2,{children:"c"})},{label:"전체화면 / 해제",shortcut:jsxs(m$5,{spacing:8,children:[jsx(t$2,{children:"f"}),jsx("span",{children:"/"}),jsx(t$2,{children:"ESC"})]})},{label:"이전/다음 수업 이동",shortcut:jsxs(m$5,{spacing:8,children:[jsx(t$2,{children:"Shift"}),jsx("span",{children:"+"}),jsx(t$2,{children:"p"}),jsx("span",{children:"/"}),jsx(t$2,{children:"n"})]})}];var _ref$5={name:"1yvqaxf",styles:"width:134px;margin-left:auto"},_ref2$3={name:"1jb4mpp",styles:"padding:4px 0"};function ShortcutTable(){return jsx("div",{"aria-label":"shortcut-table",css:css$1({"& > * + *":{borderTop:`1px solid ${A$9.gray[4]}`}},"",""),children:SHORTCUTS.map(({label:sn,shortcut:ln})=>jsx("dl",{children:jsxs(m$5,{css:_ref2$3,children:[jsx("dt",{children:jsx(c$8,{size:"md",weight:400,color:"gray.7",children:sn})}),jsx("dd",{css:_ref$5,children:ln})]})},sn))})}var faExclamationTriangle={};function useConflictModal(){const sn=useAppSelector(vn=>vn.lecture.isMobileView),{openModal:ln}=useModals(),cn=({href:vn,title:kn})=>ln(UtilModal,{isConfirm:!1,contentLabel:"로그인 계정이 변경되었을 경우 알림 모달",title:kn,description:"강의 소개로 이동합니다.",Icon:jsx(I$a,{size:56,color:"orange.4",icon:faExclamationTriangle.faExclamationTriangle}),shouldCloseOnOverlayClick:!1,onConfirm:()=>{window.location.assign(vn)}}),dn=({href:vn,title:kn})=>y$6({title:kn,children:"강의 소개로 이동합니다.",labels:{confirm:"확인"},onConfirm:()=>{window.location.assign(vn)}});return{openConflictModal:vn=>sn?dn(vn):cn(vn)}}function useAlertModal(){const{openModal:sn}=useModals();return{warningAlert:({title:dn,description:pn,contentLabel:vn,shouldCloseOnOverlayClick:kn=!0,onConfirm:Sn=void 0})=>{sn(UtilModal,{isConfirm:!1,Icon:jsx(I$a,{size:56,color:"orange.4",icon:faExclamationTriangle.faExclamationTriangle}),title:dn,description:pn,contentLabel:vn,shouldCloseOnOverlayClick:kn,onConfirm:Sn})},successAlert:({title:dn,description:pn,contentLabel:vn,shouldCloseOnOverlayClick:kn=!0,onConfirm:Sn=void 0,onCancel:wn})=>{sn(UtilModal,{isConfirm:!1,Icon:jsx(I$a,{color:"infgreen",size:56,icon:faCheckCircle.faCheckCircle}),title:dn,description:pn,contentLabel:vn,shouldCloseOnOverlayClick:kn,onConfirm:Sn,onCancel:wn})}}}function useForbiddenModal(){const sn=useAppSelector(vn=>vn.lecture.isMobileView),{warningAlert:ln}=useAlertModal(),cn=()=>ln({title:"로그인 확인",description:"로그인 상태를 확인해주세요.",contentLabel:"로그인 유저가 아닐 시 에러 모달",shouldCloseOnOverlayClick:!0}),dn=()=>y$6({title:"로그인 확인",children:"로그인 후 이용해주세요.",labels:{confirm:"확인"}});return{openForbiddenModal:()=>sn?dn():cn()}}function useMultiStudyBlockModal(){const sn=useAppSelector(vn=>vn.lecture.isMobileView),{openModal:ln}=useModals(),cn=({href:vn,title:kn})=>ln(UtilModal,{isConfirm:!1,contentLabel:"동시 접속 경고 모달",title:kn,Icon:jsx(I$a,{size:56,color:"orange.4",icon:faExclamationTriangle.faExclamationTriangle}),onConfirm:()=>{window.location.assign(vn)},shouldCloseOnOverlayClick:!1}),dn=({href:vn,title:kn})=>y$6({title:kn,children:"다른 브라우저에서 학습을 시작했습니다. (한 계정으로 여러 명이 수강할 수 없습니다.)",labels:{confirm:"확인"},onConfirm:()=>{window.location.assign(vn)}});return{openMultiStudyBlockModal:vn=>sn?dn(vn):cn(vn)}}const useCompleteModal=()=>{const sn=useAppDispatch();return{openCompleteModal:()=>{sn(lectureActions.setIsCompleteModalOpened(!0))}}};function useRecommendReviewModal(){const sn=useAppDispatch();return{openRecommendReviewModal:cn=>{sn(lectureActions.setProgress(cn)),sn(lectureActions.setIsRecommendReviewModalOpened(!0))}}}function useUnit(sn,ln,cn){const dn=useNavigate();return useV2UnitIdQuery({queryKey:unitQueryKey(sn),url:`${API_ENDPOINT.V2_UNIT_ID(String(sn))}?${queryString$1.stringify({courseSlug:ln})}`,options:{enabled:!!sn,keepPreviousData:!0,onError:pn=>{pn instanceof ApiError&&pn.isNotFound&&dn("/not-found")},useErrorBoundary:pn=>pn instanceof ApiError?!pn.isNotFound:!0,...cn}})}const unitQueryKey=sn=>["units",sn];function isOver(sn){return(ln,cn)=>ln<sn&&cn>=sn}function useUpdateCurrentTime(){const sn=useAppDispatch(),{unitId:ln,slug:cn}=useLectureParams(),{instCode:dn}=useAppSelector(Kn=>Kn.lecture),{data:pn}=useUnit(ln,cn),{data:vn}=useMyVoucher(cn),{data:kn}=useSession(),{mutate:Sn}=useV2UnitCompleteCurrentTimeUpdateMutation({url:API_ENDPOINT.V2_UNIT_COMPLETE_CURRENT_TIME}),{openForbiddenModal:wn}=useForbiddenModal(),{openConflictModal:Pn}=useConflictModal(),{openMultiStudyBlockModal:Nn}=useMultiStudyBlockModal(),{openRecommendReviewModal:Ln}=useRecommendReviewModal(),{openCompleteModal:Fn}=useCompleteModal(),zn=useQueryClient();return{updateCurrentTime:({unitId:Kn,userId:qn,currentTime:Zn,prevRequestTime:Yn})=>{var rs;const Jn=(rs=pn==null?void 0:pn.complete)==null?void 0:rs.isComplete;vn!=null&&vn.hasVoucher&&Sn({unitId:Kn,userId:qn,currentTime:Zn,prevRequestTime:Yn},{onSuccess:({data:ss})=>{var Qn;if(isNil(ss))return;sn(lectureActions.setPrevRequestTime(ss.now));const as=Number(ss.prevProgress),ds=Number(ss.progress),Es=!!((Qn=vn==null?void 0:vn.voucher)!=null&&Qn.isReviewable)&&!(kn!=null&&kn.isBlocked);isOver(100)(as,ds)&&Fn(),Es&&isOver(30)(as,ds)?Ln(30):Es&&isOver(60)(as,ds)&&Ln(60),!Jn&&ss.isCompleted&&(trackMixpanelEvent(eventNames.LECTURE_CLICK_COMPLETES,{course_id:`${vn.id}`,unit_id:`${Kn}`,completes_type:"자동체크",progress:Number(Number(ds).toFixed(2))}),zn.invalidateQueries(["myVoucher"]),zn.invalidateQueries(["units",Kn]),zn.invalidateQueries(["curriculum",cn]))},onError:ss=>{console.error(ss);const as=vn!=null&&vn.hasVoucher?URL_COURSE_DASHBOARD(cn):URL_COURSE_DESCRIPTION(cn,dn);ss instanceof ApiError&&(ss.isUnauthorized&&wn(),ss.isConflict&&Pn({href:as,title:ss.message}),ss.isForbidden&&Nn({href:as,title:ss.message}),setTimeout(()=>{window.location.assign(as)},5e3))}})}}}var DEFAULT_REQUEST_ERROR_RESPONSE_LENGTH_LIMIT=32*ONE_KIBI_BYTE;function validateAndBuildLogsConfiguration(sn){var ln=validateAndBuildConfiguration(sn),cn=validateAndBuildForwardOption(sn.forwardConsoleLogs,objectValues(ConsoleApiName),"Forward Console Logs"),dn=validateAndBuildForwardOption(sn.forwardReports,objectValues(RawReportType),"Forward Reports");if(!(!ln||!cn||!dn))return sn.forwardErrorsToLogs&&!includes(cn,ConsoleApiName.error)&&cn.push(ConsoleApiName.error),assign$2({forwardErrorsToLogs:sn.forwardErrorsToLogs!==!1,forwardConsoleLogs:cn,forwardReports:dn,requestErrorResponseLengthLimit:DEFAULT_REQUEST_ERROR_RESPONSE_LENGTH_LIMIT},ln)}function validateAndBuildForwardOption(sn,ln,cn){if(sn===void 0)return[];if(!(sn==="all"||Array.isArray(sn)&&sn.every(function(dn){return includes(ln,dn)}))){display.error("".concat(cn,' should be "all" or an array with allowed values "').concat(ln.join('", "'),'"'));return}return sn==="all"?ln:removeDuplicates(sn)}function serializeLogsConfiguration(sn){var ln=serializeConfiguration(sn);return assign$2({forward_errors_to_logs:sn.forwardErrorsToLogs,forward_console_logs:sn.forwardConsoleLogs,forward_reports:sn.forwardReports},ln)}var __decorate=globalThis&&globalThis.__decorate||function(sn,ln,cn,dn){var pn=arguments.length,vn=pn<3?ln:dn===null?dn=Object.getOwnPropertyDescriptor(ln,cn):dn,kn;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")vn=Reflect.decorate(sn,ln,cn,dn);else for(var Sn=sn.length-1;Sn>=0;Sn--)(kn=sn[Sn])&&(vn=(pn<3?kn(vn):pn>3?kn(ln,cn,vn):kn(ln,cn))||vn);return pn>3&&vn&&Object.defineProperty(ln,cn,vn),vn},StatusType={debug:"debug",error:"error",info:"info",warn:"warn"},HandlerType={console:"console",http:"http",silent:"silent"},STATUSES=Object.keys(StatusType),Logger$1=function(){function sn(ln,cn,dn,pn,vn){dn===void 0&&(dn=HandlerType.http),pn===void 0&&(pn=StatusType.debug),vn===void 0&&(vn={}),this.handleLogStrategy=ln,this.handlerType=dn,this.level=pn,this.contextManager=createContextManager("logger context"),this.contextManager.set(assign$2({},vn,cn?{logger:{name:cn}}:void 0))}return sn.prototype.log=function(ln,cn,dn,pn){dn===void 0&&(dn=StatusType.info);var vn;if(dn===StatusType.error&&(vn={origin:ErrorSource.LOGGER}),pn!=null){var kn=pn instanceof Error?computeStackTrace(pn):void 0,Sn=computeRawError({stackTrace:kn,originalError:pn,nonErrorPrefix:"Provided",source:ErrorSource.LOGGER,handling:"handled",startClocks:clocksNow()});vn={origin:ErrorSource.LOGGER,stack:Sn.stack,kind:Sn.type,message:Sn.message}}var wn=sanitize(cn),Pn=vn?combine$1({error:vn},wn):wn;this.handleLogStrategy({message:sanitize(ln),context:Pn,status:dn},this)},sn.prototype.debug=function(ln,cn,dn){this.log(ln,cn,StatusType.debug,dn)},sn.prototype.info=function(ln,cn,dn){this.log(ln,cn,StatusType.info,dn)},sn.prototype.warn=function(ln,cn,dn){this.log(ln,cn,StatusType.warn,dn)},sn.prototype.error=function(ln,cn,dn){this.log(ln,cn,StatusType.error,dn)},sn.prototype.setContext=function(ln){this.contextManager.set(ln)},sn.prototype.getContext=function(){return this.contextManager.get()},sn.prototype.addContext=function(ln,cn){this.contextManager.add(ln,cn)},sn.prototype.removeContext=function(ln){this.contextManager.remove(ln)},sn.prototype.setHandler=function(ln){this.handlerType=ln},sn.prototype.getHandler=function(){return this.handlerType},sn.prototype.setLevel=function(ln){this.level=ln},sn.prototype.getLevel=function(){return this.level},__decorate([monitored],sn.prototype,"log",null),sn}();function makeLogsPublicApi(sn){var ln=!1,cn=createContextManager("global context"),dn=createContextManager("user"),pn={},vn=function(){},kn=new BoundedBuffer,Sn=function(zn,Dn,Kn,qn){Kn===void 0&&(Kn=deepClone(Nn())),qn===void 0&&(qn=timeStampNow()),kn.add(function(){return Sn(zn,Dn,Kn,qn)})},wn=function(){},Pn=new Logger$1(function(){for(var zn=[],Dn=0;Dn<arguments.length;Dn++)zn[Dn]=arguments[Dn];return Sn.apply(void 0,zn)});function Nn(){return{view:{referrer:document.referrer,url:window.location.href},context:cn.getContext(),user:dn.getContext()}}return makePublicApi({logger:Pn,init:monitor(function(zn){var Dn;if(wn=function(){return deepClone(zn)},canUseEventBridge()&&(zn=Ln(zn)),!!Fn(zn)){var Kn=validateAndBuildLogsConfiguration(zn);Kn&&(Dn=sn(zn,Kn,Nn,Pn),Sn=Dn.handleLog,vn=Dn.getInternalContext,kn.drain(),ln=!0)}}),getLoggerGlobalContext:monitor(cn.get),getGlobalContext:monitor(cn.getContext),setLoggerGlobalContext:monitor(cn.set),setGlobalContext:monitor(cn.setContext),addLoggerGlobalContext:monitor(cn.add),setGlobalContextProperty:monitor(cn.setContextProperty),removeLoggerGlobalContext:monitor(cn.remove),removeGlobalContextProperty:monitor(cn.removeContextProperty),clearGlobalContext:monitor(cn.clearContext),createLogger:monitor(function(zn,Dn){return Dn===void 0&&(Dn={}),pn[zn]=new Logger$1(function(){for(var Kn=[],qn=0;qn<arguments.length;qn++)Kn[qn]=arguments[qn];return Sn.apply(void 0,Kn)},sanitize(zn),Dn.handler,Dn.level,sanitize(Dn.context)),pn[zn]}),getLogger:monitor(function(zn){return pn[zn]}),getInitConfiguration:monitor(function(){return wn()}),getInternalContext:monitor(function(zn){return vn(zn)}),setUser:monitor(function(zn){checkUser(zn)&&dn.setContext(sanitizeUser$1(zn))}),getUser:monitor(dn.getContext),setUserProperty:monitor(function(zn,Dn){var Kn,qn=sanitizeUser$1((Kn={},Kn[zn]=Dn,Kn))[zn];dn.setContextProperty(zn,qn)}),removeUserProperty:monitor(dn.removeContextProperty),clearUser:monitor(dn.clearContext)});function Ln(zn){return assign$2({},zn,{clientToken:"empty"})}function Fn(zn){return ln?(zn.silentMultipleInit||display.error("DD_LOGS is already initialized."),!1):!0}}var LOGS_SESSION_KEY="logs";function startLogsSessionManager(sn){var ln=startSessionManager(sn.cookieOptions,LOGS_SESSION_KEY,function(cn){return computeSessionState(sn,cn)});return{findTrackedSession:function(cn){var dn=ln.findActiveSession(cn);return dn&&dn.trackingType==="1"?{id:dn.id}:void 0},expireObservable:ln.expireObservable}}function startLogsSessionManagerStub(sn){var ln=computeTrackingType(sn)==="1",cn=ln?{}:void 0;return{findTrackedSession:function(){return cn},expireObservable:new Observable}}function computeTrackingType(sn){return performDraw(sn.sessionSampleRate)?"1":"0"}function computeSessionState(sn,ln){var cn=hasValidLoggerSession(ln)?ln:computeTrackingType(sn);return{trackingType:cn,isTracked:cn==="1"}}function hasValidLoggerSession(sn){return sn==="0"||sn==="1"}var _a$2,STATUS_PRIORITIES=(_a$2={},_a$2[StatusType.debug]=0,_a$2[StatusType.info]=1,_a$2[StatusType.warn]=2,_a$2[StatusType.error]=3,_a$2);function startLoggerCollection(sn){function ln(cn,dn,pn,vn){var kn=cn.context;isAuthorized(cn.status,HandlerType.console,dn)&&display(cn.status,cn.message,combine$1(dn.getContext(),kn)),sn.notify(0,{rawLogsEvent:{date:vn||timeStampNow(),message:cn.message,status:cn.status,origin:ErrorSource.LOGGER},messageContext:kn,savedCommonContext:pn,logger:dn})}return{handleLog:ln}}function isAuthorized(sn,ln,cn){var dn=cn.getHandler(),pn=Array.isArray(dn)?dn:[dn];return STATUS_PRIORITIES[sn]>=STATUS_PRIORITIES[cn.getLevel()]&&includes(pn,ln)}function startLogsAssembly(sn,ln,cn,dn,pn,vn){var kn=STATUSES.concat(["custom"]),Sn={};kn.forEach(function(wn){Sn[wn]=createEventRateLimiter(wn,ln.eventRateLimiterThreshold,vn)}),cn.subscribe(0,function(wn){var Pn,Nn,Ln,Fn=wn.rawLogsEvent,zn=wn.messageContext,Dn=zn===void 0?void 0:zn,Kn=wn.savedCommonContext,qn=Kn===void 0?void 0:Kn,Zn=wn.logger,Yn=Zn===void 0?pn:Zn,Jn=getRelativeTime(Fn.date),rs=sn.findTrackedSession(Jn);if(rs){var ss=qn||dn(),as=combine$1({service:ln.service,session_id:rs.id,usr:isEmptyObject(ss.user)?void 0:ss.user,view:ss.view},ss.context,getRUMInternalContext(Jn),Fn,Yn.getContext(),Dn);!isAuthorized(Fn.status,HandlerType.http,Yn)||((Pn=ln.beforeSend)===null||Pn===void 0?void 0:Pn.call(ln,as))===!1||((Nn=as.error)===null||Nn===void 0?void 0:Nn.origin)!==ErrorSource.AGENT&&((Ln=Sn[as.status])!==null&&Ln!==void 0?Ln:Sn.custom).isLimitReached()||cn.notify(1,as)}})}var logsSentBeforeRumInjectionTelemetryAdded=!1;function getRUMInternalContext(sn){var ln=window;if(willSyntheticsInjectRum()){var cn=dn(ln.DD_RUM_SYNTHETICS);return!cn&&!logsSentBeforeRumInjectionTelemetryAdded&&(logsSentBeforeRumInjectionTelemetryAdded=!0,addTelemetryDebug("Logs sent before RUM is injected by the synthetics worker",{testId:getSyntheticsTestId(),resultId:getSyntheticsResultId()})),cn}return dn(ln.DD_RUM);function dn(pn){if(pn&&pn.getInternalContext)return pn.getInternalContext(sn)}}var _a$1,LogStatusForApi=(_a$1={},_a$1[ConsoleApiName.log]=StatusType.info,_a$1[ConsoleApiName.debug]=StatusType.debug,_a$1[ConsoleApiName.info]=StatusType.info,_a$1[ConsoleApiName.warn]=StatusType.warn,_a$1[ConsoleApiName.error]=StatusType.error,_a$1);function startConsoleCollection(sn,ln){var cn=initConsoleObservable(sn.forwardConsoleLogs).subscribe(function(dn){ln.notify(0,{rawLogsEvent:{date:timeStampNow(),message:dn.message,origin:ErrorSource.CONSOLE,error:dn.api===ConsoleApiName.error?{origin:ErrorSource.CONSOLE,stack:dn.stack,fingerprint:dn.fingerprint}:void 0,status:LogStatusForApi[dn.api]}})});return{stop:function(){cn.unsubscribe()}}}var _a,LogStatusForReport=(_a={},_a[RawReportType.cspViolation]=StatusType.error,_a[RawReportType.intervention]=StatusType.error,_a[RawReportType.deprecation]=StatusType.warn,_a);function startReportCollection(sn,ln){var cn=initReportObservable(sn.forwardReports).subscribe(function(dn){var pn=dn.message,vn=LogStatusForReport[dn.type],kn;vn===StatusType.error?kn={kind:dn.subtype,origin:ErrorSource.REPORT,stack:dn.stack}:dn.stack&&(pn+=" Found in ".concat(getFileFromStackTraceString(dn.stack))),ln.notify(0,{rawLogsEvent:{date:timeStampNow(),message:pn,origin:ErrorSource.REPORT,error:kn,status:vn}})});return{stop:function(){cn.unsubscribe()}}}function startNetworkErrorCollection(sn,ln){if(!sn.forwardErrorsToLogs)return{stop:noop$7};var cn=initXhrObservable().subscribe(function(vn){vn.state==="complete"&&pn("xhr",vn)}),dn=initFetchObservable().subscribe(function(vn){vn.state==="resolve"&&pn("fetch",vn)});function pn(vn,kn){!sn.isIntakeUrl(kn.url)&&(isRejected(kn)||isServerError(kn.status))&&("xhr"in kn?computeXhrResponseData(kn.xhr,sn,Sn):kn.response?computeFetchResponseText(kn.response,sn,Sn):kn.error&&computeFetchErrorText(kn.error,sn,Sn));function Sn(wn){ln.notify(0,{rawLogsEvent:{message:"".concat(format(vn)," error ").concat(kn.method," ").concat(kn.url),date:kn.startClocks.timeStamp,error:{origin:ErrorSource.NETWORK,stack:wn||"Failed to load"},http:{method:kn.method,status_code:kn.status,url:kn.url},status:StatusType.error,origin:ErrorSource.NETWORK}})}}return{stop:function(){cn.unsubscribe(),dn.unsubscribe()}}}function computeXhrResponseData(sn,ln,cn){typeof sn.response=="string"?cn(truncateResponseText(sn.response,ln)):cn(sn.response)}function computeFetchErrorText(sn,ln,cn){cn(truncateResponseText(toStackTraceString(computeStackTrace(sn)),ln))}function computeFetchResponseText(sn,ln,cn){var dn=tryToClone(sn);!dn||!dn.body?cn():window.TextDecoder?truncateResponseStream(dn.body,ln.requestErrorResponseLengthLimit,function(pn,vn){cn(pn?"Unable to retrieve response: ".concat(pn):vn)}):dn.text().then(monitor(function(pn){return cn(truncateResponseText(pn,ln))}),monitor(function(pn){return cn("Unable to retrieve response: ".concat(pn))}))}function isRejected(sn){return sn.status===0&&sn.responseType!=="opaque"}function truncateResponseText(sn,ln){return sn.length>ln.requestErrorResponseLengthLimit?"".concat(sn.substring(0,ln.requestErrorResponseLengthLimit),"..."):sn}function format(sn){return sn==="xhr"?"XHR":"Fetch"}function truncateResponseStream(sn,ln,cn){readBytesFromStream(sn,function(dn,pn,vn){if(dn)cn(dn);else{var kn=new TextDecoder().decode(pn);vn&&(kn+="..."),cn(void 0,kn)}},{bytesLimit:ln,collectStreamBody:!0})}function startRuntimeErrorCollection(sn,ln){if(!sn.forwardErrorsToLogs)return{stop:noop$7};var cn=new Observable,dn=trackRuntimeError(cn).stop,pn=cn.subscribe(function(vn){ln.notify(0,{rawLogsEvent:{message:vn.message,date:vn.startClocks.timeStamp,error:{kind:vn.type,origin:ErrorSource.SOURCE,stack:vn.stack},origin:ErrorSource.SOURCE,status:StatusType.error}})});return{stop:function(){dn(),pn.unsubscribe()}}}var LifeCycle=AbstractLifeCycle;function startLogsBatch(sn,ln,cn,dn,pn){var vn,kn=startBatchWithReplica(sn,sn.logsEndpointBuilder,cn,dn,pn,(vn=sn.replica)===null||vn===void 0?void 0:vn.logsEndpointBuilder);ln.subscribe(1,function(Sn){kn.add(Sn)})}function startLogsBridge(sn){var ln=getEventBridge();sn.subscribe(1,function(cn){ln.send("log",cn)})}function startInternalContext(sn){return{get:function(ln){var cn=sn.findTrackedSession(ln);if(cn)return{session_id:cn.id}}}}function startLogs(sn,ln,cn,dn){var pn=new LifeCycle;pn.subscribe(1,function(Ln){return sendToExtension("logs",Ln)});var vn=function(Ln){return pn.notify(0,{rawLogsEvent:{message:Ln.message,date:Ln.startClocks.timeStamp,error:{origin:ErrorSource.AGENT},origin:ErrorSource.AGENT,status:StatusType.error}})},kn=createPageExitObservable(),Sn=areCookiesAuthorized(ln.cookieOptions)&&!canUseEventBridge()&&!willSyntheticsInjectRum()?startLogsSessionManager(ln):startLogsSessionManagerStub(ln),wn=startLogsTelemetry(ln,vn,kn,Sn.expireObservable);wn.setContextProvider(function(){var Ln,Fn,zn,Dn,Kn,qn;return{application:{id:(Ln=getRUMInternalContext())===null||Ln===void 0?void 0:Ln.application_id},session:{id:(Fn=Sn.findTrackedSession())===null||Fn===void 0?void 0:Fn.id},view:{id:(Dn=(zn=getRUMInternalContext())===null||zn===void 0?void 0:zn.view)===null||Dn===void 0?void 0:Dn.id},action:{id:(qn=(Kn=getRUMInternalContext())===null||Kn===void 0?void 0:Kn.user_action)===null||qn===void 0?void 0:qn.id}}}),startNetworkErrorCollection(ln,pn),startRuntimeErrorCollection(ln,pn),startConsoleCollection(ln,pn),startReportCollection(ln,pn);var Pn=startLoggerCollection(pn).handleLog;startLogsAssembly(Sn,ln,pn,cn,dn,vn),canUseEventBridge()?startLogsBridge(pn):startLogsBatch(ln,pn,vn,kn,Sn.expireObservable),addTelemetryConfiguration(serializeLogsConfiguration(sn));var Nn=startInternalContext(Sn);return{handleLog:Pn,getInternalContext:Nn.get}}function startLogsTelemetry(sn,ln,cn,dn){var pn,vn=startTelemetry("browser-logs-sdk",sn);if(canUseEventBridge()){var kn=getEventBridge();vn.observable.subscribe(function(wn){return kn.send("internal_telemetry",wn)})}else{var Sn=startBatchWithReplica(sn,sn.rumEndpointBuilder,ln,cn,dn,(pn=sn.replica)===null||pn===void 0?void 0:pn.rumEndpointBuilder);vn.observable.subscribe(function(wn){return Sn.add(wn,isTelemetryReplicationAllowed(sn))})}return vn}var datadogLogs=makeLogsPublicApi(startLogs);defineGlobal(getGlobalObject$1(),"DD_LOGS",datadogLogs);const PLAYBACK_OVERLAY_FORWARD_CLASSNAME="forward--on",PLAYBACK_OVERLAY_BACKWARD_CLASSNAME="backward--on",showPlaybackOverlay=({playbackRate:sn,dir:ln})=>{let cn=null;return()=>{const dn=document.querySelector(".overlay__playback-rate"),pn=document.querySelector(".overlay__playback-rate__icon"),vn=document.querySelector(".overlay__playback-rate__speed");if(!pn&&!vn)return;vn.textContent=`${sn}x`;const kn=pn.cloneNode(!0),Sn=vn.cloneNode(!0);pn.remove(),vn.remove();const wn=document.createDocumentFragment();wn.appendChild(Sn),wn.appendChild(kn),dn==null||dn.appendChild(wn),kn&&(cn&&clearTimeout(cn),kn.classList.remove(PLAYBACK_OVERLAY_FORWARD_CLASSNAME,PLAYBACK_OVERLAY_BACKWARD_CLASSNAME),kn.classList.add(ln==="forward"?PLAYBACK_OVERLAY_FORWARD_CLASSNAME:PLAYBACK_OVERLAY_BACKWARD_CLASSNAME),kn.style.display="",Sn.style.display="",cn=setTimeout(()=>{kn.style.display="none",Sn.style.display="none",kn.classList.remove(ln==="forward"?PLAYBACK_OVERLAY_FORWARD_CLASSNAME:PLAYBACK_OVERLAY_BACKWARD_CLASSNAME),cn=null},500))}},VOD_SUBTITLE_VOD_SUBTITLE_ID=sn=>`${appConfig.APP_URL}/subtitles/${sn}/json`,VOD_SUBTITLE_VTT_VOD_SUBTITLE_ID=sn=>`${appConfig.APP_URL}/subtitles/${sn}/vtt`,fetchVodSubtitleVodSubtitleId=async(sn,ln)=>fetch(sn,ln).then(cn=>cn.json());function useVodSubtitleVodSubtitlesIdQuery({queryKey:sn,url:ln,options:cn,requestOptions:dn}){const pn=useQuery(sn,()=>fetchVodSubtitleVodSubtitleId(ln,dn),cn);return{...pn,data:pn.data}}const PlayerStateContext=reactExports.createContext(null),PlayerDispatchContext=reactExports.createContext({setPlayerContext:()=>{}}),PlayerProvider=({children:sn})=>{const[ln,cn]=reactExports.useState(null);return jsx(PlayerDispatchContext.Provider,{value:{setPlayerContext:cn},children:jsx(PlayerStateContext.Provider,{value:{player:ln},children:sn})})};function usePlayerContext(){const sn=reactExports.useContext(PlayerStateContext);if(!sn)throw new Error("usePlayer must be used within a PlayerProvider");return sn}const useDispatchPlayerContext=()=>{const sn=reactExports.useContext(PlayerDispatchContext);if(!sn)throw new Error("usePlayer must be used within a PlayerProvider");return sn},isIos=(sn,ln)=>!!["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].find(cn=>sn.includes(cn))||sn.includes("Mac")&&"ontouchend"in ln;var uaParser={exports:{}};uaParser.exports;(function(sn,ln){(function(cn,dn){var pn="1.0.35",vn="",kn="?",Sn="function",wn="undefined",Pn="object",Nn="string",Ln="major",Fn="model",zn="name",Dn="type",Kn="vendor",qn="version",Zn="architecture",Yn="console",Jn="mobile",rs="tablet",ss="smarttv",as="wearable",ds="embedded",Es=350,Ss="Amazon",Qn="Apple",ms="ASUS",Ts="BlackBerry",Rs="Browser",ys="Chrome",_s="Edge",js="Firefox",bs="Google",ks="Huawei",xs="LG",Ks="Microsoft",Vs="Motorola",Js="Opera",ru="Samsung",hs="Sharp",lu="Sony",_u="Xiaomi",yu="Zebra",Xu="Facebook",Du="Chromium OS",Fl="Mac OS",Vp=function(Fu,Eu){var el={};for(var pl in Fu)Eu[pl]&&Eu[pl].length%2===0?el[pl]=Eu[pl].concat(Fu[pl]):el[pl]=Fu[pl];return el},Ys=function(Fu){for(var Eu={},el=0;el<Fu.length;el++)Eu[Fu[el].toUpperCase()]=Fu[el];return Eu},vu=function(Fu,Eu){return typeof Fu===Nn?Wl(Eu).indexOf(Wl(Fu))!==-1:!1},Wl=function(Fu){return Fu.toLowerCase()},lp=function(Fu){return typeof Fu===Nn?Fu.replace(/[^\d\.]/g,vn).split(".")[0]:dn},am=function(Fu,Eu){if(typeof Fu===Nn)return Fu=Fu.replace(/^\s\s*/,vn),typeof Eu===wn?Fu:Fu.substring(0,Es)},fl=function(Fu,Eu){for(var el=0,pl,Xp,_p,Cu,Iu,Gp;el<Eu.length&&!Iu;){var Qp=Eu[el],wy=Eu[el+1];for(pl=Xp=0;pl<Qp.length&&!Iu&&Qp[pl];)if(Iu=Qp[pl++].exec(Fu),Iu)for(_p=0;_p<wy.length;_p++)Gp=Iu[++Xp],Cu=wy[_p],typeof Cu===Pn&&Cu.length>0?Cu.length===2?typeof Cu[1]==Sn?this[Cu[0]]=Cu[1].call(this,Gp):this[Cu[0]]=Cu[1]:Cu.length===3?typeof Cu[1]===Sn&&!(Cu[1].exec&&Cu[1].test)?this[Cu[0]]=Gp?Cu[1].call(this,Gp,Cu[2]):dn:this[Cu[0]]=Gp?Gp.replace(Cu[1],Cu[2]):dn:Cu.length===4&&(this[Cu[0]]=Gp?Cu[3].call(this,Gp.replace(Cu[1],Cu[2])):dn):this[Cu]=Gp||dn;el+=2}},Tu=function(Fu,Eu){for(var el in Eu)if(typeof Eu[el]===Pn&&Eu[el].length>0){for(var pl=0;pl<Eu[el].length;pl++)if(vu(Eu[el][pl],Fu))return el===kn?dn:el}else if(vu(Eu[el],Fu))return el===kn?dn:el;return Fu},cp={"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"},wp={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},ry={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[qn,[zn,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[qn,[zn,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[zn,qn],[/opios[\/ ]+([\w\.]+)/i],[qn,[zn,Js+" Mini"]],[/\bopr\/([\w\.]+)/i],[qn,[zn,Js]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[zn,qn],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[qn,[zn,"UC"+Rs]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i],[qn,[zn,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[qn,[zn,"WeChat"]],[/konqueror\/([\w\.]+)/i],[qn,[zn,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[qn,[zn,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[qn,[zn,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[zn,/(.+)/,"$1 Secure "+Rs],qn],[/\bfocus\/([\w\.]+)/i],[qn,[zn,js+" Focus"]],[/\bopt\/([\w\.]+)/i],[qn,[zn,Js+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[qn,[zn,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[qn,[zn,"Dolphin"]],[/coast\/([\w\.]+)/i],[qn,[zn,Js+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[qn,[zn,"MIUI "+Rs]],[/fxios\/([-\w\.]+)/i],[qn,[zn,js]],[/\bqihu|(qi?ho?o?|360)browser/i],[[zn,"360 "+Rs]],[/(oculus|samsung|sailfish|huawei)browser\/([\w\.]+)/i],[[zn,/(.+)/,"$1 "+Rs],qn],[/(comodo_dragon)\/([\w\.]+)/i],[[zn,/_/g," "],qn],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[zn,qn],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i,/\[(linkedin)app\]/i],[zn],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[zn,Xu],qn],[/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[zn,qn],[/\bgsa\/([\w\.]+) .*safari\//i],[qn,[zn,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[qn,[zn,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[qn,[zn,ys+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[zn,ys+" WebView"],qn],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[qn,[zn,"Android "+Rs]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[zn,qn],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[qn,[zn,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[qn,zn],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[zn,[qn,Tu,cp]],[/(webkit|khtml)\/([\w\.]+)/i],[zn,qn],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[zn,"Netscape"],qn],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[qn,[zn,js+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[zn,qn],[/(cobalt)\/([\w\.]+)/i],[zn,[qn,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[Zn,"amd64"]],[/(ia32(?=;))/i],[[Zn,Wl]],[/((?:i[346]|x)86)[;\)]/i],[[Zn,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[Zn,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[Zn,"armhf"]],[/windows (ce|mobile); ppc;/i],[[Zn,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[Zn,/ower/,vn,Wl]],[/(sun4\w)[;\)]/i],[[Zn,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[Zn,Wl]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[Fn,[Kn,ru],[Dn,rs]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[Fn,[Kn,ru],[Dn,Jn]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[Fn,[Kn,Qn],[Dn,Jn]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[Fn,[Kn,Qn],[Dn,rs]],[/(macintosh);/i],[Fn,[Kn,Qn]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[Fn,[Kn,hs],[Dn,Jn]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[Fn,[Kn,ks],[Dn,rs]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[Fn,[Kn,ks],[Dn,Jn]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[Fn,/_/g," "],[Kn,_u],[Dn,Jn]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[Fn,/_/g," "],[Kn,_u],[Dn,rs]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[Fn,[Kn,"OPPO"],[Dn,Jn]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[Fn,[Kn,"Vivo"],[Dn,Jn]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[Fn,[Kn,"Realme"],[Dn,Jn]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[Fn,[Kn,Vs],[Dn,Jn]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[Fn,[Kn,Vs],[Dn,rs]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[Fn,[Kn,xs],[Dn,rs]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[Fn,[Kn,xs],[Dn,Jn]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[Fn,[Kn,"Lenovo"],[Dn,rs]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[Fn,/_/g," "],[Kn,"Nokia"],[Dn,Jn]],[/(pixel c)\b/i],[Fn,[Kn,bs],[Dn,rs]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[Fn,[Kn,bs],[Dn,Jn]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[Fn,[Kn,lu],[Dn,Jn]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[Fn,"Xperia Tablet"],[Kn,lu],[Dn,rs]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[Fn,[Kn,"OnePlus"],[Dn,Jn]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[Fn,[Kn,Ss],[Dn,rs]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[Fn,/(.+)/g,"Fire Phone $1"],[Kn,Ss],[Dn,Jn]],[/(playbook);[-\w\),; ]+(rim)/i],[Fn,Kn,[Dn,rs]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[Fn,[Kn,Ts],[Dn,Jn]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[Fn,[Kn,ms],[Dn,rs]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[Fn,[Kn,ms],[Dn,Jn]],[/(nexus 9)/i],[Fn,[Kn,"HTC"],[Dn,rs]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[Kn,[Fn,/_/g," "],[Dn,Jn]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[Fn,[Kn,"Acer"],[Dn,rs]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[Fn,[Kn,"Meizu"],[Dn,Jn]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[Kn,Fn,[Dn,Jn]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[Kn,Fn,[Dn,rs]],[/(surface duo)/i],[Fn,[Kn,Ks],[Dn,rs]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[Fn,[Kn,"Fairphone"],[Dn,Jn]],[/(u304aa)/i],[Fn,[Kn,"AT&T"],[Dn,Jn]],[/\bsie-(\w*)/i],[Fn,[Kn,"Siemens"],[Dn,Jn]],[/\b(rct\w+) b/i],[Fn,[Kn,"RCA"],[Dn,rs]],[/\b(venue[\d ]{2,7}) b/i],[Fn,[Kn,"Dell"],[Dn,rs]],[/\b(q(?:mv|ta)\w+) b/i],[Fn,[Kn,"Verizon"],[Dn,rs]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[Fn,[Kn,"Barnes & Noble"],[Dn,rs]],[/\b(tm\d{3}\w+) b/i],[Fn,[Kn,"NuVision"],[Dn,rs]],[/\b(k88) b/i],[Fn,[Kn,"ZTE"],[Dn,rs]],[/\b(nx\d{3}j) b/i],[Fn,[Kn,"ZTE"],[Dn,Jn]],[/\b(gen\d{3}) b.+49h/i],[Fn,[Kn,"Swiss"],[Dn,Jn]],[/\b(zur\d{3}) b/i],[Fn,[Kn,"Swiss"],[Dn,rs]],[/\b((zeki)?tb.*\b) b/i],[Fn,[Kn,"Zeki"],[Dn,rs]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[Kn,"Dragon Touch"],Fn,[Dn,rs]],[/\b(ns-?\w{0,9}) b/i],[Fn,[Kn,"Insignia"],[Dn,rs]],[/\b((nxa|next)-?\w{0,9}) b/i],[Fn,[Kn,"NextBook"],[Dn,rs]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[Kn,"Voice"],Fn,[Dn,Jn]],[/\b(lvtel\-)?(v1[12]) b/i],[[Kn,"LvTel"],Fn,[Dn,Jn]],[/\b(ph-1) /i],[Fn,[Kn,"Essential"],[Dn,Jn]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[Fn,[Kn,"Envizen"],[Dn,rs]],[/\b(trio[-\w\. ]+) b/i],[Fn,[Kn,"MachSpeed"],[Dn,rs]],[/\btu_(1491) b/i],[Fn,[Kn,"Rotor"],[Dn,rs]],[/(shield[\w ]+) b/i],[Fn,[Kn,"Nvidia"],[Dn,rs]],[/(sprint) (\w+)/i],[Kn,Fn,[Dn,Jn]],[/(kin\.[onetw]{3})/i],[[Fn,/\./g," "],[Kn,Ks],[Dn,Jn]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[Fn,[Kn,yu],[Dn,rs]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[Fn,[Kn,yu],[Dn,Jn]],[/smart-tv.+(samsung)/i],[Kn,[Dn,ss]],[/hbbtv.+maple;(\d+)/i],[[Fn,/^/,"SmartTV"],[Kn,ru],[Dn,ss]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[Kn,xs],[Dn,ss]],[/(apple) ?tv/i],[Kn,[Fn,Qn+" TV"],[Dn,ss]],[/crkey/i],[[Fn,ys+"cast"],[Kn,bs],[Dn,ss]],[/droid.+aft(\w)( bui|\))/i],[Fn,[Kn,Ss],[Dn,ss]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[Fn,[Kn,hs],[Dn,ss]],[/(bravia[\w ]+)( bui|\))/i],[Fn,[Kn,lu],[Dn,ss]],[/(mitv-\w{5}) bui/i],[Fn,[Kn,_u],[Dn,ss]],[/Hbbtv.*(technisat) (.*);/i],[Kn,Fn,[Dn,ss]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[Kn,am],[Fn,am],[Dn,ss]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[Dn,ss]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[Kn,Fn,[Dn,Yn]],[/droid.+; (shield) bui/i],[Fn,[Kn,"Nvidia"],[Dn,Yn]],[/(playstation [345portablevi]+)/i],[Fn,[Kn,lu],[Dn,Yn]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[Fn,[Kn,Ks],[Dn,Yn]],[/((pebble))app/i],[Kn,Fn,[Dn,as]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[Fn,[Kn,Qn],[Dn,as]],[/droid.+; (glass) \d/i],[Fn,[Kn,bs],[Dn,as]],[/droid.+; (wt63?0{2,3})\)/i],[Fn,[Kn,yu],[Dn,as]],[/(quest( 2| pro)?)/i],[Fn,[Kn,Xu],[Dn,as]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[Kn,[Dn,ds]],[/(aeobc)\b/i],[Fn,[Kn,Ss],[Dn,ds]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[Fn,[Dn,Jn]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[Fn,[Dn,rs]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[Dn,rs]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[Dn,Jn]],[/(android[-\w\. ]{0,9});.+buil/i],[Fn,[Kn,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[qn,[zn,_s+"HTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[qn,[zn,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[zn,qn],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[qn,zn]],os:[[/microsoft (windows) (vista|xp)/i],[zn,qn],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[zn,[qn,Tu,wp]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[zn,"Windows"],[qn,Tu,wp]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/ios;fbsv\/([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[qn,/_/g,"."],[zn,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[zn,Fl],[qn,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[qn,zn],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[zn,qn],[/\(bb(10);/i],[qn,[zn,Ts]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[qn,[zn,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[qn,[zn,js+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[qn,[zn,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[qn,[zn,"watchOS"]],[/crkey\/([\d\.]+)/i],[qn,[zn,ys+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[zn,Du],qn],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[zn,qn],[/(sunos) ?([\w\.\d]*)/i],[[zn,"Solaris"],qn],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[zn,qn]]},vp=function(Fu,Eu){if(typeof Fu===Pn&&(Eu=Fu,Fu=dn),!(this instanceof vp))return new vp(Fu,Eu).getResult();var el=typeof cn!==wn&&cn.navigator?cn.navigator:dn,pl=Fu||(el&&el.userAgent?el.userAgent:vn),Xp=el&&el.userAgentData?el.userAgentData:dn,_p=Eu?Vp(ry,Eu):ry,Cu=el&&el.userAgent==pl;return this.getBrowser=function(){var Iu={};return Iu[zn]=dn,Iu[qn]=dn,fl.call(Iu,pl,_p.browser),Iu[Ln]=lp(Iu[qn]),Cu&&el&&el.brave&&typeof el.brave.isBrave==Sn&&(Iu[zn]="Brave"),Iu},this.getCPU=function(){var Iu={};return Iu[Zn]=dn,fl.call(Iu,pl,_p.cpu),Iu},this.getDevice=function(){var Iu={};return Iu[Kn]=dn,Iu[Fn]=dn,Iu[Dn]=dn,fl.call(Iu,pl,_p.device),Cu&&!Iu[Dn]&&Xp&&Xp.mobile&&(Iu[Dn]=Jn),Cu&&Iu[Fn]=="Macintosh"&&el&&typeof el.standalone!==wn&&el.maxTouchPoints&&el.maxTouchPoints>2&&(Iu[Fn]="iPad",Iu[Dn]=rs),Iu},this.getEngine=function(){var Iu={};return Iu[zn]=dn,Iu[qn]=dn,fl.call(Iu,pl,_p.engine),Iu},this.getOS=function(){var Iu={};return Iu[zn]=dn,Iu[qn]=dn,fl.call(Iu,pl,_p.os),Cu&&!Iu[zn]&&Xp&&Xp.platform!="Unknown"&&(Iu[zn]=Xp.platform.replace(/chrome os/i,Du).replace(/macos/i,Fl)),Iu},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return pl},this.setUA=function(Iu){return pl=typeof Iu===Nn&&Iu.length>Es?am(Iu,Es):Iu,this},this.setUA(pl),this};vp.VERSION=pn,vp.BROWSER=Ys([zn,qn,Ln]),vp.CPU=Ys([Zn]),vp.DEVICE=Ys([Fn,Kn,Dn,Yn,Jn,ss,rs,as,ds]),vp.ENGINE=vp.OS=Ys([zn,qn]),sn.exports&&(ln=sn.exports=vp),ln.UAParser=vp;var Qv=typeof cn!==wn&&(cn.jQuery||cn.Zepto);if(Qv&&!Qv.ua){var Jy=new vp;Qv.ua=Jy.getResult(),Qv.ua.get=function(){return Jy.getUA()},Qv.ua.set=function(Fu){Jy.setUA(Fu);var Eu=Jy.getResult();for(var el in Eu)Qv.ua[el]=Eu[el]}}})(typeof window=="object"?window:commonjsGlobal$1)})(uaParser,uaParser.exports);var uaParserExports=uaParser.exports;const UAParser$1=getDefaultExportFromCjs(uaParserExports),isSafari=sn=>{var cn;return(cn=new UAParser$1(sn).getBrowser().name)==null?void 0:cn.toLowerCase().includes("safari")};var shakaPlayer_ui={};/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/(function(sn){(function(){var ln=typeof window<"u"?window:commonjsGlobal$1,cn={};(function(pn,vn,kn){/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/var Sn;function wn(mn){var En=0;return function(){return En<mn.length?{done:!1,value:mn[En++]}:{done:!0}}}var Pn=typeof Object.defineProperties=="function"?Object.defineProperty:function(mn,En,xn){return mn==Array.prototype||mn==Object.prototype||(mn[En]=xn.value),mn};function Nn(mn){mn=[typeof globalThis=="object"&&globalThis,mn,typeof pn=="object"&&pn,typeof self=="object"&&self,typeof vn=="object"&&vn];for(var En=0;En<mn.length;++En){var xn=mn[En];if(xn&&xn.Math==Math)return xn}throw Error("Cannot find global object")}var Ln=Nn(this);function Fn(mn,En){if(En)e:{var xn=Ln;mn=mn.split(".");for(var An=0;An<mn.length-1;An++){var Mn=mn[An];if(!(Mn in xn))break e;xn=xn[Mn]}mn=mn[mn.length-1],An=xn[mn],En=En(An),En!=An&&En!=null&&Pn(xn,mn,{configurable:!0,writable:!0,value:En})}}Fn("Symbol",function(mn){function En(Un){if(this instanceof En)throw new TypeError("Symbol is not a constructor");return new xn(An+(Un||"")+"_"+Mn++,Un)}function xn(Un,Bn){this.g=Un,Pn(this,"description",{configurable:!0,writable:!0,value:Bn})}if(mn)return mn;xn.prototype.toString=function(){return this.g};var An="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",Mn=0;return En}),Fn("Symbol.iterator",function(mn){if(mn)return mn;mn=Symbol("Symbol.iterator");for(var En="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),xn=0;xn<En.length;xn++){var An=Ln[En[xn]];typeof An=="function"&&typeof An.prototype[mn]!="function"&&Pn(An.prototype,mn,{configurable:!0,writable:!0,value:function(){return zn(wn(this))}})}return mn});function zn(mn){return mn={next:mn},mn[Symbol.iterator]=function(){return this},mn}function Dn(mn){var En=typeof Symbol<"u"&&Symbol.iterator&&mn[Symbol.iterator];return En?En.call(mn):{next:wn(mn)}}function Kn(mn){if(!(mn instanceof Array)){mn=Dn(mn);for(var En,xn=[];!(En=mn.next()).done;)xn.push(En.value);mn=xn}return mn}var qn=typeof Object.create=="function"?Object.create:function(mn){function En(){}return En.prototype=mn,new En},Zn;if(typeof Object.setPrototypeOf=="function")Zn=Object.setPrototypeOf;else{var Yn;e:{var Jn={a:!0},rs={};try{rs.__proto__=Jn,Yn=rs.a;break e}catch{}Yn=!1}Zn=Yn?function(mn,En){if(mn.__proto__=En,mn.__proto__!==En)throw new TypeError(mn+" is not extensible");return mn}:null}var ss=Zn;function as(mn,En){if(mn.prototype=qn(En.prototype),mn.prototype.constructor=mn,ss)ss(mn,En);else for(var xn in En)if(xn!="prototype")if(Object.defineProperties){var An=Object.getOwnPropertyDescriptor(En,xn);An&&Object.defineProperty(mn,xn,An)}else mn[xn]=En[xn];mn.uj=En.prototype}function ds(){this.s=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.C=this.i=null}function Es(mn){if(mn.s)throw new TypeError("Generator is already running");mn.s=!0}ds.prototype.B=function(mn){this.h=mn};function Ss(mn,En){mn.i={Ef:En,Nf:!0},mn.g=mn.m||mn.j}ds.prototype.return=function(mn){this.i={return:mn},this.g=this.j};function Qn(mn,En,xn){return mn.g=xn,{value:En}}ds.prototype.D=function(mn){this.g=mn};function ms(mn){mn.g=0}function Ts(mn,En,xn){mn.m=En,xn!=null&&(mn.j=xn)}function Rs(mn){mn.m=0,mn.j=2}function ys(mn,En,xn){mn.g=En,mn.m=xn||0}function _s(mn,En){return mn.m=En||0,En=mn.i.Ef,mn.i=null,En}function js(mn){mn.C=[mn.i],mn.m=0,mn.j=0}function bs(mn,En){var xn=mn.C.splice(0)[0];(xn=mn.i=mn.i||xn)?xn.Nf?mn.g=mn.m||mn.j:xn.D!=null&&mn.j<xn.D?(mn.g=xn.D,mn.i=null):mn.g=mn.j:mn.g=En}function ks(mn){this.g=new ds,this.h=mn}function xs(mn,En){Es(mn.g);var xn=mn.g.l;return xn?Ks(mn,"return"in xn?xn.return:function(An){return{value:An,done:!0}},En,mn.g.return):(mn.g.return(En),Vs(mn))}function Ks(mn,En,xn,An){try{var Mn=En.call(mn.g.l,xn);if(!(Mn instanceof Object))throw new TypeError("Iterator result "+Mn+" is not an object");if(!Mn.done)return mn.g.s=!1,Mn;var Un=Mn.value}catch(Bn){return mn.g.l=null,Ss(mn.g,Bn),Vs(mn)}return mn.g.l=null,An.call(mn.g,Un),Vs(mn)}function Vs(mn){for(;mn.g.g;)try{var En=mn.h(mn.g);if(En)return mn.g.s=!1,{value:En.value,done:!1}}catch(xn){mn.g.h=void 0,Ss(mn.g,xn)}if(mn.g.s=!1,mn.g.i){if(En=mn.g.i,mn.g.i=null,En.Nf)throw En.Ef;return{value:En.return,done:!0}}return{value:void 0,done:!0}}function Js(mn){this.next=function(En){return Es(mn.g),mn.g.l?En=Ks(mn,mn.g.l.next,En,mn.g.B):(mn.g.B(En),En=Vs(mn)),En},this.throw=function(En){return Es(mn.g),mn.g.l?En=Ks(mn,mn.g.l.throw,En,mn.g.B):(Ss(mn.g,En),En=Vs(mn)),En},this.return=function(En){return xs(mn,En)},this[Symbol.iterator]=function(){return this}}function ru(mn){function En(An){return mn.next(An)}function xn(An){return mn.throw(An)}return new Promise(function(An,Mn){function Un(Bn){Bn.done?An(Bn.value):Promise.resolve(Bn.value).then(En,xn).then(Un,Mn)}Un(mn.next())})}function hs(mn){return ru(new Js(new ks(mn)))}function lu(){for(var mn=Number(this),En=[],xn=mn;xn<arguments.length;xn++)En[xn-mn]=arguments[xn];return En}Fn("Promise",function(mn){function En(Bn){this.h=0,this.i=void 0,this.g=[],this.s=!1;var Gn=this.j();try{Bn(Gn.resolve,Gn.reject)}catch(Wn){Gn.reject(Wn)}}function xn(){this.g=null}function An(Bn){return Bn instanceof En?Bn:new En(function(Gn){Gn(Bn)})}if(mn)return mn;xn.prototype.h=function(Bn){if(this.g==null){this.g=[];var Gn=this;this.i(function(){Gn.l()})}this.g.push(Bn)};var Mn=Ln.setTimeout;xn.prototype.i=function(Bn){Mn(Bn,0)},xn.prototype.l=function(){for(;this.g&&this.g.length;){var Bn=this.g;this.g=[];for(var Gn=0;Gn<Bn.length;++Gn){var Wn=Bn[Gn];Bn[Gn]=null;try{Wn()}catch(ts){this.j(ts)}}}this.g=null},xn.prototype.j=function(Bn){this.i(function(){throw Bn})},En.prototype.j=function(){function Bn(ts){return function(os){Wn||(Wn=!0,ts.call(Gn,os))}}var Gn=this,Wn=!1;return{resolve:Bn(this.H),reject:Bn(this.l)}},En.prototype.H=function(Bn){if(Bn===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(Bn instanceof En)this.J(Bn);else{e:switch(typeof Bn){case"object":var Gn=Bn!=null;break e;case"function":Gn=!0;break e;default:Gn=!1}Gn?this.G(Bn):this.m(Bn)}},En.prototype.G=function(Bn){var Gn=void 0;try{Gn=Bn.then}catch(Wn){this.l(Wn);return}typeof Gn=="function"?this.K(Gn,Bn):this.m(Bn)},En.prototype.l=function(Bn){this.B(2,Bn)},En.prototype.m=function(Bn){this.B(1,Bn)},En.prototype.B=function(Bn,Gn){if(this.h!=0)throw Error("Cannot settle("+Bn+", "+Gn+"): Promise already settled in state"+this.h);this.h=Bn,this.i=Gn,this.h===2&&this.I(),this.C()},En.prototype.I=function(){var Bn=this;Mn(function(){if(Bn.F()){var Gn=Ln.console;typeof Gn<"u"&&Gn.error(Bn.i)}},1)},En.prototype.F=function(){if(this.s)return!1;var Bn=Ln.CustomEvent,Gn=Ln.Event,Wn=Ln.dispatchEvent;return typeof Wn>"u"?!0:(typeof Bn=="function"?Bn=new Bn("unhandledrejection",{cancelable:!0}):typeof Gn=="function"?Bn=new Gn("unhandledrejection",{cancelable:!0}):(Bn=Ln.document.createEvent("CustomEvent"),Bn.initCustomEvent("unhandledrejection",!1,!0,Bn)),Bn.promise=this,Bn.reason=this.i,Wn(Bn))},En.prototype.C=function(){if(this.g!=null){for(var Bn=0;Bn<this.g.length;++Bn)Un.h(this.g[Bn]);this.g=null}};var Un=new xn;return En.prototype.J=function(Bn){var Gn=this.j();Bn.od(Gn.resolve,Gn.reject)},En.prototype.K=function(Bn,Gn){var Wn=this.j();try{Bn.call(Gn,Wn.resolve,Wn.reject)}catch(ts){Wn.reject(ts)}},En.prototype.then=function(Bn,Gn){function Wn(ls,gs){return typeof ls=="function"?function(ws){try{ts(ls(ws))}catch(Ns){os(Ns)}}:gs}var ts,os,cs=new En(function(ls,gs){ts=ls,os=gs});return this.od(Wn(Bn,ts),Wn(Gn,os)),cs},En.prototype.catch=function(Bn){return this.then(void 0,Bn)},En.prototype.od=function(Bn,Gn){function Wn(){switch(ts.h){case 1:Bn(ts.i);break;case 2:Gn(ts.i);break;default:throw Error("Unexpected state: "+ts.h)}}var ts=this;this.g==null?Un.h(Wn):this.g.push(Wn),this.s=!0},En.resolve=An,En.reject=function(Bn){return new En(function(Gn,Wn){Wn(Bn)})},En.race=function(Bn){return new En(function(Gn,Wn){for(var ts=Dn(Bn),os=ts.next();!os.done;os=ts.next())An(os.value).od(Gn,Wn)})},En.all=function(Bn){var Gn=Dn(Bn),Wn=Gn.next();return Wn.done?An([]):new En(function(ts,os){function cs(ws){return function(Ns){ls[ws]=Ns,gs--,gs==0&&ts(ls)}}var ls=[],gs=0;do ls.push(void 0),gs++,An(Wn.value).od(cs(ls.length-1),os),Wn=Gn.next();while(!Wn.done)})},En});function _u(mn,En){return Object.prototype.hasOwnProperty.call(mn,En)}Fn("WeakMap",function(mn){function En(Wn){if(this.g=(Gn+=Math.random()+1).toString(),Wn){Wn=Dn(Wn);for(var ts;!(ts=Wn.next()).done;)ts=ts.value,this.set(ts[0],ts[1])}}function xn(){}function An(Wn){var ts=typeof Wn;return ts==="object"&&Wn!==null||ts==="function"}function Mn(Wn){if(!_u(Wn,Bn)){var ts=new xn;Pn(Wn,Bn,{value:ts})}}function Un(Wn){var ts=Object[Wn];ts&&(Object[Wn]=function(os){return os instanceof xn?os:(Object.isExtensible(os)&&Mn(os),ts(os))})}if(function(){if(!mn||!Object.seal)return!1;try{var Wn=Object.seal({}),ts=Object.seal({}),os=new mn([[Wn,2],[ts,3]]);return os.get(Wn)!=2||os.get(ts)!=3?!1:(os.delete(Wn),os.set(ts,4),!os.has(Wn)&&os.get(ts)==4)}catch{return!1}}())return mn;var Bn="$jscomp_hidden_"+Math.random();Un("freeze"),Un("preventExtensions"),Un("seal");var Gn=0;return En.prototype.set=function(Wn,ts){if(!An(Wn))throw Error("Invalid WeakMap key");if(Mn(Wn),!_u(Wn,Bn))throw Error("WeakMap key fail: "+Wn);return Wn[Bn][this.g]=ts,this},En.prototype.get=function(Wn){return An(Wn)&&_u(Wn,Bn)?Wn[Bn][this.g]:void 0},En.prototype.has=function(Wn){return An(Wn)&&_u(Wn,Bn)&&_u(Wn[Bn],this.g)},En.prototype.delete=function(Wn){return An(Wn)&&_u(Wn,Bn)&&_u(Wn[Bn],this.g)?delete Wn[Bn][this.g]:!1},En}),Fn("Map",function(mn){function En(){var Gn={};return Gn.mb=Gn.next=Gn.head=Gn}function xn(Gn,Wn){var ts=Gn.g;return zn(function(){if(ts){for(;ts.head!=Gn.g;)ts=ts.mb;for(;ts.next!=ts.head;)return ts=ts.next,{done:!1,value:Wn(ts)};ts=null}return{done:!0,value:void 0}})}function An(Gn,Wn){var ts=Wn&&typeof Wn;ts=="object"||ts=="function"?Un.has(Wn)?ts=Un.get(Wn):(ts=""+ ++Bn,Un.set(Wn,ts)):ts="p_"+Wn;var os=Gn.h[ts];if(os&&_u(Gn.h,ts))for(Gn=0;Gn<os.length;Gn++){var cs=os[Gn];if(Wn!==Wn&&cs.key!==cs.key||Wn===cs.key)return{id:ts,list:os,index:Gn,wa:cs}}return{id:ts,list:os,index:-1,wa:void 0}}function Mn(Gn){if(this.h={},this.g=En(),this.size=0,Gn){Gn=Dn(Gn);for(var Wn;!(Wn=Gn.next()).done;)Wn=Wn.value,this.set(Wn[0],Wn[1])}}if(function(){if(!mn||typeof mn!="function"||!mn.prototype.entries||typeof Object.seal!="function")return!1;try{var Gn=Object.seal({x:4}),Wn=new mn(Dn([[Gn,"s"]]));if(Wn.get(Gn)!="s"||Wn.size!=1||Wn.get({x:4})||Wn.set({x:4},"t")!=Wn||Wn.size!=2)return!1;var ts=Wn.entries(),os=ts.next();return os.done||os.value[0]!=Gn||os.value[1]!="s"?!1:(os=ts.next(),!(os.done||os.value[0].x!=4||os.value[1]!="t"||!ts.next().done))}catch{return!1}}())return mn;var Un=new WeakMap;Mn.prototype.set=function(Gn,Wn){Gn=Gn===0?0:Gn;var ts=An(this,Gn);return ts.list||(ts.list=this.h[ts.id]=[]),ts.wa?ts.wa.value=Wn:(ts.wa={next:this.g,mb:this.g.mb,head:this.g,key:Gn,value:Wn},ts.list.push(ts.wa),this.g.mb.next=ts.wa,this.g.mb=ts.wa,this.size++),this},Mn.prototype.delete=function(Gn){return Gn=An(this,Gn),Gn.wa&&Gn.list?(Gn.list.splice(Gn.index,1),Gn.list.length||delete this.h[Gn.id],Gn.wa.mb.next=Gn.wa.next,Gn.wa.next.mb=Gn.wa.mb,Gn.wa.head=null,this.size--,!0):!1},Mn.prototype.clear=function(){this.h={},this.g=this.g.mb=En(),this.size=0},Mn.prototype.has=function(Gn){return!!An(this,Gn).wa},Mn.prototype.get=function(Gn){return(Gn=An(this,Gn).wa)&&Gn.value},Mn.prototype.entries=function(){return xn(this,function(Gn){return[Gn.key,Gn.value]})},Mn.prototype.keys=function(){return xn(this,function(Gn){return Gn.key})},Mn.prototype.values=function(){return xn(this,function(Gn){return Gn.value})},Mn.prototype.forEach=function(Gn,Wn){for(var ts=this.entries(),os;!(os=ts.next()).done;)os=os.value,Gn.call(Wn,os[1],os[0],this)},Mn.prototype[Symbol.iterator]=Mn.prototype.entries;var Bn=0;return Mn});function yu(mn,En){mn instanceof String&&(mn+="");var xn=0,An=!1,Mn={next:function(){if(!An&&xn<mn.length){var Un=xn++;return{value:En(Un,mn[Un]),done:!1}}return An=!0,{done:!0,value:void 0}}};return Mn[Symbol.iterator]=function(){return Mn},Mn}Fn("Array.prototype.keys",function(mn){return mn||function(){return yu(this,function(En){return En})}}),Fn("Set",function(mn){function En(xn){if(this.g=new Map,xn){xn=Dn(xn);for(var An;!(An=xn.next()).done;)this.add(An.value)}this.size=this.g.size}return function(){if(!mn||typeof mn!="function"||!mn.prototype.entries||typeof Object.seal!="function")return!1;try{var xn=Object.seal({x:4}),An=new mn(Dn([xn]));if(!An.has(xn)||An.size!=1||An.add(xn)!=An||An.size!=1||An.add({x:4})!=An||An.size!=2)return!1;var Mn=An.entries(),Un=Mn.next();return Un.done||Un.value[0]!=xn||Un.value[1]!=xn?!1:(Un=Mn.next(),Un.done||Un.value[0]==xn||Un.value[0].x!=4||Un.value[1]!=Un.value[0]?!1:Mn.next().done)}catch{return!1}}()?mn:(En.prototype.add=function(xn){return xn=xn===0?0:xn,this.g.set(xn,xn),this.size=this.g.size,this},En.prototype.delete=function(xn){return xn=this.g.delete(xn),this.size=this.g.size,xn},En.prototype.clear=function(){this.g.clear(),this.size=0},En.prototype.has=function(xn){return this.g.has(xn)},En.prototype.entries=function(){return this.g.entries()},En.prototype.values=function(){return this.g.values()},En.prototype.keys=En.prototype.values,En.prototype[Symbol.iterator]=En.prototype.values,En.prototype.forEach=function(xn,An){var Mn=this;this.g.forEach(function(Un){return xn.call(An,Un,Un,Mn)})},En)}),Fn("Array.from",function(mn){return mn||function(En,xn,An){xn=xn??function(Gn){return Gn};var Mn=[],Un=typeof Symbol<"u"&&Symbol.iterator&&En[Symbol.iterator];if(typeof Un=="function"){En=Un.call(En);for(var Bn=0;!(Un=En.next()).done;)Mn.push(xn.call(An,Un.value,Bn++))}else for(Un=En.length,Bn=0;Bn<Un;Bn++)Mn.push(xn.call(An,En[Bn],Bn));return Mn}});function Xu(mn,En,xn){mn instanceof String&&(mn=String(mn));for(var An=mn.length,Mn=0;Mn<An;Mn++){var Un=mn[Mn];if(En.call(xn,Un,Mn,mn))return{Lf:Mn,v:Un}}return{Lf:-1,v:void 0}}Fn("Array.prototype.findIndex",function(mn){return mn||function(En,xn){return Xu(this,En,xn).Lf}}),Fn("Object.is",function(mn){return mn||function(En,xn){return En===xn?En!==0||1/En===1/xn:En!==En&&xn!==xn}}),Fn("Array.prototype.includes",function(mn){return mn||function(En,xn){var An=this;An instanceof String&&(An=String(An));var Mn=An.length;for(xn=xn||0,0>xn&&(xn=Math.max(xn+Mn,0));xn<Mn;xn++){var Un=An[xn];if(Un===En||Object.is(Un,En))return!0}return!1}});function Du(mn,En,xn){if(mn==null)throw new TypeError("The 'this' value for String.prototype."+xn+" must not be null or undefined");if(En instanceof RegExp)throw new TypeError("First argument to String.prototype."+xn+" must not be a regular expression");return mn+""}Fn("String.prototype.includes",function(mn){return mn||function(En,xn){return Du(this,En,"includes").indexOf(En,xn||0)!==-1}}),Fn("Array.prototype.find",function(mn){return mn||function(En,xn){return Xu(this,En,xn).v}}),Fn("String.prototype.startsWith",function(mn){return mn||function(En,xn){var An=Du(this,En,"startsWith"),Mn=An.length,Un=En.length;xn=Math.max(0,Math.min(xn|0,An.length));for(var Bn=0;Bn<Un&&xn<Mn;)if(An[xn++]!=En[Bn++])return!1;return Bn>=Un}});var Fl=typeof Object.assign=="function"?Object.assign:function(mn,En){for(var xn=1;xn<arguments.length;xn++){var An=arguments[xn];if(An)for(var Mn in An)_u(An,Mn)&&(mn[Mn]=An[Mn])}return mn};Fn("Object.assign",function(mn){return mn||Fl}),Fn("Array.prototype.values",function(mn){return mn||function(){return yu(this,function(En,xn){return xn})}}),Fn("Promise.prototype.finally",function(mn){return mn||function(En){return this.then(function(xn){return Promise.resolve(En()).then(function(){return xn})},function(xn){return Promise.resolve(En()).then(function(){throw xn})})}}),Fn("Array.prototype.entries",function(mn){return mn||function(){return yu(this,function(En,xn){return[En,xn]})}}),Fn("String.prototype.repeat",function(mn){return mn||function(En){var xn=Du(this,null,"repeat");if(0>En||1342177279<En)throw new RangeError("Invalid count value");En|=0;for(var An="";En;)En&1&&(An+=xn),(En>>>=1)&&(xn+=xn);return An}}),Fn("Number.isNaN",function(mn){return mn||function(En){return typeof En=="number"&&isNaN(En)}}),Fn("Object.values",function(mn){return mn||function(En){var xn=[],An;for(An in En)_u(En,An)&&xn.push(En[An]);return xn}}),Fn("Math.log2",function(mn){return mn||function(En){return Math.log(En)/Math.LN2}}),Fn("Math.trunc",function(mn){return mn||function(En){if(En=Number(En),isNaN(En)||En===1/0||En===-1/0||En===0)return En;var xn=Math.floor(Math.abs(En));return 0>En?-xn:xn}}),Fn("Object.entries",function(mn){return mn||function(En){var xn=[],An;for(An in En)_u(En,An)&&xn.push([An,En[An]]);return xn}});var Vp=this||self;function Ys(mn,En){mn=mn.split(".");var xn=Vp;mn[0]in xn||typeof xn.execScript>"u"||xn.execScript("var "+mn[0]);for(var An;mn.length&&(An=mn.shift());)mn.length||En===void 0?xn[An]&&xn[An]!==Object.prototype[An]?xn=xn[An]:xn=xn[An]={}:xn[An]=En}function vu(mn,En){if(En)if(En instanceof Map)for(var xn=Dn(En.keys()),An=xn.next();!An.done;An=xn.next())An=An.value,Object.defineProperty(this,An,{value:En.get(An),writable:!0,enumerable:!0});else for(xn in En)Object.defineProperty(this,xn,{value:En[xn],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=pn.performance&&pn.performance.now?pn.performance.now():Date.now(),this.type=mn,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function Wl(mn){var En=new vu(mn.type),xn;for(xn in mn)Object.defineProperty(En,xn,{value:mn[xn],writable:!0,enumerable:!0});return En}vu.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},vu.prototype.stopImmediatePropagation=function(){this.g=!0},vu.prototype.stopPropagation=function(){},Ys("shaka.util.FakeEvent",vu);var lp={Vh:"abrstatuschanged",Wh:"adaptation",Xh:"buffering",$h:"downloadfailed",ai:"downloadheadersreceived",bi:"drmsessionupdate",ki:"emsg",Ni:"prft",Error:"error",li:"expirationupdated",oi:"gapjumped",si:"loaded",ti:"loading",Bi:"manifestparsed",Ci:"mediaqualitychanged",Metadata:"metadata",Hi:"onstatechange",Ii:"onstateidle",Si:"ratechange",Yi:"segmentappended",Zi:"sessiondata",$i:"stalldetected",aj:"streaming",bj:"textchanged",cj:"texttrackvisibility",dj:"timelineregionadded",ej:"timelineregionenter",fj:"timelineregionexit",gj:"trackschanged",lj:"unloading",nj:"variantchanged"};function am(){}function fl(){}function Tu(){}function cp(mn){var En=lu.apply(1,arguments);Jy.has(mn)||(Jy.add(mn),Tu.apply(am,Kn(En)))}function wp(){}function ry(){}function vp(){}function Qv(){}var Jy=new Set;pn.console&&(Tu=function(){return console.warn.apply(console,Kn(lu.apply(0,arguments)))},fl=function(){console.error.apply(console,Kn(lu.apply(0,arguments)))});function Fu(){this.g={}}Sn=Fu.prototype,Sn.push=function(mn,En){this.g.hasOwnProperty(mn)?this.g[mn].push(En):this.g[mn]=[En]},Sn.get=function(mn){return(mn=this.g[mn])?mn.slice():null},Sn.remove=function(mn,En){mn in this.g&&(this.g[mn]=this.g[mn].filter(function(xn){return xn!=En}),this.g[mn].length==0&&delete this.g[mn])},Sn.forEach=function(mn){for(var En in this.g)mn(En,this.g[En])},Sn.size=function(){return Object.keys(this.g).length},Sn.keys=function(){return Object.keys(this.g)};function Eu(){this.ra=new Fu,this.Hd=this}Eu.prototype.addEventListener=function(mn,En){this.ra&&this.ra.push(mn,En)},Eu.prototype.removeEventListener=function(mn,En){this.ra&&this.ra.remove(mn,En)},Eu.prototype.dispatchEvent=function(mn){if(!this.ra)return!0;var En=this.ra.get(mn.type)||[],xn=this.ra.get("All");for(xn&&(En=En.concat(xn)),En=Dn(En),xn=En.next();!xn.done;xn=En.next()){xn=xn.value,mn.target=this.Hd,mn.currentTarget=this.Hd;try{xn.handleEvent?xn.handleEvent(mn):xn.call(this,mn)}catch{}if(mn.g)break}return mn.defaultPrevented},Eu.prototype.release=function(){this.ra=null};function el(mn,En){var xn=[];mn=Dn(mn);for(var An=mn.next();!An.done;An=mn.next())xn.push(En(An.value));return xn}function pl(mn,En){mn=Dn(mn);for(var xn=mn.next();!xn.done;xn=mn.next())if(!En(xn.value))return!1;return!0}function Xp(mn,En){mn=Dn(mn);for(var xn=mn.next();!xn.done;xn=mn.next())if(En(xn.value))return!0;return!1}function _p(mn,En){var xn=[];mn=Dn(mn);for(var An=mn.next();!An.done;An=mn.next())An=An.value,En(An)&&xn.push(An);return xn}var Cu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/function Iu(mn){var En;mn instanceof Iu?(Gp(this,mn.Wa),this.Tb=mn.Tb,this.ab=mn.ab,Qp(this,mn.nc),this.Ha=mn.Ha,wy(this,mn.g.clone()),this.Hb=mn.Hb):mn&&(En=String(mn).match(Cu))?(Gp(this,En[1]||"",!0),this.Tb=Ay(En[2]||""),this.ab=Ay(En[3]||"",!0),Qp(this,En[4]),this.Ha=Ay(En[5]||"",!0),wy(this,En[6]||"",!0),this.Hb=Ay(En[7]||"")):this.g=new Py(null)}Sn=Iu.prototype,Sn.Wa="",Sn.Tb="",Sn.ab="",Sn.nc=null,Sn.Ha="",Sn.Hb="",Sn.toString=function(){var mn=[],En=this.Wa;if(En&&mn.push(ny(En,Tv,!0),":"),En=this.ab){mn.push("//");var xn=this.Tb;xn&&mn.push(ny(xn,Tv,!0),"@"),mn.push(encodeURIComponent(En).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),En=this.nc,En!=null&&mn.push(":",String(En))}return(En=this.Ha)&&(this.ab&&En.charAt(0)!="/"&&mn.push("/"),mn.push(ny(En,En.charAt(0)=="/"?kv:HE,!0))),(En=this.g.toString())&&mn.push("?",En),(En=this.Hb)&&mn.push("#",ny(En,Iy)),mn.join("")},Sn.resolve=function(mn){var En=this.clone();En.Wa==="data"&&(En=new Iu);var xn=!!mn.Wa;xn?Gp(En,mn.Wa):xn=!!mn.Tb,xn?En.Tb=mn.Tb:xn=!!mn.ab,xn?En.ab=mn.ab:xn=mn.nc!=null;var An=mn.Ha;if(xn)Qp(En,mn.nc);else if(xn=!!mn.Ha){if(An.charAt(0)!="/")if(this.ab&&!this.Ha)An="/"+An;else{var Mn=En.Ha.lastIndexOf("/");Mn!=-1&&(An=En.Ha.substr(0,Mn+1)+An)}if(An==".."||An==".")An="";else if(An.indexOf("./")!=-1||An.indexOf("/.")!=-1){Mn=An.lastIndexOf("/",0)==0,An=An.split("/");for(var Un=[],Bn=0;Bn<An.length;){var Gn=An[Bn++];Gn=="."?Mn&&Bn==An.length&&Un.push(""):Gn==".."?((1<Un.length||Un.length==1&&Un[0]!="")&&Un.pop(),Mn&&Bn==An.length&&Un.push("")):(Un.push(Gn),Mn=!0)}An=Un.join("/")}}return xn?En.Ha=An:xn=mn.g.toString()!=="",xn?wy(En,mn.g.clone()):xn=!!mn.Hb,xn&&(En.Hb=mn.Hb),En},Sn.clone=function(){return new Iu(this)};function Gp(mn,En,xn){mn.Wa=xn?Ay(En,!0):En,mn.Wa&&(mn.Wa=mn.Wa.replace(/:$/,""))}function Qp(mn,En){if(En){if(En=Number(En),isNaN(En)||0>En)throw Error("Bad port number "+En);mn.nc=En}else mn.nc=null}function wy(mn,En,xn){En instanceof Py?mn.g=En:(xn||(En=ny(En,KE)),mn.g=new Py(En))}function Ay(mn,En){return mn?En?decodeURI(mn):decodeURIComponent(mn):""}function ny(mn,En,xn){return mn!=null?(mn=encodeURI(mn).replace(En,zE),xn&&(mn=mn.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),mn):null}function zE(mn){return mn=mn.charCodeAt(0),"%"+(mn>>4&15).toString(16)+(mn&15).toString(16)}var Tv=/[#\/\?@]/g,HE=/[#\?:]/g,kv=/[#\?]/g,KE=/[#\?@]/g,Iy=/#/g;function Py(mn){this.g=mn||null}function Il(mn){if(!mn.Da&&(mn.Da={},mn.rd=0,mn.g))for(var En=mn.g.split("&"),xn=0;xn<En.length;xn++){var An=En[xn].indexOf("="),Mn=null;if(0<=An){var Un=En[xn].substring(0,An);Mn=En[xn].substring(An+1)}else Un=En[xn];Un=decodeURIComponent(Un.replace(/\+/g," ")),Mn=Mn||"",mn.add(Un,decodeURIComponent(Mn.replace(/\+/g," ")))}}Sn=Py.prototype,Sn.Da=null,Sn.rd=null,Sn.add=function(mn,En){Il(this),this.g=null;var xn=this.Da.hasOwnProperty(mn)?this.Da[mn]:null;return xn||(this.Da[mn]=xn=[]),xn.push(En),this.rd++,this},Sn.set=function(mn,En){return Il(this),this.g=null,this.Da.hasOwnProperty(mn)?this.Da[mn]=[En]:this.add(mn,En),this},Sn.toString=function(){if(this.g)return this.g;if(!this.Da)return"";var mn=[],En;for(En in this.Da)for(var xn=encodeURIComponent(En),An=this.Da[En],Mn=0;Mn<An.length;Mn++){var Un=xn;An[Mn]!==""&&(Un+="="+encodeURIComponent(An[Mn])),mn.push(Un)}return this.g=mn.join("&")},Sn.clone=function(){var mn=new Py;if(mn.g=this.g,this.Da){var En={},xn;for(xn in this.Da)En[xn]=this.Da[xn].concat();mn.Da=En,mn.rd=this.rd}return mn};function zs(mn,En,xn){var An=lu.apply(3,arguments);this.severity=mn,this.category=En,this.code=xn,this.data=An,this.handled=!1}zs.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},Ys("shaka.util.Error",zs),zs.Severity={RECOVERABLE:1,CRITICAL:2},zs.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},zs.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_SRC_EQUALS:2016,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,HLS_AES_128_INVALID_IV_LENGTH:4043,HLS_AES_128_INVALID_KEY_LENGTH:4044,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004};function O0(mn,En){return mn.concat(En)}function Zv(){}function Zl(mn){return mn!=null}function Zp(mn,En){if(En.length==0)return mn;var xn=En.map(function(An){return new Iu(An)});return mn.map(function(An){return new Iu(An)}).map(function(An){return xn.map(function(Mn){return An.resolve(Mn)})}).reduce(O0,[]).map(function(An){return An.toString()})}function Mp(mn,En){return{keySystem:mn,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:En||[],keyIds:new Set}}function Lm(mn,En){if(En.length==1)return En[0];if(mn=ev(mn,En),mn!=null)return mn;throw new zs(2,4,4025,En)}function ev(mn,En){for(var xn=Dn(rp[mn]),An=xn.next();!An.done;An=xn.next()){An=An.value;for(var Mn=Dn(En),Un=Mn.next();!Un.done;Un=Mn.next())if(Un=Un.value,An.test(Un.trim()))return Un.trim()}return mn==Vu?"":null}var Vu="text",Pu={Ma:"video",jd:"audio",ba:Vu,Ac:"image",Sh:"application"},rp={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4$/,/^dts[cex]$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av01/,/^dvhe/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function om(){}function Bs(mn,En){return mn=ol(mn),En=ol(En),mn.split("-")[0]==En.split("-")[0]}function O_(mn,En){return mn=ol(mn),En=ol(En),mn=mn.split("-"),En=En.split("-"),mn[0]==En[0]&&mn.length==1&&En.length==2}function Rp(mn,En){return mn=ol(mn),En=ol(En),mn=mn.split("-"),En=En.split("-"),mn.length==2&&En.length==2&&mn[0]==En[0]}function ol(mn){var En=mn.split("-");return mn=En[0]||"",En=En[1]||"",mn=mn.toLowerCase(),mn=WE.get(mn)||mn,(En=En.toUpperCase())?mn+"-"+En:mn}function M0(mn,En){var xn=iy(mn),An=iy(En);return mn!=xn&&En!=An&&xn==An}function pm(mn,En){return mn=ol(mn),En=ol(En),En==mn?4:O_(En,mn)?3:Rp(En,mn)?2:O_(mn,En)?1:0}function iy(mn){var En=mn.indexOf("-");return mn=0<=En?mn.substring(0,En):mn,mn=mn.toLowerCase(),mn=WE.get(mn)||mn}function $v(mn){return mn.language?ol(mn.language):mn.audio&&mn.audio.language?ol(mn.audio.language):mn.video&&mn.video.language?ol(mn.video.language):"und"}function R0(mn,En){mn=ol(mn);var xn=new Set,An=Dn(En);for(En=An.next();!En.done;En=An.next())xn.add(ol(En.value));for(An=Dn(xn),En=An.next();!En.done;En=An.next())if(En=En.value,En==mn)return En;for(An=Dn(xn),En=An.next();!En.done;En=An.next())if(En=En.value,O_(En,mn))return En;for(An=Dn(xn),En=An.next();!En.done;En=An.next())if(En=En.value,Rp(En,mn))return En;for(xn=Dn(xn),En=xn.next();!En.done;En=xn.next())if(En=En.value,O_(mn,En))return En;return null}Ys("shaka.util.LanguageUtils",om),om.findClosestLocale=R0,om.getLocaleForVariant=$v,om.getLocaleForText=function(mn){return ol(mn.language||"und")},om.getBase=iy,om.relatedness=pm,om.areSiblings=M0,om.normalize=ol,om.isSiblingOf=Rp,om.isParentOf=O_,om.areLanguageCompatible=Bs,om.areLocaleCompatible=function(mn,En){return mn=ol(mn),En=ol(En),mn==En};var WE=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function np(mn){Eu.call(this),this.j=ol(mn),this.i=new Map,this.g=new Set,this.h=new Map}as(np,Eu),Sn=np.prototype,Sn.release=function(){Eu.prototype.release.call(this)},Sn.xf=function(mn){var En=this;this.g.clear(),mn=Dn(mn);for(var xn=mn.next();!xn.done;xn=mn.next())this.g.add(ol(xn.value));MT(this),mn=_p(this.g,function(An){return!En.h.has(An)}),mn.length&&this.dispatchEvent(new vu("unknown-locales",new Map().set("locales",mn))),mn=_p(this.g,function(An){return En.h.has(An)}),mn=new Map().set("locales",mn.length?mn:[this.j]),this.dispatchEvent(new vu("locale-changed",mn))},Sn.ea=function(mn,En,xn){mn=ol(mn),xn===void 0&&(xn=qE);var An=this.h.get(mn)||new Map;return En.forEach(function(Mn,Un){An.has(Un)&&xn!=qE||An.set(Un,Mn)}),this.h.set(mn,An),MT(this),this.dispatchEvent(new vu("locale-updated")),this},Sn.Ch=function(mn){for(var En=Dn(mn.keys()),xn=En.next();!xn.done;xn=En.next())xn=xn.value,mn.set(xn,this.resolve(xn))},Sn.resolve=function(mn){var En=this.i.get(mn);return En||(mn=new Map().set("locales",Array.from(this.g)).set("missing",mn),this.dispatchEvent(new vu("unknown-localization",mn)),"")};function MT(mn){for(var En=mn.h,xn=mn.j,An=mn.g,Mn=new Set,Un={},Bn=Dn(An),Gn=Bn.next();!Gn.done;Un={Xb:Un.Xb},Gn=Bn.next()){Un.Xb=Gn.value,Mn.add(Un.Xb),Mn.add(iy(Un.Xb)),Gn=_p(En.keys(),function(ts){return function(os){return M0(os,ts.Xb)}}(Un)),Gn.sort();var Wn=Dn(Gn);for(Gn=Wn.next();!Gn.done;Gn=Wn.next())Mn.add(Gn.value);for(Gn=_p(En.keys(),function(ts){return function(os){return iy(os)==ts.Xb}}(Un)),Gn.sort(),Wn=Dn(Gn),Gn=Wn.next();!Gn.done;Gn=Wn.next())Mn.add(Gn.value)}for(Mn.add(xn),xn=[],Mn=Dn(Mn),Gn=Mn.next();!Gn.done;Gn=Mn.next())(Gn=En.get(Gn.value))&&xn.push(Gn);for(xn.reverse(),mn.i.clear(),En=Dn(xn),Gn=En.next();!Gn.done;Gn=En.next())Gn.value.forEach(function(ts,os){mn.i.set(os,ts)});for(En=mn.i.keys(),Mn=new Set,xn=Dn(mn.g),Gn=xn.next();!Gn.done;Gn=xn.next())Gn=mn.h.get(Gn.value)||new Map,H$(Gn,En,Mn);0<Mn.size&&(An=new Map().set("locales",Array.from(An)).set("missing",Array.from(Mn)),mn.dispatchEvent(new vu("missing-localizations",An)))}function H$(mn,En,xn){En=Dn(En);for(var An=En.next();!An.done;An=En.next())An=An.value,mn.get(An)||xn.add(An)}Ys("shaka.ui.Localization",np),np.prototype.resolve=np.prototype.resolve,np.prototype.resolveDictionary=np.prototype.Ch,np.prototype.insert=np.prototype.ea,np.prototype.changeLocale=np.prototype.xf,np.prototype.release=np.prototype.release;var qE=1;np.ConflictResolution={USE_OLD:0,USE_NEW:qE},np.UNKNOWN_LOCALES="unknown-locales",np.UNKNOWN_LOCALIZATION="unknown-localization",np.MISSING_LOCALIZATIONS="missing-localizations",np.LOCALE_CHANGED="locale-changed",np.LOCALE_UPDATED="locale-updated";var Jv={mi:"FAST_FORWARD",Qh:"AD_TIME",Ri:"REWIND",kj:"UNRECOGNIZED_LANGUAGE",Di:"NOT_APPLICABLE",Xi:"STATISTICS",Ph:"AD_DURATION",ri:"LOOP",gi:"EXIT_FULL_SCREEN",Pi:"REPLAY",mj:"VOLUME",Zh:"CAST",gg:"LIVE",xi:"MORE_SETTINGS",di:"ENTER_PICTURE_IN_PICTURE",BACK:"BACK",Mi:"PLAYBACK_RATE",ji:"EXIT_PICTURE_IN_PICTURE",pi:"LANGUAGE",ci:"ENTER_LOOP_MODE",jj:"UNMUTE",Ai:"MUTE",Ji:"PAUSE",Qi:"RESOLUTION",Rh:"AIRPLAY",AD_PROGRESS:"AD_PROGRESS",Th:"AUTO_QUALITY",ij:"UNDETERMINED_LANGUAGE",Ui:"SKIP_AD",ii:"EXIT_LOOP_MODE",Li:"PLAY",ni:"FULL_SCREEN",zi:"MULTIPLE_LANGUAGES",Yh:"CAPTIONS",Ti:"SEEK",Vi:"SKIP_TO_LIVE",hg:"SUBTITLE_FORCED",Oi:"QUALITY",Ei:"OFF",Ki:"PICTURE_IN_PICTURE",Fi:"ON"};function M_(mn){this.g=Math.exp(Math.log(.5)/mn),this.i=this.h=0}M_.prototype.sample=function(mn,En){var xn=Math.pow(this.g,mn);En=En*(1-xn)+xn*this.h,isNaN(En)||(this.h=En,this.i+=mn)};function bv(mn){return mn.h/(1-Math.pow(mn.g,mn.i))}function R_(){this.h=new M_(2),this.j=new M_(5),this.g=0,this.i=128e3,this.l=16e3}R_.prototype.configure=function(mn){this.i=mn.minTotalBytes,this.l=mn.minBytes,this.h.g=Math.exp(Math.log(.5)/mn.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/mn.slowHalfLife)},R_.prototype.sample=function(mn,En){if(!(En<this.l)){var xn=8e3*En/mn;mn/=1e3,this.g+=En,this.h.sample(mn,xn),this.j.sample(mn,xn)}},R_.prototype.getBandwidthEstimate=function(mn){return this.g<this.i?mn:Math.min(bv(this.h),bv(this.j))};function dp(mn){if(zp.has(mn))return zp.get(mn);var En=MediaSource.isTypeSupported(mn);return zp.set(mn,En),En}var zp=new Map;function tv(mn,En){return typeof mn=="number"&&typeof En=="number"&&isNaN(mn)&&isNaN(En)?!0:mn===En}function Wu(mn,En){En=mn.indexOf(En),-1<En&&mn.splice(En,1)}function Np(mn,En,xn){if(xn||(xn=tv),mn.length!=En.length)return!1;En=En.slice();var An={};mn=Dn(mn);for(var Mn=mn.next();!Mn.done;An={Td:An.Td},Mn=mn.next()){if(An.Td=Mn.value,Mn=En.findIndex(function(Un){return function(Bn){return xn(Un.Td,Bn)}}(An)),Mn==-1)return!1;En[Mn]=En[En.length-1],En.pop()}return En.length==0}function Zu(mn,En,xn){if(xn||(xn=tv),mn.length!=En.length)return!1;for(var An=0;An<mn.length;An++)if(!xn(mn[An],En[An]))return!1;return!0}function tl(mn,En,xn){this.startTime=mn,this.direction=Em,this.endTime=En,this.payload=xn,this.region=new Jp,this.position=null,this.positionAlign=bl,this.size=0,this.textAlign=Dp,this.writingMode=Yl,this.lineInterpretation=Um,this.line=null,this.lineHeight="",this.lineAlign=Ep,this.displayAlign=Hu,this.fontSize=this.textStrokeWidth=this.textStrokeColor=this.textShadow=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=L_,this.fontStyle=gl,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textDecoration=[],this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.cellResolution={columns:32,rows:15}}tl.prototype.clone=function(){var mn=new tl(0,0,""),En;for(En in this)mn[En]=this[En],mn[En]&&mn[En].constructor==Array&&(mn[En]=mn[En].slice());return mn};function N_(mn,En){if(mn.startTime!=En.startTime||mn.endTime!=En.endTime||mn.payload!=En.payload)return!1;for(var xn in mn)if(xn!="startTime"&&xn!="endTime"&&xn!="payload"){if(xn=="nestedCues"){if(!Zu(mn.nestedCues,En.nestedCues,N_))return!1}else if(xn=="region"||xn=="cellResolution"){for(var An in mn[xn])if(mn[xn][An]!=En[xn][An])return!1}else if(Array.isArray(mn[xn])){if(!Zu(mn[xn],En[xn]))return!1}else if(mn[xn]!=En[xn])return!1}return!0}Ys("shaka.text.Cue",tl);var bl="auto";tl.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:bl};var Dp="center",ay={LEFT:"left",RIGHT:"right",CENTER:Dp,START:"start",END:"end"};tl.textAlign=ay;var Hu="after",Ap={BEFORE:"before",CENTER:"center",AFTER:Hu};tl.displayAlign=Ap;var Em="ltr";tl.direction={HORIZONTAL_LEFT_TO_RIGHT:Em,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var Yl="horizontal-tb";tl.writingMode={HORIZONTAL_TOP_TO_BOTTOM:Yl,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var Um=0;tl.lineInterpretation={LINE_NUMBER:Um,PERCENTAGE:1};var Ep="start",Oy={CENTER:"center",START:Ep,END:"end"};tl.lineAlign=Oy;var D_={white:"#FFF",lime:"#0F0",cyan:"#0FF",red:"#F00",yellow:"#FF0",magenta:"#F0F",blue:"#00F",black:"#000"};tl.defaultTextColor=D_;var hm={bg_white:"#FFF",bg_lime:"#0F0",bg_cyan:"#0FF",bg_red:"#F00",bg_yellow:"#FF0",bg_magenta:"#F0F",bg_blue:"#00F",bg_black:"#000"};tl.defaultTextBackgroundColor=hm;var L_=400;tl.fontWeight={NORMAL:L_,BOLD:700};var gl="normal",YE={NORMAL:gl,ITALIC:"italic",OBLIQUE:"oblique"};tl.fontStyle=YE,tl.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"};function Jp(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=ap,this.scroll=Jl}Ys("shaka.text.CueRegion",Jp);var ap=1;Jp.units={PX:0,PERCENTAGE:ap,LINES:2};var Jl="";Jp.scrollMode={NONE:Jl,UP:"up"};function Ou(){}function Ip(mn,En){if(!mn&&!En)return!0;if(!mn||!En||mn.byteLength!=En.byteLength)return!1;if(My(mn)==My(En)&&(mn.byteOffset||0)==(En.byteOffset||0))return!0;var xn=Ku(mn);En=Ku(En);for(var An=0;An<mn.byteLength;An++)if(xn[An]!=En[An])return!1;return!0}function My(mn){return mn instanceof ArrayBuffer?mn:mn.buffer}function fp(mn){return mn instanceof ArrayBuffer?mn:mn.byteOffset==0&&mn.byteLength==mn.buffer.byteLength?mn.buffer:new Uint8Array(mn).buffer}function Ku(mn,En,xn){return xn=xn===void 0?1/0:xn,jm(mn,En===void 0?0:En,xn,Uint8Array)}function Hp(mn,En,xn){return xn=xn===void 0?1/0:xn,jm(mn,En===void 0?0:En,xn,DataView)}function jm(mn,En,xn,An){var Mn=(mn.byteOffset||0)+mn.byteLength;return En=Math.max(0,Math.min((mn.byteOffset||0)+En,Mn)),new An(My(mn),En,Math.min(En+Math.max(xn,0),Mn)-En)}Ys("shaka.util.BufferUtils",Ou),Ou.toDataView=Hp,Ou.toUint8=Ku,Ou.toArrayBuffer=fp,Ou.equal=Ip;function _l(){var mn,En,xn=new Promise(function(An,Mn){mn=An,En=Mn});return xn.resolve=mn,xn.reject=En,xn}_l.prototype.resolve=function(){},_l.prototype.reject=function(){};function Sm(mn){this.h=mn,this.g=void 0}Sm.prototype.value=function(){return this.g==null&&(this.g=this.h()),this.g};function mm(mn){this.h=mn,this.g=null}mm.prototype.R=function(mn){var En=this;this.stop();var xn=!0,An=null;return this.g=function(){pn.clearTimeout(An),xn=!1},An=pn.setTimeout(function(){xn&&En.h()},1e3*mn),this},mm.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function ku(mn){this.h=mn,this.g=null}ku.prototype.Aa=function(){return this.stop(),this.h(),this},ku.prototype.R=function(mn){var En=this;return this.stop(),this.g=new mm(function(){En.h()}).R(mn),this},ku.prototype.ha=function(mn){var En=this;return this.stop(),this.g=new mm(function(){En.g.R(mn),En.h()}).R(mn),this},ku.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},Ys("shaka.util.Timer",ku),ku.prototype.stop=ku.prototype.stop,ku.prototype.tickEvery=ku.prototype.ha,ku.prototype.tickAfter=ku.prototype.R,ku.prototype.tickNow=ku.prototype.Aa;function Sp(){return!!(pn.MediaSource&&MediaSource.isTypeSupported)}function oy(mn){return RT().canPlayType(mn)!=""}function e_(){return!!navigator.userAgent.match(/Edge?\//)}function xv(){return wl("Xbox One")}function Fm(){return wl("Tizen")}function XE(){return wl("Web0S")&&wl("Chrome/38.0.2125.122 Safari/537.36")}function rv(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!Fm()&&!wl("PC=EOS")&&!wl("VirginMedia")&&!t_()&&!wl("AFT")}function t_(){return wl("PlayStation 4")}function N0(){if(!rv())return null;var mn=navigator.userAgent.match(/Version\/(\d+)/);return mn||(mn=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(mn[1],10):null}function wl(mn){return(navigator.userAgent||"").includes(mn)}function RT(){return _h||(D0||(D0=new ku(function(){_h=null})),(_h=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(_h=document.createElement("video")),D0.R(1),_h)}var D0=null,_h=null;function Tm(){}function xl(mn){if(!mn)return"";if(mn=Ku(mn),mn[0]==239&&mn[1]==187&&mn[2]==191&&(mn=mn.subarray(3)),pn.TextDecoder&&!t_())return mn=new TextDecoder().decode(mn),mn.includes("�")&&fl('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),mn;for(var En="",xn=0;xn<mn.length;++xn){var An=65533;if(mn[xn]&128?mn.length>=xn+2&&(mn[xn]&224)==192&&(mn[xn+1]&192)==128?(An=(mn[xn]&31)<<6|mn[xn+1]&63,xn+=1):mn.length>=xn+3&&(mn[xn]&240)==224&&(mn[xn+1]&192)==128&&(mn[xn+2]&192)==128?(An=(mn[xn]&15)<<12|(mn[xn+1]&63)<<6|mn[xn+2]&63,xn+=2):mn.length>=xn+4&&(mn[xn]&241)==240&&(mn[xn+1]&192)==128&&(mn[xn+2]&192)==128&&(mn[xn+3]&192)==128&&(An=(mn[xn]&7)<<18|(mn[xn+1]&63)<<12|(mn[xn+2]&63)<<6|mn[xn+3]&63,xn+=3):An=mn[xn],65535>=An)En+=String.fromCharCode(An);else{An-=65536;var Mn=An&1023;En+=String.fromCharCode(55296+(An>>10)),En+=String.fromCharCode(56320+Mn)}}return En}function Ry(mn,En,xn){if(!mn)return"";if(!xn&&mn.byteLength%2!=0)throw new zs(2,2,2004);xn=Math.floor(mn.byteLength/2);var An=new Uint16Array(xn);mn=Hp(mn);for(var Mn=0;Mn<xn;Mn++)An[Mn]=mn.getUint16(2*Mn,En);return QE.value()(An)}function Bm(mn){function En(An){return xn.byteLength<=An||32<=xn[An]&&126>=xn[An]}if(!mn)return"";var xn=Ku(mn);if(xn[0]==239&&xn[1]==187&&xn[2]==191)return xl(xn);if(xn[0]==254&&xn[1]==255)return Ry(xn.subarray(2),!1);if(xn[0]==255&&xn[1]==254)return Ry(xn.subarray(2),!0);if(xn[0]==0&&xn[2]==0)return Ry(mn,!1);if(xn[1]==0&&xn[3]==0)return Ry(mn,!0);if(En(0)&&En(1)&&En(2)&&En(3))return xl(mn);throw new zs(2,2,2003)}function Kp(mn){if(pn.TextEncoder&&!t_()){var En=new TextEncoder;return fp(En.encode(mn))}mn=encodeURIComponent(mn),mn=unescape(mn),En=new Uint8Array(mn.length);for(var xn=0;xn<mn.length;xn++)En[xn]=mn[xn].charCodeAt(0);return fp(En)}function r_(mn,En){for(var xn=new ArrayBuffer(2*mn.length),An=new DataView(xn),Mn=0;Mn<mn.length;++Mn)An.setUint16(2*Mn,mn.charCodeAt(Mn),En);return xn}Ys("shaka.util.StringUtils",Tm),Tm.resetFromCharCode=function(){QE.g=void 0},Tm.toUTF16=r_,Tm.toUTF8=Kp,Tm.fromBytesAutoDetect=Bm,Tm.fromUTF16=Ry,Tm.fromUTF8=xl;var QE=new Sm(function(){function mn(xn){try{var An=new Uint8Array(xn);return 0<String.fromCharCode.apply(null,An).length}catch{return!1}}for(var En={rb:65536};0<En.rb;En={rb:En.rb},En.rb/=2)if(mn(En.rb))return function(xn){return function(An){for(var Mn="",Un=0;Un<An.length;Un+=xn.rb)Mn+=String.fromCharCode.apply(null,An.subarray(Un,Un+xn.rb));return Mn}}(En);return null});function km(){}function ZE(mn){return mn=Ku(mn),mn=QE.value()(mn),btoa(mn)}function Ny(mn,En){return En=En??!0,mn=ZE(mn).replace(/\+/g,"-").replace(/\//g,"_"),En?mn:mn.replace(/[=]*$/,"")}function Lp(mn){mn=pn.atob(mn.replace(/-/g,"+").replace(/_/g,"/"));for(var En=new Uint8Array(mn.length),xn=0;xn<mn.length;++xn)En[xn]=mn.charCodeAt(xn);return En}function n_(mn){for(var En=mn.length/2,xn=new Uint8Array(En),An=0;An<En;An++)xn[An]=pn.parseInt(mn.substr(2*An,2),16);return xn}function _c(mn){var En=Ku(mn);mn="",En=Dn(En);for(var xn=En.next();!xn.done;xn=En.next())xn=xn.value,xn=xn.toString(16),xn.length==1&&(xn="0"+xn),mn+=xn;return mn}function Up(){for(var mn=lu.apply(0,arguments),En=0,xn=Dn(mn),An=xn.next();!An.done;An=xn.next())En+=An.value.byteLength;for(En=new Uint8Array(En),xn=0,mn=Dn(mn),An=mn.next();!An.done;An=mn.next())An=An.value,En.set(Ku(An),xn),xn+=An.byteLength;return En}Ys("shaka.util.Uint8ArrayUtils",km),km.concat=Up,km.toHex=_c,km.fromHex=n_,km.fromBase64=Lp,km.toBase64=Ny,km.toStandardBase64=ZE;function Cv(){}Ys("shaka.dependencies",Cv),Cv.has=function(mn){return a_.has(mn)},Cv.add=function(mn,En){if(!i_[mn])throw Error(mn+" is not supported");a_.set(mn,function(){return En})};var i_={muxjs:"muxjs"};Cv.Allowed=i_;var a_=new Map([["muxjs",function(){return pn.muxjs}]]);function ml(mn){var En=this;this.s=mn,this.m=a_.get("muxjs")(),this.h=this.g=null,this.l=[],this.i=[],this.j=!1,this.m&&(this.g=new this.m.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.g.on("data",function(xn){En.i=xn.captions,En.l.push(Up(xn.initSegment,xn.data))}),this.g.on("done",function(){var xn={data:Up.apply(km,Kn(En.l)),captions:En.i};En.h.resolve(xn),En.j=!1}))}ml.prototype.destroy=function(){return this.g&&this.g.dispose(),this.g=null,Promise.resolve()};function $m(mn,En){var xn=L0(mn),An=mn.toLowerCase().split(";")[0]=="audio/aac";return!a_.get("muxjs")()||!xn&&!An?!1:An?dp('audio/mp4; codecs="mp4a.40.2"'):En?dp(wv(En,mn)):(En=wv("audio",mn),mn=wv("video",mn),dp(En)||dp(mn))}function L0(mn){return mn.toLowerCase().split(";")[0].split("/")[1]=="mp2t"}function U0(mn,En){return En.toLowerCase().split(";")[0]=="audio/aac"?'audio/mp4; codecs="mp4a.40.2"':L0(En)?wv(mn,En):En}function wv(mn,En){if(En=En.replace(/mp2t/i,"mp4"),mn=="audio"&&(En=En.replace("video","audio")),mn=/avc1\.(66|77|100)\.(\d+)/.exec(En)){var xn="avc1.",An=mn[1],Mn=Number(mn[2]);xn=(An=="66"?xn+"4200":An=="77"?xn+"4d00":xn+"6400")+(Mn>>4).toString(16),xn+=(Mn&15).toString(16),En=En.replace(mn[0],xn)}return En}function NT(mn,En){return mn.j=!0,mn.h=new _l,mn.l=[],mn.i=[],En=Ku(En),mn.g.push(En),mn.g.flush(),mn.j&&mn.h.reject(new zs(2,3,3018)),mn.h}function sy(){}function Vm(mn,En){return En&&(mn+='; codecs="'+En+'"'),mn}function su(mn,En,xn){return En=Vm(mn,En),$m(En,xn)?U0(xn,En):mn!="video/mp2t"&&xn=="audio"?En.replace("video","audio"):En}function _i(mn){var En=Hs(mn);switch(mn=En[0],En=En[1].toLowerCase(),!0){case(mn==="mp4a"&&En==="69"):case(mn==="mp4a"&&En==="6b"):return"mp3";case(mn==="mp4a"&&En==="66"):case(mn==="mp4a"&&En==="67"):case(mn==="mp4a"&&En==="68"):case(mn==="mp4a"&&En==="40.2"):case(mn==="mp4a"&&En==="40.02"):case(mn==="mp4a"&&En==="40.5"):case(mn==="mp4a"&&En==="40.05"):case(mn==="mp4a"&&En==="40.29"):case(mn==="mp4a"&&En==="40.42"):return"aac";case(mn==="mp4a"&&En==="a5"):return"ac-3";case(mn==="mp4a"&&En==="a6"):return"ec-3";case(mn==="mp4a"&&En==="b2"):return"dtsx";case(mn==="mp4a"&&En==="a9"):return"dtsc";case mn==="avc1":case mn==="avc3":return"avc";case mn==="hvc1":case mn==="hev1":return"hevc";case mn==="dvh1":case mn==="dvhe":return"dovi"}return mn}function As(mn){return mn=mn.split(/ *; */),mn.shift(),(mn=mn.find(function(En){return En.startsWith("codecs=")}))?mn.split("=")[1].replace(/^"|"$/g,""):""}function Hs(mn){mn=mn.split(".");var En=mn[0];return mn.shift(),[En,mn.join(".")]}Ys("shaka.util.MimeUtils",sy),sy.getFullType=Vm,new Map().set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");function Us(mn){this.i=null,this.j=mn,this.C=!1,this.l=this.B=0,this.m=1/0,this.h=this.g=null,this.F="",this.s=new Map}function $s(mn){return!!(Ll[mn]||mn=="application/cea-608"||mn=="application/cea-708")}Us.prototype.destroy=function(){return this.j=this.i=null,this.s.clear(),Promise.resolve()};function mu(mn,En,xn,An){var Mn,Un,Bn,Gn;return hs(function(Wn){if(Wn.g==1)return Qn(Wn,Promise.resolve(),2);if(!mn.i||!mn.j)return Wn.return();if(xn==null||An==null)return mn.i.parseInit(Ku(En)),Wn.return();Mn=mn.C?xn:mn.B,Un={periodStart:mn.B,segmentStart:xn,segmentEnd:An,vttOffset:Mn},Bn=mn.i.parseMedia(Ku(En),Un),Gn=Bn.filter(function(ts){return ts.startTime>=mn.l&&ts.startTime<mn.m}),mn.j.append(Gn),mn.g==null&&(mn.g=Math.max(xn,mn.l)),mn.h=Math.min(An,mn.m),ms(Wn)})}Us.prototype.remove=function(mn,En){var xn=this;return hs(function(An){if(An.g==1)return Qn(An,Promise.resolve(),2);!xn.j||!xn.j.remove(mn,En)||xn.g==null||En<=xn.g||mn>=xn.h||(mn<=xn.g&&En>=xn.h?xn.g=xn.h=null:mn<=xn.g&&En<xn.h?xn.g=En:mn>xn.g&&En>=xn.h&&(xn.h=mn)),ms(An)})};function uu(mn,En,xn){mn.l=En,mn.m=xn}function fu(mn,En,xn){if(mn.F=En,En=mn.s.get(En))for(var An=Dn(En.keys()),Mn=An.next();!Mn.done;Mn=An.next())(Mn=En.get(Mn.value).filter(function(Un){return Un.endTime<=xn}))&&mn.j.append(Mn)}function El(mn){var En=[];mn=Dn(mn);for(var xn=mn.next();!xn.done;xn=mn.next())xn=xn.value,En.push({stream:xn.stream,cue:new tl(xn.startTime,xn.endTime,xn.text)});return En}function wu(mn,En,xn){En.startTime+=xn,En.endTime+=xn,En=Dn(En.nestedCues);for(var An=En.next();!An.done;An=En.next())wu(mn,An.value,xn)}function jp(mn,En,xn,An,Mn){var Un=xn+" "+An,Bn=new Map;En=Dn(En);for(var Gn=En.next();!Gn.done;Gn=En.next()){var Wn=Gn.value;Gn=Wn.stream,Wn=Wn.cue,Bn.has(Gn)||Bn.set(Gn,new Map),Bn.get(Gn).has(Un)||Bn.get(Gn).set(Un,[]),wu(mn,Wn,Mn),Wn.startTime>=mn.l&&Wn.startTime<mn.m&&(Bn.get(Gn).get(Un).push(Wn),Gn==mn.F&&mn.j.append([Wn]))}for(Mn=Dn(Bn.keys()),Un=Mn.next();!Un.done;Un=Mn.next())for(Un=Un.value,mn.s.has(Un)||mn.s.set(Un,new Map),En=Dn(Bn.get(Un).keys()),Gn=En.next();!Gn.done;Gn=En.next())Gn=Gn.value,Wn=Bn.get(Un).get(Gn),mn.s.get(Un).set(Gn,Wn);mn.g=mn.g==null?Math.max(xn,mn.l):Math.min(mn.g,Math.max(xn,mn.l)),mn.h=Math.max(mn.h,Math.min(An,mn.m))}Ys("shaka.text.TextEngine",Us),Us.prototype.destroy=Us.prototype.destroy,Us.findParser=function(mn){return Ll[mn]},Us.unregisterParser=function(mn){delete Ll[mn]},Us.registerParser=function(mn,En){Ll[mn]=En};var Ll={};function Bl(mn,En,xn,An,Mn){var Un=mn.variants;(En.length||xn.length)&&(Un=U_(Un,En,xn)),Un=TA(Un,An),En=Dy(Un),En=Ly(En);var Bn=hM(En,Mn);mn.variants=mn.variants.filter(function(Gn){return K$(Gn)==Bn})}function Dy(mn){var En=new Fu;mn=Dn(mn);for(var xn=mn.next();!xn.done;xn=mn.next()){xn=xn.value;var An=K$(xn);En.push(An,xn)}return En}function Ly(mn){var En=0,xn=new Map,An=mn.size();return mn.forEach(function(Mn,Un){Un=Dn(Un);for(var Bn=Un.next();!Bn.done;Bn=Un.next()){Bn=Bn.value;var Gn=Bn.video;if(Gn&&Gn.width&&Gn.height){Gn=Gn.width*Gn.height*(Gn.frameRate||1),xn.has(Gn)||xn.set(Gn,new Fu);var Wn=xn.get(Gn);Wn.push(Mn,Bn),Wn.size()===An&&(En=Math.max(En,Gn))}}}),En?xn.get(En):mn}function U_(mn,En,xn){var An={};En=Dn(En);for(var Mn=En.next();!Mn.done;An={ee:An.ee},Mn=En.next())if(An.ee=Mn.value,Mn=mn.filter(function(Un){return function(Bn){return Bn.video&&Bn.video.codecs.startsWith(Un.ee)}}(An)),Mn.length){mn=Mn;break}for(An={},xn=Dn(xn),En=xn.next();!En.done;An={Qd:An.Qd},En=xn.next())if(An.Qd=En.value,En=mn.filter(function(Un){return function(Bn){return Bn.audio&&Bn.audio.codecs.startsWith(Un.Qd)}}(An)),En.length){mn=En;break}return mn}function hM(mn,En){En=Dn(En);for(var xn=En.next();!xn.done;xn=En.next())if(xn=xn.value,xn==FT||xn==ex){if(mn=mM(mn,xn),mn.size()==1)return mn.keys()[0]}else if(xn==xA)break;return gM(mn)}function mM(mn,En){var xn=0,An=new Fu;return mn.forEach(function(Mn,Un){for(var Bn=0,Gn=0,Wn=Dn(Un),ts=Wn.next();!ts.done;ts=Wn.next())ts=ts.value,ts.decodingInfos.length&&(Bn+=ts.decodingInfos[0][En]?1:0,Gn++);Bn/=Gn,Bn>xn?(An.g={},An.push(Mn,Un),xn=Bn):Bn==xn&&An.push(Mn,Un)}),An}function gM(mn){var En="",xn=1/0;return mn.forEach(function(An,Mn){var Un=0,Bn=0;Mn=Dn(Mn);for(var Gn=Mn.next();!Gn.done;Gn=Mn.next())Un+=Gn.value.bandwidth||0,++Bn;Un/=Bn,Un<xn&&(En=An,xn=Un)}),En}function K$(mn){var En="";mn.video&&(En=_i(mn.video.codecs));var xn="";return mn.audio&&(xn=_i(mn.audio.codecs)),En+"-"+xn}function j_(mn,En,xn){mn.variants=mn.variants.filter(function(An){return j0(An,En,xn)})}function j0(mn,En,xn){function An(Un,Bn,Gn){return Un>=Bn&&Un<=Gn}var Mn=mn.video;if(mn.disabledUntilTime!=0){if(mn.disabledUntilTime>Date.now()/1e3)return!1;mn.disabledUntilTime=0}return!(Mn&&Mn.width&&Mn.height&&(!An(Mn.width,En.minWidth,Math.min(En.maxWidth,xn.width))||!An(Mn.height,En.minHeight,Math.min(En.maxHeight,xn.height))||!An(Mn.width*Mn.height,En.minPixels,En.maxPixels))||mn&&mn.video&&mn.video.frameRate&&!An(mn.video.frameRate,En.minFrameRate,En.maxFrameRate)||!An(mn.bandwidth,En.minBandwidth,En.maxBandwidth))}function JE(mn,En,xn){var An=!1;mn=Dn(mn);for(var Mn=mn.next();!Mn.done;Mn=mn.next()){Mn=Mn.value;var Un=Mn.allowedByApplication;Mn.allowedByApplication=j0(Mn,En,xn),Un!=Mn.allowedByApplication&&(An=!0)}return An}function W$(mn,En){return hs(function(xn){return xn.g==1?Qn(xn,q$(En,0<En.offlineSessionIds.length),2):(Y$(mn,En),X$(En),Qn(xn,_A(En),0))})}function q$(mn,En){return hs(function(xn){if(xn.g==1)return Qn(xn,eS(mn.variants,En,!1),2);mn.variants=mn.variants.filter(function(An){var Mn=An.video;if(Mn){var Un=DT(Mn.codecs);if(Mn.codecs.includes(",")){var Bn=Mn.codecs.split(",");Un=Lm("video",Bn),Un=DT(Un),Bn=Lm("audio",Bn),Bn=F_(Bn);var Gn=su(Mn.mimeType,Bn,"audio");if(!dp(Gn))return!1;Un=[Un,Bn].join()}if(Bn=su(Mn.mimeType,Un,"video"),!dp(Bn))return!1;Mn.codecs=Un}if(Un=An.audio){if(Bn=F_(Un.codecs),Gn=su(Un.mimeType,Bn,"audio"),!dp(Gn))return!1;Un.codecs=Bn}return xv()&&Mn&&(Mn.width&&1920<Mn.width||Mn.height&&1080<Mn.height)&&(Mn.codecs.includes("avc1.")||Mn.codecs.includes("avc3."))?(kA(An),!1):((Mn=An.decodingInfos.some(function(Wn){return Wn.supported}))||(kA(An),void 0),Mn)}),ms(xn)})}function eS(mn,En,xn){var An,Mn,Un,Bn,Gn,Wn,ts,os,cs,ls;return hs(function(gs){if(mn.some(function(ws){return ws.decodingInfos.length}))return gs.return();for(An=navigator.mediaCapabilities,Mn=[],Un=function(ws,Ns){var Os;return hs(function(Ps){if(Ps.g==1)return Ts(Ps,2),Qn(Ps,An.decodingInfo(Ns),4);if(Ps.g!=2)return Os=Ps.h,ws.decodingInfos.push(Os),ys(Ps,0);_s(Ps),JSON.stringify(Ns),ms(Ps)})},Bn=Dn(mn),Gn=Bn.next();!Gn.done;Gn=Bn.next())for(Wn=Gn.value,ts=vA(Wn,En,xn),os=Dn(ts),cs=os.next();!cs.done;cs=os.next())ls=cs.value,Mn.push(Un(Wn,ls));return Qn(gs,Promise.all(Mn),0)})}function vA(mn,En,xn){var An=mn.audio,Mn=mn.video;if(xn={type:xn?"file":"media-source"},Mn){var Un=Mn.codecs;if(Mn.codecs.includes(",")){var Bn=Mn.codecs.split(",");Un=Lm("video",Bn),Un=DT(Un),Bn=Lm("audio",Bn),Bn=su(Mn.mimeType,Bn,"audio"),xn.audio={contentType:Bn,channels:2,bitrate:mn.bandwidth||1,samplerate:1,spatialRendering:!1}}if(Un=DT(Un),Un=su(Mn.mimeType,Un,"video"),xn.video={contentType:Un,width:Mn.width||64,height:Mn.height||64,bitrate:Mn.bandwidth||mn.bandwidth||1,framerate:Mn.frameRate||1},Mn.hdr)switch(Mn.hdr){case"SDR":xn.video.transferFunction="srgb";break;case"PQ":xn.video.transferFunction="pq";break;case"HLG":xn.video.transferFunction="hlg"}}if(An&&(Un=F_(An.codecs),Un=su(An.mimeType,Un,"audio"),xn.audio={contentType:Un,channels:An.channelsCount||2,bitrate:An.bandwidth||mn.bandwidth||1,samplerate:An.audioSamplingRate||1,spatialRendering:An.spatialAudio}),Bn=(mn.video?mn.video.drmInfos:[]).concat(mn.audio?mn.audio.drmInfos:[]),!Bn.length)return[xn];mn=[],Un=new Map,Bn=Dn(Bn);for(var Gn=Bn.next();!Gn.done;Gn=Bn.next()){var Wn=Gn.value;Un.get(Wn.keySystem)||Un.set(Wn.keySystem,[]),Un.get(Wn.keySystem).push(Wn)}Bn=En?"required":"optional",En=En?["persistent-license"]:["temporary"],Wn=Dn(Un.keys());for(var ts=Wn.next();!ts.done;ts=Wn.next()){var os=ts.value;ts=Object.assign({},xn);var cs=Un.get(os);for(os={keySystem:os,initDataType:"cenc",persistentState:Bn,distinctiveIdentifier:"optional",sessionTypes:En},cs=Dn(cs),Gn=cs.next();!Gn.done;Gn=cs.next()){if(Gn=Gn.value,Gn.initData&&Gn.initData.length){for(var ls=new Set,gs=Dn(Gn.initData),ws=gs.next();!ws.done;ws=gs.next())ls.add(ws.value.initDataType);os.initDataType=Gn.initData[0].initDataType}Gn.distinctiveIdentifierRequired&&(os.distinctiveIdentifier="required"),Gn.persistentStateRequired&&(os.persistentState="required"),Gn.sessionType&&(os.sessionTypes=[Gn.sessionType]),An&&(Gn.audioRobustness!=""?os.audio?os.audio.robustness=os.audio.robustness||Gn.audioRobustness:os.audio={robustness:Gn.audioRobustness}:os.audio||(os.audio={})),Mn&&(Gn.videoRobustness!=""?os.video?os.video.robustness=os.video.robustness||Gn.videoRobustness:os.video={robustness:Gn.videoRobustness}:os.video||(os.video={}))}ts.keySystemConfiguration=os,mn.push(ts)}return mn}function F_(mn){return Fm()&&mn.toLowerCase()=="ac-3"?"ec-3":mn}function DT(mn){if(mn.includes("avc1")){var En=mn.split(".");if(En.length==3)return mn=En.shift()+".",mn+=parseInt(En.shift(),10).toString(16),mn+=("000"+parseInt(En.shift(),10).toString(16)).slice(-4)}else if(mn=="vp9")return"vp09.00.41.08";return mn}function Y$(mn,En){En.variants=En.variants.filter(function(xn){var An=xn.audio;return xn=xn.video,!(An&&mn&&mn.audio&&!Q$(An,mn.audio)||xn&&mn&&mn.video&&!Q$(xn,mn.video))})}function X$(mn){mn.textStreams=mn.textStreams.filter(function(En){return $s(Vm(En.mimeType,En.codecs))})}function _A(mn){var En,xn,An,Mn,Un,Bn,Gn;return hs(function(Wn){switch(Wn.g){case 1:En=[],xn=Dn(mn.imageStreams),An=xn.next();case 2:if(An.done){Wn.D(4);break}if(Mn=An.value,Un=Mn.mimeType,nS.has(Un)){Wn.D(5);break}if(Bn=CA.get(Un),!Bn){nS.set(Un,!1),Wn.D(5);break}return Qn(Wn,EA(Bn),7);case 7:Gn=Wn.h,nS.set(Un,Gn);case 5:nS.get(Un)&&En.push(Mn),An=xn.next(),Wn.D(2);break;case 4:mn.imageStreams=En,ms(Wn)}})}function EA(mn){return new Promise(function(En){var xn=new Image;xn.src=mn,"decode"in xn?xn.decode().then(function(){En(!0)}).catch(function(){En(!1)}):xn.onload=xn.onerror=function(){En(xn.height===2)}})}function Q$(mn,En){return!(mn.mimeType!=En.mimeType||mn.codecs.split(".")[0]!=En.codecs.split(".")[0])}function B_(mn){var En=mn.audio,xn=mn.video,An=En?En.mimeType:null,Mn=xn?xn.mimeType:null,Un=En?En.codecs:null,Bn=xn?xn.codecs:null,Gn=[];Bn&&Gn.push(Bn),Un&&Gn.push(Un);var Wn=[];xn&&Wn.push(xn.mimeType),En&&Wn.push(En.mimeType),Wn=Wn[0]||null;var ts=[];En&&ts.push(En.kind),xn&&ts.push(xn.kind),ts=ts[0]||null;var os=new Set;if(En)for(var cs=Dn(En.roles),ls=cs.next();!ls.done;ls=cs.next())os.add(ls.value);if(xn)for(cs=Dn(xn.roles),ls=cs.next();!ls.done;ls=cs.next())os.add(ls.value);return mn={id:mn.id,active:!1,type:"variant",bandwidth:mn.bandwidth,language:mn.language,label:null,kind:ts,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:Wn,audioMimeType:An,videoMimeType:Mn,codecs:Gn.join(", "),audioCodec:Un,videoCodec:Bn,primary:mn.primary,roles:Array.from(os),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null},xn&&(mn.videoId=xn.id,mn.originalVideoId=xn.originalId,mn.width=xn.width||null,mn.height=xn.height||null,mn.frameRate=xn.frameRate||null,mn.pixelAspectRatio=xn.pixelAspectRatio||null,mn.videoBandwidth=xn.bandwidth||null),En&&(mn.audioId=En.id,mn.originalAudioId=En.originalId,mn.channelsCount=En.channelsCount,mn.audioSamplingRate=En.audioSamplingRate,mn.audioBandwidth=En.bandwidth||null,mn.spatialAudio=En.spatialAudio,mn.label=En.label,mn.audioRoles=En.roles),mn}function UT(mn){return{id:mn.id,active:!1,type:Vu,bandwidth:0,language:mn.language,label:mn.label,kind:mn.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:mn.mimeType,audioMimeType:null,videoMimeType:null,codecs:mn.codecs||null,audioCodec:null,videoCodec:null,primary:mn.primary,roles:mn.roles,audioRoles:null,forced:mn.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:mn.originalId,originalImageId:null}}function Z$(mn){var En=mn.width||null,xn=mn.height||null,An=null;mn.segmentIndex&&(An=mn.segmentIndex.get(0));var Mn=mn.tilesLayout;return An&&(Mn=An.tilesLayout||Mn),Mn&&En!=null&&(En/=Number(Mn.split("x")[0])),Mn&&xn!=null&&(xn/=Number(Mn.split("x")[1])),{id:mn.id,active:!1,type:"image",bandwidth:mn.bandwidth||0,language:"",label:null,kind:null,width:En,height:xn,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:mn.mimeType,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:Mn||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:mn.originalId}}function J$(mn){return mn.__shaka_id||(mn.__shaka_id=bA++),mn.__shaka_id}function tS(mn){var En=ql(mn);return En.active=mn.mode!="disabled",En.type="text",En.originalTextId=mn.id,mn.kind=="captions"&&(En.mimeType="application/cea-608"),mn.kind&&(En.roles=[mn.kind]),mn.kind=="forced"&&(En.forced=!0),En}function jT(mn){var En=ql(mn);return En.active=mn.enabled,En.type="variant",En.originalAudioId=mn.id,mn.kind=="main"&&(En.primary=!0),mn.kind&&(En.roles=[mn.kind],En.audioRoles=[mn.kind],En.label=mn.label),En}function ql(mn){return{id:J$(mn),active:!1,type:"",bandwidth:0,language:ol(mn.language),label:mn.label,kind:mn.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null}}function V_(mn){return mn.allowedByApplication&&mn.allowedByKeySystem}function SA(mn){return mn.filter(function(En){return V_(En)})}function TA(mn,En){var xn=mn.filter(function(Bn){return Bn.audio&&Bn.audio.channelsCount}),An=new Map;xn=Dn(xn);for(var Mn=xn.next();!Mn.done;Mn=xn.next()){Mn=Mn.value;var Un=Mn.audio.channelsCount;An.has(Un)||An.set(Un,[]),An.get(Un).push(Mn)}return xn=Array.from(An.keys()),xn.length==0?mn:(mn=xn.filter(function(Bn){return Bn<=En}),mn.length?An.get(Math.max.apply(Math,Kn(mn))):An.get(Math.min.apply(Math,Kn(xn))))}function rS(mn,En,xn,An){var Mn=mn,Un=mn.filter(function(Wn){return Wn.primary});Un.length&&(Mn=Un);var Bn=Mn.length?Mn[0].language:"";if(Mn=Mn.filter(function(Wn){return Wn.language==Bn}),En){var Gn=R0(ol(En),mn.map(function(Wn){return Wn.language}));Gn&&(Mn=mn.filter(function(Wn){return ol(Wn.language)==Gn}))}if(Mn=Mn.filter(function(Wn){return Wn.forced==An}),xn){if(mn=_b(Mn,xn),mn.length)return mn}else if(mn=Mn.filter(function(Wn){return Wn.roles.length==0}),mn.length)return mn;return mn=Mn.map(function(Wn){return Wn.roles}).reduce(O0,[]),mn.length?_b(Mn,mn[0]):Mn}function _b(mn,En){return mn.filter(function(xn){return xn.roles.includes(En)})}function kA(mn){var En=[];return mn.audio&&En.push($A(mn.audio)),mn.video&&En.push($A(mn.video)),En.join(", ")}function $A(mn){return mn.type=="audio"?"type=audio codecs="+mn.codecs+" bandwidth="+mn.bandwidth+" channelsCount="+mn.channelsCount+" audioSamplingRate="+mn.audioSamplingRate:mn.type=="video"?"type=video codecs="+mn.codecs+" bandwidth="+mn.bandwidth+" frameRate="+mn.frameRate+" width="+mn.width+" height="+mn.height:"unexpected stream type"}var bA=0,FT="smooth",ex="powerEfficient",xA="bandwidth",nS=new Map().set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),CA=new Map().set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function Pl(){var mn=this;this.m=null,this.l=!1,this.i=new R_,navigator.connection&&navigator.connection.addEventListener&&(this.C=function(){if(mn.g.useNetworkInformation&&mn.l){mn.i=new R_,mn.g&&mn.i.configure(mn.g.advanced);var En=mn.chooseVariant();En&&mn.m(En)}},navigator.connection.addEventListener("change",this.C)),this.s=[],this.F=1,this.H=!1,this.C=this.h=this.j=this.g=this.B=null,this.G=new ku(function(){if(mn.g.restrictToElementSize){var En=mn.chooseVariant();En&&mn.m(En)}})}Sn=Pl.prototype,Sn.stop=function(){this.m=null,this.l=!1,this.s=[],this.F=1,this.j=this.B=null,this.h&&(this.h.disconnect(),this.h=null),this.G.stop()},Sn.release=function(){navigator.connection&&navigator.connection.removeEventListener&&(navigator.connection.removeEventListener("change",this.C),this.C=null),this.G=null},Sn.init=function(mn){this.m=mn},Sn.chooseVariant=function(){var mn=1/0,En=1/0;this.g.restrictToScreenSize&&(En=this.g.ignoreDevicePixelRatio?1:pn.devicePixelRatio,mn=pn.screen.height*En,En*=pn.screen.width),this.h&&this.g.restrictToElementSize&&(En=this.g.ignoreDevicePixelRatio?1:pn.devicePixelRatio,mn=this.j.clientWidth*En,En*=this.j.clientHeight),mn=wA(this.g.restrictions,this.s,mn,En),En=this.i.getBandwidthEstimate(tx(this)),this.s.length&&!mn.length&&(mn=wA(null,this.s,1/0,1/0),mn=[mn[0]]);for(var xn=mn[0]||null,An=0;An<mn.length;An++){for(var Mn=mn[An],Un=isNaN(this.F)?1:Math.abs(this.F),Bn=Un*Mn.bandwidth/this.g.bandwidthDowngradeTarget,Gn={bandwidth:1/0},Wn=An+1;Wn<mn.length;Wn++)if(Mn.bandwidth!=mn[Wn].bandwidth){Gn=mn[Wn];break}Un=Un*Gn.bandwidth/this.g.bandwidthUpgradeTarget,En>=Bn&&En<=Un&&xn.bandwidth!=Mn.bandwidth&&(xn=Mn)}return this.B=Date.now(),xn},Sn.enable=function(){this.l=!0},Sn.disable=function(){this.l=!1},Sn.segmentDownloaded=function(mn,En){if(this.i.sample(mn,En),this.B!=null&&this.l)e:{if(this.H){if(Date.now()-this.B<1e3*this.g.switchInterval)break e}else{if(mn=this.i,!(mn.g>=mn.i))break e;this.H=!0}mn=this.chooseVariant(),this.i.getBandwidthEstimate(tx(this)),mn&&this.m(mn)}},Sn.getBandwidthEstimate=function(){return this.i.getBandwidthEstimate(tx(this))},Sn.setVariants=function(mn){this.s=mn},Sn.playbackRateChanged=function(mn){this.F=mn},Sn.setMediaElement=function(mn){var En=this;this.j=mn,this.h&&(this.h.disconnect(),this.h=null),this.j&&"ResizeObserver"in pn&&(this.h=new ResizeObserver(function(){En.G.R(yM)}),this.h.observe(this.j))},Sn.configure=function(mn){this.g=mn,this.i&&this.g&&this.i.configure(this.g.advanced)};function tx(mn){var En=mn.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&mn.g.useNetworkInformation&&(En=1e6*navigator.connection.downlink),En}function wA(mn,En,xn,An){return mn&&(En=En.filter(function(Mn){return j0(Mn,mn,{width:An,height:xn})})),En.sort(function(Mn,Un){return Mn.bandwidth-Un.bandwidth})}Ys("shaka.abr.SimpleAbrManager",Pl),Pl.prototype.configure=Pl.prototype.configure,Pl.prototype.setMediaElement=Pl.prototype.setMediaElement,Pl.prototype.playbackRateChanged=Pl.prototype.playbackRateChanged,Pl.prototype.setVariants=Pl.prototype.setVariants,Pl.prototype.getBandwidthEstimate=Pl.prototype.getBandwidthEstimate,Pl.prototype.segmentDownloaded=Pl.prototype.segmentDownloaded,Pl.prototype.disable=Pl.prototype.disable,Pl.prototype.enable=Pl.prototype.enable,Pl.prototype.chooseVariant=Pl.prototype.chooseVariant,Pl.prototype.init=Pl.prototype.init,Pl.prototype.release=Pl.prototype.release,Pl.prototype.stop=Pl.prototype.stop;var yM=1;function rx(mn,En){this.g=mn,this.h=En}rx.prototype.toString=function(){return"v"+this.g+"."+this.h};function nx(mn,En){var xn=new rx(5,0),An=ix,Mn=An.g,Un=xn.h-Mn.h;(0<(xn.g-Mn.g||Un)?An.i:An.h)(An.g,xn,mn,En)}function F0(mn,En,xn,An){Tu([xn,"has been deprecated and will be removed in",En,". We are currently at version",mn,". Additional information:",An].join(" "))}function BT(mn,En,xn,An){fl([xn,"has been deprecated and has been removed in",En,". We are now at version",mn,". Additional information:",An].join(""))}var ix=null;Ys("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3});function iS(mn,En){for(this.h=mn,this.g=new Set([mn]),En=En||[],mn=Dn(En),En=mn.next();!En.done;En=mn.next())this.add(En.value)}iS.prototype.add=function(mn){return o_(this.h,mn)?(this.g.add(mn),!0):!1};function o_(mn,En){var xn;if(!(xn=!!mn.audio!=!!En.audio||!!mn.video!=!!En.video||mn.language!=En.language)&&(xn=mn.audio&&En.audio)){xn=mn.audio;var An=En.audio;xn=!((!(!xn.channelsCount||!An.channelsCount||2<xn.channelsCount||2<An.channelsCount)||xn.channelsCount==An.channelsCount)&&Vl(xn,An)&&s_(xn.roles,An.roles))}return!xn&&(xn=mn.video&&En.video)&&(mn=mn.video,En=En.video,xn=!(Vl(mn,En)&&s_(mn.roles,En.roles))),!xn}iS.prototype.values=function(){return this.g.values()};function Vl(mn,En){if(mn.mimeType!=En.mimeType||(mn=mn.codecs.split(",").map(function(An){return Hs(An)[0]}),En=En.codecs.split(",").map(function(An){return Hs(An)[0]}),mn.length!=En.length))return!1;mn.sort(),En.sort();for(var xn=0;xn<mn.length;xn++)if(mn[xn]!=En[xn])return!1;return!0}function s_(mn,En){if(mn=new Set(mn),En=new Set(En),mn.delete("main"),En.delete("main"),mn.size!=En.size)return!1;mn=Dn(mn);for(var xn=mn.next();!xn.done;xn=mn.next())if(!En.has(xn.value))return!1;return!0}function VT(mn){this.g=mn,this.h=new Uy(mn.language,"",mn.audio&&mn.audio.channelsCount?mn.audio.channelsCount:0,"")}VT.prototype.create=function(mn){var En=this,xn=mn.filter(function(An){return o_(En.g,An)});return xn.length?new iS(xn[0],xn):this.h.create(mn)};function Uy(mn,En,xn,An){this.i=mn,this.j=En,this.g=xn,this.h=An===void 0?"":An}Uy.prototype.create=function(mn){var En=[];En=nv(mn,this.i);var xn=mn.filter(function(An){return An.primary});for(En=En.length?En:xn.length?xn:mn,mn=AA(En,this.j),mn.length&&(En=mn),this.g&&(mn=TA(En,this.g),mn.length&&(En=mn)),this.h&&(mn=vM(En,this.h),mn.length&&(En=mn)),mn=new iS(En[0]),En=Dn(En),xn=En.next();!xn.done;xn=En.next())xn=xn.value,o_(mn.h,xn)&&mn.add(xn);return mn};function nv(mn,En){En=ol(En);var xn=R0(En,mn.map(function(An){return $v(An)}));return xn?mn.filter(function(An){return xn==$v(An)}):[]}function AA(mn,En){return mn.filter(function(xn){return xn.audio?En?xn.audio.roles.includes(En):xn.audio.roles.length==0:!1})}function vM(mn,En){return mn.filter(function(xn){return xn.audio?xn.audio.label.toLowerCase()==En.toLowerCase():!1})}function Ju(){this.g=hl,this.h=new Map().set(hl,2).set(Av,1)}function ax(mn,En,xn){mn.h.set(hl,xn).set(Av,En)}var Av=0,hl=1;function G_(mn,En){var xn=Iv();this.l=mn.maxAttempts==null?xn.maxAttempts:mn.maxAttempts,this.j=mn.baseDelay==null?xn.baseDelay:mn.baseDelay,this.s=mn.fuzzFactor==null?xn.fuzzFactor:mn.fuzzFactor,this.m=mn.backoffFactor==null?xn.backoffFactor:mn.backoffFactor,this.g=0,this.h=this.j,(this.i=En===void 0?!1:En)&&(this.g=1)}function ox(mn){var En,xn;return hs(function(An){if(An.g==1){if(mn.g>=mn.l)if(mn.i)mn.g=1,mn.h=mn.j;else throw new zs(2,7,1010);return En=mn.g,mn.g++,En==0?An.return():(xn=mn.h*(1+(2*Math.random()-1)*mn.s),Qn(An,new Promise(function(Mn){new ku(Mn).R(xn/1e3)}),2))}mn.h*=mn.m,ms(An)})}function Iv(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function Al(mn,En){this.promise=mn,this.i=En,this.g=!1}function Sl(mn){return new Al(Promise.reject(mn),function(){return Promise.resolve()})}function jy(){var mn=Promise.reject(new zs(2,7,7001));return mn.catch(function(){}),new Al(mn,function(){return Promise.resolve()})}function tm(mn){return new Al(Promise.resolve(mn),function(){return Promise.resolve()})}function iv(mn){return new Al(mn,function(){return mn.catch(function(){})})}Al.prototype.abort=function(){return this.g=!0,this.i()};function sx(mn){return new Al(Promise.all(mn.map(function(En){return En.promise})),function(){return Promise.all(mn.map(function(En){return En.abort()}))})}Al.prototype.finally=function(mn){return this.promise.then(function(){return mn(!0)},function(){return mn(!1)}),this},Al.prototype.ia=function(mn,En){function xn(Gn){return function(Wn){if(Mn.g&&Gn)Un.reject(Bn);else{var ts=Gn?mn:En;ts?An=_M(ts,Wn,Un):(Gn?Un.resolve:Un.reject)(Wn)}}}function An(){return Un.reject(Bn),Mn.abort()}var Mn=this,Un=new _l,Bn=new zs(2,7,7001);return this.promise.then(xn(!0),xn(!1)),new Al(Un,function(){return An()})};function _M(mn,En,xn){try{var An=mn(En);return An&&An.promise&&An.abort?(xn.resolve(An.promise),function(){return An.abort()}):(xn.resolve(An),function(){return Promise.resolve(An).then(function(){},function(){})})}catch(Mn){return xn.reject(Mn),function(){return Promise.resolve()}}}Ys("shaka.util.AbortableOperation",Al),Al.prototype.chain=Al.prototype.ia,Al.prototype.finally=Al.prototype.finally,Al.all=sx,Al.prototype.abort=Al.prototype.abort,Al.notAbortable=iv,Al.completed=tm,Al.aborted=jy,Al.failed=Sl;function z_(mn){function En(An){switch(typeof An){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return An;default:if(!An||An.buffer&&An.buffer.constructor==ArrayBuffer)return An;if(xn.has(An))return null;var Mn=An.constructor==Array;if(An.constructor!=Object&&!Mn)return null;xn.add(An);var Un=Mn?[]:{},Bn;for(Bn in An)Un[Bn]=En(An[Bn]);return Mn&&(Un.length=An.length),Un}}var xn=new Set;return En(mn)}function aS(mn){var En={},xn;for(xn in mn)En[xn]=mn[xn];return En}function Fy(){this.g=[]}function H_(mn,En){mn.g.push(En.finally(function(){Wu(mn.g,En)}))}Fy.prototype.destroy=function(){for(var mn=[],En=Dn(this.g),xn=En.next();!xn.done;xn=En.next())xn=xn.value,xn.promise.catch(function(){}),mn.push(xn.abort());return this.g=[],Promise.all(mn)};function Cl(mn,En,xn){Eu.call(this),this.i=!1,this.m=new Fy,this.g=new Set,this.h=new Set,this.l=mn||null,this.j=En||null,this.B=xn||null,this.s=!1}as(Cl,Eu),Sn=Cl.prototype,Sn.Ne=function(mn){this.s=mn};function gm(mn,En,xn,An){xn=xn||PA;var Mn=u_[mn];(!Mn||xn>=Mn.priority)&&(u_[mn]={priority:xn,rh:En,sh:An===void 0?!1:An})}Sn.uh=function(mn){this.g.add(mn)},Sn.Kh=function(mn){this.g.delete(mn)},Sn.pg=function(){this.g.clear()},Sn.vh=function(mn){this.h.add(mn)},Sn.Lh=function(mn){this.h.delete(mn)},Sn.qg=function(){this.h.clear()};function ll(mn,En,xn){return{uris:mn,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:En,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:xn===void 0?null:xn}}Sn.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),Eu.prototype.release.call(this),this.m.destroy()},Sn.request=function(mn,En){var xn=this,An=new IA;if(this.i){var Mn=Promise.reject(new zs(2,7,7001));return Mn.catch(function(){}),new oS(Mn,function(){return Promise.resolve()},An)}En.method=En.method||"GET",En.headers=En.headers||{},En.retryParameters=En.retryParameters?z_(En.retryParameters):Iv(),En.uris=z_(En.uris),Mn=Ul(this,mn,En);var Un=Mn.ia(function(){return ux(xn,mn,En,new G_(En.retryParameters,!1),0,null,An)}),Bn=Un.ia(function(cs){return EM(xn,mn,cs)}),Gn=Date.now(),Wn=0;Mn.promise.then(function(){Wn=Date.now()-Gn},function(){});var ts=0;Un.promise.then(function(){ts=Date.now()},function(){});var os=Bn.ia(function(cs){var ls=Date.now()-ts,gs=cs.response;return gs.timeMs+=Wn,gs.timeMs+=ls,cs.dh||!xn.l||gs.fromCache||En.method=="HEAD"||mn!=Pv||xn.l(gs.timeMs,gs.data.byteLength),gs},function(cs){throw cs&&(cs.severity=2),cs});return Mn=new oS(os.promise,function(){return os.abort()},An),H_(this.m,Mn),Mn};function Ul(mn,En,xn){var An=tm(void 0),Mn={};mn=Dn(mn.g);for(var Un=mn.next();!Un.done;Mn={Zd:Mn.Zd},Un=mn.next())Mn.Zd=Un.value,An=An.ia(function(Bn){return function(){return xn.body&&(xn.body=fp(xn.body)),Bn.Zd(En,xn)}}(Mn));return An.ia(void 0,function(Bn){throw Bn instanceof zs&&Bn.code==7001?Bn:new zs(2,1,1006,Bn)})}function ux(mn,En,xn,An,Mn,Un,Bn){mn.s&&(xn.uris[Mn]=xn.uris[Mn].replace("http://","https://"));var Gn=new Iu(xn.uris[Mn]),Wn=Gn.Wa,ts=!1;Wn||(Wn=location.protocol,Wn=Wn.slice(0,-1),Gp(Gn,Wn),xn.uris[Mn]=Gn.toString()),Wn=Wn.toLowerCase();var os=(Wn=u_[Wn])?Wn.rh:null;if(!os)return Sl(new zs(2,1,1e3,Gn));var cs=Wn.sh,ls=null,gs=null,ws=!1,Ns=!1,Os;return iv(ox(An)).ia(function(){if(mn.i)return jy();Os=Date.now();var Ps=os(xn.uris[Mn],xn,En,function(qs,Qs,tu){ls&&ls.stop(),gs&&gs.R(Ds/1e3),mn.l&&En==Pv&&(mn.l(qs,Qs),ts=!0,Bn.g=tu)},function(qs){mn.j&&mn.j(qs,xn,En),Ns=!0});if(!cs)return Ps;var Xs=xn.retryParameters.connectionTimeout;Xs&&(ls=new ku(function(){ws=!0,Ps.abort()}),ls.R(Xs/1e3));var Ds=xn.retryParameters.stallTimeout;return Ds&&(gs=new ku(function(){ws=!0,Ps.abort()})),Ps}).ia(function(Ps){ls&&ls.stop(),gs&&gs.stop(),Ps.timeMs==null&&(Ps.timeMs=Date.now()-Os);var Xs={response:Ps,dh:ts};return!Ns&&mn.j&&mn.j(Ps.headers,xn,En),Xs},function(Ps){if(ls&&ls.stop(),gs&&gs.stop(),mn.B){var Xs=null,Ds=0;Ps instanceof zs&&(Xs=Ps,Ps.code==1001&&(Ds=Ps.data[1])),mn.B(xn,Xs,Ds,ws)}if(mn.i)return jy();if(ws&&(Ps=new zs(1,1,1003,xn.uris[Mn],En)),Ps instanceof zs){if(Ps.code==7001)throw Ps;if(Ps.code==1010)throw Un;if(Ps.severity==1)return Xs=new Map().set("error",Ps),Xs=new vu("retry",Xs),mn.dispatchEvent(Xs),Mn=(Mn+1)%xn.uris.length,ux(mn,En,xn,An,Mn,Ps,Bn)}throw Ps})}function EM(mn,En,xn){var An=tm(void 0),Mn={};mn=Dn(mn.h);for(var Un=mn.next();!Un.done;Mn={$d:Mn.$d},Un=mn.next())Mn.$d=Un.value,An=An.ia(function(Bn){return function(){var Gn=xn.response;return Gn.data&&(Gn.data=fp(Gn.data)),Bn.$d(En,Gn)}}(Mn));return An.ia(function(){return xn},function(Bn){var Gn=2;if(Bn instanceof zs){if(Bn.code==7001)throw Bn;Gn=Bn.severity}throw new zs(Gn,1,1007,Bn)})}Ys("shaka.net.NetworkingEngine",Cl),Cl.prototype.request=Cl.prototype.request,Cl.prototype.destroy=Cl.prototype.destroy,Cl.makeRequest=ll,Cl.defaultRetryParameters=function(){return Iv()},Cl.prototype.clearAllResponseFilters=Cl.prototype.qg,Cl.prototype.unregisterResponseFilter=Cl.prototype.Lh,Cl.prototype.registerResponseFilter=Cl.prototype.vh,Cl.prototype.clearAllRequestFilters=Cl.prototype.pg,Cl.prototype.unregisterRequestFilter=Cl.prototype.Kh,Cl.prototype.registerRequestFilter=Cl.prototype.uh,Cl.unregisterScheme=function(mn){delete u_[mn]},Cl.registerScheme=gm,Cl.prototype.setForceHTTPS=Cl.prototype.Ne;function IA(){this.g=0}Cl.NumBytesRemainingClass=IA;function oS(mn,En,xn){Al.call(this,mn,En),this.h=xn}as(oS,Al),Cl.PendingRequest=oS;var Pv=1;Cl.RequestType={MANIFEST:0,SEGMENT:Pv,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6};var PA=3;Cl.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:PA};var u_={};function Ov(mn){this.g=!1,this.h=new _l,this.i=mn}Ov.prototype.destroy=function(){var mn=this;return this.g?this.h:(this.g=!0,this.i().then(function(){mn.h.resolve()},function(){mn.h.resolve()}))};function Ol(mn,En){if(mn.g)throw En instanceof zs&&En.code==7003?En:new zs(2,7,7003,En)}function xu(){this.g=new Fu}Sn=xu.prototype,Sn.release=function(){this.Rb(),this.g=null},Sn.o=function(mn,En,xn,An){this.g&&(mn=new av(mn,En,xn,An),this.g.push(En,mn))},Sn.ya=function(mn,En,xn,An){function Mn(Bn){Un.qc(mn,En,Mn),xn(Bn)}var Un=this;this.o(mn,En,Mn,An)},Sn.qc=function(mn,En,xn){if(this.g){var An=this.g.get(En)||[];An=Dn(An);for(var Mn=An.next();!Mn.done;Mn=An.next())Mn=Mn.value,Mn.target!=mn||xn!=Mn.listener&&xn||(Mn.qc(),this.g.remove(En,Mn))}},Sn.Rb=function(){if(this.g){var mn=this.g,En=[],xn;for(xn in mn.g)En.push.apply(En,Kn(mn.g[xn]));for(mn=Dn(En),En=mn.next();!En.done;En=mn.next())En.value.qc();this.g.g={}}},Ys("shaka.util.EventManager",xu),xu.prototype.removeAll=xu.prototype.Rb,xu.prototype.unlisten=xu.prototype.qc,xu.prototype.listenOnce=xu.prototype.ya,xu.prototype.listen=xu.prototype.o,xu.prototype.release=xu.prototype.release;function av(mn,En,xn,An){this.target=mn,this.type=En,this.listener=xn,this.g=OA(mn,An),this.target.addEventListener(En,xn,this.g)}av.prototype.qc=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};function OA(mn,En){if(En==null)return!1;if(typeof En=="boolean")return En;var xn=new Set(["passive","capture"]);return Object.keys(En).filter(function(An){return!xn.has(An)}),Rl(mn)?En:En.capture||!1}function Rl(mn){var En=Gl;if(En==null){En=!1;try{var xn={},An={get:function(){return En=!0,!1}};Object.defineProperty(xn,"passive",An),Object.defineProperty(xn,"capture",An),An=function(){},mn.addEventListener("test",An,xn),mn.removeEventListener("test",An,xn)}catch{En=!1}Gl=En}return En||!1}var Gl=void 0;function Mv(mn){for(var En=new Map,xn=Dn(Object.keys(mn)),An=xn.next();!An.done;An=xn.next())An=An.value,En.set(An,mn[An]);return En}function zT(mn){var En={};return mn.forEach(function(xn,An){En[An]=xn}),En}function B0(mn,En){if(mn||En){if(mn&&!En||En&&!mn)return!1}else return!0;if(mn.size!=En.size)return!1;mn=Dn(mn);for(var xn=mn.next();!xn.done;xn=mn.next()){var An=Dn(xn.value);if(xn=An.next().value,An=An.next().value,!En.has(xn)||(xn=En.get(xn),xn!=An||xn==null))return!1}return!0}function kl(mn,En){this.W=Hp(mn),this.h=En==V0,this.g=0}Sn=kl.prototype,Sn.xa=function(){return this.g<this.W.byteLength},Sn.ma=function(){return this.g},Sn.Jg=function(){return this.W.byteLength},Sn.ob=function(){try{var mn=this.W.getUint8(this.g);return this.g+=1,mn}catch{throw uy()}},Sn.De=function(){try{var mn=this.W.getUint16(this.g,this.h);return this.g+=2,mn}catch{throw uy()}},Sn.N=function(){try{var mn=this.W.getUint32(this.g,this.h);return this.g+=4,mn}catch{throw uy()}},Sn.Qf=function(){try{var mn=this.W.getInt32(this.g,this.h);return this.g+=4,mn}catch{throw uy()}},Sn.Cb=function(){try{if(this.h)var mn=this.W.getUint32(this.g,!0),En=this.W.getUint32(this.g+4,!0);else En=this.W.getUint32(this.g,!1),mn=this.W.getUint32(this.g+4,!1)}catch{throw uy()}if(2097151<En)throw new zs(2,3,3001);return this.g+=8,En*Math.pow(2,32)+mn},Sn.Bb=function(mn){if(this.g+mn>this.W.byteLength)throw uy();var En=Ku(this.W,this.g,mn);return this.g+=mn,En},Sn.skip=function(mn){if(this.g+mn>this.W.byteLength)throw uy();this.g+=mn},Sn.Dh=function(mn){if(this.g<mn)throw uy();this.g-=mn},Sn.seek=function(mn){if(0>mn||mn>this.W.byteLength)throw uy();this.g=mn},Sn.Vc=function(){for(var mn=this.g;this.xa()&&this.W.getUint8(this.g)!=0;)this.g+=1;return mn=Ku(this.W,mn,this.g-mn),this.g+=1,xl(mn)};function uy(){return new zs(2,3,3e3)}Ys("shaka.util.DataViewReader",kl),kl.prototype.readTerminatedString=kl.prototype.Vc,kl.prototype.seek=kl.prototype.seek,kl.prototype.rewind=kl.prototype.Dh,kl.prototype.skip=kl.prototype.skip,kl.prototype.readBytes=kl.prototype.Bb,kl.prototype.readUint64=kl.prototype.Cb,kl.prototype.readInt32=kl.prototype.Qf,kl.prototype.readUint32=kl.prototype.N,kl.prototype.readUint16=kl.prototype.De,kl.prototype.readUint8=kl.prototype.ob,kl.prototype.getLength=kl.prototype.Jg,kl.prototype.getPosition=kl.prototype.ma,kl.prototype.hasMoreData=kl.prototype.xa;var V0=1;kl.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:V0};function Nl(){this.i=[],this.h=[],this.g=!1}Sn=Nl.prototype,Sn.box=function(mn,En){return mn=sS(mn),this.i[mn]=MA,this.h[mn]=En,this},Sn.T=function(mn,En){return mn=sS(mn),this.i[mn]=l_,this.h[mn]=En,this},Sn.stop=function(){this.g=!0},Sn.parse=function(mn,En,xn){for(mn=new kl(mn,0),this.g=!1;mn.xa()&&!this.g;)this.Tc(0,mn,En,xn)},Sn.Tc=function(mn,En,xn,An){var Mn=En.ma();if(An&&Mn+8>En.W.byteLength)this.g=!0;else{var Un=En.N(),Bn=En.N(),Gn=Hl(Bn),Wn=!1;switch(Un){case 0:Un=En.W.byteLength-Mn;break;case 1:if(An&&En.ma()+8>En.W.byteLength){this.g=!0;return}Un=En.Cb(),Wn=!0}var ts=this.h[Bn];if(ts){var os=null,cs=null;if(this.i[Bn]==l_){if(An&&En.ma()+4>En.W.byteLength){this.g=!0;return}cs=En.N(),os=cs>>>24,cs&=16777215}Bn=Mn+Un,xn&&Bn>En.W.byteLength&&(Bn=En.W.byteLength),An&&Bn>En.W.byteLength?this.g=!0:(An=Bn-En.ma(),En=0<An?En.Bb(An):new Uint8Array(0),En=new kl(En,0),ts({name:Gn,parser:this,partialOkay:xn||!1,version:os,flags:cs,reader:En,size:Un,start:Mn+mn,has64BitSize:Wn}))}else En.skip(Math.min(Mn+Un-En.ma(),En.W.byteLength-En.ma()))}};function zl(mn){for(var En=uS(mn);mn.reader.xa()&&!mn.parser.g;)mn.parser.Tc(mn.start+En,mn.reader,mn.partialOkay)}function G0(mn){for(var En=uS(mn),xn=mn.reader.N(),An=0;An<xn&&(mn.parser.Tc(mn.start+En,mn.reader,mn.partialOkay),!mn.parser.g);An++);}function HT(mn){var En=uS(mn);for(mn.reader.skip(78);mn.reader.xa()&&!mn.parser.g;)mn.parser.Tc(mn.start+En,mn.reader,mn.partialOkay)}function Rv(mn){return function(En){mn(En.reader.Bb(En.reader.W.byteLength-En.reader.ma()))}}function sS(mn){var En=0;mn=Dn(mn);for(var xn=mn.next();!xn.done;xn=mn.next())En=En<<8|xn.value.charCodeAt(0);return En}function Hl(mn){return String.fromCharCode(mn>>24&255,mn>>16&255,mn>>8&255,mn&255)}function uS(mn){return 8+(mn.has64BitSize?8:0)+(mn.flags!=null?4:0)}Ys("shaka.util.Mp4Parser",Nl),Nl.headerSize=uS,Nl.typeToString=Hl,Nl.allData=Rv,Nl.visualSampleEntry=HT,Nl.sampleDescription=G0,Nl.children=zl,Nl.prototype.parseNext=Nl.prototype.Tc,Nl.prototype.parse=Nl.prototype.parse,Nl.prototype.stop=Nl.prototype.stop,Nl.prototype.fullBox=Nl.prototype.T,Nl.prototype.box=Nl.prototype.box;var MA=0,l_=1;function ov(mn){var En=this;this.g=[],this.h=[],this.data=[],new Nl().box("moov",zl).box("moof",zl).T("pssh",function(xn){if(!(1<xn.version)){var An=Ku(xn.reader.W,-12,xn.size);if(En.data.push(An),En.g.push(_c(xn.reader.Bb(16))),0<xn.version){An=xn.reader.N();for(var Mn=0;Mn<An;Mn++){var Un=_c(xn.reader.Bb(16));En.h.push(Un)}}}}).parse(mn)}function z0(mn,En,xn,An){var Mn=mn.length,Un=En.length+16+Mn;0<An&&(Un+=4+16*xn.size);var Bn=new Uint8Array(Un),Gn=Hp(Bn),Wn=0;if(Gn.setUint32(Wn,Un),Wn+=4,Gn.setUint32(Wn,1886614376),Wn+=4,1>An?Gn.setUint32(Wn,0):Gn.setUint32(Wn,16777216),Wn+=4,Bn.set(En,Wn),Wn+=En.length,0<An)for(Gn.setUint32(Wn,xn.size),Wn+=4,En=Dn(xn),xn=En.next();!xn.done;xn=En.next())xn=n_(xn.value),Bn.set(xn,Wn),Wn+=xn.length;return Gn.setUint32(Wn,Mn),Bn.set(mn,Wn+4),Bn}function lS(mn,En){return mn=Xl(mn,En),mn.length!=1?null:mn[0]}function Ml(mn,En,xn){return mn=cS(mn,En,xn),mn.length!=1?null:mn[0]}function Xl(mn,En){var xn=[];mn=Dn(mn.childNodes);for(var An=mn.next();!An.done;An=mn.next())An=An.value,An instanceof Element&&An.tagName==En&&xn.push(An);return xn}function Nv(mn){return Array.from(mn.childNodes).filter(function(En){return En instanceof Element})}function cS(mn,En,xn){var An=[];mn=Dn(mn.childNodes);for(var Mn=mn.next();!Mn.done;Mn=mn.next())Mn=Mn.value,Mn instanceof Element&&Mn.localName==xn&&Mn.namespaceURI==En&&An.push(Mn);return An}function K_(mn,En,xn){return mn.hasAttributeNS(En,xn)?mn.getAttributeNS(En,xn):null}function ly(mn,En,xn){En=Dn(En);for(var An=En.next();!An.done;An=En.next())if(An=An.value,mn.hasAttributeNS(An,xn))return mn.getAttributeNS(An,xn);return null}function Gm(mn){return Array.from(mn.childNodes).every(H0)?mn.textContent.trim():null}function H0(mn){return mn.nodeType==Node.TEXT_NODE||mn.nodeType==Node.CDATA_SECTION_NODE}function Kl(mn,En,xn,An){An=An===void 0?null:An;var Mn=null;return mn=mn.getAttribute(En),mn!=null&&(Mn=xn(mn)),Mn??An}function K0(mn){return mn?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(mn)&&(mn+="Z"),mn=Date.parse(mn),isNaN(mn)?null:mn/1e3):null}function sv(mn){return!mn||(mn=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(mn),!mn)?null:(mn=31536e3*Number(mn[1]||null)+2592e3*Number(mn[2]||null)+86400*Number(mn[3]||null)+3600*Number(mn[4]||null)+60*Number(mn[5]||null)+Number(mn[6]||null),isFinite(mn)?mn:null)}function KT(mn){var En=/([0-9]+)-([0-9]+)/.exec(mn);return!En||(mn=Number(En[1]),!isFinite(mn))?null:(En=Number(En[2]),isFinite(En)?{start:mn,end:En}:null)}function WT(mn){return mn=Number(mn),mn%1===0?mn:null}function qT(mn){return mn=Number(mn),mn%1===0&&0<mn?mn:null}function uv(mn){return mn=Number(mn),mn%1===0&&0<=mn?mn:null}function W0(mn){return mn=Number(mn),isNaN(mn)?null:mn}function SM(mn){var En,xn=(En=mn.match(/^(\d+)\/(\d+)$/))?Number(En[1])/Number(En[2]):Number(mn);return isNaN(xn)?null:xn}function q0(mn,En){var xn=new DOMParser,An=TM.value()(mn);mn=null;try{mn=xn.parseFromString(An,"text/xml")}catch{return null}if(xn=mn.documentElement,!xn||xn.getElementsByTagName("parsererror").length||xn.tagName!=En)return null;for(En=document.createNodeIterator(mn,NodeFilter.SHOW_ALL);mn=En.nextNode();)if(mn instanceof HTMLElement||mn instanceof SVGElement)return null;return xn}function lx(mn,En){try{var xn=xl(mn);return q0(xn,En)}catch{return null}}var TM=new Sm(function(){if(typeof trustedTypes<"u"){var mn=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(En){return En}});return function(En){return mn.createHTML(En)}}return function(En){return En}});function Y0(mn,En){var xn=this;En=En===void 0?1:En,this.G=mn,this.I=new Set,this.l=this.C=null,this.ra=this.X=!1,this.J=0,this.g=null,this.B=new xu,this.i=new Map,this.F=[],this.s=new _l,this.h=null,this.m=function(An){xn.s.reject(An),mn.onError(An)},this.aa=new Map,this.Z=new Map,this.P=new ku(function(){return IM(xn)}),this.M=!1,this.K=[],this.O=!1,this.$=new ku(function(){JT(xn)}).ha(En),this.s.catch(function(){}),this.j=new Ov(function(){return kM(xn)}),this.V=!1,this.H=null}Sn=Y0.prototype,Sn.destroy=function(){return this.j.destroy()};function kM(mn){return hs(function(En){switch(En.g){case 1:return mn.B.release(),mn.B=null,mn.s.reject(),mn.$.stop(),mn.$=null,mn.P.stop(),mn.P=null,Qn(En,jA(mn),2);case 2:if(!mn.l){En.D(3);break}return Ts(En,4),Qn(En,mn.l.setMediaKeys(null),6);case 6:ys(En,5);break;case 4:_s(En);case 5:mn.l=null;case 3:mn.g=null,mn.I.clear(),mn.C=null,mn.F=[],mn.h=null,mn.m=function(){},mn.G=null,mn.V=!1,mn.H=null,ms(En)}})}Sn.configure=function(mn){this.h=mn};function RA(mn,En,xn){return mn.ra=!0,mn.F=[],mn.M=xn,cx(mn,En)}function X0(mn,En,xn){return mn.F=xn,mn.M=0<xn.length,cx(mn,En)}function NA(mn,En,xn,An,Mn,Un){var Bn=new Map;return Mn={audioCapabilities:Mn,videoCapabilities:Un,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:En},Mn.drmInfos=[{keySystem:En,licenseServerUri:xn,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:An,serverCertificateUri:"",initData:null,keyIds:null}],Bn.set(En,Mn),hx(mn,Bn,[])}function cx(mn,En){var xn,An,Mn,Un,Bn,Gn,Wn,ts,os,cs,ls,gs,ws,Ns;return hs(function(Os){if(Os.g==1){if(xn=wM(mn))for(An=Dn(En),Mn=An.next();!Mn.done;Mn=An.next())Un=Mn.value,Un.video&&(Un.video.drmInfos=[xn]),Un.audio&&(Un.audio.drmInfos=[xn]);for(Bn=En.some(function(Ps){return!!(Ps.video&&Ps.video.drmInfos.length||Ps.audio&&Ps.audio.drmInfos.length)}),Bn||(Gn=Mv(mn.h.servers),BA(En,Gn)),Wn=Dn(En),Mn=Wn.next();!Mn.done;Mn=Wn.next())for(ts=Mn.value,os=FA(ts),cs=Dn(os),ls=cs.next();!ls.done;ls=cs.next())gs=ls.value,Q0(gs,Mv(mn.h.servers),Mv(mn.h.advanced||{}),mn.h.keySystemsMapping);return Qn(Os,eS(En,mn.M,mn.V),2)}return ws=Bn||Object.keys(mn.h.servers).length,ws?(Ns=hx(mn,void 0,En),Os.return(Bn?Ns:Ns.catch(function(){}))):(mn.X=!0,Os.return(Promise.resolve()))})}function dx(mn){var En;return hs(function(xn){switch(xn.g){case 1:if(mn.l.mediaKeys)return xn.return();if(!mn.H){xn.D(2);break}return Qn(xn,mn.H,3);case 3:return Ol(mn.j),xn.return();case 2:return Ts(xn,4),mn.H=mn.l.setMediaKeys(mn.C),Qn(xn,mn.H,6);case 6:ys(xn,5);break;case 4:En=_s(xn),mn.m(new zs(2,6,6003,En.message));case 5:Ol(mn.j),ms(xn)}})}function $M(mn,En){return hs(function(xn){if(xn.g==1)return Qn(xn,dx(mn),2);dS(mn,En.initDataType,Ku(En.initData)),ms(xn)})}Sn.Bc=function(mn){var En=this,xn;return hs(function(An){if(An.g==1)return En.C?(En.l=mn,En.B.ya(En.l,"play",function(){for(var Mn=Dn(En.K),Un=Mn.next();!Un.done;Un=Mn.next())QT(En,Un.value);En.O=!0,En.K=[]}),"webkitCurrentPlaybackTargetIsWireless"in En.l&&En.B.o(En.l,"webkitcurrentplaybacktargetiswirelesschanged",function(){return jA(En)}),(xn=En.g?En.g.initData.find(function(Mn){return 0<Mn.initData.length}):null)||En.g.keySystem!=="com.apple.fps"||En.F.length?Qn(An,dx(En),2):An.D(2)):(En.B.ya(mn,"encrypted",function(){En.m(new zs(2,6,6010))}),An.return());px(En),xn||En.F.length||En.h.parseInbandPsshEnabled||En.B.o(En.l,"encrypted",function(Mn){return $M(En,Mn)}),ms(An)})};function fx(mn){var En,xn,An,Mn,Un;return hs(function(Bn){switch(Bn.g){case 1:if(!mn.C||!mn.g)return Bn.return();if(!mn.g.serverCertificateUri||mn.g.serverCertificate&&mn.g.serverCertificate.length){Bn.D(2);break}return En=ll([mn.g.serverCertificateUri],mn.h.retryParameters),Ts(Bn,3),xn=mn.G.Ob.request(5,En),Qn(Bn,xn.promise,5);case 5:An=Bn.h,mn.g.serverCertificate=Ku(An.data),ys(Bn,4);break;case 3:throw Mn=_s(Bn),new zs(2,6,6017,Mn);case 4:if(mn.j.g)return Bn.return();case 2:return!mn.g.serverCertificate||!mn.g.serverCertificate.length?Bn.return():(Ts(Bn,6),Qn(Bn,mn.C.setServerCertificate(mn.g.serverCertificate),8));case 8:ys(Bn,0);break;case 6:throw Un=_s(Bn),new zs(2,6,6004,Un.message)}})}function bM(mn,En){var xn,An,Mn;return hs(function(Un){if(Un.g==1)return Qn(Un,mx(mn,En),2);if(Un.g!=3)return xn=Un.h,xn?(An=[],(Mn=mn.i.get(xn))&&(Mn.cb=new _l,An.push(Mn.cb)),An.push(xn.remove()),Qn(Un,Promise.all(An),3)):Un.return();mn.i.delete(xn),ms(Un)})}function px(mn){for(var En=(mn.g?mn.g.initData:[])||[],xn=Dn(En),An=xn.next();!An.done;An=xn.next())An=An.value,dS(mn,An.initDataType,An.initData);for(xn=Dn(mn.F),An=xn.next();!An.done;An=xn.next())mx(mn,An.value);return En.length||mn.F.length||mn.s.resolve(),mn.s}function dS(mn,En,xn){if(xn.length){var An=mn.i.values();An=Dn(An);for(var Mn=An.next();!Mn.done;Mn=An.next())if(Ip(xn,Mn.value.initData)&&!wl("Tizen 2"))return;0<mn.i.size&&W_(mn)&&(mn.s.resolve(),mn.s=new _l,mn.s.catch(function(){})),XT(mn,En,xn,mn.g.sessionType)}}function YT(mn){return mn?!!mn.match(/^com\.(microsoft|chromecast)\.playready/):!1}function DA(mn){return mn=mn.i.keys(),mn=el(mn,function(En){return En.sessionId}),Array.from(mn)}Sn.Gc=function(){var mn=1/0,En=this.i.keys();En=Dn(En);for(var xn=En.next();!xn.done;xn=En.next())xn=xn.value,isNaN(xn.expiration)||(mn=Math.min(mn,xn.expiration));return mn},Sn.ud=function(){return zT(this.Z)};function hx(mn,En,xn){var An,Mn,Un,Bn,Gn,Wn,ts,os,cs,ls,gs,ws,Ns;return hs(function(Os){switch(Os.g){case 1:if(An=new Map,xn.length){Mn=xM(mn,xn,An),Os.D(2);break}return Qn(Os,CM(mn,En),3);case 3:Mn=Os.h;case 2:if(Un=Mn,!Un)throw new zs(2,6,6001);for(Ol(mn.j),Ts(Os,4),mn.I.clear(),Bn=Un.getConfiguration(),Gn=Bn.audioCapabilities||[],Wn=Bn.videoCapabilities||[],ts=Dn(Gn),os=ts.next();!os.done;os=ts.next())cs=os.value,mn.I.add(cs.contentType.toLowerCase());for(ls=Dn(Wn),os=ls.next();!os.done;os=ls.next())gs=os.value,mn.I.add(gs.contentType.toLowerCase());if(xn.length){var Ps=Un.keySystem,Xs=An.get(Un.keySystem),Ds=[],qs=[],Qs=[],tu=[],ou=new Set;gx(Xs,Ds,Qs,qs,tu,ou);var hu=mn.M?"persistent-license":"temporary";for(Ps={keySystem:Ps,licenseServerUri:Ds[0],distinctiveIdentifierRequired:Xs[0].distinctiveIdentifierRequired,persistentStateRequired:Xs[0].persistentStateRequired,sessionType:Xs[0].sessionType||hu,audioRobustness:Xs[0].audioRobustness||"",videoRobustness:Xs[0].videoRobustness||"",serverCertificate:Qs[0],serverCertificateUri:qs[0],initData:tu,keyIds:ou},Xs=Dn(Xs),Ds=Xs.next();!Ds.done;Ds=Xs.next())Ds=Ds.value,Ds.distinctiveIdentifierRequired&&(Ps.distinctiveIdentifierRequired=Ds.distinctiveIdentifierRequired),Ds.persistentStateRequired&&(Ps.persistentStateRequired=Ds.persistentStateRequired);Xs=Ps}else Xs=Un.keySystem,Ps=En.get(Un.keySystem),Ds=[],qs=[],Qs=[],tu=[],ou=new Set,gx(Ps.drmInfos,Ds,Qs,qs,tu,ou),Xs={keySystem:Xs,licenseServerUri:Ds[0],distinctiveIdentifierRequired:Ps.distinctiveIdentifier=="required",persistentStateRequired:Ps.persistentState=="required",sessionType:Ps.sessionTypes[0]||"temporary",audioRobustness:(Ps.audioCapabilities?Ps.audioCapabilities[0].robustness:"")||"",videoRobustness:(Ps.videoCapabilities?Ps.videoCapabilities[0].robustness:"")||"",serverCertificate:Qs[0],serverCertificateUri:qs[0],initData:tu,keyIds:ou};if(mn.g=Xs,!mn.g.licenseServerUri)throw new zs(2,6,6012,mn.g.keySystem);return Qn(Os,Un.createMediaKeys(),6);case 6:return ws=Os.h,Ol(mn.j),mn.C=ws,mn.X=!0,Qn(Os,fx(mn),7);case 7:Ol(mn.j),ys(Os,0);break;case 4:throw Ns=_s(Os),Ol(mn.j,Ns),mn.g=null,mn.I.clear(),Ns instanceof zs?Ns:new zs(2,6,6002,Ns.message)}})}function xM(mn,En,xn){for(var An=Dn(En),Mn=An.next();!Mn.done;Mn=An.next()){var Un=Dn(FA(Mn.value));for(Mn=Un.next();!Mn.done;Mn=Un.next())Mn=Mn.value,xn.has(Mn.keySystem)||xn.set(Mn.keySystem,[]),xn.get(Mn.keySystem).push(Mn)}if(xn.size==1&&xn.has(""))throw new zs(2,6,6e3);for(An={},mn=Dn(mn.h.preferredKeySystems),Mn=mn.next();!Mn.done;An={Xd:An.Xd},Mn=mn.next())for(An.Xd=Mn.value,Un=Dn(En),Mn=Un.next();!Mn.done;Mn=Un.next())if(Mn=Mn.value.decodingInfos.find(function(ts){return function(os){return os.supported&&os.keySystemAccess!=null&&os.keySystemAccess.keySystem==ts.Xd}}(An)))return Mn.keySystemAccess;for(mn=Dn([!0,!1]),Mn=mn.next();!Mn.done;Mn=mn.next())for(An=Mn.value,Un=Dn(En),Mn=Un.next();!Mn.done;Mn=Un.next()){var Bn=Dn(Mn.value.decodingInfos);for(Mn=Bn.next();!Mn.done;Mn=Bn.next()){var Gn=Mn.value;if(Gn.supported&&Gn.keySystemAccess){Mn=xn.get(Gn.keySystemAccess.keySystem);var Wn=Dn(Mn);for(Mn=Wn.next();!Mn.done;Mn=Wn.next())if(!!Mn.value.licenseServerUri==An)return Gn.keySystemAccess}}}return null}function CM(mn,En){var xn,An,Mn,Un,Bn,Gn,Wn,ts,os,cs,ls,gs,ws,Ns,Os;return hs(function(Ps){switch(Ps.g){case 1:if(En.size==1&&En.has(""))throw new zs(2,6,6e3);for(An=Dn(En.values()),Mn=An.next();!Mn.done;Mn=An.next())Un=Mn.value,Un.audioCapabilities.length==0&&delete Un.audioCapabilities,Un.videoCapabilities.length==0&&delete Un.videoCapabilities;Bn=Dn(mn.h.preferredKeySystems),Gn=Bn.next();case 2:if(Gn.done){Ps.D(4);break}if(Wn=Gn.value,!En.has(Wn)){Ps.D(3);break}return ts=En.get(Wn),Ts(Ps,6),Qn(Ps,navigator.requestMediaKeySystemAccess(Wn,[ts]),8);case 8:return xn=Ps.h,Ps.return(xn);case 6:_s(Ps);case 7:Ol(mn.j);case 3:Gn=Bn.next(),Ps.D(2);break;case 4:os=Dn([!0,!1]),cs=os.next();case 9:if(cs.done){Ps.D(11);break}ls=cs.value,gs=Dn(En.keys()),Gn=gs.next();case 12:if(Gn.done){cs=os.next(),Ps.D(9);break}if(ws=Gn.value,Ns=En.get(ws),Os=Ns.drmInfos.some(function(Xs){return!!Xs.licenseServerUri}),Os!=ls){Ps.D(13);break}return Ts(Ps,15),Qn(Ps,navigator.requestMediaKeySystemAccess(ws,[Ns]),17);case 17:return xn=Ps.h,Ps.return(xn);case 15:_s(Ps);case 16:Ol(mn.j);case 13:Gn=gs.next(),Ps.D(12);break;case 11:return Ps.return(xn)}})}function wM(mn){if(mn=Mv(mn.h.clearKeys),mn.size==0)return null;var En=[],xn=[];mn.forEach(function(Mn,Un){var Bn=Un;Bn.length!=22&&(Bn=Ny(n_(Un),!1)),Un=Mn,Un.length!=22&&(Un=Ny(n_(Mn),!1)),Mn={kty:"oct",kid:Bn,k:Un},En.push(Mn),xn.push(Mn.kid)}),mn=JSON.stringify({keys:En});var An=JSON.stringify({kids:xn});return An=[{initData:Ku(Kp(An)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+pn.btoa(mn),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:An,keyIds:new Set(xn)}}function mx(mn,En){var xn,An,Mn,Un,Bn;return hs(function(Gn){switch(Gn.g){case 1:try{xn=mn.C.createSession("persistent-license")}catch(Wn){return An=new zs(2,6,6005,Wn.message),mn.m(An),Gn.return(Promise.reject(An))}return mn.B.o(xn,"message",function(Wn){mn.l&&mn.h.delayLicenseRequestUntilPlayed&&mn.l.paused&&!mn.O?mn.K.push(Wn):QT(mn,Wn)}),mn.B.o(xn,"keystatuseschange",function(Wn){return fS(mn,Wn)}),Mn={initData:null,initDataType:null,loaded:!1,Be:1/0,cb:null,type:"persistent-license"},mn.i.set(xn,Mn),Ts(Gn,2),Qn(Gn,xn.load(En),4);case 4:return Un=Gn.h,Ol(mn.j),Un?(Mn.loaded=!0,W_(mn)&&mn.s.resolve(),Gn.return(xn)):(mn.i.delete(xn),mn.m(new zs(2,6,6013)),Gn.return(Promise.resolve()));case 2:Bn=_s(Gn),Ol(mn.j,Bn),mn.i.delete(xn),mn.m(new zs(2,6,6005,Bn.message));case 3:return Gn.return(Promise.resolve())}})}function XT(mn,En,xn,An){try{var Mn=mn.C.createSession(An)}catch(Un){mn.m(new zs(2,6,6005,Un.message));return}mn.B.o(Mn,"message",function(Un){mn.l&&mn.h.delayLicenseRequestUntilPlayed&&mn.l.paused&&!mn.O?mn.K.push(Un):QT(mn,Un)}),mn.B.o(Mn,"keystatuseschange",function(Un){return fS(mn,Un)}),mn.i.set(Mn,{initData:xn,initDataType:En,loaded:!1,Be:1/0,cb:null,type:An});try{xn=mn.h.initDataTransform(xn,En,mn.g)}catch(Un){En=Un,Un instanceof zs||(En=new zs(2,6,6016,Un)),mn.m(En);return}mn.h.logLicenseExchange&&Ny(xn),Mn.generateRequest(En,xn).catch(function(Un){if(!mn.j.g){mn.i.delete(Mn);var Bn=Un.errorCode;if(Bn&&Bn.systemCode){var Gn=Bn.systemCode;0>Gn&&(Gn+=Math.pow(2,32)),Gn="0x"+Gn.toString(16)}mn.m(new zs(2,6,6006,Un.message,Un,Gn))}})}function QT(mn,En){var xn,An,Mn,Un,Bn,Gn,Wn,ts,os,cs,ls,gs,ws,Ns;hs(function(Os){switch(Os.g){case 1:return xn=En.target,mn.h.logLicenseExchange&&Ny(En.message),An=mn.i.get(xn),Mn=mn.g.licenseServerUri,Un=mn.h.advanced[mn.g.keySystem],En.messageType=="individualization-request"&&Un&&Un.individualizationServer&&(Mn=Un.individualizationServer),Bn=ll([Mn],mn.h.retryParameters),Bn.body=En.message,Bn.method="POST",Bn.licenseRequestType=En.messageType,Bn.sessionId=xn.sessionId,Bn.drmInfo=mn.g,An&&(Bn.initData=An.initData,Bn.initDataType=An.initDataType),YT(mn.g.keySystem)&&AM(Bn),Gn=Date.now(),Ts(Os,2),ts=mn.G.Ob.request(2,Bn),Qn(Os,ts.promise,4);case 4:Wn=Os.h,ys(Os,3);break;case 2:return os=_s(Os),cs=new zs(2,6,6007,os),mn.m(cs),An&&An.cb&&An.cb.reject(cs),Os.return();case 3:return mn.j.g?Os.return():(mn.J+=(Date.now()-Gn)/1e3,mn.h.logLicenseExchange&&Ny(Wn.data),Ts(Os,5),Qn(Os,xn.update(Wn.data),7));case 7:ys(Os,6);break;case 5:return ls=_s(Os),gs=new zs(2,6,6008,ls.message),mn.m(gs),An&&An.cb&&An.cb.reject(gs),Os.return();case 6:if(mn.j.g)return Os.return();ws=new vu("drmsessionupdate"),mn.G.onEvent(ws),An&&(An.cb&&An.cb.resolve(),Ns=new ku(function(){An.loaded=!0,W_(mn)&&mn.s.resolve()}),Ns.R(q_)),ms(Os)}})}function AM(mn){var En=Ry(mn.body,!0,!0);if(En.includes("PlayReadyKeyMessage")){En=q0(En,"PlayReadyKeyMessage");for(var xn=Dn(En.getElementsByTagName("HttpHeader")),An=xn.next();!An.done;An=xn.next())An=An.value,mn.headers[An.getElementsByTagName("name")[0].textContent]=An.getElementsByTagName("value")[0].textContent;mn.body=Lp(En.getElementsByTagName("Challenge")[0].textContent)}else mn.headers["Content-Type"]="text/xml; charset=utf-8"}function fS(mn,En){En=En.target;var xn=mn.i.get(En),An=!1;En.keyStatuses.forEach(function(Un,Bn){if(typeof Bn=="string"){var Gn=Bn;Bn=Un,Un=Gn}if(YT(mn.g.keySystem)&&Bn.byteLength==16&&(e_()||t_())){Gn=Hp(Bn);var Wn=Gn.getUint32(0,!0),ts=Gn.getUint16(4,!0),os=Gn.getUint16(6,!0);Gn.setUint32(0,Wn,!1),Gn.setUint16(4,ts,!1),Gn.setUint16(6,os,!1)}Un!="status-pending"&&(xn.loaded=!0),Un=="expired"&&(An=!0),Bn=_c(Bn).slice(0,32),mn.aa.set(Bn,Un)});var Mn=En.expiration-Date.now();(0>Mn||An&&1e3>Mn)&&xn&&!xn.cb&&(mn.i.delete(En),En.close().catch(function(){})),W_(mn)&&(mn.s.resolve(),mn.P.R(OM))}function IM(mn){var En=mn.aa,xn=mn.Z;xn.clear(),En.forEach(function(An,Mn){return xn.set(Mn,An)}),En=Array.from(xn.values()),En.length&&En.every(function(An){return An=="expired"})&&mn.m(new zs(2,6,6014)),mn.G.Fd(zT(xn))}function LA(){var mn,En,xn,An,Mn,Un,Bn,Gn;return hs(function(Wn){return Wn.g==1?(mn="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" "),En=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],xn={initDataTypes:["cenc"],videoCapabilities:En},An={videoCapabilities:En,persistentState:"required",sessionTypes:["persistent-license"]},Mn=[An,xn],Un=new Map,Bn=function(ts){var os,cs,ls;return hs(function(gs){switch(gs.g){case 1:if(Ts(gs,2),ts==="org.w3.clearkey"&&N0())throw Error("Unsupported keySystem");return Qn(gs,navigator.requestMediaKeySystemAccess(ts,Mn),4);case 4:return os=gs.h,ls=(cs=os.getConfiguration().sessionTypes)?cs.includes("persistent-license"):!1,wl("Tizen 3")&&(ls=!1),Un.set(ts,{persistentState:ls}),Qn(gs,os.createMediaKeys(),5);case 5:ys(gs,0);break;case 2:_s(gs),Un.set(ts,null),ms(gs)}})},Gn=mn.map(function(ts){return Bn(ts)}),Qn(Wn,Promise.all(Gn),2)):Wn.return(zT(Un))})}function PM(mn){var En;return hs(function(xn){if(xn.g==1)return En=new Promise(function(An,Mn){new ku(Mn).R(cy)}),Ts(xn,2),Qn(xn,Promise.race([Promise.all([mn.close(),mn.closed]),En]),4);if(xn.g!=2)return ys(xn,0);_s(xn),ms(xn)})}function jA(mn){var En;return hs(function(xn){return En=Array.from(mn.i.entries()),mn.i.clear(),Qn(xn,Promise.all(En.map(function(An){An=Dn(An);var Mn=An.next().value,Un=An.next().value;return hs(function(Bn){if(Bn.g==1)return Ts(Bn,2),mn.ra||mn.F.includes(Mn.sessionId)||Un.type!=="persistent-license"?Qn(Bn,PM(Mn),5):Qn(Bn,Mn.remove(),5);if(Bn.g!=2)return ys(Bn,0);_s(Bn),ms(Bn)})})),0)})}function ZT(mn,En){if(!mn.length)return En;if(!En.length)return mn;var xn=[];mn=Dn(mn);for(var An=mn.next();!An.done;An=mn.next()){An=An.value;for(var Mn={},Un=Dn(En),Bn=Un.next();!Bn.done;Mn={Ua:Mn.Ua},Bn=Un.next())if(Bn=Bn.value,An.keySystem==Bn.keySystem){Mn.Ua=[],Mn.Ua=Mn.Ua.concat(An.initData||[]),Mn.Ua=Mn.Ua.concat(Bn.initData||[]),Mn.Ua=Mn.Ua.filter(function(Gn){return function(Wn,ts){return Wn.keyId===void 0||ts===Gn.Ua.findIndex(function(os){return os.keyId===Wn.keyId})}}(Mn)),Un=An.keyIds&&Bn.keyIds?new Set([].concat(Kn(An.keyIds),Kn(Bn.keyIds))):An.keyIds||Bn.keyIds,xn.push({keySystem:An.keySystem,licenseServerUri:An.licenseServerUri||Bn.licenseServerUri,distinctiveIdentifierRequired:An.distinctiveIdentifierRequired||Bn.distinctiveIdentifierRequired,persistentStateRequired:An.persistentStateRequired||Bn.persistentStateRequired,videoRobustness:An.videoRobustness||Bn.videoRobustness,audioRobustness:An.audioRobustness||Bn.audioRobustness,serverCertificate:An.serverCertificate||Bn.serverCertificate,serverCertificateUri:An.serverCertificateUri||Bn.serverCertificateUri,initData:Mn.Ua,keyIds:Un});break}}return xn}function FA(mn){return(mn.video?mn.video.drmInfos:[]).concat(mn.audio?mn.audio.drmInfos:[])}function JT(mn){mn.i.forEach(function(En,xn){var An=En.Be,Mn=xn.expiration;isNaN(Mn)&&(Mn=1/0),Mn!=An&&(mn.G.onExpirationUpdated(xn.sessionId,Mn),En.Be=Mn)})}function W_(mn){return mn=mn.i.values(),pl(mn,function(En){return En.loaded})}function BA(mn,En){var xn=[];for(En.forEach(function(An,Mn){xn.push({keySystem:Mn,licenseServerUri:An,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),mn=Dn(mn),En=mn.next();!En.done;En=mn.next())En=En.value,En.video&&(En.video.drmInfos=xn),En.audio&&(En.audio.drmInfos=xn)}function gx(mn,En,xn,An,Mn,Un){var Bn={};mn=Dn(mn);for(var Gn=mn.next();!Gn.done;Bn={Fa:Bn.Fa},Gn=mn.next()){if(Bn.Fa=Gn.value,En.includes(Bn.Fa.licenseServerUri)||En.push(Bn.Fa.licenseServerUri),An.includes(Bn.Fa.serverCertificateUri)||An.push(Bn.Fa.serverCertificateUri),Bn.Fa.serverCertificate&&(xn.some(function(os){return function(cs){return Ip(cs,os.Fa.serverCertificate)}}(Bn))||xn.push(Bn.Fa.serverCertificate)),Bn.Fa.initData){Gn={};for(var Wn=Dn(Bn.Fa.initData),ts=Wn.next();!ts.done;Gn={ed:Gn.ed},ts=Wn.next())Gn.ed=ts.value,Mn.some(function(os){return function(cs){var ls=os.ed;return cs.keyId&&cs.keyId==ls.keyId?!0:cs.initDataType==ls.initDataType&&Ip(cs.initData,ls.initData)}}(Gn))||Mn.push(Gn.ed)}if(Bn.Fa.keyIds)for(Gn=Dn(Bn.Fa.keyIds),Wn=Gn.next();!Wn.done;Wn=Gn.next())Un.add(Wn.value)}}function Q0(mn,En,xn,An){var Mn=mn.keySystem;Mn&&(Mn!="org.w3.clearkey"||!mn.licenseServerUri)&&(En.size&&(En=En.get(Mn)||"",mn.licenseServerUri=En),mn.keyIds||(mn.keyIds=new Set),(xn=xn.get(Mn))&&(mn.distinctiveIdentifierRequired||(mn.distinctiveIdentifierRequired=xn.distinctiveIdentifierRequired),mn.persistentStateRequired||(mn.persistentStateRequired=xn.persistentStateRequired),mn.videoRobustness||(mn.videoRobustness=xn.videoRobustness),mn.audioRobustness||(mn.audioRobustness=xn.audioRobustness),mn.serverCertificate||(mn.serverCertificate=xn.serverCertificate),xn.sessionType&&(mn.sessionType=xn.sessionType),mn.serverCertificateUri||(mn.serverCertificateUri=xn.serverCertificateUri)),An[Mn]&&(mn.keySystem=An[Mn]),pn.cast&&pn.cast.__platform__&&Mn=="com.microsoft.playready"&&(mn.keySystem="com.chromecast.playready"))}var cy=1,q_=5,OM=.5,_k=new Sm(function(){return fp(new Uint8Array([0]))});function pS(){}function VA(mn,En,xn,An){var Mn,Un,Bn,Gn;return hs(function(Wn){if(Wn.g==1)return An&&(Mn=zm[An.toLowerCase()])?Wn.return(Mn):(Un=c_(mn))&&(Bn=d_[Un])?Wn.return(Bn):An?Wn.D(2):Qn(Wn,yx(mn,En,xn),3);if(Wn.g!=2&&(An=Wn.h)&&(Gn=zm[An]))return Wn.return(Gn);throw new zs(2,4,4e3,mn)})}function yx(mn,En,xn){var An,Mn,Un;return hs(function(Bn){return Bn.g==1?(An=ll([mn],xn),An.method="HEAD",Qn(Bn,En.request(0,An).promise,2)):(Mn=Bn.h,Un=Mn.headers["content-type"],Bn.return(Un?Un.toLowerCase().split(";").shift():""))})}function c_(mn){return mn=new Iu(mn).Ha.split("/").pop().split("."),mn.length==1?"":mn.pop().toLowerCase()}Ys("shaka.media.ManifestParser",pS),pS.unregisterParserByMime=function(mn){delete zm[mn]},pS.registerParserByMime=function(mn,En){zm[mn]=En},pS.registerParserByExtension=function(mn,En){d_[mn]=En};var zm={},d_={};function vx(mn){function En(){An=!0}function xn(ts){Un.push(ts),zl(ts)}mn=Ku(mn);var An=!1,Mn,Un=[],Bn=[];if(new Nl().box("moov",xn).box("trak",xn).box("mdia",xn).box("minf",xn).box("stbl",xn).T("stsd",function(ts){Mn=ts,Un.push(ts),G0(ts)}).T("encv",En).T("enca",En).T("hev1",function(ts){Bn.push({box:ts,Pb:1701733238})}).T("hvc1",function(ts){Bn.push({box:ts,Pb:1701733238})}).T("avc1",function(ts){Bn.push({box:ts,Pb:1701733238})}).T("avc3",function(ts){Bn.push({box:ts,Pb:1701733238})}).T("ac-3",function(ts){Bn.push({box:ts,Pb:1701733217})}).T("ec-3",function(ts){Bn.push({box:ts,Pb:1701733217})}).T("mp4a",function(ts){Bn.push({box:ts,Pb:1701733217})}).parse(mn),An)return mn;if(Bn.length==0||!Mn)throw _c(mn),new zs(2,3,3019);Bn.reverse();for(var Gn=Dn(Bn),Wn=Gn.next();!Wn.done;Wn=Gn.next())Wn=Wn.value,mn=Ek(mn,Mn,Wn.box,Un,Wn.Pb);return mn}function Ek(mn,En,xn,An,Mn){var Un=J0.value(),Bn=mn.subarray(xn.start,xn.start+xn.size),Gn=Hp(Bn),Wn=new Uint8Array(xn.size+Un.byteLength);for(Wn.set(Bn,0),Bn=Hp(Wn),Bn.setUint32(4,Mn),Wn.set(Un,xn.size),Mn=Gn.getUint32(4),Bn.setUint32(xn.size+16,Mn),Z0(Wn,0,Wn.byteLength),Mn=new Uint8Array(mn.byteLength+Wn.byteLength),xn=xv()?xn.start:xn.start+xn.size,Un=mn.subarray(xn),Mn.set(mn.subarray(0,xn)),Mn.set(Wn,xn),Mn.set(Un,xn+Wn.byteLength),mn=Dn(An),An=mn.next();!An.done;An=mn.next())An=An.value,Z0(Mn,An.start,An.size+Wn.byteLength);return Wn=Hp(Mn,En.start),En=uS(En),mn=Wn.getUint32(En),Wn.setUint32(En,mn+1),Mn}function Z0(mn,En,xn){mn=Hp(mn,En),En=mn.getUint32(0),En!=0&&(En==1?(mn.setUint32(8,xn>>32),mn.setUint32(12,xn&4294967295)):mn.setUint32(0,xn))}var J0=new Sm(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])});function _x(mn,En,xn,An,Mn){if(An>=Mn)return null;for(var Un=-1,Bn=-1,Gn=0;Gn<xn.length;Gn++)if(xn[Gn].some(function(qs){return qs!=null&&qs.g.trim()!=""})){Un=Gn;break}for(Gn=xn.length-1;0<=Gn;Gn--)if(xn[Gn].some(function(qs){return qs!=null&&qs.g.trim()!=""})){Bn=Gn;break}if(Un===-1||Bn===-1)return null;for(var Wn=Gn=!1,ts="white",os="black",cs=By(An,Mn,Gn,Wn,ts,os);Un<=Bn;Un++){for(var ls=xn[Un],gs=-1,ws=-1,Ns=0;Ns<ls.length;Ns++)if(ls[Ns]!=null&&ls[Ns].g.trim()!==""){gs=Ns;break}for(Ns=ls.length-1;0<=Ns;Ns--)if(ls[Ns]!=null&&ls[Ns].g.trim()!==""){ws=Ns;break}if(gs===-1||ws===-1)ls=eE(An,Mn),mn.nestedCues.push(ls);else{for(;gs<=ws;gs++)if(Ns=ls[gs]){var Os=Ns.l,Ps=Ns.i,Xs=Ns.j,Ds=Ns.h;(Os!=Gn||Ps!=Wn||Xs!=ts||Ds!=os)&&(cs.payload&&mn.nestedCues.push(cs),cs=By(An,Mn,Os,Ps,Xs,Ds),Gn=Os,Wn=Ps,ts=Xs,os=Ds),cs.payload+=Ns.g}else cs.payload+=" ";cs.payload&&mn.nestedCues.push(cs),Un!==Bn&&(cs=eE(An,Mn),mn.nestedCues.push(cs)),cs=By(An,Mn,Gn,Wn,ts,os)}}return mn.nestedCues.length?{cue:mn,stream:En}:null}function By(mn,En,xn,An,Mn,Un){return mn=new tl(mn,En,""),xn&&mn.textDecoration.push("underline"),An&&(mn.fontStyle="italic"),mn.color=Mn,mn.backgroundColor=Un,mn}function eE(mn,En){return mn=new tl(mn,En,""),mn.lineBreak=!0,mn}function Ex(mn,En,xn,An,Mn){this.g=mn,this.l=En,this.i=xn,this.h=An,this.j=Mn}function Sk(mn,En){this.i=[],this.g=1,this.h=0,this.C=mn,this.B=En,this.j=this.m=!1,this.l="white",this.s="black",tE(this)}function hS(mn,En,xn){return _x(new tl(En,xn,""),"CC"+(mn.C<<1|mn.B+1),mn.i,En,xn)}function tE(mn){Dv(mn,0,15),mn.g=1}function rE(mn,En,xn){if(!(32>xn||127<xn)){var An="";switch(En){case f_:An=zA.has(xn)?zA.get(xn):String.fromCharCode(xn);break;case Tk:An=MM.get(xn);break;case Sx:mn.i[mn.g].pop(),An=$k.get(xn);break;case Tx:mn.i[mn.g].pop(),An=mS.get(xn)}An&&mn.i[mn.g].push(new Ex(An,mn.m,mn.j,mn.s,mn.l))}}function GA(mn,En,xn,An){if(!(0>xn||0>En))if(En>=xn)for(--An;0<=An;An--)mn.i[En+An]=mn.i[xn+An].map(function(Un){return Un});else for(var Mn=0;Mn<An;Mn++)mn.i[En+Mn]=mn.i[xn+Mn].map(function(Un){return Un})}function Dv(mn,En,xn){for(var An=0;An<=xn;An++)mn.i[En+An]=[]}var f_=0,Tk=1,Sx=2,Tx=3,zA=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),MM=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57,"⠀"],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),$k=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),mS=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]);function Ck(mn,En){this.h=$x,this.s=new Sk(mn,En),this.i=new Sk(mn,En),this.l=new Sk(mn,En),this.g=this.i,this.j=0,this.m=null}function Ak(mn,En,xn){mn.g=mn.i;var An=mn.g,Mn=null;return mn.h!==gS&&mn.h!==Vy&&(Mn=hS(An,mn.j,xn),xn=mn.i,xn.g=0<xn.h?xn.h:0,Dv(xn,0,15),xn=mn.l,xn.g=0<xn.h?xn.h:0,Dv(xn,0,15),An.g=15),mn.h=gS,An.h=En,Mn}function kx(mn){mn.h=Y_,mn.g=mn.l,mn.g.h=0}function Ik(mn){cp("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),mn.g=mn.s,mn.h=Vy}var $x=0,Y_=1,gS=3,Vy=4,RM="black green blue cyan red yellow magenta black".split(" "),HA="white green blue cyan red yellow magenta white_italics".split(" ");function KA(){this.l=!1,this.F=this.H=0,this.G=WA,this.i=[],this.g=this.h=this.j=0,this.C=this.s=!1,this.B="white",this.m="black",bx(this)}function bx(mn){mn.i=[];for(var En=0;16>En;En++)mn.i.push(xx())}function xx(){for(var mn=[],En=0;42>En;En++)mn.push(null);return mn}function lv(mn,En){pp(mn)&&(mn.i[mn.h][mn.g]=new Ex(En,mn.C,mn.s,mn.m,mn.B),mn.g++)}function pp(mn){var En=mn.g<mn.F&&0<=mn.g;return mn.h<mn.H&&0<=mn.h&&En}KA.prototype.isVisible=function(){return this.l};function X_(mn,En,xn){var An=new tl(mn.j,En,"");return An.textAlign=mn.G===NM?"left":mn.G===yS?"right":Dp,(xn=_x(An,"svc"+xn,mn.i,mn.j,En))&&(mn.j=En),xn}var NM=0,yS=1,WA=2;function qA(){this.i=[],this.h=null,this.g=0}function YA(mn,En){En.type===3?(mn.g=2*(En.value&63)-1,mn.h=[]):mn.h&&(0<mn.g&&(mn.h.push(En),mn.g--),mn.g===0&&(mn.i.push(new vS(mn.h)),mn.h=null,mn.g=0))}function vS(mn){this.g=0,this.h=mn}vS.prototype.xa=function(){return this.g<this.h.length},vS.prototype.ma=function(){return this.g};function Tp(mn){if(!mn.xa())throw new zs(2,2,3e3);return mn.h[mn.g++]}vS.prototype.skip=function(mn){if(this.g+mn>this.h.length)throw new zs(2,2,3e3);this.g+=mn};function DM(mn){this.i=mn,this.h=[null,null,null,null,null,null,null,null],this.g=null}function Cx(mn,En,xn,An){if(128<=xn&&135>=xn)An=xn&7,mn.h[An]&&(mn.g=mn.h[An]);else{if(xn===136){xn=Tp(En).value,En=null,xn=Dn(_S(mn,xn));for(var Mn=xn.next();!Mn.done;Mn=xn.next())Mn=mn.h[Mn.value],Mn.isVisible()&&(En=X_(Mn,An,mn.i)),bx(Mn);return En}if(xn===137)for(En=Tp(En).value,En=Dn(_S(mn,En)),xn=En.next();!xn.done;xn=En.next())xn=mn.h[xn.value],xn.isVisible()||(xn.j=An),xn.l=!0;else{if(xn===138){for(xn=Tp(En).value,En=null,xn=Dn(_S(mn,xn)),Mn=xn.next();!Mn.done;Mn=xn.next())Mn=mn.h[Mn.value],Mn.isVisible()&&(En=X_(Mn,An,mn.i)),Mn.l=!1;return En}if(xn===139){for(xn=Tp(En).value,En=null,xn=Dn(_S(mn,xn)),Mn=xn.next();!Mn.done;Mn=xn.next())Mn=mn.h[Mn.value],Mn.isVisible()?En=X_(Mn,An,mn.i):Mn.j=An,Mn.l=!Mn.l;return En}if(xn===140)return En=Tp(En).value,XA(mn,En,An);if(xn===143)return An=XA(mn,255,An),QA(mn),An;if(xn===144)En.skip(1),An=Tp(En).value,mn.g&&(mn.g.s=0<(An&128),mn.g.C=0<(An&64));else if(xn===145)An=Tp(En).value,xn=Tp(En).value,En.skip(1),mn.g&&(En=wx((xn&48)>>4,(xn&12)>>2,xn&3),mn.g.B=wx((An&48)>>4,(An&12)>>2,An&3),mn.g.m=En);else if(xn===146)An=Tp(En).value,En=Tp(En).value,mn.g&&(mn=mn.g,mn.h=An&15,mn.g=En&63);else if(xn===151)En.skip(1),En.skip(1),An=Tp(En).value,En.skip(1),mn.g&&(mn.g.G=An&3);else if(152<=xn&&159>=xn){if(xn=(xn&15)-8,Mn=mn.h[xn]!==null,!Mn){var Un=new KA;Un.j=An,mn.h[xn]=Un}An=Tp(En).value,Tp(En),Tp(En),Un=Tp(En).value;var Bn=Tp(En).value;En=Tp(En).value,Mn&&!(En&7)||(En=mn.h[xn],En.h=0,En.g=0,En.C=!1,En.s=!1,En.B="white",En.m="black"),En=mn.h[xn],En.l=0<(An&32),En.H=(Un&15)+1,En.F=(Bn&63)+1,mn.g=mn.h[xn]}}}return null}function _S(mn,En){for(var xn=[],An=0;8>An;An++)(En&1)===1&&mn.h[An]&&xn.push(An),En>>=1;return xn}function XA(mn,En,xn){var An=null;En=Dn(_S(mn,En));for(var Mn=En.next();!Mn.done;Mn=En.next()){Mn=Mn.value;var Un=mn.h[Mn];Un.isVisible()&&(An=X_(Un,xn,mn.i)),mn.h[Mn]=null}return An}function QA(mn){mn.g=null,mn.h=[null,null,null,null,null,null,null,null]}function wx(mn,En,xn){var An={0:0,1:0,2:1,3:1};return mn=An[mn],En=An[En],xn=An[xn],ZA[mn<<2|En<<1|xn]}var Pk=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),ZA="black blue green cyan red magenta yellow white".split(" ");function JA(){this.h=[],this.g=[],this.i=new qA,this.l=0,this.B=new Map([["CC1",new Ck(0,0)],["CC2",new Ck(0,1)],["CC3",new Ck(1,0)],["CC4",new Ck(1,1)]]),this.s=this.m=0,this.j=new Map,ES(this)}function ES(mn){mn.m=0,mn.s=0,mn=Dn(mn.B.values());for(var En=mn.next();!En.done;En=mn.next())En=En.value,En.h=2,En.g=En.i,En.m=null,tE(En.i),tE(En.l),tE(En.s)}function eI(mn){function En(Un,Bn){return Un.pts-Bn.pts||Un.order-Bn.order}var xn=[];mn.h.sort(En),mn.g.sort(En);for(var An=Dn(mn.h),Mn=An.next();!Mn.done;Mn=An.next())(Mn=Ax(mn,Mn.value))&&xn.push(Mn);for(An=Dn(mn.g),Mn=An.next();!Mn.done;Mn=An.next())YA(mn.i,Mn.value);for(An=Dn(mn.i.i),Mn=An.next();!Mn.done;Mn=An.next())Mn=Ix(mn,Mn.value),xn.push.apply(xn,Kn(Mn));return mn.i.i=[],mn.h=[],mn.g=[],xn}function Ax(mn,En){var xn=En.type;if((En.Oa&112)===16){var An=En.Oa>>3&1;xn===0?mn.m=An:mn.s=An}if(xn=mn.B.get("CC"+(xn<<1|(xn?mn.s:mn.m)+1)),En.Oa===255&&En.hb===255||!En.Oa&&!En.hb||!Ok(En.Oa)||!Ok(En.hb))return 45<=++mn.l&&ES(mn),null;if(mn.l=0,En.Oa&=127,En.hb&=127,!En.Oa&&!En.hb)return null;if(mn=null,(En.Oa&112)===16)e:{if(An=En.Oa,mn=En.hb,xn.m===(An<<8|mn))xn.m=null;else if(xn.m=An<<8|mn,(An&240)===16&&(mn&192)===64){En=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(An&7)<<1|mn>>5&1];var Mn=(mn&30)>>1;An="white";var Un=!1;if(7>Mn?An=HA[Mn]:Mn===7&&(Un=!0),mn=(mn&1)===1,xn.h!==Vy){if(Mn=xn.g,xn.h===gS&&En!==Mn.g){var Bn=1+En-Mn.h;GA(Mn,Bn,1+Mn.g-Mn.h,Mn.h),Dv(Mn,0,Bn-1),Dv(Mn,En+1,15-En)}Mn.g=En,xn.g.m=mn,xn.g.j=Un,xn.g.l=An,xn.g.s="black"}}else if((An&247)===17&&(mn&240)===32)xn.g.m=!1,xn.g.j=!1,xn.g.l="white",rE(xn.g,f_,32),An=!1,En=HA[(mn&14)>>1],En==="white_italics"&&(En="white",An=!0),xn.g.m=(mn&1)===1,xn.g.j=An,xn.g.l=En;else if((An&247)===16&&(mn&240)===32||(An&247)===23&&(mn&255)===45)En="black",!(An&7)&&(En=RM[(mn&14)>>1]),xn.g.s=En;else if((An&247)===17&&(mn&240)===48)rE(xn.g,Tk,mn);else if((An&246)===18&&(mn&224)===32)rE(xn.g,An&1?Tx:Sx,mn);else if((An&246)===20&&(mn&240)===32){switch(mn=En.pts,An=null,En.hb){case 32:kx(xn);break;case 33:xn=xn.g,xn.i[xn.g].pop();break;case 37:An=Ak(xn,2,mn);break;case 38:An=Ak(xn,3,mn);break;case 39:An=Ak(xn,4,mn);break;case 40:rE(xn.g,f_,32);break;case 41:xn.h=2,xn.g=xn.i,xn.g.h=0,xn.j=mn;break;case 42:tE(xn.s),Ik(xn);break;case 43:Ik(xn);break;case 44:En=xn.i,An=null,xn.h!==Vy&&(An=hS(En,xn.j,mn)),Dv(En,0,15);break;case 45:En=xn.g,xn.h!==gS?An=null:(An=hS(En,xn.j,mn),Un=En.g-En.h+1,GA(En,Un-1,Un,En.h),Dv(En,0,Un-1),Dv(En,En.g,15-En.g),xn.j=mn);break;case 46:Dv(xn.l,0,15);break;case 47:En=null,xn.h!==Vy&&(En=hS(xn.i,xn.j,mn)),An=xn.l,xn.l=xn.i,xn.i=An,kx(xn),xn.j=mn,An=En}mn=An;break e}mn=null}else An=En.hb,rE(xn.g,f_,En.Oa),rE(xn.g,f_,An);return mn}function Ix(mn,En){var xn=[];try{for(;En.xa();){var An=Tp(En).value,Mn=(An&224)>>5,Un=An&31;if(Mn===7&&Un!=0&&(Mn=Tp(En).value&63),Mn!=0){mn.j.has(Mn)||mn.j.set(Mn,new DM(Mn));for(var Bn=mn.j.get(Mn),Gn=En.ma();En.ma()-Gn<Un;){Mn=En;var Wn=Tp(Mn),ts=Wn.value,os=Wn.pts;if(ts===16){var cs=Tp(Mn);ts=ts<<16|cs.value}if(0<=ts&&31>=ts){var ls=os;if(Bn.g){var gs=Bn.g;switch(Mn=null,ts){case 8:!pp(gs)||0>=gs.g&&0>=gs.h||(0>=gs.g?(gs.g=gs.F-1,gs.h--):gs.g--,gs.i[gs.h][gs.g]=null);break;case 13:if(gs.isVisible()&&(Mn=X_(gs,ls,Bn.i)),gs.h+1>=gs.H){ls=gs;for(var ws=0,Ns=1;16>Ns;Ns++,ws++)ls.i[ws]=ls.i[Ns];for(Ns=0;1>Ns;Ns++,ws++)ls.i[ws]=xx()}else gs.h++;gs.g=0;break;case 14:gs.isVisible()&&(Mn=X_(gs,ls,Bn.i)),gs.i[gs.h]=xx(),gs.g=0;break;case 12:gs.isVisible()&&(Mn=X_(gs,ls,Bn.i)),bx(gs),ls=gs,ls.h=0,ls.g=0}var Os=Mn}else Os=null}else if(128<=ts&&159>=ts)Os=Cx(Bn,Mn,ts,os);else{if(4096<=ts&&4127>=ts)ls=ts&255,8<=ls&&15>=ls?Mn.skip(1):16<=ls&&23>=ls?Mn.skip(2):24<=ls&&31>=ls&&Mn.skip(3);else if(4224<=ts&&4255>=ts)ls=ts&255,128<=ls&&135>=ls?Mn.skip(4):136<=ls&&143>=ls&&Mn.skip(5);else if(32<=ts&&127>=ts)Mn=ts,Bn.g&&(Mn===127?lv(Bn.g,"♪"):lv(Bn.g,String.fromCharCode(Mn)));else if(160<=ts&&255>=ts)Bn.g&&lv(Bn.g,String.fromCharCode(ts));else if(4128<=ts&&4223>=ts){if(Mn=ts&255,Bn.g)if(Pk.has(Mn)){var Ps=Pk.get(Mn);lv(Bn.g,Ps)}else lv(Bn.g,"_")}else 4256<=ts&&4351>=ts&&Bn.g&&((ts&255)!=160?lv(Bn.g,"_"):lv(Bn.g,"[CC]"));Os=null}(Mn=Os)&&xn.push(Mn)}}}}catch(Xs){if(Xs instanceof zs&&Xs.code===3e3)cp("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw Xs}return xn}function Ok(mn){for(var En=0;mn;)En^=mn&1,mn>>=1;return En===1}function Q_(){}Q_.prototype.init=function(){},Q_.prototype.parse=function(){return[]};function SS(mn,En){var xn=null,An=null,Mn=null,Un=mn.N();return En&1&&(Mn=mn.Cb()),En&2&&mn.skip(4),En&8&&(xn=mn.N()),En&16&&(An=mn.N()),{trackId:Un,Cf:xn,vg:An,oj:Mn}}function Px(mn,En){return{rf:En==1?mn.Cb():mn.N()}}function Ox(mn,En){return En==1?(mn.skip(8),mn.skip(8)):(mn.skip(4),mn.skip(4)),{timescale:mn.N()}}function Hm(mn,En,xn){var An=mn.N(),Mn=[],Un=null;xn&1&&(Un=mn.N()),xn&4&&mn.skip(4);for(var Bn=0;Bn<An;Bn++){var Gn={Ge:null,sampleSize:null,Ld:null};xn&256&&(Gn.Ge=mn.N()),xn&512&&(Gn.sampleSize=mn.N()),xn&1024&&mn.skip(4),xn&2048&&(Gn.Ld=En==0?mn.N():mn.Qf()),Mn.push(Gn)}return{tj:An,Sf:Mn,ug:Un}}function Mx(){this.j=new Map,this.i=this.h=0,this.g=cl}Mx.prototype.init=function(mn){function En(Un){Un=Un.name,Un in TS&&(xn.g=TS[Un])}var xn=this,An=[],Mn=[];if(new Nl().box("moov",zl).box("mvex",zl).T("trex",function(Un){var Bn=Un.reader;Bn.skip(4),Bn.skip(4),Un=Bn.N(),Bn=Bn.N(),xn.h=Un,xn.i=Bn}).box("trak",zl).T("tkhd",function(Un){var Bn=Un.reader;Un.version==1?(Bn.skip(8),Bn.skip(8)):(Bn.skip(4),Bn.skip(4)),Un=Bn.N(),An.push(Un)}).box("mdia",zl).T("mdhd",function(Un){Un=Ox(Un.reader,Un.version),Mn.push(Un.timescale)}).box("minf",zl).box("stbl",zl).T("stsd",G0).box("avc1",En).box("avc3",En).box("hev1",En).box("hvc1",En).box("dvh1",En).box("dvhe",En).box("encv",HT).box("sinf",zl).box("frma",function(Un){Un=Un.reader.N(),Un=Hl(Un),Un in TS&&(xn.g=TS[Un])}).parse(mn,!0),!An.length||!Mn.length||An.length!=Mn.length)throw new zs(2,2,2010);this.g==cl&&Tu("Unable to determine bitstream format for CEA parsing!"),An.forEach(function(Un,Bn){xn.j.set(Un,Mn[Bn])})},Mx.prototype.parse=function(mn){var En=this;if(this.g==cl)return[];var xn=[],An=this.h,Mn=this.i,Un=[],Bn=null,Gn=null,Wn=null,ts=9e4;return new Nl().box("moof",function(os){Bn=os.start,zl(os)}).box("traf",zl).T("trun",function(os){os=Hm(os.reader,os.version,os.flags),Un=os.Sf,Gn=os.ug}).T("tfhd",function(os){os=SS(os.reader,os.flags),An=os.Cf||En.h,Mn=os.vg||En.i,os=os.trackId,En.j.has(os)&&(ts=En.j.get(os))}).T("tfdt",function(os){Wn=Px(os.reader,os.version).rf}).box("mdat",function(os){if(Wn===null)throw new zs(2,2,2010);e:{var cs=os.reader,ls=Wn,gs=ts,ws=An,Ns=Mn,Os=Un,Ps=0,Xs=Ns;for(Os.length&&(Xs=Os[0].sampleSize||Ns),cs.skip((Bn||0)+(Gn||0)-os.start-8);cs.xa();){os=cs.N();var Ds=cs.ob();switch(En.g){case nE:Ds&=31,Ds=Ds==6;break;case iE:Ds=Ds>>1&63,Ds=Ds==39||Ds==40;break;default:break e}if(Ds){Ds=0,Os.length>Ps&&(Ds=Os[Ps].Ld||0),Ds=(ls+Ds)/gs;for(var qs=[],Qs,tu=cs.Bb(os-1),ou=Qs=0;ou<tu.length;)Qs==2&&tu[ou]==3?(Qs=0,tu=[].concat(Kn(tu)),tu.splice(ou,1),tu=new Uint8Array(tu)):tu[ou]==0?Qs++:Qs=0,ou++;for(Qs=tu,ou=0;ou<Qs.length;){for(tu=0;Qs[ou]==255;)tu+=255,ou++;tu+=Qs[ou++];for(var hu=0;Qs[ou]==255;)hu+=255,ou++;hu+=Qs[ou++],tu==4&&qs.push(Qs.subarray(ou,ou+hu)),ou+=hu}for(qs=Dn(qs),Qs=qs.next();!Qs.done;Qs=qs.next())xn.push({qh:Qs.value,pts:Ds})}else try{cs.skip(os-1)}catch{break}Xs-=os+4,Xs==0&&(ls=Os.length>Ps?ls+(Os[Ps].Ge||ws):ls+ws,Ps++,Xs=Os.length>Ps&&Os[Ps].sampleSize||Ns)}}}).parse(mn,!1),xn};var cl=0,nE=1,iE=2,TS={avc1:nE,avc3:nE,hev1:iE,hvc1:iE,dvh1:iE,dvhe:iE};function Mk(mn){this.h=new Q_,mn.includes("video/mp4")&&(this.h=new Mx),this.g=new JA}Mk.prototype.init=function(mn){this.h.init(mn)};function Rx(mn,En){En=mn.h.parse(En),En=Dn(En);for(var xn=En.next();!xn.done;xn=En.next()){var An=xn.value,Mn=Ku(An.qh);if(0<Mn.length&&(xn=mn.g,An=An.pts,Mn=new kl(Mn,0),Mn.ob()===181&&Mn.De()===49&&Mn.N()===1195456820&&Mn.ob()===3)){var Un=Mn.ob();if(Un&64){Un&=31,Mn.skip(1);for(var Bn=0;Bn<Un;Bn++){var Gn=Mn.ob(),Wn=(Gn&4)>>2,ts=Mn.ob(),os=Mn.ob();Wn&&(Gn&=3,Gn===0||Gn===1?xn.h.push({pts:An,type:Gn,Oa:ts,hb:os,order:xn.h.length}):(xn.g.push({pts:An,type:Gn,value:ts,order:xn.g.length}),xn.g.push({pts:An,type:2,value:os,order:xn.g.length})))}}}}return eI(mn.g)}function Km(mn,En,xn,An,Mn){this.Pa=mn,this.Ta=En,this.Ca=xn,this.we=An===void 0?null:An,this.timescale=Mn}Km.prototype.Jc=function(){return this.Ta},Km.prototype.Fc=function(){return this.Ca};function LM(mn,En){return mn&&En?mn.Jc()==En.Jc()&&mn.Fc()==En.Fc()&&Zu(mn.Pa(),En.Pa()):mn==En}Ys("shaka.media.InitSegmentReference",Km),Km.prototype.getEndByte=Km.prototype.Fc,Km.prototype.getStartByte=Km.prototype.Jc;function rl(mn,En,xn,An,Mn,Un,Bn,Gn,Wn,ts,os,cs,ls,gs,ws){ts=ts===void 0?[]:ts,gs=gs===void 0?kS:gs,this.startTime=mn,this.l=this.endTime=En,this.C=xn,this.Ta=An,this.Ca=Mn,this.h=Un,this.timestampOffset=Bn,this.appendWindowStart=Gn,this.appendWindowEnd=Wn,this.i=ts,this.tilesLayout=os===void 0?"":os,this.B=cs===void 0?null:cs,this.g=ls===void 0?null:ls,this.status=gs,this.m=ws===void 0?null:ws,this.s=null,this.j=0}Sn=rl.prototype,Sn.Pa=function(){return this.C()},Sn.getStartTime=function(){return this.startTime},Sn.Hg=function(){return this.endTime},Sn.Jc=function(){return this.Ta},Sn.Fc=function(){return this.Ca},Sn.$g=function(){return this.tilesLayout},Sn.Zg=function(){return this.B},Sn.ec=function(){return this.status},Sn.jh=function(){this.status=Nx},Sn.Zf=function(mn){this.s=mn},Sn.Xg=function(){return this.s},Sn.offset=function(mn){this.startTime+=mn,this.endTime+=mn,this.l+=mn;for(var En=Dn(this.i),xn=En.next();!xn.done;xn=En.next())xn=xn.value,xn.startTime+=mn,xn.endTime+=mn,xn.l+=mn},Sn.Ve=function(mn){this.g==null?fl("Sync attempted without sync time!"):(mn=this.g-mn-this.startTime,.001<=Math.abs(mn)&&this.offset(mn))},Ys("shaka.media.SegmentReference",rl),rl.prototype.syncAgainst=rl.prototype.Ve,rl.prototype.offset=rl.prototype.offset,rl.prototype.getThumbnailSprite=rl.prototype.Xg,rl.prototype.setThumbnailSprite=rl.prototype.Zf,rl.prototype.markAsUnavailable=rl.prototype.jh,rl.prototype.getStatus=rl.prototype.ec,rl.prototype.getTileDuration=rl.prototype.Zg,rl.prototype.getTilesLayout=rl.prototype.$g,rl.prototype.getEndByte=rl.prototype.Fc,rl.prototype.getStartByte=rl.prototype.Jc,rl.prototype.getEndTime=rl.prototype.Hg,rl.prototype.getStartTime=rl.prototype.getStartTime,rl.prototype.getUris=rl.prototype.Pa;var kS=0,Nx=1;rl.Status={Uh:kS,hj:Nx,wi:2};function tI(mn){return!mn||mn.length==1&&1e-6>mn.end(0)-mn.start(0)?null:mn.length==1&&0>mn.start(0)?0:mn.length?mn.start(0):null}function aE(mn){return!mn||mn.length==1&&1e-6>mn.end(0)-mn.start(0)?null:mn.length?mn.end(mn.length-1):null}function oE(mn,En){return!mn||!mn.length||mn.length==1&&1e-6>mn.end(0)-mn.start(0)||En>mn.end(mn.length-1)?!1:En>=mn.start(0)}function Rk(mn,En){if(!mn||!mn.length||mn.length==1&&1e-6>mn.end(0)-mn.start(0))return 0;var xn=0;mn=Dn(Lv(mn));for(var An=mn.next();!An.done;An=mn.next()){var Mn=An.value;An=Mn.start,Mn=Mn.end,Mn>En&&(xn+=Mn-Math.max(An,En))}return xn}function UM(mn,En,xn){return!mn||!mn.length||mn.length==1&&1e-6>mn.end(0)-mn.start(0)?null:(mn=Lv(mn).findIndex(function(An,Mn,Un){return An.start>En&&(Mn==0||Un[Mn-1].end-En<=xn)}),0<=mn?mn:null)}function Lv(mn){if(!mn)return[];for(var En=[],xn=0;xn<mn.length;xn++)En.push({start:mn.start(xn),end:mn.end(xn)});return En}function sE(){}function Dx(mn,En){var xn=(mn[En]&127)<<21;return xn|=(mn[En+1]&127)<<14,xn|=(mn[En+2]&127)<<7,xn|=mn[En+3]&127}function jM(mn){var En={key:mn.type,description:"",data:""};if(mn.type==="TXXX"){if(2>mn.size||mn.data[0]!==3)return null;var xn=mn.data.subarray(1).indexOf(0);if(xn===-1)return null;var An=xl(Ku(mn.data,1,xn));return mn=xl(Ku(mn.data,2+xn)).replace(/\0*$/,""),En.description=An,En.data=mn,En}return mn.type==="WXXX"?2>mn.size||mn.data[0]!==3||(xn=mn.data.subarray(1).indexOf(0),xn===-1)?null:(An=xl(Ku(mn.data,1,xn)),mn=xl(Ku(mn.data,2+xn)).replace(/\0*$/,""),En.description=An,En.data=mn,En):mn.type==="PRIV"?2>mn.size||(An=mn.data.indexOf(0),An===-1)?null:(An=xl(Ku(mn.data,0,An)),mn=fp(mn.data.subarray(An.length+1)),En.description=An,En.data=mn,En):mn.type[0]==="T"?2>mn.size||mn.data[0]!==3?null:(mn=xl(mn.data.subarray(1)).replace(/\0*$/,""),En.data=mn,En):mn.type[0]==="W"?(mn=xl(mn.data).replace(/\0*$/,""),En.data=mn,En):mn.data?(En.data=fp(mn.data),En):null}function Nk(mn){for(var En=0,xn=[];En+10<=mn.length&&mn[En]===73&&mn[En+1]===68&&mn[En+2]===51&&255>mn[En+3]&&255>mn[En+4]&&128>mn[En+6]&&128>mn[En+7]&&128>mn[En+8]&&128>mn[En+9];){var An=Dx(mn,En+6);for(mn[En+5]>>6&1&&(En+=10),En+=10,An=En+An;En+10<An;){var Mn=mn.subarray(En),Un=Dx(Mn,4);Mn={type:String.fromCharCode(Mn[0],Mn[1],Mn[2],Mn[3]),size:Un,data:Mn.subarray(10,10+Un)},(Un=jM(Mn))&&xn.push(Un),En+=Mn.size+10}En+10<=mn.length&&mn[En]===51&&mn[En+1]===68&&mn[En+2]===73&&255>mn[En+3]&&255>mn[En+4]&&128>mn[En+6]&&128>mn[En+7]&&128>mn[En+8]&&128>mn[En+9]&&(En+=10)}return xn}Ys("shaka.util.Id3Utils",sE),sE.getID3Frames=Nk;function Dk(){this.s=null,this.B=!1,this.l=this.m=null,this.F=[],this.g=this.h=null,this.C=[],this.j=null,this.i=[]}Dk.prototype.parse=function(mn){if(564>mn.length)return this;for(var En=Math.max(0,rI(mn)),xn=mn.length-(mn.length+En)%188,An=!1,Mn=En;Mn<xn;Mn+=188)if(mn[Mn]===71){var Un=!!(mn[Mn+1]&64),Bn=((mn[Mn+1]&31)<<8)+mn[Mn+2];if(1<(mn[Mn+3]&48)>>4){var Gn=Mn+5+mn[Mn+4];if(Gn===Mn+188)continue}else Gn=Mn+4;switch(Bn){case 0:Un&&(Gn+=mn[Gn]+1),this.s=(mn[Gn+10]&31)<<8|mn[Gn+11];break;case 17:case 8191:break;case this.s:Un&&(Gn+=mn[Gn]+1),Un=mn,Bn={audio:-1,video:-1,me:-1,audioCodec:"",videoCodec:""};var Wn=Gn+3+((Un[Gn+1]&15)<<8|Un[Gn+2])-4;for(Gn+=12+((Un[Gn+10]&15)<<8|Un[Gn+11]);Gn<Wn;){var ts=(Un[Gn+1]&31)<<8|Un[Gn+2];switch(Un[Gn]){case 15:Bn.audio===-1&&(Bn.audio=ts,Bn.audioCodec="aac");break;case 21:Bn.me===-1&&(Bn.me=ts);break;case 27:Bn.video===-1&&(Bn.video=ts,Bn.videoCodec="avc");break;case 3:case 4:Bn.audio===-1&&(Bn.audio=ts,Bn.audioCodec="mp3");break;case 36:Bn.video===-1&&(Bn.video=ts,Bn.videoCodec="hvc")}Gn+=((Un[Gn+3]&15)<<8|Un[Gn+4])+5}Un=Bn,this.l==null&&(this.l=Un.video),this.g==null&&(this.g=Un.audio),this.j==null&&(this.j=Un.me),An&&!this.B&&(An=!1,Mn=En-188),this.B=!0;break;case this.l:Un=mn.subarray(Gn,Mn+188),this.m==null&&(Gn=Lk(Un))&&Gn.pts!=null&&(this.m=Gn.pts/9e4),this.F.push(Un);break;case this.g:Un=mn.subarray(Gn,Mn+188),this.h==null&&(Gn=Lk(Un))&&Gn.pts!=null&&(this.h=Gn.pts/9e4),this.C.push(Un);break;case this.j:this.i.push(mn.subarray(Gn,Mn+188));break;default:An=!0}}return this};function Lk(mn){if((mn[0]<<16|mn[1]<<8|mn[2])!==1)return null;var En={data:new Uint8Array(0),sj:6+(mn[4]<<8|mn[5]),pts:null,dts:null},xn=mn[7];return xn&192&&(En.pts=536870912*(mn[9]&14)+4194304*(mn[10]&255)+16384*(mn[11]&254)+128*(mn[12]&255)+(mn[13]&254)/2,En.dts=En.pts,xn&64&&(En.dts=536870912*(mn[14]&14)+4194304*(mn[15]&255)+16384*(mn[16]&254)+128*(mn[17]&255)+(mn[18]&254)/2)),En.data=mn.subarray(9+mn[8]),En}function FM(mn){for(var En=[],xn=new Uint8Array(0),An=mn.i.length-1;0<=An;An--){xn=Up(mn.i[An],xn);var Mn=Lk(xn);Mn&&(En.unshift({cueTime:Mn.pts?Mn.pts/9e4:null,data:Mn.data,frames:Nk(Mn.data),dts:Mn.dts,pts:Mn.pts}),xn=new Uint8Array(0))}return En}Dk.prototype.getStartTime=function(){return{audio:this.h,video:this.m}};function rI(mn){for(var En=Math.min(1e3,mn.length-564),xn=0;xn<En;){if(mn[xn]===71&&mn[xn+188]===71&&mn[xn+376]===71)return xn;xn++}return-1}Ys("shaka.util.TsParser",Dk);function Uv(mn,En,xn){this.g=null,this.i=-1,this.j=mn,this.h=En,this.l=xn,typeof libDPIModule>"u"&&Tu("Could not Find LCEVC Library dependencies on this page"),typeof LcevcDil>"u"?Tu("Could not Find LCEVC Library on this page"):LcevcDil.SupportObject.SupportStatus||Tu(LcevcDil.SupportObject.SupportError),typeof LcevcDil<"u"&&typeof libDPIModule<"u"&&this.h instanceof HTMLCanvasElement&&LcevcDil.SupportObject.SupportStatus&&!this.g&&LcevcDil.SupportObject.webGLSupport(this.h)&&(this.h.classList.remove("shaka-hidden"),this.g=new LcevcDil.LcevcDil(this.j,this.h,this.l))}Uv.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function Lx(mn,En){var xn=nI;switch(En.mimeType){case"video/webm":xn=Uk;break;case"video/mp4":xn=BM}mn.g&&(mn.i=En.id,mn.g.setLevelSwitching(En.id,!0),mn.g.setContainerFormat(xn))}Ys("shaka.lcevc.Dil",Uv),Uv.prototype.release=Uv.prototype.release;var nI=0,Uk=1,BM=2;function p_(mn,En,xn,An){var Mn=this;this.l=mn,this.I=null,this.m=En,this.h={},this.M={},this.P={},this.g=null,this.J=!1,this.V=xn||function(){},this.H=An||null,this.i={},this.C=new xu,this.s={},this.B=null,this.K=new _l,this.j=iI(this,this.K),this.G=new Ov(function(){return VM(Mn)}),this.O="",this.F=!1,this.X=new _l}function iI(mn,En){var xn=new MediaSource;return mn.C.ya(xn,"sourceopen",function(){URL.revokeObjectURL(mn.O),En.resolve()}),mn.O=CS(xn),mn.l.src=mn.O,xn}Sn=p_.prototype,Sn.destroy=function(){return this.G.destroy()};function VM(mn){var En,xn,An,Mn,Un,Bn,Gn,Wn;return hs(function(ts){if(ts.g==1){En=[];for(xn in mn.i)for(An=mn.i[xn],Mn=An[0],mn.i[xn]=An.slice(0,1),Mn&&En.push(Mn.p.catch(Zv)),Un=Dn(An.slice(1)),Bn=Un.next();!Bn.done;Bn=Un.next())Gn=Bn.value,Gn.p.reject(new zs(2,7,7003,void 0));mn.g&&En.push(mn.g.destroy()),mn.m&&En.push(mn.m.destroy());for(Wn in mn.s)En.push(mn.s[Wn].destroy());return Qn(ts,Promise.all(En),2)}mn.C&&(mn.C.release(),mn.C=null),mn.l&&(mn.l.removeAttribute("src"),mn.l.load(),mn.l=null),mn.I=null,mn.j=null,mn.g=null,mn.m=null,mn.h={},mn.s={},mn.B=null,mn.i={},mn.H=null,ms(ts)})}Sn.init=function(mn,En,xn){xn=xn===void 0?!1:xn;var An=this,Mn,Un,Bn,Gn,Wn,ts,os,cs;return hs(function(ls){if(ls.g==1)return Mn=Pu,Qn(ls,An.K,2);for(An.F=xn,Un={},Bn=Dn(mn.keys()),Gn=Bn.next();!Gn.done;Un={Ea:Un.Ea},Gn=Bn.next())if(Un.Ea=Gn.value,Wn=mn.get(Un.Ea),ts=Vm(Wn.mimeType,Wn.codecs),Un.Ea==Mn.ba)$S(An,ts,xn);else{!En&&dp(ts)||!$m(ts,Un.Ea)||(An.s[Un.Ea]=new ml(ts),ts=U0(Un.Ea,ts)),os=ts+An.I.sourceBufferExtraFeatures,Ol(An.G),cs=void 0;try{cs=An.j.addSourceBuffer(os)}catch(gs){throw new zs(2,3,3015,gs,"The mediaSource_ status was"+An.j.readyState+"expected 'open'")}An.C.o(cs,"error",function(gs){return function(){An.i[gs.Ea][0].p.reject(new zs(2,3,3014,An.l.error?An.l.error.code:0))}}(Un)),An.C.o(cs,"updateend",function(gs){return function(){return dy(An,gs.Ea)}}(Un)),An.h[Un.Ea]=cs,An.M[Un.Ea]=ts,An.i[Un.Ea]=[],An.P[Un.Ea]=!!Wn.drmInfos.length}ms(ls)})},Sn.configure=function(mn){this.I=mn};function $S(mn,En,xn){mn.g||(mn.g=new Us(mn.m));var An=mn.g;mn=mn.J,En=="application/cea-608"||En=="application/cea-708"?An.i=null:(An.i=(0,Ll[En])(),An.i.setSequenceMode?An.i.setSequenceMode(xn):Tu('Text parsers should have a "setSequenceMode" method!'),An.C=mn)}function Ux(mn){return mn.j?mn.j.readyState=="ended":!0}function aI(mn,En){return En==Vu?mn.g.g:tI(jv(mn,En))}function bS(mn,En){return En==Vu?mn.g.h:aE(jv(mn,En))}function oI(mn,En,xn){return En==Vu?(mn=mn.g,mn.h==null||mn.h<xn?0:mn.h-Math.max(xn,mn.g)):(mn=jv(mn,En),Rk(mn,xn))}Sn.ib=function(){var mn={total:Lv(this.l.buffered),audio:Lv(jv(this,"audio")),video:Lv(jv(this,"video")),text:[]};if(this.g){var En=this.g.g,xn=this.g.h;En!=null&&xn!=null&&mn.text.push({start:En,end:xn})}return mn};function jv(mn,En){try{return mn.h[En].buffered}catch{return null}}function xS(mn,En,xn,An,Mn,Un,Bn){Un=Un===void 0?!1:Un,Bn=Bn===void 0?!1:Bn;var Gn,Wn,ts,os,cs,ls,gs,ws,Ns,Os,Ps,Xs,Ds,qs,Qs,tu,ou,hu,gu,ju,Yu,Qu,dl;return hs(function(Nu){switch(Nu.g){case 1:if(Gn=Pu,En!=Gn.ba){Nu.D(2);break}if(!mn.F){Nu.D(3);break}return Qn(Nu,mn.X,4);case 4:Wn=Nu.h,mn.g.B=Wn;case 3:return Qn(Nu,mu(mn.g,xn,An?An.startTime:null,An?An.endTime:null),5);case 5:return Nu.return();case 2:if(ts=Ku(xn),os=mn.M[En],mn.s[En]&&(os=mn.s[En].s),0>rI(ts)?Gy.includes(os)&&(ws=Nk(ts),ws.length&&An&&(Ns={cueTime:An.startTime,data:ts,frames:ws,dts:An.startTime,pts:An.startTime},mn.V([Ns],0,An.endTime))):(cs=new Dk().parse(ts),ls=An.startTime-(cs.getStartTime()[En]||0),gs=FM(cs),gs.length&&mn.V(gs,ls,An?An.endTime:null)),!mn.s[En]){Mn&&En==Gn.Ma&&(mn.g||$S(mn,"application/cea-608",mn.F),mn.B||(mn.B=new Mk(os)),An?(Os=Rx(mn.B,xn),Os.length&&(Ps=mn.h[Gn.Ma].timestampOffset,jp(mn.g,Os,An.startTime,An.endTime,Ps))):mn.B.init(xn)),Nu.D(6);break}return Un&&mn.s[En].g.resetCaptions(),Qn(Nu,NT(mn.s[En],xn),7);case 7:Xs=Nu.h,mn.g||$S(mn,"application/cea-608",mn.F),Xs.captions&&Xs.captions.length&&(Ds=mn.h[Gn.Ma].timestampOffset,qs=El(Xs.captions),jp(mn.g,qs,An?An.startTime:null,An?An.endTime:null,Ds)),xn=Xs.data;case 6:if(xn=lI(mn,xn,An?An.startTime:null,En),Qs=mn.h[En],tu=Hx,!mn.F||Qs.mode==tu||!An){Nu.D(8);break}if(ou=mn.j.duration,hu=En==Gn.Ma||!(Gn.Ma in mn.h),!hu){Nu.D(9);break}return gu=[Qs.appendWindowStart,Qs.appendWindowEnd],Qs.appendWindowStart=0,Qs.appendWindowEnd=1/0,ju=Qs.timestampOffset,Qs.timestampOffset=0,Qn(Nu,$u(mn,En,function(){return Fx(mn,En,xn)}),10);case 10:return Qn(Nu,$u(mn,En,function(){return uE(mn,En)}),11);case 11:return Qs.timestampOffset=ju,Qs.appendWindowStart=gu[0],Qs.appendWindowEnd=gu[1],Yu=tI(jv(mn,En)),Qu=(An.startTime||0)-(Yu||0),mn.X.resolve(Qu),Qn(Nu,$u(mn,En,function(){return Bx(mn,En,0,ou)}),12);case 12:if(En!=Gn.Ma){Nu.D(9);break}return Qn(Nu,$u(mn,En,function(){mn.l.currentTime-=.001,dy(mn,En)}),9);case 9:return Qs.mode=tu,Qn(Nu,mn.Sa(ou),8);case 8:return An&&mn.F&&En!=Gn.ba&&(Un||Bn)&&(dl=An.startTime,$u(mn,En,function(){return uE(mn,En)}),$u(mn,En,function(){return Vx(mn,En,dl)})),Qn(Nu,$u(mn,En,function(){Fx(mn,En,xn)}),16);case 16:ms(Nu)}})}function jx(mn,En){var xn=bS(mn,"video")||0;fu(mn.g,En,xn)}function Z_(mn){mn.g&&fu(mn.g,"",0)}Sn.remove=function(mn,En,xn){var An=this,Mn;return hs(function(Un){return Mn=Pu,mn==Mn.ba?Qn(Un,An.g.remove(En,xn),0):Qn(Un,$u(An,mn,function(){return Bx(An,mn,En,xn)}),0)})};function sm(mn,En){var xn;return hs(function(An){return xn=Pu,En==xn.ba?mn.g?Qn(An,mn.g.remove(0,1/0),0):An.return():Qn(An,$u(mn,En,function(){return Bx(mn,En,0,mn.j.duration)}),0)})}Sn.flush=function(mn){var En=this,xn;return hs(function(An){return xn=Pu,mn==xn.ba?An.return():Qn(An,$u(En,mn,function(){En.l.currentTime-=.001,dy(En,mn)}),0)})};function sI(mn,En,xn,An,Mn,Un){var Bn;return hs(function(Gn){return Bn=Pu,En==Bn.ba?(Un||(mn.g.B=xn),uu(mn.g,An,Mn),Gn.return()):Qn(Gn,Promise.all([$u(mn,En,function(){return uE(mn,En)}),Un?Promise.resolve():$u(mn,En,function(){return Vx(mn,En,xn)}),$u(mn,En,function(){mn.h[En].appendWindowStart=0,mn.h[En].appendWindowEnd=Mn,mn.h[En].appendWindowStart=An,dy(mn,En)})]),0)})}function Fk(mn,En,xn){var An;return hs(function(Mn){return An=Pu,En==An.ba?Mn.return():($u(mn,En,function(){return uE(mn,En)}),Qn(Mn,$u(mn,En,function(){return Vx(mn,En,xn)}),0))})}Sn.endOfStream=function(mn){var En=this;return hs(function(xn){return Qn(xn,Gx(En,function(){Ux(En)||En.j.readyState==="closed"||(mn?En.j.endOfStream(mn):En.j.endOfStream())}),0)})},Sn.Sa=function(mn){var En=this;return hs(function(xn){return Qn(xn,Gx(En,function(){if(mn<En.j.duration)for(var An in En.h){var Mn={start:function(){},p:new _l};En.i[An].unshift(Mn)}En.j.duration=mn}),0)})},Sn.getDuration=function(){return this.j.duration};function Fx(mn,En,xn){if(En=="video"&&mn.H){var An=mn.H;An.g&&An.g.appendBuffer(xn,"video",An.i)}mn.h[En].appendBuffer(xn)}function Bx(mn,En,xn,An){An<=xn?dy(mn,En):mn.h[En].remove(xn,An)}function uE(mn,En){var xn=mn.h[En].appendWindowStart,An=mn.h[En].appendWindowEnd;mn.h[En].abort(),mn.h[En].appendWindowStart=xn,mn.h[En].appendWindowEnd=An,dy(mn,En)}function Vx(mn,En,xn){0>xn&&(xn+=.001),mn.h[En].timestampOffset=xn,dy(mn,En)}function dy(mn,En){var xn=mn.i[En][0];xn&&(xn.p.resolve(),zx(mn,En))}function $u(mn,En,xn){return Ol(mn.G),xn={start:xn,p:new _l},mn.i[En].push(xn),mn.i[En].length==1&&uI(mn,En),xn.p}function Gx(mn,En){var xn,An,Mn,Un,Bn,Gn;return hs(function(Wn){switch(Wn.g){case 1:Ol(mn.G),xn=[],An={};for(Mn in mn.h)An.yc=new _l,Un={start:function(ts){return function(){return ts.yc.resolve()}}(An),p:An.yc},mn.i[Mn].push(Un),xn.push(An.yc),mn.i[Mn].length==1&&Un.start(),An={yc:An.yc};return Ts(Wn,2),Qn(Wn,Promise.all(xn),4);case 4:ys(Wn,3);break;case 2:throw Bn=_s(Wn),Bn;case 3:try{En()}catch(ts){throw new zs(2,3,3015,ts)}finally{for(Gn in mn.h)zx(mn,Gn)}ms(Wn)}})}function zx(mn,En){mn.i[En].shift(),uI(mn,En)}function uI(mn,En){var xn=mn.i[En][0];if(xn)try{xn.start()}catch(An){An.name=="QuotaExceededError"?xn.p.reject(new zs(2,3,3017,En)):xn.p.reject(new zs(2,3,3015,An)),zx(mn,En)}}function lI(mn,En,xn,An){var Mn=mn.P[An];return xn==null&&Mn&&(Fm()||xv())&&mn.M[An].split(";")[0].split("/")[1]=="mp4"&&(En=vx(En)),En}var CS=pn.URL.createObjectURL,Hx="sequence",Gy=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function Gu(mn,En,xn){this.i=mn,this.m=En,this.s=this.j=1/0,this.g=1,this.h=this.l=null,this.B=0,this.C=!0,this.F=0,this.G=xn===void 0?!0:xn,this.H=0,this.I=!1}Sn=Gu.prototype,Sn.getDuration=function(){return this.j},Sn.Pg=function(){return this.g},Sn.Yf=function(mn){this.i=mn},Sn.Sa=function(mn){this.j=mn},Sn.Tg=function(){return this.i},Sn.Uf=function(mn){this.B=mn},Sn.$c=function(mn){this.C=mn},Sn.Re=function(mn){this.s=mn},Sn.Vf=function(mn){this.m=mn},Sn.Gg=function(){return this.m},Sn.lc=function(mn){if(mn.length!=0){var En=mn[0].startTime,xn=mn[0].endTime,An=(Date.now()+this.B)/1e3;mn=Dn(mn);for(var Mn=mn.next();!Mn.done;Mn=mn.next())Mn=Mn.value,An<Mn.startTime||(En=Math.min(En,Mn.startTime),xn=Math.max(xn,Mn.endTime),this.g=Math.max(this.g,Mn.endTime-Mn.startTime));this.Ae(En),this.h=Math.max(this.h,xn),this.i!=null&&this.G&&!this.I&&(this.i=An-this.h-this.g)}},Sn.ve=function(){this.I=!0},Sn.Ae=function(mn){this.l=this.l==null?mn:Math.min(this.l,mn)},Sn.ze=function(mn){this.g=Math.max(this.g,mn)},Sn.offset=function(mn){this.l!=null&&(this.l+=mn),this.h!=null&&(this.h+=mn)},Sn.U=function(){return this.j==1/0&&!this.C},Sn.Lb=function(){return this.j!=1/0&&!this.C},Sn.kb=function(){return Math.max(this.F,this.Ib()-this.s)},Sn.$f=function(mn){this.F=mn},Sn.Ib=function(){return this.U()||this.Lb()?Math.min(Math.max(0,(Date.now()+this.B)/1e3-this.g-this.i)+this.H,this.j):this.h?Math.min(this.h,this.j):this.j},Sn.Ic=function(mn){var En=Math.max(this.l,this.F);return this.s==1/0?Math.ceil(1e3*En)/1e3:Math.max(En,Math.min(this.Ib()-this.s+mn,this.jb()))},Sn.dc=function(){return this.Ic(0)},Sn.jb=function(){return Math.max(0,this.Ib()-(this.U()||this.Lb()?this.m:0))},Sn.eg=function(){return!(this.i==null||this.h!=null&&this.G)},Sn.Tf=function(mn){this.H=mn},Ys("shaka.media.PresentationTimeline",Gu),Gu.prototype.setAvailabilityTimeOffset=Gu.prototype.Tf,Gu.prototype.usingPresentationStartTime=Gu.prototype.eg,Gu.prototype.getSeekRangeEnd=Gu.prototype.jb,Gu.prototype.getSeekRangeStart=Gu.prototype.dc,Gu.prototype.getSafeSeekRangeStart=Gu.prototype.Ic,Gu.prototype.getSegmentAvailabilityEnd=Gu.prototype.Ib,Gu.prototype.setUserSeekStart=Gu.prototype.$f,Gu.prototype.getSegmentAvailabilityStart=Gu.prototype.kb,Gu.prototype.isInProgress=Gu.prototype.Lb,Gu.prototype.isLive=Gu.prototype.U,Gu.prototype.offset=Gu.prototype.offset,Gu.prototype.notifyMaxSegmentDuration=Gu.prototype.ze,Gu.prototype.notifyMinSegmentStartTime=Gu.prototype.Ae,Gu.prototype.lockStartTime=Gu.prototype.ve,Gu.prototype.notifySegments=Gu.prototype.lc,Gu.prototype.getDelay=Gu.prototype.Gg,Gu.prototype.setDelay=Gu.prototype.Vf,Gu.prototype.setSegmentAvailabilityDuration=Gu.prototype.Re,Gu.prototype.setStatic=Gu.prototype.$c,Gu.prototype.setClockOffset=Gu.prototype.Uf,Gu.prototype.getPresentationStartTime=Gu.prototype.Tg,Gu.prototype.setDuration=Gu.prototype.Sa,Gu.prototype.setPresentationStartTime=Gu.prototype.Yf,Gu.prototype.getMaxSegmentDuration=Gu.prototype.Pg,Gu.prototype.getDuration=Gu.prototype.getDuration;function Kx(mn,En,xn){this.l=xn,this.j=mn,this.B=qx(mn),this.g=mn.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.s=0,this.C=En,this.i=function(){}}Kx.prototype.release=function(){this.l=this.j=null,this.i=function(){}};function Wx(mn,En){mn.i=En}function cI(mn){this.g=mn}function qx(mn){if(mn.g.paused||mn.g.playbackRate==0||mn.g.buffered.length==0)var En=!1;else e:{En=mn.g.currentTime,mn=Dn(Lv(mn.g.buffered));for(var xn=mn.next();!xn.done;xn=mn.next())if(xn=xn.value,!(En<xn.start-.1||En>xn.end-.5)){En=!0;break e}En=!1}return En}function Bk(mn,En,xn,An,Mn){var Un=this;this.s=Mn,this.g=mn,this.B=En,this.G=xn,this.i=new xu,this.m=!1,this.F=mn.readyState,this.C=0,this.h=An,this.l=!1,this.i.o(mn,"waiting",function(){return Vk(Un)}),this.j=new ku(function(){Vk(Un)}).ha(.25)}Bk.prototype.release=function(){this.i&&(this.i.release(),this.i=null),this.j!=null&&(this.j.stop(),this.j=null),this.h&&(this.h.release(),this.h=null),this.g=this.B=this.s=null},Bk.prototype.Ce=function(){this.l=!0,Vk(this)};function Vk(mn){if(mn.g.readyState!=0){if(mn.g.seeking){if(!mn.m)return}else mn.m=!1;if(!mn.g.paused||mn.g.currentTime==0&&(mn.g.autoplay||mn.g.currentTime!=0)){mn.g.readyState!=mn.F&&(mn.F=mn.g.readyState);var En;if(!(En=!mn.h)){En=mn.h;var xn=En.j,An=qx(xn),Mn=xn.g.currentTime,Un=Date.now()/1e3;(En.g!=Mn||En.B!=An)&&(En.m=Un,En.g=Mn,En.B=An,En.h=!1),Mn=Un-En.m,(An=Mn>=En.C&&An&&!En.h)&&(En.i(En.g,Mn),En.h=!0,En.g=xn.g.currentTime,En.s++,En.l(new vu("stalldetected"))),En=!An}En&&(En=mn.g.currentTime,xn=mn.g.buffered,An=UM(xn,En,mn.G.gapDetectionThreshold),An==null||An==0&&!mn.l||(Mn=xn.start(An),Mn>=mn.B.jb()||.001>Mn-En||(An!=0&&xn.end(An-1),mn.g.currentTime=Mn,mn.C++,mn.s(new vu("gapjumped")))))}}}function J_(mn,En,xn,An){En==HTMLMediaElement.HAVE_NOTHING||mn.readyState>=En?An():(En=dI.value().get(En),xn.ya(mn,En,An))}var dI=new Sm(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function Yx(mn,En,xn){var An=this;this.g=mn,this.l=En,this.j=xn,this.m=!1,this.h=new xu,this.i=new fI(mn),J_(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){Zx(An,An.j)})}Yx.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i!=null&&(this.i.release(),this.i=null),this.l=function(){},this.g=null};function Xx(mn){return mn.m?mn.g.currentTime:mn.j}function Qx(mn,En){0<mn.g.readyState?yl(mn.i,En):J_(mn.g,HTMLMediaElement.HAVE_METADATA,mn.h,function(){Zx(mn,mn.j)})}function Zx(mn,En){.001>Math.abs(mn.g.currentTime-En)?Jx(mn):(mn.h.ya(mn.g,"seeking",function(){Jx(mn)}),yl(mn.i,mn.g.currentTime&&mn.g.currentTime!=0?mn.g.currentTime:En))}function Jx(mn){mn.m=!0,mn.h.o(mn.g,"seeking",function(){return mn.l()})}function fI(mn){var En=this;this.h=mn,this.m=10,this.l=this.j=this.i=0,this.g=new ku(function(){0>=En.i||En.h.currentTime!=En.j?En.g.stop():(En.h.currentTime=En.l,En.i--)})}fI.prototype.release=function(){this.g&&(this.g.stop(),this.g=null),this.h=null};function yl(mn,En){mn.j=mn.h.currentTime,mn.l=En,mn.i=mn.m,mn.h.currentTime=En,mn.g.ha(.1)}function pI(mn){this.g=mn,this.j=!1,this.h=null,this.i=new xu}Sn=pI.prototype,Sn.ge=function(){function mn(){En.h==null||En.h==0?En.j=!0:(En.i.ya(En.g,"seeking",function(){En.j=!0}),En.g.currentTime=Math.max(0,En.g.currentTime+En.h))}var En=this;J_(this.g,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,function(){mn()})},Sn.release=function(){this.i&&(this.i.release(),this.i=null),this.g=null},Sn.ie=function(mn){this.h=this.j?this.h:mn},Sn.kd=function(){return(this.j?this.g.currentTime:this.h)||0},Sn.nf=function(){return 0},Sn.mf=function(){return 0},Sn.Pf=function(){};function Gk(mn,En,xn,An,Mn,Un){var Bn=this;this.i=mn,this.g=En.presentationTimeline,this.F=En.minBufferTime||0,this.l=xn,this.C=Mn,this.B=null,this.s=hI(mn,xn,Un),this.j=new Bk(mn,En.presentationTimeline,xn,this.s,Un),this.h=new Yx(mn,function(){e:{var Gn=Bn.j;Gn.m=!0,Gn.l=!1;var Wn=Xx(Bn.h);if(Gn=lE(Bn,Wn),.001<Math.abs(Gn-Wn)&&(Wn=Date.now()/1e3,!Bn.B||Bn.B<Wn-1)){Bn.B=Wn,Qx(Bn.h,Gn),Gn=void 0;break e}Bn.C(),Gn=void 0}return Gn},zy(this,An)),this.m=new ku(function(){if(Bn.i.readyState!=0&&!Bn.i.paused){var Gn=Xx(Bn.h),Wn=Bn.g.dc(),ts=Bn.g.jb();3>ts-Wn&&(Wn=ts-3),Gn<Wn&&(Gn=lE(Bn,Gn),Bn.i.currentTime=Gn)}})}Sn=Gk.prototype,Sn.ge=function(){this.m.ha(.25)},Sn.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.C=function(){}},Sn.ie=function(mn){Qx(this.h,mn)},Sn.kd=function(){var mn=Xx(this.h);return 0<this.i.readyState&&!this.i.paused?eC(this,mn):mn},Sn.nf=function(){return this.s?this.s.s:0},Sn.mf=function(){return this.j.C};function zy(mn,En){return En==null?En=1/0>mn.g.getDuration()?mn.g.dc():mn.g.jb():0>En&&(En=mn.g.jb()+En),_d(mn,eC(mn,En))}Sn.Pf=function(){this.j.Ce()};function _d(mn,En){var xn=mn.g.getDuration();return En>=xn?xn-mn.l.durationBackoff:En}function lE(mn,En){var xn=Math.max(mn.F,mn.l.rebufferingGoal),An=mn.l.safeSeekOffset,Mn=mn.g.dc(),Un=mn.g.jb(),Bn=mn.g.getDuration();3>Un-Mn&&(Mn=Un-3);var Gn=mn.g.Ic(xn),Wn=mn.g.Ic(An);return xn=mn.g.Ic(xn+An),En>=Bn?_d(mn,En):En>Un?Un:En<Mn?oE(mn.i.buffered,Wn)?Wn:xn:En>=Gn||oE(mn.i.buffered,En)?En:xn}function eC(mn,En){var xn=mn.g.dc();return En<xn?xn:(mn=mn.g.jb(),En>mn?mn:En)}function hI(mn,En,xn){if(!En.stallEnabled)return null;var An=En.stallSkip;return En=new Kx(new cI(mn),En.stallThreshold,xn),Wx(En,function(){An?mn.currentTime+=An:(mn.pause(),mn.play())}),En}function vl(mn){this.g=mn,this.h=null,this.i=0,this.j=!1}Sn=vl.prototype,Sn.release=function(){this.j||(this.g=[],this.h&&this.h.stop(),this.h=null)},Sn.kh=function(){this.j=!0};function zk(mn,En){mn=Dn(mn.g);for(var xn=mn.next();!xn.done;xn=mn.next())En(xn.value)}Sn.find=function(mn){for(var En=this.g.length-1,xn=En;0<=xn;--xn){var An=this.g[xn],Mn=xn<En?this.g[xn+1].startTime:An.endTime;if(mn>=An.startTime&&mn<Mn)return xn+this.i}return this.g.length&&mn<this.g[0].startTime?this.i:null},Sn.get=function(mn){return this.g.length==0?null:(mn-=this.i,0>mn||mn>=this.g.length?null:this.g[mn])},Sn.offset=function(mn){if(!this.j)for(var En=Dn(this.g),xn=En.next();!xn.done;xn=En.next())xn.value.offset(mn)},Sn.Sc=function(mn){if(!this.j&&mn.length){var En=Math.round(1e3*mn[0].startTime)/1e3;this.g=this.g.filter(function(xn){return Math.round(1e3*xn.startTime)/1e3<En}),this.g.push.apply(this.g,Kn(mn))}},Sn.kc=function(mn,En){var xn=this;mn=mn.filter(function(An){return An.endTime>En&&(xn.g.length==0||An.endTime>xn.g[0].startTime)}),this.Sc(mn),this.Gb(En)},Sn.Gb=function(mn){if(!this.j){var En=this.g.length;this.g=this.g.filter(function(xn){return xn.endTime>mn}),this.i+=En-this.g.length}},Sn.wb=function(mn,En,xn){if(xn=xn===void 0?!1:xn,!this.j){for(;this.g.length&&this.g[this.g.length-1].startTime>=En;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=mn;)this.g.shift(),xn||this.i++;this.g.length!=0&&(mn=this.g[this.g.length-1],this.g[this.g.length-1]=new rl(mn.startTime,En,mn.C,mn.Ta,mn.Ca,mn.h,mn.timestampOffset,mn.appendWindowStart,mn.appendWindowEnd,mn.i,mn.tilesLayout,mn.B,mn.g,mn.status,mn.m),this.g[this.g.length-1].j=mn.j)}},Sn.Nd=function(mn,En){var xn=this;this.j||(this.h&&this.h.stop(),this.h=new ku(function(){var An=En();An?xn.g.push.apply(xn.g,Kn(An)):(xn.h.stop(),xn.h=null)}),this.h.ha(mn))},vl.prototype[Symbol.iterator]=function(){return this.bc(0)},vl.prototype.bc=function(mn){var En=this.find(mn);if(En==null)return null;En--;var xn=this.get(En+1),An=-1;if(xn&&0<xn.i.length)for(var Mn=xn.i.length-1;0<=Mn;--Mn){var Un=xn.i[Mn];if(mn>=Un.startTime&&mn<Un.endTime){En++,An=Mn-1;break}}return new Hy(this,En,An)};function tC(mn,En,xn){return new vl([new rl(mn,mn+En,function(){return xn},0,null,null,mn,mn,mn+En)])}Ys("shaka.media.SegmentIndex",vl),vl.forSingleSegment=tC,vl.prototype.getIteratorForTime=vl.prototype.bc,vl.prototype.updateEvery=vl.prototype.Nd,vl.prototype.fit=vl.prototype.wb,vl.prototype.evict=vl.prototype.Gb,vl.prototype.mergeAndEvict=vl.prototype.kc,vl.prototype.offset=vl.prototype.offset,vl.prototype.get=vl.prototype.get,vl.prototype.find=vl.prototype.find,vl.prototype.markImmutable=vl.prototype.kh,vl.prototype.release=vl.prototype.release;function Hy(mn,En,xn){this.i=mn,this.g=En,this.h=xn}Hy.prototype.sg=function(){return this.g},Hy.prototype.current=function(){var mn=this.i.get(this.g);return mn&&0<mn.i.length&&mn.Pa().length&&this.h>=mn.i.length&&(this.g++,this.h=0,mn=this.i.get(this.g)),mn&&0<mn.i.length?mn.i[this.h]:mn},Hy.prototype.next=function(){var mn=this.i.get(this.g);return mn&&0<mn.i.length?(this.h++,mn.Pa().length&&this.h==mn.i.length&&(this.g++,this.h=0)):(this.g++,this.h=0),mn=this.current(),{value:mn,done:!mn}},Ys("shaka.media.SegmentIterator",Hy),Hy.prototype.next=Hy.prototype.next,Hy.prototype.current=Hy.prototype.current,Hy.prototype.currentPosition=Hy.prototype.sg;function ip(){vl.call(this,[]),this.l=[]}as(ip,vl),Sn=ip.prototype,Sn.clone=function(){var mn=new ip;return mn.l=this.l.slice(),mn},Sn.release=function(){for(var mn=Dn(this.l),En=mn.next();!En.done;En=mn.next())En.value.release();this.l=[]},Sn.find=function(mn){for(var En=0,xn=Dn(this.l),An=xn.next();!An.done;An=xn.next()){An=An.value;var Mn=An.find(mn);if(Mn!=null)return Mn+En;En+=An.i+An.g.length}return null},Sn.get=function(mn){for(var En=0,xn=Dn(this.l),An=xn.next();!An.done;An=xn.next()){An=An.value;var Mn=An.get(mn-En);if(Mn)return Mn;En+=An.i+An.g.length}return null},Sn.offset=function(){},Sn.Sc=function(){},Sn.Gb=function(){},Sn.kc=function(){},Sn.wb=function(){},Sn.Nd=function(){},Ys("shaka.media.MetaSegmentIndex",ip),ip.prototype.updateEvery=ip.prototype.Nd,ip.prototype.fit=ip.prototype.wb,ip.prototype.mergeAndEvict=ip.prototype.kc,ip.prototype.evict=ip.prototype.Gb,ip.prototype.merge=ip.prototype.Sc,ip.prototype.offset=ip.prototype.offset,ip.prototype.get=ip.prototype.get,ip.prototype.find=ip.prototype.find,ip.prototype.release=ip.prototype.release;function e0(mn){var En=this;this.g=mn,this.j=!1,this.i=this.g.wd(),this.h=new ku(function(){En.g.Of(.25*En.i)})}e0.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null},e0.prototype.set=function(mn){this.i=mn,wS(this)},e0.prototype.td=function(){return this.g.td()};function wS(mn){mn.h.stop();var En=mn.j?0:mn.i;if(0<=En)try{mn.g.wd()!=En&&mn.g.Pe(En);return}catch{}mn.h.ha(.25),mn.g.wd()!=0&&mn.g.Pe(0)}function h_(mn){var En=this;this.h=mn,this.g=new Set,this.i=new ku(function(){cE(En,!1)}).ha(.25)}h_.prototype.release=function(){this.i.stop();for(var mn=Dn(this.g),En=mn.next();!En.done;En=mn.next())En.value.release();this.g.clear()};function cE(mn,En){for(var xn=Dn(mn.g),An=xn.next();!An.done;An=xn.next())An.value.j(mn.h.currentTime,En)}function Fv(mn){Eu.call(this),this.g=new Map,this.h=mn}as(Fv,Eu),Fv.prototype.release=function(){this.g.clear(),Eu.prototype.release.call(this)};function AS(mn,En){var xn=mn.g.get(En);return xn||(xn={Uc:[],Af:null,contentType:En},mn.g.set(En,xn)),xn}function rC(mn,En,xn){var An=AS(mn,En.contentType);mI(mn,An),mn={we:En,position:xn},An=An.Uc,En=An.findIndex(function(Mn){return Mn.position>=xn}),0<=En?An.splice(En,An[En].position==xn?1:0,mn):An.push(mn)}Fv.prototype.j=function(mn){for(var En=Dn(this.g.values()),xn=En.next();!xn.done;xn=En.next()){xn=xn.value;e:{for(var An=xn.Uc,Mn=An.length-1;0<=Mn;Mn--){var Un=An[Mn];if(Un.position<=mn){An=Un.we;break e}}An=null}if((Mn=An)&&(Mn=xn.Af,Mn=!(Mn===An||Mn&&An&&Mn.bandwidth==An.bandwidth&&Mn.audioSamplingRate==An.audioSamplingRate&&Mn.codecs==An.codecs&&Mn.contentType==An.contentType&&Mn.frameRate==An.frameRate&&Mn.height==An.height&&Mn.mimeType==An.mimeType&&Mn.channelsCount==An.channelsCount&&Mn.pixelAspectRatio==An.pixelAspectRatio&&Mn.width==An.width)),Mn)e:{if(Mn=mn,Un=An.contentType,(Un=this.h()[Un])&&0<Un.length){var Bn=Un[Un.length-1].end;if(Mn>=Un[0].start&&Mn<Bn){Mn=!0;break e}}Mn=!1}Mn&&(xn.Af=An,JSON.stringify(An),xn=new vu("qualitychange",new Map([["quality",An],["position",mn]])),this.dispatchEvent(xn))}};function mI(mn,En){if((mn=mn.h()[En.contentType])&&0<mn.length){var xn=mn[0].start,An=mn[mn.length-1].end,Mn=En.Uc;En.Uc=Mn.filter(function(Un,Bn){return!(Un.position<=xn&&Bn+1<Mn.length&&Mn[Bn+1].position<=xn||Un.position>=An)})}else En.Uc=[]}function nC(mn){Eu.call(this);var En=this;this.g=new Set,this.i=mn,this.h=new ku(function(){for(var xn=En.i(),An=Dn(En.g),Mn=An.next();!Mn.done;Mn=An.next())Mn=Mn.value,Mn.endTime<xn.start&&(En.g.delete(Mn),Mn=new vu("regionremove",new Map([["region",Mn]])),En.dispatchEvent(Mn))}).ha(2)}as(nC,Eu),nC.prototype.release=function(){this.g.clear(),this.h.stop(),Eu.prototype.release.call(this)};function Hk(mn){Eu.call(this);var En=this;this.i=mn,this.g=new Map,this.l=[{Vb:null,Ub:r0,Kb:function(xn,An){return t0(En,"enter",xn,An)}},{Vb:dE,Ub:r0,Kb:function(xn,An){return t0(En,"enter",xn,An)}},{Vb:m_,Ub:r0,Kb:function(xn,An){return t0(En,"enter",xn,An)}},{Vb:r0,Ub:dE,Kb:function(xn,An){return t0(En,"exit",xn,An)}},{Vb:r0,Ub:m_,Kb:function(xn,An){return t0(En,"exit",xn,An)}},{Vb:dE,Ub:m_,Kb:function(xn,An){return t0(En,"skip",xn,An)}},{Vb:m_,Ub:dE,Kb:function(xn,An){return t0(En,"skip",xn,An)}}],this.h=new xu,this.h.o(this.i,"regionremove",function(xn){En.g.delete(xn.region)})}as(Hk,Eu),Hk.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,Eu.prototype.release.call(this)},Hk.prototype.j=function(mn,En){for(var xn=Dn(this.i.g),An=xn.next();!An.done;An=xn.next()){An=An.value;var Mn=this.g.get(An),Un=mn<An.startTime?dE:mn>An.endTime?m_:r0;this.g.set(An,Un);for(var Bn=Dn(this.l),Gn=Bn.next();!Gn.done;Gn=Bn.next())Gn=Gn.value,Gn.Vb==Mn&&Gn.Ub==Un&&Gn.Kb(An,En)}};function t0(mn,En,xn,An){En=new vu(En,new Map([["region",xn],["seeking",An]])),mn.dispatchEvent(En)}var dE=1,r0=2,m_=3;function g_(mn,En,xn,An,Mn){return mn=ll(mn,An,Mn),(En!=0||xn!=null)&&(mn.headers.Range=xn?"bytes="+En+"-"+xn:"bytes="+En+"-"),mn}function gI(mn,En){var xn=this;this.g=En,this.m=mn,this.i=null,this.C=1,this.s=this.l=null,this.H=0,this.G=!1,this.j=new Map,this.F=!1,this.I=null,this.B=!1,this.h=new Ov(function(){return GM(xn)})}Sn=gI.prototype,Sn.destroy=function(){return this.h.destroy()};function GM(mn){var En,xn,An,Mn;return hs(function(Un){if(Un.g==1){for(En=[],xn=Dn(mn.j.values()),An=xn.next();!An.done;An=xn.next())Mn=An.value,pE(Mn),En.push(cC(Mn));return Qn(Un,Promise.all(En),2)}mn.j.clear(),mn.g=null,mn.m=null,mn.i=null,ms(Un)})}Sn.configure=function(mn){this.i=mn,this.I=new G_({maxAttempts:Math.max(mn.retryParameters.maxAttempts,2),baseDelay:mn.retryParameters.baseDelay,backoffFactor:mn.retryParameters.backoffFactor,fuzzFactor:mn.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0)},Sn.start=function(){var mn=this;return hs(function(En){if(En.g==1)return Qn(En,WM(mn),2);Ol(mn.h),mn.F=!0,ms(En)})};function zM(mn,En){var xn,An,Mn,Un,Bn,Gn;hs(function(Wn){switch(Wn.g){case 1:return xn=Pu,mn.H++,An=mn.H,Ts(Wn,2),Qn(Wn,sm(mn.g.S,xn.ba),4);case 4:ys(Wn,3);break;case 2:Mn=_s(Wn),mn.g&&mn.g.onError(Mn);case 3:Un=Vm(En.mimeType,En.codecs),$S(mn.g.S,Un,mn.m.sequenceMode),Bn=mn.g.S.m,(Bn.isTextVisible()||mn.i.alwaysStreamText)&&mn.H==An&&(Gn=EI(En),mn.j.set(xn.ba,Gn),py(mn,Gn,0)),ms(Wn)}})}function yI(mn){var En=mn.j.get(Vu);En&&(pE(En),cC(En).catch(function(){}),mn.j.delete(Vu)),mn.s=null}function vI(mn,En){var xn=mn.j.get("video");if(xn){var An=xn.stream;An&&(En?(En=An.trickModeVideo)&&!xn.Sb&&(fE(mn,En,!1,0,!1),xn.Sb=An):(An=xn.Sb)&&(xn.Sb=null,fE(mn,An,!0,0,!1)))}}function _I(mn,En,xn,An,Mn,Un){xn=xn===void 0?!1:xn,An=An===void 0?0:An,Mn=Mn===void 0?!1:Mn,Un=Un===void 0?!1:Un,mn.l=En,mn.F&&(En.video&&fE(mn,En.video,xn,An,Mn,Un),En.audio&&fE(mn,En.audio,xn,An,Mn,Un))}function Kk(mn,En){hs(function(xn){if(xn.g==1)return mn.s=En,mn.F?En.segmentIndex?xn.D(2):Qn(xn,En.createSegmentIndex(),2):xn.return();fE(mn,En,!0,0,!1),ms(xn)})}function fE(mn,En,xn,An,Mn,Un){var Bn=mn.j.get(En.type);Bn||En.type!=Vu?Bn&&(Bn.Sb&&(En.trickModeVideo?(Bn.Sb=En,En=En.trickModeVideo):Bn.Sb=null),Bn.stream!=En||Mn)&&(En.type==Vu&&$S(mn.g.S,Vm(En.mimeType,En.codecs),mn.m.sequenceMode),Bn.stream.closeSegmentIndex&&Bn.stream.closeSegmentIndex(),Bn.stream=En,Bn.qa=null,Bn.pf=!!Un,xn&&(Bn.Cc?Bn.Pd=!0:Bn.Ia?(Bn.Eb=!0,Bn.qd=An,Bn.Pd=!0):(pE(Bn),lC(mn,Bn,!0,An).catch(function(Gn){mn.g&&mn.g.onError(Gn)}))),HM(mn,Bn).catch(function(Gn){mn.g&&mn.g.onError(Gn)})):zM(mn,En)}function HM(mn,En){var xn,An;return hs(function(Mn){if(Mn.g==1)return En.Ka?(xn=En.stream,An=En.Ka,xn.segmentIndex?Mn.D(2):Qn(Mn,xn.createSegmentIndex(),2)):Mn.return();if(En.Ka!=An||En.stream!=xn)return Mn.return();var Un=mn.g.vd(),Bn=bS(mn.g.S,En.type),Gn=En.stream.segmentIndex.find(En.Ga?En.Ga.endTime:Un),Wn=Gn==null?null:En.stream.segmentIndex.get(Gn);Gn=Wn&&Wn.Ca?Wn.Ca-Wn.Ta:null,Wn&&!Gn&&(Gn=(Wn.endTime-Wn.getStartTime())*(En.stream.bandwidth||0)/8),Gn?((Wn=Wn.h)&&(Gn+=(Wn.Ca?Wn.Ca-Wn.Ta:null)||0),Wn=mn.g.getBandwidthEstimate(),Un=8*Gn/Wn<(Bn||0)-Un-Math.max(mn.m.minBufferTime||0,mn.i.rebufferingGoal)||En.Ka.h.g>Gn):Un=!1,Un&&En.Ka.abort(),ms(Mn)})}Sn.Xc=function(){if(this.g)for(var mn=this.g.vd(),En=Dn(this.j.keys()),xn=En.next();!xn.done;xn=En.next()){var An=xn.value;xn=this.j.get(An),xn.qa=null;var Mn=this.g.S;if(An==Vu?(Mn=Mn.g,Mn=Mn.g==null||Mn.h==null?!1:mn>=Mn.g&&mn<Mn.h):(Mn=jv(Mn,An),Mn=oE(Mn,mn)),!Mn){if((bS(this.g.S,An)!=null||xn.Ia)&&KM(this,xn),xn.Ka&&(xn.Ka.abort(),xn.Ka=null),An===Vu&&(An=this.g.S,An.B))for(An=An.B.g,An.l=0,An.h=[],An.g=[],Mn=An.i,Mn.i=[],Mn.h=[],Mn.g=0,ES(An),An=Dn(An.j.values()),Mn=An.next();!Mn.done;Mn=An.next())QA(Mn.value);xn.Xc=!0}}};function KM(mn,En){En.Cc||En.Eb||(En.Ia?(En.Eb=!0,En.qd=0):aI(mn.g.S,En.type)==null?En.eb==null&&py(mn,En,0):(pE(En),lC(mn,En,!1,0).catch(function(xn){mn.g&&mn.g.onError(xn)})))}function WM(mn){var En,xn,An,Mn,Un,Bn,Gn,Wn,ts,os;return hs(function(cs){if(cs.g==1){if(En=Pu,!mn.l)throw new zs(2,5,5006);return xn=new Map,An=new Set,mn.l.audio&&(xn.set(En.jd,mn.l.audio),An.add(mn.l.audio)),mn.l.video&&(xn.set(En.Ma,mn.l.video),An.add(mn.l.video)),mn.s&&(xn.set(En.ba,mn.s),An.add(mn.s)),Mn=mn.g.S,Un=mn.i.forceTransmux,Qn(cs,Mn.init(xn,Un,mn.m.sequenceMode),2)}for(Ol(mn.h),mn.updateDuration(),Bn=Dn(xn.keys()),Gn=Bn.next();!Gn.done;Gn=Bn.next())Wn=Gn.value,ts=xn.get(Wn),mn.j.has(Wn)||(os=EI(ts),mn.j.set(Wn,os),py(mn,os,0));ms(cs)})}function EI(mn){return{stream:mn,type:mn.type,qa:null,Ga:null,yd:null,se:null,re:null,qe:null,Sb:null,endOfStream:!1,Ia:!1,eb:null,Eb:!1,qd:0,Pd:!1,Cc:!1,Xc:!0,ye:!1,Ee:!1,Mc:!1,Ka:null}}Sn.updateDuration=function(){var mn=this.m.presentationTimeline.getDuration();1/0>mn?this.g.S.Sa(mn):this.g.S.Sa(Math.pow(2,32))};function iC(mn,En){var xn,An,Mn,Un,Bn;return hs(function(Gn){switch(Gn.g){case 1:if(Ol(mn.h),En.Ia||En.eb==null||En.Cc)return Gn.return();if(En.eb=null,!En.Eb){Gn.D(2);break}return Qn(Gn,lC(mn,En,En.Pd,En.qd),3);case 3:return Gn.return();case 2:if(En.stream.segmentIndex){Gn.D(4);break}return xn=En.stream,Qn(Gn,En.stream.createSegmentIndex(),5);case 5:if(xn!=En.stream)return xn.closeSegmentIndex&&xn.closeSegmentIndex(),En.Ia||En.eb||py(mn,En,0),Gn.return();case 4:Ts(Gn,6),An=qM(mn,En),An!=null&&(py(mn,En,An),En.Mc=!1),ys(Gn,7);break;case 6:return Mn=_s(Gn),Qn(Gn,Yk(mn,Mn),8);case 8:return Gn.return();case 7:if(Un=Array.from(mn.j.values()),!mn.F||!Un.every(function(Wn){return Wn.endOfStream})){Gn.D(0);break}return Qn(Gn,mn.g.S.endOfStream(),10);case 10:Ol(mn.h),Bn=mn.g.S.getDuration(),Bn!=0&&Bn<mn.m.presentationTimeline.getDuration()&&mn.m.presentationTimeline.Sa(Bn),ms(Gn)}})}function qM(mn,En){if(uC(En))return jx(mn.g.S,En.stream.originalId||""),null;En.type==Vu&&Z_(mn.g.S);var xn=mn.g.vd(),An=En.Ga?En.Ga.endTime:xn,Mn=oI(mn.g.S,En.type,xn),Un=Math.max(mn.m.minBufferTime||0,mn.i.rebufferingGoal,mn.i.bufferingGoal)*mn.C,Bn=mn.m.presentationTimeline.getDuration()-An,Gn=bS(mn.g.S,En.type);if(1e-6>Bn&&Gn)return En.endOfStream=!0,En.type=="video"&&(mn=mn.j.get(Vu))&&uC(mn)&&(mn.endOfStream=!0),null;if(En.endOfStream=!1,Mn>=Un)return mn.i.updateIntervalSeconds/2;if(Mn=aC(mn,En,xn,Gn),!Mn)return mn.i.updateIntervalSeconds;for(Un=1/0,Bn=Array.from(mn.j.values()),Bn=Dn(Bn),Gn=Bn.next();!Gn.done;Gn=Bn.next())Gn=Gn.value,uC(Gn)||Gn.qa&&!Gn.qa.current()||(Un=Math.min(Un,Gn.Ga?Gn.Ga.endTime:xn));return An>=Un+mn.m.presentationTimeline.g?mn.i.updateIntervalSeconds:(oC(mn,En,xn,Mn).catch(function(){}),null)}function aC(mn,En,xn,An){if(En.qa)return En.qa.current();if(En.Ga||An)return xn=En.Ga?En.Ga.endTime:An,En.ye=!0,En.qa=En.stream.segmentIndex.bc(xn),En.qa&&En.qa.next().value;mn=mn.i.inaccurateManifestTolerance,An=Math.max(xn-mn,0);var Mn=null;return mn&&(En.qa=En.stream.segmentIndex.bc(An),Mn=En.qa&&En.qa.next().value),Mn||(En.qa=En.stream.segmentIndex.bc(xn),Mn=En.qa&&En.qa.next().value),Mn}function oC(mn,En,xn,An){var Mn,Un,Bn,Gn,Wn,ts,os,cs,ls,gs,ws,Ns,Os,Ps,Xs;return hs(function(Ds){switch(Ds.g){case 1:if(Mn=Pu,Un=En.stream,Bn=En.qa,En.Ia=!0,Ts(Ds,2),An.ec()==2)throw new zs(1,1,1011);return Qn(Ds,SI(mn,En,An),4);case 4:return Ol(mn.h),mn.B?Ds.return():(Gn=Un.mimeType=="video/mp4"||Un.mimeType=="audio/mp4",Wn=pn.ReadableStream,mn.i.lowLatencyMode&&Wn&&Gn&&!An.m?(cs=new Uint8Array(0),gs=ls=!1,ws=function(qs){var Qs,tu,ou;return hs(function(hu){return ls||(gs=!0,Ol(mn.h),mn.B)?hu.return():(cs=fy(cs,qs),Qs=!1,tu=0,new Nl().box("mdat",function(gu){tu=gu.size+gu.start,Qs=!0}).parse(cs,!1,!0),Qs?(ou=cs.subarray(0,tu),cs=cs.subarray(tu),Qn(hu,Wk(mn,En,xn,Un,An,ou),0)):hu.D(0))})},Qn(Ds,n0(mn,En,An,ws),11)):(ts=n0(mn,En,An),Qn(Ds,ts,7)));case 7:if(os=Ds.h,Ol(mn.h),mn.B)return Ds.return();if(!An.m){Ds.D(8);break}return Qn(Ds,sC(os,An,Bn),9);case 9:os=Ds.h;case 8:return Ol(mn.h),En.Eb?(En.Ia=!1,py(mn,En,0),Ds.return()):Qn(Ds,Wk(mn,En,xn,Un,An,os),6);case 11:if(Ns=Ds.h,gs){Ds.D(6);break}return ls=!0,Ol(mn.h),mn.B?Ds.return():En.Eb?(En.Ia=!1,py(mn,En,0),Ds.return()):Qn(Ds,Wk(mn,En,xn,Un,An,Ns),6);case 6:if(Ol(mn.h),mn.B)return Ds.return();En.Ga=An,Bn.next(),En.Ia=!1,En.Ee=!1,Os=mn.g.S.ib(),Ps=Os[En.type],JSON.stringify(Ps),En.Eb||mn.g.Ce(An.startTime,An.endTime,En.type),py(mn,En,0),ys(Ds,0);break;case 2:if(Xs=_s(Ds),Ol(mn.h,Xs),mn.B)return Ds.return();if(En.Ia=!1,Xs.code==7001)En.Ia=!1,pE(En),py(mn,En,0),Ds.D(0);else if(En.type==Mn.ba&&mn.i.ignoreTextStreamFailures)mn.j.delete(Mn.ba),Ds.D(0);else if(Xs.code==3017)IS(mn,En,Xs),Ds.D(0);else return En.Mc=!0,Xs.severity=2,Qn(Ds,Yk(mn,Xs),0)}})}function sC(mn,En,xn){var An,Mn,Un,Bn;return hs(function(Gn){if(Gn.g==1)return An=En.m,An.cryptoKey?Gn.D(2):Qn(Gn,An.fetchKey(),3);if(Mn=An.iv,!Mn)for(Mn=Ku(new ArrayBuffer(16)),Un=An.firstMediaSequenceNumber+xn.g,Bn=Mn.byteLength-1;0<=Bn;Bn--)Mn[Bn]=Un&255,Un>>=8;return Gn.return(pn.crypto.subtle.decrypt({name:"AES-CBC",iv:Mn},An.cryptoKey,mn))})}function fy(mn,En){var xn=new Uint8Array(mn.length+En.length);return xn.set(mn),xn.set(En,mn.length),xn}function IS(mn,En,xn){if(!Array.from(mn.j.values()).some(function(Mn){return Mn!=En&&Mn.Ee})){var An=Math.round(100*mn.C);if(20<An)mn.C-=.2;else if(4<An)mn.C-=.04;else{En.Mc=!0,mn.B=!0,mn.g.onError(xn);return}En.Ee=!0}py(mn,En,4)}function SI(mn,En,xn){var An,Mn,Un,Bn,Gn,Wn,ts,os;return hs(function(cs){return An=[],Mn=Math.max(0,xn.appendWindowStart-.1),Un=xn.appendWindowEnd+.01,Bn=xn.timestampOffset,(Bn!=En.se||Mn!=En.re||Un!=En.qe)&&(Gn=function(){var ls;return hs(function(gs){if(gs.g==1)return Ts(gs,2),En.re=Mn,En.qe=Un,En.se=Bn,Qn(gs,sI(mn.g.S,En.type,Bn,Mn,Un,mn.m.sequenceMode),4);if(gs.g!=2)return ys(gs,0);throw ls=_s(gs),En.re=null,En.qe=null,En.se=null,ls})},An.push(Gn())),!LM(xn.h,En.yd)&&(En.yd=xn.h)&&(Wn=n0(mn,En,xn.h),ts=function(){var ls,gs,ws,Ns;return hs(function(Os){switch(Os.g){case 1:return Ts(Os,2),Qn(Os,Wn,4);case 4:return ls=Os.h,Ol(mn.h),gs=new Nl,gs.box("moov",zl).box("trak",zl).box("mdia",zl).T("mdhd",function(Ps){Ps=Ox(Ps.reader||0,Ps.version||0),xn.h.timescale=Ps.timescale}).parse(ls),ws=En.stream.closedCaptions&&0<En.stream.closedCaptions.size,Qn(Os,mn.g.tf(En.type,ls),5);case 5:return Qn(Os,xS(mn.g.S,En.type,ls,null,ws),6);case 6:ys(Os,0);break;case 2:throw Ns=_s(Os),En.yd=null,Ns}})},mn.g.nh(xn.startTime,xn.h),An.push(ts())),os=En.Ga?En.Ga.j:null,mn.m.sequenceMode?(xn.j!=os||En.ye)&&(En.ye=!1,An.push(Fk(mn.g.S,En.type,xn.startTime))):xn.j!=os&&An.push(Fk(mn.g.S,En.type,xn.timestampOffset)),Qn(cs,Promise.all(An),0)})}function Wk(mn,En,xn,An,Mn,Un){var Bn,Gn,Wn,ts,os,cs;return hs(function(ls){switch(ls.g){case 1:return Bn=An.closedCaptions&&0<An.closedCaptions.size,Wn=An.emsgSchemeIdUris!=null&&0<An.emsgSchemeIdUris.length||mn.i.dispatchAllEmsgBoxes,ts=mn.i.parsePrftBox&&!mn.G,(Wn||ts)&&(Gn=new Nl),Wn&&Gn.T("emsg",function(gs){var ws=An.emsgSchemeIdUris;if(gs.version===0)var Ns=gs.reader.Vc(),Os=gs.reader.Vc(),Ps=gs.reader.N(),Xs=gs.reader.N(),Ds=gs.reader.N(),qs=gs.reader.N(),Qs=Mn.startTime+Xs/Ps;else Ps=gs.reader.N(),Qs=gs.reader.Cb()/Ps+Mn.timestampOffset,Xs=Qs-Mn.startTime,Ds=gs.reader.N(),qs=gs.reader.N(),Ns=gs.reader.Vc(),Os=gs.reader.Vc();gs=gs.reader.Bb(gs.reader.W.byteLength-gs.reader.ma()),(ws&&ws.includes(Ns)||mn.i.dispatchAllEmsgBoxes)&&(Ns=="urn:mpeg:dash:event:2012"?mn.g.oh():Ns=="https://aomedia.org/emsg/ID3"?(ws=Nk(gs),ws.length&&Mn&&mn.g.ph([{cueTime:Mn.startTime,data:gs,frames:ws,dts:Mn.startTime,pts:Mn.startTime}],0,Mn.endTime)):(ws=new Map().set("detail",{startTime:Qs,endTime:Qs+Ds/Ps,schemeIdUri:Ns,value:Os,timescale:Ps,presentationTimeDelta:Xs,eventDuration:Ds,id:qs,messageData:gs}),ws=new vu("emsg",ws),mn.g.onEvent(ws)))}),ts&&Gn.T("prft",function(gs){e:{if(!mn.G&&Mn.h.timescale){gs.reader.N();var ws=gs.reader.N(),Ns=gs.reader.N();if(ws=1e3*ws+Ns/Math.pow(2,32)*1e3,gs.version===0)var Os=gs.reader.N();else try{Os=gs.reader.Cb()}catch{mn.G=!0,Os=void 0;break e}gs=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+ws).getTime(),Os=new Map().set("detail",{wallClockTime:gs,programStartDate:new Date(gs-Os/Mn.h.timescale*1e3)}),Os=new vu("prft",Os),mn.g.onEvent(Os),mn.G=!0}Os=void 0}return Os}),(Wn||ts)&&Gn.parse(Un),Qn(ls,TI(mn,En,xn),2);case 2:return Ol(mn.h),os=En.Xc,En.Xc=!1,cs=En.pf,En.pf=!1,Qn(ls,mn.g.tf(En.type,Un),3);case 3:return Qn(ls,xS(mn.g.S,En.type,Un,Mn,Bn,os,cs),4);case 4:Ol(mn.h),ms(ls)}})}function TI(mn,En,xn){var An,Mn,Un,Bn;return hs(function(Gn){if(Gn.g==1)return An=Math.max(mn.i.bufferBehind,mn.m.presentationTimeline.g),Mn=aI(mn.g.S,En.type),Mn==null?Gn.return():(Un=xn-Mn,Bn=Un-An,.01>=Bn?Gn.return():Qn(Gn,mn.g.S.remove(En.type,Mn,Mn+Bn),2));Ol(mn.h),ms(Gn)})}function uC(mn){return mn&&mn.type==Vu&&(mn.stream.mimeType=="application/cea-608"||mn.stream.mimeType=="application/cea-708")}function n0(mn,En,xn,An){var Mn,Un,Bn,Gn,Wn;return hs(function(ts){return ts.g==1?(Mn=Pv,Un=g_(xn.Pa(),xn.Ta,xn.Ca,mn.i.retryParameters,An),Bn=En.stream,mn.g.modifySegmentRequest(Un,{type:Bn.type,init:xn instanceof Km,duration:xn.endTime-xn.startTime,mimeType:Bn.mimeType,codecs:Bn.codecs,bandwidth:Bn.bandwidth}),Gn=mn.g.Ob.request(Mn,Un),En.Ka=Gn,Qn(ts,Gn.promise,2)):(Wn=ts.h,En.Ka=null,ts.return(Wn.data))})}function lC(mn,En,xn,An){var Mn,Un;return hs(function(Bn){if(Bn.g==1)return En.Eb=!1,En.Pd=!1,En.qd=0,En.Cc=!0,En.Ga=null,En.yd=null,En.qa=null,An?(Mn=mn.g.vd(),Un=mn.g.S.getDuration(),Qn(Bn,mn.g.S.remove(En.type,Mn+An,Un),3)):Qn(Bn,sm(mn.g.S,En.type),4);if(Bn.g!=3)return Ol(mn.h),xn?Qn(Bn,mn.g.S.flush(En.type),3):Bn.D(3);Ol(mn.h),En.Cc=!1,En.endOfStream=!1,En.Ia||En.eb||py(mn,En,0),ms(Bn)})}function py(mn,En,xn){var An=En.type;(An!=Vu||mn.j.has(An))&&(En.eb=new mm(function(){var Mn;return hs(function(Un){if(Un.g==1)return Ts(Un,2),Qn(Un,iC(mn,En),4);if(Un.g!=2)return ys(Un,0);Mn=_s(Un),mn.g&&mn.g.onError(Mn),ms(Un)})}).R(xn))}function pE(mn){mn.eb!=null&&(mn.eb.stop(),mn.eb=null)}function cC(mn){return hs(function(En){return mn.Ka?Qn(En,mn.Ka.abort(),0):En.D(0)})}function Yk(mn,En){return hs(function(xn){if(xn.g==1)return Qn(xn,ox(mn.I),2);Ol(mn.h),mn.g.onError(En),En.handled||mn.i.failureCallback(En),ms(xn)})}function bm(mn,En){var xn=AE(),An=this;this.j=En,this.i=mn,this.l=xn,this.s=null,this.m=[],this.h=this.g=null,this.C=Promise.resolve().then(function(){return kI(An)}),this.B=new Ov(function(){return YM(An)})}bm.prototype.destroy=function(){return this.B.destroy()};function YM(mn){var En,xn,An;return hs(function(Mn){if(Mn.g==1)return mn.h&&mn.h.abort(),xm(mn),Qn(Mn,mn.C,2);for(mn.g&&mn.g.bb.Qb(),En=Dn(mn.m),xn=En.next();!xn.done;xn=En.next())An=xn.value,An.bb.Qb();mn.g=null,mn.m=[],mn.j=null,ms(Mn)})}function hE(mn,En){var xn={mc:function(){},Ed:function(){},Qb:function(){},onError:function(){},Gd:function(){},rj:function(){}};return mn.m.push({create:En,bb:xn}),mn.h&&mn.h.abort(),xm(mn),xn}function kI(mn){return hs(function(En){if(mn.B.g)En=En.D(0);else{if(mn.m.length==0||mn.g&&!mn.g.Jb)var xn=!1;else{mn.g&&(mn.g.bb.Qb(),mn.g=null),xn=mn.m.shift();var An=xn.create(mn.l);An?(xn.bb.mc(),mn.g={node:An.node,payload:An.payload,Jb:An.Jb,bb:xn.bb}):xn.bb.Gd(),xn=!0}xn?xn=Promise.resolve():mn.g?xn=Xk(mn):(mn.j.mh(mn.i),mn.s=new _l,xn=mn.s),En=Qn(En,xn,1)}return En})}function Xk(mn){var En,xn;return hs(function(An){switch(An.g){case 1:return mn.i=mn.j.Rg(mn.i,mn.l,mn.g.node,mn.g.payload),Ts(An,2),mn.h=mn.j.wg(mn.i,mn.l,mn.g.payload),Qn(An,mn.h.promise,4);case 4:mn.h=null,mn.i==mn.g.node&&(mn.g.bb.Ed(),mn.g=null),ys(An,0);break;case 2:return En=_s(An),En.code==7001?mn.g.bb.Qb():mn.g.bb.onError(En),mn.g=null,mn.h=null,xn=mn,Qn(An,mn.j.handleError(mn.l,En),5);case 5:xn.i=An.h,ms(An)}})}function xm(mn){mn.s&&(mn.s.resolve(),mn.s=null)}function $I(mn){var En=[],xn=700<=mn.fontWeight,An=mn.fontStyle=="italic",Mn=mn.textDecoration.includes("underline");return xn&&En.push("b"),An&&En.push("i"),Mn&&En.push("u"),xn=En.reduce(function(Un,Bn){return Un+"<"+Bn+">"},""),En=En.reduceRight(function(Un,Bn){return Un+"</"+Bn+">"},""),mn.lineBreak?`
`:mn.nestedCues.length?mn.nestedCues.map($I).join(""):xn+mn.payload+En}function Qk(mn,En){mn=Dn(mn);for(var xn=mn.next();!xn.done;xn=mn.next())if(xn=xn.value,xn.isContainer)Qk(xn.nestedCues,En);else{var An=xn.clone();An.nestedCues=[],An.payload=$I(xn),En.push(An)}return En}function rm(mn){this.g=null;for(var En=Dn(Array.from(mn.textTracks)),xn=En.next();!xn.done;xn=En.next())xn=xn.value,xn.mode="disabled",xn.label=="Shaka Player TextTrack"&&(this.g=xn);this.g||(this.g=mn.addTextTrack("subtitles","Shaka Player TextTrack")),this.g.mode="hidden"}Sn=rm.prototype,Sn.remove=function(mn,En){return this.g?(bI(this.g,function(xn){return xn.startTime<En&&xn.endTime>mn}),!0):!1},Sn.append=function(mn){var En=Qk(mn,[]),xn=[];mn=this.g.cues?Array.from(this.g.cues):[];var An={};En=Dn(En);for(var Mn=En.next();!Mn.done;An={Wb:An.Wb},Mn=En.next())An.Wb=Mn.value,mn.some(function(Un){return function(Bn){return Bn.startTime==Un.Wb.startTime&&Bn.endTime==Un.Wb.endTime&&Bn.text==Un.Wb.payload}}(An))||(Mn=XM(An.Wb))&&xn.push(Mn);for(mn=xn.slice().sort(function(Un,Bn){return Un.startTime!=Bn.startTime?Un.startTime-Bn.startTime:Un.endTime!=Bn.endTime?Un.endTime-Bn.startTime:"line"in VTTCue.prototype?xn.indexOf(Bn)-xn.indexOf(Un):xn.indexOf(Un)-xn.indexOf(Bn)}),mn=Dn(mn),An=mn.next();!An.done;An=mn.next())this.g.addCue(An.value)},Sn.destroy=function(){return this.g&&(bI(this.g,function(){return!0}),this.g.mode="disabled"),this.g=null,Promise.resolve()},Sn.isTextVisible=function(){return this.g.mode=="showing"},Sn.setTextVisibility=function(mn){this.g.mode=mn?"showing":"hidden"};function XM(mn){if(mn.startTime>=mn.endTime)return null;var En=new VTTCue(mn.startTime,mn.endTime,mn.payload);En.lineAlign=mn.lineAlign,En.positionAlign=mn.positionAlign,mn.size&&(En.size=mn.size);try{En.align=mn.textAlign}catch{}return mn.textAlign=="center"&&En.align!="center"&&(En.align="middle"),mn.writingMode=="vertical-lr"?En.vertical="lr":mn.writingMode=="vertical-rl"&&(En.vertical="rl"),mn.lineInterpretation==1&&(En.snapToLines=!1),mn.line!=null&&(En.line=mn.line),mn.position!=null&&(En.position=mn.position),En}function bI(mn,En){var xn=mn.mode;mn.mode=xn=="showing"?"showing":"hidden";for(var An=Dn(Array.from(mn.cues)),Mn=An.next();!Mn.done;Mn=An.next())(Mn=Mn.value)&&En(Mn)&&mn.removeCue(Mn);mn.mode=xn}Ys("shaka.text.SimpleTextDisplayer",rm),rm.prototype.setTextVisibility=rm.prototype.setTextVisibility,rm.prototype.isTextVisible=rm.prototype.isTextVisible,rm.prototype.destroy=rm.prototype.destroy,rm.prototype.append=rm.prototype.append,rm.prototype.remove=rm.prototype.remove;function Zk(){}function Au(mn){return document.createElement(mn)}function kp(){var mn=document.createElement("button");return mn.setAttribute("type","button"),mn}function i0(mn){for(;mn.firstChild;)mn.removeChild(mn.firstChild)}Ys("shaka.util.Dom",Zk),Zk.removeAllChildren=i0;function Cm(mn,En){var xn=this;this.j=!1,this.i=[],this.F=mn,this.m=En,this.g=Au("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.m.appendChild(this.g),this.C=new ku(function(){a0(xn)}).ha(.25),this.h=new Map,this.B=new xu,this.B.o(document,"fullscreenchange",function(){a0(xn,!0)}),this.l=null,"ResizeObserver"in pn&&(this.l=new ResizeObserver(function(){a0(xn,!0)}),this.l.observe(this.g)),this.s=new Map}Sn=Cm.prototype,Sn.append=function(mn){var En=[].concat(Kn(this.i)),xn={};mn=Dn(mn);for(var An=mn.next();!An.done;xn={dd:xn.dd},An=mn.next())xn.dd=An.value,En.some(function(Mn){return function(Un){return N_(Un,Mn.dd)}}(xn))||this.i.push(xn.dd);a0(this)},Sn.destroy=function(){this.m.removeChild(this.g),this.g=null,this.j=!1,this.i=[],this.C&&this.C.stop(),this.h.clear(),this.B&&(this.B.release(),this.B=null),this.l&&(this.l.disconnect(),this.l=null)},Sn.remove=function(mn,En){if(!this.g)return!1;var xn=this.i.length;return this.i=this.i.filter(function(An){return An.startTime<mn||An.endTime>=En}),a0(this,xn>this.i.length),!0},Sn.isTextVisible=function(){return this.j},Sn.setTextVisibility=function(mn){this.j=mn};function QM(mn,En){for(;En!=null;){if(En==mn.g)return!0;En=En.parentElement}return!1}function Jk(mn,En,xn,An,Mn){var Un=!1,Bn=[],Gn=[];En=Dn(En);for(var Wn=En.next();!Wn.done;Wn=En.next()){Wn=Wn.value,Mn.push(Wn);var ts=mn.h.get(Wn),os=Wn.startTime<=An&&Wn.endTime>An,cs=ts?ts.fg:null;ts&&(Bn.push(ts.je),ts.Wc&&Bn.push(ts.Wc),os||(Un=!0,mn.h.delete(Wn),ts=null)),os&&(Gn.push(Wn),ts?QM(mn,cs)||(Un=!0):(ZM(mn,Wn,Mn),ts=mn.h.get(Wn),cs=ts.fg,Un=!0)),0<Wn.nestedCues.length&&cs&&Jk(mn,Wn.nestedCues,cs,An,Mn),Mn.pop()}if(Un){for(An=Dn(Bn),Mn=An.next();!Mn.done;Mn=An.next())Mn=Mn.value,Mn.parentElement&&Mn.parentElement.removeChild(Mn);for(Gn.sort(function(ls,gs){return ls.startTime!=gs.startTime?ls.startTime-gs.startTime:ls.endTime-gs.endTime}),Gn=Dn(Gn),Wn=Gn.next();!Wn.done;Wn=Gn.next())An=mn.h.get(Wn.value),An.Wc?(xn.appendChild(An.Wc),An.Wc.appendChild(An.je)):xn.appendChild(An.je)}}function a0(mn,En){if(mn.g){var xn=mn.F.currentTime;if(!mn.j||En!==void 0&&En){En=Dn(mn.s.values());for(var An=En.next();!An.done;An=En.next())i0(An.value);i0(mn.g),mn.h.clear(),mn.s.clear()}if(mn.j){En=new Map,An=Dn(mn.h.keys());for(var Mn=An.next();!Mn.done;Mn=An.next())Mn=Mn.value,En.set(Mn,mn.h.get(Mn));Jk(mn,mn.i,mn.g,xn,[])}}}function ZM(mn,En,xn){var An=1<xn.length,Mn=An?"span":"div";En.lineBreak&&(Mn="br"),An=!An&&0<En.nestedCues.length;var Un=Au(Mn);if(Mn!="br"&&JM(mn,Un,En,xn,An),xn=null,En.region&&En.region.id)if(xn=En.region,Mn=xn.id+"_"+xn.width+"x"+xn.height+(xn.heightUnits==ap?"%":"px")+"-"+xn.viewportAnchorX+"x"+xn.viewportAnchorY+(xn.viewportAnchorUnits==ap?"%":"px"),mn.s.has(Mn))xn=mn.s.get(Mn);else{var Bn=Au("span"),Gn=xn.heightUnits==ap?"%":"px",Wn=xn.widthUnits==ap?"%":"px",ts=xn.viewportAnchorUnits==ap?"%":"px";Bn.id="shaka-text-region---"+Mn,Bn.classList.add("shaka-text-region"),Bn.style.height=xn.height+Gn,Bn.style.width=xn.width+Wn,Bn.style.position="absolute",Bn.style.top=xn.viewportAnchorY+ts,Bn.style.left=xn.viewportAnchorX+ts,Bn.style.display="flex",Bn.style.flexDirection="column",Bn.style.alignItems="center",Bn.style.justifyContent=En.displayAlign=="before"?"flex-start":En.displayAlign=="center"?"center":"flex-end",mn.s.set(Mn,Bn),xn=Bn}Mn=Un,An&&(Mn=Au("span"),Mn.classList.add("shaka-text-wrapper"),Mn.style.backgroundColor=En.backgroundColor,Mn.style.lineHeight="normal",Un.appendChild(Mn)),mn.h.set(En,{je:Un,fg:Mn,Wc:xn})}function JM(mn,En,xn,An,Mn){var Un=En.style,Bn=xn.nestedCues.length==0,Gn=1<An.length;Un.whiteSpace="pre-wrap";var Wn=xn.payload.replace(/\s+$/g,function(os){return" ".repeat(os.length)});if(Un.webkitTextStrokeColor=xn.textStrokeColor,Un.webkitTextStrokeWidth=xn.textStrokeWidth,Un.color=xn.color,Un.direction=xn.direction,Un.opacity=xn.opacity,Un.paddingLeft=dC(xn.linePadding,xn,mn.m),Un.paddingRight=dC(xn.linePadding,xn,mn.m),Un.textShadow=xn.textShadow,xn.backgroundImage)Un.backgroundImage="url('"+xn.backgroundImage+"')",Un.backgroundRepeat="no-repeat",Un.backgroundSize="contain",Un.backgroundPosition="center",Un.width="100%",Un.height="100%";else{if(xn.nestedCues.length)var ts=En;else ts=Au("span"),En.appendChild(ts);xn.border&&(ts.style.border=xn.border),Mn||((En=e1(An,function(os){return os.backgroundColor}))?ts.style.backgroundColor=En:Wn&&(ts.style.backgroundColor="rgba(0, 0, 0, 0.8)")),Wn&&(ts.textContent=Wn)}Gn&&!An[An.length-1].isContainer?Un.display="inline":(Un.display="flex",Un.flexDirection="column",Un.alignItems="center",Un.justifyContent=xn.displayAlign=="before"?"flex-start":xn.displayAlign=="center"?"center":"flex-end"),Bn||(Un.margin="0"),Un.fontFamily=xn.fontFamily,Un.fontWeight=xn.fontWeight.toString(),Un.fontStyle=xn.fontStyle,Un.letterSpacing=xn.letterSpacing,Un.fontSize=dC(xn.fontSize,xn,mn.m),xn.line!=null&&xn.lineInterpretation==1&&(Un.position="absolute",xn.writingMode==Yl?(Un.width="100%",xn.lineAlign==Ep?Un.top=xn.line+"%":xn.lineAlign=="end"&&(Un.bottom=100-xn.line+"%")):xn.writingMode=="vertical-lr"?(Un.height="100%",xn.lineAlign==Ep?Un.left=xn.line+"%":xn.lineAlign=="end"&&(Un.right=100-xn.line+"%")):(Un.height="100%",xn.lineAlign==Ep?Un.right=xn.line+"%":xn.lineAlign=="end"&&(Un.left=100-xn.line+"%"))),Un.lineHeight=xn.lineHeight,xn.position!=null&&(xn.writingMode==Yl?Un.paddingLeft=xn.position:Un.paddingTop=xn.position),xn.positionAlign=="line-left"?Un.cssFloat="left":xn.positionAlign=="line-right"&&(Un.cssFloat="right"),Un.textAlign=xn.textAlign,Un.textDecoration=xn.textDecoration.join(" "),Un.writingMode=xn.writingMode,"writingMode"in document.documentElement.style&&Un.writingMode==xn.writingMode||(Un.webkitWritingMode=xn.writingMode),xn.size&&(xn.writingMode==Yl?Un.width=xn.size+"%":Un.height=xn.size+"%")}function dC(mn,En,xn){var An=(An=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(mn))?{value:Number(An[1]),unit:An[2]}:null;if(!An)return mn;var Mn=An.value;switch(An.unit){case"%":return Mn/100*xn.clientHeight/En.cellResolution.rows+"px";case"c":return xn.clientHeight*Mn/En.cellResolution.rows+"px";default:return mn}}function e1(mn,En){for(var xn=mn.length-1;0<=xn;xn--){var An=En(mn[xn]);if(An||An===0)return An}return null}Ys("shaka.text.UITextDisplayer",Cm),Cm.prototype.setTextVisibility=Cm.prototype.setTextVisibility,Cm.prototype.isTextVisible=Cm.prototype.isTextVisible,Cm.prototype.remove=Cm.prototype.remove,Cm.prototype.destroy=Cm.prototype.destroy,Cm.prototype.append=Cm.prototype.append;function eR(mn,En){function xn(Un){for(var Bn=Un,Gn=Dn(En),Wn=Gn.next();!Wn.done;Wn=Gn.next())Wn=Wn.value,Wn.end&&Wn.start<Un&&(Bn+=Wn.end-Wn.start);return Un=Math.floor(Bn/3600),Gn=Math.floor(Bn/60%60),Wn=Math.floor(Bn%60),Bn=Math.floor(1e3*Bn%1e3),(10>Un?"0":"")+Un+":"+(10>Gn?"0":"")+Gn+":"+(10>Wn?"0":"")+Wn+"."+(100>Bn?10>Bn?"00":"0":"")+Bn}var An=Qk(mn,[]);mn=`WEBVTT

`,An=Dn(An);for(var Mn=An.next();!Mn.done;Mn=An.next())Mn=Mn.value,mn+=xn(Mn.startTime)+" --> "+xn(Mn.endTime)+function(Un){var Bn=[];switch(Un.textAlign){case"left":Bn.push("align:left");break;case"right":Bn.push("align:right");break;case Dp:Bn.push("align:middle");break;case"start":Bn.push("align:start");break;case"end":Bn.push("align:end")}switch(Un.writingMode){case"vertical-lr":Bn.push("vertical:lr");break;case"vertical-rl":Bn.push("vertical:rl")}return Bn.length?" "+Bn.join(" "):""}(Mn)+`
`,mn+=Mn.payload+`

`;return mn}Ys("shaka.text.WebVttGenerator",function(){});function fC(mn,En){this.h=mn,this.g=En,this.j="",this.s=void 0,this.i=!1,this.m=!0,this.l=!1}function pC(mn,En,xn){try{if(mn.g.enabled){var An={d:1e3*xn.duration,st:mn.h.U()?_E:vE};An.ot=tR(xn);var Mn=An.ot===yE||An.ot===OS||An.ot===wm||An.ot===RS;Mn&&(An.bl=mC(mn,xn.type)),xn.bandwidth&&(An.br=xn.bandwidth/1e3),Mn&&An.ot!==RS&&(An.tb=gC(mn,An.ot)/1e3),gE(mn,En,An)}}catch(Un){cp("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",Un)}}function hC(mn,En,xn){try{if(!mn.g.enabled)return En;var An=mE(mn);e:{switch(xn){case"video/webm":case"video/mp4":var Mn=wm;break e;case"application/x-mpegurl":Mn=r1;break e}Mn=void 0}An.ot=Mn,An.su=!0;var Un=t1(An);return PS(En,Un)}catch(Bn){return cp("CMCD_SRC_ERROR","Could not generate src CMCD data.",Bn),En}}function mE(mn){return mn.j||(mn.j=mn.g.sessionId||pn.crypto.randomUUID()),{v:1,sf:mn.s,sid:mn.j,cid:mn.g.contentId,mtp:mn.h.getBandwidthEstimate()/1e3}}function gE(mn,En,xn){xn=xn===void 0?{}:xn;var An=An===void 0?mn.g.useHeaders:An;if(mn.g.enabled){Object.assign(xn,mE(mn)),xn.pr=mn.h.xb();var Mn=xn.ot===yE||xn.ot===wm;if(mn.l&&Mn&&(xn.bs=!0,xn.su=!0,mn.l=!1),xn.su==null&&(xn.su=mn.m),An)mn=rR(xn),Object.keys(mn).length&&Object.assign(En.headers,mn);else{var Un=t1(xn);Un&&(En.uris=En.uris.map(function(Bn){return PS(Bn,Un)}))}}}function tR(mn){var En=mn.type;if(mn.init)return xI;if(En=="video")return mn.codecs.includes(",")?wm:yE;if(En=="audio")return OS;if(En=="text")return mn.mimeType==="application/mp4"?RS:o0}function mC(mn,En){if(En=mn.h.ib()[En],!En.length)return NaN;var xn=mn.h.getCurrentTime();return(mn=En.find(function(An){return An.start<=xn&&An.end>=xn}))?1e3*(mn.end-xn):NaN}function gC(mn,En){var xn=mn.h.Qa();if(!xn.length)return NaN;mn=xn[0],xn=Dn(xn);for(var An=xn.next();!An.done;An=xn.next())An=An.value,An.type==="variant"&&An.bandwidth>mn.bandwidth&&(mn=An);switch(En){case yE:return mn.videoBandwidth||NaN;case OS:return mn.audioBandwidth||NaN;default:return mn.bandwidth}}function t1(mn){function En(cs){return 100*xn(cs/100)}function xn(cs){return Math.round(cs)}function An(cs){return!Number.isNaN(cs)&&cs!=null&&cs!==""&&cs!==!1}var Mn=[],Un={br:xn,d:xn,bl:En,dl:En,mtp:En,nor:function(cs){return encodeURIComponent(cs)},rtp:En,tb:xn},Bn=Object.keys(mn||{}).sort();Bn=Dn(Bn);for(var Gn=Bn.next();!Gn.done;Gn=Bn.next()){Gn=Gn.value;var Wn=mn[Gn];if(An(Wn)&&(Gn!=="v"||Wn!==1)&&(Gn!="pr"||Wn!==1)){var ts=Un[Gn];ts&&(Wn=ts(Wn)),ts=typeof Wn;var os=void 0;os=ts==="string"&&Gn!=="ot"&&Gn!=="sf"&&Gn!=="st"?Gn+"="+JSON.stringify(Wn):ts==="boolean"?Gn:ts==="symbol"?Gn+"="+Wn.description:Gn+"="+Wn,Mn.push(os)}}return Mn.join(",")}function rR(mn){var En=Object.keys(mn),xn={},An=["Object","Request","Session","Status"],Mn=[{},{},{},{}],Un={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};En=Dn(En);for(var Bn=En.next();!Bn.done;Bn=En.next())Bn=Bn.value,Mn[Un[Bn]!=null?Un[Bn]:1][Bn]=mn[Bn];for(mn=0;mn<Mn.length;mn++)(Un=t1(Mn[mn]))&&(xn["CMCD-"+An[mn]]=Un);return xn}function PS(mn,En){return!En||mn.includes("offline:")?mn:(mn=new Iu(mn),mn.g.set("CMCD",En),mn.toString())}var r1="m",OS="a",yE="v",wm="av",xI="i",o0="c",RS="tt",vE="v",_E="l";Ys("shaka.util.CmcdManager.StreamingFormat",{DASH:"d",HLS:"h",Wi:"s",Gi:"o"});function yC(){}function NS(mn,En,xn,An,Mn){var Un=Mn in An,Bn=!0,Gn;for(Gn in En){var Wn=Mn+"."+Gn,ts=Un?An[Mn]:xn[Gn];Un||Gn in xn?En[Gn]===void 0?ts===void 0||Un?delete mn[Gn]:mn[Gn]=z_(ts):ts.constructor==Object&&En[Gn]&&En[Gn].constructor==Object?(mn[Gn]||(mn[Gn]=z_(ts)),Wn=NS(mn[Gn],En[Gn],ts,An,Wn),Bn=Bn&&Wn):typeof En[Gn]!=typeof ts||En[Gn]==null||typeof En[Gn]!="function"&&En[Gn].constructor!=ts.constructor?(fl("Invalid config, wrong type for "+Wn),Bn=!1):(typeof xn[Gn]=="function"&&xn[Gn].length!=En[Gn].length&&Tu("Unexpected number of arguments for "+Wn),mn[Gn]=En[Gn]):(fl("Invalid config, unrecognized key "+Wn),Bn=!1)}return Bn}function s0(mn,En){for(var xn={},An=xn,Mn=0,Un=0;Mn=mn.indexOf(".",Mn),!(0>Mn);)(Mn==0||mn[Mn-1]!="\\")&&(Un=mn.substring(Un,Mn).replace(/\\\./g,"."),An[Un]={},An=An[Un],Un=Mn+1),Mn+=1;return An[mn.substring(Un).replace(/\\\./g,".")]=En,xn}function DS(mn,En){return mn&&En}Ys("shaka.util.ConfigUtils",yC),yC.convertToConfigObject=s0,yC.mergeConfigObjects=NS;function Ky(){}function CI(mn){return mn=Bm(mn),new Iu(mn).ab}function u0(mn,En,xn){function An(Gn){Hp(Un).setUint32(Bn,Gn.byteLength,!0),Bn+=4,Un.set(Ku(Gn),Bn),Bn+=Gn.byteLength}if(!xn||!xn.byteLength)throw new zs(2,6,6015);var Mn;typeof En=="string"?Mn=r_(En,!0):Mn=En,mn=Bm(mn),mn=r_(mn,!0);var Un=new Uint8Array(12+mn.byteLength+Mn.byteLength+xn.byteLength),Bn=0;return An(mn),An(Mn),An(xn),Un}Ys("shaka.util.FairPlayUtils",Ky),Ky.commonFairPlayResponse=function(mn,En){if(mn===2){try{var xn=xl(En.data)}catch{return}mn=!1,xn=xn.trim(),xn.substr(0,5)==="<ckc>"&&xn.substr(-6)==="</ckc>"&&(xn=xn.slice(5,-6),mn=!0);try{var An=JSON.parse(xn);An.ckc&&(xn=An.ckc,mn=!0),An.CkcMessage&&(xn=An.CkcMessage,mn=!0),An.License&&(xn=An.License,mn=!0)}catch{}mn&&(En.data=fp(Lp(xn)))}},Ky.conaxFairPlayRequest=function(mn,En){mn===2&&(En.headers["Content-Type"]="application/octet-stream")},Ky.ezdrmFairPlayRequest=function(mn,En){mn===2&&(En.headers["Content-Type"]="application/octet-stream")},Ky.verimatrixFairPlayRequest=function(mn,En){mn===2&&(mn=Ku(En.body),mn=Ny(mn),En.headers["Content-Type"]="application/x-www-form-urlencoded",En.body=Kp("spc="+mn))},Ky.conaxInitDataTransform=function(mn,En,xn){if(En!=="skd")return mn;En=xn.serverCertificate,xn=Bm(mn).split("skd://").pop().split("?").shift(),xn=pn.atob(xn);var An=new ArrayBuffer(2*xn.length);An=new Uint16Array(An);for(var Mn=0,Un=xn.length;Mn<Un;Mn++)An[Mn]=xn.charCodeAt(Mn);return u0(mn,An,En)},Ky.ezdrmInitDataTransform=function(mn,En,xn){return En!=="skd"?mn:(En=xn.serverCertificate,xn=Bm(mn).split(";").pop(),u0(mn,xn,En))},Ky.verimatrixInitDataTransform=function(mn,En,xn){return En!=="skd"?mn:(En=xn.serverCertificate,xn=Bm(mn).split("skd://").pop(),u0(mn,xn,En))},Ky.initDataTransform=u0,Ky.defaultGetContentId=CI,Ky.isFairPlaySupported=function(){var mn;return hs(function(En){return En.g==1?(mn={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},Ts(En,2),Qn(En,navigator.requestMediaKeySystemAccess("com.apple.fps",[mn]),4)):En.g!=2?En.return(!0):(_s(En),En.return(!1))})};function n1(){}function nu(){var mn=1/0;navigator.connection&&navigator.connection.saveData&&(mn=360);var En={retryParameters:Iv(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:function(Bn,Gn,Wn){return Wn.keySystem=="com.apple.fps.1_0"&&Gn=="skd"&&(Gn=Wn.serverCertificate,Wn=CI(Bn),Bn=u0(Bn,Wn,Gn)),Bn},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:xv()},xn={retryParameters:Iv(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},manifestPreprocessor:function(Bn){return DS([Bn],Bn)},sequenceMode:!1},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3}},An={retryParameters:Iv(),failureCallback:function(Bn){return DS([Bn])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,durationBackoff:1,forceTransmux:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1};(wl("Web0S")||Fm()||wl("CrKey"))&&(An.stallSkip=0);var Mn={trackSelectionCallback:function(Bn){return hs(function(Gn){return Gn.return(Bn)})},downloadSizeCallback:function(Bn){var Gn;return hs(function(Wn){return Wn.g==1?navigator.storage&&navigator.storage.estimate?Qn(Wn,navigator.storage.estimate(),3):Wn.return(!0):(Gn=Wn.h,Wn.return(Gn.usage+Bn<.95*Gn.quota))})},progressCallback:function(Bn,Gn){return DS([Bn,Gn])},usePersistentLicense:!0,numberOfParallelDownloads:5},Un={drm:En,manifest:xn,streaming:An,mediaSource:{sourceBufferExtraFeatures:""},offline:Mn,abrFactory:function(){return new Pl},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:mn,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1},autoShowText:3,preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",useHeaders:!1},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1}};return Mn.trackSelectionCallback=function(Bn){return hs(function(Gn){return Gn.return(nR(Bn,Un.preferredAudioLanguage))})},Un}function Bv(mn,En,xn){var An={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:""}};return NS(mn,En,xn||nu(),An,"")}function nR(mn,En){var xn=mn.filter(function(Bn){return Bn.type=="variant"}),An=[],Mn=R0(En,xn.map(function(Bn){return Bn.language}));Mn&&(An=xn.filter(function(Bn){return ol(Bn.language)==Mn})),An.length==0&&(An=xn.filter(function(Bn){return Bn.primary})),An.length==0&&(xn.map(function(Bn){return Bn.language}),An=xn);var Un=An.filter(function(Bn){return Bn.height&&480>=Bn.height});for(Un.length&&(Un.sort(function(Bn,Gn){return Gn.height-Bn.height}),An=Un.filter(function(Bn){return Bn.height==Un[0].height})),En=[],An.length&&(xn=Math.floor(An.length/2),An.sort(function(Bn,Gn){return Bn.bandwidth-Gn.bandwidth}),En.push(An[xn])),mn=Dn(mn),An=mn.next();!An.done;An=mn.next())An=An.value,An.type!=Vu&&An.type!="image"||En.push(An);return En}Ys("shaka.util.PlayerConfiguration",n1),n1.mergeConfigObjects=Bv,n1.createDefault=nu;function op(){this.g=null,this.h=[]}function i1(mn,En){if(mn.g==null)mn.g={timestamp:Date.now()/1e3,state:En,duration:0};else{var xn=Date.now()/1e3;mn.g.duration=xn-mn.g.timestamp,mn.g.state!=En&&(mn.h.push(mn.g),mn.g={timestamp:xn,state:En,duration:0})}}function vC(mn,En){var xn=0;mn.g&&mn.g.state==En&&(xn+=mn.g.duration),mn=Dn(mn.h);for(var An=mn.next();!An.done;An=mn.next())An=An.value,xn+=An.state==En?An.duration:0;return xn}function wI(mn){function En(Un){return{timestamp:Un.timestamp,state:Un.state,duration:Un.duration}}for(var xn=[],An=Dn(mn.h),Mn=An.next();!Mn.done;Mn=An.next())xn.push(En(Mn.value));return mn.g&&xn.push(En(mn.g)),xn}function iR(){this.i=this.h=null,this.g=[]}function _C(mn,En,xn){mn.i!=En&&(mn.i=En,mn.g.push({timestamp:Date.now()/1e3,id:En.id,type:"text",fromAdaptation:xn,bandwidth:null}))}function AI(){this.C=this.F=this.I=this.G=this.B=this.j=this.H=this.m=this.i=this.O=this.P=this.J=this.K=this.M=this.l=this.s=NaN,this.g=new op,this.h=new iR}function iu(mn,En){Eu.call(this);var xn=this;this.l=VS,this.Bd=this.g=null,this.$=!1,this.Id=new xu,this.gb=new xu,this.C=new xu,this.fb=this.i=this.Kd=this.K=this.j=this.ka=this.M=this.lf=this.V=this.sa=this.O=this.Dd=this.J=this.Za=this.F=this.I=this.m=this.H=null,this.Nc=!1,this.$e=this.B=null,this.hf=1e9,this.h=Vv(this),this.Qc={width:1/0,height:1/0},this.s=null,this.La=new Uy(this.h.preferredAudioLanguage,this.h.preferredVariantRole,this.h.preferredAudioChannelCount),this.Xa=this.h.preferredTextLanguage,this.Kc=this.h.preferredTextRole,this.Ec=this.h.preferForcedSubs,this.ub=[],this.Rc=null,En&&En(this),this.H=UI(this),this.H.Ne(this.h.streaming.forceHTTPS),this.G=null,f0&&(this.G=f0()),this.Id.o(pn,"online",function(){xn.Fe()}),this.P={name:"detach"},this.X={name:"attach"},this.aa={name:"unload"},this.jf={name:"manifest-parser"},this.gf={name:"manifest"},this.Ya={name:"media-source"},this.df={name:"drm-engine"},this.Z={name:"load"},this.fe={name:"src-equals-drm-engine"},this.$a={name:"src-equals"};var An=new Map;An.set(this.X,function(Mn,Un){return iv(sR(xn,Mn,Un))}),An.set(this.P,function(Mn){return Mn.mediaElement&&(xn.gb.Rb(),Mn.mediaElement=null),xn.G&&xn.G.release(),xn.g=null,Mn=Promise.resolve(),iv(Mn)}),An.set(this.aa,function(Mn){return iv(EC(xn,Mn))}),An.set(this.Ya,function(Mn){return Mn=PI(xn,Mn),iv(Mn)}),An.set(this.jf,function(Mn,Un){return Mn=OI(xn,Mn,Un),iv(Mn)}),An.set(this.gf,function(Mn){return uR(xn,Mn)}),An.set(this.df,function(Mn){return Mn=MI(xn,Mn),iv(Mn)}),An.set(this.Z,function(Mn,Un){return iv(lR(xn,Mn,Un))}),An.set(this.fe,function(Mn,Un){return Mn=cR(xn,Mn,Un),iv(Mn)}),An.set(this.$a,function(Mn,Un){return dR(xn,Mn,Un)}),this.ua=new bm(this.P,{Rg:function(Mn,Un,Bn,Gn){var Wn=null;return Mn==xn.P&&(Wn=Bn==xn.P?xn.P:xn.X),Mn==xn.X&&(Wn=Bn==xn.P||Un.mediaElement!=Gn.mediaElement?xn.P:Bn==xn.X?xn.X:Bn==xn.Ya||Bn==xn.Z?xn.Ya:Bn==xn.$a?xn.fe:null),Mn==xn.Ya&&(Wn=Bn==xn.Z&&Un.mediaElement==Gn.mediaElement?xn.jf:xn.aa),Mn==xn.jf&&(Wn=wE(xn.Z,xn.gf,xn.aa,Bn,Un,Gn)),Mn==xn.gf&&(Wn=wE(xn.Z,xn.df,xn.aa,Bn,Un,Gn)),Mn==xn.df&&(Wn=wE(xn.Z,xn.Z,xn.aa,Bn,Un,Gn)),Mn==xn.fe&&(Wn=Bn==xn.$a&&Un.mediaElement==Gn.mediaElement?xn.$a:xn.aa),(Mn==xn.Z||Mn==xn.$a)&&(Wn=xn.aa),Mn==xn.aa&&(Wn=Gn.mediaElement&&Un.mediaElement==Gn.mediaElement?xn.X:xn.P),Wn},wg:function(Mn,Un,Bn){return xn.dispatchEvent(sp("onstatechange",new Map().set("state",Mn.name))),An.get(Mn)(Un,Bn)},handleError:function(Mn){return hs(function(Un){return Un.g==1?Qn(Un,EC(xn,Mn),2):Un.return(Mn.mediaElement?xn.X:xn.P)})},mh:function(Mn){xn.dispatchEvent(sp("onstateidle",new Map().set("state",Mn.name)))}}),this.kf=new ku(function(){JE(xn.i.variants,xn.h.restrictions,xn.Qc)&&f1(xn)}),mn&&this.Bc(mn,!0)}as(iu,Eu);function a1(mn){mn.M!=null&&(mn.M.release(),mn.M=null)}function aR(mn,En){if(En.lcevc.enabled){var xn=mn.Qa();xn&&xn[0]&&xn[0].videoMimeType==nl.ts&&(e_()||navigator.userAgent.match(/Edge\//))&&(En.streaming.forceTransmux||Tu("LCEVC Warning: For MPEG-2 TS decoding the config.streaming.forceTransmux must be enabled.")),a1(mn),mn.M==null&&(mn.M=new Uv(mn.g,mn.lf,En.lcevc),mn.I&&(mn.I.H=mn.M))}else a1(mn)}function sp(mn,En){return new vu(mn,En)}Sn=iu.prototype,Sn.destroy=function(){var mn=this,En;return hs(function(xn){switch(xn.g){case 1:return mn.l==zu?xn.return():(a1(mn),mn.l=zu,En=hE(mn.ua,function(){return{node:mn.P,payload:AE(),Jb:!1}}),Qn(xn,new Promise(function(An){En.mc=function(){},En.Ed=function(){An()},En.Qb=function(){An()},En.onError=function(){An()},En.Gd=function(){An()}}),2));case 2:return Qn(xn,mn.ua.destroy(),3);case 3:if(mn.Id&&(mn.Id.release(),mn.Id=null),mn.gb&&(mn.gb.release(),mn.gb=null),mn.C&&(mn.C.release(),mn.C=null),mn.$e=null,mn.h=null,mn.s=null,mn.Bd=null,mn.V=null,!mn.H){xn.D(4);break}return Qn(xn,mn.H.destroy(),5);case 5:mn.H=null;case 4:mn.B&&(mn.B.release(),mn.B=null),Eu.prototype.release.call(mn),ms(xn)}})};function II(){if(pn.Promise||Tu("A Promise implementation or polyfill is required"),!(pn.Promise&&pn.Uint8Array&&Array.prototype.forEach)||wl("Trident/"))return!1;var mn=N0();return mn&&13>mn||!(pn.MediaKeys&&pn.navigator&&pn.navigator.requestMediaKeySystemAccess&&pn.MediaKeySystemAccess&&pn.MediaKeySystemAccess.prototype.getConfiguration)?!1:Sp()?!0:oy("application/x-mpegurl")}Sn.Bc=function(mn,En){if(En=En===void 0?!0:En,this.l==zu)return Promise.reject(dv());var xn=AE();xn.mediaElement=mn,Sp()||(En=!1);var An=En?this.Ya:this.X;return mn=hE(this.ua,function(){return{node:An,payload:xn,Jb:!1}}),mn.mc=function(){},g1(mn)},Sn.qf=function(mn){this.lf=mn},Sn.detach=function(){var mn=this;if(this.l==zu)return Promise.reject(dv());var En=hE(this.ua,function(){return{node:mn.P,payload:AE(),Jb:!1}});return En.mc=function(){},g1(En)},Sn.bf=function(mn){var En=this;if(mn=mn===void 0?!0:mn,this.l==zu)return Promise.reject(dv());this.Nc=!1,Sp()||(mn=!1),a1(this);var xn=AE(),An=hE(this.ua,function(Mn){var Un=Mn.mediaElement&&mn?En.Ya:Mn.mediaElement?En.X:En.P;return xn.mediaElement=Mn.mediaElement,{node:Un,payload:xn,Jb:!1}});return An.mc=function(){},g1(An)},Sn.Oh=function(mn){this.Rc=mn},Sn.load=function(mn,En,xn){var An=this;if(this.Rc=null,this.Nc=!1,this.l==zu)return Promise.reject(dv());this.dispatchEvent(sp("loading"));var Mn=AE();Mn.uri=mn,Mn.Ue=Date.now()/1e3,xn&&(Mn.mimeType=xn),En!==void 0&&(Mn.startTime=En);var Un=oR(this,Mn)?this.$a:this.Z,Bn=hE(this.ua,function(Gn){return Gn.mediaElement==null?null:(Mn.mediaElement=Gn.mediaElement,{node:Un,payload:Mn,Jb:!0})});return this.s=new AI,this.V=pR(this),Bn.mc=function(){},new Promise(function(Gn,Wn){Bn.Gd=function(){return Wn(new zs(2,7,7002))},Bn.Ed=function(){Gn(),An.dispatchEvent(sp("loaded"))},Bn.Qb=function(){return Wn(dv())},Bn.onError=function(ts){return Wn(ts)}})};function oR(mn,En){if(!Sp())return!0;var xn=En.mimeType,An=En.uri||"";if(xn||(xn=c_(An),xn=nl[xn]),xn){if((En.mediaElement||RT()).canPlayType(xn)=="")return!1;if(!Sp()||!(xn in zm||c_(An)in d_)||(xn==="application/x-mpegurl"||xn==="application/vnd.apple.mpegurl")&&mn.h.streaming.preferNativeHls)return!0;if(rv())return mn.h.streaming.useNativeHlsOnSafari}return!1}function sR(mn,En,xn){return En.mediaElement==null&&(En.mediaElement=xn.mediaElement,mn.gb.o(En.mediaElement,"error",function(){var An=y_(mn);An&&qm(mn,An)})),mn.g=En.mediaElement,Promise.resolve()}function EC(mn,En){var xn,An,Mn,Un,Bn,Gn,Wn,ts,os;return hs(function(cs){switch(cs.g){case 1:return mn.l!=zu&&(mn.l=VS),xn=mn.ub.map(function(ls){return ls()}),mn.ub=[],Qn(cs,Promise.all(xn),2);case 2:if(mn.dispatchEvent(sp("unloading")),En.mimeType=null,En.startTime=null,En.uri=null,mn.sa&&(mn.sa.release(),mn.sa=null),En.mediaElement&&mn.C.Rb(),mn.kf.stop(),mn.Za&&(mn.Za.release(),mn.Za=null),mn.Dd&&(mn.Dd.stop(),mn.Dd=null),!mn.K){cs.D(3);break}return Qn(cs,mn.K.stop(),4);case 4:mn.K=null,mn.Kd=null;case 3:if(!mn.B){cs.D(5);break}return Qn(cs,mn.B.stop(),5);case 5:if(!mn.j){cs.D(7);break}return Qn(cs,mn.j.destroy(),8);case 8:mn.j=null;case 7:if(mn.J&&(mn.J.release(),mn.J=null),mn.F&&(mn.F.release(),mn.F=null),!mn.I){cs.D(9);break}return Qn(cs,mn.I.destroy(),10);case 10:mn.I=null;case 9:if(mn.G&&mn.G.onAssetUnload(),!En.mediaElement||!En.mediaElement.src){cs.D(11);break}return Qn(cs,new Promise(function(ls){return new ku(ls).R(.1)}),12);case 12:for(En.mediaElement.removeAttribute("src"),En.mediaElement.load();En.mediaElement.lastChild;)En.mediaElement.removeChild(En.mediaElement.firstChild);case 11:if(!mn.m){cs.D(13);break}return Qn(cs,mn.m.destroy(),14);case 14:mn.m=null;case 13:if(mn.fb=null,mn.O=null,mn.i){for(An=Dn(mn.i.variants),Mn=An.next();!Mn.done;Mn=An.next())for(Un=Mn.value,Bn=Dn([Un.audio,Un.video]),Gn=Bn.next();!Gn.done;Gn=Bn.next())(Wn=Gn.value)&&Wn.segmentIndex&&Wn.segmentIndex.release();for(ts=Dn(mn.i.textStreams),Gn=ts.next();!Gn.done;Gn=ts.next())os=Gn.value,os.segmentIndex&&os.segmentIndex.release()}mn.i=null,mn.s=new AI,mn.ef=null,d1(mn),ms(cs)}})}function PI(mn,En){var xn,An,Mn,Un,Bn;return hs(function(Gn){if(Gn.g==1)return xn=mn.h.textDisplayFactory,An=xn(),mn.ef=xn,Mn=SE(En.mediaElement,An,function(Wn,ts,os){NI(mn,Wn,ts,os)},mn.M),Mn.configure(mn.h.mediaSource),Un=mn.h.manifest,Bn=Un.segmentRelativeVttTiming,Mn.J=Bn,Qn(Gn,Mn.K,2);mn.I=Mn,ms(Gn)})}function OI(mn,En,xn){var An,Mn,Un,Bn;return hs(function(Gn){if(Gn.g==1)return En.mimeType=xn.mimeType,En.uri=xn.uri,An=En.uri,Mn=mn.H,mn.fb=An,Un=mn,Qn(Gn,VA(An,Mn,mn.h.manifest.retryParameters,En.mimeType),2);Un.Kd=Gn.h,mn.K=mn.Kd(),Bn=z_(mn.h.manifest),xn.mediaElement&&xn.mediaElement.nodeName==="AUDIO"&&(Bn.disableVideo=!0),mn.K.configure(Bn),ms(Gn)})}function uR(mn,En){var xn=En.uri;En=mn.H,mn.sa=new nC(function(){return mn.Ja()}),mn.sa.addEventListener("regionadd",function(Un){Un=Un.region,c0(mn,"timelineregionadded",Un),mn.G&&mn.G.onDashTimedMetadata(Un)}),mn.ka=null,mn.h.streaming.observeQualityChanges&&(mn.ka=new Fv(function(){return mn.ib()}),mn.ka.addEventListener("qualitychange",function(Un){var Bn=Un.quality;Un=Un.position,Bn=new Map().set("mediaQuality",{bandwidth:Bn.bandwidth,audioSamplingRate:Bn.audioSamplingRate,codecs:Bn.codecs,contentType:Bn.contentType,frameRate:Bn.frameRate,height:Bn.height,mimeType:Bn.mimeType,channelsCount:Bn.channelsCount,pixelAspectRatio:Bn.pixelAspectRatio,width:Bn.width}).set("position",Un),mn.dispatchEvent(sp("mediaqualitychanged",Bn))}));var An={networkingEngine:En,modifyManifestRequest:function(Un,Bn){var Gn=mn.V;try{Gn.g.enabled&&(Gn.s=Bn.format,gE(Gn,Un,{ot:r1,su:!Gn.i}))}catch(Wn){cp("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",Wn)}},modifySegmentRequest:function(Un,Bn){pC(mn.V,Un,Bn)},filter:function(Un){return bE(mn,Un)},makeTextStreamsForClosedCaptions:function(Un){return u1(mn,Un)},onTimelineRegionAdded:function(Un){var Bn=mn.sa;e:{for(var Gn=Dn(Bn.g),Wn=Gn.next();!Wn.done;Wn=Gn.next())if(Wn=Wn.value,Wn.schemeIdUri==Un.schemeIdUri&&Wn.id==Un.id&&Wn.startTime==Un.startTime&&Wn.endTime==Un.endTime){Gn=Wn;break e}Gn=null}Gn==null&&(Bn.g.add(Un),Un=new vu("regionadd",new Map([["region",Un]])),Bn.dispatchEvent(Un))},onEvent:function(Un){return mn.dispatchEvent(Un)},onError:function(Un){return qm(mn,Un)},isLowLatencyMode:function(){return mn.h.streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return mn.h.streaming.autoLowLatencyMode},enableLowLatencyMode:function(){mn.configure("streaming.lowLatencyMode",!0)},updateDuration:function(){mn.j&&mn.j.updateDuration()},newDrmInfo:function(Un){var Bn=mn.m?mn.m.g:null;Bn&&mn.m.C&&c1(mn,Bn.keySystem,Un)}},Mn=Date.now()/1e3;return new Al(function(){var Un,Bn,Gn,Wn;return hs(function(ts){if(ts.g==1)return Un=mn,Qn(ts,mn.K.start(xn,An),2);if(Un.i=ts.h,Bn=sp("manifestparsed"),mn.dispatchEvent(Bn),mn.i.variants.length==0)throw new zs(2,4,4036);LS(mn.i),Gn=Date.now()/1e3,Wn=Gn-Mn,mn.s.H=Wn,ms(ts)})}(),function(){return mn.K.stop()})}function MI(mn,En){var xn,An;return hs(function(Mn){return Mn.g==1?(xn=Date.now()/1e3,An=!0,mn.m=LI(mn,{Ob:mn.H,onError:function(Un){qm(mn,Un)},Fd:function(Un){p1(mn,Un)},onExpirationUpdated:function(Un,Bn){my(mn,Un,Bn)},onEvent:function(Un){mn.dispatchEvent(Un),Un.type=="drmsessionupdate"&&An&&(An=!1,mn.s.j=Date.now()/1e3-xn,mn.M&&(Un=mn.M,Un.g&&Un.h.classList.add("shaka-hidden")))}}),mn.m.configure(mn.h.drm),Qn(Mn,X0(mn.m,mn.i.variants,mn.i.offlineSessionIds),2)):Mn.g!=3?Qn(Mn,mn.m.Bc(En.mediaElement),3):Qn(Mn,bE(mn,mn.i),0)})}function lR(mn,En,xn){var An,Mn,Un,Bn,Gn,Wn,ts,os,cs,ls,gs,ws,Ns,Os,Ps,Xs,Ds;return hs(function(qs){switch(qs.g){case 1:for(En.startTime=xn.startTime,mn.Rc!=null&&(En.startTime=mn.Rc,mn.Rc=null),An=En.mediaElement,Mn=En.uri,mn.fb=Mn,mn.J=new e0({wd:function(){return An.playbackRate},td:function(){return An.defaultPlaybackRate},Pe:function(Qs){An.playbackRate=Qs},Of:function(Qs){An.currentTime+=Qs}}),Un=function(){return FS(mn)},Bn=function(){return jS(mn)},mn.C.o(An,"playing",Un),mn.C.o(An,"pause",Un),mn.C.o(An,"ended",Un),mn.C.o(An,"ratechange",Bn),aR(mn,mn.h),Gn=mn.h.abrFactory,mn.B&&mn.$e==Gn||(mn.$e=Gn,mn.B=Gn(),typeof mn.B.setMediaElement!="function"&&(nx("AbrManager","Please use an AbrManager with setMediaElement function."),mn.B.setMediaElement=function(){}),mn.B.configure(mn.h.abr)),mn.La=new Uy(mn.h.preferredAudioLanguage,mn.h.preferredVariantRole,mn.h.preferredAudioChannelCount),mn.Xa=mn.h.preferredTextLanguage,mn.Kc=mn.h.preferredTextRole,mn.Ec=mn.h.preferForcedSubs,h1(mn.i.presentationTimeline,mn.h.playRangeStart,mn.h.playRangeEnd),mn.B.init(function(Qs,tu,ou){mn.j&&Qs!=mn.j.l&&Gv(mn,Qs,!0,tu===void 0?!1:tu,ou===void 0?0:ou)}),mn.B.setMediaElement(An),Bl(mn.i,mn.h.preferredVideoCodecs,mn.h.preferredAudioCodecs,mn.h.preferredAudioChannelCount,mn.h.preferredDecodingAttributes),mn.j=FI(mn),mn.j.configure(mn.h.streaming),mn.l=Im,An.textTracks&&mn.C.o(An.textTracks,"addtrack",function(Qs){if(Qs.track)switch(Qs=Qs.track,Qs.kind){case"chapters":TC(mn,Qs)}}),mn.dispatchEvent(sp("streaming")),Wn=null,(ts=mn.j.l)||(Wn=f1(mn)),os=[],cs=ts||Wn,ls=Dn([cs.video,cs.audio]),gs=ls.next();!gs.done;gs=ls.next())(ws=gs.value)&&!ws.segmentIndex&&os.push(ws.createSegmentIndex());if(!(0<os.length)){qs.D(2);break}return Qn(qs,Promise.all(os),2);case 2:if(mn.F=kC(mn,En.startTime),mn.Za=jI(mn),Ns=Math.max(mn.i.minBufferTime,mn.h.streaming.rebufferingGoal),o1(mn,Ns),ts){qs.D(4);break}if(Gv(mn,Wn,!0,!1,0),!mn.h.streaming.startAtSegmentBoundary){qs.D(5);break}return Os=mn.F.kd(),Qn(qs,hy(Wn,Os),6);case 6:Ps=qs.h,mn.F.ie(Ps);case 5:xC(mn,null,B_(Wn));case 4:return mn.F.ge(),Xs=mn.yb().find(function(Qs){return Qs.active}),Xs||((Ds=rS(mn.i.textStreams,mn.Xa,mn.Kc,mn.Ec)[0]||null)&&_C(mn.s.h,Ds,!0),Wn&&(Ds?(Wn.audio&&zI(mn,Wn.audio,Ds)&&(mn.$=!0),mn.$&&mn.I.m.setTextVisibility(!0),l0(mn)):mn.$=!1),Ds&&(mn.h.streaming.alwaysStreamText||mn.Nb())&&Kk(mn.j,Ds)),Qn(qs,mn.j.start(),7);case 7:mn.h.abr.enabled&&(mn.B.enable(),wC(mn)),Y$(mn.j?mn.j.l:null,mn.i),Ym(mn.i),Wm(mn),xE(mn),mn.i.variants.some(function(Qs){return Qs.primary}),mn.Nc=!0,mn.C.ya(An,"loadedmetadata",function(){mn.s.m=Date.now()/1e3-xn.Ue}),ms(qs)}})}function cR(mn,En,xn){var An,Mn,Un,Bn,Gn,Wn,ts;return hs(function(os){return os.g==1?(An=Pu,Mn=Date.now()/1e3,Un=!0,mn.m=LI(mn,{Ob:mn.H,onError:function(cs){qm(mn,cs)},Fd:function(cs){p1(mn,cs)},onExpirationUpdated:function(cs,ls){my(mn,cs,ls)},onEvent:function(cs){mn.dispatchEvent(cs),cs.type=="drmsessionupdate"&&Un&&(Un=!1,mn.s.j=Date.now()/1e3-Mn)}}),mn.m.configure(mn.h.drm),Bn=xn.uri||"",Gn=c_(Bn),Wn=nl[Gn],Wn=="application/x-mpegurl"&&rv()&&(Wn="application/vnd.apple.mpegurl"),Wn||(Wn="video/mp4"),ts={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:xn.mimeType?xn.mimeType.split(";")[0]:Wn,codecs:xn.mimeType?As(xn.mimeType):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",label:null,type:An.Ma,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},mn.m.V=!0,Qn(os,X0(mn.m,[ts],[]),2)):Qn(os,mn.m.Bc(En.mediaElement),0)})}function dR(mn,En,xn){function An(){return FS(mn)}En.uri=xn.uri,En.startTime=xn.startTime,mn.fb=En.uri;var Mn=En.mediaElement;mn.F=new pI(Mn);var Un=!1;mn.ub.push(function(){Un=!0}),En.startTime!=null&&mn.F.ie(En.startTime),mn.J=new e0({wd:function(){return Mn.playbackRate},td:function(){return Mn.defaultPlaybackRate},Pe:function(Wn){Mn.playbackRate=Wn},Of:function(Wn){Mn.currentTime+=Wn}}),o1(mn,mn.h.streaming.rebufferingGoal),mn.C.o(Mn,"playing",An),mn.C.o(Mn,"pause",An),mn.C.o(Mn,"ended",An),mn.C.o(Mn,"ratechange",function(){return jS(mn)}),Mn.preload!="none"&&mn.C.ya(Mn,"loadedmetadata",function(){mn.s.m=Date.now()/1e3-xn.Ue}),Mn.audioTracks&&(mn.C.o(Mn.audioTracks,"addtrack",function(){return Wm(mn)}),mn.C.o(Mn.audioTracks,"removetrack",function(){return Wm(mn)}),mn.C.o(Mn.audioTracks,"change",function(){return Wm(mn)})),Mn.textTracks&&(mn.C.o(Mn.textTracks,"addtrack",function(Wn){if(Wn.track)switch(Wn=Wn.track,Wn.kind){case"metadata":fR(mn,Wn);break;case"chapters":TC(mn,Wn);break;default:Wm(mn)}}),mn.C.o(Mn.textTracks,"removetrack",function(){return Wm(mn)}),mn.C.o(Mn.textTracks,"change",function(){return Wm(mn)}));var Bn=c_(En.uri);Mn.src=hC(mn.V,En.uri,nl[Bn]),(Fm()||wl("Web0S"))&&Mn.load(),mn.l=Xm,mn.dispatchEvent(sp("streaming"));var Gn=new _l;return J_(Mn,HTMLMediaElement.HAVE_METADATA,mn.C,function(){mn.F.ge(),Gn.resolve()}),J_(Mn,HTMLMediaElement.HAVE_CURRENT_DATA,mn.C,function(){var Wn;return hs(function(ts){if(ts.g==1)return RI(mn),Wn=TE(mn),Wn.find(function(os){return os.mode!="disabled"})?(0<Wn.length&&(mn.$=!0),ts.D(2)):Qn(ts,new Promise(function(os){mn.C.ya(Mn.textTracks,"change",os),new ku(os).R(1)}),2);if(Un)return ts.return();SC(mn),ms(ts)})}),Mn.error?Gn.reject(y_(mn)):Mn.preload=="none"&&(Tu('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),Gn.resolve()),mn.C.ya(Mn,"error",function(){Gn.reject(y_(mn))}),new Al(Gn,function(){return Gn.reject(new zs(2,7,7001)),Promise.resolve()}).ia(function(){mn.Nc=!0})}function RI(mn){var En=mn.h.preferredAudioLanguage;if(En!=""){mn.Md(En);var xn=mn.h.preferredVariantRole;xn!=""&&mn.Md(En,xn)}}function SC(mn){var En=mn.h.preferredTextLanguage,xn=mn.h.preferForcedSubs;if(En!=""){mn.Ie(En,"",xn);var An=mn.h.preferredTextRole;An!=""&&mn.Ie(En,An,xn)}}function fR(mn,En){if(En.kind=="metadata"){En.mode="hidden",mn.C.o(En,"cuechange",function(){if(En.activeCues)for(var An=Dn(En.activeCues),Mn=An.next();!Mn.done;Mn=An.next())Mn=Mn.value,DI(mn,Mn.startTime,Mn.endTime,Mn.type,Mn.value),mn.G&&mn.G.onCueMetadataChange(Mn.value)});var xn=new ku(function(){var An=$C(mn);An=Dn(An);for(var Mn=An.next();!Mn.done;Mn=An.next())Mn.value.mode="hidden"}).Aa().R(.5);mn.ub.push(function(){xn.stop()})}}function NI(mn,En,xn,An){En=Dn(En);for(var Mn=En.next();!Mn.done;Mn=En.next())if(Mn=Mn.value,Mn.data&&Mn.cueTime&&Mn.frames){var Un=Mn.cueTime+xn,Bn=An;Bn&&Un>Bn&&(Bn=Un);for(var Gn=Dn(Mn.frames),Wn=Gn.next();!Wn.done;Wn=Gn.next())DI(mn,Un,Bn,"org.id3",Wn.value);mn.G&&mn.G.onHlsTimedMetadata(Mn,Un)}}function DI(mn,En,xn,An,Mn){En=new Map().set("startTime",En).set("endTime",xn).set("metadataType",An).set("payload",Mn),mn.dispatchEvent(sp("metadata",En))}function TC(mn,En){if(En&&En.kind=="chapters"){En.mode="hidden";var xn=new ku(function(){En.mode="hidden"}).Aa().R(.5);mn.ub.push(function(){xn.stop()})}}function LS(mn){function En(xn){return xn.video&&xn.audio||xn.video&&xn.video.codecs.includes(",")}mn.variants.some(En)&&(mn.variants=mn.variants.filter(En))}function LI(mn,En){return new Y0(En,mn.h.drm.updateExpirationTime)}function UI(mn){return new Cl(function(En,xn){mn.B&&mn.B.segmentDownloaded(En,xn)},function(En,xn,An){En=new Map().set("headers",En).set("request",xn).set("requestType",An),mn.dispatchEvent(sp("downloadheadersreceived",En))},function(En,xn,An,Mn){En=new Map().set("request",En).set("error",xn).set("httpResponseCode",An).set("aborted",Mn),mn.dispatchEvent(sp("downloadfailed",En))})}function kC(mn,En){return new Gk(mn.g,mn.i,mn.h.streaming,En,function(){mn.Za&&cE(mn.Za,!0),mn.j&&mn.j.Xc(),mn.O&&s1(mn)},function(xn){return mn.dispatchEvent(xn)})}function jI(mn){var En=new Hk(mn.sa);En.addEventListener("enter",function(An){c0(mn,"timelineregionenter",An.region)}),En.addEventListener("exit",function(An){c0(mn,"timelineregionexit",An.region)}),En.addEventListener("skip",function(An){var Mn=An.region;An.seeking||(c0(mn,"timelineregionenter",Mn),c0(mn,"timelineregionexit",Mn))});var xn=new h_(mn.g);return xn.g.add(En),mn.ka&&xn.g.add(mn.ka),xn}function o1(mn,En){mn.O=new Ju,mn.O.g=Av,ax(mn.O,En,Math.min(.5,En/2)),d1(mn),mn.Dd=new ku(function(){s1(mn)}).ha(.25)}function s1(mn){switch(mn.l){case Xm:if(mn.g.ended)var En=!0;else{var xn=aE(mn.g.buffered);En=xn!=null&&xn>=mn.g.duration-1}break;case Im:e:if(mn.g.ended||Ux(mn.I))En=!0;else{if(mn.i.presentationTimeline.U()){xn=mn.i.presentationTimeline.Ib();var An=aE(mn.g.buffered);if(An!=null&&An>=xn){En=!0;break e}}En=!1}break;default:En=!1}An=Rk(mn.g.buffered,mn.g.currentTime),xn=mn.O;var Mn=En,Un=xn.h.get(xn.g);En=xn.g,An=Mn||An>=Un?hl:Av,xn.g=An,En!=An&&d1(mn)}function SE(mn,En,xn,An){return new p_(mn,En,xn,An)}function pR(mn){return new fC({getBandwidthEstimate:function(){return mn.B?mn.B.getBandwidthEstimate():NaN},ib:function(){return mn.ib()},getCurrentTime:function(){return mn.g?mn.g.currentTime:0},Qa:function(){return mn.Qa()},xb:function(){return mn.xb()},U:function(){return mn.U()}},mn.h.cmcd)}function FI(mn){return new gI(mn.i,{vd:function(){return mn.F?mn.F.kd():0},getBandwidthEstimate:function(){return mn.B.getBandwidthEstimate()},modifySegmentRequest:function(En,xn){pC(mn.V,En,xn)},S:mn.I,Ob:mn.H,onError:function(En){return qm(mn,En)},onEvent:function(En){return mn.dispatchEvent(En)},oh:function(){mn.K&&mn.K.update&&mn.K.update()},Ce:function(En,xn,An){mn.F&&mn.F.Pf(),s1(mn),En=new Map().set("start",En).set("end",xn).set("contentType",An),mn.dispatchEvent(sp("segmentappended",En))},nh:function(En,xn){(xn=xn.we)&&mn.ka&&rC(mn.ka,xn,En)},tf:function(En,xn){var An=mn.m;if(An.h.parseInbandPsshEnabled&&["audio","video"].includes(En)){xn=new ov(Ku(xn));var Mn=0,Un=Dn(xn.data);for(En=Un.next();!En.done;En=Un.next())Mn+=En.value.length;if(Mn==0)An=Promise.resolve();else{for(Mn=new Uint8Array(Mn),Un=0,xn=Dn(xn.data),En=xn.next();!En.done;En=xn.next())En=En.value,Mn.set(En,Un),Un+=En.length;dS(An,"cenc",Mn),An=An.s}}else An=Promise.resolve();return An},ph:function(En,xn,An){NI(mn,En,xn,An)}})}Sn.configure=function(mn,En){arguments.length==2&&typeof mn=="string"&&(mn=s0(mn,En)),mn.streaming&&"forceTransmuxTS"in mn.streaming&&(nx("streaming.forceTransmuxTS configuration","Please Use streaming.forceTransmux instead."),mn.streaming.forceTransmux=mn.streaming.forceTransmuxTS,delete mn.streaming.forceTransmuxTS),mn.streaming&&mn.streaming.lowLatencyMode&&(mn.streaming.inaccurateManifestTolerance==null&&(mn.streaming.inaccurateManifestTolerance=0),mn.streaming.rebufferingGoal==null&&(mn.streaming.rebufferingGoal=.01));var xn=Bv(this.h,mn,Vv(this));return BI(this),xn};function BI(mn){if(mn.K){var En=z_(mn.h.manifest);mn.g&&mn.g.nodeName==="AUDIO"&&(En.disableVideo=!0),mn.K.configure(En)}if(mn.m&&mn.m.configure(mn.h.drm),mn.j){mn.j.configure(mn.h.streaming);try{GI(mn,mn.i)}catch(Un){qm(mn,Un)}mn.B&&xE(mn),En=mn.j.l,!En||En.allowedByApplication&&En.allowedByKeySystem||cv(mn)}if(mn.H&&mn.H.Ne(mn.h.streaming.forceHTTPS),mn.I&&(mn.I.configure(mn.h.mediaSource),mn.I.J=mn.h.manifest.segmentRelativeVttTiming,En=mn.h.textDisplayFactory,mn.ef!=En)){var xn=En(),An=mn.I,Mn=An.m;An.m=xn,Mn&&(xn.setTextVisibility(Mn.isTextVisible()),Mn.destroy()),An.g&&(An.g.j=xn),mn.ef=En,mn.j&&(En=mn.j,(xn=En.j.get(Vu))&&fE(En,xn.stream,!0,0,!0))}mn.B&&(mn.B.configure(mn.h.abr),mn.h.abr.enabled?mn.B.enable():mn.B.disable(),wC(mn)),mn.O&&(En=mn.h.streaming.rebufferingGoal,mn.i&&(En=Math.max(En,mn.i.minBufferTime)),ax(mn.O,En,Math.min(.5,En/2))),mn.i&&h1(mn.i.presentationTimeline,mn.h.playRangeStart,mn.h.playRangeEnd)}Sn.getConfiguration=function(){var mn=Vv(this);return Bv(mn,this.h,Vv(this)),mn},Sn.zg=function(){if(this.g){var mn=this.g.buffered.length;mn=mn?this.g.buffered.end(mn-1):0;var En=this.getConfiguration().streaming.bufferingGoal;if(En=Math.min(this.g.currentTime+En,this.Ja().end),mn>=En)return 1;if(!(mn<=this.g.currentTime)&&mn<En)return(mn-this.g.currentTime)/(En-this.g.currentTime)}return 0},Sn.Bh=function(){for(var mn in this.h)delete this.h[mn];Bv(this.h,Vv(this),Vv(this)),BI(this)},Sn.If=function(){return this.l},Sn.Qg=function(){return this.g},Sn.Hc=function(){return this.H},Sn.le=function(){return this.fb},Sn.sd=function(){return this.G?this.G:null},Sn.U=function(){return this.i?this.i.presentationTimeline.U():this.g&&this.g.src?this.g.duration==1/0:!1},Sn.Lb=function(){return this.i?this.i.presentationTimeline.Lb():!1},Sn.hc=function(){if(this.i){var mn=this.i.variants;return mn.length?!mn[0].video:!1}return this.g&&this.g.src?this.g.videoTracks?this.g.videoTracks.length==0:this.g.videoHeight==0:!1},Sn.Ja=function(){if(!this.Nc)return{start:0,end:0};if(this.i){var mn=this.i.presentationTimeline;return{start:mn.dc(),end:mn.jb()}}return this.g&&this.g.src&&(mn=this.g.seekable,mn.length)?{start:mn.start(0),end:mn.end(mn.length-1)}:{start:0,end:0}},Sn.bh=function(){this.U()&&(this.g.currentTime=this.Ja().end)},Sn.keySystem=function(){var mn=this.drmInfo();return mn?mn.keySystem:""},Sn.drmInfo=function(){return this.m?this.m.g:null},Sn.Gc=function(){return this.m?this.m.Gc():1/0},Sn.ud=function(){return this.m?this.m.ud():{}},Sn.Pc=function(){return this.O?this.O.g==Av:!1},Sn.xb=function(){return this.g?this.J?this.J.i:1:0},Sn.Ze=function(mn){mn==0?Tu("A trick play rate of 0 is unsupported!"):(this.g.paused&&this.g.play(),this.J.set(mn),this.l==Im&&(this.B.playbackRateChanged(mn),vI(this.j,1<Math.abs(mn))))},Sn.vf=function(){var mn=this.J.td();this.l==Xm&&this.J.set(mn),this.l==Im&&(this.J.set(mn),this.B.playbackRateChanged(mn),vI(this.j,!1))},Sn.Qa=function(){if(this.i){for(var mn=this.j?this.j.l:null,En=[],xn=0,An=Dn(this.i.variants),Mn=An.next();!Mn.done;Mn=An.next())if(Mn=Mn.value,V_(Mn)){var Un=B_(Mn);Un.active=Mn==mn,Un.active||xn==1||mn==null||Mn.video!=mn.video||Mn.audio!=mn.audio||(Un.active=!0),Un.active&&xn++,En.push(Un)}return En}return this.g&&this.g.audioTracks?Array.from(this.g.audioTracks).map(function(Bn){return jT(Bn)}):[]},Sn.yb=function(){if(this.i){for(var mn=this.j?this.j.s:null,En=[],xn=Dn(this.i.textStreams),An=xn.next();!An.done;An=xn.next()){An=An.value;var Mn=UT(An);Mn.active=An==mn,En.push(Mn)}return En}return this.g&&this.g.src&&this.g.textTracks?TE(this).map(function(Un){return tS(Un)}):[]},Sn.Ig=function(){return this.i?this.i.imageStreams.map(function(mn){return Z$(mn)}):[]},Sn.Yg=function(mn,En){var xn=this,An,Mn,Un,Bn,Gn,Wn,ts,os,cs,ls,gs,ws,Ns,Os,Ps,Xs,Ds,qs,Qs,tu;return hs(function(ou){return ou.g==1?xn.i?(An=xn.i.imageStreams.find(function(hu){return hu.id==mn}))?An.segmentIndex?ou.D(3):Qn(ou,An.createSegmentIndex(),3):ou.return(null):ou.D(2):ou.g!=2?(Mn=An.segmentIndex.find(En),Mn==null||(Un=An.segmentIndex.get(Mn),Bn=Un.tilesLayout||An.tilesLayout,Gn=/(\d+)x(\d+)/.exec(Bn),!Gn)?ou.return(null):(Wn=An.width||0,ts=An.height||0,os=parseInt(Gn[1],10),cs=parseInt(Gn[2],10),ls=Wn/os,gs=ts/cs,ws=os*cs,Ns=Un.l-Un.startTime,Os=Un.B||Ns/ws,Ps=Un.startTime,Ds=Xs=0,1<ws&&(qs=Math.floor((En-Un.startTime)/Os),Ps=Un.startTime+qs*Os,Xs=qs%os*ls,Ds=Math.floor(qs/os)*gs),Qs=!1,(tu=Un.s)&&(Qs=!0,gs=tu.height,Xs=tu.positionX,Ds=tu.positionY,ls=tu.width),ou.return({imageHeight:ts,imageWidth:Wn,height:gs,positionX:Xs,positionY:Ds,startTime:Ps,duration:Os,uris:Un.Pa(),width:ls,sprite:Qs}))):ou.return(null)})},Sn.Je=function(mn){if(this.i&&this.j){var En=this.i.textStreams.find(function(An){return An.id==mn.id});En&&En!=this.j.s&&(_C(this.s.h,En,!1),Kk(this.j,En),BS(this),this.Xa=En.language)}else if(this.g&&this.g.src&&this.g.textTracks){En=TE(this),En=Dn(En);for(var xn=En.next();!xn.done;xn=En.next())xn=xn.value,J$(xn)==mn.id?xn.mode=this.$?"showing":"hidden":xn.mode="disabled";BS(this)}},Sn.Ke=function(mn,En,xn){if(En=En===void 0?!1:En,xn=xn===void 0?0:xn,this.i&&this.j){this.h.abr.enabled&&Tu("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var An=this.i.variants.find(function(Mn){return Mn.id==mn.id});An&&V_(An)&&(Gv(this,An,!1,En,xn),this.La=new VT(An),xE(this))}else if(this.g&&this.g.audioTracks){for(En=Array.from(this.g.audioTracks),En=Dn(En),xn=En.next();!xn.done;xn=En.next())if(xn=xn.value,J$(xn)==mn.id){CE(this,xn);break}}},Sn.yg=function(){return m1(this.Qa())},Sn.Wg=function(){return m1(this.yb())},Sn.xg=function(){return Array.from(AC(this.Qa()))},Sn.Vg=function(){return Array.from(AC(this.yb()))},Sn.Md=function(mn,En,xn){if(xn=xn===void 0?0:xn,this.i&&this.F){this.La=new Uy(mn,En||"",xn,""),En=function(Gn,Wn){return Gn.video||Wn.video?Gn.video&&Wn.video?Math.abs((Gn.video.height||0)-(Wn.video.height||0))+Math.abs((Gn.video.width||0)-(Wn.video.width||0)):1/0:0},mn=this.j.l;var An=this.La.create(this.i.variants);xn=null,An=Dn(An.values());for(var Mn=An.next();!Mn.done;Mn=An.next())Mn=Mn.value,(!xn||En(xn,mn)>En(Mn,mn))&&(xn=Mn);xn?(En=B_(xn),this.Ke(En,!0)):cv(this)}else if(this.g&&this.g.audioTracks){Mn=Array.from(this.g.audioTracks),mn=ol(mn),An=xn=null,Mn=Dn(Mn);for(var Un=Mn.next();!Un.done;Un=Mn.next()){Un=Un.value;var Bn=jT(Un);ol(Bn.language)==mn&&(xn=Un,En?Bn.roles.includes(En)&&(An=Un):Bn.roles.length==0&&(An=Un))}An?CE(this,An):xn&&CE(this,xn)}},Sn.Ie=function(mn,En,xn){if(xn=xn===void 0?!1:xn,this.i&&this.F)this.Xa=mn,this.Kc=En||"",this.Ec=xn,(mn=rS(this.i.textStreams,this.Xa,this.Kc,this.Ec)[0]||null)&&mn!=this.j.s&&(_C(this.s.h,mn,!1),this.h.streaming.alwaysStreamText||this.Nb())&&(Kk(this.j,mn),BS(this));else{var An=ol(mn);(mn=this.yb().find(function(Mn){return ol(Mn.language)==An&&(!En||Mn.roles.includes(En))&&Mn.forced==xn}))&&this.Je(mn)}},Sn.Eh=function(mn){if(this.i&&this.F){for(var En=null,xn=Dn(this.i.variants),An=xn.next();!An.done;An=xn.next())if(An=An.value,An.audio.label==mn){En=An;break}En!=null&&(this.La=new Uy(En.language,"",0,mn),cv(this))}else if(this.g&&this.g.audioTracks){for(xn=Array.from(this.g.audioTracks),En=null,xn=Dn(xn),An=xn.next();!An.done;An=xn.next())An=An.value,An.label==mn&&(En=An);En&&CE(this,En)}},Sn.Nb=function(){var mn=this.$;return this.I?this.I.m.isTextVisible():this.g&&this.g.src&&this.g.textTracks?TE(this).some(function(En){return En.mode=="showing"}):mn},Sn.Gf=function(){return this.g&&this.g.src&&this.g.textTracks?VI(this).map(function(mn){return tS(mn)}):[]},Sn.Bg=function(mn){var En=ol(mn),xn=VI(this).filter(function(Gn){return ol(Gn.language)==En});if(!xn||!xn.length)return[];mn=[];var An=new Set;xn=Dn(xn);for(var Mn=xn.next();!Mn.done;Mn=xn.next())if((Mn=Mn.value)&&Mn.cues){Mn=Dn(Mn.cues);for(var Un=Mn.next();!Un.done;Un=Mn.next()){var Bn=Un.value;(Un=Bn.id)&&Un!=""||(Un=Bn.startTime+"-"+Bn.endTime+"-"+Bn.text),Bn={id:Un,title:Bn.text,startTime:Bn.startTime,endTime:Bn.endTime},An.has(Un)||(mn.push(Bn),An.add(Un))}}return mn};function TE(mn){return Array.from(mn.g.textTracks).filter(function(En){return En.kind!="metadata"&&En.kind!="chapters"&&En.label!="Shaka Player TextTrack"})}function $C(mn){return Array.from(mn.g.textTracks).filter(function(En){return En.kind=="metadata"})}function VI(mn){return Array.from(mn.g.textTracks).filter(function(En){return En.kind=="chapters"})}Sn.Se=function(mn){if(mn=!!mn,this.$!=mn){if(this.$=mn,this.l==Im)this.I.m.setTextVisibility(mn),this.h.streaming.alwaysStreamText||(mn?this.j.s||(mn=rS(this.i.textStreams,this.Xa,this.Kc,this.Ec),0<mn.length&&(Kk(this.j,mn[0]),BS(this))):yI(this.j));else if(this.g&&this.g.src&&this.g.textTracks){var En=TE(this);En=Dn(En);for(var xn=En.next();!xn.done;xn=En.next())xn=xn.value,xn.mode!="disabled"&&(xn.mode=mn?"showing":"hidden")}l0(this)}},Sn.Sg=function(){if(!this.U())return null;var mn=this.ua.l,En=0;if(this.F)En=this.F.kd();else if(mn){if(mn.startTime==null)return new Date;En=mn.startTime}return this.i?new Date(1e3*(this.i.presentationTimeline.i+En)):this.g&&this.g.getStartDate?(mn=this.g.getStartDate(),isNaN(mn.getTime())?null:new Date(mn.getTime()+1e3*En)):null},Sn.Jf=function(){if(!this.U())return null;if(this.i)return new Date(1e3*this.i.presentationTimeline.i);if(this.g&&this.g.getStartDate){var mn=this.g.getStartDate();return isNaN(mn.getTime())?null:mn}return null},Sn.ib=function(){if(this.l==Im)return this.I.ib();var mn={total:[],audio:[],video:[],text:[]};return this.l==Xm&&(mn.total=Lv(this.g.buffered)),mn},Sn.getStats=function(){if(this.l!=Im&&this.l!=Xm)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,switchHistory:[],stateHistory:[]};FS(this);var mn=this.g,En=mn.currentTime/mn.duration;if(!isNaN(En)){var xn=this.s;En=Math.round(100*En),xn.i=isNaN(xn.i)?En:Math.max(xn.i,En)}if(this.F&&(this.s.O=this.F.mf(),this.s.P=this.F.nf()),mn.getVideoPlaybackQuality){xn=mn.getVideoPlaybackQuality(),En=this.s;var An=Number(xn.totalVideoFrames);En.M=Number(xn.droppedVideoFrames),En.K=An,this.s.J=Number(xn.corruptedVideoFrames)}this.m?(xn=this.m,xn=xn.J?xn.J:NaN):xn=NaN,this.s.B=xn,this.l==Im&&((xn=this.j.l)&&(this.s.F=(this.J?this.J.i:1)*xn.bandwidth),xn&&xn.video&&(En=this.s,An=xn.video.height||NaN,En.s=xn.video.width||NaN,En.l=An),this.U()&&(xn=this.Jf().valueOf()+1e3*this.Ja().end,this.s.G=(Date.now()-xn)/1e3),this.i&&this.i.presentationTimeline&&(this.s.I=this.i.presentationTimeline.g),xn=this.B.getBandwidthEstimate(),this.s.C=xn),this.l==Xm&&(xn=this.s,En=mn.videoHeight||NaN,xn.s=mn.videoWidth||NaN,xn.l=En);var Mn=this.s;mn=Mn.s,xn=Mn.l,En=Mn.F,An=Mn.K;var Un=Mn.M,Bn=Mn.J,Gn=Mn.P,Wn=Mn.O,ts=Mn.C,os=Mn.i,cs=Mn.m,ls=Mn.H,gs=Mn.j,ws=vC(Mn.g,"playing"),Ns=vC(Mn.g,"paused"),Os=vC(Mn.g,"buffering"),Ps=Mn.B,Xs=Mn.G,Ds=Mn.I,qs=wI(Mn.g),Qs=[];Mn=Dn(Mn.h.g);for(var tu=Mn.next();!tu.done;tu=Mn.next())tu=tu.value,Qs.push({timestamp:tu.timestamp,id:tu.id,type:tu.type,fromAdaptation:tu.fromAdaptation,bandwidth:tu.bandwidth});return{width:mn,height:xn,streamBandwidth:En,decodedFrames:An,droppedFrames:Un,corruptedFrames:Bn,stallsDetected:Gn,gapsJumped:Wn,estimatedBandwidth:ts,completionPercent:os,loadLatency:cs,manifestTimeSeconds:ls,drmTimeSeconds:gs,playTime:ws,pauseTime:Ns,bufferingTime:Os,licenseTime:Ps,liveLatency:Xs,maxSegmentDuration:Ds,stateHistory:qs,switchHistory:Qs}},Sn.kg=function(mn,En,xn,An,Mn,Un,Bn){Bn=Bn===void 0?!1:Bn;var Gn=this,Wn,ts,os,cs,ls,gs,ws,Ns,Os,Ps,Xs;return hs(function(Ds){switch(Ds.g){case 1:if(Gn.l!=Im&&Gn.l!=Xm)throw new zs(1,7,7004);if(An){Ds.D(2);break}return Qn(Ds,US(Gn,mn),3);case 3:An=Ds.h;case 2:if(Wn=[],Gn.G)try{Wn=Gn.G.getServerSideCuePoints()}catch{}if(Gn.l!=Xm){Ds.D(4);break}return Bn&&(xn="forced"),Qn(Ds,bC(Gn,mn,En,xn,An,Un||"",Wn),5);case 5:if(ts=Gn.yb(),os=ts.find(function(qs){return qs.language==En&&qs.label==(Un||"")&&qs.kind==xn}))return Wm(Gn),Ds.return(os);throw new zs(1,2,2012);case 4:if(cs=Pu,ls=Gn.i.presentationTimeline.getDuration(),ls==1/0)throw new zs(1,4,4033);if(!Wn.length){Ds.D(6);break}return Qn(Ds,kE(Gn,mn,Gn.H,Gn.h.streaming.retryParameters),7);case 7:gs=Ds.h,ws=$E(Gn,gs,An,Wn),Ns=new Blob([ws],{type:"text/vtt"}),mn=CS(Ns),An="text/vtt";case 6:if(Os={id:Gn.hf++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:tC(0,ls,[mn]),mimeType:An||"",codecs:Mn||"",kind:xn,encrypted:!1,drmInfos:[],keyIds:new Set,language:En,label:Un||null,type:cs.ba,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!Bn,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},Ps=Vm(Os.mimeType,Os.codecs),Xs=$s(Ps),!Xs)throw new zs(2,2,2014,An);return Gn.i.textStreams.push(Os),Wm(Gn),Ds.return(UT(Os))}})},Sn.lg=function(mn,En){var xn=this,An,Mn,Un,Bn,Gn,Wn,ts,os,cs,ls,gs,ws,Ns,Os,Ps,Xs;return hs(function(Ds){switch(Ds.g){case 1:if(xn.l!=Im&&xn.l!=Xm)throw new zs(1,7,7004);if(xn.l==Xm)throw new zs(1,2,2016);if(En){Ds.D(2);break}return Qn(Ds,US(xn,mn),3);case 3:En=Ds.h;case 2:if(En!="text/vtt")throw new zs(1,2,2017,mn);if(An=Pu,Mn=xn.i.presentationTimeline.getDuration(),Mn==1/0)throw new zs(1,4,4045);return Qn(Ds,kE(xn,mn,xn.H,xn.h.streaming.retryParameters),4);case 4:if(Un=Ds.h,Bn=Ll[En],!Bn)throw new zs(2,2,2014,En);for(Gn=Bn(),Wn={periodStart:0,segmentStart:0,segmentEnd:Mn,vttOffset:0},ts=Ku(Un),os=Gn.parseMedia(ts,Wn),cs=[],ls={},gs=Dn(os),ws=gs.next();!ws.done;ls={uc:ls.uc},ws=gs.next())Ns=ws.value,ls.uc=Zp([mn],[Ns.payload])[0],Os=new rl(Ns.startTime,Ns.endTime,function(qs){return function(){return[qs.uc]}}(ls),0,null,null,0,0,1/0),ls.uc.includes("#xywh")&&(Ps=ls.uc.split("#xywh=")[1].split(","),Ps.length===4&&Os.Zf({height:parseInt(Ps[3],10),positionX:parseInt(Ps[0],10),positionY:parseInt(Ps[1],10),width:parseInt(Ps[2],10)})),cs.push(Os);return Xs={id:xn.hf++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new vl(cs),mimeType:En||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",label:null,type:An.Ac,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1"},xn.i.imageStreams.push(Xs),Wm(xn),Ds.return(Z$(Xs))}})},Sn.jg=function(mn,En,xn){var An=this,Mn,Un,Bn,Gn;return hs(function(Wn){switch(Wn.g){case 1:if(An.l!=Im&&An.l!=Xm)throw new zs(1,7,7004);if(xn){Wn.D(2);break}return Qn(Wn,US(An,mn),3);case 3:xn=Wn.h;case 2:if(Mn=[],An.G)try{Mn=An.G.getServerSideCuePoints()}catch{}return Qn(Wn,bC(An,mn,En,"chapters",xn,"",Mn),4);case 4:if(Un=Wn.h,Bn=An.Gf(),Gn=Bn.find(function(ts){return ts.language==En}),!Gn){Wn.D(5);break}return Qn(Wn,new Promise(function(ts,os){An.C.ya(Un,"load",ts),An.C.ya(Un,"error",function(){os(new zs(1,2,2015))})}),6);case 6:return Wn.return(Gn);case 5:throw new zs(1,2,2012)}})};function US(mn,En){var xn,An;return hs(function(Mn){switch(Mn.g){case 1:return xn=c_(En),(An=v1[xn])?Mn.return(An):(Ts(Mn,2),Qn(Mn,yx(En,mn.H,mn.h.streaming.retryParameters),4));case 4:An=Mn.h,ys(Mn,3);break;case 2:_s(Mn);case 3:if(An)return Mn.return(An);throw new zs(1,2,2011,xn)}})}function bC(mn,En,xn,An,Mn,Un,Bn){var Gn,Wn,ts,os;return hs(function(cs){if(cs.g==1)return Mn!="text/vtt"||Bn.length?Qn(cs,kE(mn,En,mn.H,mn.h.streaming.retryParameters),3):cs.D(2);cs.g!=2&&(Gn=cs.h,Wn=$E(mn,Gn,Mn,Bn),ts=new Blob([Wn],{type:"text/vtt"}),En=CS(ts),Mn="text/vtt"),os=document.createElement("track");var ls=mn.V,gs=En;try{if(ls.g.enabled){var ws=mE(ls);ws.ot=o0,ws.su=!0;var Ns=t1(ws),Os=PS(gs,Ns)}else Os=gs}catch(Ps){cp("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",Ps),Os=gs}return os.src=Os,os.label=Un,os.kind=An,os.srclang=xn,mn.g.getAttribute("crossorigin")||mn.g.setAttribute("crossorigin","anonymous"),mn.g.appendChild(os),cs.return(os)})}function kE(mn,En,xn,An){var Mn,Un,Bn;return hs(function(Gn){if(Gn.g==1){Mn=Pv,Un=ll([En],An),Un.method="GET";var Wn=mn.V;try{Wn.g.enabled&&gE(Wn,Un,{ot:o0,su:!0})}catch(ts){cp("CMCD_TEXT_ERROR","Could not generate text CMCD data.",ts)}return Qn(Gn,xn.request(Mn,Un).promise,2)}return Bn=Gn.h,Gn.return(Bn.data)})}function $E(mn,En,xn,An){var Mn=Ll[xn];if(Mn)return xn=Mn(),mn={periodStart:0,segmentStart:0,segmentEnd:mn.g.duration,vttOffset:0},En=Ku(En),En=xn.parseMedia(En,mn),eR(En,An);throw new zs(2,2,2014,xn)}Sn.Oe=function(mn,En){this.Qc.width=mn,this.Qc.height=En},Sn.Fe=function(mn){if(this.l==Im){var En=this.j;if(mn=mn===void 0?.1:mn,En.h.g)En=!1;else if(En.B)En=!1;else{for(var xn=Dn(En.j.values()),An=xn.next();!An.done;An=xn.next())An=An.value,!An.Mc||An.Ia||An.eb||(An.Mc=!1,py(En,An,mn));En=!0}}else En=!1;return En},Sn.Ng=function(){return Tu("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},Sn.Og=function(){return this.Kd};function Vv(mn){var En=nu();return En.streaming.failureCallback=function(xn){if(mn.U()){var An=null;xn.code==1001||xn.code==1002?An=1:xn.code==1003&&(An=.1),An!=null&&(xn.severity=1,mn.Fe(An))}},En.textDisplayFactory=function(){return mn.Bd?new Cm(mn.g,mn.Bd):new rm(mn.g)},En}Sn.Te=function(mn){this.Bd=mn};function u1(mn,En){for(var xn=new Set,An=Dn(En.textStreams),Mn=An.next();!Mn.done;Mn=An.next())Mn=Mn.value,Mn.mimeType!="application/cea-608"&&Mn.mimeType!="application/cea-708"||xn.add(Mn.originalId);for(An=Dn(En.variants),Mn=An.next();!Mn.done;Mn=An.next())if((Mn=Mn.value.video)&&Mn.closedCaptions){for(var Un=Dn(Mn.closedCaptions.keys()),Bn=Un.next();!Bn.done;Bn=Un.next())if(Bn=Bn.value,!xn.has(Bn)){var Gn=Bn.startsWith("CC")?"application/cea-608":"application/cea-708",Wn=new ip;Gn={id:mn.hf++,originalId:Bn,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Wn,mimeType:Gn,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:Mn.closedCaptions.get(Bn),label:null,type:Vu,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:Mn.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},En.textStreams.push(Gn),xn.add(Bn)}}}function bE(mn,En){return hs(function(xn){if(xn.g==1)return Qn(xn,l1(mn,En),2);GI(mn,En),ms(xn)})}function l1(mn,En){var xn;return hs(function(An){if(An.g==1)return xn=mn.j?mn.j.l:null,Qn(An,W$(xn,En),2);Ym(En),ms(An)})}function GI(mn,En){if(mn.l!=zu){JE(En.variants,mn.h.restrictions,mn.Qc)&&mn.j&&Wm(mn);var xn=mn.m?mn.m.g:null;if(xn&&mn.m.C)for(var An=Dn(En.variants),Mn=An.next();!Mn.done;Mn=An.next())Mn=Mn.value,c1(mn,xn.keySystem,Mn.video),c1(mn,xn.keySystem,Mn.audio);Am(mn,En)}}function c1(mn,En,xn){if(xn){xn=Dn(xn.drmInfos);for(var An=xn.next();!An.done;An=xn.next())if(An=An.value,An.keySystem==En){An=Dn(An.initData||[]);for(var Mn=An.next();!Mn.done;Mn=An.next())Mn=Mn.value,dS(mn.m,Mn.initDataType,Mn.initData)}}}function hy(mn,En){var xn,An,Mn,Un,Bn;return hs(function(Gn){return Gn.g==1?(xn=mn.audio,An=mn.video,Mn=function(Wn,ts){var os,cs,ls;return hs(function(gs){return gs.g==1?Wn?Qn(gs,Wn.createSegmentIndex(),2):gs.return(null):(cs=(os=Wn.segmentIndex.bc(ts))?os.next().value:null,cs?(ls=cs.startTime,gs.return(ls)):gs.return(null))})},Qn(Gn,Mn(xn,En),2)):Gn.g!=3?(Un=Gn.h,Qn(Gn,Mn(An,En),3)):(Bn=Gn.h,Bn!=null&&Un!=null?Gn.return(Math.max(Bn,Un)):Bn!=null?Gn.return(Bn):Un!=null?Gn.return(Un):Gn.return(En))})}function d1(mn){var En=mn.Pc();if(mn.s&&mn.O&&mn.F){var xn=mn.J;xn.j=En,wS(xn),mn.V&&(xn=mn.V,En||xn.i||(xn.i=!0),xn.i&&En&&(xn.l=!0),xn.m=En),FS(mn)}En=new Map().set("buffering",En),mn.dispatchEvent(sp("buffering",En))}function jS(mn){var En=mn.g.playbackRate;En!=0&&(mn.J&&mn.J.set(En),En=sp("ratechange"),mn.dispatchEvent(En))}function FS(mn){if(mn.s&&mn.O){var En=mn.s.g;mn.O.g==Av?i1(En,"buffering"):mn.g.paused?i1(En,"paused"):mn.g.ended?i1(En,"ended"):i1(En,"playing")}}function xE(mn){try{Am(mn,mn.i)}catch(xn){return qm(mn,xn),!1}var En=mn.i.variants.filter(function(xn){return V_(xn)});return En=mn.La.create(En),mn.B.setVariants(Array.from(En.values())),!0}function f1(mn){return xE(mn)?mn.B.chooseVariant():null}function cv(mn){var En=f1(mn);En&&Gv(mn,En,!0,!0,0)}function Gv(mn,En,xn,An,Mn){var Un=mn.j.l;if(En==Un)An&&_I(mn.j,En,An,Mn,!0);else{var Bn=mn.s.h;Bn.h!=En&&(Bn.h=En,Bn.g.push({timestamp:Date.now()/1e3,id:En.id,type:"variant",fromAdaptation:xn,bandwidth:En.bandwidth})),_I(mn.j,En,An,Mn,void 0,xn),An=null,Un&&(An=B_(Un)),En=B_(En),xn?xC(mn,An,En):CC(mn,An,En)}}function CE(mn,En){var xn=Array.from(mn.g.audioTracks).find(function(An){return An.enabled});En.enabled=!0,En.id!==xn.id&&(xn.enabled=!1),xn=jT(xn),En=jT(En),CC(mn,xn,En)}function zI(mn,En,xn){if(mn.h.autoShowText==0)return!1;if(mn.h.autoShowText==1)return!0;var An=ol(mn.h.preferredTextLanguage);return xn=ol(xn.language),mn.h.autoShowText==2?Bs(xn,An):mn.h.autoShowText==3?(mn=ol(En.language),Bs(xn,An)&&!Bs(mn,xn)):(Tu("Invalid autoShowText setting!"),!1)}function xC(mn,En,xn){En=new Map().set("oldTrack",En).set("newTrack",xn),mn.M&&Lx(mn.M,xn),xn=sp("adaptation",En),d0(mn,xn)}function Wm(mn){var En=sp("trackschanged");d0(mn,En)}function CC(mn,En,xn){En=new Map().set("oldTrack",En).set("newTrack",xn),mn.M&&Lx(mn.M,xn),xn=sp("variantchanged",En),d0(mn,xn)}function BS(mn){var En=sp("textchanged");d0(mn,En)}function l0(mn){var En=sp("texttrackvisibility");d0(mn,En)}function wC(mn){var En=new Map().set("newStatus",mn.h.abr.enabled);d0(mn,sp("abrstatuschanged",En))}function HI(mn,En){if(En.code!=1002&&En.code!=1011||En.category!=1||!navigator.onLine)return!1;var xn=mn.h.streaming.maxDisabledTime;if(xn==0)if(En.code==1011)xn=1;else return!1;En=mn.Qa().find(function(Bn){return Bn.active});for(var An=mn.i,Mn=Dn(An.variants),Un=Mn.next();!Un.done;Un=Mn.next())Un=Un.value,Un.id===En.id&&(Un.disabledUntilTime=Date.now()/1e3+xn);return JE(An.variants,mn.h.restrictions,mn.Qc),En=f1(mn),En?(An=mn.ib().video.reduce(function(Bn,Gn){return Bn+Gn.end-Gn.start},0),Gv(mn,En,!1,!0,An),mn.kf.R(xn),!0):!1}function qm(mn,En){if(mn.l!=zu)if(HI(mn,En))En.handled=!0;else{var xn=sp("error",new Map().set("detail",En));mn.dispatchEvent(xn),xn.defaultPrevented&&(En.handled=!0)}}function c0(mn,En,xn){xn=new Map().set("detail",{schemeIdUri:xn.schemeIdUri,value:xn.value,startTime:xn.startTime,endTime:xn.endTime,id:xn.id,eventElement:xn.eventElement}),mn.dispatchEvent(sp(En,xn))}function y_(mn){if(!mn.g.error)return null;var En=mn.g.error.code;if(En==1)return null;var xn=mn.g.error.msExtendedCode;return xn&&(0>xn&&(xn+=Math.pow(2,32)),xn=xn.toString(16)),new zs(2,3,3016,En,xn,mn.g.error.message)}function p1(mn,En){if(mn.j){var xn=Object.keys(En),An=xn.length==1&&xn[0]=="00",Mn=!1;if(xn.length){xn=Dn(mn.i.variants);for(var Un=xn.next();!Un.done;Un=xn.next()){Un=Un.value;var Bn=[];Un.audio&&Bn.push(Un.audio),Un.video&&Bn.push(Un.video),Bn=Dn(Bn);for(var Gn=Bn.next();!Gn.done;Gn=Bn.next()){var Wn=Gn.value;if(Gn=Un.allowedByKeySystem,Wn.keyIds.size){Un.allowedByKeySystem=!0,Wn=Dn(Wn.keyIds);for(var ts=Wn.next();!ts.done;ts=Wn.next())ts=ts.value,ts=En[An?"00":ts],Un.allowedByKeySystem=Un.allowedByKeySystem&&!!ts&&!KI.includes(ts)}Gn!=Un.allowedByKeySystem&&(Mn=!0)}}}(!Mn||xE(mn))&&((En=mn.j.l)&&!En.allowedByKeySystem&&cv(mn),Mn&&Wm(mn))}}function my(mn,En,xn){mn.K&&mn.K.onExpirationUpdated&&mn.K.onExpirationUpdated(En,xn),En=sp("expirationupdated"),mn.dispatchEvent(En)}function h1(mn,En,xn){0<En&&(mn.U()||mn.$f(En)),En=mn.getDuration(),xn<En&&(mn.U()||mn.Sa(xn))}function Am(mn,En){mn=mn.m?mn.m.ud():{};var xn=Object.keys(mn);xn=xn.length&&xn[0]=="00";var An=!1,Mn=!1,Un=new Set,Bn=new Set;En=Dn(En.variants);for(var Gn=En.next();!Gn.done;Gn=En.next()){Gn=Gn.value;var Wn=[];Gn.audio&&Wn.push(Gn.audio),Gn.video&&Wn.push(Gn.video),Wn=Dn(Wn);for(var ts=Wn.next();!ts.done;ts=Wn.next())if(ts=ts.value,ts.keyIds.size){ts=Dn(ts.keyIds);for(var os=ts.next();!os.done;os=ts.next()){os=os.value;var cs=mn[xn?"00":os];cs?KI.includes(cs)&&Bn.add(cs):Un.add(os)}}Gn.allowedByApplication?Gn.allowedByKeySystem&&(An=!0):Mn=!0}if(!An)throw mn={hasAppRestrictions:Mn,missingKeys:Array.from(Un),restrictedKeyStatuses:Array.from(Bn)},new zs(2,4,4012,mn)}function Ym(mn){if(!mn.variants.some(V_))throw new zs(2,4,4032)}function d0(mn,En){hs(function(xn){if(xn.g==1)return Qn(xn,Promise.resolve(),2);mn.l!=zu&&mn.dispatchEvent(En),ms(xn)})}function AC(mn){var En=new Set;mn=Dn(mn);for(var xn=mn.next();!xn.done;xn=mn.next())xn=xn.value,xn.language?En.add(ol(xn.language)):En.add("und");return En}function m1(mn){var En=new Map,xn=new Map;mn=Dn(mn);for(var An=mn.next();!An.done;An=mn.next()){An=An.value;var Mn="und",Un=[];An.language&&(Mn=ol(An.language)),An.type=="variant"?Un=An.audioRoles:Un=An.roles,Un&&Un.length||(Un=[""]),En.has(Mn)||En.set(Mn,new Set),Un=Dn(Un);for(var Bn=Un.next();!Bn.done;Bn=Un.next())Bn=Bn.value,En.get(Mn).add(Bn),An.label&&(xn.has(Mn)||xn.set(Mn,new Map),xn.get(Mn).set(Bn,An.label))}var Gn=[];return En.forEach(function(Wn,ts){Wn=Dn(Wn);for(var os=Wn.next();!os.done;os=Wn.next()){os=os.value;var cs=null;xn.has(ts)&&xn.get(ts).has(os)&&(cs=xn.get(ts).get(os)),Gn.push({language:ts,role:os,label:cs})}}),Gn}function dv(){return new zs(2,7,7e3)}function wE(mn,En,xn,An,Mn,Un){return An==mn&&Mn.mediaElement==Un.mediaElement&&Mn.uri==Un.uri&&Mn.mimeType==Un.mimeType?En:xn}function AE(){return{mediaElement:null,mimeType:null,startTime:null,Ue:NaN,uri:null}}function g1(mn){return new Promise(function(En,xn){mn.Qb=function(){return xn(dv())},mn.Ed=function(){return En()},mn.onError=function(An){return xn(An)},mn.Gd=function(){return xn(dv())}})}Ys("shaka.Player",iu),iu.prototype.setVideoContainer=iu.prototype.Te,iu.prototype.getManifestParserFactory=iu.prototype.Og,iu.prototype.getManifest=iu.prototype.Ng,iu.prototype.retryStreaming=iu.prototype.Fe,iu.prototype.setMaxHardwareResolution=iu.prototype.Oe,iu.prototype.addChaptersTrack=iu.prototype.jg,iu.prototype.addThumbnailsTrack=iu.prototype.lg,iu.prototype.addTextTrackAsync=iu.prototype.kg,iu.prototype.getStats=iu.prototype.getStats,iu.prototype.getBufferedInfo=iu.prototype.ib,iu.prototype.getPresentationStartTimeAsDate=iu.prototype.Jf,iu.prototype.getPlayheadTimeAsDate=iu.prototype.Sg,iu.prototype.setTextTrackVisibility=iu.prototype.Se,iu.prototype.getChapters=iu.prototype.Bg,iu.prototype.getChaptersTracks=iu.prototype.Gf,iu.prototype.isTextTrackVisible=iu.prototype.Nb,iu.prototype.selectVariantsByLabel=iu.prototype.Eh,iu.prototype.selectTextLanguage=iu.prototype.Ie,iu.prototype.selectAudioLanguage=iu.prototype.Md,iu.prototype.getTextLanguages=iu.prototype.Vg,iu.prototype.getAudioLanguages=iu.prototype.xg,iu.prototype.getTextLanguagesAndRoles=iu.prototype.Wg,iu.prototype.getAudioLanguagesAndRoles=iu.prototype.yg,iu.prototype.selectVariantTrack=iu.prototype.Ke,iu.prototype.selectTextTrack=iu.prototype.Je,iu.prototype.getThumbnails=iu.prototype.Yg,iu.prototype.getImageTracks=iu.prototype.Ig,iu.prototype.getTextTracks=iu.prototype.yb,iu.prototype.getVariantTracks=iu.prototype.Qa,iu.prototype.cancelTrickPlay=iu.prototype.vf,iu.prototype.trickPlay=iu.prototype.Ze,iu.prototype.getPlaybackRate=iu.prototype.xb,iu.prototype.isBuffering=iu.prototype.Pc,iu.prototype.getKeyStatuses=iu.prototype.ud,iu.prototype.getExpiration=iu.prototype.Gc,iu.prototype.drmInfo=iu.prototype.drmInfo,iu.prototype.keySystem=iu.prototype.keySystem,iu.prototype.goToLive=iu.prototype.bh,iu.prototype.seekRange=iu.prototype.Ja,iu.prototype.isAudioOnly=iu.prototype.hc,iu.prototype.isInProgress=iu.prototype.Lb,iu.prototype.isLive=iu.prototype.U,iu.prototype.getAdManager=iu.prototype.sd,iu.prototype.getAssetUri=iu.prototype.le,iu.prototype.getNetworkingEngine=iu.prototype.Hc,iu.prototype.getMediaElement=iu.prototype.Qg,iu.prototype.getLoadMode=iu.prototype.If,iu.prototype.resetConfiguration=iu.prototype.Bh,iu.prototype.getBufferFullness=iu.prototype.zg,iu.prototype.getConfiguration=iu.prototype.getConfiguration,iu.prototype.configure=iu.prototype.configure,iu.prototype.load=iu.prototype.load,iu.prototype.updateStartTime=iu.prototype.Oh,iu.prototype.unload=iu.prototype.bf,iu.prototype.detach=iu.prototype.detach,iu.prototype.attachCanvas=iu.prototype.qf,iu.prototype.attach=iu.prototype.Bc,iu.probeSupport=function(mn){mn=mn===void 0?!0:mn;var En,xn,An,Mn,Un,Bn;return hs(function(Gn){if(Gn.g==1)return En={},mn?Qn(Gn,LA(),3):Gn.D(2);Gn.g!=2&&(En=Gn.h);var Wn={};if(Sp()){for(var ts in zm)Wn[ts]=!0;for(var os in d_)Wn[os]=!0}ts={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"},os=Dn(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var cs=os.next();!cs.done;cs=os.next())cs=cs.value,Wn[cs]=Sp()?!!zm[cs]:oy(cs);for(var ls in ts)Wn[ls]=Sp()?!!d_[ls]:oy(ts[ls]);for(xn=Wn,ls='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(Kn(Gy)),Wn={},ls=Dn(ls),ts=ls.next();!ts.done;ts=ls.next())ts=ts.value,Wn[ts]=Sp()?$s(ts)?!0:dp(ts)||$m(ts):oy(ts),os=ts.split(";")[0],Wn[os]=Wn[os]||Wn[ts];An=Wn,Mn={manifest:xn,media:An,drm:En},Un=y1;for(Bn in Un)Mn[Bn]=Un[Bn]();return Gn.return(Mn)})},iu.isBrowserSupported=II,iu.setAdManagerFactory=function(mn){f0=mn},iu.registerSupportPlugin=function(mn,En){y1[mn]=En},iu.prototype.destroy=iu.prototype.destroy;var zu=0,VS=1,Im=2,Xm=3;iu.LoadMode={DESTROYED:zu,NOT_LOADED:VS,MEDIA_SOURCE:Im,SRC_EQUALS:Xm},iu.version="v4.3.6";var GS=["4","3"];ix=new function(mn){this.g=mn,this.i=F0,this.h=BT}(new rx(Number(GS[0]),Number(GS[1])));var KI=["output-restricted","internal-error"],y1={},f0=null,nl={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"},v1={sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function WI(){this.h=[],this.j=this.i=this.g=0}function cu(mn,En,xn){var An=this;this.h=mn,this.g=En,this.m=xn,this.i=!1,this.l=this.g.getVolume(),this.j=new xu,this.j.o(this.g,google.ima.AdEvent.Type.PAUSED,function(){An.i=!0}),this.j.o(this.g,google.ima.AdEvent.Type.RESUMED,function(){An.i=!1})}Sn=cu.prototype,Sn.getDuration=function(){return this.h.getDuration()},Sn.getMinSuggestedDuration=function(){return this.h.getMinSuggestedDuration()},Sn.getRemainingTime=function(){return this.g.getRemainingTime()},Sn.isPaused=function(){return this.i},Sn.isSkippable=function(){return 0<=this.h.getSkipTimeOffset()},Sn.getTimeUntilSkippable=function(){var mn=this.h.getSkipTimeOffset();return mn=this.getRemainingTime()-mn,Math.max(mn,0)},Sn.canSkipNow=function(){return this.g.getAdSkippableState()},Sn.skip=function(){return this.g.skip()},Sn.pause=function(){return this.g.pause()},Sn.play=function(){return this.g.resume()},Sn.getVolume=function(){return this.g.getVolume()},Sn.setVolume=function(mn){return this.g.setVolume(mn)},Sn.isMuted=function(){return this.g.getVolume()==0},Sn.isLinear=function(){return this.h.isLinear()},Sn.resize=function(mn,En){var xn=!1,An=this.m;document.fullscreenEnabled?xn=!!document.fullscreenElement:An.webkitSupportsFullscreen&&(xn=An.webkitDisplayingFullscreen),this.g.resize(mn,En,xn?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},Sn.setMuted=function(mn){mn?(this.l=this.getVolume(),this.setVolume(0)):this.setVolume(this.l)},Sn.getSequenceLength=function(){var mn=this.h.getAdPodInfo();return mn==null?1:mn.getTotalAds()},Sn.getPositionInSequence=function(){var mn=this.h.getAdPodInfo();return mn==null?1:mn.getAdPosition()},Sn.getTitle=function(){return this.h.getTitle()},Sn.getDescription=function(){return this.h.getDescription()},Sn.release=function(){this.g=this.h=null},Ys("shaka.ads.ClientSideAd",cu),cu.prototype.release=cu.prototype.release,cu.prototype.getDescription=cu.prototype.getDescription,cu.prototype.getTitle=cu.prototype.getTitle,cu.prototype.getPositionInSequence=cu.prototype.getPositionInSequence,cu.prototype.getSequenceLength=cu.prototype.getSequenceLength,cu.prototype.setMuted=cu.prototype.setMuted,cu.prototype.resize=cu.prototype.resize,cu.prototype.isLinear=cu.prototype.isLinear,cu.prototype.isMuted=cu.prototype.isMuted,cu.prototype.setVolume=cu.prototype.setVolume,cu.prototype.getVolume=cu.prototype.getVolume,cu.prototype.play=cu.prototype.play,cu.prototype.pause=cu.prototype.pause,cu.prototype.skip=cu.prototype.skip,cu.prototype.canSkipNow=cu.prototype.canSkipNow,cu.prototype.getTimeUntilSkippable=cu.prototype.getTimeUntilSkippable,cu.prototype.isSkippable=cu.prototype.isSkippable,cu.prototype.isPaused=cu.prototype.isPaused,cu.prototype.getRemainingTime=cu.prototype.getRemainingTime,cu.prototype.getMinSuggestedDuration=cu.prototype.getMinSuggestedDuration,cu.prototype.getDuration=cu.prototype.getDuration;function _1(mn,En,xn,An){var Mn=this;this.s=mn,this.i=En,this.B=null,this.C=NaN,this.l=An,this.j=null,this.h=new xu,google.ima.settings.setLocale(xn),mn=new google.ima.AdDisplayContainer(this.s,this.i),mn.initialize(),this.m=new google.ima.AdsLoader(mn),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.3.6"),this.g=null,this.h.ya(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(Un){hR(Mn,Un)}),this.h.o(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,function(Un){E1(Mn,Un)}),this.h.o(this.i,"ended",function(){Mn.m.contentComplete()})}_1.prototype.stop=function(){this.g&&this.g.stop(),this.s&&i0(this.s)},_1.prototype.release=function(){this.stop(),this.B&&this.B.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy()};function E1(mn,En){En.getError(),T1(mn,null),mn.l(new vu("ad-cue-points-changed",new Map().set("cuepoints",[])))}function hR(mn,En){mn.l(new vu("ads-loaded",new Map().set("loadTime",Date.now()/1e3-mn.C))),mn.g=En.getAdsManager(mn.i),mn.l(new vu("ima-ad-manager-loaded",new Map().set("imaAdManager",mn.g)));var xn=mn.g.getCuePoints();if(xn.length){En=[],xn=Dn(xn);for(var An=xn.next();!An.done;An=xn.next())En.push({start:An.value,end:null});mn.l(new vu("ad-cue-points-changed",new Map().set("cuepoints",En)))}mR(mn);try{mn.g.init(mn.i.offsetWidth,mn.i.offsetHeight,zS(mn)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),mn.h.o(mn.i,"loadeddata",function(){mn.g.resize(mn.i.offsetWidth,mn.i.offsetHeight,zS(mn)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in pn?(mn.B=new ResizeObserver(function(){mn.g.resize(mn.i.offsetWidth,mn.i.offsetHeight,zS(mn)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),mn.B.observe(mn.i)):mn.h.o(document,"fullscreenchange",function(){mn.g.resize(mn.i.offsetWidth,mn.i.offsetHeight,zS(mn)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),mn.h.ya(mn.i,"play",function(){mn.g.start()})}catch{T1(mn,null)}}function zS(mn){return document.fullscreenEnabled?!!document.fullscreenElement:(mn=mn.i,mn.webkitSupportsFullscreen?mn.webkitDisplayingFullscreen:!1)}function mR(mn){function En(xn,An){xn=new Map().set("originalEvent",xn),mn.l(new vu(An,xn))}mn.h.o(mn.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(xn){E1(mn,xn)}),mn.h.o(mn.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(xn){S1(mn,xn)}),mn.h.o(mn.g,google.ima.AdEvent.Type.STARTED,function(xn){S1(mn,xn)}),mn.h.o(mn.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(xn){En(xn,"ad-first-quartile")}),mn.h.o(mn.g,google.ima.AdEvent.Type.MIDPOINT,function(xn){En(xn,"ad-midpoint")}),mn.h.o(mn.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(xn){En(xn,"ad-third-quartile")}),mn.h.o(mn.g,google.ima.AdEvent.Type.COMPLETE,function(xn){En(xn,"ad-complete")}),mn.h.o(mn.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(xn){T1(mn,xn)}),mn.h.o(mn.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(xn){T1(mn,xn)}),mn.h.o(mn.g,google.ima.AdEvent.Type.SKIPPED,function(xn){En(xn,"ad-skipped")}),mn.h.o(mn.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(xn){En(xn,"ad-volume-changed")}),mn.h.o(mn.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(xn){En(xn,"ad-muted")}),mn.h.o(mn.g,google.ima.AdEvent.Type.PAUSED,function(xn){mn.j&&(mn.j.i=!0,En(xn,"ad-paused"))}),mn.h.o(mn.g,google.ima.AdEvent.Type.RESUMED,function(xn){mn.j&&(mn.j.i=!1,En(xn,"ad-resumed"))}),mn.h.o(mn.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(xn){mn.j&&En(xn,"ad-skip-state-changed")}),mn.h.o(mn.g,google.ima.AdEvent.Type.CLICK,function(xn){En(xn,"ad-clicked")}),mn.h.o(mn.g,google.ima.AdEvent.Type.AD_PROGRESS,function(xn){En(xn,"ad-progress")}),mn.h.o(mn.g,google.ima.AdEvent.Type.AD_BUFFERING,function(xn){En(xn,"ad-buffering")}),mn.h.o(mn.g,google.ima.AdEvent.Type.IMPRESSION,function(xn){En(xn,"ad-impression")}),mn.h.o(mn.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(xn){En(xn,"ad-duration-changed")}),mn.h.o(mn.g,google.ima.AdEvent.Type.USER_CLOSE,function(xn){En(xn,"ad-closed")}),mn.h.o(mn.g,google.ima.AdEvent.Type.LOADED,function(xn){En(xn,"ad-loaded")}),mn.h.o(mn.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(xn){En(xn,"all-ads-completed")}),mn.h.o(mn.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(xn){En(xn,"ad-linear-changed")}),mn.h.o(mn.g,google.ima.AdEvent.Type.AD_METADATA,function(xn){En(xn,"ad-metadata")}),mn.h.o(mn.g,google.ima.AdEvent.Type.LOG,function(xn){En(xn,"ad-recoverable-error")}),mn.h.o(mn.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(xn){En(xn,"ad-break-ready")}),mn.h.o(mn.g,google.ima.AdEvent.Type.INTERACTION,function(xn){En(xn,"ad-interaction")})}function S1(mn,En){var xn=En.getAd();xn?(mn.j=new cu(xn,mn.g,mn.i),En=new Map().set("ad",mn.j).set("sdkAdObject",xn).set("originalEvent",En),mn.l(new vu("ad-started",En)),mn.j.isLinear()&&(mn.s.setAttribute("ad-active","true"),mn.i.pause(),mn.j.setVolume(mn.i.volume),mn.i.muted&&mn.j.setMuted(!0))):Tu("The IMA SDK fired a "+En.type+" event with no associated ad. Unable to play ad!")}function T1(mn,En){mn.l(new vu("ad-stopped",new Map().set("originalEvent",En))),mn.j&&mn.j.isLinear()&&(mn.s.removeAttribute("ad-active"),mn.i.ended||mn.i.play())}function il(mn,En){this.i=mn,this.h=null,this.g=En}Sn=il.prototype,Sn.getDuration=function(){return this.h?this.h.duration:-1},Sn.getMinSuggestedDuration=function(){return this.getDuration()},Sn.getRemainingTime=function(){return this.h?this.h.duration-this.h.currentTime:-1},Sn.isPaused=function(){return this.g.paused},Sn.isSkippable=function(){return this.i.isSkippable()},Sn.getTimeUntilSkippable=function(){var mn=this.i.getSkipTimeOffset();return mn=this.getRemainingTime()-mn,Math.max(mn,0)},Sn.canSkipNow=function(){return this.getTimeUntilSkippable()==0},Sn.skip=function(){this.g.currentTime+=this.getRemainingTime()},Sn.pause=function(){return this.g.pause()},Sn.play=function(){return this.g.play()},Sn.getVolume=function(){return this.g.volume},Sn.setVolume=function(mn){this.g.volume=mn},Sn.isMuted=function(){return this.g.muted},Sn.isLinear=function(){return!0},Sn.resize=function(){},Sn.setMuted=function(mn){this.g.muted=mn},Sn.getSequenceLength=function(){var mn=this.i.getAdPodInfo();return mn==null?1:mn.getTotalAds()},Sn.getPositionInSequence=function(){var mn=this.i.getAdPodInfo();return mn==null?1:mn.getAdPosition()},Sn.getTitle=function(){return this.i.getTitle()},Sn.getDescription=function(){return this.i.getDescription()},Sn.release=function(){this.g=this.h=this.i=null},Ys("shaka.ads.ServerSideAd",il),il.prototype.release=il.prototype.release,il.prototype.getDescription=il.prototype.getDescription,il.prototype.getTitle=il.prototype.getTitle,il.prototype.getPositionInSequence=il.prototype.getPositionInSequence,il.prototype.getSequenceLength=il.prototype.getSequenceLength,il.prototype.setMuted=il.prototype.setMuted,il.prototype.resize=il.prototype.resize,il.prototype.isLinear=il.prototype.isLinear,il.prototype.isMuted=il.prototype.isMuted,il.prototype.setVolume=il.prototype.setVolume,il.prototype.getVolume=il.prototype.getVolume,il.prototype.play=il.prototype.play,il.prototype.pause=il.prototype.pause,il.prototype.skip=il.prototype.skip,il.prototype.canSkipNow=il.prototype.canSkipNow,il.prototype.getTimeUntilSkippable=il.prototype.getTimeUntilSkippable,il.prototype.isSkippable=il.prototype.isSkippable,il.prototype.isPaused=il.prototype.isPaused,il.prototype.getRemainingTime=il.prototype.getRemainingTime,il.prototype.getMinSuggestedDuration=il.prototype.getMinSuggestedDuration,il.prototype.getDuration=il.prototype.getDuration;function p0(mn,En,xn,An){var Mn=this;this.B=mn,this.l=En,this.j=null,this.I=NaN,this.i=An,this.H=!1,this.C=this.m=this.s=null,this.F="",this.G=[],this.h=new xu,mn=new google.ima.dai.api.UiSettings,mn.setLocale(xn),this.g=new google.ima.dai.api.StreamManager(this.l,this.B,mn),this.i(new vu("ima-stream-manager-loaded",new Map().set("imaStreamManager",this.g))),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(Un){IC(Mn,Un)}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){Mn.F.length?Mn.j.resolve(Mn.F):Mn.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),Mn.j=null}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(Un){Un=Un.getAd(),Mn.m=new il(Un,Mn.l),Mn.C&&(Mn.m.h=Mn.C),Mn.i(new vu("ad-started",new Map().set("ad",Mn.m))),Mn.B.setAttribute("ad-active","true")}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){Mn.B.removeAttribute("ad-active");var Un=Mn.l.currentTime;Mn.s&&Mn.s>Un&&(Mn.l.currentTime=Mn.s,Mn.s=null)}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(Un){Mn.C=Un.getStreamData().adProgressData,Mn.m&&(Mn.m.h=Mn.C)}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){Mn.i(new vu("ad-first-quartile"))}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){Mn.i(new vu("ad-midpoint"))}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){Mn.i(new vu("ad-third-quartile"))}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){Mn.i(new vu("ad-complete")),Mn.i(new vu("ad-stopped")),Mn.B.removeAttribute("ad-active"),Mn.m=null}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){Mn.i(new vu("ad-skipped")),Mn.i(new vu("ad-stopped"))}),this.h.o(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(Un){var Bn=Un.getStreamData();Un=[],Bn=Dn(Bn.cuepoints);for(var Gn=Bn.next();!Gn.done;Gn=Bn.next())Gn=Gn.value,Un.push({start:Gn.start,end:Gn.end});Mn.G=Un,Mn.i(new vu("ad-cue-points-changed",new Map().set("cuepoints",Un)))})}p0.prototype.stop=function(){this.F="",this.s=null,this.G=[]},p0.prototype.release=function(){this.stop(),this.h&&this.h.release()},p0.prototype.onCueMetadataChange=function(mn){if(mn.key&&mn.data){var En={};En[mn.key]=mn.data,this.g.onTimedMetadata(En)}};function IC(mn,En){mn.i(new vu("ads-loaded",new Map().set("loadTime",Date.now()/1e3-mn.I))),En=En.getStreamData().url,mn.j.resolve(En),mn.j=null,mn.H||mn.h.o(mn.l,"seeked",function(){var xn=mn.l.currentTime;if(xn!=0){mn.g.streamTimeForContentTime(xn);var An=mn.g.previousCuePointForStreamTime(xn);An&&!An.played&&(mn.s=xn,mn.l.currentTime=An.start)}})}function Ru(){Eu.call(this),this.g=this.i=null,this.h=new WI,this.j=navigator.language}as(Ru,Eu),Sn=Ru.prototype,Sn.setLocale=function(mn){this.j=mn},Sn.initClientSide=function(mn,En){var xn=this;if(!pn.google||!google.ima||!google.ima.AdsLoader)throw new zs(2,10,1e4);this.i&&this.i.release(),this.i=new _1(mn,En,this.j,function(An){if(An&&An.type)switch(An.type){case"ads-loaded":xn.h.h.push(An.loadTime);break;case"ad-started":xn.h.g++;break;case"ad-complete":xn.h.i++;break;case"ad-skipped":xn.h.j++}xn.dispatchEvent(An)})},Sn.release=function(){this.i&&(this.i.release(),this.i=null),this.g&&(this.g.release(),this.g=null),Eu.prototype.release.call(this)},Sn.onAssetUnload=function(){this.i&&this.i.stop(),this.g&&this.g.stop(),this.dispatchEvent(new vu("ad-stopped")),this.h=new WI},Sn.requestClientSideAds=function(mn){if(!this.i)throw new zs(1,10,10001);var En=this.i;En.C=Date.now()/1e3,En.m.requestAds(mn)},Sn.initServerSide=function(mn,En){var xn=this;if(!pn.google||!google.ima||!google.ima.dai)throw new zs(2,10,10002);this.g&&this.g.release(),this.g=new p0(mn,En,this.j,function(An){if(An&&An.type)switch(An.type){case"ads-loaded":xn.h.h.push(An.loadTime);break;case"ad-started":xn.h.g++;break;case"ad-complete":xn.h.i++;break;case"ad-skipped":xn.h.j++}xn.dispatchEvent(An)})},Sn.requestServerSideStream=function(mn,En){if(En=En===void 0?"":En,!this.g)throw new zs(1,10,10003);mn.adTagParameters||(mn.adTagParameters={});var xn=mn.adTagParameters;return(xn.mpt||xn.mpv)&&Tu('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),mn.adTagParameters.mpt="shaka-player",mn.adTagParameters.mpv="v4.3.6",xn=this.g,xn.j?mn=Promise.reject(new zs(1,10,10004)):(mn instanceof google.ima.dai.api.LiveStreamRequest&&(xn.H=!0),xn.j=new _l,xn.g.requestStream(mn),xn.F=En||"",xn.I=Date.now()/1e3,mn=xn.j),mn},Sn.replaceServerSideAdTagParameters=function(mn){if(!this.g)throw new zs(1,10,10003);(mn.mpt||mn.mpv)&&Tu('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),mn.mpt="Shaka Player",mn.mpv="v4.3.6",this.g.g.replaceAdTagParameters(mn)},Sn.getServerSideCuePoints=function(){if(!this.g)throw new zs(1,10,10003);return this.g.G},Sn.getStats=function(){var mn=this.h;return{loadTimes:mn.h,started:mn.g,playedCompletely:mn.i,skipped:mn.j}},Sn.onDashTimedMetadata=function(mn){if(this.g&&mn.schemeIdUri=="urn:google:dai:2018"){var En=mn.schemeIdUri,xn=mn.eventElement?mn.eventElement.getAttribute("messageData"):null;this.g.g.processMetadata(En,xn,mn.startTime)}},Sn.onHlsTimedMetadata=function(mn,En){this.g&&this.g.g.processMetadata("ID3",mn.data,En)},Sn.onCueMetadataChange=function(mn){this.g&&this.g.onCueMetadataChange(mn)},Ys("shaka.ads.AdManager",Ru),Ru.prototype.onCueMetadataChange=Ru.prototype.onCueMetadataChange,Ru.prototype.onHlsTimedMetadata=Ru.prototype.onHlsTimedMetadata,Ru.prototype.onDashTimedMetadata=Ru.prototype.onDashTimedMetadata,Ru.prototype.getStats=Ru.prototype.getStats,Ru.prototype.getServerSideCuePoints=Ru.prototype.getServerSideCuePoints,Ru.prototype.replaceServerSideAdTagParameters=Ru.prototype.replaceServerSideAdTagParameters,Ru.prototype.requestServerSideStream=Ru.prototype.requestServerSideStream,Ru.prototype.initServerSide=Ru.prototype.initServerSide,Ru.prototype.requestClientSideAds=Ru.prototype.requestClientSideAds,Ru.prototype.onAssetUnload=Ru.prototype.onAssetUnload,Ru.prototype.release=Ru.prototype.release,Ru.prototype.initClientSide=Ru.prototype.initClientSide,Ru.prototype.setLocale=Ru.prototype.setLocale,Ru.ADS_LOADED="ads-loaded",Ru.AD_STARTED="ad-started",Ru.AD_FIRST_QUARTILE="ad-first-quartile",Ru.AD_MIDPOINT="ad-midpoint",Ru.AD_THIRD_QUARTILE="ad-third-quartile",Ru.AD_COMPLETE="ad-complete",Ru.AD_STOPPED="ad-stopped",Ru.AD_SKIPPED="ad-skipped",Ru.AD_VOLUME_CHANGED="ad-volume-changed",Ru.AD_MUTED="ad-muted",Ru.AD_PAUSED="ad-paused",Ru.AD_RESUMED="ad-resumed",Ru.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",Ru.CUEPOINTS_CHANGED="ad-cue-points-changed",Ru.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",Ru.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",Ru.AD_CLICKED="ad-clicked",Ru.AD_PROGRESS="ad-progress",Ru.AD_BUFFERING="ad-buffering",Ru.AD_IMPRESSION="ad-impression",Ru.AD_DURATION_CHANGED="ad-duration-changed",Ru.AD_CLOSED="ad-closed",Ru.AD_LOADED="ad-loaded",Ru.ALL_ADS_COMPLETED="all-ads-completed",Ru.AD_LINEAR_CHANGED="ad-linear-changed",Ru.AD_METADATA="ad-metadata",Ru.AD_RECOVERABLE_ERROR="ad-recoverable-error",Ru.AD_BREAK_READY="ad-break-ready",Ru.AD_INTERACTION="ad-interaction",f0=function(){return new Ru};function PC(mn){return JSON.stringify(mn,function(En,xn){if(typeof xn!="function"){if(xn instanceof Event||xn instanceof vu){var An={};for(Mn in xn)(En=xn[Mn])&&typeof En=="object"?Mn=="detail"&&(An[Mn]=En):Mn in Event||(An[Mn]=En);return An}if(xn instanceof Error){var Mn=new Set(["name","message","stack"]);for(An in xn)Mn.add(An);for(En=Dn(Object.getOwnPropertyNames(xn)),An=En.next();!An.done;An=En.next())Mn.add(An.value);for(En={},Mn=Dn(Mn),An=Mn.next();!An.done;An=Mn.next())An=An.value,En[An]=xn[An];xn={__type__:"Error",contents:En}}else if(xn instanceof TimeRanges){for(Mn={__type__:"TimeRanges",length:xn.length,start:[],end:[]},xn=Dn(Lv(xn)),An=xn.next();!An.done;An=xn.next())An=An.value,En=An.end,Mn.start.push(An.start),Mn.end.push(En);xn=Mn}else xn=xn instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(xn)}:typeof xn=="number"?isNaN(xn)?"NaN":isFinite(xn)?xn:0>xn?"-Infinity":"Infinity":xn;return xn}})}function OC(mn){return JSON.parse(mn,function(En,xn){if(xn=="NaN")var An=NaN;else if(xn=="-Infinity")An=-1/0;else if(xn=="Infinity")An=1/0;else if(xn&&typeof xn=="object"&&xn.__type__=="TimeRanges")An=gR(xn);else if(xn&&typeof xn=="object"&&xn.__type__=="Uint8Array")An=new Uint8Array(xn.entries);else if(xn&&typeof xn=="object"&&xn.__type__=="Error"){En=xn.contents,xn=Error(En.message);for(An in En)xn[An]=En[An];An=xn}else An=xn;return An})}function gR(mn){return{length:mn.length,start:function(En){return mn.start[En]},end:function(En){return mn.end[En]}}}var k1="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),yR="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),HS=["loop","playbackRate"],qI=["pause","play"],KS={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10},WS={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},qS={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},$1=[["getConfiguration","configure"]],IE=[["isTextTrackVisible","setTextTrackVisibility"]],vR="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),b1=["attach","attachCanvas","detach","load","unload"];function Pm(mn,En,xn,An,Mn,Un,Bn){var Gn=this;this.I=mn,this.O=Bn,this.j=new ku(En),this.P=xn,this.C=!1,this.B=An,this.H=Mn,this.K=Un,this.h=this.m=!1,this.M="",this.s=null,this.F=function(){return RC(Gn)},this.G=function(Wn,ts){switch(Wn=OC(ts),Wn.type){case"event":var os=Wn.targetName,cs=Wl(Wn.event);Gn.B(os,cs);break;case"update":os=Wn.update;for(cs in os){Wn=Gn.g[cs]||{};for(var ls in os[cs])Wn[ls]=os[cs][ls]}Gn.C&&(Gn.P(),Gn.C=!1);break;case"asyncComplete":if(cs=Wn.id,ls=Wn.error,Wn=Gn.i[cs],delete Gn.i[cs],Wn)if(ls){cs=new zs(ls.severity,ls.category,ls.code);for(os in ls)cs[os]=ls[os];Wn.reject(cs)}else Wn.resolve()}},this.g={video:{},player:{}},this.J=0,this.i={},this.l=null,XS.add(this)}Sn=Pm.prototype,Sn.destroy=function(){return XS.delete(this),C1(this),Qm&&YI(this),this.j&&(this.j.stop(),this.j=null),this.H=this.B=null,this.h=this.m=!1,this.G=this.F=this.l=this.i=this.g=this.s=null,Promise.resolve()},Sn.na=function(){return this.h},Sn.Jd=function(){return this.M},Sn.init=function(){if(this.I.length)if(pn.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.j.Aa();var mn=new chrome.cast.SessionRequest(this.I,[],null,this.O,null);mn=new chrome.cast.ApiConfig(mn,function(En){for(var xn=Dn(XS),An=xn.next();!An.done;An=xn.next())ep(An.value,En)},function(En){for(var xn=Dn(XS),An=xn.next();!An.done;An=xn.next())An=An.value,YS=En=="available",An.j.Aa()},"origin_scoped"),chrome.cast.initialize(mn,function(){},function(){}),YS&&this.j.R(XI),(mn=Qm)&&mn.status!=chrome.cast.SessionStatus.STOPPED?ep(this,mn):Qm=null}else pn.__onGCastApiAvailable!==NC&&(w1=pn.__onGCastApiAvailable||null,pn.__onGCastApiAvailable=NC)},Sn.Le=function(mn){this.s=mn,this.h&&m0(this,{type:"appData",appData:this.s})},Sn.cast=function(mn){var En=this;return hs(function(xn){if(!En.m)throw new zs(1,8,8e3);if(!YS)throw new zs(1,8,8001);if(En.h)throw new zs(1,8,8002);return En.l=new _l,chrome.cast.requestSession(function(An){return h0(En,mn,An)},function(An){return MC(En,An)}),Qn(xn,En.l,0)})};function x1(mn){if(mn.h){var En=mn.K();chrome.cast.requestSession(function(xn){return h0(mn,En,xn)},function(xn){return MC(mn,xn)})}}Sn.$b=function(){if(this.h){if(C1(this),Qm){YI(this);try{Qm.stop(function(){},function(){})}catch{}Qm=null}RC(this)}},Sn.get=function(mn,En){var xn=this;if(mn=="video"){if(qI.includes(En))return function(){return xn.Rf.apply(xn,[mn,En].concat(Kn(lu.apply(0,arguments))))}}else if(mn=="player"){if(qS[En]&&!this.get("player","isLive")())return function(){};if(vR.includes(En))return function(){return xn.Rf.apply(xn,[mn,En].concat(Kn(lu.apply(0,arguments))))};if(b1.includes(En))return function(){return xn.xh.apply(xn,[mn,En].concat(Kn(lu.apply(0,arguments))))};if(KS[En]||WS[En])return function(){return xn.g[mn][En]}}return this.g[mn][En]},Sn.set=function(mn,En,xn){this.g[mn][En]=xn,m0(this,{type:"set",targetName:mn,property:En,value:xn})};function h0(mn,En,xn){Qm=xn,xn.addUpdateListener(mn.F),xn.addMessageListener("urn:x-cast:com.google.shaka.v2",mn.G),RC(mn),m0(mn,{type:"init",initState:En,appData:mn.s}),mn.l.resolve()}function MC(mn,En){var xn=8003;switch(En.code){case"cancel":xn=8004;break;case"timeout":xn=8005;break;case"receiver_unavailable":xn=8006}mn.l.reject(new zs(2,8,xn,En))}Sn.Rf=function(mn,En){m0(this,{type:"call",targetName:mn,methodName:En,args:lu.apply(2,arguments)})},Sn.xh=function(mn,En){var xn=lu.apply(2,arguments),An=new _l,Mn=this.J.toString();this.J++,this.i[Mn]=An;try{m0(this,{type:"asyncCall",targetName:mn,methodName:En,args:xn,id:Mn})}catch(Un){An.reject(Un)}return An};function ep(mn,En){var xn=mn.K();mn.l=new _l,mn.C=!0,h0(mn,xn,En)}function YI(mn){var En=Qm;En.removeUpdateListener(mn.F),En.removeMessageListener("urn:x-cast:com.google.shaka.v2",mn.G)}function RC(mn){var En=Qm?Qm.status=="connected":!1;if(mn.h&&!En){mn.H();for(var xn in mn.g)mn.g[xn]={};C1(mn)}mn.h=En,mn.M=En?Qm.receiver.friendlyName:"",mn.j.Aa()}function C1(mn){for(var En in mn.i){var xn=mn.i[En];delete mn.i[En],xn.reject(new zs(1,7,7e3))}}function m0(mn,En){En=PC(En);var xn=Qm;try{xn.sendMessage("urn:x-cast:com.google.shaka.v2",En,function(){},wp)}catch(An){throw En=new zs(2,8,8005,An),xn=new vu("error",new Map().set("detail",En)),mn.B("player",xn),mn.$b(),En}}var XI=.02,YS=!1,Qm=null,w1=null,XS=new Set;function NC(mn){if(w1?pn.__onGCastApiAvailable=w1:delete pn.__onGCastApiAvailable,w1=null,mn)for(var En=Dn(XS),xn=En.next();!xn.done;xn=En.next())xn.value.init();typeof pn.__onGCastApiAvailable=="function"&&pn.__onGCastApiAvailable(mn)}function sl(mn,En,xn,An){An=An===void 0?!1:An,Eu.call(this);var Mn=this;this.i=mn,this.h=En,this.m=this.s=this.j=this.B=this.l=null,this.G=xn,this.F=An,this.C=new Map,this.g=new Pm(xn,function(){return LC(Mn)},function(){return A1(Mn)},function(Un,Bn){return ZI(Mn,Un,Bn)},function(){return UC(Mn)},function(){return DC(Mn)},An),_R(this)}as(sl,Eu),Sn=sl.prototype,Sn.destroy=function(mn){return mn&&this.g.$b(),this.m&&(this.m.release(),this.m=null),mn=[],this.h&&(mn.push(this.h.destroy()),this.h=null),this.g&&(mn.push(this.g.destroy()),this.g=null),this.B=this.l=this.i=null,Eu.prototype.release.call(this),Promise.all(mn)},Sn.zb=function(){return this.l},Sn.cc=function(){return this.B},Sn.uf=function(){return this.g.m&&YS},Sn.na=function(){return this.g.na()},Sn.Jd=function(){return this.g.Jd()},Sn.cast=function(){var mn=this,En;return hs(function(xn){return xn.g==1?(En=DC(mn),Qn(xn,mn.g.cast(En),2)):mn.h?Qn(xn,mn.h.bf(),0):xn.return()})},Sn.Le=function(mn){this.g.Le(mn)},Sn.cg=function(){x1(this.g)},Sn.$b=function(){this.g.$b()},Sn.yf=function(mn,En){En=En===void 0?!1:En;var xn=this;return hs(function(An){if(An.g==1)return mn==xn.G&&En==xn.F?An.return():(xn.G=mn,xn.F=En,xn.g.$b(),Qn(An,xn.g.destroy(),2));xn.g=null,xn.g=new Pm(mn,function(){return LC(xn)},function(){return A1(xn)},function(Mn,Un){return ZI(xn,Mn,Un)},function(){return UC(xn)},function(){return DC(xn)},En),xn.g.init(),ms(An)})};function _R(mn){mn.g.init(),mn.m=new xu;for(var En=Dn(k1),xn=En.next();!xn.done;xn=En.next())mn.m.o(mn.i,xn.value,function(Un){mn.g.na()||(Un=Wl(Un),mn.j.dispatchEvent(Un))});for(var An in lp)mn.m.o(mn.h,lp[An],function(Un){mn.g.na()||mn.s.dispatchEvent(Un)});mn.l={},En={};for(var Mn in mn.i)En.vc=Mn,Object.defineProperty(mn.l,En.vc,{configurable:!1,enumerable:!0,get:function(Un){return function(){return jC(mn,Un.vc)}}(En),set:function(Un){return function(Bn){var Gn=Un.vc;mn.g.na()?mn.g.set("video",Gn,Bn):mn.i[Gn]=Bn}}(En)}),En={vc:En.vc};mn.B={},g0(mn,function(Un){Object.defineProperty(mn.B,Un,{configurable:!1,enumerable:!0,get:function(){return ER(mn,Un)}})}),QI(mn),mn.j=new Eu,mn.j.Hd=mn.l,mn.s=new Eu,mn.s.Hd=mn.B}function QI(mn){var En=new Map;g0(mn,function(xn,An){En.has(An)?(An=En.get(An),xn.length<An.length?mn.C.set(xn,An):mn.C.set(An,xn)):En.set(An,xn)})}function g0(mn,En){function xn(Wn){return Wn=="constructor"||typeof An[Wn]!="function"?!1:!Mn.has(Wn)}var An=mn.h,Mn=new Set,Un;for(Un in An)xn(Un)&&(Mn.add(Un),En(Un,An[Un]));for(mn=Object.getPrototypeOf(An),Un=Object.getPrototypeOf({});mn&&mn!=Un;){for(var Bn=Dn(Object.getOwnPropertyNames(mn)),Gn=Bn.next();!Gn.done;Gn=Bn.next())Gn=Gn.value,xn(Gn)&&(Mn.add(Gn),En(Gn,An[Gn]));mn=Object.getPrototypeOf(mn)}}function DC(mn){var En={video:{},player:{},playerAfterLoad:{},manifest:mn.h.le(),startTime:null};mn.i.pause();for(var xn=Dn(HS),An=xn.next();!An.done;An=xn.next())An=An.value,En.video[An]=mn.i[An];for(mn.i.ended||(En.startTime=mn.i.currentTime),xn=Dn($1),An=xn.next();!An.done;An=xn.next()){var Mn=An.value;An=Mn[1],Mn=mn.h[Mn[0]](),En.player[An]=Mn}for(xn=Dn(IE),An=xn.next();!An.done;An=xn.next())Mn=An.value,An=Mn[1],Mn=mn.h[Mn[0]](),En.playerAfterLoad[An]=Mn;return En}function LC(mn){var En=new vu("caststatuschanged");mn.dispatchEvent(En)}function A1(mn){var En=new vu(mn.l.paused?"pause":"play");mn.j.dispatchEvent(En)}function UC(mn){for(var En=Dn($1),xn=En.next();!xn.done;xn=En.next()){var An=xn.value;xn=An[1],An=mn.g.get("player",An[0])(),mn.h[xn](An)}var Mn=mn.g.get("player","getAssetUri")();xn=mn.g.get("video","ended"),En=Promise.resolve();var Un=mn.i.autoplay;An=null,xn||(An=mn.g.get("video","currentTime")),Mn&&(mn.i.autoplay=!1,En=mn.h.load(Mn,An));var Bn={};for(xn=Dn(HS),An=xn.next();!An.done;An=xn.next())An=An.value,Bn[An]=mn.g.get("video",An);En.then(function(){if(mn.i){for(var Gn=Dn(HS),Wn=Gn.next();!Wn.done;Wn=Gn.next())Wn=Wn.value,mn.i[Wn]=Bn[Wn];for(Gn=Dn(IE),Wn=Gn.next();!Wn.done;Wn=Gn.next()){var ts=Wn.value;Wn=ts[1],ts=mn.g.get("player",ts[0])(),mn.h[Wn](ts)}mn.i.autoplay=Un,Mn&&mn.i.play()}},function(Gn){Gn=new Map().set("detail",Gn),Gn=new vu("error",Gn),mn.h.dispatchEvent(Gn)})}function jC(mn,En){if(En=="addEventListener")return function(An,Mn,Un){return mn.j.addEventListener(An,Mn,Un)};if(En=="removeEventListener")return function(An,Mn,Un){return mn.j.removeEventListener(An,Mn,Un)};if(mn.g.na()&&Object.keys(mn.g.g.video).length==0){var xn=mn.i[En];if(typeof xn!="function")return xn}return mn.g.na()?mn.g.get("video",En):(En=mn.i[En],typeof En=="function"&&(En=En.bind(mn.i)),En)}function ER(mn,En){if(mn.C.has(En)&&(En=mn.C.get(En)),En=="addEventListener")return function(xn,An,Mn){return mn.s.addEventListener(xn,An,Mn)};if(En=="removeEventListener")return function(xn,An,Mn){return mn.s.removeEventListener(xn,An,Mn)};if(En=="getMediaElement")return function(){return mn.l};if(En=="getSharedConfiguration")return mn.g.get("player","getConfiguration");if(En=="getNetworkingEngine")return function(){return mn.h.Hc()};if(En=="getDrmEngine")return function(){return mn.h.m};if(En=="getAdManager")return function(){return mn.h.sd()};if(En=="setVideoContainer")return function(xn){return mn.h.Te(xn)};if(mn.g.na()){if(En=="getManifest"||En=="drmInfo")return function(){return Tu(En+"() does not work while casting!"),null};if(En=="attach"||En=="detach")return function(){return Tu(En+"() does not work while casting!"),Promise.resolve()}}return mn.g.na()&&Object.keys(mn.g.g.video).length==0&&(KS[En]||WS[En])||!mn.g.na()?mn.h[En].bind(mn.h):mn.g.get("player",En)}function ZI(mn,En,xn){mn.g.na()&&(En=="video"?mn.j.dispatchEvent(xn):En=="player"&&mn.s.dispatchEvent(xn))}Ys("shaka.cast.CastProxy",sl),sl.prototype.changeReceiverId=sl.prototype.yf,sl.prototype.forceDisconnect=sl.prototype.$b,sl.prototype.suggestDisconnect=sl.prototype.cg,sl.prototype.setAppData=sl.prototype.Le,sl.prototype.cast=sl.prototype.cast,sl.prototype.receiverName=sl.prototype.Jd,sl.prototype.isCasting=sl.prototype.na,sl.prototype.canCast=sl.prototype.uf,sl.prototype.getPlayer=sl.prototype.cc,sl.prototype.getVideo=sl.prototype.zb,sl.prototype.destroy=sl.prototype.destroy;function Pp(mn,En,xn,An){Eu.call(this);var Mn=this;this.g=mn,this.h=En,this.j=new xu,this.J={video:mn,player:En},this.G=xn||function(){},this.K=An||function(Un){return Un},this.i=null,this.H=!1,this.s=!0,this.m=0,this.F=!1,this.C=!0,this.B=this.l=null,this.I=new ku(function(){FC(Mn)}),zv(this)}as(Pp,Eu),Sn=Pp.prototype,Sn.isConnected=function(){return this.H},Sn.fh=function(){return this.s},Sn.Hh=function(mn){this.i=mn},Sn.rg=function(){this.i=null},Sn.Ih=function(mn){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=mn},Sn.Gh=function(mn){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:mn}]},Sn.Fh=function(mn){this.i||(this.i={}),this.i.artist=mn,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},Sn.destroy=function(){var mn=this,En,xn;return hs(function(An){if(An.g==1)return mn.j&&(mn.j.release(),mn.j=null),En=[],mn.h&&(En.push(mn.h.destroy()),mn.h=null),mn.I&&(mn.I.stop(),mn.I=null),mn.g=null,mn.J=null,mn.G=null,mn.H=!1,mn.s=!0,mn.l=null,mn.B=null,Eu.prototype.release.call(mn),Qn(An,Promise.all(En),2);xn=cast.receiver.CastReceiverManager.getInstance(),xn.stop(),ms(An)})};function zv(mn){var En=cast.receiver.CastReceiverManager.getInstance();En.onSenderConnected=function(){return fv(mn)},En.onSenderDisconnected=function(){return fv(mn)},En.onSystemVolumeChanged=function(){var Mn=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();Mn&&Hv(mn,{type:"update",update:{video:{volume:Mn.level,muted:Mn.muted}}},mn.l),Hv(mn,{type:"event",targetName:"video",event:{type:"volumechange"}},mn.l)},mn.B=En.getCastMessageBus("urn:x-cast:com.google.cast.media"),mn.B.onMessage=function(Mn){return TR(mn,Mn)},mn.l=En.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),mn.l.onMessage=function(Mn){return tP(mn,Mn)},En.start(),En=Dn(k1);for(var xn=En.next();!xn.done;xn=En.next())mn.j.o(mn.g,xn.value,function(Mn){return JI(mn,"video",Mn)});for(var An in lp)mn.j.o(mn.h,lp[An],function(Mn){return JI(mn,"player",Mn)});cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?mn.h.Oe(3840,2160):mn.h.Oe(1920,1080),mn.j.o(mn.g,"loadeddata",function(){mn.F=!0}),mn.j.o(mn.h,"loading",function(){mn.s=!1,PE(mn)}),mn.j.o(mn.g,"playing",function(){mn.s=!1,PE(mn)}),mn.j.o(mn.g,"pause",function(){PE(mn)}),mn.j.o(mn.h,"unloading",function(){mn.s=!0,PE(mn)}),mn.j.o(mn.g,"ended",function(){new ku(function(){mn.g&&mn.g.ended&&(mn.s=!0,PE(mn))}).R($R)})}function fv(mn){mn.m=0,mn.C=!0,mn.H=cast.receiver.CastReceiverManager.getInstance().getSenders().length!=0,PE(mn)}function PE(mn){var En;hs(function(xn){if(xn.g==1)return Qn(xn,Promise.resolve(),2);if(!mn.h)return xn.return();En=new vu("caststatuschanged"),mn.dispatchEvent(En),eP(mn)||gy(mn),ms(xn)})}function SR(mn,En,xn){var An,Mn,Un,Bn,Gn,Wn,ts,os,cs,ls;hs(function(gs){switch(gs.g){case 1:for(An in En.player)Mn=En.player[An],mn.h[An](Mn);return mn.G(xn),Un=mn.g.autoplay,En.manifest?(mn.g.autoplay=!1,Ts(gs,5),Qn(gs,mn.h.load(En.manifest,En.startTime),7)):Qn(gs,Promise.resolve(),3);case 7:ys(gs,3);break;case 5:return Bn=_s(gs),Gn=new Map().set("detail",Bn),Wn=new vu("error",Gn),mn.h&&mn.h.dispatchEvent(Wn),gs.return();case 3:if(!mn.h)return gs.return();for(ts in En.video)os=En.video[ts],mn.g[ts]=os;for(cs in En.playerAfterLoad)ls=En.playerAfterLoad[cs],mn.h[cs](ls);mn.g.autoplay=Un,En.manifest&&(mn.g.play(),gy(mn)),ms(gs)}})}function JI(mn,En,xn){mn.h&&(FC(mn),Hv(mn,{type:"event",targetName:En,event:xn},mn.l))}function FC(mn){mn.I.R(kR);for(var En={video:{},player:{}},xn=Dn(yR),An=xn.next();!An.done;An=xn.next())An=An.value,En.video[An]=mn.g[An];if(mn.h.U())for(var Mn in qS)mn.m%qS[Mn]==0&&(En.player[Mn]=mn.h[Mn]());for(var Un in KS)mn.m%KS[Un]==0&&(En.player[Un]=mn.h[Un]());(xn=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(En.video.volume=xn.level,En.video.muted=xn.muted),Hv(mn,{type:"update",update:En},mn.l);for(var Bn in WS)mn.m%WS[Bn]==0&&(En={player:{}},En.player[Bn]=mn.h[Bn](),Hv(mn,{type:"update",update:En},mn.l));mn.F&&(mn.m+=1),eP(mn)}function eP(mn){return mn.C&&(mn.g.duration||mn.h.U())?(BC(mn),mn.C=!1,!0):!1}function BC(mn,En){var xn={contentId:mn.h.le(),streamType:mn.h.U()?"LIVE":"BUFFERED",contentType:""};mn.h.U()||(xn.duration=mn.g.duration),mn.i&&(xn.metadata=mn.i),gy(mn,En===void 0?0:En,xn)}function tP(mn,En){var xn=OC(En.data);switch(xn.type){case"init":mn.m=0,mn.F=!1,mn.C=!0,SR(mn,xn.initState,xn.appData),FC(mn);break;case"appData":mn.G(xn.appData);break;case"set":var An=xn.targetName,Mn=xn.property;if(xn=xn.value,An=="video"){if(En=cast.receiver.CastReceiverManager.getInstance(),Mn=="volume"){En.setSystemVolumeLevel(xn);break}else if(Mn=="muted"){En.setSystemVolumeMuted(xn);break}}mn.J[An][Mn]=xn;break;case"call":An=mn.J[xn.targetName],An[xn.methodName].apply(An,xn.args);break;case"asyncCall":An=xn.targetName,Mn=xn.methodName,An=="player"&&Mn=="load"&&(mn.m=0,mn.F=!1);var Un=xn.id,Bn=En.senderId;En=mn.J[An],xn=En[Mn].apply(En,xn.args),An=="player"&&Mn=="load"&&(xn=xn.then(function(){mn.C=!0})),xn.then(function(){return rP(mn,Bn,Un,null)},function(Gn){return rP(mn,Bn,Un,Gn)})}}function TR(mn,En){var xn=OC(En.data);switch(xn.type){case"PLAY":mn.g.play(),gy(mn);break;case"PAUSE":mn.g.pause(),gy(mn);break;case"SEEK":En=xn.currentTime;var An=xn.resumeState;En!=null&&(mn.g.currentTime=Number(En)),An&&An=="PLAYBACK_START"?(mn.g.play(),gy(mn)):An&&An=="PLAYBACK_PAUSE"&&(mn.g.pause(),gy(mn));break;case"STOP":mn.h.bf().then(function(){mn.h&&gy(mn)});break;case"GET_STATUS":BC(mn,Number(xn.requestId));break;case"VOLUME":An=xn.volume,En=An.level,An=An.muted;var Mn=mn.g.volume,Un=mn.g.muted;En!=null&&(mn.g.volume=Number(En)),An!=null&&(mn.g.muted=An),Mn==mn.g.volume&&Un==mn.g.muted||gy(mn);break;case"LOAD":mn.m=0,mn.F=!1,mn.C=!1,En=xn.media,An=xn.currentTime,Mn=mn.K(En.contentId),Un=xn.autoplay||!0,mn.G(En.customData),Un&&(mn.g.autoplay=!0),mn.h.load(Mn,An).then(function(){mn.h&&BC(mn)}).catch(function(Bn){var Gn="LOAD_FAILED";Bn.category==7&&Bn.code==7e3&&(Gn="LOAD_CANCELLED"),Hv(mn,{requestId:Number(xn.requestId),type:Gn},mn.B)});break;default:Hv(mn,{requestId:Number(xn.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},mn.B)}}function rP(mn,En,xn,An){mn.h&&Hv(mn,{type:"asyncComplete",id:xn,error:An},mn.l,En)}function Hv(mn,En,xn,An){mn.H&&(mn=PC(En),An?xn.getCastChannel(An).send(mn):xn.broadcast(mn))}function gy(mn,En,xn){xn=xn===void 0?null:xn;var An={mediaSessionId:0,playbackRate:mn.g.playbackRate,playerState:mn.s?bR:mn.h.Pc()?CR:mn.g.paused?I1:xR,currentTime:mn.g.currentTime,supportedMediaCommands:63,volume:{level:mn.g.volume,muted:mn.g.muted}};xn&&(An.media=xn),Hv(mn,{requestId:En===void 0?0:En,type:"MEDIA_STATUS",status:[An]},mn.B)}Ys("shaka.cast.CastReceiver",Pp),Pp.prototype.destroy=Pp.prototype.destroy,Pp.prototype.setContentArtist=Pp.prototype.Fh,Pp.prototype.setContentImage=Pp.prototype.Gh,Pp.prototype.setContentTitle=Pp.prototype.Ih,Pp.prototype.clearContentMetadata=Pp.prototype.rg,Pp.prototype.setContentMetadata=Pp.prototype.Hh,Pp.prototype.isIdle=Pp.prototype.fh,Pp.prototype.isConnected=Pp.prototype.isConnected;var kR=.5,$R=5,bR="IDLE",xR="PLAYING",CR="BUFFERING",I1="PAUSED";function VC(mn,En,xn){var An=IR(mn),Mn=null;mn=[];var Un=[],Bn=new Set(An.map(function(Gn){return Gn.keyId}));if(Bn.delete(null),1<Bn.size)throw new zs(2,4,4010);if(En||(Un=An.filter(function(Gn){return Gn.He=="urn:mpeg:dash:mp4protection:2011"?(Mn=Gn.init||Mn,!1):!0}),Un.length&&(mn=AR(Mn,Un,xn,Bn),mn.length==0&&(mn=[Mp("",Mn)]))),An.length&&(En||!Un.length))for(mn=[],En=Dn(Object.values(xn)),xn=En.next();!xn.done;xn=En.next())xn=xn.value,xn!="org.w3.clearkey"&&mn.push(Mp(xn,Mn));if(Bn=Array.from(Bn)[0]||null)for(En=Dn(mn),xn=En.next();!xn.done;xn=En.next())for(xn=Dn(xn.value.initData),An=xn.next();!An.done;An=xn.next())An.value.keyId=Bn;return{Bf:Bn,pj:Mn,drmInfos:mn,Ff:!0}}function pv(mn,En,xn,An){var Mn=VC(mn,xn,An);if(En.Ff)mn=En.drmInfos.length==1&&!En.drmInfos[0].keySystem,xn=Mn.drmInfos.length==0,(En.drmInfos.length==0||mn&&!xn)&&(En.drmInfos=Mn.drmInfos),En.Ff=!1;else if(0<Mn.drmInfos.length&&(En.drmInfos=En.drmInfos.filter(function(Un){return Mn.drmInfos.some(function(Bn){return Bn.keySystem==Un.keySystem})}),En.drmInfos.length==0))throw new zs(2,4,4008);return Mn.Bf||En.Bf}function P1(mn){var En=0,xn=Hp(mn),An=xn.getUint32(En,!0);if(An!=mn.byteLength)return[];e:{for(mn=En+6,En=[];mn<xn.byteLength-1;){An=xn.getUint16(mn,!0),mn+=2;var Mn=xn.getUint16(mn,!0);if(mn+=2,Mn&1||Mn+mn>xn.byteLength){xn=[];break e}var Un=Ku(xn,mn,Mn);En.push({type:An,value:Un}),mn+=Mn}xn=En}return xn}function wR(mn){mn=Dn(mn.getElementsByTagName("DATA"));for(var En=mn.next();!En.done;En=mn.next()){En=Dn(En.value.childNodes);for(var xn=En.next();!xn.done;xn=En.next())if(xn=xn.value,xn instanceof Element&&xn.tagName=="LA_URL")return xn.textContent}return""}function y0(mn){return mn=Ml(mn.node,"urn:microsoft:playready","pro"),!mn||(mn=Lp(mn.textContent),mn=P1(mn).filter(function(En){return En.type===Kv})[0],!mn)?"":(mn=Ry(mn.value,!0),(mn=q0(mn,"WRMHEADER"))?wR(mn):"")}function AR(mn,En,xn,An){var Mn=[];En=Dn(En);for(var Un=En.next();!Un.done;Un=En.next()){Un=Un.value;var Bn=xn[Un.He];if(Bn){var Gn;if(Gn=Ml(Un.node,"urn:microsoft:playready","pro")){Gn=Lp(Gn.textContent);var Wn=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);Gn=[{initData:z0(Gn,Wn,new Set,0),initDataType:"cenc",keyId:Un.keyId}]}else Gn=null;if(Wn=null,Un.He==="urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e")if(Wn=An,Wn.size==0)Wn=null;else{var ts=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),os=new Uint8Array([]);Wn=[{initData:z0(os,ts,Wn,1),initDataType:"cenc",keyId:Un.keyId}]}Gn=Mp(Bn,Un.init||mn||Gn||Wn),(Bn=nP.get(Bn))&&(Gn.licenseServerUri=Bn(Un)),Mn.push(Gn)}}return Mn}function IR(mn){var En=[];mn=Dn(mn);for(var xn=mn.next();!xn.done;xn=mn.next())(xn=v_(xn.value))&&En.push(xn);return En}function v_(mn){var En=mn.getAttribute("schemeIdUri"),xn=K_(mn,"urn:mpeg:cenc:2013","default_KID"),An=cS(mn,"urn:mpeg:cenc:2013","pssh").map(Gm);if(!En)return null;if(En=En.toLowerCase(),xn&&(xn=xn.replace(/-/g,"").toLowerCase(),xn.includes(" ")))throw new zs(2,4,4009);var Mn=[];try{Mn=An.map(function(Un){return{initDataType:"cenc",initData:Lp(Un),keyId:null}})}catch{throw new zs(2,4,4007)}return{node:mn,He:En,keyId:xn,init:0<Mn.length?Mn:null}}var Kv=1,nP=new Map().set("com.widevine.alpha",function(mn){return(mn=Ml(mn.node,"urn:microsoft","laurl"))&&mn.getAttribute("licenseUrl")||""}).set("com.microsoft.playready",y0).set("com.microsoft.playready.recommendation",y0).set("com.microsoft.playready.software",y0).set("com.microsoft.playready.hardware",y0).set("org.w3.clearkey",function(mn){return(mn=Ml(mn.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&mn.getAttribute("Lic_type")==="EME-1.0"&&mn.textContent?mn.textContent:""});function O1(mn,En,xn,An,Mn){var Un={RepresentationID:En,Number:xn,Bandwidth:An,Time:Mn};return mn.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(Bn,Gn,Wn,ts){if(Bn=="$$")return"$";var os=Un[Gn];if(os==null)return Bn;switch(Gn=="RepresentationID"&&Wn&&(Wn=void 0),Gn=="Time"&&(os=Math.round(os)),ts){case void 0:case"d":case"i":case"u":Bn=os.toString();break;case"o":Bn=os.toString(8);break;case"x":Bn=os.toString(16);break;case"X":Bn=os.toString(16).toUpperCase();break;default:Bn=os.toString()}return Wn=pn.parseInt(Wn,10)||1,Array(Math.max(0,Wn-Bn.length)+1).join("0")+Bn})}function iP(mn,En){var xn=yy(mn,En,"timescale"),An=1;xn&&(An=qT(xn)||1);var Mn=yy(mn,En,"duration");xn=qT(Mn||""),mn.L.contentType=="image"&&(xn=W0(Mn||"")),xn&&(xn/=An);var Un=yy(mn,En,"startNumber");Mn=Number(yy(mn,En,"presentationTimeOffset"))||0;var Bn=uv(Un||"");if((Un==null||Bn==null)&&(Bn=1),Un=M1(mn,En,"SegmentTimeline"),En=null,Un){En=An,mn=mn.Y.duration||1/0,Un=Xl(Un,"S");for(var Gn=[],Wn=-Mn,ts=0;ts<Un.length;++ts){var os=Un[ts],cs=Un[ts+1],ls=Kl(os,"t",uv),gs=Kl(os,"d",uv);if(os=Kl(os,"r",WT),ls!=null&&(ls-=Mn),!gs)break;if(ls=ls??Wn,os=os||0,0>os)if(cs){if(cs=Kl(cs,"t",uv),cs==null)break;if(ls>=cs)break;os=Math.ceil((cs-ls)/gs)-1}else{if(mn==1/0)break;if(ls/En>=mn)break;os=Math.ceil((mn*En-ls)/gs)-1}for(0<Gn.length&&ls!=Wn&&(Gn[Gn.length-1].end=ls/En),cs=0;cs<=os;++cs)Wn=ls+gs,Gn.push({start:ls/En,end:Wn/En,Mh:ls}),ls=Wn}En=Gn}return{timescale:An,za:xn,pc:Bn,pb:Mn/An||0,cf:Mn,timeline:En}}function yy(mn,En,xn){return[En(mn.L),En(mn.va),En(mn.oa)].filter(Zl).map(function(An){return An.getAttribute(xn)}).reduce(function(An,Mn){return An||Mn})}function M1(mn,En,xn){return[En(mn.L),En(mn.va),En(mn.oa)].filter(Zl).map(function(An){return lS(An,xn)}).reduce(function(An,Mn){return An||Mn})}function PR(mn,En,xn,An,Mn,Un){for(var Bn=K_(mn,"http://www.w3.org/1999/xlink","href"),Gn=K_(mn,"http://www.w3.org/1999/xlink","actuate")||"onRequest",Wn=Dn(Array.from(mn.attributes)),ts=Wn.next();!ts.done;ts=Wn.next())ts=ts.value,ts.namespaceURI=="http://www.w3.org/1999/xlink"&&mn.removeAttributeNS(ts.namespaceURI,ts.localName);if(5<=Un)return Sl(new zs(2,4,4028));if(Gn!="onLoad")return Sl(new zs(2,4,4027));var os=Zp([An],[Bn]);return Mn.request(0,ll(os,En)).ia(function(cs){if(cs=lx(cs.data,mn.tagName),!cs)return Sl(new zs(2,4,4001,Bn));for(;mn.childNodes.length;)mn.removeChild(mn.childNodes[0]);for(;cs.childNodes.length;){var ls=cs.childNodes[0];cs.removeChild(ls),mn.appendChild(ls)}for(cs=Dn(Array.from(cs.attributes)),ls=cs.next();!ls.done;ls=cs.next())mn.setAttributeNode(ls.value.cloneNode(!1));return QS(mn,En,xn,os[0],Mn,Un+1)})}function QS(mn,En,xn,An,Mn,Un){if(Un=Un===void 0?0:Un,K_(mn,"http://www.w3.org/1999/xlink","href")){var Bn=PR(mn,En,xn,An,Mn,Un);return xn&&(Bn=Bn.ia(void 0,function(){return QS(mn,En,xn,An,Mn,Un)})),Bn}Bn=[];for(var Gn=Dn(Array.from(mn.childNodes)),Wn=Gn.next();!Wn.done;Wn=Gn.next())Wn=Wn.value,Wn instanceof Element&&(K_(Wn,"http://www.w3.org/1999/xlink","href")=="urn:mpeg:dash:resolve-to-zero:2013"?mn.removeChild(Wn):Wn.tagName!="SegmentTimeline"&&Bn.push(QS(Wn,En,xn,An,Mn,Un)));return sx(Bn).ia(function(){return mn})}function OR(mn,En,xn,An,Mn,Un,Bn){var Gn,Wn=new Nl().T("sidx",function(ts){Gn=aP(En,An,Mn,Un,Bn,xn,ts)});if(mn&&Wn.parse(mn),Gn)return Gn;throw new zs(2,3,3004)}function aP(mn,En,xn,An,Mn,Un,Bn){var Gn=[];Bn.reader.skip(4);var Wn=Bn.reader.N();if(Wn==0)throw new zs(2,3,3005);if(Bn.version==0)var ts=Bn.reader.N(),os=Bn.reader.N();else ts=Bn.reader.Cb(),os=Bn.reader.Cb();Bn.reader.skip(2);var cs=Bn.reader.De();for(mn=mn+Bn.size+os,os=0;os<cs;os++){var ls=Bn.reader.N(),gs=(ls&2147483648)>>>31;ls&=2147483647;var ws=Bn.reader.N();if(Bn.reader.skip(4),gs==1)throw new zs(2,3,3006);Gn.push(new rl(ts/Wn+xn,(ts+ws)/Wn+xn,function(){return Un},mn,mn+ls-1,En,xn,An,Mn)),ts+=ws,mn+=ls}return Bn.parser.stop(),Gn}function Zm(mn){this.h=Hp(mn),this.g=new kl(this.h,0)}Zm.prototype.xa=function(){return this.g.xa()};function hv(mn){var En=oP(mn);if(7<En.length)throw new zs(2,3,3002);var xn=0;En=Dn(En);for(var An=En.next();!An.done;An=En.next())xn=256*xn+An.value;En=oP(mn);e:{An=Dn(sP);for(var Mn=An.next();!Mn.done;Mn=An.next())if(Ip(En,new Uint8Array(Mn.value))){An=!0;break e}An=!1}if(An)En=mn.h.byteLength-mn.g.ma();else{if(En.length==8&&En[1]&224)throw new zs(2,3,3001);for(Mn=An=0;Mn<En.length;Mn++){var Un=En[Mn];An=Mn==0?Un&(1<<8-En.length)-1:256*An+Un}En=An}return En=mn.g.ma()+En<=mn.h.byteLength?En:mn.h.byteLength-mn.g.ma(),An=Hp(mn.h,mn.g.ma(),En),mn.g.skip(En),new uP(xn,An)}function oP(mn){var En=mn.g.ma(),xn=mn.g.ob();if(xn==0)throw new zs(2,3,3002);return xn=8-Math.floor(Math.log2(xn)),mn.g.skip(xn-1),Ku(mn.h,En,xn)}var sP=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function uP(mn,En){this.id=mn,this.g=En}function GC(mn){if(8<mn.g.byteLength)throw new zs(2,3,3002);if(mn.g.byteLength==8&&mn.g.getUint8(0)&224)throw new zs(2,3,3001);for(var En=0,xn=0;xn<mn.g.byteLength;xn++){var An=mn.g.getUint8(xn);En=256*En+An}return En}function lP(mn,En,xn,An,Mn,Un,Bn,Gn,Wn){function ts(){return Mn}var os=[];mn=new Zm(mn.g);for(var cs=null,ls=null;mn.xa();){var gs=hv(mn);if(gs.id==187){var ws=MR(gs);ws&&(gs=xn*ws.Nh,ws=En+ws.wh,cs!=null&&os.push(new rl(cs+Bn,gs+Bn,ts,ls,ws-1,Un,Bn,Gn,Wn)),cs=gs,ls=ws)}}return cs!=null&&os.push(new rl(cs+Bn,An+Bn,ts,ls,null,Un,Bn,Gn,Wn)),os}function MR(mn){var En=new Zm(mn.g);if(mn=hv(En),mn.id!=179)throw new zs(2,3,3013);if(mn=GC(mn),En=hv(En),En.id!=183)throw new zs(2,3,3012);En=new Zm(En.g);for(var xn=0;En.xa();){var An=hv(En);if(An.id==241){xn=GC(An);break}}return{Nh:mn,wh:xn}}function cP(mn,En){if(En=M1(mn,En,"Initialization"),!En)return null;var xn=mn.L.Na,An=En.getAttribute("sourceURL");An&&(xn=Zp(mn.L.Na,[An])),An=0;var Mn=null;return(En=Kl(En,"range",KT))&&(An=En.start,Mn=En.end),new Km(function(){return xn},An,Mn,hP(mn))}function RR(mn,En){var xn=Number(yy(mn,Wv,"presentationTimeOffset"))||0,An=yy(mn,Wv,"timescale"),Mn=1;An&&(Mn=qT(An)||1);var Un=xn/Mn||0,Bn=cP(mn,Wv);NR(mn,Bn);var Gn=aS(mn);return{ac:function(){var Wn=M1(Gn,Wv,"RepresentationIndex"),ts=Gn.L.Na;return Wn&&(Wn=Wn.getAttribute("sourceURL"))&&(ts=Zp(Gn.L.Na,[Wn])),Wn=fP(Gn),dP(Gn,En,Bn,ts,Wn.start,Wn.end,Un)}}}function dP(mn,En,xn,An,Mn,Un,Bn){var Gn,Wn,ts,os,cs,ls,gs,ws,Ns,Os,Ps,Xs,Ds,qs,Qs;return hs(function(tu){if(tu.g==1)return Gn=mn.presentationTimeline,Wn=!mn.vb||!mn.Y.oe,ts=mn.Y.start,os=mn.Y.duration,cs=mn.L.mimeType.split("/")[1],ls=En,gs=null,ws=[ls(An,Mn,Un),cs=="webm"?ls(xn.Pa(),xn.Ta,xn.Ca):null],ls=null,Qn(tu,Promise.all(ws),2);if(Ns=tu.h,Os=Ns[0],Ps=Ns[1]||null,Xs=null,Ds=ts-Bn,qs=ts,Qs=os?ts+os:1/0,cs=="mp4")var ou=OR(Os,Mn,An,xn,Ds,qs,Qs);else{if(ou=new Zm(Ps),hv(ou).id!=440786851)throw new zs(2,3,3008);var hu=hv(ou);if(hu.id!=408125543)throw new zs(2,3,3009);ou=hu.g.byteOffset,hu=new Zm(hu.g);for(var gu=null;hu.xa();){var ju=hv(hu);if(ju.id==357149030){gu=ju;break}}if(!gu)throw new zs(2,3,3010);for(gu=new Zm(gu.g),ju=1e6,hu=null;gu.xa();){var Yu=hv(gu);if(Yu.id==2807729)ju=GC(Yu);else if(Yu.id==17545)if(Yu.g.byteLength==4)hu=Yu.g.getFloat32(0);else if(Yu.g.byteLength==8)hu=Yu.g.getFloat64(0);else throw new zs(2,3,3003)}if(hu==null)throw new zs(2,3,3011);if(gu=ju/1e9,hu*=gu,ju=hv(new Zm(Os)),ju.id!=475249515)throw new zs(2,3,3007);ou=lP(ju,ou,gu,hu,An,xn,Ds,qs,Qs)}return Xs=ou,Gn.lc(Xs),gs=new vl(Xs),Wn&&gs.wb(qs,Qs,!0),tu.return(gs)})}function Wv(mn){return mn.Yc}function fP(mn){var En=M1(mn,Wv,"RepresentationIndex");return mn=yy(mn,Wv,"indexRange"),mn=KT(mn||""),En&&(mn=Kl(En,"range",KT,mn)),mn}function NR(mn,En){if(pP(mn,En),!fP(mn))throw new zs(2,4,4002)}function pP(mn,En){var xn=mn.L.mimeType.split("/")[1];if(mn.L.contentType!=Vu&&xn!="mp4"&&xn!="webm")throw new zs(2,4,4006);if(xn=="webm"&&!En)throw new zs(2,4,4005)}function hP(mn){var En=mn.L;return{bandwidth:mn.bandwidth,audioSamplingRate:En.audioSamplingRate,codecs:En.codecs,contentType:En.contentType,frameRate:En.frameRate||null,height:En.height||null,mimeType:En.mimeType,channelsCount:En.Cd,pixelAspectRatio:En.pixelAspectRatio||null,width:En.width||null}}function DR(mn,En){var xn=cP(mn,zC),An=LR(mn);if(!An.za&&!An.timeline&&1<An.jc.length)throw new zs(2,4,4002);if(!An.za&&!mn.Y.duration&&!An.timeline&&An.jc.length==1)throw new zs(2,4,4002);if(An.timeline&&An.timeline.length==0)throw new zs(2,4,4002);var Mn=null,Un=null;mn.oa.id&&mn.L.id&&(Un=En[mn.oa.id+","+mn.L.id])&&(Mn=Un.segmentIndex);var Bn=UR(mn.Y.start,mn.Y.duration,mn.L.Na,An,xn);return En=!Mn,Mn?Mn.kc(Bn,mn.presentationTimeline.kb()):Mn=new vl(Bn),mn.presentationTimeline.lc(Bn),mn.vb&&mn.Y.oe||Mn.wb(mn.Y.start,mn.Y.duration?mn.Y.start+mn.Y.duration:1/0,En),Un&&(Un.segmentIndex=Mn),{ac:function(){return Mn&&Mn.g.length!=0||Mn.Sc(Bn),Promise.resolve(Mn)}}}function zC(mn){return mn.Db}function LR(mn){var En=jR(mn);mn=iP(mn,zC);var xn=mn.pc;xn==0&&(xn=1);var An=0;return mn.za?An=mn.za*(xn-1):mn.timeline&&0<mn.timeline.length&&(An=mn.timeline[0].start),{za:mn.za,startTime:An,pc:xn,pb:mn.pb,timeline:mn.timeline,jc:En}}function UR(mn,En,xn,An,Mn){var Un=An.jc.length;An.timeline&&An.timeline.length!=An.jc.length&&(Un=Math.min(An.timeline.length,An.jc.length));for(var Bn=mn-An.pb,Gn=En?mn+En:1/0,Wn=[],ts=An.startTime,os={},cs=0;cs<Un;os={Vd:os.Vd},cs++){var ls=An.jc[cs];os.Vd=Zp(xn,[ls.lh]);var gs=void 0;gs=An.za!=null?ts+An.za:An.timeline?An.timeline[cs].end:ts+En,Wn.push(new rl(mn+ts,mn+gs,function(ws){return function(){return ws.Vd}}(os),ls.start,ls.end,Mn,Bn,mn,Gn)),ts=gs}return Wn}function jR(mn){return[mn.L.Db,mn.va.Db,mn.oa.Db].filter(Zl).map(function(En){return Xl(En,"SegmentURL")}).reduce(function(En,xn){return 0<En.length?En:xn}).map(function(En){En.getAttribute("indexRange")&&!mn.Mf&&(mn.Mf=!0);var xn=En.getAttribute("media");return En=Kl(En,"mediaRange",KT,{start:0,end:null}),{lh:xn,start:En.start,end:En.end}})}function FR(mn,En,xn,An,Mn,Un){var Bn=VR(mn),Gn=mP(mn);__(Gn);var Wn=aS(mn);if(Gn.Oc)return pP(mn,Bn),{ac:function(){var gs=O1(Gn.Oc,Wn.L.id,null,Wn.bandwidth||null,null);return gs=Zp(Wn.L.Na,[gs]),dP(Wn,En,Bn,gs,0,null,Gn.pb)}};if(Gn.za)return An||mn.va.contentType==="image"||(mn.presentationTimeline.ze(Gn.za),mn.presentationTimeline.Ae(mn.Y.start)),{ac:function(){return BR(Wn,Gn,Mn,Bn,Un)}};var ts=null;An=An=null,mn.oa.id&&mn.L.id&&(An=mn.oa.id+","+mn.L.id,An=xn[An])&&(ts=An.segmentIndex);var os=gP(Wn,Gn,Bn);xn=mn.Y.start;var cs=mn.Y.duration?mn.Y.start+mn.Y.duration:1/0,ls=!(mn.vb&&mn.Y.oe);return ts?(ls&&new vl(os).wb(xn,cs,!0),ts.kc(os,mn.presentationTimeline.kb())):ts=new vl(os),mn.presentationTimeline.lc(os),ls&&ts.wb(xn,cs),An&&mn.vb&&(An.segmentIndex=ts),{ac:function(){return ts&&ts.g.length!=0||ts.Sc(os),Promise.resolve(ts)}}}function R1(mn){return mn.Zc}function mP(mn){var En=iP(mn,R1),xn=yy(mn,R1,"media");return mn=yy(mn,R1,"index"),{za:En.za,timescale:En.timescale,pc:En.pc,pb:En.pb,cf:En.cf,timeline:En.timeline,xe:xn,Oc:mn}}function __(mn){var En=mn.Oc?1:0;if(En+=mn.timeline?1:0,En+=mn.za?1:0,En==0)throw new zs(2,4,4002);if(En!=1&&(mn.Oc&&(mn.timeline=null),mn.za=null),!mn.Oc&&!mn.xe)throw new zs(2,4,4002)}function BR(mn,En,xn,An,Mn){function Un(gu){var ju=(gu-gs)*ls,Yu=ju+En.pb,Qu=ju+ts;ju=Qu+ls;var dl=Math.min(ju,Gn());return Qu=new rl(Qu,dl,function(){var Nu=O1(Ns,Ps,gu,Os,Yu*ws);return Zp(Xs,[Nu])},0,null,An,Ds,ts,Gn()),Qu.l=ju,Qu}function Bn(){var gu=[Math.max(Wn.kb(),ts),Math.min(Wn.Ib(),Gn())].map(function(ju){return ju-ts});return[Math.ceil(gu[0]/ls),Math.ceil(gu[1]/ls)-1].map(function(ju){return ju+gs})}function Gn(){var gu=os!=null&&Mn[os]||cs;return gu?ts+gu:1/0}var Wn=mn.presentationTimeline,ts=mn.Y.start,os=mn.oa.id,cs=mn.Y.duration,ls=En.za,gs=En.pc,ws=En.timescale,Ns=En.xe,Os=mn.bandwidth||null,Ps=mn.L.id,Xs=mn.L.Na,Ds=ts-En.pb,qs=Bn();mn=mn.vb?Math.max(qs[0],qs[1]-xn+1):qs[0],qs=qs[1],xn=[];for(var Qs=mn;Qs<=qs;++Qs){var tu=Un(Qs);xn.push(tu)}var ou=new vl(xn);if(xn=Wn.Ib()<Gn(),Qs=Wn.U(),xn||Qs){var hu=Math.max(mn,qs+1);ou.Nd(ls,function(){var gu=Wn.kb();ou.Gb(gu);var ju=Dn(Bn());ju.next(),ju=ju.next().value;for(var Yu=[];hu<=ju;){var Qu=Un(hu);Yu.push(Qu),hu++}return gu>Gn()&&!Yu.length?null:Yu})}return Promise.resolve(ou)}function gP(mn,En,xn){var An=mn.Y.start,Mn=mn.Y.duration,Un=An-En.pb;Mn=Mn?An+Mn:1/0;for(var Bn=[],Gn={},Wn=0;Wn<En.timeline.length;Gn={Ud:Gn.Ud,Yd:Gn.Yd,ae:Gn.ae,Rd:Gn.Rd,ce:Gn.ce,Sd:Gn.Sd},Wn++){var ts=En.timeline[Wn],os=ts.start,cs=ts.Mh;ts=ts.end,Gn.ae=Wn+En.pc,Gn.ce=cs+En.cf,Gn.Yd=mn.L.id,Gn.Rd=mn.bandwidth||null,Gn.Ud=En.xe,Gn.Sd=mn.L.Na,Bn.push(new rl(An+os,An+ts,function(ls){return function(){var gs=O1(ls.Ud,ls.Yd,ls.ae,ls.Rd||null,ls.ce);return Zp(ls.Sd,[gs]).map(function(ws){return ws.toString()})}}(Gn),0,null,xn,Un,An,Mn))}return Bn}function VR(mn){var En=yy(mn,R1,"initialization");if(!En)return null;var xn=mn.L.id,An=mn.bandwidth||null,Mn=mn.L.Na;return new Km(function(){var Un=O1(En,xn,null,An,null);return Zp(Mn,[Un])},0,null,hP(mn))}function HC(){this.l=[],this.g=[],this.h=[],this.j=[],this.i=[],this.m=new Set}HC.prototype.release=function(){for(var mn=Dn(this.g.concat(this.h,this.j,this.i)),En=mn.next();!En.done;En=mn.next())En=En.value,En.segmentIndex&&En.segmentIndex.release();this.g=[],this.h=[],this.j=[],this.i=[],this.l=[]};function ZS(mn,En,xn){var An,Mn,Un,Bn,Gn,Wn,ts,os,cs,ls,gs,ws,Ns,Os,Ps,Xs,Ds,qs,Qs,tu,ou,hu,gu,ju,Yu,Qu,dl,Nu,up,Cp;return hs(function(Dl){switch(Dl.g){case 1:if(An=Pu,N1(En),D1(En),OE(En),yP(En),!xn&&En.length==1){Mn=En[0],mn.g=Mn.nd,mn.h=Mn.Od,mn.j=Mn.textStreams,mn.i=Mn.imageStreams,Dl.D(2);break}for(Un=-1,Bn=0;Bn<En.length;Bn++)Gn=En[Bn],mn.m.has(Gn.id)||(mn.m.add(Gn.id),Un==-1&&(Un=Bn));if(Un==-1)return Dl.return();for(Wn=En.map(function(ty){return ty.nd}),ts=En.map(function(ty){return ty.Od}),os=En.map(function(ty){return ty.textStreams}),cs=En.map(function(ty){return ty.imageStreams}),ls=Dn(os),gs=ls.next();!gs.done;gs=ls.next())ws=gs.value,ws.push(kP(An.ba));for(Ns=Dn(cs),Os=Ns.next();!Os.done;Os=Ns.next())Ps=Os.value,Ps.push(kP(An.Ac));return Qn(Dl,E_(mn.g,Wn,Un,JS,v0),3);case 3:return Qn(Dl,E_(mn.h,ts,Un,JS,v0),4);case 4:return Qn(Dl,E_(mn.j,os,Un,JS,v0),5);case 5:return Qn(Dl,E_(mn.i,cs,Un,JS,v0),2);case 2:if(Xs=0,Ds=[],mn.h.length&&mn.g.length)for(gu=Dn(mn.g),ju=gu.next();!ju.done;ju=gu.next())for(Yu=ju.value,Qu=Dn(mn.h),dl=Qu.next();!dl.done;dl=Qu.next())Nu=dl.value,up=ZT(Yu.drmInfos,Nu.drmInfos),Yu.drmInfos.length&&Nu.drmInfos.length&&!up.length||(Cp=Xs++,Ds.push({id:Cp,language:Yu.language,primary:Yu.primary,audio:Yu,video:Nu,bandwidth:(Yu.bandwidth||0)+(Nu.bandwidth||0),drmInfos:up,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(qs=mn.h.concat(mn.g),Qs=Dn(qs),tu=Qs.next();!tu.done;tu=Qs.next())ou=tu.value,hu=Xs++,Ds.push({id:hu,language:ou.language,primary:ou.primary,audio:ou.type==An.jd?ou:null,video:ou.type==An.Ma?ou:null,bandwidth:ou.bandwidth||0,drmInfos:ou.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});mn.l=Ds,ms(Dl)}})}function N1(mn){mn=Dn(mn);for(var En=mn.next();!En.done;En=mn.next()){En=En.value;for(var xn=[],An=Dn(En.nd),Mn=An.next();!Mn.done;Mn=An.next()){Mn=Mn.value;for(var Un=!1,Bn=Dn(xn),Gn=Bn.next();!Gn.done;Gn=Bn.next())Gn=Gn.value,Mn.id!=Gn.id&&Mn.channelsCount==Gn.channelsCount&&Mn.language==Gn.language&&Mn.bandwidth==Gn.bandwidth&&Mn.label==Gn.label&&Mn.codecs==Gn.codecs&&Mn.mimeType==Gn.mimeType&&Np(Mn.roles,Gn.roles)&&Mn.audioSamplingRate==Gn.audioSamplingRate&&Mn.primary==Gn.primary&&(Un=!0);Un||xn.push(Mn)}En.nd=xn}}function OE(mn){mn=Dn(mn);for(var En=mn.next();!En.done;En=mn.next()){En=En.value;for(var xn=[],An=Dn(En.textStreams),Mn=An.next();!Mn.done;Mn=An.next()){Mn=Mn.value;for(var Un=!1,Bn=Dn(xn),Gn=Bn.next();!Gn.done;Gn=Bn.next())Gn=Gn.value,Mn.id!=Gn.id&&Mn.language==Gn.language&&Mn.label==Gn.label&&Mn.codecs==Gn.codecs&&Mn.mimeType==Gn.mimeType&&Mn.bandwidth==Gn.bandwidth&&Np(Mn.roles,Gn.roles)&&(Un=!0);Un||xn.push(Mn)}En.textStreams=xn}}function D1(mn){mn=Dn(mn);for(var En=mn.next();!En.done;En=mn.next()){En=En.value;for(var xn=[],An=Dn(En.Od),Mn=An.next();!Mn.done;Mn=An.next()){Mn=Mn.value;for(var Un=!1,Bn=Dn(xn),Gn=Bn.next();!Gn.done;Gn=Bn.next())Gn=Gn.value,Mn.id!=Gn.id&&Mn.width==Gn.width&&Mn.frameRate==Gn.frameRate&&Mn.codecs==Gn.codecs&&Mn.mimeType==Gn.mimeType&&Mn.label==Gn.label&&Np(Mn.roles,Gn.roles)&&B0(Mn.closedCaptions,Gn.closedCaptions)&&Mn.bandwidth==Gn.bandwidth&&(Un=!0);Un||xn.push(Mn)}En.Od=xn}}function yP(mn){mn=Dn(mn);for(var En=mn.next();!En.done;En=mn.next()){En=En.value;for(var xn=[],An=Dn(En.imageStreams),Mn=An.next();!Mn.done;Mn=An.next()){Mn=Mn.value;for(var Un=!1,Bn=Dn(xn),Gn=Bn.next();!Gn.done;Gn=Bn.next())Gn=Gn.value,Mn.id!=Gn.id&&Mn.width==Gn.width&&Mn.codecs==Gn.codecs&&Mn.mimeType==Gn.mimeType&&(Un=!0);Un||xn.push(Mn)}En.imageStreams=xn}}function KC(mn){var En,xn,An,Mn,Un,Bn,Gn,Wn,ts,os,cs,ls,gs,ws,Ns,Os,Ps,Xs,Ds,qs,Qs,tu,ou,hu,gu,ju,Yu;return hs(function(Qu){switch(Qu.g){case 1:if(En=Pu,mn.length==1)return Qu.return(mn[0]);for(xn=mn.map(function(dl){return dl.filter(function(Nu){return Nu.type==En.jd})}),An=mn.map(function(dl){return dl.filter(function(Nu){return Nu.type==En.Ma})}),Mn=mn.map(function(dl){return dl.filter(function(Nu){return Nu.type==En.ba})}),Un=mn.map(function(dl){return dl.filter(function(Nu){return Nu.type==En.Ac})}),Bn=Dn(Mn),Gn=Bn.next();!Gn.done;Gn=Bn.next())Wn=Gn.value,Wn.push(TP(En.ba));for(ts=Dn(Un),os=ts.next();!os.done;os=ts.next())cs=os.value,cs.push(TP(En.Ac));return Qn(Qu,E_([],xn,0,eT,S_),2);case 2:return ls=Qu.h,Qn(Qu,E_([],An,0,eT,S_),3);case 3:return gs=Qu.h,Qn(Qu,E_([],Mn,0,eT,S_),4);case 4:return ws=Qu.h,Qn(Qu,E_([],Un,0,eT,S_),5);case 5:if(Ns=Qu.h,Os=0,gs.length&&ls.length)for(Qs=Dn(ls),tu=Qs.next();!tu.done;tu=Qs.next())for(ou=tu.value,hu=Dn(gs),gu=hu.next();!gu.done;gu=hu.next())ju=gu.value,Yu=Os++,ju.variantIds.push(Yu),ou.variantIds.push(Yu);else for(Ps=gs.concat(ls),Xs=Dn(Ps),Ds=Xs.next();!Ds.done;Ds=Xs.next())qs=Ds.value,qs.variantIds=[Os++];return Qu.return(gs.concat(ls).concat(ws).concat(Ns))}})}function E_(mn,En,xn,An,Mn){var Un,Bn,Gn,Wn,ts,os,cs,ls,gs,ws,Ns,Os,Ps,Xs,Ds,qs,Qs,tu,ou,hu;return hs(function(gu){switch(gu.g){case 1:for(Un=Pu,Bn=[],Gn=0;Gn<En.length;Gn++)Gn>=xn?Bn.push(new Set(En[Gn])):Bn.push(new Set);Wn=Dn(mn),ts=Wn.next();case 2:if(ts.done){gu.D(4);break}return os=ts.value,Qn(gu,GR(os,En,xn,Mn,Bn),5);case 5:if(cs=gu.h,!cs)throw new zs(2,4,4037);ts=Wn.next(),gu.D(2);break;case 4:for(ls=Dn(Bn),gs=ls.next();!gs.done;gs=ls.next())for(ws=gs.value,Ns=Dn(ws),Os=Ns.next();!Os.done;Os=Ns.next())Ps=Os.value,(Xs=zR(Ps,En,An,Mn,Bn))&&mn.push(Xs);for(Ds=Dn(Bn),gs=Ds.next();!gs.done;gs=Ds.next())for(qs=gs.value,Qs={},tu=Dn(qs),Os=tu.next();!Os.done;Qs={sb:Qs.sb},Os=tu.next())if(Qs.sb=Os.value,ou=Qs.sb.type==Un.ba&&!Qs.sb.language,hu=Qs.sb.type==Un.Ac&&!Qs.sb.tilesLayout,!ou&&!hu&&mn.some(function(ju){return function(Yu){return Yu.mimeType==ju.sb.mimeType&&_i(Yu.codecs)==_i(ju.sb.codecs)}}(Qs)))throw new zs(2,4,4037);return gu.return(mn)}})}function GR(mn,En,xn,An,Mn){return hs(function(Un){return Un.g==1?(WC(En,mn),mn.matchedStreams?mn.segmentIndex?Qn(Un,vP(mn,xn),2):Un.D(2):Un.return(!1)):(_P(mn,xn,An,Mn),Un.return(!0))})}function vP(mn,En){var xn,An,Mn,Un,Bn,Gn,Wn;return hs(function(ts){if(ts.g==1){for(xn=[],An=mn.matchedStreams,Mn=Dn(An),Un=Mn.next();!Un.done;Un=Mn.next())Bn=Un.value,xn.push(Bn.createSegmentIndex()),Bn.trickModeVideo&&!Bn.trickModeVideo.segmentIndex&&xn.push(Bn.trickModeVideo.createSegmentIndex());return Qn(ts,Promise.all(xn),2)}if(mn.segmentIndex instanceof ip)for(Gn=En;Gn<An.length;Gn++)Wn=An[Gn],Wn.segmentIndex&&mn.segmentIndex.l.push(Wn.segmentIndex);ms(ts)})}function zR(mn,En,xn,An,Mn){var Un=xn(mn);return WC(En,Un),Un.createSegmentIndex&&(Un.createSegmentIndex=function(){return hs(function(Bn){return Un.segmentIndex?Bn.D(0):(Un.segmentIndex=new ip,Qn(Bn,vP(Un,0),0))})}),!Un.matchedStreams||!Un.matchedStreams.length?null:(_P(Un,0,An,Mn),Un)}function _P(mn,En,xn,An){for(var Mn=mn.matchedStreams,Un=0;Un<Mn.length;Un++)if(Un>=En){var Bn=Mn[Un];xn(mn,Bn);var Gn=!0;mn.type=="audio"&&pm(mn.language,Bn.language)==0&&(Gn=!1),Gn&&An[Un].delete(Bn)}}function JS(mn){var En=Object.assign({},mn);return En.originalId=null,En.createSegmentIndex=function(){return Promise.resolve()},En.closeSegmentIndex=function(){if(En.segmentIndex&&(En.segmentIndex.release(),En.segmentIndex=null),En.matchedStreams)for(var xn=Dn(En.matchedStreams),An=xn.next();!An.done;An=xn.next())An=An.value,An.segmentIndex&&(An.segmentIndex.release(),An.segmentIndex=null)},En.segmentIndex=null,En.emsgSchemeIdUris=[],En.keyIds=new Set,En.closedCaptions=null,En.trickModeVideo=null,En}function eT(mn){return mn=Object.assign({},mn),mn.keyIds=new Set,mn.segments=[],mn.variantIds=[],mn.closedCaptions=null,mn}function v0(mn,En){mn.roles=Array.from(new Set(mn.roles.concat(En.roles))),En.emsgSchemeIdUris&&(mn.emsgSchemeIdUris=Array.from(new Set(mn.emsgSchemeIdUris.concat(En.emsgSchemeIdUris)))),mn.keyIds=function(Un,Bn){return new Set([].concat(Kn(Un),Kn(Bn)))}(mn.keyIds,En.keyIds),mn.originalId==null?mn.originalId=En.originalId:mn.originalId+=","+(En.originalId||"");var xn=ZT(mn.drmInfos,En.drmInfos);if(En.drmInfos.length&&mn.drmInfos.length&&!xn.length)throw new zs(2,4,4038);if(mn.drmInfos=xn,mn.encrypted=mn.encrypted||En.encrypted,En.closedCaptions){mn.closedCaptions||(mn.closedCaptions=new Map),xn=Dn(En.closedCaptions);for(var An=xn.next();!An.done;An=xn.next()){var Mn=Dn(An.value);An=Mn.next().value,Mn=Mn.next().value,mn.closedCaptions.set(An,Mn)}}En.trickModeVideo?(mn.trickModeVideo||(mn.trickModeVideo=JS(En.trickModeVideo),mn.trickModeVideo.createSegmentIndex=function(){return mn.trickModeVideo.segmentIndex=mn.segmentIndex.clone(),Promise.resolve()}),v0(mn.trickModeVideo,En.trickModeVideo)):mn.trickModeVideo&&v0(mn.trickModeVideo,En)}function S_(mn,En){mn.roles=Array.from(new Set(mn.roles.concat(En.roles)));var xn=En.keyIds;if(xn=new Set([].concat(Kn(mn.keyIds),Kn(xn))),mn.keyIds=xn,mn.encrypted=mn.encrypted&&En.encrypted,mn.segments.push.apply(mn.segments,Kn(En.segments)),En.closedCaptions)for(mn.closedCaptions||(mn.closedCaptions=new Map),En=Dn(En.closedCaptions),xn=En.next();!xn.done;xn=En.next()){var An=Dn(xn.value);xn=An.next().value,An=An.next().value,mn.closedCaptions.set(xn,An)}}function WC(mn,En){var xn=[];mn=Dn(mn);for(var An=mn.next();!An.done;An=mn.next()){var Mn=En,Un={audio:vy,video:vy,text:EP,image:qv}[Mn.type],Bn={audio:tT,video:qC,text:HR,image:SP}[Mn.type],Gn=null;An=Dn(An.value);for(var Wn=An.next();!Wn.done;Wn=An.next())Wn=Wn.value,!Un(Mn,Wn)||Gn&&!Bn(Mn,Gn,Wn)||(Gn=Wn);if(Mn=Gn,!Mn)return;xn.push(Mn)}En.matchedStreams=xn}function vy(mn,En){var xn;return!(xn=En.mimeType!=mn.mimeType||_i(En.codecs)!=_i(mn.codecs))&&(xn=mn.drmInfos)&&(mn=mn.drmInfos,En=En.drmInfos,xn=!(!(mn.length&&En.length)||0<ZT(mn,En).length)),!xn}function EP(mn,En){return mn.language?En.language?!(pm(mn.language,En.language)==0||En.kind!=mn.kind):!0:!1}function qv(mn){return!!mn.tilesLayout}function tT(mn,En,xn){if(mn.id==xn.id)return!0;var An=pm(mn.language,En.language),Mn=pm(mn.language,xn.language);return Mn>An?!0:Mn<An?!1:mn.roles.length?(An=En.roles.filter(function(Un){return mn.roles.includes(Un)}),Mn=xn.roles.filter(function(Un){return mn.roles.includes(Un)}),Mn.length>An.length?!0:Mn.length<An.length?!1:xn.roles.length<En.roles.length):!xn.roles.length&&En.roles.length?!0:xn.roles.length&&!En.roles.length?!1:!En.primary&&xn.primary?!0:En.primary&&!xn.primary?!1:(An=T_(mn.channelsCount,En.channelsCount,xn.channelsCount),An==Wy?!0:An==mv?!1:(An=T_(mn.audioSamplingRate,En.audioSamplingRate,xn.audioSamplingRate),An==Wy?!0:An==mv?!1:!!(mn.bandwidth&&$P(mn.bandwidth,En.bandwidth,xn.bandwidth)==Wy)))}function qC(mn,En,xn){if(mn.id==xn.id)return!0;var An=T_(mn.width*mn.height,En.width*En.height,xn.width*xn.height);if(An==Wy)return!0;if(An==mv)return!1;if(mn.frameRate){if(An=T_(mn.frameRate,En.frameRate,xn.frameRate),An==Wy)return!0;if(An==mv)return!1}return!!(mn.bandwidth&&$P(mn.bandwidth,En.bandwidth,xn.bandwidth)==Wy)}function HR(mn,En,xn){if(mn.id==xn.id)return!0;var An=pm(mn.language,En.language),Mn=pm(mn.language,xn.language);if(Mn>An)return!0;if(Mn<An)return!1;if(!En.primary&&xn.primary)return!0;if(En.primary&&!xn.primary)return!1;if(mn.roles.length){if(An=En.roles.filter(function(Un){return mn.roles.includes(Un)}),Mn=xn.roles.filter(function(Un){return mn.roles.includes(Un)}),Mn.length>An.length)return!0;if(Mn.length<An.length)return!1}else{if(!xn.roles.length&&En.roles.length)return!0;if(xn.roles.length&&!En.roles.length)return!1}return!(xn.mimeType!=mn.mimeType||xn.codecs!=mn.codecs||En.mimeType==mn.mimeType&&En.codecs==mn.codecs)}function SP(mn,En,xn){return mn.id==xn.id?!0:T_(mn.width*mn.height,En.width*En.height,xn.width*xn.height)==Wy}function TP(mn){return{id:0,originalId:"",primary:!1,type:mn,mimeType:"",codecs:"",language:"",label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}}function kP(mn){return{id:0,originalId:"",createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new vl([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",label:null,type:mn,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}}function T_(mn,En,xn){if(En==mn&&mn!=xn)return mv;if(xn==mn&&mn!=En)return Wy;if(En>mn){if(xn<=mn||xn-mn<En-mn)return Wy;if(xn-mn>En-mn)return mv}else{if(xn>mn)return mv;if(mn-xn<mn-En)return Wy;if(mn-xn>mn-En)return mv}return bP}function $P(mn,En,xn){return En=Math.abs(mn-En),mn=Math.abs(mn-xn),mn<En?Wy:En<mn?mv:bP}var Wy=1,bP=0,mv=-1;function _0(){var mn=this;this.h=this.g=null,this.m=[],this.i=null,this.I=1,this.l={},this.M={},this.j=new HC,this.H=0,this.J=new M_(5),this.G=new ku(function(){QC(mn)}),this.s=new Fy,this.B=null,this.K=[],this.C=1/0,this.F=!1}Sn=_0.prototype,Sn.configure=function(mn){this.g=mn},Sn.start=function(mn,En){var xn=this,An;return hs(function(Mn){if(Mn.g==1)return xn.F=En.isLowLatencyMode(),xn.m=[mn],xn.h=En,Qn(Mn,YC(xn),2);if(An=Mn.h,xn.h&&qu(xn,An),!xn.h)throw new zs(2,7,7001);return Mn.return(xn.i)})},Sn.stop=function(){for(var mn=Dn(Object.values(this.l)),En=mn.next();!En.done;En=mn.next())En=En.value,En.segmentIndex&&En.segmentIndex.release();return this.j&&this.j.release(),this.g=this.h=null,this.m=[],this.i=null,this.l={},this.j=null,this.G!=null&&(this.G.stop(),this.G=null),this.s.destroy()},Sn.update=function(){var mn=this,En;return hs(function(xn){if(xn.g==1)return Ts(xn,2),Qn(xn,YC(mn),4);if(xn.g!=2)return ys(xn,0);if(En=_s(xn),!mn.h||!En)return xn.return();mn.h.onError(En),ms(xn)})},Sn.onExpirationUpdated=function(){};function YC(mn){var En,xn,An,Mn,Un,Bn,Gn;return hs(function(Wn){return Wn.g==1?(En=ll(mn.m,mn.g.retryParameters),xn=mn.h.networkingEngine,mn.h.modifyManifestRequest(En,{format:"d"}),An=Date.now(),Mn=xn.request(0,En),H_(mn.s,Mn),Qn(Wn,Mn.promise,2)):Wn.g!=3?(Un=Wn.h,mn.h?(Un.uri&&!mn.m.includes(Un.uri)&&mn.m.unshift(Un.uri),Qn(Wn,KR(mn,Un.data,Un.uri),3)):Wn.return(0)):(Bn=Date.now(),Gn=(Bn-An)/1e3,mn.J.sample(1,Gn),Wn.return(Gn))})}function KR(mn,En,xn){var An,Mn,Un,Bn;return hs(function(Gn){if(Gn.g==1){if(An=lx(En,"MPD"),!An)throw new zs(2,4,4001,xn);return mn.g.dash.disableXlinkProcessing?Gn.return(XC(mn,An,xn)):(Mn=mn.g.dash.xlinkFailGracefully,Un=QS(An,mn.g.retryParameters,Mn,xn,mn.h.networkingEngine),H_(mn.s,Un),Qn(Gn,Un.promise,2))}return Bn=Gn.h,Gn.return(XC(mn,Bn,xn))})}function XC(mn,En,xn){var An,Mn,Un,Bn,Gn,Wn,ts,os,cs,ls,gs,ws,Ns,Os,Ps,Xs,Ds,qs,Qs,tu,ou,hu,gu,ju,Yu,Qu,dl,Nu,up,Cp;return hs(function(Dl){switch(Dl.g){case 1:if((An=mn.g.dash.manifestPreprocessor)&&An(En),Mn=[xn],Un=Xl(En,"Location").map(Gm).filter(Zl),0<Un.length&&(Bn=Zp(Mn,Un),Mn=mn.m=Bn),Gn=Xl(En,"BaseURL"),Wn=Gn.map(Gm),ts=Zp(Mn,Wn),os=0,Gn&&Gn.length&&(os=Kl(Gn[0],"availabilityTimeOffset",W0)||0),cs=mn.g.dash.ignoreMinBufferTime,ls=0,cs||(ls=Kl(En,"minBufferTime",sv)||0),mn.H=Kl(En,"minimumUpdatePeriod",sv,-1),gs=Kl(En,"availabilityStartTime",K0),ws=Kl(En,"timeShiftBufferDepth",sv),Ns=mn.g.dash.ignoreSuggestedPresentationDelay,Os=null,Ns||(Os=Kl(En,"suggestedPresentationDelay",sv)),Ps=mn.g.dash.ignoreMaxSegmentDuration,Xs=null,Ps||(Xs=Kl(En,"maxSegmentDuration",sv)),Ds=En.getAttribute("type")||"static",mn.i)for(qs=mn.i.presentationTimeline,Qs=Dn(Object.values(mn.l)),tu=Qs.next();!tu.done;tu=Qs.next())ou=tu.value,ou.segmentIndex&&ou.segmentIndex.Gb(qs.kb());else hu=mn.g.defaultPresentationDelay||1.5*ls,gu=Os??hu,qs=new Gu(gs,gu,mn.g.dash.autoCorrectDrift);return qs.$c(Ds=="static"),qs.U()&&!isNaN(mn.g.availabilityWindowOverride)&&(ws=mn.g.availabilityWindowOverride),ws==null&&(ws=1/0),qs.Re(ws),ju=En.getAttribute("profiles")||"",Yu={vb:Ds!="static",presentationTimeline:qs,oa:null,Y:null,va:null,L:null,bandwidth:0,Mf:!1,Zb:os,profiles:ju.split(",")},Qu=WR(mn,Yu,ts,En),dl=Qu.duration,Nu=Qu.periods,Ds!="static"&&Qu.Df||qs.Sa(dl||1/0),mn.C&&!mn.F&&mn.h.isAutoLowLatencyMode()&&(mn.h.enableLowLatencyMode(),mn.F=mn.h.isLowLatencyMode()),mn.F?qs.Tf(mn.C):mn.C&&Tu("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),qs.ze(Xs||1),Qn(Dl,ZS(mn.j,Nu,Yu.vb),2);case 2:if(mn.i){mn.i.variants=mn.j.l,mn.i.textStreams=mn.j.j.slice(),mn.i.imageStreams=mn.j.i,mn.h.filter(mn.i),Dl.D(3);break}if(mn.i={presentationTimeline:qs,variants:mn.j.l,textStreams:mn.j.j.slice(),imageStreams:mn.j.i,offlineSessionIds:[],minBufferTime:ls||0,sequenceMode:mn.g.dash.sequenceMode},!qs.eg()){Dl.D(4);break}return up=Xl(En,"UTCTiming"),Qn(Dl,IP(mn,ts,up),5);case 5:if(Cp=Dl.h,!mn.h)return Dl.return();qs.Uf(Cp);case 4:qs.ve();case 3:mn.h.makeTextStreamsForClosedCaptions(mn.i),ms(Dl)}})}function WR(mn,En,xn,An){var Mn=Kl(An,"mediaPresentationDuration",sv),Un=[],Bn=0;An=Xl(An,"Period");for(var Gn=0;Gn<An.length;Gn++){var Wn=An[Gn],ts=An[Gn+1],os=Kl(Wn,"start",sv,Bn),cs=Wn.id,ls=Kl(Wn,"duration",sv),gs=null;if(ts){var ws=Kl(ts,"start",sv);ws!=null&&(gs=ws-os)}else Mn!=null&&(gs=Mn-os);if(gs==null&&(gs=ls),!(mn.B!==null&&cs!==null&&os!==null&&os<mn.B)||mn.K.includes(cs)||Gn+1==An.length){if(os!==null&&(mn.B===null||os>mn.B)&&(mn.B=os),Bn=qR(mn,En,xn,{start:os,duration:gs,node:Wn,oe:gs==null||!ts}),Un.push(Bn),En.oa.id&&gs&&(mn.M[En.oa.id]=gs),gs==null){Bn=null;break}Bn=os+gs}}return mn.K=Un.map(function(Ns){return Ns.id}),Mn!=null?{periods:Un,duration:Mn,Df:!1}:{periods:Un,duration:Bn,Df:!0}}function qR(mn,En,xn,An){En.oa=tp(An.node,null,xn),En.Y=An,En.oa.Zb=En.Zb,En.oa.id||(En.oa.id="__shaka_period_"+An.start);var Mn=Xl(An.node,"EventStream");xn=En.presentationTimeline.kb(),Mn=Dn(Mn);for(var Un=Mn.next();!Un.done;Un=Mn.next())um(mn,An.start,An.duration,Un.value,xn);if(xn=Xl(An.node,"AdaptationSet").map(function(os){return xP(mn,En,os)}).filter(Zl),En.vb){for(An=[],Mn=Dn(xn),Un=Mn.next();!Un.done;Un=Mn.next()){Un=Dn(Un.value.Ah);for(var Bn=Un.next();!Bn.done;Bn=Un.next())An.push(Bn.value)}if(An.length!=new Set(An).size)throw new zs(2,4,4018)}for(An=xn.filter(function(os){return!os.Ye}),xn=xn.filter(function(os){return os.Ye}),xn=Dn(xn),Mn=xn.next();!Mn.done;Mn=xn.next()){Mn=Mn.value,Un=Mn.Ye.split(" "),Bn=Dn(An);for(var Gn=Bn.next();!Gn.done;Gn=Bn.next()){var Wn=Gn.value;if(Un.includes(Wn.id)){Gn={},Wn=Dn(Wn.streams);for(var ts=Wn.next();!ts.done;Gn={hd:Gn.hd},ts=Wn.next())Gn.hd=ts.value,Gn.hd.trickModeVideo=Mn.streams.find(function(os){return function(cs){return _i(os.hd.codecs)==_i(cs.codecs)}}(Gn))}}}if(Mn=mn.g.disableAudio?[]:L1(An,"audio"),Bn=mn.g.disableVideo?[]:L1(An,"video"),Un=mn.g.disableText?[]:L1(An,Vu),xn=mn.g.disableThumbnails?[]:L1(An,"image"),!Bn.length&&!Mn.length)throw new zs(2,4,4004);for(An=[],Mn=Dn(Mn),Gn=Mn.next();!Gn.done;Gn=Mn.next())An.push.apply(An,Kn(Gn.value.streams));for(Mn=[],Bn=Dn(Bn),Gn=Bn.next();!Gn.done;Gn=Bn.next())Mn.push.apply(Mn,Kn(Gn.value.streams));for(Bn=[],Un=Dn(Un),Gn=Un.next();!Gn.done;Gn=Un.next())Bn.push.apply(Bn,Kn(Gn.value.streams));for(Un=[],xn=Dn(xn),Gn=xn.next();!Gn.done;Gn=xn.next())Un.push.apply(Un,Kn(Gn.value.streams));return{id:En.oa.id,nd:An,Od:Mn,textStreams:Bn,imageStreams:Un}}function L1(mn,En){return mn.filter(function(xn){return xn.contentType==En})}function xP(mn,En,xn){function An(tu){switch(tu){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}En.va=tp(xn,En.oa,null);var Mn=!1,Un=Xl(xn,"Role"),Bn=Un.map(function(tu){return tu.getAttribute("value")}).filter(Zl),Gn=void 0,Wn=En.va.contentType==Vu;Wn&&(Gn="subtitle"),Un=Dn(Un);for(var ts=Un.next();!ts.done;ts=Un.next()){ts=ts.value;var os=ts.getAttribute("schemeIdUri");if(os==null||os=="urn:mpeg:dash:role:2011")switch(ts=ts.getAttribute("value"),ts){case"main":Mn=!0;break;case"caption":case"subtitle":Gn=ts}}var cs;os=Xl(xn,"EssentialProperty"),Un=null,ts=!1,os=Dn(os);for(var ls=os.next();!ls.done;ls=os.next()){ls=ls.value;var gs=ls.getAttribute("schemeIdUri");gs=="http://dashif.org/guidelines/trickmode"?Un=ls.getAttribute("value"):gs=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?cs=An(parseInt(ls.getAttribute("value"),10)):ts=!0}for(os=Xl(xn,"SupplementalProperty"),os=Dn(os),ls=os.next();!ls.done;ls=os.next())ls=ls.value,ls.getAttribute("schemeIdUri")=="urn:mpeg:mpegB:cicp:TransferCharacteristics"&&(cs=An(parseInt(ls.getAttribute("value"),10)));os=Xl(xn,"Accessibility");var ws=new Map;for(os=Dn(os),ls=os.next();!ls.done;ls=os.next())if(gs=ls.value,ls=gs.getAttribute("schemeIdUri"),gs=gs.getAttribute("value"),ls=="urn:scte:dash:cc:cea-608:2015")if(ls=1,gs!=null){gs=gs.split(";");for(var Ns=Dn(gs),Os=Ns.next();!Os.done;Os=Ns.next()){var Ps=Os.value,Xs=Os=void 0;Ps.includes("=")?(Ps=Ps.split("="),Os=Ps[0].startsWith("CC")?Ps[0]:"CC"+Ps[0],Xs=Ps[1]||"und"):(Os="CC"+ls,gs.length==2?ls+=2:ls++,Xs=Ps),ws.set(Os,ol(Xs))}}else ws.set("CC1","und");else if(ls=="urn:scte:dash:cc:cea-708:2015")if(ls=1,gs!=null)for(gs=Dn(gs.split(";")),Os=gs.next();!Os.done;Os=gs.next())Os=Os.value,Ps=Ns=void 0,Os.includes("=")?(Os=Os.split("="),Ns="svc"+Os[0],Ps=Os[1].split(",")[0].split(":").pop()):(Ns="svc"+ls,ls++,Ps=Os),ws.set(Ns,ol(Ps));else ws.set("svc1","und");else ls=="urn:mpeg:dash:role:2011"&&gs!=null&&(Bn.push(gs),gs=="captions"&&(Gn="caption"));if(ts)return null;ts=Xl(xn,"ContentProtection");var Ds=VC(ts,mn.g.dash.ignoreDrmInfo,mn.g.dash.keySystemsByURI),qs=ol(xn.getAttribute("lang")||"und"),Qs=xn.getAttribute("label");if((ts=Xl(xn,"Label"))&&ts.length&&(ts=ts[0],ts.textContent&&(Qs=ts.textContent)),ts=Xl(xn,"Representation"),xn=ts.map(function(tu){return(tu=CP(mn,En,Ds,Gn,qs,Qs,Mn,Bn,ws,tu))&&(tu.hdr=tu.hdr||cs),tu}).filter(function(tu){return!!tu}),xn.length==0){if(Un=En.va.contentType=="image",mn.g.dash.ignoreEmptyAdaptationSet||Wn||Un)return null;throw new zs(2,4,4003)}if(!En.va.contentType||En.va.contentType=="application")for(En.va.contentType=E0(xn[0].mimeType,xn[0].codecs),Wn=Dn(xn),os=Wn.next();!os.done;os=Wn.next())os.value.type=En.va.contentType;for(Wn=Dn(xn),os=Wn.next();!os.done;os=Wn.next())for(os=os.value,ls=Dn(Ds.drmInfos),gs=ls.next();!gs.done;gs=ls.next())gs=gs.value,gs.keyIds=gs.keyIds&&os.keyIds?new Set([].concat(Kn(gs.keyIds),Kn(os.keyIds))):gs.keyIds||os.keyIds;return Wn=ts.map(function(tu){return tu.getAttribute("id")}).filter(Zl),{id:En.va.id||"__fake__"+mn.I++,contentType:En.va.contentType,language:qs,qj:Mn,streams:xn,drmInfos:Ds.drmInfos,Ye:Un,Ah:Wn}}function CP(mn,En,xn,An,Mn,Un,Bn,Gn,Wn,ts){if(En.L=tp(ts,En.va,null),mn.C=Math.min(mn.C,En.L.Zb),!AP(En.L))return null;var os=En.Y.start;En.bandwidth=Kl(ts,"bandwidth",qT)||0;var cs=En.L.contentType,ls=cs==Vu||cs=="application";cs=cs=="image";try{var gs=function(tu,ou,hu){return U1(mn,tu,ou,hu)};if(En.L.Yc)var ws=RR(En,gs);else if(En.L.Db)ws=DR(En,mn.l);else if(En.L.Zc)ws=FR(En,gs,mn.l,!!mn.i,mn.g.dash.initialSegmentLimit,mn.M);else{var Ns=En.L.Na,Os=En.Y.duration||0;ws={ac:function(){return Promise.resolve(tC(os,Os,Ns))}}}}catch(tu){if((ls||cs)&&tu.code==4002)return null;throw tu}gs=Xl(ts,"ContentProtection"),gs=pv(gs,xn,mn.g.dash.ignoreDrmInfo,mn.g.dash.keySystemsByURI),gs=new Set(gs?[gs]:[]);var Ps=!1;Xl(ts,"SupplementalProperty").some(function(tu){return tu.getAttribute("schemeIdUri")=="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&tu.getAttribute("value")=="JOC"})&&(Ps=!0);var Xs=!1;ls&&(Xs=Gn.includes("forced_subtitle")||Gn.includes("forced-subtitle"));var Ds;if(cs&&((ts=Xl(ts,"EssentialProperty").find(function(tu){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(tu.getAttribute("schemeIdUri"))}))&&(Ds=ts.getAttribute("value")),!Ds))return null;var qs;ts=En.L.codecs,En.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(ts.includes("hvc1.2.4.L153.B0")||ts.includes("hev1.2.4.L153.B0"))&&(qs="PQ"),ts=En.L.id?En.oa.id+","+En.L.id:"";var Qs=ts&&mn.l[ts]?mn.l[ts]:{id:mn.I++,originalId:En.L.id,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){Qs.segmentIndex&&(Qs.segmentIndex.release(),Qs.segmentIndex=null)},segmentIndex:null,mimeType:En.L.mimeType,codecs:En.L.codecs,frameRate:En.L.frameRate,pixelAspectRatio:En.L.pixelAspectRatio,bandwidth:En.bandwidth,width:En.L.width,height:En.L.height,kind:An,encrypted:0<xn.drmInfos.length,drmInfos:xn.drmInfos,keyIds:gs,language:Mn,label:Un,type:En.va.contentType,primary:Bn,trickModeVideo:null,emsgSchemeIdUris:En.L.emsgSchemeIdUris,roles:Gn,forced:Xs,channelsCount:En.L.Cd,audioSamplingRate:En.L.audioSamplingRate,spatialAudio:Ps,closedCaptions:Wn,hdr:qs,tilesLayout:Ds,matchedStreams:[]};return Qs.createSegmentIndex=function(){var tu;return hs(function(ou){if(ou.g==1)return Qs.segmentIndex?ou.D(0):(tu=Qs,Qn(ou,ws.ac(),3));tu.segmentIndex=ou.h,ms(ou)})},ts&&En.vb&&!mn.l[ts]&&(mn.l[ts]=Qs),Qs}function QC(mn){var En,xn;hs(function(An){switch(An.g){case 1:return En=0,Ts(An,2),Qn(An,YC(mn),4);case 4:En=An.h,ys(An,3);break;case 2:xn=_s(An),mn.h&&(xn.severity=1,mn.h.onError(xn));case 3:if(!mn.h)return An.return();qu(mn,En),ms(An)}})}function qu(mn,En){0>mn.H||mn.G.R(Math.max(3,mn.H-En,bv(mn.J)))}function tp(mn,En,xn){En=En||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,Cd:null,audioSamplingRate:null,Zb:0},xn=xn||En.Na;var An=Xl(mn,"BaseURL"),Mn=An.map(Gm),Un=mn.getAttribute("contentType")||En.contentType,Bn=mn.getAttribute("mimeType")||En.mimeType,Gn=mn.getAttribute("codecs")||En.codecs,Wn=Kl(mn,"frameRate",SM)||En.frameRate,ts=mn.getAttribute("sar")||En.pixelAspectRatio,os=Xl(mn,"InbandEventStream"),cs=En.emsgSchemeIdUris.slice();os=Dn(os);for(var ls=os.next();!ls.done;ls=os.next())ls=ls.value.getAttribute("schemeIdUri"),cs.includes(ls)||cs.push(ls);os=Xl(mn,"AudioChannelConfiguration"),os=wP(os)||En.Cd,ls=Kl(mn,"audioSamplingRate",uv)||En.audioSamplingRate,Un||(Un=E0(Bn,Gn));var gs=lS(mn,"SegmentBase"),ws=lS(mn,"SegmentTemplate"),Ns=gs&&Kl(gs,"availabilityTimeOffset",W0)||0,Os=ws&&Kl(ws,"availabilityTimeOffset",W0)||0;return An=An&&An.length&&Kl(An[0],"availabilityTimeOffset",W0)||0,An=En.Zb+An+Ns+Os,{Na:Zp(xn,Mn),Yc:gs||En.Yc,Db:lS(mn,"SegmentList")||En.Db,Zc:ws||En.Zc,width:Kl(mn,"width",uv)||En.width,height:Kl(mn,"height",uv)||En.height,contentType:Un,mimeType:Bn,codecs:Gn,frameRate:Wn,pixelAspectRatio:ts,emsgSchemeIdUris:cs,id:mn.getAttribute("id"),Cd:os,audioSamplingRate:ls,Zb:An}}function wP(mn){mn=Dn(mn);for(var En=mn.next();!En.done;En=mn.next()){var xn=En.value;if((En=xn.getAttribute("schemeIdUri"))&&(xn=xn.getAttribute("value")))switch(En){case"urn:mpeg:dash:outputChannelPositionList:2012":return xn.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(En=parseInt(xn,10),!En)continue;return En;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(En=parseInt(xn,16),!En)continue;for(mn=0;En;)En&1&&++mn,En>>=1;return mn;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(En=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(xn=parseInt(xn,10))&&0<xn&&xn<En.length)return En[xn]}}return null}function AP(mn){var En=mn.Yc?1:0;return En+=mn.Db?1:0,En+=mn.Zc?1:0,En==0?mn.contentType==Vu||mn.contentType=="application":(En!=1&&(mn.Yc&&(mn.Db=null),mn.Zc=null),!0)}function qy(mn,En,xn,An){var Mn,Un,Bn,Gn,Wn,ts;return hs(function(os){if(os.g==1)return Mn=Zp(En,[xn]),Un=ll(Mn,mn.g.retryParameters),Un.method=An,Bn=mn.h.networkingEngine.request(4,Un),H_(mn.s,Bn),Qn(os,Bn.promise,2);if(Gn=os.h,An=="HEAD"){if(!Gn.headers||!Gn.headers.date)return os.return(0);Wn=Gn.headers.date}else Wn=xl(Gn.data);return ts=Date.parse(Wn),isNaN(ts)?os.return(0):os.return(ts-Date.now())})}function IP(mn,En,xn){var An,Mn,Un,Bn,Gn,Wn,ts,os;return hs(function(cs){switch(cs.g){case 1:An=xn.map(function(ls){return{scheme:ls.getAttribute("schemeIdUri"),value:ls.getAttribute("value")}}),Mn=mn.g.dash.clockSyncUri,!An.length&&Mn&&An.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:Mn}),Un=Dn(An),Bn=Un.next();case 2:if(Bn.done){cs.D(4);break}switch(Gn=Bn.value,Ts(cs,5),Wn=Gn.scheme,ts=Gn.value,Wn){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return cs.D(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return cs.D(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return os=Date.parse(ts),cs.return(isNaN(os)?0:os-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":Tu("NTP UTCTiming scheme is not supported");break;default:Tu("Unrecognized scheme in UTCTiming element",Wn)}cs.D(9);break;case 7:return Qn(cs,qy(mn,En,ts,"HEAD"),10);case 10:return cs.return(cs.h);case 8:return Qn(cs,qy(mn,En,ts,"GET"),11);case 11:return cs.return(cs.h);case 9:ys(cs,3);break;case 5:_s(cs);case 3:Bn=Un.next(),cs.D(2);break;case 4:return Tu("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),cs.return(0)}})}function um(mn,En,xn,An,Mn){var Un=An.getAttribute("schemeIdUri")||"",Bn=An.getAttribute("value")||"",Gn=Kl(An,"timescale",uv)||1;An=Dn(Xl(An,"Event"));for(var Wn=An.next();!Wn.done;Wn=An.next()){Wn=Wn.value;var ts=Kl(Wn,"presentationTime",uv)||0,os=Kl(Wn,"duration",uv)||0;ts=ts/Gn+En,os=ts+os/Gn,xn!=null&&(ts=Math.min(ts,En+xn),os=Math.min(os,En+xn)),os<Mn||(Wn={schemeIdUri:Un,value:Bn,startTime:ts,endTime:os,id:Wn.getAttribute("id")||"",eventElement:Wn},mn.h.onTimelineRegionAdded(Wn))}}function U1(mn,En,xn,An){var Mn,Un,Bn,Gn,Wn;return hs(function(ts){return ts.g==1?(Mn=Pv,Un=g_(En,xn,An,mn.g.retryParameters),Bn=mn.h.networkingEngine,Gn=Bn.request(Mn,Un),H_(mn.s,Gn),Qn(ts,Gn.promise,2)):(Wn=ts.h,ts.return(Wn.data))})}function E0(mn,En){return $s(Vm(mn,En))?Vu:mn.split("/")[0]}Ys("shaka.dash.DashParser",_0),d_.mpd=function(){return new _0},zm["application/dash+xml"]=function(){return new _0},zm["video/vnd.mpeg.dash.mpd"]=function(){return new _0};function k_(mn,En,xn,An){this.h=mn,this.type=En,this.g=xn,this.segments=An||null}function $_(mn,En,xn,An){this.id=mn,this.name=En,this.g=xn,this.value=An===void 0?null:An}$_.prototype.toString=function(){function mn(An){return An.name+"="+(isNaN(Number(An.value))?'"'+An.value+'"':An.value)}var En="#"+this.name,xn=this.g?this.g.map(mn):[];return this.value&&xn.unshift(this.value),0<xn.length&&(En+=":"+xn.join(",")),En},$_.prototype.getAttribute=function(mn){var En=this.g.filter(function(xn){return xn.name==mn});return En.length?En[0]:null};function Lu(mn,En,xn){return(mn=mn.getAttribute(En))?mn.value:xn||null}function jl(mn,En){if(mn=mn.getAttribute(En),!mn)throw new zs(2,4,4023,En);return mn.value}function PP(mn,En,xn){xn=xn===void 0?[]:xn,this.g=En,this.i=mn,this.h=xn}function j1(mn,En){this.name=mn,this.value=En}function _y(mn,En){return mn.filter(function(xn){return xn.name==En})}function ZC(mn,En){return mn.filter(function(xn){return jl(xn,"TYPE")==En})}function lm(mn,En){return mn=_y(mn,En),mn.length?mn[0]:null}function rT(mn,En){var xn=0;return xn=xn===void 0?0:xn,(mn=lm(mn,En))?Number(mn.value):xn}function S0(mn,En){return Zp([mn],[En])[0]}function Yv(mn){this.h=mn,this.g=0}function gv(mn){yv(mn,/[ \t]+/gm)}function yv(mn,En){return En.lastIndex=mn.g,En=En.exec(mn.h),En=En==null?null:{position:En.index,length:En[0].length,results:En},mn.g==mn.h.length||En==null||En.position!=mn.g?null:(mn.g+=En.length,En.results)}function T0(mn){return mn.g==mn.h.length?null:(mn=yv(mn,/[^ \t\n]*/gm))?mn[0]:null}function YR(){this.g=0}function JC(mn,En,xn){En=xl(En),En=En.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`).trim();var An=En.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(An[0]))throw new zs(2,4,4015);En=0;for(var Mn=!0,Un=Dn(An),Bn=Un.next();!Bn.done;Bn=Un.next())if(Bn=Bn.value,/^#(?!EXT)/m.test(Bn)||Mn)Mn=!1;else if(Bn=F1(mn,Bn),--mn.g,OP.includes(Bn.name)){En=1;break}else Bn.name=="EXT-X-STREAM-INF"&&(Mn=!0);for(Un=[],Mn=!0,Bn=0;Bn<An.length;Bn++){var Gn=An[Bn],Wn=An[Bn+1];if(/^#(?!EXT)/m.test(Gn)||Mn)Mn=!1;else{if(Gn=F1(mn,Gn),MP.includes(Gn.name)){if(En!=1)throw new zs(2,4,4017);var ts=An.splice(Bn,An.length-Bn);An=xn,Mn=[],Bn=[],Wn=[],Gn=null,ts=Dn(ts);for(var os=ts.next();!os.done;os=ts.next())os=os.value,/^(#EXT)/.test(os)?(os=F1(mn,os),OP.includes(os.name)?Un.push(os):os.name=="EXT-X-MAP"?Gn=os:os.name=="EXT-X-PART"?Wn.push(os):os.name=="EXT-X-PRELOAD-HINT"?Lu(os,"TYPE")=="PART"?Wn.push(os):Lu(os,"TYPE")=="MAP"&&(os.name="EXT-X-MAP",Gn=os):Bn.push(os)):/^#(?!EXT)/m.test(os)||(os=S0(An,os.trim()),Gn&&Bn.push(Gn),Mn.push(new PP(os,Bn,Wn)),Bn=[],Wn=[]);return Wn.length&&(Gn&&Bn.push(Gn),Mn.push(new PP("",Bn,Wn))),new k_(xn,En,Un,Mn)}Un.push(Gn),Gn.name=="EXT-X-STREAM-INF"&&(Gn.g.push(new j1("URI",Wn)),Mn=!0)}}return new k_(xn,En,Un)}function F1(mn,En){mn=mn.g++;var xn=En.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!xn)throw new zs(2,4,4016,En);En=xn[1];var An=xn[2];xn=[];var Mn;if(An){An=new Yv(An);var Un;(Un=yv(An,/^([^,=]+)(?:,|$)/g))&&(Mn=Un[1]);for(var Bn=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;Un=yv(An,Bn);)xn.push(new j1(Un[1],Un[2]||Un[3])),gv(An)}return new $_(mn,En,xn,Mn)}var OP="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP".split(" "),MP="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function ew(){}function RP(mn){try{var En=tw(mn);return tm({uri:mn,originalUri:mn,data:En.data,headers:{"content-type":En.contentType}})}catch(xn){return Sl(xn)}}function tw(mn){var En=mn.split(":");if(2>En.length||En[0]!="data")throw new zs(2,1,1004,mn);if(En=En.slice(1).join(":").split(","),2>En.length)throw new zs(2,1,1004,mn);var xn=En[0];mn=pn.decodeURIComponent(En.slice(1).join(",")),En=xn.split(";"),xn=En[0];var An=!1;1<En.length&&En[En.length-1]=="base64"&&(An=!0,En.pop());var Mn;return An?Mn=Lp(mn):Mn=Kp(mn),{data:Mn,contentType:xn}}Ys("shaka.net.DataUriPlugin",ew),ew.parse=RP,gm("data",RP);function nT(){var mn=this;this.g=this.i=null,this.sa=1,this.s=new Map,this.C=new Map,this.H=new Map,this.H.set("video",new Map),this.H.set("audio",new Map),this.H.set(Vu,new Map),this.H.set("image",new Map),this.ka=new Set,this.h=new Map,this.j=null,this.O="",this.X=new YR,this.P=0,this.F=-1,this.J=1/0,this.ua=!1,this.m=new ku(function(){fw(mn)}),this.aa=e$,this.G=null,this.$=0,this.K=1/0,this.V=this.ra=0,this.I=new Fy,this.M=new Map,this.B=new Map,this.Z=new Map,this.l=!1}Sn=nT.prototype,Sn.configure=function(mn){this.g=mn},Sn.start=function(mn,En){var xn=this,An;return hs(function(Mn){return Mn.g==1?(xn.i=En,xn.l=En.isLowLatencyMode(),Qn(Mn,Z1(xn,mn),2)):Mn.g!=3?(An=Mn.h,xn.O=An.uri,Qn(Mn,QR(xn,An.data,mn),3)):Mn.return(xn.G)})},Sn.stop=function(){this.m&&(this.m.stop(),this.m=null);var mn=[];return this.I&&(mn.push(this.I.destroy()),this.I=null),this.g=this.i=null,this.ka.clear(),this.G=null,this.h.clear(),this.C.clear(),this.B.clear(),this.s.clear(),Promise.all(mn)},Sn.update=function(){var mn=this,En,xn,An,Mn,Un,Bn,Gn,Wn,ts;return hs(function(os){if(os.g==1){if(!Sy(mn))return os.return();for(En=[],xn=Array.from(mn.h.values()),An=xn.filter(function(cs){return cs.stream.segmentIndex}),Mn=Dn(An),Un=Mn.next();!Un.done;Un=Mn.next())Bn=Un.value,En.push(XR(mn,Bn));return Qn(os,Promise.all(En),2)}VP(mn,An.map(function(cs){return cs.stream})),Gn=An.some(function(cs){return cs.Lc==0}),An.length&&!Gn&&(Wn=WP,iT(mn,Wn.ig),ts=An.map(function(cs){return cs.Ab}),mn.j.Sa(Math.min.apply(Math,Kn(ts))),mn.i.updateDuration()),ms(os)})};function rw(mn,En){return Sy(mn)?mn.H.get(En.type):En.zd}function XR(mn,En){var xn,An,Mn,Un,Bn,Gn,Wn,ts,os,cs,ls,gs,ws,Ns,Os,Ps;return hs(function(Xs){if(Xs.g==1)return xn=En.ld,An=new Iu(xn),mn.l&&En.pd&&wy(An,new Py("_HLS_skip=YES")),Qn(Xs,Z1(mn,An.toString()),2);if(Mn=Xs.h,!En.stream.segmentIndex)return Xs.return();if(Un=JC(mn.X,Mn.data,Mn.uri),Un.type!=1)throw new zs(2,4,4017);Bn=_y(Un.g,"EXT-X-DEFINE"),Gn=B1(mn,Bn),Wn=En.stream,ts=rw(mn,En),os=H1(Un,Wn.mimeType),cs=os.keyIds,ls=os.drmInfos,gs=function(Ds,qs){return Ds.size===qs.size&&[].concat(Kn(Ds)).every(function(Qs){return qs.has(Qs)})},gs(Wn.keyIds,cs)||(Wn.keyIds=cs,Wn.drmInfos=ls,mn.i.newDrmInfo(Wn)),ws=q1(mn,Un,Wn.type,ts,Gn),Wn.segmentIndex.kc(ws,mn.j.kb()),ws.length&&(Ns=rT(Un.g,"EXT-X-MEDIA-SEQUENCE"),Os=ts.get(Ns),Wn.segmentIndex.Gb(Os)),Ps=ws[ws.length-1],lm(Un.g,"EXT-X-ENDLIST")&&(En.Lc=!0,En.Ab=Ps.endTime),ms(Xs)})}Sn.onExpirationUpdated=function(){};function NP(mn,En){for(var xn=mn.F==-1,An=Dn(En),Mn=An.next();!Mn.done;Mn=An.next()){Mn=Mn.value;var Un=Mn.stream.segmentIndex,Bn=rw(mn,Mn);if(Un=Un.g[0]||null){Bn=Dn(Bn);for(var Gn=Bn.next();!Gn.done;Gn=Bn.next()){Gn=Dn(Gn.value);var Wn=Gn.next().value;if(Gn.next().value==Un.startTime){xn&&(mn.F=Math.max(mn.F,Wn)),Mn.ke=Wn;break}}}}if(!(0>mn.F))for(En=Dn(En),Mn=En.next();!Mn.done;Mn=En.next())xn=Mn.value,(An=xn.stream.segmentIndex)&&(An.g.splice(0,mn.F-xn.ke),(An=An.g[0]||null)&&(An=-An.startTime,xn.stream.segmentIndex.offset(An),iw(mn,xn,An)))}function nw(mn,En){if(mn.J==1/0){En=Dn(En);for(var xn=En.next();!xn.done;xn=En.next()){var An=xn.value.stream.segmentIndex.g[0]||null;An!=null&&An.g!=null&&(mn.J=Math.min(mn.J,An.g))}}if(En=mn.J,En!=1/0)for(An=Dn(mn.h.values()),xn=An.next();!xn.done;xn=An.next()){xn=xn.value;var Mn=xn.stream.segmentIndex;if(Mn!=null){var Un=Mn.g[0]||null;if(Un.g==null)fl("Missing EXT-X-PROGRAM-DATE-TIME for stream",xn.bd,"Expect AV sync issues!");else for(iw(mn,xn,Un.g-En-Un.startTime),xn=Dn(Mn),Mn=xn.next();!Mn.done;Mn=xn.next())Mn.value.Ve(En)}}}function iw(mn,En,xn){En.Ab+=xn,mn=rw(mn,En),En=Dn(mn);for(var An=En.next();!An.done;An=En.next()){var Mn=Dn(An.value);An=Mn.next().value,Mn=Mn.next().value,mn.set(An,Mn+xn)}}function QR(mn,En,xn){var An,Mn,Un,Bn,Gn,Wn,ts,os,cs,ls,gs,ws,Ns,Os,Ps,Xs,Ds,qs,Qs,tu,ou,hu,gu,ju,Yu,Qu,dl,Nu,up,Cp,Dl,ty;return hs(function(Ev){switch(Ev.g){case 1:An=JC(mn.X,En,mn.O),Mn=_y(An.g,"EXT-X-DEFINE");for(var P_=Dn(Mn),Yp=P_.next();!Yp.done;Yp=P_.next()){var Dm=Yp.value;Yp=Lu(Dm,"NAME"),Dm=Lu(Dm,"VALUE"),Yp&&Dm&&(mn.s.has(Yp)||mn.s.set(Yp,Dm))}if(Un=[],Bn=[],Gn=[],An.type==1)return tu=mn.g.hls.mediaPlaylistFullMimeType,An.segments.length&&(ou=new Iu(An.segments[0].i),hu=ou.Ha.split(".").pop(),(gu=oT[hu])?tu=gu:hu!=="ts"&&hu!=="mp4"&&(pw[hu]?(gu=pw[hu],ju=mn.g.hls.defaultAudioCodec,tu=gu+'; codecs="'+ju+'"'):J1[hu]&&(gu=J1[hu],Yu=mn.g.hls.defaultVideoCodec,tu=gu+'; codecs="'+Yu+'"'))),Qu=tu.split(";")[0],dl=Qu.split("/")[0],Nu=As(tu),up=new Map,Qn(Ev,k0(mn,An,xn,xn,Nu,dl,"",!0,"Media Playlist",null,up,null,!1,!1,Qu),5);for(Wn=_y(An.g,"EXT-X-MEDIA"),ts=_y(An.g,"EXT-X-STREAM-INF"),os=_y(An.g,"EXT-X-IMAGE-STREAM-INF"),cs=_y(An.g,"EXT-X-SESSION-KEY"),P_=Dn(ts),Yp=P_.next();!Yp.done;Yp=P_.next()){var P0=Yp.value;Dm=Lu(P0,"AUDIO"),Yp=Lu(P0,"VIDEO");var Sv=Lu(P0,"SUBTITLES");if(P0=sw(mn,P0),Sv){var Y2=ev(Vu,P0);mn.B.set(Sv,Y2),Wu(P0,Y2)}Dm&&(Sv=ev("audio",P0),Sv||(Sv=mn.g.hls.defaultAudioCodec),mn.B.set(Dm,Sv)),Yp&&(Dm=ev("video",P0),Dm||(Dm=mn.g.hls.defaultVideoCodec),mn.B.set(Yp,Dm))}for(ls=_y(An.g,"EXT-X-SESSION-DATA"),gs=Dn(ls),ws=gs.next();!ws.done;ws=gs.next())Ns=ws.value,Os=Lu(Ns,"DATA-ID"),Ps=Lu(Ns,"URI"),Xs=Lu(Ns,"LANGUAGE"),Ds=Lu(Ns,"VALUE"),qs=new Map().set("id",Os),Ps&&qs.set("uri",S0(mn.O,Ps)),Xs&&qs.set("language",Xs),Ds&&qs.set("value",Ds),Qs=new vu("sessiondata",qs),mn.i&&mn.i.onEvent(Qs);for(ow(mn,Wn),P_=ZC(Wn,"CLOSED-CAPTIONS"),P_=Dn(P_),Yp=P_.next();!Yp.done;Yp=P_.next())Sv=Yp.value,Yp=V1(Sv),Dm=jl(Sv,"GROUP-ID"),Sv=jl(Sv,"INSTREAM-ID"),mn.M.get(Dm)||mn.M.set(Dm,new Map),mn.M.get(Dm).set(Sv,Yp);return Un=ZR(mn,ts,cs),Bn=aw(mn,Wn),Qn(Ev,LP(mn,os),4);case 4:Gn=Ev.h,Ev.D(3);break;case 5:Cp=Ev.h,mn.h.set(xn,Cp),Un.push({id:0,language:"und",disabledUntilTime:0,primary:!0,audio:dl=="audio"?Cp.stream:null,video:dl=="video"?Cp.stream:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!mn.i)throw new zs(2,7,7001);mn.j=new Gu(null,0),mn.j.$c(!0),An.type==1&&(Sy(mn)&&(zP(mn),Dl=mn.P,mn.m.R(Dl)),ty=Array.from(mn.h.values()),G1(mn,ty),DP(mn)),mn.G={presentationTimeline:mn.j,variants:Un,textStreams:Bn,imageStreams:Gn,offlineSessionIds:[],minBufferTime:0,sequenceMode:!0},mn.i.makeTextStreamsForClosedCaptions(mn.G),ms(Ev)}})}function DP(mn){if(Sy(mn)){if(mn.P=mn.K,mn.aa==mw){var En=lw(mn);mn.g.hls.useSafariBehaviorForLive&&(En=mn.j.m),isNaN(mn.g.availabilityWindowOverride)||(En=mn.g.availabilityWindowOverride),mn.j.Re(En)}}else mn.j.Sa(lw(mn));mn.j.ve()}function B1(mn,En){var xn=new Map;En=Dn(En);for(var An=En.next();!An.done;An=En.next()){var Mn=An.value;An=Lu(Mn,"NAME");var Un=Lu(Mn,"VALUE");Mn=Lu(Mn,"IMPORT"),An&&Un&&xn.set(An,Un),Mn&&(An=mn.s.get(Mn))&&xn.set(Mn,An)}return xn}function aw(mn,En){var xn=ZC(En,"SUBTITLES");En=xn.map(function(Bn){if(mn.g.disableText)return null;try{return jP(mn,Bn).stream}catch(Gn){if(mn.g.hls.ignoreTextStreamFailures)return null;throw Gn}}),xn=Dn(xn);for(var An=xn.next();!An.done;An=xn.next()){var Mn=jl(An.value,"GROUP-ID");if((An=mn.B.get(Mn))&&(Mn=mn.C.get(Mn))){Mn=Dn(Mn);for(var Un=Mn.next();!Un.done;Un=Mn.next())Un=Un.value,Un.stream.codecs=An,Un.stream.mimeType=Y1(Vu,An)||X1(Vu)}}return En.filter(function(Bn){return Bn})}function LP(mn,En){var xn,An;return hs(function(Mn){return Mn.g==1?(xn=En.map(function(Un){var Bn,Gn;return hs(function(Wn){if(Wn.g==1)return mn.g.disableThumbnails?Wn.return(null):(Ts(Wn,2),Qn(Wn,FP(mn,Un),4));if(Wn.g!=2)return Bn=Wn.h,Wn.return(Bn.stream);if(Gn=_s(Wn),mn.g.hls.ignoreImageStreamFailures)return Wn.return(null);throw Gn})}),Qn(Mn,Promise.all(xn),2)):(An=Mn.h,Mn.return(An.filter(function(Un){return Un})))})}function ow(mn,En){En=En.filter(function(An){var Mn=Lu(An,"URI")||"";return Lu(An,"TYPE")!="SUBTITLES"&&Mn!=""}),En=Dn(En);for(var xn=En.next();!xn.done;xn=En.next())jP(mn,xn.value)}function ZR(mn,En,xn){var An=[],Mn=new Set;if(0<xn.length){xn=Dn(xn);for(var Un=xn.next();!Un.done;Un=xn.next()){Un=Un.value;var Bn=jl(Un,"METHOD");if(Bn!="NONE"&&Bn!="AES-128"&&(Bn=Lu(Un,"KEYFORMAT")||"identity",Un=(Bn=HP[Bn])?Bn(Un,""):null)){if(Un.keyIds){Bn=Dn(Un.keyIds);for(var Gn=Bn.next();!Gn.done;Gn=Bn.next())Mn.add(Gn.value)}An.push(Un)}}}return En=En.map(function(Wn){var ts=Lu(Wn,"FRAME-RATE"),os=Number(Lu(Wn,"AVERAGE-BANDWIDTH"))||Number(jl(Wn,"BANDWIDTH")),cs=Lu(Wn,"RESOLUTION");cs=Dn(cs?cs.split("x"):[null,null]);var ls=cs.next().value,gs=cs.next().value,ws=Lu(Wn,"VIDEO-RANGE");Wn=UP(mn,Wn),cs=Wn.audio,Wn=Wn.video;for(var Ns=Dn(Wn),Os=Ns.next();!Os.done;Os=Ns.next())(Os=Os.value.stream)&&(Os.width=Number(ls)||void 0,Os.height=Number(gs)||void 0,Os.frameRate=Number(ts)||void 0,Os.hdr=ws||void 0);for(ts=mn.g.disableAudio,(!cs.length||ts)&&(cs=[null]),ts=mn.g.disableVideo,(!Wn.length||ts)&&(Wn=[null]),ts=[],cs=Dn(cs),ls=cs.next();!ls.done;ls=cs.next())for(ls=ls.value,gs=Dn(Wn),ws=gs.next();!ws.done;ws=gs.next()){var Ps=ws.value;(ws=ls?ls.stream:null)&&(ws.drmInfos=An,ws.keyIds=Mn),(Ns=Ps?Ps.stream:null)&&(Ns.drmInfos=An,Ns.keyIds=Mn),Os=ls?ls.stream.drmInfos:null;var Xs=Ps?Ps.stream.drmInfos:null;Ps=(Ps?Ps.bd:"")+" - "+(ls?ls.bd:""),ws&&Ns&&Os.length&&Xs.length&&!(0<ZT(Os,Xs).length)||mn.ka.has(Ps)||(ws={id:mn.sa++,language:ws?ws.language:"und",primary:!!ws&&ws.primary||!!Ns&&Ns.primary,audio:ws,video:Ns,bandwidth:os,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},ts.push(ws),mn.ka.add(Ps))}return ts}).reduce(O0,[]),En=En.filter(function(Wn){return Wn!=null})}function UP(mn,En){var xn=sw(mn,En),An=Lu(En,"AUDIO"),Mn=Lu(En,"VIDEO"),Un=An||Mn;Un=Un&&mn.C.has(Un)?mn.C.get(Un):[],An={audio:An?Un:[],video:Mn?Un:[]},Mn=!1;var Bn=jl(En,"URI"),Gn=An.audio.find(function(os){return os&&os.bd==Bn}),Wn=ev("video",xn),ts=ev("audio",xn);return ts&&!Wn?Un="audio":!Un.length&&ts&&Wn?(Un="video",xn=[[Wn,ts].join()]):An.audio.length&&Gn?(Un="audio",Mn=!0):Un=An.video.length&&!An.audio.length?"audio":"video",Mn||(mn=BP(mn,En,xn,Un),An[mn.stream.type]=[mn]),An}function sw(mn,En){var xn=[];mn.g.disableVideo||xn.push(mn.g.hls.defaultVideoCodec),mn.g.disableAudio||xn.push(mn.g.hls.defaultAudioCodec),xn=Lu(En,"CODECS",xn.join(",")).split(/\s*,\s*/),mn=new Set,En=[],xn=Dn(xn);for(var An=xn.next();!An.done;An=xn.next()){An=An.value;var Mn=Hs(An)[0];mn.has(Mn)||(En.push(An),mn.add(Mn))}return En}function V1(mn){return mn=Lu(mn,"LANGUAGE")||"und",ol(mn)}function jP(mn,En){var xn=jl(En,"GROUP-ID"),An="",Mn=jl(En,"TYPE").toLowerCase();Mn=="subtitles"&&(Mn=Vu);var Un=Mn;if(Un==Vu?An=Lu(En,"CODECS")||"":xn&&mn.B.has(xn)&&(An=mn.B.get(xn)),Mn=b_(jl(En,"URI"),mn.s),mn.h.has(Mn))return mn.h.get(Mn);var Bn=V1(En),Gn=Lu(En,"NAME"),Wn=Lu(En,"DEFAULT")=="YES",ts=Un=="audio"&&(ts=Lu(En,"CHANNELS"))?parseInt(ts.split("/")[0],10):null,os=Un=="audio"&&(os=Lu(En,"CHANNELS"))?os.includes("/JOC"):!1,cs=Lu(En,"CHARACTERISTICS");return En=Lu(En,"FORCED")=="YES",An=uw(mn,Mn,An,Un,Bn,Wn,Gn,ts,null,cs,En,os),mn.C.has(xn)?mn.C.get(xn).push(An):mn.C.set(xn,[An]),mn.h.has(Mn)?mn.h.get(Mn):(mn.h.set(Mn,An),An)}function FP(mn,En){var xn,An,Mn,Un,Bn,Gn,Wn,ts,os,cs;return hs(function(ls){return ls.g==1?(xn=b_(jl(En,"URI"),mn.s),An=Lu(En,"CODECS","jpeg")||"",mn.h.has(xn)?ls.return(mn.h.get(xn)):(Mn=V1(En),Un=Lu(En,"NAME"),Bn=Lu(En,"CHARACTERISTICS"),Gn=uw(mn,xn,An,"image",Mn,!1,Un,null,null,Bn,!1,!1),mn.h.has(xn)?ls.return(mn.h.get(xn)):(Wn=Lu(En,"RESOLUTION"))?Qn(ls,Gn.stream.createSegmentIndex(),3):ls.D(2))):(ls.g!=2&&(ts=Gn.stream.segmentIndex.get(0),os=ts.tilesLayout)&&(Gn.stream.width=Number(Wn.split("x")[0])*Number(os.split("x")[0]),Gn.stream.height=Number(Wn.split("x")[1])*Number(os.split("x")[1])),(cs=Lu(En,"BANDWIDTH"))&&(Gn.stream.bandwidth=Number(cs)),mn.h.set(xn,Gn),ls.return(Gn))})}function BP(mn,En,xn,An){var Mn=b_(jl(En,"URI"),mn.s);return mn.h.has(Mn)||(En=Lu(En,"CLOSED-CAPTIONS"),En=An=="video"&&En&&En!="NONE"?mn.M.get(En):null,xn=Lm(An,xn),An=uw(mn,Mn,xn,An,"und",!1,null,null,En,null,!1,!1),mn.h.has(Mn))?mn.h.get(Mn):(mn.h.set(Mn,An),An)}function uw(mn,En,xn,An,Mn,Un,Bn,Gn,Wn,ts,os,cs){function ls(Xs){var Ds,qs,Qs,tu,ou,hu,gu,ju,Yu,Qu,dl,Nu,up,Cp;return hs(function(Dl){if(Dl.g==1)return Qn(Dl,Z1(mn,Ns.ld),2);if(Dl.g!=3)return Ds=Dl.h,Xs.aborted?Dl.return():(qs=Ds.uri,Qs=JC(mn.X,Ds.data,qs),tu=Sy(mn),Qn(Dl,k0(mn,Qs,En,qs,xn,An,Mn,Un,Bn,Gn,Wn,ts,os,cs),3));if(ou=Dl.h,Xs.aborted)return Dl.return();if(hu=ou.stream,Sy(mn)&&!tu&&zP(mn),Ns.ld=qs,Ns.Ab=ou.Ab,Ns.pd=ou.pd,Ns.Lc=ou.Lc,Ns.zd=ou.zd,Ns.ue=!0,ws.segmentIndex=hu.segmentIndex,ws.encrypted=hu.encrypted,ws.drmInfos=hu.drmInfos,ws.keyIds=hu.keyIds,ws.mimeType=hu.mimeType,Gy.includes(ws.mimeType)&&(ws.codecs=""),ws.drmInfos.length&&mn.i.newDrmInfo(ws),gu=Pu,An==gu.Ma||An==gu.jd)for(ju=Dn(mn.h.values()),Yu=ju.next();!Yu.done;Yu=ju.next())Qu=Yu.value,Qu.ue||Qu.type!=An||(Qu.stream.mimeType=hu.mimeType,Gy.includes(Qu.stream.mimeType)&&(Qu.stream.codecs=""));An==gu.ba&&(dl=hu.segmentIndex.get(0))&&dl.h&&(ws.mimeType="application/mp4"),GP(mn)&&(mn.ua?G1(mn,[Ns]):(mn.ua=!0,Nu=Array.from(mn.h.values()),up=Nu.filter(function(ty){return ty.stream.segmentIndex}),G1(mn,up),DP(mn),Cp=mn.P,0<Cp&&mn.m.R(Cp))),ms(Dl)})}var gs=S0(mn.O,En),ws=z1(mn,xn,An,Mn,Un,Bn,Gn,Wn,ts,os,cs);Gy.includes(ws.mimeType)&&(ws.codecs="");var Ns={stream:ws,type:An,bd:En,ld:gs,Ab:0,zd:new Map,pd:!1,Lc:!1,ke:-1,ue:!1},Os=null,Ps=new AbortController;return ws.createSegmentIndex=function(){return Os||(Ps=new AbortController,Os=new Promise(function(Xs){Xs(ls(Ps.signal))}))},ws.closeSegmentIndex=function(){Os&&!ws.segmentIndex&&Ps.abort(),ws.segmentIndex&&(ws.segmentIndex.release(),ws.segmentIndex=null),Os=null},Ns}function lw(mn){var En=1/0;mn=Dn(mn.h.values());for(var xn=mn.next();!xn.done;xn=mn.next())xn=xn.value,xn.stream.segmentIndex&&xn.stream.type!="text"&&(En=Math.min(En,xn.Ab));return En}function VP(mn,En){var xn=[];En=Dn(En);for(var An=En.next();!An.done;An=En.next())An=An.value,An.segmentIndex&&zk(An.segmentIndex,function(Mn){xn.push(Mn)});mn.j.lc(xn)}function G1(mn,En){if(!Sy(mn))for(var xn=lw(mn),An=Dn(En),Mn=An.next();!Mn.done;Mn=An.next())Mn.value.stream.segmentIndex.wb(0,xn);for(xn=Dn(En),Mn=xn.next();!Mn.done;Mn=xn.next())Mn=Mn.value.stream,Gy.includes(Mn.mimeType)&&(Mn.codecs="");VP(mn,En.map(function(Un){return Un.stream})),mn.g.hls.ignoreManifestProgramDateTime?NP(mn,En):nw(mn,En)}function GP(mn){if(!mn.G)return!1;var En=[],xn=[];mn=Dn(mn.G.variants);for(var An=mn.next();!An.done;An=mn.next())An=An.value,An.video&&En.push(An.video),An.audio&&xn.push(An.audio);return!(0<En.length&&!En.some(function(Mn){return Mn.segmentIndex})||0<xn.length&&!xn.some(function(Mn){return Mn.segmentIndex}))}function k0(mn,En,xn,An,Mn,Un,Bn,Gn,Wn,ts,os,cs,ls,gs,ws){var Ns,Os,Ps,Xs,Ds,qs,Qs,tu,ou,hu,gu,ju,Yu,Qu,dl;return hs(function(Nu){if(Nu.g==1){if(En.type!=1)throw new zs(2,4,4017);return Ns=_y(En.g,"EXT-X-DEFINE"),Os=B1(mn,Ns),K1(mn,En),ws?Nu.D(2):Qn(Nu,Q1(mn,Un,Mn,En,Os),3)}if(Nu.g!=2&&(ws=Nu.h),Ps=H1(En,ws),Xs=Ps.drmInfos,Ds=Ps.keyIds,qs=Ps.encrypted,Qs=Ps.mg,qs&&!Xs.length&&!Qs)throw new zs(2,4,4026);return tu=Sy(mn)?mn.H.get(Un):new Map,ou=mn.l,hu=q1(mn,En,Un,tu,Os),ou!=mn.l&&K1(mn,En),gu=hu[hu.length-1].endTime,ju=new vl(hu),Qu=(Yu=lm(En.g,"EXT-X-SERVER-CONTROL"))?Yu.getAttribute("CAN-SKIP-UNTIL")!=null:!1,dl=z1(mn,Mn,Un,Bn,Gn,Wn,ts,os,cs,ls,gs),dl.segmentIndex=ju,dl.encrypted=qs,dl.drmInfos=Xs,dl.keyIds=Ds,dl.mimeType=ws,Nu.return({stream:dl,type:Un,bd:xn,ld:An,Ab:gu,pd:Qu,Lc:!1,ke:-1,zd:tu,ue:!1})})}function z1(mn,En,xn,An,Mn,Un,Bn,Gn,Wn,ts,os){var cs=Y1(xn,En)||X1(xn);return{id:mn.sa++,originalId:Un,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:cs,codecs:En,kind:xn==Vu?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:An,label:Un,type:xn,primary:Mn,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:Wn?Wn.split(","):[],forced:ts,channelsCount:Bn,audioSamplingRate:null,spatialAudio:os,closedCaptions:Gn,hdr:void 0,tilesLayout:void 0}}function H1(mn,En){var xn=[];if(mn.segments){mn=Dn(mn.segments);for(var An=mn.next();!An.done;An=mn.next())An=_y(An.value.g,"EXT-X-KEY"),xn.push.apply(xn,Kn(An))}An=mn=!1;var Mn=[],Un=new Set;xn=Dn(xn);for(var Bn=xn.next();!Bn.done;Bn=xn.next()){Bn=Bn.value;var Gn=jl(Bn,"METHOD");if(Gn!="NONE"){if(mn=!0,Gn=="AES-128")An=!0;else if(Gn=Lu(Bn,"KEYFORMAT")||"identity",Bn=(Gn=HP[Gn])?Gn(Bn,En):null){if(Bn.keyIds){Gn=Dn(Bn.keyIds);for(var Wn=Gn.next();!Wn.done;Wn=Gn.next())Un.add(Wn.value)}Mn.push(Bn)}}}return{drmInfos:Mn,keyIds:Un,encrypted:mn,mg:An}}function JR(mn,En,xn){if(!pn.crypto||!pn.crypto.subtle)throw Tu("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new zs(2,4,4042);var An=0,Mn=Lu(En,"IV","");if(Mn){var Un=n_(Mn.substr(2));if(Un.byteLength!=16)throw new zs(2,4,4043)}else An=rT(xn.g,"EXT-X-MEDIA-SEQUENCE");En=S0(xn.h,jl(En,"URI"));var Bn=ll([En],mn.g.retryParameters),Gn={method:"AES-128",iv:Un,firstMediaSequenceNumber:An,fetchKey:function(){var Wn,ts,os;return hs(function(cs){if(cs.g==1)return Qn(cs,aT(mn,Bn,6),2);if(cs.g!=3){if(Wn=cs.h,!Wn.data||Wn.data.byteLength!=16)throw new zs(2,4,4044);return ts={name:"AES-CBC"},os=Gn,Qn(cs,pn.crypto.subtle.importKey("raw",Wn.data,ts,!0,["decrypt"]),3)}os.cryptoKey=cs.h,Gn.fetchKey=void 0,ms(cs)})}};return Gn}function K1(mn,En){var xn=lm(En.g,"EXT-X-PLAYLIST-TYPE"),An=lm(En.g,"EXT-X-ENDLIST");if(An=xn&&xn.value=="VOD"||An,xn=xn&&xn.value=="EVENT"&&!An,xn=!An&&!xn,An)iT(mn,e$);else{if(xn?iT(mn,mw):iT(mn,KP),An=lm(En.g,"EXT-X-TARGETDURATION"),!An)throw new zs(2,4,4024,"EXT-X-TARGETDURATION");An=Number(An.value),xn=lm(En.g,"EXT-X-PART-INF"),mn.l&&xn?(mn.ra=Number(jl(xn,"PART-TARGET")),mn.K=Math.min(mn.ra,mn.K),En=lm(En.g,"EXT-X-SERVER-CONTROL"),mn.V=En?Number(jl(En,"PART-HOLD-BACK")):0):mn.K=Math.min(An,mn.K),mn.$=Math.max(An,mn.$)}}function zP(mn){var En=mn.g.defaultPresentationDelay?mn.g.defaultPresentationDelay:mn.V?mn.V:mn.$*mn.g.hls.liveSegmentsDelay;mn.j.Yf(0),mn.j.Vf(En),mn.j.$c(!1)}function Ey(mn,En,xn,An){if(xn=lm(xn,"EXT-X-MAP"),!xn)return null;var Mn=jl(xn,"URI");return An=b_(S0(En,Mn),An),En=[An,Lu(xn,"BYTERANGE","")].join("-"),mn.Z.has(En)||(xn=W1(An,xn),mn.Z.set(En,xn)),mn.Z.get(En)}function W1(mn,En){var xn=0,An=null;return(En=Lu(En,"BYTERANGE"))&&(xn=En.split("@"),An=Number(xn[0]),xn=Number(xn[1]),An=xn+An-1),new Km(function(){return[mn]},xn,An)}function cw(mn,En,xn,An,Mn,Un,Bn,Gn,Wn,ts){var os=An.g,cs=b_(An.i,Un),ls=lm(os,"EXTINF"),gs=Un=0,ws=null;An.h.length&&!mn.l&&Tu("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.");var Ns=null;if(!mn.g.hls.ignoreManifestProgramDateTime){var Os=lm(os,"EXT-X-PROGRAM-DATE-TIME");Os&&Os.value&&(Ns=K0(Os.value))}if(Os=kS,lm(os,"EXT-X-GAP")&&(Os=2),!ls){if(An.h.length==0)throw new zs(2,4,4024,"EXTINF");if(!mn.l)return null}var Ps=[];if(mn.l)for(var Xs={},Ds=0;Ds<An.h.length;Xs={Wd:Xs.Wd},Ds++){var qs=An.h[Ds],Qs=Ds==0?xn:Ps[Ps.length-1],tu=Ds==0?Mn:Qs.endTime,ou=Number(Lu(qs,"DURATION"))||mn.ra;if(ou){ou=tu+ou;var hu=0,gu=null;qs.name=="EXT-X-PRELOAD-HINT"?hu=(hu=Lu(qs,"BYTERANGE-START"))?Number(hu):0:(hu=Lu(qs,"BYTERANGE"),gu=Dn(dw(Qs,hu)),hu=gu.next().value,gu=gu.next().value),(Qs=Lu(qs,"URI"))&&(Xs.Wd=S0(Bn,Qs),Qs=kS,Lu(qs,"GAP")=="YES"&&(Qs=2),Ps.push(new rl(tu,ou,function(ju){return function(){return[ju.Wd]}}(Xs),hu,gu,En,0,0,1/0,[],"",null,null,Qs)))}}return ls?Un=Mn+Number(ls.value.split(",")[0]):Un=Ps[Ps.length-1].endTime,(mn=lm(os,"EXT-X-BYTERANGE"))?(ws=Dn(dw(xn,mn.value)),gs=ws.next().value,ws=ws.next().value):Ps.length&&(gs=Ps[0].Ta,ws=Ps[Ps.length-1].Ca),xn="",mn=null,Gn=="image"&&(xn="1x1",Gn=lm(os,"EXT-X-TILES"))&&(xn=jl(Gn,"LAYOUT"),(Gn=Lu(Gn,"DURATION"))&&(mn=Number(Gn))),new rl(Mn,Un,function(){return cs.length?[cs]:[]},gs,ws,En,Wn,0,1/0,Ps,xn,mn,Ns,Os,ts)}function dw(mn,En){var xn=0,An=null;return En&&(xn=En.split("@"),En=Number(xn[0]),xn=xn[1]?Number(xn[1]):mn.Ca+1,An=xn+En-1),[xn,An]}function q1(mn,En,xn,An,Mn){var Un=En.segments,Bn=void 0,Gn=rT(En.g,"EXT-X-DISCONTINUITY-SEQUENCE"),Wn=rT(En.g,"EXT-X-MEDIA-SEQUENCE"),ts=lm(En.g,"EXT-X-SKIP");ts=ts?Number(Lu(ts,"SKIPPED-SEGMENTS")):0;var os=Wn+ts,cs=0;Sy(mn)&&An.has(os)&&(cs=An.get(os));for(var ls=[],gs=null,ws=cs,Ns=0;Ns<Un.length;Ns++){var Os=Un[Ns],Ps=Ns==0?cs:gs.endTime;os=Wn+ts+Ns,lm(Os.g,"EXT-X-DISCONTINUITY")&&(Gn++,ws=Ps);for(var Xs=Dn(Os.g),Ds=Xs.next();!Ds.done;Ds=Xs.next())Ds=Ds.value,Ds.name=="EXT-X-KEY"&&(jl(Ds,"METHOD")=="AES-128"?Bn=JR(mn,Ds,En):Bn=void 0);An.set(os,Ps),Xs=Ey(mn,En.h,Os.g,Mn),!mn.l&&mn.i.isAutoLowLatencyMode()&&(mn.i.enableLowLatencyMode(),mn.l=mn.i.isLowLatencyMode()),(gs=Os=cw(mn,Xs,gs,Os,Ps,Mn,En.h,xn,ws,Bn))&&(Os.j=Gn,mn.g.hls.ignoreManifestProgramDateTime&&mn.F!=null&&os<mn.F||ls.push(Os))}if(En=ls.some(function(qs){return qs.g!=null})){for(xn={},An=0;An<ls.length;xn={tc:xn.tc,sc:xn.sc,cd:xn.cd,qb:xn.qb,rc:xn.rc},An++)if(xn.qb=ls[An],xn.qb.g==null)for(xn.sc=0,xn.tc=An,Mn=function(qs){return function(){var Qs=ls[qs.tc];if(Qs){if(Qs.g!=null)return Qs.g+qs.sc;qs.sc-=Qs.endTime-Qs.startTime,qs.tc+=1}return null}}(xn),xn.rc=0,xn.cd=An,Un=function(qs){return function(){var Qs=ls[qs.cd];if(Qs){if(Qs!=qs.qb&&(qs.rc+=Qs.endTime-Qs.startTime),Qs.g!=null)return Qs.g+qs.rc;--qs.cd}return null}}(xn);xn.qb.g==null;)xn.qb.g=Un(),xn.qb.g==null&&(xn.qb.g=Mn())}if(En)for(xn=Dn(ls),An=xn.next();!An.done;An=xn.next())for(Mn=An.value,An=Mn.g,Mn=Dn(Mn.i),Un=Mn.next();!Un.done;Un=Mn.next())Un=Un.value,Un.g=An,An+=Un.endTime-Un.startTime;if(mn=mn.J,En&&mn!=1/0)for(En=Dn(ls),An=En.next();!An.done;An=En.next())An.value.Ve(mn);return ls}function b_(mn,En){mn=String(mn).replace(/%7B/g,"{").replace(/%7D/g,"}");var xn=mn.match(/{\$\w*}/g);if(xn){xn=Dn(xn);for(var An=xn.next();!An.done;An=xn.next()){An=An.value;var Mn=An.slice(2,An.length-1),Un=En.get(Mn);if(Un)mn=mn.replace(An,Un);else throw new zs(2,4,4039,Mn)}}return mn}function Y1(mn,En){if(mn==Vu){if(En=="vtt"||En=="wvtt")return"text/vtt";if(En&&En!=="")return"application/mp4"}return mn!="image"||En&&En!="jpeg"?mn=="audio"&&En=="mp4a.40.34"?"audio/mpeg":null:"image/jpeg"}function X1(mn){return mn==Vu?"text/vtt":hw[mn].mp4}function Q1(mn,En,xn,An,Mn){var Un,Bn,Gn,Wn,ts,os,cs,ls,gs,ws;return hs(function(Ns){return Ns.g==1?(Un=Pv,Bn=Math.trunc((An.segments.length-1)/2),Gn=b_(An.segments[Bn].i,Mn),Wn=new Iu(Gn),ts=Wn.Ha.split(".").pop(),os=hw[En],(cs=os[ts])||(cs=oT[ts])||(cs=Y1(En,xn))?Ns.return(cs):(ls=ll([Gn],mn.g.retryParameters),ls.method="HEAD",Qn(Ns,aT(mn,ls,Un),2))):(gs=Ns.h,(ws=gs.headers["content-type"])?Ns.return(ws.split(";")[0]):Ns.return(X1(En)))})}function Z1(mn,En){return En=ll([En],mn.g.retryParameters),mn.i.modifyManifestRequest(En,{format:"h"}),aT(mn,En,0)}function fw(mn){var En,xn;hs(function(An){if(An.g==1)return mn.i?(Ts(An,2),Qn(An,mn.update(),4)):An.return();if(An.g!=2)return Sy(mn)&&(En=mn.P,mn.m.R(En)),ys(An,0);if(xn=_s(An),!mn.i)return An.return();xn.severity=1,mn.i.onError(xn),mn.m.R(.1),ms(An)})}function Sy(mn){return mn.aa!=e$}function iT(mn,En){mn.aa=En,mn.j&&mn.j.$c(!Sy(mn)),Sy(mn)||mn.m.stop()}function aT(mn,En,xn){if(!mn.I)throw new zs(2,7,7001);return En=mn.i.networkingEngine.request(xn,En),H_(mn.I,En),En.promise}Ys("shaka.hls.HlsParser",nT);var oT={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},pw={mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",tsa:"video/mp2t"},J1={mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t",tsv:"video/mp2t"},hw={audio:pw,video:J1,text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},HP={"com.apple.streamingkeydelivery":function(mn,En){if(En=="video/mp2t")throw new zs(2,4,4040);if(pn.shakaMediaKeysPolyfill)throw new zs(2,4,4041);return Mp("com.apple.fps",[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}])},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(mn){var En=jl(mn,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(En)?(En=jl(mn,"URI"),En=tw(En),En=Ku(En.data),En=Mp("com.widevine.alpha",[{initDataType:"cenc",initData:En}]),(mn=Lu(mn,"KEYID"))&&(En.keyIds=new Set([mn.toLowerCase().substr(2)])),En):null},"com.microsoft.playready":function(mn){var En=jl(mn,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(En)?(mn=jl(mn,"URI"),mn=tw(mn),mn=Ku(mn.data),En=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),mn=z0(mn,En,new Set,0),Mp("com.microsoft.playready",[{initDataType:"cenc",initData:mn}])):null},identity:function(mn){return mn=jl(mn,"METHOD"),["SAMPLE-AES","SAMPLE-AES-CTR"].includes(mn)?Mp("org.w3.clearkey",null):null}},e$="VOD",KP="EVENT",mw="LIVE",WP={ig:e$,ei:KP,gg:mw};wl("Tizen 3")||wl("Tizen 2")||XE()||(d_.m3u8=function(){return new nT},zm["application/x-mpegurl"]=function(){return new nT},zm["application/vnd.apple.mpegurl"]=function(){return new nT});function sT(mn,En,xn,An,Mn,Un){if(200<=xn&&299>=xn&&xn!=202)return{uri:Mn||An,originalUri:An,data:En,status:xn,headers:mn,fromCache:!!mn["x-shaka-from-cache"]};Mn=null;try{Mn=Bm(En)}catch{}throw new zs(xn==401||xn==403?2:1,1,1001,An,xn,Mn,mn,Un)}function t$(){}function r$(mn,En,xn,An,Mn){var Un=new eN;Mv(En.headers).forEach(function(ts,os){Un.append(os,ts)});var Bn=new QP,Gn={wf:!1,dg:!1};if(mn=qP(mn,xn,{body:En.body||void 0,headers:Un,method:En.method,signal:Bn.signal,credentials:En.allowCrossSiteCredentials?"include":void 0},Gn,An,Mn,En.streamDataCallback),mn=new Al(mn,function(){return Gn.wf=!0,Bn.abort(),Promise.resolve()}),En=En.retryParameters.timeout){var Wn=new ku(function(){Gn.dg=!0,Bn.abort()});Wn.R(En/1e3),mn.finally(function(){Wn.stop()})}return mn}function qP(mn,En,xn,An,Mn,Un,Bn){var Gn,Wn,ts,os,cs,ls,gs,ws,Ns,Os,Ps,Xs,Ds;return hs(function(qs){switch(qs.g){case 1:return Gn=XP,Wn=ZP,ls=cs=0,gs=Date.now(),Ts(qs,2),Qn(qs,Gn(mn,xn),4);case 4:if(ts=qs.h,Un(n$(ts.headers)),xn.method=="HEAD"){qs.D(5);break}return ws=ts.clone().body.getReader(),Os=(Ns=ts.headers.get("Content-Length"))?parseInt(Ns,10):0,Ps=function(Qs){function tu(){var ou,hu;return hs(function(gu){switch(gu.g){case 1:return Ts(gu,2),Qn(gu,ws.read(),4);case 4:ou=gu.h,ys(gu,3);break;case 2:return _s(gu),gu.return();case 3:if(ou.done){gu.D(5);break}if(cs+=ou.value.byteLength,!Bn){gu.D(5);break}return Qn(gu,Bn(ou.value),5);case 5:hu=Date.now(),(100<hu-gs||ou.done)&&(Mn(hu-gs,cs-ls,Os-cs),ls=cs,gs=hu),ou.done?Qs.close():(Qs.enqueue(ou.value),tu()),ms(gu)}})}tu()},new Wn({start:Ps}),Qn(qs,ts.arrayBuffer(),6);case 6:os=qs.h;case 5:ys(qs,3);break;case 2:throw Xs=_s(qs),An.wf?new zs(1,1,7001,mn,En):An.dg?new zs(1,1,1003,mn,En):new zs(1,1,1002,mn,Xs,En);case 3:return Ds=n$(ts.headers),qs.return(sT(Ds,os,ts.status,mn,ts.url,En))}})}function n$(mn){var En={};return mn.forEach(function(xn,An){En[An.trim()]=xn}),En}function YP(){if(pn.ReadableStream)try{new ReadableStream({})}catch{return!1}else return!1;if(pn.Response){if(!new Response("").body)return!1}else return!1;return!(!pn.fetch||!pn.AbortController)}Ys("shaka.net.HttpFetchPlugin",t$),t$.isSupported=YP,t$.parse=r$;var XP=pn.fetch,QP=pn.AbortController,ZP=pn.ReadableStream,eN=pn.Headers;YP()&&(gm("http",r$,2,!0),gm("https",r$,2,!0),gm("blob",r$,2,!0));function i$(){}function a$(mn,En,xn,An,Mn){var Un=new tN,Bn=Date.now(),Gn=0,Wn=new Promise(function(ts,os){Un.open(En.method,mn,!0),Un.responseType="arraybuffer",Un.timeout=En.retryParameters.timeout,Un.withCredentials=En.allowCrossSiteCredentials,Un.onabort=function(){os(new zs(1,1,7001,mn,xn))};var cs=!1;Un.onreadystatechange=function(){if(Un.readyState==2&&!cs){var gs=JP(Un);Mn(gs),cs=!0}},Un.onload=function(){var gs=JP(Un),ws=Un.response;try{var Ns=sT(gs,ws,Un.status,mn,Un.responseURL,xn);ts(Ns)}catch(Os){os(Os)}},Un.onerror=function(gs){os(new zs(1,1,1002,mn,gs,xn))},Un.ontimeout=function(){os(new zs(1,1,1003,mn,xn))},Un.onprogress=function(gs){var ws=Date.now();(100<ws-Bn||gs.lengthComputable&&gs.loaded==gs.total)&&(An(ws-Bn,gs.loaded-Gn,gs.total-gs.loaded),Gn=gs.loaded,Bn=ws)};for(var ls in En.headers)Un.setRequestHeader(ls.toLowerCase(),En.headers[ls]);Un.send(En.body)});return new Al(Wn,function(){return Un.abort(),Promise.resolve()})}function JP(mn){var En=mn.getAllResponseHeaders().trim().split(`\r
`);mn={},En=Dn(En);for(var xn=En.next();!xn.done;xn=En.next())xn=xn.value.split(": "),mn[xn[0].toLowerCase()]=xn.slice(1).join(": ");return mn}Ys("shaka.net.HttpXHRPlugin",i$),i$.parse=a$;var tN=pn.XMLHttpRequest;gm("http",a$,1,!0),gm("https",a$,1,!0),gm("blob",a$,1,!0);function uT(mn,En,xn,An){this.g=mn,this.i=En,this.groupId=xn,this.h=An}function lT(mn){return mn.Pa().map(function(En){return"{"+encodeURI(En)+"}"}).join("")+":"+mn.Ta+":"+mn.Ca}function gw(mn,En){return g_(mn.g.Pa(),mn.g.Ta,mn.g.Ca,En.streaming.retryParameters)}function x_(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function cT(mn,En){mn.i+=En;var xn=mn.l;return mn.l++,mn.g.set(xn,En),xn}x_.prototype.close=function(mn,En){if(this.g.has(mn)){var xn=this.g.get(mn);this.g.delete(mn),this.j+=xn,this.h+=En}};function C_(mn){var En=this;this.s=mn,this.j=new Map,this.i=new Ov(function(){return o$(En).catch(function(){})}),this.h=[],this.m=function(){},this.l=function(){},this.g=new x_}C_.prototype.destroy=function(){return this.i.destroy()};function rN(mn,En,xn){mn.m=En,mn.l=xn}function o$(mn){var En=mn.h.map(function(xn){return xn()});return mn.h=[],Promise.all(En)}function eO(mn,En,xn,An,Mn,Un){Ol(mn.i);var Bn=(mn.j.get(En)||Promise.resolve()).then(function(){var Gn,Wn,ts,os,cs,ls,gs;return hs(function(ws){if(ws.g==1)return Qn(ws,dT(mn,xn),2);if(Gn=ws.h,mn.i.g)throw new zs(2,9,7001);if(Mn)for(os in Wn=Ku(Gn),ts=new ov(Wn),ts.data)cs=Number(os),ls=ts.data[cs],gs=ts.g[cs],mn.l(ls,gs);mn.g.close(An,Gn.byteLength);var Ns=mn.g;return mn.m(Ns.i==0?0:Ns.j/Ns.i,mn.g.h),ws.return(Un(Gn))})});mn.j.set(En,Bn)}function tO(mn){return hs(function(En){return En.g==1?Qn(En,Promise.all(mn.j.values()),2):En.return(mn.g.h)})}function dT(mn,En){var xn,An,Mn,Un;return hs(function(Bn){return Bn.g==1?(xn=Pv,An=mn.s.request(xn,En),Mn=function(){return An.abort()},mn.h.push(Mn),Qn(Bn,An.promise,2)):(Un=Bn.h,Wu(mn.h,Mn),Bn.return(Un.data))})}function Fp(mn,En){var xn=this;this.i=mn,this.h=mn.objectStore(En),this.g=new _l,mn.onabort=function(An){An.preventDefault(),xn.g.reject()},mn.onerror=function(An){An.preventDefault(),xn.g.reject()},mn.oncomplete=function(){xn.g.resolve()}}Fp.prototype.abort=function(){var mn=this;return hs(function(En){if(En.g==1){try{mn.i.abort()}catch{}return Ts(En,2),Qn(En,mn.g,4)}if(En.g!=2)return ys(En,0);_s(En),ms(En)})};function s$(mn,En){return new Promise(function(xn,An){var Mn=mn.h.openCursor();Mn.onerror=An,Mn.onsuccess=function(){var Un;return hs(function(Bn){if(Bn.g==1)return Mn.result==null?(xn(),Bn.return()):(Un=Mn.result,Qn(Bn,En(Un.key,Un.value,Un),2));Un.continue(),ms(Bn)})}})}Fp.prototype.store=function(){return this.h},Fp.prototype.promise=function(){return this.g};function yw(mn){this.h=mn,this.g=[]}yw.prototype.destroy=function(){return Promise.all(this.g.map(function(mn){return mn.abort()}))};function vv(mn,En){return u$(mn,En,"readwrite")}function u$(mn,En,xn){xn=mn.h.transaction([En],xn);var An=new Fp(xn,En);return mn.g.push(An),An.promise().then(function(){Wu(mn.g,An)},function(){Wu(mn.g,An)}),An}function $0(mn,En,xn){this.h=new yw(mn),this.i=En,this.g=xn}Sn=$0.prototype,Sn.destroy=function(){return this.h.destroy()},Sn.hasFixedKeySpace=function(){return!0},Sn.addSegments=function(){return vw(this.i)},Sn.removeSegments=function(mn,En){return ME(this,this.i,mn,En)},Sn.getSegments=function(mn){var En=this,xn;return hs(function(An){return An.g==1?Qn(An,RE(En,En.i,mn),2):(xn=An.h,An.return(xn.map(function(Mn){return En.zf(Mn)})))})},Sn.addManifests=function(){return vw(this.g)},Sn.updateManifest=function(){return Promise.reject(new zs(2,9,9016,"Cannot modify values in "+this.g))};function nN(mn,En,xn){mn=vv(mn.h,mn.g);var An=mn.store();return An.get(En).onsuccess=function(){An.put(xn,En)},mn.promise()}Sn.updateManifestExpiration=function(mn,En){var xn=vv(this.h,this.g),An=xn.store();return An.get(mn).onsuccess=function(Mn){(Mn=Mn.target.result)&&(Mn.expiration=En,An.put(Mn,mn))},xn.promise()},Sn.removeManifests=function(mn,En){return ME(this,this.g,mn,En)},Sn.getManifests=function(mn){var En=this,xn;return hs(function(An){return An.g==1?Qn(An,RE(En,En.g,mn),2):(xn=An.h,An.return(Promise.all(xn.map(function(Mn){return En.Dc(Mn)}))))})},Sn.getAllManifests=function(){var mn=this,En,xn;return hs(function(An){return An.g==1?(En=u$(mn.h,mn.g,"readonly"),xn=new Map,Qn(An,s$(En,function(Mn,Un){var Bn;return hs(function(Gn){if(Gn.g==1)return Qn(Gn,mn.Dc(Un),2);Bn=Gn.h,xn.set(Mn,Bn),ms(Gn)})}),2)):An.g!=3?Qn(An,En.promise(),3):An.return(xn)})},Sn.zf=function(mn){return mn},Sn.Dc=function(mn){return Promise.resolve(mn)};function vw(mn){return Promise.reject(new zs(2,9,9011,"Cannot add new value to "+mn))}Sn.add=function(mn,En){var xn=this,An,Mn,Un,Bn,Gn,Wn,ts;return hs(function(os){if(os.g==1){for(An=vv(xn.h,mn),Mn=An.store(),Un=[],Bn={},Gn=Dn(En),Wn=Gn.next();!Wn.done;Bn={gd:Bn.gd},Wn=Gn.next())ts=Wn.value,Bn.gd=Mn.add(ts),Bn.gd.onsuccess=function(cs){return function(){Un.push(cs.gd.result)}}(Bn);return Qn(os,An.promise(),2)}return os.return(Un)})};function ME(mn,En,xn,An){mn=vv(mn.h,En),En=mn.store();var Mn={};xn=Dn(xn);for(var Un=xn.next();!Un.done;Mn={fd:Mn.fd},Un=xn.next())Mn.fd=Un.value,En.delete(Mn.fd).onsuccess=function(Bn){return function(){return An(Bn.fd)}}(Mn);return mn.promise()}function RE(mn,En,xn){var An,Mn,Un,Bn,Gn,Wn,ts;return hs(function(os){if(os.g==1){for(An=u$(mn.h,En,"readonly"),Mn=An.store(),Un={},Bn=[],Gn={},Wn=Dn(xn),ts=Wn.next();!ts.done;Gn={zc:Gn.zc,wc:Gn.wc},ts=Wn.next())Gn.wc=ts.value,Gn.zc=Mn.get(Gn.wc),Gn.zc.onsuccess=function(cs){return function(){cs.zc.result==null&&Bn.push(cs.wc),Un[cs.wc]=cs.zc.result}}(Gn);return Qn(os,An.promise(),2)}if(Bn.length)throw new zs(2,9,9012,"Could not find values for "+Bn);return os.return(xn.map(function(cs){return Un[cs]}))})}function fT(mn){this.g=new yw(mn)}fT.prototype.destroy=function(){return this.g.destroy()},fT.prototype.getAll=function(){var mn=this,En,xn;return hs(function(An){return An.g==1?(En=u$(mn.g,"session-ids","readonly"),xn=[],Qn(An,s$(En,function(Mn,Un){xn.push(Un)}),2)):An.g!=3?Qn(An,En.promise(),3):An.return(xn)})},fT.prototype.add=function(mn){var En=vv(this.g,"session-ids"),xn=En.store();mn=Dn(mn);for(var An=mn.next();!An.done;An=mn.next())xn.add(An.value);return En.promise()},fT.prototype.remove=function(mn){var En=this,xn;return hs(function(An){return An.g==1?(xn=vv(En.g,"session-ids"),Qn(An,s$(xn,function(Mn,Un,Bn){mn.includes(Un.sessionId)&&Bn.delete()}),2)):Qn(An,xn.promise(),0)})};function cm(){this.g=new Map}cm.prototype.destroy=function(){for(var mn=[],En=Dn(this.g.values()),xn=En.next();!xn.done;xn=En.next())mn.push(xn.value.destroy());return this.g.clear(),Promise.all(mn)},cm.prototype.init=function(){var mn=this;Om.forEach(function(Mn,Un){(Mn=Mn())&&mn.g.set(Un,Mn)});for(var En=[],xn=Dn(this.g.values()),An=xn.next();!An.done;An=xn.next())En.push(An.value.init());return Promise.all(En)};function _w(mn){var En=null;if(mn.g.forEach(function(xn,An){xn.getCells().forEach(function(Mn,Un){Mn.hasFixedKeySpace()||En||(En={path:{Ra:An,Ba:Un},Ba:Mn})})}),En)return En;throw new zs(2,9,9013,"Could not find a cell that supports add-operations")}function iN(mn,En){mn.g.forEach(function(xn,An){xn.getCells().forEach(function(Mn,Un){En({Ra:An,Ba:Un},Mn)})})}function b0(mn,En,xn){if(mn=mn.g.get(En),!mn)throw new zs(2,9,9013,"Could not find mechanism with name "+En);if(En=mn.getCells().get(xn),!En)throw new zs(2,9,9013,"Could not find cell with name "+xn);return En}function aN(mn,En){mn.g.forEach(function(xn){En(xn.getEmeSessionCell())})}function Ew(mn){var En=Array.from(mn.g.keys());if(!En.length)throw new zs(2,9,9e3,"No supported storage mechanisms found");return mn.g.get(En[0]).getEmeSessionCell()}function rO(mn){var En,xn,An;return hs(function(Mn){return Mn.g==1?(En=Array.from(mn.g.values()),xn=0<En.length,xn||(An=Om,An.forEach(function(Un){(Un=Un())&&En.push(Un)})),Qn(Mn,Promise.all(En.map(function(Un){return Un.erase()})),2)):xn?Mn.D(0):Qn(Mn,Promise.all(En.map(function(Un){return Un.destroy()})),0)})}function nO(mn,En){Om.set(mn,En)}Ys("shaka.offline.StorageMuxer",cm),cm.unregister=function(mn){Om.delete(mn)},cm.register=nO,cm.prototype.destroy=cm.prototype.destroy;var Om=new Map;function x0(){$0.apply(this,arguments)}as(x0,$0),x0.prototype.updateManifestExpiration=function(mn,En){var xn=this,An,Mn,Un;return hs(function(Bn){return An=vv(xn.h,xn.g),Mn=An.store(),Un=new _l,Mn.get(mn).onsuccess=function(Gn){(Gn=Gn.target.result)?(Gn.expiration=En,Mn.put(Gn),Un.resolve()):Un.reject(new zs(2,9,9012,"Could not find values for "+mn))},Qn(Bn,Promise.all([An.promise(),Un]),0)})},x0.prototype.Dc=function(mn){var En,xn,An,Mn,Un,Bn;return hs(function(Gn){if(Gn.g==1){for(En=[],xn=0;xn<mn.periods.length;++xn)An=xn==mn.periods.length-1?mn.duration:mn.periods[xn+1].startTime,Mn=An-mn.periods[xn].startTime,Un=iO(mn.periods[xn],Mn),En.push(Un);return Qn(Gn,KC(En),2)}return Bn=Gn.h,Gn.return({creationTime:0,originalManifestUri:mn.originalManifestUri,duration:mn.duration,size:mn.size,expiration:mn.expiration==null?1/0:mn.expiration,streams:Bn,sessionIds:mn.sessionIds,drmInfo:mn.drmInfo,appMetadata:mn.appMetadata,sequenceMode:!1})})};function iO(mn,En){l$(mn);for(var xn=Dn(mn.streams),An=xn.next();!An.done;An=xn.next());return mn.streams.map(function(Mn){return aO(Mn,mn.startTime,En)})}function aO(mn,En,xn){var An=mn.initSegmentUri?oO(mn.initSegmentUri):null,Mn=En+mn.presentationTimeOffset,Un=En+xn;return{id:mn.id,originalId:null,primary:mn.primary,type:mn.contentType,mimeType:mn.mimeType,codecs:mn.codecs,frameRate:mn.frameRate,pixelAspectRatio:void 0,hdr:void 0,kind:mn.kind,language:mn.language,label:mn.label,width:mn.width,height:mn.height,initSegmentKey:An,encrypted:mn.encrypted,keyIds:new Set([mn.keyId]),segments:mn.segments.map(function(Bn){var Gn=oO(Bn.uri);return{startTime:En+Bn.startTime,endTime:En+Bn.endTime,dataKey:Gn,initSegmentKey:An,appendWindowStart:En,appendWindowEnd:Un,timestampOffset:Mn,tilesLayout:""}}),variantIds:mn.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0}}x0.prototype.zf=function(mn){return{data:mn.data}};function oO(mn){var En;if((En=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(mn))||(En=/^offline:segment\/([0-9]+)$/.exec(mn)))return Number(En[1]);throw new zs(2,9,9004,"Could not parse uri "+mn)}function l$(mn){var En=mn.streams.filter(function(Gn){return Gn.contentType=="audio"});if(mn=mn.streams.filter(function(Gn){return Gn.contentType=="video"}),!En.every(function(Gn){return Gn.variantIds})||!mn.every(function(Gn){return Gn.variantIds})){for(var xn=Dn(En),An=xn.next();!An.done;An=xn.next())An.value.variantIds=[];for(xn=Dn(mn),An=xn.next();!An.done;An=xn.next())An.value.variantIds=[];if(xn=0,mn.length&&!En.length){var Mn=xn++,Un=Dn(mn);for(An=Un.next();!An.done;An=Un.next())An.value.variantIds.push(Mn)}if(!mn.length&&En.length)for(Mn=xn++,Un=Dn(En),An=Un.next();!An.done;An=Un.next())An.value.variantIds.push(Mn);if(mn.length&&En.length)for(En=Dn(En),An=En.next();!An.done;An=En.next())for(An=An.value,Mn=Dn(mn),Un=Mn.next();!Un.done;Un=Mn.next()){Un=Un.value;var Bn=xn++;An.variantIds.push(Bn),Un.variantIds.push(Bn)}}}function c$(){$0.apply(this,arguments)}as(c$,$0),c$.prototype.Dc=function(mn){var En,xn,An,Mn,Un,Bn;return hs(function(Gn){if(Gn.g==1){for(En=[],xn=0;xn<mn.periods.length;++xn){An=xn==mn.periods.length-1?mn.duration:mn.periods[xn+1].startTime,Mn=An-mn.periods[xn].startTime;for(var Wn=mn.periods[xn],ts=[],os=Dn(Wn.streams),cs=os.next();!cs.done;cs=os.next())cs=cs.value,cs.variantIds.length!=0&&ts.push(oN(cs,Wn.startTime,Wn.startTime+Mn));Un=ts,En.push(Un)}return Qn(Gn,KC(En),2)}return Bn=Gn.h,Gn.return({appMetadata:mn.appMetadata,creationTime:0,drmInfo:mn.drmInfo,duration:mn.duration,expiration:mn.expiration==null?1/0:mn.expiration,originalManifestUri:mn.originalManifestUri,sessionIds:mn.sessionIds,size:mn.size,streams:Bn,sequenceMode:!1})})};function oN(mn,En,xn){return{id:mn.id,originalId:mn.originalId,primary:mn.primary,type:mn.contentType,mimeType:mn.mimeType,codecs:mn.codecs,frameRate:mn.frameRate,pixelAspectRatio:mn.pixelAspectRatio,hdr:void 0,kind:mn.kind,language:mn.language,label:mn.label,width:mn.width,height:mn.height,encrypted:mn.encrypted,keyIds:new Set([mn.keyId]),segments:mn.segments.map(function(An){return{startTime:En+An.startTime,endTime:En+An.endTime,initSegmentKey:mn.initSegmentKey,appendWindowStart:En,appendWindowEnd:xn,timestampOffset:En-mn.presentationTimeOffset,dataKey:An.dataKey,tilesLayout:""}}),variantIds:mn.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0}}function d$(){$0.apply(this,arguments)}as(d$,$0),Sn=d$.prototype,Sn.hasFixedKeySpace=function(){return!1},Sn.addSegments=function(mn){return this.add(this.i,mn)},Sn.addManifests=function(mn){return this.add(this.g,mn)},Sn.updateManifest=function(mn,En){return nN(this,mn,En)},Sn.Dc=function(mn){return mn.expiration==null&&(mn.expiration=1/0),Promise.resolve(mn)};function Sw(){this.m=this.j=this.i=this.h=this.g=this.l=null}Sn=Sw.prototype,Sn.init=function(){var mn=this,En=new _l,xn=!1,An=new ku(function(){xn=!0,En.reject(new zs(2,9,9017))});An.R(5);var Mn=pn.indexedDB.open("shaka_offline_db",5);return Mn.onsuccess=function(){if(!xn){var Un=Mn.result;mn.l=Un;var Bn=Un.objectStoreNames;Bn=Bn.contains("manifest")&&Bn.contains("segment")?new x0(Un,"segment","manifest"):null,mn.g=Bn,Bn=Un.objectStoreNames,Bn=Bn.contains("manifest-v2")&&Bn.contains("segment-v2")?new c$(Un,"segment-v2","manifest-v2"):null,mn.h=Bn,Bn=Un.objectStoreNames,Bn=Bn.contains("manifest-v3")&&Bn.contains("segment-v3")?new c$(Un,"segment-v3","manifest-v3"):null,mn.i=Bn,Bn=Un.objectStoreNames,Bn=Bn.contains("manifest-v5")&&Bn.contains("segment-v5")?new d$(Un,"segment-v5","manifest-v5"):null,mn.j=Bn,Un=Un.objectStoreNames.contains("session-ids")?new fT(Un):null,mn.m=Un,An.stop(),En.resolve()}},Mn.onupgradeneeded=function(){for(var Un=Mn.result,Bn=Dn(["segment-v5","manifest-v5","session-ids"]),Gn=Bn.next();!Gn.done;Gn=Bn.next())Gn=Gn.value,Un.objectStoreNames.contains(Gn)||Un.createObjectStore(Gn,{autoIncrement:!0})},Mn.onerror=function(Un){xn||(En.reject(new zs(2,9,9001,Mn.error)),An.stop(),Un.preventDefault())},En},Sn.destroy=function(){var mn=this;return hs(function(En){switch(En.g){case 1:if(!mn.g){En.D(2);break}return Qn(En,mn.g.destroy(),2);case 2:if(!mn.h){En.D(4);break}return Qn(En,mn.h.destroy(),4);case 4:if(!mn.i){En.D(6);break}return Qn(En,mn.i.destroy(),6);case 6:if(!mn.j){En.D(8);break}return Qn(En,mn.j.destroy(),8);case 8:if(!mn.m){En.D(10);break}return Qn(En,mn.m.destroy(),10);case 10:mn.l&&mn.l.close(),ms(En)}})},Sn.getCells=function(){var mn=new Map;return this.g&&mn.set("v1",this.g),this.h&&mn.set("v2",this.h),this.i&&mn.set("v3",this.i),this.j&&mn.set("v5",this.j),mn},Sn.getEmeSessionCell=function(){return this.m},Sn.erase=function(){var mn=this;return hs(function(En){switch(En.g){case 1:if(!mn.g){En.D(2);break}return Qn(En,mn.g.destroy(),2);case 2:if(!mn.h){En.D(4);break}return Qn(En,mn.h.destroy(),4);case 4:if(!mn.i){En.D(6);break}return Qn(En,mn.i.destroy(),6);case 6:if(!mn.j){En.D(8);break}return Qn(En,mn.j.destroy(),8);case 8:return mn.l&&mn.l.close(),Qn(En,sO(),10);case 10:return mn.l=null,mn.g=null,mn.h=null,mn.i=null,mn.j=null,Qn(En,mn.init(),0)}})};function sO(){var mn=new _l,En=pn.indexedDB.deleteDatabase("shaka_offline_db");return En.onblocked=function(){},En.onsuccess=function(){mn.resolve()},En.onerror=function(xn){mn.reject(new zs(2,9,9001,En.error)),xn.preventDefault()},mn}nO("idb",function(){return wl("CrKey")||xv()||!pn.indexedDB?null:new Sw});function _v(mn,En,xn,An){this.g=mn,this.i=En,this.h=xn,this.l=An,this.j=["offline:",mn,"/",En,"/",xn,"/",An].join("")}_v.prototype.Ra=function(){return this.i},_v.prototype.Ba=function(){return this.h},_v.prototype.key=function(){return this.l},_v.prototype.toString=function(){return this.j};function f$(mn){if(mn=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(mn),mn==null)return null;var En=mn[1];if(En!="manifest"&&En!="segment")return null;var xn=mn[2];if(!xn)return null;var An=mn[3];return An&&En!=null?new _v(En,xn,An,Number(mn[4])):null}function uO(mn,En){this.h=mn,this.g=En}function lO(mn,En){var xn=new Gu(null,0);xn.Sa(En.duration);var An=En.streams.filter(function(ts){return ts.type=="audio"}),Mn=En.streams.filter(function(ts){return ts.type=="video"});An=sN(mn,An,Mn,xn),Mn=En.streams.filter(function(ts){return ts.type==Vu}).map(function(ts){return NE(mn,ts,xn)});var Un=En.streams.filter(function(ts){return ts.type=="image"}).map(function(ts){return NE(mn,ts,xn)}),Bn=En.drmInfo?[En.drmInfo]:[];if(En.drmInfo)for(var Gn=Dn(An.values()),Wn=Gn.next();!Wn.done;Wn=Gn.next())Wn=Wn.value,Wn.audio&&Wn.audio.encrypted&&(Wn.audio.drmInfos=Bn),Wn.video&&Wn.video.encrypted&&(Wn.video.drmInfos=Bn);return{presentationTimeline:xn,minBufferTime:2,offlineSessionIds:En.sessionIds,variants:Array.from(An.values()),textStreams:Mn,imageStreams:Un,sequenceMode:En.sequenceMode||!1}}function sN(mn,En,xn,An){for(var Mn=new Set,Un=Dn(En),Bn=Un.next();!Bn.done;Bn=Un.next()){var Gn=Dn(Bn.value.variantIds);for(Bn=Gn.next();!Bn.done;Bn=Gn.next())Mn.add(Bn.value)}for(Un=Dn(xn),Bn=Un.next();!Bn.done;Bn=Un.next())for(Gn=Dn(Bn.value.variantIds),Bn=Gn.next();!Bn.done;Bn=Gn.next())Mn.add(Bn.value);for(Un=new Map,Mn=Dn(Mn),Bn=Mn.next();!Bn.done;Bn=Mn.next())Bn=Bn.value,Un.set(Bn,{id:Bn,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(En=Dn(En),Mn=En.next();!Mn.done;Mn=En.next())for(Mn=Mn.value,Bn=NE(mn,Mn,An),Gn=Dn(Mn.variantIds),Mn=Gn.next();!Mn.done;Mn=Gn.next())Mn=Un.get(Mn.value),Mn.language=Bn.language,Mn.primary=Mn.primary||Bn.primary,Mn.audio=Bn;for(xn=Dn(xn),En=xn.next();!En.done;En=xn.next())for(Mn=En.value,En=NE(mn,Mn,An),Bn=Dn(Mn.variantIds),Mn=Bn.next();!Mn.done;Mn=Bn.next())Mn=Un.get(Mn.value),Mn.primary=Mn.primary||En.primary,Mn.video=En;return Un}function NE(mn,En,xn){var An=En.segments.map(function(Mn){return cO(mn,Mn)});return xn.lc(An),{id:En.id,originalId:En.originalId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new vl(An),mimeType:En.mimeType,codecs:En.codecs,width:En.width||void 0,height:En.height||void 0,frameRate:En.frameRate,pixelAspectRatio:En.pixelAspectRatio,hdr:En.hdr,kind:En.kind,encrypted:En.encrypted,drmInfos:[],keyIds:En.keyIds,language:En.language,label:En.label,type:En.type,primary:En.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:En.roles,forced:En.forced,channelsCount:En.channelsCount,audioSamplingRate:En.audioSamplingRate,spatialAudio:En.spatialAudio,closedCaptions:En.closedCaptions,tilesLayout:En.tilesLayout}}function cO(mn,En){var xn=new _v("segment",mn.h,mn.g,En.dataKey);return new rl(En.startTime,En.endTime,function(){return[xn.toString()]},0,null,En.initSegmentKey!=null?uN(mn,En.initSegmentKey):null,En.timestampOffset,En.appendWindowStart,En.appendWindowEnd,[],En.tilesLayout||"")}function uN(mn,En){var xn=new _v("segment",mn.h,mn.g,En);return new Km(function(){return[xn.toString()]},0,null)}function dO(){this.g=null}Sn=dO.prototype,Sn.configure=function(){},Sn.start=function(mn,En){var xn=this,An,Mn,Un,Bn,Gn,Wn,ts;return hs(function(os){switch(os.g){case 1:if(An=f$(mn),xn.g=An,An==null||An.g!="manifest")throw new zs(2,1,9004,mn);return Mn=new cm,Rs(os),Qn(os,Mn.init(),4);case 4:return Qn(os,b0(Mn,An.Ra(),An.Ba()),5);case 5:return Un=os.h,Qn(os,Un.getManifests([An.key()]),6);case 6:return Bn=os.h,Gn=Bn[0],Wn=new uO(An.Ra(),An.Ba()),ts=lO(Wn,Gn),En.makeTextStreamsForClosedCaptions(ts),os.return(ts);case 2:return js(os),Qn(os,Mn.destroy(),7);case 7:bs(os,0)}})},Sn.stop=function(){return Promise.resolve()},Sn.update=function(){},Sn.onExpirationUpdated=function(mn,En){var xn=this,An,Mn,Un,Bn,Gn,Wn,ts;return hs(function(os){switch(os.g){case 1:return An=xn.g,Mn=new cm,Ts(os,2,3),Qn(os,Mn.init(),5);case 5:return Qn(os,b0(Mn,An.Ra(),An.Ba()),6);case 6:return Un=os.h,Qn(os,Un.getManifests([An.key()]),7);case 7:if(Bn=os.h,Gn=Bn[0],Wn=Gn.sessionIds.includes(mn),ts=Gn.expiration==null||Gn.expiration>En,!Wn||!ts){os.D(3);break}return Qn(os,Un.updateManifestExpiration(An.key(),En),3);case 3:return js(os),Qn(os,Mn.destroy(),10);case 10:bs(os,0);break;case 2:_s(os),os.D(3)}})},zm["application/x-offline-manifest"]=function(){return new dO};function fO(){}function Tw(mn){var En=f$(mn);return En&&En.g=="manifest"?(mn={uri:mn,originalUri:mn,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},mn=tm(mn)):mn=En&&En.g=="segment"?$p(En.key(),En):Sl(new zs(2,1,9004,mn)),mn}function $p(mn,En){var xn=new cm;return tm(void 0).ia(function(){return xn.init()}).ia(function(){return b0(xn,En.Ra(),En.Ba())}).ia(function(An){return An.getSegments([En.key()])}).ia(function(An){return{uri:En,data:An[0].data,headers:{}}}).finally(function(){return xn.destroy()})}Ys("shaka.offline.OfflineScheme",fO),fO.plugin=Tw,gm("offline",Tw);function p$(mn,En,xn){var An,Mn,Un,Bn,Gn,Wn;return hs(function(ts){switch(ts.g){case 1:An=[];for(var os=[],cs=Dn(xn),ls=cs.next();!ls.done;ls=cs.next()){ls=ls.value;for(var gs=!1,ws=Dn(os),Ns=ws.next();!Ns.done;Ns=ws.next())if(Ns=Ns.value,cN(Ns.info,ls)){Ns.sessionIds.push(ls.sessionId),gs=!0;break}gs||os.push({info:ls,sessionIds:[ls.sessionId]})}Mn=Dn(os),Un=Mn.next();case 2:if(Un.done){ts.D(4);break}return Bn=Un.value,Gn=lN(mn,En,Bn),Qn(ts,Gn,5);case 5:Wn=ts.h,An=An.concat(Wn),Un=Mn.next(),ts.D(2);break;case 4:return ts.return(An)}})}function lN(mn,En,xn){var An,Mn;return hs(function(Un){switch(Un.g){case 1:return An=new Y0({Ob:En,onError:function(){},Fd:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),Ts(Un,2),An.configure(mn),Qn(Un,NA(An,xn.info.keySystem,xn.info.licenseUri,xn.info.serverCertificate,xn.info.audioCapabilities,xn.info.videoCapabilities),4);case 4:ys(Un,3);break;case 2:return _s(Un),Qn(Un,An.destroy(),5);case 5:return Un.return([]);case 3:return Ts(Un,6),Qn(Un,fx(An),8);case 8:ys(Un,7);break;case 6:return _s(Un),Qn(Un,An.destroy(),9);case 9:return Un.return([]);case 7:return Mn=[],Qn(Un,Promise.all(xn.sessionIds.map(function(Bn){return hs(function(Gn){if(Gn.g==1)return Ts(Gn,2),Qn(Gn,bM(An,Bn),4);if(Gn.g!=2)return Mn.push(Bn),ys(Gn,0);_s(Gn),ms(Gn)})})),10);case 10:return Qn(Un,An.destroy(),11);case 11:return Un.return(Mn)}})}function cN(mn,En){function xn(An,Mn){return An.robustness==Mn.robustness&&An.contentType==Mn.contentType}return mn.keySystem==En.keySystem&&mn.licenseUri==En.licenseUri&&Np(mn.audioCapabilities,En.audioCapabilities,xn)&&Np(mn.videoCapabilities,En.videoCapabilities,xn)}function pO(mn,En,xn){var An=En.presentationTimeline.getDuration();return En=hO(En),{offlineUri:null,originalManifestUri:mn,duration:An,size:0,expiration:1/0,tracks:En,appMetadata:xn,isIncomplete:!1}}function h$(mn,En){var xn=lO(new uO(mn.Ra(),mn.Ba()),En),An=En.appMetadata||{};return xn=hO(xn),{offlineUri:mn.toString(),originalManifestUri:En.originalManifestUri,duration:En.duration,size:En.size,expiration:En.expiration,tracks:xn,appMetadata:An,isIncomplete:En.isIncomplete||!1}}function hO(mn){var En=[],xn=SA(mn.variants);xn=Dn(xn);for(var An=xn.next();!An.done;An=xn.next())En.push(B_(An.value));for(mn=Dn(mn.textStreams),xn=mn.next();!xn.done;xn=mn.next())En.push(UT(xn.value));return En}function dN(){this.g={}}function kw(mn,En){var xn=En.audio,An=En.video;if(xn&&!An&&(mn.g[xn.id]=xn.bandwidth||En.bandwidth),!xn&&An&&(mn.g[An.id]=An.bandwidth||En.bandwidth),xn&&An){var Mn=xn.bandwidth||393216,Un=An.bandwidth||En.bandwidth-Mn;0>=Un&&(Un=En.bandwidth),mn.g[xn.id]=Mn,mn.g[An.id]=Un}}function mO(mn,En){mn.g[En.id]=En.bandwidth||2048}function gO(mn,En){return mn=mn.g[En],mn==null&&(mn=0),mn}function bp(mn){var En=this;if(mn&&mn.constructor!=iu)throw new zs(2,9,9008);this.g=this.h=null,mn?(this.h=mn.h,this.g=mn.Hc()):(this.h=nu(),this.g=new Cl),this.i=[],this.j=[];var xn=!mn;this.l=new Ov(function(){var An,Mn,Un,Bn,Gn;return hs(function(Wn){switch(Wn.g){case 1:return Qn(Wn,Promise.all(En.j.map(function(ts){return o$(ts)})),2);case 2:for(An=function(){},Mn=[],Un=Dn(En.i),Bn=Un.next();!Bn.done;Bn=Un.next())Gn=Bn.value,Mn.push(Gn.then(An,An));return Qn(Wn,Promise.all(Mn),3);case 3:if(!xn){Wn.D(4);break}return Qn(Wn,En.g.destroy(),4);case 4:En.h=null,En.g=null,ms(Wn)}})})}function m$(){if(Sp())e:{for(var mn=Dn(Om.values()),En=mn.next();!En.done;En=mn.next())if(En=En.value,En=En()){En.destroy(),mn=!0;break e}mn=!1}else mn=!1;return mn}Sn=bp.prototype,Sn.destroy=function(){return this.l.destroy()},Sn.configure=function(mn,En){return arguments.length==2&&typeof mn=="string"&&(mn=s0(mn,En)),Bv(this.h,mn)},Sn.getConfiguration=function(){var mn=nu();return Bv(mn,this.h,nu()),mn},Sn.Hc=function(){return this.g},Sn.store=function(mn,En,xn){var An=this,Mn=this.getConfiguration(),Un=new C_(this.g);return this.j.push(Un),En=fN(this,mn,En||{},function(){var Bn;return hs(function(Gn){return Gn.g==1?Qn(Gn,VA(mn,An.g,Mn.manifest.retryParameters,xn||null),2):(Bn=Gn.h,Gn.return(Bn()))})},Mn,Un),En=new Al(En,function(){return o$(Un)}),En.finally(function(){Wu(An.j,Un)}),y$(this,En)};function fN(mn,En,xn,An,Mn,Un){var Bn,Gn,Wn,ts,os,cs,ls,gs,ws,Ns,Os,Ps,Xs,Ds;return hs(function(qs){switch(qs.g){case 1:return w_(),Gn=Bn=null,Wn=new cm,cs=os=ts=null,Ts(qs,2,3),Qn(qs,An(),5);case 5:return Bn=qs.h,Qn(qs,EO(mn,En,Bn,Mn),6);case 6:if(ls=qs.h,hp(mn),gs=!ls.presentationTimeline.U()&&!ls.presentationTimeline.Lb(),!gs)throw new zs(2,9,9005,En);return Qn(qs,EN(mn,ls,function(Qs){cs=cs||Qs},Mn),7);case 7:if(Gn=qs.h,hp(mn),cs)throw cs;return Qn(qs,hN(ls,Mn),8);case 8:return Qn(qs,Wn.init(),9);case 9:return hp(mn),Qn(qs,_w(Wn),10);case 10:return ts=qs.h,hp(mn),ws=mN(Gn,ls,En,xn,Mn,Un),Ns=ws.ih,Os=ws.We,Qn(qs,ts.Ba.addManifests([Ns]),11);case 11:if(Ps=qs.h,hp(mn),os=Ps[0],hp(mn),cs)throw cs;return Qn(qs,pN(mn,Os,os,Ns,Un,Mn,ts.Ba,ls,Gn),12);case 12:return hp(mn),Xs=new _v("manifest",ts.path.Ra,ts.path.Ba,os),qs.return(h$(Xs,Ns));case 3:return js(qs),Qn(qs,Wn.destroy(),13);case 13:if(!Bn){qs.D(14);break}return Qn(qs,Bn.stop(),14);case 14:if(!Gn){qs.D(16);break}return Qn(qs,Gn.destroy(),16);case 16:bs(qs,0);break;case 2:if(Ds=_s(qs),os==null){qs.D(18);break}return Qn(qs,yO(os),18);case 18:throw cs||Ds}})}function pN(mn,En,xn,An,Mn,Un,Bn,Gn,Wn){var ts,os,cs,ls,gs,ws,Ns,Os,Ps,Xs;return hs(function(Ds){switch(Ds.g){case 1:if(ts={},os=0,cs=function(qs,Qs){var tu,ou,hu,gu,ju,Yu,Qu;return hs(function(dl){if(dl.g==1){for(tu={},ou=Dn(qs),hu=ou.next();!hu.done;tu={Fb:tu.Fb},hu=ou.next())tu.Fb=hu.value,gu=gw(tu.Fb,Un),ju=tu.Fb.i,Yu=tu.Fb.h,Qu=function(Nu){return function(up){var Cp,Dl,ty;return hs(function(Ev){if(Ev.g==1)return Qn(Ev,Bn.addSegments([{data:up}]),2);Cp=Ev.h,hp(mn),Dl=Nu.Fb.g,ty=lT(Dl),ts[ty]=Cp[0],os+=up.byteLength,ms(Ev)})}}(tu),eO(Mn,tu.Fb.groupId,gu,ju,Yu,Qu);return Qn(dl,tO(Mn),2)}return Qs?(hp(mn),gN(Gn,An,Wn,Un),Qn(dl,Bn.updateManifest(xn,An),0)):dl.D(0)})},ls=!1,Ts(Ds,2),!$w(Gn)||!ls||_O(Gn)){Ds.D(4);break}return Qn(Ds,cs(En.filter(function(qs){return qs.h}),!0),5);case 5:return hp(mn),En=En.filter(function(qs){return!qs.h}),gs=ts,ws=os,ts={},os=0,Qn(Ds,vO(Bn,xn,An,gs,ws,function(){return hp(mn)}),6);case 6:hp(mn);case 4:if(ls){Ds.D(7);break}return Qn(Ds,cs(En,!1),8);case 8:return hp(mn),Ns=ts,Os=os,ts={},os=0,Qn(Ds,vO(Bn,xn,An,Ns,Os,function(){return hp(mn)}),9);case 9:hp(mn);case 7:ys(Ds,0);break;case 2:return Ps=_s(Ds),Xs=Object.values(ts),Qn(Ds,Bn.removeSegments(Xs,function(){}),10);case 10:throw Ps}})}function yO(mn){var En,xn,An,Mn;return hs(function(Un){switch(Un.g){case 1:return En=new cm,Qn(Un,En.init(),2);case 2:return Qn(Un,_w(En),3);case 3:return xn=Un.h,An=new _v("manifest",xn.path.Ra,xn.path.Ba,mn),Qn(Un,En.destroy(),4);case 4:return Mn=new bp,Qn(Un,Mn.remove(An.toString()),0)}})}function vO(mn,En,xn,An,Mn,Un){var Bn,Gn,Wn,ts,os,cs,ls,gs,ws,Ns,Os;return hs(function(Ps){switch(Ps.g){case 1:for(Bn=!1,Ts(Ps,2),Gn=!0,Wn=Dn(xn.streams),ts=Wn.next();!ts.done;ts=Wn.next())for(os=ts.value,cs=Dn(os.segments),ls=cs.next();!ls.done;ls=cs.next())gs=ls.value,ws=gs.pendingSegmentRefId?An[gs.pendingSegmentRefId]:null,ws!=null&&(gs.dataKey=ws,gs.pendingSegmentRefId=void 0),ws=gs.pendingInitSegmentRefId?An[gs.pendingInitSegmentRefId]:null,ws!=null&&(gs.initSegmentKey=ws,gs.pendingInitSegmentRefId=void 0),gs.pendingSegmentRefId&&(Gn=!1),gs.pendingInitSegmentRefId&&(Gn=!1);return xn.size+=Mn,Gn&&(xn.isIncomplete=!1),Qn(Ps,mn.updateManifest(En,xn),4);case 4:Bn=!0,Un(),ys(Ps,0);break;case 2:return Ns=_s(Ps),Qn(Ps,yO(En),5);case 5:if(Bn){Ps.D(6);break}return Os=Object.values(An),Qn(Ps,mn.removeSegments(Os,function(){}),6);case 6:throw Ns}})}function hN(mn,En){var xn,An,Mn,Un,Bn,Gn,Wn,ts,os,cs,ls,gs,ws,Ns,Os,Ps,Xs,Ds,qs,Qs,tu,ou,hu,gu,ju,Yu,Qu,dl,Nu;return hs(function(up){switch(up.g){case 1:return xn={width:1/0,height:1/0},j_(mn,En.restrictions,xn),Qn(up,q$(mn,En.offline.usePersistentLicense),2);case 2:for(An=[],Mn=En.preferredAudioChannelCount,Un=En.preferredDecodingAttributes,Bn=En.preferredVideoCodecs,Gn=En.preferredAudioCodecs,Bl(mn,Bn,Gn,Mn,Un),Wn=Dn(mn.variants),ts=Wn.next();!ts.done;ts=Wn.next())os=ts.value,An.push(B_(os));for(cs=Dn(mn.textStreams),ls=cs.next();!ls.done;ls=cs.next())gs=ls.value,An.push(UT(gs));for(ws=Dn(mn.imageStreams),Ns=ws.next();!Ns.done;Ns=ws.next())Os=Ns.value,An.push(Z$(Os));return Qn(up,En.offline.trackSelectionCallback(An),3);case 3:for(Ps=up.h,Xs=mn.presentationTimeline.getDuration(),Ds=0,qs=Dn(Ps),Qs=qs.next();!Qs.done;Qs=qs.next())tu=Qs.value,ou=tu.bandwidth*Xs/8,Ds+=ou;return Ts(up,4),Qn(up,En.offline.downloadSizeCallback(Ds),6);case 6:if(hu=up.h,!hu)throw new zs(2,9,9014);ys(up,5);break;case 4:throw gu=_s(up),gu instanceof zs?gu:new zs(2,9,9015);case 5:for(ju=new Set,Yu=new Set,Qu=new Set,dl=Dn(Ps),Qs=dl.next();!Qs.done;Qs=dl.next())Nu=Qs.value,Nu.type=="variant"&&ju.add(Nu.id),Nu.type=="text"&&Yu.add(Nu.id),Nu.type=="image"&&Qu.add(Nu.id);mn.variants=mn.variants.filter(function(Cp){return ju.has(Cp.id)}),mn.textStreams=mn.textStreams.filter(function(Cp){return Yu.has(Cp.id)}),mn.imageStreams=mn.imageStreams.filter(function(Cp){return Qu.has(Cp.id)}),$O(mn),ms(up)}})}function mN(mn,En,xn,An,Mn,Un){var Bn=pO(xn,En,An),Gn=Mn.offline.progressCallback;rN(Un,function(gs,ws){Bn.size=ws,Gn(Bn,gs)},function(gs,ws){Wn&&Mn.offline.usePersistentLicense&&ts==ws&&dS(mn,"cenc",gs)});var Wn=$w(En)&&!_O(En),ts=null;Wn&&(ts=bO.get(mn.g.keySystem));for(var os=new dN,cs=Dn(En.textStreams),ls=cs.next();!ls.done;ls=cs.next())os.g[ls.value.id]=52;for(cs=Dn(En.imageStreams),ls=cs.next();!ls.done;ls=cs.next())mO(os,ls.value);for(ls=Dn(En.variants),cs=ls.next();!cs.done;cs=ls.next())kw(os,cs.value);return os=SN(Un,os,En,Mn),Un=os.streams,os=os.We,ls=mn.g,cs=Mn.offline.usePersistentLicense,ls&&cs&&(ls.initData=[]),{ih:{creationTime:Date.now(),originalManifestUri:xn,duration:En.presentationTimeline.getDuration(),size:0,expiration:mn.Gc(),streams:Un,sessionIds:cs?DA(mn):[],drmInfo:ls,appMetadata:An,isIncomplete:!0,sequenceMode:En.sequenceMode},We:os}}function $w(mn){return mn.variants.some(function(En){var xn=En.audio&&En.audio.encrypted;return En.video&&En.video.encrypted||xn})}function _O(mn){return mn.variants.some(function(En){return(En.video?En.video.drmInfos:[]).concat(En.audio?En.audio.drmInfos:[]).some(function(xn){return xn.initData&&xn.initData.length})})}function gN(mn,En,xn,An){if(En.expiration=xn.Gc(),xn=DA(xn),En.sessionIds=An.offline.usePersistentLicense?xn:[],$w(mn)&&An.offline.usePersistentLicense&&!xn.length)throw new zs(2,9,9007)}Sn.remove=function(mn){return g$(this,Wp(this,mn))};function Wp(mn,En){var xn,An,Mn,Un,Bn,Gn;return hs(function(Wn){switch(Wn.g){case 1:if(w_(),xn=f$(En),xn==null||xn.g!="manifest")throw new zs(2,9,9004,En);return An=xn,Mn=new cm,Rs(Wn),Qn(Wn,Mn.init(),4);case 4:return Qn(Wn,b0(Mn,An.Ra(),An.Ba()),5);case 5:return Un=Wn.h,Qn(Wn,Un.getManifests([An.key()]),6);case 6:return Bn=Wn.h,Gn=Bn[0],Qn(Wn,Promise.all([bw(mn,Gn,Mn),yN(Un,An,Gn)]),2);case 2:return js(Wn),Qn(Wn,Mn.destroy(),8);case 8:bs(Wn,0)}})}function pT(mn,En){for(var xn=[],An=Dn(mn.streams),Mn=An.next();!Mn.done;Mn=An.next())Mn=Mn.value,En&&Mn.type=="video"?xn.push({contentType:Vm(Mn.mimeType,Mn.codecs),robustness:mn.drmInfo.videoRobustness}):En||Mn.type!="audio"||xn.push({contentType:Vm(Mn.mimeType,Mn.codecs),robustness:mn.drmInfo.audioRobustness});return xn}function bw(mn,En,xn){return hs(function(An){return Qn(An,TO(mn.g,mn.h.drm,xn,En),0)})}function yN(mn,En,xn){function An(){}var Mn=SO(xn);return h$(En,xn),Promise.all([mn.removeSegments(Mn,An),mn.removeManifests([En.key()],An)])}Sn.yh=function(){return g$(this,vN(this))};function vN(mn){var En,xn,An,Mn,Un,Bn,Gn,Wn,ts,os;return hs(function(cs){switch(cs.g){case 1:return w_(),En=mn.g,xn=mn.h.drm,An=new cm,Mn=!1,Rs(cs),Qn(cs,An.init(),4);case 4:Un=[],aN(An,function(ls){return Un.push(ls)}),Bn=Dn(Un),Gn=Bn.next();case 5:if(Gn.done){cs.D(2);break}return Wn=Gn.value,Qn(cs,Wn.getAll(),8);case 8:return ts=cs.h,Qn(cs,p$(xn,En,ts),9);case 9:return os=cs.h,Qn(cs,Wn.remove(os),10);case 10:os.length!=ts.length&&(Mn=!0),Gn=Bn.next(),cs.D(5);break;case 2:return js(cs),Qn(cs,An.destroy(),11);case 11:bs(cs,3);break;case 3:return cs.return(!Mn)}})}Sn.list=function(){return g$(this,_N())};function _N(){var mn,En,xn;return hs(function(An){switch(An.g){case 1:return w_(),mn=[],En=new cm,Rs(An),Qn(An,En.init(),4);case 4:return xn=Promise.resolve(),iN(En,function(Mn,Un){xn=xn.then(function(){var Bn;return hs(function(Gn){if(Gn.g==1)return Qn(Gn,Un.getAllManifests(),2);Bn=Gn.h,Bn.forEach(function(Wn,ts){Wn=h$(new _v("manifest",Mn.Ra,Mn.Ba,ts),Wn),mn.push(Wn)}),ms(Gn)})})}),Qn(An,xn,2);case 2:return js(An),Qn(An,En.destroy(),6);case 6:bs(An,3);break;case 3:return An.return(mn)}})}function EO(mn,En,xn,An){var Mn,Un,Bn,Gn,Wn;return hs(function(ts){if(ts.g==1)return Mn=null,Un=mn.g,Bn={networkingEngine:Un,modifyManifestRequest:function(){},modifySegmentRequest:function(){},filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(os){Mn=os},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){}},xn.configure(An.manifest),hp(mn),Qn(ts,xn.start(En,Bn),2);if(ts.g!=3)return Gn=ts.h,hp(mn),Wn=kO(Gn),Qn(ts,Promise.all(el(Wn,function(os){return os.createSegmentIndex()})),3);if(hp(mn),Mn)throw Mn;return ts.return(Gn)})}function EN(mn,En,xn,An){var Mn;return hs(function(Un){switch(Un.g){case 1:return Mn=new Y0({Ob:mn.g,onError:xn,Fd:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),Mn.configure(An.drm),Qn(Un,RA(Mn,En.variants,An.offline.usePersistentLicense),2);case 2:return Qn(Un,fx(Mn),3);case 3:return Qn(Un,px(Mn),4);case 4:return Un.return(Mn)}})}function SN(mn,En,xn,An){var Mn=new Map,Un=kO(xn),Bn=new Map;Un=Dn(Un);for(var Gn=Un.next();!Gn.done;Gn=Un.next()){Gn=Gn.value;var Wn=Op(mn,En,xn,Gn,An,Mn);Bn.set(Gn.id,Wn)}for(mn=Dn(xn.variants),En=mn.next();!En.done;En=mn.next())En=En.value,En.audio&&Bn.get(En.audio.id).variantIds.push(En.id),En.video&&Bn.get(En.video.id).variantIds.push(En.id);return{streams:Array.from(Bn.values()),We:Array.from(Mn.values())}}function Op(mn,En,xn,An,Mn,Un){var Bn={id:An.id,originalId:An.originalId,primary:An.primary,type:An.type,mimeType:An.mimeType,codecs:An.codecs,frameRate:An.frameRate,pixelAspectRatio:An.pixelAspectRatio,hdr:An.hdr,kind:An.kind,language:An.language,label:An.label,width:An.width||null,height:An.height||null,encrypted:An.encrypted,keyIds:An.keyIds,segments:[],variantIds:[],roles:An.roles,forced:An.forced,channelsCount:An.channelsCount,audioSamplingRate:An.audioSamplingRate,spatialAudio:An.spatialAudio,closedCaptions:An.closedCaptions,tilesLayout:An.tilesLayout},Gn=Mn.offline.numberOfParallelDownloads,Wn=0;return nm(An,xn.presentationTimeline.kb(),function(ts){var os=lT(ts),cs=void 0;if(!Un.has(os)){var ls=ts.endTime-ts.startTime;ls=gO(En,An.id)*ls,ls=cT(mn.g,ls),Un.set(os,new uT(ts,ls,Wn,!1))}ts.h&&(cs=lT(ts.h),Un.has(cs)||(ls=.5*gO(En,An.id),ls=cT(mn.g,ls),Un.set(cs,new uT(ts.h,ls,Wn,!0)))),Bn.segments.push({pendingInitSegmentRefId:cs,initSegmentKey:cs?0:null,startTime:ts.startTime,endTime:ts.endTime,appendWindowStart:ts.appendWindowStart,appendWindowEnd:ts.appendWindowEnd,timestampOffset:ts.timestampOffset,tilesLayout:ts.tilesLayout,pendingSegmentRefId:os,dataKey:0}),Wn=(Wn+1)%Gn}),Bn}function nm(mn,En,xn){if(En=mn.segmentIndex.find(En),En!=null)for(var An=mn.segmentIndex.get(En);An;)xn(An),An=mn.segmentIndex.get(++En)}function hp(mn){if(mn.l.g)throw new zs(2,9,7001)}function w_(){if(!m$())throw new zs(2,9,9e3)}function g$(mn,En){return hs(function(xn){return xn.g==1?(mn.i.push(En),Rs(xn),Qn(xn,En,4)):xn.g!=2?xn.return(xn.h):(js(xn),Wu(mn.i,En),bs(xn,0))})}function y$(mn,En){var xn=En.promise;return mn.i.push(xn),En.finally(function(){Wu(mn.i,xn)})}function SO(mn){var En=new Set;mn=Dn(mn.streams);for(var xn=mn.next();!xn.done;xn=mn.next()){xn=Dn(xn.value.segments);for(var An=xn.next();!An.done;An=xn.next())An=An.value,An.initSegmentKey!=null&&En.add(An.initSegmentKey),En.add(An.dataKey)}return Array.from(En)}function TO(mn,En,xn,An){var Mn,Un,Bn;return hs(function(Gn){return Gn.g==1?An.drmInfo?(Mn=Ew(xn),Un=An.sessionIds.map(function(Wn){return{sessionId:Wn,keySystem:An.drmInfo.keySystem,licenseUri:An.drmInfo.licenseServerUri,serverCertificate:An.drmInfo.serverCertificate,audioCapabilities:pT(An,!1),videoCapabilities:pT(An,!0)}}),Qn(Gn,p$(En,mn,Un),2)):Gn.return():Gn.g!=3?(Bn=Gn.h,Qn(Gn,Mn.remove(Bn),3)):Qn(Gn,Mn.add(Un.filter(function(Wn){return!Bn.includes(Wn.sessionId)})),0)})}function kO(mn){for(var En=new Set,xn=Dn(mn.textStreams),An=xn.next();!An.done;An=xn.next())En.add(An.value);for(xn=Dn(mn.imageStreams),An=xn.next();!An.done;An=xn.next())En.add(An.value);for(mn=Dn(mn.variants),xn=mn.next();!xn.done;xn=mn.next())xn=xn.value,xn.audio&&En.add(xn.audio),xn.video&&En.add(xn.video);return En}function $O(mn){mn.variants.map(function(Un){return Un.video});var En=new Set(mn.variants.map(function(Un){return Un.audio}));mn=mn.textStreams;for(var xn=Dn(En),An=xn.next();!An.done;An=xn.next()){An=Dn(En);for(var Mn=An.next();!Mn.done;Mn=An.next());}for(En=Dn(mn),xn=En.next();!xn.done;xn=En.next())for(xn=Dn(mn),An=xn.next();!An.done;An=xn.next());}Ys("shaka.offline.Storage",bp),bp.deleteAll=function(){var mn;return hs(function(En){return En.g==1?(mn=new cm,Rs(En),Qn(En,rO(mn),2)):En.g!=5?(js(En),Qn(En,mn.destroy(),5)):bs(En,0)})},bp.prototype.list=bp.prototype.list,bp.prototype.removeEmeSessions=bp.prototype.yh,bp.prototype.remove=bp.prototype.remove,bp.prototype.store=bp.prototype.store,bp.prototype.getNetworkingEngine=bp.prototype.Hc,bp.prototype.getConfiguration=bp.prototype.getConfiguration,bp.prototype.configure=bp.prototype.configure,bp.prototype.destroy=bp.prototype.destroy,bp.support=m$;var bO=new Map().set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");y1.offline=m$;function xp(){}function xw(){for(var mn=Dn(C0),En=mn.next();!En.done;En=mn.next()){En=En.value;try{En.og()}catch(xn){Tu("Error installing polyfill!",xn)}}}function mp(mn,En){for(mn={priority:En||0,og:mn},En=0;En<C0.length;En++)if(C0[En].priority<mn.priority){C0.splice(En,0,mn);return}C0.push(mn)}Ys("shaka.polyfill",xp),xp.register=mp,xp.installAll=xw;var C0=[];function DE(){this.g=new hT}function xO(){pn.AbortController||(pn.AbortController=DE,pn.AbortSignal=hT)}DE.prototype.abort=function(mn){var En=this.g;En.h||(En.h=!0,En.g=mn,En.g===void 0&&(En.g=new DOMException("signal is aborted without reason","AbortError")),mn=new vu("abort"),En.onabort&&En.onabort(mn),En.dispatchEvent(mn))},Ln.Object.defineProperties(DE.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),xp.AbortController=DE,DE.install=xO;function hT(){Eu.call(this),this.h=!1,this.g=void 0,this.onabort=null}as(hT,Eu),Ln.Object.defineProperties(hT.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.h}},reason:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),mp(xO);function Cw(){}function ww(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var mn=Dn(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),En=mn.next();!En.done;En=mn.next())CO(En.value)}function CO(mn){var En="aria-"+mn.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,mn,{get:function(){return this.getAttribute(En)},set:function(xn){xn==null||xn==null?this.removeAttribute(En):this.setAttribute(En,xn)}})}xp.Aria=Cw,Cw.install=ww,mp(ww);function wO(){}function AO(){ps()}xp.EncryptionScheme=wO,wO.install=AO,mp(AO,-2);function IO(){}function PO(){if(pn.Document){var mn=Element.prototype;mn.requestFullscreen=mn.requestFullscreen||mn.mozRequestFullScreen||mn.msRequestFullscreen||mn.webkitRequestFullscreen,mn=Document.prototype,mn.exitFullscreen=mn.exitFullscreen||mn.mozCancelFullScreen||mn.msExitFullscreen||mn.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",LE),document.addEventListener("webkitfullscreenerror",LE),document.addEventListener("mozfullscreenchange",LE),document.addEventListener("mozfullscreenerror",LE),document.addEventListener("MSFullscreenChange",LE),document.addEventListener("MSFullscreenError",LE)}}function LE(mn){var En=mn.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),xn=document.createEvent("Event");xn.initEvent(En,mn.bubbles,mn.cancelable),mn.target.dispatchEvent(xn)}xp.Fullscreen=IO,IO.install=PO,mp(PO);function v$(){}function Aw(){var mn=!0;(rv()||wl("PlayStation 5")||t_()||wl("Web0S")||Fm()||wl("CrKey")||wl("PC=EOS")||wl("Hisense")||wl("VIDAA"))&&(mn=!1),mn&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),mT=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=TN)}function TN(mn){var En,xn,An,Mn,Un,Bn,Gn,Wn,ts,os,cs,ls,gs,ws,Ns,Os,Ps,Xs;return hs(function(Ds){switch(Ds.g){case 1:if(En={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:mn},!mn)return Ds.return(En);if(xn=mn.video,An=mn.audio,mn.type=="media-source"){if(!Sp())return Ds.return(En);if(xn){if(wl("CrKey"))if(pn.cast&&cast.__platform__&&cast.__platform__.canDisplayType){var qs=xn.contentType;xn.width&&xn.height&&(qs+="; width="+xn.width+"; height="+xn.height),xn.framerate&&(qs+="; framerate="+xn.framerate),xn.transferFunction==="pq"&&(qs+="; eotf=smpte2084"),Mn=cast.__platform__.canDisplayType(qs)}else Mn=dp(xn.contentType);else Fm()?(Un=xn.contentType,xn.width&&xn.height&&(Un+="; width="+xn.width,Un+="; height="+xn.height),xn.framerate&&(Un+="; framerate="+xn.framerate),xn.bitrate&&(Un+="; bitrate="+xn.bitrate),Mn=dp(Un)):Mn=dp(xn.contentType);if(!Mn)return Ds.return(En)}if(An&&(Bn=An.contentType,Gn=dp(Bn),!Gn))return Ds.return(En)}else if(mn.type=="file"){if(xn&&(Wn=xn.contentType,ts=oy(Wn),!ts)||An&&(os=An.contentType,cs=oy(os),!cs))return Ds.return(En)}else return Ds.return(En);return mn.keySystemConfiguration?(ls=mn.keySystemConfiguration,gs=[],ws=[],ls.audio&&(Ns={robustness:ls.audio.robustness||"",contentType:mn.audio.contentType},gs.push(Ns)),ls.video&&(Os={robustness:ls.video.robustness||"",contentType:mn.video.contentType},ws.push(Os)),Ps={initDataTypes:[ls.initDataType],distinctiveIdentifier:ls.distinctiveIdentifier,persistentState:ls.persistentState,sessionTypes:ls.sessionTypes},gs.length&&(Ps.audioCapabilities=gs),ws.length&&(Ps.videoCapabilities=ws),Ts(Ds,3),Qn(Ds,navigator.requestMediaKeySystemAccess(ls.keySystem,[Ps]),5)):(En.supported=!0,Ds.return(Promise.resolve(En)));case 5:Xs=Ds.h,ys(Ds,4);break;case 3:_s(Ds);case 4:Xs&&(En.supported=!0,En.keySystemAccess=Xs);case 2:return Ds.return(En)}})}xp.MediaCapabilities=v$,v$.install=Aw;var mT=null;v$.originalMcap=mT,mp(Aw,-1);function _$(){}function E$(){var mn=N0();pn.MediaSource&&(pn.cast&&cast.__platform__&&cast.__platform__.canDisplayType?Mw():mn?12>=mn?(S$(),Iw()):15>=mn&&S$():e_()?Pw():(wl("Tizen 2")||wl("Tizen 3")||wl("Tizen 4"))&&Ow()),pn.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&kN()}function S$(){var mn=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var En=mn.apply(this,lu.apply(0,arguments));return En.abort=function(){},En}}function Iw(){var mn=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(En,xn){return mn.call(this,En,xn-.001)}}function Pw(){var mn=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(En){return En.split(";")[0].split("/")[1]!="mp2t"&&mn(En)}}function Ow(){var mn=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(En){return Hs(En)[0]!="opus"&&mn(En)}}function Mw(){var mn=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(En){var xn=En.split(/ *; */);return xn.shift(),xn.some(function(An){return An.startsWith("codecs=")})?cast.__platform__.canDisplayType(En):mn(En)}}function kN(){var mn=MediaSource.isTypeSupported;wl("Web0S")||(MediaSource.isTypeSupported=function(En){var xn=En.split(/ *; */),An=xn.findIndex(function(Bn){return Bn.startsWith("codecs=")});if(0>An)return mn(En);var Mn=xn[An].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),Un=Mn.findIndex(function(Bn){return Bn.startsWith("vp09")});return 0<=Un&&(Mn[Un]="vp9",xn[An]='codecs="'+Mn.join(",")+'"',En=xn.join("; ")),mn(En)})}xp.MediaSource=_$,_$.install=E$,mp(E$);function OO(){}function MO(){screen.orientation||pn.orientation!=null&&T$()}function T$(){function mn(){switch(pn.orientation){case-90:En.type="landscape-secondary",En.angle=270;break;case 0:En.type="portrait-primary",En.angle=0;break;case 90:En.type="landscape-primary",En.angle=90;break;case 180:En.type="portrait-secondary",En.angle=180}}var En=new w0;screen.orientation=En,mn(),pn.addEventListener("orientationchange",function(){mn();var xn=new vu("change");En.dispatchEvent(xn)})}xp.Orientation=OO,OO.install=MO;function w0(){Eu.call(this),this.type="",this.angle=0}as(w0,Eu),w0.prototype.lock=function(mn){function En(An){return screen.lockOrientation?screen.lockOrientation(An):screen.mozLockOrientation?screen.mozLockOrientation(An):screen.msLockOrientation?screen.msLockOrientation(An):!1}var xn=!1;switch(mn){case"natural":xn=En("default");break;case"any":xn=!0,this.unlock();break;default:xn=En(mn)}return xn?Promise.resolve():(mn=Error("screen.orientation.lock() is not available on this device"),mn.name="NotSupportedError",mn.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(mn))},w0.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},mp(MO);function k$(){}var gT,UE,$$,b$,x$,Rw;function $N(mn,En){try{var xn=new yT(mn,En);return Promise.resolve(xn)}catch(An){return Promise.reject(An)}}function Nw(mn){var En=this.mediaKeys;return En&&En!=mn&&C$(En,null),delete this.mediaKeys,(this.mediaKeys=mn)?C$(mn,this):Promise.resolve()}function Dw(mn){if(mn=Ku(mn.initData),Hp(mn).getUint32(0,!0)+4!=mn.byteLength)throw new RangeError("Malformed FairPlay init data");mn=Ry(mn.subarray(4),!0),mn=Kp(mn);var En=new Event("encrypted");En.initDataType="skd",En.initData=fp(mn),this.dispatchEvent(En)}xp.PatchedMediaKeysApple=k$,k$.uninstall=function(){gT&&(gT=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",UE),HTMLMediaElement.prototype.setMediaKeys=$$,pn.MediaKeys=b$,pn.MediaKeySystemAccess=x$,navigator.requestMediaKeySystemAccess=Rw,UE=Rw=$$=x$=b$=null,pn.shakaMediaKeysPolyfill=!1)},k$.install=function(mn){pn.HTMLVideoElement&&pn.WebKitMediaKeys&&(mn!==void 0&&mn&&(gT=!0,UE=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),$$=HTMLMediaElement.prototype.setMediaKeys,b$=pn.MediaKeys,x$=pn.MediaKeySystemAccess,Rw=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Nw,pn.MediaKeys=vT,pn.MediaKeySystemAccess=yT,navigator.requestMediaKeySystemAccess=$N,pn.shakaMediaKeysPolyfill=!0)};function yT(mn,En){if(this.keySystem=mn,mn.startsWith("com.apple.fps"))for(mn=Dn(En),En=mn.next();!En.done;En=mn.next()){var xn=En.value;if(xn.persistentState=="required")En=null;else{En={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:xn.initDataTypes,sessionTypes:["temporary"],label:xn.label};var An=!1,Mn=!1;if(xn.audioCapabilities)for(var Un=Dn(xn.audioCapabilities),Bn=Un.next();!Bn.done;Bn=Un.next())Bn=Bn.value,Bn.contentType&&(An=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,Bn.contentType.split(";")[0])&&(En.audioCapabilities.push(Bn),Mn=!0));if(xn.videoCapabilities)for(xn=Dn(xn.videoCapabilities),Bn=xn.next();!Bn.done;Bn=xn.next())Un=Bn.value,Un.contentType&&(An=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,Un.contentType.split(";")[0])&&(En.videoCapabilities.push(Un),Mn=!0));An||(Mn=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),En=Mn?En:null}if(En){this.g=En;return}}throw mn=Error("Unsupported keySystem"),mn.name="NotSupportedError",mn.code=DOMException.NOT_SUPPORTED_ERR,mn}yT.prototype.createMediaKeys=function(){var mn=new vT(this.keySystem);return Promise.resolve(mn)},yT.prototype.getConfiguration=function(){return this.g};function vT(mn){this.h=new WebKitMediaKeys(mn),this.g=new xu}vT.prototype.createSession=function(mn){if(mn=mn||"temporary",mn!="temporary")throw new TypeError("Session type "+mn+" is unsupported on this platform.");return new Lw(this.h)},vT.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function C$(mn,En){if(mn.g.Rb(),!En)return Promise.resolve();mn.g.o(En,"webkitneedkey",Dw);try{return J_(En,HTMLMediaElement.HAVE_METADATA,mn.g,function(){En.webkitSetMediaKeys(mn.h)}),Promise.resolve()}catch(xn){return Promise.reject(xn)}}function Lw(mn){Eu.call(this),this.i=null,this.l=mn,this.g=this.h=null,this.j=new xu,this.sessionId="",this.expiration=NaN,this.closed=new _l,this.keyStatuses=new _T}as(Lw,Eu),Sn=Lw.prototype,Sn.generateRequest=function(mn,En){var xn=this;this.h=new _l;try{var An=this.l.createSession("video/mp4",Ku(En));this.i=An,this.sessionId=An.sessionId||"",this.j.o(this.i,"webkitkeymessage",function(Mn){xn.h&&(xn.h.resolve(),xn.h=null),Mn=new Map().set("messageType",xn.keyStatuses.ec()==null?"license-request":"license-renewal").set("message",fp(Mn.message)),Mn=new vu("message",Mn),xn.dispatchEvent(Mn)}),this.j.o(An,"webkitkeyadded",function(){xn.g&&(w$(xn,"usable"),xn.g.resolve(),xn.g=null)}),this.j.o(An,"webkitkeyerror",function(){var Mn=Error("EME PatchedMediaKeysApple key error");if(Mn.errorCode=xn.i.error,xn.h!=null)xn.h.reject(Mn),xn.h=null;else if(xn.g!=null)xn.g.reject(Mn),xn.g=null;else switch(xn.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:w$(xn,"output-not-allowed");break;default:w$(xn,"internal-error")}}),w$(this,"status-pending")}catch(Mn){this.h.reject(Mn)}return this.h},Sn.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},Sn.update=function(mn){this.g=new _l;try{this.i.update(Ku(mn))}catch(En){this.g.reject(En)}return this.g},Sn.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Rb()}catch(mn){this.closed.reject(mn)}return this.closed},Sn.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function w$(mn,En){var xn=mn.keyStatuses;xn.size=En==null?0:1,xn.g=En,En=new vu("keystatuseschange"),mn.dispatchEvent(En)}function _T(){this.size=0,this.g=void 0}Sn=_T.prototype,Sn.ec=function(){return this.g},Sn.forEach=function(mn){this.g&&mn(this.g,_k.value())},Sn.get=function(mn){if(this.has(mn))return this.g},Sn.has=function(mn){var En=_k.value();return!!(this.g&&Ip(mn,En))},Sn.entries=function(){},Sn.keys=function(){},Sn.values=function(){};function ET(){}function Uw(){!pn.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=jw,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=Fw,pn.MediaKeys=A$,pn.MediaKeySystemAccess=ST,pn.shakaMediaKeysPolyfill=!0)}function jw(){return Promise.reject(Error("The key system specified is not supported."))}function Fw(mn){return mn==null?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}xp.PatchedMediaKeysNop=ET,ET.install=Uw;function A$(){throw new TypeError("Illegal constructor.")}A$.prototype.createSession=function(){},A$.prototype.setServerCertificate=function(){};function ST(){throw this.keySystem="",new TypeError("Illegal constructor.")}ST.prototype.getConfiguration=function(){},ST.prototype.createMediaKeys=function(){},mp(Uw,-10);function TT(){}function Bw(){if(!(!pn.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)R$="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=RO,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=NO,pn.MediaKeys=P$,pn.MediaKeySystemAccess=I$,pn.shakaMediaKeysPolyfill=!0}}function kT(mn){var En=R$;return En?En+mn.charAt(0).toUpperCase()+mn.slice(1):mn}function RO(mn,En){try{var xn=new I$(mn,En);return Promise.resolve(xn)}catch(An){return Promise.reject(An)}}function NO(mn){var En=this.mediaKeys;return En&&En!=mn&&DO(En,null),delete this.mediaKeys,(this.mediaKeys=mn)&&DO(mn,this),Promise.resolve()}xp.PatchedMediaKeysWebkit=TT,TT.install=Bw;function I$(mn,En){this.g=this.keySystem=mn;var xn=!1;mn=="org.w3.clearkey"&&(this.g="webkit-org.w3.clearkey",xn=!1);var An=!1,Mn=document.getElementsByTagName("video");Mn=Mn.length?Mn[0]:document.createElement("video"),En=Dn(En);for(var Un=En.next();!Un.done;Un=En.next()){Un=Un.value;var Bn={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:Un.initDataTypes,sessionTypes:["temporary"],label:Un.label},Gn=!1;if(Un.audioCapabilities)for(var Wn=Dn(Un.audioCapabilities),ts=Wn.next();!ts.done;ts=Wn.next())ts=ts.value,ts.contentType&&(Gn=!0,Mn.canPlayType(ts.contentType.split(";")[0],this.g)&&(Bn.audioCapabilities.push(ts),An=!0));if(Un.videoCapabilities)for(Wn=Dn(Un.videoCapabilities),ts=Wn.next();!ts.done;ts=Wn.next())ts=ts.value,ts.contentType&&(Gn=!0,Mn.canPlayType(ts.contentType,this.g)&&(Bn.videoCapabilities.push(ts),An=!0));if(Gn||(An=Mn.canPlayType("video/mp4",this.g)||Mn.canPlayType("video/webm",this.g)),Un.persistentState=="required"&&(xn?(Bn.persistentState="required",Bn.sessionTypes=["persistent-license"]):An=!1),An){this.h=Bn;return}}throw xn="Unsupported keySystem",(mn=="org.w3.clearkey"||mn=="com.widevine.alpha")&&(xn="None of the requested configurations were supported."),mn=Error(xn),mn.name="NotSupportedError",mn.code=DOMException.NOT_SUPPORTED_ERR,mn}I$.prototype.createMediaKeys=function(){var mn=new P$(this.g);return Promise.resolve(mn)},I$.prototype.getConfiguration=function(){return this.h};function P$(mn){this.l=mn,this.h=null,this.g=new xu,this.i=[],this.j=new Map}function DO(mn,En){mn.h=En,mn.g.Rb();var xn=R$;En&&(mn.g.o(En,xn+"needkey",function(An){var Mn=new CustomEvent("encrypted");Mn.initDataType="cenc",Mn.initData=fp(An.initData),mn.h.dispatchEvent(Mn)}),mn.g.o(En,xn+"keymessage",function(An){var Mn=Vw(mn,An.sessionId);Mn&&(An=new Map().set("messageType",Mn.keyStatuses.ec()==null?"licenserequest":"licenserenewal").set("message",An.message),An=new vu("message",An),Mn.h&&(Mn.h.resolve(),Mn.h=null),Mn.dispatchEvent(An))}),mn.g.o(En,xn+"keyadded",function(An){(An=Vw(mn,An.sessionId))&&(M$(An,"usable"),An.g&&An.g.resolve(),An.g=null)}),mn.g.o(En,xn+"keyerror",function(An){var Mn=Vw(mn,An.sessionId);Mn&&Mn.handleError(An)}))}P$.prototype.createSession=function(mn){if(mn=mn||"temporary",mn!="temporary"&&mn!="persistent-license")throw new TypeError("Session type "+mn+" is unsupported on this platform.");var En=this.h||document.createElement("video");return En.src||(En.src="about:blank"),mn=new Gw(En,this.l,mn),this.i.push(mn),mn},P$.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function Vw(mn,En){var xn=mn.j.get(En);return xn||((xn=mn.i.shift())?(xn.sessionId=En,mn.j.set(En,xn),xn):null)}function Gw(mn,En,xn){Eu.call(this),this.j=mn,this.m=!1,this.g=this.h=null,this.i=En,this.l=xn,this.sessionId="",this.expiration=NaN,this.closed=new _l,this.keyStatuses=new Hw}as(Gw,Eu),Sn=Gw.prototype,Sn.handleError=function(mn){var En=Error("EME v0.1b key error"),xn=mn.errorCode;xn.systemCode=mn.systemCode,En.errorCode=xn,!mn.sessionId&&this.h?(mn.systemCode==45&&(En.message="Unsupported session type."),this.h.reject(En),this.h=null):mn.sessionId&&this.g?(this.g.reject(En),this.g=null):(En=mn.systemCode,mn.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?M$(this,"output-restricted"):En==1?M$(this,"expired"):M$(this,"internal-error"))};function zw(mn,En,xn){if(mn.m)return Promise.reject(Error("The session is already initialized."));mn.m=!0;try{if(mn.l=="persistent-license")if(xn)var An=Ku(Kp("LOAD_SESSION|"+xn));else{var Mn=Kp("PERSISTENT|");An=Up(Mn,En)}else An=Ku(En)}catch(Bn){return Promise.reject(Bn)}mn.h=new _l;var Un=kT("generateKeyRequest");try{mn.j[Un](mn.i,An)}catch(Bn){if(Bn.name!="InvalidStateError")return mn.h=null,Promise.reject(Bn);new ku(function(){try{mn.j[Un](mn.i,An)}catch(Gn){mn.h.reject(Gn),mn.h=null}}).R(.01)}return mn.h}function O$(mn,En,xn){if(mn.g)mn.g.then(function(){return O$(mn,En,xn)}).catch(function(){return O$(mn,En,xn)});else{if(mn.g=En,mn.i=="webkit-org.w3.clearkey"){var An=xl(xn),Mn=JSON.parse(An);Mn.keys[0].kty!="oct"&&(mn.g.reject(Error("Response is not a valid JSON Web Key Set.")),mn.g=null),An=Lp(Mn.keys[0].k),Mn=Lp(Mn.keys[0].kid)}else An=Ku(xn),Mn=null;var Un=kT("addKey");try{mn.j[Un](mn.i,An,Mn,mn.sessionId)}catch(Bn){mn.g.reject(Bn),mn.g=null}}}function M$(mn,En){var xn=mn.keyStatuses;xn.size=En==null?0:1,xn.g=En,En=new vu("keystatuseschange"),mn.dispatchEvent(En)}Sn.generateRequest=function(mn,En){return zw(this,En,null)},Sn.load=function(mn){return this.l=="persistent-license"?zw(this,null,mn):Promise.reject(Error("Not a persistent session."))},Sn.update=function(mn){var En=new _l;return O$(this,En,mn),En},Sn.close=function(){if(this.l!="persistent-license"){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var mn=kT("cancelKeyRequest");try{this.j[mn](this.i,this.sessionId)}catch{}}return this.closed.resolve(),this.closed},Sn.remove=function(){return this.l!="persistent-license"?Promise.reject(Error("Not a persistent session.")):this.close()};function Hw(){this.size=0,this.g=void 0}Sn=Hw.prototype,Sn.ec=function(){return this.g},Sn.forEach=function(mn){this.g&&mn(this.g,_k.value())},Sn.get=function(mn){if(this.has(mn))return this.g},Sn.has=function(mn){var En=_k.value();return!!(this.g&&Ip(mn,En))},Sn.entries=function(){},Sn.keys=function(){},Sn.values=function(){};var R$="";mp(Bw);function LO(){}function Kw(){if(pn.HTMLVideoElement){var mn=HTMLVideoElement.prototype;mn.requestPictureInPicture&&document.exitPictureInPicture||!mn.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,mn.requestPictureInPicture=bN,Object.defineProperty(mn,"disablePictureInPicture",{get:FO,set:BO,enumerable:!0,configurable:!0}),document.exitPictureInPicture=jO,document.addEventListener("webkitpresentationmodechanged",UO,!0))}}function UO(mn){if(mn=mn.target,mn.webkitPresentationMode=="picture-in-picture"){document.pictureInPictureElement=mn;var En=new Event("enterpictureinpicture");mn.dispatchEvent(En)}else document.pictureInPictureElement==mn&&(document.pictureInPictureElement=null),En=new Event("leavepictureinpicture"),mn.dispatchEvent(En)}function bN(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function jO(){var mn=document.pictureInPictureElement;return mn?(mn.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function FO(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode("picture-in-picture")}function BO(mn){mn?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}xp.PiPWebkit=LO,LO.install=Kw,mp(Kw);function Ww(){}function VO(){pn.crypto&&("randomUUID"in pn.crypto||(pn.crypto.randomUUID=GO))}function GO(){var mn=URL.createObjectURL(new Blob),En=mn.toString();return URL.revokeObjectURL(mn),En.substr(En.lastIndexOf("/")+1)}xp.RandomUUID=Ww,Ww.install=VO,mp(VO);function qw(){}function N$(){navigator.storage&&navigator.storage.estimate||!navigator.webkitTemporaryStorage||!navigator.webkitTemporaryStorage.queryUsageAndQuota||("storage"in navigator||(navigator.storage={}),navigator.storage.estimate=xN)}function xN(){return new Promise(function(mn,En){navigator.webkitTemporaryStorage.queryUsageAndQuota(function(xn,An){mn({usage:xn,quota:An})},En)})}xp.StorageEstimate=qw,qw.install=N$,mp(N$);function Ty(){}function zO(){var mn=Symbol.prototype;"description"in mn||Object.defineProperty(mn,"description",{get:CN})}function CN(){var mn=/\((.*)\)/.exec(this.toString());return mn?mn[1]:void 0}xp.Symbol=Ty,Ty.install=zO,mp(zO);function Jm(){}function Yw(){if(pn.HTMLMediaElement){var mn=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var En=mn.apply(this);return En&&En.catch(function(){}),En}}}xp.VideoPlayPromise=Jm,Jm.install=Yw,mp(Yw);function HO(){}function Xw(){if(pn.HTMLVideoElement){var mn=HTMLVideoElement.prototype;!mn.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in mn||XE())&&(mn.getVideoPlaybackQuality=im)}}function im(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}xp.VideoPlaybackQuality=HO,HO.install=Xw,mp(Xw);function $T(){}function D$(){if(!pn.VTTCue&&pn.TextTrackCue){var mn=null,En=TextTrackCue.length;if(En==3)mn=L$;else if(En==6)mn=U$;else{try{var xn=!!L$(1,2,"")}catch{xn=!1}xn&&(mn=L$)}mn&&(pn.VTTCue=function(An,Mn,Un){return mn(An,Mn,Un)})}}function L$(mn,En,xn){return new pn.TextTrackCue(mn,En,xn)}function U$(mn,En,xn){return new pn.TextTrackCue(mn+"-"+En+"-"+xn,mn,En,xn)}xp.VTTCue=$T,$T.install=D$,mp(D$);function Yy(){}Yy.prototype.parseInit=function(){},Yy.prototype.setSequenceMode=function(){},Yy.prototype.parseMedia=function(mn,En){var xn=null,An=[];mn=xl(mn).split(/\r?\n/),mn=Dn(mn);for(var Mn=mn.next();!Mn.done;Mn=mn.next())if((Mn=Mn.value)&&!/^\s+$/.test(Mn)&&(Mn=KO.exec(Mn))){var Un=Qw.exec(Mn[1]);Un=60*parseInt(Un[1],10)+parseFloat(Un[2].replace(",",".")),Mn=new tl(Un,En.segmentEnd?En.segmentEnd:Un+2,Mn[2]),xn&&(xn.endTime=Un,An.push(xn)),xn=Mn}return xn&&An.push(xn),An},Ys("shaka.text.LrcTextParser",Yy),Yy.prototype.parseMedia=Yy.prototype.parseMedia,Yy.prototype.setSequenceMode=Yy.prototype.setSequenceMode,Yy.prototype.parseInit=Yy.prototype.parseInit;var KO=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,Qw=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;Ll["application/x-subtitle-lrc"]=function(){return new Yy};function Mm(){}Mm.prototype.parseInit=function(){},Mm.prototype.setSequenceMode=function(){},Mm.prototype.parseMedia=function(mn,En){var xn=xl(mn);if(mn=[],xn=="")return mn;var An=q0(xn,"tt");if(!An)throw new zs(2,2,2005,"Failed to parse TTML.");if(xn=An.getElementsByTagName("body")[0],!xn)return[];var Mn=ly(An,I0,"frameRate"),Un=ly(An,I0,"subFrameRate"),Bn=ly(An,I0,"frameRateMultiplier"),Gn=ly(An,I0,"tickRate"),Wn=ly(An,I0,"cellResolution"),ts=An.getAttribute("xml:space")||"default",os=ly(An,CT,"extent");if(ts!="default"&&ts!="preserve")throw new zs(2,2,2005,"Invalid xml:space value: "+ts);ts=ts=="default",Mn=new wN(Mn,Un,Bn,Gn),Wn=Wn&&(Wn=/^(\d+) (\d+)$/.exec(Wn))?{columns:parseInt(Wn[1],10),rows:parseInt(Wn[2],10)}:null,Un=(Un=An.getElementsByTagName("metadata")[0])?Nv(Un):[],Bn=Array.from(An.getElementsByTagName("style")),An=Array.from(An.getElementsByTagName("region")),Gn=[];for(var cs=Dn(An),ls=cs.next();!ls.done;ls=cs.next()){var gs=ls.value;ls=new Jp;var ws=gs.getAttribute("xml:id");if(ws){ls.id=ws;var Ns=null;os&&(Ns=A0.exec(os)||dm.exec(os)),ws=Ns?Number(Ns[1]):null,Ns=Ns?Number(Ns[2]):null;var Os,Ps;(Os=jE(gs,Bn,"extent"))&&(Os=(Ps=A0.exec(Os))||dm.exec(Os),Os!=null&&(ls.width=Number(Os[1]),ls.height=Number(Os[2]),Ps||(ws!=null&&(ls.width=100*ls.width/ws),Ns!=null&&(ls.height=100*ls.height/Ns)),ls.widthUnits=Ps||ws!=null?ap:0,ls.heightUnits=Ps||Ns!=null?ap:0)),(gs=jE(gs,Bn,"origin"))&&(Os=(Ps=A0.exec(gs))||dm.exec(gs),Os!=null&&(ls.viewportAnchorX=Number(Os[1]),ls.viewportAnchorY=Number(Os[2]),Ps||(Ns!=null&&(ls.viewportAnchorY=100*ls.viewportAnchorY/Ns),ws!=null&&(ls.viewportAnchorX=100*ls.viewportAnchorX/ws)),ls.viewportAnchorUnits=Ps||ws!=null?ap:0))}else ls=null;ls&&Gn.push(ls)}if(Xl(xn,"p").length)throw new zs(2,2,2001,"<p> can only be inside <div> in TTML");for(os=Dn(Xl(xn,"div")),cs=os.next();!cs.done;cs=os.next())if(Xl(cs.value,"span").length)throw new zs(2,2,2001,"<span> can only be inside <p> in TTML");return(En=WO(xn,En,Mn,Un,Bn,An,Gn,ts,Wn,null,!1))&&(En.backgroundColor||(En.backgroundColor="transparent"),mn.push(En)),mn};function WO(mn,En,xn,An,Mn,Un,Bn,Gn,Wn,ts,os){var cs=mn.parentNode;if(mn.nodeType==Node.COMMENT_NODE)return null;if(mn.nodeType==Node.TEXT_NODE){if(!os)return null;var ls=document.createElement("span");ls.textContent=mn.textContent}else ls=mn;for(var gs=null,ws=Dn(Xy),Ns=ws.next();!Ns.done&&!(gs=bT(ls,"backgroundImage",An,"#",Ns.value)[0]);Ns=ws.next());if(ws=os,(mn.nodeName=="p"||gs)&&(os=!0),Gn=(ls.getAttribute("xml:space")||(Gn?"default":"preserve"))=="default",Ns=Array.from(ls.childNodes).every(function(qs){return qs.nodeType==Node.TEXT_NODE}),mn=[],!Ns)for(var Os=Dn(ls.childNodes),Ps=Os.next();!Ps.done;Ps=Os.next())(Ps=WO(Ps.value,En,xn,An,Mn,Un,Bn,Gn,Wn,ls,os))&&mn.push(Ps);An=ts!=null,Os=/\S/.test(ls.textContent);var Xs=ls.hasAttribute("begin")||ls.hasAttribute("end")||ls.hasAttribute("dur");if(!(Xs||Os||ls.tagName=="br"||mn.length!=0||An&&!Gn))return null;for(Ps=eA(ls,xn),Os=Ps.start,Ps=Ps.end;cs&&cs.nodeType==Node.ELEMENT_NODE&&cs.tagName!="tt";)Ps=YO(cs,xn,Os,Ps),Os=Ps.start,Ps=Ps.end,cs=cs.parentNode;if(Os==null&&(Os=0),Os+=En.periodStart,Ps=Ps==null?1/0:Ps+En.periodStart,Os=Math.max(Os,En.segmentStart),Ps=Math.min(Ps,En.segmentEnd),!Xs&&0<mn.length)for(Os=1/0,Ps=0,En=Dn(mn),xn=En.next();!xn.done;xn=En.next())xn=xn.value,Os=Math.min(Os,xn.startTime),Ps=Math.max(Ps,xn.endTime);if(ls.tagName=="br")return Mn=new tl(Os,Ps,""),Mn.lineBreak=!0,Mn;if(En="",Ns&&(En=ls.textContent,Gn&&(En=En.trim(),En=En.replace(/\s+/g," "))),En=new tl(Os,Ps,En),En.nestedCues=mn,os||(En.isContainer=!0),Wn&&(En.cellResolution=Wn),Wn=bT(ls,"region",Un,"")[0],ls.hasAttribute("region")&&Wn&&Wn.getAttribute("xml:id")){var Ds=Wn.getAttribute("xml:id");En.region=Bn.filter(function(qs){return qs.id==Ds})[0]}return Bn=Wn,ts&&An&&!ls.getAttribute("region")&&!ls.getAttribute("style")&&(Bn=bT(ts,"region",Un,"")[0]),Zw(En,ls,Bn,gs,Mn,ws,mn.length==0),En}function Zw(mn,En,xn,An,Mn,Un,Bn){if(Un=Un||Bn,gp(En,xn,Mn,"direction",Un)=="rtl"&&(mn.direction="rtl"),Bn=gp(En,xn,Mn,"writingMode",Un),Bn=="tb"||Bn=="tblr"?mn.writingMode="vertical-lr":Bn=="tbrl"?mn.writingMode="vertical-rl":Bn=="rltb"||Bn=="rl"?mn.direction="rtl":Bn&&(mn.direction=Em),(Bn=gp(En,xn,Mn,"textAlign",!0))?(mn.positionAlign=V$[Bn],mn.lineAlign=AN[Bn],mn.textAlign=ay[Bn.toUpperCase()]):mn.textAlign=Dp,(Bn=gp(En,xn,Mn,"displayAlign",!0))&&(mn.displayAlign=Ap[Bn.toUpperCase()]),(Bn=gp(En,xn,Mn,"color",Un))&&(mn.color=Bn),(Bn=gp(En,xn,Mn,"backgroundColor",Un))&&(mn.backgroundColor=Bn),(Bn=gp(En,xn,Mn,"border",Un))&&(mn.border=Bn),Bn=gp(En,xn,Mn,"fontFamily",Un))switch(Bn){case"monospaceSerif":mn.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":mn.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":mn.fontFamily="sans-serif";break;case"monospaceSansSerif":mn.fontFamily="Consolas,monospace";break;case"proportionalSerif":mn.fontFamily="serif";break;default:mn.fontFamily=Bn}if((Bn=gp(En,xn,Mn,"fontWeight",Un))&&Bn=="bold"&&(mn.fontWeight=700),Bn=gp(En,xn,Mn,"wrapOption",Un),mn.wrapLine=!(Bn&&Bn=="noWrap"),(Bn=gp(En,xn,Mn,"lineHeight",Un))&&Bn.match(FE)&&(mn.lineHeight=Bn),(Bn=gp(En,xn,Mn,"fontSize",Un))&&(Bn.match(FE)||Bn.match(B$))&&(mn.fontSize=Bn),(Bn=gp(En,xn,Mn,"fontStyle",Un))&&(mn.fontStyle=YE[Bn.toUpperCase()]),An){Bn=An.getAttribute("imageType")||An.getAttribute("imagetype");var Gn=An.getAttribute("encoding");An=An.textContent.trim(),Bn=="PNG"&&Gn=="Base64"&&An&&(mn.backgroundImage="data:image/png;base64,"+An)}(An=gp(En,xn,Mn,"textOutline",Un))&&(An=An.split(" "),An[0].match(FE)?mn.textStrokeColor=mn.color:(mn.textStrokeColor=An[0],An.shift()),An[0]&&An[0].match(FE)?mn.textStrokeWidth=An[0]:mn.textStrokeColor=""),(An=gp(En,xn,Mn,"letterSpacing",Un))&&An.match(FE)&&(mn.letterSpacing=An),(An=gp(En,xn,Mn,"linePadding",Un))&&An.match(FE)&&(mn.linePadding=An),(Un=gp(En,xn,Mn,"opacity",Un))&&(mn.opacity=parseFloat(Un)),(xn=jE(xn,Mn,"textDecoration"))&&qO(mn,xn),(En=j$(En,Mn,"textDecoration"))&&qO(mn,En)}function qO(mn,En){En=Dn(En.split(" "));for(var xn=En.next();!xn.done;xn=En.next())switch(xn.value){case"underline":mn.textDecoration.includes("underline")||mn.textDecoration.push("underline");break;case"noUnderline":mn.textDecoration.includes("underline")&&Wu(mn.textDecoration,"underline");break;case"lineThrough":mn.textDecoration.includes("lineThrough")||mn.textDecoration.push("lineThrough");break;case"noLineThrough":mn.textDecoration.includes("lineThrough")&&Wu(mn.textDecoration,"lineThrough");break;case"overline":mn.textDecoration.includes("overline")||mn.textDecoration.push("overline");break;case"noOverline":mn.textDecoration.includes("overline")&&Wu(mn.textDecoration,"overline")}}function gp(mn,En,xn,An,Mn){return Mn=Mn===void 0?!0:Mn,(mn=j$(mn,xn,An))?mn:Mn?jE(En,xn,An):null}function jE(mn,En,xn){if(!mn)return null;var An=ly(mn,CT,xn);return An||Jw(mn,En,xn)}function j$(mn,En,xn){var An=ly(mn,CT,xn);return An||Jw(mn,En,xn)}function Jw(mn,En,xn){mn=bT(mn,"style",En,"");for(var An=null,Mn=0;Mn<mn.length;Mn++){var Un=K_(mn[Mn],"urn:ebu:tt:style",xn);Un||(Un=ly(mn[Mn],CT,xn)),Un||(Un=j$(mn[Mn],En,xn)),Un&&(An=Un)}return An}function bT(mn,En,xn,An,Mn){var Un=[];if(!mn||1>xn.length)return Un;var Bn=mn;for(mn=null;Bn&&!(mn=Mn?K_(Bn,Mn,En):Bn.getAttribute(En))&&(Bn=Bn.parentNode,Bn instanceof Element););if(En=mn){for(En=Dn(En.split(" ")),Mn=En.next();!Mn.done;Mn=En.next())for(Mn=Mn.value,mn=Dn(xn),Bn=mn.next();!Bn.done;Bn=mn.next())if(Bn=Bn.value,An+Bn.getAttribute("xml:id")==Mn){Un.push(Bn);break}}return Un}function YO(mn,En,xn,An){return mn=eA(mn,En),xn==null?xn=mn.start:mn.start!=null&&(xn+=mn.start),An==null?An=mn.end:mn.start!=null&&(An+=mn.start),{start:xn,end:An}}function eA(mn,En){var xn=F$(mn.getAttribute("begin"),En),An=F$(mn.getAttribute("end"),En);return mn=F$(mn.getAttribute("dur"),En),An==null&&mn!=null&&(An=xn+mn),{start:xn,end:An}}function F$(mn,En){var xn=null;if(ym.test(mn)){mn=ym.exec(mn),xn=Number(mn[1]);var An=Number(mn[2]),Mn=Number(mn[3]),Un=Number(mn[4]);Un+=(Number(mn[5])||0)/En.h,Mn+=Un/En.frameRate,xn=Mn+60*An+3600*xn}else if(rA.test(mn))xn=tA(rA,mn);else if(nA.test(mn))xn=tA(nA,mn);else if(xT.test(mn))mn=xT.exec(mn),xn=Number(mn[1])/En.frameRate;else if(iA.test(mn))mn=iA.exec(mn),xn=Number(mn[1])/En.g;else if(aA.test(mn))xn=tA(aA,mn);else if(mn)throw new zs(2,2,2001,"Could not parse cue time range in TTML");return xn}function tA(mn,En){return mn=mn.exec(En),mn==null||mn[0]==""?null:(Number(mn[4])||0)/1e3+(Number(mn[3])||0)+60*(Number(mn[2])||0)+3600*(Number(mn[1])||0)}Ys("shaka.text.TtmlTextParser",Mm),Mm.prototype.parseMedia=Mm.prototype.parseMedia,Mm.prototype.setSequenceMode=Mm.prototype.setSequenceMode,Mm.prototype.parseInit=Mm.prototype.parseInit;function wN(mn,En,xn,An){this.frameRate=Number(mn)||30,this.h=Number(En)||1,this.g=Number(An),this.g==0&&(this.g=mn?this.frameRate*this.h:1),xn&&(mn=/^(\d+) (\d+)$/g.exec(xn))&&(this.frameRate*=Number(mn[1])/Number(mn[2]))}var A0=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,B$=/^(\d{1,2}(?:\.\d+)?|100)%$/,FE=/^(\d+px|\d+em|\d*\.?\d+c)$/,dm=/^(\d+)px (\d+)px$/,ym=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,rA=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,nA=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,xT=/^(\d*(?:\.\d*)?)f$/,iA=/^(\d*(?:\.\d*)?)t$/,aA=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),AN={left:Ep,center:"center",right:"end",start:Ep,end:"end"},V$={left:"line-left",center:"center",right:"line-right"},I0=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],CT=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],Xy=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];Ll["application/ttml+xml"]=function(){return new Mm};function Rm(){this.g=new Mm}Rm.prototype.parseInit=function(mn){var En=!1;if(new Nl().box("moov",zl).box("trak",zl).box("mdia",zl).box("minf",zl).box("stbl",zl).T("stsd",G0).box("stpp",function(xn){En=!0,xn.parser.stop()}).parse(mn),!En)throw new zs(2,2,2007)},Rm.prototype.setSequenceMode=function(){},Rm.prototype.parseMedia=function(mn,En){var xn=this,An=!1,Mn=[];if(new Nl().box("mdat",Rv(function(Un){An=!0,Mn=Mn.concat(xn.g.parseMedia(Un,En))})).parse(mn,!1),!An)throw new zs(2,2,2007);return Mn},Ys("shaka.text.Mp4TtmlParser",Rm),Rm.prototype.parseMedia=Rm.prototype.parseMedia,Rm.prototype.setSequenceMode=Rm.prototype.setSequenceMode,Rm.prototype.parseInit=Rm.prototype.parseInit,Ll['application/mp4; codecs="stpp"']=function(){return new Rm},Ll['application/mp4; codecs="stpp.ttml"']=function(){return new Rm},Ll['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new Rm},Ll['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new Rm};function Nm(){this.g=!1}Nm.prototype.parseInit=function(){},Nm.prototype.setSequenceMode=function(mn){this.g=mn},Nm.prototype.parseMedia=function(mn,En){mn=xl(mn),mn=mn.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`);var xn=mn.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(xn[0]))throw new zs(2,2,2e3);if(mn=En.vttOffset,xn[0].includes("X-TIMESTAMP-MAP")&&this.g){var An=xn[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),Mn=xn[0].match(/MPEGTS:(\d+)/m);if(An&&Mn){if(mn=wT(new Yv(An[1])),mn==null)throw new zs(2,2,2e3);for(Mn=Number(Mn[1]),An=En.segmentStart-En.periodStart;95443.7176888889<=An;)An-=95443.7176888889,Mn+=8589934592;mn=En.periodStart+Mn/9e4-mn}}for(En=[],Mn=Dn(xn[0].split(`
`)),An=Mn.next();!An.done;An=Mn.next())if(An=An.value,/^Region:/.test(An)){An=new Yv(An);var Un=new Jp;T0(An),gv(An);for(var Bn=T0(An);Bn;){var Gn=Un,Wn=Bn;(Bn=/^id=(.*)$/.exec(Wn))?Gn.id=Bn[1]:(Bn=/^width=(\d{1,2}|100)%$/.exec(Wn))?Gn.width=Number(Bn[1]):(Bn=/^lines=(\d+)$/.exec(Wn))?(Gn.height=Number(Bn[1]),Gn.heightUnits=2):(Bn=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(Wn))?(Gn.regionAnchorX=Number(Bn[1]),Gn.regionAnchorY=Number(Bn[2])):(Bn=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(Wn))?(Gn.viewportAnchorX=Number(Bn[1]),Gn.viewportAnchorY=Number(Bn[2])):/^scroll=up$/.exec(Wn)&&(Gn.scroll="up"),gv(An),Bn=T0(An)}En.push(Un)}for(Mn=new Map,ky(Mn),An=[],xn=Dn(xn.slice(1)),Un=xn.next();!Un.done;Un=xn.next()){if(Un=Un.value.split(`
`),(Un.length!=1||Un[0])&&!/^NOTE($|[ \t])/.test(Un[0])&&Un[0]=="STYLE"){for(Gn=[],Bn=-1,Wn=1;Wn<Un.length;Wn++)Un[Wn].includes("::cue")&&(Gn.push([]),Bn=Gn.length-1),Bn!=-1&&(Gn[Bn].push(Un[Wn]),Un[Wn].includes("}")&&(Bn=-1));for(Gn=Dn(Gn),Bn=Gn.next();!Bn.done;Bn=Gn.next()){var ts=Bn.value;Bn="global",(Wn=ts[0].match(/\((.*)\)/))&&(Bn=Wn.pop()),Wn=ts.slice(1,-1),ts[0].includes("}")&&(ts=/\{(.*?)\}/.exec(ts[0]))&&(Wn=ts[1].split(";")),(ts=Mn.get(Bn))||(ts=new tl(0,0,""));for(var os=!1,cs=0;cs<Wn.length;cs++){var ls=/^\s*([^:]+):\s*(.*)/.exec(Wn[cs]);if(ls){var gs=ls[2].trim().replace(";","");switch(ls[1].trim()){case"background-color":case"background":os=!0,ts.backgroundColor=gs;break;case"color":os=!0,ts.color=gs;break;case"font-family":os=!0,ts.fontFamily=gs;break;case"font-size":os=!0,ts.fontSize=gs;break;case"font-weight":(700<=parseInt(gs,10)||gs=="bold")&&(os=!0,ts.fontWeight=700);break;case"font-style":switch(gs){case"normal":os=!0,ts.fontStyle=gl;break;case"italic":os=!0,ts.fontStyle="italic";break;case"oblique":os=!0,ts.fontStyle="oblique"}break;case"opacity":os=!0,ts.opacity=parseFloat(gs);break;case"text-shadow":os=!0,ts.textShadow=gs;break;case"white-space":os=!0,ts.wrapLine=gs!="noWrap"}}}os&&Mn.set(Bn,ts)}}if(os=mn,Un.length==1&&!Un[0]||/^NOTE($|[ \t])/.test(Un[0])||Un[0]=="STYLE"||Un[0]=="REGION")Un=null;else{if(Gn=null,Un[0].includes("-->")||(Gn=Un[0],Un.splice(0,1)),Bn=new Yv(Un[0]),Wn=wT(Bn),cs=yv(Bn,/[ \t]+--\x3e[ \t]+/g),ts=wT(Bn),Wn==null||cs==null||ts==null)throw new zs(2,2,2001,"Could not parse cue time range in WebVTT");for(Wn+=os,ts+=os,os=Un.slice(1).join(`
`).trim(),Mn.has("global")?(Un=Mn.get("global").clone(),Un.startTime=Wn,Un.endTime=ts,Un.payload=""):Un=new tl(Wn,ts,""),oA(os,Un,Mn),gv(Bn),Wn=T0(Bn);Wn;)$y(Un,Wn,En),gv(Bn),Wn=T0(Bn);Gn!=null&&(Un.id=Gn)}Un&&An.push(Un)}return An};function ky(mn){for(var En=Dn(Object.entries(D_)),xn=En.next();!xn.done;xn=En.next()){var An=Dn(xn.value);xn=An.next().value,An=An.next().value;var Mn=new tl(0,0,"");Mn.color=An,mn.set("."+xn,Mn)}for(En=Dn(Object.entries(hm)),xn=En.next();!xn.done;xn=En.next())An=Dn(xn.value),xn=An.next().value,An=An.next().value,Mn=new tl(0,0,""),Mn.backgroundColor=An,mn.set("."+xn,Mn)}function oA(mn,En,xn){xn.size===0&&ky(xn);e:{var An=mn;mn=[];for(var Mn=-1,Un="",Bn=0;Bn<An.length;Bn++)if(An[Bn]==="/"&&0<Bn&&An[Bn-1]==="<"){var Gn=An.indexOf(">",Bn);if(Gn<=Bn){mn=An;break e}if((Gn=An.substring(Bn+1,Gn))&&Gn==="c"){var Wn=mn.pop();Wn?Wn===Gn?(Un+="/"+Gn+">",Bn+=Gn.length+1):Wn.startsWith("c.")?(Bn+=Gn.length+1,Un+="/"+Wn+">"):Un+=An[Bn]:Un+=An[Bn]}else Un+=An[Bn]}else An[Bn]==="<"?(Mn=Bn+1,An[Mn]!="c"&&(Mn=-1)):An[Bn]===">"&&0<Mn&&(mn.push(An.substr(Mn,Bn-Mn)),Mn=-1),Un+=An[Bn];mn=Un}for(An=[],Un=-1,Mn=0;Mn<mn.length;Mn++)mn[Mn]==="<"?Un=Mn+1:mn[Mn]===">"&&0<Un&&(Un=mn.substr(Un,Mn-Un),Un.match(XO)&&An.push(Un),Un=-1);for(An=Dn(An),Mn=An.next();!Mn.done;Mn=An.next())Mn=Mn.value,mn=mn.replace("<"+Mn+">",'<div time="'+Mn+'">'),mn+="</div>";e:{for(Mn=mn,Un=[],Bn=-1,An="",mn=!1,Gn=0;Gn<Mn.length;Gn++)if(Mn[Gn]==="/"){if(Wn=Mn.indexOf(">",Gn),Wn===-1){mn=Mn;break e}if((Wn=Mn.substring(Gn+1,Wn))&&Wn=="v"){mn=!0;var ts=null;if(Un.length&&(ts=Un[Un.length-1]),ts){if(ts===Wn)An+="/"+Wn+">";else{if(!ts.startsWith("v")){An+=Mn[Gn];continue}An+="/"+ts+">"}Gn+=Wn.length+1}else An+=Mn[Gn]}else An+=Mn[Gn]}else Mn[Gn]==="<"?(Bn=Gn+1,Mn[Bn]!="v"&&(Bn=-1)):Mn[Gn]===">"&&0<Bn&&(Un.push(Mn.substr(Bn,Gn-Bn)),Bn=-1),An+=Mn[Gn];for(Mn=Dn(Un),Un=Mn.next();!Un.done;Un=Mn.next())Un=Un.value,Bn=Un.replace(" ",".voice-"),An=An.replace("<"+Un+">","<"+Bn+">"),An=An.replace("</"+Un+">","</"+Bn+">"),mn||(An+="</"+Bn+">");mn=An}if(Mn=q0("<span>"+mn+"</span>","span")){if(An=[],Mn=Mn.childNodes,Mn.length==1&&(Un=Mn[0],Un.nodeType==Node.TEXT_NODE||Un.nodeType==Node.CDATA_SECTION_NODE)){En.payload=G$(mn);return}for(mn=Dn(Mn),Mn=mn.next();!Mn.done;Mn=mn.next())sA(Mn.value,En,An,xn);En.nestedCues=An}else En.payload=G$(mn)}function vm(mn,En){return mn&&0<mn.length?mn:En}function sA(mn,En,xn,An){var Mn=En.clone();if(mn.nodeType===Node.ELEMENT_NODE&&mn.nodeName)for(var Un=Dn(mn.nodeName.split(/(?=[ .])+/g)),Bn=Un.next();!Bn.done;Bn=Un.next()){var Gn=Bn=Bn.value;if(Gn.startsWith(".voice-")){var Wn=Gn.split("-").pop();Gn='v[voice="'+Wn+'"]',An.has(Gn)||(Gn="v[voice="+Wn+"]")}switch(An.has(Gn)&&(Gn=An.get(Gn))&&(Mn.backgroundColor=vm(Gn.backgroundColor,Mn.backgroundColor),Mn.color=vm(Gn.color,Mn.color),Mn.fontFamily=vm(Gn.fontFamily,Mn.fontFamily),Mn.fontSize=vm(Gn.fontSize,Mn.fontSize),Mn.fontWeight=Gn.fontWeight,Mn.fontStyle=Gn.fontStyle,Mn.opacity=Gn.opacity,Mn.wrapLine=Gn.wrapLine),Bn){case"br":Bn=En.clone(),Bn.lineBreak=!0,xn.push(Bn);break;case"b":Mn.fontWeight=700;break;case"i":Mn.fontStyle="italic";break;case"u":Mn.textDecoration.push("underline");break;case"div":(Bn=mn.getAttribute("time"))&&(Bn=wT(new Yv(Bn)))&&(Mn.startTime=Bn)}}if(H0(mn))for(Un=!0,An=Dn(mn.textContent.split(`
`)),mn=An.next();!mn.done;mn=An.next())mn=mn.value,Un||(Un=En.clone(),Un.lineBreak=!0,xn.push(Un)),0<mn.length&&(Un=Mn.clone(),Un.payload=G$(mn),xn.push(Un)),Un=!1;else for(En=Dn(mn.childNodes),mn=En.next();!mn.done;mn=En.next())sA(mn.value,Mn,xn,An)}function $y(mn,En,xn){var An;(An=/^align:(start|middle|center|end|left|right)$/.exec(En))?(En=An[1],En=="middle"?mn.textAlign=Dp:mn.textAlign=ay[En.toUpperCase()]):(An=/^vertical:(lr|rl)$/.exec(En))?mn.writingMode=An[1]=="lr"?"vertical-lr":"vertical-rl":(An=/^size:([\d.]+)%$/.exec(En))?mn.size=Number(An[1]):(An=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(En))?(mn.position=Number(An[1]),An[2]&&(En=An[2],mn.positionAlign=En=="line-left"||En=="start"?"line-left":En=="line-right"||En=="end"?"line-right":"center")):(An=/^region:(.*)$/.exec(En))?(En=IN(xn,An[1]))&&(mn.region=En):(xn=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(En))?(mn.lineInterpretation=1,mn.line=Number(xn[1]),xn[2]&&(mn.lineAlign=Oy[xn[2].toUpperCase()])):(xn=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(En))&&(mn.lineInterpretation=Um,mn.line=Number(xn[1]),xn[2]&&(mn.lineAlign=Oy[xn[2].toUpperCase()]))}function IN(mn,En){return mn=mn.filter(function(xn){return xn.id==En}),mn.length?mn[0]:null}function wT(mn){if(mn=yv(mn,XO),mn==null)return null;var En=Number(mn[2]),xn=Number(mn[3]);return 59<En||59<xn?null:Number(mn[4])/1e3+xn+60*En+3600*(Number(mn[1])||0)}function G$(mn){var En={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},xn=/&(?:amp|lt|gt|quot|#(0+)?39|nbsp|lrm|rlm);/g,An=RegExp(xn.source);return mn&&An.test(mn)?mn.replace(xn,function(Mn){return En[Mn]||"'"}):mn||""}Ys("shaka.text.VttTextParser",Nm),Nm.prototype.parseMedia=Nm.prototype.parseMedia,Nm.prototype.setSequenceMode=Nm.prototype.setSequenceMode,Nm.prototype.parseInit=Nm.prototype.parseInit;var XO=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;Ll["text/vtt"]=function(){return new Nm},Ll['text/vtt; codecs="vtt"']=function(){return new Nm},Ll['text/vtt; codecs="wvtt"']=function(){return new Nm};function by(){this.g=null}by.prototype.parseInit=function(mn){var En=this,xn=!1;if(new Nl().box("moov",zl).box("trak",zl).box("mdia",zl).T("mdhd",function(An){An=Ox(An.reader,An.version),En.g=An.timescale}).box("minf",zl).box("stbl",zl).T("stsd",G0).box("wvtt",function(){xn=!0}).parse(mn),!this.g)throw new zs(2,2,2008);if(!xn)throw new zs(2,2,2008)},by.prototype.setSequenceMode=function(){},by.prototype.parseMedia=function(mn,En){if(!mn.length)return[];if(!this.g)throw new zs(2,2,2008);var xn=0,An=[],Mn,Un=[],Bn=!1,Gn=!1,Wn=!1,ts=null;if(new Nl().box("moof",zl).box("traf",zl).T("tfdt",function(Ds){Bn=!0,xn=Px(Ds.reader,Ds.version).rf}).T("tfhd",function(Ds){ts=SS(Ds.reader,Ds.flags).Cf}).T("trun",function(Ds){Gn=!0,An=Hm(Ds.reader,Ds.version,Ds.flags).Sf}).box("mdat",Rv(function(Ds){Wn=!0,Mn=Ds})).parse(mn,!1),!Wn&&!Bn&&!Gn)throw new zs(2,2,2008);mn=xn;for(var os=new kl(Mn,0),cs=Dn(An),ls=cs.next();!ls.done;ls=cs.next()){ls=ls.value;var gs=ls.Ge||ts,ws=ls.Ld?xn+ls.Ld:mn;mn=ws+(gs||0);var Ns=0;do{var Os=os.N();Ns+=Os;var Ps=os.N(),Xs=null;Hl(Ps)=="vttc"?8<Os&&(Xs=os.Bb(Os-8)):os.skip(Os-8),gs&&Xs&&(Os=z$(Xs,En.periodStart+ws/this.g,En.periodStart+mn/this.g),Un.push(Os))}while(ls.sampleSize&&Ns<ls.sampleSize)}return Un.filter(Zl)};function z$(mn,En,xn){var An,Mn,Un;return new Nl().box("payl",Rv(function(Bn){An=xl(Bn)})).box("iden",Rv(function(Bn){Mn=xl(Bn)})).box("sttg",Rv(function(Bn){Un=xl(Bn)})).parse(mn),An?PN(An,Mn,Un,En,xn):null}function PN(mn,En,xn,An,Mn){if(An=new tl(An,Mn,""),oA(mn,An,new Map),En&&(An.id=En),xn)for(mn=new Yv(xn),En=T0(mn);En;)$y(An,En,[]),gv(mn),En=T0(mn);return An}Ys("shaka.text.Mp4VttParser",by),by.prototype.parseMedia=by.prototype.parseMedia,by.prototype.setSequenceMode=by.prototype.setSequenceMode,by.prototype.parseInit=by.prototype.parseInit,Ll['application/mp4; codecs="wvtt"']=function(){return new by};function xy(){}xy.prototype.parseInit=function(){},xy.prototype.setSequenceMode=function(){},xy.prototype.parseMedia=function(mn){var En=xl(mn).replace(/\r+/g,"");if(En=En.trim(),mn=[],En=="")return mn;En=Dn(En.split(`

`));for(var xn=En.next();!xn.done;xn=En.next()){xn=xn.value.split(`
`);var An=new Yv(xn[0]),Mn=BE(An),Un=yv(An,/,/g);if(An=BE(An),Mn==null||Un==null||An==null)throw new zs(2,2,2001,"Could not parse cue time range in SubViewer");mn.push(new tl(Mn,An,xn.slice(1).join(`
`).trim()))}return mn};function BE(mn){if(mn=yv(mn,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g),mn==null)return null;var En=Number(mn[2]),xn=Number(mn[3]);return 59<En||59<xn?null:Number(mn[4])/1e3+xn+60*En+3600*(Number(mn[1])||0)}Ys("shaka.text.SbvTextParser",xy),xy.prototype.parseMedia=xy.prototype.parseMedia,xy.prototype.setSequenceMode=xy.prototype.setSequenceMode,xy.prototype.parseInit=xy.prototype.parseInit,Ll["text/x-subviewer"]=function(){return new xy};function _g(){this.g=new Nm}_g.prototype.parseInit=function(){},_g.prototype.setSequenceMode=function(){},_g.prototype.parseMedia=function(mn,En){return mn=xl(mn),mn=QO(mn),mn=Ku(Kp(mn)),this.g.parseMedia(mn,En)};function QO(mn){var En=`WEBVTT

`;if(mn=="")return En;mn=mn.replace(/\r+/g,""),mn=mn.trim(),mn=Dn(mn.split(`

`));for(var xn=mn.next();!xn.done;xn=mn.next())xn=xn.value.split(/\n/),xn[0].match(/\d+/)&&xn.shift(),xn[0]=xn[0].replace(/,/g,"."),En+=xn.join(`
`)+`

`;return En}Ys("shaka.text.SrtTextParser",_g),_g.srt2webvtt=QO,_g.prototype.parseMedia=_g.prototype.parseMedia,_g.prototype.setSequenceMode=_g.prototype.setSequenceMode,_g.prototype.parseInit=_g.prototype.parseInit,Ll["text/srt"]=function(){return new _g};function Cy(){}Cy.prototype.parseInit=function(){},Cy.prototype.setSequenceMode=function(){},Cy.prototype.parseMedia=function(mn){var En="",xn="";mn=xl(mn).split(/\r?\n\s*\r?\n/),mn=Dn(mn);for(var An=mn.next();!An.done;An=mn.next()){var Mn=JO.exec(An.value);Mn&&(An=Mn[1],Mn=Mn[2],An=="V4 Styles"||An=="V4+ Styles"?En=Mn:An=="Events"&&(xn=Mn))}mn=[],An=null,En=Dn(En.split(/\r?\n/));for(var Un=En.next();!Un.done;Un=En.next())if(Mn=Un.value,!/^\s*;/.test(Mn)&&(Un=eM.exec(Mn))){if(Mn=Un[1].trim(),Un=Un[2].trim(),Mn=="Format")An=Un.split(AT);else if(Mn=="Style"){Mn=Un.split(AT),Un={};for(var Bn=0;Bn<An.length&&Bn<Mn.length;Bn++)Un[An[Bn]]=Mn[Bn];mn.push(Un)}}for(An=[],En=null,Mn={},xn=Dn(xn.split(/\r?\n/)),Un=xn.next();!Un.done;Mn={be:Mn.be},Un=xn.next())if(Un=Un.value,!/^\s*;/.test(Un)&&(Bn=eM.exec(Un))){if(Un=Bn[1].trim(),Bn=Bn[2].trim(),Un=="Format")En=Bn.split(AT);else if(Un=="Dialogue"){Bn=Bn.split(AT),Un={};for(var Gn=0;Gn<En.length&&Gn<Bn.length;Gn++)Un[En[Gn]]=Bn[Gn];Gn=VE(Un.Start);var Wn=VE(Un.End);Bn=new tl(Gn,Wn,Bn.slice(En.length-1).join(",").replace(/\\N/g,`
`).replace(/\{[^}]+\}/g,"")),Mn.be=Un.Style,(Un=mn.find(function(ts){return function(os){return os.Name==ts.be}}(Mn)))&&ZO(Bn,Un),An.push(Bn)}}return An};function ZO(mn,En){var xn=En.Fontname;if(xn&&(mn.fontFamily=xn),(xn=En.Fontsize)&&(mn.fontSize=xn+"px"),(xn=En.PrimaryColour)&&(xn=uA(xn))&&(mn.color=xn),(xn=En.BackColour)&&(xn=uA(xn))&&(mn.backgroundColor=xn),En.Bold&&(mn.fontWeight=700),En.Italic&&(mn.fontStyle="italic"),En.Underline&&mn.textDecoration.push("underline"),(xn=En.Spacing)&&(mn.letterSpacing=xn+"px"),xn=En.Alignment)switch(parseInt(xn,10)){case 1:mn.displayAlign=Hu,mn.textAlign="start";break;case 2:mn.displayAlign=Hu,mn.textAlign=Dp;break;case 3:mn.displayAlign=Hu,mn.textAlign="end";break;case 5:mn.displayAlign="before",mn.textAlign="start";break;case 6:mn.displayAlign="before",mn.textAlign=Dp;break;case 7:mn.displayAlign="before",mn.textAlign="end";break;case 9:mn.displayAlign="center",mn.textAlign="start";break;case 10:mn.displayAlign="center",mn.textAlign=Dp;break;case 11:mn.displayAlign="center",mn.textAlign="end"}(En=En.AlphaLevel)&&(mn.opacity=parseFloat(En))}function uA(mn){return mn=parseInt(mn.replace("&H",""),16),0<=mn?"rgba("+(mn&255)+","+(mn>>8&255)+","+(mn>>16&255)+","+(mn>>24&255^255)/255+")":null}function VE(mn){return mn=tM.exec(mn),3600*(mn[1]?parseInt(mn[1].replace(":",""),10):0)+60*parseInt(mn[2],10)+parseFloat(mn[3])}Ys("shaka.text.SsaTextParser",Cy),Cy.prototype.parseMedia=Cy.prototype.parseMedia,Cy.prototype.setSequenceMode=Cy.prototype.setSequenceMode,Cy.prototype.parseInit=Cy.prototype.parseInit;var JO=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,eM=/^\s*([^:]+):\s*(.*)/,AT=/\s*,\s*/,tM=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;Ll["text/x-ssa"]=function(){return new Cy};/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function IT(){}var GE;function lA(){GE?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(GE=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=cA):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function cA(mn,En){var xn=this,An;return hs(function(Mn){return Mn.g==1?(console.assert(xn==navigator,'bad "this" for requestMediaKeySystemAccess'),Qn(Mn,GE.call(xn,mn,En),2)):(An=Mn.h,ns(An)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=GE,Mn.return(An)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=dA,Mn.return(dA.call(xn,mn,En))))})}function dA(mn,En){var xn=this,An,Mn,Un,Bn,Gn,Wn,ts,os,cs,ls;return hs(function(gs){if(gs.g==1){for(console.assert(xn==navigator,'bad "this" for requestMediaKeySystemAccess'),An=Xn(mn),Mn=[],Un=Dn(En),Bn=Un.next();!Bn.done;Bn=Un.next())Gn=Bn.value,Wn=gn(Gn.videoCapabilities,An),ts=gn(Gn.audioCapabilities,An),Gn.videoCapabilities&&Gn.videoCapabilities.length&&!Wn.length||Gn.audioCapabilities&&Gn.audioCapabilities.length&&!ts.length||(os=Object.assign({},Gn),os.videoCapabilities=Wn,os.audioCapabilities=ts,Mn.push(os));if(!Mn.length)throw cs=Error("Unsupported keySystem or supportedConfigurations."),cs.name="NotSupportedError",cs.code=DOMException.NOT_SUPPORTED_ERR,cs;return Qn(gs,GE.call(xn,mn,Mn),2)}return ls=gs.h,gs.return(new Hn(ls,An))})}function gn(mn,En){return mn&&mn.filter(function(xn){return!xn.encryptionScheme||xn.encryptionScheme==En})}Ys("EmeEncryptionSchemePolyfill",IT),IT.install=lA;function bn(){}var Cn;function In(){Cn?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(Cn=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=Rn):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function Rn(mn){var En=this,xn,An,Mn;return hs(function(Un){switch(Un.g){case 1:return console.assert(En==navigator.mediaCapabilities,'bad "this" for decodingInfo'),Qn(Un,Cn.call(En,mn),2);case 2:if(xn=Un.h,!mn.keySystemConfiguration)return Un.return(xn);if((An=xn.keySystemAccess)&&ns(An))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=Cn,Un.return(xn);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=jn,An){Un.D(3);break}return Mn=xn,Qn(Un,Vn(mn),4);case 4:return Mn.keySystemAccess=Un.h,Un.return(xn);case 3:return Un.return(jn.call(En,mn))}})}function jn(mn){var En=this,xn,An,Mn,Un,Bn,Gn,Wn,ts;return hs(function(os){switch(os.g){case 1:return console.assert(En==navigator.mediaCapabilities,'bad "this" for decodingInfo'),xn=null,mn.keySystemConfiguration&&(An=mn.keySystemConfiguration,Mn=An.keySystem,Un=An.audio&&An.audio.encryptionScheme,Bn=An.video&&An.video.encryptionScheme,xn=Xn(Mn),Gn={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:mn},Un&&Un!=xn||Bn&&Bn!=xn)?os.return(Gn):Qn(os,Cn.call(En,mn),2);case 2:if(Wn=os.h,Wn.keySystemAccess){Wn.keySystemAccess=new Hn(Wn.keySystemAccess,xn),os.D(3);break}if(!mn.keySystemConfiguration){os.D(3);break}return ts=Wn,Qn(os,Vn(mn),5);case 5:ts.keySystemAccess=os.h;case 3:return os.return(Wn)}})}function Vn(mn){var En,xn;return hs(function(An){if(An.g==1){var Mn=mn.keySystemConfiguration,Un=[],Bn=[];return Mn.audio&&Un.push({robustness:Mn.audio.robustness||"",contentType:mn.audio.contentType}),Mn.video&&Bn.push({robustness:Mn.video.robustness||"",contentType:mn.video.contentType}),Mn={initDataTypes:Mn.initDataType?[Mn.initDataType]:[],distinctiveIdentifier:Mn.distinctiveIdentifier,persistentState:Mn.persistentState,sessionTypes:Mn.sessionTypes},Un.length&&(Mn.audioCapabilities=Un),Bn.length&&(Mn.videoCapabilities=Bn),En=Mn,Qn(An,navigator.requestMediaKeySystemAccess(mn.keySystemConfiguration.keySystem,[En]),2)}return xn=An.h,An.return(xn)})}Ys("McEncryptionSchemePolyfill",bn),bn.install=In;function Hn(mn,En){this.h=mn,this.g=En,this.keySystem=mn.keySystem}Hn.prototype.getConfiguration=function(){var mn=this.h.getConfiguration();if(mn.videoCapabilities)for(var En=Dn(mn.videoCapabilities),xn=En.next();!xn.done;xn=En.next())xn.value.encryptionScheme=this.g;if(mn.audioCapabilities)for(En=Dn(mn.audioCapabilities),xn=En.next();!xn.done;xn=En.next())xn.value.encryptionScheme=this.g;return mn},Hn.prototype.createMediaKeys=function(){return this.h.createMediaKeys()};function Xn(mn){return mn.startsWith("com.widevine")||mn.startsWith("com.microsoft")||mn.startsWith("com.chromecast")||mn.startsWith("com.adobe")||mn.startsWith("org.w3")?"cenc":mn.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",mn,"Please contribute!"),null)}function ns(mn){mn=mn.getConfiguration();var En=mn.audioCapabilities&&mn.audioCapabilities[0];return!!((mn=mn.videoCapabilities&&mn.videoCapabilities[0]||En)&&mn.encryptionScheme!==void 0)}function us(){}function ps(){lA(),In()}Ys("EncryptionSchemePolyfills",us),us.install=ps,typeof kn<"u"&&kn.exports&&(kn.exports=us);/*
	 @license
	 Copyright 2013 Ali Al Dallal

	 Licensed under the MIT license.

	 Permission is hereby granted, free of charge, to any person obtaining a copy
	 of this software and associated documentation files (the "Software"), to deal
	 in the Software without restriction, including without limitation the rights
	 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
	 copies of the Software, and to permit persons to whom the Software is
	 furnished to do so, subject to the following conditions:

	 The above copyright notice and this permission notice shall be included in
	 all copies or substantial portions of the Software.

	 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
	 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
	 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
	 SOFTWARE.
	*/for(var fs={ach:{u:"Lwo",A:"Acholi"},ady:{u:"Адыгэбзэ",A:"Adyghe"},af:{u:"Afrikaans",A:"Afrikaans"},"af-NA":{u:"Afrikaans (Namibia)",A:"Afrikaans (Namibia)"},"af-ZA":{u:"Afrikaans (South Africa)",A:"Afrikaans (South Africa)"},ak:{u:"Tɕɥi",A:"Akan"},ar:{u:"العربية",A:"Arabic"},"ar-AR":{u:"العربية",A:"Arabic"},"ar-MA":{u:"العربية",A:"Arabic (Morocco)"},"ar-SA":{u:"العربية (السعودية)",A:"Arabic (Saudi Arabia)"},"ay-BO":{u:"Aymar aru",A:"Aymara"},az:{u:"Azərbaycan dili",A:"Azerbaijani"},"az-AZ":{u:"Azərbaycan dili",A:"Azerbaijani"},"be-BY":{u:"Беларуская",A:"Belarusian"},bg:{u:"Български",A:"Bulgarian"},"bg-BG":{u:"Български",A:"Bulgarian"},bn:{u:"বাংলা",A:"Bengali"},"bn-IN":{u:"বাংলা (ভারত)",A:"Bengali (India)"},"bn-BD":{u:"বাংলা(বাংলাদেশ)",A:"Bengali (Bangladesh)"},"bs-BA":{u:"Bosanski",A:"Bosnian"},ca:{u:"Català",A:"Catalan"},"ca-ES":{u:"Català",A:"Catalan"},cak:{u:"Maya Kaqchikel",A:"Kaqchikel"},"ck-US":{u:"ᏣᎳᎩ (tsalagi)",A:"Cherokee"},cs:{u:"Čeština",A:"Czech"},"cs-CZ":{u:"Čeština",A:"Czech"},cy:{u:"Cymraeg",A:"Welsh"},"cy-GB":{u:"Cymraeg",A:"Welsh"},da:{u:"Dansk",A:"Danish"},"da-DK":{u:"Dansk",A:"Danish"},de:{u:"Deutsch",A:"German"},"de-AT":{u:"Deutsch (Österreich)",A:"German (Austria)"},"de-DE":{u:"Deutsch (Deutschland)",A:"German (Germany)"},"de-CH":{u:"Deutsch (Schweiz)",A:"German (Switzerland)"},dsb:{u:"Dolnoserbšćina",A:"Lower Sorbian"},el:{u:"Ελληνικά",A:"Greek"},"el-GR":{u:"Ελληνικά",A:"Greek (Greece)"},en:{u:"English",A:"English"},"en-GB":{u:"English (UK)",A:"English (UK)"},"en-AU":{u:"English (Australia)",A:"English (Australia)"},"en-CA":{u:"English (Canada)",A:"English (Canada)"},"en-IE":{u:"English (Ireland)",A:"English (Ireland)"},"en-IN":{u:"English (India)",A:"English (India)"},"en-PI":{u:"English (Pirate)",A:"English (Pirate)"},"en-UD":{u:"English (Upside Down)",A:"English (Upside Down)"},"en-US":{u:"English (US)",A:"English (US)"},"en-ZA":{u:"English (South Africa)",A:"English (South Africa)"},"en@pirate":{u:"English (Pirate)",A:"English (Pirate)"},eo:{u:"Esperanto",A:"Esperanto"},"eo-EO":{u:"Esperanto",A:"Esperanto"},es:{u:"Español",A:"Spanish"},"es-AR":{u:"Español (Argentine)",A:"Spanish (Argentina)"},"es-419":{u:"Español (Latinoamérica)",A:"Spanish (Latin America)"},"es-CL":{u:"Español (Chile)",A:"Spanish (Chile)"},"es-CO":{u:"Español (Colombia)",A:"Spanish (Colombia)"},"es-EC":{u:"Español (Ecuador)",A:"Spanish (Ecuador)"},"es-ES":{u:"Español (España)",A:"Spanish (Spain)"},"es-LA":{u:"Español (Latinoamérica)",A:"Spanish (Latin America)"},"es-NI":{u:"Español (Nicaragua)",A:"Spanish (Nicaragua)"},"es-MX":{u:"Español (México)",A:"Spanish (Mexico)"},"es-US":{u:"Español (Estados Unidos)",A:"Spanish (United States)"},"es-VE":{u:"Español (Venezuela)",A:"Spanish (Venezuela)"},et:{u:"eesti keel",A:"Estonian"},"et-EE":{u:"Eesti (Estonia)",A:"Estonian (Estonia)"},eu:{u:"Euskara",A:"Basque"},"eu-ES":{u:"Euskara",A:"Basque"},fa:{u:"فارسی",A:"Persian"},"fa-IR":{u:"فارسی",A:"Persian"},"fb-LT":{u:"Leet Speak",A:"Leet"},ff:{u:"Fulah",A:"Fulah"},fi:{u:"Suomi",A:"Finnish"},"fi-FI":{u:"Suomi",A:"Finnish"},"fo-FO":{u:"Føroyskt",A:"Faroese"},fr:{u:"Français",A:"French"},"fr-CA":{u:"Français (Canada)",A:"French (Canada)"},"fr-FR":{u:"Français (France)",A:"French (France)"},"fr-BE":{u:"Français (Belgique)",A:"French (Belgium)"},"fr-CH":{u:"Français (Suisse)",A:"French (Switzerland)"},"fy-NL":{u:"Frysk",A:"Frisian (West)"},ga:{u:"Gaeilge",A:"Irish"},"ga-IE":{u:"Gaeilge (Gaelic)",A:"Irish (Gaelic)"},gl:{u:"Galego",A:"Galician"},"gl-ES":{u:"Galego",A:"Galician"},"gn-PY":{u:"Avañe'ẽ",A:"Guarani"},"gu-IN":{u:"ગુજરાતી",A:"Gujarati"},"gx-GR":{u:"Ἑλληνική ἀρχαία",A:"Classical Greek"},he:{u:"עברית‏",A:"Hebrew"},"he-IL":{u:"עברית‏",A:"Hebrew"},hi:{u:"हिन्दी",A:"Hindi"},"hi-IN":{u:"हिन्दी",A:"Hindi"},hr:{u:"Hrvatski",A:"Croatian"},"hr-HR":{u:"Hrvatski",A:"Croatian"},hsb:{u:"Hornjoserbšćina",A:"Upper Sorbian"},ht:{u:"Kreyòl",A:"Haitian Creole"},hu:{u:"Magyar",A:"Hungarian"},"hu-HU":{u:"Magyar",A:"Hungarian"},"hy-AM":{u:"Հայերեն",A:"Armenian"},id:{u:"Bahasa Indonesia",A:"Indonesian"},"id-ID":{u:"Bahasa Indonesia",A:"Indonesian"},is:{u:"Íslenska",A:"Icelandic"},"is-IS":{u:"Íslenska (Iceland)",A:"Icelandic (Iceland)"},it:{u:"Italiano",A:"Italian"},"it-IT":{u:"Italiano",A:"Italian"},ja:{u:"日本語",A:"Japanese"},"ja-JP":{u:"日本語",A:"Japanese"},"jv-ID":{u:"Basa Jawa",A:"Javanese"},"ka-GE":{u:"ქართული",A:"Georgian"},"kk-KZ":{u:"Қазақша",A:"Kazakh"},km:{u:"ភាសាខ្មែរ",A:"Khmer"},"km-KH":{u:"ភាសាខ្មែរ",A:"Khmer"},kab:{u:"Taqbaylit",A:"Kabyle"},kn:{u:"ಕನ್ನಡ",A:"Kannada"},"kn-IN":{u:"ಕನ್ನಡ (India)",A:"Kannada (India)"},ko:{u:"한국어",A:"Korean"},"ko-KR":{u:"한국어 (韩国)",A:"Korean (Korea)"},ku:{u:"Kurdî",A:"Kurdish"},"ku-TR":{u:"Kurdî",A:"Kurdish"},la:{u:"Latin",A:"Latin"},"la-VA":{u:"Latin",A:"Latin"},lb:{u:"Lëtzebuergesch",A:"Luxembourgish"},"li-NL":{u:"Lèmbörgs",A:"Limburgish"},lt:{u:"Lietuvių",A:"Lithuanian"},"lt-LT":{u:"Lietuvių",A:"Lithuanian"},lv:{u:"Latviešu",A:"Latvian"},"lv-LV":{u:"Latviešu",A:"Latvian"},mai:{u:"मैथिली, মৈথিলী",A:"Maithili"},"mg-MG":{u:"Malagasy",A:"Malagasy"},mk:{u:"Македонски",A:"Macedonian"},"mk-MK":{u:"Македонски (Македонски)",A:"Macedonian (Macedonian)"},ml:{u:"മലയാളം",A:"Malayalam"},"ml-IN":{u:"മലയാളം",A:"Malayalam"},"mn-MN":{u:"Монгол",A:"Mongolian"},mr:{u:"मराठी",A:"Marathi"},"mr-IN":{u:"मराठी",A:"Marathi"},ms:{u:"Bahasa Melayu",A:"Malay"},"ms-MY":{u:"Bahasa Melayu",A:"Malay"},mt:{u:"Malti",A:"Maltese"},"mt-MT":{u:"Malti",A:"Maltese"},my:{u:"ဗမာစကာ",A:"Burmese"},nb:{u:"Norsk (bokmål)",A:"Norwegian (bokmal)"},"nb-NO":{u:"Norsk (bokmål)",A:"Norwegian (bokmal)"},ne:{u:"नेपाली",A:"Nepali"},"ne-NP":{u:"नेपाली",A:"Nepali"},nl:{u:"Nederlands",A:"Dutch"},"nl-BE":{u:"Nederlands (België)",A:"Dutch (Belgium)"},"nl-NL":{u:"Nederlands (Nederland)",A:"Dutch (Netherlands)"},"nn-NO":{u:"Norsk (nynorsk)",A:"Norwegian (nynorsk)"},no:{u:"Norsk",A:"Norwegian"},oc:{u:"Occitan",A:"Occitan"},"or-IN":{u:"ଓଡ଼ିଆ",A:"Oriya"},pa:{u:"ਪੰਜਾਬੀ",A:"Punjabi"},"pa-IN":{u:"ਪੰਜਾਬੀ (ਭਾਰਤ ਨੂੰ)",A:"Punjabi (India)"},pl:{u:"Polski",A:"Polish"},"pl-PL":{u:"Polski",A:"Polish"},"ps-AF":{u:"پښتو",A:"Pashto"},pt:{u:"Português",A:"Portuguese"},"pt-BR":{u:"Português (Brasil)",A:"Portuguese (Brazil)"},"pt-PT":{u:"Português (Portugal)",A:"Portuguese (Portugal)"},"qu-PE":{u:"Qhichwa",A:"Quechua"},"rm-CH":{u:"Rumantsch",A:"Romansh"},ro:{u:"Română",A:"Romanian"},"ro-RO":{u:"Română",A:"Romanian"},ru:{u:"Русский",A:"Russian"},"ru-RU":{u:"Русский",A:"Russian"},"sa-IN":{u:"संस्कृतम्",A:"Sanskrit"},"se-NO":{u:"Davvisámegiella",A:"Northern Sámi"},"si-LK":{u:"පළාත",A:"Sinhala (Sri Lanka)"},sk:{u:"Slovenčina",A:"Slovak"},"sk-SK":{u:"Slovenčina (Slovakia)",A:"Slovak (Slovakia)"},sl:{u:"Slovenščina",A:"Slovenian"},"sl-SI":{u:"Slovenščina",A:"Slovenian"},"so-SO":{u:"Soomaaliga",A:"Somali"},sq:{u:"Shqip",A:"Albanian"},"sq-AL":{u:"Shqip",A:"Albanian"},sr:{u:"Српски",A:"Serbian"},"sr-RS":{u:"Српски (Serbia)",A:"Serbian (Serbia)"},su:{u:"Basa Sunda",A:"Sundanese"},sv:{u:"Svenska",A:"Swedish"},"sv-SE":{u:"Svenska",A:"Swedish"},sw:{u:"Kiswahili",A:"Swahili"},"sw-KE":{u:"Kiswahili",A:"Swahili (Kenya)"},ta:{u:"தமிழ்",A:"Tamil"},"ta-IN":{u:"தமிழ்",A:"Tamil"},te:{u:"తెలుగు",A:"Telugu"},"te-IN":{u:"తెలుగు",A:"Telugu"},tg:{u:"забо́ни тоҷикӣ́",A:"Tajik"},"tg-TJ":{u:"тоҷикӣ",A:"Tajik"},th:{u:"ภาษาไทย",A:"Thai"},"th-TH":{u:"ภาษาไทย (ประเทศไทย)",A:"Thai (Thailand)"},tl:{u:"Filipino",A:"Filipino"},"tl-PH":{u:"Filipino",A:"Filipino"},tlh:{u:"tlhIngan-Hol",A:"Klingon"},tr:{u:"Türkçe",A:"Turkish"},"tr-TR":{u:"Türkçe",A:"Turkish"},"tt-RU":{u:"татарча",A:"Tatar"},uk:{u:"Українська",A:"Ukrainian"},"uk-UA":{u:"Українська",A:"Ukrainian"},ur:{u:"اردو",A:"Urdu"},"ur-PK":{u:"اردو",A:"Urdu"},uz:{u:"O'zbek",A:"Uzbek"},"uz-UZ":{u:"O'zbek",A:"Uzbek"},vi:{u:"Tiếng Việt",A:"Vietnamese"},"vi-VN":{u:"Tiếng Việt",A:"Vietnamese"},"xh-ZA":{u:"isiXhosa",A:"Xhosa"},yi:{u:"ייִדיש",A:"Yiddish"},"yi-DE":{u:"ייִדיש (German)",A:"Yiddish (German)"},zh:{u:"中文",A:"Chinese"},"zh-HANS":{u:"中文简体",A:"Chinese Simplified"},"zh-HANT":{u:"中文繁體",A:"Chinese Traditional"},"zh-CN":{u:"中文（中国）",A:"Chinese Simplified (China)"},"zh-HK":{u:"中文（香港）",A:"Chinese Traditional (Hong Kong)"},"zh-SG":{u:"中文（新加坡）",A:"Chinese Simplified (Singapore)"},"zh-TW":{u:"中文（台灣）",A:"Chinese Traditional (Taiwan)"},"zu-ZA":{u:"isiZulu",A:"Zulu"}},vs=Dn(Object.keys(fs)),Is=vs.next();!Is.done;Is=vs.next()){var Ls=Is.value;fs[Ls.toLowerCase()]=fs[Ls]}function Cs(mn,En){var xn=this;this.parent=mn,this.controls=En,this.eventManager=new xu,this.localization=this.controls.ua,this.player=this.controls.cc(),this.video=this.controls.zb(),this.adManager=this.player.sd(),this.ad=En.getAd(),this.eventManager.o(this.adManager,"ad-started",function(An){xn.ad=An.ad}),this.eventManager.o(this.adManager,"ad-stopped",function(){xn.ad=null})}Cs.prototype.release=function(){this.eventManager.release(),this.ad=this.adManager=this.video=this.player=this.localization=this.eventManager=this.controls=this.parent=null},Ys("shaka.ui.Element",Cs),Cs.prototype.release=Cs.prototype.release;function Ms(mn){return Zs(mn,"shaka-back-to-overflow-button")}function Zs(mn,En){return mn=mn.getElementsByClassName(En),mn.length?mn[0]:null}function Fs(mn){mn&&(mn=Zs(mn,"shaka-chosen-item"))&&mn.parentElement.focus()}function Ws(){var mn=Au("i");return mn.classList.add("material-icons-round"),mn.classList.add("shaka-chosen-item"),mn.textContent="done",mn.ariaHidden="true",mn}function Gs(mn,En){mn&&(En?mn.classList.remove("shaka-hidden"):mn.classList.add("shaka-hidden"))}function eu(mn,En){var xn=Math.floor(mn/3600),An=Math.floor(mn/60%60);return mn=Math.floor(mn%60),10>mn&&(mn="0"+mn),mn=An+":"+mn,En&&(10>An&&(mn="0"+mn),mn=xn+":"+mn),mn}function au(mn,En){Cs.call(this,mn,En);var xn=this;this.i=Au("div"),this.i.classList.add("shaka-ad-counter"),this.parent.appendChild(this.i),this.h=Au("span"),this.h.classList.add("shaka-ad-counter-span"),this.i.appendChild(this.h),this.g=new ku(function(){var An=Math.round(xn.ad.getRemainingTime()),Mn=xn.ad.getDuration();An!=-1&&Mn!=-1&&(0<An?(An=eu(Mn-An,!1)+" / "+eu(Mn,!1),1<xn.ad.getSequenceLength()?xn.h.textContent=An:(Mn=xn.localization.resolve("AD_TIME"),xn.h.textContent=Mn.replace("[AD_TIME]",An))):(xn.g.stop(),xn.h.textContent=""))}),this.eventManager.o(this.localization,"locale-updated",function(){}),this.eventManager.o(this.localization,"locale-changed",function(){}),this.eventManager.o(this.adManager,"ad-started",function(){xn.g.Aa(),xn.g.ha(.5)}),this.eventManager.o(this.adManager,"ad-stopped",function(){xn.g.stop(),xn.h.textContent=""}),this.ad&&(this.g.Aa(),this.g.ha(.5))}as(au,Cs),au.prototype.release=function(){this.g.stop(),this.g=null,Cs.prototype.release.call(this)},Ys("shaka.ui.AdCounter",au);function du(mn,En){Cs.call(this,mn,En);var xn=this;this.g=Au("div"),this.g.classList.add("shaka-ad-position"),Gs(this.g,!1),this.parent.appendChild(this.g),this.h=Au("span"),this.h.classList.add("shaka-ad-position-span"),this.g.appendChild(this.h),this.eventManager.o(this.localization,"locale-updated",function(){xn.ad&&pu(xn)}),this.eventManager.o(this.localization,"locale-changed",function(){xn.ad&&pu(xn)}),this.eventManager.o(this.adManager,"ad-started",function(){pu(xn)}),this.eventManager.o(this.adManager,"ad-stopped",function(){xn.h.textContent="",Gs(xn.g,!1)}),this.ad&&pu(this)}as(du,Cs);function pu(mn){var En=mn.ad.getSequenceLength();if(1<En){var xn=mn.ad.getPositionInSequence();mn.h.textContent=mn.localization.resolve("AD_PROGRESS").replace("[AD_ON]",String(xn)).replace("[NUM_ADS]",String(En)),Gs(mn.g,!0)}}Ys("shaka.ui.AdPosition",du);function bu(mn,En){Cs.call(this,mn,En);var xn=this;this.button=kp(),this.parent.appendChild(this.button),this.eventManager.o(this.localization,"locale-updated",function(){xn.g()}),this.eventManager.o(this.localization,"locale-changed",function(){xn.g()}),this.eventManager.o(this.video,"play",function(){xn.g(),xn.h()}),this.eventManager.o(this.video,"pause",function(){xn.g(),xn.h()}),this.eventManager.o(this.video,"seeking",function(){xn.g(),xn.h()}),this.eventManager.o(this.adManager,"ad-paused",function(){xn.g(),xn.h()}),this.eventManager.o(this.adManager,"ad-resumed",function(){xn.g(),xn.h()}),this.eventManager.o(this.adManager,"ad-started",function(){xn.g(),xn.h()}),this.eventManager.o(this.button,"click",function(){xn.ad&&xn.ad.isLinear()?T2(xn.controls):S2(xn.controls)}),this.ad&&(this.g(),this.h())}as(bu,Cs),bu.prototype.isPaused=function(){if(this.ad&&this.ad.isLinear())var mn=this.ad.isPaused();else mn=this.controls,mn=mn.s.paused&&!mn.X;return mn},bu.prototype.g=function(){},bu.prototype.h=function(){},Ys("shaka.ui.PlayButton",bu);function Uu(mn,En){bu.call(this,mn,En),this.button.classList.add("shaka-play-button"),this.button.classList.add("shaka-no-propagation"),this.h(),this.g()}as(Uu,bu),Uu.prototype.h=function(){this.isPaused()?this.button.setAttribute("icon","play"):this.button.setAttribute("icon","pause")},Uu.prototype.g=function(){var mn=this.isPaused()?"PLAY":"PAUSE";this.button.ariaLabel=this.localization.resolve(mn)},Ys("shaka.ui.BigPlayButton",Uu);function Bu(mn,En){Cs.call(this,mn,En);var xn=this;this.j=this.controls.i,this.h=this.controls.g,this.i=[],this.g=Au("div"),this.g.classList.add("shaka-no-propagation"),this.g.classList.add("shaka-context-menu"),this.g.classList.add("shaka-hidden"),this.h.appendChild(this.g),this.eventManager.o(this.h,"contextmenu",function(An){if(xn.g.classList.contains("shaka-hidden")){An.preventDefault();var Mn=xn.h.getBoundingClientRect();xn.g.style.left=An.clientX-Mn.left+"px",xn.g.style.top=An.clientY-Mn.top+"px",Gs(xn.g,!0)}else Gs(xn.g,!1)}),this.eventManager.o(pn,"click",function(){Gs(xn.g,!1)}),Mu(this)}as(Bu,Cs),Bu.prototype.release=function(){this.h=null;for(var mn=Dn(this.i),En=mn.next();!En.done;En=mn.next())En.value.release();this.i=[],Cs.prototype.release.call(this)};function al(mn,En){Ql.set(mn,En)}function Mu(mn){for(var En=Dn(mn.j.contextMenuElements),xn=En.next();!xn.done;xn=En.next()){xn=xn.value;var An=Ql.get(xn);An?mn.i.push(An.create(mn.g,mn.controls)):Tu("Unrecognized context menu element:",xn)}}Ys("shaka.ui.ContextMenu",Bu),Bu.registerElement=al;var Ql=new Map;function ul(mn,En,xn,An){Cs.call(this,mn,En);var Mn=this;this.container=Au("div"),this.container.classList.add("shaka-range-container"),this.container.classList.add.apply(this.container.classList,Kn(xn)),this.g=!1,this.bar=document.createElement("input"),this.l=new ku(function(){Mn.onChangeEnd(),Mn.g=!1}),this.bar.classList.add("shaka-range-element"),this.bar.classList.add.apply(this.bar.classList,Kn(An)),this.bar.type="range",this.bar.step="any",this.bar.min="0",this.bar.max="1",this.bar.value="0",this.container.appendChild(this.bar),this.parent.appendChild(this.container),this.eventManager.o(this.bar,"mousedown",function(){Mn.controls.Mb()&&(Mn.g=!0,Mn.onChangeStart())}),this.eventManager.o(this.bar,"touchstart",function(Un){Mn.controls.Mb()&&(Mn.g=!0,$l(Mn,Un),Mn.onChangeStart())}),this.eventManager.o(this.bar,"input",function(){Mn.onChange()}),this.eventManager.o(this.bar,"touchmove",function(Un){Mn.g&&($l(Mn,Un),Mn.onChange())}),this.eventManager.o(this.bar,"touchend",function(Un){Mn.g&&(Mn.g=!1,$l(Mn,Un),Mn.onChangeEnd())}),this.eventManager.o(this.bar,"mouseup",function(){Mn.g&&(Mn.g=!1,Mn.onChangeEnd())})}as(ul,Cs),Sn=ul.prototype,Sn.release=function(){this.l&&(this.l.stop(),this.l=null),Cs.prototype.release.call(this)},Sn.setRange=function(mn,En){this.bar.min=mn,this.bar.max=En},Sn.onChangeStart=function(){},Sn.onChange=function(){},Sn.onChangeEnd=function(){},Sn.changeTo=function(mn){this.g||(this.g=!0,this.onChangeStart());var En=parseFloat(this.bar.min),xn=parseFloat(this.bar.max);this.bar.value=mn>xn?xn:mn<En?En:mn,this.onChange(),this.l.R(.5)},Sn.getValue=function(){return parseFloat(this.bar.value)},Sn.setValue=function(mn){this.g||(this.bar.value=mn)};function $l(mn,En){En.preventDefault();var xn=En.changedTouches[0],An=mn.bar.getBoundingClientRect();En=parseFloat(mn.bar.min);var Mn=parseFloat(mn.bar.max);xn=En+(Mn-En)/An.width*(xn.clientX-An.left),xn<En?xn=En:xn>Mn&&(xn=Mn),mn.bar.value=xn}Ys("shaka.ui.RangeElement",ul),ul.prototype.setValue=ul.prototype.setValue,ul.prototype.getValue=ul.prototype.getValue,ul.prototype.changeTo=ul.prototype.changeTo,ul.prototype.onChangeEnd=ul.prototype.onChangeEnd,ul.prototype.onChange=ul.prototype.onChange,ul.prototype.onChangeStart=ul.prototype.onChangeStart,ul.prototype.setRange=ul.prototype.setRange;function Bp(mn,En){ul.call(this,mn,En,["shaka-seek-bar-container"],["shaka-seek-bar","shaka-no-propagation","shaka-show-controls-on-mouse-over"]);var xn=this;this.j=Au("div"),this.j.classList.add("shaka-ad-markers"),this.container.insertBefore(this.j,this.container.childNodes[0]),this.m=this.controls.i,this.h=new ku(function(){xn.video.currentTime=xn.getValue()}),this.s=new ku(function(){ey(xn)}),this.B=!1,this.i=[],this.eventManager.o(this.localization,"locale-updated",function(){return qp(xn)}),this.eventManager.o(this.localization,"locale-changed",function(){return qp(xn)}),this.eventManager.o(this.adManager,"ad-started",function(){yp(xn)||Gs(xn.container,!1)}),this.eventManager.o(this.adManager,"ad-stopped",function(){yp(xn)&&Gs(xn.container,!0)}),this.eventManager.o(this.adManager,"ad-cue-points-changed",function(An){xn.i=An.cuepoints,Qy(xn)}),this.eventManager.o(this.player,"unloading",function(){xn.i=[],Qy(xn)}),this.setValue(this.video.currentTime),this.update(),qp(this),this.ad&&Gs(this.container,!1)}as(Bp,ul),Sn=Bp.prototype,Sn.release=function(){this.h&&(this.h.stop(),this.h=null,this.s.stop(),this.s=null),ul.prototype.release.call(this)},Sn.onChangeStart=function(){this.B=!this.video.paused,this.controls.Qe(!0),this.video.pause()},Sn.onChange=function(){this.video.duration&&(this.update(),this.h.R(.125))},Sn.onChangeEnd=function(){this.h.Aa(),this.controls.Qe(!1),this.B&&this.video.play()},Sn.isShowing=function(){return!this.container.classList.contains("shaka-hidden")},Sn.update=function(){var mn=this.m.seekBarColors,En=this.getValue(),xn=this.video.buffered.length,An=xn?this.video.buffered.start(0):0,Mn=xn?this.video.buffered.end(xn-1):0,Un=this.player.Ja(),Bn=Un.end-Un.start;this.setRange(Un.start,Un.end),yp(this)?(Gs(this.container,!0),xn==0?this.container.style.background=mn.base:(xn=(Math.max(An,Un.start)-Un.start)/Bn||0,Mn=(Math.min(Mn,Un.end)-Un.start)/Bn||0,En=(Math.min(Math.max(En,Un.start),Un.end)-Un.start)/Bn||0,this.container.style.background="linear-gradient("+["to right",(this.m.showUnbufferedStart?mn.base:mn.played)+" "+100*xn+"%",mn.played+" "+100*xn+"%",mn.played+" "+100*En+"%",mn.buffered+" "+100*En+"%",mn.buffered+" "+100*Mn+"%",mn.base+" "+100*Mn+"%"].join()+")")):Gs(this.container,!1)};function ey(mn){if(mn.i.length){for(var En=mn.player.Ja(),xn=En.end-En.start,An=["to right"],Mn=[],Un=mn.m.seekBarColors.adBreaks,Bn=!1,Gn=Dn(mn.i),Wn=Gn.next();!Wn.done;Wn=Gn.next())if(Wn=Wn.value,Wn.start!=-1||Wn.end||(Bn=!0),Wn.start>=En.start&&Wn.start<En.end&&!(Wn.end&&Wn.end>En.end)){var ts=(Wn.start-En.start)/xn||0,os=ts+.01;Wn.end&&(os=(Wn.end-En.start)/xn||0),Mn.push({start:ts,end:os})}for(En=Dn(Mn),Wn=En.next();!Wn.done;Wn=En.next())xn=Wn.value,An.push("transparent "+100*xn.start+"%"),An.push(Un+" "+100*xn.start+"%"),An.push(Un+" "+100*xn.end+"%"),An.push("transparent "+100*xn.end+"%");Bn&&(An.push("transparent 99%"),An.push(Un+" 99%")),mn.j.style.background="linear-gradient("+An.join(",")+")"}else mn.j.style.background="transparent"}function Qy(mn){ey(mn);var En=mn.player.Ja();En=En.end-En.start,mn.player.U()&&5<En&&mn.s.ha(1)}function yp(mn){var En=mn.player.Ja();return En=En.end-En.start,mn.player.U()&&5>En?!1:mn.ad==null||!mn.ad.isLinear()}function qp(mn){mn.bar.ariaLabel=mn.localization.resolve("SEEK")}Ys("shaka.ui.SeekBar",Bp);function Zy(){}Zy.prototype.create=function(mn,En){return new Bp(mn,En)},Bp.Factory=Zy;function Su(mn,En,xn,An){Eu.call(this);var Mn=this;this.P=!0,this.i=An,this.C=new sl(xn,mn,this.i.castReceiverAppId,this.i.castAndroidReceiverCompatible),this.Za=!0,this.s=this.C.zb(),this.B=xn,this.F=this.C.cc(),this.sa=mn,this.j=En,this.Xa=this.F.sd(),this.l=this.m=null,this.X=!1,this.G=[],this.ub=[],this.gb=!1,this.Z=new ku(function(){Mn.j.style.cursor="none",Mn.gb=!1,Xv(Mn)}),this.aa=new ku(function(){Mn.g.removeAttribute("shown"),Mn.I.R(2)}),this.I=new ku(function(){for(var Un=Dn(Mn.G),Bn=Un.next();!Bn.done;Bn=Un.next())Gs(Bn.value,!1)}),this.La=new ku(function(){Mn.Mb()&&nM(Mn)}),this.J=null,this.H=[],this.ua=lD(),this.h=new xu,this.configure(this.i),iD(this),this.ka=new Set,ON(this),this.La.ha(.125),this.h.o(this.ua,"locale-changed",function(Un){Mn.Xa.setLocale(Un.locales[0])})}as(Su,Eu),Sn=Su.prototype,Sn.destroy=function(){var mn=this;return hs(function(En){switch(En.g){case 1:if(document.pictureInPictureElement!=mn.B){En.D(2);break}return Qn(En,document.exitPictureInPicture(),2);case 2:if(mn.h&&(mn.h.release(),mn.h=null),mn.Z&&(mn.Z.stop(),mn.Z=null),mn.aa&&(mn.aa.stop(),mn.aa=null),mn.I&&(mn.I.stop(),mn.I=null),mn.La&&(mn.La.stop(),mn.La=null),fA(mn),mn.g&&(mn.j.removeChild(mn.g),mn.g=null),!mn.C){En.D(4);break}return Qn(En,mn.C.destroy(),5);case 5:mn.C=null;case 4:if(!mn.sa){En.D(6);break}return Qn(En,mn.sa.destroy(),7);case 7:mn.sa=null;case 6:mn.F=null,mn.B=null,mn.s=null,mn.ua=null,mn.ka.clear(),Eu.prototype.release.call(mn),ms(En)}})};function fA(mn){for(var En=Dn(mn.H),xn=En.next();!xn.done;xn=En.next())xn.value.release();mn.H=[]}function fm(mn,En){MN.set(mn,En)}Sn.ng=function(mn){this.Za=mn,ON(this)},Sn.hh=function(){Xv(this)},Sn.configure=function(mn){this.i=mn,this.C.yf(mn.castReceiverAppId,mn.castAndroidReceiverCompatible),this.l&&(this.l=null),this.fb&&(this.fb=null),this.Ya&&(this.Ya=null),this.g?(i0(this.g),fA(this)):(X2(this),nD(this)),this.j.classList.add("shaka-video-container"),this.B.classList.add("shaka-video"),Z2(this),this.i.addBigPlayButton&&Q2(this),this.i.customContextMenu&&(this.Ya=new Bu(this.V,this),this.H.push(this.Ya)),this.$||eD(this),this.$a=Au("div"),this.$a.classList.add("shaka-server-side-ad-container"),this.g.appendChild(this.$a),tD(this),this.G=Array.from(this.j.getElementsByClassName("shaka-settings-menu")),this.G.push.apply(this.G,Kn(Array.from(this.j.getElementsByClassName("shaka-overflow-menu")))),rD(this),this.ub=Array.from(this.j.getElementsByClassName("shaka-show-controls-on-mouse-over")),Xv(this),mn=Dn(this.j.getElementsByClassName("shaka-no-propagation"));for(var En=mn.next();!En.done;En=mn.next()){En=En.value;var xn=function(An){return An.stopPropagation()};this.h.o(En,"click",xn),this.h.o(En,"dblclick",xn)}},Sn.Me=function(mn){(this.P=mn)?(this.j.setAttribute("shaka-controls","true"),this.B.tabIndex=-1,this.B.controls=!1):this.j.removeAttribute("shaka-controls"),Xv(this)},Sn.Wf=function(mn){this.B.controls=mn,this.B.tabIndex=mn?0:-1,mn&&this.Me(!1)},Sn.getAd=function(){return this.m},Sn.Ag=function(){return this.C},Sn.Mg=function(){return this.ua},Sn.ah=function(){return this.j},Sn.zb=function(){return this.s},Sn.Lg=function(){return this.B},Sn.cc=function(){return this.F},Sn.Kg=function(){return this.sa},Sn.Fg=function(){return this.g},Sn.Ug=function(){return this.$a},Sn.Cg=function(){return this.O},Sn.Dg=function(){return this.i},Sn.gh=function(){return this.X},Sn.Qe=function(mn){this.X=mn},Sn.eh=function(){return this.Za},Sn.Hf=function(){return this.l?this.l.getValue():this.s.currentTime},Sn.Xf=function(mn){this.J=mn},Sn.md=function(){return this.G.some(function(mn){return!mn.classList.contains("shaka-hidden")})},Sn.fc=function(){this.I.Aa()},Sn.xd=function(){return!!(document.fullscreenEnabled||this.B.webkitSupportsFullscreen)},Sn.ic=function(){if(document.fullscreenEnabled)return!!document.fullscreenElement;var mn=this.B;return mn.webkitSupportsFullscreen?mn.webkitDisplayingFullscreen:!1};function _2(mn){var En,xn;return hs(function(An){switch(An.g){case 1:if(Ts(An,2),!document.fullscreenEnabled){En=mn.B,En.webkitSupportsFullscreen&&En.webkitEnterFullscreen(),An.D(4);break}if(!document.pictureInPictureElement){An.D(5);break}return Qn(An,document.exitPictureInPicture(),5);case 5:return Qn(An,mn.j.requestFullscreen({navigationUI:"hide"}),7);case 7:if(!mn.i.forceLandscapeOnFullscreen||!screen.orientation){An.D(4);break}return Ts(An,9),Qn(An,screen.orientation.lock("landscape"),11);case 11:ys(An,4,2);break;case 9:_s(An,2);case 4:ys(An,0);break;case 2:xn=_s(An),mn.dispatchEvent(new vu("error",new Map().set("detail",xn))),ms(An)}})}function E2(mn){var En;return hs(function(xn){return document.fullscreenEnabled?(screen.orientation&&screen.orientation.unlock(),Qn(xn,document.exitFullscreen(),0)):(En=mn.B,En.webkitSupportsFullscreen&&En.webkitExitFullscreen(),xn.D(0))})}Sn.Xe=function(){var mn=this;return hs(function(En){return mn.ic()?Qn(En,E2(mn),0):Qn(En,_2(mn),0)})},Sn.ag=function(){Gs(this.K,!0),Gs(this.O,!0),this.g.setAttribute("ad-active","true")},Sn.Kf=function(){Gs(this.K,!1),Gs(this.O,!1),this.g.removeAttribute("ad-active")};function S2(mn){mn.P&&mn.s.duration&&(mn.F.vf(),mn.s.paused&&!mn.X?mn.s.play():mn.s.pause())}function T2(mn){mn.m&&mn.m.isPaused()?mn.m.play():mn.m&&mn.m.pause()}function X2(mn){mn.g=Au("div"),mn.g.classList.add("shaka-controls-container"),mn.j.appendChild(mn.g),mn.j.setAttribute("shaka-controls","true"),mn.h.o(mn.g,"touchstart",function(En){mn.s.duration&&(mn.Mb()?mn.J=Date.now():(pA(mn,En),En.cancelable&&En.preventDefault()))},{passive:!1}),mn.h.o(mn.g,"click",function(){k2(mn)}),mn.h.o(mn.g,"dblclick",function(){mn.i.doubleClickForFullscreen&&mn.xd()&&mn.Xe()})}function Q2(mn){var En=Au("div");En.classList.add("shaka-play-button-container"),mn.g.appendChild(En),mn.fb=new Uu(En,mn),mn.H.push(mn.fb)}function Z2(mn){var En=Au("div");En.classList.add("shaka-scrim-container"),mn.g.appendChild(En)}function J2(mn){mn.K=Au("div"),mn.K.classList.add("shaka-ad-controls");var En=mn.m!=null&&mn.m.isLinear();Gs(mn.K,En),mn.M.appendChild(mn.K),En=new du(mn.K,mn),mn.H.push(En),En=new au(mn.K,mn),mn.H.push(En)}function eD(mn){mn.$=Au("div"),mn.$.classList.add("shaka-spinner-container"),mn.j.appendChild(mn.$);var En=Au("div");En.classList.add("shaka-spinner"),mn.$.appendChild(En),mn=document.createElementNS("http://www.w3.org/2000/svg","svg"),mn.classList.add("shaka-spinner-svg"),mn.setAttribute("viewBox","0 0 30 30"),En.appendChild(mn),En=document.createElementNS("http://www.w3.org/2000/svg","circle"),En.classList.add("shaka-spinner-path"),En.setAttribute("cx","15"),En.setAttribute("cy","15"),En.setAttribute("r","14.5"),En.setAttribute("fill","none"),En.setAttribute("stroke-width","1"),En.setAttribute("stroke-miterlimit","10"),mn.appendChild(En)}function tD(mn){mn.M=Au("div"),mn.M.classList.add("shaka-bottom-controls"),mn.M.classList.add("shaka-no-propagation"),mn.g.appendChild(mn.M),mn.h.o(mn.M,"click",function(An){An.target.closest(".shaka-overflow-button")||mn.fc()}),J2(mn),mn.V=Au("div"),mn.V.classList.add("shaka-controls-button-panel"),mn.V.classList.add("shaka-show-controls-on-mouse-over"),mn.i.enableTooltips&&mn.V.classList.add("shaka-tooltips-on"),mn.M.appendChild(mn.V);for(var En=Dn(mn.i.controlPanelElements),xn=En.next();!xn.done;xn=En.next())xn=xn.value,MN.get(xn)?(xn=MN.get(xn).create(mn.V,mn),mn.H.push(xn)):Tu("Unrecognized control panel element requested:",xn)}function rD(mn){if(mn.i.addSeekBar)mn.l=b2.create(mn.M,mn),mn.H.push(mn.l);else{mn=Dn(mn.G);for(var En=mn.next();!En.done;En=mn.next())En.value.classList.add("shaka-low-position")}}function nD(mn){mn.O=Au("div"),mn.O.classList.add("shaka-client-side-ad-container"),Gs(mn.O,!1),mn.h.o(mn.O,"click",function(){k2(mn)}),mn.j.appendChild(mn.O)}function iD(mn){mn.h.o(mn.F,"buffering",function(){mn.P&&Gs(mn.$,mn.F.Pc())}),mn.P&&Gs(mn.$,mn.F.Pc()),mn.h.o(pn,"keydown",function(En){sD(mn,En)}),mn.h.o(pn,"click",function(){return mn.fc()}),mn.h.o(mn,"submenuopen",function(){mn.fc()}),mn.h.o(mn.s,"play",function(){Xv(mn)}),mn.h.o(mn.s,"pause",function(){Xv(mn)}),mn.h.o(mn.j,"mousemove",function(En){pA(mn,En)}),mn.h.o(mn.j,"touchmove",function(En){pA(mn,En)},{passive:!0}),mn.h.o(mn.j,"touchend",function(En){pA(mn,En)},{passive:!0}),mn.h.o(mn.j,"mouseleave",function(){mn.J||mn.Z.Aa()}),mn.h.o(mn.C,"caststatuschanged",function(){ON(mn)}),mn.h.o(mn.j,"keydown",function(En){var xn=document.activeElement,An=xn&&xn.classList?xn.classList.contains("shaka-volume-bar"):!1,Mn=xn&&xn.classList&&xn.classList.contains("shaka-seek-bar");if(mn.g.contains(xn)&&pA(mn,En),mn.i.enableKeyboardPlaybackControls)switch(xn=mn.i.keyboardSeekDistance,En.key){case"ArrowLeft":mn.l&&!An&&0<xn&&(En.preventDefault(),rM(mn,mn.l.getValue()-xn));break;case"ArrowRight":mn.l&&!An&&0<xn&&(En.preventDefault(),rM(mn,mn.l.getValue()+xn));break;case"Home":mn.l&&rM(mn,mn.F.Ja().start);break;case"End":mn.l&&rM(mn,mn.F.Ja().end);break;case" ":Mn&&$2(mn)}}),mn.h.o(mn.j,"keyup",function(En){mn.ka.delete(En.key)}),mn.h.o(mn.Xa,"ad-started",function(En){mn.m=En.ad,mn.ag()}),mn.h.o(mn.Xa,"ad-stopped",function(){mn.m=null,mn.Kf()}),screen.orientation&&mn.h.o(screen.orientation,"change",function(){return hs(function(En){return Qn(En,aD(mn),0)})})}function aD(mn){return hs(function(En){return mn.s&&mn.s.readyState!=0&&!mn.C.na()&&mn.i.enableFullscreenOnRotation&&mn.xd()?screen.orientation.type.includes("landscape")&&!mn.ic()?Qn(En,_2(mn),0):screen.orientation.type.includes("portrait")&&mn.ic()?Qn(En,E2(mn),0):En.D(0):En.return()})}function pA(mn,En){En.type=="mousemove"&&(mn.g.classList.remove("shaka-keyboard-navigation"),Xv(mn)),En.type=="touchstart"||En.type=="touchmove"||En.type=="touchend"||En.type=="keyup"?mn.J=Date.now():mn.J+1e3<Date.now()&&(mn.J=null),mn.J&&En.type=="mousemove"||(mn.j.style.cursor="",mn.gb=!0,mn.I.stop(),mn.Mb()||(nM(mn),Xv(mn)),mn.Z.stop(),En.type!="touchend"&&En.type!="keyup"&&mn.J||mn.Z.R(3))}function oD(mn){return pn.matchMedia("hover: hover").matches?mn.ub.some(function(En){return En.matches(":hover")}):!1}function Xv(mn){var En=mn.m?mn.m.isPaused():!1,xn=mn.s.paused&&!mn.X,An=mn.g.classList.contains("shaka-keyboard-navigation");En||(!mn.m||!mn.m.isLinear())&&xn||mn.gb||An||oD(mn)?(nM(mn),mn.g.setAttribute("shown","true"),mn.aa.stop()):mn.aa.R(mn.i.fadeDelay)}function k2(mn){mn.P&&(mn.md()?mn.I.Aa():mn.i.singleClickForPlayAndPause&&$2(mn))}function $2(mn){mn.m&&mn.m.isLinear()?T2(mn):S2(mn)}function ON(mn){var En=mn.C.na();mn.dispatchEvent(new vu("caststatuschanged",new Map().set("newStatus",En))),En?mn.g.setAttribute("casting","true"):mn.g.removeAttribute("casting")}Sn.Mb=function(){return this.P?this.g.getAttribute("shown")!=null||this.g.getAttribute("casting")!=null:!1};function rM(mn,En){mn.l.changeTo(En),mn.Mb()&&nM(mn)}function nM(mn){if(mn.l)if(mn.l.setValue(mn.s.currentTime),mn.l.update(),mn.l.isShowing())for(var En=Dn(mn.G),xn=En.next();!xn.done;xn=En.next())xn.value.classList.remove("shaka-low-position");else for(En=Dn(mn.G),xn=En.next();!xn.done;xn=En.next())xn.value.classList.add("shaka-low-position");mn.dispatchEvent(new vu("timeandseekrangeupdated"))}function sD(mn,En){mn.ka.add(En.key);var xn=mn.md();En.key=="Tab"&&(mn.g.classList.add("shaka-keyboard-navigation"),Xv(mn),mn.h.o(pn,"mousedown",function(){mn.h.qc(pn,"mousedown")})),En.key=="Escape"&&mn.I.Aa(),xn&&mn.ka.has("Tab")&&uD(mn,En)}function uD(mn,En){var xn=mn.G.filter(function(Un){return!Un.classList.contains("shaka-hidden")});if(xn.length){var An=xn[0];if(An.childNodes.length){for(xn=An.firstElementChild;xn&&xn.classList.contains("shaka-hidden");)xn=xn.nextElementSibling;for(An=An.lastElementChild;An&&An.classList.contains("shaka-hidden");)An=An.previousElementSibling;var Mn=document.activeElement;mn.ka.has("Shift")?Mn==xn&&(En.preventDefault(),An.focus()):Mn==An&&(En.preventDefault(),xn.focus())}}}function lD(){var mn=new np("en");return mn.ea("ar",new Map([["AD_DURATION","مدة الإعلان"],["AD_PROGRESS","الإعلان [AD_ON] من [NUM_ADS]"],["AD_TIME","الإعلان: [AD_TIME]"],["AUTO_QUALITY","تلقائي"],["BACK","رجوع"],["CAPTIONS","الترجمة والشرح"],["CAST","إرسال..."],["ENTER_LOOP_MODE","تكرار الفيديو الحالي"],["ENTER_PICTURE_IN_PICTURE",'الدخول في وضع "نافذة ضمن نافذة"'],["EXIT_FULL_SCREEN","إنهاء وضع ملء الشاشة"],["EXIT_LOOP_MODE","إيقاف تكرار الفيديو الحالي"],["EXIT_PICTURE_IN_PICTURE",'الخروج من وضع "نافذة ضمن نافذة"'],["FAST_FORWARD","تقديم سريع"],["FULL_SCREEN","ملء الشاشة"],["LANGUAGE","اللغة"],["LIVE","مباشر"],["LOOP","تكرار"],["MORE_SETTINGS","مزيد من الإعدادات"],["MULTIPLE_LANGUAGES","لغات متعددة"],["MUTE","كتم الصوت"],["NOT_APPLICABLE","غير سارٍ"],["OFF","إيقاف"],["ON","تشغيل"],["PAUSE","إيقاف مؤقت"],["PICTURE_IN_PICTURE","نافذة ضمن النافذة"],["PLAY","التشغيل"],["PLAYBACK_RATE","سرعة التشغيل"],["RESOLUTION","درجة الدقة"],["REWIND","ترجيع"],["SEEK","البحث بالتمرير"],["SKIP_AD","تخطّي الإعلان"],["SKIP_TO_LIVE","الانتقال إلى بث مباشر"],["UNDETERMINED_LANGUAGE","غير محدد"],["UNMUTE","إعادة الصوت"],["UNRECOGNIZED_LANGUAGE","غير معروف"],["VOLUME","مستوى الصوت"]])),mn.ea("de",new Map([["AD_DURATION","Dauer der Werbeanzeige"],["AD_PROGRESS","Werbung [AD_ON] von [NUM_ADS]"],["AD_TIME","Werbeanzeige: [AD_TIME]"],["AUTO_QUALITY","Automatisch"],["BACK","Zurück"],["CAPTIONS","Untertitel"],["CAST","Streamen..."],["ENTER_LOOP_MODE","In Endlosschleife spielen"],["ENTER_PICTURE_IN_PICTURE","Bild-im-Bild-Modus aktivieren"],["EXIT_FULL_SCREEN","Vollbildmodus beenden"],["EXIT_LOOP_MODE","Endlosschleife stoppen"],["EXIT_PICTURE_IN_PICTURE","Bild-im-Bild-Modus beenden"],["FAST_FORWARD","Vorspulen"],["FULL_SCREEN","Vollbildmodus"],["LANGUAGE","Sprache"],["LIVE","Live"],["LOOP","Schleife"],["MORE_SETTINGS","Weitere Einstellungen"],["MULTIPLE_LANGUAGES","Mehrere Sprachen"],["MUTE","Stummschalten"],["NOT_APPLICABLE","Nicht zutreffend"],["OFF","Aus"],["ON","Ein"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Bild im Bild"],["PLAY","Wiedergabe"],["PLAYBACK_RATE","Geschwindigkeit"],["RESOLUTION","Auflösung"],["REWIND","Zurückspulen"],["SEEK","Suche"],["SKIP_AD","Überspringen"],["SKIP_TO_LIVE","Zum Live-Videostream wechseln"],["UNDETERMINED_LANGUAGE","Unbestimmt"],["UNMUTE","Stummschaltung aufheben"],["UNRECOGNIZED_LANGUAGE","Unbekannt"],["VOLUME","Lautstärke"]])),mn.ea("en",new Map([["AD_DURATION","Ad duration"],["AD_PROGRESS","Ad [AD_ON] of [NUM_ADS]"],["AD_TIME","Ad: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["ENTER_LOOP_MODE","Loop the current video"],["ENTER_PICTURE_IN_PICTURE","Enter Picture-in-Picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_LOOP_MODE","Stop looping the current video"],["EXIT_PICTURE_IN_PICTURE","Exit Picture-in-Picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["LOOP","Loop"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Play"],["PLAYBACK_RATE","Playback speed"],["QUALITY","Quality"],["REPLAY","Replay"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_AD","Skip Ad"],["SKIP_TO_LIVE","Skip ahead to live"],["STATISTICS","Statistics"],["SUBTITLE_FORCED","Forced"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognized"],["VOLUME","Volume"]])),mn.ea("en-GB",new Map([["AD_DURATION","Ad duration"],["AD_PROGRESS","Ad [AD_ON] of [NUM_ADS]"],["AD_TIME","Ad: [AD_TIME]"],["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["ENTER_LOOP_MODE","Loop the current video"],["ENTER_PICTURE_IN_PICTURE","Enter picture-in-picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_LOOP_MODE","Stop looping the current video"],["EXIT_PICTURE_IN_PICTURE","Exit picture-in-picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["LOOP","Loop"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Play"],["PLAYBACK_RATE","Playback speed"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_AD","Skip ad"],["SKIP_TO_LIVE","Skip ahead to live"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognised"],["VOLUME","volume"]])),mn.ea("es",new Map([["AD_DURATION","Duración del anuncio"],["AD_PROGRESS","Anuncio [AD_ON] de [NUM_ADS]"],["AD_TIME","Anuncio: [AD_TIME]"],["AUTO_QUALITY","Automático"],["BACK","Atrás"],["CAPTIONS","Subtítulos"],["CAST","Enviar..."],["ENTER_LOOP_MODE","Reproducir en bucle el vídeo actual"],["ENTER_PICTURE_IN_PICTURE","Activar el modo imagen en imagen"],["EXIT_FULL_SCREEN","Salir del modo de pantalla completa"],["EXIT_LOOP_MODE","Dejar de reproducir en bucle el vídeo actual"],["EXIT_PICTURE_IN_PICTURE","Salir del modo imagen en imagen"],["FAST_FORWARD","Avanzar rápidamente"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["LOOP","Reproducir en bucle"],["MORE_SETTINGS","Más ajustes"],["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","Desactivado"],["ON","Activado"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Imagen en imagen"],["PLAY","Reproducir"],["PLAYBACK_RATE","Velocidad de reproducción"],["RESOLUTION","Resolución"],["REWIND","Rebobinar"],["SEEK","Buscar"],["SKIP_AD","Saltar anuncio"],["SKIP_TO_LIVE","Ir al vídeo en directo"],["SUBTITLE_FORCED","Forzado"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Activar sonido"],["UNRECOGNIZED_LANGUAGE","No reconocida"],["VOLUME","Volumen"]])),mn.ea("es-419",new Map([["AD_DURATION","Duración del anuncio"],["AD_PROGRESS","Anuncio [AD_ON] de [NUM_ADS]"],["AD_TIME","Anuncio: [AD_TIME]"],["AUTO_QUALITY","Automático"],["BACK","Atrás"],["CAPTIONS","Subtítulos"],["CAST","Transmitir..."],["ENTER_LOOP_MODE","Repetir indefinidamente el video actual"],["ENTER_PICTURE_IN_PICTURE","Ingresar al modo de pantalla en pantalla"],["EXIT_FULL_SCREEN","Salir de pantalla completa"],["EXIT_LOOP_MODE","Detener la repetición indefinida del video actual"],["EXIT_PICTURE_IN_PICTURE","Salir del modo de pantalla en pantalla"],["FAST_FORWARD","Avanzar"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["LOOP","Repetir indefinidamente"],["MORE_SETTINGS","Más opciones de configuración"],["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","Desactivado"],["ON","Activado"],["PAUSE","Detener"],["PICTURE_IN_PICTURE","Pantalla en pantalla"],["PLAY","Reproducir"],["PLAYBACK_RATE","Velocidad de reproducción"],["RESOLUTION","Resolución"],["REWIND","Retroceder"],["SEEK","Buscar"],["SKIP_AD","Omitir anuncio"],["SKIP_TO_LIVE","Adelantar hasta la transmisión en vivo"],["SUBTITLE_FORCED","Forzado"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Dejar de silenciar"],["UNRECOGNIZED_LANGUAGE","No reconocida"],["VOLUME","Volumen"]])),mn.ea("fr",new Map([["AD_DURATION","Durée de l'annonce"],["AD_PROGRESS","Annonce [AD_ON] sur [NUM_ADS]"],["AD_TIME","Annonce : [AD_TIME]"],["AUTO_QUALITY","Automatique"],["BACK","Retour"],["CAPTIONS","Sous-titres"],["CAST","Caster…"],["ENTER_LOOP_MODE","Lire en boucle la vidéo en cours"],["ENTER_PICTURE_IN_PICTURE","Utiliser le mode Picture-in-Picture"],["EXIT_FULL_SCREEN","Quitter le mode plein écran"],["EXIT_LOOP_MODE","Arrêter la lecture en boucle de la vidéo en cours"],["EXIT_PICTURE_IN_PICTURE","Quitter le mode PIP (Picture-in-picture)"],["FAST_FORWARD","Avance rapide"],["FULL_SCREEN","Plein écran"],["LANGUAGE","Langue"],["LIVE","En direct"],["LOOP","Répéter"],["MORE_SETTINGS","Plus de paramètres"],["MULTIPLE_LANGUAGES","Plusieurs langues"],["MUTE","Couper le son"],["NOT_APPLICABLE","Non applicable"],["OFF","Désactivée"],["ON","Activée"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Visionner"],["PLAYBACK_RATE","Vitesse de lecture"],["RESOLUTION","Résolution"],["REWIND","Retour arrière"],["SEEK","Chercher"],["SKIP_AD","Passer l'annonce"],["SKIP_TO_LIVE","Accéder à la partie la plus récente du direct"],["UNDETERMINED_LANGUAGE","Langue indéterminée"],["UNMUTE","Réactiver le son"],["UNRECOGNIZED_LANGUAGE","Non reconnu"],["VOLUME","Volume"]])),mn.ea("it",new Map([["AD_DURATION","Durata dell'annuncio"],["AD_PROGRESS","Annuncio [AD_ON] di [NUM_ADS]"],["AD_TIME","Annuncio: [AD_TIME]"],["AUTO_QUALITY","Automatica"],["BACK","Indietro"],["CAPTIONS","Sottotitoli"],["CAST","Trasmetti..."],["ENTER_LOOP_MODE","Riproduci in loop il video corrente"],["ENTER_PICTURE_IN_PICTURE","Attiva Picture in picture"],["EXIT_FULL_SCREEN","Esci da schermo intero"],["EXIT_LOOP_MODE","Interrompi riproduzione in loop del video corrente"],["EXIT_PICTURE_IN_PICTURE","Esci da Picture in picture"],["FAST_FORWARD","Avanti veloce"],["FULL_SCREEN","Schermo intero"],["LANGUAGE","Lingua"],["LIVE","Dal vivo"],["LOOP","Riproduci in loop"],["MORE_SETTINGS","Altre impostazioni"],["MULTIPLE_LANGUAGES","Più lingue"],["MUTE","Disattiva audio"],["NOT_APPLICABLE","Non applicabile"],["OFF","Disattivo"],["ON","Attivo"],["PAUSE","Metti in pausa"],["PICTURE_IN_PICTURE","Picture in picture"],["PLAY","Riproduci"],["PLAYBACK_RATE","Velocità di riproduzione"],["RESOLUTION","Risoluzione"],["REWIND","Riavvolgi"],["SEEK","Cerca"],["SKIP_AD","Salta annuncio"],["SKIP_TO_LIVE","Passa alla trasmissione dal vivo"],["UNDETERMINED_LANGUAGE","Indeterminata"],["UNMUTE","Riattiva audio"],["UNRECOGNIZED_LANGUAGE","Non riconosciuto"],["VOLUME","Volume"]])),mn.ea("ja",new Map([["AD_DURATION","広告再生時間"],["AD_PROGRESS","[AD_ON] 番目の広告（全 [NUM_ADS] 個）"],["AD_TIME","広告: [AD_TIME]"],["AUTO_QUALITY","自動"],["BACK","戻る"],["CAPTIONS","字幕"],["CAST","キャスト..."],["ENTER_LOOP_MODE","現在の動画をループ再生"],["ENTER_PICTURE_IN_PICTURE","ピクチャー イン ピクチャーを開始"],["EXIT_FULL_SCREEN","全画面表示を終了"],["EXIT_LOOP_MODE","現在の動画のループ再生を停止"],["EXIT_PICTURE_IN_PICTURE","ピクチャー イン ピクチャーを終了"],["FAST_FORWARD","早送り"],["FULL_SCREEN","全画面表示"],["LANGUAGE","言語"],["LIVE","ライブ"],["LOOP","ループ"],["MORE_SETTINGS","詳細設定"],["MULTIPLE_LANGUAGES","多言語"],["MUTE","ミュート"],["NOT_APPLICABLE","該当なし"],["OFF","オフ"],["ON","オン"],["PAUSE","一時停止"],["PICTURE_IN_PICTURE","ピクチャー イン ピクチャー"],["PLAY","再生"],["PLAYBACK_RATE","再生速度"],["RESOLUTION","解像度"],["REWIND","巻き戻し"],["SEEK","シーク再生"],["SKIP_AD","広告をスキップ"],["SKIP_TO_LIVE","ライブ配信までスキップ"],["UNDETERMINED_LANGUAGE","不明"],["UNMUTE","ミュートを解除"],["UNRECOGNIZED_LANGUAGE","不明"],["VOLUME","音量"]])),mn.ea("ko",new Map([["AD_DURATION","광고 기간"],["AD_PROGRESS","광고 [AD_ON]/[NUM_ADS]"],["AD_TIME","광고: [AD_TIME]"],["AUTO_QUALITY","자동"],["BACK","뒤로"],["CAPTIONS","자막"],["CAST","전송..."],["ENTER_LOOP_MODE","현재 동영상 반복 재생"],["ENTER_PICTURE_IN_PICTURE","PIP 모드 시작"],["EXIT_FULL_SCREEN","전체화면 닫기"],["EXIT_LOOP_MODE","현재 동영상 반복 재생 중지"],["EXIT_PICTURE_IN_PICTURE","PIP 모드 종료"],["FAST_FORWARD","빨리 감기"],["FULL_SCREEN","전체화면"],["LANGUAGE","언어"],["LIVE","실시간"],["LOOP","반복 재생"],["MORE_SETTINGS","설정 더보기"],["MULTIPLE_LANGUAGES","여러 언어"],["MUTE","음소거"],["NOT_APPLICABLE","해당 사항 없음"],["OFF","사용 안함"],["ON","사용"],["PAUSE","일시중지"],["PICTURE_IN_PICTURE","PIP 모드"],["PLAY","재생"],["PLAYBACK_RATE","재생 속도"],["RESOLUTION","해상도"],["REWIND","되감기"],["SEEK","찾기"],["SKIP_AD","광고 건너뛰기"],["SKIP_TO_LIVE","라이브 동영상으로 건너뛰기"],["UNDETERMINED_LANGUAGE","미정"],["UNMUTE","음소거 해제"],["UNRECOGNIZED_LANGUAGE","알 수 없음"],["VOLUME","볼륨"]])),mn.ea("nl",new Map([["AD_DURATION","Advertentieduur"],["AD_PROGRESS","Advertentie [AD_ON] van [NUM_ADS]"],["AD_TIME","Advertentie: [AD_TIME]"],["AUTO_QUALITY","Automatisch"],["BACK","Terug"],["CAPTIONS","Ondertiteling"],["CAST","Casten..."],["ENTER_LOOP_MODE","De huidige video lussen"],["ENTER_PICTURE_IN_PICTURE","Scherm-in-scherm openen"],["EXIT_FULL_SCREEN","Volledig scherm sluiten"],["EXIT_LOOP_MODE","De huidige video niet meer lussen"],["EXIT_PICTURE_IN_PICTURE","Scherm-in-scherm afsluiten"],["FAST_FORWARD","Vooruitspoelen"],["FULL_SCREEN","Volledig scherm"],["LANGUAGE","Taal"],["LIVE","Live"],["LOOP","Lussen"],["MORE_SETTINGS","Meer instellingen"],["MULTIPLE_LANGUAGES","Meerdere talen"],["MUTE","Dempen"],["NOT_APPLICABLE","Niet van toepassing"],["OFF","Uit"],["ON","Aan"],["PAUSE","Onderbreken"],["PICTURE_IN_PICTURE","Scherm-in-scherm"],["PLAY","Afspelen"],["PLAYBACK_RATE","Afspeelsnelheid"],["RESOLUTION","Resolutie"],["REWIND","Terugspoelen"],["SEEK","Zoeken"],["SKIP_AD","Advertentie overslaan"],["SKIP_TO_LIVE","Doorgaan naar live"],["UNDETERMINED_LANGUAGE","Onbepaald"],["UNMUTE","Dempen opheffen"],["UNRECOGNIZED_LANGUAGE","Onbekend"],["VOLUME","Volume"]])),mn.ea("pl",new Map([["AD_DURATION","Czas trwania reklamy"],["AD_PROGRESS","Reklama [AD_ON] z [NUM_ADS]"],["AD_TIME","Reklama: [AD_TIME]"],["AUTO_QUALITY","Automatycznie"],["BACK","Wstecz"],["CAPTIONS","Napisy"],["CAST","Przesyłaj..."],["ENTER_LOOP_MODE","Odtwarzaj bieżący film w pętli"],["ENTER_PICTURE_IN_PICTURE","Włącz tryb obrazu w obrazie"],["EXIT_FULL_SCREEN","Zamknij pełny ekran"],["EXIT_LOOP_MODE","Wyłącz odtwarzanie bieżącego filmu w pętli"],["EXIT_PICTURE_IN_PICTURE","Wyłącz tryb obrazu w obrazie"],["FAST_FORWARD","Przewiń do przodu"],["FULL_SCREEN","Pełny ekran"],["LANGUAGE","Język"],["LIVE","Na żywo"],["LOOP","Odtwarzaj w pętli"],["MORE_SETTINGS","Więcej ustawień"],["MULTIPLE_LANGUAGES","Wiele języków"],["MUTE","Wycisz"],["NOT_APPLICABLE","Nie dotyczy"],["OFF","Wyłączone"],["ON","Włączone"],["PAUSE","Wstrzymaj"],["PICTURE_IN_PICTURE","Obraz w obrazie"],["PLAY","Odtwórz"],["PLAYBACK_RATE","Szybkość odtwarzania"],["RESOLUTION","Rozdzielczość"],["REWIND","Przewiń do tyłu"],["SEEK","Szukaj"],["SKIP_AD","Pomiń reklamę"],["SKIP_TO_LIVE","Przejdź do transmisji na żywo"],["UNDETERMINED_LANGUAGE","Nie określono"],["UNMUTE","Wyłącz wyciszenie"],["UNRECOGNIZED_LANGUAGE","Nierozpoznany"],["VOLUME","Głośność"]])),mn.ea("pt-BR",new Map([["AD_DURATION","Duração do anúncio"],["AD_PROGRESS","Anúncio [AD_ON] de [NUM_ADS]"],["AD_TIME","Anúncio: [AD_TIME]"],["AUTO_QUALITY","Automática"],["BACK","Voltar"],["CAPTIONS","Legendas"],["CAST","Transmitir..."],["ENTER_LOOP_MODE","Repetir o vídeo atual"],["ENTER_PICTURE_IN_PICTURE","Entrar no modo picture-in-picture"],["EXIT_FULL_SCREEN","Sair do modo tela cheia"],["EXIT_LOOP_MODE","Parar repetição do vídeo atual"],["EXIT_PICTURE_IN_PICTURE","Sair de picture-in-picture"],["FAST_FORWARD","Avançar"],["FULL_SCREEN","Tela cheia"],["LANGUAGE","Idioma"],["LIVE","Ao vivo"],["LOOP","Repetir"],["MORE_SETTINGS","Mais definições"],["MULTIPLE_LANGUAGES","Vários idiomas"],["MUTE","Desativar som"],["NOT_APPLICABLE","Não relevante"],["OFF","Desativado"],["ON","Ativado"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Reproduzir"],["PLAYBACK_RATE","Velocidade da reprodução"],["RESOLUTION","Resolução"],["REWIND","Retroceder"],["SEEK","Procurar"],["SKIP_AD","Pular anúncio"],["SKIP_TO_LIVE","Pular para transmissão ao vivo"],["UNDETERMINED_LANGUAGE","Indeterminado"],["UNMUTE","Ativar som"],["UNRECOGNIZED_LANGUAGE","Não reconhecido"],["VOLUME","Volume"]])),mn.ea("ru",new Map([["AD_DURATION","Продолжительность рекламы"],["AD_PROGRESS","Реклама [AD_ON] из [NUM_ADS]"],["AD_TIME","Реклама: [AD_TIME]"],["AUTO_QUALITY","Авто"],["BACK","Назад"],["CAPTIONS","Субтитры"],["CAST","Транслировать..."],["ENTER_LOOP_MODE","Зациклить текущее видео"],["ENTER_PICTURE_IN_PICTURE",'Перейти в режим "Картинка в картинке"'],["EXIT_FULL_SCREEN","Обычный режим"],["EXIT_LOOP_MODE","Отменить зацикливание текущего видео"],["EXIT_PICTURE_IN_PICTURE",'Выйти из режима "Картинка в картинке"'],["FAST_FORWARD","Перемотка вперед"],["FULL_SCREEN","Полноэкранный режим"],["LANGUAGE","Язык"],["LIVE","Прямой эфир"],["LOOP","Зациклить"],["MORE_SETTINGS","Дополнительные настройки"],["MULTIPLE_LANGUAGES","Несколько языков"],["MUTE","Отключить звук"],["NOT_APPLICABLE","Неприменимо"],["OFF","Выкл."],["ON","Вкл."],["PAUSE","Пауза"],["PICTURE_IN_PICTURE","Картинка в картинке"],["PLAY","Воспроизвести"],["PLAYBACK_RATE","Скорость воспроизведения"],["RESOLUTION","Разрешение"],["REWIND","Перемотать назад"],["SEEK","Перемотка"],["SKIP_AD","Пропустить"],["SKIP_TO_LIVE","Пропустить и перейти к прямой трансляции"],["UNDETERMINED_LANGUAGE","Не указано"],["UNMUTE","Включить звук"],["UNRECOGNIZED_LANGUAGE","Не распознано"],["VOLUME","Громкость"]])),mn.ea("th",new Map([["AD_DURATION","ระยะเวลาโฆษณา"],["AD_PROGRESS","โฆษณา [AD_ON] จาก [NUM_ADS] รายการ"],["AD_TIME","โฆษณา: [AD_TIME]"],["AUTO_QUALITY","อัตโนมัติ"],["BACK","กลับ"],["CAPTIONS","คำบรรยาย"],["CAST","แคสต์..."],["ENTER_LOOP_MODE","วนซ้ำวิดีโอปัจจุบัน"],["ENTER_PICTURE_IN_PICTURE","เข้าสู่การแสดงภาพซ้อนภาพ"],["EXIT_FULL_SCREEN","ออกจากการแสดงแบบเต็มหน้าจอ"],["EXIT_LOOP_MODE","หยุดวนซ้ำวิดีโอปัจจุบัน"],["EXIT_PICTURE_IN_PICTURE","ออกจากการแสดงภาพซ้อนภาพ"],["FAST_FORWARD","กรอไปข้างหน้า"],["FULL_SCREEN","เต็มหน้าจอ"],["LANGUAGE","ภาษา"],["LIVE","สด"],["LOOP","ลูป"],["MORE_SETTINGS","การตั้งค่าเพิ่มเติม"],["MULTIPLE_LANGUAGES","หลายภาษา"],["MUTE","ปิดเสียง"],["NOT_APPLICABLE","ไม่เกี่ยวข้อง"],["OFF","ปิด"],["ON","เปิด"],["PAUSE","หยุดชั่วคราว"],["PICTURE_IN_PICTURE","การแสดงภาพซ้อนภาพ"],["PLAY","เล่น"],["PLAYBACK_RATE","ความเร็วในการเล่น"],["RESOLUTION","ความละเอียด"],["REWIND","กรอกลับ"],["SEEK","ค้นหา"],["SKIP_AD","ข้ามโฆษณา"],["SKIP_TO_LIVE","ข้ามไปที่การถ่ายทอดสด"],["UNDETERMINED_LANGUAGE","ไม่กำหนด"],["UNMUTE","เปิดเสียง"],["UNRECOGNIZED_LANGUAGE","ที่ไม่รู้จัก"],["VOLUME","ระดับเสียง"]])),mn.ea("tr",new Map([["AD_DURATION","Reklam süresi"],["AD_PROGRESS","[AD_ON]/[NUM_ADS] reklam"],["AD_TIME","Reklam: [AD_TIME]"],["AUTO_QUALITY","Otomatik"],["BACK","Geri"],["CAPTIONS","Altyazılar"],["CAST","Yayınla..."],["ENTER_LOOP_MODE","Mevcut videoyu döngüye al"],["ENTER_PICTURE_IN_PICTURE","Pencere içinde Pencere moduna gir"],["EXIT_FULL_SCREEN","Tam ekrandan çık"],["EXIT_LOOP_MODE","Mevcut videonun döngüsünü durdur"],["EXIT_PICTURE_IN_PICTURE","Pencere İçinde Pencereden Çık"],["FAST_FORWARD","İleri sar"],["FULL_SCREEN","Tam ekran"],["LANGUAGE","Dil"],["LIVE","Canlı"],["LOOP","Döngü"],["MORE_SETTINGS","Daha fazla ayar"],["MULTIPLE_LANGUAGES","Birden çok dil"],["MUTE","Sesi kapat"],["NOT_APPLICABLE","Geçerli değil"],["OFF","Kapalı"],["ON","Açık"],["PAUSE","Duraklat"],["PICTURE_IN_PICTURE","Pencere İçinde Pencere"],["PLAY","Oynat"],["PLAYBACK_RATE","Çalma hızı"],["RESOLUTION","Çözünürlük"],["REWIND","Geri sar"],["SEEK","Ara"],["SKIP_AD","Reklamı Atla"],["SKIP_TO_LIVE","Canlı yayına atla"],["UNDETERMINED_LANGUAGE","Belirsiz"],["UNMUTE","Sesi aç"],["UNRECOGNIZED_LANGUAGE","Tanınmayan"],["VOLUME","Ses"]])),mn.ea("zh",new Map([["AD_DURATION","广告持续时间"],["AD_PROGRESS","广告 [AD_ON]/[NUM_ADS]"],["AD_TIME","广告：[AD_TIME]"],["AUTO_QUALITY","自动"],["BACK","返回"],["CAPTIONS","字幕"],["CAST","投射…"],["ENTER_LOOP_MODE","循环播放当前视频"],["ENTER_PICTURE_IN_PICTURE","进入“画中画”模式"],["EXIT_FULL_SCREEN","退出全屏模式"],["EXIT_LOOP_MODE","停止循环播放当前视频"],["EXIT_PICTURE_IN_PICTURE","退出“画中画”模式"],["FAST_FORWARD","快进"],["FULL_SCREEN","全屏"],["LANGUAGE","语言"],["LIVE","直播"],["LOOP","循环播放"],["MORE_SETTINGS","更多设置"],["MULTIPLE_LANGUAGES","多种语言"],["MUTE","静音"],["NOT_APPLICABLE","不适用"],["OFF","关闭"],["ON","开启"],["PAUSE","暂停"],["PICTURE_IN_PICTURE","画中画"],["PLAY","播放"],["PLAYBACK_RATE","播放速度"],["RESOLUTION","分辨率"],["REWIND","快退"],["SEEK","进度"],["SKIP_AD","跳过广告"],["SKIP_TO_LIVE","跳至当前直播"],["UNDETERMINED_LANGUAGE","未确定"],["UNMUTE","取消静音"],["UNRECOGNIZED_LANGUAGE","无法识别"],["VOLUME","音量"]])),mn.ea("zh-TW",new Map([["AD_DURATION","廣告長度"],["AD_PROGRESS","廣告 [AD_ON]/[NUM_ADS]"],["AD_TIME","廣告：[AD_TIME]"],["AUTO_QUALITY","自動"],["BACK","返回"],["CAPTIONS","字幕"],["CAST","投放..."],["ENTER_LOOP_MODE","循環播放目前的影片"],["ENTER_PICTURE_IN_PICTURE","進入子母畫面"],["EXIT_FULL_SCREEN","退出全螢幕模式"],["EXIT_LOOP_MODE","停止循環播放目前的影片"],["EXIT_PICTURE_IN_PICTURE","離開子母畫面"],["FAST_FORWARD","快轉"],["FULL_SCREEN","全螢幕"],["LANGUAGE","語言"],["LIVE","直播"],["LOOP","循環播放"],["MORE_SETTINGS","顯示更多設定"],["MULTIPLE_LANGUAGES","多種語言"],["MUTE","靜音"],["NOT_APPLICABLE","不適用"],["OFF","關閉"],["ON","開啟"],["PAUSE","暫停"],["PICTURE_IN_PICTURE","子母畫面"],["PLAY","播放"],["PLAYBACK_RATE","播放速度"],["RESOLUTION","解析度"],["REWIND","倒轉"],["SEEK","搜尋"],["SKIP_AD","略過廣告"],["SKIP_TO_LIVE","跳至当前直播"],["UNDETERMINED_LANGUAGE","不明"],["UNMUTE","取消靜音"],["UNRECOGNIZED_LANGUAGE","無法辨識"],["VOLUME","音量"]])),mn.xf(navigator.languages||[]),mn}Ys("shaka.ui.Controls",Su),Su.prototype.isOpaque=Su.prototype.Mb,Su.prototype.hideAdUI=Su.prototype.Kf,Su.prototype.showAdUI=Su.prototype.ag,Su.prototype.toggleFullScreen=Su.prototype.Xe,Su.prototype.isFullScreenEnabled=Su.prototype.ic,Su.prototype.isFullScreenSupported=Su.prototype.xd,Su.prototype.hideSettingsMenus=Su.prototype.fc,Su.prototype.anySettingsMenusAreOpen=Su.prototype.md,Su.prototype.setLastTouchEventTime=Su.prototype.Xf,Su.prototype.getDisplayTime=Su.prototype.Hf,Su.prototype.isCastAllowed=Su.prototype.eh,Su.prototype.setSeeking=Su.prototype.Qe,Su.prototype.isSeeking=Su.prototype.gh,Su.prototype.getConfig=Su.prototype.Dg,Su.prototype.getClientSideAdContainer=Su.prototype.Cg,Su.prototype.getServerSideAdContainer=Su.prototype.Ug,Su.prototype.getControlsContainer=Su.prototype.Fg,Su.prototype.getLocalPlayer=Su.prototype.Kg,Su.prototype.getPlayer=Su.prototype.cc,Su.prototype.getLocalVideo=Su.prototype.Lg,Su.prototype.getVideo=Su.prototype.zb,Su.prototype.getVideoContainer=Su.prototype.ah,Su.prototype.getLocalization=Su.prototype.Mg,Su.prototype.getCastProxy=Su.prototype.Ag,Su.prototype.getAd=Su.prototype.getAd,Su.prototype.setEnabledNativeControls=Su.prototype.Wf,Su.prototype.setEnabledShakaControls=Su.prototype.Me,Su.prototype.configure=Su.prototype.configure,Su.prototype.loadComplete=Su.prototype.hh,Su.prototype.allowCast=Su.prototype.ng,Su.registerSeekBar=function(mn){b2=mn},Su.registerElement=fm,Su.prototype.destroy=Su.prototype.destroy;var MN=new Map,b2=new Zy;function hA(mn,En){Cs.call(this,mn,En);var xn=this;this.l=this.controls.i,this.j=this.controls.g,this.i=[],this.g=kp(),this.g.classList.add("shaka-overflow-menu-button"),this.g.classList.add("shaka-no-propagation"),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-tooltip"),this.g.textContent="more_vert",this.parent.appendChild(this.g),this.h=Au("div"),this.h.classList.add("shaka-overflow-menu"),this.h.classList.add("shaka-no-propagation"),this.h.classList.add("shaka-show-controls-on-mouse-over"),this.h.classList.add("shaka-hidden"),this.j.appendChild(this.h),cD(this),this.eventManager.o(this.localization,"locale-updated",function(){RN(xn)}),this.eventManager.o(this.localization,"locale-changed",function(){RN(xn)}),this.eventManager.o(this.adManager,"ad-started",function(){xn.ad&&xn.ad.isLinear()&&Gs(xn.g,!1)}),this.eventManager.o(this.adManager,"ad-stopped",function(){Gs(xn.g,!0)}),this.eventManager.o(this.controls,"submenuopen",function(){Gs(xn.h,!1)}),this.eventManager.o(this.h,"touchstart",function(An){xn.controls.Xf(Date.now()),An.stopPropagation()}),this.eventManager.o(this.g,"click",function(){dD(xn)}),RN(this),this.ad&&this.ad.isLinear()&&Gs(this.g,!1)}as(hA,Cs),hA.prototype.release=function(){this.j=null;for(var mn=Dn(this.i),En=mn.next();!En.done;En=mn.next())En.value.release();this.i=[],Cs.prototype.release.call(this)};function A_(mn,En){NN.set(mn,En)}function cD(mn){for(var En=Dn(mn.l.overflowMenuButtons),xn=En.next();!xn.done;xn=En.next())xn=xn.value,NN.get(xn)?(xn=NN.get(xn),mn.i.push(xn.create(mn.h,mn.controls))):Tu("Unrecognized overflow menu element requested:",xn)}function dD(mn){if(mn.controls.md())mn.controls.fc();else{Gs(mn.h,!0),Xv(mn.controls);var En=function(xn){return xn.classList.contains("shaka-hidden")==0};Xp(mn.h.childNodes,En)&&_p(mn.h.childNodes,En)[0].focus()}}function RN(mn){mn.g.ariaLabel=mn.localization.resolve("MORE_SETTINGS")}Ys("shaka.ui.OverflowMenu",hA),hA.registerElement=A_;function x2(){}x2.prototype.create=function(mn,En){return new hA(mn,En)},fm("overflow_menu",new x2);var NN=new Map;function DN(mn,En){Cs.call(this,mn,En);var xn=this;this.g=kp(),this.g.classList.add("shaka-airplay-button"),this.g.classList.add("shaka-tooltip"),this.g.ariaPressed="false",this.h=Au("i"),this.h.classList.add("material-icons-round"),this.h.textContent="airplay",this.g.appendChild(this.h),pn.WebKitPlaybackTargetAvailabilityEvent||this.g.classList.add("shaka-hidden"),mn=Au("label"),mn.classList.add("shaka-overflow-button-label"),mn.classList.add("shaka-overflow-menu-only"),this.j=Au("span"),mn.appendChild(this.j),this.i=Au("span"),this.i.classList.add("shaka-current-selection-span"),mn.appendChild(this.i),this.g.appendChild(mn),this.parent.appendChild(this.g),LN(this),C2(this),this.eventManager.o(this.localization,"locale-updated",function(){LN(xn)}),this.eventManager.o(this.localization,"locale-changed",function(){LN(xn)}),this.eventManager.o(this.g,"click",function(){xn.controls.zb().webkitShowPlaybackTargetPicker()}),mn=this.controls.zb(),this.eventManager.o(mn,"webkitplaybacktargetavailabilitychanged",function(An){var Mn=xn.player.If()==Xm;Gs(xn.g,An.availability=="available"&&Mn)}),this.eventManager.o(mn,"webkitcurrentplaybacktargetiswirelesschanged",function(){C2(xn)})}as(DN,Cs);function C2(mn){var En=mn.controls.zb();mn.g.ariaPressed=En&&En.webkitCurrentPlaybackTargetIsWireless?"true":"false"}function LN(mn){mn.g.ariaLabel=mn.localization.resolve("AIRPLAY"),mn.j.textContent=mn.localization.resolve("AIRPLAY")}Ys("shaka.ui.AirPlayButton",DN);function UN(){}UN.prototype.create=function(mn,En){return new DN(mn,En)},A_("airplay",new UN),fm("airplay",new UN);function _m(mn,En,xn){this.i=mn,this.h=iM(this),En.dataset.shakaPlayerContainer="",En.ui=this,this.pe()&&En.classList.add("shaka-mobile"),this.g=new Su(mn,En,xn,this.h),this.configure({}),xn.controls||mn.Te(En),En.ui=this,xn.ui=this}Sn=_m.prototype,Sn.destroy=function(){var mn=this;return hs(function(En){if(En.g==1)return mn.g?Qn(En,mn.g.destroy(),2):En.D(2);if(En.g!=4)return mn.g=null,mn.i?Qn(En,mn.i.destroy(),4):En.D(4);mn.i=null,ms(En)})},Sn.pe=function(){return/(?:iPhone|iPad|iPod|Android)/.test(navigator.userAgent)?!0:rv()&&1<navigator.maxTouchPoints},Sn.getConfiguration=function(){var mn=iM(this);return NS(mn,this.h,iM(this),{},""),mn},Sn.configure=function(mn,En){arguments.length==2&&typeof mn=="string"&&(mn=s0(mn,En)),NS(this.h,mn,iM(this),{},""),this.h.castReceiverAppId&&!this.h.overflowMenuButtons.includes("cast")&&this.h.overflowMenuButtons.push("cast"),this.g.configure(this.h),this.g.dispatchEvent(new vu("uiupdated"))},Sn.Eg=function(){return this.g},Sn.Jh=function(mn){this.g.Me(mn)};function iM(mn){var En={controlPanelElements:"play_pause time_and_duration spacer mute volume fullscreen overflow_menu".split(" "),overflowMenuButtons:"captions quality language picture_in_picture cast playback_rate".split(" "),statisticsList:"width height corruptedFrames decodedFrames droppedFrames drmTimeSeconds licenseTime liveLatency loadLatency bufferingTime manifestTimeSeconds estimatedBandwidth streamBandwidth maxSegmentDuration pauseTime playTime completionPercent".split(" "),contextMenuElements:["loop","picture_in_picture","statistics"],playbackRates:[.5,.75,1,1.25,1.5,1.75,2],fastForwardRates:[2,4,8,1],rewindRates:[-1,-2,-4,-8],addSeekBar:!0,addBigPlayButton:!1,customContextMenu:!1,castReceiverAppId:"",castAndroidReceiverCompatible:!1,clearBufferOnQualityChange:!0,showUnbufferedStart:!1,seekBarColors:{base:"rgba(255, 255, 255, 0.3)",buffered:"rgba(255, 255, 255, 0.54)",played:"rgb(255, 255, 255)",adBreaks:"rgb(255, 204, 0)"},volumeBarColors:{base:"rgba(255, 255, 255, 0.54)",level:"rgb(255, 255, 255)"},trackLabelFormat:FN,fadeDelay:0,doubleClickForFullscreen:!0,singleClickForPlayAndPause:!0,enableKeyboardPlaybackControls:!0,enableFullscreenOnRotation:!0,forceLandscapeOnFullscreen:!0,enableTooltips:!1,keyboardSeekDistance:5};return pn.WebKitPlaybackTargetAvailabilityEvent&&En.overflowMenuButtons.push("airplay"),mn.pe()&&(En.addBigPlayButton=!0,En.controlPanelElements=En.controlPanelElements.filter(function(xn){return xn!="play_pause"&&xn!="volume"})),En}function w2(){var mn,En,xn,An,Mn,Un,Bn,Gn,Wn,ts,os,cs,ls,gs,ws,Ns,Os,Ps,Xs,Ds,qs;return hs(function(Qs){switch(Qs.g){case 1:if(xw(),!II())return jN("shaka-ui-load-failed",I2),Qs.return();if(mn=document.querySelectorAll("[data-shaka-player-container]"),En=document.querySelectorAll("[data-shaka-player]"),xn=document.querySelectorAll("[data-shaka-player-canvas]"),!En.length&&!mn.length){Qs.D(2);break}if(En.length&&!mn.length){for(An=Dn(En),Mn=An.next();!Mn.done;Mn=An.next())if(Un=Mn.value,!Un.ui){for(Bn=document.createElement("div"),Gn=Un.parentElement,Gn.replaceChild(Bn,Un),Bn.appendChild(Un),Wn=null,ts=Dn(xn),os=ts.next();!os.done;os=ts.next())if(cs=os.value,cs.parentElement==Bn){Wn=cs;break}Wn||(Wn=document.createElement("canvas"),Wn.classList.add("shaka-canvas-container"),Bn.appendChild(Wn)),A2(Bn,Un,Wn)}Qs.D(2);break}ls=Dn(mn),gs=ls.next();case 4:if(gs.done){Qs.D(2);break}if(ws=gs.value,ws.ui){Qs.D(5);break}for(Ns=null,Os=Dn(En),Mn=Os.next();!Mn.done;Mn=Os.next())if(Ps=Mn.value,Ps.parentElement==ws){Ns=Ps;break}for(Ns||(Ns=document.createElement("video"),Ns.setAttribute("playsinline",""),ws.appendChild(Ns)),Xs=null,Ds=Dn(xn),os=Ds.next();!os.done;os=Ds.next())if(qs=os.value,qs.parentElement==ws){Xs=qs;break}return Xs||(Xs=document.createElement("canvas"),Xs.classList.add("shaka-canvas-container"),ws.appendChild(Xs)),Ts(Qs,7),Qn(Qs,A2(ws,Ns,Xs),9);case 9:ys(Qs,5);break;case 7:return _s(Qs),jN("shaka-ui-load-failed",P2),Qs.return();case 5:gs=ls.next(),Qs.D(4);break;case 2:jN("shaka-ui-loaded"),ms(Qs)}})}function jN(mn,En){var xn=null;En!=null&&(xn={reasonCode:En}),mn=new CustomEvent(mn,{detail:xn}),document.dispatchEvent(mn)}function A2(mn,En,xn){var An,Mn,Un,Bn,Gn,Wn,ts,os,cs;return hs(function(ls){switch(ls.g){case 1:An=new iu(En),Mn=new _m(An,mn,En),An.qf(xn),Un="",Bn=!1,mn.dataset&&mn.dataset.shakaPlayerCastReceiverId?(Un=mn.dataset.shakaPlayerCastReceiverId,Bn=mn.dataset.shakaPlayerCastAndroidReceiverCompatible==="true"):En.dataset&&En.dataset.shakaPlayerCastReceiverId&&(Un=En.dataset.shakaPlayerCastReceiverId,Bn=En.dataset.shakaPlayerCastAndroidReceiverCompatible==="true"),Un.length&&Mn.configure({castReceiverAppId:Un,castAndroidReceiverCompatible:Bn}),En.controls&&Mn.g.Wf(!0),(Gn=En.getAttribute("src"))&&(Wn=document.createElement("source"),Wn.setAttribute("src",Gn),En.appendChild(Wn),En.removeAttribute("src")),ts=Dn(En.querySelectorAll("source")),os=ts.next();case 2:if(os.done){ls.D(0);break}return cs=os.value,Ts(ls,5),Qn(ls,Mn.g.cc().load(cs.getAttribute("src")),7);case 7:ls.D(0);break;case 5:_s(ls);case 3:os=ts.next(),ls.D(2)}})}Ys("shaka.ui.Overlay",_m),_m.prototype.setEnabled=_m.prototype.Jh,_m.prototype.getControls=_m.prototype.Eg,_m.prototype.configure=_m.prototype.configure,_m.prototype.getConfiguration=_m.prototype.getConfiguration,_m.prototype.isMobile=_m.prototype.pe,_m.prototype.destroy=_m.prototype.destroy;var FN=0;_m.TrackLabelFormat={LANGUAGE:FN,ROLE:1,LANGUAGE_ROLE:2,LABEL:3};var I2=0,P2=1;_m.FailReasonCode={NO_BROWSER_SUPPORT:I2,PLAYER_FAILED_TO_LOAD:P2},document.readyState=="complete"?hs(function(mn){if(mn.g==1)return Qn(mn,Promise.resolve(),2);w2(),ms(mn)}):pn.addEventListener("load",w2);function O2(mn,En,xn,An,Mn,Un,Bn){function Gn(Ds,qs){return Ds+": "+qs}function Wn(Ds){return Ds.type=="variant"?Ds.audioRoles?Ds.audioRoles.join(", "):void 0:Ds.roles.join(", ")}var ts=mn.find(function(Ds){return Ds.active==1}),os=Ms(En);i0(En),En.appendChild(os),os=new Map;for(var cs=Dn(mn),ls=cs.next();!ls.done;ls=cs.next())ls=ls.value,os.has(ls.language)||os.set(ls.language,new Set),os.get(ls.language).add(Wn(ls));for(os=new Set,ts=ts?Gn(ts.language,Wn(ts)):"",cs={},mn=Dn(mn),ls=mn.next();!ls.done;cs={Va:cs.Va},ls=mn.next()){cs.Va=ls.value,ls=cs.Va.language;var gs=cs.Va.forced,ws=Un.resolve(Jv.hg),Ns=Wn(cs.Va),Os=Gn(ls,Ns);if(!os.has(Os)){os.add(Os);var Ps=kp();Ps.addEventListener("click",function(Ds){return function(){xn(Ds.Va)}}(cs));var Xs=Au("span");switch(Ps.appendChild(Xs),Xs.textContent=fD(ls,Un),Bn){case FN:gs&&(Xs.textContent+=" ("+ws+")");break;case 1:Ns?Xs.textContent=Ns:(Tu("Track #"+cs.Va.id+" does not have a role, but the UI is configured to only show role."),Xs.textContent="?"),gs&&(Xs.textContent+=" ("+ws+")");break;case 2:Ns&&(Xs.textContent+=": "+Ns),gs&&(Xs.textContent+=" ("+ws+")");break;case 3:cs.Va.label?Xs.textContent=cs.Va.label:(Tu("Track #"+cs.Va.id+" does not have a label, but the UI is configured to only show labels."),Xs.textContent="?")}An&&Os==ts&&(Ps.appendChild(Ws()),Xs.classList.add("shaka-chosen-item"),Ps.ariaSelected="true",Mn.textContent=Xs.textContent),En.appendChild(Ps)}}}function fD(mn,En){if(!mn&&!En)return"";switch(mn){case"mul":return En.resolve("MULTIPLE_LANGUAGES");case"und":return En.resolve("UNDETERMINED_LANGUAGE");case"zxx":return En.resolve("NOT_APPLICABLE")}var xn=iy(mn);return mn in fs?fs[mn].u:xn in fs?fs[xn].u+" ("+mn+")":En.resolve("UNRECOGNIZED_LANGUAGE")+" ("+mn+")"}function I_(mn,En,xn){Cs.call(this,mn,En);var An=this;pD(this,xn),hD(this),mD(this),this.eventManager.o(this.button,"click",function(){An.menu.classList.contains("shaka-hidden")?(An.controls.dispatchEvent(new vu("submenuopen")),Gs(An.menu,!0),Fs(An.menu)):Gs(An.menu,!1)})}as(I_,Cs);function pD(mn,En){mn.button=kp(),mn.button.classList.add("shaka-overflow-button"),mn.icon=Au("i"),mn.icon.classList.add("material-icons-round"),mn.icon.textContent=En,mn.button.appendChild(mn.icon),En=Au("label"),En.classList.add("shaka-overflow-button-label"),En.classList.add("shaka-overflow-menu-only"),mn.nameSpan=Au("span"),En.appendChild(mn.nameSpan),mn.currentSelection=Au("span"),mn.currentSelection.classList.add("shaka-current-selection-span"),En.appendChild(mn.currentSelection),mn.button.appendChild(En),mn.parent.appendChild(mn.button)}function hD(mn){mn.menu=Au("div"),mn.menu.classList.add("shaka-no-propagation"),mn.menu.classList.add("shaka-show-controls-on-mouse-over"),mn.menu.classList.add("shaka-settings-menu"),mn.menu.classList.add("shaka-hidden"),mn.backButton=kp(),mn.backButton.classList.add("shaka-back-to-overflow-button"),mn.menu.appendChild(mn.backButton),mn.eventManager.o(mn.backButton,"click",function(){mn.controls.fc()});var En=Au("i");En.classList.add("material-icons-round"),En.textContent="close",mn.backButton.appendChild(En),mn.backSpan=Au("span"),mn.backButton.appendChild(mn.backSpan),mn.controls.g.appendChild(mn.menu)}function mD(mn){mn.parent.classList.contains("shaka-overflow-menu")&&(mn.backButton.firstChild.textContent="arrow_back",mn.eventManager.o(mn.backButton,"click",function(){function En(xn){return xn.classList.contains("shaka-hidden")==0}Gs(mn.parent,!0),Xp(mn.parent.childNodes,En)&&_p(mn.parent.childNodes,En)[0].focus(),Xv(mn.controls)}))}Ys("shaka.ui.SettingsMenu",I_);function BN(mn,En){I_.call(this,mn,En,"language");var xn=this;this.button.classList.add("shaka-language-button"),this.button.classList.add("shaka-tooltip-status"),this.menu.classList.add("shaka-audio-languages"),this.eventManager.o(this.localization,"locale-updated",function(){GN(xn)}),this.eventManager.o(this.localization,"locale-changed",function(){GN(xn)}),this.eventManager.o(this.player,"trackschanged",function(){var An=0<xn.player.Qa().length;Gs(xn.button,An),VN(xn)}),this.eventManager.o(this.player,"variantchanged",function(){VN(xn)}),GN(this),VN(this)}as(BN,I_);function VN(mn){var En=mn.player.Qa();O2(En,mn.menu,function(xn){mn.player.Md(xn.language,xn.roles[0])},!0,mn.currentSelection,mn.localization,mn.controls.i.trackLabelFormat),Fs(mn.menu),mn.controls.dispatchEvent(new vu("languageselectionupdated")),mn.button.setAttribute("shaka-status",mn.currentSelection.innerText)}function GN(mn){mn.backButton.ariaLabel=mn.localization.resolve("BACK"),mn.button.ariaLabel=mn.localization.resolve("LANGUAGE"),mn.nameSpan.textContent=mn.localization.resolve("LANGUAGE"),mn.backSpan.textContent=mn.localization.resolve("LANGUAGE")}Ys("shaka.ui.AudioLanguageSelection",BN);function zN(){}zN.prototype.create=function(mn,En){return new BN(mn,En)},A_("language",new zN),fm("language",new zN);function HN(mn,En){Cs.call(this,mn,En);var xn=this;this.h=this.controls.C,this.g=kp(),this.g.classList.add("shaka-cast-button"),this.g.classList.add("shaka-tooltip"),this.g.ariaPressed="false",this.i=Au("i"),this.i.classList.add("material-icons-round"),this.i.textContent="cast",this.g.appendChild(this.i),mn=Au("label"),mn.classList.add("shaka-overflow-button-label"),mn.classList.add("shaka-overflow-menu-only"),this.l=Au("span"),mn.appendChild(this.l),this.j=Au("span"),this.j.classList.add("shaka-current-selection-span"),mn.appendChild(this.j),this.g.appendChild(mn),this.parent.appendChild(this.g),KN(this),M2(this),this.eventManager.o(this.localization,"locale-updated",function(){KN(xn)}),this.eventManager.o(this.localization,"locale-changed",function(){KN(xn)}),this.eventManager.o(this.g,"click",function(){gD(xn)}),this.eventManager.o(this.controls,"caststatuschanged",function(){M2(xn)})}as(HN,Cs);function gD(mn){var En;hs(function(xn){if(xn.g==1)return mn.h.na()?(mn.h.cg(),xn.D(0)):(Ts(xn,3),mn.g.disabled=!0,Qn(xn,mn.h.cast(),5));if(xn.g!=3)return mn.g.disabled=!1,ys(xn,0);En=_s(xn),mn.g.disabled=!1,En.code!=8004&&mn.controls.dispatchEvent(new vu("error",new Map().set("detail",En))),ms(xn)})}function M2(mn){var En=mn.h.uf()&&mn.controls.Za,xn=mn.h.na();Gs(mn.g,En),mn.i.textContent=xn?"cast_connected":"cast",En&&(mn.g.ariaPressed=xn?"true":"false"),R2(mn)}function R2(mn){mn.j.textContent=mn.h.na()?mn.h.Jd():mn.localization.resolve("OFF")}function KN(mn){mn.g.ariaLabel=mn.localization.resolve("CAST"),mn.l.textContent=mn.localization.resolve("CAST"),R2(mn)}Ys("shaka.ui.CastButton",HN);function WN(){}WN.prototype.create=function(mn,En){return new HN(mn,En)},A_("cast",new WN),fm("cast",new WN);function qN(mn,En){Cs.call(this,mn,En);var xn=this;this.g=kp(),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-fast-forward-button"),this.g.classList.add("shaka-tooltip-status"),this.g.setAttribute("shaka-status","1x"),this.g.textContent="fast_forward",this.parent.appendChild(this.g),YN(this),this.h=this.controls.i.fastForwardRates,this.eventManager.o(this.localization,"locale-updated",function(){YN(xn)}),this.eventManager.o(this.localization,"locale-changed",function(){YN(xn)}),this.eventManager.o(this.g,"click",function(){if(xn.video.duration){var An=xn.h.indexOf(xn.player.xb())+1;An=An!=xn.h.length?xn.h[An]:xn.h[0],xn.player.Ze(An),xn.g.setAttribute("shaka-status",An+"x")}})}as(qN,Cs);function YN(mn){mn.g.ariaLabel=mn.localization.resolve("FAST_FORWARD")}Ys("shaka.ui.FastForwardButton",qN);function N2(){}N2.prototype.create=function(mn,En){return new qN(mn,En)},fm("fast_forward",new N2);function XN(mn,En){Cs.call(this,mn,En);var xn=this;this.h=this.controls.B,this.g=kp(),this.g.classList.add("shaka-fullscreen-button"),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-tooltip"),QN(this),this.g.textContent="fullscreen",this.parent.appendChild(this.g),aM(this),this.eventManager.o(this.localization,"locale-updated",function(){aM(xn)}),this.eventManager.o(this.localization,"locale-changed",function(){aM(xn)}),this.eventManager.o(this.g,"click",function(){return hs(function(An){return Qn(An,xn.controls.Xe(),0)})}),this.eventManager.o(document,"fullscreenchange",function(){xn.g.textContent=xn.controls.ic()?"fullscreen_exit":"fullscreen",aM(xn)}),this.eventManager.o(this.h,"loadedmetadata",function(){QN(xn)}),this.eventManager.o(this.h,"loadeddata",function(){QN(xn)})}as(XN,Cs);function QN(mn){mn.controls.xd()?mn.g.classList.remove("shaka-hidden"):mn.g.classList.add("shaka-hidden")}function aM(mn){mn.g.ariaLabel=mn.localization.resolve(mn.controls.ic()?"EXIT_FULL_SCREEN":"FULL_SCREEN")}Ys("shaka.ui.FullscreenButton",XN);function D2(){}D2.prototype.create=function(mn,En){return new XN(mn,En)},fm("fullscreen",new D2);function oM(mn,En){Cs.call(this,mn,En);var xn=this;this.g=kp(),this.g.classList.add("shaka-loop-button"),this.g.classList.add("shaka-tooltip"),this.i=Au("i"),this.i.classList.add("material-icons-round"),this.i.textContent="repeat",this.g.appendChild(this.i),mn=Au("label"),mn.classList.add("shaka-overflow-button-label"),mn.classList.add("shaka-overflow-menu-only"),this.j=Au("span"),this.j.textContent=this.localization.resolve("LOOP"),mn.appendChild(this.j),this.l=Au("span"),this.l.classList.add("shaka-current-selection-span"),mn.appendChild(this.l),this.g.appendChild(mn),sM(this),this.parent.appendChild(this.g),this.eventManager.o(this.localization,"locale-updated",function(){sM(xn)}),this.eventManager.o(this.localization,"locale-changed",function(){sM(xn)}),this.eventManager.o(this.g,"click",function(){xn.video.loop=!xn.video.loop,xn.h.Aa(),xn.h.ha(1)}),this.m=this.video.loop,this.h=new ku(function(){xn.m!=xn.video.loop&&(sM(xn),xn.m=xn.video.loop)}),this.h.ha(1)}as(oM,Cs),oM.prototype.release=function(){this.h.stop(),this.h=null,Cs.prototype.release.call(this)};function sM(mn){mn.j.textContent=mn.localization.resolve("LOOP"),mn.l.textContent=mn.localization.resolve(mn.video.loop?"ON":"OFF"),mn.i.textContent=mn.video.loop?"repeat_on":"repeat",mn.g.ariaLabel=mn.localization.resolve(mn.video.loop?"EXIT_LOOP_MODE":"ENTER_LOOP_MODE")}Ys("shaka.ui.LoopButton",oM);function uM(){}uM.prototype.create=function(mn,En){return new oM(mn,En)},A_("loop",new uM),fm("loop",new uM),al("loop",new uM);function ZN(mn,En){Cs.call(this,mn,En);var xn=this;this.g=kp(),this.g.classList.add("shaka-mute-button"),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-tooltip"),this.parent.appendChild(this.g),PT(this),mA(this),this.eventManager.o(this.localization,"locale-updated",function(){PT(xn)}),this.eventManager.o(this.localization,"locale-changed",function(){PT(xn)}),this.eventManager.o(this.g,"click",function(){xn.ad&&xn.ad.isLinear()?xn.ad.setMuted(!xn.ad.isMuted()):xn.video.muted=!xn.video.muted}),this.eventManager.o(this.video,"volumechange",function(){PT(xn),mA(xn)}),this.eventManager.o(this.adManager,"ad-volume-changed",function(){PT(xn),mA(xn)}),this.eventManager.o(this.adManager,"ad-muted",function(){PT(xn),mA(xn)}),this.eventManager.o(this.adManager,"ad-stopped",function(){xn.ad=null,PT(xn),mA(xn)})}as(ZN,Cs);function PT(mn){var En=mn.ad?mn.ad.isMuted()?"UNMUTE":"MUTE":mn.video.muted?"UNMUTE":"MUTE";mn.g.ariaLabel=mn.localization.resolve(En)}function mA(mn){var En=mn.ad?mn.ad.isMuted()?"volume_off":"volume_up":mn.video.muted?"volume_off":"volume_up";mn.g.textContent=En}Ys("shaka.ui.MuteButton",ZN);function L2(){}L2.prototype.create=function(mn,En){return new ZN(mn,En)},fm("mute",new L2);function JN(mn,En){Cs.call(this,mn,En);var xn=this;this.l=this.controls.B,this.g=kp(),this.g.classList.add("shaka-pip-button"),this.g.classList.add("shaka-tooltip"),this.i=Au("i"),this.i.classList.add("material-icons-round"),this.i.textContent="picture_in_picture_alt",this.g.appendChild(this.i),mn=Au("label"),mn.classList.add("shaka-overflow-button-label"),mn.classList.add("shaka-overflow-menu-only"),this.j=Au("span"),this.j.textContent=this.localization.resolve("PICTURE_IN_PICTURE"),mn.appendChild(this.j),this.h=Au("span"),this.h.classList.add("shaka-current-selection-span"),mn.appendChild(this.h),this.g.appendChild(mn),e2(this),this.parent.appendChild(this.g),document.pictureInPictureEnabled&&!this.video.disablePictureInPicture||Gs(this.g,!1),this.eventManager.o(this.localization,"locale-updated",function(){e2(xn)}),this.eventManager.o(this.localization,"locale-changed",function(){e2(xn)}),this.eventManager.o(this.g,"click",function(){yD(xn)}),this.eventManager.o(this.l,"enterpictureinpicture",function(){xn.i.textContent="branding_watermark",xn.g.ariaLabel=xn.localization.resolve("EXIT_PICTURE_IN_PICTURE"),xn.h.textContent=xn.localization.resolve("ON")}),this.eventManager.o(this.l,"leavepictureinpicture",function(){xn.i.textContent="picture_in_picture_alt",xn.g.ariaLabel=xn.localization.resolve("ENTER_PICTURE_IN_PICTURE"),xn.h.textContent=xn.localization.resolve("OFF")}),this.eventManager.o(this.controls,"caststatuschanged",function(An){An.newStatus?document.pictureInPictureEnabled&&!xn.video.disablePictureInPicture&&Gs(xn.g,!1):document.pictureInPictureEnabled&&!xn.video.disablePictureInPicture&&Gs(xn.g,!0)}),this.eventManager.o(this.player,"trackschanged",function(){vD(xn)})}as(JN,Cs);function yD(mn){var En;hs(function(xn){if(xn.g==1)return Ts(xn,2),document.pictureInPictureElement?Qn(xn,document.exitPictureInPicture(),5):(document.fullscreenElement&&document.exitFullscreen(),Qn(xn,mn.video.requestPictureInPicture(),5));if(xn.g!=2)return ys(xn,0);En=_s(xn),mn.controls.dispatchEvent(new vu("error",new Map().set("detail",En))),ms(xn)})}function e2(mn){mn.j.textContent=mn.localization.resolve("PICTURE_IN_PICTURE"),mn.g.ariaLabel=mn.localization.resolve(document.pictureInPictureElement?"EXIT_PICTURE_IN_PICTURE":"ENTER_PICTURE_IN_PICTURE"),mn.h.textContent=mn.localization.resolve(document.pictureInPictureElement?"ON":"OFF")}function vD(mn){hs(function(En){return!document.pictureInPictureEnabled||mn.video.disablePictureInPicture?(Gs(mn.g,!1),En.D(0)):!mn.player||!mn.player.hc()?(Gs(mn.g,!0),En.D(0)):(Gs(mn.g,!1),document.pictureInPictureElement?Qn(En,document.exitPictureInPicture(),0):En.D(0))})}Ys("shaka.ui.PipButton",JN);function lM(){}lM.prototype.create=function(mn,En){return new JN(mn,En)},A_("picture_in_picture",new lM),fm("picture_in_picture",new lM),al("picture_in_picture",new lM);function t2(mn,En){I_.call(this,mn,En,"slow_motion_video");var xn=this;this.button.classList.add("shaka-playbackrate-button"),this.menu.classList.add("shaka-playback-rates"),this.button.classList.add("shaka-tooltip-status"),this.eventManager.o(this.localization,"locale-updated",function(){r2(xn)}),this.eventManager.o(this.localization,"locale-changed",function(){r2(xn)}),this.eventManager.o(this.player,"ratechange",function(){U2(xn,xn.player.xb())}),this.g=new Map(this.controls.i.playbackRates.map(function(An){return[An+"x",An]})),r2(this),_D(this),U2(this,this.player.xb())}as(t2,I_);function r2(mn){mn.backButton.ariaLabel=mn.localization.resolve("BACK"),mn.button.ariaLabel=mn.localization.resolve("PLAYBACK_RATE"),mn.nameSpan.textContent=mn.localization.resolve("PLAYBACK_RATE"),mn.backSpan.textContent=mn.localization.resolve("PLAYBACK_RATE")}function U2(mn,En){var xn=Zs(mn.menu,"material-icons-round shaka-chosen-item");if(xn){var An=xn.parentElement;An.removeAttribute("aria-selected"),An.getElementsByTagName("span")[0].classList.remove("shaka-chosen-item"),An.removeChild(xn)}(xn=Array.from(mn.menu.querySelectorAll("span")).find(function(Mn){return mn.g.get(Mn.textContent)==En}))&&(An=xn.parentElement,An.appendChild(Ws()),An.ariaSelected="true",xn.classList.add("shaka-chosen-item")),mn.currentSelection.textContent=En+"x",mn.button.setAttribute("shaka-status",En+"x")}function _D(mn){for(var En={},xn=Dn(mn.g.keys()),An=xn.next();!An.done;En={xc:En.xc},An=xn.next()){En.xc=An.value,An=kp();var Mn=Au("span");Mn.textContent=En.xc,An.appendChild(Mn),mn.eventManager.o(An,"click",function(Un){return function(){mn.video.playbackRate=mn.g.get(Un.xc),mn.video.defaultPlaybackRate=mn.g.get(Un.xc)}}(En)),mn.menu.appendChild(An)}Fs(mn.menu)}Ys("shaka.ui.PlaybackRateSelection",t2);function n2(){}n2.prototype.create=function(mn,En){return new t2(mn,En)},A_("playback_rate",new n2),fm("playback_rate",new n2);function i2(mn,En){Cs.call(this,mn,En);var xn=this;this.g=kp(),this.g.classList.add("shaka-current-time"),cM(this,"0:00"),this.parent.appendChild(this.g),this.eventManager.o(this.g,"click",function(){xn.player.U()&&(xn.video.currentTime=xn.player.Ja().end)}),this.eventManager.o(this.controls,"timeandseekrangeupdated",function(){var An=xn.controls.X,Mn=xn.controls.Hf(),Un=xn.video.duration,Bn=xn.player.Ja(),Gn=Bn.end-Bn.start;xn.player.U()?(Mn=Math.max(0,Math.floor(Bn.end-Mn)),Un=3600<=Gn,1<=Mn||An?(cM(xn,"- "+eu(Mn,Un)),xn.g.disabled=!1):(cM(xn,xn.localization.resolve("LIVE")),xn.g.disabled=!0)):(An=3600<=Un,Mn=eu(Mn,An),Un&&(Mn+=" / "+eu(Un,An)),cM(xn,Mn),xn.g.disabled=!0)}),this.eventManager.o(this.player,"trackschanged",function(){xn.player.U()&&(xn.g.ariaLabel=xn.localization.resolve("SKIP_TO_LIVE"))})}as(i2,Cs);function cM(mn,En){En!=mn.g.textContent&&(mn.g.textContent=En)}Ys("shaka.ui.PresentationTimeTracker",i2);function j2(){}j2.prototype.create=function(mn,En){return new i2(mn,En)},fm("time_and_duration",new j2);function a2(mn,En){I_.call(this,mn,En,"settings");var xn=this;this.button.classList.add("shaka-resolution-button"),this.button.classList.add("shaka-tooltip-status"),this.menu.classList.add("shaka-resolutions"),this.eventManager.o(this.localization,"locale-updated",function(){o2(xn)}),this.eventManager.o(this.localization,"locale-changed",function(){o2(xn)}),this.eventManager.o(this.player,"variantchanged",function(){gA(xn)}),this.eventManager.o(this.player,"trackschanged",function(){gA(xn)}),this.eventManager.o(this.player,"abrstatuschanged",function(){gA(xn)}),gA(this)}as(a2,I_);function gA(mn){var En=mn.player.Qa(),xn=En.find(function(Wn){return Wn.active});xn&&(En=En.filter(function(Wn){return Wn.language==xn.language&&Wn.channelsCount==xn.channelsCount})),En=En.filter(function(Wn,ts){return(mn.player.hc()?En.findIndex(function(os){return os.bandwidth==Wn.bandwidth}):En.findIndex(function(os){return os.height==Wn.height}))==ts}),mn.player.hc()?En.sort(function(Wn,ts){return ts.bandwidth-Wn.bandwidth}):En.sort(function(Wn,ts){return ts.height-Wn.height});var An=Ms(mn.menu);i0(mn.menu),mn.menu.appendChild(An),An=mn.player.getConfiguration().abr.enabled;for(var Mn={},Un=Dn(En),Bn=Un.next();!Bn.done;Mn={Yb:Mn.Yb},Bn=Un.next()){Mn.Yb=Bn.value,Bn=kp(),Bn.classList.add("explicit-resolution"),mn.eventManager.o(Bn,"click",function(Wn){return function(){var ts=Wn.Yb;mn.player.configure({abr:{enabled:!1}}),mn.player.Ke(ts,mn.controls.i.clearBufferOnQualityChange)}}(Mn));var Gn=Au("span");Gn.textContent=mn.player.hc()?Math.round(Mn.Yb.bandwidth/1e3)+" kbits/s":Mn.Yb.height+"p",Bn.appendChild(Gn),An||Mn.Yb!=xn||(Bn.ariaSelected="true",Bn.appendChild(Ws()),Gn.classList.add("shaka-chosen-item"),mn.currentSelection.textContent=Gn.textContent),mn.menu.appendChild(Bn)}Mn=kp(),Mn.classList.add("shaka-enable-abr-button"),mn.eventManager.o(Mn,"click",function(){mn.player.configure({abr:{enabled:!0}}),gA(mn)}),mn.g=Au("span"),mn.g.classList.add("shaka-auto-span"),mn.g.textContent=mn.localization.resolve("AUTO_QUALITY"),Mn.appendChild(mn.g),An&&(Mn.ariaSelected="true",Mn.appendChild(Ws()),mn.g.classList.add("shaka-chosen-item"),mn.currentSelection.textContent=mn.localization.resolve("AUTO_QUALITY")),mn.button.setAttribute("shaka-status",mn.currentSelection.textContent),mn.menu.appendChild(Mn),Fs(mn.menu),mn.controls.dispatchEvent(new vu("resolutionselectionupdated")),o2(mn)}function o2(mn){var En=mn.player.hc()?"QUALITY":"RESOLUTION";mn.button.ariaLabel=mn.localization.resolve(En),mn.backButton.ariaLabel=mn.localization.resolve(En),mn.backSpan.textContent=mn.localization.resolve(En),mn.nameSpan.textContent=mn.localization.resolve(En),mn.g.textContent=mn.localization.resolve("AUTO_QUALITY"),mn.player.getConfiguration().abr.enabled&&(mn.currentSelection.textContent=mn.localization.resolve("AUTO_QUALITY"))}Ys("shaka.ui.ResolutionSelection",a2);function s2(){}s2.prototype.create=function(mn,En){return new a2(mn,En)},A_("quality",new s2),fm("quality",new s2);function u2(mn,En){Cs.call(this,mn,En);var xn=this;this.g=kp(),this.g.classList.add("material-icons-round"),this.g.classList.add("shaka-rewind-button"),this.g.classList.add("shaka-tooltip-status"),this.g.setAttribute("shaka-status",this.localization.resolve("OFF")),this.g.textContent="fast_rewind",this.parent.appendChild(this.g),l2(this),this.h=this.controls.i.rewindRates,this.eventManager.o(this.localization,"locale-updated",function(){l2(xn)}),this.eventManager.o(this.localization,"locale-changed",function(){l2(xn)}),this.eventManager.o(this.g,"click",function(){if(xn.video.duration){var An=xn.h.indexOf(xn.player.xb())+1;An=An!=xn.h.length?xn.h[An]:xn.h[0],xn.player.Ze(An),xn.g.setAttribute("shaka-status",An+"x")}})}as(u2,Cs);function l2(mn){mn.g.ariaLabel=mn.localization.resolve("REWIND")}Ys("shaka.ui.RewindButton",u2);function F2(){}F2.prototype.create=function(mn,En){return new u2(mn,En)},fm("rewind",new F2);function c2(mn,En){Cs.call(this,mn,En);var xn=this;this.j=Au("div"),this.j.classList.add("shaka-skip-ad-container"),this.parent.appendChild(this.j),this.h=Au("div"),this.h.classList.add("shaka-skip-ad-counter"),Gs(this.h,!1),this.j.appendChild(this.h),this.g=kp(),this.g.classList.add("shaka-skip-ad-button"),this.g.disabled=!0,Gs(this.g,!1),this.g.classList.add("shaka-no-propagation"),this.j.appendChild(this.g),d2(this),this.i=new ku(function(){var An=Math.round(xn.ad.getTimeUntilSkippable());0<An?xn.h.textContent=An:(xn.i.stop(),Gs(xn.h,!1))}),this.eventManager.o(this.localization,"locale-updated",function(){d2(xn)}),this.eventManager.o(this.localization,"locale-changed",function(){d2(xn)}),this.eventManager.o(this.adManager,"ad-started",function(){B2(xn)}),this.eventManager.o(this.adManager,"ad-skip-state-changed",function(){xn.ad.canSkipNow()&&(xn.g.disabled=!1,xn.i.stop(),Gs(xn.h,!1))}),this.eventManager.o(this.adManager,"ad-stopped",function(){xn.i.stop(),xn.g.disabled=!0,Gs(xn.g,!1),Gs(xn.h,!1)}),this.eventManager.o(this.g,"click",function(){xn.ad.skip()}),this.ad&&B2(this)}as(c2,Cs),c2.prototype.release=function(){this.i.stop(),this.i=null,Cs.prototype.release.call(this)};function d2(mn){mn.g.textContent=mn.localization.resolve("SKIP_AD")}function B2(mn){mn.ad.isSkippable()&&(Gs(mn.g,!0),Gs(mn.h,!0),mn.h.textContent="",mn.i.Aa(),mn.i.ha(.5))}Ys("shaka.ui.SkipAdButton",c2);function yA(mn,En){bu.call(this,mn,En),this.button.classList.add("shaka-small-play-button"),this.button.classList.add("material-icons-round"),this.button.classList.add("shaka-tooltip"),this.h(),this.g()}as(yA,bu),yA.prototype.h=function(){this.button.textContent=this.video.ended?"replay":this.isPaused()?"play_arrow":"pause"},yA.prototype.g=function(){if(this.video.ended)this.button.ariaLabel=this.localization.resolve("REPLAY");else{var mn=this.isPaused()?"PLAY":"PAUSE";this.button.ariaLabel=this.localization.resolve(mn)}},Ys("shaka.ui.SmallPlayButton",yA);function V2(){}V2.prototype.create=function(mn,En){return new yA(mn,En)},fm("play_pause",new V2);function f2(mn,En){Cs.call(this,mn,En),mn=Au("div"),mn.classList.add("shaka-spacer"),mn.ariaHidden="true",this.parent.appendChild(mn)}as(f2,Cs),Ys("shaka.ui.Spacer",f2);function G2(){}G2.prototype.create=function(mn,En){return new f2(mn,En)},fm("spacer",new G2);function dM(mn,En){function xn(Wn){return eu(Gn.h[Wn],!1)+" (m)"}function An(Wn){return Math.round(Gn.h[Wn]/1e3)+" (kbits/s)"}function Mn(Wn){return Gn.h[Wn].toFixed(2)+" (s)"}function Un(Wn){return Gn.h[Wn]+" (frames)"}function Bn(Wn){return Gn.h[Wn]+" (px)"}Cs.call(this,mn,En);var Gn=this;this.i=kp(),this.i.classList.add("shaka-statistics-button"),this.j=Au("i"),this.j.classList.add("material-icons-round"),this.j.textContent="insert_chart_outlined",this.i.appendChild(this.j),mn=Au("label"),mn.classList.add("shaka-overflow-button-label"),this.s=Au("span"),mn.appendChild(this.s),this.m=Au("span"),this.m.classList.add("shaka-current-selection-span"),mn.appendChild(this.m),this.i.appendChild(mn),this.parent.appendChild(this.i),this.g=Au("div"),this.g.classList.add("shaka-no-propagation"),this.g.classList.add("shaka-show-controls-on-mouse-over"),this.g.classList.add("shaka-statistics-container"),this.g.classList.add("shaka-hidden"),this.controls.g.appendChild(this.g),this.F=[],this.G=["stateHistory","switchHistory"],this.h=this.player.getStats(),this.B={},this.C={width:Bn,height:Bn,completionPercent:function(Wn){return Gn.h[Wn]+" (%)"},bufferingTime:Mn,drmTimeSeconds:Mn,licenseTime:Mn,liveLatency:Mn,loadLatency:Mn,manifestTimeSeconds:Mn,estimatedBandwidth:An,streamBandwidth:An,maxSegmentDuration:xn,pauseTime:xn,playTime:xn,corruptedFrames:Un,decodedFrames:Un,droppedFrames:Un,stallsDetected:function(Wn){return Gn.h[Wn]+" (stalls)"},gapsJumped:function(Wn){return Gn.h[Wn]+" (gaps)"}},this.l=new ku(function(){Gn.h=Gn.player.getStats();for(var Wn=Dn(Gn.F),ts=Wn.next();!ts.done;ts=Wn.next())ts=ts.value,Gn.B[ts].textContent=Gn.C[ts](ts)}),fM(this),ED(this),this.eventManager.o(this.localization,"locale-updated",function(){fM(Gn)}),this.eventManager.o(this.localization,"locale-changed",function(){fM(Gn)}),this.eventManager.o(this.i,"click",function(){Gs(Gn.parent,!1),Gn.g.classList.contains("shaka-hidden")?(Gn.j.textContent="insert_chart",Gn.l.ha(.1),Gs(Gn.g,!0)):(Gn.j.textContent="insert_chart_outlined",Gn.l.stop(),Gs(Gn.g,!1)),fM(Gn)})}as(dM,Cs);function fM(mn){mn.s.textContent=mn.localization.resolve("STATISTICS"),mn.i.ariaLabel=mn.localization.resolve("STATISTICS"),mn.m.textContent=mn.localization.resolve(mn.g.classList.contains("shaka-hidden")?"OFF":"ON")}function ED(mn){for(var En=Dn(mn.controls.i.statisticsList),xn=En.next();!xn.done;xn=En.next())if(xn=xn.value,xn in mn.h&&!mn.G.includes(xn)){var An=mn.g,Mn=An.appendChild,Un=mn,Bn=Au("div"),Gn=Au("label");Gn.textContent=xn+":",Bn.appendChild(Gn),Gn=Au("span"),Gn.textContent=Un.C[xn](xn),Bn.appendChild(Gn),Un.B[xn]=Gn,Mn.call(An,Bn),mn.F.push(xn)}else Tu("Unrecognized statistic element:",xn)}dM.prototype.release=function(){this.l.stop(),this.l=null,Cs.prototype.release.call(this)},Ys("shaka.ui.StatisticsButton",dM);function p2(){}p2.prototype.create=function(mn,En){return new dM(mn,En)},A_("statistics",new p2),al("statistics",new p2);function h2(mn,En){I_.call(this,mn,En,"closed_caption");var xn=this;this.button.classList.add("shaka-caption-button"),this.button.classList.add("shaka-tooltip-status"),this.menu.classList.add("shaka-text-languages"),this.player&&this.player.Nb()?this.button.ariaPressed="true":this.button.ariaPressed="false",SD(this),this.eventManager.o(this.localization,"locale-updated",function(){m2(xn),OT(xn)}),this.eventManager.o(this.localization,"locale-changed",function(){m2(xn),OT(xn)}),this.eventManager.o(this.player,"texttrackvisibility",function(){z2(xn),OT(xn)}),this.eventManager.o(this.player,"textchanged",function(){OT(xn)}),this.eventManager.o(this.player,"trackschanged",function(){H2(xn)}),z2(this),m2(this),OT(this),H2(this)}as(h2,I_);function SD(mn){var En=kp();En.ariaSelected="true",mn.menu.appendChild(En),En.appendChild(Ws()),mn.g=Au("span"),mn.g.classList.add("shaka-auto-span"),En.appendChild(mn.g)}function z2(mn){mn.player.Nb()?(mn.icon.textContent="closed_caption",mn.button.ariaPressed="true"):(mn.icon.textContent="closed_caption_disabled",mn.button.ariaPressed="false"),mn.controls.dispatchEvent(new vu("captionselectionupdated"))}function OT(mn){var En=mn.player.yb();O2(En,mn.menu,function(xn){return TD(mn,xn)},mn.player.Nb(),mn.currentSelection,mn.localization,mn.controls.i.trackLabelFormat),En=kp(),En.classList.add("shaka-turn-captions-off-button"),mn.eventManager.o(En,"click",function(){mn.player.Se(!1),OT(mn)}),En.appendChild(mn.g),mn.menu.appendChild(En),mn.player.Nb()||(En.ariaSelected="true",En.appendChild(Ws()),mn.g.classList.add("shaka-chosen-item"),mn.currentSelection.textContent=mn.localization.resolve("OFF")),mn.button.setAttribute("shaka-status",mn.currentSelection.textContent),Fs(mn.menu),mn.controls.dispatchEvent(new vu("captionselectionupdated"))}function TD(mn,En){return hs(function(xn){return mn.player.Je(En),Qn(xn,mn.player.Se(!0),0)})}function m2(mn){mn.button.ariaLabel=mn.localization.resolve("CAPTIONS"),mn.backButton.ariaLabel=mn.localization.resolve("BACK"),mn.nameSpan.textContent=mn.localization.resolve("CAPTIONS"),mn.backSpan.textContent=mn.localization.resolve("CAPTIONS"),mn.g.textContent=mn.localization.resolve("OFF")}function H2(mn){var En=0<mn.player.yb().length;Gs(mn.button,En),OT(mn)}Ys("shaka.ui.TextSelection",h2);function g2(){}g2.prototype.create=function(mn,En){return new h2(mn,En)},A_("captions",new g2),fm("captions",new g2);function pM(mn,En){ul.call(this,mn,En,["shaka-volume-bar-container"],["shaka-volume-bar"]);var xn=this;this.h=this.controls.i,this.eventManager.o(this.video,"volumechange",function(){return y2(xn)}),this.eventManager.o(this.adManager,"ad-volume-changed",function(){return K2(xn)}),this.eventManager.o(this.adManager,"ad-muted",function(){return K2(xn)}),this.eventManager.o(this.adManager,"ad-stopped",function(){return y2(xn)}),this.eventManager.o(this.localization,"locale-updated",function(){return v2(xn)}),this.eventManager.o(this.localization,"locale-changed",function(){return v2(xn)}),y2(this),v2(this),this.ad&&this.onChange()}as(pM,ul),pM.prototype.onChange=function(){this.ad&&this.ad.isLinear()?this.ad.setVolume(this.getValue()):(this.video.volume=this.getValue(),this.video.muted=this.video.volume==0)};function y2(mn){mn.video.muted?mn.setValue(0):mn.setValue(mn.video.volume),W2(mn)}function K2(mn){var En=mn.ad.getVolume();mn.setValue(En),W2(mn)}function W2(mn){var En=mn.h.volumeBarColors,xn=["to right"];xn.push(En.level+100*mn.getValue()+"%"),xn.push(En.base+100*mn.getValue()+"%"),xn.push(En.base+"100%"),mn.container.style.background="linear-gradient("+xn.join(",")+")"}function v2(mn){mn.bar.ariaLabel=mn.localization.resolve("VOLUME")}Ys("shaka.ui.VolumeBar",pM);function q2(){}q2.prototype.create=function(mn,En){return new pM(mn,En)},fm("volume",new q2)}).call(cn,ln,ln,void 0);for(var dn in cn.shaka)sn[dn]=cn.shaka[dn]})()})(shakaPlayer_ui);const commonShaka=getDefaultExportFromCjs(shakaPlayer_ui);var shakaPlayer_ui_debug={};/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/(function(exports){(function(){var innerGlobal=typeof window<"u"?window:commonjsGlobal$1,exportTo={};(function(window,global,module){var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.arrayIteratorImpl=function(sn){var ln=0;return function(){return ln<sn.length?{done:!1,value:sn[ln++]}:{done:!0}}},$jscomp.arrayIterator=function(sn){return{next:$jscomp.arrayIteratorImpl(sn)}},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.ISOLATE_POLYFILLS=!1,$jscomp.FORCE_POLYFILL_PROMISE=!1,$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(sn,ln,cn){return sn==Array.prototype||sn==Object.prototype||(sn[ln]=cn.value),sn},$jscomp.getGlobal=function(sn){sn=[typeof globalThis=="object"&&globalThis,sn,typeof window=="object"&&window,typeof self=="object"&&self,typeof global=="object"&&global];for(var ln=0;ln<sn.length;++ln){var cn=sn[ln];if(cn&&cn.Math==Math)return cn}throw Error("Cannot find global object")},$jscomp.global=$jscomp.getGlobal(this),$jscomp.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE,$jscomp.polyfills={},$jscomp.propertyToPolyfillSymbol={},$jscomp.POLYFILL_PREFIX="$jscp$",$jscomp.polyfill=function(sn,ln,cn,dn){ln&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(sn,ln,cn,dn):$jscomp.polyfillUnisolated(sn,ln,cn,dn))},$jscomp.polyfillUnisolated=function(sn,ln,cn,dn){for(cn=$jscomp.global,sn=sn.split("."),dn=0;dn<sn.length-1;dn++){var pn=sn[dn];if(!(pn in cn))return;cn=cn[pn]}sn=sn[sn.length-1],dn=cn[sn],ln=ln(dn),ln!=dn&&ln!=null&&$jscomp.defineProperty(cn,sn,{configurable:!0,writable:!0,value:ln})},$jscomp.polyfillIsolated=function(sn,ln,cn,dn){var pn=sn.split(".");sn=pn.length===1,dn=pn[0],dn=!sn&&dn in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var vn=0;vn<pn.length-1;vn++){var kn=pn[vn];if(!(kn in dn))return;dn=dn[kn]}pn=pn[pn.length-1],cn=$jscomp.IS_SYMBOL_NATIVE&&cn==="es6"?dn[pn]:null,ln=ln(cn),ln!=null&&(sn?$jscomp.defineProperty($jscomp.polyfills,pn,{configurable:!0,writable:!0,value:ln}):ln!==cn&&($jscomp.propertyToPolyfillSymbol[pn]===void 0&&(cn=1e9*Math.random()>>>0,$jscomp.propertyToPolyfillSymbol[pn]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(pn):$jscomp.POLYFILL_PREFIX+cn+"$"+pn),$jscomp.defineProperty(dn,$jscomp.propertyToPolyfillSymbol[pn],{configurable:!0,writable:!0,value:ln})))},$jscomp.initSymbol=function(){},$jscomp.polyfill("Symbol",function(sn){if(sn)return sn;var ln=function(vn,kn){this.$jscomp$symbol$id_=vn,$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:kn})};ln.prototype.toString=function(){return this.$jscomp$symbol$id_};var cn="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",dn=0,pn=function(vn){if(this instanceof pn)throw new TypeError("Symbol is not a constructor");return new ln(cn+(vn||"")+"_"+dn++,vn)};return pn},"es6","es3"),$jscomp.polyfill("Symbol.iterator",function(sn){if(sn)return sn;sn=Symbol("Symbol.iterator");for(var ln="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),cn=0;cn<ln.length;cn++){var dn=$jscomp.global[ln[cn]];typeof dn=="function"&&typeof dn.prototype[sn]!="function"&&$jscomp.defineProperty(dn.prototype,sn,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return sn},"es6","es3"),$jscomp.iteratorPrototype=function(sn){return sn={next:sn},sn[Symbol.iterator]=function(){return this},sn},$jscomp.createTemplateTagFirstArg=function(sn){return sn.raw=sn},$jscomp.createTemplateTagFirstArgWithRaw=function(sn,ln){return sn.raw=ln,sn},$jscomp.makeIterator=function(sn){var ln=typeof Symbol<"u"&&Symbol.iterator&&sn[Symbol.iterator];return ln?ln.call(sn):$jscomp.arrayIterator(sn)},$jscomp.arrayFromIterator=function(sn){for(var ln,cn=[];!(ln=sn.next()).done;)cn.push(ln.value);return cn},$jscomp.arrayFromIterable=function(sn){return sn instanceof Array?sn:$jscomp.arrayFromIterator($jscomp.makeIterator(sn))},$jscomp.objectCreate=$jscomp.ASSUME_ES5||typeof Object.create=="function"?Object.create:function(sn){var ln=function(){};return ln.prototype=sn,new ln},$jscomp.getConstructImplementation=function(){function sn(){function cn(){}return Reflect.construct(cn,[],function(){}),new cn instanceof cn}if($jscomp.TRUST_ES6_POLYFILLS&&typeof Reflect<"u"&&Reflect.construct){if(sn())return Reflect.construct;var ln=Reflect.construct;return function(cn,dn,pn){return cn=ln(cn,dn),pn&&Reflect.setPrototypeOf(cn,pn.prototype),cn}}return function(cn,dn,pn){return pn===void 0&&(pn=cn),pn=$jscomp.objectCreate(pn.prototype||Object.prototype),Function.prototype.apply.call(cn,pn,dn)||pn}},$jscomp.construct={valueOf:$jscomp.getConstructImplementation}.valueOf(),$jscomp.underscoreProtoCanBeSet=function(){var sn={a:!0},ln={};try{return ln.__proto__=sn,ln.a}catch{}return!1},$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(sn,ln){if(sn.__proto__=ln,sn.__proto__!==ln)throw new TypeError(sn+" is not extensible");return sn}:null,$jscomp.inherits=function(sn,ln){if(sn.prototype=$jscomp.objectCreate(ln.prototype),sn.prototype.constructor=sn,$jscomp.setPrototypeOf){var cn=$jscomp.setPrototypeOf;cn(sn,ln)}else for(cn in ln)if(cn!="prototype")if(Object.defineProperties){var dn=Object.getOwnPropertyDescriptor(ln,cn);dn&&Object.defineProperty(sn,cn,dn)}else sn[cn]=ln[cn];sn.superClass_=ln.prototype},$jscomp.generator={},$jscomp.generator.ensureIteratorResultIsObject_=function(sn){if(!(sn instanceof Object))throw new TypeError("Iterator result "+sn+" is not an object")},$jscomp.generator.Context=function(){this.isRunning_=!1,this.yieldAllIterator_=null,this.yieldResult=void 0,this.nextAddress=1,this.finallyAddress_=this.catchAddress_=0,this.finallyContexts_=this.abruptCompletion_=null},$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0},$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1},$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_},$jscomp.generator.Context.prototype.next_=function(sn){this.yieldResult=sn},$jscomp.generator.Context.prototype.throw_=function(sn){this.abruptCompletion_={exception:sn,isException:!0},this.jumpToErrorHandler_()},$jscomp.generator.Context.prototype.return=function(sn){this.abruptCompletion_={return:sn},this.nextAddress=this.finallyAddress_},$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(sn){this.abruptCompletion_={jumpTo:sn},this.nextAddress=this.finallyAddress_},$jscomp.generator.Context.prototype.yield=function(sn,ln){return this.nextAddress=ln,{value:sn}},$jscomp.generator.Context.prototype.yieldAll=function(sn,ln){sn=$jscomp.makeIterator(sn);var cn=sn.next();if($jscomp.generator.ensureIteratorResultIsObject_(cn),cn.done)this.yieldResult=cn.value,this.nextAddress=ln;else return this.yieldAllIterator_=sn,this.yield(cn.value,ln)},$jscomp.generator.Context.prototype.jumpTo=function(sn){this.nextAddress=sn},$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0},$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(sn,ln){this.catchAddress_=sn,ln!=null&&(this.finallyAddress_=ln)},$jscomp.generator.Context.prototype.setFinallyBlock=function(sn){this.catchAddress_=0,this.finallyAddress_=sn||0},$jscomp.generator.Context.prototype.leaveTryBlock=function(sn,ln){this.nextAddress=sn,this.catchAddress_=ln||0},$jscomp.generator.Context.prototype.enterCatchBlock=function(sn){return this.catchAddress_=sn||0,sn=this.abruptCompletion_.exception,this.abruptCompletion_=null,sn},$jscomp.generator.Context.prototype.enterFinallyBlock=function(sn,ln,cn){cn?this.finallyContexts_[cn]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_],this.catchAddress_=sn||0,this.finallyAddress_=ln||0},$jscomp.generator.Context.prototype.leaveFinallyBlock=function(sn,ln){if(ln=this.finallyContexts_.splice(ln||0)[0],ln=this.abruptCompletion_=this.abruptCompletion_||ln){if(ln.isException)return this.jumpToErrorHandler_();ln.jumpTo!=null&&this.finallyAddress_<ln.jumpTo?(this.nextAddress=ln.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=sn},$jscomp.generator.Context.prototype.forIn=function(sn){return new $jscomp.generator.Context.PropertyIterator(sn)},$jscomp.generator.Context.PropertyIterator=function(sn){this.object_=sn,this.properties_=[];for(var ln in sn)this.properties_.push(ln);this.properties_.reverse()},$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var sn=this.properties_.pop();if(sn in this.object_)return sn}return null},$jscomp.generator.Engine_=function(sn){this.context_=new $jscomp.generator.Context,this.program_=sn},$jscomp.generator.Engine_.prototype.next_=function(sn){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.next,sn,this.context_.next_):(this.context_.next_(sn),this.nextStep_())},$jscomp.generator.Engine_.prototype.return_=function(sn){this.context_.start_();var ln=this.context_.yieldAllIterator_;return ln?this.yieldAllStep_("return"in ln?ln.return:function(cn){return{value:cn,done:!0}},sn,this.context_.return):(this.context_.return(sn),this.nextStep_())},$jscomp.generator.Engine_.prototype.throw_=function(sn){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.throw,sn,this.context_.next_):(this.context_.throw_(sn),this.nextStep_())},$jscomp.generator.Engine_.prototype.yieldAllStep_=function(sn,ln,cn){try{var dn=sn.call(this.context_.yieldAllIterator_,ln);if($jscomp.generator.ensureIteratorResultIsObject_(dn),!dn.done)return this.context_.stop_(),dn;var pn=dn.value}catch(vn){return this.context_.yieldAllIterator_=null,this.context_.throw_(vn),this.nextStep_()}return this.context_.yieldAllIterator_=null,cn.call(this.context_,pn),this.nextStep_()},$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var sn=this.program_(this.context_);if(sn)return this.context_.stop_(),{value:sn.value,done:!1}}catch(ln){this.context_.yieldResult=void 0,this.context_.throw_(ln)}if(this.context_.stop_(),this.context_.abruptCompletion_){if(sn=this.context_.abruptCompletion_,this.context_.abruptCompletion_=null,sn.isException)throw sn.exception;return{value:sn.return,done:!0}}return{value:void 0,done:!0}},$jscomp.generator.Generator_=function(sn){this.next=function(ln){return sn.next_(ln)},this.throw=function(ln){return sn.throw_(ln)},this.return=function(ln){return sn.return_(ln)},this[Symbol.iterator]=function(){return this}},$jscomp.generator.createGenerator=function(sn,ln){return ln=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(ln)),$jscomp.setPrototypeOf&&sn.prototype&&$jscomp.setPrototypeOf(ln,sn.prototype),ln},$jscomp.asyncExecutePromiseGenerator=function(sn){function ln(dn){return sn.next(dn)}function cn(dn){return sn.throw(dn)}return new Promise(function(dn,pn){function vn(kn){kn.done?dn(kn.value):Promise.resolve(kn.value).then(ln,cn).then(vn,pn)}vn(sn.next())})},$jscomp.asyncExecutePromiseGeneratorFunction=function(sn){return $jscomp.asyncExecutePromiseGenerator(sn())},$jscomp.asyncExecutePromiseGeneratorProgram=function(sn){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(sn)))},$jscomp.getRestArguments=function(){for(var sn=Number(this),ln=[],cn=sn;cn<arguments.length;cn++)ln[cn-sn]=arguments[cn];return ln},$jscomp.polyfill("Reflect",function(sn){return sn||{}},"es6","es3"),$jscomp.polyfill("Reflect.construct",function(sn){return $jscomp.construct},"es6","es3"),$jscomp.polyfill("Reflect.setPrototypeOf",function(sn){if(sn)return sn;if($jscomp.setPrototypeOf){var ln=$jscomp.setPrototypeOf;return function(cn,dn){try{return ln(cn,dn),!0}catch{return!1}}}return null},"es6","es5"),$jscomp.polyfill("Promise",function(sn){function ln(){this.batch_=null}function cn(kn){return kn instanceof pn?kn:new pn(function(Sn,wn){Sn(kn)})}if(sn&&(!($jscomp.FORCE_POLYFILL_PROMISE||$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION&&typeof $jscomp.global.PromiseRejectionEvent>"u")||!$jscomp.global.Promise||$jscomp.global.Promise.toString().indexOf("[native code]")===-1))return sn;ln.prototype.asyncExecute=function(kn){if(this.batch_==null){this.batch_=[];var Sn=this;this.asyncExecuteFunction(function(){Sn.executeBatch_()})}this.batch_.push(kn)};var dn=$jscomp.global.setTimeout;ln.prototype.asyncExecuteFunction=function(kn){dn(kn,0)},ln.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var kn=this.batch_;this.batch_=[];for(var Sn=0;Sn<kn.length;++Sn){var wn=kn[Sn];kn[Sn]=null;try{wn()}catch(Pn){this.asyncThrow_(Pn)}}}this.batch_=null},ln.prototype.asyncThrow_=function(kn){this.asyncExecuteFunction(function(){throw kn})};var pn=function(kn){this.state_=0,this.result_=void 0,this.onSettledCallbacks_=[],this.isRejectionHandled_=!1;var Sn=this.createResolveAndReject_();try{kn(Sn.resolve,Sn.reject)}catch(wn){Sn.reject(wn)}};pn.prototype.createResolveAndReject_=function(){function kn(Pn){return function(Nn){wn||(wn=!0,Pn.call(Sn,Nn))}}var Sn=this,wn=!1;return{resolve:kn(this.resolveTo_),reject:kn(this.reject_)}},pn.prototype.resolveTo_=function(kn){if(kn===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(kn instanceof pn)this.settleSameAsPromise_(kn);else{e:switch(typeof kn){case"object":var Sn=kn!=null;break e;case"function":Sn=!0;break e;default:Sn=!1}Sn?this.resolveToNonPromiseObj_(kn):this.fulfill_(kn)}},pn.prototype.resolveToNonPromiseObj_=function(kn){var Sn=void 0;try{Sn=kn.then}catch(wn){this.reject_(wn);return}typeof Sn=="function"?this.settleSameAsThenable_(Sn,kn):this.fulfill_(kn)},pn.prototype.reject_=function(kn){this.settle_(2,kn)},pn.prototype.fulfill_=function(kn){this.settle_(1,kn)},pn.prototype.settle_=function(kn,Sn){if(this.state_!=0)throw Error("Cannot settle("+kn+", "+Sn+"): Promise already settled in state"+this.state_);this.state_=kn,this.result_=Sn,this.state_===2&&this.scheduleUnhandledRejectionCheck_(),this.executeOnSettledCallbacks_()},pn.prototype.scheduleUnhandledRejectionCheck_=function(){var kn=this;dn(function(){if(kn.notifyUnhandledRejection_()){var Sn=$jscomp.global.console;typeof Sn<"u"&&Sn.error(kn.result_)}},1)},pn.prototype.notifyUnhandledRejection_=function(){if(this.isRejectionHandled_)return!1;var kn=$jscomp.global.CustomEvent,Sn=$jscomp.global.Event,wn=$jscomp.global.dispatchEvent;return typeof wn>"u"?!0:(typeof kn=="function"?kn=new kn("unhandledrejection",{cancelable:!0}):typeof Sn=="function"?kn=new Sn("unhandledrejection",{cancelable:!0}):(kn=$jscomp.global.document.createEvent("CustomEvent"),kn.initCustomEvent("unhandledrejection",!1,!0,kn)),kn.promise=this,kn.reason=this.result_,wn(kn))},pn.prototype.executeOnSettledCallbacks_=function(){if(this.onSettledCallbacks_!=null){for(var kn=0;kn<this.onSettledCallbacks_.length;++kn)vn.asyncExecute(this.onSettledCallbacks_[kn]);this.onSettledCallbacks_=null}};var vn=new ln;return pn.prototype.settleSameAsPromise_=function(kn){var Sn=this.createResolveAndReject_();kn.callWhenSettled_(Sn.resolve,Sn.reject)},pn.prototype.settleSameAsThenable_=function(kn,Sn){var wn=this.createResolveAndReject_();try{kn.call(Sn,wn.resolve,wn.reject)}catch(Pn){wn.reject(Pn)}},pn.prototype.then=function(kn,Sn){function wn(Fn,zn){return typeof Fn=="function"?function(Dn){try{Pn(Fn(Dn))}catch(Kn){Nn(Kn)}}:zn}var Pn,Nn,Ln=new pn(function(Fn,zn){Pn=Fn,Nn=zn});return this.callWhenSettled_(wn(kn,Pn),wn(Sn,Nn)),Ln},pn.prototype.catch=function(kn){return this.then(void 0,kn)},pn.prototype.callWhenSettled_=function(kn,Sn){function wn(){switch(Pn.state_){case 1:kn(Pn.result_);break;case 2:Sn(Pn.result_);break;default:throw Error("Unexpected state: "+Pn.state_)}}var Pn=this;this.onSettledCallbacks_==null?vn.asyncExecute(wn):this.onSettledCallbacks_.push(wn),this.isRejectionHandled_=!0},pn.resolve=cn,pn.reject=function(kn){return new pn(function(Sn,wn){wn(kn)})},pn.race=function(kn){return new pn(function(Sn,wn){for(var Pn=$jscomp.makeIterator(kn),Nn=Pn.next();!Nn.done;Nn=Pn.next())cn(Nn.value).callWhenSettled_(Sn,wn)})},pn.all=function(kn){var Sn=$jscomp.makeIterator(kn),wn=Sn.next();return wn.done?cn([]):new pn(function(Pn,Nn){function Ln(Dn){return function(Kn){Fn[Dn]=Kn,zn--,zn==0&&Pn(Fn)}}var Fn=[],zn=0;do Fn.push(void 0),zn++,cn(wn.value).callWhenSettled_(Ln(Fn.length-1),Nn),wn=Sn.next();while(!wn.done)})},pn},"es6","es3"),$jscomp.checkEs6ConformanceViaProxy=function(){try{var sn={},ln=Object.create(new $jscomp.global.Proxy(sn,{get:function(cn,dn,pn){return cn==sn&&dn=="q"&&pn==ln}}));return ln.q===!0}catch{return!1}},$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1,$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy(),$jscomp.owns=function(sn,ln){return Object.prototype.hasOwnProperty.call(sn,ln)},$jscomp.polyfill("WeakMap",function(sn){function ln(){if(!sn||!Object.seal)return!1;try{var Pn=Object.seal({}),Nn=Object.seal({}),Ln=new sn([[Pn,2],[Nn,3]]);return Ln.get(Pn)!=2||Ln.get(Nn)!=3?!1:(Ln.delete(Pn),Ln.set(Nn,4),!Ln.has(Pn)&&Ln.get(Nn)==4)}catch{return!1}}function cn(){}function dn(Pn){var Nn=typeof Pn;return Nn==="object"&&Pn!==null||Nn==="function"}function pn(Pn){if(!$jscomp.owns(Pn,kn)){var Nn=new cn;$jscomp.defineProperty(Pn,kn,{value:Nn})}}function vn(Pn){if(!$jscomp.ISOLATE_POLYFILLS){var Nn=Object[Pn];Nn&&(Object[Pn]=function(Ln){return Ln instanceof cn?Ln:(Object.isExtensible(Ln)&&pn(Ln),Nn(Ln))})}}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(sn&&$jscomp.ES6_CONFORMANCE)return sn}else if(ln())return sn;var kn="$jscomp_hidden_"+Math.random();vn("freeze"),vn("preventExtensions"),vn("seal");var Sn=0,wn=function(Pn){if(this.id_=(Sn+=Math.random()+1).toString(),Pn){Pn=$jscomp.makeIterator(Pn);for(var Nn;!(Nn=Pn.next()).done;)Nn=Nn.value,this.set(Nn[0],Nn[1])}};return wn.prototype.set=function(Pn,Nn){if(!dn(Pn))throw Error("Invalid WeakMap key");if(pn(Pn),!$jscomp.owns(Pn,kn))throw Error("WeakMap key fail: "+Pn);return Pn[kn][this.id_]=Nn,this},wn.prototype.get=function(Pn){return dn(Pn)&&$jscomp.owns(Pn,kn)?Pn[kn][this.id_]:void 0},wn.prototype.has=function(Pn){return dn(Pn)&&$jscomp.owns(Pn,kn)&&$jscomp.owns(Pn[kn],this.id_)},wn.prototype.delete=function(Pn){return dn(Pn)&&$jscomp.owns(Pn,kn)&&$jscomp.owns(Pn[kn],this.id_)?delete Pn[kn][this.id_]:!1},wn},"es6","es3"),$jscomp.MapEntry=function(){},$jscomp.polyfill("Map",function(sn){function ln(){if($jscomp.ASSUME_NO_NATIVE_MAP||!sn||typeof sn!="function"||!sn.prototype.entries||typeof Object.seal!="function")return!1;try{var wn=Object.seal({x:4}),Pn=new sn($jscomp.makeIterator([[wn,"s"]]));if(Pn.get(wn)!="s"||Pn.size!=1||Pn.get({x:4})||Pn.set({x:4},"t")!=Pn||Pn.size!=2)return!1;var Nn=Pn.entries(),Ln=Nn.next();return Ln.done||Ln.value[0]!=wn||Ln.value[1]!="s"?!1:(Ln=Nn.next(),!(Ln.done||Ln.value[0].x!=4||Ln.value[1]!="t"||!Nn.next().done))}catch{return!1}}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(sn&&$jscomp.ES6_CONFORMANCE)return sn}else if(ln())return sn;var cn=new WeakMap,dn=function(wn){if(this.data_={},this.head_=kn(),this.size=0,wn){wn=$jscomp.makeIterator(wn);for(var Pn;!(Pn=wn.next()).done;)Pn=Pn.value,this.set(Pn[0],Pn[1])}};dn.prototype.set=function(wn,Pn){wn=wn===0?0:wn;var Nn=pn(this,wn);return Nn.list||(Nn.list=this.data_[Nn.id]=[]),Nn.entry?Nn.entry.value=Pn:(Nn.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:wn,value:Pn},Nn.list.push(Nn.entry),this.head_.previous.next=Nn.entry,this.head_.previous=Nn.entry,this.size++),this},dn.prototype.delete=function(wn){return wn=pn(this,wn),wn.entry&&wn.list?(wn.list.splice(wn.index,1),wn.list.length||delete this.data_[wn.id],wn.entry.previous.next=wn.entry.next,wn.entry.next.previous=wn.entry.previous,wn.entry.head=null,this.size--,!0):!1},dn.prototype.clear=function(){this.data_={},this.head_=this.head_.previous=kn(),this.size=0},dn.prototype.has=function(wn){return!!pn(this,wn).entry},dn.prototype.get=function(wn){return(wn=pn(this,wn).entry)&&wn.value},dn.prototype.entries=function(){return vn(this,function(wn){return[wn.key,wn.value]})},dn.prototype.keys=function(){return vn(this,function(wn){return wn.key})},dn.prototype.values=function(){return vn(this,function(wn){return wn.value})},dn.prototype.forEach=function(wn,Pn){for(var Nn=this.entries(),Ln;!(Ln=Nn.next()).done;)Ln=Ln.value,wn.call(Pn,Ln[1],Ln[0],this)},dn.prototype[Symbol.iterator]=dn.prototype.entries;var pn=function(wn,Pn){var Nn=Pn&&typeof Pn;Nn=="object"||Nn=="function"?cn.has(Pn)?Nn=cn.get(Pn):(Nn=""+ ++Sn,cn.set(Pn,Nn)):Nn="p_"+Pn;var Ln=wn.data_[Nn];if(Ln&&$jscomp.owns(wn.data_,Nn))for(wn=0;wn<Ln.length;wn++){var Fn=Ln[wn];if(Pn!==Pn&&Fn.key!==Fn.key||Pn===Fn.key)return{id:Nn,list:Ln,index:wn,entry:Fn}}return{id:Nn,list:Ln,index:-1,entry:void 0}},vn=function(wn,Pn){var Nn=wn.head_;return $jscomp.iteratorPrototype(function(){if(Nn){for(;Nn.head!=wn.head_;)Nn=Nn.previous;for(;Nn.next!=Nn.head;)return Nn=Nn.next,{done:!1,value:Pn(Nn)};Nn=null}return{done:!0,value:void 0}})},kn=function(){var wn={};return wn.previous=wn.next=wn.head=wn},Sn=0;return dn},"es6","es3"),$jscomp.iteratorFromArray=function(sn,ln){sn instanceof String&&(sn+="");var cn=0,dn=!1,pn={next:function(){if(!dn&&cn<sn.length){var vn=cn++;return{value:ln(vn,sn[vn]),done:!1}}return dn=!0,{done:!0,value:void 0}}};return pn[Symbol.iterator]=function(){return pn},pn},$jscomp.polyfill("Array.prototype.keys",function(sn){return sn||function(){return $jscomp.iteratorFromArray(this,function(ln){return ln})}},"es6","es3"),$jscomp.polyfill("Set",function(sn){function ln(){if($jscomp.ASSUME_NO_NATIVE_SET||!sn||typeof sn!="function"||!sn.prototype.entries||typeof Object.seal!="function")return!1;try{var dn=Object.seal({x:4}),pn=new sn($jscomp.makeIterator([dn]));if(!pn.has(dn)||pn.size!=1||pn.add(dn)!=pn||pn.size!=1||pn.add({x:4})!=pn||pn.size!=2)return!1;var vn=pn.entries(),kn=vn.next();return kn.done||kn.value[0]!=dn||kn.value[1]!=dn?!1:(kn=vn.next(),kn.done||kn.value[0]==dn||kn.value[0].x!=4||kn.value[1]!=kn.value[0]?!1:vn.next().done)}catch{return!1}}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(sn&&$jscomp.ES6_CONFORMANCE)return sn}else if(ln())return sn;var cn=function(dn){if(this.map_=new Map,dn){dn=$jscomp.makeIterator(dn);for(var pn;!(pn=dn.next()).done;)this.add(pn.value)}this.size=this.map_.size};return cn.prototype.add=function(dn){return dn=dn===0?0:dn,this.map_.set(dn,dn),this.size=this.map_.size,this},cn.prototype.delete=function(dn){return dn=this.map_.delete(dn),this.size=this.map_.size,dn},cn.prototype.clear=function(){this.map_.clear(),this.size=0},cn.prototype.has=function(dn){return this.map_.has(dn)},cn.prototype.entries=function(){return this.map_.entries()},cn.prototype.values=function(){return this.map_.values()},cn.prototype.keys=cn.prototype.values,cn.prototype[Symbol.iterator]=cn.prototype.values,cn.prototype.forEach=function(dn,pn){var vn=this;this.map_.forEach(function(kn){return dn.call(pn,kn,kn,vn)})},cn},"es6","es3"),$jscomp.polyfill("Array.from",function(sn){return sn||function(ln,cn,dn){cn=cn??function(Sn){return Sn};var pn=[],vn=typeof Symbol<"u"&&Symbol.iterator&&ln[Symbol.iterator];if(typeof vn=="function"){ln=vn.call(ln);for(var kn=0;!(vn=ln.next()).done;)pn.push(cn.call(dn,vn.value,kn++))}else for(vn=ln.length,kn=0;kn<vn;kn++)pn.push(cn.call(dn,ln[kn],kn));return pn}},"es6","es3"),$jscomp.findInternal=function(sn,ln,cn){sn instanceof String&&(sn=String(sn));for(var dn=sn.length,pn=0;pn<dn;pn++){var vn=sn[pn];if(ln.call(cn,vn,pn,sn))return{i:pn,v:vn}}return{i:-1,v:void 0}},$jscomp.polyfill("Array.prototype.findIndex",function(sn){return sn||function(ln,cn){return $jscomp.findInternal(this,ln,cn).i}},"es6","es3"),$jscomp.polyfill("Object.is",function(sn){return sn||function(ln,cn){return ln===cn?ln!==0||1/ln===1/cn:ln!==ln&&cn!==cn}},"es6","es3"),$jscomp.polyfill("Array.prototype.includes",function(sn){return sn||function(ln,cn){var dn=this;dn instanceof String&&(dn=String(dn));var pn=dn.length;for(cn=cn||0,0>cn&&(cn=Math.max(cn+pn,0));cn<pn;cn++){var vn=dn[cn];if(vn===ln||Object.is(vn,ln))return!0}return!1}},"es7","es3"),$jscomp.checkStringArgs=function(sn,ln,cn){if(sn==null)throw new TypeError("The 'this' value for String.prototype."+cn+" must not be null or undefined");if(ln instanceof RegExp)throw new TypeError("First argument to String.prototype."+cn+" must not be a regular expression");return sn+""},$jscomp.polyfill("String.prototype.includes",function(sn){return sn||function(ln,cn){return $jscomp.checkStringArgs(this,ln,"includes").indexOf(ln,cn||0)!==-1}},"es6","es3"),$jscomp.polyfill("Array.prototype.find",function(sn){return sn||function(ln,cn){return $jscomp.findInternal(this,ln,cn).v}},"es6","es3"),$jscomp.polyfill("String.prototype.startsWith",function(sn){return sn||function(ln,cn){var dn=$jscomp.checkStringArgs(this,ln,"startsWith");ln+="";var pn=dn.length,vn=ln.length;cn=Math.max(0,Math.min(cn|0,dn.length));for(var kn=0;kn<vn&&cn<pn;)if(dn[cn++]!=ln[kn++])return!1;return kn>=vn}},"es6","es3"),$jscomp.assign=$jscomp.TRUST_ES6_POLYFILLS&&typeof Object.assign=="function"?Object.assign:function(sn,ln){for(var cn=1;cn<arguments.length;cn++){var dn=arguments[cn];if(dn)for(var pn in dn)$jscomp.owns(dn,pn)&&(sn[pn]=dn[pn])}return sn},$jscomp.polyfill("Object.assign",function(sn){return sn||$jscomp.assign},"es6","es3"),$jscomp.polyfill("Array.prototype.values",function(sn){return sn||function(){return $jscomp.iteratorFromArray(this,function(ln,cn){return cn})}},"es8","es3"),$jscomp.polyfill("Promise.prototype.finally",function(sn){return sn||function(ln){return this.then(function(cn){return Promise.resolve(ln()).then(function(){return cn})},function(cn){return Promise.resolve(ln()).then(function(){throw cn})})}},"es9","es3"),$jscomp.polyfill("Array.prototype.entries",function(sn){return sn||function(){return $jscomp.iteratorFromArray(this,function(ln,cn){return[ln,cn]})}},"es6","es3"),$jscomp.polyfill("String.prototype.repeat",function(sn){return sn||function(ln){var cn=$jscomp.checkStringArgs(this,null,"repeat");if(0>ln||1342177279<ln)throw new RangeError("Invalid count value");ln|=0;for(var dn="";ln;)ln&1&&(dn+=cn),(ln>>>=1)&&(cn+=cn);return dn}},"es6","es3"),$jscomp.polyfill("Number.isNaN",function(sn){return sn||function(ln){return typeof ln=="number"&&isNaN(ln)}},"es6","es3"),$jscomp.polyfill("Object.values",function(sn){return sn||function(ln){var cn=[],dn;for(dn in ln)$jscomp.owns(ln,dn)&&cn.push(ln[dn]);return cn}},"es8","es3"),$jscomp.polyfill("Math.log2",function(sn){return sn||function(ln){return Math.log(ln)/Math.LN2}},"es6","es3"),$jscomp.polyfill("Math.trunc",function(sn){return sn||function(ln){if(ln=Number(ln),isNaN(ln)||ln===1/0||ln===-1/0||ln===0)return ln;var cn=Math.floor(Math.abs(ln));return 0>ln?-cn:cn}},"es6","es3"),$jscomp.polyfill("Object.entries",function(sn){return sn||function(ln){var cn=[],dn;for(dn in ln)$jscomp.owns(ln,dn)&&cn.push([dn,ln[dn]]);return cn}},"es8","es3");var COMPILED=!0,goog=goog||{};goog.global=this||self,goog.exportPath_=function(sn,ln,cn,dn){sn=sn.split("."),dn=dn||goog.global,sn[0]in dn||typeof dn.execScript>"u"||dn.execScript("var "+sn[0]);for(var pn;sn.length&&(pn=sn.shift());)if(sn.length||ln===void 0)dn=dn[pn]&&dn[pn]!==Object.prototype[pn]?dn[pn]:dn[pn]={};else if(!cn&&goog.isObject(ln)&&goog.isObject(dn[pn]))for(var vn in ln)ln.hasOwnProperty(vn)&&(dn[pn][vn]=ln[vn]);else dn[pn]=ln},goog.define=function(sn,ln){return ln},goog.FEATURESET_YEAR=2012,goog.DEBUG=!0,goog.LOCALE="en",goog.getLocale=function(){return goog.LOCALE},goog.TRUSTED_SITE=!0,goog.DISALLOW_TEST_ONLY_CODE=!goog.DEBUG,goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1,goog.provide=function(sn){if(goog.isInModuleLoader_())throw Error("goog.provide cannot be used within a module.");goog.constructNamespace_(sn)},goog.constructNamespace_=function(sn,ln,cn){goog.exportPath_(sn,ln,cn)},goog.NONCE_PATTERN_=/^[\w+/_-]+[=]{0,2}$/,goog.getScriptNonce_=function(sn){return sn=(sn||goog.global).document,(sn=sn.querySelector&&sn.querySelector("script[nonce]"))&&(sn=sn.nonce||sn.getAttribute("nonce"))&&goog.NONCE_PATTERN_.test(sn)?sn:""},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(sn){if(typeof sn!="string"||!sn||sn.search(goog.VALID_MODULE_RE_)==-1)throw Error("Invalid module identifier");if(!goog.isInGoogModuleLoader_())throw Error("Module "+sn+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");goog.moduleLoaderState_.moduleName=sn},goog.module.get=function(sn){return goog.module.getInternal_(sn)},goog.module.getInternal_=function(sn){return null},goog.ModuleType={ES6:"es6",GOOG:"goog"},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return goog.isInGoogModuleLoader_()||goog.isInEs6ModuleLoader_()},goog.isInGoogModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.GOOG},goog.isInEs6ModuleLoader_=function(){if(goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.ES6)return!0;var sn=goog.global.$jscomp;return sn?typeof sn.getCurrentModulePath!="function"?!1:!!sn.getCurrentModulePath():!1},goog.module.declareLegacyNamespace=function(){goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.declareModuleId=function(sn){if(goog.moduleLoaderState_)goog.moduleLoaderState_.moduleName=sn;else{var ln=goog.global.$jscomp;if(!ln||typeof ln.getCurrentModulePath!="function")throw Error('Module with namespace "'+sn+'" has been loaded incorrectly.');ln=ln.require(ln.getCurrentModulePath()),goog.loadedModules_[sn]={exports:ln,type:goog.ModuleType.ES6,moduleId:sn}}},goog.setTestOnly=function(sn){if(goog.DISALLOW_TEST_ONLY_CODE)throw sn=sn||"",Error("Importing test-only code into non-debug environment"+(sn?": "+sn:"."))},goog.forwardDeclare=function(sn){},goog.getObjectByName=function(sn,ln){sn=sn.split("."),ln=ln||goog.global;for(var cn=0;cn<sn.length;cn++)if(ln=ln[sn[cn]],ln==null)return null;return ln},goog.addDependency=function(sn,ln,cn,dn){},goog.ENABLE_DEBUG_LOADER=!1,goog.logToConsole_=function(sn){goog.global.console&&goog.global.console.error(sn)},goog.require=function(sn){},goog.requireType=function(sn){return{}},goog.basePath="",goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(sn){sn.instance_=void 0,sn.getInstance=function(){return sn.instance_?sn.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=sn),sn.instance_=new sn)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED,goog.TRANSPILE="detect",goog.ASSUME_ES_MODULES_TRANSPILED=!1,goog.TRUSTED_TYPES_POLICY_NAME="goog",goog.hasBadLetScoping=null,goog.loadModule=function(sn){var ln=goog.moduleLoaderState_;try{goog.moduleLoaderState_={moduleName:"",declareLegacyNamespace:!1,type:goog.ModuleType.GOOG};var cn={},dn=cn;if(typeof sn=="function")dn=sn.call(void 0,dn);else if(typeof sn=="string")dn=goog.loadModuleFromSource_.call(void 0,dn,sn);else throw Error("Invalid module definition");var pn=goog.moduleLoaderState_.moduleName;if(typeof pn=="string"&&pn)goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(pn,dn,cn!==dn):goog.SEAL_MODULE_EXPORTS&&Object.seal&&typeof dn=="object"&&dn!=null&&Object.seal(dn),goog.loadedModules_[pn]={exports:dn,type:goog.ModuleType.GOOG,moduleId:goog.moduleLoaderState_.moduleName};else throw Error('Invalid module name "'+pn+'"')}finally{goog.moduleLoaderState_=ln}},goog.loadModuleFromSource_=function(a,b){return eval(goog.CLOSURE_EVAL_PREFILTER_.createScript(b)),a},goog.normalizePath_=function(sn){sn=sn.split("/");for(var ln=0;ln<sn.length;)sn[ln]=="."?sn.splice(ln,1):ln&&sn[ln]==".."&&sn[ln-1]&&sn[ln-1]!=".."?sn.splice(--ln,2):ln++;return sn.join("/")},goog.loadFileSync_=function(sn){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(sn);try{var ln=new goog.global.XMLHttpRequest;return ln.open("get",sn,!1),ln.send(),ln.status==0||ln.status==200?ln.responseText:null}catch{return null}},goog.typeOf=function(sn){var ln=typeof sn;return ln!="object"?ln:sn?Array.isArray(sn)?"array":ln:"null"},goog.isArrayLike=function(sn){var ln=goog.typeOf(sn);return ln=="array"||ln=="object"&&typeof sn.length=="number"},goog.isDateLike=function(sn){return goog.isObject(sn)&&typeof sn.getFullYear=="function"},goog.isObject=function(sn){var ln=typeof sn;return ln=="object"&&sn!=null||ln=="function"},goog.getUid=function(sn){return Object.prototype.hasOwnProperty.call(sn,goog.UID_PROPERTY_)&&sn[goog.UID_PROPERTY_]||(sn[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(sn){return!!sn[goog.UID_PROPERTY_]},goog.removeUid=function(sn){sn!==null&&"removeAttribute"in sn&&sn.removeAttribute(goog.UID_PROPERTY_);try{delete sn[goog.UID_PROPERTY_]}catch{}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.cloneObject=function(sn){var ln=goog.typeOf(sn);if(ln=="object"||ln=="array"){if(typeof sn.clone=="function")return sn.clone();if(typeof Map<"u"&&sn instanceof Map)return new Map(sn);if(typeof Set<"u"&&sn instanceof Set)return new Set(sn);ln=ln=="array"?[]:{};for(var cn in sn)ln[cn]=goog.cloneObject(sn[cn]);return ln}return sn},goog.bindNative_=function(sn,ln,cn){return sn.call.apply(sn.bind,arguments)},goog.bindJs_=function(sn,ln,cn){if(!sn)throw Error();if(2<arguments.length){var dn=Array.prototype.slice.call(arguments,2);return function(){var pn=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(pn,dn),sn.apply(ln,pn)}}return function(){return sn.apply(ln,arguments)}},goog.bind=function(sn,ln,cn){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(sn,ln){var cn=Array.prototype.slice.call(arguments,1);return function(){var dn=cn.slice();return dn.push.apply(dn,arguments),sn.apply(this,dn)}},goog.now=function(){return Date.now()},goog.globalEval=function(sn){(0,eval)(sn)},goog.getCssName=function(sn,ln){if(String(sn).charAt(0)==".")throw Error('className passed in goog.getCssName must not start with ".". You passed: '+sn);var cn=function(pn){return goog.cssNameMapping_[pn]||pn},dn=function(pn){pn=pn.split("-");for(var vn=[],kn=0;kn<pn.length;kn++)vn.push(cn(pn[kn]));return vn.join("-")};return dn=goog.cssNameMapping_?goog.cssNameMappingStyle_=="BY_WHOLE"?cn:dn:function(pn){return pn},sn=ln?sn+"-"+dn(ln):dn(sn),goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(sn):sn},goog.setCssNameMapping=function(sn,ln){goog.cssNameMapping_=sn,goog.cssNameMappingStyle_=ln},goog.GetMsgOptions=function(){},goog.getMsg=function(sn,ln,cn){return cn&&cn.html&&(sn=sn.replace(/</g,"&lt;")),cn&&cn.unescapeHtmlEntities&&(sn=sn.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&apos;/g,"'").replace(/&quot;/g,'"').replace(/&amp;/g,"&")),ln&&(sn=sn.replace(/\{\$([^}]+)}/g,function(dn,pn){return ln!=null&&pn in ln?ln[pn]:dn})),sn},goog.getMsgWithFallback=function(sn,ln){return sn},goog.exportSymbol=function(sn,ln,cn){goog.exportPath_(sn,ln,!0,cn)},goog.exportProperty=function(sn,ln,cn){sn[ln]=cn},goog.inherits=function(sn,ln){function cn(){}cn.prototype=ln.prototype,sn.superClass_=ln.prototype,sn.prototype=new cn,sn.prototype.constructor=sn,sn.base=function(dn,pn,vn){for(var kn=Array(arguments.length-2),Sn=2;Sn<arguments.length;Sn++)kn[Sn-2]=arguments[Sn];return ln.prototype[pn].apply(dn,kn)}},goog.scope=function(sn){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a module.");sn.call(goog.global)},goog.defineClass=function(sn,ln){var cn=ln.constructor,dn=ln.statics;return cn&&cn!=Object.prototype.constructor||(cn=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),cn=goog.defineClass.createSealingConstructor_(cn,sn),sn&&goog.inherits(cn,sn),delete ln.constructor,delete ln.statics,goog.defineClass.applyProperties_(cn.prototype,ln),dn!=null&&(dn instanceof Function?dn(cn):goog.defineClass.applyProperties_(cn,dn)),cn},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(sn,ln){return goog.defineClass.SEAL_CLASS_INSTANCES?function(){var cn=sn.apply(this,arguments)||this;return cn[goog.UID_PROPERTY_]=cn[goog.UID_PROPERTY_],cn}:sn},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(sn,ln){for(var cn in ln)Object.prototype.hasOwnProperty.call(ln,cn)&&(sn[cn]=ln[cn]);for(var dn=0;dn<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;dn++)cn=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[dn],Object.prototype.hasOwnProperty.call(ln,cn)&&(sn[cn]=ln[cn])},goog.identity_=function(sn){return sn},goog.createTrustedTypesPolicy=function(sn){var ln=null,cn=goog.global.trustedTypes;if(!cn||!cn.createPolicy)return ln;try{ln=cn.createPolicy(sn,{createHTML:goog.identity_,createScript:goog.identity_,createScriptURL:goog.identity_})}catch(dn){goog.logToConsole_(dn.message)}return ln},goog.asserts=function(){},goog.asserts.assert=function(sn,ln){},goog.asserts.ENABLE_ASSERTS=!0,goog.asserts.ENABLE_ASSERTS&&console.assert&&console.assert.bind&&(goog.asserts.assert=console.assert.bind(console));var shaka={util:{}};if(shaka.util.FakeEvent=function(sn,ln){if(ln)if(ln instanceof Map)for(var cn=$jscomp.makeIterator(ln.keys()),dn=cn.next();!dn.done;dn=cn.next())dn=dn.value,Object.defineProperty(this,dn,{value:ln.get(dn),writable:!0,enumerable:!0});else for(cn in ln=shaka.util.FakeEvent.recastDictAsObject_(ln),ln)Object.defineProperty(this,cn,{value:ln[cn],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=window.performance&&window.performance.now?window.performance.now():Date.now(),this.type=sn,this.isTrusted=!1,this.target=this.currentTarget=null,this.stopped=!1},shaka.util.FakeEvent.fromRealEvent=function(sn){var ln=new shaka.util.FakeEvent(sn.type),cn;for(cn in sn)Object.defineProperty(ln,cn,{value:sn[cn],writable:!0,enumerable:!0});return ln},shaka.util.FakeEvent.recastDictAsObject_=function(sn){return goog.asserts.assert(!(sn instanceof Map),"dict should not be a map"),sn},shaka.util.FakeEvent.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},shaka.util.FakeEvent.prototype.stopImmediatePropagation=function(){this.stopped=!0},shaka.util.FakeEvent.prototype.stopPropagation=function(){},goog.exportSymbol("shaka.util.FakeEvent",shaka.util.FakeEvent),shaka.util.FakeEvent.EventName={AbrStatusChanged:"abrstatuschanged",Adaptation:"adaptation",Buffering:"buffering",DownloadFailed:"downloadfailed",DownloadHeadersReceived:"downloadheadersreceived",DrmSessionUpdate:"drmsessionupdate",Emsg:"emsg",Prft:"prft",Error:"error",ExpirationUpdated:"expirationupdated",GapJumped:"gapjumped",Loaded:"loaded",Loading:"loading",ManifestParsed:"manifestparsed",MediaQualityChanged:"mediaqualitychanged",Metadata:"metadata",OnStateChange:"onstatechange",OnStateIdle:"onstateidle",RateChange:"ratechange",SegmentAppended:"segmentappended",SessionDataEvent:"sessiondata",StallDetected:"stalldetected",Streaming:"streaming",TextChanged:"textchanged",TextTrackVisibility:"texttrackvisibility",TimelineRegionAdded:"timelineregionadded",TimelineRegionEnter:"timelineregionenter",TimelineRegionExit:"timelineregionexit",TracksChanged:"trackschanged",Unloading:"unloading",VariantChanged:"variantchanged"},shaka.log=function(){},shaka.log.alwaysError=function(){},shaka.log.alwaysWarn=function(){},shaka.log.warnOnce=function(sn){var ln=$jscomp.getRestArguments.apply(1,arguments);shaka.log.oneTimeWarningIssued_.has(sn)||(shaka.log.oneTimeWarningIssued_.add(sn),shaka.log.alwaysWarn.apply(shaka.log,$jscomp.arrayFromIterable(ln)))},shaka.log.error=function(){},shaka.log.warning=function(){},shaka.log.info=function(){},shaka.log.debug=function(){},shaka.log.v1=function(){},shaka.log.v2=function(){},shaka.log.Level={NONE:0,ERROR:1,WARNING:2,INFO:3,DEBUG:4,V1:5,V2:6},shaka.log.MAX_LOG_LEVEL=4,shaka.log.oneTimeWarningIssued_=new Set,window.console){var $jscomp$compprop0={};shaka.log.logMap_=($jscomp$compprop0[shaka.log.Level.ERROR]=function(){var sn=$jscomp.getRestArguments.apply(0,arguments);return console.error.apply(console,$jscomp.arrayFromIterable(sn))},$jscomp$compprop0[shaka.log.Level.WARNING]=function(){var sn=$jscomp.getRestArguments.apply(0,arguments);return console.warn.apply(console,$jscomp.arrayFromIterable(sn))},$jscomp$compprop0[shaka.log.Level.INFO]=function(){var sn=$jscomp.getRestArguments.apply(0,arguments);return console.info.apply(console,$jscomp.arrayFromIterable(sn))},$jscomp$compprop0[shaka.log.Level.DEBUG]=function(){var sn=$jscomp.getRestArguments.apply(0,arguments);return console.log.apply(console,$jscomp.arrayFromIterable(sn))},$jscomp$compprop0[shaka.log.Level.V1]=function(){var sn=$jscomp.getRestArguments.apply(0,arguments);return console.debug.apply(console,$jscomp.arrayFromIterable(sn))},$jscomp$compprop0[shaka.log.Level.V2]=function(){var sn=$jscomp.getRestArguments.apply(0,arguments);return console.debug.apply(console,$jscomp.arrayFromIterable(sn))},$jscomp$compprop0),shaka.log.alwaysWarn=function(){var sn=$jscomp.getRestArguments.apply(0,arguments);return console.warn.apply(console,$jscomp.arrayFromIterable(sn))},shaka.log.alwaysError=function(){var sn=$jscomp.getRestArguments.apply(0,arguments);return console.error.apply(console,$jscomp.arrayFromIterable(sn))},goog.DEBUG?(goog.exportSymbol("shaka.log",shaka.log),shaka.log.setLevel=function(sn){var ln=function(cn){return cn<=sn?(goog.asserts.assert(shaka.log.logMap_[cn],"Unexpected log level"),shaka.log.logMap_[cn]):function(){}};shaka.log.currentLevel=sn,shaka.log.error=ln(shaka.log.Level.ERROR),shaka.log.warning=ln(shaka.log.Level.WARNING),shaka.log.info=ln(shaka.log.Level.INFO),shaka.log.debug=ln(shaka.log.Level.DEBUG),shaka.log.v1=ln(shaka.log.Level.V1),shaka.log.v2=ln(shaka.log.Level.V2)},shaka.log.setLevel(shaka.log.MAX_LOG_LEVEL)):(shaka.log.MAX_LOG_LEVEL>=shaka.log.Level.ERROR&&(shaka.log.error=shaka.log.logMap_[shaka.log.Level.ERROR]),shaka.log.MAX_LOG_LEVEL>=shaka.log.Level.WARNING&&(shaka.log.warning=shaka.log.logMap_[shaka.log.Level.WARNING]),shaka.log.MAX_LOG_LEVEL>=shaka.log.Level.INFO&&(shaka.log.info=shaka.log.logMap_[shaka.log.Level.INFO]),shaka.log.MAX_LOG_LEVEL>=shaka.log.Level.DEBUG&&(shaka.log.debug=shaka.log.logMap_[shaka.log.Level.DEBUG]),shaka.log.MAX_LOG_LEVEL>=shaka.log.Level.V1&&(shaka.log.v1=shaka.log.logMap_[shaka.log.Level.V1]),shaka.log.MAX_LOG_LEVEL>=shaka.log.Level.V2&&(shaka.log.v2=shaka.log.logMap_[shaka.log.Level.V2]))}shaka.util.IReleasable=function(){},shaka.util.IReleasable.prototype.release=function(){},shaka.util.MultiMap=function(){this.map_={}},shaka.util.MultiMap.prototype.push=function(sn,ln){this.map_.hasOwnProperty(sn)?this.map_[sn].push(ln):this.map_[sn]=[ln]},shaka.util.MultiMap.prototype.get=function(sn){return(sn=this.map_[sn])?sn.slice():null},shaka.util.MultiMap.prototype.getAll=function(){var sn=[],ln;for(ln in this.map_)sn.push.apply(sn,$jscomp.arrayFromIterable(this.map_[ln]));return sn},shaka.util.MultiMap.prototype.remove=function(sn,ln){sn in this.map_&&(this.map_[sn]=this.map_[sn].filter(function(cn){return cn!=ln}),this.map_[sn].length==0&&delete this.map_[sn])},shaka.util.MultiMap.prototype.clear=function(){this.map_={}},shaka.util.MultiMap.prototype.forEach=function(sn){for(var ln in this.map_)sn(ln,this.map_[ln])},shaka.util.MultiMap.prototype.size=function(){return Object.keys(this.map_).length},shaka.util.MultiMap.prototype.keys=function(){return Object.keys(this.map_)},shaka.util.FakeEventTarget=function(){this.listeners_=new shaka.util.MultiMap,this.dispatchTarget=this},shaka.util.FakeEventTarget.prototype.addEventListener=function(sn,ln,cn){this.listeners_&&this.listeners_.push(sn,ln)},shaka.util.FakeEventTarget.prototype.listenToAllEvents=function(sn){this.addEventListener(shaka.util.FakeEventTarget.ALL_EVENTS_,sn)},shaka.util.FakeEventTarget.prototype.removeEventListener=function(sn,ln,cn){this.listeners_&&this.listeners_.remove(sn,ln)},shaka.util.FakeEventTarget.prototype.dispatchEvent=function(sn){if(goog.asserts.assert(sn instanceof shaka.util.FakeEvent,"FakeEventTarget can only dispatch FakeEvents!"),!this.listeners_)return!0;var ln=this.listeners_.get(sn.type)||[],cn=this.listeners_.get(shaka.util.FakeEventTarget.ALL_EVENTS_);for(cn&&(ln=ln.concat(cn)),ln=$jscomp.makeIterator(ln),cn=ln.next();!cn.done;cn=ln.next()){cn=cn.value,sn.target=this.dispatchTarget,sn.currentTarget=this.dispatchTarget;try{cn.handleEvent?cn.handleEvent(sn):cn.call(this,sn)}catch(dn){shaka.log.error("Uncaught exception in event handler",dn,dn?dn.message:null,dn?dn.stack:null)}if(sn.stopped)break}return sn.defaultPrevented},shaka.util.FakeEventTarget.prototype.release=function(){this.listeners_=null},shaka.util.FakeEventTarget.ALL_EVENTS_="All",shaka.util.Iterables=function(){},shaka.util.Iterables.map=function(sn,ln){var cn=[];sn=$jscomp.makeIterator(sn);for(var dn=sn.next();!dn.done;dn=sn.next())cn.push(ln(dn.value));return cn},shaka.util.Iterables.every=function(sn,ln){sn=$jscomp.makeIterator(sn);for(var cn=sn.next();!cn.done;cn=sn.next())if(!ln(cn.value))return!1;return!0},shaka.util.Iterables.some=function(sn,ln){sn=$jscomp.makeIterator(sn);for(var cn=sn.next();!cn.done;cn=sn.next())if(ln(cn.value))return!0;return!1},shaka.util.Iterables.filter=function(sn,ln){var cn=[];sn=$jscomp.makeIterator(sn);for(var dn=sn.next();!dn.done;dn=sn.next())dn=dn.value,ln(dn)&&cn.push(dn);return cn};/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/goog.uri={},goog.uri.utils={},goog.uri.utils.splitRe_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$"),goog.uri.utils.ComponentIndex={SCHEME:1,USER_INFO:2,DOMAIN:3,PORT:4,PATH:5,QUERY_DATA:6,FRAGMENT:7},goog.uri.utils.split=function(sn){return sn.match(goog.uri.utils.splitRe_)};/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/goog.Uri=function(sn){var ln;sn instanceof goog.Uri?(this.setScheme(sn.getScheme()),this.setUserInfo(sn.getUserInfo()),this.setDomain(sn.getDomain()),this.setPort(sn.getPort()),this.setPath(sn.getPath()),this.setQueryData(sn.getQueryData().clone()),this.setFragment(sn.getFragment())):sn&&(ln=goog.uri.utils.split(String(sn)))?(this.setScheme(ln[goog.uri.utils.ComponentIndex.SCHEME]||"",!0),this.setUserInfo(ln[goog.uri.utils.ComponentIndex.USER_INFO]||"",!0),this.setDomain(ln[goog.uri.utils.ComponentIndex.DOMAIN]||"",!0),this.setPort(ln[goog.uri.utils.ComponentIndex.PORT]),this.setPath(ln[goog.uri.utils.ComponentIndex.PATH]||"",!0),this.setQueryData(ln[goog.uri.utils.ComponentIndex.QUERY_DATA]||"",!0),this.setFragment(ln[goog.uri.utils.ComponentIndex.FRAGMENT]||"",!0)):this.queryData_=new goog.Uri.QueryData(null,null)},goog.Uri.prototype.scheme_="",goog.Uri.prototype.userInfo_="",goog.Uri.prototype.domain_="",goog.Uri.prototype.port_=null,goog.Uri.prototype.path_="",goog.Uri.prototype.fragment_="",goog.Uri.prototype.toString=function(){var sn=[],ln=this.getScheme();if(ln&&sn.push(goog.Uri.encodeSpecialChars_(ln,goog.Uri.reDisallowedInSchemeOrUserInfo_,!0),":"),ln=this.getDomain()){sn.push("//");var cn=this.getUserInfo();cn&&sn.push(goog.Uri.encodeSpecialChars_(cn,goog.Uri.reDisallowedInSchemeOrUserInfo_,!0),"@"),sn.push(goog.Uri.removeDoubleEncoding_(encodeURIComponent(ln))),ln=this.getPort(),ln!=null&&sn.push(":",String(ln))}return(ln=this.getPath())&&(this.hasDomain()&&ln.charAt(0)!="/"&&sn.push("/"),sn.push(goog.Uri.encodeSpecialChars_(ln,ln.charAt(0)=="/"?goog.Uri.reDisallowedInAbsolutePath_:goog.Uri.reDisallowedInRelativePath_,!0))),(ln=this.getEncodedQuery())&&sn.push("?",ln),(ln=this.getFragment())&&sn.push("#",goog.Uri.encodeSpecialChars_(ln,goog.Uri.reDisallowedInFragment_)),sn.join("")},goog.Uri.prototype.resolve=function(sn){var ln=this.clone();ln.scheme_==="data"&&(ln=new goog.Uri);var cn=sn.hasScheme();cn?ln.setScheme(sn.getScheme()):cn=sn.hasUserInfo(),cn?ln.setUserInfo(sn.getUserInfo()):cn=sn.hasDomain(),cn?ln.setDomain(sn.getDomain()):cn=sn.hasPort();var dn=sn.getPath();if(cn)ln.setPort(sn.getPort());else if(cn=sn.hasPath()){if(dn.charAt(0)!="/")if(this.hasDomain()&&!this.hasPath())dn="/"+dn;else{var pn=ln.getPath().lastIndexOf("/");pn!=-1&&(dn=ln.getPath().substr(0,pn+1)+dn)}dn=goog.Uri.removeDotSegments(dn)}return cn?ln.setPath(dn):cn=sn.hasQuery(),cn?ln.setQueryData(sn.getQueryData().clone()):cn=sn.hasFragment(),cn&&ln.setFragment(sn.getFragment()),ln},goog.Uri.prototype.clone=function(){return new goog.Uri(this)},goog.Uri.prototype.getScheme=function(){return this.scheme_},goog.Uri.prototype.setScheme=function(sn,ln){return(this.scheme_=ln?goog.Uri.decodeOrEmpty_(sn,!0):sn)&&(this.scheme_=this.scheme_.replace(/:$/,"")),this},goog.Uri.prototype.hasScheme=function(){return!!this.scheme_},goog.Uri.prototype.getUserInfo=function(){return this.userInfo_},goog.Uri.prototype.setUserInfo=function(sn,ln){return this.userInfo_=ln?goog.Uri.decodeOrEmpty_(sn):sn,this},goog.Uri.prototype.hasUserInfo=function(){return!!this.userInfo_},goog.Uri.prototype.getDomain=function(){return this.domain_},goog.Uri.prototype.setDomain=function(sn,ln){return this.domain_=ln?goog.Uri.decodeOrEmpty_(sn,!0):sn,this},goog.Uri.prototype.hasDomain=function(){return!!this.domain_},goog.Uri.prototype.getPort=function(){return this.port_},goog.Uri.prototype.setPort=function(sn){if(sn){if(sn=Number(sn),isNaN(sn)||0>sn)throw Error("Bad port number "+sn);this.port_=sn}else this.port_=null;return this},goog.Uri.prototype.hasPort=function(){return this.port_!=null},goog.Uri.prototype.getPath=function(){return this.path_},goog.Uri.prototype.setPath=function(sn,ln){return this.path_=ln?goog.Uri.decodeOrEmpty_(sn,!0):sn,this},goog.Uri.prototype.hasPath=function(){return!!this.path_},goog.Uri.prototype.hasQuery=function(){return this.queryData_.toString()!==""},goog.Uri.prototype.setQueryData=function(sn,ln){return sn instanceof goog.Uri.QueryData?this.queryData_=sn:(ln||(sn=goog.Uri.encodeSpecialChars_(sn,goog.Uri.reDisallowedInQuery_)),this.queryData_=new goog.Uri.QueryData(sn,null)),this},goog.Uri.prototype.getEncodedQuery=function(){return this.queryData_.toString()},goog.Uri.prototype.getDecodedQuery=function(){return this.queryData_.toDecodedString()},goog.Uri.prototype.getQueryData=function(){return this.queryData_},goog.Uri.prototype.getFragment=function(){return this.fragment_},goog.Uri.prototype.setFragment=function(sn,ln){return this.fragment_=ln?goog.Uri.decodeOrEmpty_(sn):sn,this},goog.Uri.prototype.hasFragment=function(){return!!this.fragment_},goog.Uri.removeDotSegments=function(sn){if(sn==".."||sn==".")return"";if(sn.indexOf("./")==-1&&sn.indexOf("/.")==-1)return sn;var ln=sn.lastIndexOf("/",0)==0;sn=sn.split("/");for(var cn=[],dn=0;dn<sn.length;){var pn=sn[dn++];pn=="."?ln&&dn==sn.length&&cn.push(""):pn==".."?((1<cn.length||cn.length==1&&cn[0]!="")&&cn.pop(),ln&&dn==sn.length&&cn.push("")):(cn.push(pn),ln=!0)}return cn.join("/")},goog.Uri.decodeOrEmpty_=function(sn,ln){return sn?ln?decodeURI(sn):decodeURIComponent(sn):""},goog.Uri.encodeSpecialChars_=function(sn,ln,cn){return sn!=null?(sn=encodeURI(sn).replace(ln,goog.Uri.encodeChar_),cn&&(sn=goog.Uri.removeDoubleEncoding_(sn)),sn):null},goog.Uri.encodeChar_=function(sn){return sn=sn.charCodeAt(0),"%"+(sn>>4&15).toString(16)+(sn&15).toString(16)},goog.Uri.removeDoubleEncoding_=function(sn){return sn.replace(/%25([0-9a-fA-F]{2})/g,"%$1")},goog.Uri.reDisallowedInSchemeOrUserInfo_=/[#\/\?@]/g,goog.Uri.reDisallowedInRelativePath_=/[#\?:]/g,goog.Uri.reDisallowedInAbsolutePath_=/[#\?]/g,goog.Uri.reDisallowedInQuery_=/[#\?@]/g,goog.Uri.reDisallowedInFragment_=/#/g,goog.Uri.QueryData=function(sn,ln){this.encodedQuery_=sn||null},goog.Uri.QueryData.prototype.ensureKeyMapInitialized_=function(){if(!this.keyMap_&&(this.keyMap_={},this.count_=0,this.encodedQuery_))for(var sn=this.encodedQuery_.split("&"),ln=0;ln<sn.length;ln++){var cn=sn[ln].indexOf("="),dn=null;if(0<=cn){var pn=sn[ln].substring(0,cn);dn=sn[ln].substring(cn+1)}else pn=sn[ln];pn=decodeURIComponent(pn.replace(/\+/g," ")),dn=dn||"",this.add(pn,decodeURIComponent(dn.replace(/\+/g," ")))}},goog.Uri.QueryData.prototype.keyMap_=null,goog.Uri.QueryData.prototype.count_=null,goog.Uri.QueryData.prototype.getCount=function(){return this.ensureKeyMapInitialized_(),this.count_},goog.Uri.QueryData.prototype.add=function(sn,ln){this.ensureKeyMapInitialized_(),this.encodedQuery_=null;var cn=this.keyMap_.hasOwnProperty(sn)?this.keyMap_[sn]:null;return cn||(this.keyMap_[sn]=cn=[]),cn.push(ln),goog.asserts.assert(this.count_!=null,"Should not be null."),this.count_++,this},goog.Uri.QueryData.prototype.set=function(sn,ln){return this.ensureKeyMapInitialized_(),this.encodedQuery_=null,this.keyMap_.hasOwnProperty(sn)?this.keyMap_[sn]=[ln]:this.add(sn,ln),this},goog.Uri.QueryData.prototype.toString=function(){if(this.encodedQuery_)return this.encodedQuery_;if(!this.keyMap_)return"";var sn=[],ln;for(ln in this.keyMap_)for(var cn=encodeURIComponent(ln),dn=this.keyMap_[ln],pn=0;pn<dn.length;pn++){var vn=cn;dn[pn]!==""&&(vn+="="+encodeURIComponent(dn[pn])),sn.push(vn)}return this.encodedQuery_=sn.join("&")},goog.Uri.QueryData.prototype.toDecodedString=function(){return goog.Uri.decodeOrEmpty_(this.toString())},goog.Uri.QueryData.prototype.clone=function(){var sn=new goog.Uri.QueryData;if(sn.encodedQuery_=this.encodedQuery_,this.keyMap_){var ln={},cn;for(cn in this.keyMap_)ln[cn]=this.keyMap_[cn].concat();sn.keyMap_=ln,sn.count_=this.count_}return sn},shaka.util.Error=function(sn,ln,cn){var dn=$jscomp.getRestArguments.apply(3,arguments);if(this.severity=sn,this.category=ln,this.code=cn,this.data=dn,this.handled=!1,goog.DEBUG){var pn=dn="UNKNOWN",vn;for(vn in shaka.util.Error.Category)shaka.util.Error.Category[vn]==this.category&&(dn=vn);for(var kn in shaka.util.Error.Code)shaka.util.Error.Code[kn]==this.code&&(pn=kn);if(this.message="Shaka Error "+dn+"."+pn+" ("+this.data.toString()+")",shaka.util.Error.createStack)try{throw Error(this.message)}catch(Sn){this.stack=Sn.stack}}},shaka.util.Error.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},goog.exportSymbol("shaka.util.Error",shaka.util.Error),goog.DEBUG&&(shaka.util.Error.createStack=!0),shaka.util.Error.Severity={RECOVERABLE:1,CRITICAL:2},goog.exportProperty(shaka.util.Error,"Severity",shaka.util.Error.Severity),shaka.util.Error.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},goog.exportProperty(shaka.util.Error,"Category",shaka.util.Error.Category),shaka.util.Error.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_SRC_EQUALS:2016,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,HLS_AES_128_INVALID_IV_LENGTH:4043,HLS_AES_128_INVALID_KEY_LENGTH:4044,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004},goog.exportProperty(shaka.util.Error,"Code",shaka.util.Error.Code),shaka.util.Functional=function(){},shaka.util.Functional.createFallbackPromiseChain=function(sn,ln){return sn.reduce(function(cn,dn){return cn.catch(function(){return ln(dn)})},Promise.reject())},shaka.util.Functional.collapseArrays=function(sn,ln){return sn.concat(ln)},shaka.util.Functional.ignored=function(){},shaka.util.Functional.noop=function(){},shaka.util.Functional.isNotNull=function(sn){return sn!=null},shaka.util.ManifestParserUtils=function(){},shaka.util.ManifestParserUtils.resolveUris=function(sn,ln){var cn=shaka.util.Functional;if(ln.length==0)return sn;var dn=ln.map(function(pn){return new goog.Uri(pn)});return sn.map(function(pn){return new goog.Uri(pn)}).map(function(pn){return dn.map(function(vn){return pn.resolve(vn)})}).reduce(cn.collapseArrays,[]).map(function(pn){return pn.toString()})},shaka.util.ManifestParserUtils.createDrmInfo=function(sn,ln){return{keySystem:sn,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:ln||[],keyIds:new Set}},shaka.util.ManifestParserUtils.guessCodecs=function(sn,ln){if(ln.length==1)return ln[0];if(sn=shaka.util.ManifestParserUtils.guessCodecsSafe(sn,ln),sn!=null)return sn;throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_COULD_NOT_GUESS_CODECS,ln)},shaka.util.ManifestParserUtils.guessCodecsSafe=function(sn,ln){for(var cn=$jscomp.makeIterator(shaka.util.ManifestParserUtils.CODEC_REGEXPS_BY_CONTENT_TYPE_[sn]),dn=cn.next();!dn.done;dn=cn.next()){dn=dn.value;for(var pn=$jscomp.makeIterator(ln),vn=pn.next();!vn.done;vn=pn.next())if(vn=vn.value,dn.test(vn.trim()))return vn.trim()}return sn==shaka.util.ManifestParserUtils.ContentType.TEXT?"":null},shaka.util.ManifestParserUtils.ContentType={VIDEO:"video",AUDIO:"audio",TEXT:"text",IMAGE:"image",APPLICATION:"application"},shaka.util.ManifestParserUtils.TextStreamKind={SUBTITLE:"subtitle",CLOSED_CAPTION:"caption"},shaka.util.ManifestParserUtils.GAP_OVERLAP_TOLERANCE_SECONDS=1/15,shaka.util.ManifestParserUtils.VIDEO_CODEC_REGEXPS_=[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av01/,/^dvhe/],shaka.util.ManifestParserUtils.AUDIO_CODEC_REGEXPS_=[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4$/,/^dts[cex]$/],shaka.util.ManifestParserUtils.TEXT_CODEC_REGEXPS_=[/^vtt$/,/^wvtt/,/^stpp/],shaka.util.ManifestParserUtils.CODEC_REGEXPS_BY_CONTENT_TYPE_={audio:shaka.util.ManifestParserUtils.AUDIO_CODEC_REGEXPS_,video:shaka.util.ManifestParserUtils.VIDEO_CODEC_REGEXPS_,text:shaka.util.ManifestParserUtils.TEXT_CODEC_REGEXPS_},shaka.util.LanguageUtils=function(){},shaka.util.LanguageUtils.areLocaleCompatible=function(sn,ln){var cn=shaka.util.LanguageUtils;return sn=cn.normalize(sn),ln=cn.normalize(ln),sn==ln},shaka.util.LanguageUtils.areLanguageCompatible=function(sn,ln){var cn=shaka.util.LanguageUtils;return sn=cn.normalize(sn),ln=cn.normalize(ln),sn=cn.disassembleLocale_(sn),ln=cn.disassembleLocale_(ln),sn[0]==ln[0]},shaka.util.LanguageUtils.isParentOf=function(sn,ln){var cn=shaka.util.LanguageUtils;return sn=cn.normalize(sn),ln=cn.normalize(ln),sn=cn.disassembleLocale_(sn),ln=cn.disassembleLocale_(ln),sn[0]==ln[0]&&sn.length==1&&ln.length==2},shaka.util.LanguageUtils.isSiblingOf=function(sn,ln){var cn=shaka.util.LanguageUtils;return sn=cn.normalize(sn),ln=cn.normalize(ln),sn=cn.disassembleLocale_(sn),ln=cn.disassembleLocale_(ln),sn.length==2&&ln.length==2&&sn[0]==ln[0]},shaka.util.LanguageUtils.normalize=function(sn){var ln=shaka.util.LanguageUtils,cn=sn.split("-");return sn=cn[0]||"",cn=cn[1]||"",sn=sn.toLowerCase(),sn=ln.isoMap_.get(sn)||sn,(cn=cn.toUpperCase())?sn+"-"+cn:sn},shaka.util.LanguageUtils.areSiblings=function(sn,ln){var cn=shaka.util.LanguageUtils,dn=cn.getBase(sn);return cn=cn.getBase(ln),sn!=dn&&ln!=cn&&dn==cn},shaka.util.LanguageUtils.relatedness=function(sn,ln){var cn=shaka.util.LanguageUtils;return sn=cn.normalize(sn),ln=cn.normalize(ln),ln==sn?4:cn.isParentOf(ln,sn)?3:cn.isSiblingOf(ln,sn)?2:cn.isParentOf(sn,ln)?1:0},shaka.util.LanguageUtils.getBase=function(sn){var ln=shaka.util.LanguageUtils,cn=sn.indexOf("-");return sn=0<=cn?sn.substring(0,cn):sn,sn=sn.toLowerCase(),sn=ln.isoMap_.get(sn)||sn},shaka.util.LanguageUtils.getLocaleForText=function(sn){var ln=shaka.util.LanguageUtils;return goog.asserts.assert(sn.type==shaka.util.ManifestParserUtils.ContentType.TEXT,"Can only get language from text streams"),ln.normalize(sn.language||"und")},shaka.util.LanguageUtils.getLocaleForVariant=function(sn){var ln=shaka.util.LanguageUtils;return sn.language?ln.normalize(sn.language):sn.audio&&sn.audio.language?ln.normalize(sn.audio.language):sn.video&&sn.video.language?ln.normalize(sn.video.language):"und"},shaka.util.LanguageUtils.findClosestLocale=function(sn,ln){var cn=shaka.util.LanguageUtils;sn=cn.normalize(sn);var dn=new Set,pn=$jscomp.makeIterator(ln);for(ln=pn.next();!ln.done;ln=pn.next())dn.add(cn.normalize(ln.value));for(pn=$jscomp.makeIterator(dn),ln=pn.next();!ln.done;ln=pn.next())if(ln=ln.value,ln==sn)return ln;for(pn=$jscomp.makeIterator(dn),ln=pn.next();!ln.done;ln=pn.next())if(ln=ln.value,cn.isParentOf(ln,sn))return ln;for(pn=$jscomp.makeIterator(dn),ln=pn.next();!ln.done;ln=pn.next())if(ln=ln.value,cn.isSiblingOf(ln,sn))return ln;for(dn=$jscomp.makeIterator(dn),ln=dn.next();!ln.done;ln=dn.next())if(ln=ln.value,cn.isParentOf(sn,ln))return ln;return null},shaka.util.LanguageUtils.disassembleLocale_=function(sn){var ln=sn.split("-");return goog.asserts.assert(2>=ln.length,["Locales should not have more than 2 components. ",sn," has too many components."].join()),ln},goog.exportSymbol("shaka.util.LanguageUtils",shaka.util.LanguageUtils),goog.exportProperty(shaka.util.LanguageUtils,"findClosestLocale",shaka.util.LanguageUtils.findClosestLocale),goog.exportProperty(shaka.util.LanguageUtils,"getLocaleForVariant",shaka.util.LanguageUtils.getLocaleForVariant),goog.exportProperty(shaka.util.LanguageUtils,"getLocaleForText",shaka.util.LanguageUtils.getLocaleForText),goog.exportProperty(shaka.util.LanguageUtils,"getBase",shaka.util.LanguageUtils.getBase),goog.exportProperty(shaka.util.LanguageUtils,"relatedness",shaka.util.LanguageUtils.relatedness),goog.exportProperty(shaka.util.LanguageUtils,"areSiblings",shaka.util.LanguageUtils.areSiblings),goog.exportProperty(shaka.util.LanguageUtils,"normalize",shaka.util.LanguageUtils.normalize),goog.exportProperty(shaka.util.LanguageUtils,"isSiblingOf",shaka.util.LanguageUtils.isSiblingOf),goog.exportProperty(shaka.util.LanguageUtils,"isParentOf",shaka.util.LanguageUtils.isParentOf),goog.exportProperty(shaka.util.LanguageUtils,"areLanguageCompatible",shaka.util.LanguageUtils.areLanguageCompatible),goog.exportProperty(shaka.util.LanguageUtils,"areLocaleCompatible",shaka.util.LanguageUtils.areLocaleCompatible),shaka.util.LanguageUtils.isoMap_=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]),shaka.ui={},shaka.ui.Localization=function(sn){shaka.util.FakeEventTarget.call(this),this.fallbackLocale_=shaka.util.LanguageUtils.normalize(sn),this.currentMap_=new Map,this.currentLocales_=new Set,this.localizations_=new Map},$jscomp.inherits(shaka.ui.Localization,shaka.util.FakeEventTarget),shaka.ui.Localization.prototype.release=function(){shaka.util.FakeEventTarget.prototype.release.call(this)},shaka.ui.Localization.prototype.changeLocale=function(sn){var ln=this,cn=shaka.ui.Localization;this.currentLocales_.clear(),sn=$jscomp.makeIterator(sn);for(var dn=sn.next();!dn.done;dn=sn.next())this.currentLocales_.add(shaka.util.LanguageUtils.normalize(dn.value));this.updateCurrentMap_(),sn=shaka.util.Iterables.filter(this.currentLocales_,function(pn){return!ln.localizations_.has(pn)}),sn.length&&this.dispatchEvent(new shaka.util.FakeEvent(cn.UNKNOWN_LOCALES,new Map().set("locales",sn))),sn=shaka.util.Iterables.filter(this.currentLocales_,function(pn){return ln.localizations_.has(pn)}),sn=new Map().set("locales",sn.length?sn:[this.fallbackLocale_]),this.dispatchEvent(new shaka.util.FakeEvent(cn.LOCALE_CHANGED,sn))},shaka.ui.Localization.prototype.insert=function(sn,ln,cn){var dn=shaka.ui.Localization,pn=shaka.ui.Localization.ConflictResolution,vn=shaka.util.FakeEvent;sn=shaka.util.LanguageUtils.normalize(sn),cn===void 0&&(cn=pn.USE_NEW);var kn=this.localizations_.get(sn)||new Map;return ln.forEach(function(Sn,wn){kn.has(wn)&&cn!=pn.USE_NEW||kn.set(wn,Sn)}),this.localizations_.set(sn,kn),this.updateCurrentMap_(),this.dispatchEvent(new vn(dn.LOCALE_UPDATED)),this},shaka.ui.Localization.prototype.resolveDictionary=function(sn){for(var ln=$jscomp.makeIterator(sn.keys()),cn=ln.next();!cn.done;cn=ln.next())cn=cn.value,sn.set(cn,this.resolve(cn))},shaka.ui.Localization.prototype.resolve=function(sn){var ln=shaka.ui.Localization,cn=shaka.util.FakeEvent,dn=this.currentMap_.get(sn);return dn||(sn=new Map().set("locales",Array.from(this.currentLocales_)).set("missing",sn),this.dispatchEvent(new cn(ln.UNKNOWN_LOCALIZATION,sn)),"")},shaka.ui.Localization.prototype.updateCurrentMap_=function(){for(var sn=this,ln=shaka.util.LanguageUtils,cn=this.localizations_,dn=this.fallbackLocale_,pn=this.currentLocales_,vn=new Set,kn={},Sn=$jscomp.makeIterator(pn),wn=Sn.next();!wn.done;kn={$jscomp$loop$prop$locale$678:kn.$jscomp$loop$prop$locale$678},wn=Sn.next()){kn.$jscomp$loop$prop$locale$678=wn.value,vn.add(kn.$jscomp$loop$prop$locale$678),vn.add(ln.getBase(kn.$jscomp$loop$prop$locale$678)),wn=shaka.util.Iterables.filter(cn.keys(),function(Nn){return function(Ln){return ln.areSiblings(Ln,Nn.$jscomp$loop$prop$locale$678)}}(kn)),wn.sort();var Pn=$jscomp.makeIterator(wn);for(wn=Pn.next();!wn.done;wn=Pn.next())vn.add(wn.value);for(wn=shaka.util.Iterables.filter(cn.keys(),function(Nn){return function(Ln){return ln.getBase(Ln)==Nn.$jscomp$loop$prop$locale$678}}(kn)),wn.sort(),Pn=$jscomp.makeIterator(wn),wn=Pn.next();!wn.done;wn=Pn.next())vn.add(wn.value)}for(vn.add(dn),dn=[],vn=$jscomp.makeIterator(vn),wn=vn.next();!wn.done;wn=vn.next())(wn=cn.get(wn.value))&&dn.push(wn);for(dn.reverse(),this.currentMap_.clear(),cn=$jscomp.makeIterator(dn),wn=cn.next();!wn.done;wn=cn.next())wn.value.forEach(function(Nn,Ln){sn.currentMap_.set(Ln,Nn)});for(cn=this.currentMap_.keys(),vn=new Set,dn=$jscomp.makeIterator(this.currentLocales_),wn=dn.next();!wn.done;wn=dn.next())wn=this.localizations_.get(wn.value)||new Map,shaka.ui.Localization.findMissingKeys_(wn,cn,vn);0<vn.size&&(pn=new Map().set("locales",Array.from(pn)).set("missing",Array.from(vn)),this.dispatchEvent(new shaka.util.FakeEvent(shaka.ui.Localization.MISSING_LOCALIZATIONS,pn)))},shaka.ui.Localization.findMissingKeys_=function(sn,ln,cn){ln=$jscomp.makeIterator(ln);for(var dn=ln.next();!dn.done;dn=ln.next())dn=dn.value,sn.get(dn)||cn.add(dn)},goog.exportSymbol("shaka.ui.Localization",shaka.ui.Localization),goog.exportProperty(shaka.ui.Localization.prototype,"resolve",shaka.ui.Localization.prototype.resolve),goog.exportProperty(shaka.ui.Localization.prototype,"resolveDictionary",shaka.ui.Localization.prototype.resolveDictionary),goog.exportProperty(shaka.ui.Localization.prototype,"insert",shaka.ui.Localization.prototype.insert),goog.exportProperty(shaka.ui.Localization.prototype,"changeLocale",shaka.ui.Localization.prototype.changeLocale),goog.exportProperty(shaka.ui.Localization.prototype,"release",shaka.ui.Localization.prototype.release),shaka.ui.Localization.ConflictResolution={USE_OLD:0,USE_NEW:1},goog.exportProperty(shaka.ui.Localization,"ConflictResolution",shaka.ui.Localization.ConflictResolution),shaka.ui.Localization.UNKNOWN_LOCALES="unknown-locales",goog.exportProperty(shaka.ui.Localization,"UNKNOWN_LOCALES",shaka.ui.Localization.UNKNOWN_LOCALES),shaka.ui.Localization.UNKNOWN_LOCALIZATION="unknown-localization",goog.exportProperty(shaka.ui.Localization,"UNKNOWN_LOCALIZATION",shaka.ui.Localization.UNKNOWN_LOCALIZATION),shaka.ui.Localization.MISSING_LOCALIZATIONS="missing-localizations",goog.exportProperty(shaka.ui.Localization,"MISSING_LOCALIZATIONS",shaka.ui.Localization.MISSING_LOCALIZATIONS),shaka.ui.Localization.LOCALE_CHANGED="locale-changed",goog.exportProperty(shaka.ui.Localization,"LOCALE_CHANGED",shaka.ui.Localization.LOCALE_CHANGED),shaka.ui.Localization.LOCALE_UPDATED="locale-updated",goog.exportProperty(shaka.ui.Localization,"LOCALE_UPDATED",shaka.ui.Localization.LOCALE_UPDATED),shaka.ui.Locales={},shaka.ui.Locales.addTo=function(sn){sn.insert("ar",new Map([["AD_DURATION","مدة الإعلان"],["AD_PROGRESS","الإعلان [AD_ON] من [NUM_ADS]"],["AD_TIME","الإعلان: [AD_TIME]"],["AUTO_QUALITY","تلقائي"],["BACK","رجوع"],["CAPTIONS","الترجمة والشرح"],["CAST","إرسال..."],["ENTER_LOOP_MODE","تكرار الفيديو الحالي"],["ENTER_PICTURE_IN_PICTURE",'الدخول في وضع "نافذة ضمن نافذة"'],["EXIT_FULL_SCREEN","إنهاء وضع ملء الشاشة"],["EXIT_LOOP_MODE","إيقاف تكرار الفيديو الحالي"],["EXIT_PICTURE_IN_PICTURE",'الخروج من وضع "نافذة ضمن نافذة"'],["FAST_FORWARD","تقديم سريع"],["FULL_SCREEN","ملء الشاشة"],["LANGUAGE","اللغة"],["LIVE","مباشر"],["LOOP","تكرار"],["MORE_SETTINGS","مزيد من الإعدادات"],["MULTIPLE_LANGUAGES","لغات متعددة"],["MUTE","كتم الصوت"],["NOT_APPLICABLE","غير سارٍ"],["OFF","إيقاف"],["ON","تشغيل"],["PAUSE","إيقاف مؤقت"],["PICTURE_IN_PICTURE","نافذة ضمن النافذة"],["PLAY","التشغيل"],["PLAYBACK_RATE","سرعة التشغيل"],["RESOLUTION","درجة الدقة"],["REWIND","ترجيع"],["SEEK","البحث بالتمرير"],["SKIP_AD","تخطّي الإعلان"],["SKIP_TO_LIVE","الانتقال إلى بث مباشر"],["UNDETERMINED_LANGUAGE","غير محدد"],["UNMUTE","إعادة الصوت"],["UNRECOGNIZED_LANGUAGE","غير معروف"],["VOLUME","مستوى الصوت"]])),sn.insert("de",new Map([["AD_DURATION","Dauer der Werbeanzeige"],["AD_PROGRESS","Werbung [AD_ON] von [NUM_ADS]"],["AD_TIME","Werbeanzeige: [AD_TIME]"],["AUTO_QUALITY","Automatisch"],["BACK","Zurück"],["CAPTIONS","Untertitel"],["CAST","Streamen..."],["ENTER_LOOP_MODE","In Endlosschleife spielen"],["ENTER_PICTURE_IN_PICTURE","Bild-im-Bild-Modus aktivieren"],["EXIT_FULL_SCREEN","Vollbildmodus beenden"],["EXIT_LOOP_MODE","Endlosschleife stoppen"],["EXIT_PICTURE_IN_PICTURE","Bild-im-Bild-Modus beenden"],["FAST_FORWARD","Vorspulen"],["FULL_SCREEN","Vollbildmodus"],["LANGUAGE","Sprache"],["LIVE","Live"],["LOOP","Schleife"],["MORE_SETTINGS","Weitere Einstellungen"],["MULTIPLE_LANGUAGES","Mehrere Sprachen"],["MUTE","Stummschalten"],["NOT_APPLICABLE","Nicht zutreffend"],["OFF","Aus"],["ON","Ein"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Bild im Bild"],["PLAY","Wiedergabe"],["PLAYBACK_RATE","Geschwindigkeit"],["RESOLUTION","Auflösung"],["REWIND","Zurückspulen"],["SEEK","Suche"],["SKIP_AD","Überspringen"],["SKIP_TO_LIVE","Zum Live-Videostream wechseln"],["UNDETERMINED_LANGUAGE","Unbestimmt"],["UNMUTE","Stummschaltung aufheben"],["UNRECOGNIZED_LANGUAGE","Unbekannt"],["VOLUME","Lautstärke"]])),sn.insert("en",new Map([["AD_DURATION","Ad duration"],["AD_PROGRESS","Ad [AD_ON] of [NUM_ADS]"],["AD_TIME","Ad: [AD_TIME]"],["AIRPLAY","AirPlay"],["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["ENTER_LOOP_MODE","Loop the current video"],["ENTER_PICTURE_IN_PICTURE","Enter Picture-in-Picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_LOOP_MODE","Stop looping the current video"],["EXIT_PICTURE_IN_PICTURE","Exit Picture-in-Picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["LOOP","Loop"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Play"],["PLAYBACK_RATE","Playback speed"],["QUALITY","Quality"],["REPLAY","Replay"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_AD","Skip Ad"],["SKIP_TO_LIVE","Skip ahead to live"],["STATISTICS","Statistics"],["SUBTITLE_FORCED","Forced"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognized"],["VOLUME","Volume"]])),sn.insert("en-GB",new Map([["AD_DURATION","Ad duration"],["AD_PROGRESS","Ad [AD_ON] of [NUM_ADS]"],["AD_TIME","Ad: [AD_TIME]"],["AUTO_QUALITY","Auto"],["BACK","Back"],["CAPTIONS","Captions"],["CAST","Cast..."],["ENTER_LOOP_MODE","Loop the current video"],["ENTER_PICTURE_IN_PICTURE","Enter picture-in-picture"],["EXIT_FULL_SCREEN","Exit full screen"],["EXIT_LOOP_MODE","Stop looping the current video"],["EXIT_PICTURE_IN_PICTURE","Exit picture-in-picture"],["FAST_FORWARD","Fast-forward"],["FULL_SCREEN","Full screen"],["LANGUAGE","Language"],["LIVE","Live"],["LOOP","Loop"],["MORE_SETTINGS","More settings"],["MULTIPLE_LANGUAGES","Multiple languages"],["MUTE","Mute"],["NOT_APPLICABLE","Not applicable"],["OFF","Off"],["ON","On"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Play"],["PLAYBACK_RATE","Playback speed"],["RESOLUTION","Resolution"],["REWIND","Rewind"],["SEEK","Seek"],["SKIP_AD","Skip ad"],["SKIP_TO_LIVE","Skip ahead to live"],["UNDETERMINED_LANGUAGE","Undetermined"],["UNMUTE","Unmute"],["UNRECOGNIZED_LANGUAGE","Unrecognised"],["VOLUME","volume"]])),sn.insert("es",new Map([["AD_DURATION","Duración del anuncio"],["AD_PROGRESS","Anuncio [AD_ON] de [NUM_ADS]"],["AD_TIME","Anuncio: [AD_TIME]"],["AUTO_QUALITY","Automático"],["BACK","Atrás"],["CAPTIONS","Subtítulos"],["CAST","Enviar..."],["ENTER_LOOP_MODE","Reproducir en bucle el vídeo actual"],["ENTER_PICTURE_IN_PICTURE","Activar el modo imagen en imagen"],["EXIT_FULL_SCREEN","Salir del modo de pantalla completa"],["EXIT_LOOP_MODE","Dejar de reproducir en bucle el vídeo actual"],["EXIT_PICTURE_IN_PICTURE","Salir del modo imagen en imagen"],["FAST_FORWARD","Avanzar rápidamente"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["LOOP","Reproducir en bucle"],["MORE_SETTINGS","Más ajustes"],["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","Desactivado"],["ON","Activado"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Imagen en imagen"],["PLAY","Reproducir"],["PLAYBACK_RATE","Velocidad de reproducción"],["RESOLUTION","Resolución"],["REWIND","Rebobinar"],["SEEK","Buscar"],["SKIP_AD","Saltar anuncio"],["SKIP_TO_LIVE","Ir al vídeo en directo"],["SUBTITLE_FORCED","Forzado"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Activar sonido"],["UNRECOGNIZED_LANGUAGE","No reconocida"],["VOLUME","Volumen"]])),sn.insert("es-419",new Map([["AD_DURATION","Duración del anuncio"],["AD_PROGRESS","Anuncio [AD_ON] de [NUM_ADS]"],["AD_TIME","Anuncio: [AD_TIME]"],["AUTO_QUALITY","Automático"],["BACK","Atrás"],["CAPTIONS","Subtítulos"],["CAST","Transmitir..."],["ENTER_LOOP_MODE","Repetir indefinidamente el video actual"],["ENTER_PICTURE_IN_PICTURE","Ingresar al modo de pantalla en pantalla"],["EXIT_FULL_SCREEN","Salir de pantalla completa"],["EXIT_LOOP_MODE","Detener la repetición indefinida del video actual"],["EXIT_PICTURE_IN_PICTURE","Salir del modo de pantalla en pantalla"],["FAST_FORWARD","Avanzar"],["FULL_SCREEN","Pantalla completa"],["LANGUAGE","Idioma"],["LIVE","En directo"],["LOOP","Repetir indefinidamente"],["MORE_SETTINGS","Más opciones de configuración"],["MULTIPLE_LANGUAGES","Varios idiomas"],["MUTE","Silenciar"],["NOT_APPLICABLE","No aplicable"],["OFF","Desactivado"],["ON","Activado"],["PAUSE","Detener"],["PICTURE_IN_PICTURE","Pantalla en pantalla"],["PLAY","Reproducir"],["PLAYBACK_RATE","Velocidad de reproducción"],["RESOLUTION","Resolución"],["REWIND","Retroceder"],["SEEK","Buscar"],["SKIP_AD","Omitir anuncio"],["SKIP_TO_LIVE","Adelantar hasta la transmisión en vivo"],["SUBTITLE_FORCED","Forzado"],["UNDETERMINED_LANGUAGE","Sin especificar"],["UNMUTE","Dejar de silenciar"],["UNRECOGNIZED_LANGUAGE","No reconocida"],["VOLUME","Volumen"]])),sn.insert("fr",new Map([["AD_DURATION","Durée de l'annonce"],["AD_PROGRESS","Annonce [AD_ON] sur [NUM_ADS]"],["AD_TIME","Annonce : [AD_TIME]"],["AUTO_QUALITY","Automatique"],["BACK","Retour"],["CAPTIONS","Sous-titres"],["CAST","Caster…"],["ENTER_LOOP_MODE","Lire en boucle la vidéo en cours"],["ENTER_PICTURE_IN_PICTURE","Utiliser le mode Picture-in-Picture"],["EXIT_FULL_SCREEN","Quitter le mode plein écran"],["EXIT_LOOP_MODE","Arrêter la lecture en boucle de la vidéo en cours"],["EXIT_PICTURE_IN_PICTURE","Quitter le mode PIP (Picture-in-picture)"],["FAST_FORWARD","Avance rapide"],["FULL_SCREEN","Plein écran"],["LANGUAGE","Langue"],["LIVE","En direct"],["LOOP","Répéter"],["MORE_SETTINGS","Plus de paramètres"],["MULTIPLE_LANGUAGES","Plusieurs langues"],["MUTE","Couper le son"],["NOT_APPLICABLE","Non applicable"],["OFF","Désactivée"],["ON","Activée"],["PAUSE","Pause"],["PICTURE_IN_PICTURE","Picture-in-Picture"],["PLAY","Visionner"],["PLAYBACK_RATE","Vitesse de lecture"],["RESOLUTION","Résolution"],["REWIND","Retour arrière"],["SEEK","Chercher"],["SKIP_AD","Passer l'annonce"],["SKIP_TO_LIVE","Accéder à la partie la plus récente du direct"],["UNDETERMINED_LANGUAGE","Langue indéterminée"],["UNMUTE","Réactiver le son"],["UNRECOGNIZED_LANGUAGE","Non reconnu"],["VOLUME","Volume"]])),sn.insert("it",new Map([["AD_DURATION","Durata dell'annuncio"],["AD_PROGRESS","Annuncio [AD_ON] di [NUM_ADS]"],["AD_TIME","Annuncio: [AD_TIME]"],["AUTO_QUALITY","Automatica"],["BACK","Indietro"],["CAPTIONS","Sottotitoli"],["CAST","Trasmetti..."],["ENTER_LOOP_MODE","Riproduci in loop il video corrente"],["ENTER_PICTURE_IN_PICTURE","Attiva Picture in picture"],["EXIT_FULL_SCREEN","Esci da schermo intero"],["EXIT_LOOP_MODE","Interrompi riproduzione in loop del video corrente"],["EXIT_PICTURE_IN_PICTURE","Esci da Picture in picture"],["FAST_FORWARD","Avanti veloce"],["FULL_SCREEN","Schermo intero"],["LANGUAGE","Lingua"],["LIVE","Dal vivo"],["LOOP","Riproduci in loop"],["MORE_SETTINGS","Altre impostazioni"],["MULTIPLE_LANGUAGES","Più lingue"],["MUTE","Disattiva audio"],["NOT_APPLICABLE","Non applicabile"],["OFF","Disattivo"],["ON","Attivo"],["PAUSE","Metti in pausa"],["PICTURE_IN_PICTURE","Picture in picture"],["PLAY","Riproduci"],["PLAYBACK_RATE","Velocità di riproduzione"],["RESOLUTION","Risoluzione"],["REWIND","Riavvolgi"],["SEEK","Cerca"],["SKIP_AD","Salta annuncio"],["SKIP_TO_LIVE","Passa alla trasmissione dal vivo"],["UNDETERMINED_LANGUAGE","Indeterminata"],["UNMUTE","Riattiva audio"],["UNRECOGNIZED_LANGUAGE","Non riconosciuto"],["VOLUME","Volume"]])),sn.insert("ja",new Map([["AD_DURATION","広告再生時間"],["AD_PROGRESS","[AD_ON] 番目の広告（全 [NUM_ADS] 個）"],["AD_TIME","広告: [AD_TIME]"],["AUTO_QUALITY","自動"],["BACK","戻る"],["CAPTIONS","字幕"],["CAST","キャスト..."],["ENTER_LOOP_MODE","現在の動画をループ再生"],["ENTER_PICTURE_IN_PICTURE","ピクチャー イン ピクチャーを開始"],["EXIT_FULL_SCREEN","全画面表示を終了"],["EXIT_LOOP_MODE","現在の動画のループ再生を停止"],["EXIT_PICTURE_IN_PICTURE","ピクチャー イン ピクチャーを終了"],["FAST_FORWARD","早送り"],["FULL_SCREEN","全画面表示"],["LANGUAGE","言語"],["LIVE","ライブ"],["LOOP","ループ"],["MORE_SETTINGS","詳細設定"],["MULTIPLE_LANGUAGES","多言語"],["MUTE","ミュート"],["NOT_APPLICABLE","該当なし"],["OFF","オフ"],["ON","オン"],["PAUSE","一時停止"],["PICTURE_IN_PICTURE","ピクチャー イン ピクチャー"],["PLAY","再生"],["PLAYBACK_RATE","再生速度"],["RESOLUTION","解像度"],["REWIND","巻き戻し"],["SEEK","シーク再生"],["SKIP_AD","広告をスキップ"],["SKIP_TO_LIVE","ライブ配信までスキップ"],["UNDETERMINED_LANGUAGE","不明"],["UNMUTE","ミュートを解除"],["UNRECOGNIZED_LANGUAGE","不明"],["VOLUME","音量"]])),sn.insert("ko",new Map([["AD_DURATION","광고 기간"],["AD_PROGRESS","광고 [AD_ON]/[NUM_ADS]"],["AD_TIME","광고: [AD_TIME]"],["AUTO_QUALITY","자동"],["BACK","뒤로"],["CAPTIONS","자막"],["CAST","전송..."],["ENTER_LOOP_MODE","현재 동영상 반복 재생"],["ENTER_PICTURE_IN_PICTURE","PIP 모드 시작"],["EXIT_FULL_SCREEN","전체화면 닫기"],["EXIT_LOOP_MODE","현재 동영상 반복 재생 중지"],["EXIT_PICTURE_IN_PICTURE","PIP 모드 종료"],["FAST_FORWARD","빨리 감기"],["FULL_SCREEN","전체화면"],["LANGUAGE","언어"],["LIVE","실시간"],["LOOP","반복 재생"],["MORE_SETTINGS","설정 더보기"],["MULTIPLE_LANGUAGES","여러 언어"],["MUTE","음소거"],["NOT_APPLICABLE","해당 사항 없음"],["OFF","사용 안함"],["ON","사용"],["PAUSE","일시중지"],["PICTURE_IN_PICTURE","PIP 모드"],["PLAY","재생"],["PLAYBACK_RATE","재생 속도"],["RESOLUTION","해상도"],["REWIND","되감기"],["SEEK","찾기"],["SKIP_AD","광고 건너뛰기"],["SKIP_TO_LIVE","라이브 동영상으로 건너뛰기"],["UNDETERMINED_LANGUAGE","미정"],["UNMUTE","음소거 해제"],["UNRECOGNIZED_LANGUAGE","알 수 없음"],["VOLUME","볼륨"]])),sn.insert("nl",new Map([["AD_DURATION","Advertentieduur"],["AD_PROGRESS","Advertentie [AD_ON] van [NUM_ADS]"],["AD_TIME","Advertentie: [AD_TIME]"],["AUTO_QUALITY","Automatisch"],["BACK","Terug"],["CAPTIONS","Ondertiteling"],["CAST","Casten..."],["ENTER_LOOP_MODE","De huidige video lussen"],["ENTER_PICTURE_IN_PICTURE","Scherm-in-scherm openen"],["EXIT_FULL_SCREEN","Volledig scherm sluiten"],["EXIT_LOOP_MODE","De huidige video niet meer lussen"],["EXIT_PICTURE_IN_PICTURE","Scherm-in-scherm afsluiten"],["FAST_FORWARD","Vooruitspoelen"],["FULL_SCREEN","Volledig scherm"],["LANGUAGE","Taal"],["LIVE","Live"],["LOOP","Lussen"],["MORE_SETTINGS","Meer instellingen"],["MULTIPLE_LANGUAGES","Meerdere talen"],["MUTE","Dempen"],["NOT_APPLICABLE","Niet van toepassing"],["OFF","Uit"],["ON","Aan"],["PAUSE","Onderbreken"],["PICTURE_IN_PICTURE","Scherm-in-scherm"],["PLAY","Afspelen"],["PLAYBACK_RATE","Afspeelsnelheid"],["RESOLUTION","Resolutie"],["REWIND","Terugspoelen"],["SEEK","Zoeken"],["SKIP_AD","Advertentie overslaan"],["SKIP_TO_LIVE","Doorgaan naar live"],["UNDETERMINED_LANGUAGE","Onbepaald"],["UNMUTE","Dempen opheffen"],["UNRECOGNIZED_LANGUAGE","Onbekend"],["VOLUME","Volume"]])),sn.insert("pl",new Map([["AD_DURATION","Czas trwania reklamy"],["AD_PROGRESS","Reklama [AD_ON] z [NUM_ADS]"],["AD_TIME","Reklama: [AD_TIME]"],["AUTO_QUALITY","Automatycznie"],["BACK","Wstecz"],["CAPTIONS","Napisy"],["CAST","Przesyłaj..."],["ENTER_LOOP_MODE","Odtwarzaj bieżący film w pętli"],["ENTER_PICTURE_IN_PICTURE","Włącz tryb obrazu w obrazie"],["EXIT_FULL_SCREEN","Zamknij pełny ekran"],["EXIT_LOOP_MODE","Wyłącz odtwarzanie bieżącego filmu w pętli"],["EXIT_PICTURE_IN_PICTURE","Wyłącz tryb obrazu w obrazie"],["FAST_FORWARD","Przewiń do przodu"],["FULL_SCREEN","Pełny ekran"],["LANGUAGE","Język"],["LIVE","Na żywo"],["LOOP","Odtwarzaj w pętli"],["MORE_SETTINGS","Więcej ustawień"],["MULTIPLE_LANGUAGES","Wiele języków"],["MUTE","Wycisz"],["NOT_APPLICABLE","Nie dotyczy"],["OFF","Wyłączone"],["ON","Włączone"],["PAUSE","Wstrzymaj"],["PICTURE_IN_PICTURE","Obraz w obrazie"],["PLAY","Odtwórz"],["PLAYBACK_RATE","Szybkość odtwarzania"],["RESOLUTION","Rozdzielczość"],["REWIND","Przewiń do tyłu"],["SEEK","Szukaj"],["SKIP_AD","Pomiń reklamę"],["SKIP_TO_LIVE","Przejdź do transmisji na żywo"],["UNDETERMINED_LANGUAGE","Nie określono"],["UNMUTE","Wyłącz wyciszenie"],["UNRECOGNIZED_LANGUAGE","Nierozpoznany"],["VOLUME","Głośność"]])),sn.insert("pt-BR",new Map([["AD_DURATION","Duração do anúncio"],["AD_PROGRESS","Anúncio [AD_ON] de [NUM_ADS]"],["AD_TIME","Anúncio: [AD_TIME]"],["AUTO_QUALITY","Automática"],["BACK","Voltar"],["CAPTIONS","Legendas"],["CAST","Transmitir..."],["ENTER_LOOP_MODE","Repetir o vídeo atual"],["ENTER_PICTURE_IN_PICTURE","Entrar no modo picture-in-picture"],["EXIT_FULL_SCREEN","Sair do modo tela cheia"],["EXIT_LOOP_MODE","Parar repetição do vídeo atual"],["EXIT_PICTURE_IN_PICTURE","Sair de picture-in-picture"],["FAST_FORWARD","Avançar"],["FULL_SCREEN","Tela cheia"],["LANGUAGE","Idioma"],["LIVE","Ao vivo"],["LOOP","Repetir"],["MORE_SETTINGS","Mais definições"],["MULTIPLE_LANGUAGES","Vários idiomas"],["MUTE","Desativar som"],["NOT_APPLICABLE","Não relevante"],["OFF","Desativado"],["ON","Ativado"],["PAUSE","Pausar"],["PICTURE_IN_PICTURE","Picture-in-picture"],["PLAY","Reproduzir"],["PLAYBACK_RATE","Velocidade da reprodução"],["RESOLUTION","Resolução"],["REWIND","Retroceder"],["SEEK","Procurar"],["SKIP_AD","Pular anúncio"],["SKIP_TO_LIVE","Pular para transmissão ao vivo"],["UNDETERMINED_LANGUAGE","Indeterminado"],["UNMUTE","Ativar som"],["UNRECOGNIZED_LANGUAGE","Não reconhecido"],["VOLUME","Volume"]])),sn.insert("ru",new Map([["AD_DURATION","Продолжительность рекламы"],["AD_PROGRESS","Реклама [AD_ON] из [NUM_ADS]"],["AD_TIME","Реклама: [AD_TIME]"],["AUTO_QUALITY","Авто"],["BACK","Назад"],["CAPTIONS","Субтитры"],["CAST","Транслировать..."],["ENTER_LOOP_MODE","Зациклить текущее видео"],["ENTER_PICTURE_IN_PICTURE",'Перейти в режим "Картинка в картинке"'],["EXIT_FULL_SCREEN","Обычный режим"],["EXIT_LOOP_MODE","Отменить зацикливание текущего видео"],["EXIT_PICTURE_IN_PICTURE",'Выйти из режима "Картинка в картинке"'],["FAST_FORWARD","Перемотка вперед"],["FULL_SCREEN","Полноэкранный режим"],["LANGUAGE","Язык"],["LIVE","Прямой эфир"],["LOOP","Зациклить"],["MORE_SETTINGS","Дополнительные настройки"],["MULTIPLE_LANGUAGES","Несколько языков"],["MUTE","Отключить звук"],["NOT_APPLICABLE","Неприменимо"],["OFF","Выкл."],["ON","Вкл."],["PAUSE","Пауза"],["PICTURE_IN_PICTURE","Картинка в картинке"],["PLAY","Воспроизвести"],["PLAYBACK_RATE","Скорость воспроизведения"],["RESOLUTION","Разрешение"],["REWIND","Перемотать назад"],["SEEK","Перемотка"],["SKIP_AD","Пропустить"],["SKIP_TO_LIVE","Пропустить и перейти к прямой трансляции"],["UNDETERMINED_LANGUAGE","Не указано"],["UNMUTE","Включить звук"],["UNRECOGNIZED_LANGUAGE","Не распознано"],["VOLUME","Громкость"]])),sn.insert("th",new Map([["AD_DURATION","ระยะเวลาโฆษณา"],["AD_PROGRESS","โฆษณา [AD_ON] จาก [NUM_ADS] รายการ"],["AD_TIME","โฆษณา: [AD_TIME]"],["AUTO_QUALITY","อัตโนมัติ"],["BACK","กลับ"],["CAPTIONS","คำบรรยาย"],["CAST","แคสต์..."],["ENTER_LOOP_MODE","วนซ้ำวิดีโอปัจจุบัน"],["ENTER_PICTURE_IN_PICTURE","เข้าสู่การแสดงภาพซ้อนภาพ"],["EXIT_FULL_SCREEN","ออกจากการแสดงแบบเต็มหน้าจอ"],["EXIT_LOOP_MODE","หยุดวนซ้ำวิดีโอปัจจุบัน"],["EXIT_PICTURE_IN_PICTURE","ออกจากการแสดงภาพซ้อนภาพ"],["FAST_FORWARD","กรอไปข้างหน้า"],["FULL_SCREEN","เต็มหน้าจอ"],["LANGUAGE","ภาษา"],["LIVE","สด"],["LOOP","ลูป"],["MORE_SETTINGS","การตั้งค่าเพิ่มเติม"],["MULTIPLE_LANGUAGES","หลายภาษา"],["MUTE","ปิดเสียง"],["NOT_APPLICABLE","ไม่เกี่ยวข้อง"],["OFF","ปิด"],["ON","เปิด"],["PAUSE","หยุดชั่วคราว"],["PICTURE_IN_PICTURE","การแสดงภาพซ้อนภาพ"],["PLAY","เล่น"],["PLAYBACK_RATE","ความเร็วในการเล่น"],["RESOLUTION","ความละเอียด"],["REWIND","กรอกลับ"],["SEEK","ค้นหา"],["SKIP_AD","ข้ามโฆษณา"],["SKIP_TO_LIVE","ข้ามไปที่การถ่ายทอดสด"],["UNDETERMINED_LANGUAGE","ไม่กำหนด"],["UNMUTE","เปิดเสียง"],["UNRECOGNIZED_LANGUAGE","ที่ไม่รู้จัก"],["VOLUME","ระดับเสียง"]])),sn.insert("tr",new Map([["AD_DURATION","Reklam süresi"],["AD_PROGRESS","[AD_ON]/[NUM_ADS] reklam"],["AD_TIME","Reklam: [AD_TIME]"],["AUTO_QUALITY","Otomatik"],["BACK","Geri"],["CAPTIONS","Altyazılar"],["CAST","Yayınla..."],["ENTER_LOOP_MODE","Mevcut videoyu döngüye al"],["ENTER_PICTURE_IN_PICTURE","Pencere içinde Pencere moduna gir"],["EXIT_FULL_SCREEN","Tam ekrandan çık"],["EXIT_LOOP_MODE","Mevcut videonun döngüsünü durdur"],["EXIT_PICTURE_IN_PICTURE","Pencere İçinde Pencereden Çık"],["FAST_FORWARD","İleri sar"],["FULL_SCREEN","Tam ekran"],["LANGUAGE","Dil"],["LIVE","Canlı"],["LOOP","Döngü"],["MORE_SETTINGS","Daha fazla ayar"],["MULTIPLE_LANGUAGES","Birden çok dil"],["MUTE","Sesi kapat"],["NOT_APPLICABLE","Geçerli değil"],["OFF","Kapalı"],["ON","Açık"],["PAUSE","Duraklat"],["PICTURE_IN_PICTURE","Pencere İçinde Pencere"],["PLAY","Oynat"],["PLAYBACK_RATE","Çalma hızı"],["RESOLUTION","Çözünürlük"],["REWIND","Geri sar"],["SEEK","Ara"],["SKIP_AD","Reklamı Atla"],["SKIP_TO_LIVE","Canlı yayına atla"],["UNDETERMINED_LANGUAGE","Belirsiz"],["UNMUTE","Sesi aç"],["UNRECOGNIZED_LANGUAGE","Tanınmayan"],["VOLUME","Ses"]])),sn.insert("zh",new Map([["AD_DURATION","广告持续时间"],["AD_PROGRESS","广告 [AD_ON]/[NUM_ADS]"],["AD_TIME","广告：[AD_TIME]"],["AUTO_QUALITY","自动"],["BACK","返回"],["CAPTIONS","字幕"],["CAST","投射…"],["ENTER_LOOP_MODE","循环播放当前视频"],["ENTER_PICTURE_IN_PICTURE","进入“画中画”模式"],["EXIT_FULL_SCREEN","退出全屏模式"],["EXIT_LOOP_MODE","停止循环播放当前视频"],["EXIT_PICTURE_IN_PICTURE","退出“画中画”模式"],["FAST_FORWARD","快进"],["FULL_SCREEN","全屏"],["LANGUAGE","语言"],["LIVE","直播"],["LOOP","循环播放"],["MORE_SETTINGS","更多设置"],["MULTIPLE_LANGUAGES","多种语言"],["MUTE","静音"],["NOT_APPLICABLE","不适用"],["OFF","关闭"],["ON","开启"],["PAUSE","暂停"],["PICTURE_IN_PICTURE","画中画"],["PLAY","播放"],["PLAYBACK_RATE","播放速度"],["RESOLUTION","分辨率"],["REWIND","快退"],["SEEK","进度"],["SKIP_AD","跳过广告"],["SKIP_TO_LIVE","跳至当前直播"],["UNDETERMINED_LANGUAGE","未确定"],["UNMUTE","取消静音"],["UNRECOGNIZED_LANGUAGE","无法识别"],["VOLUME","音量"]])),sn.insert("zh-TW",new Map([["AD_DURATION","廣告長度"],["AD_PROGRESS","廣告 [AD_ON]/[NUM_ADS]"],["AD_TIME","廣告：[AD_TIME]"],["AUTO_QUALITY","自動"],["BACK","返回"],["CAPTIONS","字幕"],["CAST","投放..."],["ENTER_LOOP_MODE","循環播放目前的影片"],["ENTER_PICTURE_IN_PICTURE","進入子母畫面"],["EXIT_FULL_SCREEN","退出全螢幕模式"],["EXIT_LOOP_MODE","停止循環播放目前的影片"],["EXIT_PICTURE_IN_PICTURE","離開子母畫面"],["FAST_FORWARD","快轉"],["FULL_SCREEN","全螢幕"],["LANGUAGE","語言"],["LIVE","直播"],["LOOP","循環播放"],["MORE_SETTINGS","顯示更多設定"],["MULTIPLE_LANGUAGES","多種語言"],["MUTE","靜音"],["NOT_APPLICABLE","不適用"],["OFF","關閉"],["ON","開啟"],["PAUSE","暫停"],["PICTURE_IN_PICTURE","子母畫面"],["PLAY","播放"],["PLAYBACK_RATE","播放速度"],["RESOLUTION","解析度"],["REWIND","倒轉"],["SEEK","搜尋"],["SKIP_AD","略過廣告"],["SKIP_TO_LIVE","跳至当前直播"],["UNDETERMINED_LANGUAGE","不明"],["UNMUTE","取消靜音"],["UNRECOGNIZED_LANGUAGE","無法辨識"],["VOLUME","音量"]]))},shaka.ui.Locales.Ids={FAST_FORWARD:"FAST_FORWARD",AD_TIME:"AD_TIME",REWIND:"REWIND",UNRECOGNIZED_LANGUAGE:"UNRECOGNIZED_LANGUAGE",NOT_APPLICABLE:"NOT_APPLICABLE",STATISTICS:"STATISTICS",AD_DURATION:"AD_DURATION",LOOP:"LOOP",EXIT_FULL_SCREEN:"EXIT_FULL_SCREEN",REPLAY:"REPLAY",VOLUME:"VOLUME",CAST:"CAST",LIVE:"LIVE",MORE_SETTINGS:"MORE_SETTINGS",ENTER_PICTURE_IN_PICTURE:"ENTER_PICTURE_IN_PICTURE",BACK:"BACK",PLAYBACK_RATE:"PLAYBACK_RATE",EXIT_PICTURE_IN_PICTURE:"EXIT_PICTURE_IN_PICTURE",LANGUAGE:"LANGUAGE",ENTER_LOOP_MODE:"ENTER_LOOP_MODE",UNMUTE:"UNMUTE",MUTE:"MUTE",PAUSE:"PAUSE",RESOLUTION:"RESOLUTION",AIRPLAY:"AIRPLAY",AD_PROGRESS:"AD_PROGRESS",AUTO_QUALITY:"AUTO_QUALITY",UNDETERMINED_LANGUAGE:"UNDETERMINED_LANGUAGE",SKIP_AD:"SKIP_AD",EXIT_LOOP_MODE:"EXIT_LOOP_MODE",PLAY:"PLAY",FULL_SCREEN:"FULL_SCREEN",MULTIPLE_LANGUAGES:"MULTIPLE_LANGUAGES",CAPTIONS:"CAPTIONS",SEEK:"SEEK",SKIP_TO_LIVE:"SKIP_TO_LIVE",SUBTITLE_FORCED:"SUBTITLE_FORCED",QUALITY:"QUALITY",OFF:"OFF",PICTURE_IN_PICTURE:"PICTURE_IN_PICTURE",ON:"ON"},shaka.abr={},shaka.abr.Ewma=function(sn){goog.asserts.assert(0<sn,"expected halfLife to be positive"),this.alpha_=Math.exp(Math.log(.5)/sn),this.totalWeight_=this.estimate_=0},shaka.abr.Ewma.prototype.updateAlpha=function(sn){goog.asserts.assert(0<sn,"expected halfLife to be positive"),this.alpha_=Math.exp(Math.log(.5)/sn)},shaka.abr.Ewma.prototype.sample=function(sn,ln){var cn=Math.pow(this.alpha_,sn);ln=ln*(1-cn)+cn*this.estimate_,isNaN(ln)||(this.estimate_=ln,this.totalWeight_+=sn)},shaka.abr.Ewma.prototype.getEstimate=function(){return this.estimate_/(1-Math.pow(this.alpha_,this.totalWeight_))},shaka.abr.EwmaBandwidthEstimator=function(){this.fast_=new shaka.abr.Ewma(2),this.slow_=new shaka.abr.Ewma(5),this.bytesSampled_=0,this.minTotalBytes_=128e3,this.minBytes_=16e3},shaka.abr.EwmaBandwidthEstimator.prototype.configure=function(sn){this.minTotalBytes_=sn.minTotalBytes,this.minBytes_=sn.minBytes,this.fast_.updateAlpha(sn.fastHalfLife),this.slow_.updateAlpha(sn.slowHalfLife)},shaka.abr.EwmaBandwidthEstimator.prototype.sample=function(sn,ln){if(!(ln<this.minBytes_)){var cn=8e3*ln/sn;sn/=1e3,this.bytesSampled_+=ln,this.fast_.sample(sn,cn),this.slow_.sample(sn,cn)}},shaka.abr.EwmaBandwidthEstimator.prototype.getBandwidthEstimate=function(sn){return this.bytesSampled_<this.minTotalBytes_?sn:Math.min(this.fast_.getEstimate(),this.slow_.getEstimate())},shaka.abr.EwmaBandwidthEstimator.prototype.hasGoodEstimate=function(){return this.bytesSampled_>=this.minTotalBytes_},shaka.media={},shaka.media.Capabilities=function(){},shaka.media.Capabilities.isTypeSupported=function(sn){var ln=shaka.media.Capabilities.MediaSourceTypeSupportMap;if(ln.has(sn))return ln.get(sn);var cn=MediaSource.isTypeSupported(sn);return ln.set(sn,cn),cn},shaka.media.Capabilities.MediaSourceTypeSupportMap=new Map,shaka.util.ArrayUtils=function(){},shaka.util.ArrayUtils.defaultEquals=function(sn,ln){return typeof sn=="number"&&typeof ln=="number"&&isNaN(sn)&&isNaN(ln)?!0:sn===ln},shaka.util.ArrayUtils.remove=function(sn,ln){ln=sn.indexOf(ln),-1<ln&&sn.splice(ln,1)},shaka.util.ArrayUtils.count=function(sn,ln){var cn=0;sn=$jscomp.makeIterator(sn);for(var dn=sn.next();!dn.done;dn=sn.next())cn+=ln(dn.value)?1:0;return cn},shaka.util.ArrayUtils.hasSameElements=function(sn,ln,cn){if(cn||(cn=shaka.util.ArrayUtils.defaultEquals),sn.length!=ln.length)return!1;ln=ln.slice();var dn={};sn=$jscomp.makeIterator(sn);for(var pn=sn.next();!pn.done;dn={$jscomp$loop$prop$item$680:dn.$jscomp$loop$prop$item$680},pn=sn.next()){if(dn.$jscomp$loop$prop$item$680=pn.value,pn=ln.findIndex(function(vn){return function(kn){return cn(vn.$jscomp$loop$prop$item$680,kn)}}(dn)),pn==-1)return!1;ln[pn]=ln[ln.length-1],ln.pop()}return ln.length==0},shaka.util.ArrayUtils.equal=function(sn,ln,cn){if(cn||(cn=shaka.util.ArrayUtils.defaultEquals),sn.length!=ln.length)return!1;for(var dn=0;dn<sn.length;dn++)if(!cn(sn[dn],ln[dn]))return!1;return!0},shaka.text={},shaka.text.Cue=function(sn,ln,cn){var dn=shaka.text.Cue;this.startTime=sn,this.direction=dn.direction.HORIZONTAL_LEFT_TO_RIGHT,this.endTime=ln,this.payload=cn,this.region=new shaka.text.CueRegion,this.position=null,this.positionAlign=dn.positionAlign.AUTO,this.size=0,this.textAlign=dn.textAlign.CENTER,this.writingMode=dn.writingMode.HORIZONTAL_TOP_TO_BOTTOM,this.lineInterpretation=dn.lineInterpretation.LINE_NUMBER,this.line=null,this.lineHeight="",this.lineAlign=dn.lineAlign.START,this.displayAlign=dn.displayAlign.AFTER,this.fontSize=this.textStrokeWidth=this.textStrokeColor=this.textShadow=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=dn.fontWeight.NORMAL,this.fontStyle=dn.fontStyle.NORMAL,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textDecoration=[],this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.cellResolution={columns:32,rows:15}},shaka.text.Cue.lineBreak=function(sn,ln){return sn=new shaka.text.Cue(sn,ln,""),sn.lineBreak=!0,sn},shaka.text.Cue.prototype.clone=function(){var sn=new shaka.text.Cue(0,0,""),ln;for(ln in this)sn[ln]=this[ln],sn[ln]&&sn[ln].constructor==Array&&(sn[ln]=sn[ln].slice());return sn},shaka.text.Cue.equal=function(sn,ln){if(sn.startTime!=ln.startTime||sn.endTime!=ln.endTime||sn.payload!=ln.payload)return!1;for(var cn in sn)if(cn!="startTime"&&cn!="endTime"&&cn!="payload"){if(cn=="nestedCues"){if(!shaka.util.ArrayUtils.equal(sn.nestedCues,ln.nestedCues,shaka.text.Cue.equal))return!1}else if(cn=="region"||cn=="cellResolution"){for(var dn in sn[cn])if(sn[cn][dn]!=ln[cn][dn])return!1}else if(Array.isArray(sn[cn])){if(!shaka.util.ArrayUtils.equal(sn[cn],ln[cn]))return!1}else if(sn[cn]!=ln[cn])return!1}return!0},goog.exportSymbol("shaka.text.Cue",shaka.text.Cue),shaka.text.Cue.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:"auto"},goog.exportProperty(shaka.text.Cue,"positionAlign",shaka.text.Cue.positionAlign),shaka.text.Cue.textAlign={LEFT:"left",RIGHT:"right",CENTER:"center",START:"start",END:"end"},goog.exportProperty(shaka.text.Cue,"textAlign",shaka.text.Cue.textAlign),shaka.text.Cue.displayAlign={BEFORE:"before",CENTER:"center",AFTER:"after"},goog.exportProperty(shaka.text.Cue,"displayAlign",shaka.text.Cue.displayAlign),shaka.text.Cue.direction={HORIZONTAL_LEFT_TO_RIGHT:"ltr",HORIZONTAL_RIGHT_TO_LEFT:"rtl"},goog.exportProperty(shaka.text.Cue,"direction",shaka.text.Cue.direction),shaka.text.Cue.writingMode={HORIZONTAL_TOP_TO_BOTTOM:"horizontal-tb",VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"},goog.exportProperty(shaka.text.Cue,"writingMode",shaka.text.Cue.writingMode),shaka.text.Cue.lineInterpretation={LINE_NUMBER:0,PERCENTAGE:1},goog.exportProperty(shaka.text.Cue,"lineInterpretation",shaka.text.Cue.lineInterpretation),shaka.text.Cue.lineAlign={CENTER:"center",START:"start",END:"end"},goog.exportProperty(shaka.text.Cue,"lineAlign",shaka.text.Cue.lineAlign),shaka.text.Cue.defaultTextColor={white:"#FFF",lime:"#0F0",cyan:"#0FF",red:"#F00",yellow:"#FF0",magenta:"#F0F",blue:"#00F",black:"#000"},goog.exportProperty(shaka.text.Cue,"defaultTextColor",shaka.text.Cue.defaultTextColor),shaka.text.Cue.defaultTextBackgroundColor={bg_white:"#FFF",bg_lime:"#0F0",bg_cyan:"#0FF",bg_red:"#F00",bg_yellow:"#FF0",bg_magenta:"#F0F",bg_blue:"#00F",bg_black:"#000"},goog.exportProperty(shaka.text.Cue,"defaultTextBackgroundColor",shaka.text.Cue.defaultTextBackgroundColor),shaka.text.Cue.fontWeight={NORMAL:400,BOLD:700},goog.exportProperty(shaka.text.Cue,"fontWeight",shaka.text.Cue.fontWeight),shaka.text.Cue.fontStyle={NORMAL:"normal",ITALIC:"italic",OBLIQUE:"oblique"},goog.exportProperty(shaka.text.Cue,"fontStyle",shaka.text.Cue.fontStyle),shaka.text.Cue.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"},goog.exportProperty(shaka.text.Cue,"textDecoration",shaka.text.Cue.textDecoration),shaka.text.CueRegion=function(){var sn=shaka.text.CueRegion;this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=sn.units.PERCENTAGE,this.scroll=sn.scrollMode.NONE},goog.exportSymbol("shaka.text.CueRegion",shaka.text.CueRegion),shaka.text.CueRegion.units={PX:0,PERCENTAGE:1,LINES:2},goog.exportProperty(shaka.text.CueRegion,"units",shaka.text.CueRegion.units),shaka.text.CueRegion.scrollMode={NONE:"",UP:"up"},goog.exportProperty(shaka.text.CueRegion,"scrollMode",shaka.text.CueRegion.scrollMode),shaka.util.BufferUtils=function(){},shaka.util.BufferUtils.equal=function(sn,ln){var cn=shaka.util.BufferUtils;if(!sn&&!ln)return!0;if(!sn||!ln||sn.byteLength!=ln.byteLength)return!1;if(cn.unsafeGetArrayBuffer_(sn)==cn.unsafeGetArrayBuffer_(ln)&&(sn.byteOffset||0)==(ln.byteOffset||0))return!0;cn=shaka.util.BufferUtils.toUint8(sn),ln=shaka.util.BufferUtils.toUint8(ln);for(var dn=0;dn<sn.byteLength;dn++)if(cn[dn]!=ln[dn])return!1;return!0},shaka.util.BufferUtils.unsafeGetArrayBuffer_=function(sn){return sn instanceof ArrayBuffer?sn:sn.buffer},shaka.util.BufferUtils.toArrayBuffer=function(sn){return sn instanceof ArrayBuffer?sn:sn.byteOffset==0&&sn.byteLength==sn.buffer.byteLength?sn.buffer:new Uint8Array(sn).buffer},shaka.util.BufferUtils.toUint8=function(sn,ln,cn){return cn=cn===void 0?1/0:cn,shaka.util.BufferUtils.view_(sn,ln===void 0?0:ln,cn,Uint8Array)},shaka.util.BufferUtils.toDataView=function(sn,ln,cn){return cn=cn===void 0?1/0:cn,shaka.util.BufferUtils.view_(sn,ln===void 0?0:ln,cn,DataView)},shaka.util.BufferUtils.view_=function(sn,ln,cn,dn){var pn=shaka.util.BufferUtils.unsafeGetArrayBuffer_(sn),vn=(sn.byteOffset||0)+sn.byteLength;return sn=Math.max(0,Math.min((sn.byteOffset||0)+ln,vn)),new dn(pn,sn,Math.min(sn+Math.max(cn,0),vn)-sn)},goog.exportSymbol("shaka.util.BufferUtils",shaka.util.BufferUtils),goog.exportProperty(shaka.util.BufferUtils,"toDataView",shaka.util.BufferUtils.toDataView),goog.exportProperty(shaka.util.BufferUtils,"toUint8",shaka.util.BufferUtils.toUint8),goog.exportProperty(shaka.util.BufferUtils,"toArrayBuffer",shaka.util.BufferUtils.toArrayBuffer),goog.exportProperty(shaka.util.BufferUtils,"equal",shaka.util.BufferUtils.equal),shaka.util.IDestroyable=function(){},shaka.util.IDestroyable.prototype.destroy=function(){},shaka.util.PublicPromise=function(){var sn,ln,cn=new Promise(function(dn,pn){sn=dn,ln=pn});return cn.resolve=sn,cn.reject=ln,cn},shaka.util.PublicPromise.prototype.resolve=function(sn){},shaka.util.PublicPromise.prototype.reject=function(sn){},shaka.util.Lazy=function(sn){this.gen_=sn,this.value_=void 0},shaka.util.Lazy.prototype.value=function(){return this.value_==null&&(this.value_=this.gen_(),goog.asserts.assert(this.value_!=null,"Unable to create lazy value")),this.value_},shaka.util.Lazy.prototype.reset=function(){this.value_=void 0},shaka.util.DelayedTick=function(sn){this.onTick_=sn,this.cancelPending_=null},shaka.util.DelayedTick.prototype.tickAfter=function(sn){var ln=this;this.stop();var cn=!0,dn=null;return this.cancelPending_=function(){window.clearTimeout(dn),cn=!1},dn=window.setTimeout(function(){cn&&ln.onTick_()},1e3*sn),this},shaka.util.DelayedTick.prototype.stop=function(){this.cancelPending_&&(this.cancelPending_(),this.cancelPending_=null)},shaka.util.Timer=function(sn){this.onTick_=sn,this.ticker_=null},shaka.util.Timer.prototype.tickNow=function(){return this.stop(),this.onTick_(),this},shaka.util.Timer.prototype.tickAfter=function(sn){var ln=this;return this.stop(),this.ticker_=new shaka.util.DelayedTick(function(){ln.onTick_()}).tickAfter(sn),this},shaka.util.Timer.prototype.tickEvery=function(sn){var ln=this;return this.stop(),goog.DEBUG&&shaka.util.Timer.activeTimers.set(this,Error("Timer created").stack),this.ticker_=new shaka.util.DelayedTick(function(){ln.ticker_.tickAfter(sn),ln.onTick_()}).tickAfter(sn),this},shaka.util.Timer.prototype.stop=function(){this.ticker_&&(this.ticker_.stop(),this.ticker_=null),goog.DEBUG&&shaka.util.Timer.activeTimers.delete(this)},goog.exportSymbol("shaka.util.Timer",shaka.util.Timer),goog.exportProperty(shaka.util.Timer.prototype,"stop",shaka.util.Timer.prototype.stop),goog.exportProperty(shaka.util.Timer.prototype,"tickEvery",shaka.util.Timer.prototype.tickEvery),goog.exportProperty(shaka.util.Timer.prototype,"tickAfter",shaka.util.Timer.prototype.tickAfter),goog.exportProperty(shaka.util.Timer.prototype,"tickNow",shaka.util.Timer.prototype.tickNow),goog.DEBUG&&(shaka.util.Timer.activeTimers=new Map),shaka.util.Platform=function(){},shaka.util.Platform.supportsMediaSource=function(){return!!(window.MediaSource&&MediaSource.isTypeSupported)},shaka.util.Platform.supportsMediaType=function(sn){return shaka.util.Platform.anyMediaElement().canPlayType(sn)!=""},shaka.util.Platform.isEdge=function(){return!!navigator.userAgent.match(/Edge?\//)},shaka.util.Platform.isLegacyEdge=function(){return!!navigator.userAgent.match(/Edge\//)},shaka.util.Platform.isIE=function(){return shaka.util.Platform.userAgentContains_("Trident/")},shaka.util.Platform.isXboxOne=function(){return shaka.util.Platform.userAgentContains_("Xbox One")},shaka.util.Platform.isTizen=function(){return shaka.util.Platform.userAgentContains_("Tizen")},shaka.util.Platform.isTizen4=function(){return shaka.util.Platform.userAgentContains_("Tizen 4")},shaka.util.Platform.isTizen3=function(){return shaka.util.Platform.userAgentContains_("Tizen 3")},shaka.util.Platform.isTizen2=function(){return shaka.util.Platform.userAgentContains_("Tizen 2")},shaka.util.Platform.isWebOS=function(){return shaka.util.Platform.userAgentContains_("Web0S")},shaka.util.Platform.isWebOS3=function(){return shaka.util.Platform.userAgentContains_("Web0S")&&shaka.util.Platform.userAgentContains_("Chrome/38.0.2125.122 Safari/537.36")},shaka.util.Platform.isChromecast=function(){return shaka.util.Platform.userAgentContains_("CrKey")},shaka.util.Platform.chromeVersion=function(){if(!shaka.util.Platform.isChrome())return null;var sn=navigator.userAgent.match(/Chrome\/(\d+)/);return sn?parseInt(sn[1],10):null},shaka.util.Platform.isChrome=function(){return shaka.util.Platform.userAgentContains_("Chrome")&&!shaka.util.Platform.isEdge()},shaka.util.Platform.isApple=function(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!shaka.util.Platform.isTizen()&&!shaka.util.Platform.isEOS()&&!shaka.util.Platform.isVirginMedia()&&!shaka.util.Platform.isPS4()&&!shaka.util.Platform.isAmazonFireTV()},shaka.util.Platform.isPS5=function(){return shaka.util.Platform.userAgentContains_("PlayStation 5")},shaka.util.Platform.isPS4=function(){return shaka.util.Platform.userAgentContains_("PlayStation 4")},shaka.util.Platform.isHisense=function(){return shaka.util.Platform.userAgentContains_("Hisense")||shaka.util.Platform.userAgentContains_("VIDAA")},shaka.util.Platform.isVirginMedia=function(){return shaka.util.Platform.userAgentContains_("VirginMedia")},shaka.util.Platform.isAmazonFireTV=function(){return shaka.util.Platform.userAgentContains_("AFT")},shaka.util.Platform.safariVersion=function(){if(!shaka.util.Platform.isApple())return null;var sn=navigator.userAgent.match(/Version\/(\d+)/);return sn||(sn=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(sn[1],10):null},shaka.util.Platform.isSafari=function(){return!!shaka.util.Platform.safariVersion()},shaka.util.Platform.isEOS=function(){return shaka.util.Platform.userAgentContains_("PC=EOS")},shaka.util.Platform.isMobile=function(){return/(?:iPhone|iPad|iPod|Android)/.test(navigator.userAgent)?!0:shaka.util.Platform.isApple()&&1<navigator.maxTouchPoints},shaka.util.Platform.userAgentContains_=function(sn){return(navigator.userAgent||"").includes(sn)},shaka.util.Platform.anyMediaElement=function(){var sn=shaka.util.Platform;return sn.cachedMediaElement_||(sn.cacheExpirationTimer_||(sn.cacheExpirationTimer_=new shaka.util.Timer(function(){sn.cachedMediaElement_=null})),sn.cachedMediaElement_=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0],sn.cachedMediaElement_||(sn.cachedMediaElement_=document.createElement("video")),sn.cacheExpirationTimer_.tickAfter(1)),sn.cachedMediaElement_},shaka.util.Platform.requiresEncryptionInfoInAllInitSegments=function(){var sn=shaka.util.Platform;return sn.isTizen()||sn.isXboxOne()},shaka.util.Platform.isMediaKeysPolyfilled=function(){return!!window.shakaMediaKeysPolyfill},shaka.util.Platform.cacheExpirationTimer_=null,shaka.util.Platform.cachedMediaElement_=null,shaka.util.StringUtils=function(){},shaka.util.StringUtils.fromUTF8=function(sn){if(!sn)return"";if(sn=shaka.util.BufferUtils.toUint8(sn),sn[0]==239&&sn[1]==187&&sn[2]==191&&(sn=sn.subarray(3)),window.TextDecoder&&!shaka.util.Platform.isPS4())return sn=new TextDecoder().decode(sn),sn.includes("�")&&shaka.log.alwaysError('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),sn;for(var ln="",cn=0;cn<sn.length;++cn){var dn=65533;if(sn[cn]&128?sn.length>=cn+2&&(sn[cn]&224)==192&&(sn[cn+1]&192)==128?(dn=(sn[cn]&31)<<6|sn[cn+1]&63,cn+=1):sn.length>=cn+3&&(sn[cn]&240)==224&&(sn[cn+1]&192)==128&&(sn[cn+2]&192)==128?(dn=(sn[cn]&15)<<12|(sn[cn+1]&63)<<6|sn[cn+2]&63,cn+=2):sn.length>=cn+4&&(sn[cn]&241)==240&&(sn[cn+1]&192)==128&&(sn[cn+2]&192)==128&&(sn[cn+3]&192)==128&&(dn=(sn[cn]&7)<<18|(sn[cn+1]&63)<<12|(sn[cn+2]&63)<<6|sn[cn+3]&63,cn+=3):dn=sn[cn],65535>=dn)ln+=String.fromCharCode(dn);else{dn-=65536;var pn=dn&1023;ln+=String.fromCharCode(55296+(dn>>10)),ln+=String.fromCharCode(56320+pn)}}return ln},shaka.util.StringUtils.fromUTF16=function(sn,ln,cn){if(!sn)return"";if(!cn&&sn.byteLength%2!=0)throw shaka.log.error("Data has an incorrect length, must be even."),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.BAD_ENCODING);cn=Math.floor(sn.byteLength/2);var dn=new Uint16Array(cn);sn=shaka.util.BufferUtils.toDataView(sn);for(var pn=0;pn<cn;pn++)dn[pn]=sn.getUint16(2*pn,ln);return shaka.util.StringUtils.fromCharCode(dn)},shaka.util.StringUtils.fromBytesAutoDetect=function(sn){var ln=shaka.util.StringUtils;if(!sn)return"";var cn=shaka.util.BufferUtils.toUint8(sn);if(cn[0]==239&&cn[1]==187&&cn[2]==191)return ln.fromUTF8(cn);if(cn[0]==254&&cn[1]==255)return ln.fromUTF16(cn.subarray(2),!1);if(cn[0]==255&&cn[1]==254)return ln.fromUTF16(cn.subarray(2),!0);var dn=function(pn){return cn.byteLength<=pn||32<=cn[pn]&&126>=cn[pn]};if(shaka.log.debug("Unable to find byte-order-mark, making an educated guess."),cn[0]==0&&cn[2]==0)return ln.fromUTF16(sn,!1);if(cn[1]==0&&cn[3]==0)return ln.fromUTF16(sn,!0);if(dn(0)&&dn(1)&&dn(2)&&dn(3))return ln.fromUTF8(sn);throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.UNABLE_TO_DETECT_ENCODING)},shaka.util.StringUtils.toUTF8=function(sn){if(window.TextEncoder&&!shaka.util.Platform.isPS4()){var ln=new TextEncoder;return shaka.util.BufferUtils.toArrayBuffer(ln.encode(sn))}sn=encodeURIComponent(sn),sn=unescape(sn),ln=new Uint8Array(sn.length);for(var cn=0;cn<sn.length;cn++)ln[cn]=sn[cn].charCodeAt(0);return shaka.util.BufferUtils.toArrayBuffer(ln)},shaka.util.StringUtils.toUTF16=function(sn,ln){for(var cn=new ArrayBuffer(2*sn.length),dn=new DataView(cn),pn=0;pn<sn.length;++pn){var vn=sn.charCodeAt(pn);dn.setUint16(2*pn,vn,ln)}return cn},shaka.util.StringUtils.fromCharCode=function(sn){return shaka.util.StringUtils.fromCharCodeImpl_.value()(sn)},shaka.util.StringUtils.resetFromCharCode=function(){shaka.util.StringUtils.fromCharCodeImpl_.reset()},goog.exportSymbol("shaka.util.StringUtils",shaka.util.StringUtils),goog.exportProperty(shaka.util.StringUtils,"resetFromCharCode",shaka.util.StringUtils.resetFromCharCode),goog.exportProperty(shaka.util.StringUtils,"toUTF16",shaka.util.StringUtils.toUTF16),goog.exportProperty(shaka.util.StringUtils,"toUTF8",shaka.util.StringUtils.toUTF8),goog.exportProperty(shaka.util.StringUtils,"fromBytesAutoDetect",shaka.util.StringUtils.fromBytesAutoDetect),goog.exportProperty(shaka.util.StringUtils,"fromUTF16",shaka.util.StringUtils.fromUTF16),goog.exportProperty(shaka.util.StringUtils,"fromUTF8",shaka.util.StringUtils.fromUTF8),shaka.util.StringUtils.fromCharCodeImpl_=new shaka.util.Lazy(function(){for(var sn=function(cn){try{var dn=new Uint8Array(cn),pn=String.fromCharCode.apply(null,dn);return goog.asserts.assert(pn,"Should get value"),0<pn.length}catch{return!1}},ln={$jscomp$loop$prop$size$682:65536};0<ln.$jscomp$loop$prop$size$682;ln={$jscomp$loop$prop$size$682:ln.$jscomp$loop$prop$size$682},ln.$jscomp$loop$prop$size$682/=2)if(sn(ln.$jscomp$loop$prop$size$682))return function(cn){return function(dn){for(var pn="",vn=0;vn<dn.length;vn+=cn.$jscomp$loop$prop$size$682){var kn=dn.subarray(vn,vn+cn.$jscomp$loop$prop$size$682);pn+=String.fromCharCode.apply(null,kn)}return pn}}(ln);return goog.asserts.assert(!1,"Unable to create a fromCharCode method"),null}),shaka.util.Uint8ArrayUtils=function(){},shaka.util.Uint8ArrayUtils.toStandardBase64=function(sn){return sn=shaka.util.StringUtils.fromCharCode(shaka.util.BufferUtils.toUint8(sn)),btoa(sn)},shaka.util.Uint8ArrayUtils.toBase64=function(sn,ln){return ln=ln??!0,sn=shaka.util.Uint8ArrayUtils.toStandardBase64(sn).replace(/\+/g,"-").replace(/\//g,"_"),ln?sn:sn.replace(/[=]*$/,"")},shaka.util.Uint8ArrayUtils.fromBase64=function(sn){sn=window.atob(sn.replace(/-/g,"+").replace(/_/g,"/"));for(var ln=new Uint8Array(sn.length),cn=0;cn<sn.length;++cn)ln[cn]=sn.charCodeAt(cn);return ln},shaka.util.Uint8ArrayUtils.fromHex=function(sn){for(var ln=sn.length/2,cn=new Uint8Array(ln),dn=0;dn<ln;dn++)cn[dn]=window.parseInt(sn.substr(2*dn,2),16);return cn},shaka.util.Uint8ArrayUtils.toHex=function(sn){var ln=shaka.util.BufferUtils.toUint8(sn);sn="",ln=$jscomp.makeIterator(ln);for(var cn=ln.next();!cn.done;cn=ln.next())cn=cn.value,cn=cn.toString(16),cn.length==1&&(cn="0"+cn),sn+=cn;return sn},shaka.util.Uint8ArrayUtils.concat=function(){for(var sn=$jscomp.getRestArguments.apply(0,arguments),ln=0,cn=$jscomp.makeIterator(sn),dn=cn.next();!dn.done;dn=cn.next())ln+=dn.value.byteLength;for(ln=new Uint8Array(ln),cn=0,sn=$jscomp.makeIterator(sn),dn=sn.next();!dn.done;dn=sn.next())dn=dn.value,ln.set(shaka.util.BufferUtils.toUint8(dn),cn),cn+=dn.byteLength;return ln},goog.exportSymbol("shaka.util.Uint8ArrayUtils",shaka.util.Uint8ArrayUtils),goog.exportProperty(shaka.util.Uint8ArrayUtils,"concat",shaka.util.Uint8ArrayUtils.concat),goog.exportProperty(shaka.util.Uint8ArrayUtils,"toHex",shaka.util.Uint8ArrayUtils.toHex),goog.exportProperty(shaka.util.Uint8ArrayUtils,"fromHex",shaka.util.Uint8ArrayUtils.fromHex),goog.exportProperty(shaka.util.Uint8ArrayUtils,"fromBase64",shaka.util.Uint8ArrayUtils.fromBase64),goog.exportProperty(shaka.util.Uint8ArrayUtils,"toBase64",shaka.util.Uint8ArrayUtils.toBase64),goog.exportProperty(shaka.util.Uint8ArrayUtils,"toStandardBase64",shaka.util.Uint8ArrayUtils.toStandardBase64),shaka.dependencies=function(){},shaka.dependencies.add=function(sn,ln){if(!shaka.dependencies.Allowed[sn])throw Error(sn+" is not supported");shaka.dependencies.dependencies_.set(sn,function(){return ln})},shaka.dependencies.has=function(sn){return shaka.dependencies.dependencies_.has(sn)},shaka.dependencies.muxjs=function(){return shaka.dependencies.dependencies_.get(shaka.dependencies.Allowed.muxjs)()},goog.exportSymbol("shaka.dependencies",shaka.dependencies),goog.exportProperty(shaka.dependencies,"has",shaka.dependencies.has),goog.exportProperty(shaka.dependencies,"add",shaka.dependencies.add),shaka.dependencies.Allowed={muxjs:"muxjs"},goog.exportProperty(shaka.dependencies,"Allowed",shaka.dependencies.Allowed),shaka.dependencies.dependencies_=new Map([[shaka.dependencies.Allowed.muxjs,function(){return window.muxjs}]]),shaka.media.Transmuxer=function(sn){var ln=this;this.originalMimeType_=sn,this.muxjs_=shaka.dependencies.muxjs(),this.transmuxPromise_=this.muxTransmuxer_=null,this.transmuxedData_=[],this.captions_=[],this.isTransmuxing_=!1,this.muxjs_&&(this.muxTransmuxer_=new this.muxjs_.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.muxTransmuxer_.on("data",function(cn){return ln.onTransmuxed_(cn)}),this.muxTransmuxer_.on("done",function(){return ln.onTransmuxDone_()}))},shaka.media.Transmuxer.prototype.destroy=function(){return this.muxTransmuxer_&&this.muxTransmuxer_.dispose(),this.muxTransmuxer_=null,Promise.resolve()},shaka.media.Transmuxer.isSupported=function(sn,ln){var cn=shaka.media.Transmuxer,dn=shaka.media.Capabilities,pn=cn.isTsContainer_(sn),vn=cn.isAacContainer_(sn);return!shaka.dependencies.muxjs()||!pn&&!vn?!1:vn?dn.isTypeSupported(cn.convertAacCodecs_()):ln?dn.isTypeSupported(cn.convertTsCodecs_(ln,sn)):(pn=shaka.util.ManifestParserUtils.ContentType,ln=cn.convertTsCodecs_(pn.AUDIO,sn),sn=cn.convertTsCodecs_(pn.VIDEO,sn),dn.isTypeSupported(ln)||dn.isTypeSupported(sn))},shaka.media.Transmuxer.isAacContainer_=function(sn){return sn.toLowerCase().split(";")[0]=="audio/aac"},shaka.media.Transmuxer.isTsContainer_=function(sn){return sn.toLowerCase().split(";")[0].split("/")[1]=="mp2t"},shaka.media.Transmuxer.convertCodecs=function(sn,ln){var cn=shaka.media.Transmuxer;return cn.isAacContainer_(ln)?cn.convertAacCodecs_():cn.isTsContainer_(ln)?cn.convertTsCodecs_(sn,ln):ln},shaka.media.Transmuxer.convertAacCodecs_=function(){return'audio/mp4; codecs="mp4a.40.2"'},shaka.media.Transmuxer.convertTsCodecs_=function(sn,ln){var cn=shaka.util.ManifestParserUtils.ContentType;if(ln=ln.replace(/mp2t/i,"mp4"),sn==cn.AUDIO&&(ln=ln.replace("video","audio")),sn=/avc1\.(66|77|100)\.(\d+)/.exec(ln)){cn="avc1.";var dn=sn[1];dn=="66"?cn+="4200":dn=="77"?cn+="4d00":(goog.asserts.assert(dn=="100","Legacy avc1 parsing code out of sync with regex!"),cn+="6400"),dn=Number(sn[2]),goog.asserts.assert(256>dn,"Invalid legacy avc1 level number!"),cn+=(dn>>4).toString(16),cn+=(dn&15).toString(16),ln=ln.replace(sn[0],cn)}return ln},shaka.media.Transmuxer.prototype.getOrginalMimeType=function(){return this.originalMimeType_},shaka.media.Transmuxer.prototype.transmux=function(sn){return goog.asserts.assert(this.muxTransmuxer_,"mux.js should be available."),goog.asserts.assert(!this.isTransmuxing_,"No transmuxing should be in progress."),this.isTransmuxing_=!0,this.transmuxPromise_=new shaka.util.PublicPromise,this.transmuxedData_=[],this.captions_=[],sn=shaka.util.BufferUtils.toUint8(sn),this.muxTransmuxer_.push(sn),this.muxTransmuxer_.flush(),this.isTransmuxing_&&this.transmuxPromise_.reject(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.TRANSMUXING_FAILED)),this.transmuxPromise_},shaka.media.Transmuxer.prototype.resetCaptions=function(){this.muxTransmuxer_.resetCaptions()},shaka.media.Transmuxer.prototype.onTransmuxed_=function(sn){this.captions_=sn.captions,this.transmuxedData_.push(shaka.util.Uint8ArrayUtils.concat(sn.initSegment,sn.data))},shaka.media.Transmuxer.prototype.onTransmuxDone_=function(){var sn={data:shaka.util.Uint8ArrayUtils.concat.apply(shaka.util.Uint8ArrayUtils,$jscomp.arrayFromIterable(this.transmuxedData_)),captions:this.captions_};this.transmuxPromise_.resolve(sn),this.isTransmuxing_=!1},shaka.util.MimeUtils=function(){},shaka.util.MimeUtils.getFullType=function(sn,ln){return ln&&(sn+='; codecs="'+ln+'"'),sn},shaka.util.MimeUtils.getFullOrConvertedType=function(sn,ln,cn){ln=shaka.util.MimeUtils.getFullType(sn,ln);var dn=shaka.util.ManifestParserUtils.ContentType;return shaka.media.Transmuxer.isSupported(ln,cn)?shaka.media.Transmuxer.convertCodecs(cn,ln):sn!="video/mp2t"&&cn==dn.AUDIO?ln.replace("video","audio"):ln},shaka.util.MimeUtils.getExtendedType=function(sn){var ln=[sn.mimeType];return shaka.util.MimeUtils.EXTENDED_MIME_PARAMETERS_.forEach(function(cn,dn){(dn=sn[dn])&&ln.push(cn+'="'+dn+'"')}),sn.hdr=="PQ"&&ln.push('eotf="smpte2084"'),ln.join(";")},shaka.util.MimeUtils.getContainerType=function(sn){return sn.split(";")[0].split("/")[1]},shaka.util.MimeUtils.splitCodecs=function(sn){return sn.split(",")},shaka.util.MimeUtils.getNormalizedCodec=function(sn){var ln=shaka.util.MimeUtils.getCodecParts_(sn);switch(sn=ln[0],ln=ln[1].toLowerCase(),!0){case(sn==="mp4a"&&ln==="69"):case(sn==="mp4a"&&ln==="6b"):return"mp3";case(sn==="mp4a"&&ln==="66"):case(sn==="mp4a"&&ln==="67"):case(sn==="mp4a"&&ln==="68"):case(sn==="mp4a"&&ln==="40.2"):case(sn==="mp4a"&&ln==="40.02"):case(sn==="mp4a"&&ln==="40.5"):case(sn==="mp4a"&&ln==="40.05"):case(sn==="mp4a"&&ln==="40.29"):case(sn==="mp4a"&&ln==="40.42"):return"aac";case(sn==="mp4a"&&ln==="a5"):return"ac-3";case(sn==="mp4a"&&ln==="a6"):return"ec-3";case(sn==="mp4a"&&ln==="b2"):return"dtsx";case(sn==="mp4a"&&ln==="a9"):return"dtsc";case sn==="avc1":case sn==="avc3":return"avc";case sn==="hvc1":case sn==="hev1":return"hevc";case sn==="dvh1":case sn==="dvhe":return"dovi"}return sn},shaka.util.MimeUtils.getCodecBase=function(sn){return shaka.util.MimeUtils.getCodecParts_(sn)[0]},shaka.util.MimeUtils.getBasicType=function(sn){return sn.split(";")[0]},shaka.util.MimeUtils.getCodecs=function(sn){return sn=sn.split(/ *; */),sn.shift(),(sn=sn.find(function(ln){return ln.startsWith("codecs=")}))?sn.split("=")[1].replace(/^"|"$/g,""):""},shaka.util.MimeUtils.isHlsType=function(sn){return sn==="application/x-mpegurl"||sn==="application/vnd.apple.mpegurl"},shaka.util.MimeUtils.getCodecParts_=function(sn){var ln=sn.split(".");return sn=ln[0],ln.shift(),ln=ln.join("."),[sn,ln]},goog.exportSymbol("shaka.util.MimeUtils",shaka.util.MimeUtils),goog.exportProperty(shaka.util.MimeUtils,"getFullType",shaka.util.MimeUtils.getFullType),shaka.util.MimeUtils.EXTENDED_MIME_PARAMETERS_=new Map().set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels"),shaka.util.MimeUtils.CEA608_CLOSED_CAPTION_MIMETYPE="application/cea-608",shaka.util.MimeUtils.CEA708_CLOSED_CAPTION_MIMETYPE="application/cea-708",shaka.text.TextEngine=function(sn){this.parser_=null,this.displayer_=sn,this.segmentRelativeVttTiming_=!1,this.appendWindowStart_=this.timestampOffset_=0,this.appendWindowEnd_=1/0,this.bufferEnd_=this.bufferStart_=null,this.selectedClosedCaptionId_="",this.closedCaptionsMap_=new Map},shaka.text.TextEngine.registerParser=function(sn,ln){shaka.text.TextEngine.parserMap_[sn]=ln},shaka.text.TextEngine.unregisterParser=function(sn){delete shaka.text.TextEngine.parserMap_[sn]},shaka.text.TextEngine.findParser=function(sn){return shaka.text.TextEngine.parserMap_[sn]},shaka.text.TextEngine.isTypeSupported=function(sn){return!!(shaka.text.TextEngine.parserMap_[sn]||sn==shaka.util.MimeUtils.CEA608_CLOSED_CAPTION_MIMETYPE||sn==shaka.util.MimeUtils.CEA708_CLOSED_CAPTION_MIMETYPE)},shaka.text.TextEngine.prototype.destroy=function(){return this.displayer_=this.parser_=null,this.closedCaptionsMap_.clear(),Promise.resolve()},shaka.text.TextEngine.prototype.setDisplayer=function(sn){this.displayer_=sn},shaka.text.TextEngine.prototype.initParser=function(sn,ln,cn){sn==shaka.util.MimeUtils.CEA608_CLOSED_CAPTION_MIMETYPE||sn==shaka.util.MimeUtils.CEA708_CLOSED_CAPTION_MIMETYPE?this.parser_=null:(sn=shaka.text.TextEngine.parserMap_[sn],goog.asserts.assert(sn,"Text type negotiation should have happened already"),this.parser_=sn(),this.parser_.setSequenceMode?this.parser_.setSequenceMode(ln):shaka.log.alwaysWarn('Text parsers should have a "setSequenceMode" method!'),this.segmentRelativeVttTiming_=cn)},shaka.text.TextEngine.prototype.appendBuffer=function(sn,ln,cn){var dn=this,pn,vn,kn,Sn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wn){if(wn.nextAddress==1)return goog.asserts.assert(dn.parser_,"The parser should already be initialized"),wn.yield(Promise.resolve(),2);if(!dn.parser_||!dn.displayer_)return wn.return();if(ln==null||cn==null)return dn.parser_.parseInit(shaka.util.BufferUtils.toUint8(sn)),wn.return();pn=dn.segmentRelativeVttTiming_?ln:dn.timestampOffset_,vn={periodStart:dn.timestampOffset_,segmentStart:ln,segmentEnd:cn,vttOffset:pn},kn=dn.parser_.parseMedia(shaka.util.BufferUtils.toUint8(sn),vn),Sn=kn.filter(function(Pn){return Pn.startTime>=dn.appendWindowStart_&&Pn.startTime<dn.appendWindowEnd_}),dn.displayer_.append(Sn),dn.bufferStart_==null?dn.bufferStart_=Math.max(ln,dn.appendWindowStart_):(goog.asserts.assert(dn.bufferEnd_!=null,"There should already be a buffered range end."),goog.asserts.assert(1>=ln-dn.bufferEnd_,"There should not be a gap in text references >1s")),dn.bufferEnd_=Math.min(cn,dn.appendWindowEnd_),wn.jumpToEnd()})},shaka.text.TextEngine.prototype.remove=function(sn,ln){var cn=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(dn){if(dn.nextAddress==1)return dn.yield(Promise.resolve(),2);cn.displayer_&&cn.displayer_.remove(sn,ln)&&(cn.bufferStart_==null?goog.asserts.assert(cn.bufferEnd_==null,"end must be null if startTime is null"):(goog.asserts.assert(cn.bufferEnd_!=null,"end must be non-null if startTime is non-null"),ln<=cn.bufferStart_||sn>=cn.bufferEnd_||(sn<=cn.bufferStart_&&ln>=cn.bufferEnd_?cn.bufferStart_=cn.bufferEnd_=null:sn<=cn.bufferStart_&&ln<cn.bufferEnd_?cn.bufferStart_=ln:sn>cn.bufferStart_&&ln>=cn.bufferEnd_?cn.bufferEnd_=sn:goog.asserts.assert(!1,"removal from the middle is not supported by TextEngine")))),dn.jumpToEnd()})},shaka.text.TextEngine.prototype.setTimestampOffset=function(sn){this.timestampOffset_=sn},shaka.text.TextEngine.prototype.setAppendWindow=function(sn,ln){this.appendWindowStart_=sn,this.appendWindowEnd_=ln},shaka.text.TextEngine.prototype.bufferStart=function(){return this.bufferStart_},shaka.text.TextEngine.prototype.bufferEnd=function(){return this.bufferEnd_},shaka.text.TextEngine.prototype.isBuffered=function(sn){return this.bufferStart_==null||this.bufferEnd_==null?!1:sn>=this.bufferStart_&&sn<this.bufferEnd_},shaka.text.TextEngine.prototype.bufferedAheadOf=function(sn){return this.bufferEnd_==null||this.bufferEnd_<sn?0:(goog.asserts.assert(this.bufferStart_!=null,"start should not be null if end is not null"),this.bufferEnd_-Math.max(sn,this.bufferStart_))},shaka.text.TextEngine.prototype.setSelectedClosedCaptionId=function(sn,ln){if(this.selectedClosedCaptionId_=sn,sn=this.closedCaptionsMap_.get(sn))for(var cn=$jscomp.makeIterator(sn.keys()),dn=cn.next();!dn.done;dn=cn.next())(dn=sn.get(dn.value).filter(function(pn){return pn.endTime<=ln}))&&this.displayer_.append(dn)},shaka.text.TextEngine.prototype.convertMuxjsCaptionsToShakaCaptions=function(sn){var ln=[];sn=$jscomp.makeIterator(sn);for(var cn=sn.next();!cn.done;cn=sn.next()){cn=cn.value;var dn=new shaka.text.Cue(cn.startTime,cn.endTime,cn.text);ln.push({stream:cn.stream,cue:dn})}return ln},shaka.text.TextEngine.prototype.applyVideoTimestampOffsetRecursive_=function(sn,ln){sn.startTime+=ln,sn.endTime+=ln,sn=$jscomp.makeIterator(sn.nestedCues);for(var cn=sn.next();!cn.done;cn=sn.next())this.applyVideoTimestampOffsetRecursive_(cn.value,ln)},shaka.text.TextEngine.prototype.storeAndAppendClosedCaptions=function(sn,ln,cn,dn){var pn=ln+" "+cn,vn=new Map;sn=$jscomp.makeIterator(sn);for(var kn=sn.next();!kn.done;kn=sn.next()){var Sn=kn.value;kn=Sn.stream,Sn=Sn.cue,vn.has(kn)||vn.set(kn,new Map),vn.get(kn).has(pn)||vn.get(kn).set(pn,[]),this.applyVideoTimestampOffsetRecursive_(Sn,dn),Sn.startTime>=this.appendWindowStart_&&Sn.startTime<this.appendWindowEnd_&&(vn.get(kn).get(pn).push(Sn),kn==this.selectedClosedCaptionId_&&this.displayer_.append([Sn]))}for(dn=$jscomp.makeIterator(vn.keys()),pn=dn.next();!pn.done;pn=dn.next())for(pn=pn.value,this.closedCaptionsMap_.has(pn)||this.closedCaptionsMap_.set(pn,new Map),sn=$jscomp.makeIterator(vn.get(pn).keys()),kn=sn.next();!kn.done;kn=sn.next())kn=kn.value,Sn=vn.get(pn).get(kn),this.closedCaptionsMap_.get(pn).set(kn,Sn);this.bufferStart_=this.bufferStart_==null?Math.max(ln,this.appendWindowStart_):Math.min(this.bufferStart_,Math.max(ln,this.appendWindowStart_)),this.bufferEnd_=Math.max(this.bufferEnd_,Math.min(cn,this.appendWindowEnd_))},shaka.text.TextEngine.prototype.getNumberOfClosedCaptionChannels=function(){return this.closedCaptionsMap_.size},shaka.text.TextEngine.prototype.getNumberOfClosedCaptionsInChannel=function(sn){return(sn=this.closedCaptionsMap_.get(sn))?sn.size:0},goog.exportSymbol("shaka.text.TextEngine",shaka.text.TextEngine),goog.exportProperty(shaka.text.TextEngine.prototype,"destroy",shaka.text.TextEngine.prototype.destroy),goog.exportProperty(shaka.text.TextEngine,"findParser",shaka.text.TextEngine.findParser),goog.exportProperty(shaka.text.TextEngine,"unregisterParser",shaka.text.TextEngine.unregisterParser),goog.exportProperty(shaka.text.TextEngine,"registerParser",shaka.text.TextEngine.registerParser),shaka.text.TextEngine.parserMap_={},shaka.util.StreamUtils=function(){},shaka.util.StreamUtils.chooseCodecsAndFilterManifest=function(sn,ln,cn,dn,pn){var vn=shaka.util.StreamUtils,kn=sn.variants;(ln.length||cn.length)&&(kn=vn.choosePreferredCodecs(kn,ln,cn)),kn=vn.filterVariantsByAudioChannelCount(kn,dn),ln=vn.getVariantsByCodecs_(kn),ln=vn.filterVariantsByDensity_(ln);var Sn=vn.chooseCodecsByDecodingAttributes_(ln,pn);sn.variants=sn.variants.filter(function(wn){return vn.getVariantCodecs_(wn)==Sn?!0:(shaka.log.debug("Dropping Variant (better codec available)",wn),!1)})},shaka.util.StreamUtils.getVariantsByCodecs_=function(sn){var ln=new shaka.util.MultiMap;sn=$jscomp.makeIterator(sn);for(var cn=sn.next();!cn.done;cn=sn.next()){cn=cn.value;var dn=shaka.util.StreamUtils.getVariantCodecs_(cn);ln.push(dn,cn)}return ln},shaka.util.StreamUtils.filterVariantsByDensity_=function(sn){var ln=0,cn=new Map,dn=sn.size();return sn.forEach(function(pn,vn){vn=$jscomp.makeIterator(vn);for(var kn=vn.next();!kn.done;kn=vn.next()){kn=kn.value;var Sn=kn.video;if(Sn&&Sn.width&&Sn.height){Sn=Sn.width*Sn.height*(Sn.frameRate||1),cn.has(Sn)||cn.set(Sn,new shaka.util.MultiMap);var wn=cn.get(Sn);wn.push(pn,kn),wn.size()===dn&&(ln=Math.max(ln,Sn))}}}),ln?cn.get(ln):sn},shaka.util.StreamUtils.choosePreferredCodecs=function(sn,ln,cn){var dn={};ln=$jscomp.makeIterator(ln);for(var pn=ln.next();!pn.done;dn={$jscomp$loop$prop$videoCodec$684:dn.$jscomp$loop$prop$videoCodec$684},pn=ln.next())if(dn.$jscomp$loop$prop$videoCodec$684=pn.value,pn=sn.filter(function(vn){return function(kn){return kn.video&&kn.video.codecs.startsWith(vn.$jscomp$loop$prop$videoCodec$684)}}(dn)),pn.length){sn=pn;break}for(dn={},cn=$jscomp.makeIterator(cn),ln=cn.next();!ln.done;dn={$jscomp$loop$prop$audioCodec$686:dn.$jscomp$loop$prop$audioCodec$686},ln=cn.next())if(dn.$jscomp$loop$prop$audioCodec$686=ln.value,ln=sn.filter(function(vn){return function(kn){return kn.audio&&kn.audio.codecs.startsWith(vn.$jscomp$loop$prop$audioCodec$686)}}(dn)),ln.length){sn=ln;break}return sn},shaka.util.StreamUtils.chooseCodecsByDecodingAttributes_=function(sn,ln){var cn=shaka.util.StreamUtils;ln=$jscomp.makeIterator(ln);for(var dn=ln.next();!dn.done;dn=ln.next())if(dn=dn.value,dn==cn.DecodingAttributes.SMOOTH||dn==cn.DecodingAttributes.POWER){if(sn=cn.chooseCodecsByMediaCapabilitiesInfo_(sn,dn),sn.size()==1)return sn.keys()[0]}else if(dn==cn.DecodingAttributes.BANDWIDTH)break;return cn.findCodecsByLowestBandwidth_(sn)},shaka.util.StreamUtils.chooseCodecsByMediaCapabilitiesInfo_=function(sn,ln){var cn=0,dn=new shaka.util.MultiMap;return sn.forEach(function(pn,vn){for(var kn=0,Sn=0,wn=$jscomp.makeIterator(vn),Pn=wn.next();!Pn.done;Pn=wn.next())Pn=Pn.value,Pn.decodingInfos.length&&(kn+=Pn.decodingInfos[0][ln]?1:0,Sn++);kn/=Sn,shaka.log.debug("codecs",pn,"avg",ln,kn),kn>cn?(dn.clear(),dn.push(pn,vn),cn=kn):kn==cn&&dn.push(pn,vn)}),dn},shaka.util.StreamUtils.findCodecsByLowestBandwidth_=function(sn){var ln="",cn=1/0;return sn.forEach(function(dn,pn){var vn=0,kn=0;pn=$jscomp.makeIterator(pn);for(var Sn=pn.next();!Sn.done;Sn=pn.next())vn+=Sn.value.bandwidth||0,++kn;vn/=kn,shaka.log.debug("codecs",dn,"avg bandwidth",vn),vn<cn&&(ln=dn,cn=vn)}),goog.asserts.assert(ln!=="","Should have chosen codecs!"),goog.asserts.assert(!isNaN(cn),"Bandwidth should be a number!"),ln},shaka.util.StreamUtils.getVariantCodecs_=function(sn){var ln="";sn.video&&(ln=shaka.util.MimeUtils.getNormalizedCodec(sn.video.codecs));var cn="";return sn.audio&&(cn=shaka.util.MimeUtils.getNormalizedCodec(sn.audio.codecs)),ln+"-"+cn},shaka.util.StreamUtils.filterByRestrictions=function(sn,ln,cn){sn.variants=sn.variants.filter(function(dn){return shaka.util.StreamUtils.meetsRestrictions(dn,ln,cn)})},shaka.util.StreamUtils.meetsRestrictions=function(sn,ln,cn){var dn=function(vn,kn,Sn){return vn>=kn&&vn<=Sn},pn=sn.video;if(sn.disabledUntilTime!=0){if(sn.disabledUntilTime>Date.now()/1e3)return!1;sn.disabledUntilTime=0}return!(pn&&pn.width&&pn.height&&(!dn(pn.width,ln.minWidth,Math.min(ln.maxWidth,cn.width))||!dn(pn.height,ln.minHeight,Math.min(ln.maxHeight,cn.height))||!dn(pn.width*pn.height,ln.minPixels,ln.maxPixels))||sn&&sn.video&&sn.video.frameRate&&!dn(sn.video.frameRate,ln.minFrameRate,ln.maxFrameRate)||!dn(sn.bandwidth,ln.minBandwidth,ln.maxBandwidth))},shaka.util.StreamUtils.applyRestrictions=function(sn,ln,cn){var dn=!1;sn=$jscomp.makeIterator(sn);for(var pn=sn.next();!pn.done;pn=sn.next()){pn=pn.value;var vn=pn.allowedByApplication;pn.allowedByApplication=shaka.util.StreamUtils.meetsRestrictions(pn,ln,cn),vn!=pn.allowedByApplication&&(dn=!0)}return dn},shaka.util.StreamUtils.filterManifest=function(sn,ln,cn){return $jscomp.asyncExecutePromiseGeneratorProgram(function(dn){return dn.nextAddress==1?dn.yield(shaka.util.StreamUtils.filterManifestByMediaCapabilities(cn,0<cn.offlineSessionIds.length),2):(shaka.util.StreamUtils.filterManifestByCurrentVariant(ln,cn),shaka.util.StreamUtils.filterTextStreams_(cn),dn.yield(shaka.util.StreamUtils.filterImageStreams_(cn),0))})},shaka.util.StreamUtils.filterManifestByMediaCapabilities=function(sn,ln){return $jscomp.asyncExecutePromiseGeneratorProgram(function(cn){if(cn.nextAddress==1)return goog.asserts.assert(navigator.mediaCapabilities,"MediaCapabilities should be valid."),cn.yield(shaka.util.StreamUtils.getDecodingInfosForVariants(sn.variants,ln,!1),2);sn.variants=sn.variants.filter(function(dn){var pn=dn.video,vn=shaka.util.ManifestParserUtils.ContentType,kn=shaka.media.Capabilities;if(pn){var Sn=shaka.util.StreamUtils.getCorrectVideoCodecs_(pn.codecs);if(pn.codecs.includes(",")){var wn=pn.codecs.split(",");Sn=shaka.util.ManifestParserUtils.guessCodecs(vn.VIDEO,wn),Sn=shaka.util.StreamUtils.getCorrectVideoCodecs_(Sn),wn=shaka.util.ManifestParserUtils.guessCodecs(vn.AUDIO,wn),wn=shaka.util.StreamUtils.getCorrectAudioCodecs_(wn);var Pn=shaka.util.MimeUtils.getFullOrConvertedType(pn.mimeType,wn,vn.AUDIO);if(!kn.isTypeSupported(Pn))return!1;Sn=[Sn,wn].join()}if(wn=shaka.util.MimeUtils.getFullOrConvertedType(pn.mimeType,Sn,vn.VIDEO),!kn.isTypeSupported(wn))return!1;pn.codecs=Sn}if(Sn=dn.audio){if(wn=shaka.util.StreamUtils.getCorrectAudioCodecs_(Sn.codecs),vn=shaka.util.MimeUtils.getFullOrConvertedType(Sn.mimeType,wn,vn.AUDIO),!kn.isTypeSupported(vn))return!1;Sn.codecs=wn}return shaka.util.Platform.isXboxOne()&&pn&&(pn.width&&1920<pn.width||pn.height&&1080<pn.height)&&(pn.codecs.includes("avc1.")||pn.codecs.includes("avc3."))?(shaka.log.debug("Dropping variant - not compatible with platform",shaka.util.StreamUtils.getVariantSummaryString_(dn)),!1):((pn=dn.decodingInfos.some(function(Nn){return Nn.supported}))||shaka.log.debug("Dropping variant - not compatible with platform",shaka.util.StreamUtils.getVariantSummaryString_(dn)),pn)}),cn.jumpToEnd()})},shaka.util.StreamUtils.getDecodingInfosForVariants=function(sn,ln,cn){var dn,pn,vn,kn,Sn,wn,Pn,Nn,Ln,Fn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(zn){if(sn.some(function(Dn){return Dn.decodingInfos.length}))return shaka.log.debug("Already got the variants' decodingInfo."),zn.return();for(dn=navigator.mediaCapabilities,pn=[],vn=function(Dn,Kn){var qn,Zn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Yn){if(Yn.nextAddress==1)return Yn.setCatchFinallyBlocks(2),Yn.yield(dn.decodingInfo(Kn),4);if(Yn.nextAddress!=2)return qn=Yn.yieldResult,Dn.decodingInfos.push(qn),Yn.leaveTryBlock(0);Zn=Yn.enterCatchBlock(),shaka.log.info("MediaCapabilities.decodingInfo() failed.",JSON.stringify(Kn),Zn),Yn.jumpToEnd()})},kn=$jscomp.makeIterator(sn),Sn=kn.next();!Sn.done;Sn=kn.next())for(wn=Sn.value,Pn=shaka.util.StreamUtils.getDecodingConfigs_(wn,ln,cn),Nn=$jscomp.makeIterator(Pn),Ln=Nn.next();!Ln.done;Ln=Nn.next())Fn=Ln.value,pn.push(vn(wn,Fn));return zn.yield(Promise.all(pn),0)})},shaka.util.StreamUtils.getDecodingConfigs_=function(sn,ln,cn){var dn=sn.audio,pn=sn.video,vn=shaka.util.ManifestParserUtils.ContentType;if(cn={type:cn?"file":"media-source"},pn){var kn=pn.codecs;if(pn.codecs.includes(",")){var Sn=pn.codecs.split(",");kn=shaka.util.ManifestParserUtils.guessCodecs(vn.VIDEO,Sn),kn=shaka.util.StreamUtils.getCorrectVideoCodecs_(kn),Sn=shaka.util.ManifestParserUtils.guessCodecs(vn.AUDIO,Sn),Sn=shaka.util.MimeUtils.getFullOrConvertedType(pn.mimeType,Sn,vn.AUDIO),cn.audio={contentType:Sn,channels:2,bitrate:sn.bandwidth||1,samplerate:1,spatialRendering:!1}}if(kn=shaka.util.StreamUtils.getCorrectVideoCodecs_(kn),kn=shaka.util.MimeUtils.getFullOrConvertedType(pn.mimeType,kn,vn.VIDEO),cn.video={contentType:kn,width:pn.width||64,height:pn.height||64,bitrate:pn.bandwidth||sn.bandwidth||1,framerate:pn.frameRate||1},pn.hdr)switch(pn.hdr){case"SDR":cn.video.transferFunction="srgb";break;case"PQ":cn.video.transferFunction="pq";break;case"HLG":cn.video.transferFunction="hlg"}}if(dn&&(kn=shaka.util.StreamUtils.getCorrectAudioCodecs_(dn.codecs),vn=shaka.util.MimeUtils.getFullOrConvertedType(dn.mimeType,kn,vn.AUDIO),cn.audio={contentType:vn,channels:dn.channelsCount||2,bitrate:dn.bandwidth||sn.bandwidth||1,samplerate:dn.audioSamplingRate||1,spatialRendering:dn.spatialAudio}),kn=(sn.video?sn.video.drmInfos:[]).concat(sn.audio?sn.audio.drmInfos:[]),!kn.length)return[cn];sn=[],vn=new Map,kn=$jscomp.makeIterator(kn);for(var wn=kn.next();!wn.done;wn=kn.next())Sn=wn.value,vn.get(Sn.keySystem)||vn.set(Sn.keySystem,[]),vn.get(Sn.keySystem).push(Sn);kn=ln?"required":"optional",ln=ln?["persistent-license"]:["temporary"],Sn=$jscomp.makeIterator(vn.keys());for(var Pn=Sn.next();!Pn.done;Pn=Sn.next()){var Nn=Pn.value;Pn=Object.assign({},cn);var Ln=vn.get(Nn);for(Nn={keySystem:Nn,initDataType:"cenc",persistentState:kn,distinctiveIdentifier:"optional",sessionTypes:ln},Ln=$jscomp.makeIterator(Ln),wn=Ln.next();!wn.done;wn=Ln.next()){if(wn=wn.value,wn.initData&&wn.initData.length){for(var Fn=new Set,zn=$jscomp.makeIterator(wn.initData),Dn=zn.next();!Dn.done;Dn=zn.next())Fn.add(Dn.value.initDataType);1<Fn.size&&shaka.log.v2("DrmInfo contains more than one initDataType,","and we use the initDataType of the first initData.",wn),Nn.initDataType=wn.initData[0].initDataType}wn.distinctiveIdentifierRequired&&(Nn.distinctiveIdentifier="required"),wn.persistentStateRequired&&(Nn.persistentState="required"),wn.sessionType&&(Nn.sessionTypes=[wn.sessionType]),dn&&(wn.audioRobustness!=""?Nn.audio?Nn.audio.robustness=Nn.audio.robustness||wn.audioRobustness:Nn.audio={robustness:wn.audioRobustness}:Nn.audio||(Nn.audio={})),pn&&(wn.videoRobustness!=""?Nn.video?Nn.video.robustness=Nn.video.robustness||wn.videoRobustness:Nn.video={robustness:wn.videoRobustness}:Nn.video||(Nn.video={}))}Pn.keySystemConfiguration=Nn,sn.push(Pn)}return sn},shaka.util.StreamUtils.getCorrectAudioCodecs_=function(sn){return shaka.util.Platform.isTizen()&&sn.toLowerCase()=="ac-3"?"ec-3":sn},shaka.util.StreamUtils.getCorrectVideoCodecs_=function(sn){if(sn.includes("avc1")){var ln=sn.split(".");if(ln.length==3)return sn=ln.shift()+".",sn+=parseInt(ln.shift(),10).toString(16),sn+=("000"+parseInt(ln.shift(),10).toString(16)).slice(-4)}else if(sn=="vp9")return"vp09.00.41.08";return sn},shaka.util.StreamUtils.filterManifestByCurrentVariant=function(sn,ln){var cn=shaka.util.StreamUtils;ln.variants=ln.variants.filter(function(dn){var pn=dn.audio;return dn=dn.video,pn&&sn&&sn.audio&&!cn.areStreamsCompatible_(pn,sn.audio)?(shaka.log.debug("Dropping variant - not compatible with active audio","active audio",cn.getStreamSummaryString_(sn.audio),"variant.audio",cn.getStreamSummaryString_(pn)),!1):dn&&sn&&sn.video&&!cn.areStreamsCompatible_(dn,sn.video)?(shaka.log.debug("Dropping variant - not compatible with active video","active video",cn.getStreamSummaryString_(sn.video),"variant.video",cn.getStreamSummaryString_(dn)),!1):!0})},shaka.util.StreamUtils.filterTextStreams_=function(sn){sn.textStreams=sn.textStreams.filter(function(ln){var cn=shaka.util.MimeUtils.getFullType(ln.mimeType,ln.codecs);return(cn=shaka.text.TextEngine.isTypeSupported(cn))||shaka.log.debug("Dropping text stream. Is not supported by the platform.",ln),cn})},shaka.util.StreamUtils.filterImageStreams_=function(sn){var ln,cn,dn,pn,vn,kn,Sn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wn){switch(wn.nextAddress){case 1:ln=[],cn=$jscomp.makeIterator(sn.imageStreams),dn=cn.next();case 2:if(dn.done){wn.jumpTo(4);break}if(pn=dn.value,vn=pn.mimeType,shaka.util.StreamUtils.supportedImageMimeTypes_.has(vn)){wn.jumpTo(5);break}if(kn=shaka.util.StreamUtils.minImage_.get(vn),!kn){shaka.util.StreamUtils.supportedImageMimeTypes_.set(vn,!1),wn.jumpTo(5);break}return wn.yield(shaka.util.StreamUtils.isImageSupported_(kn),7);case 7:Sn=wn.yieldResult,shaka.util.StreamUtils.supportedImageMimeTypes_.set(vn,Sn);case 5:shaka.util.StreamUtils.supportedImageMimeTypes_.get(vn)?ln.push(pn):shaka.log.debug("Dropping image stream. Is not supported by the platform.",pn),dn=cn.next(),wn.jumpTo(2);break;case 4:sn.imageStreams=ln,wn.jumpToEnd()}})},shaka.util.StreamUtils.isImageSupported_=function(sn){return new Promise(function(ln){var cn=new Image;cn.src=sn,"decode"in cn?cn.decode().then(function(){ln(!0)}).catch(function(){ln(!1)}):cn.onload=cn.onerror=function(){ln(cn.height===2)}})},shaka.util.StreamUtils.areStreamsCompatible_=function(sn,ln){return!(sn.mimeType!=ln.mimeType||sn.codecs.split(".")[0]!=ln.codecs.split(".")[0])},shaka.util.StreamUtils.variantToTrack=function(sn){var ln=sn.audio,cn=sn.video,dn=ln?ln.mimeType:null,pn=cn?cn.mimeType:null,vn=ln?ln.codecs:null,kn=cn?cn.codecs:null,Sn=[];kn&&Sn.push(kn),vn&&Sn.push(vn);var wn=[];cn&&wn.push(cn.mimeType),ln&&wn.push(ln.mimeType),wn=wn[0]||null;var Pn=[];ln&&Pn.push(ln.kind),cn&&Pn.push(cn.kind),Pn=Pn[0]||null;var Nn=new Set;if(ln)for(var Ln=$jscomp.makeIterator(ln.roles),Fn=Ln.next();!Fn.done;Fn=Ln.next())Nn.add(Fn.value);if(cn)for(Ln=$jscomp.makeIterator(cn.roles),Fn=Ln.next();!Fn.done;Fn=Ln.next())Nn.add(Fn.value);return sn={id:sn.id,active:!1,type:"variant",bandwidth:sn.bandwidth,language:sn.language,label:null,kind:Pn,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:wn,audioMimeType:dn,videoMimeType:pn,codecs:Sn.join(", "),audioCodec:vn,videoCodec:kn,primary:sn.primary,roles:Array.from(Nn),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null},cn&&(sn.videoId=cn.id,sn.originalVideoId=cn.originalId,sn.width=cn.width||null,sn.height=cn.height||null,sn.frameRate=cn.frameRate||null,sn.pixelAspectRatio=cn.pixelAspectRatio||null,sn.videoBandwidth=cn.bandwidth||null),ln&&(sn.audioId=ln.id,sn.originalAudioId=ln.originalId,sn.channelsCount=ln.channelsCount,sn.audioSamplingRate=ln.audioSamplingRate,sn.audioBandwidth=ln.bandwidth||null,sn.spatialAudio=ln.spatialAudio,sn.label=ln.label,sn.audioRoles=ln.roles),sn},shaka.util.StreamUtils.textStreamToTrack=function(sn){return{id:sn.id,active:!1,type:shaka.util.ManifestParserUtils.ContentType.TEXT,bandwidth:0,language:sn.language,label:sn.label,kind:sn.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:sn.mimeType,audioMimeType:null,videoMimeType:null,codecs:sn.codecs||null,audioCodec:null,videoCodec:null,primary:sn.primary,roles:sn.roles,audioRoles:null,forced:sn.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:sn.originalId,originalImageId:null}},shaka.util.StreamUtils.imageStreamToTrack=function(sn){var ln=shaka.util.ManifestParserUtils.ContentType,cn=sn.width||null,dn=sn.height||null,pn=null;sn.segmentIndex&&(pn=sn.segmentIndex.get(0));var vn=sn.tilesLayout;return pn&&(vn=pn.getTilesLayout()||vn),vn&&cn!=null&&(cn/=Number(vn.split("x")[0])),vn&&dn!=null&&(dn/=Number(vn.split("x")[1])),{id:sn.id,active:!1,type:ln.IMAGE,bandwidth:sn.bandwidth||0,language:"",label:null,kind:null,width:cn,height:dn,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:sn.mimeType,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:vn||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:sn.originalId}},shaka.util.StreamUtils.html5TrackId=function(sn){return sn.__shaka_id||(sn.__shaka_id=shaka.util.StreamUtils.nextTrackId_++),sn.__shaka_id},shaka.util.StreamUtils.html5TextTrackToTrack=function(sn){var ln=shaka.util.MimeUtils.CEA608_CLOSED_CAPTION_MIMETYPE,cn=shaka.util.StreamUtils.html5TrackToGenericShakaTrack_(sn);return cn.active=sn.mode!="disabled",cn.type="text",cn.originalTextId=sn.id,sn.kind=="captions"&&(cn.mimeType=ln),sn.kind&&(cn.roles=[sn.kind]),sn.kind=="forced"&&(cn.forced=!0),cn},shaka.util.StreamUtils.html5AudioTrackToTrack=function(sn){var ln=shaka.util.StreamUtils.html5TrackToGenericShakaTrack_(sn);return ln.active=sn.enabled,ln.type="variant",ln.originalAudioId=sn.id,sn.kind=="main"&&(ln.primary=!0),sn.kind&&(ln.roles=[sn.kind],ln.audioRoles=[sn.kind],ln.label=sn.label),ln},shaka.util.StreamUtils.html5TrackToGenericShakaTrack_=function(sn){return{id:shaka.util.StreamUtils.html5TrackId(sn),active:!1,type:"",bandwidth:0,language:shaka.util.LanguageUtils.normalize(sn.language),label:sn.label,kind:sn.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null}},shaka.util.StreamUtils.isPlayable=function(sn){return sn.allowedByApplication&&sn.allowedByKeySystem},shaka.util.StreamUtils.getPlayableVariants=function(sn){return sn.filter(function(ln){return shaka.util.StreamUtils.isPlayable(ln)})},shaka.util.StreamUtils.filterVariantsByAudioChannelCount=function(sn,ln){var cn=sn.filter(function(kn){return kn.audio&&kn.audio.channelsCount}),dn=new Map;cn=$jscomp.makeIterator(cn);for(var pn=cn.next();!pn.done;pn=cn.next()){pn=pn.value;var vn=pn.audio.channelsCount;goog.asserts.assert(vn!=null,"Must have count after filtering!"),dn.has(vn)||dn.set(vn,[]),dn.get(vn).push(pn)}return cn=Array.from(dn.keys()),cn.length==0?sn:(sn=cn.filter(function(kn){return kn<=ln}),sn.length?dn.get(Math.max.apply(Math,$jscomp.arrayFromIterable(sn))):dn.get(Math.min.apply(Math,$jscomp.arrayFromIterable(cn))))},shaka.util.StreamUtils.filterStreamsByLanguageAndRole=function(sn,ln,cn,dn){var pn=shaka.util.LanguageUtils,vn=sn,kn=sn.filter(function(Pn){return Pn.primary});kn.length&&(vn=kn);var Sn=vn.length?vn[0].language:"";if(vn=vn.filter(function(Pn){return Pn.language==Sn}),ln){var wn=pn.findClosestLocale(pn.normalize(ln),sn.map(function(Pn){return Pn.language}));wn&&(vn=sn.filter(function(Pn){return pn.normalize(Pn.language)==wn}))}if(vn=vn.filter(function(Pn){return Pn.forced==dn}),cn){if(sn=shaka.util.StreamUtils.filterTextStreamsByRole_(vn,cn),sn.length)return sn;shaka.log.warning("No exact match for the text role could be found.")}else if(sn=vn.filter(function(Pn){return Pn.roles.length==0}),sn.length)return sn;return sn=vn.map(function(Pn){return Pn.roles}).reduce(shaka.util.Functional.collapseArrays,[]),sn.length?shaka.util.StreamUtils.filterTextStreamsByRole_(vn,sn[0]):vn},shaka.util.StreamUtils.filterTextStreamsByRole_=function(sn,ln){return sn.filter(function(cn){return cn.roles.includes(ln)})},shaka.util.StreamUtils.isAudio=function(sn){return sn.type==shaka.util.ManifestParserUtils.ContentType.AUDIO},shaka.util.StreamUtils.isVideo=function(sn){return sn.type==shaka.util.ManifestParserUtils.ContentType.VIDEO},shaka.util.StreamUtils.getVariantStreams=function(sn){var ln=[];return sn.audio&&ln.push(sn.audio),sn.video&&ln.push(sn.video),ln},shaka.util.StreamUtils.getVariantSummaryString_=function(sn){var ln=[];return sn.audio&&ln.push(shaka.util.StreamUtils.getStreamSummaryString_(sn.audio)),sn.video&&ln.push(shaka.util.StreamUtils.getStreamSummaryString_(sn.video)),ln.join(", ")},shaka.util.StreamUtils.getStreamSummaryString_=function(sn){return shaka.util.StreamUtils.isAudio(sn)?"type=audio codecs="+sn.codecs+" bandwidth="+sn.bandwidth+" channelsCount="+sn.channelsCount+" audioSamplingRate="+sn.audioSamplingRate:shaka.util.StreamUtils.isVideo(sn)?"type=video codecs="+sn.codecs+" bandwidth="+sn.bandwidth+" frameRate="+sn.frameRate+" width="+sn.width+" height="+sn.height:"unexpected stream type"},shaka.util.StreamUtils.nextTrackId_=0,shaka.util.StreamUtils.DecodingAttributes={SMOOTH:"smooth",POWER:"powerEfficient",BANDWIDTH:"bandwidth"},shaka.util.StreamUtils.supportedImageMimeTypes_=new Map().set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),shaka.util.StreamUtils.minWebPImage_="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA",shaka.util.StreamUtils.minAvifImage_="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=",shaka.util.StreamUtils.minImage_=new Map().set("image/webp",shaka.util.StreamUtils.minWebPImage_).set("image/avif",shaka.util.StreamUtils.minAvifImage_),shaka.abr.SimpleAbrManager=function(){var sn=this;this.switch_=null,this.enabled_=!1,this.bandwidthEstimator_=new shaka.abr.EwmaBandwidthEstimator,navigator.connection&&navigator.connection.addEventListener&&(this.onNetworkInformationChange_=function(){if(sn.config_.useNetworkInformation&&sn.enabled_){sn.bandwidthEstimator_=new shaka.abr.EwmaBandwidthEstimator,sn.config_&&sn.bandwidthEstimator_.configure(sn.config_.advanced);var ln=sn.chooseVariant();ln&&sn.switch_(ln)}},navigator.connection.addEventListener("change",this.onNetworkInformationChange_)),this.variants_=[],this.playbackRate_=1,this.startupComplete_=!1,this.onNetworkInformationChange_=this.resizeObserver_=this.mediaElement_=this.config_=this.lastTimeChosenMs_=null,this.resizeObserverTimer_=new shaka.util.Timer(function(){if(sn.config_.restrictToElementSize){var ln=sn.chooseVariant();ln&&sn.switch_(ln)}})},shaka.abr.SimpleAbrManager.prototype.stop=function(){this.switch_=null,this.enabled_=!1,this.variants_=[],this.playbackRate_=1,this.mediaElement_=this.lastTimeChosenMs_=null,this.resizeObserver_&&(this.resizeObserver_.disconnect(),this.resizeObserver_=null),this.resizeObserverTimer_.stop()},shaka.abr.SimpleAbrManager.prototype.release=function(){navigator.connection&&navigator.connection.removeEventListener&&(navigator.connection.removeEventListener("change",this.onNetworkInformationChange_),this.onNetworkInformationChange_=null),this.resizeObserverTimer_=null},shaka.abr.SimpleAbrManager.prototype.init=function(sn){this.switch_=sn},shaka.abr.SimpleAbrManager.prototype.chooseVariant=function(){var sn=shaka.abr.SimpleAbrManager,ln=1/0,cn=1/0;this.config_.restrictToScreenSize&&(cn=this.config_.ignoreDevicePixelRatio?1:window.devicePixelRatio,ln=window.screen.height*cn,cn*=window.screen.width),this.resizeObserver_&&this.config_.restrictToElementSize&&(cn=this.config_.ignoreDevicePixelRatio?1:window.devicePixelRatio,ln=this.mediaElement_.clientWidth*cn,cn*=this.mediaElement_.clientHeight),ln=sn.filterAndSortVariants_(this.config_.restrictions,this.variants_,ln,cn),cn=this.getDefaultBandwidth_(),cn=this.bandwidthEstimator_.getBandwidthEstimate(cn),this.variants_.length&&!ln.length&&(shaka.log.warning("No variants met the ABR restrictions. Choosing a variant by lowest bandwidth."),ln=sn.filterAndSortVariants_(null,this.variants_,1/0,1/0),ln=[ln[0]]),sn=ln[0]||null;for(var dn=0;dn<ln.length;dn++){for(var pn=ln[dn],vn=isNaN(this.playbackRate_)?1:Math.abs(this.playbackRate_),kn=vn*pn.bandwidth,Sn=kn/this.config_.bandwidthDowngradeTarget,wn={bandwidth:1/0},Pn=dn+1;Pn<ln.length;Pn++)if(pn.bandwidth!=ln[Pn].bandwidth){wn=ln[Pn];break}vn=vn*wn.bandwidth/this.config_.bandwidthUpgradeTarget,shaka.log.v2("Bandwidth ranges:",(kn/1e6).toFixed(3),(Sn/1e6).toFixed(3),(vn/1e6).toFixed(3)),cn>=Sn&&cn<=vn&&sn.bandwidth!=pn.bandwidth&&(sn=pn)}return this.lastTimeChosenMs_=Date.now(),sn},shaka.abr.SimpleAbrManager.prototype.enable=function(){this.enabled_=!0},shaka.abr.SimpleAbrManager.prototype.disable=function(){this.enabled_=!1},shaka.abr.SimpleAbrManager.prototype.segmentDownloaded=function(sn,ln){shaka.log.v2("Segment downloaded:","deltaTimeMs="+sn,"numBytes="+ln,"lastTimeChosenMs="+this.lastTimeChosenMs_,"enabled="+this.enabled_),goog.asserts.assert(0<=sn,"expected a non-negative duration"),this.bandwidthEstimator_.sample(sn,ln),this.lastTimeChosenMs_!=null&&this.enabled_&&this.suggestStreams_()},shaka.abr.SimpleAbrManager.prototype.getBandwidthEstimate=function(){var sn=this.getDefaultBandwidth_();return this.bandwidthEstimator_.getBandwidthEstimate(sn)},shaka.abr.SimpleAbrManager.prototype.setVariants=function(sn){this.variants_=sn},shaka.abr.SimpleAbrManager.prototype.playbackRateChanged=function(sn){this.playbackRate_=sn},shaka.abr.SimpleAbrManager.prototype.setMediaElement=function(sn){var ln=this;this.mediaElement_=sn,this.resizeObserver_&&(this.resizeObserver_.disconnect(),this.resizeObserver_=null),this.mediaElement_&&"ResizeObserver"in window&&(this.resizeObserver_=new ResizeObserver(function(){ln.resizeObserverTimer_.tickAfter(shaka.abr.SimpleAbrManager.RESIZE_OBSERVER_BATCH_TIME)}),this.resizeObserver_.observe(this.mediaElement_))},shaka.abr.SimpleAbrManager.prototype.configure=function(sn){this.config_=sn,this.bandwidthEstimator_&&this.config_&&this.bandwidthEstimator_.configure(this.config_.advanced)},shaka.abr.SimpleAbrManager.prototype.suggestStreams_=function(){if(shaka.log.v2("Suggesting Streams..."),goog.asserts.assert(this.lastTimeChosenMs_!=null,"lastTimeChosenMs_ should not be null"),this.startupComplete_){if(Date.now()-this.lastTimeChosenMs_<1e3*this.config_.switchInterval){shaka.log.v2("Still within switch interval...");return}}else{if(!this.bandwidthEstimator_.hasGoodEstimate()){shaka.log.v2("Still waiting for a good estimate...");return}this.startupComplete_=!0}var sn=this.chooseVariant(),ln=this.getDefaultBandwidth_();ln=this.bandwidthEstimator_.getBandwidthEstimate(ln),ln=Math.round(ln/1e3),sn&&(shaka.log.debug("Calling switch_(), bandwidth="+ln+" kbps"),this.switch_(sn))},shaka.abr.SimpleAbrManager.prototype.getDefaultBandwidth_=function(){var sn=this.config_.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.config_.useNetworkInformation&&(sn=1e6*navigator.connection.downlink),sn},shaka.abr.SimpleAbrManager.filterAndSortVariants_=function(sn,ln,cn,dn){return sn&&(ln=ln.filter(function(pn){return goog.asserts.assert(sn,"Restrictions should exist!"),shaka.util.StreamUtils.meetsRestrictions(pn,sn,{width:dn,height:cn})})),ln.sort(function(pn,vn){return pn.bandwidth-vn.bandwidth})},goog.exportSymbol("shaka.abr.SimpleAbrManager",shaka.abr.SimpleAbrManager),goog.exportProperty(shaka.abr.SimpleAbrManager.prototype,"configure",shaka.abr.SimpleAbrManager.prototype.configure),goog.exportProperty(shaka.abr.SimpleAbrManager.prototype,"setMediaElement",shaka.abr.SimpleAbrManager.prototype.setMediaElement),goog.exportProperty(shaka.abr.SimpleAbrManager.prototype,"playbackRateChanged",shaka.abr.SimpleAbrManager.prototype.playbackRateChanged),goog.exportProperty(shaka.abr.SimpleAbrManager.prototype,"setVariants",shaka.abr.SimpleAbrManager.prototype.setVariants),goog.exportProperty(shaka.abr.SimpleAbrManager.prototype,"getBandwidthEstimate",shaka.abr.SimpleAbrManager.prototype.getBandwidthEstimate),goog.exportProperty(shaka.abr.SimpleAbrManager.prototype,"segmentDownloaded",shaka.abr.SimpleAbrManager.prototype.segmentDownloaded),goog.exportProperty(shaka.abr.SimpleAbrManager.prototype,"disable",shaka.abr.SimpleAbrManager.prototype.disable),goog.exportProperty(shaka.abr.SimpleAbrManager.prototype,"enable",shaka.abr.SimpleAbrManager.prototype.enable),goog.exportProperty(shaka.abr.SimpleAbrManager.prototype,"chooseVariant",shaka.abr.SimpleAbrManager.prototype.chooseVariant),goog.exportProperty(shaka.abr.SimpleAbrManager.prototype,"init",shaka.abr.SimpleAbrManager.prototype.init),goog.exportProperty(shaka.abr.SimpleAbrManager.prototype,"release",shaka.abr.SimpleAbrManager.prototype.release),goog.exportProperty(shaka.abr.SimpleAbrManager.prototype,"stop",shaka.abr.SimpleAbrManager.prototype.stop),shaka.abr.SimpleAbrManager.RESIZE_OBSERVER_BATCH_TIME=1,shaka.deprecate={},shaka.deprecate.Version=function(sn,ln){this.major_=sn,this.minor_=ln},shaka.deprecate.Version.prototype.major=function(){return this.major_},shaka.deprecate.Version.prototype.minor=function(){return this.minor_},shaka.deprecate.Version.prototype.compareTo=function(sn){var ln=this.minor_-sn.minor_;return this.major_-sn.major_||ln},shaka.deprecate.Version.prototype.toString=function(){return"v"+this.major_+"."+this.minor_},shaka.deprecate.Version.parse=function(sn){return sn=sn.substring(1).split(".",2),new shaka.deprecate.Version(Number(sn[0]),Number(sn[1]))},shaka.deprecate.Enforcer=function(sn,ln,cn){this.libraryVersion_=sn,this.onPending_=ln,this.onExpired_=cn},shaka.deprecate.Enforcer.prototype.enforce=function(sn,ln,cn){(0<sn.compareTo(this.libraryVersion_)?this.onPending_:this.onExpired_)(this.libraryVersion_,sn,ln,cn)},shaka.Deprecate=function(){},shaka.Deprecate.init=function(sn){goog.asserts.assert(shaka.Deprecate.enforcer_==null,"Deprecate.init should only be called once."),shaka.Deprecate.enforcer_=new shaka.deprecate.Enforcer(shaka.deprecate.Version.parse(sn),shaka.Deprecate.onPending_,shaka.Deprecate.onExpired_)},shaka.Deprecate.deprecateFeature=function(sn,ln,cn){var dn=shaka.Deprecate.enforcer_;goog.asserts.assert(dn,"Missing deprecation enforcer. Was |init| called?"),sn=new shaka.deprecate.Version(sn,0),dn.enforce(sn,ln,cn)},shaka.Deprecate.onPending_=function(sn,ln,cn,dn){shaka.log.alwaysWarn([cn,"has been deprecated and will be removed in",ln,". We are currently at version",sn,". Additional information:",dn].join(" "))},shaka.Deprecate.onExpired_=function(sn,ln,cn,dn){sn=[cn,"has been deprecated and has been removed in",ln,". We are now at version",sn,". Additional information:",dn].join(""),shaka.log.alwaysError(sn),goog.asserts.assert(!1,sn)},shaka.Deprecate.enforcer_=null,shaka.config={},shaka.config.AutoShowText={NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3},goog.exportSymbol("shaka.config.AutoShowText",shaka.config.AutoShowText),shaka.media.AdaptationSet=function(sn,ln){for(this.root_=sn,this.variants_=new Set([sn]),ln=ln||[],sn=$jscomp.makeIterator(ln),ln=sn.next();!ln.done;ln=sn.next())this.add(ln.value)},shaka.media.AdaptationSet.prototype.add=function(sn){return this.canInclude(sn)?(this.variants_.add(sn),!0):(shaka.log.warning("Rejecting variant - not compatible with root."),!1)},shaka.media.AdaptationSet.prototype.canInclude=function(sn){return shaka.media.AdaptationSet.areAdaptable(this.root_,sn)},shaka.media.AdaptationSet.areAdaptable=function(sn,ln){var cn=shaka.media.AdaptationSet;return!!sn.audio!=!!ln.audio||!!sn.video!=!!ln.video||sn.language!=ln.language||(goog.asserts.assert(!!sn.audio==!!ln.audio,"Both should either have audio or not have audio."),sn.audio&&ln.audio&&!cn.areAudiosCompatible_(sn.audio,ln.audio))?!1:(goog.asserts.assert(!!sn.video==!!ln.video,"Both should either have video or not have video."),!(sn.video&&ln.video&&!cn.areVideosCompatible_(sn.video,ln.video)))},shaka.media.AdaptationSet.prototype.values=function(){return this.variants_.values()},shaka.media.AdaptationSet.areAudiosCompatible_=function(sn,ln){var cn=shaka.media.AdaptationSet;return!((!sn.channelsCount||!ln.channelsCount||2<sn.channelsCount||2<ln.channelsCount)&&sn.channelsCount!=ln.channelsCount||!cn.canTransitionBetween_(sn,ln)||!cn.areRolesEqual_(sn.roles,ln.roles))},shaka.media.AdaptationSet.areVideosCompatible_=function(sn,ln){var cn=shaka.media.AdaptationSet;return!!(cn.canTransitionBetween_(sn,ln)&&cn.areRolesEqual_(sn.roles,ln.roles))},shaka.media.AdaptationSet.canTransitionBetween_=function(sn,ln){if(sn.mimeType!=ln.mimeType||(sn=shaka.util.MimeUtils.splitCodecs(sn.codecs).map(function(dn){return shaka.util.MimeUtils.getCodecBase(dn)}),ln=shaka.util.MimeUtils.splitCodecs(ln.codecs).map(function(dn){return shaka.util.MimeUtils.getCodecBase(dn)}),sn.length!=ln.length))return!1;sn.sort(),ln.sort();for(var cn=0;cn<sn.length;cn++)if(sn[cn]!=ln[cn])return!1;return!0},shaka.media.AdaptationSet.areRolesEqual_=function(sn,ln){if(sn=new Set(sn),ln=new Set(ln),sn.delete("main"),ln.delete("main"),sn.size!=ln.size)return!1;sn=$jscomp.makeIterator(sn);for(var cn=sn.next();!cn.done;cn=sn.next())if(!ln.has(cn.value))return!1;return!0},shaka.media.AdaptationSetCriteria=function(){},shaka.media.AdaptationSetCriteria.prototype.create=function(sn){},shaka.media.ExampleBasedCriteria=function(sn){this.example_=sn,this.fallback_=new shaka.media.PreferenceBasedCriteria(sn.language,"",sn.audio&&sn.audio.channelsCount?sn.audio.channelsCount:0,"")},shaka.media.ExampleBasedCriteria.prototype.create=function(sn){var ln=this,cn=sn.filter(function(dn){return shaka.media.AdaptationSet.areAdaptable(ln.example_,dn)});return cn.length?new shaka.media.AdaptationSet(cn[0],cn):this.fallback_.create(sn)},shaka.media.PreferenceBasedCriteria=function(sn,ln,cn,dn){this.language_=sn,this.role_=ln,this.channelCount_=cn,this.label_=dn===void 0?"":dn},shaka.media.PreferenceBasedCriteria.prototype.create=function(sn){var ln=shaka.media.PreferenceBasedCriteria,cn=shaka.util.StreamUtils,dn=[];dn=ln.filterByLanguage_(sn,this.language_);var pn=sn.filter(function(vn){return vn.primary});for(dn=dn.length?dn:pn.length?pn:sn,sn=ln.filterVariantsByRole_(dn,this.role_),sn.length?dn=sn:shaka.log.warning("No exact match for variant role could be found."),this.channelCount_&&(cn=cn.filterVariantsByAudioChannelCount(dn,this.channelCount_),cn.length?dn=cn:shaka.log.warning("No exact match for the channel count could be found.")),this.label_&&(ln=ln.filterVariantsByLabel_(dn,this.label_),ln.length?dn=ln:shaka.log.warning("No exact match for variant label could be found.")),ln=new shaka.media.AdaptationSet(dn[0]),dn=$jscomp.makeIterator(dn),cn=dn.next();!cn.done;cn=dn.next())cn=cn.value,ln.canInclude(cn)&&ln.add(cn);return ln},shaka.media.PreferenceBasedCriteria.filterByLanguage_=function(sn,ln){var cn=shaka.util.LanguageUtils;ln=cn.normalize(ln);var dn=cn.findClosestLocale(ln,sn.map(function(pn){return cn.getLocaleForVariant(pn)}));return dn?sn.filter(function(pn){return dn==cn.getLocaleForVariant(pn)}):[]},shaka.media.PreferenceBasedCriteria.filterVariantsByRole_=function(sn,ln){return sn.filter(function(cn){return cn.audio?ln?cn.audio.roles.includes(ln):cn.audio.roles.length==0:!1})},shaka.media.PreferenceBasedCriteria.filterVariantsByLabel_=function(sn,ln){return sn.filter(function(cn){if(!cn.audio)return!1;cn=cn.audio.label.toLowerCase();var dn=ln.toLowerCase();return cn==dn})},shaka.media.BufferingObserver=function(sn,ln){var cn=shaka.media.BufferingObserver.State;this.previousState_=cn.SATISFIED,this.thresholds_=new Map().set(cn.SATISFIED,ln).set(cn.STARVING,sn)},shaka.media.BufferingObserver.prototype.setThresholds=function(sn,ln){var cn=shaka.media.BufferingObserver.State;this.thresholds_.set(cn.SATISFIED,ln).set(cn.STARVING,sn)},shaka.media.BufferingObserver.prototype.update=function(sn,ln){var cn=shaka.media.BufferingObserver.State,dn=this.thresholds_.get(this.previousState_),pn=this.previousState_;return this.previousState_=sn=ln||sn>=dn?cn.SATISFIED:cn.STARVING,pn!=sn},shaka.media.BufferingObserver.prototype.setState=function(sn){this.previousState_=sn},shaka.media.BufferingObserver.prototype.getState=function(){return this.previousState_},shaka.media.BufferingObserver.State={STARVING:0,SATISFIED:1},shaka.net={},shaka.net.Backoff=function(sn,ln){ln=ln===void 0?!1:ln;var cn=shaka.net.Backoff.defaultRetryParameters();this.maxAttempts_=sn.maxAttempts==null?cn.maxAttempts:sn.maxAttempts,goog.asserts.assert(1<=this.maxAttempts_,"maxAttempts should be >= 1"),this.baseDelay_=sn.baseDelay==null?cn.baseDelay:sn.baseDelay,goog.asserts.assert(0<=this.baseDelay_,"baseDelay should be >= 0"),this.fuzzFactor_=sn.fuzzFactor==null?cn.fuzzFactor:sn.fuzzFactor,goog.asserts.assert(0<=this.fuzzFactor_,"fuzzFactor should be >= 0"),this.backoffFactor_=sn.backoffFactor==null?cn.backoffFactor:sn.backoffFactor,goog.asserts.assert(0<=this.backoffFactor_,"backoffFactor should be >= 0"),this.numAttempts_=0,this.nextUnfuzzedDelay_=this.baseDelay_,(this.autoReset_=ln)&&(goog.asserts.assert(2<=this.maxAttempts_,"maxAttempts must be >= 2 for autoReset == true"),this.numAttempts_=1)},shaka.net.Backoff.prototype.attempt=function(){var sn=this,ln,cn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(dn){if(dn.nextAddress==1){if(sn.numAttempts_>=sn.maxAttempts_)if(sn.autoReset_)sn.reset_();else throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.PLAYER,shaka.util.Error.Code.ATTEMPTS_EXHAUSTED);return ln=sn.numAttempts_,sn.numAttempts_++,ln==0?(goog.asserts.assert(!sn.autoReset_,"Failed to delay with auto-reset!"),dn.return()):(cn=shaka.net.Backoff.fuzz_(sn.nextUnfuzzedDelay_,sn.fuzzFactor_),dn.yield(new Promise(function(pn){shaka.net.Backoff.defer(cn,pn)}),2))}sn.nextUnfuzzedDelay_*=sn.backoffFactor_,dn.jumpToEnd()})},shaka.net.Backoff.defaultRetryParameters=function(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}},shaka.net.Backoff.fuzz_=function(sn,ln){return sn*(1+(2*Math.random()-1)*ln)},shaka.net.Backoff.prototype.reset_=function(){goog.asserts.assert(this.autoReset_,"Should only be used for auto-reset!"),this.numAttempts_=1,this.nextUnfuzzedDelay_=this.baseDelay_},shaka.net.Backoff.defer=function(sn,ln){new shaka.util.Timer(ln).tickAfter(sn/1e3)},shaka.util.AbortableOperation=function(sn,ln){this.promise=sn,this.onAbort_=ln,this.aborted_=!1},shaka.util.AbortableOperation.failed=function(sn){return new shaka.util.AbortableOperation(Promise.reject(sn),function(){return Promise.resolve()})},shaka.util.AbortableOperation.aborted=function(){var sn=Promise.reject(shaka.util.AbortableOperation.abortError());return sn.catch(function(){}),new shaka.util.AbortableOperation(sn,function(){return Promise.resolve()})},shaka.util.AbortableOperation.abortError=function(){return new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.PLAYER,shaka.util.Error.Code.OPERATION_ABORTED)},shaka.util.AbortableOperation.completed=function(sn){return new shaka.util.AbortableOperation(Promise.resolve(sn),function(){return Promise.resolve()})},shaka.util.AbortableOperation.notAbortable=function(sn){return new shaka.util.AbortableOperation(sn,function(){return sn.catch(function(){})})},shaka.util.AbortableOperation.prototype.abort=function(){return this.aborted_=!0,this.onAbort_()},shaka.util.AbortableOperation.all=function(sn){return new shaka.util.AbortableOperation(Promise.all(sn.map(function(ln){return ln.promise})),function(){return Promise.all(sn.map(function(ln){return ln.abort()}))})},shaka.util.AbortableOperation.prototype.finally=function(sn){return this.promise.then(function(ln){return sn(!0)},function(ln){return sn(!1)}),this},shaka.util.AbortableOperation.prototype.chain=function(sn,ln){var cn=this,dn=new shaka.util.PublicPromise,pn=shaka.util.AbortableOperation.abortError(),vn=function(){return dn.reject(pn),cn.abort()},kn=function(Sn){return function(wn){if(cn.aborted_&&Sn)dn.reject(pn);else{var Pn=Sn?sn:ln;Pn?vn=shaka.util.AbortableOperation.wrapChainCallback_(Pn,wn,dn):(Sn?dn.resolve:dn.reject)(wn)}}};return this.promise.then(kn(!0),kn(!1)),new shaka.util.AbortableOperation(dn,function(){return vn()})},shaka.util.AbortableOperation.wrapChainCallback_=function(sn,ln,cn){try{var dn=sn(ln);return dn&&dn.promise&&dn.abort?(cn.resolve(dn.promise),function(){return dn.abort()}):(cn.resolve(dn),function(){return Promise.resolve(dn).then(function(){},function(){})})}catch(pn){return cn.reject(pn),function(){return Promise.resolve()}}},goog.exportSymbol("shaka.util.AbortableOperation",shaka.util.AbortableOperation),goog.exportProperty(shaka.util.AbortableOperation.prototype,"chain",shaka.util.AbortableOperation.prototype.chain),goog.exportProperty(shaka.util.AbortableOperation.prototype,"finally",shaka.util.AbortableOperation.prototype.finally),goog.exportProperty(shaka.util.AbortableOperation,"all",shaka.util.AbortableOperation.all),goog.exportProperty(shaka.util.AbortableOperation.prototype,"abort",shaka.util.AbortableOperation.prototype.abort),goog.exportProperty(shaka.util.AbortableOperation,"notAbortable",shaka.util.AbortableOperation.notAbortable),goog.exportProperty(shaka.util.AbortableOperation,"completed",shaka.util.AbortableOperation.completed),goog.exportProperty(shaka.util.AbortableOperation,"aborted",shaka.util.AbortableOperation.aborted),goog.exportProperty(shaka.util.AbortableOperation,"failed",shaka.util.AbortableOperation.failed),shaka.util.ObjectUtils=function(){},shaka.util.ObjectUtils.cloneObject=function(sn){var ln=new Set,cn=function(dn){switch(typeof dn){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return dn;default:if(!dn||dn.buffer&&dn.buffer.constructor==ArrayBuffer)return dn;if(ln.has(dn))return null;var pn=dn.constructor==Array;if(dn.constructor!=Object&&!pn)return null;ln.add(dn);var vn=pn?[]:{},kn;for(kn in dn)vn[kn]=cn(dn[kn]);return pn&&(vn.length=dn.length),vn}};return cn(sn)},shaka.util.ObjectUtils.shallowCloneObject=function(sn){var ln={},cn;for(cn in sn)ln[cn]=sn[cn];return ln},shaka.util.OperationManager=function(){this.operations_=[]},shaka.util.OperationManager.prototype.manage=function(sn){var ln=this;this.operations_.push(sn.finally(function(){shaka.util.ArrayUtils.remove(ln.operations_,sn)}))},shaka.util.OperationManager.prototype.destroy=function(){for(var sn=[],ln=$jscomp.makeIterator(this.operations_),cn=ln.next();!cn.done;cn=ln.next())cn=cn.value,cn.promise.catch(function(){}),sn.push(cn.abort());return this.operations_=[],Promise.all(sn)},shaka.net.NetworkingEngine=function(sn,ln,cn){shaka.util.FakeEventTarget.call(this),this.destroyed_=!1,this.operationManager_=new shaka.util.OperationManager,this.requestFilters_=new Set,this.responseFilters_=new Set,this.onProgressUpdated_=sn||null,this.onHeadersReceived_=ln||null,this.onDownloadFailed_=cn||null,this.forceHTTPS_=!1},$jscomp.inherits(shaka.net.NetworkingEngine,shaka.util.FakeEventTarget),shaka.net.NetworkingEngine.prototype.setForceHTTPS=function(sn){this.forceHTTPS_=sn},shaka.net.NetworkingEngine.registerScheme=function(sn,ln,cn,dn){dn=dn===void 0?!1:dn,goog.asserts.assert(cn==null||0<cn,"explicit priority must be > 0"),cn=cn||shaka.net.NetworkingEngine.PluginPriority.APPLICATION;var pn=shaka.net.NetworkingEngine.schemes_[sn];(!pn||cn>=pn.priority)&&(shaka.net.NetworkingEngine.schemes_[sn]={priority:cn,plugin:ln,progressSupport:dn})},shaka.net.NetworkingEngine.unregisterScheme=function(sn){delete shaka.net.NetworkingEngine.schemes_[sn]},shaka.net.NetworkingEngine.prototype.registerRequestFilter=function(sn){this.requestFilters_.add(sn)},shaka.net.NetworkingEngine.prototype.unregisterRequestFilter=function(sn){this.requestFilters_.delete(sn)},shaka.net.NetworkingEngine.prototype.clearAllRequestFilters=function(){this.requestFilters_.clear()},shaka.net.NetworkingEngine.prototype.registerResponseFilter=function(sn){this.responseFilters_.add(sn)},shaka.net.NetworkingEngine.prototype.unregisterResponseFilter=function(sn){this.responseFilters_.delete(sn)},shaka.net.NetworkingEngine.prototype.clearAllResponseFilters=function(){this.responseFilters_.clear()},shaka.net.NetworkingEngine.defaultRetryParameters=function(){return shaka.net.Backoff.defaultRetryParameters()},shaka.net.NetworkingEngine.makeRequest=function(sn,ln,cn){return{uris:sn,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:ln,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:cn===void 0?null:cn}},shaka.net.NetworkingEngine.prototype.destroy=function(){return this.destroyed_=!0,this.requestFilters_.clear(),this.responseFilters_.clear(),shaka.util.FakeEventTarget.prototype.release.call(this),this.operationManager_.destroy()},shaka.net.NetworkingEngine.prototype.request=function(sn,ln){var cn=this,dn=shaka.util.ObjectUtils,pn=new shaka.net.NetworkingEngine.NumBytesRemainingClass;if(this.destroyed_)return dn=Promise.reject(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.PLAYER,shaka.util.Error.Code.OPERATION_ABORTED)),dn.catch(function(){}),new shaka.net.NetworkingEngine.PendingRequest(dn,function(){return Promise.resolve()},pn);goog.asserts.assert(ln.uris&&ln.uris.length,"Request without URIs!"),ln.method=ln.method||"GET",ln.headers=ln.headers||{},ln.retryParameters=ln.retryParameters?dn.cloneObject(ln.retryParameters):shaka.net.NetworkingEngine.defaultRetryParameters(),ln.uris=dn.cloneObject(ln.uris),dn=this.filterRequest_(sn,ln);var vn=dn.chain(function(){return cn.makeRequestWithRetry_(sn,ln,pn)}),kn=vn.chain(function(Ln){return cn.filterResponse_(sn,Ln)}),Sn=Date.now(),wn=0;dn.promise.then(function(){wn=Date.now()-Sn},function(){});var Pn=0;vn.promise.then(function(){Pn=Date.now()},function(){});var Nn=kn.chain(function(Ln){var Fn=Date.now()-Pn,zn=Ln.response;return zn.timeMs+=wn,zn.timeMs+=Fn,!Ln.gotProgress&&cn.onProgressUpdated_&&!zn.fromCache&&ln.method!="HEAD"&&sn==shaka.net.NetworkingEngine.RequestType.SEGMENT&&cn.onProgressUpdated_(zn.timeMs,zn.data.byteLength),zn},function(Ln){throw Ln&&(goog.asserts.assert(Ln instanceof shaka.util.Error,"Wrong error type"),Ln.severity=shaka.util.Error.Severity.CRITICAL),Ln});return dn=new shaka.net.NetworkingEngine.PendingRequest(Nn.promise,function(){return Nn.abort()},pn),this.operationManager_.manage(dn),dn},shaka.net.NetworkingEngine.prototype.filterRequest_=function(sn,ln){for(var cn=shaka.util.AbortableOperation.completed(void 0),dn={},pn=$jscomp.makeIterator(this.requestFilters_),vn=pn.next();!vn.done;dn={$jscomp$loop$prop$requestFilter$688:dn.$jscomp$loop$prop$requestFilter$688},vn=pn.next())dn.$jscomp$loop$prop$requestFilter$688=vn.value,cn=cn.chain(function(kn){return function(){return ln.body&&(ln.body=shaka.util.BufferUtils.toArrayBuffer(ln.body)),kn.$jscomp$loop$prop$requestFilter$688(sn,ln)}}(dn));return cn.chain(void 0,function(kn){throw kn instanceof shaka.util.Error&&kn.code==shaka.util.Error.Code.OPERATION_ABORTED?kn:new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.REQUEST_FILTER_ERROR,kn)})},shaka.net.NetworkingEngine.prototype.makeRequestWithRetry_=function(sn,ln,cn){var dn=new shaka.net.Backoff(ln.retryParameters,!1);return this.send_(sn,ln,dn,0,null,cn)},shaka.net.NetworkingEngine.prototype.send_=function(sn,ln,cn,dn,pn,vn){var kn=this;this.forceHTTPS_&&(ln.uris[dn]=ln.uris[dn].replace("http://","https://"));var Sn=new goog.Uri(ln.uris[dn]),wn=Sn.getScheme(),Pn=!1;wn||(wn=shaka.net.NetworkingEngine.getLocationProtocol_(),goog.asserts.assert(wn[wn.length-1]==":","location.protocol expected to end with a colon!"),wn=wn.slice(0,-1),Sn.setScheme(wn),ln.uris[dn]=Sn.toString()),wn=wn.toLowerCase();var Nn=(wn=shaka.net.NetworkingEngine.schemes_[wn])?wn.plugin:null;if(!Nn)return shaka.util.AbortableOperation.failed(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.UNSUPPORTED_SCHEME,Sn));var Ln=wn.progressSupport,Fn=null,zn=null,Dn=!1,Kn=!1,qn;return shaka.util.AbortableOperation.notAbortable(cn.attempt()).chain(function(){if(kn.destroyed_)return shaka.util.AbortableOperation.aborted();qn=Date.now();var Zn=shaka.net.NetworkingEngine.RequestType.SEGMENT,Yn=Nn(ln.uris[dn],ln,sn,function(ss,as,ds){Fn&&Fn.stop(),zn&&zn.tickAfter(rs/1e3),kn.onProgressUpdated_&&sn==Zn&&(kn.onProgressUpdated_(ss,as),Pn=!0,vn.setBytes(ds))},function(ss){kn.onHeadersReceived_&&kn.onHeadersReceived_(ss,ln,sn),Kn=!0});if(!Ln)return Yn;var Jn=ln.retryParameters.connectionTimeout;Jn&&(Fn=new shaka.util.Timer(function(){Dn=!0,Yn.abort()}),Fn.tickAfter(Jn/1e3));var rs=ln.retryParameters.stallTimeout;return rs&&(zn=new shaka.util.Timer(function(){Dn=!0,Yn.abort()})),Yn}).chain(function(Zn){Fn&&Fn.stop(),zn&&zn.stop(),Zn.timeMs==null&&(Zn.timeMs=Date.now()-qn);var Yn={response:Zn,gotProgress:Pn};return!Kn&&kn.onHeadersReceived_&&kn.onHeadersReceived_(Zn.headers,ln,sn),Yn},function(Zn){if(Fn&&Fn.stop(),zn&&zn.stop(),kn.onDownloadFailed_){var Yn=null,Jn=0;Zn instanceof shaka.util.Error&&(Yn=Zn,Zn.code==shaka.util.Error.Code.BAD_HTTP_STATUS&&(Jn=Zn.data[1])),kn.onDownloadFailed_(ln,Yn,Jn,Dn)}if(kn.destroyed_)return shaka.util.AbortableOperation.aborted();if(Dn&&(Zn=new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.TIMEOUT,ln.uris[dn],sn)),Zn instanceof shaka.util.Error){if(Zn.code==shaka.util.Error.Code.OPERATION_ABORTED)throw Zn;if(Zn.code==shaka.util.Error.Code.ATTEMPTS_EXHAUSTED)throw goog.asserts.assert(pn,"Should have last error"),pn;if(Zn.severity==shaka.util.Error.Severity.RECOVERABLE)return Yn=new Map().set("error",Zn),Yn=new shaka.util.FakeEvent("retry",Yn),kn.dispatchEvent(Yn),dn=(dn+1)%ln.uris.length,kn.send_(sn,ln,cn,dn,Zn,vn)}throw Zn})},shaka.net.NetworkingEngine.prototype.filterResponse_=function(sn,ln){for(var cn=shaka.util.AbortableOperation.completed(void 0),dn={},pn=$jscomp.makeIterator(this.responseFilters_),vn=pn.next();!vn.done;dn={$jscomp$loop$prop$responseFilter$690:dn.$jscomp$loop$prop$responseFilter$690},vn=pn.next())dn.$jscomp$loop$prop$responseFilter$690=vn.value,cn=cn.chain(function(kn){return function(){var Sn=ln.response;return Sn.data&&(Sn.data=shaka.util.BufferUtils.toArrayBuffer(Sn.data)),kn.$jscomp$loop$prop$responseFilter$690(sn,Sn)}}(dn));return cn.chain(function(){return ln},function(kn){var Sn=shaka.util.Error.Severity.CRITICAL;if(kn instanceof shaka.util.Error){if(kn.code==shaka.util.Error.Code.OPERATION_ABORTED)throw kn;Sn=kn.severity}throw new shaka.util.Error(Sn,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.RESPONSE_FILTER_ERROR,kn)})},shaka.net.NetworkingEngine.getLocationProtocol_=function(){return location.protocol},goog.exportSymbol("shaka.net.NetworkingEngine",shaka.net.NetworkingEngine),goog.exportProperty(shaka.net.NetworkingEngine.prototype,"request",shaka.net.NetworkingEngine.prototype.request),goog.exportProperty(shaka.net.NetworkingEngine.prototype,"destroy",shaka.net.NetworkingEngine.prototype.destroy),goog.exportProperty(shaka.net.NetworkingEngine,"makeRequest",shaka.net.NetworkingEngine.makeRequest),goog.exportProperty(shaka.net.NetworkingEngine,"defaultRetryParameters",shaka.net.NetworkingEngine.defaultRetryParameters),goog.exportProperty(shaka.net.NetworkingEngine.prototype,"clearAllResponseFilters",shaka.net.NetworkingEngine.prototype.clearAllResponseFilters),goog.exportProperty(shaka.net.NetworkingEngine.prototype,"unregisterResponseFilter",shaka.net.NetworkingEngine.prototype.unregisterResponseFilter),goog.exportProperty(shaka.net.NetworkingEngine.prototype,"registerResponseFilter",shaka.net.NetworkingEngine.prototype.registerResponseFilter),goog.exportProperty(shaka.net.NetworkingEngine.prototype,"clearAllRequestFilters",shaka.net.NetworkingEngine.prototype.clearAllRequestFilters),goog.exportProperty(shaka.net.NetworkingEngine.prototype,"unregisterRequestFilter",shaka.net.NetworkingEngine.prototype.unregisterRequestFilter),goog.exportProperty(shaka.net.NetworkingEngine.prototype,"registerRequestFilter",shaka.net.NetworkingEngine.prototype.registerRequestFilter),goog.exportProperty(shaka.net.NetworkingEngine,"unregisterScheme",shaka.net.NetworkingEngine.unregisterScheme),goog.exportProperty(shaka.net.NetworkingEngine,"registerScheme",shaka.net.NetworkingEngine.registerScheme),goog.exportProperty(shaka.net.NetworkingEngine.prototype,"setForceHTTPS",shaka.net.NetworkingEngine.prototype.setForceHTTPS),shaka.net.NetworkingEngine.NumBytesRemainingClass=function(){this.bytesToLoad_=0},shaka.net.NetworkingEngine.NumBytesRemainingClass.prototype.setBytes=function(sn){this.bytesToLoad_=sn},shaka.net.NetworkingEngine.NumBytesRemainingClass.prototype.getBytes=function(){return this.bytesToLoad_},goog.exportProperty(shaka.net.NetworkingEngine,"NumBytesRemainingClass",shaka.net.NetworkingEngine.NumBytesRemainingClass),shaka.net.NetworkingEngine.PendingRequest=function(sn,ln,cn){shaka.util.AbortableOperation.call(this,sn,ln),this.bytesRemaining_=cn},$jscomp.inherits(shaka.net.NetworkingEngine.PendingRequest,shaka.util.AbortableOperation),shaka.net.NetworkingEngine.PendingRequest.prototype.getBytesRemaining=function(){return this.bytesRemaining_.getBytes()},goog.exportProperty(shaka.net.NetworkingEngine,"PendingRequest",shaka.net.NetworkingEngine.PendingRequest),shaka.net.NetworkingEngine.RequestType={MANIFEST:0,SEGMENT:1,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6},goog.exportProperty(shaka.net.NetworkingEngine,"RequestType",shaka.net.NetworkingEngine.RequestType),shaka.net.NetworkingEngine.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:3},goog.exportProperty(shaka.net.NetworkingEngine,"PluginPriority",shaka.net.NetworkingEngine.PluginPriority),shaka.net.NetworkingEngine.schemes_={},shaka.util.Destroyer=function(sn){this.destroyed_=!1,this.waitOnDestroy_=new shaka.util.PublicPromise,this.onDestroy_=sn},shaka.util.Destroyer.prototype.destroyed=function(){return this.destroyed_},shaka.util.Destroyer.prototype.destroy=function(){var sn=this;return this.destroyed_?this.waitOnDestroy_:(this.destroyed_=!0,this.onDestroy_().then(function(){sn.waitOnDestroy_.resolve()},function(){sn.waitOnDestroy_.resolve()}))},shaka.util.Destroyer.prototype.ensureNotDestroyed=function(sn){if(this.destroyed_)throw sn instanceof shaka.util.Error&&sn.code==shaka.util.Error.Code.OBJECT_DESTROYED?sn:shaka.util.Destroyer.destroyedError(sn)},shaka.util.Destroyer.destroyedError=function(sn){return new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.PLAYER,shaka.util.Error.Code.OBJECT_DESTROYED,sn)},shaka.util.EventManager=function(){this.bindingMap_=new shaka.util.MultiMap},shaka.util.EventManager.prototype.release=function(){this.removeAll(),this.bindingMap_=null},shaka.util.EventManager.prototype.listen=function(sn,ln,cn,dn){this.bindingMap_&&(sn=new shaka.util.EventManager.Binding_(sn,ln,cn,dn),this.bindingMap_.push(ln,sn))},shaka.util.EventManager.prototype.listenOnce=function(sn,ln,cn,dn){var pn=this,vn=function(kn){pn.unlisten(sn,ln,vn),cn(kn)};this.listen(sn,ln,vn,dn)},shaka.util.EventManager.prototype.unlisten=function(sn,ln,cn){if(this.bindingMap_){var dn=this.bindingMap_.get(ln)||[];dn=$jscomp.makeIterator(dn);for(var pn=dn.next();!pn.done;pn=dn.next())pn=pn.value,pn.target!=sn||cn!=pn.listener&&cn||(pn.unlisten(),this.bindingMap_.remove(ln,pn))}},shaka.util.EventManager.prototype.removeAll=function(){if(this.bindingMap_){var sn=this.bindingMap_.getAll();sn=$jscomp.makeIterator(sn);for(var ln=sn.next();!ln.done;ln=sn.next())ln.value.unlisten();this.bindingMap_.clear()}},goog.exportSymbol("shaka.util.EventManager",shaka.util.EventManager),goog.exportProperty(shaka.util.EventManager.prototype,"removeAll",shaka.util.EventManager.prototype.removeAll),goog.exportProperty(shaka.util.EventManager.prototype,"unlisten",shaka.util.EventManager.prototype.unlisten),goog.exportProperty(shaka.util.EventManager.prototype,"listenOnce",shaka.util.EventManager.prototype.listenOnce),goog.exportProperty(shaka.util.EventManager.prototype,"listen",shaka.util.EventManager.prototype.listen),goog.exportProperty(shaka.util.EventManager.prototype,"release",shaka.util.EventManager.prototype.release),shaka.util.EventManager.Binding_=function(sn,ln,cn,dn){this.target=sn,this.type=ln,this.listener=cn,this.options=shaka.util.EventManager.Binding_.convertOptions_(sn,dn),this.target.addEventListener(ln,cn,this.options)},shaka.util.EventManager.Binding_.prototype.unlisten=function(){goog.asserts.assert(this.target,"Missing target"),this.target.removeEventListener(this.type,this.listener,this.options),this.listener=this.target=null,this.options=!1},shaka.util.EventManager.Binding_.convertOptions_=function(sn,ln){if(ln==null)return!1;if(typeof ln=="boolean")return ln;var cn=new Set(["passive","capture"]),dn=Object.keys(ln).filter(function(pn){return!cn.has(pn)});return goog.asserts.assert(dn.length==0,"Unsupported flag(s) to addEventListener: "+dn.join(",")),shaka.util.EventManager.Binding_.doesSupportObject_(sn)?ln:ln.capture||!1},shaka.util.EventManager.Binding_.doesSupportObject_=function(sn){var ln=shaka.util.EventManager.Binding_.supportsObject_;if(ln==null){ln=!1;try{var cn={},dn={get:function(){return ln=!0,!1}};Object.defineProperty(cn,"passive",dn),Object.defineProperty(cn,"capture",dn),dn=function(){},sn.addEventListener("test",dn,cn),sn.removeEventListener("test",dn,cn)}catch{ln=!1}shaka.util.EventManager.Binding_.supportsObject_=ln}return ln||!1},shaka.util.EventManager.Binding_.supportsObject_=void 0,shaka.util.MapUtils=function(){},shaka.util.MapUtils.asMap=function(sn){for(var ln=new Map,cn=$jscomp.makeIterator(Object.keys(sn)),dn=cn.next();!dn.done;dn=cn.next())dn=dn.value,ln.set(dn,sn[dn]);return ln},shaka.util.MapUtils.asObject=function(sn){var ln={};return sn.forEach(function(cn,dn){ln[dn]=cn}),ln},shaka.util.MapUtils.hasSameElements=function(sn,ln){if(sn||ln){if(sn&&!ln||ln&&!sn)return!1}else return!0;if(sn.size!=ln.size)return!1;sn=$jscomp.makeIterator(sn);for(var cn=sn.next();!cn.done;cn=sn.next()){var dn=$jscomp.makeIterator(cn.value);if(cn=dn.next().value,dn=dn.next().value,!ln.has(cn)||(cn=ln.get(cn),cn!=dn||cn==null))return!1}return!0},shaka.util.DataViewReader=function(sn,ln){this.dataView_=shaka.util.BufferUtils.toDataView(sn),this.littleEndian_=ln==shaka.util.DataViewReader.Endianness.LITTLE_ENDIAN,this.position_=0},shaka.util.DataViewReader.prototype.getDataView=function(){return this.dataView_},shaka.util.DataViewReader.prototype.hasMoreData=function(){return this.position_<this.dataView_.byteLength},shaka.util.DataViewReader.prototype.getPosition=function(){return this.position_},shaka.util.DataViewReader.prototype.getLength=function(){return this.dataView_.byteLength},shaka.util.DataViewReader.prototype.readUint8=function(){try{var sn=this.dataView_.getUint8(this.position_);return this.position_+=1,sn}catch{throw this.outOfBounds_()}},shaka.util.DataViewReader.prototype.readUint16=function(){try{var sn=this.dataView_.getUint16(this.position_,this.littleEndian_);return this.position_+=2,sn}catch{throw this.outOfBounds_()}},shaka.util.DataViewReader.prototype.readUint32=function(){try{var sn=this.dataView_.getUint32(this.position_,this.littleEndian_);return this.position_+=4,sn}catch{throw this.outOfBounds_()}},shaka.util.DataViewReader.prototype.readInt32=function(){try{var sn=this.dataView_.getInt32(this.position_,this.littleEndian_);return this.position_+=4,sn}catch{throw this.outOfBounds_()}},shaka.util.DataViewReader.prototype.readUint64=function(){try{if(this.littleEndian_)var sn=this.dataView_.getUint32(this.position_,!0),ln=this.dataView_.getUint32(this.position_+4,!0);else ln=this.dataView_.getUint32(this.position_,!1),sn=this.dataView_.getUint32(this.position_+4,!1)}catch{throw this.outOfBounds_()}if(2097151<ln)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.JS_INTEGER_OVERFLOW);return this.position_+=8,ln*Math.pow(2,32)+sn},shaka.util.DataViewReader.prototype.readBytes=function(sn){if(goog.asserts.assert(0<=sn,"Bad call to DataViewReader.readBytes"),this.position_+sn>this.dataView_.byteLength)throw this.outOfBounds_();var ln=shaka.util.BufferUtils.toUint8(this.dataView_,this.position_,sn);return this.position_+=sn,ln},shaka.util.DataViewReader.prototype.skip=function(sn){if(goog.asserts.assert(0<=sn,"Bad call to DataViewReader.skip"),this.position_+sn>this.dataView_.byteLength)throw this.outOfBounds_();this.position_+=sn},shaka.util.DataViewReader.prototype.rewind=function(sn){if(goog.asserts.assert(0<=sn,"Bad call to DataViewReader.rewind"),this.position_<sn)throw this.outOfBounds_();this.position_-=sn},shaka.util.DataViewReader.prototype.seek=function(sn){if(goog.asserts.assert(0<=sn,"Bad call to DataViewReader.seek"),0>sn||sn>this.dataView_.byteLength)throw this.outOfBounds_();this.position_=sn},shaka.util.DataViewReader.prototype.readTerminatedString=function(){for(var sn=this.position_;this.hasMoreData()&&this.dataView_.getUint8(this.position_)!=0;)this.position_+=1;return sn=shaka.util.BufferUtils.toUint8(this.dataView_,sn,this.position_-sn),this.position_+=1,shaka.util.StringUtils.fromUTF8(sn)},shaka.util.DataViewReader.prototype.outOfBounds_=function(){return new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.BUFFER_READ_OUT_OF_BOUNDS)},goog.exportSymbol("shaka.util.DataViewReader",shaka.util.DataViewReader),goog.exportProperty(shaka.util.DataViewReader.prototype,"readTerminatedString",shaka.util.DataViewReader.prototype.readTerminatedString),goog.exportProperty(shaka.util.DataViewReader.prototype,"seek",shaka.util.DataViewReader.prototype.seek),goog.exportProperty(shaka.util.DataViewReader.prototype,"rewind",shaka.util.DataViewReader.prototype.rewind),goog.exportProperty(shaka.util.DataViewReader.prototype,"skip",shaka.util.DataViewReader.prototype.skip),goog.exportProperty(shaka.util.DataViewReader.prototype,"readBytes",shaka.util.DataViewReader.prototype.readBytes),goog.exportProperty(shaka.util.DataViewReader.prototype,"readUint64",shaka.util.DataViewReader.prototype.readUint64),goog.exportProperty(shaka.util.DataViewReader.prototype,"readInt32",shaka.util.DataViewReader.prototype.readInt32),goog.exportProperty(shaka.util.DataViewReader.prototype,"readUint32",shaka.util.DataViewReader.prototype.readUint32),goog.exportProperty(shaka.util.DataViewReader.prototype,"readUint16",shaka.util.DataViewReader.prototype.readUint16),goog.exportProperty(shaka.util.DataViewReader.prototype,"readUint8",shaka.util.DataViewReader.prototype.readUint8),goog.exportProperty(shaka.util.DataViewReader.prototype,"getLength",shaka.util.DataViewReader.prototype.getLength),goog.exportProperty(shaka.util.DataViewReader.prototype,"getPosition",shaka.util.DataViewReader.prototype.getPosition),goog.exportProperty(shaka.util.DataViewReader.prototype,"hasMoreData",shaka.util.DataViewReader.prototype.hasMoreData),shaka.util.DataViewReader.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:1},goog.exportProperty(shaka.util.DataViewReader,"Endianness",shaka.util.DataViewReader.Endianness),shaka.util.Mp4Parser=function(){this.headers_=[],this.boxDefinitions_=[],this.done_=!1},shaka.util.Mp4Parser.prototype.box=function(sn,ln){return sn=shaka.util.Mp4Parser.typeFromString_(sn),this.headers_[sn]=shaka.util.Mp4Parser.BoxType_.BASIC_BOX,this.boxDefinitions_[sn]=ln,this},shaka.util.Mp4Parser.prototype.fullBox=function(sn,ln){return sn=shaka.util.Mp4Parser.typeFromString_(sn),this.headers_[sn]=shaka.util.Mp4Parser.BoxType_.FULL_BOX,this.boxDefinitions_[sn]=ln,this},shaka.util.Mp4Parser.prototype.stop=function(){this.done_=!0},shaka.util.Mp4Parser.prototype.parse=function(sn,ln,cn){for(sn=new shaka.util.DataViewReader(sn,shaka.util.DataViewReader.Endianness.BIG_ENDIAN),this.done_=!1;sn.hasMoreData()&&!this.done_;)this.parseNext(0,sn,ln,cn)},shaka.util.Mp4Parser.prototype.parseNext=function(sn,ln,cn,dn){var pn=ln.getPosition();if(dn&&pn+8>ln.getLength())this.done_=!0;else{var vn=ln.readUint32(),kn=ln.readUint32(),Sn=shaka.util.Mp4Parser.typeToString(kn),wn=!1;switch(shaka.log.v2("Parsing MP4 box",Sn),vn){case 0:vn=ln.getLength()-pn;break;case 1:if(dn&&ln.getPosition()+8>ln.getLength()){this.done_=!0;return}vn=ln.readUint64(),wn=!0}var Pn=this.boxDefinitions_[kn];if(Pn){var Nn=null,Ln=null;if(this.headers_[kn]==shaka.util.Mp4Parser.BoxType_.FULL_BOX){if(dn&&ln.getPosition()+4>ln.getLength()){this.done_=!0;return}Ln=ln.readUint32(),Nn=Ln>>>24,Ln&=16777215}kn=pn+vn,cn&&kn>ln.getLength()&&(kn=ln.getLength()),dn&&kn>ln.getLength()?this.done_=!0:(dn=kn-ln.getPosition(),ln=0<dn?ln.readBytes(dn):new Uint8Array(0),ln=new shaka.util.DataViewReader(ln,shaka.util.DataViewReader.Endianness.BIG_ENDIAN),Pn({name:Sn,parser:this,partialOkay:cn||!1,version:Nn,flags:Ln,reader:ln,size:vn,start:pn+sn,has64BitSize:wn}))}else sn=Math.min(pn+vn-ln.getPosition(),ln.getLength()-ln.getPosition()),ln.skip(sn)}},shaka.util.Mp4Parser.children=function(sn){for(var ln=shaka.util.Mp4Parser.headerSize(sn);sn.reader.hasMoreData()&&!sn.parser.done_;)sn.parser.parseNext(sn.start+ln,sn.reader,sn.partialOkay)},shaka.util.Mp4Parser.sampleDescription=function(sn){for(var ln=shaka.util.Mp4Parser.headerSize(sn),cn=sn.reader.readUint32(),dn=0;dn<cn&&(sn.parser.parseNext(sn.start+ln,sn.reader,sn.partialOkay),!sn.parser.done_);dn++);},shaka.util.Mp4Parser.visualSampleEntry=function(sn){var ln=shaka.util.Mp4Parser.headerSize(sn);for(sn.reader.skip(78);sn.reader.hasMoreData()&&!sn.parser.done_;)sn.parser.parseNext(sn.start+ln,sn.reader,sn.partialOkay)},shaka.util.Mp4Parser.allData=function(sn){return function(ln){var cn=ln.reader.getLength()-ln.reader.getPosition();sn(ln.reader.readBytes(cn))}},shaka.util.Mp4Parser.typeFromString_=function(sn){goog.asserts.assert(sn.length==4,"Mp4 box names must be 4 characters long");var ln=0;sn=$jscomp.makeIterator(sn);for(var cn=sn.next();!cn.done;cn=sn.next())ln=ln<<8|cn.value.charCodeAt(0);return ln},shaka.util.Mp4Parser.typeToString=function(sn){return String.fromCharCode(sn>>24&255,sn>>16&255,sn>>8&255,sn&255)},shaka.util.Mp4Parser.headerSize=function(sn){return 8+(sn.has64BitSize?8:0)+(sn.flags!=null?4:0)},goog.exportSymbol("shaka.util.Mp4Parser",shaka.util.Mp4Parser),goog.exportProperty(shaka.util.Mp4Parser,"headerSize",shaka.util.Mp4Parser.headerSize),goog.exportProperty(shaka.util.Mp4Parser,"typeToString",shaka.util.Mp4Parser.typeToString),goog.exportProperty(shaka.util.Mp4Parser,"allData",shaka.util.Mp4Parser.allData),goog.exportProperty(shaka.util.Mp4Parser,"visualSampleEntry",shaka.util.Mp4Parser.visualSampleEntry),goog.exportProperty(shaka.util.Mp4Parser,"sampleDescription",shaka.util.Mp4Parser.sampleDescription),goog.exportProperty(shaka.util.Mp4Parser,"children",shaka.util.Mp4Parser.children),goog.exportProperty(shaka.util.Mp4Parser.prototype,"parseNext",shaka.util.Mp4Parser.prototype.parseNext),goog.exportProperty(shaka.util.Mp4Parser.prototype,"parse",shaka.util.Mp4Parser.prototype.parse),goog.exportProperty(shaka.util.Mp4Parser.prototype,"stop",shaka.util.Mp4Parser.prototype.stop),goog.exportProperty(shaka.util.Mp4Parser.prototype,"fullBox",shaka.util.Mp4Parser.prototype.fullBox),goog.exportProperty(shaka.util.Mp4Parser.prototype,"box",shaka.util.Mp4Parser.prototype.box),shaka.util.Mp4Parser.BoxType_={BASIC_BOX:0,FULL_BOX:1},shaka.util.Pssh=function(sn){var ln=this;this.systemIds=[],this.cencKeyIds=[],this.data=[],new shaka.util.Mp4Parser().box("moov",shaka.util.Mp4Parser.children).box("moof",shaka.util.Mp4Parser.children).fullBox("pssh",function(cn){return ln.parsePsshBox_(cn)}).parse(sn),this.data.length==0&&shaka.log.v2("No pssh box found!")},shaka.util.Pssh.prototype.parsePsshBox_=function(sn){if(goog.asserts.assert(sn.version!=null,"PSSH boxes are full boxes and must have a valid version"),goog.asserts.assert(sn.flags!=null,"PSSH boxes are full boxes and must have a valid flag"),1<sn.version)shaka.log.warning("Unrecognized PSSH version found!");else{var ln=sn.reader.getDataView();if(goog.asserts.assert(12<=ln.byteOffset,"DataView at incorrect position"),ln=shaka.util.BufferUtils.toUint8(ln,-12,sn.size),this.data.push(ln),this.systemIds.push(shaka.util.Uint8ArrayUtils.toHex(sn.reader.readBytes(16))),0<sn.version){ln=sn.reader.readUint32();for(var cn=0;cn<ln;cn++){var dn=shaka.util.Uint8ArrayUtils.toHex(sn.reader.readBytes(16));this.cencKeyIds.push(dn)}}}},shaka.util.Pssh.createPssh=function(sn,ln,cn,dn){goog.asserts.assert(ln.byteLength==16,"Invalid system ID length");var pn=sn.length,vn=12+ln.length+4+pn;0<dn&&(vn+=4+16*cn.size);var kn=new Uint8Array(vn),Sn=shaka.util.BufferUtils.toDataView(kn),wn=0;if(Sn.setUint32(wn,vn),wn+=4,Sn.setUint32(wn,1886614376),wn+=4,1>dn?Sn.setUint32(wn,0):Sn.setUint32(wn,16777216),wn+=4,kn.set(ln,wn),wn+=ln.length,0<dn)for(Sn.setUint32(wn,cn.size),wn+=4,ln=shaka.util.Uint8ArrayUtils,cn=$jscomp.makeIterator(cn),dn=cn.next();!dn.done;dn=cn.next())dn=ln.fromHex(dn.value),kn.set(dn,wn),wn+=dn.length;return Sn.setUint32(wn,pn),wn+=4,kn.set(sn,wn),goog.asserts.assert(wn+pn===vn,"PSSH invalid length."),kn},shaka.util.Pssh.normaliseInitData=function(sn){if(!sn)return sn;var ln=new shaka.util.Pssh(sn);if(1>=ln.data.length)return sn;sn=[];var cn={};ln=$jscomp.makeIterator(ln.data);for(var dn=ln.next();!dn.done;cn={$jscomp$loop$prop$initData$470$692:cn.$jscomp$loop$prop$initData$470$692},dn=ln.next())cn.$jscomp$loop$prop$initData$470$692=dn.value,sn.some(function(pn){return function(vn){return shaka.util.BufferUtils.equal(vn,pn.$jscomp$loop$prop$initData$470$692)}}(cn))||sn.push(cn.$jscomp$loop$prop$initData$470$692);return shaka.util.Uint8ArrayUtils.concat.apply(shaka.util.Uint8ArrayUtils,$jscomp.arrayFromIterable(sn))},shaka.util.XmlUtils=function(){},shaka.util.XmlUtils.findChild=function(sn,ln){return sn=shaka.util.XmlUtils.findChildren(sn,ln),sn.length!=1?null:sn[0]},shaka.util.XmlUtils.findChildNS=function(sn,ln,cn){return sn=shaka.util.XmlUtils.findChildrenNS(sn,ln,cn),sn.length!=1?null:sn[0]},shaka.util.XmlUtils.findChildren=function(sn,ln){var cn=[];sn=$jscomp.makeIterator(sn.childNodes);for(var dn=sn.next();!dn.done;dn=sn.next())dn=dn.value,dn instanceof Element&&dn.tagName==ln&&cn.push(dn);return cn},shaka.util.XmlUtils.getChildren=function(sn){return Array.from(sn.childNodes).filter(function(ln){return ln instanceof Element})},shaka.util.XmlUtils.findChildrenNS=function(sn,ln,cn){var dn=[];sn=$jscomp.makeIterator(sn.childNodes);for(var pn=sn.next();!pn.done;pn=sn.next())pn=pn.value,pn instanceof Element&&pn.localName==cn&&pn.namespaceURI==ln&&dn.push(pn);return dn},shaka.util.XmlUtils.getAttributeNS=function(sn,ln,cn){return sn.hasAttributeNS(ln,cn)?sn.getAttributeNS(ln,cn):null},shaka.util.XmlUtils.getAttributeNSList=function(sn,ln,cn){ln=$jscomp.makeIterator(ln);for(var dn=ln.next();!dn.done;dn=ln.next())if(dn=dn.value,sn.hasAttributeNS(dn,cn))return sn.getAttributeNS(dn,cn);return null},shaka.util.XmlUtils.getContents=function(sn){var ln=shaka.util.XmlUtils;return Array.from(sn.childNodes).every(ln.isText)?sn.textContent.trim():null},shaka.util.XmlUtils.isText=function(sn){return sn.nodeType==Node.TEXT_NODE||sn.nodeType==Node.CDATA_SECTION_NODE},shaka.util.XmlUtils.parseAttr=function(sn,ln,cn,dn){dn=dn===void 0?null:dn;var pn=null;return sn=sn.getAttribute(ln),sn!=null&&(pn=cn(sn)),pn??dn},shaka.util.XmlUtils.parseDate=function(sn){return sn?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(sn)&&(sn+="Z"),sn=Date.parse(sn),isNaN(sn)?null:sn/1e3):null},shaka.util.XmlUtils.parseDuration=function(sn){if(!sn)return null;var ln=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(sn);return ln?(sn=31536e3*Number(ln[1]||null)+2592e3*Number(ln[2]||null)+86400*Number(ln[3]||null)+3600*Number(ln[4]||null)+60*Number(ln[5]||null)+Number(ln[6]||null),isFinite(sn)?sn:null):(shaka.log.warning("Invalid duration string:",sn),null)},shaka.util.XmlUtils.parseRange=function(sn){var ln=/([0-9]+)-([0-9]+)/.exec(sn);return!ln||(sn=Number(ln[1]),!isFinite(sn))?null:(ln=Number(ln[2]),isFinite(ln)?{start:sn,end:ln}:null)},shaka.util.XmlUtils.parseInt=function(sn){return sn=Number(sn),sn%1===0?sn:null},shaka.util.XmlUtils.parsePositiveInt=function(sn){return sn=Number(sn),sn%1===0&&0<sn?sn:null},shaka.util.XmlUtils.parseNonNegativeInt=function(sn){return sn=Number(sn),sn%1===0&&0<=sn?sn:null},shaka.util.XmlUtils.parseFloat=function(sn){return sn=Number(sn),isNaN(sn)?null:sn},shaka.util.XmlUtils.evalDivision=function(sn){var ln,cn=(ln=sn.match(/^(\d+)\/(\d+)$/))?Number(ln[1])/Number(ln[2]):Number(sn);return isNaN(cn)?null:cn},shaka.util.XmlUtils.parseXmlString=function(sn,ln){var cn=new DOMParser,dn=shaka.util.XmlUtils.trustedHTMLFromString_.value()(sn);sn=null;try{sn=cn.parseFromString(dn,"text/xml")}catch(pn){return shaka.log.error("XML parsing exception:",pn),null}if(goog.asserts.assert(sn,"Parsed XML document cannot be null!"),cn=sn.documentElement,!cn)return shaka.log.error("XML document was empty!"),null;if(dn=cn.getElementsByTagName("parsererror"),dn.length)return shaka.log.error("XML parser error found:",dn[0]),null;if(cn.tagName!=ln)return shaka.log.error('XML tag name does not match expected "'+ln+'":',cn.tagName),null;for(ln=document.createNodeIterator(sn,NodeFilter.SHOW_ALL);sn=ln.nextNode();)if(sn instanceof HTMLElement||sn instanceof SVGElement)return shaka.log.error("XML document embeds unsafe content!"),null;return cn},shaka.util.XmlUtils.parseXml=function(sn,ln){try{var cn=shaka.util.StringUtils.fromUTF8(sn);return shaka.util.XmlUtils.parseXmlString(cn,ln)}catch(dn){return shaka.log.error("parseXmlString threw!",dn),null}},shaka.util.XmlUtils.trustedHTMLFromString_=new shaka.util.Lazy(function(){if(typeof trustedTypes<"u"){var sn=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(ln){return ln}});return function(ln){return sn.createHTML(ln)}}return function(ln){return ln}}),shaka.media.DrmEngine=function(sn,ln){var cn=this;ln=ln===void 0?1:ln,this.playerInterface_=sn,this.supportedTypes_=new Set,this.video_=this.mediaKeys_=null,this.initializedForStorage_=this.initialized_=!1,this.licenseTimeSeconds_=0,this.currentDrmInfo_=null,this.eventManager_=new shaka.util.EventManager,this.activeSessions_=new Map,this.offlineSessionIds_=[],this.allSessionsLoaded_=new shaka.util.PublicPromise,this.config_=null,this.onError_=function(dn){cn.allSessionsLoaded_.reject(dn),sn.onError(dn)},this.keyStatusByKeyId_=new Map,this.announcedKeyStatusByKeyId_=new Map,this.keyStatusTimer_=new shaka.util.Timer(function(){return cn.processKeyStatusChanges_()}),this.usePersistentLicenses_=!1,this.mediaKeyMessageEvents_=[],this.initialRequestsSent_=!1,this.expirationTimer_=new shaka.util.Timer(function(){cn.pollExpiration_()}).tickEvery(ln),this.allSessionsLoaded_.catch(function(){}),this.destroyer_=new shaka.util.Destroyer(function(){return cn.destroyNow_()}),this.srcEquals_=!1,this.mediaKeysAttached_=null},shaka.media.DrmEngine.prototype.destroy=function(){return this.destroyer_.destroy()},shaka.media.DrmEngine.prototype.destroyNow_=function(){var sn=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ln){switch(ln.nextAddress){case 1:return sn.eventManager_.release(),sn.eventManager_=null,sn.allSessionsLoaded_.reject(),sn.expirationTimer_.stop(),sn.expirationTimer_=null,sn.keyStatusTimer_.stop(),sn.keyStatusTimer_=null,ln.yield(sn.closeOpenSessions_(),2);case 2:if(!sn.video_){ln.jumpTo(3);break}return goog.asserts.assert(!sn.video_.src,"video src must be removed first!"),ln.setCatchFinallyBlocks(4),ln.yield(sn.video_.setMediaKeys(null),6);case 6:ln.leaveTryBlock(5);break;case 4:ln.enterCatchBlock();case 5:sn.video_=null;case 3:sn.currentDrmInfo_=null,sn.supportedTypes_.clear(),sn.mediaKeys_=null,sn.offlineSessionIds_=[],sn.config_=null,sn.onError_=function(){},sn.playerInterface_=null,sn.srcEquals_=!1,sn.mediaKeysAttached_=null,ln.jumpToEnd()}})},shaka.media.DrmEngine.prototype.configure=function(sn){this.config_=sn},shaka.media.DrmEngine.prototype.setSrcEquals=function(sn){this.srcEquals_=sn},shaka.media.DrmEngine.prototype.initForStorage=function(sn,ln){return this.initializedForStorage_=!0,this.offlineSessionIds_=[],this.usePersistentLicenses_=ln,this.init_(sn)},shaka.media.DrmEngine.prototype.initForPlayback=function(sn,ln){return this.offlineSessionIds_=ln,this.usePersistentLicenses_=0<ln.length,this.init_(sn)},shaka.media.DrmEngine.prototype.initForRemoval=function(sn,ln,cn,dn,pn){var vn=new Map;return dn={audioCapabilities:dn,videoCapabilities:pn,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:sn},dn.drmInfos=[{keySystem:sn,licenseServerUri:ln,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:cn,serverCertificateUri:"",initData:null,keyIds:null}],vn.set(sn,dn),this.queryMediaKeys_(vn,[])},shaka.media.DrmEngine.prototype.init_=function(sn){var ln=this,cn,dn,pn,vn,kn,Sn,wn,Pn,Nn,Ln,Fn,zn,Dn,Kn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qn){if(qn.nextAddress==1){if(goog.asserts.assert(ln.config_,"DrmEngine configure() must be called before init()!"),cn=ln.configureClearKey_())for(dn=$jscomp.makeIterator(sn),pn=dn.next();!pn.done;pn=dn.next())vn=pn.value,vn.video&&(vn.video.drmInfos=[cn]),vn.audio&&(vn.audio.drmInfos=[cn]);for(kn=sn.some(function(Zn){return!!(Zn.video&&Zn.video.drmInfos.length||Zn.audio&&Zn.audio.drmInfos.length)}),kn||(Sn=shaka.util.MapUtils.asMap(ln.config_.servers),shaka.media.DrmEngine.replaceDrmInfo_(sn,Sn)),wn=$jscomp.makeIterator(sn),pn=wn.next();!pn.done;pn=wn.next())for(Pn=pn.value,Nn=ln.getVariantDrmInfos_(Pn),Ln=$jscomp.makeIterator(Nn),Fn=Ln.next();!Fn.done;Fn=Ln.next())zn=Fn.value,shaka.media.DrmEngine.fillInDrmInfoDefaults_(zn,shaka.util.MapUtils.asMap(ln.config_.servers),shaka.util.MapUtils.asMap(ln.config_.advanced||{}),ln.config_.keySystemsMapping);return qn.yield(shaka.util.StreamUtils.getDecodingInfosForVariants(sn,ln.usePersistentLicenses_,ln.srcEquals_),2)}return Dn=kn||Object.keys(ln.config_.servers).length,Dn?(Kn=ln.queryMediaKeys_(void 0,sn),qn.return(kn?Kn:Kn.catch(function(){}))):(ln.initialized_=!0,qn.return(Promise.resolve()))})},shaka.media.DrmEngine.prototype.attachMediaKeys_=function(){var sn=this,ln;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cn){switch(cn.nextAddress){case 1:if(sn.video_.mediaKeys)return cn.return();if(!sn.mediaKeysAttached_){cn.jumpTo(2);break}return cn.yield(sn.mediaKeysAttached_,3);case 3:return sn.destroyer_.ensureNotDestroyed(),cn.return();case 2:return cn.setCatchFinallyBlocks(4),sn.mediaKeysAttached_=sn.video_.setMediaKeys(sn.mediaKeys_),cn.yield(sn.mediaKeysAttached_,6);case 6:cn.leaveTryBlock(5);break;case 4:ln=cn.enterCatchBlock(),goog.asserts.assert(ln instanceof Error,"Wrong error type!"),sn.onError_(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.FAILED_TO_ATTACH_TO_VIDEO,ln.message));case 5:sn.destroyer_.ensureNotDestroyed(),cn.jumpToEnd()}})},shaka.media.DrmEngine.prototype.onEncryptedEvent_=function(sn){var ln=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cn){if(cn.nextAddress==1)return cn.yield(ln.attachMediaKeys_(),2);ln.newInitData(sn.initDataType,shaka.util.BufferUtils.toUint8(sn.initData)),cn.jumpToEnd()})},shaka.media.DrmEngine.prototype.attach=function(sn){var ln=this,cn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(dn){if(dn.nextAddress==1)return ln.mediaKeys_?(ln.video_=sn,ln.eventManager_.listenOnce(ln.video_,"play",function(){return ln.onPlay_()}),"webkitCurrentPlaybackTargetIsWireless"in ln.video_&&ln.eventManager_.listen(ln.video_,"webkitcurrentplaybacktargetiswirelesschanged",function(){return ln.closeOpenSessions_()}),(cn=ln.currentDrmInfo_?ln.currentDrmInfo_.initData.find(function(pn){return 0<pn.initData.length}):null)||ln.currentDrmInfo_.keySystem!=="com.apple.fps"||ln.offlineSessionIds_.length?dn.yield(ln.attachMediaKeys_(),2):dn.jumpTo(2)):(ln.eventManager_.listenOnce(sn,"encrypted",function(pn){ln.onError_(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.ENCRYPTED_CONTENT_WITHOUT_DRM_INFO))}),dn.return());ln.createOrLoad(),cn||ln.offlineSessionIds_.length||ln.config_.parseInbandPsshEnabled||ln.eventManager_.listen(ln.video_,"encrypted",function(pn){return ln.onEncryptedEvent_(pn)}),dn.jumpToEnd()})},shaka.media.DrmEngine.prototype.setServerCertificate=function(){var sn=this,ln,cn,dn,pn,vn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(kn){switch(kn.nextAddress){case 1:if(goog.asserts.assert(sn.initialized_,"Must call init() before setServerCertificate"),!sn.mediaKeys_||!sn.currentDrmInfo_)return kn.return();if(!sn.currentDrmInfo_.serverCertificateUri||sn.currentDrmInfo_.serverCertificate&&sn.currentDrmInfo_.serverCertificate.length){kn.jumpTo(2);break}return ln=shaka.net.NetworkingEngine.makeRequest([sn.currentDrmInfo_.serverCertificateUri],sn.config_.retryParameters),kn.setCatchFinallyBlocks(3),cn=sn.playerInterface_.netEngine.request(shaka.net.NetworkingEngine.RequestType.SERVER_CERTIFICATE,ln),kn.yield(cn.promise,5);case 5:dn=kn.yieldResult,sn.currentDrmInfo_.serverCertificate=shaka.util.BufferUtils.toUint8(dn.data),kn.leaveTryBlock(4);break;case 3:throw pn=kn.enterCatchBlock(),goog.asserts.assert(pn instanceof shaka.util.Error,"Wrong NetworkingEngine error type!"),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.SERVER_CERTIFICATE_REQUEST_FAILED,pn);case 4:if(sn.destroyer_.destroyed())return kn.return();case 2:return!sn.currentDrmInfo_.serverCertificate||!sn.currentDrmInfo_.serverCertificate.length?kn.return():(kn.setCatchFinallyBlocks(6),kn.yield(sn.mediaKeys_.setServerCertificate(sn.currentDrmInfo_.serverCertificate),8));case 8:kn.yieldResult||shaka.log.warning("Server certificates are not supported by the key system.  The server certificate has been ignored."),kn.leaveTryBlock(0);break;case 6:throw vn=kn.enterCatchBlock(),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.INVALID_SERVER_CERTIFICATE,vn.message)}})},shaka.media.DrmEngine.prototype.removeSession=function(sn){var ln=this,cn,dn,pn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(vn){if(vn.nextAddress==1)return goog.asserts.assert(ln.mediaKeys_,"Must call init() before removeSession"),vn.yield(ln.loadOfflineSession_(sn),2);if(vn.nextAddress!=3)return cn=vn.yieldResult,cn?(dn=[],(pn=ln.activeSessions_.get(cn))&&(pn.updatePromise=new shaka.util.PublicPromise,dn.push(pn.updatePromise)),shaka.log.v2("Attempting to remove session",sn),dn.push(cn.remove()),vn.yield(Promise.all(dn),3)):(shaka.log.v2("Ignoring attempt to remove missing session",sn),vn.return());ln.activeSessions_.delete(cn),vn.jumpToEnd()})},shaka.media.DrmEngine.prototype.createOrLoad=function(){for(var sn=(this.currentDrmInfo_?this.currentDrmInfo_.initData:[])||[],ln=$jscomp.makeIterator(sn),cn=ln.next();!cn.done;cn=ln.next())cn=cn.value,this.newInitData(cn.initDataType,cn.initData);for(ln=$jscomp.makeIterator(this.offlineSessionIds_),cn=ln.next();!cn.done;cn=ln.next())this.loadOfflineSession_(cn.value);return sn.length||this.offlineSessionIds_.length||this.allSessionsLoaded_.resolve(),this.allSessionsLoaded_},shaka.media.DrmEngine.prototype.newInitData=function(sn,ln){if(ln.length){var cn=this.activeSessions_.values();cn=$jscomp.makeIterator(cn);for(var dn=cn.next();!dn.done;dn=cn.next())if(shaka.util.BufferUtils.equal(ln,dn.value.initData)&&!shaka.util.Platform.isTizen2()){shaka.log.debug("Ignoring duplicate init data.");return}0<this.activeSessions_.size&&this.areAllSessionsLoaded_()&&(this.allSessionsLoaded_.resolve(),this.allSessionsLoaded_=new shaka.util.PublicPromise,this.allSessionsLoaded_.catch(function(){})),this.createSession(sn,ln,this.currentDrmInfo_.sessionType)}},shaka.media.DrmEngine.prototype.initialized=function(){return this.initialized_},shaka.media.DrmEngine.keySystem=function(sn){return sn?sn.keySystem:""},shaka.media.DrmEngine.isPlayReadyKeySystem=function(sn){return sn?!!sn.match(/^com\.(microsoft|chromecast)\.playready/):!1},shaka.media.DrmEngine.isFairPlayKeySystem=function(sn){return sn?!!sn.match(/^com\.apple\.fps/):!1},shaka.media.DrmEngine.prototype.willSupport=function(sn){if(shaka.util.Platform.isLegacyEdge())return!0;if(sn=sn.toLowerCase(),shaka.util.Platform.isTizen()&&sn.includes('codecs="ac-3"')){var ln=sn.replace("ac-3","ec-3");return this.supportedTypes_.has(sn)||this.supportedTypes_.has(ln)}return this.supportedTypes_.has(sn)},shaka.media.DrmEngine.prototype.getSessionIds=function(){var sn=this.activeSessions_.keys();return sn=shaka.util.Iterables.map(sn,function(ln){return ln.sessionId}),Array.from(sn)},shaka.media.DrmEngine.prototype.getExpiration=function(){var sn=1/0,ln=this.activeSessions_.keys();ln=$jscomp.makeIterator(ln);for(var cn=ln.next();!cn.done;cn=ln.next())cn=cn.value,isNaN(cn.expiration)||(sn=Math.min(sn,cn.expiration));return sn},shaka.media.DrmEngine.prototype.getLicenseTime=function(){return this.licenseTimeSeconds_?this.licenseTimeSeconds_:NaN},shaka.media.DrmEngine.prototype.getDrmInfo=function(){return this.currentDrmInfo_},shaka.media.DrmEngine.prototype.getMediaKeys=function(){return this.mediaKeys_},shaka.media.DrmEngine.prototype.getKeyStatuses=function(){return shaka.util.MapUtils.asObject(this.announcedKeyStatusByKeyId_)},shaka.media.DrmEngine.prototype.getMediaKeySessions=function(){return Array.from(this.activeSessions_.keys())},shaka.media.DrmEngine.computeMimeType_=function(sn,ln){return ln=shaka.util.MimeUtils.getFullType(sn.mimeType,ln||sn.codecs),shaka.media.Transmuxer.isSupported(ln)?shaka.media.Transmuxer.convertCodecs(sn.type,ln):ln},shaka.media.DrmEngine.prototype.queryMediaKeys_=function(sn,ln){var cn=this,dn,pn,vn,kn,Sn,wn,Pn,Nn,Ln,Fn,zn,Dn,Kn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qn){switch(qn.nextAddress){case 1:if(dn=new Map,ln.length){pn=cn.getKeySystemAccessFromVariants_(ln,dn),qn.jumpTo(2);break}return qn.yield(cn.getKeySystemAccessByConfigs_(sn),3);case 3:pn=qn.yieldResult;case 2:if(vn=pn,!vn)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE);for(cn.destroyer_.ensureNotDestroyed(),qn.setCatchFinallyBlocks(4),cn.supportedTypes_.clear(),kn=vn.getConfiguration(),shaka.log.v2("Got MediaKeySystemAccess with configuration",kn),Sn=kn.audioCapabilities||[],wn=kn.videoCapabilities||[],Pn=$jscomp.makeIterator(Sn),Nn=Pn.next();!Nn.done;Nn=Pn.next())Ln=Nn.value,cn.supportedTypes_.add(Ln.contentType.toLowerCase());for(Fn=$jscomp.makeIterator(wn),Nn=Fn.next();!Nn.done;Nn=Fn.next())zn=Nn.value,cn.supportedTypes_.add(zn.contentType.toLowerCase());if(goog.asserts.assert(cn.supportedTypes_.size,"We should get at least one supported MIME type"),cn.currentDrmInfo_=ln.length?cn.createDrmInfoByInfos_(vn.keySystem,dn.get(vn.keySystem)):shaka.media.DrmEngine.createDrmInfoByConfigs_(vn.keySystem,sn.get(vn.keySystem)),!cn.currentDrmInfo_.licenseServerUri)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.NO_LICENSE_SERVER_GIVEN,cn.currentDrmInfo_.keySystem);return qn.yield(vn.createMediaKeys(),6);case 6:return Dn=qn.yieldResult,cn.destroyer_.ensureNotDestroyed(),shaka.log.info("Created MediaKeys object for key system",cn.currentDrmInfo_.keySystem),cn.mediaKeys_=Dn,cn.initialized_=!0,qn.yield(cn.setServerCertificate(),7);case 7:cn.destroyer_.ensureNotDestroyed(),qn.leaveTryBlock(0);break;case 4:throw Kn=qn.enterCatchBlock(),cn.destroyer_.ensureNotDestroyed(Kn),cn.currentDrmInfo_=null,cn.supportedTypes_.clear(),Kn instanceof shaka.util.Error?Kn:new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.FAILED_TO_CREATE_CDM,Kn.message)}})},shaka.media.DrmEngine.prototype.getKeySystemAccessFromVariants_=function(sn,ln){for(var cn=$jscomp.makeIterator(sn),dn=cn.next();!dn.done;dn=cn.next()){var pn=this.getVariantDrmInfos_(dn.value);for(pn=$jscomp.makeIterator(pn),dn=pn.next();!dn.done;dn=pn.next()){var vn=dn.value;ln.has(vn.keySystem)||ln.set(vn.keySystem,[]),ln.get(vn.keySystem).push(vn)}}if(ln.size==1&&ln.has(""))throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.NO_RECOGNIZED_KEY_SYSTEMS);for(cn={},pn=$jscomp.makeIterator(this.config_.preferredKeySystems),vn=pn.next();!vn.done;cn={$jscomp$loop$prop$preferredKeySystem$694:cn.$jscomp$loop$prop$preferredKeySystem$694},vn=pn.next())for(cn.$jscomp$loop$prop$preferredKeySystem$694=vn.value,vn=$jscomp.makeIterator(sn),dn=vn.next();!dn.done;dn=vn.next())if(dn=dn.value.decodingInfos.find(function(Pn){return function(Nn){return Nn.supported&&Nn.keySystemAccess!=null&&Nn.keySystemAccess.keySystem==Pn.$jscomp$loop$prop$preferredKeySystem$694}}(cn)))return dn.keySystemAccess;for(cn=$jscomp.makeIterator([!0,!1]),pn=cn.next();!pn.done;pn=cn.next())for(pn=pn.value,vn=$jscomp.makeIterator(sn),dn=vn.next();!dn.done;dn=vn.next()){var kn=$jscomp.makeIterator(dn.value.decodingInfos);for(dn=kn.next();!dn.done;dn=kn.next()){var Sn=dn.value;if(Sn.supported&&Sn.keySystemAccess){dn=ln.get(Sn.keySystemAccess.keySystem);var wn=$jscomp.makeIterator(dn);for(dn=wn.next();!dn.done;dn=wn.next())if(!!dn.value.licenseServerUri==pn)return Sn.keySystemAccess}}}return null},shaka.media.DrmEngine.prototype.getKeySystemAccessByConfigs_=function(sn){var ln=this,cn,dn,pn,vn,kn,Sn,wn,Pn,Nn,Ln,Fn,zn,Dn,Kn,qn,Zn,Yn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Jn){switch(Jn.nextAddress){case 1:if(sn.size==1&&sn.has(""))throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.NO_RECOGNIZED_KEY_SYSTEMS);for(dn=$jscomp.makeIterator(sn.values()),pn=dn.next();!pn.done;pn=dn.next())vn=pn.value,vn.audioCapabilities.length==0&&delete vn.audioCapabilities,vn.videoCapabilities.length==0&&delete vn.videoCapabilities;kn=$jscomp.makeIterator(ln.config_.preferredKeySystems),Sn=kn.next();case 2:if(Sn.done){Jn.jumpTo(4);break}if(wn=Sn.value,!sn.has(wn)){Jn.jumpTo(3);break}return Pn=sn.get(wn),Jn.setCatchFinallyBlocks(6),Jn.yield(navigator.requestMediaKeySystemAccess(wn,[Pn]),8);case 8:return cn=Jn.yieldResult,Jn.return(cn);case 6:Nn=Jn.enterCatchBlock(),shaka.log.v2("Requesting",wn,"failed with config",Pn,Nn);case 7:ln.destroyer_.ensureNotDestroyed();case 3:Sn=kn.next(),Jn.jumpTo(2);break;case 4:Ln=$jscomp.makeIterator([!0,!1]),Fn=Ln.next();case 9:if(Fn.done){Jn.jumpTo(11);break}zn=Fn.value,Dn=$jscomp.makeIterator(sn.keys()),Sn=Dn.next();case 12:if(Sn.done){Fn=Ln.next(),Jn.jumpTo(9);break}if(Kn=Sn.value,qn=sn.get(Kn),Zn=qn.drmInfos.some(function(rs){return!!rs.licenseServerUri}),Zn!=zn){Jn.jumpTo(13);break}return Jn.setCatchFinallyBlocks(15),Jn.yield(navigator.requestMediaKeySystemAccess(Kn,[qn]),17);case 17:return cn=Jn.yieldResult,Jn.return(cn);case 15:Yn=Jn.enterCatchBlock(),shaka.log.v2("Requesting",Kn,"failed with config",qn,Yn);case 16:ln.destroyer_.ensureNotDestroyed();case 13:Sn=Dn.next(),Jn.jumpTo(12);break;case 11:return Jn.return(cn)}})},shaka.media.DrmEngine.prototype.configureClearKey_=function(){var sn=shaka.util.MapUtils.asMap(this.config_.clearKeys);if(sn.size==0)return null;var ln=shaka.util.StringUtils,cn=shaka.util.Uint8ArrayUtils,dn=[],pn=[];sn.forEach(function(kn,Sn){var wn=Sn;wn.length!=22&&(wn=cn.toBase64(cn.fromHex(Sn),!1)),Sn=kn,Sn.length!=22&&(Sn=cn.toBase64(cn.fromHex(kn),!1)),kn={kty:"oct",kid:wn,k:Sn},dn.push(kn),pn.push(kn.kid)}),sn=JSON.stringify({keys:dn});var vn=JSON.stringify({kids:pn});return ln=[{initData:shaka.util.BufferUtils.toUint8(ln.toUTF8(vn)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+window.btoa(sn),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:ln,keyIds:new Set(pn)}},shaka.media.DrmEngine.prototype.loadOfflineSession_=function(sn){var ln=this,cn,dn,pn,vn,kn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sn){switch(Sn.nextAddress){case 1:try{shaka.log.v1("Attempting to load an offline session",sn),cn=ln.mediaKeys_.createSession("persistent-license")}catch(wn){return dn=new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.FAILED_TO_CREATE_SESSION,wn.message),ln.onError_(dn),Sn.return(Promise.reject(dn))}return ln.eventManager_.listen(cn,"message",function(wn){return ln.onSessionMessage_(wn)}),ln.eventManager_.listen(cn,"keystatuseschange",function(wn){return ln.onKeyStatusesChange_(wn)}),pn={initData:null,initDataType:null,loaded:!1,oldExpiration:1/0,updatePromise:null,type:"persistent-license"},ln.activeSessions_.set(cn,pn),Sn.setCatchFinallyBlocks(2),Sn.yield(cn.load(sn),4);case 4:return vn=Sn.yieldResult,ln.destroyer_.ensureNotDestroyed(),shaka.log.v2("Loaded offline session",sn,vn),vn?(pn.loaded=!0,ln.areAllSessionsLoaded_()&&ln.allSessionsLoaded_.resolve(),Sn.return(cn)):(ln.activeSessions_.delete(cn),ln.onError_(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.OFFLINE_SESSION_REMOVED)),Sn.return(Promise.resolve()));case 2:kn=Sn.enterCatchBlock(),ln.destroyer_.ensureNotDestroyed(kn),ln.activeSessions_.delete(cn),ln.onError_(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.FAILED_TO_CREATE_SESSION,kn.message));case 3:return Sn.return(Promise.resolve())}})},shaka.media.DrmEngine.prototype.createSession=function(sn,ln,cn){var dn=this;goog.asserts.assert(this.mediaKeys_,"mediaKeys_ should be valid when creating temporary session.");try{shaka.log.info("Creating new",cn,"session");var pn=this.mediaKeys_.createSession(cn)}catch(vn){this.onError_(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.FAILED_TO_CREATE_SESSION,vn.message));return}this.eventManager_.listen(pn,"message",function(vn){return dn.onSessionMessage_(vn)}),this.eventManager_.listen(pn,"keystatuseschange",function(vn){return dn.onKeyStatusesChange_(vn)}),this.activeSessions_.set(pn,{initData:ln,initDataType:sn,loaded:!1,oldExpiration:1/0,updatePromise:null,type:cn});try{ln=this.config_.initDataTransform(ln,sn,this.currentDrmInfo_)}catch(vn){sn=vn,vn instanceof shaka.util.Error||(sn=new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.INIT_DATA_TRANSFORM_ERROR,vn)),this.onError_(sn);return}this.config_.logLicenseExchange&&(cn=shaka.util.Uint8ArrayUtils.toBase64(ln),shaka.log.info("EME init data: type=",sn,"data=",cn)),pn.generateRequest(sn,ln).catch(function(vn){if(!dn.destroyer_.destroyed()){goog.asserts.assert(vn instanceof Error,"Wrong error type!"),dn.activeSessions_.delete(pn);var kn=vn.errorCode;if(kn&&kn.systemCode){var Sn=kn.systemCode;0>Sn&&(Sn+=Math.pow(2,32)),Sn="0x"+Sn.toString(16)}dn.onError_(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.FAILED_TO_GENERATE_LICENSE_REQUEST,vn.message,vn,Sn))}})},shaka.media.DrmEngine.prototype.onSessionMessage_=function(sn){this.delayLicenseRequest_()?this.mediaKeyMessageEvents_.push(sn):this.sendLicenseRequest_(sn)},shaka.media.DrmEngine.prototype.delayLicenseRequest_=function(){return this.video_?this.config_.delayLicenseRequestUntilPlayed&&this.video_.paused&&!this.initialRequestsSent_:!1},shaka.media.DrmEngine.prototype.sendLicenseRequest_=function(sn){var ln=this,cn,dn,pn,vn,kn,Sn,wn,Pn,Nn,Ln,Fn,zn,Dn,Kn,qn,Zn,Yn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Jn){switch(Jn.nextAddress){case 1:return cn=sn.target,shaka.log.v1("Sending license request for session",cn.sessionId,"of type",sn.messageType),ln.config_.logLicenseExchange&&(dn=shaka.util.Uint8ArrayUtils.toBase64(sn.message),shaka.log.info("EME license request",dn)),pn=ln.activeSessions_.get(cn),vn=ln.currentDrmInfo_.licenseServerUri,kn=ln.config_.advanced[ln.currentDrmInfo_.keySystem],sn.messageType=="individualization-request"&&kn&&kn.individualizationServer&&(vn=kn.individualizationServer),Sn=shaka.net.NetworkingEngine.RequestType.LICENSE,wn=shaka.net.NetworkingEngine.makeRequest([vn],ln.config_.retryParameters),wn.body=sn.message,wn.method="POST",wn.licenseRequestType=sn.messageType,wn.sessionId=cn.sessionId,wn.drmInfo=ln.currentDrmInfo_,pn&&(wn.initData=pn.initData,wn.initDataType=pn.initDataType),shaka.media.DrmEngine.isPlayReadyKeySystem(ln.currentDrmInfo_.keySystem)&&ln.unpackPlayReadyRequest_(wn),Pn=Date.now(),Jn.setCatchFinallyBlocks(2),Ln=ln.playerInterface_.netEngine.request(Sn,wn),Jn.yield(Ln.promise,4);case 4:Nn=Jn.yieldResult,Jn.leaveTryBlock(3);break;case 2:return Fn=Jn.enterCatchBlock(),goog.asserts.assert(Fn instanceof shaka.util.Error,"Wrong NetworkingEngine error type!"),zn=new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.LICENSE_REQUEST_FAILED,Fn),ln.onError_(zn),pn&&pn.updatePromise&&pn.updatePromise.reject(zn),Jn.return();case 3:return ln.destroyer_.destroyed()?Jn.return():(ln.licenseTimeSeconds_+=(Date.now()-Pn)/1e3,ln.config_.logLicenseExchange&&(Dn=shaka.util.Uint8ArrayUtils.toBase64(Nn.data),shaka.log.info("EME license response",Dn)),Jn.setCatchFinallyBlocks(5),shaka.log.v1("Updating session",cn.sessionId),Jn.yield(cn.update(Nn.data),7));case 7:Jn.leaveTryBlock(6);break;case 5:return Kn=Jn.enterCatchBlock(),qn=new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.LICENSE_RESPONSE_REJECTED,Kn.message),ln.onError_(qn),pn&&pn.updatePromise&&pn.updatePromise.reject(qn),Jn.return();case 6:if(ln.destroyer_.destroyed())return Jn.return();Zn=new shaka.util.FakeEvent("drmsessionupdate"),ln.playerInterface_.onEvent(Zn),pn&&(pn.updatePromise&&pn.updatePromise.resolve(),Yn=new shaka.util.Timer(function(){pn.loaded=!0,ln.areAllSessionsLoaded_()&&ln.allSessionsLoaded_.resolve()}),Yn.tickAfter(shaka.media.DrmEngine.SESSION_LOAD_TIMEOUT_)),Jn.jumpToEnd()}})},shaka.media.DrmEngine.prototype.unpackPlayReadyRequest_=function(sn){var ln=shaka.util.StringUtils.fromUTF16(sn.body,!0,!0);if(ln.includes("PlayReadyKeyMessage")){shaka.log.debug("Unwrapping PlayReady request."),ln=shaka.util.XmlUtils.parseXmlString(ln,"PlayReadyKeyMessage"),goog.asserts.assert(ln,"Failed to parse PlayReady XML!");var cn=ln.getElementsByTagName("HttpHeader");cn=$jscomp.makeIterator(cn);for(var dn=cn.next();!dn.done;dn=cn.next()){var pn=dn.value;dn=pn.getElementsByTagName("name")[0],pn=pn.getElementsByTagName("value")[0],goog.asserts.assert(dn&&pn,"Malformed PlayReady headers!"),sn.headers[dn.textContent]=pn.textContent}ln=ln.getElementsByTagName("Challenge")[0],goog.asserts.assert(ln,"Malformed PlayReady challenge!"),goog.asserts.assert(ln.getAttribute("encoding")=="base64encoded","Unexpected PlayReady challenge encoding!"),sn.body=shaka.util.Uint8ArrayUtils.fromBase64(ln.textContent)}else shaka.log.debug("PlayReady request is already unwrapped."),sn.headers["Content-Type"]="text/xml; charset=utf-8"},shaka.media.DrmEngine.prototype.onKeyStatusesChange_=function(sn){var ln=this;sn=sn.target,shaka.log.v2("Key status changed for session",sn.sessionId);var cn=this.activeSessions_.get(sn),dn=!1;sn.keyStatuses.forEach(function(vn,kn){if(typeof kn=="string"){var Sn=kn;kn=vn,vn=Sn}if(shaka.media.DrmEngine.isPlayReadyKeySystem(ln.currentDrmInfo_.keySystem)&&kn.byteLength==16&&(shaka.util.Platform.isEdge()||shaka.util.Platform.isPS4())){Sn=shaka.util.BufferUtils.toDataView(kn);var wn=Sn.getUint32(0,!0),Pn=Sn.getUint16(4,!0),Nn=Sn.getUint16(6,!0);Sn.setUint32(0,wn,!1),Sn.setUint16(4,Pn,!1),Sn.setUint16(6,Nn,!1)}vn!="status-pending"&&(cn.loaded=!0),cn||goog.asserts.assert(vn!="usable","Usable keys found in closed session"),vn=="expired"&&(dn=!0),kn=shaka.util.Uint8ArrayUtils.toHex(kn).slice(0,32),ln.keyStatusByKeyId_.set(kn,vn)});var pn=sn.expiration-Date.now();(0>pn||dn&&1e3>pn)&&cn&&!cn.updatePromise&&(shaka.log.debug("Session has expired",sn.sessionId),this.activeSessions_.delete(sn),sn.close().catch(function(){})),this.areAllSessionsLoaded_()&&(this.allSessionsLoaded_.resolve(),this.keyStatusTimer_.tickAfter(shaka.media.DrmEngine.KEY_STATUS_BATCH_TIME))},shaka.media.DrmEngine.prototype.processKeyStatusChanges_=function(){var sn=this.keyStatusByKeyId_,ln=this.announcedKeyStatusByKeyId_;ln.clear(),sn.forEach(function(cn,dn){return ln.set(dn,cn)}),sn=Array.from(ln.values()),sn.length&&sn.every(function(cn){return cn=="expired"})&&this.onError_(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.EXPIRED)),this.playerInterface_.onKeyStatus(shaka.util.MapUtils.asObject(ln))},shaka.media.DrmEngine.isBrowserSupported=function(){return!!window.MediaKeys&&!!window.navigator&&!!window.navigator.requestMediaKeySystemAccess&&!!window.MediaKeySystemAccess&&!!window.MediaKeySystemAccess.prototype.getConfiguration},shaka.media.DrmEngine.probeSupport=function(){var sn,ln,cn,dn,pn,vn,kn,Sn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wn){return wn.nextAddress==1?(goog.asserts.assert(shaka.media.DrmEngine.isBrowserSupported(),"Must have basic EME support"),sn="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" "),ln=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],cn={initDataTypes:["cenc"],videoCapabilities:ln},dn={videoCapabilities:ln,persistentState:"required",sessionTypes:["persistent-license"]},pn=[dn,cn],vn=new Map,kn=function(Pn){var Nn,Ln,Fn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(zn){switch(zn.nextAddress){case 1:if(zn.setCatchFinallyBlocks(2),Pn==="org.w3.clearkey"&&shaka.util.Platform.isSafari())throw Error("Unsupported keySystem");return zn.yield(navigator.requestMediaKeySystemAccess(Pn,pn),4);case 4:return Nn=zn.yieldResult,Fn=(Ln=Nn.getConfiguration().sessionTypes)?Ln.includes("persistent-license"):!1,shaka.util.Platform.isTizen3()&&(Fn=!1),vn.set(Pn,{persistentState:Fn}),zn.yield(Nn.createMediaKeys(),5);case 5:zn.leaveTryBlock(0);break;case 2:zn.enterCatchBlock(),vn.set(Pn,null),zn.jumpToEnd()}})},Sn=sn.map(function(Pn){return kn(Pn)}),wn.yield(Promise.all(Sn),2)):wn.return(shaka.util.MapUtils.asObject(vn))})},shaka.media.DrmEngine.prototype.onPlay_=function(){for(var sn=$jscomp.makeIterator(this.mediaKeyMessageEvents_),ln=sn.next();!ln.done;ln=sn.next())this.sendLicenseRequest_(ln.value);this.initialRequestsSent_=!0,this.mediaKeyMessageEvents_=[]},shaka.media.DrmEngine.prototype.closeSession_=function(sn){var ln,cn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(dn){if(dn.nextAddress==1)return ln=shaka.media.DrmEngine,cn=new Promise(function(pn,vn){new shaka.util.Timer(vn).tickAfter(ln.CLOSE_TIMEOUT_)}),dn.setCatchFinallyBlocks(2),dn.yield(Promise.race([Promise.all([sn.close(),sn.closed]),cn]),4);if(dn.nextAddress!=2)return dn.leaveTryBlock(0);dn.enterCatchBlock(),shaka.log.warning("Timeout waiting for session close"),dn.jumpToEnd()})},shaka.media.DrmEngine.prototype.closeOpenSessions_=function(){var sn=this,ln;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cn){return ln=Array.from(sn.activeSessions_.entries()),sn.activeSessions_.clear(),cn.yield(Promise.all(ln.map(function(dn){dn=$jscomp.makeIterator(dn);var pn=dn.next().value,vn=dn.next().value,kn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sn){if(Sn.nextAddress==1)return Sn.setCatchFinallyBlocks(2),!sn.initializedForStorage_&&!sn.offlineSessionIds_.includes(pn.sessionId)&&vn.type==="persistent-license"?(shaka.log.v1("Removing session",pn.sessionId),Sn.yield(pn.remove(),5)):(shaka.log.v1("Closing session",pn.sessionId,vn),Sn.yield(sn.closeSession_(pn),5));if(Sn.nextAddress!=2)return Sn.leaveTryBlock(0);kn=Sn.enterCatchBlock(),shaka.log.error("Failed to close or remove the session",kn),Sn.jumpToEnd()})})),0)})},shaka.media.DrmEngine.prototype.supportsVariant=function(sn){var ln=sn.audio,cn=sn.video;if(ln&&ln.encrypted&&(ln=shaka.media.DrmEngine.computeMimeType_(ln),!this.willSupport(ln))||cn&&cn.encrypted&&(cn=shaka.media.DrmEngine.computeMimeType_(cn),!this.willSupport(cn)))return!1;var dn=shaka.media.DrmEngine.keySystem(this.currentDrmInfo_);return sn=this.getVariantDrmInfos_(sn),sn.length==0||sn.some(function(pn){return pn.keySystem==dn})},shaka.media.DrmEngine.areDrmCompatible=function(sn,ln){return sn.length&&ln.length?0<shaka.media.DrmEngine.getCommonDrmInfos(sn,ln).length:!0},shaka.media.DrmEngine.getCommonDrmInfos=function(sn,ln){if(!sn.length)return ln;if(!ln.length)return sn;var cn=[];sn=$jscomp.makeIterator(sn);for(var dn=sn.next();!dn.done;dn=sn.next()){dn=dn.value;for(var pn={},vn=$jscomp.makeIterator(ln),kn=vn.next();!kn.done;pn={$jscomp$loop$prop$initData$696:pn.$jscomp$loop$prop$initData$696},kn=vn.next())if(kn=kn.value,dn.keySystem==kn.keySystem){pn.$jscomp$loop$prop$initData$696=[],pn.$jscomp$loop$prop$initData$696=pn.$jscomp$loop$prop$initData$696.concat(dn.initData||[]),pn.$jscomp$loop$prop$initData$696=pn.$jscomp$loop$prop$initData$696.concat(kn.initData||[]),pn.$jscomp$loop$prop$initData$696=pn.$jscomp$loop$prop$initData$696.filter(function(Sn){return function(wn,Pn){return wn.keyId===void 0||Pn===Sn.$jscomp$loop$prop$initData$696.findIndex(function(Nn){return Nn.keyId===wn.keyId})}}(pn)),vn=dn.keyIds&&kn.keyIds?new Set([].concat($jscomp.arrayFromIterable(dn.keyIds),$jscomp.arrayFromIterable(kn.keyIds))):dn.keyIds||kn.keyIds,cn.push({keySystem:dn.keySystem,licenseServerUri:dn.licenseServerUri||kn.licenseServerUri,distinctiveIdentifierRequired:dn.distinctiveIdentifierRequired||kn.distinctiveIdentifierRequired,persistentStateRequired:dn.persistentStateRequired||kn.persistentStateRequired,videoRobustness:dn.videoRobustness||kn.videoRobustness,audioRobustness:dn.audioRobustness||kn.audioRobustness,serverCertificate:dn.serverCertificate||kn.serverCertificate,serverCertificateUri:dn.serverCertificateUri||kn.serverCertificateUri,initData:pn.$jscomp$loop$prop$initData$696,keyIds:vn});break}}return cn},shaka.media.DrmEngine.prototype.getVariantDrmInfos_=function(sn){return(sn.video?sn.video.drmInfos:[]).concat(sn.audio?sn.audio.drmInfos:[])},shaka.media.DrmEngine.prototype.pollExpiration_=function(){var sn=this;this.activeSessions_.forEach(function(ln,cn){var dn=ln.oldExpiration,pn=cn.expiration;isNaN(pn)&&(pn=1/0),pn!=dn&&(sn.playerInterface_.onExpirationUpdated(cn.sessionId,pn),ln.oldExpiration=pn)})},shaka.media.DrmEngine.prototype.areAllSessionsLoaded_=function(){var sn=this.activeSessions_.values();return shaka.util.Iterables.every(sn,function(ln){return ln.loaded})},shaka.media.DrmEngine.replaceDrmInfo_=function(sn,ln){var cn=[];for(ln.forEach(function(dn,pn){cn.push({keySystem:pn,licenseServerUri:dn,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),sn=$jscomp.makeIterator(sn),ln=sn.next();!ln.done;ln=sn.next())ln=ln.value,ln.video&&(ln.video.drmInfos=cn),ln.audio&&(ln.audio.drmInfos=cn)},shaka.media.DrmEngine.prototype.createDrmInfoByInfos_=function(sn,ln){var cn=[],dn=[],pn=[],vn=[],kn=new Set;shaka.media.DrmEngine.processDrmInfos_(ln,cn,pn,dn,vn,kn),1<pn.length&&shaka.log.warning("Multiple unique server certificates found! Only the first will be used."),1<cn.length&&shaka.log.warning("Multiple unique license server URIs found! Only the first will be used."),1<dn.length&&shaka.log.warning("Multiple unique server certificate URIs found! Only the first will be used.");var Sn=this.usePersistentLicenses_?"persistent-license":"temporary";for(sn={keySystem:sn,licenseServerUri:cn[0],distinctiveIdentifierRequired:ln[0].distinctiveIdentifierRequired,persistentStateRequired:ln[0].persistentStateRequired,sessionType:ln[0].sessionType||Sn,audioRobustness:ln[0].audioRobustness||"",videoRobustness:ln[0].videoRobustness||"",serverCertificate:pn[0],serverCertificateUri:dn[0],initData:vn,keyIds:kn},ln=$jscomp.makeIterator(ln),cn=ln.next();!cn.done;cn=ln.next())cn=cn.value,cn.distinctiveIdentifierRequired&&(sn.distinctiveIdentifierRequired=cn.distinctiveIdentifierRequired),cn.persistentStateRequired&&(sn.persistentStateRequired=cn.persistentStateRequired);return sn},shaka.media.DrmEngine.createDrmInfoByConfigs_=function(sn,ln){var cn=[],dn=[],pn=[],vn=[],kn=new Set;return shaka.media.DrmEngine.processDrmInfos_(ln.drmInfos,cn,pn,dn,vn,kn),1<pn.length&&shaka.log.warning("Multiple unique server certificates found! Only the first will be used."),1<dn.length&&shaka.log.warning("Multiple unique server certificate URIs found! Only the first will be used."),1<cn.length&&shaka.log.warning("Multiple unique license server URIs found! Only the first will be used."),{keySystem:sn,licenseServerUri:cn[0],distinctiveIdentifierRequired:ln.distinctiveIdentifier=="required",persistentStateRequired:ln.persistentState=="required",sessionType:ln.sessionTypes[0]||"temporary",audioRobustness:(ln.audioCapabilities?ln.audioCapabilities[0].robustness:"")||"",videoRobustness:(ln.videoCapabilities?ln.videoCapabilities[0].robustness:"")||"",serverCertificate:pn[0],serverCertificateUri:dn[0],initData:vn,keyIds:kn}},shaka.media.DrmEngine.processDrmInfos_=function(sn,ln,cn,dn,pn,vn){var kn={};sn=$jscomp.makeIterator(sn);for(var Sn=sn.next();!Sn.done;kn={$jscomp$loop$prop$drmInfo$698:kn.$jscomp$loop$prop$drmInfo$698},Sn=sn.next()){if(kn.$jscomp$loop$prop$drmInfo$698=Sn.value,ln.includes(kn.$jscomp$loop$prop$drmInfo$698.licenseServerUri)||ln.push(kn.$jscomp$loop$prop$drmInfo$698.licenseServerUri),dn.includes(kn.$jscomp$loop$prop$drmInfo$698.serverCertificateUri)||dn.push(kn.$jscomp$loop$prop$drmInfo$698.serverCertificateUri),kn.$jscomp$loop$prop$drmInfo$698.serverCertificate&&(cn.some(function(Nn){return function(Ln){return shaka.util.BufferUtils.equal(Ln,Nn.$jscomp$loop$prop$drmInfo$698.serverCertificate)}}(kn))||cn.push(kn.$jscomp$loop$prop$drmInfo$698.serverCertificate)),kn.$jscomp$loop$prop$drmInfo$698.initData){Sn={};for(var wn=$jscomp.makeIterator(kn.$jscomp$loop$prop$drmInfo$698.initData),Pn=wn.next();!Pn.done;Sn={$jscomp$loop$prop$initDataOverride$700:Sn.$jscomp$loop$prop$initDataOverride$700},Pn=wn.next())Sn.$jscomp$loop$prop$initDataOverride$700=Pn.value,pn.some(function(Nn){return function(Ln){var Fn=Nn.$jscomp$loop$prop$initDataOverride$700;return Ln=Ln.keyId&&Ln.keyId==Fn.keyId?!0:Ln.initDataType==Fn.initDataType&&shaka.util.BufferUtils.equal(Ln.initData,Fn.initData),Ln}}(Sn))||pn.push(Sn.$jscomp$loop$prop$initDataOverride$700)}if(kn.$jscomp$loop$prop$drmInfo$698.keyIds)for(Sn=$jscomp.makeIterator(kn.$jscomp$loop$prop$drmInfo$698.keyIds),wn=Sn.next();!wn.done;wn=Sn.next())vn.add(wn.value)}},shaka.media.DrmEngine.fillInDrmInfoDefaults_=function(sn,ln,cn,dn){var pn=sn.keySystem;pn&&(pn!="org.w3.clearkey"||!sn.licenseServerUri)&&(ln.size&&(ln=ln.get(pn)||"",sn.licenseServerUri=ln),sn.keyIds||(sn.keyIds=new Set),(cn=cn.get(pn))&&(sn.distinctiveIdentifierRequired||(sn.distinctiveIdentifierRequired=cn.distinctiveIdentifierRequired),sn.persistentStateRequired||(sn.persistentStateRequired=cn.persistentStateRequired),sn.videoRobustness||(sn.videoRobustness=cn.videoRobustness),sn.audioRobustness||(sn.audioRobustness=cn.audioRobustness),sn.serverCertificate||(sn.serverCertificate=cn.serverCertificate),cn.sessionType&&(sn.sessionType=cn.sessionType),sn.serverCertificateUri||(sn.serverCertificateUri=cn.serverCertificateUri)),dn[pn]&&(sn.keySystem=dn[pn]),window.cast&&window.cast.__platform__&&pn=="com.microsoft.playready"&&(sn.keySystem="com.chromecast.playready"))},shaka.media.DrmEngine.prototype.parseInbandPssh=function(sn,ln){if(!this.config_.parseInbandPsshEnabled)return Promise.resolve();var cn=shaka.util.ManifestParserUtils.ContentType;if(![cn.AUDIO,cn.VIDEO].includes(sn))return Promise.resolve();ln=new shaka.util.Pssh(shaka.util.BufferUtils.toUint8(ln)),cn=0;var dn=$jscomp.makeIterator(ln.data);for(sn=dn.next();!sn.done;sn=dn.next())cn+=sn.value.length;if(cn==0)return Promise.resolve();for(cn=new Uint8Array(cn),dn=0,ln=$jscomp.makeIterator(ln.data),sn=ln.next();!sn.done;sn=ln.next())sn=sn.value,cn.set(sn,dn),dn+=sn.length;return this.newInitData("cenc",cn),this.allSessionsLoaded_},shaka.media.DrmEngine.CLOSE_TIMEOUT_=1,shaka.media.DrmEngine.SESSION_LOAD_TIMEOUT_=5,shaka.media.DrmEngine.KEY_STATUS_BATCH_TIME=.5,shaka.media.DrmEngine.DUMMY_KEY_ID=new shaka.util.Lazy(function(){return shaka.util.BufferUtils.toArrayBuffer(new Uint8Array([0]))}),shaka.media.ManifestParser=function(){},shaka.media.ManifestParser.registerParserByExtension=function(sn,ln){shaka.media.ManifestParser.parsersByExtension[sn]=ln},shaka.media.ManifestParser.registerParserByMime=function(sn,ln){shaka.media.ManifestParser.parsersByMime[sn]=ln},shaka.media.ManifestParser.unregisterParserByMime=function(sn){delete shaka.media.ManifestParser.parsersByMime[sn]},shaka.media.ManifestParser.probeSupport=function(){var sn=shaka.media.ManifestParser,ln={};if(shaka.util.Platform.supportsMediaSource()){for(var cn in sn.parsersByMime)ln[cn]=!0;for(var dn in sn.parsersByExtension)ln[dn]=!0}cn={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"},dn=$jscomp.makeIterator(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var pn=dn.next();!pn.done;pn=dn.next())pn=pn.value,shaka.util.Platform.supportsMediaSource()?ln[pn]=!!sn.parsersByMime[pn]:ln[pn]=shaka.util.Platform.supportsMediaType(pn);for(var vn in cn)shaka.util.Platform.supportsMediaSource()?ln[vn]=!!sn.parsersByExtension[vn]:ln[vn]=shaka.util.Platform.supportsMediaType(cn[vn]);return ln},shaka.media.ManifestParser.getFactory=function(sn,ln,cn,dn){var pn,vn,kn,Sn,wn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Pn){if(Pn.nextAddress==1){if(pn=shaka.media.ManifestParser,dn){if(vn=pn.parsersByMime[dn.toLowerCase()])return Pn.return(vn);shaka.log.warning("Could not determine manifest type using MIME type ",dn)}if(kn=pn.getExtension(sn)){if(Sn=pn.parsersByExtension[kn])return Pn.return(Sn);shaka.log.warning("Could not determine manifest type for extension ",kn)}else shaka.log.warning("Could not find extension for ",sn);return dn?Pn.jumpTo(2):Pn.yield(pn.getMimeType(sn,ln,cn),3)}if(Pn.nextAddress!=2&&(dn=Pn.yieldResult)){if(wn=shaka.media.ManifestParser.parsersByMime[dn])return Pn.return(wn);shaka.log.warning("Could not determine manifest type using MIME type",dn)}throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.UNABLE_TO_GUESS_MANIFEST_TYPE,sn)})},shaka.media.ManifestParser.getMimeType=function(sn,ln,cn){var dn,pn,vn,kn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sn){return Sn.nextAddress==1?(dn=shaka.net.NetworkingEngine.RequestType.MANIFEST,pn=shaka.net.NetworkingEngine.makeRequest([sn],cn),pn.method="HEAD",Sn.yield(ln.request(dn,pn).promise,2)):(vn=Sn.yieldResult,kn=vn.headers["content-type"],Sn.return(kn?kn.toLowerCase().split(";").shift():""))})},shaka.media.ManifestParser.getExtension=function(sn){return sn=new goog.Uri(sn).getPath().split("/").pop().split("."),sn.length==1?"":sn.pop().toLowerCase()},shaka.media.ManifestParser.isSupported=function(sn,ln){return shaka.util.Platform.supportsMediaSource()?ln in shaka.media.ManifestParser.parsersByMime||shaka.media.ManifestParser.getExtension(sn)in shaka.media.ManifestParser.parsersByExtension:!1},goog.exportSymbol("shaka.media.ManifestParser",shaka.media.ManifestParser),goog.exportProperty(shaka.media.ManifestParser,"unregisterParserByMime",shaka.media.ManifestParser.unregisterParserByMime),goog.exportProperty(shaka.media.ManifestParser,"registerParserByMime",shaka.media.ManifestParser.registerParserByMime),goog.exportProperty(shaka.media.ManifestParser,"registerParserByExtension",shaka.media.ManifestParser.registerParserByExtension),shaka.media.ManifestParser.parsersByMime={},shaka.media.ManifestParser.parsersByExtension={},shaka.media.ContentWorkarounds=function(){},shaka.media.ContentWorkarounds.fakeEncryption=function(sn){var ln=shaka.media.ContentWorkarounds;sn=shaka.util.BufferUtils.toUint8(sn);var cn=!1,dn,pn=[],vn=function(Pn){pn.push(Pn),shaka.util.Mp4Parser.children(Pn)},kn=function(Pn){cn=!0},Sn=[];if(new shaka.util.Mp4Parser().box("moov",vn).box("trak",vn).box("mdia",vn).box("minf",vn).box("stbl",vn).fullBox("stsd",function(Pn){dn=Pn,pn.push(Pn),shaka.util.Mp4Parser.sampleDescription(Pn)}).fullBox("encv",kn).fullBox("enca",kn).fullBox("hev1",function(Pn){Sn.push({box:Pn,newType:ln.BOX_TYPE_ENCV_})}).fullBox("hvc1",function(Pn){Sn.push({box:Pn,newType:ln.BOX_TYPE_ENCV_})}).fullBox("avc1",function(Pn){Sn.push({box:Pn,newType:ln.BOX_TYPE_ENCV_})}).fullBox("avc3",function(Pn){Sn.push({box:Pn,newType:ln.BOX_TYPE_ENCV_})}).fullBox("ac-3",function(Pn){Sn.push({box:Pn,newType:ln.BOX_TYPE_ENCA_})}).fullBox("ec-3",function(Pn){Sn.push({box:Pn,newType:ln.BOX_TYPE_ENCA_})}).fullBox("mp4a",function(Pn){Sn.push({box:Pn,newType:ln.BOX_TYPE_ENCA_})}).parse(sn),cn)return shaka.log.debug("Init segment already indicates encryption."),sn;if(Sn.length==0||!dn)throw shaka.log.error("Failed to find boxes needed to fake encryption!"),shaka.log.v2("Failed init segment (hex):",shaka.util.Uint8ArrayUtils.toHex(sn)),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.CONTENT_TRANSFORMATION_FAILED);for(Sn.reverse(),vn=$jscomp.makeIterator(Sn),kn=vn.next();!kn.done;kn=vn.next()){kn=kn.value;var wn=shaka.util.Mp4Parser.typeToString(kn.newType);shaka.log.debug('Inserting "'+wn+'" box into init segment.'),sn=ln.insertEncryptionMetadata_(sn,dn,kn.box,pn,kn.newType)}return sn},shaka.media.ContentWorkarounds.insertEncryptionMetadata_=function(sn,ln,cn,dn,pn){var vn=shaka.media.ContentWorkarounds,kn=vn.createEncryptionMetadata_(sn,cn,pn);pn=new Uint8Array(sn.byteLength+kn.byteLength),cn=shaka.util.Platform.isXboxOne()?cn.start:cn.start+cn.size;var Sn=sn.subarray(0,cn);for(sn=sn.subarray(cn),pn.set(Sn),pn.set(kn,cn),pn.set(sn,cn+kn.byteLength),dn=$jscomp.makeIterator(dn),sn=dn.next();!sn.done;sn=dn.next())sn=sn.value,goog.asserts.assert(sn.start<cn,"Ancestor MP4 box found in the wrong location!  Modified init segment will not make sense!"),vn.updateBoxSize_(pn,sn.start,sn.size+kn.byteLength);return vn=shaka.util.BufferUtils.toDataView(pn,ln.start),ln=shaka.util.Mp4Parser.headerSize(ln),kn=vn.getUint32(ln),vn.setUint32(ln,kn+1),pn},shaka.media.ContentWorkarounds.createEncryptionMetadata_=function(sn,ln,cn){var dn=shaka.media.ContentWorkarounds,pn=dn.CANNED_SINF_BOX_.value(),vn=sn.subarray(ln.start,ln.start+ln.size),kn=shaka.util.BufferUtils.toDataView(vn);return sn=new Uint8Array(ln.size+pn.byteLength),sn.set(vn,0),vn=shaka.util.BufferUtils.toDataView(sn),vn.setUint32(dn.BOX_TYPE_OFFSET_,cn),sn.set(pn,ln.size),cn=kn.getUint32(dn.BOX_TYPE_OFFSET_),vn.setUint32(ln.size+dn.CANNED_SINF_BOX_FORMAT_OFFSET_,cn),dn.updateBoxSize_(sn,0,sn.byteLength),sn},shaka.media.ContentWorkarounds.updateBoxSize_=function(sn,ln,cn){var dn=shaka.media.ContentWorkarounds;sn=shaka.util.BufferUtils.toDataView(sn,ln),ln=sn.getUint32(dn.BOX_SIZE_OFFSET_),ln!=0&&(ln==1?(sn.setUint32(dn.BOX_SIZE_64_OFFSET_,cn>>32),sn.setUint32(dn.BOX_SIZE_64_OFFSET_+4,cn&4294967295)):sn.setUint32(dn.BOX_SIZE_OFFSET_,cn))},shaka.media.ContentWorkarounds.CANNED_SINF_BOX_=new shaka.util.Lazy(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])}),shaka.media.ContentWorkarounds.CANNED_SINF_BOX_FORMAT_OFFSET_=16,shaka.media.ContentWorkarounds.BOX_SIZE_OFFSET_=0,shaka.media.ContentWorkarounds.BOX_TYPE_OFFSET_=4,shaka.media.ContentWorkarounds.BOX_SIZE_64_OFFSET_=8,shaka.media.ContentWorkarounds.BOX_TYPE_ENCV_=1701733238,shaka.media.ContentWorkarounds.BOX_TYPE_ENCA_=1701733217,shaka.cea={},shaka.cea.ICaptionDecoder=function(){},shaka.cea.ICaptionDecoder.prototype.extract=function(sn,ln){},shaka.cea.ICaptionDecoder.prototype.decode=function(){},shaka.cea.ICaptionDecoder.prototype.clear=function(){},shaka.cea.CeaUtils=function(){},shaka.cea.CeaUtils.getParsedCaption=function(sn,ln,cn,dn,pn){if(dn>=pn)return null;for(var vn=-1,kn=-1,Sn=0;Sn<cn.length;Sn++)if(cn[Sn].some(function(rs){return rs!=null&&rs.getChar().trim()!=""})){vn=Sn;break}for(Sn=cn.length-1;0<=Sn;Sn--)if(cn[Sn].some(function(rs){return rs!=null&&rs.getChar().trim()!=""})){kn=Sn;break}if(vn===-1||kn===-1)return null;for(var wn=Sn=!1,Pn=shaka.cea.CeaUtils.DEFAULT_TXT_COLOR,Nn=shaka.cea.CeaUtils.DEFAULT_BG_COLOR,Ln=shaka.cea.CeaUtils.createStyledCue(dn,pn,Sn,wn,Pn,Nn);vn<=kn;vn++){for(var Fn=cn[vn],zn=-1,Dn=-1,Kn=0;Kn<Fn.length;Kn++)if(Fn[Kn]!=null&&Fn[Kn].getChar().trim()!==""){zn=Kn;break}for(Kn=Fn.length-1;0<=Kn;Kn--)if(Fn[Kn]!=null&&Fn[Kn].getChar().trim()!==""){Dn=Kn;break}if(zn===-1||Dn===-1)Fn=shaka.cea.CeaUtils.createLineBreakCue(dn,pn),sn.nestedCues.push(Fn);else{for(;zn<=Dn;zn++)if(Kn=Fn[zn]){var qn=Kn.isUnderlined(),Zn=Kn.isItalicized(),Yn=Kn.getTextColor(),Jn=Kn.getBackgroundColor();(qn!=Sn||Zn!=wn||Yn!=Pn||Jn!=Nn)&&(Ln.payload&&sn.nestedCues.push(Ln),Ln=shaka.cea.CeaUtils.createStyledCue(dn,pn,qn,Zn,Yn,Jn),Sn=qn,wn=Zn,Pn=Yn,Nn=Jn),Ln.payload+=Kn.getChar()}else Ln.payload+=" ";Ln.payload&&sn.nestedCues.push(Ln),vn!==kn&&(Ln=shaka.cea.CeaUtils.createLineBreakCue(dn,pn),sn.nestedCues.push(Ln)),Ln=shaka.cea.CeaUtils.createStyledCue(dn,pn,Sn,wn,Pn,Nn)}}return sn.nestedCues.length?{cue:sn,stream:ln}:null},shaka.cea.CeaUtils.createStyledCue=function(sn,ln,cn,dn,pn,vn){return sn=new shaka.text.Cue(sn,ln,""),cn&&sn.textDecoration.push(shaka.text.Cue.textDecoration.UNDERLINE),dn&&(sn.fontStyle=shaka.text.Cue.fontStyle.ITALIC),sn.color=pn,sn.backgroundColor=vn,sn},shaka.cea.CeaUtils.createLineBreakCue=function(sn,ln){return sn=new shaka.text.Cue(sn,ln,""),sn.lineBreak=!0,sn},shaka.cea.CeaUtils.StyledChar=function(sn,ln,cn,dn,pn){this.character_=sn,this.underline_=ln,this.italics_=cn,this.backgroundColor_=dn,this.textColor_=pn},shaka.cea.CeaUtils.StyledChar.prototype.getChar=function(){return this.character_},shaka.cea.CeaUtils.StyledChar.prototype.isUnderlined=function(){return this.underline_},shaka.cea.CeaUtils.StyledChar.prototype.isItalicized=function(){return this.italics_},shaka.cea.CeaUtils.StyledChar.prototype.getBackgroundColor=function(){return this.backgroundColor_},shaka.cea.CeaUtils.StyledChar.prototype.getTextColor=function(){return this.textColor_},shaka.cea.CeaUtils.DEFAULT_BG_COLOR="black",shaka.cea.CeaUtils.DEFAULT_TXT_COLOR="white",shaka.cea.Cea608Memory=function(sn,ln){this.rows_=[],this.row_=1,this.scrollRows_=0,this.fieldNum_=sn,this.channelNum_=ln,this.italics_=this.underline_=!1,this.textColor_=shaka.cea.CeaUtils.DEFAULT_TXT_COLOR,this.backgroundColor_=shaka.cea.CeaUtils.DEFAULT_BG_COLOR,this.reset()},shaka.cea.Cea608Memory.prototype.forceEmit=function(sn,ln){var cn="CC"+(this.fieldNum_<<1|this.channelNum_+1),dn=new shaka.text.Cue(sn,ln,"");return shaka.cea.CeaUtils.getParsedCaption(dn,cn,this.rows_,sn,ln)},shaka.cea.Cea608Memory.prototype.reset=function(){this.resetAllRows(),this.row_=1},shaka.cea.Cea608Memory.prototype.getRow=function(){return this.row_},shaka.cea.Cea608Memory.prototype.setRow=function(sn){this.row_=sn},shaka.cea.Cea608Memory.prototype.getScrollSize=function(){return this.scrollRows_},shaka.cea.Cea608Memory.prototype.setScrollSize=function(sn){this.scrollRows_=sn},shaka.cea.Cea608Memory.prototype.addChar=function(sn,ln){if(!(32>ln||127<ln)){var cn="";switch(sn){case shaka.cea.Cea608Memory.CharSet.BASIC_NORTH_AMERICAN:cn=shaka.cea.Cea608Memory.CharSet.BasicNorthAmericanChars.has(ln)?shaka.cea.Cea608Memory.CharSet.BasicNorthAmericanChars.get(ln):String.fromCharCode(ln);break;case shaka.cea.Cea608Memory.CharSet.SPECIAL_NORTH_AMERICAN:cn=shaka.cea.Cea608Memory.CharSet.SpecialNorthAmericanChars.get(ln);break;case shaka.cea.Cea608Memory.CharSet.SPANISH_FRENCH:this.eraseChar(),cn=shaka.cea.Cea608Memory.CharSet.ExtendedSpanishFrench.get(ln);break;case shaka.cea.Cea608Memory.CharSet.PORTUGUESE_GERMAN:this.eraseChar(),cn=shaka.cea.Cea608Memory.CharSet.ExtendedPortugueseGerman.get(ln)}cn&&(sn=new shaka.cea.CeaUtils.StyledChar(cn,this.underline_,this.italics_,this.backgroundColor_,this.textColor_),this.rows_[this.row_].push(sn))}},shaka.cea.Cea608Memory.prototype.eraseChar=function(){this.rows_[this.row_].pop()},shaka.cea.Cea608Memory.prototype.moveRows=function(sn,ln,cn){if(!(0>ln||0>sn))if(sn>=ln)for(--cn;0<=cn;cn--)this.rows_[sn+cn]=this.rows_[ln+cn].map(function(pn){return pn});else for(var dn=0;dn<cn;dn++)this.rows_[sn+dn]=this.rows_[ln+dn].map(function(pn){return pn})},shaka.cea.Cea608Memory.prototype.resetRows=function(sn,ln){for(var cn=0;cn<=ln;cn++)this.rows_[sn+cn]=[]},shaka.cea.Cea608Memory.prototype.resetAllRows=function(){this.resetRows(0,shaka.cea.Cea608Memory.CC_ROWS)},shaka.cea.Cea608Memory.prototype.eraseBuffer=function(){this.row_=0<this.scrollRows_?this.scrollRows_:0,this.resetAllRows()},shaka.cea.Cea608Memory.prototype.setUnderline=function(sn){this.underline_=sn},shaka.cea.Cea608Memory.prototype.setItalics=function(sn){this.italics_=sn},shaka.cea.Cea608Memory.prototype.setTextColor=function(sn){this.textColor_=sn},shaka.cea.Cea608Memory.prototype.setBackgroundColor=function(sn){this.backgroundColor_=sn},shaka.cea.Cea608Memory.CC_ROWS=15,shaka.cea.Cea608Memory.CharSet={BASIC_NORTH_AMERICAN:0,SPECIAL_NORTH_AMERICAN:1,SPANISH_FRENCH:2,PORTUGUESE_GERMAN:3},shaka.cea.Cea608Memory.CharSet.BasicNorthAmericanChars=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),shaka.cea.Cea608Memory.CharSet.SpecialNorthAmericanChars=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57,"⠀"],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),shaka.cea.Cea608Memory.CharSet.ExtendedSpanishFrench=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),shaka.cea.Cea608Memory.CharSet.ExtendedPortugueseGerman=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]),shaka.cea.Cea608DataChannel=function(sn,ln){this.type_=shaka.cea.Cea608DataChannel.CaptionType.NONE,this.text_=new shaka.cea.Cea608Memory(sn,ln),this.displayedMemory_=new shaka.cea.Cea608Memory(sn,ln),this.nonDisplayedMemory_=new shaka.cea.Cea608Memory(sn,ln),this.curbuf_=this.displayedMemory_,this.prevEndTime_=0,this.lastcp_=null},shaka.cea.Cea608DataChannel.prototype.reset=function(){this.type_=shaka.cea.Cea608DataChannel.CaptionType.PAINTON,this.curbuf_=this.displayedMemory_,this.lastcp_=null,this.displayedMemory_.reset(),this.nonDisplayedMemory_.reset(),this.text_.reset()},shaka.cea.Cea608DataChannel.prototype.pacToRow_=function(sn,ln){return[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(sn&7)<<1|ln>>5&1]},shaka.cea.Cea608DataChannel.prototype.controlPac_=function(sn,ln){sn=this.pacToRow_(sn,ln);var cn=(ln&30)>>1,dn=shaka.cea.CeaUtils.DEFAULT_TXT_COLOR,pn=!1;if(7>cn?dn=shaka.cea.Cea608DataChannel.TEXT_COLORS[cn]:cn===7&&(pn=!0),ln=(ln&1)===1,this.type_!==shaka.cea.Cea608DataChannel.CaptionType.TEXT){if(cn=this.curbuf_,this.type_===shaka.cea.Cea608DataChannel.CaptionType.ROLLUP&&sn!==cn.getRow()){var vn=1+cn.getRow()-cn.getScrollSize(),kn=1+sn-cn.getScrollSize();cn.moveRows(kn,vn,cn.getScrollSize()),cn.resetRows(0,kn-1),cn.resetRows(sn+1,shaka.cea.Cea608Memory.CC_ROWS-sn)}cn.setRow(sn),this.curbuf_.setUnderline(ln),this.curbuf_.setItalics(pn),this.curbuf_.setTextColor(dn),this.curbuf_.setBackgroundColor(shaka.cea.CeaUtils.DEFAULT_BG_COLOR)}},shaka.cea.Cea608DataChannel.prototype.controlMidrow_=function(sn){this.curbuf_.setUnderline(!1),this.curbuf_.setItalics(!1),this.curbuf_.setTextColor(shaka.cea.CeaUtils.DEFAULT_TXT_COLOR),this.curbuf_.addChar(shaka.cea.Cea608Memory.CharSet.BASIC_NORTH_AMERICAN,32);var ln=!1,cn=shaka.cea.Cea608DataChannel.TEXT_COLORS[(sn&14)>>1];cn==="white_italics"&&(cn="white",ln=!0),this.curbuf_.setUnderline((sn&1)===1),this.curbuf_.setItalics(ln),this.curbuf_.setTextColor(cn)},shaka.cea.Cea608DataChannel.prototype.controlBackgroundAttribute_=function(sn,ln){var cn=shaka.cea.CeaUtils.DEFAULT_BG_COLOR;!(sn&7)&&(cn=shaka.cea.Cea608DataChannel.BG_COLORS[(ln&14)>>1]),this.curbuf_.setBackgroundColor(cn)},shaka.cea.Cea608DataChannel.prototype.controlMiscellaneous_=function(sn){var ln=shaka.cea.Cea608DataChannel.MiscCmd_,cn=sn.pts,dn=null;switch(sn.ccData2){case ln.RCL:this.controlRcl_();break;case ln.BS:this.controlBs_();break;case ln.RU2:dn=this.controlRu_(2,cn);break;case ln.RU3:dn=this.controlRu_(3,cn);break;case ln.RU4:dn=this.controlRu_(4,cn);break;case ln.FON:this.controlFon_();break;case ln.RDC:this.controlRdc_(cn);break;case ln.TR:this.controlTr_();break;case ln.RTD:this.controlRtd_();break;case ln.EDM:dn=this.controlEdm_(cn);break;case ln.CR:dn=this.controlCr_(cn);break;case ln.ENM:this.controlEnm_();break;case ln.EOC:dn=this.controlEoc_(cn)}return dn},shaka.cea.Cea608DataChannel.prototype.controlCr_=function(sn){var ln=this.curbuf_;if(this.type_!==shaka.cea.Cea608DataChannel.CaptionType.ROLLUP)return null;var cn=ln.forceEmit(this.prevEndTime_,sn),dn=ln.getRow()-ln.getScrollSize()+1;return ln.moveRows(dn-1,dn,ln.getScrollSize()),ln.resetRows(0,dn-1),ln.resetRows(ln.getRow(),shaka.cea.Cea608Memory.CC_ROWS-ln.getRow()),this.prevEndTime_=sn,cn},shaka.cea.Cea608DataChannel.prototype.controlRu_=function(sn,ln){var cn=this.curbuf_=this.displayedMemory_,dn=null;return this.type_!==shaka.cea.Cea608DataChannel.CaptionType.ROLLUP&&this.type_!==shaka.cea.Cea608DataChannel.CaptionType.TEXT&&(dn=cn.forceEmit(this.prevEndTime_,ln),this.displayedMemory_.eraseBuffer(),this.nonDisplayedMemory_.eraseBuffer(),cn.setRow(shaka.cea.Cea608Memory.CC_ROWS)),this.type_=shaka.cea.Cea608DataChannel.CaptionType.ROLLUP,cn.setScrollSize(sn),dn},shaka.cea.Cea608DataChannel.prototype.controlFon_=function(){this.curbuf_.addChar(shaka.cea.Cea608Memory.CharSet.BASIC_NORTH_AMERICAN,32)},shaka.cea.Cea608DataChannel.prototype.controlEdm_=function(sn){var ln=this.displayedMemory_,cn=null;return this.type_!==shaka.cea.Cea608DataChannel.CaptionType.TEXT&&(cn=ln.forceEmit(this.prevEndTime_,sn)),ln.resetAllRows(),cn},shaka.cea.Cea608DataChannel.prototype.controlRdc_=function(sn){this.type_=shaka.cea.Cea608DataChannel.CaptionType.PAINTON,this.curbuf_=this.displayedMemory_,this.curbuf_.setScrollSize(0),this.prevEndTime_=sn},shaka.cea.Cea608DataChannel.prototype.controlEnm_=function(){this.nonDisplayedMemory_.resetAllRows()},shaka.cea.Cea608DataChannel.prototype.controlEoc_=function(sn){var ln=null;this.type_!==shaka.cea.Cea608DataChannel.CaptionType.TEXT&&(ln=this.displayedMemory_.forceEmit(this.prevEndTime_,sn));var cn=this.nonDisplayedMemory_;return this.nonDisplayedMemory_=this.displayedMemory_,this.displayedMemory_=cn,this.controlRcl_(),this.prevEndTime_=sn,ln},shaka.cea.Cea608DataChannel.prototype.controlRcl_=function(){this.type_=shaka.cea.Cea608DataChannel.CaptionType.POPON,this.curbuf_=this.nonDisplayedMemory_,this.curbuf_.setScrollSize(0)},shaka.cea.Cea608DataChannel.prototype.controlBs_=function(){this.curbuf_.eraseChar()},shaka.cea.Cea608DataChannel.prototype.controlTr_=function(){this.text_.reset(),this.controlRtd_()},shaka.cea.Cea608DataChannel.prototype.controlRtd_=function(){shaka.log.warnOnce("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),this.curbuf_=this.text_,this.type_=shaka.cea.Cea608DataChannel.CaptionType.TEXT},shaka.cea.Cea608DataChannel.prototype.handleBasicNorthAmericanChar=function(sn,ln){this.curbuf_.addChar(shaka.cea.Cea608Memory.CharSet.BASIC_NORTH_AMERICAN,sn),this.curbuf_.addChar(shaka.cea.Cea608Memory.CharSet.BASIC_NORTH_AMERICAN,ln)},shaka.cea.Cea608DataChannel.prototype.handleExtendedWesternEuropeanChar_=function(sn,ln){this.curbuf_.addChar(sn&1?shaka.cea.Cea608Memory.CharSet.PORTUGUESE_GERMAN:shaka.cea.Cea608Memory.CharSet.SPANISH_FRENCH,ln)},shaka.cea.Cea608DataChannel.prototype.handleControlCode=function(sn){var ln=sn.ccData1,cn=sn.ccData2;if(this.lastcp_===(ln<<8|cn))return this.lastcp_=null;if(this.lastcp_=ln<<8|cn,this.isPAC_(ln,cn))this.controlPac_(ln,cn);else if(this.isMidrowStyleChange_(ln,cn))this.controlMidrow_(cn);else if(this.isBackgroundAttribute_(ln,cn))this.controlBackgroundAttribute_(ln,cn);else if(this.isSpecialNorthAmericanChar_(ln,cn))this.curbuf_.addChar(shaka.cea.Cea608Memory.CharSet.SPECIAL_NORTH_AMERICAN,cn);else if(this.isExtendedWesternEuropeanChar_(ln,cn))this.handleExtendedWesternEuropeanChar_(ln,cn);else if(this.isMiscellaneous_(ln,cn))return this.controlMiscellaneous_(sn);return null},shaka.cea.Cea608DataChannel.prototype.isMiscellaneous_=function(sn,ln){return(sn&246)===20&&(ln&240)===32},shaka.cea.Cea608DataChannel.prototype.isPAC_=function(sn,ln){return(sn&240)===16&&(ln&192)===64},shaka.cea.Cea608DataChannel.prototype.isMidrowStyleChange_=function(sn,ln){return(sn&247)===17&&(ln&240)===32},shaka.cea.Cea608DataChannel.prototype.isBackgroundAttribute_=function(sn,ln){return(sn&247)===16&&(ln&240)===32||(sn&247)===23&&(ln&255)===45},shaka.cea.Cea608DataChannel.prototype.isSpecialNorthAmericanChar_=function(sn,ln){return(sn&247)===17&&(ln&240)===48},shaka.cea.Cea608DataChannel.prototype.isExtendedWesternEuropeanChar_=function(sn,ln){return(sn&246)===18&&(ln&224)===32},shaka.cea.Cea608DataChannel.isControlCode=function(sn){return(sn&112)===16},shaka.cea.Cea608DataChannel.MiscCmd_={RCL:32,BS:33,AOD:34,AON:35,DER:36,RU2:37,RU3:38,RU4:39,FON:40,RDC:41,TR:42,RTD:43,EDM:44,CR:45,ENM:46,EOC:47},shaka.cea.Cea608DataChannel.CaptionType={NONE:0,POPON:1,PAINTON:2,ROLLUP:3,TEXT:4},shaka.cea.Cea608DataChannel.BG_COLORS="black green blue cyan red yellow magenta black".split(" "),shaka.cea.Cea608DataChannel.TEXT_COLORS="white green blue cyan red yellow magenta white_italics".split(" "),shaka.cea.Cea708Window=function(sn){this.windowNum_=sn,this.relativeToggle_=this.visible_=!1,this.colCount_=this.rowCount_=this.anchorId_=this.verticalAnchor_=this.horizontalAnchor_=0,this.justification_=shaka.cea.Cea708Window.TextJustification.CENTER,this.memory_=[],this.col_=this.row_=this.startTime_=0,this.underline_=this.italics_=!1,this.textColor_=shaka.cea.CeaUtils.DEFAULT_TXT_COLOR,this.backgroundColor_=shaka.cea.CeaUtils.DEFAULT_BG_COLOR,this.resetMemory(),shaka.util.Functional.ignored(this.verticalAnchor_,this.relativeToggle_,this.horizontalAnchor_,this.anchorId_,this.windowNum_)},shaka.cea.Cea708Window.prototype.defineWindow=function(sn,ln,cn,dn,pn,vn,kn){this.visible_=sn,this.verticalAnchor_=ln,this.horizontalAnchor_=cn,this.anchorId_=dn,this.relativeToggle_=pn,this.rowCount_=vn,this.colCount_=kn},shaka.cea.Cea708Window.prototype.resetMemory=function(){this.memory_=[];for(var sn=0;sn<shaka.cea.Cea708Window.MAX_ROWS;sn++)this.memory_.push(this.createNewRow_())},shaka.cea.Cea708Window.prototype.createNewRow_=function(){for(var sn=[],ln=0;ln<shaka.cea.Cea708Window.MAX_COLS;ln++)sn.push(null);return sn},shaka.cea.Cea708Window.prototype.setCharacter=function(sn){this.isPenInBounds_()&&(sn=new shaka.cea.CeaUtils.StyledChar(sn,this.underline_,this.italics_,this.backgroundColor_,this.textColor_),this.memory_[this.row_][this.col_]=sn,this.col_++)},shaka.cea.Cea708Window.prototype.backspace=function(){!this.isPenInBounds_()||0>=this.col_&&0>=this.row_||(0>=this.col_?(this.col_=this.colCount_-1,this.row_--):this.col_--,this.memory_[this.row_][this.col_]=null)},shaka.cea.Cea708Window.prototype.isPenInBounds_=function(){var sn=this.col_<this.colCount_&&0<=this.col_;return this.row_<this.rowCount_&&0<=this.row_&&sn},shaka.cea.Cea708Window.prototype.isVisible=function(){return this.visible_},shaka.cea.Cea708Window.prototype.moveUpRows_=function(sn){for(var ln=0,cn=sn;cn<shaka.cea.Cea708Window.MAX_ROWS;cn++,ln++)this.memory_[ln]=this.memory_[cn];for(cn=0;cn<sn;cn++,ln++)this.memory_[ln]=this.createNewRow_()},shaka.cea.Cea708Window.prototype.carriageReturn=function(){this.row_+1>=this.rowCount_?this.moveUpRows_(1):this.row_++,this.col_=0},shaka.cea.Cea708Window.prototype.horizontalCarriageReturn=function(){this.memory_[this.row_]=this.createNewRow_(),this.col_=0},shaka.cea.Cea708Window.prototype.forceEmit=function(sn,ln){ln="svc"+ln;var cn=shaka.cea.Cea708Window.TextJustification,dn=new shaka.text.Cue(this.startTime_,sn,"");return dn.textAlign=this.justification_===cn.LEFT?shaka.text.Cue.textAlign.LEFT:this.justification_===cn.RIGHT?shaka.text.Cue.textAlign.RIGHT:shaka.text.Cue.textAlign.CENTER,(ln=shaka.cea.CeaUtils.getParsedCaption(dn,ln,this.memory_,this.startTime_,sn))&&this.setStartTime(sn),ln},shaka.cea.Cea708Window.prototype.setPenLocation=function(sn,ln){this.row_=sn,this.col_=ln},shaka.cea.Cea708Window.prototype.setPenBackgroundColor=function(sn){this.backgroundColor_=sn},shaka.cea.Cea708Window.prototype.setPenTextColor=function(sn){this.textColor_=sn},shaka.cea.Cea708Window.prototype.setPenUnderline=function(sn){this.underline_=sn},shaka.cea.Cea708Window.prototype.setPenItalics=function(sn){this.italics_=sn},shaka.cea.Cea708Window.prototype.resetPen=function(){this.col_=this.row_=0,this.italics_=this.underline_=!1,this.textColor_=shaka.cea.CeaUtils.DEFAULT_TXT_COLOR,this.backgroundColor_=shaka.cea.CeaUtils.DEFAULT_BG_COLOR},shaka.cea.Cea708Window.prototype.setJustification=function(sn){this.justification_=sn},shaka.cea.Cea708Window.prototype.display=function(){this.visible_=!0},shaka.cea.Cea708Window.prototype.hide=function(){this.visible_=!1},shaka.cea.Cea708Window.prototype.toggle=function(){this.visible_=!this.visible_},shaka.cea.Cea708Window.prototype.setStartTime=function(sn){this.startTime_=sn},shaka.cea.Cea708Window.TextJustification={LEFT:0,RIGHT:1,CENTER:2,FULL:3},shaka.cea.Cea708Window.MAX_COLS=42,shaka.cea.Cea708Window.MAX_ROWS=16,shaka.cea.DtvccPacketBuilder=function(){this.builtPackets_=[],this.currentPacketBeingBuilt_=null,this.bytesLeftToAddInCurrentPacket_=0},shaka.cea.DtvccPacketBuilder.prototype.addByte=function(sn){sn.type===shaka.cea.DtvccPacketBuilder.DTVCC_PACKET_START?(this.bytesLeftToAddInCurrentPacket_=2*(sn.value&63)-1,this.currentPacketBeingBuilt_=[]):this.currentPacketBeingBuilt_&&(0<this.bytesLeftToAddInCurrentPacket_&&(this.currentPacketBeingBuilt_.push(sn),this.bytesLeftToAddInCurrentPacket_--),this.bytesLeftToAddInCurrentPacket_===0&&(sn=new shaka.cea.DtvccPacket(this.currentPacketBeingBuilt_),this.builtPackets_.push(sn),this.currentPacketBeingBuilt_=null,this.bytesLeftToAddInCurrentPacket_=0))},shaka.cea.DtvccPacketBuilder.prototype.getBuiltPackets=function(){return this.builtPackets_},shaka.cea.DtvccPacketBuilder.prototype.clearBuiltPackets=function(){this.builtPackets_=[]},shaka.cea.DtvccPacketBuilder.prototype.clear=function(){this.builtPackets_=[],this.currentPacketBeingBuilt_=[],this.bytesLeftToAddInCurrentPacket_=0},shaka.cea.DtvccPacket=function(sn){this.pos_=0,this.packetData_=sn},shaka.cea.DtvccPacket.prototype.hasMoreData=function(){return this.pos_<this.packetData_.length},shaka.cea.DtvccPacket.prototype.getPosition=function(){return this.pos_},shaka.cea.DtvccPacket.prototype.readByte=function(){if(!this.hasMoreData())throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.BUFFER_READ_OUT_OF_BOUNDS);return this.packetData_[this.pos_++]},shaka.cea.DtvccPacket.prototype.skip=function(sn){if(this.pos_+sn>this.packetData_.length)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.BUFFER_READ_OUT_OF_BOUNDS);this.pos_+=sn},shaka.cea.DtvccPacketBuilder.DTVCC_PACKET_DATA=2,shaka.cea.DtvccPacketBuilder.DTVCC_PACKET_START=3,shaka.cea.Cea708Service=function(sn){this.serviceNumber_=sn,this.windows_=[null,null,null,null,null,null,null,null],this.currentWindow_=null},shaka.cea.Cea708Service.prototype.handleCea708ControlCode=function(sn){var ln=sn.readByte(),cn=ln.value;if(ln=ln.pts,cn===shaka.cea.Cea708Service.EXT_CEA708_CTRL_CODE_BYTE1){var dn=sn.readByte();cn=cn<<16|dn.value}return 0<=cn&&31>=cn?this.handleC0_(cn,ln):128<=cn&&159>=cn?this.handleC1_(sn,cn,ln):(4096<=cn&&4127>=cn?this.handleC2_(sn,cn&255):4224<=cn&&4255>=cn?this.handleC3_(sn,cn&255):32<=cn&&127>=cn?this.handleG0_(cn):160<=cn&&255>=cn?this.handleG1_(cn):4128<=cn&&4223>=cn?this.handleG2_(cn&255):4256<=cn&&4351>=cn&&this.handleG3_(cn&255),null)},shaka.cea.Cea708Service.prototype.handleG0_=function(sn){this.currentWindow_&&(sn===127?this.currentWindow_.setCharacter("♪"):this.currentWindow_.setCharacter(String.fromCharCode(sn)))},shaka.cea.Cea708Service.prototype.handleG1_=function(sn){this.currentWindow_&&this.currentWindow_.setCharacter(String.fromCharCode(sn))},shaka.cea.Cea708Service.prototype.handleG2_=function(sn){this.currentWindow_&&(shaka.cea.Cea708Service.G2Charset.has(sn)?(sn=shaka.cea.Cea708Service.G2Charset.get(sn),this.currentWindow_.setCharacter(sn)):this.currentWindow_.setCharacter("_"))},shaka.cea.Cea708Service.prototype.handleG3_=function(sn){this.currentWindow_&&(sn!=160?this.currentWindow_.setCharacter("_"):this.currentWindow_.setCharacter("[CC]"))},shaka.cea.Cea708Service.prototype.handleC0_=function(sn,ln){if(!this.currentWindow_)return null;var cn=this.currentWindow_,dn=null;switch(sn){case shaka.cea.Cea708Service.ASCII_BACKSPACE:cn.backspace();break;case shaka.cea.Cea708Service.ASCII_CARRIAGE_RETURN:cn.isVisible()&&(dn=cn.forceEmit(ln,this.serviceNumber_)),cn.carriageReturn();break;case shaka.cea.Cea708Service.ASCII_HOR_CARRIAGE_RETURN:cn.isVisible()&&(dn=cn.forceEmit(ln,this.serviceNumber_)),cn.horizontalCarriageReturn();break;case shaka.cea.Cea708Service.ASCII_FORM_FEED:cn.isVisible()&&(dn=cn.forceEmit(ln,this.serviceNumber_)),cn.resetMemory(),cn.setPenLocation(0,0)}return dn},shaka.cea.Cea708Service.prototype.handleC1_=function(sn,ln,cn){if(128<=ln&&135>=ln)this.setCurrentWindow_(ln&7);else{if(ln===136)return sn=sn.readByte().value,this.clearWindows_(sn,cn);if(ln===137)sn=sn.readByte().value,this.displayWindows_(sn,cn);else{if(ln===138)return sn=sn.readByte().value,this.hideWindows_(sn,cn);if(ln===139)return sn=sn.readByte().value,this.toggleWindows_(sn,cn);if(ln===140)return sn=sn.readByte().value,this.deleteWindows_(sn,cn);if(ln===143)return this.reset_(cn);ln===144?this.setPenAttributes_(sn):ln===145?this.setPenColor_(sn):ln===146?this.setPenLocation_(sn):ln===151?this.setWindowAttributes_(sn):152<=ln&&159>=ln&&this.defineWindow_(sn,(ln&15)-8,cn)}}return null},shaka.cea.Cea708Service.prototype.handleC2_=function(sn,ln){8<=ln&&15>=ln?sn.skip(1):16<=ln&&23>=ln?sn.skip(2):24<=ln&&31>=ln&&sn.skip(3)},shaka.cea.Cea708Service.prototype.handleC3_=function(sn,ln){128<=ln&&135>=ln?sn.skip(4):136<=ln&&143>=ln&&sn.skip(5)},shaka.cea.Cea708Service.prototype.setCurrentWindow_=function(sn){this.windows_[sn]&&(this.currentWindow_=this.windows_[sn])},shaka.cea.Cea708Service.prototype.getSpecifiedWindowIds_=function(sn){for(var ln=[],cn=0;8>cn;cn++)(sn&1)===1&&this.windows_[cn]&&ln.push(cn),sn>>=1;return ln},shaka.cea.Cea708Service.prototype.clearWindows_=function(sn,ln){var cn=null;sn=$jscomp.makeIterator(this.getSpecifiedWindowIds_(sn));for(var dn=sn.next();!dn.done;dn=sn.next())dn=this.windows_[dn.value],dn.isVisible()&&(cn=dn.forceEmit(ln,this.serviceNumber_)),dn.resetMemory();return cn},shaka.cea.Cea708Service.prototype.displayWindows_=function(sn,ln){sn=$jscomp.makeIterator(this.getSpecifiedWindowIds_(sn));for(var cn=sn.next();!cn.done;cn=sn.next())cn=this.windows_[cn.value],cn.isVisible()||cn.setStartTime(ln),cn.display()},shaka.cea.Cea708Service.prototype.hideWindows_=function(sn,ln){var cn=null;sn=$jscomp.makeIterator(this.getSpecifiedWindowIds_(sn));for(var dn=sn.next();!dn.done;dn=sn.next())dn=this.windows_[dn.value],dn.isVisible()&&(cn=dn.forceEmit(ln,this.serviceNumber_)),dn.hide();return cn},shaka.cea.Cea708Service.prototype.toggleWindows_=function(sn,ln){var cn=null;sn=$jscomp.makeIterator(this.getSpecifiedWindowIds_(sn));for(var dn=sn.next();!dn.done;dn=sn.next())dn=this.windows_[dn.value],dn.isVisible()?cn=dn.forceEmit(ln,this.serviceNumber_):dn.setStartTime(ln),dn.toggle();return cn},shaka.cea.Cea708Service.prototype.deleteWindows_=function(sn,ln){var cn=null;sn=$jscomp.makeIterator(this.getSpecifiedWindowIds_(sn));for(var dn=sn.next();!dn.done;dn=sn.next()){dn=dn.value;var pn=this.windows_[dn];pn.isVisible()&&(cn=pn.forceEmit(ln,this.serviceNumber_)),this.windows_[dn]=null}return cn},shaka.cea.Cea708Service.prototype.reset_=function(sn){return sn=this.deleteWindows_(255,sn),this.clear(),sn},shaka.cea.Cea708Service.prototype.clear=function(){this.currentWindow_=null,this.windows_=[null,null,null,null,null,null,null,null]},shaka.cea.Cea708Service.prototype.setPenAttributes_=function(sn){if(sn.skip(1),sn=sn.readByte().value,this.currentWindow_){var ln=0<(sn&64);this.currentWindow_.setPenItalics(0<(sn&128)),this.currentWindow_.setPenUnderline(ln)}},shaka.cea.Cea708Service.prototype.setPenColor_=function(sn){var ln=sn.readByte().value,cn=sn.readByte().value;if(sn.skip(1),this.currentWindow_){sn=cn&3;var dn=(cn&12)>>2;cn=(cn&48)>>4,ln=this.rgbColorToHex_((ln&48)>>4,(ln&12)>>2,ln&3),sn=this.rgbColorToHex_(cn,dn,sn),this.currentWindow_.setPenTextColor(ln),this.currentWindow_.setPenBackgroundColor(sn)}},shaka.cea.Cea708Service.prototype.setPenLocation_=function(sn){var ln=sn.readByte().value;sn=sn.readByte().value,this.currentWindow_&&this.currentWindow_.setPenLocation(ln&15,sn&63)},shaka.cea.Cea708Service.prototype.setWindowAttributes_=function(sn){sn.skip(1),sn.skip(1);var ln=sn.readByte().value;sn.skip(1),this.currentWindow_&&this.currentWindow_.setJustification(ln&3)},shaka.cea.Cea708Service.prototype.defineWindow_=function(sn,ln,cn){var dn=this.windows_[ln]!==null;if(!dn){var pn=new shaka.cea.Cea708Window(ln);pn.setStartTime(cn),this.windows_[ln]=pn}var vn=sn.readByte().value,kn=sn.readByte().value;cn=sn.readByte().value;var Sn=sn.readByte().value;pn=sn.readByte().value,sn=sn.readByte().value,vn=0<(vn&32);var wn=kn&127;kn=0<(kn&128);var Pn=(Sn&15)+1;Sn=(Sn&240)>>4,pn=(pn&63)+1,dn&&!(sn&7)||this.windows_[ln].resetPen(),this.windows_[ln].defineWindow(vn,wn,cn,Sn,kn,Pn,pn),this.currentWindow_=this.windows_[ln]},shaka.cea.Cea708Service.prototype.rgbColorToHex_=function(sn,ln,cn){var dn={0:0,1:0,2:1,3:1};return sn=dn[sn],ln=dn[ln],cn=dn[cn],shaka.cea.Cea708Service.Colors[sn<<2|ln<<1|cn]},shaka.cea.Cea708Service.ASCII_BACKSPACE=8,shaka.cea.Cea708Service.ASCII_FORM_FEED=12,shaka.cea.Cea708Service.ASCII_CARRIAGE_RETURN=13,shaka.cea.Cea708Service.ASCII_HOR_CARRIAGE_RETURN=14,shaka.cea.Cea708Service.EXT_CEA708_CTRL_CODE_BYTE1=16,shaka.cea.Cea708Service.G2Charset=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),shaka.cea.Cea708Service.Colors="black blue green cyan red magenta yellow white".split(" "),shaka.cea.CeaDecoder=function(){this.cea608DataArray_=[],this.cea708DataArray_=[],this.dtvccPacketBuilder_=new shaka.cea.DtvccPacketBuilder,this.badFrames_=0,this.cea608ModeToStream_=new Map([["CC1",new shaka.cea.Cea608DataChannel(0,0)],["CC2",new shaka.cea.Cea608DataChannel(0,1)],["CC3",new shaka.cea.Cea608DataChannel(1,0)],["CC4",new shaka.cea.Cea608DataChannel(1,1)]]),this.currentField2Channel_=this.currentField1Channel_=0,this.serviceNumberToService_=new Map,this.reset()},shaka.cea.CeaDecoder.prototype.clear=function(){this.badFrames_=0,this.cea608DataArray_=[],this.cea708DataArray_=[],this.dtvccPacketBuilder_.clear(),this.reset();for(var sn=$jscomp.makeIterator(this.serviceNumberToService_.values()),ln=sn.next();!ln.done;ln=sn.next())ln.value.clear()},shaka.cea.CeaDecoder.prototype.reset=function(){this.currentField2Channel_=this.currentField1Channel_=0;for(var sn=$jscomp.makeIterator(this.cea608ModeToStream_.values()),ln=sn.next();!ln.done;ln=sn.next())ln.value.reset()},shaka.cea.CeaDecoder.prototype.extract=function(sn,ln){if(sn=new shaka.util.DataViewReader(sn,shaka.util.DataViewReader.Endianness.BIG_ENDIAN),sn.readUint8()===shaka.cea.CeaDecoder.USA_COUNTRY_CODE&&sn.readUint16()===shaka.cea.CeaDecoder.ATSC_PROVIDER_CODE&&sn.readUint32()===shaka.cea.CeaDecoder.ATSC1_USER_IDENTIFIER&&sn.readUint8()===3){var cn=sn.readUint8();if(cn&64){cn&=31,sn.skip(1);for(var dn=0;dn<cn;dn++){var pn=sn.readUint8(),vn=(pn&4)>>2,kn=sn.readUint8(),Sn=sn.readUint8();vn&&(pn&=3,pn===shaka.cea.CeaDecoder.NTSC_CC_FIELD_1||pn===shaka.cea.CeaDecoder.NTSC_CC_FIELD_2?this.cea608DataArray_.push({pts:ln,type:pn,ccData1:kn,ccData2:Sn,order:this.cea608DataArray_.length}):(this.cea708DataArray_.push({pts:ln,type:pn,value:kn,order:this.cea708DataArray_.length}),this.cea708DataArray_.push({pts:ln,type:shaka.cea.DtvccPacketBuilder.DTVCC_PACKET_DATA,value:Sn,order:this.cea708DataArray_.length})))}}}},shaka.cea.CeaDecoder.prototype.decode=function(){var sn=[],ln=function(dn,pn){return dn.pts-pn.pts||dn.order-pn.order};this.cea608DataArray_.sort(ln),this.cea708DataArray_.sort(ln),ln=$jscomp.makeIterator(this.cea608DataArray_);for(var cn=ln.next();!cn.done;cn=ln.next())(cn=this.decodeCea608_(cn.value))&&sn.push(cn);for(ln=$jscomp.makeIterator(this.cea708DataArray_),cn=ln.next();!cn.done;cn=ln.next())this.dtvccPacketBuilder_.addByte(cn.value);for(ln=this.dtvccPacketBuilder_.getBuiltPackets(),ln=$jscomp.makeIterator(ln),cn=ln.next();!cn.done;cn=ln.next())cn=this.decodeCea708_(cn.value),sn.push.apply(sn,$jscomp.arrayFromIterable(cn));return this.dtvccPacketBuilder_.clearBuiltPackets(),this.cea608DataArray_=[],this.cea708DataArray_=[],sn},shaka.cea.CeaDecoder.prototype.decodeCea608_=function(sn){var ln=sn.type;if(shaka.cea.Cea608DataChannel.isControlCode(sn.ccData1)){var cn=sn.ccData1>>3&1;ln===0?this.currentField1Channel_=cn:this.currentField2Channel_=cn}return ln=this.cea608ModeToStream_.get("CC"+(ln<<1|(ln?this.currentField2Channel_:this.currentField1Channel_)+1)),sn.ccData1===255&&sn.ccData2===255||!sn.ccData1&&!sn.ccData2||!this.isOddParity_(sn.ccData1)||!this.isOddParity_(sn.ccData2)?(45<=++this.badFrames_&&this.reset(),null):(this.badFrames_=0,sn.ccData1&=127,sn.ccData2&=127,!sn.ccData1&&!sn.ccData2?null:(cn=null,shaka.cea.Cea608DataChannel.isControlCode(sn.ccData1)?cn=ln.handleControlCode(sn):ln.handleBasicNorthAmericanChar(sn.ccData1,sn.ccData2),cn))},shaka.cea.CeaDecoder.prototype.decodeCea708_=function(sn){var ln=[];try{for(;sn.hasMoreData();){var cn=sn.readByte().value,dn=(cn&224)>>5,pn=cn&31;if(dn===7&&pn!=0&&(dn=sn.readByte().value&63),dn!=0){if(!this.serviceNumberToService_.has(dn)){var vn=new shaka.cea.Cea708Service(dn);this.serviceNumberToService_.set(dn,vn)}for(var kn=this.serviceNumberToService_.get(dn),Sn=sn.getPosition();sn.getPosition()-Sn<pn;){var wn=kn.handleCea708ControlCode(sn);wn&&ln.push(wn)}}}}catch(Pn){if(Pn instanceof shaka.util.Error&&Pn.code===shaka.util.Error.Code.BUFFER_READ_OUT_OF_BOUNDS)shaka.log.warnOnce("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw Pn}return ln},shaka.cea.CeaDecoder.prototype.isOddParity_=function(sn){for(var ln=0;sn;)ln^=sn&1,sn>>=1;return ln===1},shaka.cea.CeaDecoder.ATSC_PROVIDER_CODE=49,shaka.cea.CeaDecoder.ATSC1_USER_IDENTIFIER=1195456820,shaka.cea.CeaDecoder.NTSC_CC_FIELD_1=0,shaka.cea.CeaDecoder.NTSC_CC_FIELD_2=1,shaka.cea.CeaDecoder.USA_COUNTRY_CODE=181,shaka.cea.ICeaParser=function(){},shaka.cea.ICeaParser.prototype.init=function(sn){},shaka.cea.ICeaParser.prototype.parse=function(sn){},shaka.cea.ICeaParser.H264_NALU_TYPE_SEI=6,shaka.cea.ICeaParser.H265_PREFIX_NALU_TYPE_SEI=39,shaka.cea.ICeaParser.H265_SUFFIX_NALU_TYPE_SEI=40,shaka.cea.ICeaParser.DEFAULT_TIMESCALE_VALUE=9e4,shaka.cea.DummyCeaParser=function(){},shaka.cea.DummyCeaParser.prototype.init=function(sn){},shaka.cea.DummyCeaParser.prototype.parse=function(sn){return[]},shaka.cea.SeiProcessor=function(){},shaka.cea.SeiProcessor.prototype.process=function(sn){var ln=[];sn=this.removeEmu(sn);for(var cn=0;cn<sn.length;){for(var dn=0;sn[cn]==255;)dn+=255,cn++;dn+=sn[cn++];for(var pn=0;sn[cn]==255;)pn+=255,cn++;pn+=sn[cn++],dn==4&&ln.push(sn.subarray(cn,cn+pn)),cn+=pn}return ln},shaka.cea.SeiProcessor.prototype.removeEmu=function(sn){for(var ln=sn,cn=sn=0;cn<ln.length;)sn==2&&ln[cn]==3?(sn=0,ln=[].concat($jscomp.arrayFromIterable(ln)),ln.splice(cn,1),ln=new Uint8Array(ln)):ln[cn]==0?sn++:sn=0,cn++;return ln},shaka.util.Mp4BoxParsers=function(){},shaka.util.Mp4BoxParsers.parseTFHD=function(sn,ln){var cn=null,dn=null,pn=null,vn=sn.readUint32();return ln&1&&(pn=sn.readUint64()),ln&2&&sn.skip(4),ln&8&&(cn=sn.readUint32()),ln&16&&(dn=sn.readUint32()),{trackId:vn,defaultSampleDuration:cn,defaultSampleSize:dn,baseDataOffset:pn}},shaka.util.Mp4BoxParsers.parseTFDT=function(sn,ln){return{baseMediaDecodeTime:ln==1?sn.readUint64():sn.readUint32()}},shaka.util.Mp4BoxParsers.parseMDHD=function(sn,ln){return ln==1?(sn.skip(8),sn.skip(8)):(sn.skip(4),sn.skip(4)),{timescale:sn.readUint32()}},shaka.util.Mp4BoxParsers.parseTREX=function(sn){sn.skip(4),sn.skip(4);var ln=sn.readUint32();return sn=sn.readUint32(),{defaultSampleDuration:ln,defaultSampleSize:sn}},shaka.util.Mp4BoxParsers.parseTRUN=function(sn,ln,cn){var dn=sn.readUint32(),pn=[],vn=null;cn&1&&(vn=sn.readUint32()),cn&4&&sn.skip(4);for(var kn=0;kn<dn;kn++){var Sn={sampleDuration:null,sampleSize:null,sampleCompositionTimeOffset:null};cn&256&&(Sn.sampleDuration=sn.readUint32()),cn&512&&(Sn.sampleSize=sn.readUint32()),cn&1024&&sn.skip(4),cn&2048&&(Sn.sampleCompositionTimeOffset=ln==0?sn.readUint32():sn.readInt32()),pn.push(Sn)}return{sampleCount:dn,sampleData:pn,dataOffset:vn}},shaka.util.Mp4BoxParsers.parseTKHD=function(sn,ln){return ln==1?(sn.skip(8),sn.skip(8)):(sn.skip(4),sn.skip(4)),{trackId:sn.readUint32()}},shaka.util.Mp4BoxParsers.parseFRMA=function(sn){return sn=sn.readUint32(),{codec:shaka.util.Mp4Parser.typeToString(sn)}},shaka.cea.Mp4CeaParser=function(){this.seiProcessor_=new shaka.cea.SeiProcessor,this.trackIdToTimescale_=new Map,this.defaultSampleSize_=this.defaultSampleDuration_=0,this.bitstreamFormat_=shaka.cea.Mp4CeaParser.BitstreamFormat.UNKNOWN},shaka.cea.Mp4CeaParser.prototype.init=function(sn){var ln=this,cn=shaka.util.Mp4Parser,dn=shaka.cea.Mp4CeaParser.BitstreamFormat,pn=[],vn=[],kn=function(Sn){return ln.setBitstreamFormat_(Sn.name)};if(new cn().box("moov",cn.children).box("mvex",cn.children).fullBox("trex",function(Sn){Sn=shaka.util.Mp4BoxParsers.parseTREX(Sn.reader),ln.defaultSampleDuration_=Sn.defaultSampleDuration,ln.defaultSampleSize_=Sn.defaultSampleSize}).box("trak",cn.children).fullBox("tkhd",function(Sn){goog.asserts.assert(Sn.version!=null,"TKHD is a full box and should have a valid version."),Sn=shaka.util.Mp4BoxParsers.parseTKHD(Sn.reader,Sn.version),pn.push(Sn.trackId)}).box("mdia",cn.children).fullBox("mdhd",function(Sn){goog.asserts.assert(Sn.version!=null,"MDHD is a full box and should have a valid version."),Sn=shaka.util.Mp4BoxParsers.parseMDHD(Sn.reader,Sn.version),vn.push(Sn.timescale)}).box("minf",cn.children).box("stbl",cn.children).fullBox("stsd",cn.sampleDescription).box("avc1",kn).box("avc3",kn).box("hev1",kn).box("hvc1",kn).box("dvh1",kn).box("dvhe",kn).box("encv",cn.visualSampleEntry).box("sinf",cn.children).box("frma",function(Sn){Sn=shaka.util.Mp4BoxParsers.parseFRMA(Sn.reader).codec,ln.setBitstreamFormat_(Sn)}).parse(sn,!0),!pn.length||!vn.length||pn.length!=vn.length)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_MP4_CEA);this.bitstreamFormat_==dn.UNKNOWN&&shaka.log.alwaysWarn("Unable to determine bitstream format for CEA parsing!"),pn.forEach(function(Sn,wn){ln.trackIdToTimescale_.set(Sn,vn[wn])})},shaka.cea.Mp4CeaParser.prototype.parse=function(sn){var ln=this,cn=shaka.util.Mp4Parser;if(this.bitstreamFormat_==shaka.cea.Mp4CeaParser.BitstreamFormat.UNKNOWN)return[];var dn=[],pn=this.defaultSampleDuration_,vn=this.defaultSampleSize_,kn=[],Sn=null,wn=null,Pn=null,Nn=shaka.cea.ICeaParser.DEFAULT_TIMESCALE_VALUE;return new cn().box("moof",function(Ln){Sn=Ln.start,cn.children(Ln)}).box("traf",cn.children).fullBox("trun",function(Ln){goog.asserts.assert(Ln.version!=null&&Ln.flags!=null,"TRUN is a full box and should have a valid version & flags."),Ln=shaka.util.Mp4BoxParsers.parseTRUN(Ln.reader,Ln.version,Ln.flags),kn=Ln.sampleData,wn=Ln.dataOffset}).fullBox("tfhd",function(Ln){goog.asserts.assert(Ln.flags!=null,"TFHD is a full box and should have valid flags."),Ln=shaka.util.Mp4BoxParsers.parseTFHD(Ln.reader,Ln.flags),pn=Ln.defaultSampleDuration||ln.defaultSampleDuration_,vn=Ln.defaultSampleSize||ln.defaultSampleSize_,Ln=Ln.trackId,ln.trackIdToTimescale_.has(Ln)&&(Nn=ln.trackIdToTimescale_.get(Ln))}).fullBox("tfdt",function(Ln){goog.asserts.assert(Ln.version!=null,"TFDT is a full box and should have a valid version."),Pn=shaka.util.Mp4BoxParsers.parseTFDT(Ln.reader,Ln.version).baseMediaDecodeTime}).box("mdat",function(Ln){if(Pn===null)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_MP4_CEA);ln.parseMdat_(Ln.reader,Pn,Nn,pn,vn,(Sn||0)+(wn||0)-Ln.start-8,kn,dn)}).parse(sn,!1),dn},shaka.cea.Mp4CeaParser.prototype.parseMdat_=function(sn,ln,cn,dn,pn,vn,kn,Sn){var wn=shaka.cea.Mp4CeaParser.BitstreamFormat,Pn=shaka.cea.ICeaParser,Nn=0,Ln=pn;for(kn.length&&(Ln=kn[0].sampleSize||pn),sn.skip(vn);sn.hasMoreData();){vn=sn.readUint32();var Fn=sn.readUint8();switch(goog.asserts.assert(this.bitstreamFormat_!=wn.UNKNOWN,"Bitstream format should have been checked before now!"),this.bitstreamFormat_){case wn.H264:Fn&=31,Fn=Fn==Pn.H264_NALU_TYPE_SEI;break;case wn.H265:Fn=Fn>>1&63,Fn=Fn==Pn.H265_PREFIX_NALU_TYPE_SEI||Fn==Pn.H265_SUFFIX_NALU_TYPE_SEI;break;default:return}if(Fn){Fn=0,kn.length>Nn&&(Fn=kn[Nn].sampleCompositionTimeOffset||0),Fn=(ln+Fn)/cn;for(var zn=$jscomp.makeIterator(this.seiProcessor_.process(sn.readBytes(vn-1))),Dn=zn.next();!Dn.done;Dn=zn.next())Sn.push({packet:Dn.value,pts:Fn})}else try{sn.skip(vn-1)}catch{break}Ln-=vn+4,Ln==0&&(ln=kn.length>Nn?ln+(kn[Nn].sampleDuration||dn):ln+dn,Nn++,Ln=kn.length>Nn&&kn[Nn].sampleSize||pn)}},shaka.cea.Mp4CeaParser.prototype.setBitstreamFormat_=function(sn){sn in shaka.cea.Mp4CeaParser.CodecBitstreamMap_&&(this.bitstreamFormat_=shaka.cea.Mp4CeaParser.CodecBitstreamMap_[sn])},shaka.cea.Mp4CeaParser.BitstreamFormat={UNKNOWN:0,H264:1,H265:2},shaka.cea.Mp4CeaParser.CodecBitstreamMap_={avc1:shaka.cea.Mp4CeaParser.BitstreamFormat.H264,avc3:shaka.cea.Mp4CeaParser.BitstreamFormat.H264,hev1:shaka.cea.Mp4CeaParser.BitstreamFormat.H265,hvc1:shaka.cea.Mp4CeaParser.BitstreamFormat.H265,dvh1:shaka.cea.Mp4CeaParser.BitstreamFormat.H265,dvhe:shaka.cea.Mp4CeaParser.BitstreamFormat.H265},shaka.media.IClosedCaptionParser=function(){},shaka.media.IClosedCaptionParser.prototype.init=function(sn){},shaka.media.IClosedCaptionParser.prototype.parseFrom=function(sn){},shaka.media.IClosedCaptionParser.prototype.reset=function(){},shaka.media.ClosedCaptionParser=function(sn){this.ceaParser_=new shaka.cea.DummyCeaParser,sn.includes("video/mp4")&&(this.ceaParser_=new shaka.cea.Mp4CeaParser),this.ceaDecoder_=new shaka.cea.CeaDecoder},shaka.media.ClosedCaptionParser.prototype.init=function(sn){this.ceaParser_.init(sn)},shaka.media.ClosedCaptionParser.prototype.parseFrom=function(sn){sn=this.ceaParser_.parse(sn),sn=$jscomp.makeIterator(sn);for(var ln=sn.next();!ln.done;ln=sn.next()){ln=ln.value;var cn=shaka.util.BufferUtils.toUint8(ln.packet);0<cn.length&&this.ceaDecoder_.extract(cn,ln.pts)}return this.ceaDecoder_.decode()},shaka.media.ClosedCaptionParser.prototype.reset=function(){this.ceaDecoder_.clear()},shaka.media.InitSegmentReference=function(sn,ln,cn,dn,pn){this.getUris=sn,this.startByte=ln,this.endByte=cn,this.mediaQuality=dn===void 0?null:dn,this.timescale=pn},shaka.media.InitSegmentReference.prototype.getStartByte=function(){return this.startByte},shaka.media.InitSegmentReference.prototype.getEndByte=function(){return this.endByte},shaka.media.InitSegmentReference.prototype.getSize=function(){return this.endByte?this.endByte-this.startByte:null},shaka.media.InitSegmentReference.prototype.getMediaQuality=function(){return this.mediaQuality},shaka.media.InitSegmentReference.equal=function(sn,ln){var cn=shaka.util.ArrayUtils;return sn&&ln?sn.getStartByte()==ln.getStartByte()&&sn.getEndByte()==ln.getEndByte()&&cn.equal(sn.getUris(),ln.getUris()):sn==ln},goog.exportSymbol("shaka.media.InitSegmentReference",shaka.media.InitSegmentReference),goog.exportProperty(shaka.media.InitSegmentReference.prototype,"getEndByte",shaka.media.InitSegmentReference.prototype.getEndByte),goog.exportProperty(shaka.media.InitSegmentReference.prototype,"getStartByte",shaka.media.InitSegmentReference.prototype.getStartByte),shaka.media.SegmentReference=function(sn,ln,cn,dn,pn,vn,kn,Sn,wn,Pn,Nn,Ln,Fn,zn,Dn){Pn=Pn===void 0?[]:Pn,Nn=Nn===void 0?"":Nn,Ln=Ln===void 0?null:Ln,Fn=Fn===void 0?null:Fn,zn=zn===void 0?shaka.media.SegmentReference.Status.AVAILABLE:zn,Dn=Dn===void 0?null:Dn,goog.asserts.assert(sn<=ln,"startTime must be less than or equal to endTime"),goog.asserts.assert(pn==null||dn<pn,"startByte must be < endByte"),this.startTime=sn,this.trueEndTime=this.endTime=ln,this.getUrisInner=cn,this.startByte=dn,this.endByte=pn,this.initSegmentReference=vn,this.timestampOffset=kn,this.appendWindowStart=Sn,this.appendWindowEnd=wn,this.partialReferences=Pn,this.tilesLayout=Nn,this.tileDuration=Ln,this.syncTime=Fn,this.status=zn,this.hlsAes128Key=Dn,this.thumbnailSprite=null,this.discontinuitySequence=0},shaka.media.SegmentReference.prototype.getUris=function(){return this.getUrisInner()},shaka.media.SegmentReference.prototype.getStartTime=function(){return this.startTime},shaka.media.SegmentReference.prototype.getEndTime=function(){return this.endTime},shaka.media.SegmentReference.prototype.getStartByte=function(){return this.startByte},shaka.media.SegmentReference.prototype.getEndByte=function(){return this.endByte},shaka.media.SegmentReference.prototype.getSize=function(){return this.endByte?this.endByte-this.startByte:null},shaka.media.SegmentReference.prototype.hasPartialSegments=function(){return 0<this.partialReferences.length},shaka.media.SegmentReference.prototype.getTilesLayout=function(){return this.tilesLayout},shaka.media.SegmentReference.prototype.getTileDuration=function(){return this.tileDuration},shaka.media.SegmentReference.prototype.getStatus=function(){return this.status},shaka.media.SegmentReference.prototype.markAsUnavailable=function(){this.status=shaka.media.SegmentReference.Status.UNAVAILABLE},shaka.media.SegmentReference.prototype.setThumbnailSprite=function(sn){this.thumbnailSprite=sn},shaka.media.SegmentReference.prototype.getThumbnailSprite=function(){return this.thumbnailSprite},shaka.media.SegmentReference.prototype.offset=function(sn){this.startTime+=sn,this.endTime+=sn,this.trueEndTime+=sn;for(var ln=$jscomp.makeIterator(this.partialReferences),cn=ln.next();!cn.done;cn=ln.next())cn=cn.value,cn.startTime+=sn,cn.endTime+=sn,cn.trueEndTime+=sn},shaka.media.SegmentReference.prototype.syncAgainst=function(sn){this.syncTime==null?shaka.log.alwaysError("Sync attempted without sync time!"):(sn=this.syncTime-sn-this.startTime,.001<=Math.abs(sn)&&this.offset(sn))},goog.exportSymbol("shaka.media.SegmentReference",shaka.media.SegmentReference),goog.exportProperty(shaka.media.SegmentReference.prototype,"syncAgainst",shaka.media.SegmentReference.prototype.syncAgainst),goog.exportProperty(shaka.media.SegmentReference.prototype,"offset",shaka.media.SegmentReference.prototype.offset),goog.exportProperty(shaka.media.SegmentReference.prototype,"getThumbnailSprite",shaka.media.SegmentReference.prototype.getThumbnailSprite),goog.exportProperty(shaka.media.SegmentReference.prototype,"setThumbnailSprite",shaka.media.SegmentReference.prototype.setThumbnailSprite),goog.exportProperty(shaka.media.SegmentReference.prototype,"markAsUnavailable",shaka.media.SegmentReference.prototype.markAsUnavailable),goog.exportProperty(shaka.media.SegmentReference.prototype,"getStatus",shaka.media.SegmentReference.prototype.getStatus),goog.exportProperty(shaka.media.SegmentReference.prototype,"getTileDuration",shaka.media.SegmentReference.prototype.getTileDuration),goog.exportProperty(shaka.media.SegmentReference.prototype,"getTilesLayout",shaka.media.SegmentReference.prototype.getTilesLayout),goog.exportProperty(shaka.media.SegmentReference.prototype,"getEndByte",shaka.media.SegmentReference.prototype.getEndByte),goog.exportProperty(shaka.media.SegmentReference.prototype,"getStartByte",shaka.media.SegmentReference.prototype.getStartByte),goog.exportProperty(shaka.media.SegmentReference.prototype,"getEndTime",shaka.media.SegmentReference.prototype.getEndTime),goog.exportProperty(shaka.media.SegmentReference.prototype,"getStartTime",shaka.media.SegmentReference.prototype.getStartTime),goog.exportProperty(shaka.media.SegmentReference.prototype,"getUris",shaka.media.SegmentReference.prototype.getUris),shaka.media.SegmentReference.Status={AVAILABLE:0,UNAVAILABLE:1,MISSING:2},goog.exportProperty(shaka.media.SegmentReference,"Status",shaka.media.SegmentReference.Status),shaka.media.TimeRangesUtils=function(){},shaka.media.TimeRangesUtils.bufferStart=function(sn){return!sn||sn.length==1&&1e-6>sn.end(0)-sn.start(0)?null:sn.length==1&&0>sn.start(0)?0:sn.length?sn.start(0):null},shaka.media.TimeRangesUtils.bufferEnd=function(sn){return!sn||sn.length==1&&1e-6>sn.end(0)-sn.start(0)?null:sn.length?sn.end(sn.length-1):null},shaka.media.TimeRangesUtils.isBuffered=function(sn,ln){return!sn||!sn.length||sn.length==1&&1e-6>sn.end(0)-sn.start(0)||ln>sn.end(sn.length-1)?!1:ln>=sn.start(0)},shaka.media.TimeRangesUtils.bufferedAheadOf=function(sn,ln){if(!sn||!sn.length||sn.length==1&&1e-6>sn.end(0)-sn.start(0))return 0;var cn=0;sn=$jscomp.makeIterator(shaka.media.TimeRangesUtils.getBufferedInfo(sn));for(var dn=sn.next();!dn.done;dn=sn.next()){var pn=dn.value;dn=pn.start,pn=pn.end,pn>ln&&(cn+=pn-Math.max(dn,ln))}return cn},shaka.media.TimeRangesUtils.getGapIndex=function(sn,ln,cn){var dn=shaka.media.TimeRangesUtils;return!sn||!sn.length||sn.length==1&&1e-6>sn.end(0)-sn.start(0)?null:(sn=dn.getBufferedInfo(sn).findIndex(function(pn,vn,kn){return pn.start>ln&&(vn==0||kn[vn-1].end-ln<=cn)}),0<=sn?sn:null)},shaka.media.TimeRangesUtils.getBufferedInfo=function(sn){if(!sn)return[];for(var ln=[],cn=0;cn<sn.length;cn++)ln.push({start:sn.start(cn),end:sn.end(cn)});return ln},shaka.media.TimeRangesUtils.computeAddedRange=function(sn,ln){var cn=shaka.media.TimeRangesUtils;if(!sn||!sn.length)return null;if(!ln||!ln.length)return cn.getBufferedInfo(ln).pop();for(ln=cn.getBufferedInfo(ln).reverse(),sn=cn.getBufferedInfo(sn).reverse(),cn=$jscomp.makeIterator(ln),ln=cn.next();!ln.done;ln=cn.next()){ln=ln.value;for(var dn=!1,pn=$jscomp.makeIterator(sn),vn=pn.next();!vn.done;vn=pn.next())if(vn=vn.value,vn.end>=ln.start&&vn.end<=ln.end&&(dn=!0,ln.end>vn.end))return{start:vn.end,end:ln.end};if(!dn)return ln}return null};/*
 @license
 Shaka Player
 Copyright 2022 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/shaka.util.Id3Utils=function(){},shaka.util.Id3Utils.isHeader_=function(sn,ln){return ln+10<=sn.length&&sn[ln]===73&&sn[ln+1]===68&&sn[ln+2]===51&&255>sn[ln+3]&&255>sn[ln+4]&&128>sn[ln+6]&&128>sn[ln+7]&&128>sn[ln+8]&&128>sn[ln+9]},shaka.util.Id3Utils.isFooter_=function(sn,ln){return ln+10<=sn.length&&sn[ln]===51&&sn[ln+1]===68&&sn[ln+2]===73&&255>sn[ln+3]&&255>sn[ln+4]&&128>sn[ln+6]&&128>sn[ln+7]&&128>sn[ln+8]&&128>sn[ln+9]},shaka.util.Id3Utils.readSize_=function(sn,ln){var cn=(sn[ln]&127)<<21;return cn|=(sn[ln+1]&127)<<14,cn|=(sn[ln+2]&127)<<7,cn|=sn[ln+3]&127},shaka.util.Id3Utils.getFrameData_=function(sn){var ln=String.fromCharCode(sn[0],sn[1],sn[2],sn[3]),cn=shaka.util.Id3Utils.readSize_(sn,4);return{type:ln,size:cn,data:sn.subarray(10,10+cn)}},shaka.util.Id3Utils.decodeFrame_=function(sn){var ln=shaka.util.BufferUtils,cn=shaka.util.StringUtils,dn={key:sn.type,description:"",data:""};if(sn.type==="TXXX"){if(2>sn.size)return null;if(sn.data[0]!==shaka.util.Id3Utils.UTF8_encoding)return shaka.log.warning("Ignore frame with unrecognized character encoding"),null;var pn=sn.data.subarray(1).indexOf(0);if(pn===-1)return null;var vn=cn.fromUTF8(ln.toUint8(sn.data,1,pn));return sn=cn.fromUTF8(ln.toUint8(sn.data,2+pn)).replace(/\0*$/,""),dn.description=vn,dn.data=sn,dn}return sn.type==="WXXX"?2>sn.size?null:sn.data[0]!==shaka.util.Id3Utils.UTF8_encoding?(shaka.log.warning("Ignore frame with unrecognized character encoding"),null):(pn=sn.data.subarray(1).indexOf(0),pn===-1?null:(vn=cn.fromUTF8(ln.toUint8(sn.data,1,pn)),sn=cn.fromUTF8(ln.toUint8(sn.data,2+pn)).replace(/\0*$/,""),dn.description=vn,dn.data=sn,dn)):sn.type==="PRIV"?2>sn.size||(vn=sn.data.indexOf(0),vn===-1)?null:(cn=cn.fromUTF8(ln.toUint8(sn.data,0,vn)),sn=ln.toArrayBuffer(sn.data.subarray(cn.length+1)),dn.description=cn,dn.data=sn,dn):sn.type[0]==="T"?2>sn.size?null:sn.data[0]!==shaka.util.Id3Utils.UTF8_encoding?(shaka.log.warning("Ignore frame with unrecognized character encoding"),null):(sn=cn.fromUTF8(sn.data.subarray(1)).replace(/\0*$/,""),dn.data=sn,dn):sn.type[0]==="W"?(sn=cn.fromUTF8(sn.data).replace(/\0*$/,""),dn.data=sn,dn):sn.data?(shaka.log.warning("Unrecognized ID3 frame type:",sn.type),dn.data=ln.toArrayBuffer(sn.data),dn):null},shaka.util.Id3Utils.getID3Frames=function(sn){for(var ln=shaka.util.Id3Utils,cn=0,dn=[];ln.isHeader_(sn,cn);){var pn=ln.readSize_(sn,cn+6);for(sn[cn+5]>>6&1&&(cn+=10),cn+=10,pn=cn+pn;cn+10<pn;){var vn=ln.getFrameData_(sn.subarray(cn)),kn=ln.decodeFrame_(vn);kn&&dn.push(kn),cn+=vn.size+10}ln.isFooter_(sn,cn)&&(cn+=10)}return dn},goog.exportSymbol("shaka.util.Id3Utils",shaka.util.Id3Utils),goog.exportProperty(shaka.util.Id3Utils,"getID3Frames",shaka.util.Id3Utils.getID3Frames),shaka.util.Id3Utils.UTF8_encoding=3,shaka.util.TsParser=function(){this.pmtId_=null,this.pmtParsed_=!1,this.videoCodec_=this.videoPid_=this.videoStartTime_=null,this.videoData_=[],this.audioCodec_=this.audioPid_=this.audioStartTime_=null,this.audioData_=[],this.id3Pid_=null,this.id3Data_=[]},shaka.util.TsParser.prototype.parse=function(sn){var ln=shaka.util.TsParser.Timescale_,cn=shaka.util.TsParser.PacketLength_;if(sn.length<3*cn)return this;for(var dn=Math.max(0,shaka.util.TsParser.syncOffset(sn)),pn=sn.length-(sn.length+dn)%cn,vn=!1,kn=dn;kn<pn;kn+=cn)if(sn[kn]===71){var Sn=!!(sn[kn+1]&64),wn=((sn[kn+1]&31)<<8)+sn[kn+2];if(1<(sn[kn+3]&48)>>4){var Pn=kn+5+sn[kn+4];if(Pn===kn+cn)continue}else Pn=kn+4;switch(wn){case 0:Sn&&(Pn+=sn[Pn]+1),this.pmtId_=this.getPmtId_(sn,Pn);break;case 17:case 8191:break;case this.pmtId_:Sn&&(Pn+=sn[Pn]+1),Sn=this.parsePMT(sn,Pn),this.videoPid_==null&&(this.videoPid_=Sn.video,this.videoCodec_=Sn.videoCodec),this.audioPid_==null&&(this.audioPid_=Sn.audio,this.audioCodec_=Sn.audioCodec),this.id3Pid_==null&&(this.id3Pid_=Sn.id3),vn&&!this.pmtParsed_&&(shaka.log.debug("reparse from beginning"),vn=!1,kn=dn-cn),this.pmtParsed_=!0;break;case this.videoPid_:Sn=sn.subarray(Pn,kn+cn),this.videoStartTime_==null&&(wn=this.parsePES(Sn))&&wn.pts!=null&&(this.videoStartTime_=wn.pts/ln),this.videoData_.push(Sn);break;case this.audioPid_:Sn=sn.subarray(Pn,kn+cn),this.audioStartTime_==null&&(wn=this.parsePES(Sn))&&wn.pts!=null&&(this.audioStartTime_=wn.pts/ln),this.audioData_.push(Sn);break;case this.id3Pid_:this.id3Data_.push(sn.subarray(Pn,kn+cn));break;default:vn=!0}}else shaka.log.warning("Found TS packet that do not start with 0x47");return this},shaka.util.TsParser.prototype.getPmtId_=function(sn,ln){return(sn[ln+10]&31)<<8|sn[ln+11]},shaka.util.TsParser.prototype.parsePMT=function(sn,ln){var cn={audio:-1,video:-1,id3:-1,audioCodec:"",videoCodec:""},dn=ln+3+((sn[ln+1]&15)<<8|sn[ln+2])-4;for(ln+=12+((sn[ln+10]&15)<<8|sn[ln+11]);ln<dn;){var pn=(sn[ln+1]&31)<<8|sn[ln+2];switch(sn[ln]){case 15:cn.audio===-1&&(cn.audio=pn,cn.audioCodec="aac");break;case 21:cn.id3===-1&&(cn.id3=pn);break;case 27:cn.video===-1&&(cn.video=pn,cn.videoCodec="avc");break;case 3:case 4:cn.audio===-1&&(cn.audio=pn,cn.audioCodec="mp3");break;case 36:cn.video===-1&&(cn.video=pn,cn.videoCodec="hvc")}ln+=((sn[ln+3]&15)<<8|sn[ln+4])+5}return cn},shaka.util.TsParser.prototype.parsePES=function(sn){if((sn[0]<<16|sn[1]<<8|sn[2])!==1)return null;var ln={data:new Uint8Array(0),packetLength:6+(sn[4]<<8|sn[5]),pts:null,dts:null},cn=sn[7];return cn&192&&(ln.pts=536870912*(sn[9]&14)+4194304*(sn[10]&255)+16384*(sn[11]&254)+128*(sn[12]&255)+(sn[13]&254)/2,ln.dts=ln.pts,cn&64&&(ln.dts=536870912*(sn[14]&14)+4194304*(sn[15]&255)+16384*(sn[16]&254)+128*(sn[17]&255)+(sn[18]&254)/2)),ln.data=sn.subarray(9+sn[8]),ln},shaka.util.TsParser.prototype.getMetadata=function(){for(var sn=shaka.util.TsParser.Timescale_,ln=shaka.util.Uint8ArrayUtils,cn=[],dn=new Uint8Array(0),pn=this.id3Data_.length-1;0<=pn;pn--){var vn=this.id3Data_[pn];goog.asserts.assert(vn,"We should have a data"),dn=ln.concat(vn,dn),(vn=this.parsePES(dn))&&(cn.unshift({cueTime:vn.pts?vn.pts/sn:null,data:vn.data,frames:shaka.util.Id3Utils.getID3Frames(vn.data),dts:vn.dts,pts:vn.pts}),dn=new Uint8Array(0))}return cn},shaka.util.TsParser.prototype.getStartTime=function(){return{audio:this.audioStartTime_,video:this.videoStartTime_}},shaka.util.TsParser.prototype.getCodecs=function(){return{audio:this.audioCodec_,video:this.videoCodec_}},shaka.util.TsParser.probe=function(sn){return sn=shaka.util.TsParser.syncOffset(sn),0>sn?!1:(0<sn&&shaka.log.warning("MPEG2-TS detected but first sync word found @ offset "+sn+", junk ahead ?"),!0)},shaka.util.TsParser.syncOffset=function(sn){for(var ln=shaka.util.TsParser.PacketLength_,cn=Math.min(1e3,sn.length-3*ln),dn=0;dn<cn;){if(sn[dn]===71&&sn[dn+ln]===71&&sn[dn+2*ln]===71)return dn;dn++}return-1},goog.exportSymbol("shaka.util.TsParser",shaka.util.TsParser),shaka.util.TsParser.PacketLength_=188,shaka.util.TsParser.Timescale_=9e4,shaka.lcevc={},shaka.lcevc.Dil=function(sn,ln,cn){this.dil_=null,this.variantId_=-1,this.media_=sn,this.canvas_=ln,this.dilConfig_=cn,this.create_()},shaka.lcevc.Dil.prototype.appendBuffer=function(sn){this.dil_&&this.dil_.appendBuffer(sn,"video",this.variantId_)},shaka.lcevc.Dil.prototype.hideCanvas=function(){this.dil_&&this.canvas_.classList.add("shaka-hidden")},shaka.lcevc.Dil.prototype.create_=function(){this.isSupported_()&&!this.dil_&&LcevcDil.SupportObject.webGLSupport(this.canvas_)&&(this.canvas_.classList.remove("shaka-hidden"),this.dil_=new LcevcDil.LcevcDil(this.media_,this.canvas_,this.dilConfig_))},shaka.lcevc.Dil.prototype.release=function(){this.dil_&&(this.dil_.close(),this.dil_=null)},shaka.lcevc.Dil.prototype.isSupported_=function(){return typeof libDPIModule>"u"&&shaka.log.alwaysWarn("Could not Find LCEVC Library dependencies on this page"),typeof LcevcDil>"u"?shaka.log.alwaysWarn("Could not Find LCEVC Library on this page"):LcevcDil.SupportObject.SupportStatus||shaka.log.alwaysWarn(LcevcDil.SupportObject.SupportError),typeof LcevcDil<"u"&&typeof libDPIModule<"u"&&this.canvas_ instanceof HTMLCanvasElement&&LcevcDil.SupportObject.SupportStatus},shaka.lcevc.Dil.prototype.updateVariant=function(sn){var ln=shaka.lcevc.Dil.ContainerFormat.MPEG2_TS;switch(sn.mimeType){case"video/webm":ln=shaka.lcevc.Dil.ContainerFormat.WEBM;break;case"video/mp4":ln=shaka.lcevc.Dil.ContainerFormat.MP4}this.dil_&&(this.variantId_=sn.id,this.dil_.setLevelSwitching(sn.id,!0),this.dil_.setContainerFormat(ln))},goog.exportSymbol("shaka.lcevc.Dil",shaka.lcevc.Dil),goog.exportProperty(shaka.lcevc.Dil.prototype,"release",shaka.lcevc.Dil.prototype.release),shaka.lcevc.Dil.ContainerFormat={MPEG2_TS:0,WEBM:1,MP4:2},shaka.media.MediaSourceEngine=function(sn,ln,cn,dn){var pn=this;this.video_=sn,this.config_=null,this.textDisplayer_=ln,this.sourceBuffers_={},this.sourceBufferTypes_={},this.expectedEncryption_={},this.textEngine_=null,this.segmentRelativeVttTiming_=!1,sn=function(vn,kn,Sn){},this.onMetadata_=cn||sn,this.lcevcDil_=dn||null,this.queues_={},this.eventManager_=new shaka.util.EventManager,this.transmuxers_={},this.captionParser_=null,this.mediaSourceOpen_=new shaka.util.PublicPromise,this.mediaSource_=this.createMediaSource(this.mediaSourceOpen_),this.destroyer_=new shaka.util.Destroyer(function(){return pn.doDestroy_()}),this.url_="",this.sequenceMode_=!1,this.textSequenceModeOffset_=new shaka.util.PublicPromise},shaka.media.MediaSourceEngine.prototype.createMediaSource=function(sn){var ln=this,cn=new MediaSource;return this.eventManager_.listenOnce(cn,"sourceopen",function(){return ln.onSourceOpen_(sn)}),this.url_=shaka.media.MediaSourceEngine.createObjectURL(cn),this.video_.src=this.url_,cn},shaka.media.MediaSourceEngine.prototype.onSourceOpen_=function(sn){URL.revokeObjectURL(this.url_),sn.resolve()},shaka.media.MediaSourceEngine.isStreamSupported=function(sn){var ln=shaka.util.MimeUtils.getFullType(sn.mimeType,sn.codecs),cn=shaka.util.MimeUtils.getExtendedType(sn);return shaka.text.TextEngine.isTypeSupported(ln)||shaka.media.Capabilities.isTypeSupported(cn)||shaka.media.Transmuxer.isSupported(ln,sn.type)},shaka.media.MediaSourceEngine.probeSupport=function(){var sn='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat($jscomp.arrayFromIterable(shaka.media.MediaSourceEngine.RAW_FORMATS)),ln={};sn=$jscomp.makeIterator(sn);for(var cn=sn.next();!cn.done;cn=sn.next()){cn=cn.value,shaka.util.Platform.supportsMediaSource()?shaka.text.TextEngine.isTypeSupported(cn)?ln[cn]=!0:ln[cn]=shaka.media.Capabilities.isTypeSupported(cn)||shaka.media.Transmuxer.isSupported(cn):ln[cn]=shaka.util.Platform.supportsMediaType(cn);var dn=cn.split(";")[0];ln[dn]=ln[dn]||ln[cn]}return ln},shaka.media.MediaSourceEngine.prototype.destroy=function(){return this.destroyer_.destroy()},shaka.media.MediaSourceEngine.prototype.doDestroy_=function(){var sn=this,ln,cn,dn,pn,vn,kn,Sn,wn,Pn,Nn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ln){if(Ln.nextAddress==1){ln=shaka.util.Functional,cn=[];for(dn in sn.queues_)for(pn=sn.queues_[dn],vn=pn[0],sn.queues_[dn]=pn.slice(0,1),vn&&cn.push(vn.p.catch(ln.noop)),kn=$jscomp.makeIterator(pn.slice(1)),Sn=kn.next();!Sn.done;Sn=kn.next())wn=Sn.value,wn.p.reject(shaka.util.Destroyer.destroyedError());sn.textEngine_&&cn.push(sn.textEngine_.destroy()),sn.textDisplayer_&&cn.push(sn.textDisplayer_.destroy());for(Pn in sn.transmuxers_)cn.push(sn.transmuxers_[Pn].destroy());return Ln.yield(Promise.all(cn),2)}if(sn.eventManager_&&(sn.eventManager_.release(),sn.eventManager_=null),sn.video_&&(sn.video_.removeAttribute("src"),sn.video_.load(),sn.video_=null),sn.config_=null,sn.mediaSource_=null,sn.textEngine_=null,sn.textDisplayer_=null,sn.sourceBuffers_={},sn.transmuxers_={},sn.captionParser_=null,goog.DEBUG)for(Nn in sn.queues_)goog.asserts.assert(sn.queues_[Nn].length==0,Nn+" queue should be empty after destroy!");sn.queues_={},sn.lcevcDil_=null,Ln.jumpToEnd()})},shaka.media.MediaSourceEngine.prototype.open=function(){return this.mediaSourceOpen_},shaka.media.MediaSourceEngine.prototype.init=function(sn,ln,cn){cn=cn===void 0?!1:cn;var dn=this,pn,vn,kn,Sn,wn,Pn,Nn,Ln;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fn){if(Fn.nextAddress==1)return pn=shaka.util.ManifestParserUtils.ContentType,Fn.yield(dn.mediaSourceOpen_,2);for(dn.sequenceMode_=cn,vn={},kn=$jscomp.makeIterator(sn.keys()),Sn=kn.next();!Sn.done;vn={$jscomp$loop$prop$contentType$703:vn.$jscomp$loop$prop$contentType$703},Sn=kn.next())if(vn.$jscomp$loop$prop$contentType$703=Sn.value,wn=sn.get(vn.$jscomp$loop$prop$contentType$703),goog.asserts.assert(shaka.media.MediaSourceEngine.isStreamSupported(wn),"Type negotiation should happen before MediaSourceEngine.init!"),Pn=shaka.util.MimeUtils.getFullType(wn.mimeType,wn.codecs),vn.$jscomp$loop$prop$contentType$703==pn.TEXT)dn.reinitText(Pn,cn);else{!ln&&shaka.media.Capabilities.isTypeSupported(Pn)||!shaka.media.Transmuxer.isSupported(Pn,vn.$jscomp$loop$prop$contentType$703)||(dn.transmuxers_[vn.$jscomp$loop$prop$contentType$703]=new shaka.media.Transmuxer(Pn),Pn=shaka.media.Transmuxer.convertCodecs(vn.$jscomp$loop$prop$contentType$703,Pn)),Nn=Pn+dn.config_.sourceBufferExtraFeatures,dn.destroyer_.ensureNotDestroyed(),Ln=void 0;try{Ln=dn.mediaSource_.addSourceBuffer(Nn)}catch(zn){throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.MEDIA_SOURCE_OPERATION_THREW,zn,"The mediaSource_ status was"+dn.mediaSource_.readyState+"expected 'open'")}dn.eventManager_.listen(Ln,"error",function(zn){return function(){return dn.onError_(zn.$jscomp$loop$prop$contentType$703)}}(vn)),dn.eventManager_.listen(Ln,"updateend",function(zn){return function(){return dn.onUpdateEnd_(zn.$jscomp$loop$prop$contentType$703)}}(vn)),dn.sourceBuffers_[vn.$jscomp$loop$prop$contentType$703]=Ln,dn.sourceBufferTypes_[vn.$jscomp$loop$prop$contentType$703]=Pn,dn.queues_[vn.$jscomp$loop$prop$contentType$703]=[],dn.expectedEncryption_[vn.$jscomp$loop$prop$contentType$703]=!!wn.drmInfos.length}Fn.jumpToEnd()})},shaka.media.MediaSourceEngine.prototype.configure=function(sn){this.config_=sn},shaka.media.MediaSourceEngine.prototype.reinitText=function(sn,ln){this.textEngine_||(this.textEngine_=new shaka.text.TextEngine(this.textDisplayer_)),this.textEngine_.initParser(sn,ln,this.segmentRelativeVttTiming_)},shaka.media.MediaSourceEngine.prototype.ended=function(){return this.mediaSource_?this.mediaSource_.readyState=="ended":!0},shaka.media.MediaSourceEngine.prototype.bufferStart=function(sn){return sn==shaka.util.ManifestParserUtils.ContentType.TEXT?this.textEngine_.bufferStart():shaka.media.TimeRangesUtils.bufferStart(this.getBuffered_(sn))},shaka.media.MediaSourceEngine.prototype.bufferEnd=function(sn){return sn==shaka.util.ManifestParserUtils.ContentType.TEXT?this.textEngine_.bufferEnd():shaka.media.TimeRangesUtils.bufferEnd(this.getBuffered_(sn))},shaka.media.MediaSourceEngine.prototype.isBuffered=function(sn,ln){return sn==shaka.util.ManifestParserUtils.ContentType.TEXT?this.textEngine_.isBuffered(ln):(sn=this.getBuffered_(sn),shaka.media.TimeRangesUtils.isBuffered(sn,ln))},shaka.media.MediaSourceEngine.prototype.bufferedAheadOf=function(sn,ln){return sn==shaka.util.ManifestParserUtils.ContentType.TEXT?this.textEngine_.bufferedAheadOf(ln):(sn=this.getBuffered_(sn),shaka.media.TimeRangesUtils.bufferedAheadOf(sn,ln))},shaka.media.MediaSourceEngine.prototype.getBufferedInfo=function(){var sn=shaka.util.ManifestParserUtils.ContentType,ln=shaka.media.TimeRangesUtils;if(sn={total:ln.getBufferedInfo(this.video_.buffered),audio:ln.getBufferedInfo(this.getBuffered_(sn.AUDIO)),video:ln.getBufferedInfo(this.getBuffered_(sn.VIDEO)),text:[]},this.textEngine_){ln=this.textEngine_.bufferStart();var cn=this.textEngine_.bufferEnd();ln!=null&&cn!=null&&sn.text.push({start:ln,end:cn})}return sn},shaka.media.MediaSourceEngine.prototype.getBuffered_=function(sn){try{return this.sourceBuffers_[sn].buffered}catch(ln){return sn in this.sourceBuffers_&&shaka.log.error("failed to get buffered range for "+sn,ln),null}},shaka.media.MediaSourceEngine.prototype.getCaptionParser=function(sn){return new shaka.media.ClosedCaptionParser(sn)},shaka.media.MediaSourceEngine.prototype.appendBuffer=function(sn,ln,cn,dn,pn,vn){pn=pn===void 0?!1:pn,vn=vn===void 0?!1:vn;var kn=this,Sn,wn,Pn,Nn,Ln,Fn,zn,Dn,Kn,qn,Zn,Yn,Jn,rs,ss,as,ds,Es,Ss,Qn,ms,Ts,Rs,ys,_s,js,bs,ks;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xs){switch(xs.nextAddress){case 1:if(Sn=shaka.util.ManifestParserUtils.ContentType,sn!=Sn.TEXT){xs.jumpTo(2);break}if(!kn.sequenceMode_){xs.jumpTo(3);break}return xs.yield(kn.textSequenceModeOffset_,4);case 4:wn=xs.yieldResult,kn.textEngine_.setTimestampOffset(wn);case 3:return xs.yield(kn.textEngine_.appendBuffer(ln,cn?cn.startTime:null,cn?cn.endTime:null),5);case 5:return xs.return();case 2:if(Pn=shaka.util.BufferUtils.toUint8(ln),Nn=kn.sourceBufferTypes_[sn],kn.transmuxers_[sn]&&(Nn=kn.transmuxers_[sn].getOrginalMimeType()),shaka.util.TsParser.probe(Pn)?(Ln=new shaka.util.TsParser().parse(Pn),Fn=cn.startTime-(Ln.getStartTime()[sn]||0),zn=Ln.getMetadata(),zn.length&&kn.onMetadata_(zn,Fn,cn?cn.endTime:null)):shaka.media.MediaSourceEngine.RAW_FORMATS.includes(Nn)&&(Dn=shaka.util.Id3Utils.getID3Frames(Pn),Dn.length&&cn&&(Kn={cueTime:cn.startTime,data:Pn,frames:Dn,dts:cn.startTime,pts:cn.startTime},kn.onMetadata_([Kn],0,cn.endTime))),!kn.transmuxers_[sn]){dn&&sn==Sn.VIDEO&&(kn.textEngine_||kn.reinitText(shaka.util.MimeUtils.CEA608_CLOSED_CAPTION_MIMETYPE,kn.sequenceMode_),kn.captionParser_||(kn.captionParser_=kn.getCaptionParser(Nn)),cn?(qn=kn.captionParser_.parseFrom(ln),qn.length&&(Zn=kn.sourceBuffers_[Sn.VIDEO].timestampOffset,kn.textEngine_.storeAndAppendClosedCaptions(qn,cn.startTime,cn.endTime,Zn))):kn.captionParser_.init(ln)),xs.jumpTo(6);break}return pn&&kn.transmuxers_[sn].resetCaptions(),xs.yield(kn.transmuxers_[sn].transmux(ln),7);case 7:Yn=xs.yieldResult,kn.textEngine_||kn.reinitText(shaka.util.MimeUtils.CEA608_CLOSED_CAPTION_MIMETYPE,kn.sequenceMode_),Yn.captions&&Yn.captions.length&&(Jn=kn.sourceBuffers_[Sn.VIDEO].timestampOffset,rs=kn.textEngine_.convertMuxjsCaptionsToShakaCaptions(Yn.captions),kn.textEngine_.storeAndAppendClosedCaptions(rs,cn?cn.startTime:null,cn?cn.endTime:null,Jn)),ln=Yn.data;case 6:if(ln=kn.workAroundBrokenPlatforms_(ln,cn?cn.startTime:null,sn),ss=kn.sourceBuffers_[sn],as=shaka.media.MediaSourceEngine.SourceBufferMode_.SEQUENCE,!kn.sequenceMode_||ss.mode==as||!cn){xs.jumpTo(8);break}if(ds=kn.mediaSource_.duration,Es=sn==Sn.VIDEO||!(Sn.VIDEO in kn.sourceBuffers_),!Es){xs.jumpTo(9);break}return Ss=[ss.appendWindowStart,ss.appendWindowEnd],ss.appendWindowStart=0,ss.appendWindowEnd=1/0,Qn=ss.timestampOffset,ss.timestampOffset=0,xs.yield(kn.enqueueOperation_(sn,function(){return kn.append_(sn,ln)}),10);case 10:return xs.yield(kn.enqueueOperation_(sn,function(){return kn.abort_(sn)}),11);case 11:return ss.timestampOffset=Qn,ss.appendWindowStart=Ss[0],ss.appendWindowEnd=Ss[1],ms=shaka.media.TimeRangesUtils.bufferStart(kn.getBuffered_(sn)),Ts=(cn.startTime||0)-(ms||0),kn.textSequenceModeOffset_.resolve(Ts),xs.yield(kn.enqueueOperation_(sn,function(){return kn.remove_(sn,0,ds)}),12);case 12:if(sn!=Sn.VIDEO){xs.jumpTo(9);break}return xs.yield(kn.enqueueOperation_(sn,function(){return kn.flush_(sn)}),9);case 9:return ss.mode=as,xs.yield(kn.setDuration(ds),8);case 8:return cn&&kn.sequenceMode_&&sn!=Sn.TEXT&&(pn||vn)&&(Rs=cn.startTime,kn.enqueueOperation_(sn,function(){return kn.abort_(sn)}),kn.enqueueOperation_(sn,function(){return kn.setTimestampOffset_(sn,Rs)})),ys=null,xs.yield(kn.enqueueOperation_(sn,function(){goog.DEBUG&&cn&&(ys=kn.getBuffered_(sn)),kn.append_(sn,ln)}),16);case 16:goog.DEBUG&&cn&&(_s=kn.getBuffered_(sn),js=shaka.media.TimeRangesUtils.computeAddedRange(ys,_s))&&(bs=cn.endTime-cn.startTime,ks=Math.abs(js.end-cn.endTime),.1<bs&&ks>bs/2&&shaka.log.error("Possible encoding problem detected!","Unexpected buffered range for reference",cn,"from URIs",cn.getUris(),"should be",{start:cn.startTime,end:cn.endTime},"but got",js)),xs.jumpToEnd()}})},shaka.media.MediaSourceEngine.prototype.setSelectedClosedCaptionId=function(sn){var ln=this.bufferEnd(shaka.util.ManifestParserUtils.ContentType.VIDEO)||0;this.textEngine_.setSelectedClosedCaptionId(sn,ln)},shaka.media.MediaSourceEngine.prototype.clearSelectedClosedCaptionId=function(){this.textEngine_&&this.textEngine_.setSelectedClosedCaptionId("",0)},shaka.media.MediaSourceEngine.prototype.remove=function(sn,ln,cn){var dn=this,pn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(vn){return pn=shaka.util.ManifestParserUtils.ContentType,sn==pn.TEXT?vn.yield(dn.textEngine_.remove(ln,cn),0):vn.yield(dn.enqueueOperation_(sn,function(){return dn.remove_(sn,ln,cn)}),0)})},shaka.media.MediaSourceEngine.prototype.clear=function(sn){var ln=this,cn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(dn){return cn=shaka.util.ManifestParserUtils.ContentType,sn==cn.TEXT?ln.textEngine_?dn.yield(ln.textEngine_.remove(0,1/0),0):dn.return():dn.yield(ln.enqueueOperation_(sn,function(){return ln.remove_(sn,0,ln.mediaSource_.duration)}),0)})},shaka.media.MediaSourceEngine.prototype.resetCaptionParser=function(){this.captionParser_&&this.captionParser_.reset()},shaka.media.MediaSourceEngine.prototype.flush=function(sn){var ln=this,cn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(dn){return cn=shaka.util.ManifestParserUtils.ContentType,sn==cn.TEXT?dn.return():dn.yield(ln.enqueueOperation_(sn,function(){return ln.flush_(sn)}),0)})},shaka.media.MediaSourceEngine.prototype.setStreamProperties=function(sn,ln,cn,dn,pn){var vn=this,kn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sn){return kn=shaka.util.ManifestParserUtils.ContentType,sn==kn.TEXT?(pn||vn.textEngine_.setTimestampOffset(ln),vn.textEngine_.setAppendWindow(cn,dn),Sn.return()):Sn.yield(Promise.all([vn.enqueueOperation_(sn,function(){return vn.abort_(sn)}),pn?Promise.resolve():vn.enqueueOperation_(sn,function(){return vn.setTimestampOffset_(sn,ln)}),vn.enqueueOperation_(sn,function(){return vn.setAppendWindow_(sn,cn,dn)})]),0)})},shaka.media.MediaSourceEngine.prototype.resync=function(sn,ln){var cn=this,dn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pn){return dn=shaka.util.ManifestParserUtils.ContentType,sn==dn.TEXT?pn.return():(cn.enqueueOperation_(sn,function(){return cn.abort_(sn)}),pn.yield(cn.enqueueOperation_(sn,function(){return cn.setTimestampOffset_(sn,ln)}),0))})},shaka.media.MediaSourceEngine.prototype.endOfStream=function(sn){var ln=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cn){return cn.yield(ln.enqueueBlockingOperation_(function(){ln.ended()||ln.mediaSource_.readyState==="closed"||(sn?ln.mediaSource_.endOfStream(sn):ln.mediaSource_.endOfStream())}),0)})},shaka.media.MediaSourceEngine.prototype.setDuration=function(sn){var ln=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cn){return cn.yield(ln.enqueueBlockingOperation_(function(){if(sn<ln.mediaSource_.duration)for(var dn in ln.sourceBuffers_){var pn={start:function(){},p:new shaka.util.PublicPromise};ln.queues_[dn].unshift(pn)}ln.mediaSource_.duration=sn}),0)})},shaka.media.MediaSourceEngine.prototype.getDuration=function(){return this.mediaSource_.duration},shaka.media.MediaSourceEngine.prototype.append_=function(sn,ln){sn==shaka.util.ManifestParserUtils.ContentType.VIDEO&&this.lcevcDil_&&this.lcevcDil_.appendBuffer(ln),this.sourceBuffers_[sn].appendBuffer(ln)},shaka.media.MediaSourceEngine.prototype.remove_=function(sn,ln,cn){cn<=ln?this.onUpdateEnd_(sn):this.sourceBuffers_[sn].remove(ln,cn)},shaka.media.MediaSourceEngine.prototype.abort_=function(sn){var ln=this.sourceBuffers_[sn].appendWindowStart,cn=this.sourceBuffers_[sn].appendWindowEnd;this.sourceBuffers_[sn].abort(),this.sourceBuffers_[sn].appendWindowStart=ln,this.sourceBuffers_[sn].appendWindowEnd=cn,this.onUpdateEnd_(sn)},shaka.media.MediaSourceEngine.prototype.flush_=function(sn){goog.asserts.assert(this.video_.buffered.length==0,"MediaSourceEngine.flush_ should only be used after clearing all data!"),this.video_.currentTime-=.001,this.onUpdateEnd_(sn)},shaka.media.MediaSourceEngine.prototype.setTimestampOffset_=function(sn,ln){0>ln&&(ln+=.001),this.sourceBuffers_[sn].timestampOffset=ln,this.onUpdateEnd_(sn)},shaka.media.MediaSourceEngine.prototype.setAppendWindow_=function(sn,ln,cn){this.sourceBuffers_[sn].appendWindowStart=0,this.sourceBuffers_[sn].appendWindowEnd=cn,this.sourceBuffers_[sn].appendWindowStart=ln,this.onUpdateEnd_(sn)},shaka.media.MediaSourceEngine.prototype.onError_=function(sn){var ln=this.queues_[sn][0];goog.asserts.assert(ln,"Spurious error event!"),goog.asserts.assert(!this.sourceBuffers_[sn].updating,"SourceBuffer should not be updating on error!"),ln.p.reject(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.MEDIA_SOURCE_OPERATION_FAILED,this.video_.error?this.video_.error.code:0))},shaka.media.MediaSourceEngine.prototype.onUpdateEnd_=function(sn){var ln=this.queues_[sn][0];goog.asserts.assert(ln,"Spurious updateend event!"),ln&&(goog.asserts.assert(!this.sourceBuffers_[sn].updating,"SourceBuffer should not be updating on updateend!"),ln.p.resolve(),this.popFromQueue_(sn))},shaka.media.MediaSourceEngine.prototype.enqueueOperation_=function(sn,ln){return this.destroyer_.ensureNotDestroyed(),ln={start:ln,p:new shaka.util.PublicPromise},this.queues_[sn].push(ln),this.queues_[sn].length==1&&this.startOperation_(sn),ln.p},shaka.media.MediaSourceEngine.prototype.enqueueBlockingOperation_=function(sn){var ln=this,cn,dn,pn,vn,kn,Sn,wn,Pn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Nn){switch(Nn.nextAddress){case 1:ln.destroyer_.ensureNotDestroyed(),cn=[],dn={};for(pn in ln.sourceBuffers_)dn.$jscomp$loop$prop$ready$705=new shaka.util.PublicPromise,vn={start:function(Ln){return function(){return Ln.$jscomp$loop$prop$ready$705.resolve()}}(dn),p:dn.$jscomp$loop$prop$ready$705},ln.queues_[pn].push(vn),cn.push(dn.$jscomp$loop$prop$ready$705),ln.queues_[pn].length==1&&vn.start(),dn={$jscomp$loop$prop$ready$705:dn.$jscomp$loop$prop$ready$705};return Nn.setCatchFinallyBlocks(2),Nn.yield(Promise.all(cn),4);case 4:Nn.leaveTryBlock(3);break;case 2:if(kn=Nn.enterCatchBlock(),goog.asserts.assert(ln.destroyer_.destroyed(),"Should be destroyed by now"),goog.DEBUG)for(Sn in ln.sourceBuffers_)ln.queues_[Sn].length&&(goog.asserts.assert(ln.queues_[Sn].length==1,"Should be at most one item in queue!"),goog.asserts.assert(cn.includes(ln.queues_[Sn][0].p),"The item in queue should be one of our waiters!"),ln.queues_[Sn].shift());throw kn;case 3:if(goog.DEBUG)for(wn in ln.sourceBuffers_)goog.asserts.assert(ln.sourceBuffers_[wn].updating==0,"SourceBuffers should not be updating after a blocking op!");try{sn()}catch(Ln){throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.MEDIA_SOURCE_OPERATION_THREW,Ln)}finally{for(Pn in ln.sourceBuffers_)ln.popFromQueue_(Pn)}Nn.jumpToEnd()}})},shaka.media.MediaSourceEngine.prototype.popFromQueue_=function(sn){this.queues_[sn].shift(),this.startOperation_(sn)},shaka.media.MediaSourceEngine.prototype.startOperation_=function(sn){var ln=this.queues_[sn][0];if(ln)try{ln.start()}catch(cn){cn.name=="QuotaExceededError"?ln.p.reject(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.QUOTA_EXCEEDED_ERROR,sn)):ln.p.reject(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.MEDIA_SOURCE_OPERATION_THREW,cn)),this.popFromQueue_(sn)}},shaka.media.MediaSourceEngine.prototype.getTextDisplayer=function(){return goog.asserts.assert(this.textDisplayer_,"TextDisplayer should only be null when this is destroyed"),this.textDisplayer_},shaka.media.MediaSourceEngine.prototype.setTextDisplayer=function(sn){var ln=this.textDisplayer_;this.textDisplayer_=sn,ln&&(sn.setTextVisibility(ln.isTextVisible()),ln.destroy()),this.textEngine_&&this.textEngine_.setDisplayer(sn)},shaka.media.MediaSourceEngine.prototype.setSegmentRelativeVttTiming=function(sn){this.segmentRelativeVttTiming_=sn},shaka.media.MediaSourceEngine.prototype.workAroundBrokenPlatforms_=function(sn,ln,cn){var dn=this.expectedEncryption_[cn];return ln==null&&dn&&shaka.util.Platform.requiresEncryptionInfoInAllInitSegments()&&shaka.util.MimeUtils.getContainerType(this.sourceBufferTypes_[cn])=="mp4"&&(shaka.log.debug("Forcing fake encryption information in init segment."),sn=shaka.media.ContentWorkarounds.fakeEncryption(sn)),sn},shaka.media.MediaSourceEngine.prototype.updateLcevcDil=function(sn){this.lcevcDil_=sn},shaka.media.MediaSourceEngine.createObjectURL=window.URL.createObjectURL,shaka.media.MediaSourceEngine.SourceBufferMode_={SEQUENCE:"sequence",SEGMENTS:"segments"},shaka.media.MediaSourceEngine.RAW_FORMATS=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"],shaka.media.PresentationTimeline=function(sn,ln,cn){this.presentationStartTime_=sn,this.presentationDelay_=ln,this.segmentAvailabilityDuration_=this.duration_=1/0,this.maxSegmentDuration_=1,this.maxSegmentEndTime_=this.minSegmentStartTime_=null,this.clockOffset_=0,this.static_=!0,this.userSeekStart_=0,this.autoCorrectDrift_=cn===void 0?!0:cn,this.availabilityTimeOffset_=0,this.startTimeLocked_=!1},shaka.media.PresentationTimeline.prototype.getDuration=function(){return this.duration_},shaka.media.PresentationTimeline.prototype.getMaxSegmentDuration=function(){return this.maxSegmentDuration_},shaka.media.PresentationTimeline.prototype.setPresentationStartTime=function(sn){goog.asserts.assert(0<=sn,"presentationStartTime must be >= 0"),this.presentationStartTime_=sn},shaka.media.PresentationTimeline.prototype.setDuration=function(sn){goog.asserts.assert(0<sn,"duration must be > 0"),this.duration_=sn},shaka.media.PresentationTimeline.prototype.getPresentationStartTime=function(){return this.presentationStartTime_},shaka.media.PresentationTimeline.prototype.setClockOffset=function(sn){this.clockOffset_=sn},shaka.media.PresentationTimeline.prototype.setStatic=function(sn){this.static_=sn},shaka.media.PresentationTimeline.prototype.setSegmentAvailabilityDuration=function(sn){goog.asserts.assert(0<=sn,"segmentAvailabilityDuration must be >= 0"),this.segmentAvailabilityDuration_=sn},shaka.media.PresentationTimeline.prototype.setDelay=function(sn){goog.asserts.assert(0<=sn,"delay must be >= 0"),this.presentationDelay_=sn},shaka.media.PresentationTimeline.prototype.getDelay=function(){return this.presentationDelay_},shaka.media.PresentationTimeline.prototype.notifySegments=function(sn){if(sn.length!=0){var ln=sn[0].startTime,cn=sn[0].endTime,dn=(Date.now()+this.clockOffset_)/1e3;sn=$jscomp.makeIterator(sn);for(var pn=sn.next();!pn.done;pn=sn.next())pn=pn.value,dn<pn.startTime||(ln=Math.min(ln,pn.startTime),cn=Math.max(cn,pn.endTime),this.maxSegmentDuration_=Math.max(this.maxSegmentDuration_,pn.endTime-pn.startTime));this.notifyMinSegmentStartTime(ln),this.maxSegmentEndTime_=Math.max(this.maxSegmentEndTime_,cn),this.presentationStartTime_!=null&&this.autoCorrectDrift_&&!this.startTimeLocked_&&(this.presentationStartTime_=dn-this.maxSegmentEndTime_-this.maxSegmentDuration_),shaka.log.v1("notifySegments:","maxSegmentDuration="+this.maxSegmentDuration_)}},shaka.media.PresentationTimeline.prototype.lockStartTime=function(){this.startTimeLocked_=!0},shaka.media.PresentationTimeline.prototype.notifyMinSegmentStartTime=function(sn){this.minSegmentStartTime_=this.minSegmentStartTime_==null?sn:Math.min(this.minSegmentStartTime_,sn)},shaka.media.PresentationTimeline.prototype.notifyMaxSegmentDuration=function(sn){this.maxSegmentDuration_=Math.max(this.maxSegmentDuration_,sn),shaka.log.v1("notifyNewSegmentDuration:","maxSegmentDuration="+this.maxSegmentDuration_)},shaka.media.PresentationTimeline.prototype.offset=function(sn){this.minSegmentStartTime_!=null&&(this.minSegmentStartTime_+=sn),this.maxSegmentEndTime_!=null&&(this.maxSegmentEndTime_+=sn)},shaka.media.PresentationTimeline.prototype.isLive=function(){return this.duration_==1/0&&!this.static_},shaka.media.PresentationTimeline.prototype.isInProgress=function(){return this.duration_!=1/0&&!this.static_},shaka.media.PresentationTimeline.prototype.getSegmentAvailabilityStart=function(){goog.asserts.assert(0<=this.segmentAvailabilityDuration_,"The availability duration should be positive");var sn=this.getSegmentAvailabilityEnd()-this.segmentAvailabilityDuration_;return Math.max(this.userSeekStart_,sn)},shaka.media.PresentationTimeline.prototype.setUserSeekStart=function(sn){this.userSeekStart_=sn},shaka.media.PresentationTimeline.prototype.getSegmentAvailabilityEnd=function(){return this.isLive()||this.isInProgress()?Math.min(this.getLiveEdge_()+this.availabilityTimeOffset_,this.duration_):this.maxSegmentEndTime_?Math.min(this.maxSegmentEndTime_,this.duration_):this.duration_},shaka.media.PresentationTimeline.prototype.getSafeSeekRangeStart=function(sn){var ln=Math.max(this.minSegmentStartTime_,this.userSeekStart_);if(this.segmentAvailabilityDuration_==1/0)return Math.ceil(1e3*ln)/1e3;var cn=this.getSegmentAvailabilityEnd()-this.segmentAvailabilityDuration_;return sn=Math.min(cn+sn,this.getSeekRangeEnd()),Math.max(ln,sn)},shaka.media.PresentationTimeline.prototype.getSeekRangeStart=function(){return this.getSafeSeekRangeStart(0)},shaka.media.PresentationTimeline.prototype.getSeekRangeEnd=function(){var sn=this.isLive()||this.isInProgress()?this.presentationDelay_:0;return Math.max(0,this.getSegmentAvailabilityEnd()-sn)},shaka.media.PresentationTimeline.prototype.usingPresentationStartTime=function(){return!(this.presentationStartTime_==null||this.maxSegmentEndTime_!=null&&this.autoCorrectDrift_)},shaka.media.PresentationTimeline.prototype.getLiveEdge_=function(){goog.asserts.assert(this.presentationStartTime_!=null,"Cannot compute timeline live edge without start time");var sn=(Date.now()+this.clockOffset_)/1e3;return Math.max(0,sn-this.maxSegmentDuration_-this.presentationStartTime_)},shaka.media.PresentationTimeline.prototype.setAvailabilityTimeOffset=function(sn){this.availabilityTimeOffset_=sn},shaka.media.PresentationTimeline.prototype.assertIsValid=function(){goog.DEBUG&&(this.isLive()?goog.asserts.assert(this.presentationStartTime_!=null,"Detected as live stream, but does not match our model of live!"):this.isInProgress()?goog.asserts.assert(this.presentationStartTime_!=null&&this.segmentAvailabilityDuration_==1/0,"Detected as IPR stream, but does not match our model of IPR!"):goog.asserts.assert(this.segmentAvailabilityDuration_==1/0&&this.duration_!=1/0&&this.static_,"Detected as VOD stream, but does not match our model of VOD!"))},goog.exportSymbol("shaka.media.PresentationTimeline",shaka.media.PresentationTimeline),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"setAvailabilityTimeOffset",shaka.media.PresentationTimeline.prototype.setAvailabilityTimeOffset),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"usingPresentationStartTime",shaka.media.PresentationTimeline.prototype.usingPresentationStartTime),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"getSeekRangeEnd",shaka.media.PresentationTimeline.prototype.getSeekRangeEnd),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"getSeekRangeStart",shaka.media.PresentationTimeline.prototype.getSeekRangeStart),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"getSafeSeekRangeStart",shaka.media.PresentationTimeline.prototype.getSafeSeekRangeStart),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"getSegmentAvailabilityEnd",shaka.media.PresentationTimeline.prototype.getSegmentAvailabilityEnd),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"setUserSeekStart",shaka.media.PresentationTimeline.prototype.setUserSeekStart),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"getSegmentAvailabilityStart",shaka.media.PresentationTimeline.prototype.getSegmentAvailabilityStart),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"isInProgress",shaka.media.PresentationTimeline.prototype.isInProgress),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"isLive",shaka.media.PresentationTimeline.prototype.isLive),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"offset",shaka.media.PresentationTimeline.prototype.offset),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"notifyMaxSegmentDuration",shaka.media.PresentationTimeline.prototype.notifyMaxSegmentDuration),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"notifyMinSegmentStartTime",shaka.media.PresentationTimeline.prototype.notifyMinSegmentStartTime),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"lockStartTime",shaka.media.PresentationTimeline.prototype.lockStartTime),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"notifySegments",shaka.media.PresentationTimeline.prototype.notifySegments),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"getDelay",shaka.media.PresentationTimeline.prototype.getDelay),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"setDelay",shaka.media.PresentationTimeline.prototype.setDelay),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"setSegmentAvailabilityDuration",shaka.media.PresentationTimeline.prototype.setSegmentAvailabilityDuration),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"setStatic",shaka.media.PresentationTimeline.prototype.setStatic),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"setClockOffset",shaka.media.PresentationTimeline.prototype.setClockOffset),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"getPresentationStartTime",shaka.media.PresentationTimeline.prototype.getPresentationStartTime),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"setDuration",shaka.media.PresentationTimeline.prototype.setDuration),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"setPresentationStartTime",shaka.media.PresentationTimeline.prototype.setPresentationStartTime),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"getMaxSegmentDuration",shaka.media.PresentationTimeline.prototype.getMaxSegmentDuration),goog.exportProperty(shaka.media.PresentationTimeline.prototype,"getDuration",shaka.media.PresentationTimeline.prototype.getDuration),shaka.media.StallDetector=function(sn,ln,cn){this.onEvent_=cn,this.implementation_=sn,this.wasMakingProgress_=sn.shouldBeMakingProgress(),this.value_=sn.getPresentationSeconds(),this.lastUpdateSeconds_=sn.getWallSeconds(),this.didJump_=!1,this.stallsDetected_=0,this.stallThresholdSeconds_=ln,this.onStall_=function(){}},shaka.media.StallDetector.prototype.release=function(){this.onEvent_=this.implementation_=null,this.onStall_=function(){}},shaka.media.StallDetector.prototype.onStall=function(sn){this.onStall_=sn},shaka.media.StallDetector.prototype.getStallsDetected=function(){return this.stallsDetected_},shaka.media.StallDetector.prototype.poll=function(){var sn=this.implementation_,ln=sn.shouldBeMakingProgress(),cn=sn.getPresentationSeconds(),dn=sn.getWallSeconds();return(this.value_!=cn||this.wasMakingProgress_!=ln)&&(this.lastUpdateSeconds_=dn,this.value_=cn,this.wasMakingProgress_=ln,this.didJump_=!1),cn=dn-this.lastUpdateSeconds_,(ln=cn>=this.stallThresholdSeconds_&&ln&&!this.didJump_)&&(this.onStall_(this.value_,cn),this.didJump_=!0,this.value_=sn.getPresentationSeconds(),this.stallsDetected_++,this.onEvent_(new shaka.util.FakeEvent(shaka.util.FakeEvent.EventName.StallDetected))),ln},shaka.media.StallDetector.Implementation=function(){},shaka.media.StallDetector.Implementation.prototype.shouldBeMakingProgress=function(){},shaka.media.StallDetector.Implementation.prototype.getPresentationSeconds=function(){},shaka.media.StallDetector.Implementation.prototype.getWallSeconds=function(){},shaka.media.StallDetector.MediaElementImplementation=function(sn){this.mediaElement_=sn},shaka.media.StallDetector.MediaElementImplementation.prototype.shouldBeMakingProgress=function(){return this.mediaElement_.paused||this.mediaElement_.playbackRate==0||this.mediaElement_.buffered.length==0?!1:shaka.media.StallDetector.MediaElementImplementation.hasContentFor_(this.mediaElement_.buffered,this.mediaElement_.currentTime)},shaka.media.StallDetector.MediaElementImplementation.prototype.getPresentationSeconds=function(){return this.mediaElement_.currentTime},shaka.media.StallDetector.MediaElementImplementation.prototype.getWallSeconds=function(){return Date.now()/1e3},shaka.media.StallDetector.MediaElementImplementation.hasContentFor_=function(sn,ln){sn=$jscomp.makeIterator(shaka.media.TimeRangesUtils.getBufferedInfo(sn));for(var cn=sn.next();!cn.done;cn=sn.next())if(cn=cn.value,!(ln<cn.start-.1||ln>cn.end-.5))return!0;return!1},shaka.media.GapJumpingController=function(sn,ln,cn,dn,pn){var vn=this;this.onEvent_=pn,this.video_=sn,this.timeline_=ln,this.config_=cn,this.eventManager_=new shaka.util.EventManager,this.seekingEventReceived_=!1,this.prevReadyState_=sn.readyState,this.gapsJumped_=0,this.stallDetector_=dn,this.hadSegmentAppended_=!1,this.eventManager_.listen(sn,"waiting",function(){return vn.onPollGapJump_()}),this.gapJumpTimer_=new shaka.util.Timer(function(){vn.onPollGapJump_()}).tickEvery(.25)},shaka.media.GapJumpingController.prototype.release=function(){this.eventManager_&&(this.eventManager_.release(),this.eventManager_=null),this.gapJumpTimer_!=null&&(this.gapJumpTimer_.stop(),this.gapJumpTimer_=null),this.stallDetector_&&(this.stallDetector_.release(),this.stallDetector_=null),this.video_=this.timeline_=this.onEvent_=null},shaka.media.GapJumpingController.prototype.onSegmentAppended=function(){this.hadSegmentAppended_=!0,this.onPollGapJump_()},shaka.media.GapJumpingController.prototype.onSeeking=function(){this.seekingEventReceived_=!0,this.hadSegmentAppended_=!1},shaka.media.GapJumpingController.prototype.getGapsJumped=function(){return this.gapsJumped_},shaka.media.GapJumpingController.prototype.onPollGapJump_=function(){if(this.video_.readyState!=0){if(this.video_.seeking){if(!this.seekingEventReceived_)return}else this.seekingEventReceived_=!1;if((!this.video_.paused||this.video_.currentTime==0&&(this.video_.autoplay||this.video_.currentTime!=0))&&(this.video_.readyState!=this.prevReadyState_&&(this.prevReadyState_=this.video_.readyState),!this.stallDetector_||!this.stallDetector_.poll())){var sn=this.video_.currentTime,ln=this.video_.buffered,cn=shaka.media.TimeRangesUtils.getGapIndex(ln,sn,this.config_.gapDetectionThreshold);if(cn!=null&&(cn!=0||this.hadSegmentAppended_)){var dn=ln.start(cn),pn=this.timeline_.getSeekRangeEnd();dn>=pn||(sn=dn-sn,sn<shaka.media.GapJumpingController.BROWSER_GAP_TOLERANCE||(cn==0?shaka.log.info("Jumping forward",sn,"seconds because of gap before start time of",dn):shaka.log.info("Jumping forward",sn,"seconds because of gap starting at",ln.end(cn-1),"and ending at",dn),this.video_.currentTime=dn,this.gapsJumped_++,this.onEvent_(new shaka.util.FakeEvent(shaka.util.FakeEvent.EventName.GapJumped))))}}}},shaka.media.GapJumpingController.BROWSER_GAP_TOLERANCE=.001,shaka.util.MediaReadyState=function(){},shaka.util.MediaReadyState.waitForReadyState=function(sn,ln,cn,dn){ln==HTMLMediaElement.HAVE_NOTHING||sn.readyState>=ln?dn():(ln=shaka.util.MediaReadyState.READY_STATES_TO_EVENT_NAMES_.value().get(ln),cn.listenOnce(sn,ln,dn))},shaka.util.MediaReadyState.READY_STATES_TO_EVENT_NAMES_=new shaka.util.Lazy(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])}),shaka.media.VideoWrapper=function(sn,ln,cn){var dn=this;this.video_=sn,this.onSeek_=ln,this.startTime_=cn,this.started_=!1,this.eventManager_=new shaka.util.EventManager,this.mover_=new shaka.media.VideoWrapper.PlayheadMover(sn,10),shaka.util.MediaReadyState.waitForReadyState(this.video_,HTMLMediaElement.HAVE_METADATA,this.eventManager_,function(){dn.setStartTime_(dn.startTime_)})},shaka.media.VideoWrapper.prototype.release=function(){this.eventManager_&&(this.eventManager_.release(),this.eventManager_=null),this.mover_!=null&&(this.mover_.release(),this.mover_=null),this.onSeek_=function(){},this.video_=null},shaka.media.VideoWrapper.prototype.getTime=function(){return this.started_?this.video_.currentTime:this.startTime_},shaka.media.VideoWrapper.prototype.setTime=function(sn){var ln=this;0<this.video_.readyState?this.mover_.moveTo(sn):shaka.util.MediaReadyState.waitForReadyState(this.video_,HTMLMediaElement.HAVE_METADATA,this.eventManager_,function(){ln.setStartTime_(ln.startTime_)})},shaka.media.VideoWrapper.prototype.setStartTime_=function(sn){var ln=this;.001>Math.abs(this.video_.currentTime-sn)?this.startListeningToSeeks_():(this.eventManager_.listenOnce(this.video_,"seeking",function(){ln.startListeningToSeeks_()}),this.mover_.moveTo(this.video_.currentTime&&this.video_.currentTime!=0?this.video_.currentTime:sn))},shaka.media.VideoWrapper.prototype.startListeningToSeeks_=function(){var sn=this;goog.asserts.assert(0<this.video_.readyState,"The media element should be ready before we listen for seeking."),this.started_=!0,this.eventManager_.listen(this.video_,"seeking",function(){return sn.onSeek_()})},shaka.media.VideoWrapper.PlayheadMover=function(sn,ln){var cn=this;this.mediaElement_=sn,this.maxAttempts_=ln,this.targetTime_=this.originTime_=this.remainingAttempts_=0,this.timer_=new shaka.util.Timer(function(){return cn.onTick_()})},shaka.media.VideoWrapper.PlayheadMover.prototype.release=function(){this.timer_&&(this.timer_.stop(),this.timer_=null),this.mediaElement_=null},shaka.media.VideoWrapper.PlayheadMover.prototype.moveTo=function(sn){this.originTime_=this.mediaElement_.currentTime,this.targetTime_=sn,this.remainingAttempts_=this.maxAttempts_,this.mediaElement_.currentTime=sn,this.timer_.tickEvery(.1)},shaka.media.VideoWrapper.PlayheadMover.prototype.onTick_=function(){0>=this.remainingAttempts_?(shaka.log.warning(["Failed to move playhead from",this.originTime_,"to",this.targetTime_].join(" ")),this.timer_.stop()):this.mediaElement_.currentTime!=this.originTime_?this.timer_.stop():(this.mediaElement_.currentTime=this.targetTime_,this.remainingAttempts_--)},shaka.media.Playhead=function(){},shaka.media.Playhead.prototype.ready=function(){},shaka.media.Playhead.prototype.setStartTime=function(sn){},shaka.media.Playhead.prototype.getStallsDetected=function(){},shaka.media.Playhead.prototype.getGapsJumped=function(){},shaka.media.Playhead.prototype.getTime=function(){},shaka.media.Playhead.prototype.notifyOfBufferingChange=function(){},shaka.media.SrcEqualsPlayhead=function(sn){this.mediaElement_=sn,this.started_=!1,this.startTime_=null,this.eventManager_=new shaka.util.EventManager},shaka.media.SrcEqualsPlayhead.prototype.ready=function(){var sn=this;goog.asserts.assert(this.mediaElement_!=null,"Playhead should not be released before calling ready()");var ln=function(){sn.startTime_==null||sn.startTime_==0?sn.started_=!0:(sn.eventManager_.listenOnce(sn.mediaElement_,"seeking",function(){sn.started_=!0}),sn.mediaElement_.currentTime=Math.max(0,sn.mediaElement_.currentTime+sn.startTime_))};shaka.util.MediaReadyState.waitForReadyState(this.mediaElement_,HTMLMediaElement.HAVE_CURRENT_DATA,this.eventManager_,function(){ln()})},shaka.media.SrcEqualsPlayhead.prototype.release=function(){this.eventManager_&&(this.eventManager_.release(),this.eventManager_=null),this.mediaElement_=null},shaka.media.SrcEqualsPlayhead.prototype.setStartTime=function(sn){this.startTime_=this.started_?this.startTime_:sn},shaka.media.SrcEqualsPlayhead.prototype.getTime=function(){return(this.started_?this.mediaElement_.currentTime:this.startTime_)||0},shaka.media.SrcEqualsPlayhead.prototype.getStallsDetected=function(){return 0},shaka.media.SrcEqualsPlayhead.prototype.getGapsJumped=function(){return 0},shaka.media.SrcEqualsPlayhead.prototype.notifyOfBufferingChange=function(){},shaka.media.MediaSourcePlayhead=function(sn,ln,cn,dn,pn,vn){var kn=this;this.minSeekRange_=3,this.mediaElement_=sn,this.timeline_=ln.presentationTimeline,this.minBufferTime_=ln.minBufferTime||0,this.config_=cn,this.onSeek_=pn,this.lastCorrectiveSeek_=null,this.stallDetector_=this.createStallDetector_(sn,cn,vn),this.gapController_=new shaka.media.GapJumpingController(sn,ln.presentationTimeline,cn,this.stallDetector_,vn),this.videoWrapper_=new shaka.media.VideoWrapper(sn,function(){return kn.onSeeking_()},this.getStartTime_(dn)),this.checkWindowTimer_=new shaka.util.Timer(function(){kn.onPollWindow_()})},shaka.media.MediaSourcePlayhead.prototype.ready=function(){this.checkWindowTimer_.tickEvery(.25)},shaka.media.MediaSourcePlayhead.prototype.release=function(){this.videoWrapper_&&(this.videoWrapper_.release(),this.videoWrapper_=null),this.gapController_&&(this.gapController_.release(),this.gapController_=null),this.checkWindowTimer_&&(this.checkWindowTimer_.stop(),this.checkWindowTimer_=null),this.mediaElement_=this.videoWrapper_=this.timeline_=this.config_=null,this.onSeek_=function(){}},shaka.media.MediaSourcePlayhead.prototype.setStartTime=function(sn){this.videoWrapper_.setTime(sn)},shaka.media.MediaSourcePlayhead.prototype.getTime=function(){var sn=this.videoWrapper_.getTime();return 0<this.mediaElement_.readyState&&!this.mediaElement_.paused?this.clampTime_(sn):sn},shaka.media.MediaSourcePlayhead.prototype.getStallsDetected=function(){return this.stallDetector_?this.stallDetector_.getStallsDetected():0},shaka.media.MediaSourcePlayhead.prototype.getGapsJumped=function(){return this.gapController_.getGapsJumped()},shaka.media.MediaSourcePlayhead.prototype.getStartTime_=function(sn){return sn==null?sn=1/0>this.timeline_.getDuration()?this.timeline_.getSeekRangeStart():this.timeline_.getSeekRangeEnd():0>sn&&(sn=this.timeline_.getSeekRangeEnd()+sn),this.clampSeekToDuration_(this.clampTime_(sn))},shaka.media.MediaSourcePlayhead.prototype.notifyOfBufferingChange=function(){this.gapController_.onSegmentAppended()},shaka.media.MediaSourcePlayhead.prototype.onPollWindow_=function(){if(this.mediaElement_.readyState!=0&&!this.mediaElement_.paused){var sn=this.videoWrapper_.getTime(),ln=this.timeline_.getSeekRangeStart(),cn=this.timeline_.getSeekRangeEnd();cn-ln<this.minSeekRange_&&(ln=cn-this.minSeekRange_),sn<ln&&(ln=this.reposition_(sn),shaka.log.info("Jumping forward "+(ln-sn)+" seconds to catch up with the seek range."),this.mediaElement_.currentTime=ln)}},shaka.media.MediaSourcePlayhead.prototype.onSeeking_=function(){this.gapController_.onSeeking();var sn=this.videoWrapper_.getTime(),ln=this.reposition_(sn);if(Math.abs(ln-sn)>shaka.media.GapJumpingController.BROWSER_GAP_TOLERANCE){var cn=Date.now()/1e3;if(!this.lastCorrectiveSeek_||this.lastCorrectiveSeek_<cn-1){this.lastCorrectiveSeek_=cn,this.videoWrapper_.setTime(ln);return}}shaka.log.v1("Seek to "+sn),this.onSeek_()},shaka.media.MediaSourcePlayhead.prototype.clampSeekToDuration_=function(sn){var ln=this.timeline_.getDuration();return sn>=ln?(goog.asserts.assert(0<=this.config_.durationBackoff,"Duration backoff must be non-negative!"),ln-this.config_.durationBackoff):sn},shaka.media.MediaSourcePlayhead.prototype.reposition_=function(sn){goog.asserts.assert(this.config_,"Cannot reposition playhead when it has beeen destroyed");var ln=Math.max(this.minBufferTime_,this.config_.rebufferingGoal),cn=this.config_.safeSeekOffset,dn=this.timeline_.getSeekRangeStart(),pn=this.timeline_.getSeekRangeEnd(),vn=this.timeline_.getDuration();pn-dn<this.minSeekRange_&&(dn=pn-this.minSeekRange_);var kn=this.timeline_.getSafeSeekRangeStart(ln),Sn=this.timeline_.getSafeSeekRangeStart(cn);return ln=this.timeline_.getSafeSeekRangeStart(ln+cn),sn>=vn?(shaka.log.v1("Playhead past duration."),this.clampSeekToDuration_(sn)):sn>pn?(shaka.log.v1("Playhead past end."),pn):sn<dn?shaka.media.TimeRangesUtils.isBuffered(this.mediaElement_.buffered,Sn)?(shaka.log.v1("Playhead before start & start is buffered"),Sn):(shaka.log.v1("Playhead before start & start is unbuffered"),ln):sn>=kn||shaka.media.TimeRangesUtils.isBuffered(this.mediaElement_.buffered,sn)?(shaka.log.v1("Playhead in safe region or in buffered region."),sn):(shaka.log.v1("Playhead outside safe region & in unbuffered region."),ln)},shaka.media.MediaSourcePlayhead.prototype.clampTime_=function(sn){var ln=this.timeline_.getSeekRangeStart();return sn<ln?ln:(ln=this.timeline_.getSeekRangeEnd(),sn>ln?ln:sn)},shaka.media.MediaSourcePlayhead.prototype.createStallDetector_=function(sn,ln,cn){if(!ln.stallEnabled)return null;var dn=ln.stallThreshold,pn=ln.stallSkip;return ln=new shaka.media.StallDetector(new shaka.media.StallDetector.MediaElementImplementation(sn),dn,cn),ln.onStall(function(vn,kn){shaka.log.debug("Stall detected at "+vn+" for "+kn+" seconds."),pn?(shaka.log.debug("Seeking forward "+pn+" seconds to break stall."),sn.currentTime+=pn):(shaka.log.debug("Pausing and unpausing to break stall."),sn.pause(),sn.play())}),ln},shaka.media.SegmentIndex=function(sn){goog.DEBUG&&shaka.media.SegmentIndex.assertCorrectReferences_(sn),this.references=sn,this.timer_=null,this.numEvicted=0,this.immutable_=!1},shaka.media.SegmentIndex.prototype.release=function(){this.immutable_||(this.references=[],this.timer_&&this.timer_.stop(),this.timer_=null)},shaka.media.SegmentIndex.prototype.markImmutable=function(){this.immutable_=!0},shaka.media.SegmentIndex.prototype.forEachTopLevelReference=function(sn){for(var ln=$jscomp.makeIterator(this.references),cn=ln.next();!cn.done;cn=ln.next())sn(cn.value)},shaka.media.SegmentIndex.prototype.earliestReference=function(){return this.references[0]||null},shaka.media.SegmentIndex.prototype.dropFirstReferences=function(sn){this.references.splice(0,sn)},shaka.media.SegmentIndex.prototype.find=function(sn){for(var ln=this.references.length-1,cn=ln;0<=cn;--cn){var dn=this.references[cn],pn=cn<ln?this.references[cn+1].startTime:dn.endTime;if(sn>=dn.startTime&&sn<pn)return cn+this.numEvicted}return this.references.length&&sn<this.references[0].startTime?this.numEvicted:null},shaka.media.SegmentIndex.prototype.get=function(sn){return this.references.length==0?null:(sn-=this.numEvicted,0>sn||sn>=this.references.length?null:this.references[sn])},shaka.media.SegmentIndex.prototype.offset=function(sn){if(!this.immutable_)for(var ln=$jscomp.makeIterator(this.references),cn=ln.next();!cn.done;cn=ln.next())cn.value.offset(sn)},shaka.media.SegmentIndex.prototype.merge=function(sn){if(goog.DEBUG&&shaka.media.SegmentIndex.assertCorrectReferences_(sn),!this.immutable_&&sn.length){var ln=Math.round(1e3*sn[0].startTime)/1e3;this.references=this.references.filter(function(cn){return Math.round(1e3*cn.startTime)/1e3<ln}),this.references.push.apply(this.references,$jscomp.arrayFromIterable(sn)),goog.DEBUG&&shaka.media.SegmentIndex.assertCorrectReferences_(this.references)}},shaka.media.SegmentIndex.prototype.mergeAndEvict=function(sn,ln){var cn=this;sn=sn.filter(function(pn){return pn.endTime>ln&&(cn.references.length==0||pn.endTime>cn.references[0].startTime)});var dn=this.references[0];this.merge(sn),sn=this.references[0],dn&&goog.asserts.assert(dn.startTime==sn.startTime,"SegmentIndex.merge should not change the first reference time!"),this.evict(ln)},shaka.media.SegmentIndex.prototype.evict=function(sn){if(!this.immutable_){var ln=this.references.length;this.references=this.references.filter(function(cn){return cn.endTime>sn}),this.numEvicted+=ln-this.references.length}},shaka.media.SegmentIndex.prototype.fit=function(sn,ln,cn){if(cn=cn===void 0?!1:cn,goog.asserts.assert(ln!=null,"Content duration must be known for static content!"),goog.asserts.assert(ln!=1/0,"Content duration must be finite for static content!"),!this.immutable_){for(;this.references.length&&this.references[this.references.length-1].startTime>=ln;)this.references.pop();for(;this.references.length&&this.references[0].endTime<=sn;)this.references.shift(),cn||this.numEvicted++;this.references.length!=0&&(sn=this.references[this.references.length-1],this.references[this.references.length-1]=new shaka.media.SegmentReference(sn.startTime,ln,sn.getUrisInner,sn.startByte,sn.endByte,sn.initSegmentReference,sn.timestampOffset,sn.appendWindowStart,sn.appendWindowEnd,sn.partialReferences,sn.tilesLayout,sn.tileDuration,sn.syncTime,sn.status,sn.hlsAes128Key),this.references[this.references.length-1].discontinuitySequence=sn.discontinuitySequence)}},shaka.media.SegmentIndex.prototype.updateEvery=function(sn,ln){var cn=this;goog.asserts.assert(!this.timer_,"SegmentIndex timer already started!"),this.immutable_||(this.timer_&&this.timer_.stop(),this.timer_=new shaka.util.Timer(function(){var dn=ln();dn?cn.references.push.apply(cn.references,$jscomp.arrayFromIterable(dn)):(cn.timer_.stop(),cn.timer_=null)}),this.timer_.tickEvery(sn))},shaka.media.SegmentIndex.prototype[Symbol.iterator]=function(){var sn=this.getIteratorForTime(0);return goog.asserts.assert(sn!=null,"Iterator for 0 should never be null!"),sn},shaka.media.SegmentIndex.prototype.getIteratorForTime=function(sn){var ln=this.find(sn);if(ln==null)return null;ln--;var cn=this.get(ln+1),dn=-1;if(cn&&cn.hasPartialSegments())for(var pn=cn.partialReferences.length-1;0<=pn;--pn){var vn=cn.partialReferences[pn];if(sn>=vn.startTime&&sn<vn.endTime){ln++,dn=pn-1;break}}return new shaka.media.SegmentIterator(this,ln,dn)},shaka.media.SegmentIndex.prototype.isEmpty=function(){return this.references.length==0},shaka.media.SegmentIndex.forSingleSegment=function(sn,ln,cn){return sn=new shaka.media.SegmentReference(sn,sn+ln,function(){return cn},0,null,null,sn,sn,sn+ln),new shaka.media.SegmentIndex([sn])},goog.exportSymbol("shaka.media.SegmentIndex",shaka.media.SegmentIndex),goog.exportProperty(shaka.media.SegmentIndex,"forSingleSegment",shaka.media.SegmentIndex.forSingleSegment),goog.exportProperty(shaka.media.SegmentIndex.prototype,"getIteratorForTime",shaka.media.SegmentIndex.prototype.getIteratorForTime),goog.exportProperty(shaka.media.SegmentIndex.prototype,"updateEvery",shaka.media.SegmentIndex.prototype.updateEvery),goog.exportProperty(shaka.media.SegmentIndex.prototype,"fit",shaka.media.SegmentIndex.prototype.fit),goog.exportProperty(shaka.media.SegmentIndex.prototype,"evict",shaka.media.SegmentIndex.prototype.evict),goog.exportProperty(shaka.media.SegmentIndex.prototype,"mergeAndEvict",shaka.media.SegmentIndex.prototype.mergeAndEvict),goog.exportProperty(shaka.media.SegmentIndex.prototype,"offset",shaka.media.SegmentIndex.prototype.offset),goog.exportProperty(shaka.media.SegmentIndex.prototype,"get",shaka.media.SegmentIndex.prototype.get),goog.exportProperty(shaka.media.SegmentIndex.prototype,"find",shaka.media.SegmentIndex.prototype.find),goog.exportProperty(shaka.media.SegmentIndex.prototype,"markImmutable",shaka.media.SegmentIndex.prototype.markImmutable),goog.exportProperty(shaka.media.SegmentIndex.prototype,"release",shaka.media.SegmentIndex.prototype.release),goog.DEBUG&&(shaka.media.SegmentIndex.assertCorrectReferences_=function(sn){goog.asserts.assert(sn.every(function(ln,cn){return cn==0?!0:(cn=sn[cn-1],cn.startTime<ln.startTime?!0:cn.startTime>ln.startTime?!1:cn.endTime<=ln.endTime)}),"SegmentReferences are incorrect")}),shaka.media.SegmentIterator=function(sn,ln,cn){this.segmentIndex_=sn,this.currentPosition_=ln,this.currentPartialPosition_=cn},shaka.media.SegmentIterator.prototype.currentPosition=function(){return this.currentPosition_},shaka.media.SegmentIterator.prototype.current=function(){var sn=this.segmentIndex_.get(this.currentPosition_);return sn&&sn.hasPartialSegments()&&sn.getUris().length&&this.currentPartialPosition_>=sn.partialReferences.length&&(this.currentPosition_++,this.currentPartialPosition_=0,sn=this.segmentIndex_.get(this.currentPosition_)),sn&&sn.hasPartialSegments()?sn.partialReferences[this.currentPartialPosition_]:sn},shaka.media.SegmentIterator.prototype.next=function(){var sn=this.segmentIndex_.get(this.currentPosition_);return sn&&sn.hasPartialSegments()?(this.currentPartialPosition_++,sn.getUris().length&&this.currentPartialPosition_==sn.partialReferences.length&&(this.currentPosition_++,this.currentPartialPosition_=0)):(this.currentPosition_++,this.currentPartialPosition_=0),sn=this.current(),{value:sn,done:!sn}},goog.exportSymbol("shaka.media.SegmentIterator",shaka.media.SegmentIterator),goog.exportProperty(shaka.media.SegmentIterator.prototype,"next",shaka.media.SegmentIterator.prototype.next),goog.exportProperty(shaka.media.SegmentIterator.prototype,"current",shaka.media.SegmentIterator.prototype.current),goog.exportProperty(shaka.media.SegmentIterator.prototype,"currentPosition",shaka.media.SegmentIterator.prototype.currentPosition),shaka.media.MetaSegmentIndex=function(){shaka.media.SegmentIndex.call(this,[]),this.indexes_=[]},$jscomp.inherits(shaka.media.MetaSegmentIndex,shaka.media.SegmentIndex),shaka.media.MetaSegmentIndex.prototype.appendSegmentIndex=function(sn){goog.asserts.assert(this.indexes_.length==0||sn.numEvicted==0,"Should not append a new segment index with already-evicted segments"),this.indexes_.push(sn)},shaka.media.MetaSegmentIndex.prototype.clone=function(){var sn=new shaka.media.MetaSegmentIndex;return sn.indexes_=this.indexes_.slice(),sn},shaka.media.MetaSegmentIndex.prototype.release=function(){for(var sn=$jscomp.makeIterator(this.indexes_),ln=sn.next();!ln.done;ln=sn.next())ln.value.release();this.indexes_=[]},shaka.media.MetaSegmentIndex.prototype.find=function(sn){for(var ln=0,cn=$jscomp.makeIterator(this.indexes_),dn=cn.next();!dn.done;dn=cn.next()){dn=dn.value;var pn=dn.find(sn);if(pn!=null)return pn+ln;ln+=dn.numEvicted+dn.references.length}return null},shaka.media.MetaSegmentIndex.prototype.get=function(sn){for(var ln=0,cn=!1,dn=$jscomp.makeIterator(this.indexes_),pn=dn.next();!pn.done;pn=dn.next()){pn=pn.value,goog.asserts.assert(!cn||pn.numEvicted==0,"Should not see evicted segments after available segments");var vn=pn.get(sn-ln);if(vn)return vn;ln+=pn.numEvicted+pn.references.length,cn=cn||pn.references.length!=0}return null},shaka.media.MetaSegmentIndex.prototype.offset=function(sn){goog.asserts.assert(!1,"offset() should not be used in MetaSegmentIndex!")},shaka.media.MetaSegmentIndex.prototype.merge=function(sn){goog.asserts.assert(!1,"merge() should not be used in MetaSegmentIndex!")},shaka.media.MetaSegmentIndex.prototype.evict=function(sn){goog.asserts.assert(!1,"evict() should not be used in MetaSegmentIndex!")},shaka.media.MetaSegmentIndex.prototype.mergeAndEvict=function(sn,ln){goog.asserts.assert(!1,"mergeAndEvict() should not be used in MetaSegmentIndex!")},shaka.media.MetaSegmentIndex.prototype.fit=function(sn,ln){goog.asserts.assert(!1,"fit() should not be used in MetaSegmentIndex!")},shaka.media.MetaSegmentIndex.prototype.updateEvery=function(sn,ln){goog.asserts.assert(!1,"updateEvery() should not be used in MetaSegmentIndex!")},goog.exportSymbol("shaka.media.MetaSegmentIndex",shaka.media.MetaSegmentIndex),goog.exportProperty(shaka.media.MetaSegmentIndex.prototype,"updateEvery",shaka.media.MetaSegmentIndex.prototype.updateEvery),goog.exportProperty(shaka.media.MetaSegmentIndex.prototype,"fit",shaka.media.MetaSegmentIndex.prototype.fit),goog.exportProperty(shaka.media.MetaSegmentIndex.prototype,"mergeAndEvict",shaka.media.MetaSegmentIndex.prototype.mergeAndEvict),goog.exportProperty(shaka.media.MetaSegmentIndex.prototype,"evict",shaka.media.MetaSegmentIndex.prototype.evict),goog.exportProperty(shaka.media.MetaSegmentIndex.prototype,"merge",shaka.media.MetaSegmentIndex.prototype.merge),goog.exportProperty(shaka.media.MetaSegmentIndex.prototype,"offset",shaka.media.MetaSegmentIndex.prototype.offset),goog.exportProperty(shaka.media.MetaSegmentIndex.prototype,"get",shaka.media.MetaSegmentIndex.prototype.get),goog.exportProperty(shaka.media.MetaSegmentIndex.prototype,"find",shaka.media.MetaSegmentIndex.prototype.find),goog.exportProperty(shaka.media.MetaSegmentIndex.prototype,"release",shaka.media.MetaSegmentIndex.prototype.release),shaka.media.PlayRateController=function(sn){var ln=this;this.harness_=sn,this.isBuffering_=!1,this.rate_=this.harness_.getRate(),this.pollRate_=.25,this.timer_=new shaka.util.Timer(function(){ln.harness_.movePlayhead(ln.rate_*ln.pollRate_)})},shaka.media.PlayRateController.prototype.release=function(){this.timer_&&(this.timer_.stop(),this.timer_=null),this.harness_=null},shaka.media.PlayRateController.prototype.setBuffering=function(sn){this.isBuffering_=sn,this.apply_()},shaka.media.PlayRateController.prototype.set=function(sn){goog.asserts.assert(sn!=0,"Should never set rate of 0 explicitly!"),this.rate_=sn,this.apply_()},shaka.media.PlayRateController.prototype.getRealRate=function(){return this.rate_},shaka.media.PlayRateController.prototype.getDefaultRate=function(){return this.harness_.getDefaultRate()},shaka.media.PlayRateController.prototype.apply_=function(){this.timer_.stop();var sn=this.calculateCurrentRate_();if(shaka.log.v1("Changing effective playback rate to",sn),0<=sn)try{this.applyRate_(sn);return}catch{}this.timer_.tickEvery(this.pollRate_),this.applyRate_(0)},shaka.media.PlayRateController.prototype.calculateCurrentRate_=function(){return this.isBuffering_?0:this.rate_},shaka.media.PlayRateController.prototype.applyRate_=function(sn){var ln=this.harness_.getRate();return ln!=sn&&this.harness_.setRate(sn),ln!=sn},shaka.media.IPlayheadObserver=function(){},shaka.media.IPlayheadObserver.prototype.poll=function(sn,ln){},shaka.media.PlayheadObserverManager=function(sn){var ln=this;this.mediaElement_=sn,this.observers_=new Set,this.pollingLoop_=new shaka.util.Timer(function(){ln.pollAllObservers_(!1)}).tickEvery(.25)},shaka.media.PlayheadObserverManager.prototype.release=function(){this.pollingLoop_.stop();for(var sn=$jscomp.makeIterator(this.observers_),ln=sn.next();!ln.done;ln=sn.next())ln.value.release();this.observers_.clear()},shaka.media.PlayheadObserverManager.prototype.manage=function(sn){this.observers_.add(sn)},shaka.media.PlayheadObserverManager.prototype.notifyOfSeek=function(){this.pollAllObservers_(!0)},shaka.media.PlayheadObserverManager.prototype.pollAllObservers_=function(sn){for(var ln=$jscomp.makeIterator(this.observers_),cn=ln.next();!cn.done;cn=ln.next())cn.value.poll(this.mediaElement_.currentTime,sn)},shaka.media.QualityObserver=function(sn){shaka.util.FakeEventTarget.call(this),this.contentTypeStates_=new Map,this.getBufferedInfo_=sn},$jscomp.inherits(shaka.media.QualityObserver,shaka.util.FakeEventTarget),shaka.media.QualityObserver.prototype.release=function(){this.contentTypeStates_.clear(),shaka.util.FakeEventTarget.prototype.release.call(this)},shaka.media.QualityObserver.prototype.getContentTypeState_=function(sn){var ln=this.contentTypeStates_.get(sn);return ln||(ln={qualityChangePositions:[],currentQuality:null,contentType:sn},this.contentTypeStates_.set(sn,ln)),ln},shaka.media.QualityObserver.prototype.addMediaQualityChange=function(sn,ln){var cn=this.getContentTypeState_(sn.contentType);this.purgeQualityChangePositions_(cn),sn={mediaQuality:sn,position:ln},cn=cn.qualityChangePositions;var dn=cn.findIndex(function(pn){return pn.position>=ln});0<=dn?cn.splice(dn,cn[dn].position==ln?1:0,sn):cn.push(sn)},shaka.media.QualityObserver.getMediaQualityAtPosition_=function(sn,ln){ln=ln.qualityChangePositions;for(var cn=ln.length-1;0<=cn;cn--){var dn=ln[cn];if(dn.position<=sn)return dn.mediaQuality}return null},shaka.media.QualityObserver.mediaQualitiesAreTheSame_=function(sn,ln){return sn===ln?!0:sn&&ln?sn.bandwidth==ln.bandwidth&&sn.audioSamplingRate==ln.audioSamplingRate&&sn.codecs==ln.codecs&&sn.contentType==ln.contentType&&sn.frameRate==ln.frameRate&&sn.height==ln.height&&sn.mimeType==ln.mimeType&&sn.channelsCount==ln.channelsCount&&sn.pixelAspectRatio==ln.pixelAspectRatio&&sn.width==ln.width:!1},shaka.media.QualityObserver.prototype.poll=function(sn,ln){ln=$jscomp.makeIterator(this.contentTypeStates_.values());for(var cn=ln.next();!cn.done;cn=ln.next()){cn=cn.value;var dn=shaka.media.QualityObserver.getMediaQualityAtPosition_(sn,cn);dn&&!shaka.media.QualityObserver.mediaQualitiesAreTheSame_(cn.currentQuality,dn)&&this.positionIsBuffered_(sn,dn.contentType)&&(cn.currentQuality=dn,shaka.log.debug("Media quality changed at position "+sn+" "+JSON.stringify(dn)),cn=new shaka.util.FakeEvent("qualitychange",new Map([["quality",dn],["position",sn]])),this.dispatchEvent(cn))}},shaka.media.QualityObserver.prototype.positionIsBuffered_=function(sn,ln){if((ln=this.getBufferedInfo_()[ln])&&0<ln.length){var cn=ln[ln.length-1].end;if(sn>=ln[0].start&&sn<cn)return!0}return!1},shaka.media.QualityObserver.prototype.purgeQualityChangePositions_=function(sn){var ln=this.getBufferedInfo_()[sn.contentType];if(ln&&0<ln.length){var cn=ln[0].start,dn=ln[ln.length-1].end,pn=sn.qualityChangePositions;sn.qualityChangePositions=pn.filter(function(vn,kn){return!(vn.position<=cn&&kn+1<pn.length&&pn[kn+1].position<=cn||vn.position>=dn)})}else sn.qualityChangePositions=[]},shaka.media.RegionTimeline=function(sn){shaka.util.FakeEventTarget.call(this);var ln=this;this.regions_=new Set,this.getSeekRange_=sn,this.filterTimer_=new shaka.util.Timer(function(){ln.filterBySeekRange_()}).tickEvery(shaka.media.RegionTimeline.REGION_FILTER_INTERVAL)},$jscomp.inherits(shaka.media.RegionTimeline,shaka.util.FakeEventTarget),shaka.media.RegionTimeline.prototype.release=function(){this.regions_.clear(),this.filterTimer_.stop(),shaka.util.FakeEventTarget.prototype.release.call(this)},shaka.media.RegionTimeline.prototype.addRegion=function(sn){this.findSimilarRegion_(sn)==null&&(this.regions_.add(sn),sn=new shaka.util.FakeEvent("regionadd",new Map([["region",sn]])),this.dispatchEvent(sn))},shaka.media.RegionTimeline.prototype.filterBySeekRange_=function(){for(var sn=this.getSeekRange_(),ln=$jscomp.makeIterator(this.regions_),cn=ln.next();!cn.done;cn=ln.next())cn=cn.value,cn.endTime<sn.start&&(this.regions_.delete(cn),cn=new shaka.util.FakeEvent("regionremove",new Map([["region",cn]])),this.dispatchEvent(cn))},shaka.media.RegionTimeline.prototype.findSimilarRegion_=function(sn){for(var ln=$jscomp.makeIterator(this.regions_),cn=ln.next();!cn.done;cn=ln.next())if(cn=cn.value,cn.schemeIdUri==sn.schemeIdUri&&cn.id==sn.id&&cn.startTime==sn.startTime&&cn.endTime==sn.endTime)return cn;return null},shaka.media.RegionTimeline.prototype.regions=function(){return this.regions_},shaka.media.RegionTimeline.REGION_FILTER_INTERVAL=2,shaka.media.RegionObserver=function(sn){shaka.util.FakeEventTarget.call(this);var ln=this;this.timeline_=sn,this.oldPosition_=new Map;var cn=shaka.media.RegionObserver.RelativePosition_;sn=cn.BEFORE_THE_REGION;var dn=cn.IN_THE_REGION;cn=cn.AFTER_THE_REGION,this.rules_=[{weWere:null,weAre:dn,invoke:function(pn,vn){return ln.onEvent_("enter",pn,vn)}},{weWere:sn,weAre:dn,invoke:function(pn,vn){return ln.onEvent_("enter",pn,vn)}},{weWere:cn,weAre:dn,invoke:function(pn,vn){return ln.onEvent_("enter",pn,vn)}},{weWere:dn,weAre:sn,invoke:function(pn,vn){return ln.onEvent_("exit",pn,vn)}},{weWere:dn,weAre:cn,invoke:function(pn,vn){return ln.onEvent_("exit",pn,vn)}},{weWere:sn,weAre:cn,invoke:function(pn,vn){return ln.onEvent_("skip",pn,vn)}},{weWere:cn,weAre:sn,invoke:function(pn,vn){return ln.onEvent_("skip",pn,vn)}}],this.eventManager_=new shaka.util.EventManager,this.eventManager_.listen(this.timeline_,"regionremove",function(pn){ln.oldPosition_.delete(pn.region)})},$jscomp.inherits(shaka.media.RegionObserver,shaka.util.FakeEventTarget),shaka.media.RegionObserver.prototype.release=function(){this.timeline_=null,this.oldPosition_.clear(),this.eventManager_.release(),this.eventManager_=null,shaka.util.FakeEventTarget.prototype.release.call(this)},shaka.media.RegionObserver.prototype.poll=function(sn,ln){for(var cn=shaka.media.RegionObserver,dn=$jscomp.makeIterator(this.timeline_.regions()),pn=dn.next();!pn.done;pn=dn.next()){pn=pn.value;var vn=this.oldPosition_.get(pn),kn=cn.determinePositionRelativeTo_(pn,sn);this.oldPosition_.set(pn,kn);for(var Sn=$jscomp.makeIterator(this.rules_),wn=Sn.next();!wn.done;wn=Sn.next())wn=wn.value,wn.weWere==vn&&wn.weAre==kn&&wn.invoke(pn,ln)}},shaka.media.RegionObserver.prototype.onEvent_=function(sn,ln,cn){sn=new shaka.util.FakeEvent(sn,new Map([["region",ln],["seeking",cn]])),this.dispatchEvent(sn)},shaka.media.RegionObserver.determinePositionRelativeTo_=function(sn,ln){var cn=shaka.media.RegionObserver.RelativePosition_;return ln<sn.startTime?cn.BEFORE_THE_REGION:ln>sn.endTime?cn.AFTER_THE_REGION:cn.IN_THE_REGION},shaka.media.RegionObserver.RelativePosition_={BEFORE_THE_REGION:1,IN_THE_REGION:2,AFTER_THE_REGION:3},shaka.util.Networking=function(){},shaka.util.Networking.createSegmentRequest=function(sn,ln,cn,dn,pn){return sn=shaka.net.NetworkingEngine.makeRequest(sn,dn,pn),(ln!=0||cn!=null)&&(sn.headers.Range=cn?"bytes="+ln+"-"+cn:"bytes="+ln+"-"),sn},shaka.media.StreamingEngine=function(sn,ln){var cn=this;this.playerInterface_=ln,this.manifest_=sn,this.config_=null,this.bufferingGoalScale_=1,this.currentTextStream_=this.currentVariant_=null,this.textStreamSequenceId_=0,this.parsedPrftEventRaised_=!1,this.mediaStates_=new Map,this.startupComplete_=!1,this.failureCallbackBackoff_=null,this.fatalError_=!1,this.destroyer_=new shaka.util.Destroyer(function(){return cn.doDestroy_()})},shaka.media.StreamingEngine.prototype.destroy=function(){return this.destroyer_.destroy()},shaka.media.StreamingEngine.prototype.doDestroy_=function(){var sn=this,ln,cn,dn,pn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(vn){if(vn.nextAddress==1){for(ln=[],cn=$jscomp.makeIterator(sn.mediaStates_.values()),dn=cn.next();!dn.done;dn=cn.next())pn=dn.value,sn.cancelUpdate_(pn),ln.push(sn.abortOperations_(pn));return vn.yield(Promise.all(ln),2)}sn.mediaStates_.clear(),sn.playerInterface_=null,sn.manifest_=null,sn.config_=null,vn.jumpToEnd()})},shaka.media.StreamingEngine.prototype.configure=function(sn){this.config_=sn,this.failureCallbackBackoff_=new shaka.net.Backoff({maxAttempts:Math.max(sn.retryParameters.maxAttempts,2),baseDelay:sn.retryParameters.baseDelay,backoffFactor:sn.retryParameters.backoffFactor,fuzzFactor:sn.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0)},shaka.media.StreamingEngine.prototype.start=function(){var sn=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ln){if(ln.nextAddress==1)return goog.asserts.assert(sn.config_,"StreamingEngine configure() must be called before init()!"),ln.yield(sn.initStreams_(),2);sn.destroyer_.ensureNotDestroyed(),shaka.log.debug("init: completed initial Stream setup"),sn.startupComplete_=!0,ln.jumpToEnd()})},shaka.media.StreamingEngine.prototype.getCurrentVariant=function(){return this.currentVariant_},shaka.media.StreamingEngine.prototype.getCurrentTextStream=function(){return this.currentTextStream_},shaka.media.StreamingEngine.prototype.loadNewTextStream_=function(sn){var ln=this,cn,dn,pn,vn,kn,Sn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wn){switch(wn.nextAddress){case 1:return cn=shaka.util.ManifestParserUtils.ContentType,goog.asserts.assert(!ln.mediaStates_.has(cn.TEXT),"Should not call loadNewTextStream_ while streaming text!"),ln.textStreamSequenceId_++,dn=ln.textStreamSequenceId_,wn.setCatchFinallyBlocks(2),wn.yield(ln.playerInterface_.mediaSourceEngine.clear(cn.TEXT),4);case 4:wn.leaveTryBlock(3);break;case 2:pn=wn.enterCatchBlock(),ln.playerInterface_&&ln.playerInterface_.onError(pn);case 3:vn=shaka.util.MimeUtils.getFullType(sn.mimeType,sn.codecs),ln.playerInterface_.mediaSourceEngine.reinitText(vn,ln.manifest_.sequenceMode),kn=ln.playerInterface_.mediaSourceEngine.getTextDisplayer(),(kn.isTextVisible()||ln.config_.alwaysStreamText)&&ln.textStreamSequenceId_==dn&&(Sn=ln.createMediaState_(sn),ln.mediaStates_.set(cn.TEXT,Sn),ln.scheduleUpdate_(Sn,0)),wn.jumpToEnd()}})},shaka.media.StreamingEngine.prototype.unloadTextStream=function(){var sn=shaka.util.ManifestParserUtils.ContentType,ln=this.mediaStates_.get(sn.TEXT);ln&&(this.cancelUpdate_(ln),this.abortOperations_(ln).catch(function(){}),this.mediaStates_.delete(sn.TEXT)),this.currentTextStream_=null},shaka.media.StreamingEngine.prototype.setTrickPlay=function(sn){var ln=this.mediaStates_.get(shaka.util.ManifestParserUtils.ContentType.VIDEO);if(ln){var cn=ln.stream;cn&&(shaka.log.debug("setTrickPlay",sn),sn?(sn=cn.trickModeVideo)&&!ln.restoreStreamAfterTrickPlay&&(shaka.log.debug("Engaging trick mode stream",sn),this.switchInternal_(sn,!1,0,!1),ln.restoreStreamAfterTrickPlay=cn):(cn=ln.restoreStreamAfterTrickPlay)&&(shaka.log.debug("Restoring non-trick-mode stream",cn),ln.restoreStreamAfterTrickPlay=null,this.switchInternal_(cn,!0,0,!1)))}},shaka.media.StreamingEngine.prototype.switchVariant=function(sn,ln,cn,dn,pn){ln=ln===void 0?!1:ln,cn=cn===void 0?0:cn,dn=dn===void 0?!1:dn,pn=pn===void 0?!1:pn,this.currentVariant_=sn,this.startupComplete_&&(sn.video&&this.switchInternal_(sn.video,ln,cn,dn,pn),sn.audio&&this.switchInternal_(sn.audio,ln,cn,dn,pn))},shaka.media.StreamingEngine.prototype.switchTextStream=function(sn){var ln=this,cn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(dn){if(dn.nextAddress==1)return ln.currentTextStream_=sn,ln.startupComplete_?(cn=shaka.util.ManifestParserUtils.ContentType,goog.asserts.assert(sn&&sn.type==cn.TEXT,"Wrong stream type passed to switchTextStream!"),sn.segmentIndex?dn.jumpTo(2):dn.yield(sn.createSegmentIndex(),2)):dn.return();ln.switchInternal_(sn,!0,0,!1),dn.jumpToEnd()})},shaka.media.StreamingEngine.prototype.reloadTextStream=function(){var sn=this.mediaStates_.get(shaka.util.ManifestParserUtils.ContentType.TEXT);sn&&this.switchInternal_(sn.stream,!0,0,!0)},shaka.media.StreamingEngine.prototype.switchInternal_=function(sn,ln,cn,dn,pn){var vn=this,kn=shaka.util.ManifestParserUtils.ContentType,Sn=this.mediaStates_.get(sn.type);Sn||sn.type!=kn.TEXT?(goog.asserts.assert(Sn,"switch: expected mediaState to exist"),Sn&&(Sn.restoreStreamAfterTrickPlay&&(shaka.log.debug("switch during trick play mode",sn),sn.trickModeVideo?(Sn.restoreStreamAfterTrickPlay=sn,sn=sn.trickModeVideo,shaka.log.debug("switch found trick play stream",sn)):(Sn.restoreStreamAfterTrickPlay=null,shaka.log.debug("switch found no special trick play stream"))),Sn.stream!=sn||dn?(sn.type==kn.TEXT&&(dn=shaka.util.MimeUtils.getFullType(sn.mimeType,sn.codecs),this.playerInterface_.mediaSourceEngine.reinitText(dn,this.manifest_.sequenceMode)),Sn.stream.closeSegmentIndex&&Sn.stream.closeSegmentIndex(),Sn.stream=sn,Sn.segmentIterator=null,Sn.adaptation=!!pn,sn=shaka.media.StreamingEngine.logPrefix_(Sn),shaka.log.debug("switch: switching to Stream "+sn),ln&&(Sn.clearingBuffer?Sn.waitingToFlushBuffer=!0:Sn.performingUpdate?(Sn.waitingToClearBuffer=!0,Sn.clearBufferSafeMargin=cn,Sn.waitingToFlushBuffer=!0):(this.cancelUpdate_(Sn),this.clearBuffer_(Sn,!0,cn).catch(function(wn){vn.playerInterface_&&(goog.asserts.assert(wn instanceof shaka.util.Error,"Wrong error type!"),vn.playerInterface_.onError(wn))}))),this.makeAbortDecision_(Sn).catch(function(wn){vn.playerInterface_&&(goog.asserts.assert(wn instanceof shaka.util.Error,"Wrong error type!"),vn.playerInterface_.onError(wn))})):(ln=shaka.media.StreamingEngine.logPrefix_(Sn),shaka.log.debug("switch: Stream "+ln+" already active")))):this.loadNewTextStream_(sn)},shaka.media.StreamingEngine.prototype.makeAbortDecision_=function(sn){var ln=this,cn,dn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pn){if(pn.nextAddress==1)return sn.operation?(cn=sn.stream,dn=sn.operation,cn.segmentIndex?pn.jumpTo(2):pn.yield(cn.createSegmentIndex(),2)):pn.return();if(sn.operation!=dn||sn.stream!=cn)return pn.return();goog.asserts.assert(sn.stream.segmentIndex,"Segment index should exist by now!"),ln.shouldAbortCurrentRequest_(sn)&&(shaka.log.info("Aborting current segment request."),sn.operation.abort()),pn.jumpToEnd()})},shaka.media.StreamingEngine.prototype.shouldAbortCurrentRequest_=function(sn){goog.asserts.assert(sn.operation,"Abort logic requires an ongoing operation!"),goog.asserts.assert(sn.stream&&sn.stream.segmentIndex,"Abort logic requires a segment index");var ln=this.playerInterface_.getPresentationTime(),cn=this.playerInterface_.mediaSourceEngine.bufferEnd(sn.type),dn=this.getTimeNeeded_(sn,ln);dn=sn.stream.segmentIndex.find(dn);var pn=dn==null?null:sn.stream.segmentIndex.get(dn);return dn=pn?pn.getSize():null,pn&&!dn&&(dn=(pn.getEndTime()-pn.getStartTime())*(sn.stream.bandwidth||0)/8),dn?((pn=pn.initSegmentReference)&&(dn+=pn.getSize()||0),pn=this.playerInterface_.getBandwidthEstimate(),8*dn/pn<(cn||0)-ln-Math.max(this.manifest_.minBufferTime||0,this.config_.rebufferingGoal)||sn.operation.getBytesRemaining()>dn):!1},shaka.media.StreamingEngine.prototype.seeked=function(){if(this.playerInterface_){for(var sn=this.playerInterface_.getPresentationTime(),ln=shaka.util.ManifestParserUtils.ContentType,cn=!1,dn=$jscomp.makeIterator(this.mediaStates_.keys()),pn=dn.next();!pn.done;pn=dn.next()){pn=pn.value;var vn=this.mediaStates_.get(pn),kn=shaka.media.StreamingEngine.logPrefix_(vn);vn.segmentIterator=null,this.playerInterface_.mediaSourceEngine.isBuffered(pn,sn)||((this.playerInterface_.mediaSourceEngine.bufferEnd(pn)!=null||vn.performingUpdate)&&(this.forceClearBuffer_(vn),cn=!0),vn.operation&&(vn.operation.abort(),shaka.log.debug(kn,"Aborting operation due to seek"),vn.operation=null),pn===ln.TEXT&&this.playerInterface_.mediaSourceEngine.resetCaptionParser(),vn.seeked=!0)}cn||shaka.log.debug("(all): seeked: buffered seek: presentationTime="+sn)}},shaka.media.StreamingEngine.prototype.forceClearBuffer_=function(sn){var ln=this,cn=shaka.media.StreamingEngine.logPrefix_(sn);sn.clearingBuffer?shaka.log.debug(cn,"clear: already clearing the buffer"):sn.waitingToClearBuffer?shaka.log.debug(cn,"clear: already waiting"):sn.performingUpdate?(shaka.log.debug(cn,"clear: currently updating"),sn.waitingToClearBuffer=!0,sn.clearBufferSafeMargin=0):this.playerInterface_.mediaSourceEngine.bufferStart(sn.type)==null?(shaka.log.debug(cn,"clear: nothing buffered"),sn.updateTimer==null&&this.scheduleUpdate_(sn,0)):(shaka.log.debug(cn,"clear: handling right now"),this.cancelUpdate_(sn),this.clearBuffer_(sn,!1,0).catch(function(dn){ln.playerInterface_&&(goog.asserts.assert(dn instanceof shaka.util.Error,"Wrong error type!"),ln.playerInterface_.onError(dn))}))},shaka.media.StreamingEngine.prototype.initStreams_=function(){var sn=this,ln,cn,dn,pn,vn,kn,Sn,wn,Pn,Nn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ln){if(Ln.nextAddress==1){if(ln=shaka.util.ManifestParserUtils.ContentType,goog.asserts.assert(sn.config_,"StreamingEngine configure() must be called before init()!"),!sn.currentVariant_)throw shaka.log.error("init: no Streams chosen"),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STREAMING,shaka.util.Error.Code.STREAMING_ENGINE_STARTUP_INVALID_STATE);return cn=new Map,dn=new Set,sn.currentVariant_.audio&&(cn.set(ln.AUDIO,sn.currentVariant_.audio),dn.add(sn.currentVariant_.audio)),sn.currentVariant_.video&&(cn.set(ln.VIDEO,sn.currentVariant_.video),dn.add(sn.currentVariant_.video)),sn.currentTextStream_&&(cn.set(ln.TEXT,sn.currentTextStream_),dn.add(sn.currentTextStream_)),pn=sn.playerInterface_.mediaSourceEngine,vn=sn.config_.forceTransmux,Ln.yield(pn.init(cn,vn,sn.manifest_.sequenceMode),2)}for(sn.destroyer_.ensureNotDestroyed(),sn.updateDuration(),kn=$jscomp.makeIterator(cn.keys()),Sn=kn.next();!Sn.done;Sn=kn.next())wn=Sn.value,Pn=cn.get(wn),sn.mediaStates_.has(wn)||(Nn=sn.createMediaState_(Pn),sn.mediaStates_.set(wn,Nn),sn.scheduleUpdate_(Nn,0));Ln.jumpToEnd()})},shaka.media.StreamingEngine.prototype.createMediaState_=function(sn){return{stream:sn,type:sn.type,segmentIterator:null,lastSegmentReference:null,lastInitSegmentReference:null,lastTimestampOffset:null,lastAppendWindowStart:null,lastAppendWindowEnd:null,restoreStreamAfterTrickPlay:null,endOfStream:!1,performingUpdate:!1,updateTimer:null,waitingToClearBuffer:!1,clearBufferSafeMargin:0,waitingToFlushBuffer:!1,clearingBuffer:!1,seeked:!0,needsResync:!1,recovering:!1,hasError:!1,operation:null}},shaka.media.StreamingEngine.prototype.updateDuration=function(){var sn=this.manifest_.presentationTimeline.getDuration();1/0>sn?this.playerInterface_.mediaSourceEngine.setDuration(sn):this.playerInterface_.mediaSourceEngine.setDuration(Math.pow(2,32))},shaka.media.StreamingEngine.prototype.onUpdate_=function(sn){var ln=this,cn,dn,pn,vn,kn,Sn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wn){switch(wn.nextAddress){case 1:if(ln.destroyer_.ensureNotDestroyed(),cn=shaka.media.StreamingEngine.logPrefix_(sn),goog.asserts.assert(!sn.performingUpdate&&sn.updateTimer!=null,cn+" unexpected call to onUpdate_()"),sn.performingUpdate||sn.updateTimer==null||(goog.asserts.assert(!sn.clearingBuffer,cn+" onUpdate_() should not be called when clearing the buffer"),sn.clearingBuffer))return wn.return();if(sn.updateTimer=null,!sn.waitingToClearBuffer){wn.jumpTo(2);break}return shaka.log.debug(cn,"skipping update and clearing the buffer"),wn.yield(ln.clearBuffer_(sn,sn.waitingToFlushBuffer,sn.clearBufferSafeMargin),3);case 3:return wn.return();case 2:if(sn.stream.segmentIndex){wn.jumpTo(4);break}return dn=sn.stream,wn.yield(sn.stream.createSegmentIndex(),5);case 5:if(dn!=sn.stream)return dn.closeSegmentIndex&&(goog.asserts.assert(!sn.stream.segmentIndex,"mediastate.stream should not have segmentIndex yet."),dn.closeSegmentIndex()),sn.performingUpdate||sn.updateTimer||ln.scheduleUpdate_(sn,0),wn.return();case 4:wn.setCatchFinallyBlocks(6),pn=ln.update_(sn),pn!=null&&(ln.scheduleUpdate_(sn,pn),sn.hasError=!1),wn.leaveTryBlock(7);break;case 6:return vn=wn.enterCatchBlock(),wn.yield(ln.handleStreamingError_(vn),8);case 8:return wn.return();case 7:if(kn=Array.from(ln.mediaStates_.values()),!ln.startupComplete_||!kn.every(function(Pn){return Pn.endOfStream})){wn.jumpTo(0);break}return shaka.log.v1(cn,"calling endOfStream()..."),wn.yield(ln.playerInterface_.mediaSourceEngine.endOfStream(),10);case 10:ln.destroyer_.ensureNotDestroyed(),Sn=ln.playerInterface_.mediaSourceEngine.getDuration(),Sn!=0&&Sn<ln.manifest_.presentationTimeline.getDuration()&&ln.manifest_.presentationTimeline.setDuration(Sn),wn.jumpToEnd()}})},shaka.media.StreamingEngine.prototype.update_=function(sn){goog.asserts.assert(this.manifest_,"manifest_ should not be null"),goog.asserts.assert(this.config_,"config_ should not be null");var ln=shaka.util.ManifestParserUtils.ContentType;if(shaka.media.StreamingEngine.isEmbeddedText_(sn))return this.playerInterface_.mediaSourceEngine.setSelectedClosedCaptionId(sn.stream.originalId||""),null;sn.type==ln.TEXT&&this.playerInterface_.mediaSourceEngine.clearSelectedClosedCaptionId();var cn=shaka.media.StreamingEngine.logPrefix_(sn),dn=this.playerInterface_.getPresentationTime(),pn=this.getTimeNeeded_(sn,dn);shaka.log.v2(cn,"timeNeeded="+pn);var vn=this.playerInterface_.mediaSourceEngine.bufferedAheadOf(sn.type,dn);shaka.log.v2(cn,"update_:","presentationTime="+dn,"bufferedAhead="+vn);var kn=Math.max(this.manifest_.minBufferTime||0,this.config_.rebufferingGoal,this.config_.bufferingGoal)*this.bufferingGoalScale_,Sn=this.manifest_.presentationTimeline.getDuration()-pn,wn=this.playerInterface_.mediaSourceEngine.bufferEnd(sn.type);if(1e-6>Sn&&wn)return shaka.log.debug(cn,"buffered to end of presentation"),sn.endOfStream=!0,sn.type==ln.VIDEO&&(sn=this.mediaStates_.get(ln.TEXT))&&shaka.media.StreamingEngine.isEmbeddedText_(sn)&&(sn.endOfStream=!0),null;if(sn.endOfStream=!1,vn>=kn)return shaka.log.v2(cn,"buffering goal met"),this.config_.updateIntervalSeconds/2;if(ln=this.getSegmentReferenceNeeded_(sn,dn,wn),!ln)return this.config_.updateIntervalSeconds;for(vn=1/0,kn=Array.from(this.mediaStates_.values()),kn=$jscomp.makeIterator(kn),Sn=kn.next();!Sn.done;Sn=kn.next())Sn=Sn.value,shaka.media.StreamingEngine.isEmbeddedText_(Sn)||Sn.segmentIterator&&!Sn.segmentIterator.current()||(Sn=this.getTimeNeeded_(Sn,dn),vn=Math.min(vn,Sn));return kn=this.manifest_.presentationTimeline.getMaxSegmentDuration()*shaka.media.StreamingEngine.MAX_RUN_AHEAD_SEGMENTS_,pn>=vn+kn?(shaka.log.v2(cn,"waiting for other streams to buffer"),this.config_.updateIntervalSeconds):(this.fetchAndAppend_(sn,dn,ln).catch(function(){}),null)},shaka.media.StreamingEngine.prototype.getTimeNeeded_=function(sn,ln){return sn.lastSegmentReference?sn.lastSegmentReference.endTime:ln},shaka.media.StreamingEngine.prototype.getSegmentReferenceNeeded_=function(sn,ln,cn){var dn=shaka.media.StreamingEngine.logPrefix_(sn);if(goog.asserts.assert(sn.stream.segmentIndex,"segment index should have been generated already"),sn.segmentIterator)return sn.segmentIterator.current();if(sn.lastSegmentReference||cn)return ln=sn.lastSegmentReference?sn.lastSegmentReference.endTime:cn,goog.asserts.assert(ln!=null,"Should have a time to search"),shaka.log.v1(dn,"looking up segment from new stream endTime:",ln),sn.needsResync=!0,sn.segmentIterator=sn.stream.segmentIndex.getIteratorForTime(ln),sn=sn.segmentIterator&&sn.segmentIterator.next().value,sn==null&&shaka.log.warning(dn,"cannot find segment","endTime:",ln),sn;cn=this.config_.inaccurateManifestTolerance;var pn=Math.max(ln-cn,0);shaka.log.v1(dn,"looking up segment","lookupTime:",pn,"presentationTime:",ln);var vn=null;return cn&&(sn.segmentIterator=sn.stream.segmentIndex.getIteratorForTime(pn),vn=sn.segmentIterator&&sn.segmentIterator.next().value),vn||(sn.segmentIterator=sn.stream.segmentIndex.getIteratorForTime(ln),vn=sn.segmentIterator&&sn.segmentIterator.next().value),vn==null&&shaka.log.warning(dn,"cannot find segment","lookupTime:",pn,"presentationTime:",ln),vn},shaka.media.StreamingEngine.prototype.fetchAndAppend_=function(sn,ln,cn){var dn=this,pn,vn,kn,Sn,wn,Pn,Nn,Ln,Fn,zn,Dn,Kn,qn,Zn,Yn,Jn,rs,ss;return $jscomp.asyncExecutePromiseGeneratorProgram(function(as){switch(as.nextAddress){case 1:if(pn=shaka.util.ManifestParserUtils.ContentType,vn=shaka.media.StreamingEngine,kn=vn.logPrefix_(sn),shaka.log.v1(kn,"fetchAndAppend_:","presentationTime="+ln,"reference.startTime="+cn.startTime,"reference.endTime="+cn.endTime),Sn=sn.stream,wn=sn.segmentIterator,sn.performingUpdate=!0,as.setCatchFinallyBlocks(2),cn.getStatus()==shaka.media.SegmentReference.Status.MISSING)throw new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.SEGMENT_MISSING);return as.yield(dn.initSourceBuffer_(sn,cn),4);case 4:return dn.destroyer_.ensureNotDestroyed(),dn.fatalError_?as.return():(shaka.log.v2(kn,"fetching segment"),Pn=Sn.mimeType=="video/mp4"||Sn.mimeType=="audio/mp4",Nn=window.ReadableStream,dn.config_.lowLatencyMode&&Nn&&Pn&&!cn.hlsAes128Key?(zn=new Uint8Array(0),Kn=Dn=!1,qn=function(ds){var Es,Ss,Qn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ms){return Dn||(Kn=!0,dn.destroyer_.ensureNotDestroyed(),dn.fatalError_)?ms.return():(zn=dn.concatArray_(zn,ds),Es=!1,Ss=0,new shaka.util.Mp4Parser().box("mdat",function(Ts){Ss=Ts.size+Ts.start,Es=!0}).parse(zn,!1,!0),Es?(Qn=zn.subarray(0,Ss),zn=zn.subarray(Ss),ms.yield(dn.append_(sn,ln,Sn,cn,Qn),0)):ms.jumpTo(0))})},as.yield(dn.fetch_(sn,cn,qn),11)):(dn.config_.lowLatencyMode&&!Nn&&shaka.log.warning("Low latency streaming mode is enabled, but ReadableStream is not supported by the browser."),Ln=dn.fetch_(sn,cn),as.yield(Ln,7)));case 7:if(Fn=as.yieldResult,dn.destroyer_.ensureNotDestroyed(),dn.fatalError_)return as.return();if(!cn.hlsAes128Key){as.jumpTo(8);break}return goog.asserts.assert(wn,"mediaState.segmentIterator should exist"),as.yield(dn.aes128Decrypt_(Fn,cn,wn),9);case 9:Fn=as.yieldResult;case 8:return dn.destroyer_.ensureNotDestroyed(),sn.waitingToClearBuffer?(shaka.log.info(kn,"waitingToClearBuffer, skip append"),sn.performingUpdate=!1,dn.scheduleUpdate_(sn,0),as.return()):as.yield(dn.append_(sn,ln,Sn,cn,Fn),6);case 11:if(Zn=as.yieldResult,Kn){as.jumpTo(6);break}return Dn=!0,dn.destroyer_.ensureNotDestroyed(),dn.fatalError_?as.return():sn.waitingToClearBuffer?(shaka.log.info(kn,"waitingToClearBuffer, skip append"),sn.performingUpdate=!1,dn.scheduleUpdate_(sn,0),as.return()):as.yield(dn.append_(sn,ln,Sn,cn,Zn),6);case 6:if(dn.destroyer_.ensureNotDestroyed(),dn.fatalError_)return as.return();sn.lastSegmentReference=cn,Yn=wn.next().value,shaka.log.v2(kn,"advancing to next segment",Yn),sn.performingUpdate=!1,sn.recovering=!1,Jn=dn.playerInterface_.mediaSourceEngine.getBufferedInfo(),rs=Jn[sn.type],shaka.log.v1(kn,"finished fetch and append",JSON.stringify(rs)),sn.waitingToClearBuffer||dn.playerInterface_.onSegmentAppended(cn.startTime,cn.endTime,sn.type),dn.scheduleUpdate_(sn,0),as.leaveTryBlock(0);break;case 2:if(ss=as.enterCatchBlock(),dn.destroyer_.ensureNotDestroyed(ss),dn.fatalError_)return as.return();if(goog.asserts.assert(ss instanceof shaka.util.Error,"Should only receive a Shaka error"),sn.performingUpdate=!1,ss.code==shaka.util.Error.Code.OPERATION_ABORTED)sn.performingUpdate=!1,dn.cancelUpdate_(sn),dn.scheduleUpdate_(sn,0),as.jumpTo(0);else if(sn.type==pn.TEXT&&dn.config_.ignoreTextStreamFailures)ss.code==shaka.util.Error.Code.BAD_HTTP_STATUS?shaka.log.warning(kn,"Text stream failed to download. Proceeding without it."):shaka.log.warning(kn,"Text stream failed to parse. Proceeding without it."),dn.mediaStates_.delete(pn.TEXT),as.jumpTo(0);else if(ss.code==shaka.util.Error.Code.QUOTA_EXCEEDED_ERROR)dn.handleQuotaExceeded_(sn,ss),as.jumpTo(0);else return shaka.log.error(kn,"failed fetch and append: code="+ss.code),sn.hasError=!0,ss.severity=shaka.util.Error.Severity.CRITICAL,as.yield(dn.handleStreamingError_(ss),0)}})},shaka.media.StreamingEngine.prototype.aes128Decrypt_=function(sn,ln,cn){var dn,pn,vn,kn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sn){if(Sn.nextAddress==1)return dn=ln.hlsAes128Key,dn.cryptoKey?Sn.jumpTo(2):(goog.asserts.assert(dn.fetchKey,"If AES-128 cryptoKey was not preloaded, fetchKey function should be provided"),Sn.yield(dn.fetchKey(),3));if(Sn.nextAddress!=2&&goog.asserts.assert(dn.cryptoKey,"AES-128 cryptoKey should now be set"),pn=dn.iv,!pn)for(pn=shaka.util.BufferUtils.toUint8(new ArrayBuffer(16)),vn=dn.firstMediaSequenceNumber+cn.currentPosition(),kn=pn.byteLength-1;0<=kn;kn--)pn[kn]=vn&255,vn>>=8;return Sn.return(window.crypto.subtle.decrypt({name:"AES-CBC",iv:pn},dn.cryptoKey,sn))})},shaka.media.StreamingEngine.prototype.retry=function(sn){if(this.destroyer_.destroyed())return shaka.log.error("Unable to retry after StreamingEngine is destroyed!"),!1;if(this.fatalError_)return shaka.log.error("Unable to retry after StreamingEngine encountered a fatal error!"),!1;for(var ln=$jscomp.makeIterator(this.mediaStates_.values()),cn=ln.next();!cn.done;cn=ln.next()){cn=cn.value;var dn=shaka.media.StreamingEngine.logPrefix_(cn);!cn.hasError||cn.performingUpdate||cn.updateTimer||(shaka.log.info(dn,"Retrying after failure..."),cn.hasError=!1,this.scheduleUpdate_(cn,sn))}return!0},shaka.media.StreamingEngine.prototype.concatArray_=function(sn,ln){var cn=new Uint8Array(sn.length+ln.length);return cn.set(sn),cn.set(ln,sn.length),cn},shaka.media.StreamingEngine.prototype.handleQuotaExceeded_=function(sn,ln){var cn=shaka.media.StreamingEngine.logPrefix_(sn);if(Array.from(this.mediaStates_.values()).some(function(pn){return pn!=sn&&pn.recovering}))shaka.log.debug(cn,"MediaSource threw QuotaExceededError:","waiting for another stream to recover...");else{var dn=Math.round(100*this.bufferingGoalScale_);if(20<dn)this.bufferingGoalScale_-=.2;else if(4<dn)this.bufferingGoalScale_-=.04;else{shaka.log.error(cn,"MediaSource threw QuotaExceededError too many times"),this.fatalError_=sn.hasError=!0,this.playerInterface_.onError(ln);return}shaka.log.warning(cn,"MediaSource threw QuotaExceededError:","reducing buffering goals by "+(100-Math.round(100*this.bufferingGoalScale_))+"%"),sn.recovering=!0}this.scheduleUpdate_(sn,4)},shaka.media.StreamingEngine.prototype.initSourceBuffer_=function(sn,ln){var cn=this,dn,pn,vn,kn,Sn,wn,Pn,Nn,Ln,Fn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(zn){return dn=shaka.media.StreamingEngine,pn=dn.logPrefix_(sn),vn=[],kn=Math.max(0,ln.appendWindowStart-dn.APPEND_WINDOW_START_FUDGE_),Sn=ln.appendWindowEnd+dn.APPEND_WINDOW_END_FUDGE_,goog.asserts.assert(ln.startTime<=Sn,pn+" segment should start before append window end"),wn=ln.timestampOffset,(wn!=sn.lastTimestampOffset||kn!=sn.lastAppendWindowStart||Sn!=sn.lastAppendWindowEnd)&&(shaka.log.v1(pn,"setting timestamp offset to "+wn),shaka.log.v1(pn,"setting append window start to "+kn),shaka.log.v1(pn,"setting append window end to "+Sn),Pn=function(){var Dn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Kn){if(Kn.nextAddress==1)return Kn.setCatchFinallyBlocks(2),sn.lastAppendWindowStart=kn,sn.lastAppendWindowEnd=Sn,sn.lastTimestampOffset=wn,Kn.yield(cn.playerInterface_.mediaSourceEngine.setStreamProperties(sn.type,wn,kn,Sn,cn.manifest_.sequenceMode),4);if(Kn.nextAddress!=2)return Kn.leaveTryBlock(0);throw Dn=Kn.enterCatchBlock(),sn.lastAppendWindowStart=null,sn.lastAppendWindowEnd=null,sn.lastTimestampOffset=null,Dn})},vn.push(Pn())),!shaka.media.InitSegmentReference.equal(ln.initSegmentReference,sn.lastInitSegmentReference)&&(sn.lastInitSegmentReference=ln.initSegmentReference)&&(shaka.log.v1(pn,"fetching init segment"),Nn=cn.fetch_(sn,ln.initSegmentReference),Ln=function(){var Dn,Kn,qn,Zn,Yn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Jn){switch(Jn.nextAddress){case 1:return Jn.setCatchFinallyBlocks(2),Jn.yield(Nn,4);case 4:return Dn=Jn.yieldResult,cn.destroyer_.ensureNotDestroyed(),Kn=new shaka.util.Mp4Parser,qn=shaka.util.Mp4Parser,Kn.box("moov",qn.children).box("trak",qn.children).box("mdia",qn.children).fullBox("mdhd",function(rs){cn.parseMDHD_(ln,rs)}).parse(Dn),shaka.log.v1(pn,"appending init segment"),Zn=sn.stream.closedCaptions&&0<sn.stream.closedCaptions.size,Jn.yield(cn.playerInterface_.beforeAppendSegment(sn.type,Dn),5);case 5:return Jn.yield(cn.playerInterface_.mediaSourceEngine.appendBuffer(sn.type,Dn,null,Zn),6);case 6:Jn.leaveTryBlock(0);break;case 2:throw Yn=Jn.enterCatchBlock(),sn.lastInitSegmentReference=null,Yn}})},cn.playerInterface_.onInitSegmentAppended(ln.startTime,ln.initSegmentReference),vn.push(Ln())),Fn=sn.lastSegmentReference?sn.lastSegmentReference.discontinuitySequence:null,cn.manifest_.sequenceMode?(ln.discontinuitySequence!=Fn||sn.needsResync)&&(sn.needsResync=!1,vn.push(cn.playerInterface_.mediaSourceEngine.resync(sn.type,ln.startTime))):ln.discontinuitySequence!=Fn&&vn.push(cn.playerInterface_.mediaSourceEngine.resync(sn.type,ln.timestampOffset)),zn.yield(Promise.all(vn),0)})},shaka.media.StreamingEngine.prototype.append_=function(sn,ln,cn,dn,pn){var vn=this,kn,Sn,wn,Pn,Nn,Ln,Fn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(zn){switch(zn.nextAddress){case 1:return kn=shaka.media.StreamingEngine.logPrefix_(sn),Sn=cn.closedCaptions&&0<cn.closedCaptions.size,Pn=cn.emsgSchemeIdUris!=null&&0<cn.emsgSchemeIdUris.length||vn.config_.dispatchAllEmsgBoxes,Nn=vn.config_.parsePrftBox&&!vn.parsedPrftEventRaised_,(Pn||Nn)&&(wn=new shaka.util.Mp4Parser),Pn&&wn.fullBox("emsg",function(Dn){return vn.parseEMSG_(dn,cn.emsgSchemeIdUris,Dn)}),Nn&&wn.fullBox("prft",function(Dn){return vn.parsePrft_(dn,Dn)}),(Pn||Nn)&&wn.parse(pn),zn.yield(vn.evict_(sn,ln),2);case 2:return vn.destroyer_.ensureNotDestroyed(),Ln=sn.seeked,sn.seeked=!1,Fn=sn.adaptation,sn.adaptation=!1,zn.yield(vn.playerInterface_.beforeAppendSegment(sn.type,pn),3);case 3:return zn.yield(vn.playerInterface_.mediaSourceEngine.appendBuffer(sn.type,pn,dn,Sn,Ln,Fn),4);case 4:vn.destroyer_.ensureNotDestroyed(),shaka.log.v2(kn,"appended media segment"),zn.jumpToEnd()}})},shaka.media.StreamingEngine.prototype.parseEMSG_=function(sn,ln,cn){if(cn.version===0)var dn=cn.reader.readTerminatedString(),pn=cn.reader.readTerminatedString(),vn=cn.reader.readUint32(),kn=cn.reader.readUint32(),Sn=cn.reader.readUint32(),wn=cn.reader.readUint32(),Pn=sn.startTime+kn/vn;else vn=cn.reader.readUint32(),Pn=cn.reader.readUint64()/vn+sn.timestampOffset,kn=Pn-sn.startTime,Sn=cn.reader.readUint32(),wn=cn.reader.readUint32(),dn=cn.reader.readTerminatedString(),pn=cn.reader.readTerminatedString();cn=cn.reader.readBytes(cn.reader.getLength()-cn.reader.getPosition()),(ln&&ln.includes(dn)||this.config_.dispatchAllEmsgBoxes)&&(dn=="urn:mpeg:dash:event:2012"?this.playerInterface_.onManifestUpdate():dn=="https://aomedia.org/emsg/ID3"?(ln=shaka.util.Id3Utils.getID3Frames(cn),ln.length&&sn&&this.playerInterface_.onMetadata([{cueTime:sn.startTime,data:cn,frames:ln,dts:sn.startTime,pts:sn.startTime}],0,sn.endTime)):(ln={startTime:Pn,endTime:Pn+Sn/vn,schemeIdUri:dn,value:pn,timescale:vn,presentationTimeDelta:kn,eventDuration:Sn,id:wn,messageData:cn},sn=shaka.util.FakeEvent.EventName.Emsg,ln=new Map().set("detail",ln),sn=new shaka.util.FakeEvent(sn,ln),this.playerInterface_.onEvent(sn)))},shaka.media.StreamingEngine.prototype.parseMDHD_=function(sn,ln){ln=shaka.util.Mp4BoxParsers.parseMDHD(ln.reader||0,ln.version||0),sn.initSegmentReference.timescale=ln.timescale},shaka.media.StreamingEngine.prototype.parsePrft_=function(sn,ln){if(!this.parsedPrftEventRaised_&&sn.initSegmentReference.timescale){ln.reader.readUint32();var cn=ln.reader.readUint32(),dn=ln.reader.readUint32();if(cn=1e3*cn+dn/Math.pow(2,32)*1e3,ln.version===0)var pn=ln.reader.readUint32();else try{pn=ln.reader.readUint64()}catch{shaka.log.warning("parsePrft_: parsing mediatime resulted in a MEDIA.JS_INTEGER_OVERFLOW exception"),this.parsedPrftEventRaised_=!0;return}sn=sn.initSegmentReference.timescale,ln=this.convertNtp(cn),sn={wallClockTime:ln,programStartDate:new Date(ln-pn/sn*1e3)},pn=shaka.util.FakeEvent.EventName.Prft,sn=new Map().set("detail",sn),pn=new shaka.util.FakeEvent(pn,sn),this.playerInterface_.onEvent(pn),this.parsedPrftEventRaised_=!0}},shaka.media.StreamingEngine.prototype.convertNtp=function(sn){var ln=new Date(Date.UTC(1900,0,1,0,0,0));return new Date(ln.getTime()+sn).getTime()},shaka.media.StreamingEngine.prototype.evict_=function(sn,ln){var cn=this,dn,pn,vn,kn,Sn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wn){if(wn.nextAddress==1)return dn=shaka.media.StreamingEngine.logPrefix_(sn),shaka.log.v2(dn,"checking buffer length"),pn=Math.max(cn.config_.bufferBehind,cn.manifest_.presentationTimeline.getMaxSegmentDuration()),vn=cn.playerInterface_.mediaSourceEngine.bufferStart(sn.type),vn==null?(shaka.log.v2(dn,"buffer behind okay because nothing buffered:","presentationTime="+ln,"bufferBehind="+pn),wn.return()):(kn=ln-vn,Sn=kn-pn,.01>=Sn?(shaka.log.v2(dn,"buffer behind okay:","presentationTime="+ln,"bufferedBehind="+kn,"bufferBehind="+pn,"underflow="+Math.abs(Sn)),wn.return()):(shaka.log.v1(dn,"buffer behind too large:","presentationTime="+ln,"bufferedBehind="+kn,"bufferBehind="+pn,"overflow="+Sn),wn.yield(cn.playerInterface_.mediaSourceEngine.remove(sn.type,vn,vn+Sn),2)));cn.destroyer_.ensureNotDestroyed(),shaka.log.v1(dn,"evicted "+Sn+" seconds"),wn.jumpToEnd()})},shaka.media.StreamingEngine.isEmbeddedText_=function(sn){var ln=shaka.util.MimeUtils,cn=ln.CEA608_CLOSED_CAPTION_MIMETYPE;return ln=ln.CEA708_CLOSED_CAPTION_MIMETYPE,sn&&sn.type==shaka.util.ManifestParserUtils.ContentType.TEXT&&(sn.stream.mimeType==cn||sn.stream.mimeType==ln)},shaka.media.StreamingEngine.prototype.fetch_=function(sn,ln,cn){var dn=this,pn,vn,kn,Sn,wn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Pn){return Pn.nextAddress==1?(pn=shaka.net.NetworkingEngine.RequestType.SEGMENT,vn=shaka.util.Networking.createSegmentRequest(ln.getUris(),ln.startByte,ln.endByte,dn.config_.retryParameters,cn),shaka.log.v2("fetching: reference=",ln),kn=sn.stream,dn.playerInterface_.modifySegmentRequest(vn,{type:kn.type,init:ln instanceof shaka.media.InitSegmentReference,duration:ln.endTime-ln.startTime,mimeType:kn.mimeType,codecs:kn.codecs,bandwidth:kn.bandwidth}),Sn=dn.playerInterface_.netEngine.request(pn,vn),sn.operation=Sn,Pn.yield(Sn.promise,2)):(wn=Pn.yieldResult,sn.operation=null,Pn.return(wn.data))})},shaka.media.StreamingEngine.prototype.clearBuffer_=function(sn,ln,cn){var dn=this,pn,vn,kn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sn){if(Sn.nextAddress==1)return pn=shaka.media.StreamingEngine.logPrefix_(sn),goog.asserts.assert(!sn.performingUpdate&&sn.updateTimer==null,pn+" unexpected call to clearBuffer_()"),sn.waitingToClearBuffer=!1,sn.waitingToFlushBuffer=!1,sn.clearBufferSafeMargin=0,sn.clearingBuffer=!0,sn.lastSegmentReference=null,sn.lastInitSegmentReference=null,sn.segmentIterator=null,shaka.log.debug(pn,"clearing buffer"),cn?(vn=dn.playerInterface_.getPresentationTime(),kn=dn.playerInterface_.mediaSourceEngine.getDuration(),Sn.yield(dn.playerInterface_.mediaSourceEngine.remove(sn.type,vn+cn,kn),3)):Sn.yield(dn.playerInterface_.mediaSourceEngine.clear(sn.type),4);if(Sn.nextAddress!=3)return dn.destroyer_.ensureNotDestroyed(),ln?Sn.yield(dn.playerInterface_.mediaSourceEngine.flush(sn.type),3):Sn.jumpTo(3);dn.destroyer_.ensureNotDestroyed(),shaka.log.debug(pn,"cleared buffer"),sn.clearingBuffer=!1,sn.endOfStream=!1,sn.performingUpdate||sn.updateTimer||dn.scheduleUpdate_(sn,0),Sn.jumpToEnd()})},shaka.media.StreamingEngine.prototype.scheduleUpdate_=function(sn,ln){var cn=this,dn=shaka.media.StreamingEngine.logPrefix_(sn),pn=sn.type;pn!=shaka.util.ManifestParserUtils.ContentType.TEXT||this.mediaStates_.has(pn)?(shaka.log.v2(dn,"updating in "+ln+" seconds"),goog.asserts.assert(sn.updateTimer==null,dn+" did not expect update to be scheduled"),sn.updateTimer=new shaka.util.DelayedTick(function(){var vn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(kn){if(kn.nextAddress==1)return kn.setCatchFinallyBlocks(2),kn.yield(cn.onUpdate_(sn),4);if(kn.nextAddress!=2)return kn.leaveTryBlock(0);vn=kn.enterCatchBlock(),cn.playerInterface_&&cn.playerInterface_.onError(vn),kn.jumpToEnd()})}).tickAfter(ln)):shaka.log.v1(dn,"Text stream is unloaded. No update is needed.")},shaka.media.StreamingEngine.prototype.cancelUpdate_=function(sn){sn.updateTimer!=null&&(sn.updateTimer.stop(),sn.updateTimer=null)},shaka.media.StreamingEngine.prototype.abortOperations_=function(sn){return $jscomp.asyncExecutePromiseGeneratorProgram(function(ln){return sn.operation?ln.yield(sn.operation.abort(),0):ln.jumpTo(0)})},shaka.media.StreamingEngine.prototype.handleStreamingError_=function(sn){var ln=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cn){if(cn.nextAddress==1)return cn.yield(ln.failureCallbackBackoff_.attempt(),2);ln.destroyer_.ensureNotDestroyed(),ln.playerInterface_.onError(sn),sn.handled||ln.config_.failureCallback(sn),cn.jumpToEnd()})},shaka.media.StreamingEngine.logPrefix_=function(sn){return"("+sn.type+":"+sn.stream.id+")"},shaka.media.StreamingEngine.APPEND_WINDOW_START_FUDGE_=.1,shaka.media.StreamingEngine.APPEND_WINDOW_END_FUDGE_=.01,shaka.media.StreamingEngine.MAX_RUN_AHEAD_SEGMENTS_=1,shaka.routing={},shaka.routing.Node={},shaka.routing.Payload={},shaka.routing.Walker=function(sn,ln,cn){var dn=this;this.implementation_=cn,this.currentlyAt_=sn,this.currentlyWith_=ln,this.waitForWork_=null,this.requests_=[],this.currentStep_=this.currentRoute_=null,this.mainLoopPromise_=Promise.resolve().then(function(){return dn.mainLoop_()}),this.destroyer_=new shaka.util.Destroyer(function(){return dn.doDestroy_()})},shaka.routing.Walker.prototype.getCurrentPayload=function(){return this.currentlyWith_},shaka.routing.Walker.prototype.destroy=function(){return this.destroyer_.destroy()},shaka.routing.Walker.prototype.doDestroy_=function(){var sn=this,ln,cn,dn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pn){if(pn.nextAddress==1)return sn.currentStep_&&sn.currentStep_.abort(),sn.unblockMainLoop_(),pn.yield(sn.mainLoopPromise_,2);for(sn.currentRoute_&&sn.currentRoute_.listeners.onCancel(),ln=$jscomp.makeIterator(sn.requests_),cn=ln.next();!cn.done;cn=ln.next())dn=cn.value,dn.listeners.onCancel();sn.currentRoute_=null,sn.requests_=[],sn.implementation_=null,pn.jumpToEnd()})},shaka.routing.Walker.prototype.startNewRoute=function(sn){var ln={onStart:function(){},onEnd:function(){},onCancel:function(){},onError:function(cn){},onSkip:function(){},onEnter:function(){}};return this.requests_.push({create:sn,listeners:ln}),this.currentStep_&&this.currentStep_.abort(),this.unblockMainLoop_(),ln},shaka.routing.Walker.prototype.mainLoop_=function(){var sn=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ln){return sn.destroyer_.destroyed()?ln.jumpTo(0):ln.yield(sn.doOneThing_(),1)})},shaka.routing.Walker.prototype.doOneThing_=function(){return this.tryNewRoute_()?Promise.resolve():this.currentRoute_?this.takeNextStep_():(goog.asserts.assert(this.waitForWork_==null,"We should not have a promise yet."),this.implementation_.onIdle(this.currentlyAt_),this.waitForWork_=new shaka.util.PublicPromise)},shaka.routing.Walker.prototype.tryNewRoute_=function(){if(goog.asserts.assert(this.currentStep_==null,"We should never have a current step between taking steps."),this.requests_.length==0||this.currentRoute_&&!this.currentRoute_.interruptible)return!1;this.currentRoute_&&(this.currentRoute_.listeners.onCancel(),this.currentRoute_=null);var sn=this.requests_.shift(),ln=sn.create(this.currentlyWith_);return ln?(sn.listeners.onStart(),this.currentRoute_={node:ln.node,payload:ln.payload,interruptible:ln.interruptible,listeners:sn.listeners}):sn.listeners.onSkip(),!0},shaka.routing.Walker.prototype.takeNextStep_=function(){var sn=this,ln,cn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(dn){switch(dn.nextAddress){case 1:return goog.asserts.assert(sn.currentRoute_,"We need a current route to take the next step."),sn.currentlyAt_=sn.implementation_.getNext(sn.currentlyAt_,sn.currentlyWith_,sn.currentRoute_.node,sn.currentRoute_.payload),sn.currentRoute_.listeners.onEnter(sn.currentlyAt_),dn.setCatchFinallyBlocks(2),sn.currentStep_=sn.implementation_.enterNode(sn.currentlyAt_,sn.currentlyWith_,sn.currentRoute_.payload),dn.yield(sn.currentStep_.promise,4);case 4:sn.currentStep_=null,sn.currentlyAt_==sn.currentRoute_.node&&(sn.currentRoute_.listeners.onEnd(),sn.currentRoute_=null),dn.leaveTryBlock(0);break;case 2:return ln=dn.enterCatchBlock(),ln.code==shaka.util.Error.Code.OPERATION_ABORTED?(goog.asserts.assert(sn.currentRoute_.interruptible,"Do not put abortable steps in non-interruptible routes!"),sn.currentRoute_.listeners.onCancel()):sn.currentRoute_.listeners.onError(ln),sn.currentRoute_=null,sn.currentStep_=null,cn=sn,dn.yield(sn.implementation_.handleError(sn.currentlyWith_,ln),5);case 5:cn.currentlyAt_=dn.yieldResult,dn.jumpToEnd()}})},shaka.routing.Walker.prototype.unblockMainLoop_=function(){this.waitForWork_&&(this.waitForWork_.resolve(),this.waitForWork_=null)},shaka.text.Utils=function(){},shaka.text.Utils.flattenPayload_=function(sn){var ln=[],cn=sn.fontWeight>=shaka.text.Cue.fontWeight.BOLD,dn=sn.fontStyle==shaka.text.Cue.fontStyle.ITALIC,pn=sn.textDecoration.includes(shaka.text.Cue.textDecoration.UNDERLINE);return cn&&ln.push("b"),dn&&ln.push("i"),pn&&ln.push("u"),cn=ln.reduce(function(vn,kn){return vn+"<"+kn+">"},""),ln=ln.reduceRight(function(vn,kn){return vn+"</"+kn+">"},""),sn.lineBreak?`
`:sn.nestedCues.length?sn.nestedCues.map(shaka.text.Utils.flattenPayload_).join(""):cn+sn.payload+ln},shaka.text.Utils.getCuesToFlatten=function(sn,ln){sn=$jscomp.makeIterator(sn);for(var cn=sn.next();!cn.done;cn=sn.next())if(cn=cn.value,cn.isContainer)shaka.text.Utils.getCuesToFlatten(cn.nestedCues,ln);else{var dn=cn.clone();dn.nestedCues=[],dn.payload=shaka.text.Utils.flattenPayload_(cn),ln.push(dn)}return ln},shaka.text.SimpleTextDisplayer=function(sn){this.textTrack_=null;for(var ln=$jscomp.makeIterator(Array.from(sn.textTracks)),cn=ln.next();!cn.done;cn=ln.next())cn=cn.value,cn.mode="disabled",cn.label==shaka.Player.TextTrackLabel&&(this.textTrack_=cn);this.textTrack_||(this.textTrack_=sn.addTextTrack("subtitles",shaka.Player.TextTrackLabel)),this.textTrack_.mode="hidden"},shaka.text.SimpleTextDisplayer.prototype.remove=function(sn,ln){return this.textTrack_?(shaka.text.SimpleTextDisplayer.removeWhere_(this.textTrack_,function(cn){return cn.startTime<ln&&cn.endTime>sn}),!0):!1},shaka.text.SimpleTextDisplayer.prototype.append=function(sn){var ln=shaka.text.Utils.getCuesToFlatten(sn,[]),cn=[];sn=this.textTrack_.cues?Array.from(this.textTrack_.cues):[];var dn={};ln=$jscomp.makeIterator(ln);for(var pn=ln.next();!pn.done;dn={$jscomp$loop$prop$inCue$707:dn.$jscomp$loop$prop$inCue$707},pn=ln.next())dn.$jscomp$loop$prop$inCue$707=pn.value,sn.some(function(vn){return function(kn){return kn.startTime==vn.$jscomp$loop$prop$inCue$707.startTime&&kn.endTime==vn.$jscomp$loop$prop$inCue$707.endTime&&kn.text==vn.$jscomp$loop$prop$inCue$707.payload}}(dn))||(pn=shaka.text.SimpleTextDisplayer.convertToTextTrackCue_(dn.$jscomp$loop$prop$inCue$707))&&cn.push(pn);for(sn=cn.slice().sort(function(vn,kn){return vn.startTime!=kn.startTime?vn.startTime-kn.startTime:vn.endTime!=kn.endTime?vn.endTime-kn.startTime:"line"in VTTCue.prototype?cn.indexOf(kn)-cn.indexOf(vn):cn.indexOf(vn)-cn.indexOf(kn)}),sn=$jscomp.makeIterator(sn),dn=sn.next();!dn.done;dn=sn.next())this.textTrack_.addCue(dn.value)},shaka.text.SimpleTextDisplayer.prototype.destroy=function(){return this.textTrack_&&(shaka.text.SimpleTextDisplayer.removeWhere_(this.textTrack_,function(sn){return!0}),this.textTrack_.mode="disabled"),this.textTrack_=null,Promise.resolve()},shaka.text.SimpleTextDisplayer.prototype.isTextVisible=function(){return this.textTrack_.mode=="showing"},shaka.text.SimpleTextDisplayer.prototype.setTextVisibility=function(sn){this.textTrack_.mode=sn?"showing":"hidden"},shaka.text.SimpleTextDisplayer.convertToTextTrackCue_=function(sn){if(sn.startTime>=sn.endTime)return shaka.log.warning("Invalid cue times: "+sn.startTime+" - "+sn.endTime),null;var ln=shaka.text.Cue,cn=new VTTCue(sn.startTime,sn.endTime,sn.payload);cn.lineAlign=sn.lineAlign,cn.positionAlign=sn.positionAlign,sn.size&&(cn.size=sn.size);try{cn.align=sn.textAlign}catch{}return sn.textAlign=="center"&&cn.align!="center"&&(cn.align="middle"),sn.writingMode==ln.writingMode.VERTICAL_LEFT_TO_RIGHT?cn.vertical="lr":sn.writingMode==ln.writingMode.VERTICAL_RIGHT_TO_LEFT&&(cn.vertical="rl"),sn.lineInterpretation==ln.lineInterpretation.PERCENTAGE&&(cn.snapToLines=!1),sn.line!=null&&(cn.line=sn.line),sn.position!=null&&(cn.position=sn.position),cn},shaka.text.SimpleTextDisplayer.removeWhere_=function(sn,ln){var cn=sn.mode,dn=cn=="showing"?"showing":"hidden";sn.mode=dn,goog.asserts.assert(sn.cues,'Cues should be accessible when mode is set to "'+dn+'".'),dn=$jscomp.makeIterator(Array.from(sn.cues));for(var pn=dn.next();!pn.done;pn=dn.next())(pn=pn.value)&&ln(pn)&&sn.removeCue(pn);sn.mode=cn},goog.exportSymbol("shaka.text.SimpleTextDisplayer",shaka.text.SimpleTextDisplayer),goog.exportProperty(shaka.text.SimpleTextDisplayer.prototype,"setTextVisibility",shaka.text.SimpleTextDisplayer.prototype.setTextVisibility),goog.exportProperty(shaka.text.SimpleTextDisplayer.prototype,"isTextVisible",shaka.text.SimpleTextDisplayer.prototype.isTextVisible),goog.exportProperty(shaka.text.SimpleTextDisplayer.prototype,"destroy",shaka.text.SimpleTextDisplayer.prototype.destroy),goog.exportProperty(shaka.text.SimpleTextDisplayer.prototype,"append",shaka.text.SimpleTextDisplayer.prototype.append),goog.exportProperty(shaka.text.SimpleTextDisplayer.prototype,"remove",shaka.text.SimpleTextDisplayer.prototype.remove),shaka.util.Dom=function(){},shaka.util.Dom.createHTMLElement=function(sn){return document.createElement(sn)},shaka.util.Dom.createButton=function(){var sn=document.createElement("button");return sn.setAttribute("type","button"),sn},shaka.util.Dom.asHTMLElement=function(sn){return sn},shaka.util.Dom.asHTMLMediaElement=function(sn){return sn},shaka.util.Dom.getElementByClassName=function(sn,ln){return ln=ln.getElementsByClassName(sn),goog.asserts.assert(ln.length==1,"Should only be one element with class name "+sn),shaka.util.Dom.asHTMLElement(ln[0])},shaka.util.Dom.removeAllChildren=function(sn){for(;sn.firstChild;)sn.removeChild(sn.firstChild)},goog.exportSymbol("shaka.util.Dom",shaka.util.Dom),goog.exportProperty(shaka.util.Dom,"removeAllChildren",shaka.util.Dom.removeAllChildren),shaka.text.UITextDisplayer=function(sn,ln){var cn=this;goog.asserts.assert(ln,"videoContainer should be valid."),this.isTextVisible_=!1,this.cues_=[],this.video_=sn,this.videoContainer_=ln,this.textContainer_=shaka.util.Dom.createHTMLElement("div"),this.textContainer_.classList.add("shaka-text-container"),this.textContainer_.style.textAlign="center",this.textContainer_.style.display="flex",this.textContainer_.style.flexDirection="column",this.textContainer_.style.alignItems="center",this.textContainer_.style.justifyContent="flex-end",this.videoContainer_.appendChild(this.textContainer_),this.captionsTimer_=new shaka.util.Timer(function(){cn.updateCaptions_()}).tickEvery(.25),this.currentCuesMap_=new Map,this.eventManager_=new shaka.util.EventManager,this.eventManager_.listen(document,"fullscreenchange",function(){cn.updateCaptions_(!0)}),this.resizeObserver_=null,"ResizeObserver"in window&&(this.resizeObserver_=new ResizeObserver(function(){cn.updateCaptions_(!0)}),this.resizeObserver_.observe(this.textContainer_)),this.regionElements_=new Map},shaka.text.UITextDisplayer.prototype.append=function(sn){var ln=[].concat($jscomp.arrayFromIterable(this.cues_)),cn={};sn=$jscomp.makeIterator(sn);for(var dn=sn.next();!dn.done;cn={$jscomp$loop$prop$cue$709:cn.$jscomp$loop$prop$cue$709},dn=sn.next())cn.$jscomp$loop$prop$cue$709=dn.value,ln.some(function(pn){return function(vn){return shaka.text.Cue.equal(vn,pn.$jscomp$loop$prop$cue$709)}}(cn))||this.cues_.push(cn.$jscomp$loop$prop$cue$709);this.updateCaptions_()},shaka.text.UITextDisplayer.prototype.destroy=function(){this.videoContainer_.removeChild(this.textContainer_),this.textContainer_=null,this.isTextVisible_=!1,this.cues_=[],this.captionsTimer_&&this.captionsTimer_.stop(),this.currentCuesMap_.clear(),this.eventManager_&&(this.eventManager_.release(),this.eventManager_=null),this.resizeObserver_&&(this.resizeObserver_.disconnect(),this.resizeObserver_=null)},shaka.text.UITextDisplayer.prototype.remove=function(sn,ln){if(!this.textContainer_)return!1;var cn=this.cues_.length;return this.cues_=this.cues_.filter(function(dn){return dn.startTime<sn||dn.endTime>=ln}),this.updateCaptions_(cn>this.cues_.length),!0},shaka.text.UITextDisplayer.prototype.isTextVisible=function(){return this.isTextVisible_},shaka.text.UITextDisplayer.prototype.setTextVisibility=function(sn){this.isTextVisible_=sn},shaka.text.UITextDisplayer.prototype.isElementUnderTextContainer_=function(sn){for(;sn!=null;){if(sn==this.textContainer_)return!0;sn=sn.parentElement}return!1},shaka.text.UITextDisplayer.prototype.updateCuesRecursive_=function(sn,ln,cn,dn){var pn=!1,vn=[],kn=[];sn=$jscomp.makeIterator(sn);for(var Sn=sn.next();!Sn.done;Sn=sn.next()){Sn=Sn.value,dn.push(Sn);var wn=this.currentCuesMap_.get(Sn),Pn=Sn.startTime<=cn&&Sn.endTime>cn,Nn=wn?wn.wrapper:null;wn&&(vn.push(wn.cueElement),wn.regionElement&&vn.push(wn.regionElement),Pn||(pn=!0,this.currentCuesMap_.delete(Sn),wn=null)),Pn&&(kn.push(Sn),wn?this.isElementUnderTextContainer_(Nn)||(pn=!0):(this.createCue_(Sn,dn),wn=this.currentCuesMap_.get(Sn),Nn=wn.wrapper,pn=!0)),0<Sn.nestedCues.length&&Nn&&this.updateCuesRecursive_(Sn.nestedCues,Nn,cn,dn),wn=dn.pop(),goog.asserts.assert(wn==Sn,"Parent cues should be kept in order")}if(pn){for(cn=$jscomp.makeIterator(vn),dn=cn.next();!dn.done;dn=cn.next())dn=dn.value,dn.parentElement&&dn.parentElement.removeChild(dn);for(kn.sort(function(Ln,Fn){return Ln.startTime!=Fn.startTime?Ln.startTime-Fn.startTime:Ln.endTime-Fn.endTime}),kn=$jscomp.makeIterator(kn),Sn=kn.next();!Sn.done;Sn=kn.next())cn=this.currentCuesMap_.get(Sn.value),goog.asserts.assert(cn,"cueRegistry should exist."),cn.regionElement?(ln.appendChild(cn.regionElement),cn.regionElement.appendChild(cn.cueElement)):ln.appendChild(cn.cueElement)}},shaka.text.UITextDisplayer.prototype.updateCaptions_=function(sn){if(this.textContainer_){var ln=this.video_.currentTime;if(!this.isTextVisible_||sn!==void 0&&sn){sn=$jscomp.makeIterator(this.regionElements_.values());for(var cn=sn.next();!cn.done;cn=sn.next())shaka.util.Dom.removeAllChildren(cn.value);shaka.util.Dom.removeAllChildren(this.textContainer_),this.currentCuesMap_.clear(),this.regionElements_.clear()}if(this.isTextVisible_){sn=new Map,cn=$jscomp.makeIterator(this.currentCuesMap_.keys());for(var dn=cn.next();!dn.done;dn=cn.next())dn=dn.value,sn.set(dn,this.currentCuesMap_.get(dn));if(this.updateCuesRecursive_(this.cues_,this.textContainer_,ln,[]),goog.DEBUG)for(ln=$jscomp.makeIterator(sn.keys()),dn=ln.next();!dn.done;dn=ln.next())cn=dn.value,this.currentCuesMap_.has(cn)||(cn=sn.get(cn).cueElement,goog.asserts.assert(!cn.parentNode,"Cue was not properly removed!"))}}},shaka.text.UITextDisplayer.prototype.generateRegionId_=function(sn){var ln=shaka.text.CueRegion.units.PERCENTAGE;return sn.id+"_"+sn.width+"x"+sn.height+(sn.heightUnits==ln?"%":"px")+"-"+sn.viewportAnchorX+"x"+sn.viewportAnchorY+(sn.viewportAnchorUnits==ln?"%":"px")},shaka.text.UITextDisplayer.prototype.getRegionElement_=function(sn){var ln=sn.region,cn=this.generateRegionId_(ln);if(this.regionElements_.has(cn))return this.regionElements_.get(cn);var dn=shaka.util.Dom.createHTMLElement("span"),pn=shaka.text.CueRegion.units.PERCENTAGE,vn=ln.heightUnits==pn?"%":"px",kn=ln.widthUnits==pn?"%":"px";return pn=ln.viewportAnchorUnits==pn?"%":"px",dn.id="shaka-text-region---"+cn,dn.classList.add("shaka-text-region"),dn.style.height=ln.height+vn,dn.style.width=ln.width+kn,dn.style.position="absolute",dn.style.top=ln.viewportAnchorY+pn,dn.style.left=ln.viewportAnchorX+pn,dn.style.display="flex",dn.style.flexDirection="column",dn.style.alignItems="center",dn.style.justifyContent=sn.displayAlign==shaka.text.Cue.displayAlign.BEFORE?"flex-start":sn.displayAlign==shaka.text.Cue.displayAlign.CENTER?"center":"flex-end",this.regionElements_.set(cn,dn),dn},shaka.text.UITextDisplayer.prototype.createCue_=function(sn,ln){var cn=1<ln.length,dn=cn?"span":"div";sn.lineBreak&&(dn="br"),cn=!cn&&0<sn.nestedCues.length;var pn=shaka.util.Dom.createHTMLElement(dn);dn!="br"&&this.setCaptionStyles_(pn,sn,ln,cn),ln=null,sn.region&&sn.region.id&&(ln=this.getRegionElement_(sn)),dn=pn,cn&&(dn=shaka.util.Dom.createHTMLElement("span"),dn.classList.add("shaka-text-wrapper"),dn.style.backgroundColor=sn.backgroundColor,dn.style.lineHeight="normal",pn.appendChild(dn)),this.currentCuesMap_.set(sn,{cueElement:pn,wrapper:dn,regionElement:ln})},shaka.text.UITextDisplayer.prototype.setCaptionStyles_=function(sn,ln,cn,dn){var pn=shaka.text.Cue,vn=sn.style,kn=ln.nestedCues.length==0,Sn=1<cn.length;vn.whiteSpace="pre-wrap";var wn=ln.payload.replace(/\s+$/g,function(Nn){return" ".repeat(Nn.length)});if(vn.webkitTextStrokeColor=ln.textStrokeColor,vn.webkitTextStrokeWidth=ln.textStrokeWidth,vn.color=ln.color,vn.direction=ln.direction,vn.opacity=ln.opacity,vn.paddingLeft=shaka.text.UITextDisplayer.convertLengthValue_(ln.linePadding,ln,this.videoContainer_),vn.paddingRight=shaka.text.UITextDisplayer.convertLengthValue_(ln.linePadding,ln,this.videoContainer_),vn.textShadow=ln.textShadow,ln.backgroundImage)vn.backgroundImage="url('"+ln.backgroundImage+"')",vn.backgroundRepeat="no-repeat",vn.backgroundSize="contain",vn.backgroundPosition="center",vn.width="100%",vn.height="100%";else{if(ln.nestedCues.length)var Pn=sn;else Pn=shaka.util.Dom.createHTMLElement("span"),sn.appendChild(Pn);ln.border&&(Pn.style.border=ln.border),dn||((sn=shaka.text.UITextDisplayer.inheritProperty_(cn,function(Nn){return Nn.backgroundColor}))?Pn.style.backgroundColor=sn:wn&&(Pn.style.backgroundColor="rgba(0, 0, 0, 0.8)")),wn&&(Pn.textContent=wn)}Sn&&!cn[cn.length-1].isContainer?vn.display="inline":(vn.display="flex",vn.flexDirection="column",vn.alignItems="center",vn.justifyContent=ln.displayAlign==pn.displayAlign.BEFORE?"flex-start":ln.displayAlign==pn.displayAlign.CENTER?"center":"flex-end"),kn||(vn.margin="0"),vn.fontFamily=ln.fontFamily,vn.fontWeight=ln.fontWeight.toString(),vn.fontStyle=ln.fontStyle,vn.letterSpacing=ln.letterSpacing,vn.fontSize=shaka.text.UITextDisplayer.convertLengthValue_(ln.fontSize,ln,this.videoContainer_),ln.line!=null&&ln.lineInterpretation==pn.lineInterpretation.PERCENTAGE&&(vn.position="absolute",ln.writingMode==pn.writingMode.HORIZONTAL_TOP_TO_BOTTOM?(vn.width="100%",ln.lineAlign==pn.lineAlign.START?vn.top=ln.line+"%":ln.lineAlign==pn.lineAlign.END&&(vn.bottom=100-ln.line+"%")):ln.writingMode==pn.writingMode.VERTICAL_LEFT_TO_RIGHT?(vn.height="100%",ln.lineAlign==pn.lineAlign.START?vn.left=ln.line+"%":ln.lineAlign==pn.lineAlign.END&&(vn.right=100-ln.line+"%")):(vn.height="100%",ln.lineAlign==pn.lineAlign.START?vn.right=ln.line+"%":ln.lineAlign==pn.lineAlign.END&&(vn.left=100-ln.line+"%"))),vn.lineHeight=ln.lineHeight,ln.position!=null&&(ln.writingMode==pn.writingMode.HORIZONTAL_TOP_TO_BOTTOM?vn.paddingLeft=ln.position:vn.paddingTop=ln.position),ln.positionAlign==pn.positionAlign.LEFT?vn.cssFloat="left":ln.positionAlign==pn.positionAlign.RIGHT&&(vn.cssFloat="right"),vn.textAlign=ln.textAlign,vn.textDecoration=ln.textDecoration.join(" "),vn.writingMode=ln.writingMode,"writingMode"in document.documentElement.style&&vn.writingMode==ln.writingMode||(vn.webkitWritingMode=ln.writingMode),ln.size&&(ln.writingMode==pn.writingMode.HORIZONTAL_TOP_TO_BOTTOM?vn.width=ln.size+"%":vn.height=ln.size+"%")},shaka.text.UITextDisplayer.getLengthValueInfo_=function(sn){return(sn=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(sn))?{value:Number(sn[1]),unit:sn[2]}:null},shaka.text.UITextDisplayer.convertLengthValue_=function(sn,ln,cn){var dn=shaka.text.UITextDisplayer.getLengthValueInfo_(sn);if(!dn)return sn;var pn=dn.value;switch(dn.unit){case"%":return shaka.text.UITextDisplayer.getAbsoluteLengthInPixels_(pn/100,ln,cn);case"c":return shaka.text.UITextDisplayer.getAbsoluteLengthInPixels_(pn,ln,cn);default:return sn}},shaka.text.UITextDisplayer.getAbsoluteLengthInPixels_=function(sn,ln,cn){return cn.clientHeight*sn/ln.cellResolution.rows+"px"},shaka.text.UITextDisplayer.inheritProperty_=function(sn,ln){for(var cn=sn.length-1;0<=cn;cn--){var dn=ln(sn[cn]);if(dn||dn===0)return dn}return null},goog.exportSymbol("shaka.text.UITextDisplayer",shaka.text.UITextDisplayer),goog.exportProperty(shaka.text.UITextDisplayer.prototype,"setTextVisibility",shaka.text.UITextDisplayer.prototype.setTextVisibility),goog.exportProperty(shaka.text.UITextDisplayer.prototype,"isTextVisible",shaka.text.UITextDisplayer.prototype.isTextVisible),goog.exportProperty(shaka.text.UITextDisplayer.prototype,"remove",shaka.text.UITextDisplayer.prototype.remove),goog.exportProperty(shaka.text.UITextDisplayer.prototype,"destroy",shaka.text.UITextDisplayer.prototype.destroy),goog.exportProperty(shaka.text.UITextDisplayer.prototype,"append",shaka.text.UITextDisplayer.prototype.append),shaka.text.WebVttGenerator=function(){},shaka.text.WebVttGenerator.convert=function(sn,ln){var cn=function(vn){for(var kn=vn,Sn=$jscomp.makeIterator(ln),wn=Sn.next();!wn.done;wn=Sn.next())wn=wn.value,wn.end&&wn.start<vn&&(kn+=wn.end-wn.start);return vn=Math.floor(kn/3600),Sn=Math.floor(kn/60%60),wn=Math.floor(kn%60),kn=Math.floor(1e3*kn%1e3),(10>vn?"0":"")+vn+":"+(10>Sn?"0":"")+Sn+":"+(10>wn?"0":"")+wn+"."+(100>kn?10>kn?"00":"0":"")+kn},dn=shaka.text.Utils.getCuesToFlatten(sn,[]);sn=`WEBVTT

`,dn=$jscomp.makeIterator(dn);for(var pn=dn.next();!pn.done;pn=dn.next())pn=pn.value,sn+=cn(pn.startTime)+" --> "+cn(pn.endTime)+function(vn){var kn=[],Sn=shaka.text.Cue;switch(vn.textAlign){case Sn.textAlign.LEFT:kn.push("align:left");break;case Sn.textAlign.RIGHT:kn.push("align:right");break;case Sn.textAlign.CENTER:kn.push("align:middle");break;case Sn.textAlign.START:kn.push("align:start");break;case Sn.textAlign.END:kn.push("align:end")}switch(vn.writingMode){case Sn.writingMode.VERTICAL_LEFT_TO_RIGHT:kn.push("vertical:lr");break;case Sn.writingMode.VERTICAL_RIGHT_TO_LEFT:kn.push("vertical:rl")}return kn.length?" "+kn.join(" "):""}(pn)+`
`,sn+=pn.payload+`

`;return sn},goog.exportSymbol("shaka.text.WebVttGenerator",shaka.text.WebVttGenerator),shaka.util.CmcdManager=function(sn,ln){this.playerInterface_=sn,this.config_=ln,this.sid_="",this.sf_=void 0,this.playbackStarted_=!1,this.buffering_=!0,this.starved_=!1},shaka.util.CmcdManager.prototype.setBuffering=function(sn){sn||this.playbackStarted_||(this.playbackStarted_=!0),this.playbackStarted_&&sn&&(this.starved_=!0),this.buffering_=sn},shaka.util.CmcdManager.prototype.applyManifestData=function(sn,ln){try{this.config_.enabled&&(this.sf_=ln.format,this.apply_(sn,{ot:shaka.util.CmcdManager.ObjectType.MANIFEST,su:!this.playbackStarted_}))}catch(cn){shaka.log.warnOnce("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",cn)}},shaka.util.CmcdManager.prototype.applySegmentData=function(sn,ln){try{if(this.config_.enabled){var cn={d:1e3*ln.duration,st:this.getStreamType_()};cn.ot=this.getObjectType_(ln);var dn=shaka.util.CmcdManager.ObjectType,pn=cn.ot===dn.VIDEO||cn.ot===dn.AUDIO||cn.ot===dn.MUXED||cn.ot===dn.TIMED_TEXT;pn&&(cn.bl=this.getBufferLength_(ln.type)),ln.bandwidth&&(cn.br=ln.bandwidth/1e3),pn&&cn.ot!==dn.TIMED_TEXT&&(cn.tb=this.getTopBandwidth_(cn.ot)/1e3),this.apply_(sn,cn)}}catch(vn){shaka.log.warnOnce("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",vn)}},shaka.util.CmcdManager.prototype.applyTextData=function(sn){try{this.config_.enabled&&this.apply_(sn,{ot:shaka.util.CmcdManager.ObjectType.CAPTION,su:!0})}catch(ln){shaka.log.warnOnce("CMCD_TEXT_ERROR","Could not generate text CMCD data.",ln)}},shaka.util.CmcdManager.prototype.appendSrcData=function(sn,ln){try{if(!this.config_.enabled)return sn;var cn=this.createData_();cn.ot=this.getObjectTypeFromMimeType_(ln),cn.su=!0;var dn=shaka.util.CmcdManager.toQuery(cn);return shaka.util.CmcdManager.appendQueryToUri(sn,dn)}catch(pn){return shaka.log.warnOnce("CMCD_SRC_ERROR","Could not generate src CMCD data.",pn),sn}},shaka.util.CmcdManager.prototype.appendTextTrackData=function(sn){try{if(!this.config_.enabled)return sn;var ln=this.createData_();ln.ot=shaka.util.CmcdManager.ObjectType.CAPTION,ln.su=!0;var cn=shaka.util.CmcdManager.toQuery(ln);return shaka.util.CmcdManager.appendQueryToUri(sn,cn)}catch(dn){return shaka.log.warnOnce("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",dn),sn}},shaka.util.CmcdManager.prototype.createData_=function(){return this.sid_||(this.sid_=this.config_.sessionId||window.crypto.randomUUID()),{v:shaka.util.CmcdManager.Version,sf:this.sf_,sid:this.sid_,cid:this.config_.contentId,mtp:this.playerInterface_.getBandwidthEstimate()/1e3}},shaka.util.CmcdManager.prototype.apply_=function(sn,ln,cn){if(ln=ln===void 0?{}:ln,cn=cn===void 0?this.config_.useHeaders:cn,this.config_.enabled){Object.assign(ln,this.createData_()),ln.pr=this.playerInterface_.getPlaybackRate();var dn=ln.ot===shaka.util.CmcdManager.ObjectType.VIDEO||ln.ot===shaka.util.CmcdManager.ObjectType.MUXED;if(this.starved_&&dn&&(ln.bs=!0,ln.su=!0,this.starved_=!1),ln.su==null&&(ln.su=this.buffering_),cn)ln=shaka.util.CmcdManager.toHeaders(ln),Object.keys(ln).length&&Object.assign(sn.headers,ln);else{var pn=shaka.util.CmcdManager.toQuery(ln);pn&&(sn.uris=sn.uris.map(function(vn){return shaka.util.CmcdManager.appendQueryToUri(vn,pn)}))}}},shaka.util.CmcdManager.prototype.getObjectType_=function(sn){var ln=sn.type;if(sn.init)return shaka.util.CmcdManager.ObjectType.INIT;if(ln=="video")return sn.codecs.includes(",")?shaka.util.CmcdManager.ObjectType.MUXED:shaka.util.CmcdManager.ObjectType.VIDEO;if(ln=="audio")return shaka.util.CmcdManager.ObjectType.AUDIO;if(ln=="text")return sn.mimeType==="application/mp4"?shaka.util.CmcdManager.ObjectType.TIMED_TEXT:shaka.util.CmcdManager.ObjectType.CAPTION},shaka.util.CmcdManager.prototype.getObjectTypeFromMimeType_=function(sn){switch(sn){case"video/webm":case"video/mp4":return shaka.util.CmcdManager.ObjectType.MUXED;case"application/x-mpegurl":return shaka.util.CmcdManager.ObjectType.MANIFEST}},shaka.util.CmcdManager.prototype.getBufferLength_=function(sn){if(sn=this.playerInterface_.getBufferedInfo()[sn],!sn.length)return NaN;var ln=this.playerInterface_.getCurrentTime();return(sn=sn.find(function(cn){return cn.start<=ln&&cn.end>=ln}))?1e3*(sn.end-ln):NaN},shaka.util.CmcdManager.prototype.getStreamType_=function(){return this.playerInterface_.isLive()?shaka.util.CmcdManager.StreamType.LIVE:shaka.util.CmcdManager.StreamType.VOD},shaka.util.CmcdManager.prototype.getTopBandwidth_=function(sn){var ln=this.playerInterface_.getVariantTracks();if(!ln.length)return NaN;var cn=ln[0];ln=$jscomp.makeIterator(ln);for(var dn=ln.next();!dn.done;dn=ln.next())dn=dn.value,dn.type==="variant"&&dn.bandwidth>cn.bandwidth&&(cn=dn);switch(ln=shaka.util.CmcdManager.ObjectType,sn){case ln.VIDEO:return cn.videoBandwidth||NaN;case ln.AUDIO:return cn.audioBandwidth||NaN;default:return cn.bandwidth}},shaka.util.CmcdManager.serialize=function(sn){var ln=[],cn=function(Nn){return!Number.isNaN(Nn)&&Nn!=null&&Nn!==""&&Nn!==!1},dn=function(Nn){return Math.round(Nn)},pn=function(Nn){return 100*dn(Nn/100)};pn={br:dn,d:dn,bl:pn,dl:pn,mtp:pn,nor:function(Nn){return encodeURIComponent(Nn)},rtp:pn,tb:dn};var vn=Object.keys(sn||{}).sort();vn=$jscomp.makeIterator(vn);for(var kn=vn.next();!kn.done;kn=vn.next()){kn=kn.value;var Sn=sn[kn];if(cn(Sn)&&(kn!=="v"||Sn!==1)&&(kn!="pr"||Sn!==1)){var wn=pn[kn];wn&&(Sn=wn(Sn)),wn=typeof Sn;var Pn=void 0;Pn=wn==="string"&&kn!=="ot"&&kn!=="sf"&&kn!=="st"?kn+"="+JSON.stringify(Sn):wn==="boolean"?kn:wn==="symbol"?kn+"="+Sn.description:kn+"="+Sn,ln.push(Pn)}}return ln.join(",")},shaka.util.CmcdManager.toHeaders=function(sn){var ln=Object.keys(sn),cn={},dn=["Object","Request","Session","Status"],pn=[{},{},{},{}],vn={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};ln=$jscomp.makeIterator(ln);for(var kn=ln.next();!kn.done;kn=ln.next())kn=kn.value,pn[vn[kn]!=null?vn[kn]:1][kn]=sn[kn];for(sn=0;sn<pn.length;sn++)(vn=shaka.util.CmcdManager.serialize(pn[sn]))&&(cn["CMCD-"+dn[sn]]=vn);return cn},shaka.util.CmcdManager.toQuery=function(sn){return shaka.util.CmcdManager.serialize(sn)},shaka.util.CmcdManager.appendQueryToUri=function(sn,ln){return!ln||sn.includes("offline:")?sn:(sn=new goog.Uri(sn),sn.getQueryData().set("CMCD",ln),sn.toString())},shaka.util.CmcdManager.ObjectType={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},shaka.util.CmcdManager.StreamType={VOD:"v",LIVE:"l"},shaka.util.CmcdManager.StreamingFormat={DASH:"d",HLS:"h",SMOOTH:"s",OTHER:"o"},goog.exportSymbol("shaka.util.CmcdManager.StreamingFormat",shaka.util.CmcdManager.StreamingFormat),shaka.util.CmcdManager.Version=1,shaka.util.ConfigUtils=function(){},shaka.util.ConfigUtils.mergeConfigObjects=function(sn,ln,cn,dn,pn){goog.asserts.assert(sn,"Destination config must not be null!");var vn=pn in dn,kn=!0,Sn;for(Sn in ln){var wn=pn+"."+Sn,Pn=vn?dn[pn]:cn[Sn];vn||Sn in cn?ln[Sn]===void 0?Pn===void 0||vn?delete sn[Sn]:sn[Sn]=shaka.util.ObjectUtils.cloneObject(Pn):Pn.constructor==Object&&ln[Sn]&&ln[Sn].constructor==Object?(sn[Sn]||(sn[Sn]=shaka.util.ObjectUtils.cloneObject(Pn)),wn=shaka.util.ConfigUtils.mergeConfigObjects(sn[Sn],ln[Sn],Pn,dn,wn),kn=kn&&wn):typeof ln[Sn]!=typeof Pn||ln[Sn]==null||typeof ln[Sn]!="function"&&ln[Sn].constructor!=Pn.constructor?(shaka.log.alwaysError("Invalid config, wrong type for "+wn),kn=!1):(typeof cn[Sn]=="function"&&cn[Sn].length!=ln[Sn].length&&shaka.log.alwaysWarn("Unexpected number of arguments for "+wn),sn[Sn]=ln[Sn]):(shaka.log.alwaysError("Invalid config, unrecognized key "+wn),kn=!1)}return kn},shaka.util.ConfigUtils.convertToConfigObject=function(sn,ln){for(var cn={},dn=cn,pn=0,vn=0;pn=sn.indexOf(".",pn),!(0>pn);)(pn==0||sn[pn-1]!="\\")&&(vn=sn.substring(vn,pn).replace(/\\\./g,"."),dn[vn]={},dn=dn[vn],vn=pn+1),pn+=1;return dn[sn.substring(vn).replace(/\\\./g,".")]=ln,cn},shaka.util.ConfigUtils.referenceParametersAndReturn=function(sn,ln){return sn&&ln},goog.exportSymbol("shaka.util.ConfigUtils",shaka.util.ConfigUtils),goog.exportProperty(shaka.util.ConfigUtils,"convertToConfigObject",shaka.util.ConfigUtils.convertToConfigObject),goog.exportProperty(shaka.util.ConfigUtils,"mergeConfigObjects",shaka.util.ConfigUtils.mergeConfigObjects),shaka.util.FairPlayUtils=function(){},shaka.util.FairPlayUtils.isFairPlaySupported=function(){var sn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ln){return ln.nextAddress==1?(sn={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},ln.setCatchFinallyBlocks(2),ln.yield(navigator.requestMediaKeySystemAccess("com.apple.fps",[sn]),4)):ln.nextAddress!=2?ln.return(!0):(ln.enterCatchBlock(),ln.return(!1))})},shaka.util.FairPlayUtils.defaultGetContentId=function(sn){return sn=shaka.util.StringUtils.fromBytesAutoDetect(sn),new goog.Uri(sn).getDomain()},shaka.util.FairPlayUtils.initDataTransform=function(sn,ln,cn){if(!cn||!cn.byteLength)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.DRM,shaka.util.Error.Code.SERVER_CERTIFICATE_REQUIRED);ln=typeof ln=="string"?shaka.util.StringUtils.toUTF16(ln,!0):ln,sn=shaka.util.StringUtils.fromBytesAutoDetect(sn),sn=shaka.util.StringUtils.toUTF16(sn,!0);var dn=new Uint8Array(12+sn.byteLength+ln.byteLength+cn.byteLength),pn=0,vn=function(kn){shaka.util.BufferUtils.toDataView(dn).setUint32(pn,kn.byteLength,!0),pn+=4,dn.set(shaka.util.BufferUtils.toUint8(kn),pn),pn+=kn.byteLength};return vn(sn),vn(ln),vn(cn),goog.asserts.assert(pn==dn.length,"Inconsistent init data length"),dn},shaka.util.FairPlayUtils.verimatrixInitDataTransform=function(sn,ln,cn){if(ln!=="skd")return sn;ln=shaka.util.FairPlayUtils,cn=cn.serverCertificate;var dn=shaka.util.StringUtils.fromBytesAutoDetect(sn).split("skd://").pop();return ln.initDataTransform(sn,dn,cn)},shaka.util.FairPlayUtils.ezdrmInitDataTransform=function(sn,ln,cn){if(ln!=="skd")return sn;ln=shaka.util.FairPlayUtils,cn=cn.serverCertificate;var dn=shaka.util.StringUtils.fromBytesAutoDetect(sn).split(";").pop();return ln.initDataTransform(sn,dn,cn)},shaka.util.FairPlayUtils.conaxInitDataTransform=function(sn,ln,cn){if(ln!=="skd")return sn;ln=shaka.util.FairPlayUtils,cn=cn.serverCertificate;var dn=shaka.util.StringUtils.fromBytesAutoDetect(sn).split("skd://").pop().split("?").shift();dn=window.atob(dn);var pn=new ArrayBuffer(2*dn.length);pn=new Uint16Array(pn);for(var vn=0,kn=dn.length;vn<kn;vn++)pn[vn]=dn.charCodeAt(vn);return ln.initDataTransform(sn,pn,cn)},shaka.util.FairPlayUtils.verimatrixFairPlayRequest=function(sn,ln){sn===shaka.net.NetworkingEngine.RequestType.LICENSE&&(sn=shaka.util.BufferUtils.toUint8(ln.body),sn=shaka.util.Uint8ArrayUtils.toBase64(sn),ln.headers["Content-Type"]="application/x-www-form-urlencoded",ln.body=shaka.util.StringUtils.toUTF8("spc="+sn))},shaka.util.FairPlayUtils.ezdrmFairPlayRequest=function(sn,ln){sn===shaka.net.NetworkingEngine.RequestType.LICENSE&&(ln.headers["Content-Type"]="application/octet-stream")},shaka.util.FairPlayUtils.conaxFairPlayRequest=function(sn,ln){sn===shaka.net.NetworkingEngine.RequestType.LICENSE&&(ln.headers["Content-Type"]="application/octet-stream")},shaka.util.FairPlayUtils.commonFairPlayResponse=function(sn,ln){if(sn===shaka.net.NetworkingEngine.RequestType.LICENSE){try{var cn=shaka.util.StringUtils.fromUTF8(ln.data)}catch{return}sn=!1,cn=cn.trim(),cn.substr(0,5)==="<ckc>"&&cn.substr(-6)==="</ckc>"&&(cn=cn.slice(5,-6),sn=!0);try{var dn=JSON.parse(cn);dn.ckc&&(cn=dn.ckc,sn=!0),dn.CkcMessage&&(cn=dn.CkcMessage,sn=!0),dn.License&&(cn=dn.License,sn=!0)}catch{}sn&&(ln.data=shaka.util.BufferUtils.toArrayBuffer(shaka.util.Uint8ArrayUtils.fromBase64(cn)))}},goog.exportSymbol("shaka.util.FairPlayUtils",shaka.util.FairPlayUtils),goog.exportProperty(shaka.util.FairPlayUtils,"commonFairPlayResponse",shaka.util.FairPlayUtils.commonFairPlayResponse),goog.exportProperty(shaka.util.FairPlayUtils,"conaxFairPlayRequest",shaka.util.FairPlayUtils.conaxFairPlayRequest),goog.exportProperty(shaka.util.FairPlayUtils,"ezdrmFairPlayRequest",shaka.util.FairPlayUtils.ezdrmFairPlayRequest),goog.exportProperty(shaka.util.FairPlayUtils,"verimatrixFairPlayRequest",shaka.util.FairPlayUtils.verimatrixFairPlayRequest),goog.exportProperty(shaka.util.FairPlayUtils,"conaxInitDataTransform",shaka.util.FairPlayUtils.conaxInitDataTransform),goog.exportProperty(shaka.util.FairPlayUtils,"ezdrmInitDataTransform",shaka.util.FairPlayUtils.ezdrmInitDataTransform),goog.exportProperty(shaka.util.FairPlayUtils,"verimatrixInitDataTransform",shaka.util.FairPlayUtils.verimatrixInitDataTransform),goog.exportProperty(shaka.util.FairPlayUtils,"initDataTransform",shaka.util.FairPlayUtils.initDataTransform),goog.exportProperty(shaka.util.FairPlayUtils,"defaultGetContentId",shaka.util.FairPlayUtils.defaultGetContentId),goog.exportProperty(shaka.util.FairPlayUtils,"isFairPlaySupported",shaka.util.FairPlayUtils.isFairPlaySupported),shaka.util.PlayerConfiguration=function(){},shaka.util.PlayerConfiguration.createDefault=function(){var sn=1/0;navigator.connection&&navigator.connection.saveData&&(sn=360);var ln={retryParameters:shaka.net.NetworkingEngine.defaultRetryParameters(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:function(kn,Sn,wn){return wn.keySystem=="com.apple.fps.1_0"&&Sn=="skd"&&(Sn=wn.serverCertificate,wn=shaka.util.FairPlayUtils.defaultGetContentId(kn),kn=shaka.util.FairPlayUtils.initDataTransform(kn,wn,Sn)),kn},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:shaka.util.Platform.isXboxOne()},cn={retryParameters:shaka.net.NetworkingEngine.defaultRetryParameters(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},manifestPreprocessor:function(kn){return shaka.util.ConfigUtils.referenceParametersAndReturn([kn],kn)},sequenceMode:!1},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3}},dn={retryParameters:shaka.net.NetworkingEngine.defaultRetryParameters(),failureCallback:function(kn){return shaka.log.error("Unhandled streaming error",kn),shaka.util.ConfigUtils.referenceParametersAndReturn([kn],void 0)},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,durationBackoff:1,forceTransmux:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1};(shaka.util.Platform.isWebOS()||shaka.util.Platform.isTizen()||shaka.util.Platform.isChromecast())&&(dn.stallSkip=0);var pn={trackSelectionCallback:function(kn){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sn){return Sn.return(kn)})},downloadSizeCallback:function(kn){var Sn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wn){return wn.nextAddress==1?navigator.storage&&navigator.storage.estimate?wn.yield(navigator.storage.estimate(),3):wn.return(!0):(Sn=wn.yieldResult,wn.return(Sn.usage+kn<.95*Sn.quota))})},progressCallback:function(kn,Sn){return shaka.util.ConfigUtils.referenceParametersAndReturn([kn,Sn],void 0)},usePersistentLicense:!0,numberOfParallelDownloads:5},vn={drm:ln,manifest:cn,streaming:dn,mediaSource:{sourceBufferExtraFeatures:""},offline:pn,abrFactory:function(){return new shaka.abr.SimpleAbrManager},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:sn,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1},autoShowText:shaka.config.AutoShowText.IF_SUBTITLES_MAY_BE_NEEDED,preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",useHeaders:!1},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1}};return pn.trackSelectionCallback=function(kn){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sn){return Sn.return(shaka.util.PlayerConfiguration.defaultTrackSelect(kn,vn.preferredAudioLanguage))})},vn},shaka.util.PlayerConfiguration.mergeConfigObjects=function(sn,ln,cn){var dn={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:""}};return shaka.util.ConfigUtils.mergeConfigObjects(sn,ln,cn||shaka.util.PlayerConfiguration.createDefault(),dn,"")},shaka.util.PlayerConfiguration.defaultTrackSelect=function(sn,ln){var cn=shaka.util.ManifestParserUtils.ContentType,dn=shaka.util.LanguageUtils,pn=sn.filter(function(wn){return wn.type=="variant"}),vn=[],kn=dn.findClosestLocale(ln,pn.map(function(wn){return wn.language}));kn&&(vn=pn.filter(function(wn){return dn.normalize(wn.language)==kn})),vn.length==0&&(vn=pn.filter(function(wn){return wn.primary})),vn.length==0&&(1<new Set(pn.map(function(wn){return wn.language})).size&&shaka.log.warning("Could not choose a good audio track based on language preferences or primary tracks.  An arbitrary language will be stored!"),vn=pn);var Sn=vn.filter(function(wn){return wn.height&&480>=wn.height});for(Sn.length&&(Sn.sort(function(wn,Pn){return goog.asserts.assert(wn.height!=null,"Null height"),goog.asserts.assert(Pn.height!=null,"Null height"),Pn.height-wn.height}),vn=Sn.filter(function(wn){return wn.height==Sn[0].height})),ln=[],vn.length&&(pn=Math.floor(vn.length/2),vn.sort(function(wn,Pn){return wn.bandwidth-Pn.bandwidth}),ln.push(vn[pn])),sn=$jscomp.makeIterator(sn),vn=sn.next();!vn.done;vn=sn.next())vn=vn.value,vn.type!=cn.TEXT&&vn.type!=cn.IMAGE||ln.push(vn);return ln},goog.exportSymbol("shaka.util.PlayerConfiguration",shaka.util.PlayerConfiguration),goog.exportProperty(shaka.util.PlayerConfiguration,"mergeConfigObjects",shaka.util.PlayerConfiguration.mergeConfigObjects),goog.exportProperty(shaka.util.PlayerConfiguration,"createDefault",shaka.util.PlayerConfiguration.createDefault),shaka.util.StateHistory=function(){this.open_=null,this.closed_=[]},shaka.util.StateHistory.prototype.update=function(sn){this.open_==null?this.start_(sn):this.update_(sn)},shaka.util.StateHistory.prototype.getTimeSpentIn=function(sn){var ln=0;this.open_&&this.open_.state==sn&&(ln+=this.open_.duration);for(var cn=$jscomp.makeIterator(this.closed_),dn=cn.next();!dn.done;dn=cn.next())dn=dn.value,ln+=dn.state==sn?dn.duration:0;return ln},shaka.util.StateHistory.prototype.getCopy=function(){for(var sn=function(pn){return{timestamp:pn.timestamp,state:pn.state,duration:pn.duration}},ln=[],cn=$jscomp.makeIterator(this.closed_),dn=cn.next();!dn.done;dn=cn.next())ln.push(sn(dn.value));return this.open_&&ln.push(sn(this.open_)),ln},shaka.util.StateHistory.prototype.start_=function(sn){goog.asserts.assert(this.open_==null,"There must be no open entry in order when we start"),shaka.log.v1("Changing Player state to",sn),this.open_={timestamp:this.getNowInSeconds_(),state:sn,duration:0}},shaka.util.StateHistory.prototype.update_=function(sn){goog.asserts.assert(this.open_,"There must be an open entry in order to update it");var ln=this.getNowInSeconds_();this.open_.duration=ln-this.open_.timestamp,this.open_.state!=sn&&(shaka.log.v1("Changing Player state to",sn),this.closed_.push(this.open_),this.open_={timestamp:ln,state:sn,duration:0})},shaka.util.StateHistory.prototype.getNowInSeconds_=function(){return Date.now()/1e3},shaka.util.SwitchHistory=function(){this.currentText_=this.currentVariant_=null,this.history_=[]},shaka.util.SwitchHistory.prototype.updateCurrentVariant=function(sn,ln){this.currentVariant_!=sn&&(this.currentVariant_=sn,this.history_.push({timestamp:this.getNowInSeconds_(),id:sn.id,type:"variant",fromAdaptation:ln,bandwidth:sn.bandwidth}))},shaka.util.SwitchHistory.prototype.updateCurrentText=function(sn,ln){this.currentText_!=sn&&(this.currentText_=sn,this.history_.push({timestamp:this.getNowInSeconds_(),id:sn.id,type:"text",fromAdaptation:ln,bandwidth:null}))},shaka.util.SwitchHistory.prototype.getCopy=function(){for(var sn=[],ln=$jscomp.makeIterator(this.history_),cn=ln.next();!cn.done;cn=ln.next())sn.push(this.clone_(cn.value));return sn},shaka.util.SwitchHistory.prototype.getNowInSeconds_=function(){return Date.now()/1e3},shaka.util.SwitchHistory.prototype.clone_=function(sn){return{timestamp:sn.timestamp,id:sn.id,type:sn.type,fromAdaptation:sn.fromAdaptation,bandwidth:sn.bandwidth}},shaka.util.Stats=function(){this.bandwidthEstimate_=this.currentStreamBandwidth_=this.maxSegmentDurationSeconds_=this.liveLatencySeconds_=this.licenseTimeSeconds_=this.drmTimeSeconds_=this.manifestTimeSeconds_=this.loadLatencySeconds_=this.completionPercent_=this.totalGapsJumped_=this.totalStallsDetected_=this.totalCorruptedFrames_=this.totalDecodedFrames_=this.totalDroppedFrames_=this.height_=this.width_=NaN,this.stateHistory_=new shaka.util.StateHistory,this.switchHistory_=new shaka.util.SwitchHistory},shaka.util.Stats.prototype.setDroppedFrames=function(sn,ln){this.totalDroppedFrames_=sn,this.totalDecodedFrames_=ln},shaka.util.Stats.prototype.setCorruptedFrames=function(sn){this.totalCorruptedFrames_=sn},shaka.util.Stats.prototype.setStallsDetected=function(sn){this.totalStallsDetected_=sn},shaka.util.Stats.prototype.setGapsJumped=function(sn){this.totalGapsJumped_=sn},shaka.util.Stats.prototype.setResolution=function(sn,ln){this.width_=sn,this.height_=ln},shaka.util.Stats.prototype.setLoadLatency=function(sn){this.loadLatencySeconds_=sn},shaka.util.Stats.prototype.setManifestTime=function(sn){this.manifestTimeSeconds_=sn},shaka.util.Stats.prototype.setCompletionPercent=function(sn){isNaN(this.completionPercent_)?this.completionPercent_=sn:this.completionPercent_=Math.max(this.completionPercent_,sn)},shaka.util.Stats.prototype.setDrmTime=function(sn){this.drmTimeSeconds_=sn},shaka.util.Stats.prototype.setLicenseTime=function(sn){this.licenseTimeSeconds_=sn},shaka.util.Stats.prototype.setLiveLatency=function(sn){this.liveLatencySeconds_=sn},shaka.util.Stats.prototype.setMaxSegmentDuration=function(sn){this.maxSegmentDurationSeconds_=sn},shaka.util.Stats.prototype.setCurrentStreamBandwidth=function(sn){this.currentStreamBandwidth_=sn},shaka.util.Stats.prototype.setBandwidthEstimate=function(sn){this.bandwidthEstimate_=sn},shaka.util.Stats.prototype.getStateHistory=function(){return this.stateHistory_},shaka.util.Stats.prototype.getSwitchHistory=function(){return this.switchHistory_},shaka.util.Stats.prototype.getBlob=function(){return{width:this.width_,height:this.height_,streamBandwidth:this.currentStreamBandwidth_,decodedFrames:this.totalDecodedFrames_,droppedFrames:this.totalDroppedFrames_,corruptedFrames:this.totalCorruptedFrames_,stallsDetected:this.totalStallsDetected_,gapsJumped:this.totalGapsJumped_,estimatedBandwidth:this.bandwidthEstimate_,completionPercent:this.completionPercent_,loadLatency:this.loadLatencySeconds_,manifestTimeSeconds:this.manifestTimeSeconds_,drmTimeSeconds:this.drmTimeSeconds_,playTime:this.stateHistory_.getTimeSpentIn("playing"),pauseTime:this.stateHistory_.getTimeSpentIn("paused"),bufferingTime:this.stateHistory_.getTimeSpentIn("buffering"),licenseTime:this.licenseTimeSeconds_,liveLatency:this.liveLatencySeconds_,maxSegmentDuration:this.maxSegmentDurationSeconds_,stateHistory:this.stateHistory_.getCopy(),switchHistory:this.switchHistory_.getCopy()}},shaka.util.Stats.getEmptyBlob=function(){return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,switchHistory:[],stateHistory:[]}},shaka.Player=function(sn,ln){shaka.util.FakeEventTarget.call(this);var cn=this;this.loadMode_=shaka.Player.LoadMode.NOT_LOADED,this.videoContainer_=this.video_=null,this.isTextVisible_=!1,this.globalEventManager_=new shaka.util.EventManager,this.attachEventManager_=new shaka.util.EventManager,this.loadEventManager_=new shaka.util.EventManager,this.assetUri_=this.manifest_=this.parserFactory_=this.parser_=this.streamingEngine_=this.qualityObserver_=this.lcevcDil_=this.lcevcCanvas_=this.cmcdManager_=this.regionTimeline_=this.bufferObserver_=this.bufferPoller_=this.playRateController_=this.playheadObservers_=this.playhead_=this.mediaSourceEngine_=this.drmEngine_=this.networkingEngine_=null,this.fullyLoaded_=!1,this.abrManagerFactory_=this.abrManager_=null,this.nextExternalStreamId_=1e9,this.config_=this.defaultConfig_(),this.maxHwRes_={width:1/0,height:1/0},this.stats_=null,this.currentAdaptationSetCriteria_=new shaka.media.PreferenceBasedCriteria(this.config_.preferredAudioLanguage,this.config_.preferredVariantRole,this.config_.preferredAudioChannelCount),this.currentTextLanguage_=this.config_.preferredTextLanguage,this.currentTextRole_=this.config_.preferredTextRole,this.currentTextForced_=this.config_.preferForcedSubs,this.cleanupOnUnload_=[],this.updatedStartTime_=null,ln&&ln(this),this.networkingEngine_=this.createNetworkingEngine(),this.networkingEngine_.setForceHTTPS(this.config_.streaming.forceHTTPS),this.adManager_=null,shaka.Player.adManagerFactory_&&(this.adManager_=shaka.Player.adManagerFactory_()),this.globalEventManager_.listen(window,"online",function(){cn.retryStreaming()}),this.detachNode_={name:"detach"},this.attachNode_={name:"attach"},this.unloadNode_={name:"unload"},this.parserNode_={name:"manifest-parser"},this.manifestNode_={name:"manifest"},this.mediaSourceNode_={name:"media-source"},this.drmNode_={name:"drm-engine"},this.loadNode_={name:"load"},this.srcEqualsDrmNode_={name:"src-equals-drm-engine"},this.srcEqualsNode_={name:"src-equals"};var dn=shaka.util.AbortableOperation,pn=new Map;pn.set(this.attachNode_,function(vn,kn){return dn.notAbortable(cn.onAttach_(vn,kn))}),pn.set(this.detachNode_,function(vn,kn){return dn.notAbortable(cn.onDetach_(vn,kn))}),pn.set(this.unloadNode_,function(vn,kn){return dn.notAbortable(cn.onUnload_(vn,kn))}),pn.set(this.mediaSourceNode_,function(vn,kn){return vn=cn.onInitializeMediaSourceEngine_(vn,kn),dn.notAbortable(vn)}),pn.set(this.parserNode_,function(vn,kn){return vn=cn.onInitializeParser_(vn,kn),dn.notAbortable(vn)}),pn.set(this.manifestNode_,function(vn,kn){return cn.onParseManifest_(vn,kn)}),pn.set(this.drmNode_,function(vn,kn){return vn=cn.onInitializeDrm_(vn,kn),dn.notAbortable(vn)}),pn.set(this.loadNode_,function(vn,kn){return dn.notAbortable(cn.onLoad_(vn,kn))}),pn.set(this.srcEqualsDrmNode_,function(vn,kn){return vn=cn.onInitializeSrcEqualsDrm_(vn,kn),dn.notAbortable(vn)}),pn.set(this.srcEqualsNode_,function(vn,kn){return cn.onSrcEquals_(vn,kn)}),this.walker_=new shaka.routing.Walker(this.detachNode_,shaka.Player.createEmptyPayload_(),{getNext:function(vn,kn,Sn,wn){return cn.getNextStep_(vn,kn,Sn,wn)},enterNode:function(vn,kn,Sn){return cn.dispatchEvent(cn.makeEvent_(shaka.util.FakeEvent.EventName.OnStateChange,new Map().set("state",vn.name))),pn.get(vn)(kn,Sn)},handleError:function(vn,kn){return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sn){return Sn.nextAddress==1?(shaka.log.warning("The walker saw an error:"),kn instanceof shaka.util.Error?shaka.log.warning("Error Code:",kn.code):(shaka.log.warning("Error Message:",kn.message),shaka.log.warning("Error Stack:",kn.stack)),Sn.yield(cn.onUnload_(vn,shaka.Player.createEmptyPayload_()),2)):Sn.return(vn.mediaElement?cn.attachNode_:cn.detachNode_)})},onIdle:function(vn){cn.dispatchEvent(cn.makeEvent_(shaka.util.FakeEvent.EventName.OnStateIdle,new Map().set("state",vn.name)))}}),this.checkVariantsTimer_=new shaka.util.Timer(function(){return cn.checkVariants_()}),sn&&this.attach(sn,!0)},$jscomp.inherits(shaka.Player,shaka.util.FakeEventTarget),shaka.Player.prototype.createLcevcDil_=function(sn){this.lcevcDil_==null&&(this.lcevcDil_=new shaka.lcevc.Dil(this.video_,this.lcevcCanvas_,sn),this.mediaSourceEngine_&&this.mediaSourceEngine_.updateLcevcDil(this.lcevcDil_))},shaka.Player.prototype.closeLcevcDil_=function(){this.lcevcDil_!=null&&(this.lcevcDil_.release(),this.lcevcDil_=null)},shaka.Player.prototype.setupLcevc_=function(sn){if(sn.lcevc.enabled){var ln=this.getVariantTracks();ln&&ln[0]&&ln[0].videoMimeType==shaka.Player.SRC_EQUAL_EXTENSIONS_TO_MIME_TYPES_.ts&&(shaka.util.Platform.isEdge()||shaka.util.Platform.isLegacyEdge())&&(sn.streaming.forceTransmux||shaka.log.alwaysWarn("LCEVC Warning: For MPEG-2 TS decoding the config.streaming.forceTransmux must be enabled.")),this.closeLcevcDil_(),this.createLcevcDil_(sn.lcevc)}else this.closeLcevcDil_()},shaka.Player.prototype.makeEvent_=function(sn,ln){return new shaka.util.FakeEvent(sn,ln)},shaka.Player.prototype.destroy=function(){var sn=this,ln;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cn){switch(cn.nextAddress){case 1:return sn.loadMode_==shaka.Player.LoadMode.DESTROYED?cn.return():(sn.closeLcevcDil_(),sn.loadMode_=shaka.Player.LoadMode.DESTROYED,ln=sn.walker_.startNewRoute(function(dn){return{node:sn.detachNode_,payload:shaka.Player.createEmptyPayload_(),interruptible:!1}}),cn.yield(new Promise(function(dn){ln.onStart=function(){shaka.log.info("Preparing to destroy walker...")},ln.onEnd=function(){dn()},ln.onCancel=function(){goog.asserts.assert(!1,"Our final detach call should never be cancelled."),dn()},ln.onError=function(){goog.asserts.assert(!1,"Our final detach call should never see an error"),dn()},ln.onSkip=function(){goog.asserts.assert(!1,"Our final detach call should never be skipped"),dn()}}),2));case 2:return cn.yield(sn.walker_.destroy(),3);case 3:if(sn.globalEventManager_&&(sn.globalEventManager_.release(),sn.globalEventManager_=null),sn.attachEventManager_&&(sn.attachEventManager_.release(),sn.attachEventManager_=null),sn.loadEventManager_&&(sn.loadEventManager_.release(),sn.loadEventManager_=null),sn.abrManagerFactory_=null,sn.config_=null,sn.stats_=null,sn.videoContainer_=null,sn.cmcdManager_=null,!sn.networkingEngine_){cn.jumpTo(4);break}return cn.yield(sn.networkingEngine_.destroy(),5);case 5:sn.networkingEngine_=null;case 4:sn.abrManager_&&(sn.abrManager_.release(),sn.abrManager_=null),shaka.util.FakeEventTarget.prototype.release.call(sn),cn.jumpToEnd()}})},shaka.Player.registerSupportPlugin=function(sn,ln){shaka.Player.supportPlugins_[sn]=ln},shaka.Player.setAdManagerFactory=function(sn){shaka.Player.adManagerFactory_=sn},shaka.Player.isBrowserSupported=function(){if(window.Promise||shaka.log.alwaysWarn("A Promise implementation or polyfill is required"),!(window.Promise&&window.Uint8Array&&Array.prototype.forEach)||shaka.util.Platform.isIE())return!1;var sn=shaka.util.Platform.safariVersion();return sn&&13>sn||!shaka.media.DrmEngine.isBrowserSupported()?!1:shaka.util.Platform.supportsMediaSource()?!0:shaka.util.Platform.supportsMediaType("application/x-mpegurl")},shaka.Player.probeSupport=function(sn){sn=sn===void 0?!0:sn;var ln,cn,dn,pn,vn,kn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sn){if(Sn.nextAddress==1)return goog.asserts.assert(shaka.Player.isBrowserSupported(),"Must have basic support"),ln={},sn?Sn.yield(shaka.media.DrmEngine.probeSupport(),3):Sn.jumpTo(2);Sn.nextAddress!=2&&(ln=Sn.yieldResult),cn=shaka.media.ManifestParser.probeSupport(),dn=shaka.media.MediaSourceEngine.probeSupport(),pn={manifest:cn,media:dn,drm:ln},vn=shaka.Player.supportPlugins_;for(kn in vn)pn[kn]=vn[kn]();return Sn.return(pn)})},shaka.Player.prototype.attach=function(sn,ln){if(ln=ln===void 0?!0:ln,this.loadMode_==shaka.Player.LoadMode.DESTROYED)return Promise.reject(this.createAbortLoadError_());var cn=shaka.Player.createEmptyPayload_();cn.mediaElement=sn,shaka.util.Platform.supportsMediaSource()||(ln=!1);var dn=ln?this.mediaSourceNode_:this.attachNode_;return sn=this.walker_.startNewRoute(function(pn){return{node:dn,payload:cn,interruptible:!1}}),sn.onStart=function(){return shaka.log.info("Starting attach...")},this.wrapWalkerListenersWithPromise_(sn)},shaka.Player.prototype.attachCanvas=function(sn){this.lcevcCanvas_=sn},shaka.Player.prototype.detach=function(){var sn=this;if(this.loadMode_==shaka.Player.LoadMode.DESTROYED)return Promise.reject(this.createAbortLoadError_());var ln=this.walker_.startNewRoute(function(cn){return{node:sn.detachNode_,payload:shaka.Player.createEmptyPayload_(),interruptible:!1}});return ln.onStart=function(){return shaka.log.info("Starting detach...")},this.wrapWalkerListenersWithPromise_(ln)},shaka.Player.prototype.unload=function(sn){var ln=this;if(sn=sn===void 0?!0:sn,this.loadMode_==shaka.Player.LoadMode.DESTROYED)return Promise.reject(this.createAbortLoadError_());this.fullyLoaded_=!1,shaka.util.Platform.supportsMediaSource()||(sn=!1),this.closeLcevcDil_();var cn=shaka.Player.createEmptyPayload_(),dn=this.walker_.startNewRoute(function(pn){var vn=pn.mediaElement&&sn?ln.mediaSourceNode_:pn.mediaElement?ln.attachNode_:ln.detachNode_;return goog.asserts.assert(vn,"We should have picked a destination."),cn.mediaElement=pn.mediaElement,{node:vn,payload:cn,interruptible:!1}});return dn.onStart=function(){return shaka.log.info("Starting unload...")},this.wrapWalkerListenersWithPromise_(dn)},shaka.Player.prototype.updateStartTime=function(sn){this.updatedStartTime_=sn},shaka.Player.prototype.load=function(sn,ln,cn){var dn=this;if(this.updatedStartTime_=null,this.fullyLoaded_=!1,this.loadMode_==shaka.Player.LoadMode.DESTROYED)return Promise.reject(this.createAbortLoadError_());this.dispatchEvent(this.makeEvent_(shaka.util.FakeEvent.EventName.Loading));var pn=shaka.Player.createEmptyPayload_();pn.uri=sn,pn.startTimeOfLoad=Date.now()/1e3,cn&&(pn.mimeType=cn),ln!==void 0&&(pn.startTime=ln);var vn=this.shouldUseSrcEquals_(pn)?this.srcEqualsNode_:this.loadNode_,kn=this.walker_.startNewRoute(function(Sn){return Sn.mediaElement==null?null:(pn.mediaElement=Sn.mediaElement,{node:vn,payload:pn,interruptible:!0})});return this.stats_=new shaka.util.Stats,this.cmcdManager_=this.createCmcd_(),kn.onStart=function(){return shaka.log.info("Starting load of "+sn+"...")},new Promise(function(Sn,wn){kn.onSkip=function(){return wn(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.PLAYER,shaka.util.Error.Code.NO_VIDEO_ELEMENT))},kn.onEnd=function(){Sn(),dn.dispatchEvent(dn.makeEvent_(shaka.util.FakeEvent.EventName.Loaded))},kn.onCancel=function(){return wn(dn.createAbortLoadError_())},kn.onError=function(Pn){return wn(Pn)}})},shaka.Player.prototype.shouldUseSrcEquals_=function(sn){var ln=shaka.util.Platform,cn=shaka.util.MimeUtils;if(!ln.supportsMediaSource())return!0;var dn=sn.mimeType,pn=sn.uri||"";if(dn||(dn=shaka.media.ManifestParser.getExtension(pn),dn=shaka.Player.SRC_EQUAL_EXTENSIONS_TO_MIME_TYPES_[dn]),dn){if(sn=(sn.mediaElement||ln.anyMediaElement()).canPlayType(dn)!="",!sn)return!1;if(pn=shaka.media.ManifestParser.isSupported(pn,dn),!pn||(goog.asserts.assert(sn&&pn,"Both native and MSE playback should be possible!"),cn.isHlsType(dn)&&this.config_.streaming.preferNativeHls))return!0;if(ln.isApple())return this.config_.streaming.useNativeHlsOnSafari}return!1},shaka.Player.prototype.onAttach_=function(sn,ln){var cn=this;return goog.asserts.assert(sn.mediaElement==null||sn.mediaElement==ln.mediaElement,"The routing logic failed. MediaElement requirement failed."),sn.mediaElement==null&&(sn.mediaElement=ln.mediaElement,this.attachEventManager_.listen(sn.mediaElement,"error",function(dn){return cn.onVideoError_(dn)})),this.video_=sn.mediaElement,Promise.resolve()},shaka.Player.prototype.onDetach_=function(sn,ln){return sn.mediaElement&&(this.attachEventManager_.removeAll(),sn.mediaElement=null),this.adManager_&&this.adManager_.release(),this.video_=null,Promise.resolve()},shaka.Player.prototype.onUnload_=function(sn,ln){var cn=this,dn,pn,vn,kn,Sn,wn,Pn,Nn,Ln;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fn){switch(Fn.nextAddress){case 1:return cn.loadMode_!=shaka.Player.LoadMode.DESTROYED&&(cn.loadMode_=shaka.Player.LoadMode.NOT_LOADED),dn=cn.cleanupOnUnload_.map(function(zn){return zn()}),cn.cleanupOnUnload_=[],Fn.yield(Promise.all(dn),2);case 2:if(cn.dispatchEvent(cn.makeEvent_(shaka.util.FakeEvent.EventName.Unloading)),sn.mimeType=null,sn.startTime=null,sn.uri=null,cn.regionTimeline_&&(cn.regionTimeline_.release(),cn.regionTimeline_=null),sn.mediaElement&&cn.loadEventManager_.removeAll(),cn.checkVariantsTimer_.stop(),cn.playheadObservers_&&(cn.playheadObservers_.release(),cn.playheadObservers_=null),cn.bufferPoller_&&(cn.bufferPoller_.stop(),cn.bufferPoller_=null),!cn.parser_){Fn.jumpTo(3);break}return Fn.yield(cn.parser_.stop(),4);case 4:cn.parser_=null,cn.parserFactory_=null;case 3:if(!cn.abrManager_){Fn.jumpTo(5);break}return Fn.yield(cn.abrManager_.stop(),5);case 5:if(!cn.streamingEngine_){Fn.jumpTo(7);break}return Fn.yield(cn.streamingEngine_.destroy(),8);case 8:cn.streamingEngine_=null;case 7:if(cn.playRateController_&&(cn.playRateController_.release(),cn.playRateController_=null),cn.playhead_&&(cn.playhead_.release(),cn.playhead_=null),!cn.mediaSourceEngine_){Fn.jumpTo(9);break}return Fn.yield(cn.mediaSourceEngine_.destroy(),10);case 10:cn.mediaSourceEngine_=null;case 9:if(cn.adManager_&&cn.adManager_.onAssetUnload(),!sn.mediaElement||!sn.mediaElement.src){Fn.jumpTo(11);break}return Fn.yield(new Promise(function(zn){return new shaka.util.Timer(zn).tickAfter(.1)}),12);case 12:for(sn.mediaElement.removeAttribute("src"),sn.mediaElement.load();sn.mediaElement.lastChild;)sn.mediaElement.removeChild(sn.mediaElement.firstChild);case 11:if(!cn.drmEngine_){Fn.jumpTo(13);break}return Fn.yield(cn.drmEngine_.destroy(),14);case 14:cn.drmEngine_=null;case 13:if(cn.assetUri_=null,cn.bufferObserver_=null,cn.manifest_){for(pn=$jscomp.makeIterator(cn.manifest_.variants),vn=pn.next();!vn.done;vn=pn.next())for(kn=vn.value,Sn=$jscomp.makeIterator([kn.audio,kn.video]),wn=Sn.next();!wn.done;wn=Sn.next())(Pn=wn.value)&&Pn.segmentIndex&&Pn.segmentIndex.release();for(Nn=$jscomp.makeIterator(cn.manifest_.textStreams),wn=Nn.next();!wn.done;wn=Nn.next())Ln=wn.value,Ln.segmentIndex&&Ln.segmentIndex.release()}cn.manifest_=null,cn.stats_=new shaka.util.Stats,cn.lastTextFactory_=null,cn.updateBufferState_(),Fn.jumpToEnd()}})},shaka.Player.prototype.onInitializeMediaSourceEngine_=function(sn,ln){var cn=this,dn,pn,vn,kn,Sn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wn){if(wn.nextAddress==1)return goog.asserts.assert(shaka.util.Platform.supportsMediaSource(),"We should not be initializing media source on a platform that does not support media source."),goog.asserts.assert(sn.mediaElement,"We should have a media element when initializing media source."),goog.asserts.assert(sn.mediaElement==ln.mediaElement,"|has| and |wants| should have the same media element when initializing media source."),goog.asserts.assert(cn.mediaSourceEngine_==null,"We should not have a media source engine yet."),dn=cn.config_.textDisplayFactory,pn=dn(),cn.lastTextFactory_=dn,vn=cn.createMediaSourceEngine(sn.mediaElement,pn,function(Pn,Nn,Ln){cn.processTimedMetadataMediaSrc_(Pn,Nn,Ln)},cn.lcevcDil_),vn.configure(cn.config_.mediaSource),kn=cn.config_.manifest,Sn=kn.segmentRelativeVttTiming,vn.setSegmentRelativeVttTiming(Sn),wn.yield(vn.open(),2);cn.mediaSourceEngine_=vn,wn.jumpToEnd()})},shaka.Player.prototype.onInitializeParser_=function(sn,ln){var cn=this,dn,pn,vn,kn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sn){if(Sn.nextAddress==1)return goog.asserts.assert(sn.mediaElement,"We should have a media element when initializing the parser."),goog.asserts.assert(sn.mediaElement==ln.mediaElement,"|has| and |wants| should have the same media element when initializing the parser."),goog.asserts.assert(cn.networkingEngine_,"Need networking engine when initializing the parser."),goog.asserts.assert(cn.config_,"Need player config when initializing the parser."),sn.mimeType=ln.mimeType,sn.uri=ln.uri,goog.asserts.assert(sn.uri,"We should have an asset uri when initializing the parsing."),dn=sn.uri,pn=cn.networkingEngine_,cn.assetUri_=dn,vn=cn,Sn.yield(shaka.media.ManifestParser.getFactory(dn,pn,cn.config_.manifest.retryParameters,sn.mimeType),2);vn.parserFactory_=Sn.yieldResult,goog.asserts.assert(cn.parserFactory_,"Must have manifest parser"),cn.parser_=cn.parserFactory_(),kn=shaka.util.ObjectUtils.cloneObject(cn.config_.manifest),ln.mediaElement&&ln.mediaElement.nodeName==="AUDIO"&&(kn.disableVideo=!0),cn.parser_.configure(kn),Sn.jumpToEnd()})},shaka.Player.prototype.onParseManifest_=function(sn,ln){var cn=this;goog.asserts.assert(sn.mimeType==ln.mimeType,"|has| and |wants| should have the same mime type when parsing."),goog.asserts.assert(sn.uri==ln.uri,"|has| and |wants| should have the same uri when parsing."),goog.asserts.assert(sn.uri,"|has| should have a valid uri when parsing."),goog.asserts.assert(sn.uri==this.assetUri_,"|has.uri| should match the cached asset uri."),goog.asserts.assert(this.networkingEngine_,"Need networking engine to parse manifest."),goog.asserts.assert(this.cmcdManager_,"Need CMCD manager to populate manifest request data."),goog.asserts.assert(this.config_,"Need player config to parse manifest."),goog.asserts.assert(this.parser_,"|this.parser_| should have been set in an earlier step.");var dn=sn.uri;sn=this.networkingEngine_,this.regionTimeline_=new shaka.media.RegionTimeline(function(){return cn.seekRange()}),this.regionTimeline_.addEventListener("regionadd",function(kn){kn=kn.region,cn.onRegionEvent_(shaka.util.FakeEvent.EventName.TimelineRegionAdded,kn),cn.adManager_&&cn.adManager_.onDashTimedMetadata(kn)}),this.qualityObserver_=null,this.config_.streaming.observeQualityChanges&&(this.qualityObserver_=new shaka.media.QualityObserver(function(){return cn.getBufferedInfo()}),this.qualityObserver_.addEventListener("qualitychange",function(kn){cn.onMediaQualityChange_(kn.quality,kn.position)}));var pn={networkingEngine:sn,modifyManifestRequest:function(kn,Sn){cn.cmcdManager_.applyManifestData(kn,Sn)},modifySegmentRequest:function(kn,Sn){cn.cmcdManager_.applySegmentData(kn,Sn)},filter:function(kn){return cn.filterManifest_(kn)},makeTextStreamsForClosedCaptions:function(kn){return cn.makeTextStreamsForClosedCaptions_(kn)},onTimelineRegionAdded:function(kn){return cn.regionTimeline_.addRegion(kn)},onEvent:function(kn){return cn.dispatchEvent(kn)},onError:function(kn){return cn.onError_(kn)},isLowLatencyMode:function(){return cn.isLowLatencyMode_()},isAutoLowLatencyMode:function(){return cn.isAutoLowLatencyMode_()},enableLowLatencyMode:function(){cn.configure("streaming.lowLatencyMode",!0)},updateDuration:function(){cn.streamingEngine_&&cn.streamingEngine_.updateDuration()},newDrmInfo:function(kn){var Sn=cn.drmEngine_?cn.drmEngine_.getDrmInfo():null;Sn&&cn.drmEngine_.getMediaKeys()&&cn.processDrmInfos_(Sn.keySystem,kn)}},vn=Date.now()/1e3;return new shaka.util.AbortableOperation(function(){var kn,Sn,wn,Pn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Nn){if(Nn.nextAddress==1)return kn=cn,Nn.yield(cn.parser_.start(dn,pn),2);if(kn.manifest_=Nn.yieldResult,Sn=cn.makeEvent_(shaka.util.FakeEvent.EventName.ManifestParsed),cn.dispatchEvent(Sn),cn.manifest_.variants.length==0)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.NO_VARIANTS);shaka.Player.filterForAVVariants_(cn.manifest_),wn=Date.now()/1e3,Pn=wn-vn,cn.stats_.setManifestTime(Pn),Nn.jumpToEnd()})}(),function(){return shaka.log.info("Aborting parser step..."),cn.parser_.stop()})},shaka.Player.prototype.onInitializeDrm_=function(sn,ln){var cn=this,dn,pn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(vn){return vn.nextAddress==1?(goog.asserts.assert(sn.mimeType==ln.mimeType,"The load graph should have ensured the mime types matched."),goog.asserts.assert(sn.uri==ln.uri,"The load graph should have ensured the uris matched"),goog.asserts.assert(cn.networkingEngine_,"|onInitializeDrm_| should never be called after |destroy|"),goog.asserts.assert(cn.config_,"|onInitializeDrm_| should never be called after |destroy|"),goog.asserts.assert(cn.manifest_,"|this.manifest_| should have been set in an earlier step."),goog.asserts.assert(sn.mediaElement,"We should have a media element when initializing the DRM Engine."),dn=Date.now()/1e3,pn=!0,cn.drmEngine_=cn.createDrmEngine({netEngine:cn.networkingEngine_,onError:function(kn){cn.onError_(kn)},onKeyStatus:function(kn){cn.onKeyStatus_(kn)},onExpirationUpdated:function(kn,Sn){cn.onExpirationUpdated_(kn,Sn)},onEvent:function(kn){cn.dispatchEvent(kn),kn.type==shaka.util.FakeEvent.EventName.DrmSessionUpdate&&pn&&(pn=!1,kn=Date.now()/1e3-dn,cn.stats_.setDrmTime(kn),cn.lcevcDil_&&cn.lcevcDil_.hideCanvas())}}),cn.drmEngine_.configure(cn.config_.drm),vn.yield(cn.drmEngine_.initForPlayback(cn.manifest_.variants,cn.manifest_.offlineSessionIds),2)):vn.nextAddress!=3?vn.yield(cn.drmEngine_.attach(sn.mediaElement),3):vn.yield(cn.filterManifest_(cn.manifest_),0)})},shaka.Player.prototype.onLoad_=function(sn,ln){var cn=this,dn,pn,vn,kn,Sn,wn,Pn,Nn,Ln,Fn,zn,Dn,Kn,qn,Zn,Yn,Jn,rs;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ss){switch(ss.nextAddress){case 1:for(goog.asserts.assert(sn.mimeType==ln.mimeType,"|has| and |wants| should have the same mime type when loading."),goog.asserts.assert(sn.uri==ln.uri,"|has| and |wants| should have the same uri when loading."),goog.asserts.assert(sn.mediaElement,"We should have a media element when loading."),goog.asserts.assert(!isNaN(ln.startTimeOfLoad),"|wants| should tell us when the load was originally requested"),sn.startTime=ln.startTime,cn.updatedStartTime_!=null&&(sn.startTime=cn.updatedStartTime_,cn.updatedStartTime_=null),dn=sn.mediaElement,pn=sn.uri,cn.assetUri_=pn,cn.playRateController_=new shaka.media.PlayRateController({getRate:function(){return dn.playbackRate},getDefaultRate:function(){return dn.defaultPlaybackRate},setRate:function(as){dn.playbackRate=as},movePlayhead:function(as){dn.currentTime+=as}}),vn=function(){return cn.updateStateHistory_()},kn=function(){return cn.onRateChange_()},cn.loadEventManager_.listen(dn,"playing",vn),cn.loadEventManager_.listen(dn,"pause",vn),cn.loadEventManager_.listen(dn,"ended",vn),cn.loadEventManager_.listen(dn,"ratechange",kn),cn.setupLcevc_(cn.config_),Sn=cn.config_.abrFactory,cn.abrManager_&&cn.abrManagerFactory_==Sn||(cn.abrManagerFactory_=Sn,cn.abrManager_=Sn(),typeof cn.abrManager_.setMediaElement!="function"&&(shaka.Deprecate.deprecateFeature(5,"AbrManager","Please use an AbrManager with setMediaElement function."),cn.abrManager_.setMediaElement=function(){}),cn.abrManager_.configure(cn.config_.abr)),cn.currentAdaptationSetCriteria_=new shaka.media.PreferenceBasedCriteria(cn.config_.preferredAudioLanguage,cn.config_.preferredVariantRole,cn.config_.preferredAudioChannelCount),cn.currentTextLanguage_=cn.config_.preferredTextLanguage,cn.currentTextRole_=cn.config_.preferredTextRole,cn.currentTextForced_=cn.config_.preferForcedSubs,shaka.Player.applyPlayRange_(cn.manifest_.presentationTimeline,cn.config_.playRangeStart,cn.config_.playRangeEnd),cn.abrManager_.init(function(as,ds,Es){return cn.switch_(as,ds,Es)}),cn.abrManager_.setMediaElement(dn),shaka.util.StreamUtils.chooseCodecsAndFilterManifest(cn.manifest_,cn.config_.preferredVideoCodecs,cn.config_.preferredAudioCodecs,cn.config_.preferredAudioChannelCount,cn.config_.preferredDecodingAttributes),cn.streamingEngine_=cn.createStreamingEngine(),cn.streamingEngine_.configure(cn.config_.streaming),cn.loadMode_=shaka.Player.LoadMode.MEDIA_SOURCE,dn.textTracks&&cn.loadEventManager_.listen(dn.textTracks,"addtrack",function(as){if(as.track)switch(as=as.track,goog.asserts.assert(as instanceof TextTrack,"Wrong track type!"),as.kind){case"chapters":cn.activateChaptersTrack_(as)}}),cn.dispatchEvent(cn.makeEvent_(shaka.util.FakeEvent.EventName.Streaming)),wn=null,Pn=cn.streamingEngine_.getCurrentVariant(),Pn||(wn=cn.chooseVariant_(),goog.asserts.assert(wn,"Must choose an initial variant!")),Nn=[],Ln=Pn||wn,Fn=$jscomp.makeIterator([Ln.video,Ln.audio]),zn=Fn.next();!zn.done;zn=Fn.next())(Dn=zn.value)&&!Dn.segmentIndex&&Nn.push(Dn.createSegmentIndex());if(!(0<Nn.length)){ss.jumpTo(2);break}return ss.yield(Promise.all(Nn),2);case 2:if(cn.playhead_=cn.createPlayhead(sn.startTime),cn.playheadObservers_=cn.createPlayheadObserversForMSE_(),Kn=Math.max(cn.manifest_.minBufferTime,cn.config_.streaming.rebufferingGoal),cn.startBufferManagement_(Kn),Pn){ss.jumpTo(4);break}if(goog.asserts.assert(wn,"Must have choosen an initial variant!"),cn.switchVariant_(wn,!0,!1,0),!cn.config_.streaming.startAtSegmentBoundary){ss.jumpTo(5);break}return qn=cn.playhead_.getTime(),ss.yield(cn.adjustStartTime_(wn,qn),6);case 6:Zn=ss.yieldResult,cn.playhead_.setStartTime(Zn);case 5:cn.onAdaptation_(null,shaka.util.StreamUtils.variantToTrack(wn));case 4:return cn.playhead_.ready(),Yn=cn.getTextTracks().find(function(as){return as.active}),Yn||((Jn=cn.chooseTextStream_())&&cn.addTextStreamToSwitchHistory_(Jn,!0),wn&&cn.setInitialTextState_(wn,Jn),Jn&&cn.shouldStreamText_()&&cn.streamingEngine_.switchTextStream(Jn)),ss.yield(cn.streamingEngine_.start(),7);case 7:cn.config_.abr.enabled&&(cn.abrManager_.enable(),cn.onAbrStatusChanged_()),cn.filterManifestByCurrentVariant_(),cn.onTracksChanged_(),cn.updateAbrManagerVariants_(),rs=cn.manifest_.variants.some(function(as){return as.primary}),cn.config_.preferredAudioLanguage||rs||shaka.log.warning("No preferred audio language set.  We have chosen an arbitrary language initially"),cn.fullyLoaded_=!0,cn.loadEventManager_.listenOnce(dn,"loadedmetadata",function(){var as=Date.now()/1e3-ln.startTimeOfLoad;cn.stats_.setLoadLatency(as)}),ss.jumpToEnd()}})},shaka.Player.prototype.onInitializeSrcEqualsDrm_=function(sn,ln){var cn=this,dn,pn,vn,kn,Sn,wn,Pn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Nn){return Nn.nextAddress==1?(dn=shaka.util.ManifestParserUtils.ContentType,goog.asserts.assert(cn.networkingEngine_,"|onInitializeSrcEqualsDrm_| should never be called after |destroy|"),goog.asserts.assert(cn.config_,"|onInitializeSrcEqualsDrm_| should never be called after |destroy|"),pn=Date.now()/1e3,vn=!0,cn.drmEngine_=cn.createDrmEngine({netEngine:cn.networkingEngine_,onError:function(Ln){cn.onError_(Ln)},onKeyStatus:function(Ln){cn.onKeyStatus_(Ln)},onExpirationUpdated:function(Ln,Fn){cn.onExpirationUpdated_(Ln,Fn)},onEvent:function(Ln){cn.dispatchEvent(Ln),Ln.type==shaka.util.FakeEvent.EventName.DrmSessionUpdate&&vn&&(vn=!1,Ln=Date.now()/1e3-pn,cn.stats_.setDrmTime(Ln))}}),cn.drmEngine_.configure(cn.config_.drm),kn=ln.uri||"",Sn=shaka.media.ManifestParser.getExtension(kn),wn=shaka.Player.SRC_EQUAL_EXTENSIONS_TO_MIME_TYPES_[Sn],wn=="application/x-mpegurl"&&shaka.util.Platform.isApple()&&(wn="application/vnd.apple.mpegurl"),wn||(wn="video/mp4"),Pn={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:ln.mimeType?shaka.util.MimeUtils.getBasicType(ln.mimeType):wn,codecs:ln.mimeType?shaka.util.MimeUtils.getCodecs(ln.mimeType):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",label:null,type:dn.VIDEO,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},cn.drmEngine_.setSrcEquals(!0),Nn.yield(cn.drmEngine_.initForPlayback([Pn],[]),2)):Nn.yield(cn.drmEngine_.attach(sn.mediaElement),0)})},shaka.Player.prototype.onSrcEquals_=function(sn,ln){var cn=this;goog.asserts.assert(sn.mediaElement,"We should have a media element when loading."),goog.asserts.assert(ln.uri,"|has| should have a valid uri when loading."),goog.asserts.assert(!isNaN(ln.startTimeOfLoad),"|wants| should tell us when the load was originally requested"),goog.asserts.assert(this.video_==sn.mediaElement,"The video element should match our media element"),sn.uri=ln.uri,sn.startTime=ln.startTime,this.assetUri_=sn.uri;var dn=sn.mediaElement;this.playhead_=new shaka.media.SrcEqualsPlayhead(dn);var pn=!1;this.cleanupOnUnload_.push(function(){pn=!0}),sn.startTime!=null&&this.playhead_.setStartTime(sn.startTime),this.playRateController_=new shaka.media.PlayRateController({getRate:function(){return dn.playbackRate},getDefaultRate:function(){return dn.defaultPlaybackRate},setRate:function(Sn){dn.playbackRate=Sn},movePlayhead:function(Sn){dn.currentTime+=Sn}}),this.startBufferManagement_(this.config_.streaming.rebufferingGoal);var vn=function(){return cn.updateStateHistory_()};this.loadEventManager_.listen(dn,"playing",vn),this.loadEventManager_.listen(dn,"pause",vn),this.loadEventManager_.listen(dn,"ended",vn),this.loadEventManager_.listen(dn,"ratechange",function(){return cn.onRateChange_()}),dn.preload!="none"&&this.loadEventManager_.listenOnce(dn,"loadedmetadata",function(){var Sn=Date.now()/1e3-ln.startTimeOfLoad;cn.stats_.setLoadLatency(Sn)}),dn.audioTracks&&(this.loadEventManager_.listen(dn.audioTracks,"addtrack",function(){return cn.onTracksChanged_()}),this.loadEventManager_.listen(dn.audioTracks,"removetrack",function(){return cn.onTracksChanged_()}),this.loadEventManager_.listen(dn.audioTracks,"change",function(){return cn.onTracksChanged_()})),dn.textTracks&&(this.loadEventManager_.listen(dn.textTracks,"addtrack",function(Sn){if(Sn.track)switch(Sn=Sn.track,goog.asserts.assert(Sn instanceof TextTrack,"Wrong track type!"),Sn.kind){case"metadata":cn.processTimedMetadataSrcEqls_(Sn);break;case"chapters":cn.activateChaptersTrack_(Sn);break;default:cn.onTracksChanged_()}}),this.loadEventManager_.listen(dn.textTracks,"removetrack",function(){return cn.onTracksChanged_()}),this.loadEventManager_.listen(dn.textTracks,"change",function(){return cn.onTracksChanged_()})),vn=shaka.media.ManifestParser.getExtension(sn.uri),dn.src=this.cmcdManager_.appendSrcData(sn.uri,shaka.Player.SRC_EQUAL_EXTENSIONS_TO_MIME_TYPES_[vn]),(shaka.util.Platform.isTizen()||shaka.util.Platform.isWebOS())&&dn.load(),this.loadMode_=shaka.Player.LoadMode.SRC_EQUALS,this.dispatchEvent(this.makeEvent_(shaka.util.FakeEvent.EventName.Streaming));var kn=new shaka.util.PublicPromise;return shaka.util.MediaReadyState.waitForReadyState(dn,HTMLMediaElement.HAVE_METADATA,this.loadEventManager_,function(){cn.playhead_.ready(),kn.resolve()}),shaka.util.MediaReadyState.waitForReadyState(dn,HTMLMediaElement.HAVE_CURRENT_DATA,this.loadEventManager_,function(){var Sn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wn){if(wn.nextAddress==1)return cn.setupPreferredAudioOnSrc_(),Sn=cn.getFilteredTextTracks_(),Sn.find(function(Pn){return Pn.mode!="disabled"})?(0<Sn.length&&(cn.isTextVisible_=!0),wn.jumpTo(2)):wn.yield(new Promise(function(Pn){cn.loadEventManager_.listenOnce(dn.textTracks,"change",Pn),new shaka.util.Timer(Pn).tickAfter(1)}),2);if(pn)return wn.return();cn.setupPreferredTextOnSrc_(),wn.jumpToEnd()})}),dn.error?kn.reject(this.videoErrorToShakaError_()):dn.preload=="none"&&(shaka.log.alwaysWarn('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),kn.resolve()),this.loadEventManager_.listenOnce(dn,"error",function(){kn.reject(cn.videoErrorToShakaError_())}),new shaka.util.AbortableOperation(kn,function(){var Sn=new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.PLAYER,shaka.util.Error.Code.OPERATION_ABORTED);return kn.reject(Sn),Promise.resolve()}).chain(function(){cn.fullyLoaded_=!0})},shaka.Player.prototype.setupPreferredAudioOnSrc_=function(){var sn=this.config_.preferredAudioLanguage;if(sn!=""){this.selectAudioLanguage(sn);var ln=this.config_.preferredVariantRole;ln!=""&&this.selectAudioLanguage(sn,ln)}},shaka.Player.prototype.setupPreferredTextOnSrc_=function(){var sn=this.config_.preferredTextLanguage,ln=this.config_.preferForcedSubs;if(sn!=""){this.selectTextLanguage(sn,"",ln);var cn=this.config_.preferredTextRole;cn!=""&&this.selectTextLanguage(sn,cn,ln)}},shaka.Player.prototype.processTimedMetadataSrcEqls_=function(sn){var ln=this;if(sn.kind=="metadata"){sn.mode="hidden",this.loadEventManager_.listen(sn,"cuechange",function(){if(sn.activeCues)for(var dn=$jscomp.makeIterator(sn.activeCues),pn=dn.next();!pn.done;pn=dn.next())pn=pn.value,ln.dispatchMetadataEvent_(pn.startTime,pn.endTime,pn.type,pn.value),ln.adManager_&&ln.adManager_.onCueMetadataChange(pn.value)});var cn=new shaka.util.Timer(function(){var dn=ln.getMetadataTracks_();dn=$jscomp.makeIterator(dn);for(var pn=dn.next();!pn.done;pn=dn.next())pn.value.mode="hidden"}).tickNow().tickAfter(.5);this.cleanupOnUnload_.push(function(){cn.stop()})}},shaka.Player.prototype.processTimedMetadataMediaSrc_=function(sn,ln,cn){sn=$jscomp.makeIterator(sn);for(var dn=sn.next();!dn.done;dn=sn.next())if(dn=dn.value,dn.data&&dn.cueTime&&dn.frames){var pn=dn.cueTime+ln,vn=cn;vn&&pn>vn&&(vn=pn);for(var kn=$jscomp.makeIterator(dn.frames),Sn=kn.next();!Sn.done;Sn=kn.next())this.dispatchMetadataEvent_(pn,vn,"org.id3",Sn.value);this.adManager_&&this.adManager_.onHlsTimedMetadata(dn,pn)}},shaka.Player.prototype.dispatchMetadataEvent_=function(sn,ln,cn,dn){goog.asserts.assert(!ln||sn<=ln,"Metadata start time should be less or equal to the end time!");var pn=shaka.util.FakeEvent.EventName.Metadata;sn=new Map().set("startTime",sn).set("endTime",ln).set("metadataType",cn).set("payload",dn),this.dispatchEvent(this.makeEvent_(pn,sn))},shaka.Player.prototype.activateChaptersTrack_=function(sn){if(sn&&sn.kind=="chapters"){sn.mode="hidden";var ln=new shaka.util.Timer(function(){sn.mode="hidden"}).tickNow().tickAfter(.5);this.cleanupOnUnload_.push(function(){ln.stop()})}},shaka.Player.filterForAVVariants_=function(sn){var ln=function(cn){return cn.video&&cn.audio||cn.video&&cn.video.codecs.includes(",")};sn.variants.some(ln)&&(shaka.log.debug("Found variant with audio and video content, so filtering out audio-only content."),sn.variants=sn.variants.filter(ln))},shaka.Player.prototype.createDrmEngine=function(sn){return new shaka.media.DrmEngine(sn,this.config_.drm.updateExpirationTime)},shaka.Player.prototype.createNetworkingEngine=function(){var sn=this;return new shaka.net.NetworkingEngine(function(ln,cn){sn.abrManager_&&sn.abrManager_.segmentDownloaded(ln,cn)},function(ln,cn,dn){var pn=shaka.util.FakeEvent.EventName.DownloadHeadersReceived;ln=new Map().set("headers",ln).set("request",cn).set("requestType",dn),sn.dispatchEvent(sn.makeEvent_(pn,ln))},function(ln,cn,dn,pn){var vn=shaka.util.FakeEvent.EventName.DownloadFailed;ln=new Map().set("request",ln).set("error",cn).set("httpResponseCode",dn).set("aborted",pn),sn.dispatchEvent(sn.makeEvent_(vn,ln))})},shaka.Player.prototype.createPlayhead=function(sn){var ln=this;return goog.asserts.assert(this.manifest_,"Must have manifest"),goog.asserts.assert(this.video_,"Must have video"),new shaka.media.MediaSourcePlayhead(this.video_,this.manifest_,this.config_.streaming,sn,function(){return ln.onSeek_()},function(cn){return ln.dispatchEvent(cn)})},shaka.Player.prototype.createPlayheadObserversForMSE_=function(){var sn=this;goog.asserts.assert(this.manifest_,"Must have manifest"),goog.asserts.assert(this.regionTimeline_,"Must have region timeline"),goog.asserts.assert(this.video_,"Must have video element");var ln=new shaka.media.RegionObserver(this.regionTimeline_);ln.addEventListener("enter",function(dn){sn.onRegionEvent_(shaka.util.FakeEvent.EventName.TimelineRegionEnter,dn.region)}),ln.addEventListener("exit",function(dn){sn.onRegionEvent_(shaka.util.FakeEvent.EventName.TimelineRegionExit,dn.region)}),ln.addEventListener("skip",function(dn){var pn=dn.region;dn.seeking||(sn.onRegionEvent_(shaka.util.FakeEvent.EventName.TimelineRegionEnter,pn),sn.onRegionEvent_(shaka.util.FakeEvent.EventName.TimelineRegionExit,pn))});var cn=new shaka.media.PlayheadObserverManager(this.video_);return cn.manage(ln),this.qualityObserver_&&cn.manage(this.qualityObserver_),cn},shaka.Player.prototype.startBufferManagement_=function(sn){var ln=this;goog.asserts.assert(!this.bufferObserver_,"No buffering observer should exist before initialization."),goog.asserts.assert(!this.bufferPoller_,"No buffer timer should exist before initialization."),this.bufferObserver_=new shaka.media.BufferingObserver(1,2),this.bufferObserver_.setState(shaka.media.BufferingObserver.State.STARVING),this.updateBufferingSettings_(sn),this.updateBufferState_(),this.bufferPoller_=new shaka.util.Timer(function(){ln.pollBufferState_()}).tickEvery(.25)},shaka.Player.prototype.updateBufferingSettings_=function(sn){this.bufferObserver_.setThresholds(sn,Math.min(shaka.Player.TYPICAL_BUFFERING_THRESHOLD_,sn/2))},shaka.Player.prototype.pollBufferState_=function(){switch(goog.asserts.assert(this.video_,"Need a media element to update the buffering observer"),goog.asserts.assert(this.bufferObserver_,"Need a buffering observer to update"),this.loadMode_){case shaka.Player.LoadMode.SRC_EQUALS:var sn=this.isBufferedToEndSrc_();break;case shaka.Player.LoadMode.MEDIA_SOURCE:sn=this.isBufferedToEndMS_();break;default:sn=!1}var ln=shaka.media.TimeRangesUtils.bufferedAheadOf(this.video_.buffered,this.video_.currentTime);this.bufferObserver_.update(ln,sn)&&this.updateBufferState_()},shaka.Player.prototype.createMediaSourceEngine=function(sn,ln,cn,dn){return new shaka.media.MediaSourceEngine(sn,ln,cn,dn)},shaka.Player.prototype.createCmcd_=function(){var sn=this;return new shaka.util.CmcdManager({getBandwidthEstimate:function(){return sn.abrManager_?sn.abrManager_.getBandwidthEstimate():NaN},getBufferedInfo:function(){return sn.getBufferedInfo()},getCurrentTime:function(){return sn.video_?sn.video_.currentTime:0},getVariantTracks:function(){return sn.getVariantTracks()},getPlaybackRate:function(){return sn.getPlaybackRate()},isLive:function(){return sn.isLive()}},this.config_.cmcd)},shaka.Player.prototype.createStreamingEngine=function(){var sn=this;return goog.asserts.assert(this.abrManager_&&this.mediaSourceEngine_&&this.cmcdManager_&&this.manifest_,"Must not be destroyed"),new shaka.media.StreamingEngine(this.manifest_,{getPresentationTime:function(){return sn.playhead_?sn.playhead_.getTime():0},getBandwidthEstimate:function(){return sn.abrManager_.getBandwidthEstimate()},modifySegmentRequest:function(ln,cn){sn.cmcdManager_.applySegmentData(ln,cn)},mediaSourceEngine:this.mediaSourceEngine_,netEngine:this.networkingEngine_,onError:function(ln){return sn.onError_(ln)},onEvent:function(ln){return sn.dispatchEvent(ln)},onManifestUpdate:function(){return sn.onManifestUpdate_()},onSegmentAppended:function(ln,cn,dn){sn.onSegmentAppended_(ln,cn,dn)},onInitSegmentAppended:function(ln,cn){(cn=cn.getMediaQuality())&&sn.qualityObserver_&&sn.qualityObserver_.addMediaQualityChange(cn,ln)},beforeAppendSegment:function(ln,cn){return sn.drmEngine_.parseInbandPssh(ln,cn)},onMetadata:function(ln,cn,dn){sn.processTimedMetadataMediaSrc_(ln,cn,dn)}})},shaka.Player.prototype.configure=function(sn,ln){goog.asserts.assert(this.config_,"Config must not be null!"),goog.asserts.assert(typeof sn=="object"||arguments.length==2,"String configs should have values!"),arguments.length==2&&typeof sn=="string"&&(sn=shaka.util.ConfigUtils.convertToConfigObject(sn,ln)),goog.asserts.assert(typeof sn=="object","Should be an object!"),sn.streaming&&"forceTransmuxTS"in sn.streaming&&(shaka.Deprecate.deprecateFeature(5,"streaming.forceTransmuxTS configuration","Please Use streaming.forceTransmux instead."),sn.streaming.forceTransmux=sn.streaming.forceTransmuxTS,delete sn.streaming.forceTransmuxTS),sn.streaming&&sn.streaming.lowLatencyMode&&(sn.streaming.inaccurateManifestTolerance==null&&(sn.streaming.inaccurateManifestTolerance=0),sn.streaming.rebufferingGoal==null&&(sn.streaming.rebufferingGoal=.01));var cn=shaka.util.PlayerConfiguration.mergeConfigObjects(this.config_,sn,this.defaultConfig_());return this.applyConfig_(),cn},shaka.Player.prototype.applyConfig_=function(){if(this.parser_){var sn=shaka.util.ObjectUtils.cloneObject(this.config_.manifest);this.video_&&this.video_.nodeName==="AUDIO"&&(sn.disableVideo=!0),this.parser_.configure(sn)}if(this.drmEngine_&&this.drmEngine_.configure(this.config_.drm),this.streamingEngine_){this.streamingEngine_.configure(this.config_.streaming);try{this.filterManifestWithRestrictions_(this.manifest_)}catch(cn){this.onError_(cn)}this.abrManager_&&this.updateAbrManagerVariants_(),!(sn=this.streamingEngine_.getCurrentVariant())||sn.allowedByApplication&&sn.allowedByKeySystem||(shaka.log.debug("Choosing new variant after changing configuration"),this.chooseVariantAndSwitch_())}if(this.networkingEngine_&&this.networkingEngine_.setForceHTTPS(this.config_.streaming.forceHTTPS),this.mediaSourceEngine_&&(this.mediaSourceEngine_.configure(this.config_.mediaSource),this.mediaSourceEngine_.setSegmentRelativeVttTiming(this.config_.manifest.segmentRelativeVttTiming),sn=this.config_.textDisplayFactory,this.lastTextFactory_!=sn)){var ln=sn();this.mediaSourceEngine_.setTextDisplayer(ln),this.lastTextFactory_=sn,this.streamingEngine_&&this.streamingEngine_.reloadTextStream()}this.abrManager_&&(this.abrManager_.configure(this.config_.abr),this.config_.abr.enabled?this.abrManager_.enable():this.abrManager_.disable(),this.onAbrStatusChanged_()),this.bufferObserver_&&(sn=this.config_.streaming.rebufferingGoal,this.manifest_&&(sn=Math.max(sn,this.manifest_.minBufferTime)),this.updateBufferingSettings_(sn)),this.manifest_&&shaka.Player.applyPlayRange_(this.manifest_.presentationTimeline,this.config_.playRangeStart,this.config_.playRangeEnd)},shaka.Player.prototype.getConfiguration=function(){goog.asserts.assert(this.config_,"Config must not be null!");var sn=this.defaultConfig_();return shaka.util.PlayerConfiguration.mergeConfigObjects(sn,this.config_,this.defaultConfig_()),sn},shaka.Player.prototype.getSharedConfiguration=function(){return goog.asserts.assert(this.config_,"Cannot call getSharedConfiguration after call destroy!"),this.config_},shaka.Player.prototype.getBufferFullness=function(){if(this.video_){var sn=this.video_.buffered.length;sn=sn?this.video_.buffered.end(sn-1):0;var ln=this.getConfiguration().streaming.bufferingGoal;if(ln=Math.min(this.video_.currentTime+ln,this.seekRange().end),sn>=ln)return 1;if(!(sn<=this.video_.currentTime)&&sn<ln)return(sn-this.video_.currentTime)/(ln-this.video_.currentTime)}return 0},shaka.Player.prototype.resetConfiguration=function(){goog.asserts.assert(this.config_,"Cannot be destroyed");for(var sn in this.config_)delete this.config_[sn];shaka.util.PlayerConfiguration.mergeConfigObjects(this.config_,this.defaultConfig_(),this.defaultConfig_()),this.applyConfig_()},shaka.Player.prototype.getLoadMode=function(){return this.loadMode_},shaka.Player.prototype.getMediaElement=function(){return this.video_},shaka.Player.prototype.getNetworkingEngine=function(){return this.networkingEngine_},shaka.Player.prototype.getAssetUri=function(){return this.assetUri_},shaka.Player.prototype.getAdManager=function(){return this.adManager_?this.adManager_:null},shaka.Player.prototype.isLive=function(){return this.manifest_?this.manifest_.presentationTimeline.isLive():this.video_&&this.video_.src?this.video_.duration==1/0:!1},shaka.Player.prototype.isInProgress=function(){return this.manifest_?this.manifest_.presentationTimeline.isInProgress():!1},shaka.Player.prototype.isAudioOnly=function(){if(this.manifest_){var sn=this.manifest_.variants;return sn.length?!sn[0].video:!1}return this.video_&&this.video_.src?this.video_.videoTracks?this.video_.videoTracks.length==0:this.video_.videoHeight==0:!1},shaka.Player.prototype.isLowLatencyMode_=function(){return this.config_.streaming.lowLatencyMode},shaka.Player.prototype.isAutoLowLatencyMode_=function(){return this.config_.streaming.autoLowLatencyMode},shaka.Player.prototype.seekRange=function(){if(!this.fullyLoaded_)return{start:0,end:0};if(this.manifest_){var sn=this.manifest_.presentationTimeline;return{start:sn.getSeekRangeStart(),end:sn.getSeekRangeEnd()}}return this.video_&&this.video_.src&&(sn=this.video_.seekable,sn.length)?{start:sn.start(0),end:sn.end(sn.length-1)}:{start:0,end:0}},shaka.Player.prototype.goToLive=function(){this.isLive()?this.video_.currentTime=this.seekRange().end:shaka.log.warning("goToLive is for live streams!")},shaka.Player.prototype.keySystem=function(){return shaka.media.DrmEngine.keySystem(this.drmInfo())},shaka.Player.prototype.drmInfo=function(){return this.drmEngine_?this.drmEngine_.getDrmInfo():null},shaka.Player.prototype.getDrmEngine=function(){return this.drmEngine_},shaka.Player.prototype.getExpiration=function(){return this.drmEngine_?this.drmEngine_.getExpiration():1/0},shaka.Player.prototype.getKeyStatuses=function(){return this.drmEngine_?this.drmEngine_.getKeyStatuses():{}},shaka.Player.prototype.isBuffering=function(){var sn=shaka.media.BufferingObserver.State;return this.bufferObserver_?this.bufferObserver_.getState()==sn.STARVING:!1},shaka.Player.prototype.getPlaybackRate=function(){return this.video_?this.playRateController_?this.playRateController_.getRealRate():1:0},shaka.Player.prototype.trickPlay=function(sn){goog.asserts.assert(sn!=0,"Should never set a trick play rate of 0!"),sn==0?shaka.log.alwaysWarn("A trick play rate of 0 is unsupported!"):(this.video_.paused&&this.video_.play(),this.playRateController_.set(sn),this.loadMode_==shaka.Player.LoadMode.MEDIA_SOURCE&&(this.abrManager_.playbackRateChanged(sn),this.streamingEngine_.setTrickPlay(1<Math.abs(sn))))},shaka.Player.prototype.cancelTrickPlay=function(){var sn=this.playRateController_.getDefaultRate();this.loadMode_==shaka.Player.LoadMode.SRC_EQUALS&&this.playRateController_.set(sn),this.loadMode_==shaka.Player.LoadMode.MEDIA_SOURCE&&(this.playRateController_.set(sn),this.abrManager_.playbackRateChanged(sn),this.streamingEngine_.setTrickPlay(!1))},shaka.Player.prototype.getVariantTracks=function(){if(this.manifest_){for(var sn=this.streamingEngine_?this.streamingEngine_.getCurrentVariant():null,ln=[],cn=0,dn=$jscomp.makeIterator(this.manifest_.variants),pn=dn.next();!pn.done;pn=dn.next())if(pn=pn.value,shaka.util.StreamUtils.isPlayable(pn)){var vn=shaka.util.StreamUtils.variantToTrack(pn);vn.active=pn==sn,vn.active||cn==1||sn==null||pn.video!=sn.video||pn.audio!=sn.audio||(vn.active=!0),vn.active&&cn++,ln.push(vn)}return goog.asserts.assert(1>=cn,"It should only have one active track"),ln}return this.video_&&this.video_.audioTracks?Array.from(this.video_.audioTracks).map(function(kn){return shaka.util.StreamUtils.html5AudioTrackToTrack(kn)}):[]},shaka.Player.prototype.getTextTracks=function(){if(this.manifest_){for(var sn=this.streamingEngine_?this.streamingEngine_.getCurrentTextStream():null,ln=[],cn=$jscomp.makeIterator(this.manifest_.textStreams),dn=cn.next();!dn.done;dn=cn.next()){dn=dn.value;var pn=shaka.util.StreamUtils.textStreamToTrack(dn);pn.active=dn==sn,ln.push(pn)}return ln}if(this.video_&&this.video_.src&&this.video_.textTracks){sn=this.getFilteredTextTracks_();var vn=shaka.util.StreamUtils;return sn.map(function(kn){return vn.html5TextTrackToTrack(kn)})}return[]},shaka.Player.prototype.getImageTracks=function(){if(this.manifest_){var sn=shaka.util.StreamUtils;return this.manifest_.imageStreams.map(function(ln){return sn.imageStreamToTrack(ln)})}return[]},shaka.Player.prototype.getThumbnails=function(sn,ln){var cn=this,dn,pn,vn,kn,Sn,wn,Pn,Nn,Ln,Fn,zn,Dn,Kn,qn,Zn,Yn,Jn,rs,ss,as;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ds){return ds.nextAddress==1?cn.manifest_?(dn=cn.manifest_.imageStreams.find(function(Es){return Es.id==sn}))?dn.segmentIndex?ds.jumpTo(3):ds.yield(dn.createSegmentIndex(),3):ds.return(null):ds.jumpTo(2):ds.nextAddress!=2?(pn=dn.segmentIndex.find(ln),pn==null?ds.return(null):(vn=dn.segmentIndex.get(pn),kn=vn.getTilesLayout()||dn.tilesLayout,Sn=/(\d+)x(\d+)/.exec(kn),Sn?(wn=dn.width||0,Pn=dn.height||0,Nn=parseInt(Sn[1],10),Ln=parseInt(Sn[2],10),Fn=wn/Nn,zn=Pn/Ln,Dn=Nn*Ln,Kn=vn.trueEndTime-vn.startTime,qn=vn.getTileDuration()||Kn/Dn,Zn=vn.startTime,Jn=Yn=0,1<Dn&&(rs=Math.floor((ln-vn.startTime)/qn),Zn=vn.startTime+rs*qn,Yn=rs%Nn*Fn,Jn=Math.floor(rs/Nn)*zn),ss=!1,(as=vn.getThumbnailSprite())&&(ss=!0,zn=as.height,Yn=as.positionX,Jn=as.positionY,Fn=as.width),ds.return({imageHeight:Pn,imageWidth:wn,height:zn,positionX:Yn,positionY:Jn,startTime:Zn,duration:qn,uris:vn.getUris(),width:Fn,sprite:ss})):(shaka.log.warning("Tiles layout does not contain a valid format  (columns x rows)"),ds.return(null)))):ds.return(null)})},shaka.Player.prototype.selectTextTrack=function(sn){if(this.manifest_&&this.streamingEngine_){var ln=this.manifest_.textStreams.find(function(dn){return dn.id==sn.id});ln?ln==this.streamingEngine_.getCurrentTextStream()?shaka.log.debug("Text track already selected."):(this.addTextStreamToSwitchHistory_(ln,!1),this.streamingEngine_.switchTextStream(ln),this.onTextChanged_(),this.currentTextLanguage_=ln.language):shaka.log.error("No stream with id",sn.id)}else if(this.video_&&this.video_.src&&this.video_.textTracks){ln=this.getFilteredTextTracks_(),ln=$jscomp.makeIterator(ln);for(var cn=ln.next();!cn.done;cn=ln.next())cn=cn.value,shaka.util.StreamUtils.html5TrackId(cn)==sn.id?cn.mode=this.isTextVisible_?"showing":"hidden":cn.mode="disabled";this.onTextChanged_()}},shaka.Player.prototype.selectVariantTrack=function(sn,ln,cn){if(ln=ln===void 0?!1:ln,cn=cn===void 0?0:cn,this.manifest_&&this.streamingEngine_){this.config_.abr.enabled&&shaka.log.alwaysWarn("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var dn=this.manifest_.variants.find(function(pn){return pn.id==sn.id});dn?shaka.util.StreamUtils.isPlayable(dn)?(this.switchVariant_(dn,!1,ln,cn),this.currentAdaptationSetCriteria_=new shaka.media.ExampleBasedCriteria(dn),this.updateAbrManagerVariants_()):shaka.log.error("Unable to switch to restricted track",sn.id):shaka.log.error("No variant with id",sn.id)}else if(this.video_&&this.video_.audioTracks){for(ln=Array.from(this.video_.audioTracks),ln=$jscomp.makeIterator(ln),cn=ln.next();!cn.done;cn=ln.next())if(cn=cn.value,shaka.util.StreamUtils.html5TrackId(cn)==sn.id){this.switchHtml5Track_(cn);break}}},shaka.Player.prototype.getAudioLanguagesAndRoles=function(){return shaka.Player.getLanguageAndRolesFrom_(this.getVariantTracks())},shaka.Player.prototype.getTextLanguagesAndRoles=function(){return shaka.Player.getLanguageAndRolesFrom_(this.getTextTracks())},shaka.Player.prototype.getAudioLanguages=function(){return Array.from(shaka.Player.getLanguagesFrom_(this.getVariantTracks()))},shaka.Player.prototype.getTextLanguages=function(){return Array.from(shaka.Player.getLanguagesFrom_(this.getTextTracks()))},shaka.Player.prototype.selectAudioLanguage=function(sn,ln,cn){cn=cn===void 0?0:cn;var dn=shaka.util.LanguageUtils;if(this.manifest_&&this.playhead_){this.currentAdaptationSetCriteria_=new shaka.media.PreferenceBasedCriteria(sn,ln||"",cn,""),ln=function(wn,Pn){return wn.video||Pn.video?wn.video&&Pn.video?Math.abs((wn.video.height||0)-(Pn.video.height||0))+Math.abs((wn.video.width||0)-(Pn.video.width||0)):1/0:0},dn=this.streamingEngine_.getCurrentVariant(),cn=this.currentAdaptationSetCriteria_.create(this.manifest_.variants),sn=null,cn=$jscomp.makeIterator(cn.values());for(var pn=cn.next();!pn.done;pn=cn.next())pn=pn.value,(!sn||ln(sn,dn)>ln(pn,dn))&&(sn=pn);sn?(ln=shaka.util.StreamUtils.variantToTrack(sn),this.selectVariantTrack(ln,!0)):this.chooseVariantAndSwitch_()}else if(this.video_&&this.video_.audioTracks){var vn=Array.from(this.video_.audioTracks);sn=dn.normalize(sn),pn=cn=null,vn=$jscomp.makeIterator(vn);for(var kn=vn.next();!kn.done;kn=vn.next()){kn=kn.value;var Sn=shaka.util.StreamUtils.html5AudioTrackToTrack(kn);dn.normalize(Sn.language)==sn&&(cn=kn,ln?Sn.roles.includes(ln)&&(pn=kn):Sn.roles.length==0&&(pn=kn))}pn?this.switchHtml5Track_(pn):cn&&this.switchHtml5Track_(cn)}},shaka.Player.prototype.selectTextLanguage=function(sn,ln,cn){cn=cn===void 0?!1:cn;var dn=shaka.util.LanguageUtils;if(this.manifest_&&this.playhead_)this.currentTextLanguage_=sn,this.currentTextRole_=ln||"",this.currentTextForced_=cn,(sn=this.chooseTextStream_())&&(sn==this.streamingEngine_.getCurrentTextStream()?shaka.log.debug("Text track already selected."):(this.addTextStreamToSwitchHistory_(sn,!1),this.shouldStreamText_()&&(this.streamingEngine_.switchTextStream(sn),this.onTextChanged_())));else{var pn=dn.normalize(sn);(sn=this.getTextTracks().find(function(vn){return dn.normalize(vn.language)==pn&&(!ln||vn.roles.includes(ln))&&vn.forced==cn}))&&this.selectTextTrack(sn)}},shaka.Player.prototype.selectVariantsByLabel=function(sn){if(this.manifest_&&this.playhead_){for(var ln=null,cn=$jscomp.makeIterator(this.manifest_.variants),dn=cn.next();!dn.done;dn=cn.next())if(dn=dn.value,dn.audio.label==sn){ln=dn;break}ln==null?shaka.log.warning("No variants were found with label: "+sn+". Ignoring the request to switch."):(this.currentAdaptationSetCriteria_=new shaka.media.PreferenceBasedCriteria(ln.language,"",0,sn),this.chooseVariantAndSwitch_())}else if(this.video_&&this.video_.audioTracks){for(cn=Array.from(this.video_.audioTracks),ln=null,cn=$jscomp.makeIterator(cn),dn=cn.next();!dn.done;dn=cn.next())dn=dn.value,dn.label==sn&&(ln=dn);ln&&this.switchHtml5Track_(ln)}},shaka.Player.prototype.isTextTrackVisible=function(){var sn=this.isTextVisible_;if(this.mediaSourceEngine_){var ln=this.mediaSourceEngine_.getTextDisplayer().isTextVisible();return goog.asserts.assert(ln==sn,"text visibility has fallen out of sync"),ln}return this.video_&&this.video_.src&&this.video_.textTracks?this.getFilteredTextTracks_().some(function(cn){return cn.mode=="showing"}):sn},shaka.Player.prototype.getChaptersTracks=function(){if(this.video_&&this.video_.src&&this.video_.textTracks){var sn=this.getChaptersTracks_(),ln=shaka.util.StreamUtils;return sn.map(function(cn){return ln.html5TextTrackToTrack(cn)})}return[]},shaka.Player.prototype.getChapters=function(sn){var ln=shaka.util.LanguageUtils,cn=ln.normalize(sn),dn=this.getChaptersTracks_().filter(function(wn){return ln.normalize(wn.language)==cn});if(!dn||!dn.length)return[];sn=[];var pn=new Set;dn=$jscomp.makeIterator(dn);for(var vn=dn.next();!vn.done;vn=dn.next())if((vn=vn.value)&&vn.cues){vn=$jscomp.makeIterator(vn.cues);for(var kn=vn.next();!kn.done;kn=vn.next()){var Sn=kn.value;(kn=Sn.id)&&kn!=""||(kn=Sn.startTime+"-"+Sn.endTime+"-"+Sn.text),Sn={id:kn,title:Sn.text,startTime:Sn.startTime,endTime:Sn.endTime},pn.has(kn)||(sn.push(Sn),pn.add(kn))}}return sn},shaka.Player.prototype.getFilteredTextTracks_=function(){return goog.asserts.assert(this.video_.textTracks,"TextTracks should be valid."),Array.from(this.video_.textTracks).filter(function(sn){return sn.kind!="metadata"&&sn.kind!="chapters"&&sn.label!=shaka.Player.TextTrackLabel})},shaka.Player.prototype.getMetadataTracks_=function(){return goog.asserts.assert(this.video_.textTracks,"TextTracks should be valid."),Array.from(this.video_.textTracks).filter(function(sn){return sn.kind=="metadata"})},shaka.Player.prototype.getChaptersTracks_=function(){return goog.asserts.assert(this.video_.textTracks,"TextTracks should be valid."),Array.from(this.video_.textTracks).filter(function(sn){return sn.kind=="chapters"})},shaka.Player.prototype.setTextTrackVisibility=function(sn){if(sn=!!sn,this.isTextVisible_!=sn){if(this.isTextVisible_=sn,this.loadMode_==shaka.Player.LoadMode.MEDIA_SOURCE)this.mediaSourceEngine_.getTextDisplayer().setTextVisibility(sn),this.config_.streaming.alwaysStreamText||(sn?this.streamingEngine_.getCurrentTextStream()||(sn=shaka.util.StreamUtils.filterStreamsByLanguageAndRole(this.manifest_.textStreams,this.currentTextLanguage_,this.currentTextRole_,this.currentTextForced_),0<sn.length&&(this.streamingEngine_.switchTextStream(sn[0]),this.onTextChanged_())):this.streamingEngine_.unloadTextStream());else if(this.video_&&this.video_.src&&this.video_.textTracks){var ln=this.getFilteredTextTracks_();ln=$jscomp.makeIterator(ln);for(var cn=ln.next();!cn.done;cn=ln.next())cn=cn.value,cn.mode!="disabled"&&(cn.mode=sn?"showing":"hidden")}this.onTextTrackVisibility_()}},shaka.Player.prototype.getPlayheadTimeAsDate=function(){if(!this.isLive())return shaka.log.warning("getPlayheadTimeAsDate is for live streams!"),null;var sn=this.walker_.getCurrentPayload(),ln=0;if(this.playhead_)ln=this.playhead_.getTime();else if(sn){if(sn.startTime==null)return new Date;ln=sn.startTime}return this.manifest_?(sn=this.manifest_.presentationTimeline.getPresentationStartTime(),new Date(1e3*(sn+ln))):this.video_&&this.video_.getStartDate?(sn=this.video_.getStartDate(),isNaN(sn.getTime())?(shaka.log.warning("EXT-X-PROGRAM-DATETIME required to get playhead time as Date!"),null):new Date(sn.getTime()+1e3*ln)):(shaka.log.warning("No way to get playhead time as Date!"),null)},shaka.Player.prototype.getPresentationStartTimeAsDate=function(){if(!this.isLive())return shaka.log.warning("getPresentationStartTimeAsDate is for live streams!"),null;if(this.manifest_){var sn=this.manifest_.presentationTimeline.getPresentationStartTime();return goog.asserts.assert(sn!=null,"Presentation start time should not be null!"),new Date(1e3*sn)}return this.video_&&this.video_.getStartDate?(sn=this.video_.getStartDate(),isNaN(sn.getTime())?(shaka.log.warning("EXT-X-PROGRAM-DATETIME required to get presentation start time as Date!"),null):sn):(shaka.log.warning("No way to get presentation start time as Date!"),null)},shaka.Player.prototype.getBufferedInfo=function(){if(this.loadMode_==shaka.Player.LoadMode.MEDIA_SOURCE)return this.mediaSourceEngine_.getBufferedInfo();var sn={total:[],audio:[],video:[],text:[]};return this.loadMode_==shaka.Player.LoadMode.SRC_EQUALS&&(sn.total=shaka.media.TimeRangesUtils.getBufferedInfo(this.video_.buffered)),sn},shaka.Player.prototype.getStats=function(){if(this.loadMode_!=shaka.Player.LoadMode.MEDIA_SOURCE&&this.loadMode_!=shaka.Player.LoadMode.SRC_EQUALS)return shaka.util.Stats.getEmptyBlob();this.updateStateHistory_(),goog.asserts.assert(this.video_,"If we have stats, we should have video_");var sn=this.video_,ln=sn.currentTime/sn.duration;if(isNaN(ln)||this.stats_.setCompletionPercent(Math.round(100*ln)),this.playhead_&&(this.stats_.setGapsJumped(this.playhead_.getGapsJumped()),this.stats_.setStallsDetected(this.playhead_.getStallsDetected())),sn.getVideoPlaybackQuality&&(ln=sn.getVideoPlaybackQuality(),this.stats_.setDroppedFrames(Number(ln.droppedVideoFrames),Number(ln.totalVideoFrames)),this.stats_.setCorruptedFrames(Number(ln.corruptedVideoFrames))),ln=this.drmEngine_?this.drmEngine_.getLicenseTime():NaN,this.stats_.setLicenseTime(ln),this.loadMode_==shaka.Player.LoadMode.MEDIA_SOURCE){if(ln=this.streamingEngine_.getCurrentVariant()){var cn=(this.playRateController_?this.playRateController_.getRealRate():1)*ln.bandwidth;this.stats_.setCurrentStreamBandwidth(cn)}ln&&ln.video&&this.stats_.setResolution(ln.video.width||NaN,ln.video.height||NaN),this.isLive()&&(ln=this.getPresentationStartTimeAsDate().valueOf()+1e3*this.seekRange().end,ln=(Date.now()-ln)/1e3,this.stats_.setLiveLatency(ln)),this.manifest_&&this.manifest_.presentationTimeline&&(ln=this.manifest_.presentationTimeline.getMaxSegmentDuration(),this.stats_.setMaxSegmentDuration(ln)),ln=this.abrManager_.getBandwidthEstimate(),this.stats_.setBandwidthEstimate(ln)}return this.loadMode_==shaka.Player.LoadMode.SRC_EQUALS&&this.stats_.setResolution(sn.videoWidth||NaN,sn.videoHeight||NaN),this.stats_.getBlob()},shaka.Player.prototype.addTextTrackAsync=function(sn,ln,cn,dn,pn,vn,kn){kn=kn===void 0?!1:kn;var Sn=this,wn,Pn,Nn,Ln,Fn,zn,Dn,Kn,qn,Zn,Yn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Jn){switch(Jn.nextAddress){case 1:if(Sn.loadMode_!=shaka.Player.LoadMode.MEDIA_SOURCE&&Sn.loadMode_!=shaka.Player.LoadMode.SRC_EQUALS)throw shaka.log.error("Must call load() and wait for it to resolve before adding text tracks."),new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.PLAYER,shaka.util.Error.Code.CONTENT_NOT_LOADED);if(dn){Jn.jumpTo(2);break}return Jn.yield(Sn.getTextMimetype_(sn),3);case 3:dn=Jn.yieldResult;case 2:if(wn=[],Sn.adManager_)try{wn=Sn.adManager_.getServerSideCuePoints()}catch{}if(Sn.loadMode_!=shaka.Player.LoadMode.SRC_EQUALS){Jn.jumpTo(4);break}return kn&&(cn="forced"),Jn.yield(Sn.addSrcTrackElement_(sn,ln,cn,dn,vn||"",wn),5);case 5:if(Pn=Sn.getTextTracks(),Nn=Pn.find(function(rs){return rs.language==ln&&rs.label==(vn||"")&&rs.kind==cn}))return Sn.onTracksChanged_(),Jn.return(Nn);throw shaka.log.error("Cannot add this text when loaded with src="),new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS);case 4:if(Ln=shaka.util.ManifestParserUtils.ContentType,Fn=Sn.manifest_.presentationTimeline.getDuration(),Fn==1/0)throw new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM);if(!wn.length){Jn.jumpTo(6);break}return goog.asserts.assert(Sn.networkingEngine_,"Need networking engine."),Jn.yield(Sn.getTextData_(sn,Sn.networkingEngine_,Sn.config_.streaming.retryParameters),7);case 7:zn=Jn.yieldResult,Dn=Sn.convertToWebVTT_(zn,dn,wn),Kn=new Blob([Dn],{type:"text/vtt"}),sn=shaka.media.MediaSourceEngine.createObjectURL(Kn),dn="text/vtt";case 6:if(qn={id:Sn.nextExternalStreamId_++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:shaka.media.SegmentIndex.forSingleSegment(0,Fn,[sn]),mimeType:dn||"",codecs:pn||"",kind:cn,encrypted:!1,drmInfos:[],keyIds:new Set,language:ln,label:vn||null,type:Ln.TEXT,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!kn,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},Zn=shaka.util.MimeUtils.getFullType(qn.mimeType,qn.codecs),Yn=shaka.text.TextEngine.isTypeSupported(Zn),!Yn)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.MISSING_TEXT_PLUGIN,dn);return Sn.manifest_.textStreams.push(qn),Sn.onTracksChanged_(),Jn.return(shaka.util.StreamUtils.textStreamToTrack(qn))}})},shaka.Player.prototype.addThumbnailsTrack=function(sn,ln){var cn=this,dn,pn,vn,kn,Sn,wn,Pn,Nn,Ln,Fn,zn,Dn,Kn,qn,Zn,Yn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Jn){switch(Jn.nextAddress){case 1:if(cn.loadMode_!=shaka.Player.LoadMode.MEDIA_SOURCE&&cn.loadMode_!=shaka.Player.LoadMode.SRC_EQUALS)throw shaka.log.error("Must call load() and wait for it to resolve before adding image tracks."),new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.PLAYER,shaka.util.Error.Code.CONTENT_NOT_LOADED);if(cn.loadMode_==shaka.Player.LoadMode.SRC_EQUALS)throw shaka.log.error("Cannot add this thumbnail track when loaded with src="),new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_SRC_EQUALS);if(ln){Jn.jumpTo(2);break}return Jn.yield(cn.getTextMimetype_(sn),3);case 3:ln=Jn.yieldResult;case 2:if(ln!="text/vtt")throw new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.UNSUPPORTED_EXTERNAL_THUMBNAILS_URI,sn);if(dn=shaka.util.ManifestParserUtils.ContentType,pn=cn.manifest_.presentationTimeline.getDuration(),pn==1/0)throw new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM);return goog.asserts.assert(cn.networkingEngine_,"Need networking engine."),Jn.yield(cn.getTextData_(sn,cn.networkingEngine_,cn.config_.streaming.retryParameters),4);case 4:if(vn=Jn.yieldResult,kn=shaka.text.TextEngine.findParser(ln),!kn)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.MISSING_TEXT_PLUGIN,ln);for(Sn=kn(),wn={periodStart:0,segmentStart:0,segmentEnd:pn,vttOffset:0},Pn=shaka.util.BufferUtils.toUint8(vn),Nn=Sn.parseMedia(Pn,wn),Ln=[],Fn={},zn=$jscomp.makeIterator(Nn),Dn=zn.next();!Dn.done;Fn={$jscomp$loop$prop$imageUri$711:Fn.$jscomp$loop$prop$imageUri$711},Dn=zn.next())Kn=Dn.value,Fn.$jscomp$loop$prop$imageUri$711=shaka.util.ManifestParserUtils.resolveUris([sn],[Kn.payload])[0],qn=new shaka.media.SegmentReference(Kn.startTime,Kn.endTime,function(rs){return function(){return[rs.$jscomp$loop$prop$imageUri$711]}}(Fn),0,null,null,0,0,1/0),Fn.$jscomp$loop$prop$imageUri$711.includes("#xywh")&&(Zn=Fn.$jscomp$loop$prop$imageUri$711.split("#xywh=")[1].split(","),Zn.length===4&&qn.setThumbnailSprite({height:parseInt(Zn[3],10),positionX:parseInt(Zn[0],10),positionY:parseInt(Zn[1],10),width:parseInt(Zn[2],10)})),Ln.push(qn);return Yn={id:cn.nextExternalStreamId_++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new shaka.media.SegmentIndex(Ln),mimeType:ln||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",label:null,type:dn.IMAGE,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1"},cn.manifest_.imageStreams.push(Yn),cn.onTracksChanged_(),Jn.return(shaka.util.StreamUtils.imageStreamToTrack(Yn))}})},shaka.Player.prototype.addChaptersTrack=function(sn,ln,cn){var dn=this,pn,vn,kn,Sn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wn){switch(wn.nextAddress){case 1:if(dn.loadMode_!=shaka.Player.LoadMode.MEDIA_SOURCE&&dn.loadMode_!=shaka.Player.LoadMode.SRC_EQUALS)throw shaka.log.error("Must call load() and wait for it to resolve before adding chapters tracks."),new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.PLAYER,shaka.util.Error.Code.CONTENT_NOT_LOADED);if(cn){wn.jumpTo(2);break}return wn.yield(dn.getTextMimetype_(sn),3);case 3:cn=wn.yieldResult;case 2:if(pn=[],dn.adManager_)try{pn=dn.adManager_.getServerSideCuePoints()}catch{}return wn.yield(dn.addSrcTrackElement_(sn,ln,"chapters",cn,"",pn),4);case 4:if(vn=wn.yieldResult,kn=dn.getChaptersTracks(),Sn=kn.find(function(Pn){return Pn.language==ln}),!Sn){wn.jumpTo(5);break}return wn.yield(new Promise(function(Pn,Nn){dn.loadEventManager_.listenOnce(vn,"load",Pn),dn.loadEventManager_.listenOnce(vn,"error",function(Ln){Nn(new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.CHAPTERS_TRACK_FAILED))})}),6);case 6:return wn.return(Sn);case 5:throw shaka.log.error("Cannot add this text when loaded with src="),new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS)}})},shaka.Player.prototype.getTextMimetype_=function(sn){var ln=this,cn,dn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pn){switch(pn.nextAddress){case 1:return cn=shaka.media.ManifestParser.getExtension(sn),(dn=shaka.Player.TEXT_EXTENSIONS_TO_MIME_TYPES_[cn])?pn.return(dn):(pn.setCatchFinallyBlocks(2),goog.asserts.assert(ln.networkingEngine_,"Need networking engine."),pn.yield(shaka.media.ManifestParser.getMimeType(sn,ln.networkingEngine_,ln.config_.streaming.retryParameters),4));case 4:dn=pn.yieldResult,pn.leaveTryBlock(3);break;case 2:pn.enterCatchBlock();case 3:if(dn)return pn.return(dn);throw shaka.log.error("The mimeType has not been provided and it could not be deduced from its extension."),new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.TEXT_COULD_NOT_GUESS_MIME_TYPE,cn)}})},shaka.Player.prototype.addSrcTrackElement_=function(sn,ln,cn,dn,pn,vn){var kn=this,Sn,wn,Pn,Nn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ln){return Ln.nextAddress==1?dn=="text/vtt"&&!vn.length?Ln.jumpTo(2):(goog.asserts.assert(kn.networkingEngine_,"Need networking engine."),Ln.yield(kn.getTextData_(sn,kn.networkingEngine_,kn.config_.streaming.retryParameters),3)):(Ln.nextAddress!=2&&(Sn=Ln.yieldResult,wn=kn.convertToWebVTT_(Sn,dn,vn),Pn=new Blob([wn],{type:"text/vtt"}),sn=shaka.media.MediaSourceEngine.createObjectURL(Pn),dn="text/vtt"),Nn=document.createElement("track"),Nn.src=kn.cmcdManager_.appendTextTrackData(sn),Nn.label=pn,Nn.kind=cn,Nn.srclang=ln,kn.video_.getAttribute("crossorigin")||kn.video_.setAttribute("crossorigin","anonymous"),kn.video_.appendChild(Nn),Ln.return(Nn))})},shaka.Player.prototype.getTextData_=function(sn,ln,cn){var dn=this,pn,vn,kn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sn){return Sn.nextAddress==1?(pn=shaka.net.NetworkingEngine.RequestType.SEGMENT,vn=shaka.net.NetworkingEngine.makeRequest([sn],cn),vn.method="GET",dn.cmcdManager_.applyTextData(vn),Sn.yield(ln.request(pn,vn).promise,2)):(kn=Sn.yieldResult,Sn.return(kn.data))})},shaka.Player.prototype.convertToWebVTT_=function(sn,ln,cn){var dn=shaka.text.TextEngine.findParser(ln);if(dn)return ln=dn(),dn={periodStart:0,segmentStart:0,segmentEnd:this.video_.duration,vttOffset:0},sn=shaka.util.BufferUtils.toUint8(sn),sn=ln.parseMedia(sn,dn),shaka.text.WebVttGenerator.convert(sn,cn);throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.MISSING_TEXT_PLUGIN,ln)},shaka.Player.prototype.setMaxHardwareResolution=function(sn,ln){this.maxHwRes_.width=sn,this.maxHwRes_.height=ln},shaka.Player.prototype.retryStreaming=function(sn){return this.loadMode_==shaka.Player.LoadMode.MEDIA_SOURCE?this.streamingEngine_.retry(sn===void 0?.1:sn):!1},shaka.Player.prototype.getManifest=function(){return shaka.log.alwaysWarn("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.manifest_},shaka.Player.prototype.getManifestParserFactory=function(){return this.parserFactory_},shaka.Player.prototype.addVariantToSwitchHistory_=function(sn,ln){this.stats_.getSwitchHistory().updateCurrentVariant(sn,ln)},shaka.Player.prototype.addTextStreamToSwitchHistory_=function(sn,ln){this.stats_.getSwitchHistory().updateCurrentText(sn,ln)},shaka.Player.prototype.defaultConfig_=function(){var sn=this,ln=shaka.util.PlayerConfiguration.createDefault();return ln.streaming.failureCallback=function(cn){sn.defaultStreamingFailureCallback_(cn)},ln.textDisplayFactory=function(){return sn.videoContainer_?new shaka.text.UITextDisplayer(sn.video_,sn.videoContainer_):new shaka.text.SimpleTextDisplayer(sn.video_)},ln},shaka.Player.prototype.setVideoContainer=function(sn){this.videoContainer_=sn},shaka.Player.prototype.defaultStreamingFailureCallback_=function(sn){if(this.isLive()){var ln=null;sn.code==shaka.util.Error.Code.BAD_HTTP_STATUS||sn.code==shaka.util.Error.Code.HTTP_ERROR?ln=1:sn.code==shaka.util.Error.Code.TIMEOUT&&(ln=.1),ln!=null&&(sn.severity=shaka.util.Error.Severity.RECOVERABLE,shaka.log.warning("Live streaming error.  Retrying automatically..."),this.retryStreaming(ln))}},shaka.Player.prototype.makeTextStreamsForClosedCaptions_=function(sn){for(var ln=shaka.util.ManifestParserUtils.ContentType,cn=shaka.util.ManifestParserUtils.TextStreamKind,dn=shaka.util.MimeUtils.CEA608_CLOSED_CAPTION_MIMETYPE,pn=shaka.util.MimeUtils.CEA708_CLOSED_CAPTION_MIMETYPE,vn=new Set,kn=$jscomp.makeIterator(sn.textStreams),Sn=kn.next();!Sn.done;Sn=kn.next())Sn=Sn.value,Sn.mimeType!=dn&&Sn.mimeType!=pn||vn.add(Sn.originalId);for(kn=$jscomp.makeIterator(sn.variants),Sn=kn.next();!Sn.done;Sn=kn.next())if((Sn=Sn.value.video)&&Sn.closedCaptions){for(var wn=$jscomp.makeIterator(Sn.closedCaptions.keys()),Pn=wn.next();!Pn.done;Pn=wn.next())if(Pn=Pn.value,!vn.has(Pn)){var Nn=Pn.startsWith("CC")?dn:pn,Ln=new shaka.media.MetaSegmentIndex;Nn={id:this.nextExternalStreamId_++,originalId:Pn,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Ln,mimeType:Nn,codecs:"",kind:cn.CLOSED_CAPTION,encrypted:!1,drmInfos:[],keyIds:new Set,language:Sn.closedCaptions.get(Pn),label:null,type:ln.TEXT,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:Sn.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},sn.textStreams.push(Nn),vn.add(Pn)}}},shaka.Player.prototype.filterManifest_=function(sn){var ln=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cn){if(cn.nextAddress==1)return cn.yield(ln.filterManifestWithStreamUtils_(sn),2);ln.filterManifestWithRestrictions_(sn),cn.jumpToEnd()})},shaka.Player.prototype.filterManifestWithStreamUtils_=function(sn){var ln=this,cn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(dn){if(dn.nextAddress==1)return goog.asserts.assert(sn,"Manifest should exist!"),goog.asserts.assert(ln.video_,"Must not be destroyed"),cn=ln.streamingEngine_?ln.streamingEngine_.getCurrentVariant():null,dn.yield(shaka.util.StreamUtils.filterManifest(ln.drmEngine_,cn,sn),2);ln.checkPlayableVariants_(sn),dn.jumpToEnd()})},shaka.Player.prototype.filterManifestWithRestrictions_=function(sn){if(this.loadMode_!=shaka.Player.LoadMode.DESTROYED){shaka.util.StreamUtils.applyRestrictions(sn.variants,this.config_.restrictions,this.maxHwRes_)&&this.streamingEngine_&&this.onTracksChanged_();var ln=this.drmEngine_?this.drmEngine_.getDrmInfo():null;if(ln&&this.drmEngine_.getMediaKeys())for(var cn=$jscomp.makeIterator(sn.variants),dn=cn.next();!dn.done;dn=cn.next())dn=dn.value,this.processDrmInfos_(ln.keySystem,dn.video),this.processDrmInfos_(ln.keySystem,dn.audio);this.checkRestrictedVariants_(sn)}},shaka.Player.prototype.processDrmInfos_=function(sn,ln){if(ln){ln=$jscomp.makeIterator(ln.drmInfos);for(var cn=ln.next();!cn.done;cn=ln.next())if(cn=cn.value,cn.keySystem==sn){cn=$jscomp.makeIterator(cn.initData||[]);for(var dn=cn.next();!dn.done;dn=cn.next())dn=dn.value,this.drmEngine_.newInitData(dn.initDataType,dn.initData)}}},shaka.Player.prototype.filterManifestByCurrentVariant_=function(){goog.asserts.assert(this.manifest_,"Manifest should be valid"),goog.asserts.assert(this.streamingEngine_,"StreamingEngine should be valid");var sn=this.streamingEngine_?this.streamingEngine_.getCurrentVariant():null;shaka.util.StreamUtils.filterManifestByCurrentVariant(sn,this.manifest_),this.checkPlayableVariants_(this.manifest_)},shaka.Player.prototype.adjustStartTime_=function(sn,ln){var cn,dn,pn,vn,kn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sn){return Sn.nextAddress==1?(cn=sn.audio,dn=sn.video,pn=function(wn,Pn){var Nn,Ln,Fn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(zn){return zn.nextAddress==1?wn?zn.yield(wn.createSegmentIndex(),2):zn.return(null):(Ln=(Nn=wn.segmentIndex.getIteratorForTime(Pn))?Nn.next().value:null,Ln?(Fn=Ln.startTime,goog.asserts.assert(Fn<=Pn,"Segment should start before target time!"),zn.return(Fn)):zn.return(null))})},Sn.yield(pn(cn,ln),2)):Sn.nextAddress!=3?(vn=Sn.yieldResult,Sn.yield(pn(dn,ln),3)):(kn=Sn.yieldResult,kn!=null&&vn!=null?Sn.return(Math.max(kn,vn)):kn!=null?Sn.return(kn):vn!=null?Sn.return(vn):Sn.return(ln))})},shaka.Player.prototype.updateBufferState_=function(){var sn=this.isBuffering();shaka.log.v2("Player changing buffering state to",sn),this.stats_&&this.bufferObserver_&&this.playhead_&&(this.playRateController_.setBuffering(sn),this.cmcdManager_&&this.cmcdManager_.setBuffering(sn),this.updateStateHistory_());var ln=shaka.util.FakeEvent.EventName.Buffering;sn=new Map().set("buffering",sn),this.dispatchEvent(this.makeEvent_(ln,sn))},shaka.Player.prototype.onRateChange_=function(){var sn=this.video_.playbackRate;sn!=0&&(this.playRateController_&&this.playRateController_.set(sn),sn=this.makeEvent_(shaka.util.FakeEvent.EventName.RateChange),this.dispatchEvent(sn))},shaka.Player.prototype.updateStateHistory_=function(){if(this.stats_&&this.bufferObserver_){var sn=shaka.media.BufferingObserver.State,ln=this.stats_.getStateHistory();this.bufferObserver_.getState()==sn.STARVING?ln.update("buffering"):this.video_.paused?ln.update("paused"):this.video_.ended?ln.update("ended"):ln.update("playing")}},shaka.Player.prototype.onSeek_=function(){this.playheadObservers_&&this.playheadObservers_.notifyOfSeek(),this.streamingEngine_&&this.streamingEngine_.seeked(),this.bufferObserver_&&this.pollBufferState_()},shaka.Player.prototype.updateAbrManagerVariants_=function(){try{goog.asserts.assert(this.manifest_,"Manifest should exist by now!"),this.checkRestrictedVariants_(this.manifest_)}catch(ln){return this.onError_(ln),!1}var sn=this.manifest_.variants.filter(function(ln){return shaka.util.StreamUtils.isPlayable(ln)});return sn=this.currentAdaptationSetCriteria_.create(sn),this.abrManager_.setVariants(Array.from(sn.values())),!0},shaka.Player.prototype.chooseVariant_=function(){return this.updateAbrManagerVariants_()?this.abrManager_.chooseVariant():null},shaka.Player.prototype.checkVariants_=function(){shaka.util.StreamUtils.applyRestrictions(this.manifest_.variants,this.config_.restrictions,this.maxHwRes_)&&this.chooseVariant_()},shaka.Player.prototype.chooseTextStream_=function(){return shaka.util.StreamUtils.filterStreamsByLanguageAndRole(this.manifest_.textStreams,this.currentTextLanguage_,this.currentTextRole_,this.currentTextForced_)[0]||null},shaka.Player.prototype.chooseVariantAndSwitch_=function(){goog.asserts.assert(this.config_,"Must not be destroyed");var sn=this.chooseVariant_();sn&&this.switchVariant_(sn,!0,!0,0)},shaka.Player.prototype.switchVariant_=function(sn,ln,cn,dn){var pn=this.streamingEngine_.getCurrentVariant();sn==pn?(shaka.log.debug("Variant already selected."),cn&&this.streamingEngine_.switchVariant(sn,cn,dn,!0)):(this.addVariantToSwitchHistory_(sn,ln),this.streamingEngine_.switchVariant(sn,cn,dn,void 0,ln),cn=null,pn&&(cn=shaka.util.StreamUtils.variantToTrack(pn)),sn=shaka.util.StreamUtils.variantToTrack(sn),ln?this.onAdaptation_(cn,sn):this.onVariantChanged_(cn,sn))},shaka.Player.prototype.switchHtml5Track_=function(sn){goog.asserts.assert(this.video_&&this.video_.audioTracks,"Video and video.audioTracks should not be null!");var ln=Array.from(this.video_.audioTracks).find(function(cn){return cn.enabled});sn.enabled=!0,sn.id!==ln.id&&(ln.enabled=!1),ln=shaka.util.StreamUtils.html5AudioTrackToTrack(ln),sn=shaka.util.StreamUtils.html5AudioTrackToTrack(sn),this.onVariantChanged_(ln,sn)},shaka.Player.prototype.setInitialTextState_=function(sn,ln){ln?(sn.audio&&this.shouldInitiallyShowText_(sn.audio,ln)&&(this.isTextVisible_=!0),this.isTextVisible_&&(this.mediaSourceEngine_.getTextDisplayer().setTextVisibility(!0),goog.asserts.assert(this.shouldStreamText_(),"Should be streaming text")),this.onTextTrackVisibility_()):this.isTextVisible_=!1},shaka.Player.prototype.shouldInitiallyShowText_=function(sn,ln){var cn=shaka.config.AutoShowText;if(this.config_.autoShowText==cn.NEVER)return!1;if(this.config_.autoShowText==cn.ALWAYS)return!0;var dn=shaka.util.LanguageUtils,pn=dn.normalize(this.config_.preferredTextLanguage);return ln=dn.normalize(ln.language),this.config_.autoShowText==cn.IF_PREFERRED_TEXT_LANGUAGE?dn.areLanguageCompatible(ln,pn):this.config_.autoShowText==cn.IF_SUBTITLES_MAY_BE_NEEDED?(sn=dn.normalize(sn.language),dn.areLanguageCompatible(ln,pn)&&!dn.areLanguageCompatible(sn,ln)):(shaka.log.alwaysWarn("Invalid autoShowText setting!"),!1)},shaka.Player.prototype.onManifestUpdate_=function(){this.parser_&&this.parser_.update&&this.parser_.update()},shaka.Player.prototype.onSegmentAppended_=function(sn,ln,cn){this.playhead_&&this.playhead_.notifyOfBufferingChange(),this.pollBufferState_(),sn=new Map().set("start",sn).set("end",ln).set("contentType",cn),this.dispatchEvent(this.makeEvent_(shaka.util.FakeEvent.EventName.SegmentAppended,sn))},shaka.Player.prototype.switch_=function(sn,ln,cn){ln=ln===void 0?!1:ln,cn=cn===void 0?0:cn,shaka.log.debug("switch_"),goog.asserts.assert(this.config_.abr.enabled,"AbrManager should not call switch while disabled!"),goog.asserts.assert(this.manifest_,"We need a manifest to switch variants."),this.streamingEngine_&&sn!=this.streamingEngine_.getCurrentVariant()&&this.switchVariant_(sn,!0,ln,cn)},shaka.Player.prototype.onAdaptation_=function(sn,ln){sn=new Map().set("oldTrack",sn).set("newTrack",ln),this.lcevcDil_&&this.lcevcDil_.updateVariant(ln),ln=this.makeEvent_(shaka.util.FakeEvent.EventName.Adaptation,sn),this.delayDispatchEvent_(ln)},shaka.Player.prototype.onTracksChanged_=function(){var sn=this.makeEvent_(shaka.util.FakeEvent.EventName.TracksChanged);this.delayDispatchEvent_(sn)},shaka.Player.prototype.onVariantChanged_=function(sn,ln){sn=new Map().set("oldTrack",sn).set("newTrack",ln),this.lcevcDil_&&this.lcevcDil_.updateVariant(ln),ln=this.makeEvent_(shaka.util.FakeEvent.EventName.VariantChanged,sn),this.delayDispatchEvent_(ln)},shaka.Player.prototype.onTextChanged_=function(){var sn=this.makeEvent_(shaka.util.FakeEvent.EventName.TextChanged);this.delayDispatchEvent_(sn)},shaka.Player.prototype.onTextTrackVisibility_=function(){var sn=this.makeEvent_(shaka.util.FakeEvent.EventName.TextTrackVisibility);this.delayDispatchEvent_(sn)},shaka.Player.prototype.onAbrStatusChanged_=function(){var sn=new Map().set("newStatus",this.config_.abr.enabled);this.delayDispatchEvent_(this.makeEvent_(shaka.util.FakeEvent.EventName.AbrStatusChanged,sn))},shaka.Player.prototype.tryToRecoverFromError_=function(sn){if(sn.code!=shaka.util.Error.Code.HTTP_ERROR&&sn.code!=shaka.util.Error.Code.SEGMENT_MISSING||sn.category!=shaka.util.Error.Category.NETWORK||!navigator.onLine)return!1;var ln=this.config_.streaming.maxDisabledTime;if(ln==0)if(sn.code==shaka.util.Error.Code.SEGMENT_MISSING)ln=1;else return!1;sn.code==shaka.util.Error.Code.HTTP_ERROR&&shaka.log.debug("Recoverable NETWORK HTTP_ERROR, trying to recover..."),sn=this.getVariantTracks().find(function(vn){return vn.active}),goog.asserts.assert(sn,"Active variant should be found");for(var cn=this.manifest_,dn=$jscomp.makeIterator(cn.variants),pn=dn.next();!pn.done;pn=dn.next())pn=pn.value,pn.id===sn.id&&(pn.disabledUntilTime=Date.now()/1e3+ln);return shaka.util.StreamUtils.applyRestrictions(cn.variants,this.config_.restrictions,this.maxHwRes_),sn=this.chooseVariant_(),sn?(cn=this.getBufferedInfo().video.reduce(function(vn,kn){return vn+kn.end-kn.start},0),this.switchVariant_(sn,!1,!0,cn),this.checkVariantsTimer_.tickAfter(ln),!0):(shaka.log.warning("Not enough variants to recover from error"),!1)},shaka.Player.prototype.onError_=function(sn){if(goog.asserts.assert(sn instanceof shaka.util.Error,"Wrong error type!"),this.loadMode_!=shaka.Player.LoadMode.DESTROYED)if(this.tryToRecoverFromError_(sn))sn.handled=!0;else{var ln=this.makeEvent_(shaka.util.FakeEvent.EventName.Error,new Map().set("detail",sn));this.dispatchEvent(ln),ln.defaultPrevented&&(sn.handled=!0)}},shaka.Player.prototype.onRegionEvent_=function(sn,ln){ln={schemeIdUri:ln.schemeIdUri,value:ln.value,startTime:ln.startTime,endTime:ln.endTime,id:ln.id,eventElement:ln.eventElement},ln=new Map().set("detail",ln),this.dispatchEvent(this.makeEvent_(sn,ln))},shaka.Player.prototype.onMediaQualityChange_=function(sn,ln){sn={bandwidth:sn.bandwidth,audioSamplingRate:sn.audioSamplingRate,codecs:sn.codecs,contentType:sn.contentType,frameRate:sn.frameRate,height:sn.height,mimeType:sn.mimeType,channelsCount:sn.channelsCount,pixelAspectRatio:sn.pixelAspectRatio,width:sn.width},ln=new Map().set("mediaQuality",sn).set("position",ln),this.dispatchEvent(this.makeEvent_(shaka.util.FakeEvent.EventName.MediaQualityChanged,ln))},shaka.Player.prototype.videoErrorToShakaError_=function(){if(goog.asserts.assert(this.video_.error,"Video error expected, but missing!"),!this.video_.error)return null;var sn=this.video_.error.code;if(sn==1)return null;var ln=this.video_.error.msExtendedCode;return ln&&(0>ln&&(ln+=Math.pow(2,32)),ln=ln.toString(16)),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.VIDEO_ERROR,sn,ln,this.video_.error.message)},shaka.Player.prototype.onVideoError_=function(sn){(sn=this.videoErrorToShakaError_())&&this.onError_(sn)},shaka.Player.prototype.onKeyStatus_=function(sn){if(this.streamingEngine_){var ln=Object.keys(sn);ln.length==0&&shaka.log.warning("Got a key status event without any key statuses, so we don't know the real key statuses. If we don't have all the keys, you'll need to set restrictions so we don't select those tracks.");var cn=ln.length==1&&ln[0]=="00";cn&&shaka.log.warning("Got a synthetic key status event, so we don't know the real key statuses. If we don't have all the keys, you'll need to set restrictions so we don't select those tracks.");var dn=shaka.Player.restrictedStatuses_,pn=!1;if(ln.length){ln=$jscomp.makeIterator(this.manifest_.variants);for(var vn=ln.next();!vn.done;vn=ln.next()){vn=vn.value;var kn=shaka.util.StreamUtils.getVariantStreams(vn);kn=$jscomp.makeIterator(kn);for(var Sn=kn.next();!Sn.done;Sn=kn.next()){var wn=Sn.value;if(Sn=vn.allowedByKeySystem,wn.keyIds.size){vn.allowedByKeySystem=!0,wn=$jscomp.makeIterator(wn.keyIds);for(var Pn=wn.next();!Pn.done;Pn=wn.next())Pn=Pn.value,Pn=sn[cn?"00":Pn],vn.allowedByKeySystem=vn.allowedByKeySystem&&!!Pn&&!dn.includes(Pn)}Sn!=vn.allowedByKeySystem&&(pn=!0)}}}(!pn||this.updateAbrManagerVariants_())&&((sn=this.streamingEngine_.getCurrentVariant())&&!sn.allowedByKeySystem&&(shaka.log.debug("Choosing new streams after key status changed"),this.chooseVariantAndSwitch_()),pn&&this.onTracksChanged_())}},shaka.Player.prototype.onExpirationUpdated_=function(sn,ln){this.parser_&&this.parser_.onExpirationUpdated&&this.parser_.onExpirationUpdated(sn,ln),sn=this.makeEvent_(shaka.util.FakeEvent.EventName.ExpirationUpdated),this.dispatchEvent(sn)},shaka.Player.prototype.shouldStreamText_=function(){return this.config_.streaming.alwaysStreamText||this.isTextTrackVisible()},shaka.Player.applyPlayRange_=function(sn,ln,cn){0<ln&&(sn.isLive()?shaka.log.warning("|playRangeStart| has been configured for live content. Ignoring the setting."):sn.setUserSeekStart(ln)),ln=sn.getDuration(),cn<ln&&(sn.isLive()?shaka.log.warning("|playRangeEnd| has been configured for live content. Ignoring the setting."):sn.setDuration(cn))},shaka.Player.prototype.checkRestrictedVariants_=function(sn){var ln=shaka.Player.restrictedStatuses_,cn=this.drmEngine_?this.drmEngine_.getKeyStatuses():{},dn=Object.keys(cn);dn=dn.length&&dn[0]=="00";var pn=!1,vn=!1,kn=new Set,Sn=new Set;sn=$jscomp.makeIterator(sn.variants);for(var wn=sn.next();!wn.done;wn=sn.next()){wn=wn.value;var Pn=[];wn.audio&&Pn.push(wn.audio),wn.video&&Pn.push(wn.video),Pn=$jscomp.makeIterator(Pn);for(var Nn=Pn.next();!Nn.done;Nn=Pn.next())if(Nn=Nn.value,Nn.keyIds.size){Nn=$jscomp.makeIterator(Nn.keyIds);for(var Ln=Nn.next();!Ln.done;Ln=Nn.next()){Ln=Ln.value;var Fn=cn[dn?"00":Ln];Fn?ln.includes(Fn)&&Sn.add(Fn):kn.add(Ln)}}wn.allowedByApplication?wn.allowedByKeySystem&&(pn=!0):vn=!0}if(!pn)throw ln={hasAppRestrictions:vn,missingKeys:Array.from(kn),restrictedKeyStatuses:Array.from(Sn)},new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.RESTRICTIONS_CANNOT_BE_MET,ln)},shaka.Player.prototype.checkPlayableVariants_=function(sn){if(!sn.variants.some(shaka.util.StreamUtils.isPlayable))throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.CONTENT_UNSUPPORTED_BY_BROWSER)},shaka.Player.prototype.delayDispatchEvent_=function(sn){var ln=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cn){if(cn.nextAddress==1)return cn.yield(Promise.resolve(),2);ln.loadMode_!=shaka.Player.LoadMode.DESTROYED&&ln.dispatchEvent(sn),cn.jumpToEnd()})},shaka.Player.getLanguagesFrom_=function(sn){var ln=new Set;sn=$jscomp.makeIterator(sn);for(var cn=sn.next();!cn.done;cn=sn.next())cn=cn.value,cn.language?ln.add(shaka.util.LanguageUtils.normalize(cn.language)):ln.add("und");return ln},shaka.Player.getLanguageAndRolesFrom_=function(sn){var ln=new Map,cn=new Map;sn=$jscomp.makeIterator(sn);for(var dn=sn.next();!dn.done;dn=sn.next()){dn=dn.value;var pn="und",vn=[];dn.language&&(pn=shaka.util.LanguageUtils.normalize(dn.language)),(vn=dn.type=="variant"?dn.audioRoles:dn.roles)&&vn.length||(vn=[""]),ln.has(pn)||ln.set(pn,new Set),vn=$jscomp.makeIterator(vn);for(var kn=vn.next();!kn.done;kn=vn.next())kn=kn.value,ln.get(pn).add(kn),dn.label&&(cn.has(pn)||cn.set(pn,new Map),cn.get(pn).set(kn,dn.label))}var Sn=[];return ln.forEach(function(wn,Pn){wn=$jscomp.makeIterator(wn);for(var Nn=wn.next();!Nn.done;Nn=wn.next()){Nn=Nn.value;var Ln=null;cn.has(Pn)&&cn.get(Pn).has(Nn)&&(Ln=cn.get(Pn).get(Nn)),Sn.push({language:Pn,role:Nn,label:Ln})}}),Sn},shaka.Player.prototype.isBufferedToEndMS_=function(){if(goog.asserts.assert(this.video_,"We need a video element to get buffering information"),goog.asserts.assert(this.mediaSourceEngine_,"We need a media source engine to get buffering information"),goog.asserts.assert(this.manifest_,"We need a manifest to get buffering information"),this.video_.ended||this.mediaSourceEngine_.ended())return!0;if(this.manifest_.presentationTimeline.isLive()){var sn=this.manifest_.presentationTimeline.getSegmentAvailabilityEnd(),ln=shaka.media.TimeRangesUtils.bufferEnd(this.video_.buffered);if(ln!=null&&ln>=sn)return!0}return!1},shaka.Player.prototype.isBufferedToEndSrc_=function(){if(goog.asserts.assert(this.video_,"We need a video element to get buffering information"),this.video_.ended)return!0;var sn=shaka.media.TimeRangesUtils.bufferEnd(this.video_.buffered);return sn!=null&&sn>=this.video_.duration-1},shaka.Player.prototype.createAbortLoadError_=function(){return new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.PLAYER,shaka.util.Error.Code.LOAD_INTERRUPTED)},shaka.Player.prototype.getNextStep_=function(sn,ln,cn,dn){var pn=null;return sn==this.detachNode_&&(pn=cn==this.detachNode_?this.detachNode_:this.attachNode_),sn==this.attachNode_&&(pn=this.getNextAfterAttach_(cn,ln,dn)),sn==this.mediaSourceNode_&&(pn=this.getNextAfterMediaSource_(cn,ln,dn)),sn==this.parserNode_&&(pn=this.getNextMatchingAllDependencies_(this.loadNode_,this.manifestNode_,this.unloadNode_,cn,ln,dn)),sn==this.manifestNode_&&(pn=this.getNextMatchingAllDependencies_(this.loadNode_,this.drmNode_,this.unloadNode_,cn,ln,dn)),sn==this.drmNode_&&(pn=this.getNextMatchingAllDependencies_(this.loadNode_,this.loadNode_,this.unloadNode_,cn,ln,dn)),sn==this.srcEqualsDrmNode_&&(pn=cn==this.srcEqualsNode_&&ln.mediaElement==dn.mediaElement?this.srcEqualsNode_:this.unloadNode_),(sn==this.loadNode_||sn==this.srcEqualsNode_)&&(pn=this.unloadNode_),sn==this.unloadNode_&&(pn=this.getNextAfterUnload_(cn,ln,dn)),goog.asserts.assert(pn,"Missing next step!"),pn},shaka.Player.prototype.getNextAfterAttach_=function(sn,ln,cn){return sn==this.detachNode_||ln.mediaElement!=cn.mediaElement?this.detachNode_:sn==this.attachNode_?this.attachNode_:sn==this.mediaSourceNode_||sn==this.loadNode_?this.mediaSourceNode_:sn==this.srcEqualsNode_?this.srcEqualsDrmNode_:null},shaka.Player.prototype.getNextAfterMediaSource_=function(sn,ln,cn){return sn==this.loadNode_&&ln.mediaElement==cn.mediaElement?this.parserNode_:this.unloadNode_},shaka.Player.prototype.getNextAfterUnload_=function(sn,ln,cn){return cn.mediaElement&&ln.mediaElement==cn.mediaElement?this.attachNode_:this.detachNode_},shaka.Player.prototype.getNextMatchingAllDependencies_=function(sn,ln,cn,dn,pn,vn){return dn==sn&&pn.mediaElement==vn.mediaElement&&pn.uri==vn.uri&&pn.mimeType==vn.mimeType?ln:cn},shaka.Player.createEmptyPayload_=function(){return{mediaElement:null,mimeType:null,startTime:null,startTimeOfLoad:NaN,uri:null}},shaka.Player.prototype.wrapWalkerListenersWithPromise_=function(sn){var ln=this;return new Promise(function(cn,dn){sn.onCancel=function(){return dn(ln.createAbortLoadError_())},sn.onEnd=function(){return cn()},sn.onError=function(pn){return dn(pn)},sn.onSkip=function(){return dn(ln.createAbortLoadError_())}})},goog.exportSymbol("shaka.Player",shaka.Player),goog.exportProperty(shaka.Player.prototype,"setVideoContainer",shaka.Player.prototype.setVideoContainer),goog.exportProperty(shaka.Player.prototype,"getManifestParserFactory",shaka.Player.prototype.getManifestParserFactory),goog.exportProperty(shaka.Player.prototype,"getManifest",shaka.Player.prototype.getManifest),goog.exportProperty(shaka.Player.prototype,"retryStreaming",shaka.Player.prototype.retryStreaming),goog.exportProperty(shaka.Player.prototype,"setMaxHardwareResolution",shaka.Player.prototype.setMaxHardwareResolution),goog.exportProperty(shaka.Player.prototype,"addChaptersTrack",shaka.Player.prototype.addChaptersTrack),goog.exportProperty(shaka.Player.prototype,"addThumbnailsTrack",shaka.Player.prototype.addThumbnailsTrack),goog.exportProperty(shaka.Player.prototype,"addTextTrackAsync",shaka.Player.prototype.addTextTrackAsync),goog.exportProperty(shaka.Player.prototype,"getStats",shaka.Player.prototype.getStats),goog.exportProperty(shaka.Player.prototype,"getBufferedInfo",shaka.Player.prototype.getBufferedInfo),goog.exportProperty(shaka.Player.prototype,"getPresentationStartTimeAsDate",shaka.Player.prototype.getPresentationStartTimeAsDate),goog.exportProperty(shaka.Player.prototype,"getPlayheadTimeAsDate",shaka.Player.prototype.getPlayheadTimeAsDate),goog.exportProperty(shaka.Player.prototype,"setTextTrackVisibility",shaka.Player.prototype.setTextTrackVisibility),goog.exportProperty(shaka.Player.prototype,"getChapters",shaka.Player.prototype.getChapters),goog.exportProperty(shaka.Player.prototype,"getChaptersTracks",shaka.Player.prototype.getChaptersTracks),goog.exportProperty(shaka.Player.prototype,"isTextTrackVisible",shaka.Player.prototype.isTextTrackVisible),goog.exportProperty(shaka.Player.prototype,"selectVariantsByLabel",shaka.Player.prototype.selectVariantsByLabel),goog.exportProperty(shaka.Player.prototype,"selectTextLanguage",shaka.Player.prototype.selectTextLanguage),goog.exportProperty(shaka.Player.prototype,"selectAudioLanguage",shaka.Player.prototype.selectAudioLanguage),goog.exportProperty(shaka.Player.prototype,"getTextLanguages",shaka.Player.prototype.getTextLanguages),goog.exportProperty(shaka.Player.prototype,"getAudioLanguages",shaka.Player.prototype.getAudioLanguages),goog.exportProperty(shaka.Player.prototype,"getTextLanguagesAndRoles",shaka.Player.prototype.getTextLanguagesAndRoles),goog.exportProperty(shaka.Player.prototype,"getAudioLanguagesAndRoles",shaka.Player.prototype.getAudioLanguagesAndRoles),goog.exportProperty(shaka.Player.prototype,"selectVariantTrack",shaka.Player.prototype.selectVariantTrack),goog.exportProperty(shaka.Player.prototype,"selectTextTrack",shaka.Player.prototype.selectTextTrack),goog.exportProperty(shaka.Player.prototype,"getThumbnails",shaka.Player.prototype.getThumbnails),goog.exportProperty(shaka.Player.prototype,"getImageTracks",shaka.Player.prototype.getImageTracks),goog.exportProperty(shaka.Player.prototype,"getTextTracks",shaka.Player.prototype.getTextTracks),goog.exportProperty(shaka.Player.prototype,"getVariantTracks",shaka.Player.prototype.getVariantTracks),goog.exportProperty(shaka.Player.prototype,"cancelTrickPlay",shaka.Player.prototype.cancelTrickPlay),goog.exportProperty(shaka.Player.prototype,"trickPlay",shaka.Player.prototype.trickPlay),goog.exportProperty(shaka.Player.prototype,"getPlaybackRate",shaka.Player.prototype.getPlaybackRate),goog.exportProperty(shaka.Player.prototype,"isBuffering",shaka.Player.prototype.isBuffering),goog.exportProperty(shaka.Player.prototype,"getKeyStatuses",shaka.Player.prototype.getKeyStatuses),goog.exportProperty(shaka.Player.prototype,"getExpiration",shaka.Player.prototype.getExpiration),goog.exportProperty(shaka.Player.prototype,"drmInfo",shaka.Player.prototype.drmInfo),goog.exportProperty(shaka.Player.prototype,"keySystem",shaka.Player.prototype.keySystem),goog.exportProperty(shaka.Player.prototype,"goToLive",shaka.Player.prototype.goToLive),goog.exportProperty(shaka.Player.prototype,"seekRange",shaka.Player.prototype.seekRange),goog.exportProperty(shaka.Player.prototype,"isAudioOnly",shaka.Player.prototype.isAudioOnly),goog.exportProperty(shaka.Player.prototype,"isInProgress",shaka.Player.prototype.isInProgress),goog.exportProperty(shaka.Player.prototype,"isLive",shaka.Player.prototype.isLive),goog.exportProperty(shaka.Player.prototype,"getAdManager",shaka.Player.prototype.getAdManager),goog.exportProperty(shaka.Player.prototype,"getAssetUri",shaka.Player.prototype.getAssetUri),goog.exportProperty(shaka.Player.prototype,"getNetworkingEngine",shaka.Player.prototype.getNetworkingEngine),goog.exportProperty(shaka.Player.prototype,"getMediaElement",shaka.Player.prototype.getMediaElement),goog.exportProperty(shaka.Player.prototype,"getLoadMode",shaka.Player.prototype.getLoadMode),goog.exportProperty(shaka.Player.prototype,"resetConfiguration",shaka.Player.prototype.resetConfiguration),goog.exportProperty(shaka.Player.prototype,"getBufferFullness",shaka.Player.prototype.getBufferFullness),goog.exportProperty(shaka.Player.prototype,"getConfiguration",shaka.Player.prototype.getConfiguration),goog.exportProperty(shaka.Player.prototype,"configure",shaka.Player.prototype.configure),goog.exportProperty(shaka.Player.prototype,"load",shaka.Player.prototype.load),goog.exportProperty(shaka.Player.prototype,"updateStartTime",shaka.Player.prototype.updateStartTime),goog.exportProperty(shaka.Player.prototype,"unload",shaka.Player.prototype.unload),goog.exportProperty(shaka.Player.prototype,"detach",shaka.Player.prototype.detach),goog.exportProperty(shaka.Player.prototype,"attachCanvas",shaka.Player.prototype.attachCanvas),goog.exportProperty(shaka.Player.prototype,"attach",shaka.Player.prototype.attach),goog.exportProperty(shaka.Player,"probeSupport",shaka.Player.probeSupport),goog.exportProperty(shaka.Player,"isBrowserSupported",shaka.Player.isBrowserSupported),goog.exportProperty(shaka.Player,"setAdManagerFactory",shaka.Player.setAdManagerFactory),goog.exportProperty(shaka.Player,"registerSupportPlugin",shaka.Player.registerSupportPlugin),goog.exportProperty(shaka.Player.prototype,"destroy",shaka.Player.prototype.destroy),shaka.Player.LoadMode={DESTROYED:0,NOT_LOADED:1,MEDIA_SOURCE:2,SRC_EQUALS:3},goog.exportProperty(shaka.Player,"LoadMode",shaka.Player.LoadMode),shaka.Player.TYPICAL_BUFFERING_THRESHOLD_=.5,shaka.Player.version="v4.3.6-debug",goog.exportProperty(shaka.Player,"version",shaka.Player.version),shaka.Deprecate.init(shaka.Player.version),shaka.Player.restrictedStatuses_=["output-restricted","internal-error"],shaka.Player.supportPlugins_={},shaka.Player.adManagerFactory_=null,shaka.Player.SRC_EQUAL_EXTENSIONS_TO_MIME_TYPES_={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"},shaka.Player.TEXT_EXTENSIONS_TO_MIME_TYPES_={sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"},shaka.Player.TextTrackLabel="Shaka Player TextTrack",shaka.ads={},shaka.ads.AdsStats=function(){this.loadTimes_=[],this.skipped_=this.playedCompletely_=this.started_=0},shaka.ads.AdsStats.prototype.addLoadTime=function(sn){this.loadTimes_.push(sn)},shaka.ads.AdsStats.prototype.incrementStarted=function(){this.started_++},shaka.ads.AdsStats.prototype.incrementPlayedCompletely=function(){this.playedCompletely_++},shaka.ads.AdsStats.prototype.incrementSkipped=function(){this.skipped_++},shaka.ads.AdsStats.prototype.getBlob=function(){return{loadTimes:this.loadTimes_,started:this.started_,playedCompletely:this.playedCompletely_,skipped:this.skipped_}},shaka.ads.ClientSideAd=function(sn,ln,cn){var dn=this;this.ad_=sn,this.manager_=ln,this.video_=cn,this.isPaused_=!1,this.volume_=this.manager_.getVolume(),this.eventManager_=new shaka.util.EventManager,this.eventManager_.listen(this.manager_,google.ima.AdEvent.Type.PAUSED,function(){dn.isPaused_=!0}),this.eventManager_.listen(this.manager_,google.ima.AdEvent.Type.RESUMED,function(){dn.isPaused_=!1})},shaka.ads.ClientSideAd.prototype.getDuration=function(){return this.ad_.getDuration()},shaka.ads.ClientSideAd.prototype.getMinSuggestedDuration=function(){return this.ad_.getMinSuggestedDuration()},shaka.ads.ClientSideAd.prototype.getRemainingTime=function(){return this.manager_.getRemainingTime()},shaka.ads.ClientSideAd.prototype.isPaused=function(){return this.isPaused_},shaka.ads.ClientSideAd.prototype.isSkippable=function(){return 0<=this.ad_.getSkipTimeOffset()},shaka.ads.ClientSideAd.prototype.getTimeUntilSkippable=function(){var sn=this.ad_.getSkipTimeOffset();return sn=this.getRemainingTime()-sn,Math.max(sn,0)},shaka.ads.ClientSideAd.prototype.canSkipNow=function(){return this.manager_.getAdSkippableState()},shaka.ads.ClientSideAd.prototype.skip=function(){return this.manager_.skip()},shaka.ads.ClientSideAd.prototype.setPaused=function(sn){this.isPaused_=sn},shaka.ads.ClientSideAd.prototype.pause=function(){return this.manager_.pause()},shaka.ads.ClientSideAd.prototype.play=function(){return this.manager_.resume()},shaka.ads.ClientSideAd.prototype.getVolume=function(){return this.manager_.getVolume()},shaka.ads.ClientSideAd.prototype.setVolume=function(sn){return this.manager_.setVolume(sn)},shaka.ads.ClientSideAd.prototype.isMuted=function(){return this.manager_.getVolume()==0},shaka.ads.ClientSideAd.prototype.isLinear=function(){return this.ad_.isLinear()},shaka.ads.ClientSideAd.prototype.resize=function(sn,ln){var cn=!1,dn=this.video_;document.fullscreenEnabled?cn=!!document.fullscreenElement:dn.webkitSupportsFullscreen&&(cn=dn.webkitDisplayingFullscreen),this.manager_.resize(sn,ln,cn?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},shaka.ads.ClientSideAd.prototype.setMuted=function(sn){sn?(this.volume_=this.getVolume(),this.setVolume(0)):this.setVolume(this.volume_)},shaka.ads.ClientSideAd.prototype.getSequenceLength=function(){var sn=this.ad_.getAdPodInfo();return sn==null?1:sn.getTotalAds()},shaka.ads.ClientSideAd.prototype.getPositionInSequence=function(){var sn=this.ad_.getAdPodInfo();return sn==null?1:sn.getAdPosition()},shaka.ads.ClientSideAd.prototype.getTitle=function(){return this.ad_.getTitle()},shaka.ads.ClientSideAd.prototype.getDescription=function(){return this.ad_.getDescription()},shaka.ads.ClientSideAd.prototype.release=function(){this.manager_=this.ad_=null},goog.exportSymbol("shaka.ads.ClientSideAd",shaka.ads.ClientSideAd),goog.exportProperty(shaka.ads.ClientSideAd.prototype,"release",shaka.ads.ClientSideAd.prototype.release),goog.exportProperty(shaka.ads.ClientSideAd.prototype,"getDescription",shaka.ads.ClientSideAd.prototype.getDescription),goog.exportProperty(shaka.ads.ClientSideAd.prototype,"getTitle",shaka.ads.ClientSideAd.prototype.getTitle),goog.exportProperty(shaka.ads.ClientSideAd.prototype,"getPositionInSequence",shaka.ads.ClientSideAd.prototype.getPositionInSequence),goog.exportProperty(shaka.ads.ClientSideAd.prototype,"getSequenceLength",shaka.ads.ClientSideAd.prototype.getSequenceLength),goog.exportProperty(shaka.ads.ClientSideAd.prototype,"setMuted",shaka.ads.ClientSideAd.prototype.setMuted),goog.exportProperty(shaka.ads.ClientSideAd.prototype,"resize",shaka.ads.ClientSideAd.prototype.resize),goog.exportProperty(shaka.ads.ClientSideAd.prototype,"isLinear",shaka.ads.ClientSideAd.prototype.isLinear),goog.exportProperty(shaka.ads.ClientSideAd.prototype,"isMuted",shaka.ads.ClientSideAd.prototype.isMuted),goog.exportProperty(shaka.ads.ClientSideAd.prototype,"setVolume",shaka.ads.ClientSideAd.prototype.setVolume),goog.exportProperty(shaka.ads.ClientSideAd.prototype,"getVolume",shaka.ads.ClientSideAd.prototype.getVolume),goog.exportProperty(shaka.ads.ClientSideAd.prototype,"play",shaka.ads.ClientSideAd.prototype.play),goog.exportProperty(shaka.ads.ClientSideAd.prototype,"pause",shaka.ads.ClientSideAd.prototype.pause),goog.exportProperty(shaka.ads.ClientSideAd.prototype,"skip",shaka.ads.ClientSideAd.prototype.skip),goog.exportProperty(shaka.ads.ClientSideAd.prototype,"canSkipNow",shaka.ads.ClientSideAd.prototype.canSkipNow),goog.exportProperty(shaka.ads.ClientSideAd.prototype,"getTimeUntilSkippable",shaka.ads.ClientSideAd.prototype.getTimeUntilSkippable),goog.exportProperty(shaka.ads.ClientSideAd.prototype,"isSkippable",shaka.ads.ClientSideAd.prototype.isSkippable),goog.exportProperty(shaka.ads.ClientSideAd.prototype,"isPaused",shaka.ads.ClientSideAd.prototype.isPaused),goog.exportProperty(shaka.ads.ClientSideAd.prototype,"getRemainingTime",shaka.ads.ClientSideAd.prototype.getRemainingTime),goog.exportProperty(shaka.ads.ClientSideAd.prototype,"getMinSuggestedDuration",shaka.ads.ClientSideAd.prototype.getMinSuggestedDuration),goog.exportProperty(shaka.ads.ClientSideAd.prototype,"getDuration",shaka.ads.ClientSideAd.prototype.getDuration),shaka.ads.ClientSideAdManager=function(sn,ln,cn,dn){var pn=this;this.adContainer_=sn,this.video_=ln,this.resizeObserver_=null,this.requestAdsStartTime_=NaN,this.onEvent_=dn,this.ad_=null,this.eventManager_=new shaka.util.EventManager,google.ima.settings.setLocale(cn),sn=new google.ima.AdDisplayContainer(this.adContainer_,this.video_),sn.initialize(),this.adsLoader_=new google.ima.AdsLoader(sn),this.adsLoader_.getSettings().setPlayerType("shaka-player"),this.adsLoader_.getSettings().setPlayerVersion(shaka.Player.version),this.imaAdsManager_=null,this.eventManager_.listenOnce(this.adsLoader_,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(vn){pn.onAdsManagerLoaded_(vn)}),this.eventManager_.listen(this.adsLoader_,google.ima.AdErrorEvent.Type.AD_ERROR,function(vn){pn.onAdError_(vn)}),this.eventManager_.listen(this.video_,"ended",function(){pn.adsLoader_.contentComplete()})},shaka.ads.ClientSideAdManager.prototype.requestAds=function(sn){goog.asserts.assert(sn.adTagUrl||sn.adsResponse,"The ad tag needs to be set up before requesting ads, or adsResponse must be filled."),this.requestAdsStartTime_=Date.now()/1e3,this.adsLoader_.requestAds(sn)},shaka.ads.ClientSideAdManager.prototype.stop=function(){this.imaAdsManager_&&this.imaAdsManager_.stop(),this.adContainer_&&shaka.util.Dom.removeAllChildren(this.adContainer_)},shaka.ads.ClientSideAdManager.prototype.release=function(){this.stop(),this.resizeObserver_&&this.resizeObserver_.disconnect(),this.eventManager_&&this.eventManager_.release(),this.imaAdsManager_&&this.imaAdsManager_.destroy(),this.adsLoader_.destroy()},shaka.ads.ClientSideAdManager.prototype.onAdError_=function(sn){shaka.log.warning("There was an ad error from the IMA SDK: "+sn.getError()),shaka.log.warning("Resuming playback."),this.onAdComplete_(null),this.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.CUEPOINTS_CHANGED,new Map().set("cuepoints",[])))},shaka.ads.ClientSideAdManager.prototype.onAdsManagerLoaded_=function(sn){var ln=this;goog.asserts.assert(this.video_!=null,"Video should not be null!");var cn=Date.now()/1e3-this.requestAdsStartTime_;if(this.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.ADS_LOADED,new Map().set("loadTime",cn))),this.imaAdsManager_=sn.getAdsManager(this.video_),this.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.IMA_AD_MANAGER_LOADED,new Map().set("imaAdManager",this.imaAdsManager_))),cn=this.imaAdsManager_.getCuePoints(),cn.length){sn=[],cn=$jscomp.makeIterator(cn);for(var dn=cn.next();!dn.done;dn=cn.next())sn.push({start:dn.value,end:null});this.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.CUEPOINTS_CHANGED,new Map().set("cuepoints",sn)))}this.addImaEventListeners_();try{var pn=this.isFullScreenEnabled_()?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL;this.imaAdsManager_.init(this.video_.offsetWidth,this.video_.offsetHeight,pn),this.eventManager_.listen(this.video_,"loadeddata",function(){var vn=ln.isFullScreenEnabled_()?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL;ln.imaAdsManager_.resize(ln.video_.offsetWidth,ln.video_.offsetHeight,vn)}),"ResizeObserver"in window?(this.resizeObserver_=new ResizeObserver(function(){var vn=ln.isFullScreenEnabled_()?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL;ln.imaAdsManager_.resize(ln.video_.offsetWidth,ln.video_.offsetHeight,vn)}),this.resizeObserver_.observe(this.video_)):this.eventManager_.listen(document,"fullscreenchange",function(){var vn=ln.isFullScreenEnabled_()?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL;ln.imaAdsManager_.resize(ln.video_.offsetWidth,ln.video_.offsetHeight,vn)}),this.eventManager_.listenOnce(this.video_,"play",function(){ln.imaAdsManager_.start()})}catch{this.onAdComplete_(null)}},shaka.ads.ClientSideAdManager.prototype.isFullScreenEnabled_=function(){if(document.fullscreenEnabled)return!!document.fullscreenElement;var sn=this.video_;return sn.webkitSupportsFullscreen?sn.webkitDisplayingFullscreen:!1},shaka.ads.ClientSideAdManager.prototype.addImaEventListeners_=function(){var sn=this,ln=function(cn,dn){cn=new Map().set("originalEvent",cn),sn.onEvent_(new shaka.util.FakeEvent(dn,cn))};this.eventManager_.listen(this.imaAdsManager_,google.ima.AdErrorEvent.Type.AD_ERROR,function(cn){sn.onAdError_(cn)}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(cn){sn.onAdStart_(cn)}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.STARTED,function(cn){sn.onAdStart_(cn)}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.FIRST_QUARTILE,function(cn){ln(cn,shaka.ads.AdManager.AD_FIRST_QUARTILE)}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.MIDPOINT,function(cn){ln(cn,shaka.ads.AdManager.AD_MIDPOINT)}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.THIRD_QUARTILE,function(cn){ln(cn,shaka.ads.AdManager.AD_THIRD_QUARTILE)}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.COMPLETE,function(cn){ln(cn,shaka.ads.AdManager.AD_COMPLETE)}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(cn){sn.onAdComplete_(cn)}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(cn){sn.onAdComplete_(cn)}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.SKIPPED,function(cn){ln(cn,shaka.ads.AdManager.AD_SKIPPED)}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.VOLUME_CHANGED,function(cn){ln(cn,shaka.ads.AdManager.AD_VOLUME_CHANGED)}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.VOLUME_MUTED,function(cn){ln(cn,shaka.ads.AdManager.AD_MUTED)}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.PAUSED,function(cn){sn.ad_&&(sn.ad_.setPaused(!0),ln(cn,shaka.ads.AdManager.AD_PAUSED))}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.RESUMED,function(cn){sn.ad_&&(sn.ad_.setPaused(!1),ln(cn,shaka.ads.AdManager.AD_RESUMED))}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(cn){sn.ad_&&ln(cn,shaka.ads.AdManager.AD_SKIP_STATE_CHANGED)}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.CLICK,function(cn){ln(cn,shaka.ads.AdManager.AD_CLICKED)}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.AD_PROGRESS,function(cn){ln(cn,shaka.ads.AdManager.AD_PROGRESS)}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.AD_BUFFERING,function(cn){ln(cn,shaka.ads.AdManager.AD_BUFFERING)}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.IMPRESSION,function(cn){ln(cn,shaka.ads.AdManager.AD_IMPRESSION)}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.DURATION_CHANGE,function(cn){ln(cn,shaka.ads.AdManager.AD_DURATION_CHANGED)}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.USER_CLOSE,function(cn){ln(cn,shaka.ads.AdManager.AD_CLOSED)}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.LOADED,function(cn){ln(cn,shaka.ads.AdManager.AD_LOADED)}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(cn){ln(cn,shaka.ads.AdManager.ALL_ADS_COMPLETED)}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.LINEAR_CHANGED,function(cn){ln(cn,shaka.ads.AdManager.AD_LINEAR_CHANGED)}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.AD_METADATA,function(cn){ln(cn,shaka.ads.AdManager.AD_METADATA)}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.LOG,function(cn){ln(cn,shaka.ads.AdManager.AD_RECOVERABLE_ERROR)}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.AD_BREAK_READY,function(cn){ln(cn,shaka.ads.AdManager.AD_BREAK_READY)}),this.eventManager_.listen(this.imaAdsManager_,google.ima.AdEvent.Type.INTERACTION,function(cn){ln(cn,shaka.ads.AdManager.AD_INTERACTION)})},shaka.ads.ClientSideAdManager.prototype.onAdStart_=function(sn){goog.asserts.assert(this.imaAdsManager_,"Should have an ads manager at this point!");var ln=sn.getAd();ln?(this.ad_=new shaka.ads.ClientSideAd(ln,this.imaAdsManager_,this.video_),sn=new Map().set("ad",this.ad_).set("sdkAdObject",ln).set("originalEvent",sn),this.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_STARTED,sn)),this.ad_.isLinear()&&(this.adContainer_.setAttribute("ad-active","true"),this.video_.pause(),this.ad_.setVolume(this.video_.volume),this.video_.muted&&this.ad_.setMuted(!0))):shaka.log.alwaysWarn("The IMA SDK fired a "+sn.type+" event with no associated ad. Unable to play ad!")},shaka.ads.ClientSideAdManager.prototype.onAdComplete_=function(sn){this.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_STOPPED,new Map().set("originalEvent",sn))),this.ad_&&this.ad_.isLinear()&&(this.adContainer_.removeAttribute("ad-active"),this.video_.ended||this.video_.play())},shaka.ads.ServerSideAd=function(sn,ln){this.ad_=sn,this.adProgressData_=null,this.video_=ln},shaka.ads.ServerSideAd.prototype.setProgressData=function(sn){this.adProgressData_=sn},shaka.ads.ServerSideAd.prototype.getDuration=function(){return this.adProgressData_?this.adProgressData_.duration:-1},shaka.ads.ServerSideAd.prototype.getMinSuggestedDuration=function(){return this.getDuration()},shaka.ads.ServerSideAd.prototype.getRemainingTime=function(){return this.adProgressData_?this.adProgressData_.duration-this.adProgressData_.currentTime:-1},shaka.ads.ServerSideAd.prototype.isPaused=function(){return this.video_.paused},shaka.ads.ServerSideAd.prototype.isSkippable=function(){return this.ad_.isSkippable()},shaka.ads.ServerSideAd.prototype.getTimeUntilSkippable=function(){var sn=this.ad_.getSkipTimeOffset();return sn=this.getRemainingTime()-sn,Math.max(sn,0)},shaka.ads.ServerSideAd.prototype.canSkipNow=function(){return this.getTimeUntilSkippable()==0},shaka.ads.ServerSideAd.prototype.skip=function(){this.video_.currentTime+=this.getRemainingTime()},shaka.ads.ServerSideAd.prototype.pause=function(){return this.video_.pause()},shaka.ads.ServerSideAd.prototype.play=function(){return this.video_.play()},shaka.ads.ServerSideAd.prototype.getVolume=function(){return this.video_.volume},shaka.ads.ServerSideAd.prototype.setVolume=function(sn){this.video_.volume=sn},shaka.ads.ServerSideAd.prototype.isMuted=function(){return this.video_.muted},shaka.ads.ServerSideAd.prototype.isLinear=function(){return!0},shaka.ads.ServerSideAd.prototype.resize=function(sn,ln){},shaka.ads.ServerSideAd.prototype.setMuted=function(sn){this.video_.muted=sn},shaka.ads.ServerSideAd.prototype.getSequenceLength=function(){var sn=this.ad_.getAdPodInfo();return sn==null?1:sn.getTotalAds()},shaka.ads.ServerSideAd.prototype.getPositionInSequence=function(){var sn=this.ad_.getAdPodInfo();return sn==null?1:sn.getAdPosition()},shaka.ads.ServerSideAd.prototype.getTitle=function(){return this.ad_.getTitle()},shaka.ads.ServerSideAd.prototype.getDescription=function(){return this.ad_.getDescription()},shaka.ads.ServerSideAd.prototype.release=function(){this.video_=this.adProgressData_=this.ad_=null},goog.exportSymbol("shaka.ads.ServerSideAd",shaka.ads.ServerSideAd),goog.exportProperty(shaka.ads.ServerSideAd.prototype,"release",shaka.ads.ServerSideAd.prototype.release),goog.exportProperty(shaka.ads.ServerSideAd.prototype,"getDescription",shaka.ads.ServerSideAd.prototype.getDescription),goog.exportProperty(shaka.ads.ServerSideAd.prototype,"getTitle",shaka.ads.ServerSideAd.prototype.getTitle),goog.exportProperty(shaka.ads.ServerSideAd.prototype,"getPositionInSequence",shaka.ads.ServerSideAd.prototype.getPositionInSequence),goog.exportProperty(shaka.ads.ServerSideAd.prototype,"getSequenceLength",shaka.ads.ServerSideAd.prototype.getSequenceLength),goog.exportProperty(shaka.ads.ServerSideAd.prototype,"setMuted",shaka.ads.ServerSideAd.prototype.setMuted),goog.exportProperty(shaka.ads.ServerSideAd.prototype,"resize",shaka.ads.ServerSideAd.prototype.resize),goog.exportProperty(shaka.ads.ServerSideAd.prototype,"isLinear",shaka.ads.ServerSideAd.prototype.isLinear),goog.exportProperty(shaka.ads.ServerSideAd.prototype,"isMuted",shaka.ads.ServerSideAd.prototype.isMuted),goog.exportProperty(shaka.ads.ServerSideAd.prototype,"setVolume",shaka.ads.ServerSideAd.prototype.setVolume),goog.exportProperty(shaka.ads.ServerSideAd.prototype,"getVolume",shaka.ads.ServerSideAd.prototype.getVolume),goog.exportProperty(shaka.ads.ServerSideAd.prototype,"play",shaka.ads.ServerSideAd.prototype.play),goog.exportProperty(shaka.ads.ServerSideAd.prototype,"pause",shaka.ads.ServerSideAd.prototype.pause),goog.exportProperty(shaka.ads.ServerSideAd.prototype,"skip",shaka.ads.ServerSideAd.prototype.skip),goog.exportProperty(shaka.ads.ServerSideAd.prototype,"canSkipNow",shaka.ads.ServerSideAd.prototype.canSkipNow),goog.exportProperty(shaka.ads.ServerSideAd.prototype,"getTimeUntilSkippable",shaka.ads.ServerSideAd.prototype.getTimeUntilSkippable),goog.exportProperty(shaka.ads.ServerSideAd.prototype,"isSkippable",shaka.ads.ServerSideAd.prototype.isSkippable),goog.exportProperty(shaka.ads.ServerSideAd.prototype,"isPaused",shaka.ads.ServerSideAd.prototype.isPaused),goog.exportProperty(shaka.ads.ServerSideAd.prototype,"getRemainingTime",shaka.ads.ServerSideAd.prototype.getRemainingTime),goog.exportProperty(shaka.ads.ServerSideAd.prototype,"getMinSuggestedDuration",shaka.ads.ServerSideAd.prototype.getMinSuggestedDuration),goog.exportProperty(shaka.ads.ServerSideAd.prototype,"getDuration",shaka.ads.ServerSideAd.prototype.getDuration),shaka.ads.ServerSideAdManager=function(sn,ln,cn,dn){var pn=this;this.adContainer_=sn,this.video_=ln,this.streamPromise_=null,this.streamRequestStartTime_=NaN,this.onEvent_=dn,this.isLiveContent_=!1,this.adProgressData_=this.ad_=this.snapForwardTime_=null,this.backupUrl_="",this.currentCuePoints_=[],this.eventManager_=new shaka.util.EventManager,sn=new google.ima.dai.api.UiSettings,sn.setLocale(cn),this.streamManager_=new google.ima.dai.api.StreamManager(this.video_,this.adContainer_,sn),this.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.IMA_STREAM_MANAGER_LOADED,new Map().set("imaStreamManager",this.streamManager_))),this.eventManager_.listen(this.streamManager_,google.ima.dai.api.StreamEvent.Type.LOADED,function(vn){shaka.log.info("Ad SS Loaded"),pn.onLoaded_(vn)}),this.eventManager_.listen(this.streamManager_,google.ima.dai.api.StreamEvent.Type.ERROR,function(){shaka.log.info("Ad SS Error"),pn.onError_()}),this.eventManager_.listen(this.streamManager_,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){shaka.log.info("Ad Break Started")}),this.eventManager_.listen(this.streamManager_,google.ima.dai.api.StreamEvent.Type.STARTED,function(vn){shaka.log.info("Ad Started"),pn.onAdStart_(vn)}),this.eventManager_.listen(this.streamManager_,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){shaka.log.info("Ad Break Ended"),pn.onAdBreakEnded_()}),this.eventManager_.listen(this.streamManager_,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(vn){pn.onAdProgress_(vn)}),this.eventManager_.listen(this.streamManager_,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){shaka.log.info("Ad event: First Quartile"),pn.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_FIRST_QUARTILE))}),this.eventManager_.listen(this.streamManager_,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){shaka.log.info("Ad event: Midpoint"),pn.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_MIDPOINT))}),this.eventManager_.listen(this.streamManager_,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){shaka.log.info("Ad event: Third Quartile"),pn.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_THIRD_QUARTILE))}),this.eventManager_.listen(this.streamManager_,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){shaka.log.info("Ad event: Complete"),pn.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_COMPLETE)),pn.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_STOPPED)),pn.adContainer_.removeAttribute("ad-active"),pn.ad_=null}),this.eventManager_.listen(this.streamManager_,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){shaka.log.info("Ad event: Skipped"),pn.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_SKIPPED)),pn.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_STOPPED))}),this.eventManager_.listen(this.streamManager_,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(vn){shaka.log.info("Ad event: Cue points changed"),pn.onCuePointsChanged_(vn)})},shaka.ads.ServerSideAdManager.prototype.streamRequest=function(sn,ln){return this.streamPromise_?Promise.reject(new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.ADS,shaka.util.Error.Code.CURRENT_DAI_REQUEST_NOT_FINISHED)):(sn instanceof google.ima.dai.api.LiveStreamRequest&&(this.isLiveContent_=!0),this.streamPromise_=new shaka.util.PublicPromise,this.streamManager_.requestStream(sn),this.backupUrl_=ln||"",this.streamRequestStartTime_=Date.now()/1e3,this.streamPromise_)},shaka.ads.ServerSideAdManager.prototype.replaceAdTagParameters=function(sn){this.streamManager_.replaceAdTagParameters(sn)},shaka.ads.ServerSideAdManager.prototype.stop=function(){this.backupUrl_="",this.snapForwardTime_=null,this.currentCuePoints_=[]},shaka.ads.ServerSideAdManager.prototype.release=function(){this.stop(),this.eventManager_&&this.eventManager_.release()},shaka.ads.ServerSideAdManager.prototype.onTimedMetadata=function(sn,ln,cn){this.streamManager_.processMetadata(sn,ln,cn)},shaka.ads.ServerSideAdManager.prototype.onCueMetadataChange=function(sn){if(sn.key&&sn.data){var ln={};ln[sn.key]=sn.data,this.streamManager_.onTimedMetadata(ln)}},shaka.ads.ServerSideAdManager.prototype.getCuePoints=function(){return this.currentCuePoints_},shaka.ads.ServerSideAdManager.prototype.checkForSnapback_=function(){var sn=this.video_.currentTime;if(sn!=0){this.streamManager_.streamTimeForContentTime(sn);var ln=this.streamManager_.previousCuePointForStreamTime(sn);ln&&!ln.played&&(shaka.log.info("Seeking back to the start of the ad break at "+ln.start+" and will return to "+sn),this.snapForwardTime_=sn,this.video_.currentTime=ln.start)}},shaka.ads.ServerSideAdManager.prototype.onAdStart_=function(sn){goog.asserts.assert(this.streamManager_,"Should have a stream manager at this point!"),sn=sn.getAd(),this.ad_=new shaka.ads.ServerSideAd(sn,this.video_),this.adProgressData_&&this.ad_.setProgressData(this.adProgressData_),this.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_STARTED,new Map().set("ad",this.ad_))),this.adContainer_.setAttribute("ad-active","true")},shaka.ads.ServerSideAdManager.prototype.onAdBreakEnded_=function(){this.adContainer_.removeAttribute("ad-active");var sn=this.video_.currentTime;this.snapForwardTime_&&this.snapForwardTime_>sn&&(this.video_.currentTime=this.snapForwardTime_,this.snapForwardTime_=null)},shaka.ads.ServerSideAdManager.prototype.onLoaded_=function(sn){var ln=this,cn=Date.now()/1e3-this.streamRequestStartTime_;this.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.ADS_LOADED,new Map().set("loadTime",cn))),sn=sn.getStreamData().url,this.streamPromise_.resolve(sn),this.streamPromise_=null,this.isLiveContent_||this.eventManager_.listen(this.video_,"seeked",function(){ln.checkForSnapback_()})},shaka.ads.ServerSideAdManager.prototype.onError_=function(){this.backupUrl_.length?(shaka.log.warning("IMA stream request returned an error. Falling back to the backup asset uri."),this.streamPromise_.resolve(this.backupUrl_)):this.streamPromise_.reject("IMA Stream request returned an error and there was no backup asset uri provided."),this.streamPromise_=null},shaka.ads.ServerSideAdManager.prototype.onAdProgress_=function(sn){this.adProgressData_=sn.getStreamData().adProgressData,this.ad_&&this.ad_.setProgressData(this.adProgressData_)},shaka.ads.ServerSideAdManager.prototype.onCuePointsChanged_=function(sn){var ln=sn.getStreamData();sn=[],ln=$jscomp.makeIterator(ln.cuepoints);for(var cn=ln.next();!cn.done;cn=ln.next())cn=cn.value,sn.push({start:cn.start,end:cn.end});this.currentCuePoints_=sn,this.onEvent_(new shaka.util.FakeEvent(shaka.ads.AdManager.CUEPOINTS_CHANGED,new Map().set("cuepoints",sn)))},shaka.ads.AdManager=function(){shaka.util.FakeEventTarget.call(this),this.ssAdManager_=this.csAdManager_=null,this.stats_=new shaka.ads.AdsStats,this.locale_=navigator.language},$jscomp.inherits(shaka.ads.AdManager,shaka.util.FakeEventTarget),shaka.ads.AdManager.prototype.setLocale=function(sn){this.locale_=sn},shaka.ads.AdManager.prototype.initClientSide=function(sn,ln){var cn=this;if(!window.google||!google.ima||!google.ima.AdsLoader)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.ADS,shaka.util.Error.Code.CS_IMA_SDK_MISSING);this.csAdManager_&&this.csAdManager_.release(),this.csAdManager_=new shaka.ads.ClientSideAdManager(sn,ln,this.locale_,function(dn){if(dn&&dn.type)switch(dn.type){case shaka.ads.AdManager.ADS_LOADED:cn.stats_.addLoadTime(dn.loadTime);break;case shaka.ads.AdManager.AD_STARTED:cn.stats_.incrementStarted();break;case shaka.ads.AdManager.AD_COMPLETE:cn.stats_.incrementPlayedCompletely();break;case shaka.ads.AdManager.AD_SKIPPED:cn.stats_.incrementSkipped()}cn.dispatchEvent(dn)})},shaka.ads.AdManager.prototype.release=function(){this.csAdManager_&&(this.csAdManager_.release(),this.csAdManager_=null),this.ssAdManager_&&(this.ssAdManager_.release(),this.ssAdManager_=null),shaka.util.FakeEventTarget.prototype.release.call(this)},shaka.ads.AdManager.prototype.onAssetUnload=function(){this.csAdManager_&&this.csAdManager_.stop(),this.ssAdManager_&&this.ssAdManager_.stop(),this.dispatchEvent(new shaka.util.FakeEvent(shaka.ads.AdManager.AD_STOPPED)),this.stats_=new shaka.ads.AdsStats},shaka.ads.AdManager.prototype.requestClientSideAds=function(sn){if(!this.csAdManager_)throw new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.ADS,shaka.util.Error.Code.CS_AD_MANAGER_NOT_INITIALIZED);this.csAdManager_.requestAds(sn)},shaka.ads.AdManager.prototype.initServerSide=function(sn,ln){var cn=this;if(!window.google||!google.ima||!google.ima.dai)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.ADS,shaka.util.Error.Code.SS_IMA_SDK_MISSING);this.ssAdManager_&&this.ssAdManager_.release(),this.ssAdManager_=new shaka.ads.ServerSideAdManager(sn,ln,this.locale_,function(dn){if(dn&&dn.type)switch(dn.type){case shaka.ads.AdManager.ADS_LOADED:cn.stats_.addLoadTime(dn.loadTime);break;case shaka.ads.AdManager.AD_STARTED:cn.stats_.incrementStarted();break;case shaka.ads.AdManager.AD_COMPLETE:cn.stats_.incrementPlayedCompletely();break;case shaka.ads.AdManager.AD_SKIPPED:cn.stats_.incrementSkipped()}cn.dispatchEvent(dn)})},shaka.ads.AdManager.prototype.requestServerSideStream=function(sn,ln){if(ln=ln===void 0?"":ln,!this.ssAdManager_)throw new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.ADS,shaka.util.Error.Code.SS_AD_MANAGER_NOT_INITIALIZED);sn.adTagParameters||(sn.adTagParameters={});var cn=sn.adTagParameters;return(cn.mpt||cn.mpv)&&shaka.log.alwaysWarn('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),sn.adTagParameters.mpt="shaka-player",sn.adTagParameters.mpv=shaka.Player.version,this.ssAdManager_.streamRequest(sn,ln)},shaka.ads.AdManager.prototype.replaceServerSideAdTagParameters=function(sn){if(!this.ssAdManager_)throw new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.ADS,shaka.util.Error.Code.SS_AD_MANAGER_NOT_INITIALIZED);(sn.mpt||sn.mpv)&&shaka.log.alwaysWarn('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),sn.mpt="Shaka Player",sn.mpv=shaka.Player.version,this.ssAdManager_.replaceAdTagParameters(sn)},shaka.ads.AdManager.prototype.getServerSideCuePoints=function(){if(!this.ssAdManager_)throw new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.ADS,shaka.util.Error.Code.SS_AD_MANAGER_NOT_INITIALIZED);return this.ssAdManager_.getCuePoints()},shaka.ads.AdManager.prototype.getStats=function(){return this.stats_.getBlob()},shaka.ads.AdManager.prototype.onDashTimedMetadata=function(sn){if(this.ssAdManager_&&sn.schemeIdUri=="urn:google:dai:2018"){var ln=sn.schemeIdUri,cn=sn.eventElement?sn.eventElement.getAttribute("messageData"):null;this.ssAdManager_.onTimedMetadata(ln,cn,sn.startTime)}},shaka.ads.AdManager.prototype.onHlsTimedMetadata=function(sn,ln){this.ssAdManager_&&this.ssAdManager_.onTimedMetadata("ID3",sn.data,ln)},shaka.ads.AdManager.prototype.onCueMetadataChange=function(sn){this.ssAdManager_&&this.ssAdManager_.onCueMetadataChange(sn)},goog.exportSymbol("shaka.ads.AdManager",shaka.ads.AdManager),goog.exportProperty(shaka.ads.AdManager.prototype,"onCueMetadataChange",shaka.ads.AdManager.prototype.onCueMetadataChange),goog.exportProperty(shaka.ads.AdManager.prototype,"onHlsTimedMetadata",shaka.ads.AdManager.prototype.onHlsTimedMetadata),goog.exportProperty(shaka.ads.AdManager.prototype,"onDashTimedMetadata",shaka.ads.AdManager.prototype.onDashTimedMetadata),goog.exportProperty(shaka.ads.AdManager.prototype,"getStats",shaka.ads.AdManager.prototype.getStats),goog.exportProperty(shaka.ads.AdManager.prototype,"getServerSideCuePoints",shaka.ads.AdManager.prototype.getServerSideCuePoints),goog.exportProperty(shaka.ads.AdManager.prototype,"replaceServerSideAdTagParameters",shaka.ads.AdManager.prototype.replaceServerSideAdTagParameters),goog.exportProperty(shaka.ads.AdManager.prototype,"requestServerSideStream",shaka.ads.AdManager.prototype.requestServerSideStream),goog.exportProperty(shaka.ads.AdManager.prototype,"initServerSide",shaka.ads.AdManager.prototype.initServerSide),goog.exportProperty(shaka.ads.AdManager.prototype,"requestClientSideAds",shaka.ads.AdManager.prototype.requestClientSideAds),goog.exportProperty(shaka.ads.AdManager.prototype,"onAssetUnload",shaka.ads.AdManager.prototype.onAssetUnload),goog.exportProperty(shaka.ads.AdManager.prototype,"release",shaka.ads.AdManager.prototype.release),goog.exportProperty(shaka.ads.AdManager.prototype,"initClientSide",shaka.ads.AdManager.prototype.initClientSide),goog.exportProperty(shaka.ads.AdManager.prototype,"setLocale",shaka.ads.AdManager.prototype.setLocale),shaka.ads.AdManager.ADS_LOADED="ads-loaded",goog.exportProperty(shaka.ads.AdManager,"ADS_LOADED",shaka.ads.AdManager.ADS_LOADED),shaka.ads.AdManager.AD_STARTED="ad-started",goog.exportProperty(shaka.ads.AdManager,"AD_STARTED",shaka.ads.AdManager.AD_STARTED),shaka.ads.AdManager.AD_FIRST_QUARTILE="ad-first-quartile",goog.exportProperty(shaka.ads.AdManager,"AD_FIRST_QUARTILE",shaka.ads.AdManager.AD_FIRST_QUARTILE),shaka.ads.AdManager.AD_MIDPOINT="ad-midpoint",goog.exportProperty(shaka.ads.AdManager,"AD_MIDPOINT",shaka.ads.AdManager.AD_MIDPOINT),shaka.ads.AdManager.AD_THIRD_QUARTILE="ad-third-quartile",goog.exportProperty(shaka.ads.AdManager,"AD_THIRD_QUARTILE",shaka.ads.AdManager.AD_THIRD_QUARTILE),shaka.ads.AdManager.AD_COMPLETE="ad-complete",goog.exportProperty(shaka.ads.AdManager,"AD_COMPLETE",shaka.ads.AdManager.AD_COMPLETE),shaka.ads.AdManager.AD_STOPPED="ad-stopped",goog.exportProperty(shaka.ads.AdManager,"AD_STOPPED",shaka.ads.AdManager.AD_STOPPED),shaka.ads.AdManager.AD_SKIPPED="ad-skipped",goog.exportProperty(shaka.ads.AdManager,"AD_SKIPPED",shaka.ads.AdManager.AD_SKIPPED),shaka.ads.AdManager.AD_VOLUME_CHANGED="ad-volume-changed",goog.exportProperty(shaka.ads.AdManager,"AD_VOLUME_CHANGED",shaka.ads.AdManager.AD_VOLUME_CHANGED),shaka.ads.AdManager.AD_MUTED="ad-muted",goog.exportProperty(shaka.ads.AdManager,"AD_MUTED",shaka.ads.AdManager.AD_MUTED),shaka.ads.AdManager.AD_PAUSED="ad-paused",goog.exportProperty(shaka.ads.AdManager,"AD_PAUSED",shaka.ads.AdManager.AD_PAUSED),shaka.ads.AdManager.AD_RESUMED="ad-resumed",goog.exportProperty(shaka.ads.AdManager,"AD_RESUMED",shaka.ads.AdManager.AD_RESUMED),shaka.ads.AdManager.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",goog.exportProperty(shaka.ads.AdManager,"AD_SKIP_STATE_CHANGED",shaka.ads.AdManager.AD_SKIP_STATE_CHANGED),shaka.ads.AdManager.CUEPOINTS_CHANGED="ad-cue-points-changed",goog.exportProperty(shaka.ads.AdManager,"CUEPOINTS_CHANGED",shaka.ads.AdManager.CUEPOINTS_CHANGED),shaka.ads.AdManager.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",goog.exportProperty(shaka.ads.AdManager,"IMA_AD_MANAGER_LOADED",shaka.ads.AdManager.IMA_AD_MANAGER_LOADED),shaka.ads.AdManager.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",goog.exportProperty(shaka.ads.AdManager,"IMA_STREAM_MANAGER_LOADED",shaka.ads.AdManager.IMA_STREAM_MANAGER_LOADED),shaka.ads.AdManager.AD_CLICKED="ad-clicked",goog.exportProperty(shaka.ads.AdManager,"AD_CLICKED",shaka.ads.AdManager.AD_CLICKED),shaka.ads.AdManager.AD_PROGRESS="ad-progress",goog.exportProperty(shaka.ads.AdManager,"AD_PROGRESS",shaka.ads.AdManager.AD_PROGRESS),shaka.ads.AdManager.AD_BUFFERING="ad-buffering",goog.exportProperty(shaka.ads.AdManager,"AD_BUFFERING",shaka.ads.AdManager.AD_BUFFERING),shaka.ads.AdManager.AD_IMPRESSION="ad-impression",goog.exportProperty(shaka.ads.AdManager,"AD_IMPRESSION",shaka.ads.AdManager.AD_IMPRESSION),shaka.ads.AdManager.AD_DURATION_CHANGED="ad-duration-changed",goog.exportProperty(shaka.ads.AdManager,"AD_DURATION_CHANGED",shaka.ads.AdManager.AD_DURATION_CHANGED),shaka.ads.AdManager.AD_CLOSED="ad-closed",goog.exportProperty(shaka.ads.AdManager,"AD_CLOSED",shaka.ads.AdManager.AD_CLOSED),shaka.ads.AdManager.AD_LOADED="ad-loaded",goog.exportProperty(shaka.ads.AdManager,"AD_LOADED",shaka.ads.AdManager.AD_LOADED),shaka.ads.AdManager.ALL_ADS_COMPLETED="all-ads-completed",goog.exportProperty(shaka.ads.AdManager,"ALL_ADS_COMPLETED",shaka.ads.AdManager.ALL_ADS_COMPLETED),shaka.ads.AdManager.AD_LINEAR_CHANGED="ad-linear-changed",goog.exportProperty(shaka.ads.AdManager,"AD_LINEAR_CHANGED",shaka.ads.AdManager.AD_LINEAR_CHANGED),shaka.ads.AdManager.AD_METADATA="ad-metadata",goog.exportProperty(shaka.ads.AdManager,"AD_METADATA",shaka.ads.AdManager.AD_METADATA),shaka.ads.AdManager.AD_RECOVERABLE_ERROR="ad-recoverable-error",goog.exportProperty(shaka.ads.AdManager,"AD_RECOVERABLE_ERROR",shaka.ads.AdManager.AD_RECOVERABLE_ERROR),shaka.ads.AdManager.AD_BREAK_READY="ad-break-ready",goog.exportProperty(shaka.ads.AdManager,"AD_BREAK_READY",shaka.ads.AdManager.AD_BREAK_READY),shaka.ads.AdManager.AD_INTERACTION="ad-interaction",goog.exportProperty(shaka.ads.AdManager,"AD_INTERACTION",shaka.ads.AdManager.AD_INTERACTION),shaka.Player.setAdManagerFactory(function(){return new shaka.ads.AdManager}),shaka.cast={},shaka.cast.CastUtils=function(){},shaka.cast.CastUtils.serialize=function(sn){return JSON.stringify(sn,function(ln,cn){if(typeof cn!="function"){if(cn instanceof Event||cn instanceof shaka.util.FakeEvent){ln={};for(var dn in cn){var pn=cn[dn];pn&&typeof pn=="object"?dn=="detail"&&(ln[dn]=pn):dn in Event||(ln[dn]=pn)}return ln}return cn instanceof Error?shaka.cast.CastUtils.unpackError_(cn):cn instanceof TimeRanges?shaka.cast.CastUtils.unpackTimeRanges_(cn):cn instanceof Uint8Array?shaka.cast.CastUtils.unpackUint8Array_(cn):typeof cn=="number"?isNaN(cn)?"NaN":isFinite(cn)?cn:0>cn?"-Infinity":"Infinity":cn}})},shaka.cast.CastUtils.deserialize=function(sn){return JSON.parse(sn,function(ln,cn){return cn=="NaN"?NaN:cn=="-Infinity"?-1/0:cn=="Infinity"?1/0:cn&&typeof cn=="object"&&cn.__type__=="TimeRanges"?shaka.cast.CastUtils.simulateTimeRanges_(cn):cn&&typeof cn=="object"&&cn.__type__=="Uint8Array"?shaka.cast.CastUtils.makeUint8Array_(cn):cn&&typeof cn=="object"&&cn.__type__=="Error"?shaka.cast.CastUtils.makeError_(cn):cn})},shaka.cast.CastUtils.unpackTimeRanges_=function(sn){var ln={__type__:"TimeRanges",length:sn.length,start:[],end:[]};sn=$jscomp.makeIterator(shaka.media.TimeRangesUtils.getBufferedInfo(sn));for(var cn=sn.next();!cn.done;cn=sn.next()){cn=cn.value;var dn=cn.end;ln.start.push(cn.start),ln.end.push(dn)}return ln},shaka.cast.CastUtils.simulateTimeRanges_=function(sn){return{length:sn.length,start:function(ln){return sn.start[ln]},end:function(ln){return sn.end[ln]}}},shaka.cast.CastUtils.unpackUint8Array_=function(sn){return{__type__:"Uint8Array",entries:Array.from(sn)}},shaka.cast.CastUtils.makeUint8Array_=function(sn){return new Uint8Array(sn.entries)},shaka.cast.CastUtils.unpackError_=function(sn){var ln=new Set(["name","message","stack"]),cn;for(cn in sn)ln.add(cn);var dn=$jscomp.makeIterator(Object.getOwnPropertyNames(sn));for(cn=dn.next();!cn.done;cn=dn.next())ln.add(cn.value);for(dn={},ln=$jscomp.makeIterator(ln),cn=ln.next();!cn.done;cn=ln.next())cn=cn.value,dn[cn]=sn[cn];return{__type__:"Error",contents:dn}},shaka.cast.CastUtils.makeError_=function(sn){sn=sn.contents;var ln=Error(sn.message),cn;for(cn in sn)ln[cn]=sn[cn];return ln},shaka.cast.CastUtils.VideoEvents="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),shaka.cast.CastUtils.VideoAttributes="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),shaka.cast.CastUtils.VideoInitStateAttributes=["loop","playbackRate"],shaka.cast.CastUtils.VideoVoidMethods=["pause","play"],shaka.cast.CastUtils.PlayerGetterMethods={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10},shaka.cast.CastUtils.LargePlayerGetterMethods={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},shaka.cast.CastUtils.PlayerGetterMethodsThatRequireLive={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},shaka.cast.CastUtils.PlayerInitState=[["getConfiguration","configure"]],shaka.cast.CastUtils.PlayerInitAfterLoadState=[["isTextTrackVisible","setTextTrackVisibility"]],shaka.cast.CastUtils.PlayerVoidMethods="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),shaka.cast.CastUtils.PlayerPromiseMethods=["attach","attachCanvas","detach","load","unload"],shaka.cast.CastUtils.SHAKA_MESSAGE_NAMESPACE="urn:x-cast:com.google.shaka.v2",shaka.cast.CastUtils.GENERIC_MESSAGE_NAMESPACE="urn:x-cast:com.google.cast.media",shaka.cast.CastSender=function(sn,ln,cn,dn,pn,vn,kn){var Sn=this;this.receiverAppId_=sn,this.androidReceiverCompatible_=kn,this.statusChangeTimer_=new shaka.util.Timer(ln),this.onFirstCastStateUpdate_=cn,this.hasJoinedExistingSession_=!1,this.onRemoteEvent_=dn,this.onResumeLocal_=pn,this.onInitStateRequired_=vn,this.isCasting_=this.apiReady_=!1,this.receiverName_="",this.appData_=null,this.onConnectionStatusChangedBound_=function(){return Sn.onConnectionStatusChanged_()},this.onMessageReceivedBound_=function(wn,Pn){return Sn.onMessageReceived_(wn,Pn)},this.cachedProperties_={video:{},player:{}},this.nextAsyncCallId_=0,this.asyncCallPromises_={},this.castPromise_=null,shaka.cast.CastSender.instances_.add(this)},shaka.cast.CastSender.prototype.destroy=function(){return shaka.cast.CastSender.instances_.delete(this),this.rejectAllPromises_(),shaka.cast.CastSender.session_&&this.removeListeners_(),this.statusChangeTimer_&&(this.statusChangeTimer_.stop(),this.statusChangeTimer_=null),this.onResumeLocal_=this.onRemoteEvent_=null,this.isCasting_=this.apiReady_=!1,this.onMessageReceivedBound_=this.onConnectionStatusChangedBound_=this.castPromise_=this.asyncCallPromises_=this.cachedProperties_=this.appData_=null,Promise.resolve()},shaka.cast.CastSender.prototype.apiReady=function(){return this.apiReady_},shaka.cast.CastSender.prototype.hasReceivers=function(){return shaka.cast.CastSender.hasReceivers_},shaka.cast.CastSender.prototype.isCasting=function(){return this.isCasting_},shaka.cast.CastSender.prototype.receiverName=function(){return this.receiverName_},shaka.cast.CastSender.prototype.hasRemoteProperties=function(){return Object.keys(this.cachedProperties_.video).length!=0},shaka.cast.CastSender.prototype.init=function(){var sn=shaka.cast.CastSender;if(this.receiverAppId_.length)if(window.chrome&&chrome.cast&&chrome.cast.isAvailable){this.apiReady_=!0,this.statusChangeTimer_.tickNow();var ln=new chrome.cast.SessionRequest(this.receiverAppId_,[],null,this.androidReceiverCompatible_,null);ln=new chrome.cast.ApiConfig(ln,function(cn){return sn.onExistingSessionJoined_(cn)},function(cn){return sn.onReceiverStatusChanged_(cn)},"origin_scoped"),chrome.cast.initialize(ln,function(){shaka.log.debug("CastSender: init")},function(cn){shaka.log.error("CastSender: init error",cn)}),shaka.cast.CastSender.hasReceivers_&&this.statusChangeTimer_.tickAfter(shaka.cast.CastSender.STATUS_DELAY),(ln=shaka.cast.CastSender.session_)&&ln.status!=chrome.cast.SessionStatus.STOPPED?(shaka.log.debug("CastSender: re-using existing connection"),this.onExistingSessionJoined_(ln)):shaka.cast.CastSender.session_=null}else window.__onGCastApiAvailable!==sn.onGCastApiAvailable_&&(sn.__onGCastApiAvailable_=window.__onGCastApiAvailable||null,window.__onGCastApiAvailable=sn.onGCastApiAvailable_)},shaka.cast.CastSender.prototype.setAppData=function(sn){this.appData_=sn,this.isCasting_&&this.sendMessage_({type:"appData",appData:this.appData_})},shaka.cast.CastSender.prototype.cast=function(sn){var ln=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cn){if(!ln.apiReady_)throw new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.CAST,shaka.util.Error.Code.CAST_API_UNAVAILABLE);if(!shaka.cast.CastSender.hasReceivers_)throw new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.CAST,shaka.util.Error.Code.NO_CAST_RECEIVERS);if(ln.isCasting_)throw new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.CAST,shaka.util.Error.Code.ALREADY_CASTING);return ln.castPromise_=new shaka.util.PublicPromise,chrome.cast.requestSession(function(dn){return ln.onSessionInitiated_(sn,dn)},function(dn){return ln.onConnectionError_(dn)}),cn.yield(ln.castPromise_,0)})},shaka.cast.CastSender.prototype.showDisconnectDialog=function(){var sn=this;if(this.isCasting_){var ln=this.onInitStateRequired_();chrome.cast.requestSession(function(cn){return sn.onSessionInitiated_(ln,cn)},function(cn){return sn.onConnectionError_(cn)})}},shaka.cast.CastSender.prototype.forceDisconnect=function(){if(this.isCasting_){if(this.rejectAllPromises_(),shaka.cast.CastSender.session_){this.removeListeners_();try{shaka.cast.CastSender.session_.stop(function(){},function(){})}catch{}shaka.cast.CastSender.session_=null}this.onConnectionStatusChanged_()}},shaka.cast.CastSender.prototype.get=function(sn,ln){var cn=this;goog.asserts.assert(sn=="video"||sn=="player","Unexpected target name");var dn=shaka.cast.CastUtils;if(sn=="video"){if(dn.VideoVoidMethods.includes(ln))return function(){var vn=$jscomp.getRestArguments.apply(0,arguments);return cn.remoteCall_.apply(cn,[sn,ln].concat($jscomp.arrayFromIterable(vn)))}}else if(sn=="player"){if(dn.PlayerGetterMethodsThatRequireLive[ln]){var pn=this.get("player","isLive")();if(goog.asserts.assert(pn,ln+" should be called on a live stream!"),!pn)return function(){}}if(dn.PlayerVoidMethods.includes(ln))return function(){var vn=$jscomp.getRestArguments.apply(0,arguments);return cn.remoteCall_.apply(cn,[sn,ln].concat($jscomp.arrayFromIterable(vn)))};if(dn.PlayerPromiseMethods.includes(ln))return function(){var vn=$jscomp.getRestArguments.apply(0,arguments);return cn.remoteAsyncCall_.apply(cn,[sn,ln].concat($jscomp.arrayFromIterable(vn)))};if(dn.PlayerGetterMethods[ln]||dn.LargePlayerGetterMethods[ln])return function(){return cn.propertyGetter_(sn,ln)}}return this.propertyGetter_(sn,ln)},shaka.cast.CastSender.prototype.set=function(sn,ln,cn){goog.asserts.assert(sn=="video"||sn=="player","Unexpected target name"),this.cachedProperties_[sn][ln]=cn,this.sendMessage_({type:"set",targetName:sn,property:ln,value:cn})},shaka.cast.CastSender.prototype.onSessionInitiated_=function(sn,ln){shaka.log.debug("CastSender: onSessionInitiated"),this.onSessionCreated_(ln),this.sendMessage_({type:"init",initState:sn,appData:this.appData_}),this.castPromise_.resolve()},shaka.cast.CastSender.prototype.onConnectionError_=function(sn){var ln=shaka.util.Error.Code.UNEXPECTED_CAST_ERROR;switch(sn.code){case"cancel":ln=shaka.util.Error.Code.CAST_CANCELED_BY_USER;break;case"timeout":ln=shaka.util.Error.Code.CAST_CONNECTION_TIMED_OUT;break;case"receiver_unavailable":ln=shaka.util.Error.Code.CAST_RECEIVER_APP_UNAVAILABLE}this.castPromise_.reject(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.CAST,ln,sn))},shaka.cast.CastSender.prototype.propertyGetter_=function(sn,ln){return goog.asserts.assert(sn=="video"||sn=="player","Unexpected target name"),this.cachedProperties_[sn][ln]},shaka.cast.CastSender.prototype.remoteCall_=function(sn,ln){var cn=$jscomp.getRestArguments.apply(2,arguments);goog.asserts.assert(sn=="video"||sn=="player","Unexpected target name"),this.sendMessage_({type:"call",targetName:sn,methodName:ln,args:cn})},shaka.cast.CastSender.prototype.remoteAsyncCall_=function(sn,ln){var cn=$jscomp.getRestArguments.apply(2,arguments);goog.asserts.assert(sn=="video"||sn=="player","Unexpected target name");var dn=new shaka.util.PublicPromise,pn=this.nextAsyncCallId_.toString();this.nextAsyncCallId_++,this.asyncCallPromises_[pn]=dn;try{this.sendMessage_({type:"asyncCall",targetName:sn,methodName:ln,args:cn,id:pn})}catch(vn){dn.reject(vn)}return dn},shaka.cast.CastSender.onExistingSessionJoined_=function(sn){for(var ln=$jscomp.makeIterator(shaka.cast.CastSender.instances_),cn=ln.next();!cn.done;cn=ln.next())cn.value.onExistingSessionJoined_(sn)},shaka.cast.CastSender.prototype.onExistingSessionJoined_=function(sn){shaka.log.debug("CastSender: onExistingSessionJoined");var ln=this.onInitStateRequired_();this.castPromise_=new shaka.util.PublicPromise,this.hasJoinedExistingSession_=!0,this.onSessionInitiated_(ln,sn)},shaka.cast.CastSender.onReceiverStatusChanged_=function(sn){for(var ln=$jscomp.makeIterator(shaka.cast.CastSender.instances_),cn=ln.next();!cn.done;cn=ln.next())cn.value.onReceiverStatusChanged_(sn)},shaka.cast.CastSender.prototype.onReceiverStatusChanged_=function(sn){shaka.log.debug("CastSender: receiver status",sn),shaka.cast.CastSender.hasReceivers_=sn=="available",this.statusChangeTimer_.tickNow()},shaka.cast.CastSender.prototype.onSessionCreated_=function(sn){shaka.cast.CastSender.session_=sn,sn.addUpdateListener(this.onConnectionStatusChangedBound_),sn.addMessageListener(shaka.cast.CastUtils.SHAKA_MESSAGE_NAMESPACE,this.onMessageReceivedBound_),this.onConnectionStatusChanged_()},shaka.cast.CastSender.prototype.removeListeners_=function(){var sn=shaka.cast.CastSender.session_;sn.removeUpdateListener(this.onConnectionStatusChangedBound_),sn.removeMessageListener(shaka.cast.CastUtils.SHAKA_MESSAGE_NAMESPACE,this.onMessageReceivedBound_)},shaka.cast.CastSender.prototype.onConnectionStatusChanged_=function(){var sn=shaka.cast.CastSender.session_?shaka.cast.CastSender.session_.status=="connected":!1;if(shaka.log.debug("CastSender: connection status",sn),this.isCasting_&&!sn){this.onResumeLocal_();for(var ln in this.cachedProperties_)this.cachedProperties_[ln]={};this.rejectAllPromises_()}this.receiverName_=(this.isCasting_=sn)?shaka.cast.CastSender.session_.receiver.friendlyName:"",this.statusChangeTimer_.tickNow()},shaka.cast.CastSender.prototype.rejectAllPromises_=function(){for(var sn in this.asyncCallPromises_){var ln=this.asyncCallPromises_[sn];delete this.asyncCallPromises_[sn],ln.reject(new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.PLAYER,shaka.util.Error.Code.LOAD_INTERRUPTED))}},shaka.cast.CastSender.prototype.onMessageReceived_=function(sn,ln){switch(sn=shaka.cast.CastUtils.deserialize(ln),shaka.log.v2("CastSender: message",sn),sn.type){case"event":var cn=sn.targetName,dn=shaka.util.FakeEvent.fromRealEvent(sn.event);this.onRemoteEvent_(cn,dn);break;case"update":cn=sn.update;for(dn in cn){sn=this.cachedProperties_[dn]||{};for(var pn in cn[dn])sn[pn]=cn[dn][pn]}this.hasJoinedExistingSession_&&(this.onFirstCastStateUpdate_(),this.hasJoinedExistingSession_=!1);break;case"asyncComplete":if(dn=sn.id,pn=sn.error,sn=this.asyncCallPromises_[dn],delete this.asyncCallPromises_[dn],goog.asserts.assert(sn,"Unexpected async id"),sn)if(pn){dn=new shaka.util.Error(pn.severity,pn.category,pn.code);for(cn in pn)dn[cn]=pn[cn];sn.reject(dn)}else sn.resolve()}},shaka.cast.CastSender.prototype.sendMessage_=function(sn){sn=shaka.cast.CastUtils.serialize(sn);var ln=shaka.cast.CastSender.session_;try{ln.sendMessage(shaka.cast.CastUtils.SHAKA_MESSAGE_NAMESPACE,sn,function(){},shaka.log.error)}catch(cn){throw shaka.log.error("Cast session sendMessage threw",cn),sn=new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.CAST,shaka.util.Error.Code.CAST_CONNECTION_TIMED_OUT,cn),ln=new shaka.util.FakeEvent("error",new Map().set("detail",sn)),this.onRemoteEvent_("player",ln),this.forceDisconnect(),sn}},shaka.cast.CastSender.STATUS_DELAY=.02,shaka.cast.CastSender.hasReceivers_=!1,shaka.cast.CastSender.session_=null,shaka.cast.CastSender.__onGCastApiAvailable_=null,shaka.cast.CastSender.instances_=new Set,shaka.cast.CastSender.onSdkLoaded_=function(sn){if(sn){sn=$jscomp.makeIterator(shaka.cast.CastSender.instances_);for(var ln=sn.next();!ln.done;ln=sn.next())ln.value.init()}},shaka.cast.CastSender.onGCastApiAvailable_=function(sn){shaka.cast.CastSender.__onGCastApiAvailable_?window.__onGCastApiAvailable=shaka.cast.CastSender.__onGCastApiAvailable_:delete window.__onGCastApiAvailable,shaka.cast.CastSender.__onGCastApiAvailable_=null,shaka.cast.CastSender.onSdkLoaded_(sn),typeof window.__onGCastApiAvailable=="function"&&window.__onGCastApiAvailable(sn)},shaka.cast.CastProxy=function(sn,ln,cn,dn){dn=dn===void 0?!1:dn,shaka.util.FakeEventTarget.call(this);var pn=this;this.localVideo_=sn,this.localPlayer_=ln,this.eventManager_=this.playerEventTarget_=this.videoEventTarget_=this.playerProxy_=this.videoProxy_=null,this.receiverAppId_=cn,this.androidReceiverCompatible_=dn,this.compiledToExternNames_=new Map,this.sender_=new shaka.cast.CastSender(cn,function(){return pn.onCastStatusChanged_()},function(){return pn.onFirstCastStateUpdate_()},function(vn,kn){return pn.onRemoteEvent_(vn,kn)},function(){return pn.onResumeLocal_()},function(){return pn.getInitState_()},dn),this.init_()},$jscomp.inherits(shaka.cast.CastProxy,shaka.util.FakeEventTarget),shaka.cast.CastProxy.prototype.destroy=function(sn){return sn&&this.sender_.forceDisconnect(),this.eventManager_&&(this.eventManager_.release(),this.eventManager_=null),sn=[],this.localPlayer_&&(sn.push(this.localPlayer_.destroy()),this.localPlayer_=null),this.sender_&&(sn.push(this.sender_.destroy()),this.sender_=null),this.playerProxy_=this.videoProxy_=this.localVideo_=null,shaka.util.FakeEventTarget.prototype.release.call(this),Promise.all(sn)},shaka.cast.CastProxy.prototype.getVideo=function(){return this.videoProxy_},shaka.cast.CastProxy.prototype.getPlayer=function(){return this.playerProxy_},shaka.cast.CastProxy.prototype.canCast=function(){return this.sender_.apiReady()&&this.sender_.hasReceivers()},shaka.cast.CastProxy.prototype.isCasting=function(){return this.sender_.isCasting()},shaka.cast.CastProxy.prototype.receiverName=function(){return this.sender_.receiverName()},shaka.cast.CastProxy.prototype.cast=function(){var sn=this,ln;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cn){return cn.nextAddress==1?(ln=sn.getInitState_(),cn.yield(sn.sender_.cast(ln),2)):sn.localPlayer_?cn.yield(sn.localPlayer_.unload(),0):cn.return()})},shaka.cast.CastProxy.prototype.setAppData=function(sn){this.sender_.setAppData(sn)},shaka.cast.CastProxy.prototype.suggestDisconnect=function(){this.sender_.showDisconnectDialog()},shaka.cast.CastProxy.prototype.forceDisconnect=function(){this.sender_.forceDisconnect()},shaka.cast.CastProxy.prototype.changeReceiverId=function(sn,ln){ln=ln===void 0?!1:ln;var cn=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(dn){if(dn.nextAddress==1)return sn==cn.receiverAppId_&&ln==cn.androidReceiverCompatible_?dn.return():(cn.receiverAppId_=sn,cn.androidReceiverCompatible_=ln,cn.sender_.forceDisconnect(),dn.yield(cn.sender_.destroy(),2));cn.sender_=null,cn.sender_=new shaka.cast.CastSender(sn,function(){return cn.onCastStatusChanged_()},function(){return cn.onFirstCastStateUpdate_()},function(pn,vn){return cn.onRemoteEvent_(pn,vn)},function(){return cn.onResumeLocal_()},function(){return cn.getInitState_()},ln),cn.sender_.init(),dn.jumpToEnd()})},shaka.cast.CastProxy.prototype.init_=function(){var sn=this;this.sender_.init(),this.eventManager_=new shaka.util.EventManager;for(var ln=$jscomp.makeIterator(shaka.cast.CastUtils.VideoEvents),cn=ln.next();!cn.done;cn=ln.next())this.eventManager_.listen(this.localVideo_,cn.value,function(vn){return sn.videoProxyLocalEvent_(vn)});for(var dn in shaka.util.FakeEvent.EventName)this.eventManager_.listen(this.localPlayer_,shaka.util.FakeEvent.EventName[dn],function(vn){return sn.playerProxyLocalEvent_(vn)});this.videoProxy_={},ln={};for(var pn in this.localVideo_)ln.$jscomp$loop$prop$k$714=pn,Object.defineProperty(this.videoProxy_,ln.$jscomp$loop$prop$k$714,{configurable:!1,enumerable:!0,get:function(vn){return function(){return sn.videoProxyGet_(vn.$jscomp$loop$prop$k$714)}}(ln),set:function(vn){return function(kn){sn.videoProxySet_(vn.$jscomp$loop$prop$k$714,kn)}}(ln)}),ln={$jscomp$loop$prop$k$714:ln.$jscomp$loop$prop$k$714};this.playerProxy_={},this.iterateOverPlayerMethods_(function(vn,kn){goog.asserts.assert(sn.playerProxy_,"Must have player proxy!"),Object.defineProperty(sn.playerProxy_,vn,{configurable:!1,enumerable:!0,get:function(){return sn.playerProxyGet_(vn)}})}),this.mapCompiledToUncompiledPlayerMethodNames_(),this.videoEventTarget_=new shaka.util.FakeEventTarget,this.videoEventTarget_.dispatchTarget=this.videoProxy_,this.playerEventTarget_=new shaka.util.FakeEventTarget,this.playerEventTarget_.dispatchTarget=this.playerProxy_},shaka.cast.CastProxy.prototype.mapCompiledToUncompiledPlayerMethodNames_=function(){var sn=this,ln=new Map;this.iterateOverPlayerMethods_(function(cn,dn){ln.has(dn)?(dn=ln.get(dn),cn.length<dn.length?sn.compiledToExternNames_.set(cn,dn):sn.compiledToExternNames_.set(dn,cn)):ln.set(dn,cn)})},shaka.cast.CastProxy.prototype.iterateOverPlayerMethods_=function(sn){function ln(wn){return wn=="constructor"||typeof cn[wn]!="function"?!1:!dn.has(wn)}goog.asserts.assert(this.localPlayer_,"Must have player!");var cn=this.localPlayer_,dn=new Set;for(pn in cn)ln(pn)&&(dn.add(pn),sn(pn,cn[pn]));for(var pn=Object.getPrototypeOf(cn),vn=Object.getPrototypeOf({});pn&&pn!=vn;){for(var kn=$jscomp.makeIterator(Object.getOwnPropertyNames(pn)),Sn=kn.next();!Sn.done;Sn=kn.next())Sn=Sn.value,ln(Sn)&&(dn.add(Sn),sn(Sn,cn[Sn]));pn=Object.getPrototypeOf(pn)}},shaka.cast.CastProxy.prototype.getInitState_=function(){var sn={video:{},player:{},playerAfterLoad:{},manifest:this.localPlayer_.getAssetUri(),startTime:null};this.localVideo_.pause();for(var ln=$jscomp.makeIterator(shaka.cast.CastUtils.VideoInitStateAttributes),cn=ln.next();!cn.done;cn=ln.next())cn=cn.value,sn.video[cn]=this.localVideo_[cn];for(this.localVideo_.ended||(sn.startTime=this.localVideo_.currentTime),ln=$jscomp.makeIterator(shaka.cast.CastUtils.PlayerInitState),cn=ln.next();!cn.done;cn=ln.next()){var dn=cn.value;cn=dn[1],dn=this.localPlayer_[dn[0]](),sn.player[cn]=dn}for(ln=$jscomp.makeIterator(shaka.cast.CastUtils.PlayerInitAfterLoadState),cn=ln.next();!cn.done;cn=ln.next())dn=cn.value,cn=dn[1],dn=this.localPlayer_[dn[0]](),sn.playerAfterLoad[cn]=dn;return sn},shaka.cast.CastProxy.prototype.onCastStatusChanged_=function(){var sn=new shaka.util.FakeEvent("caststatuschanged");this.dispatchEvent(sn)},shaka.cast.CastProxy.prototype.onFirstCastStateUpdate_=function(){var sn=new shaka.util.FakeEvent(this.videoProxy_.paused?"pause":"play");this.videoEventTarget_.dispatchEvent(sn)},shaka.cast.CastProxy.prototype.onResumeLocal_=function(){for(var sn=this,ln=$jscomp.makeIterator(shaka.cast.CastUtils.PlayerInitState),cn=ln.next();!cn.done;cn=ln.next()){var dn=cn.value;cn=dn[1],dn=this.sender_.get("player",dn[0])(),this.localPlayer_[cn](dn)}var pn=this.sender_.get("player","getAssetUri")();cn=this.sender_.get("video","ended"),ln=Promise.resolve();var vn=this.localVideo_.autoplay;dn=null,cn||(dn=this.sender_.get("video","currentTime")),pn&&(this.localVideo_.autoplay=!1,ln=this.localPlayer_.load(pn,dn));var kn={};for(cn=$jscomp.makeIterator(shaka.cast.CastUtils.VideoInitStateAttributes),dn=cn.next();!dn.done;dn=cn.next())dn=dn.value,kn[dn]=this.sender_.get("video",dn);ln.then(function(){if(sn.localVideo_){for(var Sn=$jscomp.makeIterator(shaka.cast.CastUtils.VideoInitStateAttributes),wn=Sn.next();!wn.done;wn=Sn.next())wn=wn.value,sn.localVideo_[wn]=kn[wn];for(Sn=$jscomp.makeIterator(shaka.cast.CastUtils.PlayerInitAfterLoadState),wn=Sn.next();!wn.done;wn=Sn.next()){var Pn=wn.value;wn=Pn[1],Pn=sn.sender_.get("player",Pn[0])(),sn.localPlayer_[wn](Pn)}sn.localVideo_.autoplay=vn,pn&&sn.localVideo_.play()}},function(Sn){goog.asserts.assert(Sn instanceof shaka.util.Error,"Wrong error type!");var wn=shaka.util.FakeEvent.EventName.Error;Sn=new Map().set("detail",Sn),wn=new shaka.util.FakeEvent(wn,Sn),sn.localPlayer_.dispatchEvent(wn)})},shaka.cast.CastProxy.prototype.videoProxyGet_=function(sn){var ln=this;if(sn=="addEventListener")return function(dn,pn,vn){return ln.videoEventTarget_.addEventListener(dn,pn,vn)};if(sn=="removeEventListener")return function(dn,pn,vn){return ln.videoEventTarget_.removeEventListener(dn,pn,vn)};if(this.sender_.isCasting()&&!this.sender_.hasRemoteProperties()){var cn=this.localVideo_[sn];if(typeof cn!="function")return cn}return this.sender_.isCasting()?this.sender_.get("video",sn):(sn=this.localVideo_[sn],typeof sn=="function"&&(sn=sn.bind(this.localVideo_)),sn)},shaka.cast.CastProxy.prototype.videoProxySet_=function(sn,ln){this.sender_.isCasting()?this.sender_.set("video",sn,ln):this.localVideo_[sn]=ln},shaka.cast.CastProxy.prototype.videoProxyLocalEvent_=function(sn){this.sender_.isCasting()||(sn=shaka.util.FakeEvent.fromRealEvent(sn),this.videoEventTarget_.dispatchEvent(sn))},shaka.cast.CastProxy.prototype.playerProxyGet_=function(sn){var ln=this;if(this.compiledToExternNames_.has(sn)&&(sn=this.compiledToExternNames_.get(sn)),sn=="addEventListener")return function(dn,pn,vn){return ln.playerEventTarget_.addEventListener(dn,pn,vn)};if(sn=="removeEventListener")return function(dn,pn,vn){return ln.playerEventTarget_.removeEventListener(dn,pn,vn)};if(sn=="getMediaElement")return function(){return ln.videoProxy_};if(sn=="getSharedConfiguration")return shaka.log.warning("Can't share configuration across a network. Returning copy."),this.sender_.get("player","getConfiguration");if(sn=="getNetworkingEngine")return this.sender_.isCasting()&&shaka.log.warning("NOTE: getNetworkingEngine() is always local!"),function(){return ln.localPlayer_.getNetworkingEngine()};if(sn=="getDrmEngine")return this.sender_.isCasting()&&shaka.log.warning("NOTE: getDrmEngine() is always local!"),function(){return ln.localPlayer_.getDrmEngine()};if(sn=="getAdManager")return this.sender_.isCasting()&&shaka.log.warning("NOTE: getAdManager() is always local!"),function(){return ln.localPlayer_.getAdManager()};if(sn=="setVideoContainer")return this.sender_.isCasting()&&shaka.log.warning("NOTE: setVideoContainer() is always local!"),function(dn){return ln.localPlayer_.setVideoContainer(dn)};if(this.sender_.isCasting()){if(sn=="getManifest"||sn=="drmInfo")return function(){return shaka.log.alwaysWarn(sn+"() does not work while casting!"),null};if(sn=="attach"||sn=="detach")return function(){return shaka.log.alwaysWarn(sn+"() does not work while casting!"),Promise.resolve()}}if(this.sender_.isCasting()&&!this.sender_.hasRemoteProperties()&&(shaka.cast.CastUtils.PlayerGetterMethods[sn]||shaka.cast.CastUtils.LargePlayerGetterMethods[sn])){var cn=this.localPlayer_[sn];return goog.asserts.assert(typeof cn=="function","only methods on Player"),cn.bind(this.localPlayer_)}return this.sender_.isCasting()?this.sender_.get("player",sn):(cn=this.localPlayer_[sn],goog.asserts.assert(typeof cn=="function","only methods on Player"),cn.bind(this.localPlayer_))},shaka.cast.CastProxy.prototype.playerProxyLocalEvent_=function(sn){this.sender_.isCasting()||this.playerEventTarget_.dispatchEvent(sn)},shaka.cast.CastProxy.prototype.onRemoteEvent_=function(sn,ln){goog.asserts.assert(this.sender_.isCasting(),"Should only receive remote events while casting"),this.sender_.isCasting()&&(sn=="video"?this.videoEventTarget_.dispatchEvent(ln):sn=="player"&&this.playerEventTarget_.dispatchEvent(ln))},goog.exportSymbol("shaka.cast.CastProxy",shaka.cast.CastProxy),goog.exportProperty(shaka.cast.CastProxy.prototype,"changeReceiverId",shaka.cast.CastProxy.prototype.changeReceiverId),goog.exportProperty(shaka.cast.CastProxy.prototype,"forceDisconnect",shaka.cast.CastProxy.prototype.forceDisconnect),goog.exportProperty(shaka.cast.CastProxy.prototype,"suggestDisconnect",shaka.cast.CastProxy.prototype.suggestDisconnect),goog.exportProperty(shaka.cast.CastProxy.prototype,"setAppData",shaka.cast.CastProxy.prototype.setAppData),goog.exportProperty(shaka.cast.CastProxy.prototype,"cast",shaka.cast.CastProxy.prototype.cast),goog.exportProperty(shaka.cast.CastProxy.prototype,"receiverName",shaka.cast.CastProxy.prototype.receiverName),goog.exportProperty(shaka.cast.CastProxy.prototype,"isCasting",shaka.cast.CastProxy.prototype.isCasting),goog.exportProperty(shaka.cast.CastProxy.prototype,"canCast",shaka.cast.CastProxy.prototype.canCast),goog.exportProperty(shaka.cast.CastProxy.prototype,"getPlayer",shaka.cast.CastProxy.prototype.getPlayer),goog.exportProperty(shaka.cast.CastProxy.prototype,"getVideo",shaka.cast.CastProxy.prototype.getVideo),goog.exportProperty(shaka.cast.CastProxy.prototype,"destroy",shaka.cast.CastProxy.prototype.destroy),shaka.cast.CastReceiver=function(sn,ln,cn,dn){shaka.util.FakeEventTarget.call(this);var pn=this;this.video_=sn,this.player_=ln,this.eventManager_=new shaka.util.EventManager,this.targets_={video:sn,player:ln},this.appDataCallback_=cn||function(){},this.contentIdCallback_=dn||function(vn){return vn},this.metadata_=null,this.isConnected_=!1,this.isIdle_=!0,this.updateNumber_=0,this.startUpdatingUpdateNumber_=!1,this.initialStatusUpdatePending_=!0,this.genericBus_=this.shakaBus_=null,this.pollTimer_=new shaka.util.Timer(function(){pn.pollAttributes_()}),this.init_()},$jscomp.inherits(shaka.cast.CastReceiver,shaka.util.FakeEventTarget),shaka.cast.CastReceiver.prototype.isConnected=function(){return this.isConnected_},shaka.cast.CastReceiver.prototype.isIdle=function(){return this.isIdle_},shaka.cast.CastReceiver.prototype.setContentMetadata=function(sn){this.metadata_=sn},shaka.cast.CastReceiver.prototype.clearContentMetadata=function(){this.metadata_=null},shaka.cast.CastReceiver.prototype.setContentTitle=function(sn){this.metadata_||(this.metadata_={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.metadata_.title=sn},shaka.cast.CastReceiver.prototype.setContentImage=function(sn){this.metadata_||(this.metadata_={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.metadata_.images=[{url:sn}]},shaka.cast.CastReceiver.prototype.setContentArtist=function(sn){this.metadata_||(this.metadata_={}),this.metadata_.artist=sn,this.metadata_.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},shaka.cast.CastReceiver.prototype.destroy=function(){var sn=this,ln,cn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(dn){if(dn.nextAddress==1)return sn.eventManager_&&(sn.eventManager_.release(),sn.eventManager_=null),ln=[],sn.player_&&(ln.push(sn.player_.destroy()),sn.player_=null),sn.pollTimer_&&(sn.pollTimer_.stop(),sn.pollTimer_=null),sn.video_=null,sn.targets_=null,sn.appDataCallback_=null,sn.isConnected_=!1,sn.isIdle_=!0,sn.shakaBus_=null,sn.genericBus_=null,shaka.util.FakeEventTarget.prototype.release.call(sn),dn.yield(Promise.all(ln),2);cn=cast.receiver.CastReceiverManager.getInstance(),cn.stop(),dn.jumpToEnd()})},shaka.cast.CastReceiver.prototype.init_=function(){var sn=this,ln=cast.receiver.CastReceiverManager.getInstance();ln.onSenderConnected=function(){return sn.onSendersChanged_()},ln.onSenderDisconnected=function(){return sn.onSendersChanged_()},ln.onSystemVolumeChanged=function(){return sn.fakeVolumeChangeEvent_()},this.genericBus_=ln.getCastMessageBus(shaka.cast.CastUtils.GENERIC_MESSAGE_NAMESPACE),this.genericBus_.onMessage=function(pn){return sn.onGenericMessage_(pn)},this.shakaBus_=ln.getCastMessageBus(shaka.cast.CastUtils.SHAKA_MESSAGE_NAMESPACE),this.shakaBus_.onMessage=function(pn){return sn.onShakaMessage_(pn)},goog.DEBUG?shaka.util.Platform.isChromecast()&&ln.start():ln.start(),ln=$jscomp.makeIterator(shaka.cast.CastUtils.VideoEvents);for(var cn=ln.next();!cn.done;cn=ln.next())this.eventManager_.listen(this.video_,cn.value,function(pn){return sn.proxyEvent_("video",pn)});for(var dn in shaka.util.FakeEvent.EventName)this.eventManager_.listen(this.player_,shaka.util.FakeEvent.EventName[dn],function(pn){return sn.proxyEvent_("player",pn)});cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?this.player_.setMaxHardwareResolution(3840,2160):this.player_.setMaxHardwareResolution(1920,1080),this.eventManager_.listen(this.video_,"loadeddata",function(){sn.startUpdatingUpdateNumber_=!0}),this.eventManager_.listen(this.player_,"loading",function(){sn.isIdle_=!1,sn.onCastStatusChanged_()}),this.eventManager_.listen(this.video_,"playing",function(){sn.isIdle_=!1,sn.onCastStatusChanged_()}),this.eventManager_.listen(this.video_,"pause",function(){sn.onCastStatusChanged_()}),this.eventManager_.listen(this.player_,"unloading",function(){sn.isIdle_=!0,sn.onCastStatusChanged_()}),this.eventManager_.listen(this.video_,"ended",function(){new shaka.util.Timer(function(){sn.video_&&sn.video_.ended&&(sn.isIdle_=!0,sn.onCastStatusChanged_())}).tickAfter(shaka.cast.CastReceiver.IDLE_INTERVAL)})},shaka.cast.CastReceiver.prototype.onSendersChanged_=function(){this.updateNumber_=0,this.initialStatusUpdatePending_=!0,this.isConnected_=cast.receiver.CastReceiverManager.getInstance().getSenders().length!=0,this.onCastStatusChanged_()},shaka.cast.CastReceiver.prototype.onCastStatusChanged_=function(){var sn=this,ln;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cn){if(cn.nextAddress==1)return cn.yield(Promise.resolve(),2);if(!sn.player_)return cn.return();ln=new shaka.util.FakeEvent("caststatuschanged"),sn.dispatchEvent(ln),sn.maybeSendMediaInfoMessage_()||sn.sendMediaStatus_(),cn.jumpToEnd()})},shaka.cast.CastReceiver.prototype.initState_=function(sn,ln){var cn=this,dn,pn,vn,kn,Sn,wn,Pn,Nn,Ln,Fn,zn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Dn){switch(Dn.nextAddress){case 1:for(dn in sn.player)pn=sn.player[dn],cn.player_[dn](pn);return cn.appDataCallback_(ln),vn=cn.video_.autoplay,sn.manifest?(cn.video_.autoplay=!1,Dn.setCatchFinallyBlocks(5),Dn.yield(cn.player_.load(sn.manifest,sn.startTime),7)):Dn.yield(Promise.resolve(),3);case 7:Dn.leaveTryBlock(3);break;case 5:return kn=Dn.enterCatchBlock(),goog.asserts.assert(kn instanceof shaka.util.Error,"Wrong error type!"),Sn=shaka.util.FakeEvent.EventName.Error,wn=new Map().set("detail",kn),Pn=new shaka.util.FakeEvent(Sn,wn),cn.player_&&cn.player_.dispatchEvent(Pn),Dn.return();case 3:if(!cn.player_)return Dn.return();for(Nn in sn.video)Ln=sn.video[Nn],cn.video_[Nn]=Ln;for(Fn in sn.playerAfterLoad)zn=sn.playerAfterLoad[Fn],cn.player_[Fn](zn);cn.video_.autoplay=vn,sn.manifest&&(cn.video_.play(),cn.sendMediaStatus_()),Dn.jumpToEnd()}})},shaka.cast.CastReceiver.prototype.proxyEvent_=function(sn,ln){this.player_&&(this.pollAttributes_(),this.sendMessage_({type:"event",targetName:sn,event:ln},this.shakaBus_))},shaka.cast.CastReceiver.prototype.pollAttributes_=function(){this.pollTimer_.tickAfter(shaka.cast.CastReceiver.POLL_INTERVAL);for(var sn={video:{},player:{}},ln=$jscomp.makeIterator(shaka.cast.CastUtils.VideoAttributes),cn=ln.next();!cn.done;cn=ln.next())cn=cn.value,sn.video[cn]=this.video_[cn];if(this.player_.isLive()){ln=shaka.cast.CastUtils.PlayerGetterMethodsThatRequireLive;for(var dn in ln)this.updateNumber_%ln[dn]==0&&(sn.player[dn]=this.player_[dn]())}for(var pn in shaka.cast.CastUtils.PlayerGetterMethods)this.updateNumber_%shaka.cast.CastUtils.PlayerGetterMethods[pn]==0&&(sn.player[pn]=this.player_[pn]());(dn=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(sn.video.volume=dn.level,sn.video.muted=dn.muted),this.sendMessage_({type:"update",update:sn},this.shakaBus_);for(var vn in shaka.cast.CastUtils.LargePlayerGetterMethods)this.updateNumber_%shaka.cast.CastUtils.LargePlayerGetterMethods[vn]==0&&(sn={player:{}},sn.player[vn]=this.player_[vn](),this.sendMessage_({type:"update",update:sn},this.shakaBus_));this.startUpdatingUpdateNumber_&&(this.updateNumber_+=1),this.maybeSendMediaInfoMessage_()},shaka.cast.CastReceiver.prototype.maybeSendMediaInfoMessage_=function(){return this.initialStatusUpdatePending_&&(this.video_.duration||this.player_.isLive())?(this.sendMediaInfoMessage_(),this.initialStatusUpdatePending_=!1,!0):!1},shaka.cast.CastReceiver.prototype.sendMediaInfoMessage_=function(sn){sn=sn===void 0?0:sn;var ln={contentId:this.player_.getAssetUri(),streamType:this.player_.isLive()?"LIVE":"BUFFERED",contentType:""};this.player_.isLive()||(ln.duration=this.video_.duration),this.metadata_&&(ln.metadata=this.metadata_),this.sendMediaStatus_(sn,ln)},shaka.cast.CastReceiver.prototype.fakeVolumeChangeEvent_=function(){var sn=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();goog.asserts.assert(sn,"System volume should not be null!"),sn&&this.sendMessage_({type:"update",update:{video:{volume:sn.level,muted:sn.muted}}},this.shakaBus_),this.sendMessage_({type:"event",targetName:"video",event:{type:"volumechange"}},this.shakaBus_)},shaka.cast.CastReceiver.prototype.onShakaMessage_=function(sn){var ln=this,cn=shaka.cast.CastUtils.deserialize(sn.data);switch(shaka.log.debug("CastReceiver: message",cn),cn.type){case"init":this.updateNumber_=0,this.startUpdatingUpdateNumber_=!1,this.initialStatusUpdatePending_=!0,this.initState_(cn.initState,cn.appData),this.pollAttributes_();break;case"appData":this.appDataCallback_(cn.appData);break;case"set":var dn=cn.targetName,pn=cn.property;if(cn=cn.value,dn=="video"){if(sn=cast.receiver.CastReceiverManager.getInstance(),pn=="volume"){sn.setSystemVolumeLevel(cn);break}else if(pn=="muted"){sn.setSystemVolumeMuted(cn);break}}this.targets_[dn][pn]=cn;break;case"call":dn=this.targets_[cn.targetName],dn[cn.methodName].apply(dn,cn.args);break;case"asyncCall":dn=cn.targetName,pn=cn.methodName,dn=="player"&&pn=="load"&&(this.updateNumber_=0,this.startUpdatingUpdateNumber_=!1);var vn=cn.id,kn=sn.senderId;sn=this.targets_[dn],cn=sn[pn].apply(sn,cn.args),dn=="player"&&pn=="load"&&(cn=cn.then(function(){ln.initialStatusUpdatePending_=!0})),cn.then(function(){return ln.sendAsyncComplete_(kn,vn,null)},function(Sn){return ln.sendAsyncComplete_(kn,vn,Sn)})}},shaka.cast.CastReceiver.prototype.onGenericMessage_=function(sn){var ln=this,cn=shaka.cast.CastUtils.deserialize(sn.data);switch(shaka.log.debug("CastReceiver: message",cn),cn.type){case"PLAY":this.video_.play(),this.sendMediaStatus_();break;case"PAUSE":this.video_.pause(),this.sendMediaStatus_();break;case"SEEK":sn=cn.currentTime;var dn=cn.resumeState;sn!=null&&(this.video_.currentTime=Number(sn)),dn&&dn=="PLAYBACK_START"?(this.video_.play(),this.sendMediaStatus_()):dn&&dn=="PLAYBACK_PAUSE"&&(this.video_.pause(),this.sendMediaStatus_());break;case"STOP":this.player_.unload().then(function(){ln.player_&&ln.sendMediaStatus_()});break;case"GET_STATUS":this.sendMediaInfoMessage_(Number(cn.requestId));break;case"VOLUME":dn=cn.volume,sn=dn.level,dn=dn.muted;var pn=this.video_.volume,vn=this.video_.muted;sn!=null&&(this.video_.volume=Number(sn)),dn!=null&&(this.video_.muted=dn),pn==this.video_.volume&&vn==this.video_.muted||this.sendMediaStatus_();break;case"LOAD":this.updateNumber_=0,this.initialStatusUpdatePending_=this.startUpdatingUpdateNumber_=!1,sn=cn.media,dn=cn.currentTime,pn=this.contentIdCallback_(sn.contentId),vn=cn.autoplay||!0,this.appDataCallback_(sn.customData),vn&&(this.video_.autoplay=!0),this.player_.load(pn,dn).then(function(){ln.player_&&ln.sendMediaInfoMessage_()}).catch(function(kn){goog.asserts.assert(kn instanceof shaka.util.Error,"Wrong error type!");var Sn="LOAD_FAILED";kn.category==shaka.util.Error.Category.PLAYER&&kn.code==shaka.util.Error.Code.LOAD_INTERRUPTED&&(Sn="LOAD_CANCELLED"),ln.sendMessage_({requestId:Number(cn.requestId),type:Sn},ln.genericBus_)});break;default:shaka.log.warning("Unrecognized message type from the generic Chromecast controller!",cn.type),this.sendMessage_({requestId:Number(cn.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},this.genericBus_)}},shaka.cast.CastReceiver.prototype.sendAsyncComplete_=function(sn,ln,cn){this.player_&&this.sendMessage_({type:"asyncComplete",id:ln,error:cn},this.shakaBus_,sn)},shaka.cast.CastReceiver.prototype.sendMessage_=function(sn,ln,cn){this.isConnected_&&(sn=shaka.cast.CastUtils.serialize(sn),cn?ln.getCastChannel(cn).send(sn):ln.broadcast(sn))},shaka.cast.CastReceiver.prototype.getPlayState_=function(){var sn=shaka.cast.CastReceiver.PLAY_STATE;return this.isIdle_?sn.IDLE:this.player_.isBuffering()?sn.BUFFERING:this.video_.paused?sn.PAUSED:sn.PLAYING},shaka.cast.CastReceiver.prototype.sendMediaStatus_=function(sn,ln){sn=sn===void 0?0:sn,ln=ln===void 0?null:ln;var cn={mediaSessionId:0,playbackRate:this.video_.playbackRate,playerState:this.getPlayState_(),currentTime:this.video_.currentTime,supportedMediaCommands:63,volume:{level:this.video_.volume,muted:this.video_.muted}};ln&&(cn.media=ln),this.sendMessage_({requestId:sn,type:"MEDIA_STATUS",status:[cn]},this.genericBus_)},goog.exportSymbol("shaka.cast.CastReceiver",shaka.cast.CastReceiver),goog.exportProperty(shaka.cast.CastReceiver.prototype,"destroy",shaka.cast.CastReceiver.prototype.destroy),goog.exportProperty(shaka.cast.CastReceiver.prototype,"setContentArtist",shaka.cast.CastReceiver.prototype.setContentArtist),goog.exportProperty(shaka.cast.CastReceiver.prototype,"setContentImage",shaka.cast.CastReceiver.prototype.setContentImage),goog.exportProperty(shaka.cast.CastReceiver.prototype,"setContentTitle",shaka.cast.CastReceiver.prototype.setContentTitle),goog.exportProperty(shaka.cast.CastReceiver.prototype,"clearContentMetadata",shaka.cast.CastReceiver.prototype.clearContentMetadata),goog.exportProperty(shaka.cast.CastReceiver.prototype,"setContentMetadata",shaka.cast.CastReceiver.prototype.setContentMetadata),goog.exportProperty(shaka.cast.CastReceiver.prototype,"isIdle",shaka.cast.CastReceiver.prototype.isIdle),goog.exportProperty(shaka.cast.CastReceiver.prototype,"isConnected",shaka.cast.CastReceiver.prototype.isConnected),shaka.cast.CastReceiver.POLL_INTERVAL=.5,shaka.cast.CastReceiver.IDLE_INTERVAL=5,shaka.cast.CastReceiver.PLAY_STATE={IDLE:"IDLE",PLAYING:"PLAYING",BUFFERING:"BUFFERING",PAUSED:"PAUSED"},shaka.dash={},shaka.dash.ContentProtection=function(){},shaka.dash.ContentProtection.parseFromAdaptationSet=function(sn,ln,cn){var dn=shaka.dash.ContentProtection,pn=shaka.util.ManifestParserUtils,vn=dn.parseElements_(sn),kn=null;sn=[];var Sn=[],wn=new Set(vn.map(function(Pn){return Pn.keyId}));if(wn.delete(null),1<wn.size)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_CONFLICTING_KEY_IDS);if(ln||(Sn=vn.filter(function(Pn){return Pn.schemeUri==dn.MP4Protection_?(goog.asserts.assert(!Pn.init||Pn.init.length,"Init data must be null or non-empty."),kn=Pn.init||kn,!1):!0}),Sn.length&&(sn=dn.convertElements_(kn,Sn,cn,wn),sn.length==0&&(sn=[pn.createDrmInfo("",kn)]))),vn.length&&(ln||!Sn.length))for(sn=[],ln=$jscomp.makeIterator(Object.values(cn)),cn=ln.next();!cn.done;cn=ln.next())cn=cn.value,cn!="org.w3.clearkey"&&(cn=pn.createDrmInfo(cn,kn),sn.push(cn));if(pn=Array.from(wn)[0]||null)for(wn=$jscomp.makeIterator(sn),ln=wn.next();!ln.done;ln=wn.next())for(ln=$jscomp.makeIterator(ln.value.initData),cn=ln.next();!cn.done;cn=ln.next())cn.value.keyId=pn;return{defaultKeyId:pn,defaultInit:kn,drmInfos:sn,firstRepresentation:!0}},shaka.dash.ContentProtection.parseFromRepresentation=function(sn,ln,cn,dn){var pn=shaka.dash.ContentProtection.parseFromAdaptationSet(sn,cn,dn);if(ln.firstRepresentation)sn=ln.drmInfos.length==1&&!ln.drmInfos[0].keySystem,cn=pn.drmInfos.length==0,(ln.drmInfos.length==0||sn&&!cn)&&(ln.drmInfos=pn.drmInfos),ln.firstRepresentation=!1;else if(0<pn.drmInfos.length&&(ln.drmInfos=ln.drmInfos.filter(function(vn){return pn.drmInfos.some(function(kn){return kn.keySystem==vn.keySystem})}),ln.drmInfos.length==0))throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_NO_COMMON_KEY_SYSTEM);return pn.defaultKeyId||ln.defaultKeyId},shaka.dash.ContentProtection.getWidevineLicenseUrl=function(sn){return(sn=shaka.util.XmlUtils.findChildNS(sn.node,"urn:microsoft","laurl"))&&sn.getAttribute("licenseUrl")||""},shaka.dash.ContentProtection.getClearKeyLicenseUrl=function(sn){return(sn=shaka.util.XmlUtils.findChildNS(sn.node,shaka.dash.ContentProtection.ClearKeyNamespaceUri_,"Laurl"))&&sn.getAttribute("Lic_type")==="EME-1.0"&&sn.textContent?sn.textContent:""},shaka.dash.ContentProtection.parseMsProRecords_=function(sn,ln){for(var cn=[];ln<sn.byteLength-1;){var dn=sn.getUint16(ln,!0);ln+=2;var pn=sn.getUint16(ln,!0);if(ln+=2,pn&1||pn+ln>sn.byteLength)return shaka.log.warning("Malformed MS PRO object"),[];var vn=shaka.util.BufferUtils.toUint8(sn,ln,pn);cn.push({type:dn,value:vn}),ln+=pn}return cn},shaka.dash.ContentProtection.parseMsPro_=function(sn){var ln=0,cn=shaka.util.BufferUtils.toDataView(sn),dn=cn.getUint32(ln,!0);return ln+=4,dn!=sn.byteLength?(shaka.log.warning("PlayReady Object with invalid length encountered."),[]):shaka.dash.ContentProtection.parseMsProRecords_(cn,ln+2)},shaka.dash.ContentProtection.getLaurl_=function(sn){sn=$jscomp.makeIterator(sn.getElementsByTagName("DATA"));for(var ln=sn.next();!ln.done;ln=sn.next()){ln=$jscomp.makeIterator(ln.value.childNodes);for(var cn=ln.next();!cn.done;cn=ln.next())if(cn=cn.value,cn instanceof Element&&cn.tagName=="LA_URL")return cn.textContent}return""},shaka.dash.ContentProtection.getPlayReadyLicenseUrl=function(sn){var ln=shaka.util.XmlUtils.findChildNS(sn.node,"urn:microsoft:playready","pro");if(!ln)return"";sn=shaka.dash.ContentProtection;var cn=sn.PLAYREADY_RECORD_TYPES;return ln=shaka.util.Uint8ArrayUtils.fromBase64(ln.textContent),ln=sn.parseMsPro_(ln).filter(function(dn){return dn.type===cn.RIGHTS_MANAGEMENT})[0],ln?(ln=shaka.util.StringUtils.fromUTF16(ln.value,!0),(ln=shaka.util.XmlUtils.parseXmlString(ln,"WRMHEADER"))?sn.getLaurl_(ln):""):""},shaka.dash.ContentProtection.getInitDataFromPro_=function(sn){var ln=shaka.util.XmlUtils.findChildNS(sn.node,"urn:microsoft:playready","pro");if(!ln)return null;ln=shaka.util.Uint8ArrayUtils.fromBase64(ln.textContent);var cn=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),dn=new Set;return[{initData:shaka.util.Pssh.createPssh(ln,cn,dn,0),initDataType:"cenc",keyId:sn.keyId}]},shaka.dash.ContentProtection.getInitDataClearKey_=function(sn,ln){if(ln.size==0)return null;var cn=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),dn=new Uint8Array([]);return[{initData:shaka.util.Pssh.createPssh(dn,cn,ln,1),initDataType:"cenc",keyId:sn.keyId}]},shaka.dash.ContentProtection.convertElements_=function(sn,ln,cn,dn){var pn=shaka.dash.ContentProtection,vn=shaka.util.ManifestParserUtils,kn=pn.licenseUrlParsers_,Sn=[];ln=$jscomp.makeIterator(ln);for(var wn=ln.next();!wn.done;wn=ln.next()){wn=wn.value;var Pn=cn[wn.schemeUri];if(Pn){goog.asserts.assert(!wn.init||wn.init.length,"Init data must be null or non-empty.");var Nn=pn.getInitDataFromPro_(wn),Ln=null;wn.schemeUri===shaka.dash.ContentProtection.ClearKeySchemeUri_&&(Ln=pn.getInitDataClearKey_(wn,dn)),Nn=vn.createDrmInfo(Pn,wn.init||sn||Nn||Ln),(Pn=kn.get(Pn))&&(Nn.licenseServerUri=Pn(wn)),Sn.push(Nn)}}return Sn},shaka.dash.ContentProtection.parseElements_=function(sn){var ln=[];sn=$jscomp.makeIterator(sn);for(var cn=sn.next();!cn.done;cn=sn.next())(cn=shaka.dash.ContentProtection.parseElement_(cn.value))&&ln.push(cn);return ln},shaka.dash.ContentProtection.parseElement_=function(sn){var ln=shaka.dash.ContentProtection.CencNamespaceUri_,cn=sn.getAttribute("schemeIdUri"),dn=shaka.util.XmlUtils.getAttributeNS(sn,ln,"default_KID");if(ln=shaka.util.XmlUtils.findChildrenNS(sn,ln,"pssh").map(shaka.util.XmlUtils.getContents),!cn)return shaka.log.error("Missing required schemeIdUri attribute on","ContentProtection element",sn),null;if(cn=cn.toLowerCase(),dn&&(dn=dn.replace(/-/g,"").toLowerCase(),dn.includes(" ")))throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED);var pn=[];try{pn=ln.map(function(vn){return{initDataType:"cenc",initData:shaka.util.Uint8ArrayUtils.fromBase64(vn),keyId:null}})}catch{throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_PSSH_BAD_ENCODING)}return{node:sn,schemeUri:cn,keyId:dn,init:0<pn.length?pn:null}},shaka.dash.ContentProtection.PLAYREADY_RECORD_TYPES={RIGHTS_MANAGEMENT:1,RESERVED:2,EMBEDDED_LICENSE:3},shaka.dash.ContentProtection.licenseUrlParsers_=new Map().set("com.widevine.alpha",shaka.dash.ContentProtection.getWidevineLicenseUrl).set("com.microsoft.playready",shaka.dash.ContentProtection.getPlayReadyLicenseUrl).set("com.microsoft.playready.recommendation",shaka.dash.ContentProtection.getPlayReadyLicenseUrl).set("com.microsoft.playready.software",shaka.dash.ContentProtection.getPlayReadyLicenseUrl).set("com.microsoft.playready.hardware",shaka.dash.ContentProtection.getPlayReadyLicenseUrl).set("org.w3.clearkey",shaka.dash.ContentProtection.getClearKeyLicenseUrl),shaka.dash.ContentProtection.MP4Protection_="urn:mpeg:dash:mp4protection:2011",shaka.dash.ContentProtection.CencNamespaceUri_="urn:mpeg:cenc:2013",shaka.dash.ContentProtection.ClearKeyNamespaceUri_="http://dashif.org/guidelines/clearKey",shaka.dash.ContentProtection.ClearKeySchemeUri_="urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e",shaka.dash.MpdUtils=function(){},shaka.dash.MpdUtils.fillUriTemplate=function(sn,ln,cn,dn,pn){var vn={RepresentationID:ln,Number:cn,Bandwidth:dn,Time:pn};return sn.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(kn,Sn,wn,Pn){if(kn=="$$")return"$";var Nn=vn[Sn];if(goog.asserts.assert(Nn!==void 0,"Unrecognized identifier"),Nn==null)return shaka.log.warning("URL template does not have an available substitution for ",'identifier "'+Sn+'":',sn),kn;switch(Sn=="RepresentationID"&&wn&&(shaka.log.warning("URL template should not contain a width specifier for identifier",'"RepresentationID":',sn),wn=void 0),Sn=="Time"&&(goog.asserts.assert(typeof Nn=="number","Time value should be a number!"),goog.asserts.assert(.2>Math.abs(Nn-Math.round(Nn)),"Calculated $Time$ values must be close to integers"),Nn=Math.round(Nn)),Pn){case void 0:case"d":case"i":case"u":kn=Nn.toString();break;case"o":kn=Nn.toString(8);break;case"x":kn=Nn.toString(16);break;case"X":kn=Nn.toString(16).toUpperCase();break;default:goog.asserts.assert(!1,"Unhandled format specifier"),kn=Nn.toString()}return wn=window.parseInt(wn,10)||1,Array(Math.max(0,wn-kn.length)+1).join("0")+kn})},shaka.dash.MpdUtils.createTimeline=function(sn,ln,cn,dn){goog.asserts.assert(0<ln&&1/0>ln,"timescale must be a positive, finite integer"),goog.asserts.assert(0<dn,"period duration must be a positive integer");var pn=shaka.util.XmlUtils;sn=pn.findChildren(sn,"S");for(var vn=[],kn=-cn,Sn=0;Sn<sn.length;++Sn){var wn=sn[Sn],Pn=sn[Sn+1],Nn=pn.parseAttr(wn,"t",pn.parseNonNegativeInt),Ln=pn.parseAttr(wn,"d",pn.parseNonNegativeInt),Fn=pn.parseAttr(wn,"r",pn.parseInt);if(Nn!=null&&(Nn-=cn),!Ln){shaka.log.warning('"S" element must have a duration:','ignoring the remaining "S" elements.',wn);break}if(Nn=Nn??kn,Fn=Fn||0,0>Fn)if(Pn){if(Pn=pn.parseAttr(Pn,"t",pn.parseNonNegativeInt),Pn==null){shaka.log.warning('An "S" element cannot have a negative repeat','if the next "S" element does not have a valid start time:','ignoring the remaining "S" elements.',wn);break}else if(Nn>=Pn){shaka.log.warning('An "S" element cannot have a negative repeatif its start ',`time exceeds the next "S" element's start time:`,'ignoring the remaining "S" elements.',wn);break}Fn=Math.ceil((Pn-Nn)/Ln)-1}else{if(dn==1/0){shaka.log.warning('The last "S" element cannot have a negative repeat',"if the Period has an infinite duration:",'ignoring the last "S" element.',wn);break}else if(Nn/ln>=dn){shaka.log.warning('The last "S" element cannot have a negative repeat',"if its start time exceeds the Period's duration:",'igoring the last "S" element.',wn);break}Fn=Math.ceil((dn*ln-Nn)/Ln)-1}for(0<vn.length&&Nn!=kn&&(Math.abs((Nn-kn)/ln)>=shaka.util.ManifestParserUtils.GAP_OVERLAP_TOLERANCE_SECONDS&&shaka.log.warning("SegmentTimeline contains a large gap/overlap:","the content may have errors in it.",wn),vn[vn.length-1].end=Nn/ln),wn=0;wn<=Fn;++wn)kn=Nn+Ln,vn.push({start:Nn/ln,end:kn/ln,unscaledStart:Nn}),Nn=kn}return vn},shaka.dash.MpdUtils.parseSegmentInfo=function(sn,ln){goog.asserts.assert(ln(sn.representation),"There must be at least one element of the given type.");var cn=shaka.dash.MpdUtils,dn=shaka.util.XmlUtils,pn=cn.inheritAttribute(sn,ln,"timescale"),vn=1;pn&&(vn=dn.parsePositiveInt(pn)||1);var kn=cn.inheritAttribute(sn,ln,"duration");pn=dn.parsePositiveInt(kn||""),sn.representation.contentType==shaka.util.ManifestParserUtils.ContentType.IMAGE&&(pn=dn.parseFloat(kn||"")),pn&&(pn/=vn);var Sn=cn.inheritAttribute(sn,ln,"startNumber");return kn=Number(cn.inheritAttribute(sn,ln,"presentationTimeOffset"))||0,dn=dn.parseNonNegativeInt(Sn||""),(Sn==null||dn==null)&&(dn=1),ln=cn.inheritChild(sn,ln,"SegmentTimeline"),Sn=null,ln&&(Sn=cn.createTimeline(ln,vn,kn,sn.periodInfo.duration||1/0)),{timescale:vn,segmentDuration:pn,startNumber:dn,scaledPresentationTimeOffset:kn/vn||0,unscaledPresentationTimeOffset:kn,timeline:Sn}},shaka.dash.MpdUtils.inheritAttribute=function(sn,ln,cn){var dn=shaka.util.Functional;return goog.asserts.assert(ln(sn.representation),"There must be at least one element of the given type"),[ln(sn.representation),ln(sn.adaptationSet),ln(sn.period)].filter(dn.isNotNull).map(function(pn){return pn.getAttribute(cn)}).reduce(function(pn,vn){return pn||vn})},shaka.dash.MpdUtils.inheritChild=function(sn,ln,cn){var dn=shaka.util.Functional;goog.asserts.assert(ln(sn.representation),"There must be at least one element of the given type"),sn=[ln(sn.representation),ln(sn.adaptationSet),ln(sn.period)].filter(dn.isNotNull);var pn=shaka.util.XmlUtils;return sn.map(function(vn){return pn.findChild(vn,cn)}).reduce(function(vn,kn){return vn||kn})},shaka.dash.MpdUtils.handleXlinkInElement_=function(sn,ln,cn,dn,pn,vn){var kn=shaka.util.XmlUtils,Sn=shaka.util.Error,wn=shaka.util.ManifestParserUtils,Pn=shaka.dash.MpdUtils.XlinkNamespaceUri_,Nn=kn.getAttributeNS(sn,Pn,"href");kn=kn.getAttributeNS(sn,Pn,"actuate")||"onRequest";for(var Ln=$jscomp.makeIterator(Array.from(sn.attributes)),Fn=Ln.next();!Fn.done;Fn=Ln.next())Fn=Fn.value,Fn.namespaceURI==Pn&&sn.removeAttributeNS(Fn.namespaceURI,Fn.localName);if(5<=vn)return shaka.util.AbortableOperation.failed(new Sn(Sn.Severity.CRITICAL,Sn.Category.MANIFEST,Sn.Code.DASH_XLINK_DEPTH_LIMIT));if(kn!="onLoad")return shaka.util.AbortableOperation.failed(new Sn(Sn.Severity.CRITICAL,Sn.Category.MANIFEST,Sn.Code.DASH_UNSUPPORTED_XLINK_ACTUATE));var zn=wn.resolveUris([dn],[Nn]);return dn=shaka.net.NetworkingEngine.RequestType.MANIFEST,wn=shaka.net.NetworkingEngine.makeRequest(zn,ln),dn=pn.request(dn,wn),goog.asserts.assert(dn instanceof shaka.util.AbortableOperation,"Unexpected implementation of IAbortableOperation!"),dn.chain(function(Dn){if(Dn=shaka.util.XmlUtils.parseXml(Dn.data,sn.tagName),!Dn)return shaka.util.AbortableOperation.failed(new Sn(Sn.Severity.CRITICAL,Sn.Category.MANIFEST,Sn.Code.DASH_INVALID_XML,Nn));for(;sn.childNodes.length;)sn.removeChild(sn.childNodes[0]);for(;Dn.childNodes.length;){var Kn=Dn.childNodes[0];Dn.removeChild(Kn),sn.appendChild(Kn)}for(Dn=$jscomp.makeIterator(Array.from(Dn.attributes)),Kn=Dn.next();!Kn.done;Kn=Dn.next())sn.setAttributeNode(Kn.value.cloneNode(!1));return shaka.dash.MpdUtils.processXlinks(sn,ln,cn,zn[0],pn,vn+1)})},shaka.dash.MpdUtils.processXlinks=function(sn,ln,cn,dn,pn,vn){vn=vn===void 0?0:vn;var kn=shaka.dash.MpdUtils,Sn=shaka.util.XmlUtils,wn=kn.XlinkNamespaceUri_;if(Sn.getAttributeNS(sn,wn,"href"))return Sn=kn.handleXlinkInElement_(sn,ln,cn,dn,pn,vn),cn&&(Sn=Sn.chain(void 0,function(Fn){return kn.processXlinks(sn,ln,cn,dn,pn,vn)})),Sn;for(var Pn=[],Nn=$jscomp.makeIterator(Array.from(sn.childNodes)),Ln=Nn.next();!Ln.done;Ln=Nn.next())Ln=Ln.value,Ln instanceof Element&&(Sn.getAttributeNS(Ln,wn,"href")=="urn:mpeg:dash:resolve-to-zero:2013"?sn.removeChild(Ln):Ln.tagName!="SegmentTimeline"&&Pn.push(shaka.dash.MpdUtils.processXlinks(Ln,ln,cn,dn,pn,vn)));return shaka.util.AbortableOperation.all(Pn).chain(function(){return sn})},shaka.dash.MpdUtils.XlinkNamespaceUri_="http://www.w3.org/1999/xlink",shaka.media.Mp4SegmentIndexParser=function(){},shaka.media.Mp4SegmentIndexParser.parse=function(sn,ln,cn,dn,pn,vn,kn){var Sn=shaka.media.Mp4SegmentIndexParser,wn,Pn=new shaka.util.Mp4Parser().fullBox("sidx",function(Nn){wn=Sn.parseSIDX_(ln,dn,pn,vn,kn,cn,Nn)});if(sn&&Pn.parse(sn),wn)return wn;throw shaka.log.error('Invalid box type, expected "sidx".'),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.MP4_SIDX_WRONG_BOX_TYPE)},shaka.media.Mp4SegmentIndexParser.parseSIDX_=function(sn,ln,cn,dn,pn,vn,kn){goog.asserts.assert(kn.version!=null,"SIDX is a full box and should have a valid version.");var Sn=[];kn.reader.skip(4);var wn=kn.reader.readUint32();if(wn==0)throw shaka.log.error("Invalid timescale."),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.MP4_SIDX_INVALID_TIMESCALE);if(kn.version==0)var Pn=kn.reader.readUint32(),Nn=kn.reader.readUint32();else Pn=kn.reader.readUint64(),Nn=kn.reader.readUint64();kn.reader.skip(2);var Ln=kn.reader.readUint16();for(sn=sn+kn.size+Nn,Nn=0;Nn<Ln;Nn++){var Fn=kn.reader.readUint32(),zn=(Fn&2147483648)>>>31;Fn&=2147483647;var Dn=kn.reader.readUint32();if(kn.reader.skip(4),zn==1)throw shaka.log.error("Heirarchical SIDXs are not supported."),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.MP4_SIDX_TYPE_NOT_SUPPORTED);Sn.push(new shaka.media.SegmentReference(Pn/wn+cn,(Pn+Dn)/wn+cn,function(){return vn},sn,sn+Fn-1,ln,cn,dn,pn)),Pn+=Dn,sn+=Fn}return kn.parser.stop(),Sn},shaka.util.EbmlParser=function(sn){this.dataView_=shaka.util.BufferUtils.toDataView(sn),this.reader_=new shaka.util.DataViewReader(this.dataView_,shaka.util.DataViewReader.Endianness.BIG_ENDIAN)},shaka.util.EbmlParser.prototype.hasMoreData=function(){return this.reader_.hasMoreData()},shaka.util.EbmlParser.prototype.parseElement=function(){var sn=this.parseId_(),ln=this.parseVint_();ln=shaka.util.EbmlParser.isDynamicSizeValue_(ln)?this.dataView_.byteLength-this.reader_.getPosition():shaka.util.EbmlParser.getVintValue_(ln),ln=this.reader_.getPosition()+ln<=this.dataView_.byteLength?ln:this.dataView_.byteLength-this.reader_.getPosition();var cn=shaka.util.BufferUtils.toDataView(this.dataView_,this.reader_.getPosition(),ln);return this.reader_.skip(ln),new shaka.util.EbmlElement(sn,cn)},shaka.util.EbmlParser.prototype.parseId_=function(){var sn=this.parseVint_();if(7<sn.length)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.EBML_OVERFLOW);var ln=0;sn=$jscomp.makeIterator(sn);for(var cn=sn.next();!cn.done;cn=sn.next())ln=256*ln+cn.value;return ln},shaka.util.EbmlParser.prototype.parseVint_=function(){var sn=this.reader_.getPosition(),ln=this.reader_.readUint8();if(ln==0)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.EBML_OVERFLOW);return ln=8-Math.floor(Math.log2(ln)),goog.asserts.assert(8>=ln&&1<=ln,"Incorrect log2 value"),this.reader_.skip(ln-1),shaka.util.BufferUtils.toUint8(this.dataView_,sn,ln)},shaka.util.EbmlParser.getVintValue_=function(sn){if(sn.length==8&&sn[1]&224)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.JS_INTEGER_OVERFLOW);for(var ln=0,cn=0;cn<sn.length;cn++){var dn=sn[cn];ln=cn==0?dn&(1<<8-sn.length)-1:256*ln+dn}return ln},shaka.util.EbmlParser.isDynamicSizeValue_=function(sn){for(var ln=shaka.util.BufferUtils,cn=$jscomp.makeIterator(shaka.util.EbmlParser.DYNAMIC_SIZES),dn=cn.next();!dn.done;dn=cn.next())if(ln.equal(sn,new Uint8Array(dn.value)))return!0;return!1},shaka.util.EbmlParser.DYNAMIC_SIZES=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]],shaka.util.EbmlElement=function(sn,ln){this.id=sn,this.dataView_=ln},shaka.util.EbmlElement.prototype.getOffset=function(){return this.dataView_.byteOffset},shaka.util.EbmlElement.prototype.createParser=function(){return new shaka.util.EbmlParser(this.dataView_)},shaka.util.EbmlElement.prototype.getUint=function(){if(8<this.dataView_.byteLength)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.EBML_OVERFLOW);if(this.dataView_.byteLength==8&&this.dataView_.getUint8(0)&224)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.JS_INTEGER_OVERFLOW);for(var sn=0,ln=0;ln<this.dataView_.byteLength;ln++){var cn=this.dataView_.getUint8(ln);sn=256*sn+cn}return sn},shaka.util.EbmlElement.prototype.getFloat=function(){if(this.dataView_.byteLength==4)return this.dataView_.getFloat32(0);if(this.dataView_.byteLength==8)return this.dataView_.getFloat64(0);throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.EBML_BAD_FLOATING_POINT_SIZE)},shaka.media.WebmSegmentIndexParser=function(){},shaka.media.WebmSegmentIndexParser.parse=function(sn,ln,cn,dn,pn,vn,kn){if(ln=shaka.media.WebmSegmentIndexParser.parseWebmContainer_(ln),sn=new shaka.util.EbmlParser(sn).parseElement(),sn.id!=shaka.media.WebmSegmentIndexParser.CUES_ID)throw shaka.log.error("Not a Cues element."),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.WEBM_CUES_ELEMENT_MISSING);return shaka.media.WebmSegmentIndexParser.parseCues_(sn,ln.segmentOffset,ln.timecodeScale,ln.duration,cn,dn,pn,vn,kn)},shaka.media.WebmSegmentIndexParser.parseWebmContainer_=function(sn){if(sn=new shaka.util.EbmlParser(sn),sn.parseElement().id!=shaka.media.WebmSegmentIndexParser.EBML_ID)throw shaka.log.error("Not an EBML element."),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.WEBM_EBML_HEADER_ELEMENT_MISSING);var ln=sn.parseElement();if(ln.id!=shaka.media.WebmSegmentIndexParser.SEGMENT_ID)throw shaka.log.error("Not a Segment element."),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.WEBM_SEGMENT_ELEMENT_MISSING);return sn=ln.getOffset(),ln=shaka.media.WebmSegmentIndexParser.parseSegment_(ln),{segmentOffset:sn,timecodeScale:ln.timecodeScale,duration:ln.duration}},shaka.media.WebmSegmentIndexParser.parseSegment_=function(sn){sn=sn.createParser();for(var ln=null;sn.hasMoreData();){var cn=sn.parseElement();if(cn.id==shaka.media.WebmSegmentIndexParser.INFO_ID){ln=cn;break}}if(!ln)throw shaka.log.error("Not an Info element."),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.WEBM_INFO_ELEMENT_MISSING);return shaka.media.WebmSegmentIndexParser.parseInfo_(ln)},shaka.media.WebmSegmentIndexParser.parseInfo_=function(sn){var ln=sn.createParser(),cn=1e6;for(sn=null;ln.hasMoreData();){var dn=ln.parseElement();dn.id==shaka.media.WebmSegmentIndexParser.TIMECODE_SCALE_ID?cn=dn.getUint():dn.id==shaka.media.WebmSegmentIndexParser.DURATION_ID&&(sn=dn.getFloat())}if(sn==null)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.WEBM_DURATION_ELEMENT_MISSING);return ln=cn/1e9,{timecodeScale:ln,duration:sn*ln}},shaka.media.WebmSegmentIndexParser.parseCues_=function(sn,ln,cn,dn,pn,vn,kn,Sn,wn){var Pn=[],Nn=function(){return pn};sn=sn.createParser();for(var Ln=null,Fn=null;sn.hasMoreData();){var zn=sn.parseElement();if(zn.id==shaka.media.WebmSegmentIndexParser.CUE_POINT_ID){var Dn=shaka.media.WebmSegmentIndexParser.parseCuePoint_(zn);Dn&&(zn=cn*Dn.unscaledTime,Dn=ln+Dn.relativeOffset,Ln!=null&&(goog.asserts.assert(Fn!=null,"last offset cannot be null"),Pn.push(new shaka.media.SegmentReference(Ln+kn,zn+kn,Nn,Fn,Dn-1,vn,kn,Sn,wn))),Ln=zn,Fn=Dn)}}return Ln!=null&&(goog.asserts.assert(Fn!=null,"last offset cannot be null"),Pn.push(new shaka.media.SegmentReference(Ln+kn,dn+kn,Nn,Fn,null,vn,kn,Sn,wn))),Pn},shaka.media.WebmSegmentIndexParser.parseCuePoint_=function(sn){var ln=sn.createParser();if(sn=ln.parseElement(),sn.id!=shaka.media.WebmSegmentIndexParser.CUE_TIME_ID)throw shaka.log.warning("Not a CueTime element."),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.WEBM_CUE_TIME_ELEMENT_MISSING);if(sn=sn.getUint(),ln=ln.parseElement(),ln.id!=shaka.media.WebmSegmentIndexParser.CUE_TRACK_POSITIONS_ID)throw shaka.log.warning("Not a CueTrackPositions element."),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MEDIA,shaka.util.Error.Code.WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING);ln=ln.createParser();for(var cn=0;ln.hasMoreData();){var dn=ln.parseElement();if(dn.id==shaka.media.WebmSegmentIndexParser.CUE_CLUSTER_POSITION){cn=dn.getUint();break}}return{unscaledTime:sn,relativeOffset:cn}},shaka.media.WebmSegmentIndexParser.EBML_ID=440786851,shaka.media.WebmSegmentIndexParser.SEGMENT_ID=408125543,shaka.media.WebmSegmentIndexParser.INFO_ID=357149030,shaka.media.WebmSegmentIndexParser.TIMECODE_SCALE_ID=2807729,shaka.media.WebmSegmentIndexParser.DURATION_ID=17545,shaka.media.WebmSegmentIndexParser.CUES_ID=475249515,shaka.media.WebmSegmentIndexParser.CUE_POINT_ID=187,shaka.media.WebmSegmentIndexParser.CUE_TIME_ID=179,shaka.media.WebmSegmentIndexParser.CUE_TRACK_POSITIONS_ID=183,shaka.media.WebmSegmentIndexParser.CUE_CLUSTER_POSITION=241,shaka.dash.SegmentBase=function(){},shaka.dash.SegmentBase.createInitSegment=function(sn,ln){var cn=shaka.util.XmlUtils,dn=shaka.util.ManifestParserUtils;if(ln=shaka.dash.MpdUtils.inheritChild(sn,ln,"Initialization"),!ln)return null;var pn=sn.representation.baseUris,vn=ln.getAttribute("sourceURL");return vn&&(pn=dn.resolveUris(sn.representation.baseUris,[vn])),dn=0,vn=null,(cn=cn.parseAttr(ln,"range",cn.parseRange))&&(dn=cn.start,vn=cn.end),sn=shaka.dash.SegmentBase.createQualityInfo(sn),new shaka.media.InitSegmentReference(function(){return pn},dn,vn,sn)},shaka.dash.SegmentBase.createStreamInfo=function(sn,ln){goog.asserts.assert(sn.representation.segmentBase,"Should only be called with SegmentBase");var cn=shaka.dash.MpdUtils,dn=shaka.dash.SegmentBase,pn=shaka.util.XmlUtils,vn=Number(cn.inheritAttribute(sn,dn.fromInheritance_,"presentationTimeOffset"))||0;cn=cn.inheritAttribute(sn,dn.fromInheritance_,"timescale");var kn=1;cn&&(kn=pn.parsePositiveInt(cn)||1);var Sn=vn/kn||0,wn=dn.createInitSegment(sn,dn.fromInheritance_);dn.checkSegmentIndexRangeSupport_(sn,wn);var Pn=shaka.util.ObjectUtils.shallowCloneObject(sn);return{generateSegmentIndex:function(){return dn.generateSegmentIndex_(Pn,ln,wn,Sn)}}},shaka.dash.SegmentBase.generateSegmentIndexFromUris=function(sn,ln,cn,dn,pn,vn,kn){var Sn,wn,Pn,Nn,Ln,Fn,zn,Dn,Kn,qn,Zn,Yn,Jn,rs,ss;return $jscomp.asyncExecutePromiseGeneratorProgram(function(as){return as.nextAddress==1?(Sn=sn.presentationTimeline,wn=!sn.dynamic||!sn.periodInfo.isLastPeriod,Pn=sn.periodInfo.start,Nn=sn.periodInfo.duration,Ln=sn.representation.mimeType.split("/")[1],Fn=ln,zn=null,Dn=[Fn(dn,pn,vn),Ln=="webm"?Fn(cn.getUris(),cn.startByte,cn.endByte):null],Fn=null,as.yield(Promise.all(Dn),2)):(Kn=as.yieldResult,qn=Kn[0],Zn=Kn[1]||null,Yn=null,Jn=Pn-kn,rs=Pn,ss=Nn?Pn+Nn:1/0,Ln=="mp4"?Yn=shaka.media.Mp4SegmentIndexParser.parse(qn,pn,dn,cn,Jn,rs,ss):(goog.asserts.assert(Zn,"WebM requires init data"),Yn=shaka.media.WebmSegmentIndexParser.parse(qn,Zn,dn,cn,Jn,rs,ss)),Sn.notifySegments(Yn),goog.asserts.assert(!zn,"Should not call generateSegmentIndex twice"),zn=new shaka.media.SegmentIndex(Yn),wn&&zn.fit(rs,ss,!0),as.return(zn))})},shaka.dash.SegmentBase.fromInheritance_=function(sn){return sn.segmentBase},shaka.dash.SegmentBase.computeIndexRange_=function(sn){var ln=shaka.dash.MpdUtils,cn=shaka.dash.SegmentBase,dn=shaka.util.XmlUtils,pn=ln.inheritChild(sn,cn.fromInheritance_,"RepresentationIndex");return sn=ln.inheritAttribute(sn,cn.fromInheritance_,"indexRange"),sn=dn.parseRange(sn||""),pn&&(sn=dn.parseAttr(pn,"range",dn.parseRange,sn)),sn},shaka.dash.SegmentBase.computeIndexUris_=function(sn){var ln=shaka.util.ManifestParserUtils,cn=shaka.dash.MpdUtils.inheritChild(sn,shaka.dash.SegmentBase.fromInheritance_,"RepresentationIndex"),dn=sn.representation.baseUris;return cn&&(cn=cn.getAttribute("sourceURL"))&&(dn=ln.resolveUris(sn.representation.baseUris,[cn])),dn},shaka.dash.SegmentBase.checkSegmentIndexRangeSupport_=function(sn,ln){var cn=shaka.dash.SegmentBase;if(cn.checkSegmentIndexSupport(sn,ln),!cn.computeIndexRange_(sn))throw shaka.log.error("SegmentBase does not contain sufficient segment information:","the SegmentBase does not contain @indexRange","or a RepresentationIndex element.",sn.representation),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_NO_SEGMENT_INFO)},shaka.dash.SegmentBase.checkSegmentIndexSupport=function(sn,ln){var cn=shaka.util.ManifestParserUtils.ContentType,dn=sn.representation.contentType,pn=sn.representation.mimeType.split("/")[1];if(dn!=cn.TEXT&&pn!="mp4"&&pn!="webm")throw shaka.log.error("SegmentBase specifies an unsupported container type.",sn.representation),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_UNSUPPORTED_CONTAINER);if(pn=="webm"&&!ln)throw shaka.log.error("SegmentBase does not contain sufficient segment information:","the SegmentBase uses a WebM container,","but does not contain an Initialization element.",sn.representation),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_WEBM_MISSING_INIT)},shaka.dash.SegmentBase.generateSegmentIndex_=function(sn,ln,cn,dn){var pn=shaka.dash.SegmentBase,vn=pn.computeIndexUris_(sn);return pn=pn.computeIndexRange_(sn),goog.asserts.assert(pn,"Index range should not be null!"),shaka.dash.SegmentBase.generateSegmentIndexFromUris(sn,ln,cn,vn,pn.start,pn.end,dn)},shaka.dash.SegmentBase.createQualityInfo=function(sn){var ln=sn.representation;return{bandwidth:sn.bandwidth,audioSamplingRate:ln.audioSamplingRate,codecs:ln.codecs,contentType:ln.contentType,frameRate:ln.frameRate||null,height:ln.height||null,mimeType:ln.mimeType,channelsCount:ln.numChannels,pixelAspectRatio:ln.pixelAspectRatio||null,width:ln.width||null}},shaka.dash.SegmentList=function(){},shaka.dash.SegmentList.createStreamInfo=function(sn,ln){goog.asserts.assert(sn.representation.segmentList,"Should only be called with SegmentList");var cn=shaka.dash.SegmentList,dn=shaka.dash.SegmentBase.createInitSegment(sn,cn.fromInheritance_),pn=cn.parseSegmentListInfo_(sn);cn.checkSegmentListInfo_(sn,pn);var vn=null,kn=null;sn.period.id&&sn.representation.id&&(kn=ln[sn.period.id+","+sn.representation.id])&&(vn=kn.segmentIndex);var Sn=cn.createSegmentReferences_(sn.periodInfo.start,sn.periodInfo.duration,pn.startNumber,sn.representation.baseUris,pn,dn);return ln=!vn,vn?(cn=sn.presentationTimeline.getSegmentAvailabilityStart(),vn.mergeAndEvict(Sn,cn)):vn=new shaka.media.SegmentIndex(Sn),sn.presentationTimeline.notifySegments(Sn),sn.dynamic&&sn.periodInfo.isLastPeriod||vn.fit(sn.periodInfo.start,sn.periodInfo.duration?sn.periodInfo.start+sn.periodInfo.duration:1/0,ln),kn&&(kn.segmentIndex=vn),{generateSegmentIndex:function(){return vn&&!vn.isEmpty()||vn.merge(Sn),Promise.resolve(vn)}}},shaka.dash.SegmentList.fromInheritance_=function(sn){return sn.segmentList},shaka.dash.SegmentList.parseSegmentListInfo_=function(sn){var ln=shaka.dash.SegmentList,cn=shaka.dash.MpdUtils,dn=ln.parseMediaSegments_(sn);return sn=cn.parseSegmentInfo(sn,ln.fromInheritance_),ln=sn.startNumber,ln==0&&(shaka.log.warning("SegmentList@startNumber must be > 0"),ln=1),cn=0,sn.segmentDuration?cn=sn.segmentDuration*(ln-1):sn.timeline&&0<sn.timeline.length&&(cn=sn.timeline[0].start),{segmentDuration:sn.segmentDuration,startTime:cn,startNumber:ln,scaledPresentationTimeOffset:sn.scaledPresentationTimeOffset,timeline:sn.timeline,mediaSegments:dn}},shaka.dash.SegmentList.checkSegmentListInfo_=function(sn,ln){if(!ln.segmentDuration&&!ln.timeline&&1<ln.mediaSegments.length)throw shaka.log.warning("SegmentList does not contain sufficient segment information:","the SegmentList specifies multiple segments,","but does not specify a segment duration or timeline.",sn.representation),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_NO_SEGMENT_INFO);if(!ln.segmentDuration&&!sn.periodInfo.duration&&!ln.timeline&&ln.mediaSegments.length==1)throw shaka.log.warning("SegmentList does not contain sufficient segment information:","the SegmentList specifies one segment,","but does not specify a segment duration, period duration,","or timeline.",sn.representation),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_NO_SEGMENT_INFO);if(ln.timeline&&ln.timeline.length==0)throw shaka.log.warning("SegmentList does not contain sufficient segment information:","the SegmentList has an empty timeline.",sn.representation),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_NO_SEGMENT_INFO)},shaka.dash.SegmentList.createSegmentReferences_=function(sn,ln,cn,dn,pn,vn){cn=shaka.util.ManifestParserUtils;var kn=pn.mediaSegments.length;pn.timeline&&pn.timeline.length!=pn.mediaSegments.length&&(kn=Math.min(pn.timeline.length,pn.mediaSegments.length),shaka.log.warning("The number of items in the segment timeline and the number of ","segment URLs do not match, truncating",pn.mediaSegments.length,"to",kn));for(var Sn=sn-pn.scaledPresentationTimeOffset,wn=ln?sn+ln:1/0,Pn=[],Nn=pn.startTime,Ln={},Fn=0;Fn<kn;Ln={$jscomp$loop$prop$mediaUri$716:Ln.$jscomp$loop$prop$mediaUri$716},Fn++){var zn=pn.mediaSegments[Fn];Ln.$jscomp$loop$prop$mediaUri$716=cn.resolveUris(dn,[zn.mediaUri]);var Dn=void 0;pn.segmentDuration!=null?Dn=Nn+pn.segmentDuration:pn.timeline?Dn=pn.timeline[Fn].end:(goog.asserts.assert(pn.mediaSegments.length==1&&ln,"There should be exactly one segment with a Period duration."),Dn=Nn+ln);var Kn=function(qn){return function(){return qn.$jscomp$loop$prop$mediaUri$716}}(Ln);Pn.push(new shaka.media.SegmentReference(sn+Nn,sn+Dn,Kn,zn.start,zn.end,vn,Sn,sn,wn)),Nn=Dn}return Pn},shaka.dash.SegmentList.parseMediaSegments_=function(sn){var ln=[sn.representation.segmentList,sn.adaptationSet.segmentList,sn.period.segmentList].filter(shaka.util.Functional.isNotNull),cn=shaka.util.XmlUtils;return ln.map(function(dn){return cn.findChildren(dn,"SegmentURL")}).reduce(function(dn,pn){return 0<dn.length?dn:pn}).map(function(dn){dn.getAttribute("indexRange")&&!sn.indexRangeWarningGiven&&(sn.indexRangeWarningGiven=!0,shaka.log.warning("We do not support the SegmentURL@indexRange attribute on SegmentList.  We only use the SegmentList@duration attribute or SegmentTimeline, which must be accurate."));var pn=dn.getAttribute("media");return dn=cn.parseAttr(dn,"mediaRange",cn.parseRange,{start:0,end:null}),{mediaUri:pn,start:dn.start,end:dn.end}})},shaka.dash.SegmentTemplate=function(){},shaka.dash.SegmentTemplate.createStreamInfo=function(sn,ln,cn,dn,pn,vn){goog.asserts.assert(sn.representation.segmentTemplate,"Should only be called with SegmentTemplate");var kn=shaka.dash.SegmentTemplate,Sn=kn.createInitSegment_(sn),wn=kn.parseSegmentTemplateInfo_(sn);kn.checkSegmentTemplateInfo_(sn,wn);var Pn=shaka.util.ObjectUtils.shallowCloneObject(sn);if(wn.indexTemplate)return shaka.dash.SegmentBase.checkSegmentIndexSupport(sn,Sn),{generateSegmentIndex:function(){return kn.generateSegmentIndexFromIndexTemplate_(Pn,ln,Sn,wn)}};if(wn.segmentDuration)return dn||sn.adaptationSet.contentType==="image"||(sn.presentationTimeline.notifyMaxSegmentDuration(wn.segmentDuration),sn.presentationTimeline.notifyMinSegmentStartTime(sn.periodInfo.start)),{generateSegmentIndex:function(){return kn.generateSegmentIndexFromDuration_(Pn,wn,pn,Sn,vn)}};var Nn=null;dn=dn=null,sn.period.id&&sn.representation.id&&(dn=sn.period.id+","+sn.representation.id,dn=cn[dn])&&(Nn=dn.segmentIndex);var Ln=kn.createFromTimeline_(Pn,wn,Sn);cn=sn.periodInfo.start;var Fn=sn.periodInfo.duration?sn.periodInfo.start+sn.periodInfo.duration:1/0,zn=!(sn.dynamic&&sn.periodInfo.isLastPeriod);return Nn?(zn&&new shaka.media.SegmentIndex(Ln).fit(cn,Fn,!0),Nn.mergeAndEvict(Ln,sn.presentationTimeline.getSegmentAvailabilityStart())):Nn=new shaka.media.SegmentIndex(Ln),sn.presentationTimeline.notifySegments(Ln),zn&&Nn.fit(cn,Fn),dn&&sn.dynamic&&(dn.segmentIndex=Nn),{generateSegmentIndex:function(){return Nn&&!Nn.isEmpty()||Nn.merge(Ln),Promise.resolve(Nn)}}},shaka.dash.SegmentTemplate.fromInheritance_=function(sn){return sn.segmentTemplate},shaka.dash.SegmentTemplate.parseSegmentTemplateInfo_=function(sn){var ln=shaka.dash.SegmentTemplate,cn=shaka.dash.MpdUtils,dn=cn.parseSegmentInfo(sn,ln.fromInheritance_),pn=cn.inheritAttribute(sn,ln.fromInheritance_,"media");return sn=cn.inheritAttribute(sn,ln.fromInheritance_,"index"),{segmentDuration:dn.segmentDuration,timescale:dn.timescale,startNumber:dn.startNumber,scaledPresentationTimeOffset:dn.scaledPresentationTimeOffset,unscaledPresentationTimeOffset:dn.unscaledPresentationTimeOffset,timeline:dn.timeline,mediaTemplate:pn,indexTemplate:sn}},shaka.dash.SegmentTemplate.checkSegmentTemplateInfo_=function(sn,ln){var cn=ln.indexTemplate?1:0;if(cn+=ln.timeline?1:0,cn+=ln.segmentDuration?1:0,cn==0)throw shaka.log.error("SegmentTemplate does not contain any segment information:","the SegmentTemplate must contain either an index URL template","a SegmentTimeline, or a segment duration.",sn.representation),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_NO_SEGMENT_INFO);if(cn!=1&&(shaka.log.warning("SegmentTemplate containes multiple segment information sources:","the SegmentTemplate should only contain an index URL template,","a SegmentTimeline or a segment duration.",sn.representation),ln.indexTemplate?(shaka.log.info("Using the index URL template by default."),ln.timeline=null):(goog.asserts.assert(ln.timeline,"There should be a timeline"),shaka.log.info("Using the SegmentTimeline by default.")),ln.segmentDuration=null),!ln.indexTemplate&&!ln.mediaTemplate)throw shaka.log.error("SegmentTemplate does not contain sufficient segment information:","the SegmentTemplate's media URL template is missing.",sn.representation),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_NO_SEGMENT_INFO)},shaka.dash.SegmentTemplate.generateSegmentIndexFromIndexTemplate_=function(sn,ln,cn,dn){var pn=shaka.dash.MpdUtils,vn=shaka.util.ManifestParserUtils;return goog.asserts.assert(dn.indexTemplate,"must be using index template"),pn=pn.fillUriTemplate(dn.indexTemplate,sn.representation.id,null,sn.bandwidth||null,null),vn=vn.resolveUris(sn.representation.baseUris,[pn]),shaka.dash.SegmentBase.generateSegmentIndexFromUris(sn,ln,cn,vn,0,null,dn.scaledPresentationTimeOffset)},shaka.dash.SegmentTemplate.generateSegmentIndexFromDuration_=function(sn,ln,cn,dn,pn){goog.asserts.assert(ln.mediaTemplate,"There should be a media template with duration");var vn=shaka.dash.MpdUtils,kn=shaka.util.ManifestParserUtils,Sn=sn.presentationTimeline,wn=sn.periodInfo.start,Pn=sn.period.id,Nn=sn.periodInfo.duration,Ln=function(){var ms=Pn!=null&&pn[Pn]||Nn;return ms?wn+ms:1/0},Fn=ln.segmentDuration;goog.asserts.assert(Fn!=null,"Segment duration must not be null!");var zn=ln.startNumber,Dn=ln.timescale,Kn=ln.mediaTemplate,qn=sn.bandwidth||null,Zn=sn.representation.id,Yn=sn.representation.baseUris,Jn=wn-ln.scaledPresentationTimeOffset,rs=function(){var ms=[Math.max(Sn.getSegmentAvailabilityStart(),wn),Math.min(Sn.getSegmentAvailabilityEnd(),Ln())];return goog.asserts.assert(ms.every(isFinite),"Available presentation times must be finite!"),goog.asserts.assert(ms.every(function(Ts){return 0<=Ts}),"Available presentation times must be positive!"),goog.asserts.assert(Fn!=null,"Segment duration must not be null!"),ms=ms.map(function(Ts){return Ts-wn}),[Math.ceil(ms[0]/Fn),Math.ceil(ms[1]/Fn)-1].map(function(Ts){return Ts+zn})},ss=rs();sn=sn.dynamic?Math.max(ss[0],ss[1]-cn+1):ss[0],ss=ss[1],cn=[];for(var as=function(ms){goog.asserts.assert(Fn!=null,"Segment duration must not be null!");var Ts=(ms-zn)*Fn,Rs=Ts+ln.scaledPresentationTimeOffset,ys=Ts+wn;Ts=ys+Fn;var _s=Math.min(Ts,Ln());return goog.asserts.assert(ys<_s,"Generated a segment outside of the period!"),ys=new shaka.media.SegmentReference(ys,_s,function(){var js=vn.fillUriTemplate(Kn,Zn,ms,qn,Rs*Dn);return kn.resolveUris(Yn,[js])},0,null,dn,Jn,wn,Ln()),ys.trueEndTime=Ts,ys},ds=sn;ds<=ss;++ds){var Es=as(ds);cn.push(Es)}var Ss=new shaka.media.SegmentIndex(cn);if(cn=Sn.getSegmentAvailabilityEnd()<Ln(),ds=Sn.isLive(),cn||ds){var Qn=Math.max(sn,ss+1);Ss.updateEvery(Fn,function(){var ms=Sn.getSegmentAvailabilityStart();Ss.evict(ms);var Ts=$jscomp.makeIterator(rs());Ts.next(),Ts=Ts.next().value;for(var Rs=[];Qn<=Ts;){var ys=as(Qn);Rs.push(ys),Qn++}return ms>Ln()&&!Rs.length?null:Rs})}return Promise.resolve(Ss)},shaka.dash.SegmentTemplate.createFromTimeline_=function(sn,ln,cn){var dn=shaka.dash.MpdUtils,pn=shaka.util.ManifestParserUtils,vn=sn.periodInfo.start,kn=sn.periodInfo.duration,Sn=vn-ln.scaledPresentationTimeOffset;kn=kn?vn+kn:1/0;for(var wn=[],Pn={},Nn=0;Nn<ln.timeline.length;Pn={$jscomp$loop$prop$mediaTemplate$718:Pn.$jscomp$loop$prop$mediaTemplate$718,$jscomp$loop$prop$repId$719:Pn.$jscomp$loop$prop$repId$719,$jscomp$loop$prop$segmentReplacement$720:Pn.$jscomp$loop$prop$segmentReplacement$720,$jscomp$loop$prop$bandwidth$721:Pn.$jscomp$loop$prop$bandwidth$721,$jscomp$loop$prop$timeReplacement$722:Pn.$jscomp$loop$prop$timeReplacement$722,$jscomp$loop$prop$baseUris$723:Pn.$jscomp$loop$prop$baseUris$723},Nn++){var Ln=ln.timeline[Nn],Fn=Ln.start,zn=Ln.unscaledStart;Ln=Ln.end,Pn.$jscomp$loop$prop$segmentReplacement$720=Nn+ln.startNumber,Pn.$jscomp$loop$prop$timeReplacement$722=zn+ln.unscaledPresentationTimeOffset,Pn.$jscomp$loop$prop$repId$719=sn.representation.id,Pn.$jscomp$loop$prop$bandwidth$721=sn.bandwidth||null,Pn.$jscomp$loop$prop$mediaTemplate$718=ln.mediaTemplate,Pn.$jscomp$loop$prop$baseUris$723=sn.representation.baseUris,zn=function(Dn){return function(){goog.asserts.assert(Dn.$jscomp$loop$prop$mediaTemplate$718,"There should be a media template with a timeline");var Kn=dn.fillUriTemplate(Dn.$jscomp$loop$prop$mediaTemplate$718,Dn.$jscomp$loop$prop$repId$719,Dn.$jscomp$loop$prop$segmentReplacement$720,Dn.$jscomp$loop$prop$bandwidth$721||null,Dn.$jscomp$loop$prop$timeReplacement$722);return pn.resolveUris(Dn.$jscomp$loop$prop$baseUris$723,[Kn]).map(function(qn){return qn.toString()})}}(Pn),wn.push(new shaka.media.SegmentReference(vn+Fn,vn+Ln,zn,0,null,cn,Sn,vn,kn))}return wn},shaka.dash.SegmentTemplate.createInitSegment_=function(sn){var ln=shaka.dash.MpdUtils,cn=shaka.util.ManifestParserUtils,dn=ln.inheritAttribute(sn,shaka.dash.SegmentTemplate.fromInheritance_,"initialization");if(!dn)return null;var pn=sn.representation.id,vn=sn.bandwidth||null,kn=sn.representation.baseUris;return sn=shaka.dash.SegmentBase.createQualityInfo(sn),new shaka.media.InitSegmentReference(function(){goog.asserts.assert(dn,"Should have returned earler");var Sn=ln.fillUriTemplate(dn,pn,null,vn,null);return cn.resolveUris(kn,[Sn])},0,null,sn)},shaka.util.PeriodCombiner=function(){this.variants_=[],this.audioStreams_=[],this.videoStreams_=[],this.textStreams_=[],this.imageStreams_=[],this.usedPeriodIds_=new Set},shaka.util.PeriodCombiner.prototype.release=function(){var sn=this.audioStreams_.concat(this.videoStreams_,this.textStreams_,this.imageStreams_);sn=$jscomp.makeIterator(sn);for(var ln=sn.next();!ln.done;ln=sn.next())ln=ln.value,ln.segmentIndex&&ln.segmentIndex.release();this.audioStreams_=[],this.videoStreams_=[],this.textStreams_=[],this.imageStreams_=[],this.variants_=[]},shaka.util.PeriodCombiner.prototype.getVariants=function(){return this.variants_},shaka.util.PeriodCombiner.prototype.getTextStreams=function(){return this.textStreams_.slice()},shaka.util.PeriodCombiner.prototype.getImageStreams=function(){return this.imageStreams_},shaka.util.PeriodCombiner.prototype.combinePeriods=function(sn,ln){var cn=this,dn,pn,vn,kn,Sn,wn,Pn,Nn,Ln,Fn,zn,Dn,Kn,qn,Zn,Yn,Jn,rs,ss,as,ds,Es,Ss,Qn,ms,Ts,Rs,ys,_s,js;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bs){switch(bs.nextAddress){case 1:if(dn=shaka.util.ManifestParserUtils.ContentType,shaka.util.PeriodCombiner.filterOutAudioStreamDuplicates_(sn),shaka.util.PeriodCombiner.filterOutVideoStreamDuplicates_(sn),shaka.util.PeriodCombiner.filterOutTextStreamDuplicates_(sn),shaka.util.PeriodCombiner.filterOutImageStreamDuplicates_(sn),!ln&&sn.length==1){pn=sn[0],cn.audioStreams_=pn.audioStreams,cn.videoStreams_=pn.videoStreams,cn.textStreams_=pn.textStreams,cn.imageStreams_=pn.imageStreams,bs.jumpTo(2);break}for(vn=-1,kn=0;kn<sn.length;kn++)Sn=sn[kn],cn.usedPeriodIds_.has(Sn.id)||(cn.usedPeriodIds_.add(Sn.id),vn==-1&&(vn=kn));if(vn==-1)return bs.return();for(wn=sn.map(function(ks){return ks.audioStreams}),Pn=sn.map(function(ks){return ks.videoStreams}),Nn=sn.map(function(ks){return ks.textStreams}),Ln=sn.map(function(ks){return ks.imageStreams}),Fn=$jscomp.makeIterator(Nn),zn=Fn.next();!zn.done;zn=Fn.next())Dn=zn.value,Dn.push(shaka.util.PeriodCombiner.dummyStream_(dn.TEXT));for(Kn=$jscomp.makeIterator(Ln),qn=Kn.next();!qn.done;qn=Kn.next())Zn=qn.value,Zn.push(shaka.util.PeriodCombiner.dummyStream_(dn.IMAGE));return bs.yield(shaka.util.PeriodCombiner.combine_(cn.audioStreams_,wn,vn,shaka.util.PeriodCombiner.cloneStream_,shaka.util.PeriodCombiner.concatenateStreams_),3);case 3:return bs.yield(shaka.util.PeriodCombiner.combine_(cn.videoStreams_,Pn,vn,shaka.util.PeriodCombiner.cloneStream_,shaka.util.PeriodCombiner.concatenateStreams_),4);case 4:return bs.yield(shaka.util.PeriodCombiner.combine_(cn.textStreams_,Nn,vn,shaka.util.PeriodCombiner.cloneStream_,shaka.util.PeriodCombiner.concatenateStreams_),5);case 5:return bs.yield(shaka.util.PeriodCombiner.combine_(cn.imageStreams_,Ln,vn,shaka.util.PeriodCombiner.cloneStream_,shaka.util.PeriodCombiner.concatenateStreams_),2);case 2:if(Yn=0,Jn=[],cn.videoStreams_.length&&cn.audioStreams_.length)for(Ss=$jscomp.makeIterator(cn.audioStreams_),Qn=Ss.next();!Qn.done;Qn=Ss.next())for(ms=Qn.value,Ts=$jscomp.makeIterator(cn.videoStreams_),Rs=Ts.next();!Rs.done;Rs=Ts.next())ys=Rs.value,_s=shaka.media.DrmEngine.getCommonDrmInfos(ms.drmInfos,ys.drmInfos),ms.drmInfos.length&&ys.drmInfos.length&&!_s.length?shaka.log.warning("Incompatible DRM in audio & video, skipping variant creation.",ms,ys):(js=Yn++,Jn.push({id:js,language:ms.language,primary:ms.primary,audio:ms,video:ys,bandwidth:(ms.bandwidth||0)+(ys.bandwidth||0),drmInfos:_s,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(rs=cn.videoStreams_.concat(cn.audioStreams_),ss=$jscomp.makeIterator(rs),as=ss.next();!as.done;as=ss.next())ds=as.value,Es=Yn++,Jn.push({id:Es,language:ds.language,primary:ds.primary,audio:ds.type==dn.AUDIO?ds:null,video:ds.type==dn.VIDEO?ds:null,bandwidth:ds.bandwidth||0,drmInfos:ds.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});cn.variants_=Jn,bs.jumpToEnd()}})},shaka.util.PeriodCombiner.filterOutAudioStreamDuplicates_=function(sn){var ln=shaka.util.ArrayUtils;sn=$jscomp.makeIterator(sn);for(var cn=sn.next();!cn.done;cn=sn.next()){cn=cn.value;for(var dn=[],pn=$jscomp.makeIterator(cn.audioStreams),vn=pn.next();!vn.done;vn=pn.next()){vn=vn.value;for(var kn=!1,Sn=$jscomp.makeIterator(dn),wn=Sn.next();!wn.done;wn=Sn.next())wn=wn.value,vn.id!=wn.id&&vn.channelsCount==wn.channelsCount&&vn.language==wn.language&&vn.bandwidth==wn.bandwidth&&vn.label==wn.label&&vn.codecs==wn.codecs&&vn.mimeType==wn.mimeType&&ln.hasSameElements(vn.roles,wn.roles)&&vn.audioSamplingRate==wn.audioSamplingRate&&vn.primary==wn.primary&&(kn=!0);kn||dn.push(vn)}cn.audioStreams=dn}},shaka.util.PeriodCombiner.filterOutTextStreamDuplicates_=function(sn){var ln=shaka.util.ArrayUtils;sn=$jscomp.makeIterator(sn);for(var cn=sn.next();!cn.done;cn=sn.next()){cn=cn.value;for(var dn=[],pn=$jscomp.makeIterator(cn.textStreams),vn=pn.next();!vn.done;vn=pn.next()){vn=vn.value;for(var kn=!1,Sn=$jscomp.makeIterator(dn),wn=Sn.next();!wn.done;wn=Sn.next())wn=wn.value,vn.id!=wn.id&&vn.language==wn.language&&vn.label==wn.label&&vn.codecs==wn.codecs&&vn.mimeType==wn.mimeType&&vn.bandwidth==wn.bandwidth&&ln.hasSameElements(vn.roles,wn.roles)&&(kn=!0);kn||dn.push(vn)}cn.textStreams=dn}},shaka.util.PeriodCombiner.filterOutVideoStreamDuplicates_=function(sn){var ln=shaka.util.ArrayUtils,cn=shaka.util.MapUtils;sn=$jscomp.makeIterator(sn);for(var dn=sn.next();!dn.done;dn=sn.next()){dn=dn.value;for(var pn=[],vn=$jscomp.makeIterator(dn.videoStreams),kn=vn.next();!kn.done;kn=vn.next()){kn=kn.value;for(var Sn=!1,wn=$jscomp.makeIterator(pn),Pn=wn.next();!Pn.done;Pn=wn.next())Pn=Pn.value,kn.id!=Pn.id&&kn.width==Pn.width&&kn.frameRate==Pn.frameRate&&kn.codecs==Pn.codecs&&kn.mimeType==Pn.mimeType&&kn.label==Pn.label&&ln.hasSameElements(kn.roles,Pn.roles)&&cn.hasSameElements(kn.closedCaptions,Pn.closedCaptions)&&kn.bandwidth==Pn.bandwidth&&(Sn=!0);Sn||pn.push(kn)}dn.videoStreams=pn}},shaka.util.PeriodCombiner.filterOutImageStreamDuplicates_=function(sn){sn=$jscomp.makeIterator(sn);for(var ln=sn.next();!ln.done;ln=sn.next()){ln=ln.value;for(var cn=[],dn=$jscomp.makeIterator(ln.imageStreams),pn=dn.next();!pn.done;pn=dn.next()){pn=pn.value;for(var vn=!1,kn=$jscomp.makeIterator(cn),Sn=kn.next();!Sn.done;Sn=kn.next())Sn=Sn.value,pn.id!=Sn.id&&pn.width==Sn.width&&pn.codecs==Sn.codecs&&pn.mimeType==Sn.mimeType&&(vn=!0);vn||cn.push(pn)}ln.imageStreams=cn}},shaka.util.PeriodCombiner.combineDbStreams=function(sn){var ln,cn,dn,pn,vn,kn,Sn,wn,Pn,Nn,Ln,Fn,zn,Dn,Kn,qn,Zn,Yn,Jn,rs,ss,as,ds,Es,Ss,Qn,ms;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ts){switch(Ts.nextAddress){case 1:if(ln=shaka.util.ManifestParserUtils.ContentType,sn.length==1)return Ts.return(sn[0]);for(cn=sn.map(function(Rs){return Rs.filter(function(ys){return ys.type==ln.AUDIO})}),dn=sn.map(function(Rs){return Rs.filter(function(ys){return ys.type==ln.VIDEO})}),pn=sn.map(function(Rs){return Rs.filter(function(ys){return ys.type==ln.TEXT})}),vn=sn.map(function(Rs){return Rs.filter(function(ys){return ys.type==ln.IMAGE})}),kn=$jscomp.makeIterator(pn),Sn=kn.next();!Sn.done;Sn=kn.next())wn=Sn.value,wn.push(shaka.util.PeriodCombiner.dummyStreamDB_(ln.TEXT));for(Pn=$jscomp.makeIterator(vn),Nn=Pn.next();!Nn.done;Nn=Pn.next())Ln=Nn.value,Ln.push(shaka.util.PeriodCombiner.dummyStreamDB_(ln.IMAGE));return Ts.yield(shaka.util.PeriodCombiner.combine_([],cn,0,shaka.util.PeriodCombiner.cloneStreamDB_,shaka.util.PeriodCombiner.concatenateStreamDBs_),2);case 2:return Fn=Ts.yieldResult,Ts.yield(shaka.util.PeriodCombiner.combine_([],dn,0,shaka.util.PeriodCombiner.cloneStreamDB_,shaka.util.PeriodCombiner.concatenateStreamDBs_),3);case 3:return zn=Ts.yieldResult,Ts.yield(shaka.util.PeriodCombiner.combine_([],pn,0,shaka.util.PeriodCombiner.cloneStreamDB_,shaka.util.PeriodCombiner.concatenateStreamDBs_),4);case 4:return Dn=Ts.yieldResult,Ts.yield(shaka.util.PeriodCombiner.combine_([],vn,0,shaka.util.PeriodCombiner.cloneStreamDB_,shaka.util.PeriodCombiner.concatenateStreamDBs_),5);case 5:if(Kn=Ts.yieldResult,qn=0,zn.length&&Fn.length)for(ss=$jscomp.makeIterator(Fn),as=ss.next();!as.done;as=ss.next())for(ds=as.value,Es=$jscomp.makeIterator(zn),Ss=Es.next();!Ss.done;Ss=Es.next())Qn=Ss.value,ms=qn++,Qn.variantIds.push(ms),ds.variantIds.push(ms);else for(Zn=zn.concat(Fn),Yn=$jscomp.makeIterator(Zn),Jn=Yn.next();!Jn.done;Jn=Yn.next())rs=Jn.value,rs.variantIds=[qn++];return Ts.return(zn.concat(Fn).concat(Dn).concat(Kn))}})},shaka.util.PeriodCombiner.combine_=function(sn,ln,cn,dn,pn){var vn,kn,Sn,wn,Pn,Nn,Ln,Fn,zn,Dn,Kn,qn,Zn,Yn,Jn,rs,ss,as,ds,Es;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ss){switch(Ss.nextAddress){case 1:for(vn=shaka.util.ManifestParserUtils.ContentType,kn=[],Sn=0;Sn<ln.length;Sn++)Sn>=cn?kn.push(new Set(ln[Sn])):kn.push(new Set);wn=$jscomp.makeIterator(sn),Pn=wn.next();case 2:if(Pn.done){Ss.jumpTo(4);break}return Nn=Pn.value,Ss.yield(shaka.util.PeriodCombiner.extendExistingOutputStream_(Nn,ln,cn,pn,kn),5);case 5:if(Ln=Ss.yieldResult,!Ln)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.PERIOD_FLATTENING_FAILED);Pn=wn.next(),Ss.jumpTo(2);break;case 4:for(Fn=$jscomp.makeIterator(kn),zn=Fn.next();!zn.done;zn=Fn.next())for(Dn=zn.value,Kn=$jscomp.makeIterator(Dn),qn=Kn.next();!qn.done;qn=Kn.next())Zn=qn.value,(Yn=shaka.util.PeriodCombiner.createNewOutputStream_(Zn,ln,dn,pn,kn))&&sn.push(Yn);for(Jn=$jscomp.makeIterator(kn),zn=Jn.next();!zn.done;zn=Jn.next())for(rs=zn.value,ss={},as=$jscomp.makeIterator(rs),qn=as.next();!qn.done;ss={$jscomp$loop$prop$stream$582$725:ss.$jscomp$loop$prop$stream$582$725},qn=as.next())if(ss.$jscomp$loop$prop$stream$582$725=qn.value,ds=ss.$jscomp$loop$prop$stream$582$725.type==vn.TEXT&&!ss.$jscomp$loop$prop$stream$582$725.language,Es=ss.$jscomp$loop$prop$stream$582$725.type==vn.IMAGE&&!ss.$jscomp$loop$prop$stream$582$725.tilesLayout,!ds&&!Es&&sn.some(function(Qn){return function(ms){return ms.mimeType==Qn.$jscomp$loop$prop$stream$582$725.mimeType&&shaka.util.MimeUtils.getNormalizedCodec(ms.codecs)==shaka.util.MimeUtils.getNormalizedCodec(Qn.$jscomp$loop$prop$stream$582$725.codecs)}}(ss)))throw shaka.log.error("Unused stream in period-flattening!",ss.$jscomp$loop$prop$stream$582$725,sn),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.PERIOD_FLATTENING_FAILED);return Ss.return(sn)}})},shaka.util.PeriodCombiner.extendExistingOutputStream_=function(sn,ln,cn,dn,pn){return $jscomp.asyncExecutePromiseGeneratorProgram(function(vn){return vn.nextAddress==1?(shaka.util.PeriodCombiner.findMatchesInAllPeriods_(ln,sn),goog.asserts.assert(sn.createSegmentIndex,"outputStream should be a Stream type!"),sn.matchedStreams?sn.segmentIndex?vn.yield(shaka.util.PeriodCombiner.extendOutputSegmentIndex_(sn,cn),2):vn.jumpTo(2):(shaka.log.error("No matches extending output stream!",sn,ln),vn.return(!1))):(shaka.util.PeriodCombiner.extendOutputStream_(sn,cn,dn,pn),vn.return(!0))})},shaka.util.PeriodCombiner.extendOutputSegmentIndex_=function(sn,ln){var cn,dn,pn,vn,kn,Sn,wn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Pn){if(Pn.nextAddress==1){for(cn=[],dn=sn.matchedStreams,goog.asserts.assert(dn,"matched streams should be valid"),pn=$jscomp.makeIterator(dn),vn=pn.next();!vn.done;vn=pn.next())kn=vn.value,cn.push(kn.createSegmentIndex()),kn.trickModeVideo&&!kn.trickModeVideo.segmentIndex&&cn.push(kn.trickModeVideo.createSegmentIndex());return Pn.yield(Promise.all(cn),2)}if(sn.segmentIndex instanceof shaka.media.MetaSegmentIndex)for(Sn=ln;Sn<dn.length;Sn++)wn=dn[Sn],goog.asserts.assert(wn.segmentIndex,"stream should have a segmentIndex."),wn.segmentIndex&&sn.segmentIndex.appendSegmentIndex(wn.segmentIndex);Pn.jumpToEnd()})},shaka.util.PeriodCombiner.createNewOutputStream_=function(sn,ln,cn,dn,pn){var vn=cn(sn);return shaka.util.PeriodCombiner.findMatchesInAllPeriods_(ln,vn),vn.createSegmentIndex&&(vn.createSegmentIndex=function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(kn){return vn.segmentIndex?kn.jumpTo(0):(vn.segmentIndex=new shaka.media.MetaSegmentIndex,kn.yield(shaka.util.PeriodCombiner.extendOutputSegmentIndex_(vn,0),0))})}),!vn.matchedStreams||!vn.matchedStreams.length?null:(shaka.util.PeriodCombiner.extendOutputStream_(vn,0,dn,pn),vn)},shaka.util.PeriodCombiner.extendOutputStream_=function(sn,ln,cn,dn){var pn=shaka.util.ManifestParserUtils.ContentType,vn=shaka.util.LanguageUtils,kn=sn.matchedStreams;goog.asserts.assert(sn.matchedStreams,"matchedStreams should be non-null");for(var Sn=0;Sn<kn.length;Sn++)if(Sn>=ln){var wn=kn[Sn];cn(sn,wn);var Pn=!0;sn.type==pn.AUDIO&&vn.relatedness(sn.language,wn.language)==0&&(Pn=!1),Pn&&dn[Sn].delete(wn)}},shaka.util.PeriodCombiner.cloneStream_=function(sn){var ln=Object.assign({},sn);return ln.originalId=null,ln.createSegmentIndex=function(){return Promise.resolve()},ln.closeSegmentIndex=function(){if(ln.segmentIndex&&(ln.segmentIndex.release(),ln.segmentIndex=null),ln.matchedStreams)for(var cn=$jscomp.makeIterator(ln.matchedStreams),dn=cn.next();!dn.done;dn=cn.next())dn=dn.value,dn.segmentIndex&&(dn.segmentIndex.release(),dn.segmentIndex=null)},ln.segmentIndex=null,ln.emsgSchemeIdUris=[],ln.keyIds=new Set,ln.closedCaptions=null,ln.trickModeVideo=null,ln},shaka.util.PeriodCombiner.cloneStreamDB_=function(sn){return sn=Object.assign({},sn),sn.keyIds=new Set,sn.segments=[],sn.variantIds=[],sn.closedCaptions=null,sn},shaka.util.PeriodCombiner.concatenateStreams_=function(sn,ln){sn.roles=Array.from(new Set(sn.roles.concat(ln.roles))),ln.emsgSchemeIdUris&&(sn.emsgSchemeIdUris=Array.from(new Set(sn.emsgSchemeIdUris.concat(ln.emsgSchemeIdUris)))),sn.keyIds=function(vn,kn){return new Set([].concat($jscomp.arrayFromIterable(vn),$jscomp.arrayFromIterable(kn)))}(sn.keyIds,ln.keyIds),sn.originalId=sn.originalId==null?ln.originalId:sn.originalId+(","+(ln.originalId||""));var cn=shaka.media.DrmEngine.getCommonDrmInfos(sn.drmInfos,ln.drmInfos);if(ln.drmInfos.length&&sn.drmInfos.length&&!cn.length)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.INCONSISTENT_DRM_ACROSS_PERIODS);if(sn.drmInfos=cn,sn.encrypted=sn.encrypted||ln.encrypted,ln.closedCaptions){sn.closedCaptions||(sn.closedCaptions=new Map),cn=$jscomp.makeIterator(ln.closedCaptions);for(var dn=cn.next();!dn.done;dn=cn.next()){var pn=$jscomp.makeIterator(dn.value);dn=pn.next().value,pn=pn.next().value,sn.closedCaptions.set(dn,pn)}}ln.trickModeVideo?(sn.trickModeVideo||(sn.trickModeVideo=shaka.util.PeriodCombiner.cloneStream_(ln.trickModeVideo),sn.trickModeVideo.createSegmentIndex=function(){return goog.asserts.assert(sn.segmentIndex instanceof shaka.media.MetaSegmentIndex,"The stream should have a MetaSegmentIndex."),sn.trickModeVideo.segmentIndex=sn.segmentIndex.clone(),Promise.resolve()}),shaka.util.PeriodCombiner.concatenateStreams_(sn.trickModeVideo,ln.trickModeVideo)):sn.trickModeVideo&&shaka.util.PeriodCombiner.concatenateStreams_(sn.trickModeVideo,ln)},shaka.util.PeriodCombiner.concatenateStreamDBs_=function(sn,ln){sn.roles=Array.from(new Set(sn.roles.concat(ln.roles)));var cn=ln.keyIds;if(cn=new Set([].concat($jscomp.arrayFromIterable(sn.keyIds),$jscomp.arrayFromIterable(cn))),sn.keyIds=cn,sn.encrypted=sn.encrypted&&ln.encrypted,sn.segments.push.apply(sn.segments,$jscomp.arrayFromIterable(ln.segments)),ln.closedCaptions)for(sn.closedCaptions||(sn.closedCaptions=new Map),ln=$jscomp.makeIterator(ln.closedCaptions),cn=ln.next();!cn.done;cn=ln.next()){var dn=$jscomp.makeIterator(cn.value);cn=dn.next().value,dn=dn.next().value,sn.closedCaptions.set(cn,dn)}},shaka.util.PeriodCombiner.findMatchesInAllPeriods_=function(sn,ln){var cn=[];sn=$jscomp.makeIterator(sn);for(var dn=sn.next();!dn.done;dn=sn.next()){if(dn=shaka.util.PeriodCombiner.findBestMatchInPeriod_(dn.value,ln),!dn)return;cn.push(dn)}ln.matchedStreams=cn},shaka.util.PeriodCombiner.findBestMatchInPeriod_=function(sn,ln){var cn={audio:shaka.util.PeriodCombiner.areAVStreamsCompatible_,video:shaka.util.PeriodCombiner.areAVStreamsCompatible_,text:shaka.util.PeriodCombiner.areTextStreamsCompatible_,image:shaka.util.PeriodCombiner.areImageStreamsCompatible_}[ln.type],dn={audio:shaka.util.PeriodCombiner.isAudioStreamBetterMatch_,video:shaka.util.PeriodCombiner.isVideoStreamBetterMatch_,text:shaka.util.PeriodCombiner.isTextStreamBetterMatch_,image:shaka.util.PeriodCombiner.isImageStreamBetterMatch_}[ln.type],pn=null;sn=$jscomp.makeIterator(sn);for(var vn=sn.next();!vn.done;vn=sn.next())vn=vn.value,!cn(ln,vn)||pn&&!dn(ln,pn,vn)||(pn=vn);return pn},shaka.util.PeriodCombiner.areAVStreamsCompatible_=function(sn,ln){return!(ln.mimeType!=sn.mimeType||shaka.util.MimeUtils.getNormalizedCodec(ln.codecs)!=shaka.util.MimeUtils.getNormalizedCodec(sn.codecs)||sn.drmInfos&&!shaka.media.DrmEngine.areDrmCompatible(sn.drmInfos,ln.drmInfos))},shaka.util.PeriodCombiner.areTextStreamsCompatible_=function(sn,ln){return sn.language?ln.language?!(shaka.util.LanguageUtils.relatedness(sn.language,ln.language)==0||ln.kind!=sn.kind):!0:!1},shaka.util.PeriodCombiner.areImageStreamsCompatible_=function(sn,ln){return!!sn.tilesLayout},shaka.util.PeriodCombiner.isAudioStreamBetterMatch_=function(sn,ln,cn){var dn=shaka.util.LanguageUtils,pn=shaka.util.PeriodCombiner.BetterOrWorse,vn=pn.BETTER;if(pn=pn.WORSE,sn.id==cn.id)return!0;var kn=dn.relatedness(sn.language,ln.language);return dn=dn.relatedness(sn.language,cn.language),dn>kn?!0:dn<kn?!1:sn.roles.length?(vn=ln.roles.filter(function(Sn){return sn.roles.includes(Sn)}),pn=cn.roles.filter(function(Sn){return sn.roles.includes(Sn)}),pn.length>vn.length?!0:pn.length<vn.length?!1:cn.roles.length<ln.roles.length):!cn.roles.length&&ln.roles.length?!0:cn.roles.length&&!ln.roles.length?!1:!ln.primary&&cn.primary?!0:ln.primary&&!cn.primary?!1:(dn=shaka.util.PeriodCombiner.compareClosestPreferLower(sn.channelsCount,ln.channelsCount,cn.channelsCount),dn==vn?!0:dn==pn?!1:(dn=shaka.util.PeriodCombiner.compareClosestPreferLower(sn.audioSamplingRate,ln.audioSamplingRate,cn.audioSamplingRate),dn==vn?!0:dn==pn?!1:!!(sn.bandwidth&&shaka.util.PeriodCombiner.compareClosestPreferMinimalAbsDiff_(sn.bandwidth,ln.bandwidth,cn.bandwidth)==vn)))},shaka.util.PeriodCombiner.isVideoStreamBetterMatch_=function(sn,ln,cn){var dn=shaka.util.PeriodCombiner.BetterOrWorse,pn=dn.BETTER;if(dn=dn.WORSE,sn.id==cn.id)return!0;var vn=shaka.util.PeriodCombiner.compareClosestPreferLower(sn.width*sn.height,ln.width*ln.height,cn.width*cn.height);if(vn==pn)return!0;if(vn==dn)return!1;if(sn.frameRate){if(vn=shaka.util.PeriodCombiner.compareClosestPreferLower(sn.frameRate,ln.frameRate,cn.frameRate),vn==pn)return!0;if(vn==dn)return!1}return!!(sn.bandwidth&&shaka.util.PeriodCombiner.compareClosestPreferMinimalAbsDiff_(sn.bandwidth,ln.bandwidth,cn.bandwidth)==pn)},shaka.util.PeriodCombiner.isTextStreamBetterMatch_=function(sn,ln,cn){var dn=shaka.util.LanguageUtils;if(sn.id==cn.id)return!0;var pn=dn.relatedness(sn.language,ln.language);if(dn=dn.relatedness(sn.language,cn.language),dn>pn)return!0;if(dn<pn)return!1;if(!ln.primary&&cn.primary)return!0;if(ln.primary&&!cn.primary)return!1;if(sn.roles.length){if(pn=ln.roles.filter(function(vn){return sn.roles.includes(vn)}),dn=cn.roles.filter(function(vn){return sn.roles.includes(vn)}),dn.length>pn.length)return!0;if(dn.length<pn.length)return!1}else{if(!cn.roles.length&&ln.roles.length)return!0;if(cn.roles.length&&!ln.roles.length)return!1}return!(cn.mimeType!=sn.mimeType||cn.codecs!=sn.codecs||ln.mimeType==sn.mimeType&&ln.codecs==sn.codecs)},shaka.util.PeriodCombiner.isImageStreamBetterMatch_=function(sn,ln,cn){var dn=shaka.util.PeriodCombiner.BetterOrWorse.BETTER;return sn.id==cn.id?!0:shaka.util.PeriodCombiner.compareClosestPreferLower(sn.width*sn.height,ln.width*ln.height,cn.width*cn.height)==dn},shaka.util.PeriodCombiner.dummyStreamDB_=function(sn){return{id:0,originalId:"",primary:!1,type:sn,mimeType:"",codecs:"",language:"",label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}},shaka.util.PeriodCombiner.dummyStream_=function(sn){return{id:0,originalId:"",createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new shaka.media.SegmentIndex([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",label:null,type:sn,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}},shaka.util.PeriodCombiner.compareClosestPreferLower=function(sn,ln,cn){var dn=shaka.util.PeriodCombiner.BetterOrWorse,pn=dn.BETTER,vn=dn.WORSE;if(ln==sn&&sn!=cn)return vn;if(cn==sn&&sn!=ln)return pn;if(ln>sn){if(cn<=sn||cn-sn<ln-sn)return pn;if(cn-sn>ln-sn)return vn}else{if(cn>sn)return vn;if(sn-cn<sn-ln)return pn;if(sn-cn>sn-ln)return vn}return dn.EQUAL},shaka.util.PeriodCombiner.compareClosestPreferMinimalAbsDiff_=function(sn,ln,cn){var dn=shaka.util.PeriodCombiner.BetterOrWorse,pn=dn.BETTER,vn=dn.WORSE;return ln=Math.abs(sn-ln),sn=Math.abs(sn-cn),sn<ln?pn:ln<sn?vn:dn.EQUAL},shaka.util.PeriodCombiner.BetterOrWorse={BETTER:1,EQUAL:0,WORSE:-1},shaka.dash.DashParser=function(){var sn=this;this.playerInterface_=this.config_=null,this.manifestUris_=[],this.manifest_=null,this.globalId_=1,this.streamMap_={},this.periodDurations_={},this.periodCombiner_=new shaka.util.PeriodCombiner,this.updatePeriod_=0,this.averageUpdateDuration_=new shaka.abr.Ewma(5),this.updateTimer_=new shaka.util.Timer(function(){sn.onUpdate_()}),this.operationManager_=new shaka.util.OperationManager,this.largestPeriodStartTime_=null,this.lastManifestUpdatePeriodIds_=[],this.minTotalAvailabilityTimeOffset_=1/0,this.lowLatencyMode_=!1},shaka.dash.DashParser.prototype.configure=function(sn){goog.asserts.assert(sn.dash!=null,"DashManifestConfiguration should not be null!"),this.config_=sn},shaka.dash.DashParser.prototype.start=function(sn,ln){var cn=this,dn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pn){if(pn.nextAddress==1)return goog.asserts.assert(cn.config_,"Must call configure() before start()!"),cn.lowLatencyMode_=ln.isLowLatencyMode(),cn.manifestUris_=[sn],cn.playerInterface_=ln,pn.yield(cn.requestManifest_(),2);if(dn=pn.yieldResult,cn.playerInterface_&&cn.setUpdateTimer_(dn),!cn.playerInterface_)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.PLAYER,shaka.util.Error.Code.OPERATION_ABORTED);return goog.asserts.assert(cn.manifest_,"Manifest should be non-null!"),pn.return(cn.manifest_)})},shaka.dash.DashParser.prototype.stop=function(){for(var sn=$jscomp.makeIterator(Object.values(this.streamMap_)),ln=sn.next();!ln.done;ln=sn.next())ln=ln.value,ln.segmentIndex&&ln.segmentIndex.release();return this.periodCombiner_&&this.periodCombiner_.release(),this.config_=this.playerInterface_=null,this.manifestUris_=[],this.manifest_=null,this.streamMap_={},this.periodCombiner_=null,this.updateTimer_!=null&&(this.updateTimer_.stop(),this.updateTimer_=null),this.operationManager_.destroy()},shaka.dash.DashParser.prototype.update=function(){var sn=this,ln;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cn){if(cn.nextAddress==1)return cn.setCatchFinallyBlocks(2),cn.yield(sn.requestManifest_(),4);if(cn.nextAddress!=2)return cn.leaveTryBlock(0);if(ln=cn.enterCatchBlock(),!sn.playerInterface_||!ln)return cn.return();goog.asserts.assert(ln instanceof shaka.util.Error,"Bad error type"),sn.playerInterface_.onError(ln),cn.jumpToEnd()})},shaka.dash.DashParser.prototype.onExpirationUpdated=function(sn,ln){},shaka.dash.DashParser.prototype.requestManifest_=function(){var sn=this,ln,cn,dn,pn,vn,kn,Sn,wn,Pn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Nn){return Nn.nextAddress==1?(ln=shaka.net.NetworkingEngine.RequestType.MANIFEST,cn=shaka.net.NetworkingEngine.makeRequest(sn.manifestUris_,sn.config_.retryParameters),dn=sn.playerInterface_.networkingEngine,pn=shaka.util.CmcdManager.StreamingFormat.DASH,sn.playerInterface_.modifyManifestRequest(cn,{format:pn}),vn=Date.now(),kn=dn.request(ln,cn),sn.operationManager_.manage(kn),Nn.yield(kn.promise,2)):Nn.nextAddress!=3?(Sn=Nn.yieldResult,sn.playerInterface_?(Sn.uri&&!sn.manifestUris_.includes(Sn.uri)&&sn.manifestUris_.unshift(Sn.uri),Nn.yield(sn.parseManifest_(Sn.data,Sn.uri),3)):Nn.return(0)):(wn=Date.now(),Pn=(wn-vn)/1e3,sn.averageUpdateDuration_.sample(1,Pn),Nn.return(Pn))})},shaka.dash.DashParser.prototype.parseManifest_=function(sn,ln){var cn=this,dn,pn,vn,kn,Sn,wn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Pn){if(Pn.nextAddress==1){if(dn=shaka.util.Error,pn=shaka.dash.MpdUtils,vn=shaka.util.XmlUtils.parseXml(sn,"MPD"),!vn)throw new dn(dn.Severity.CRITICAL,dn.Category.MANIFEST,dn.Code.DASH_INVALID_XML,ln);return cn.config_.dash.disableXlinkProcessing?Pn.return(cn.processManifest_(vn,ln)):(kn=cn.config_.dash.xlinkFailGracefully,Sn=pn.processXlinks(vn,cn.config_.retryParameters,kn,ln,cn.playerInterface_.networkingEngine),cn.operationManager_.manage(Sn),Pn.yield(Sn.promise,2))}return wn=Pn.yieldResult,Pn.return(cn.processManifest_(wn,ln))})},shaka.dash.DashParser.prototype.processManifest_=function(sn,ln){var cn=this,dn,pn,vn,kn,Sn,wn,Pn,Nn,Ln,Fn,zn,Dn,Kn,qn,Zn,Yn,Jn,rs,ss,as,ds,Es,Ss,Qn,ms,Ts,Rs,ys,_s,js,bs,ks,xs;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ks){switch(Ks.nextAddress){case 1:if(dn=shaka.util.Functional,pn=shaka.util.XmlUtils,(vn=cn.config_.dash.manifestPreprocessor)&&vn(sn),kn=[ln],Sn=pn.findChildren(sn,"Location").map(pn.getContents).filter(dn.isNotNull),0<Sn.length&&(wn=shaka.util.ManifestParserUtils.resolveUris(kn,Sn),kn=cn.manifestUris_=wn),Pn=pn.findChildren(sn,"BaseURL"),Nn=Pn.map(pn.getContents),Ln=shaka.util.ManifestParserUtils.resolveUris(kn,Nn),Fn=0,Pn&&Pn.length&&(Fn=pn.parseAttr(Pn[0],"availabilityTimeOffset",pn.parseFloat)||0),zn=cn.config_.dash.ignoreMinBufferTime,Dn=0,zn||(Dn=pn.parseAttr(sn,"minBufferTime",pn.parseDuration)||0),cn.updatePeriod_=pn.parseAttr(sn,"minimumUpdatePeriod",pn.parseDuration,-1),Kn=pn.parseAttr(sn,"availabilityStartTime",pn.parseDate),qn=pn.parseAttr(sn,"timeShiftBufferDepth",pn.parseDuration),Zn=cn.config_.dash.ignoreSuggestedPresentationDelay,Yn=null,Zn||(Yn=pn.parseAttr(sn,"suggestedPresentationDelay",pn.parseDuration)),Jn=cn.config_.dash.ignoreMaxSegmentDuration,rs=null,Jn||(rs=pn.parseAttr(sn,"maxSegmentDuration",pn.parseDuration)),ss=sn.getAttribute("type")||"static",cn.manifest_)for(as=cn.manifest_.presentationTimeline,ds=$jscomp.makeIterator(Object.values(cn.streamMap_)),Es=ds.next();!Es.done;Es=ds.next())Ss=Es.value,Ss.segmentIndex&&Ss.segmentIndex.evict(as.getSegmentAvailabilityStart());else Qn=cn.config_.defaultPresentationDelay||1.5*Dn,ms=Yn??Qn,as=new shaka.media.PresentationTimeline(Kn,ms,cn.config_.dash.autoCorrectDrift);return as.setStatic(ss=="static"),as.isLive()&&!isNaN(cn.config_.availabilityWindowOverride)&&(qn=cn.config_.availabilityWindowOverride),qn==null&&(qn=1/0),as.setSegmentAvailabilityDuration(qn),Ts=sn.getAttribute("profiles")||"",Rs={dynamic:ss!="static",presentationTimeline:as,period:null,periodInfo:null,adaptationSet:null,representation:null,bandwidth:0,indexRangeWarningGiven:!1,availabilityTimeOffset:Fn,profiles:Ts.split(",")},ys=cn.parsePeriods_(Rs,Ln,sn),_s=ys.duration,js=ys.periods,ss!="static"&&ys.durationDerivedFromPeriods||as.setDuration(_s||1/0),cn.minTotalAvailabilityTimeOffset_&&!cn.lowLatencyMode_&&cn.playerInterface_.isAutoLowLatencyMode()&&(cn.playerInterface_.enableLowLatencyMode(),cn.lowLatencyMode_=cn.playerInterface_.isLowLatencyMode()),cn.lowLatencyMode_?as.setAvailabilityTimeOffset(cn.minTotalAvailabilityTimeOffset_):cn.minTotalAvailabilityTimeOffset_&&shaka.log.alwaysWarn("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),as.notifyMaxSegmentDuration(rs||1),goog.DEBUG&&as.assertIsValid(),Ks.yield(cn.periodCombiner_.combinePeriods(js,Rs.dynamic),2);case 2:if(cn.manifest_){cn.manifest_.variants=cn.periodCombiner_.getVariants(),cn.manifest_.textStreams=cn.periodCombiner_.getTextStreams(),cn.manifest_.imageStreams=cn.periodCombiner_.getImageStreams(),cn.playerInterface_.filter(cn.manifest_),Ks.jumpTo(3);break}if(cn.manifest_={presentationTimeline:as,variants:cn.periodCombiner_.getVariants(),textStreams:cn.periodCombiner_.getTextStreams(),imageStreams:cn.periodCombiner_.getImageStreams(),offlineSessionIds:[],minBufferTime:Dn||0,sequenceMode:cn.config_.dash.sequenceMode},!as.usingPresentationStartTime()){Ks.jumpTo(4);break}return bs=shaka.util.XmlUtils,ks=bs.findChildren(sn,"UTCTiming"),Ks.yield(cn.parseUtcTiming_(Ln,ks),5);case 5:if(xs=Ks.yieldResult,!cn.playerInterface_)return Ks.return();as.setClockOffset(xs);case 4:as.lockStartTime();case 3:cn.playerInterface_.makeTextStreamsForClosedCaptions(cn.manifest_),Ks.jumpToEnd()}})},shaka.dash.DashParser.prototype.parsePeriods_=function(sn,ln,cn){var dn=shaka.util.XmlUtils,pn=dn.parseAttr(cn,"mediaPresentationDuration",dn.parseDuration),vn=[],kn=0;cn=dn.findChildren(cn,"Period");for(var Sn=0;Sn<cn.length;Sn++){var wn=cn[Sn],Pn=cn[Sn+1],Nn=dn.parseAttr(wn,"start",dn.parseDuration,kn),Ln=wn.id,Fn=dn.parseAttr(wn,"duration",dn.parseDuration),zn=null;if(Pn){var Dn=dn.parseAttr(Pn,"start",dn.parseDuration);Dn!=null&&(zn=Dn-Nn)}else pn!=null&&(zn=pn-Nn);if(Dn=shaka.util.ManifestParserUtils.GAP_OVERLAP_TOLERANCE_SECONDS,zn&&Fn&&Math.abs(zn-Fn)>Dn&&shaka.log.warning("There is a gap/overlap between Periods",wn),zn==null&&(zn=Fn),this.largestPeriodStartTime_!==null&&Ln!==null&&Nn!==null&&Nn<this.largestPeriodStartTime_&&!this.lastManifestUpdatePeriodIds_.includes(Ln)&&Sn+1!=cn.length)shaka.log.debug("Skipping Period with ID "+Ln+" as its start time is smaller than the largest period start time that has been seen, and ID is unseen before");else{if(Nn!==null&&(this.largestPeriodStartTime_===null||Nn>this.largestPeriodStartTime_)&&(this.largestPeriodStartTime_=Nn),kn=this.parsePeriod_(sn,ln,{start:Nn,duration:zn,node:wn,isLastPeriod:zn==null||!Pn}),vn.push(kn),sn.period.id&&zn&&(this.periodDurations_[sn.period.id]=zn),zn==null){Pn&&shaka.log.warning("Skipping Period",Sn+1,"and any subsequent Periods:","Period",Sn+1,"does not have a valid start time.",Pn),kn=null;break}kn=Nn+zn}}return this.lastManifestUpdatePeriodIds_=vn.map(function(Kn){return Kn.id}),pn!=null?(kn!=pn&&shaka.log.warning("@mediaPresentationDuration does not match the total duration of ","all Periods."),{periods:vn,duration:pn,durationDerivedFromPeriods:!1}):{periods:vn,duration:kn,durationDerivedFromPeriods:!0}},shaka.dash.DashParser.prototype.parsePeriod_=function(sn,ln,cn){var dn=this,pn=shaka.util.Functional,vn=shaka.util.XmlUtils,kn=shaka.util.ManifestParserUtils.ContentType;sn.period=this.createFrame_(cn.node,null,ln),sn.periodInfo=cn,sn.period.availabilityTimeOffset=sn.availabilityTimeOffset,sn.period.id||(shaka.log.info("No Period ID given for Period with start time "+cn.start+",  Assigning a default"),sn.period.id="__shaka_period_"+cn.start);var Sn=vn.findChildren(cn.node,"EventStream");ln=sn.presentationTimeline.getSegmentAvailabilityStart(),Sn=$jscomp.makeIterator(Sn);for(var wn=Sn.next();!wn.done;wn=Sn.next())this.parseEventStream_(cn.start,cn.duration,wn.value,ln);if(pn=vn.findChildren(cn.node,"AdaptationSet").map(function(Ln){return dn.parseAdaptationSet_(sn,Ln)}).filter(pn.isNotNull),sn.dynamic){for(cn=[],vn=$jscomp.makeIterator(pn),ln=vn.next();!ln.done;ln=vn.next())for(ln=$jscomp.makeIterator(ln.value.representationIds),Sn=ln.next();!Sn.done;Sn=ln.next())cn.push(Sn.value);if(vn=new Set(cn),cn.length!=vn.size)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_DUPLICATE_REPRESENTATION_ID)}for(cn=pn.filter(function(Ln){return!Ln.trickModeFor}),pn=pn.filter(function(Ln){return Ln.trickModeFor}),pn=$jscomp.makeIterator(pn),vn=pn.next();!vn.done;vn=pn.next())for(vn=vn.value,ln=vn.trickModeFor.split(" "),Sn=$jscomp.makeIterator(cn),wn=Sn.next();!wn.done;wn=Sn.next()){var Pn=wn.value;if(ln.includes(Pn.id)){wn={},Pn=$jscomp.makeIterator(Pn.streams);for(var Nn=Pn.next();!Nn.done;wn={$jscomp$loop$prop$stream$727:wn.$jscomp$loop$prop$stream$727},Nn=Pn.next())wn.$jscomp$loop$prop$stream$727=Nn.value,wn.$jscomp$loop$prop$stream$727.trickModeVideo=vn.streams.find(function(Ln){return function(Fn){return shaka.util.MimeUtils.getNormalizedCodec(Ln.$jscomp$loop$prop$stream$727.codecs)==shaka.util.MimeUtils.getNormalizedCodec(Fn.codecs)}}(wn))}}if(vn=this.config_.disableAudio?[]:this.getSetsOfType_(cn,kn.AUDIO),ln=this.config_.disableVideo?[]:this.getSetsOfType_(cn,kn.VIDEO),pn=this.config_.disableText?[]:this.getSetsOfType_(cn,kn.TEXT),cn=this.config_.disableThumbnails?[]:this.getSetsOfType_(cn,kn.IMAGE),!ln.length&&!vn.length)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_EMPTY_PERIOD);for(kn=[],vn=$jscomp.makeIterator(vn),Sn=vn.next();!Sn.done;Sn=vn.next())kn.push.apply(kn,$jscomp.arrayFromIterable(Sn.value.streams));for(vn=[],ln=$jscomp.makeIterator(ln),Sn=ln.next();!Sn.done;Sn=ln.next())vn.push.apply(vn,$jscomp.arrayFromIterable(Sn.value.streams));for(ln=[],pn=$jscomp.makeIterator(pn),Sn=pn.next();!Sn.done;Sn=pn.next())ln.push.apply(ln,$jscomp.arrayFromIterable(Sn.value.streams));for(pn=[],cn=$jscomp.makeIterator(cn),Sn=cn.next();!Sn.done;Sn=cn.next())pn.push.apply(pn,$jscomp.arrayFromIterable(Sn.value.streams));return{id:sn.period.id,audioStreams:kn,videoStreams:vn,textStreams:ln,imageStreams:pn}},shaka.dash.DashParser.prototype.getSetsOfType_=function(sn,ln){return sn.filter(function(cn){return cn.contentType==ln})},shaka.dash.DashParser.prototype.parseAdaptationSet_=function(sn,ln){var cn=this,dn=shaka.util.XmlUtils,pn=shaka.util.Functional,vn=shaka.util.ManifestParserUtils,kn=vn.ContentType,Sn=shaka.dash.ContentProtection;sn.adaptationSet=this.createFrame_(ln,sn.period,null);var wn=!1,Pn=dn.findChildren(ln,"Role"),Nn=Pn.map(function(Qn){return Qn.getAttribute("value")}).filter(pn.isNotNull),Ln=void 0;(pn=sn.adaptationSet.contentType==kn.TEXT)&&(Ln=vn.TextStreamKind.SUBTITLE),Pn=$jscomp.makeIterator(Pn);for(var Fn=Pn.next();!Fn.done;Fn=Pn.next()){Fn=Fn.value;var zn=Fn.getAttribute("schemeIdUri");if(zn==null||zn=="urn:mpeg:dash:role:2011")switch(Fn=Fn.getAttribute("value"),Fn){case"main":wn=!0;break;case"caption":case"subtitle":Ln=Fn}}var Dn;zn=function(Qn){switch(Qn){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}};var Kn=dn.findChildren(ln,"EssentialProperty");Pn=null,Fn=!1,Kn=$jscomp.makeIterator(Kn);for(var qn=Kn.next();!qn.done;qn=Kn.next()){qn=qn.value;var Zn=qn.getAttribute("schemeIdUri");Zn=="http://dashif.org/guidelines/trickmode"?Pn=qn.getAttribute("value"):Zn=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?Dn=zn(parseInt(qn.getAttribute("value"),10)):Fn=!0}for(Kn=dn.findChildren(ln,"SupplementalProperty"),Kn=$jscomp.makeIterator(Kn),qn=Kn.next();!qn.done;qn=Kn.next())qn=qn.value,qn.getAttribute("schemeIdUri")=="urn:mpeg:mpegB:cicp:TransferCharacteristics"&&(Dn=zn(parseInt(qn.getAttribute("value"),10)));Kn=dn.findChildren(ln,"Accessibility"),zn=shaka.util.LanguageUtils;var Yn=new Map;for(Kn=$jscomp.makeIterator(Kn),qn=Kn.next();!qn.done;qn=Kn.next())if(Zn=qn.value,qn=Zn.getAttribute("schemeIdUri"),Zn=Zn.getAttribute("value"),qn=="urn:scte:dash:cc:cea-608:2015")if(qn=1,Zn!=null){Zn=Zn.split(";");for(var Jn=$jscomp.makeIterator(Zn),rs=Jn.next();!rs.done;rs=Jn.next()){var ss=rs.value,as=rs=void 0;ss.includes("=")?(ss=ss.split("="),rs=ss[0].startsWith("CC")?ss[0]:"CC"+ss[0],as=ss[1]||"und"):(rs="CC"+qn,Zn.length==2?qn+=2:qn++,as=ss),Yn.set(rs,zn.normalize(as))}}else Yn.set("CC1","und");else if(qn=="urn:scte:dash:cc:cea-708:2015")if(qn=1,Zn!=null)for(Zn=$jscomp.makeIterator(Zn.split(";")),rs=Zn.next();!rs.done;rs=Zn.next())rs=rs.value,ss=Jn=void 0,rs.includes("=")?(rs=rs.split("="),Jn="svc"+rs[0],ss=rs[1].split(",")[0].split(":").pop()):(Jn="svc"+qn,qn++,ss=rs),Yn.set(Jn,zn.normalize(ss));else Yn.set("svc1","und");else qn=="urn:mpeg:dash:role:2011"&&Zn!=null&&(Nn.push(Zn),Zn=="captions"&&(Ln=vn.TextStreamKind.CLOSED_CAPTION));if(Fn)return null;vn=dn.findChildren(ln,"ContentProtection");var ds=Sn.parseFromAdaptationSet(vn,this.config_.dash.ignoreDrmInfo,this.config_.dash.keySystemsByURI),Es=shaka.util.LanguageUtils.normalize(ln.getAttribute("lang")||"und"),Ss=ln.getAttribute("label");if((Sn=dn.findChildren(ln,"Label"))&&Sn.length&&(Sn=Sn[0],Sn.textContent&&(Ss=Sn.textContent)),dn=dn.findChildren(ln,"Representation"),ln=dn.map(function(Qn){return(Qn=cn.parseRepresentation_(sn,ds,Ln,Es,Ss,wn,Nn,Yn,Qn))&&(Qn.hdr=Qn.hdr||Dn),Qn}).filter(function(Qn){return!!Qn}),ln.length==0){if(Pn=sn.adaptationSet.contentType==kn.IMAGE,this.config_.dash.ignoreEmptyAdaptationSet||pn||Pn)return null;throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.DASH_EMPTY_ADAPTATION_SET)}if(!sn.adaptationSet.contentType||sn.adaptationSet.contentType==kn.APPLICATION)for(sn.adaptationSet.contentType=shaka.dash.DashParser.guessContentType_(ln[0].mimeType,ln[0].codecs),kn=$jscomp.makeIterator(ln),pn=kn.next();!pn.done;pn=kn.next())pn.value.type=sn.adaptationSet.contentType;for(kn=$jscomp.makeIterator(ln),pn=kn.next();!pn.done;pn=kn.next())for(pn=pn.value,Sn=$jscomp.makeIterator(ds.drmInfos),vn=Sn.next();!vn.done;vn=Sn.next())vn=vn.value,vn.keyIds=vn.keyIds&&pn.keyIds?new Set([].concat($jscomp.arrayFromIterable(vn.keyIds),$jscomp.arrayFromIterable(pn.keyIds))):vn.keyIds||pn.keyIds;return kn=dn.map(function(Qn){return Qn.getAttribute("id")}).filter(shaka.util.Functional.isNotNull),{id:sn.adaptationSet.id||"__fake__"+this.globalId_++,contentType:sn.adaptationSet.contentType,language:Es,main:wn,streams:ln,drmInfos:ds.drmInfos,trickModeFor:Pn,representationIds:kn}},shaka.dash.DashParser.prototype.parseRepresentation_=function(sn,ln,cn,dn,pn,vn,kn,Sn,wn){var Pn=this,Nn=shaka.util.XmlUtils,Ln=shaka.util.ManifestParserUtils.ContentType;if(sn.representation=this.createFrame_(wn,sn.adaptationSet,null),this.minTotalAvailabilityTimeOffset_=Math.min(this.minTotalAvailabilityTimeOffset_,sn.representation.availabilityTimeOffset),!this.verifyRepresentation_(sn.representation))return shaka.log.warning("Skipping Representation",sn.representation),null;var Fn=sn.periodInfo.start;sn.bandwidth=Nn.parseAttr(wn,"bandwidth",Nn.parsePositiveInt)||0;var zn=sn.representation.contentType,Dn=zn==Ln.TEXT||zn==Ln.APPLICATION;Ln=zn==Ln.IMAGE;try{if(zn=function(ds,Es,Ss){return Pn.requestInitSegment_(ds,Es,Ss)},sn.representation.segmentBase)var Kn=shaka.dash.SegmentBase.createStreamInfo(sn,zn);else if(sn.representation.segmentList)Kn=shaka.dash.SegmentList.createStreamInfo(sn,this.streamMap_);else if(sn.representation.segmentTemplate)Kn=shaka.dash.SegmentTemplate.createStreamInfo(sn,zn,this.streamMap_,!!this.manifest_,this.config_.dash.initialSegmentLimit,this.periodDurations_);else{goog.asserts.assert(Dn,"Must have Segment* with non-text streams.");var qn=sn.representation.baseUris,Zn=sn.periodInfo.duration||0;Kn={generateSegmentIndex:function(){return Promise.resolve(shaka.media.SegmentIndex.forSingleSegment(Fn,Zn,qn))}}}}catch(ds){if((Dn||Ln)&&ds.code==shaka.util.Error.Code.DASH_NO_SEGMENT_INFO)return null;throw ds}zn=Nn.findChildren(wn,"ContentProtection"),zn=shaka.dash.ContentProtection.parseFromRepresentation(zn,ln,this.config_.dash.ignoreDrmInfo,this.config_.dash.keySystemsByURI),zn=new Set(zn?[zn]:[]);var Yn=!1;Nn.findChildren(wn,"SupplementalProperty").some(function(ds){return ds.getAttribute("schemeIdUri")=="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&ds.getAttribute("value")=="JOC"})&&(Yn=!0);var Jn=!1;Dn&&(Jn=kn.includes("forced_subtitle")||kn.includes("forced-subtitle"));var rs;if(Ln&&((wn=Nn.findChildren(wn,"EssentialProperty").find(function(ds){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(ds.getAttribute("schemeIdUri"))}))&&(rs=wn.getAttribute("value")),!rs))return null;var ss;wn=sn.representation.codecs,sn.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(wn.includes("hvc1.2.4.L153.B0")||wn.includes("hev1.2.4.L153.B0"))&&(ss="PQ"),wn=sn.representation.id?sn.period.id+","+sn.representation.id:"";var as=wn&&this.streamMap_[wn]?this.streamMap_[wn]:{id:this.globalId_++,originalId:sn.representation.id,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){as.segmentIndex&&(as.segmentIndex.release(),as.segmentIndex=null)},segmentIndex:null,mimeType:sn.representation.mimeType,codecs:sn.representation.codecs,frameRate:sn.representation.frameRate,pixelAspectRatio:sn.representation.pixelAspectRatio,bandwidth:sn.bandwidth,width:sn.representation.width,height:sn.representation.height,kind:cn,encrypted:0<ln.drmInfos.length,drmInfos:ln.drmInfos,keyIds:zn,language:dn,label:pn,type:sn.adaptationSet.contentType,primary:vn,trickModeVideo:null,emsgSchemeIdUris:sn.representation.emsgSchemeIdUris,roles:kn,forced:Jn,channelsCount:sn.representation.numChannels,audioSamplingRate:sn.representation.audioSamplingRate,spatialAudio:Yn,closedCaptions:Sn,hdr:ss,tilesLayout:rs,matchedStreams:[]};return as.createSegmentIndex=function(){var ds;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Es){if(Es.nextAddress==1)return as.segmentIndex?Es.jumpTo(0):(ds=as,Es.yield(Kn.generateSegmentIndex(),3));ds.segmentIndex=Es.yieldResult,Es.jumpToEnd()})},wn&&sn.dynamic&&!this.streamMap_[wn]&&(this.streamMap_[wn]=as),as},shaka.dash.DashParser.prototype.onUpdate_=function(){var sn=this,ln,cn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(dn){switch(dn.nextAddress){case 1:return goog.asserts.assert(0<=sn.updatePeriod_,"There should be an update period"),shaka.log.info("Updating manifest..."),ln=0,dn.setCatchFinallyBlocks(2),dn.yield(sn.requestManifest_(),4);case 4:ln=dn.yieldResult,dn.leaveTryBlock(3);break;case 2:cn=dn.enterCatchBlock(),goog.asserts.assert(cn instanceof shaka.util.Error,"Should only receive a Shaka error"),sn.playerInterface_&&(cn.severity=shaka.util.Error.Severity.RECOVERABLE,sn.playerInterface_.onError(cn));case 3:if(!sn.playerInterface_)return dn.return();sn.setUpdateTimer_(ln),dn.jumpToEnd()}})},shaka.dash.DashParser.prototype.setUpdateTimer_=function(sn){0>this.updatePeriod_||(sn=Math.max(shaka.dash.DashParser.MIN_UPDATE_PERIOD_,this.updatePeriod_-sn,this.averageUpdateDuration_.getEstimate()),this.updateTimer_.tickAfter(sn))},shaka.dash.DashParser.prototype.createFrame_=function(sn,ln,cn){goog.asserts.assert(ln||cn,"Must provide either parent or baseUris");var dn=shaka.util.ManifestParserUtils,pn=shaka.util.XmlUtils;ln=ln||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,numChannels:null,audioSamplingRate:null,availabilityTimeOffset:0},cn=cn||ln.baseUris;var vn=pn.parseNonNegativeInt,kn=pn.evalDivision,Sn=pn.findChildren(sn,"BaseURL"),wn=Sn.map(pn.getContents),Pn=sn.getAttribute("contentType")||ln.contentType,Nn=sn.getAttribute("mimeType")||ln.mimeType,Ln=sn.getAttribute("codecs")||ln.codecs;kn=pn.parseAttr(sn,"frameRate",kn)||ln.frameRate;var Fn=sn.getAttribute("sar")||ln.pixelAspectRatio,zn=this.emsgSchemeIdUris_(pn.findChildren(sn,"InbandEventStream"),ln.emsgSchemeIdUris),Dn=pn.findChildren(sn,"AudioChannelConfiguration");Dn=this.parseAudioChannels_(Dn)||ln.numChannels;var Kn=pn.parseAttr(sn,"audioSamplingRate",vn)||ln.audioSamplingRate;Pn||(Pn=shaka.dash.DashParser.guessContentType_(Nn,Ln));var qn=pn.findChild(sn,"SegmentBase"),Zn=pn.findChild(sn,"SegmentTemplate"),Yn=qn&&pn.parseAttr(qn,"availabilityTimeOffset",pn.parseFloat)||0,Jn=Zn&&pn.parseAttr(Zn,"availabilityTimeOffset",pn.parseFloat)||0;return Sn=Sn&&Sn.length&&pn.parseAttr(Sn[0],"availabilityTimeOffset",pn.parseFloat)||0,Sn=ln.availabilityTimeOffset+Sn+Yn+Jn,{baseUris:dn.resolveUris(cn,wn),segmentBase:qn||ln.segmentBase,segmentList:pn.findChild(sn,"SegmentList")||ln.segmentList,segmentTemplate:Zn||ln.segmentTemplate,width:pn.parseAttr(sn,"width",vn)||ln.width,height:pn.parseAttr(sn,"height",vn)||ln.height,contentType:Pn,mimeType:Nn,codecs:Ln,frameRate:kn,pixelAspectRatio:Fn,emsgSchemeIdUris:zn,id:sn.getAttribute("id"),numChannels:Dn,audioSamplingRate:Kn,availabilityTimeOffset:Sn}},shaka.dash.DashParser.prototype.emsgSchemeIdUris_=function(sn,ln){ln=ln.slice(),sn=$jscomp.makeIterator(sn);for(var cn=sn.next();!cn.done;cn=sn.next())cn=cn.value.getAttribute("schemeIdUri"),ln.includes(cn)||ln.push(cn);return ln},shaka.dash.DashParser.prototype.parseAudioChannels_=function(sn){sn=$jscomp.makeIterator(sn);for(var ln=sn.next();!ln.done;ln=sn.next()){var cn=ln.value;if((ln=cn.getAttribute("schemeIdUri"))&&(cn=cn.getAttribute("value")))switch(ln){case"urn:mpeg:dash:outputChannelPositionList:2012":return cn.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":var dn=parseInt(cn,10);if(!dn){shaka.log.warning("Channel parsing failure! Ignoring scheme and value",ln,cn);continue}return dn;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(dn=parseInt(cn,16),!dn){shaka.log.warning("Channel parsing failure! Ignoring scheme and value",ln,cn);continue}for(sn=0;dn;)dn&1&&++sn,dn>>=1;return sn;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":dn=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14];var pn=parseInt(cn,10);if(!pn){shaka.log.warning("Channel parsing failure! Ignoring scheme and value",ln,cn);continue}if(0<pn&&pn<dn.length)return dn[pn];continue;default:shaka.log.warning("Unrecognized audio channel scheme:",ln,cn)}}return null},shaka.dash.DashParser.prototype.verifyRepresentation_=function(sn){var ln=shaka.util.ManifestParserUtils.ContentType,cn=sn.segmentBase?1:0;return cn+=sn.segmentList?1:0,cn+=sn.segmentTemplate?1:0,cn==0?sn.contentType==ln.TEXT||sn.contentType==ln.APPLICATION?!0:(shaka.log.warning("Representation does not contain a segment information source:","the Representation must contain one of SegmentBase, SegmentList,",'SegmentTemplate, or explicitly indicate that it is "text".',sn),!1):(cn!=1&&(shaka.log.warning("Representation contains multiple segment information sources:","the Representation should only contain one of SegmentBase,","SegmentList, or SegmentTemplate.",sn),sn.segmentBase?(shaka.log.info("Using SegmentBase by default."),sn.segmentList=null):(goog.asserts.assert(sn.segmentList,"There should be a SegmentList"),shaka.log.info("Using SegmentList by default.")),sn.segmentTemplate=null),!0)},shaka.dash.DashParser.prototype.requestForTiming_=function(sn,ln,cn){var dn=this,pn,vn,kn,Sn,wn,Pn,Nn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ln){if(Ln.nextAddress==1)return pn=shaka.util.ManifestParserUtils.resolveUris(sn,[ln]),vn=shaka.net.NetworkingEngine.makeRequest(pn,dn.config_.retryParameters),vn.method=cn,kn=shaka.net.NetworkingEngine.RequestType.TIMING,Sn=dn.playerInterface_.networkingEngine.request(kn,vn),dn.operationManager_.manage(Sn),Ln.yield(Sn.promise,2);if(wn=Ln.yieldResult,cn=="HEAD"){if(!wn.headers||!wn.headers.date)return shaka.log.warning("UTC timing response is missing","expected date header"),Ln.return(0);Pn=wn.headers.date}else Pn=shaka.util.StringUtils.fromUTF8(wn.data);return Nn=Date.parse(Pn),isNaN(Nn)?(shaka.log.warning("Unable to parse date from UTC timing response"),Ln.return(0)):Ln.return(Nn-Date.now())})},shaka.dash.DashParser.prototype.parseUtcTiming_=function(sn,ln){var cn=this,dn,pn,vn,kn,Sn,wn,Pn,Nn,Ln;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fn){switch(Fn.nextAddress){case 1:dn=ln.map(function(zn){return{scheme:zn.getAttribute("schemeIdUri"),value:zn.getAttribute("value")}}),pn=cn.config_.dash.clockSyncUri,!dn.length&&pn&&dn.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:pn}),vn=$jscomp.makeIterator(dn),kn=vn.next();case 2:if(kn.done){Fn.jumpTo(4);break}switch(Sn=kn.value,Fn.setCatchFinallyBlocks(5),wn=Sn.scheme,Pn=Sn.value,wn){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return Fn.jumpTo(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return Fn.jumpTo(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return Nn=Date.parse(Pn),Fn.return(isNaN(Nn)?0:Nn-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":shaka.log.alwaysWarn("NTP UTCTiming scheme is not supported");break;default:shaka.log.alwaysWarn("Unrecognized scheme in UTCTiming element",wn)}Fn.jumpTo(9);break;case 7:return Fn.yield(cn.requestForTiming_(sn,Pn,"HEAD"),10);case 10:return Fn.return(Fn.yieldResult);case 8:return Fn.yield(cn.requestForTiming_(sn,Pn,"GET"),11);case 11:return Fn.return(Fn.yieldResult);case 9:Fn.leaveTryBlock(3);break;case 5:Ln=Fn.enterCatchBlock(),shaka.log.warning("Error fetching time from UTCTiming elem",Ln.message);case 3:kn=vn.next(),Fn.jumpTo(2);break;case 4:return shaka.log.alwaysWarn("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),Fn.return(0)}})},shaka.dash.DashParser.prototype.parseEventStream_=function(sn,ln,cn,dn){var pn=shaka.util.XmlUtils,vn=pn.parseNonNegativeInt,kn=cn.getAttribute("schemeIdUri")||"",Sn=cn.getAttribute("value")||"",wn=pn.parseAttr(cn,"timescale",vn)||1;cn=$jscomp.makeIterator(pn.findChildren(cn,"Event"));for(var Pn=cn.next();!Pn.done;Pn=cn.next()){Pn=Pn.value;var Nn=pn.parseAttr(Pn,"presentationTime",vn)||0,Ln=pn.parseAttr(Pn,"duration",vn)||0;Nn=Nn/wn+sn,Ln=Nn+Ln/wn,ln!=null&&(Nn=Math.min(Nn,sn+ln),Ln=Math.min(Ln,sn+ln)),Ln<dn||(Pn={schemeIdUri:kn,value:Sn,startTime:Nn,endTime:Ln,id:Pn.getAttribute("id")||"",eventElement:Pn},this.playerInterface_.onTimelineRegionAdded(Pn))}},shaka.dash.DashParser.prototype.requestInitSegment_=function(sn,ln,cn){var dn=this,pn,vn,kn,Sn,wn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Pn){return Pn.nextAddress==1?(pn=shaka.net.NetworkingEngine.RequestType.SEGMENT,vn=shaka.util.Networking.createSegmentRequest(sn,ln,cn,dn.config_.retryParameters),kn=dn.playerInterface_.networkingEngine,Sn=kn.request(pn,vn),dn.operationManager_.manage(Sn),Pn.yield(Sn.promise,2)):(wn=Pn.yieldResult,Pn.return(wn.data))})},shaka.dash.DashParser.guessContentType_=function(sn,ln){return ln=shaka.util.MimeUtils.getFullType(sn,ln),shaka.text.TextEngine.isTypeSupported(ln)?shaka.util.ManifestParserUtils.ContentType.TEXT:sn.split("/")[0]},goog.exportSymbol("shaka.dash.DashParser",shaka.dash.DashParser),shaka.dash.DashParser.MIN_UPDATE_PERIOD_=3,shaka.media.ManifestParser.registerParserByExtension("mpd",function(){return new shaka.dash.DashParser}),shaka.media.ManifestParser.registerParserByMime("application/dash+xml",function(){return new shaka.dash.DashParser}),shaka.media.ManifestParser.registerParserByMime("video/vnd.mpeg.dash.mpd",function(){return new shaka.dash.DashParser}),shaka.hls={},shaka.hls.Playlist=function(sn,ln,cn,dn){this.absoluteUri=sn,this.type=ln,this.tags=cn,this.segments=dn||null},shaka.hls.PlaylistType={MASTER:0,MEDIA:1},shaka.hls.Tag=function(sn,ln,cn,dn){this.id=sn,this.name=ln,this.attributes=cn,this.value=dn===void 0?null:dn},shaka.hls.Tag.prototype.toString=function(){var sn=function(cn){var dn=isNaN(Number(cn.value))?'"'+cn.value+'"':cn.value;return cn.name+"="+dn},ln="#"+this.name;return sn=this.attributes?this.attributes.map(sn):[],this.value&&sn.unshift(this.value),0<sn.length&&(ln+=":"+sn.join(",")),ln},shaka.hls.Tag.prototype.addAttribute=function(sn){this.attributes.push(sn)},shaka.hls.Tag.prototype.getAttribute=function(sn){var ln=this.attributes.filter(function(cn){return cn.name==sn});return goog.asserts.assert(2>ln.length,"A tag should not have multiple attributes with the same name!"),ln.length?ln[0]:null},shaka.hls.Tag.prototype.getAttributeValue=function(sn,ln){return(sn=this.getAttribute(sn))?sn.value:ln||null},shaka.hls.Tag.prototype.getRequiredAttrValue=function(sn){var ln=this.getAttribute(sn);if(!ln)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_REQUIRED_ATTRIBUTE_MISSING,sn);return ln.value},shaka.hls.Tag.prototype.setName=function(sn){this.name=sn},shaka.hls.Segment=function(sn,ln,cn){cn=cn===void 0?[]:cn,this.tags=ln,this.absoluteUri=sn,this.partialSegments=cn},shaka.hls.Attribute=function(sn,ln){this.name=sn,this.value=ln},shaka.hls.Utils=function(){},shaka.hls.Utils.filterTagsByName=function(sn,ln){return sn.filter(function(cn){return cn.name==ln})},shaka.hls.Utils.filterTagsByType=function(sn,ln){return sn.filter(function(cn){return cn.getRequiredAttrValue("TYPE")==ln})},shaka.hls.Utils.getFirstTagWithName=function(sn,ln){return sn=shaka.hls.Utils.filterTagsByName(sn,ln),sn.length?sn[0]:null},shaka.hls.Utils.getFirstTagWithNameAsNumber=function(sn,ln,cn){return cn=cn===void 0?0:cn,(sn=shaka.hls.Utils.getFirstTagWithName(sn,ln))?Number(sn.value):cn},shaka.hls.Utils.constructAbsoluteUri=function(sn,ln){return shaka.util.ManifestParserUtils.resolveUris([sn],[ln])[0]},shaka.hls.Utils.isComment=function(sn){return/^#(?!EXT)/m.test(sn)},shaka.util.TextParser=function(sn){this.data_=sn,this.position_=0},shaka.util.TextParser.prototype.atEnd=function(){return this.position_==this.data_.length},shaka.util.TextParser.prototype.readLine=function(){return this.readRegexReturnCapture_(/(.*?)(\n|$)/gm,1)},shaka.util.TextParser.prototype.readWord=function(){return this.readRegexReturnCapture_(/[^ \t\n]*/gm,0)},shaka.util.TextParser.prototype.skipWhitespace=function(){this.readRegex(/[ \t]+/gm)},shaka.util.TextParser.prototype.readRegex=function(sn){return sn=this.indexOf_(sn),this.atEnd()||sn==null||sn.position!=this.position_?null:(this.position_+=sn.length,sn.results)},shaka.util.TextParser.prototype.readRegexReturnCapture_=function(sn,ln){return this.atEnd()?null:(sn=this.readRegex(sn))?sn[ln]:null},shaka.util.TextParser.prototype.indexOf_=function(sn){return goog.asserts.assert(sn.global,"global flag should be set"),sn.lastIndex=this.position_,sn=sn.exec(this.data_),sn==null?null:{position:sn.index,length:sn[0].length,results:sn}},shaka.hls.ManifestTextParser=function(){this.globalId_=0},shaka.hls.ManifestTextParser.prototype.parsePlaylist=function(sn,ln){var cn=shaka.hls.ManifestTextParser.MEDIA_PLAYLIST_TAGS,dn=shaka.hls.ManifestTextParser.SEGMENT_TAGS;sn=shaka.util.StringUtils.fromUTF8(sn),sn=sn.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`).trim();var pn=sn.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(pn[0]))throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_PLAYLIST_HEADER_MISSING);sn=shaka.hls.PlaylistType.MASTER;for(var vn=!0,kn=$jscomp.makeIterator(pn),Sn=kn.next();!Sn.done;Sn=kn.next())if(Sn=Sn.value,shaka.hls.Utils.isComment(Sn)||vn)vn=!1;else if(Sn=this.parseTag_(Sn),--this.globalId_,cn.includes(Sn.name)){sn=shaka.hls.PlaylistType.MEDIA;break}else Sn.name=="EXT-X-STREAM-INF"&&(vn=!0);for(cn=[],vn=!0,kn=0;kn<pn.length;kn++){var wn=pn[kn];if(Sn=pn[kn+1],shaka.hls.Utils.isComment(wn)||vn)vn=!1;else{if(wn=this.parseTag_(wn),dn.includes(wn.name)){if(sn!=shaka.hls.PlaylistType.MEDIA)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_INVALID_PLAYLIST_HIERARCHY);return dn=pn.splice(kn,pn.length-kn),dn=this.parseSegments_(ln,dn,cn),new shaka.hls.Playlist(ln,sn,cn,dn)}cn.push(wn),wn.name=="EXT-X-STREAM-INF"&&(vn=new shaka.hls.Attribute("URI",Sn),wn.addAttribute(vn),vn=!0)}}return new shaka.hls.Playlist(ln,sn,cn)},shaka.hls.ManifestTextParser.prototype.parseSegments_=function(sn,ln,cn){var dn=[],pn=[],vn=[],kn=null;ln=$jscomp.makeIterator(ln);for(var Sn=ln.next();!Sn.done;Sn=ln.next())Sn=Sn.value,/^(#EXT)/.test(Sn)?(Sn=this.parseTag_(Sn),shaka.hls.ManifestTextParser.MEDIA_PLAYLIST_TAGS.includes(Sn.name)?cn.push(Sn):Sn.name=="EXT-X-MAP"?kn=Sn:Sn.name=="EXT-X-PART"?vn.push(Sn):Sn.name=="EXT-X-PRELOAD-HINT"?Sn.getAttributeValue("TYPE")=="PART"?vn.push(Sn):Sn.getAttributeValue("TYPE")=="MAP"&&(Sn.setName("EXT-X-MAP"),kn=Sn):pn.push(Sn)):shaka.hls.Utils.isComment(Sn)||(Sn=Sn.trim(),Sn=shaka.hls.Utils.constructAbsoluteUri(sn,Sn),kn&&pn.push(kn),pn=new shaka.hls.Segment(Sn,pn,vn),dn.push(pn),pn=[],vn=[]);return vn.length&&(kn&&pn.push(kn),sn=new shaka.hls.Segment("",pn,vn),dn.push(sn)),dn},shaka.hls.ManifestTextParser.prototype.parseTag_=function(sn){return shaka.hls.ManifestTextParser.parseTag(this.globalId_++,sn)},shaka.hls.ManifestTextParser.parseTag=function(sn,ln){var cn=ln.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!cn)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.INVALID_HLS_TAG,ln);ln=cn[1];var dn=cn[2];cn=[];var pn;if(dn){dn=new shaka.util.TextParser(dn);var vn,kn=dn.readRegex(/^([^,=]+)(?:,|$)/g);for(kn&&(pn=kn[1]),kn=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;vn=dn.readRegex(kn);)vn=new shaka.hls.Attribute(vn[1],vn[2]||vn[3]),cn.push(vn),dn.skipWhitespace()}return new shaka.hls.Tag(sn,ln,cn,pn)},shaka.hls.ManifestTextParser.MEDIA_PLAYLIST_TAGS="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP".split(" "),shaka.hls.ManifestTextParser.SEGMENT_TAGS="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" "),shaka.net.DataUriPlugin=function(){},shaka.net.DataUriPlugin.parse=function(sn,ln,cn,dn){try{var pn=shaka.net.DataUriPlugin.parseRaw(sn);return shaka.util.AbortableOperation.completed({uri:sn,originalUri:sn,data:pn.data,headers:{"content-type":pn.contentType}})}catch(vn){return shaka.util.AbortableOperation.failed(vn)}},shaka.net.DataUriPlugin.parseRaw=function(sn){var ln=sn.split(":");if(2>ln.length||ln[0]!="data")throw shaka.log.error("Bad data URI, failed to parse scheme"),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.MALFORMED_DATA_URI,sn);if(ln=ln.slice(1).join(":").split(","),2>ln.length)throw shaka.log.error("Bad data URI, failed to extract encoding and MIME type"),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.MALFORMED_DATA_URI,sn);var cn=ln[0];sn=window.decodeURIComponent(ln.slice(1).join(",")),ln=cn.split(";"),cn=ln[0];var dn=!1;return 1<ln.length&&ln[ln.length-1]=="base64"&&(dn=!0,ln.pop()),{data:dn?shaka.util.Uint8ArrayUtils.fromBase64(sn):shaka.util.StringUtils.toUTF8(sn),contentType:cn}},goog.exportSymbol("shaka.net.DataUriPlugin",shaka.net.DataUriPlugin),goog.exportProperty(shaka.net.DataUriPlugin,"parse",shaka.net.DataUriPlugin.parse),shaka.net.NetworkingEngine.registerScheme("data",shaka.net.DataUriPlugin.parse),shaka.hls.HlsParser=function(){var sn=this;this.config_=this.playerInterface_=null,this.globalId_=1,this.globalVariables_=new Map,this.groupIdToStreamInfosMap_=new Map,this.mediaSequenceToStartTimeByType_=new Map;var ln=shaka.util.ManifestParserUtils.ContentType;this.mediaSequenceToStartTimeByType_.set(ln.VIDEO,new Map),this.mediaSequenceToStartTimeByType_.set(ln.AUDIO,new Map),this.mediaSequenceToStartTimeByType_.set(ln.TEXT,new Map),this.mediaSequenceToStartTimeByType_.set(ln.IMAGE,new Map),this.variantUriSet_=new Set,this.uriToStreamInfosMap_=new Map,this.presentationTimeline_=null,this.masterPlaylistUri_="",this.manifestTextParser_=new shaka.hls.ManifestTextParser,this.updatePlaylistDelay_=0,this.minSequenceNumber_=-1,this.lowestSyncTime_=1/0,this.streamsFinalized_=!1,this.updatePlaylistTimer_=new shaka.util.Timer(function(){sn.onUpdate_()}),this.presentationType_=shaka.hls.HlsParser.PresentationType_.VOD,this.manifest_=null,this.maxTargetDuration_=0,this.minTargetDuration_=1/0,this.lowLatencyPresentationDelay_=this.partialTargetDuration_=0,this.operationManager_=new shaka.util.OperationManager,this.groupIdToClosedCaptionsMap_=new Map,this.groupIdToCodecsMap_=new Map,this.mapTagToInitSegmentRefMap_=new Map,this.lowLatencyMode_=!1},shaka.hls.HlsParser.prototype.configure=function(sn){this.config_=sn},shaka.hls.HlsParser.prototype.start=function(sn,ln){var cn=this,dn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pn){return pn.nextAddress==1?(goog.asserts.assert(cn.config_,"Must call configure() before start()!"),cn.playerInterface_=ln,cn.lowLatencyMode_=ln.isLowLatencyMode(),pn.yield(cn.requestManifest_(sn),2)):pn.nextAddress!=3?(dn=pn.yieldResult,cn.masterPlaylistUri_=dn.uri,goog.asserts.assert(dn.data,"Response data should be non-null!"),pn.yield(cn.parseManifest_(dn.data,sn),3)):(goog.asserts.assert(cn.manifest_,"Manifest should be non-null"),pn.return(cn.manifest_))})},shaka.hls.HlsParser.prototype.stop=function(){this.updatePlaylistTimer_&&(this.updatePlaylistTimer_.stop(),this.updatePlaylistTimer_=null);var sn=[];return this.operationManager_&&(sn.push(this.operationManager_.destroy()),this.operationManager_=null),this.config_=this.playerInterface_=null,this.variantUriSet_.clear(),this.manifest_=null,this.uriToStreamInfosMap_.clear(),this.groupIdToStreamInfosMap_.clear(),this.groupIdToCodecsMap_.clear(),this.globalVariables_.clear(),Promise.all(sn)},shaka.hls.HlsParser.prototype.update=function(){var sn=this,ln,cn,dn,pn,vn,kn,Sn,wn,Pn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Nn){if(Nn.nextAddress==1){if(!sn.isLive_())return Nn.return();for(ln=[],cn=Array.from(sn.uriToStreamInfosMap_.values()),dn=cn.filter(function(Ln){return Ln.stream.segmentIndex}),pn=$jscomp.makeIterator(dn),vn=pn.next();!vn.done;vn=pn.next())kn=vn.value,ln.push(sn.updateStream_(kn));return Nn.yield(Promise.all(ln),2)}sn.notifySegmentsForStreams_(dn.map(function(Ln){return Ln.stream})),Sn=dn.some(function(Ln){return Ln.hasEndList==0}),dn.length&&!Sn&&(wn=shaka.hls.HlsParser.PresentationType_,sn.setPresentationType_(wn.VOD),Pn=dn.map(function(Ln){return Ln.maxTimestamp}),sn.presentationTimeline_.setDuration(Math.min.apply(Math,$jscomp.arrayFromIterable(Pn))),sn.playerInterface_.updateDuration()),Nn.jumpToEnd()})},shaka.hls.HlsParser.prototype.getMediaSequenceToStartTimeFor_=function(sn){return this.isLive_()?this.mediaSequenceToStartTimeByType_.get(sn.type):sn.mediaSequenceToStartTime},shaka.hls.HlsParser.prototype.updateStream_=function(sn){var ln=this,cn,dn,pn,vn,kn,Sn,wn,Pn,Nn,Ln,Fn,zn,Dn,Kn,qn,Zn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Yn){if(Yn.nextAddress==1)return cn=sn.absoluteMediaPlaylistUri,dn=new goog.Uri(cn),ln.lowLatencyMode_&&sn.canSkipSegments&&dn.setQueryData(new goog.Uri.QueryData("_HLS_skip=YES")),Yn.yield(ln.requestManifest_(dn.toString()),2);if(pn=Yn.yieldResult,!sn.stream.segmentIndex)return Yn.return();if(vn=ln.manifestTextParser_.parsePlaylist(pn.data,pn.uri),vn.type!=shaka.hls.PlaylistType.MEDIA)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_INVALID_PLAYLIST_HIERARCHY);kn=shaka.hls.Utils.filterTagsByName(vn.tags,"EXT-X-DEFINE"),Sn=ln.parseMediaVariables_(kn),wn=sn.stream,Pn=ln.getMediaSequenceToStartTimeFor_(sn),Nn=ln.parseDrmInfo_(vn,wn.mimeType),Ln=Nn.keyIds,Fn=Nn.drmInfos,zn=function(Jn,rs){return Jn.size===rs.size&&[].concat($jscomp.arrayFromIterable(Jn)).every(function(ss){return rs.has(ss)})},zn(wn.keyIds,Ln)||(wn.keyIds=Ln,wn.drmInfos=Fn,ln.playerInterface_.newDrmInfo(wn)),Dn=ln.createSegments_(sn.verbatimMediaPlaylistUri,vn,wn.type,wn.mimeType,Pn,Sn),wn.segmentIndex.mergeAndEvict(Dn,ln.presentationTimeline_.getSegmentAvailabilityStart()),Dn.length&&(Kn=shaka.hls.Utils.getFirstTagWithNameAsNumber(vn.tags,"EXT-X-MEDIA-SEQUENCE",0),qn=Pn.get(Kn),wn.segmentIndex.evict(qn)),Zn=Dn[Dn.length-1],goog.asserts.assert(Zn,"Should have segments!"),shaka.hls.Utils.getFirstTagWithName(vn.tags,"EXT-X-ENDLIST")&&(sn.hasEndList=!0,sn.maxTimestamp=Zn.endTime),Yn.jumpToEnd()})},shaka.hls.HlsParser.prototype.onExpirationUpdated=function(sn,ln){},shaka.hls.HlsParser.prototype.syncStreamsWithSequenceNumber_=function(sn){for(var ln=this.minSequenceNumber_==-1,cn=$jscomp.makeIterator(sn),dn=cn.next();!dn.done;dn=cn.next()){dn=dn.value;var pn=dn.stream.segmentIndex;goog.asserts.assert(pn,"Only loaded streams should be synced");var vn=this.getMediaSequenceToStartTimeFor_(dn);if(pn=pn.earliestReference()){if(goog.DEBUG){var kn=vn.values().next().value;goog.asserts.assert(kn==pn.startTime,"Sequence number map is not ordered as expected!")}for(vn=$jscomp.makeIterator(vn),kn=vn.next();!kn.done;kn=vn.next()){kn=$jscomp.makeIterator(kn.value);var Sn=kn.next().value;if(kn.next().value==pn.startTime){ln&&(this.minSequenceNumber_=Math.max(this.minSequenceNumber_,Sn)),dn.firstSequenceNumber=Sn;break}}}}if(!(0>this.minSequenceNumber_))for(shaka.log.debug("Syncing HLS streams against base sequence number:",this.minSequenceNumber_),sn=$jscomp.makeIterator(sn),dn=sn.next();!dn.done;dn=sn.next())ln=dn.value,(cn=ln.stream.segmentIndex)&&(cn.dropFirstReferences(this.minSequenceNumber_-ln.firstSequenceNumber),(cn=cn.earliestReference())&&(cn=-cn.startTime,ln.stream.segmentIndex.offset(cn),this.offsetStreamInfo_(ln,cn)))},shaka.hls.HlsParser.prototype.syncStreamsWithProgramDateTime_=function(sn){if(this.lowestSyncTime_==1/0){sn=$jscomp.makeIterator(sn);for(var ln=sn.next();!ln.done;ln=sn.next()){var cn=ln.value.stream.segmentIndex;goog.asserts.assert(cn,"Only loaded streams should be synced"),cn=cn.earliestReference(),cn!=null&&cn.syncTime!=null&&(this.lowestSyncTime_=Math.min(this.lowestSyncTime_,cn.syncTime))}}if(sn=this.lowestSyncTime_,sn!=1/0)for(shaka.log.debug("Syncing HLS streams against base time:",sn),cn=$jscomp.makeIterator(this.uriToStreamInfosMap_.values()),ln=cn.next();!ln.done;ln=cn.next()){ln=ln.value;var dn=ln.stream.segmentIndex;if(dn!=null){var pn=dn.earliestReference();if(pn.syncTime==null)shaka.log.alwaysError("Missing EXT-X-PROGRAM-DATE-TIME for stream",ln.verbatimMediaPlaylistUri,"Expect AV sync issues!");else for(this.offsetStreamInfo_(ln,pn.syncTime-sn-pn.startTime),ln=$jscomp.makeIterator(dn),dn=ln.next();!dn.done;dn=ln.next())dn.value.syncAgainst(sn)}}},shaka.hls.HlsParser.prototype.offsetStreamInfo_=function(sn,ln){sn.maxTimestamp+=ln,goog.asserts.assert(0<=sn.maxTimestamp,"Negative maxTimestamp after adjustment!");for(var cn=this.getMediaSequenceToStartTimeFor_(sn),dn=$jscomp.makeIterator(cn),pn=dn.next();!pn.done;pn=dn.next()){var vn=$jscomp.makeIterator(pn.value);pn=vn.next().value,vn=vn.next().value,cn.set(pn,vn+ln)}shaka.log.debug("Offset",ln,"applied to",sn.verbatimMediaPlaylistUri)},shaka.hls.HlsParser.prototype.parseManifest_=function(sn,ln){var cn=this,dn,pn,vn,kn,Sn,wn,Pn,Nn,Ln,Fn,zn,Dn,Kn,qn,Zn,Yn,Jn,rs,ss,as,ds,Es,Ss,Qn,ms,Ts,Rs,ys,_s,js,bs,ks,xs,Ks;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Vs){switch(Vs.nextAddress){case 1:if(dn=shaka.hls.HlsParser,pn=shaka.hls.Utils,goog.asserts.assert(cn.masterPlaylistUri_,"Master playlist URI must be set before calling parseManifest_!"),vn=cn.manifestTextParser_.parsePlaylist(sn,cn.masterPlaylistUri_),kn=pn.filterTagsByName(vn.tags,"EXT-X-DEFINE"),cn.parseMasterVariables_(kn),Sn=[],wn=[],Pn=[],vn.type==shaka.hls.PlaylistType.MEDIA)return Es=cn.config_.hls.mediaPlaylistFullMimeType,vn.segments.length&&(Ss=new goog.Uri(vn.segments[0].absoluteUri),Qn=Ss.getPath().split(".").pop(),(ms=dn.RAW_FORMATS_TO_MIME_TYPES_[Qn])?Es=ms:Qn!=="ts"&&Qn!=="mp4"&&(dn.AUDIO_EXTENSIONS_TO_MIME_TYPES_[Qn]?(ms=dn.AUDIO_EXTENSIONS_TO_MIME_TYPES_[Qn],Ts=cn.config_.hls.defaultAudioCodec,Es=ms+'; codecs="'+Ts+'"'):dn.VIDEO_EXTENSIONS_TO_MIME_TYPES_[Qn]&&(ms=dn.VIDEO_EXTENSIONS_TO_MIME_TYPES_[Qn],Rs=cn.config_.hls.defaultVideoCodec,Es=ms+'; codecs="'+Rs+'"'))),ys=shaka.util.MimeUtils.getBasicType(Es),_s=ys.split("/")[0],js=shaka.util.MimeUtils.getCodecs(Es),bs=new Map,Vs.yield(cn.convertParsedPlaylistIntoStreamInfo_(vn,ln,ln,js,_s,"",!0,"Media Playlist",null,bs,null,!1,!1,ys),5);for(Nn=pn.filterTagsByName(vn.tags,"EXT-X-MEDIA"),Ln=pn.filterTagsByName(vn.tags,"EXT-X-STREAM-INF"),Fn=pn.filterTagsByName(vn.tags,"EXT-X-IMAGE-STREAM-INF"),zn=pn.filterTagsByName(vn.tags,"EXT-X-SESSION-KEY"),cn.parseCodecs_(Ln),Dn=pn.filterTagsByName(vn.tags,"EXT-X-SESSION-DATA"),Kn=$jscomp.makeIterator(Dn),qn=Kn.next();!qn.done;qn=Kn.next())Zn=qn.value,Yn=Zn.getAttributeValue("DATA-ID"),Jn=Zn.getAttributeValue("URI"),rs=Zn.getAttributeValue("LANGUAGE"),ss=Zn.getAttributeValue("VALUE"),as=new Map().set("id",Yn),Jn&&as.set("uri",shaka.hls.Utils.constructAbsoluteUri(cn.masterPlaylistUri_,Jn)),rs&&as.set("language",rs),ss&&as.set("value",ss),ds=new shaka.util.FakeEvent("sessiondata",as),cn.playerInterface_&&cn.playerInterface_.onEvent(ds);return cn.createStreamInfosFromMediaTags_(Nn),cn.parseClosedCaptions_(Nn),Sn=cn.createVariantsForTags_(Ln,zn),wn=cn.parseTexts_(Nn),Vs.yield(cn.parseImages_(Fn),4);case 4:Pn=Vs.yieldResult,Vs.jumpTo(3);break;case 5:ks=Vs.yieldResult,cn.uriToStreamInfosMap_.set(ln,ks),Sn.push({id:0,language:"und",disabledUntilTime:0,primary:!0,audio:_s=="audio"?ks.stream:null,video:_s=="video"?ks.stream:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!cn.playerInterface_)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.PLAYER,shaka.util.Error.Code.OPERATION_ABORTED);goog.asserts.assert(cn.presentationTimeline_==null,"Presentation timeline created early!"),cn.presentationTimeline_=new shaka.media.PresentationTimeline(null,0),cn.presentationTimeline_.setStatic(!0),vn.type==shaka.hls.PlaylistType.MEDIA&&(cn.isLive_()&&(cn.changePresentationTimelineToLive_(),xs=cn.updatePlaylistDelay_,cn.updatePlaylistTimer_.tickAfter(xs)),Ks=Array.from(cn.uriToStreamInfosMap_.values()),cn.finalizeStreams_(Ks),cn.determineDuration_()),cn.manifest_={presentationTimeline:cn.presentationTimeline_,variants:Sn,textStreams:wn,imageStreams:Pn,offlineSessionIds:[],minBufferTime:0,sequenceMode:!0},cn.playerInterface_.makeTextStreamsForClosedCaptions(cn.manifest_),Vs.jumpToEnd()}})},shaka.hls.HlsParser.prototype.determineDuration_=function(){if(goog.asserts.assert(this.presentationTimeline_,"Presentation timeline not created!"),this.isLive_()){if(this.updatePlaylistDelay_=this.minTargetDuration_,this.presentationType_==shaka.hls.HlsParser.PresentationType_.LIVE){var sn=this.getMinDuration_();this.config_.hls.useSafariBehaviorForLive&&(sn=this.presentationTimeline_.getDelay()),isNaN(this.config_.availabilityWindowOverride)||(sn=this.config_.availabilityWindowOverride),this.presentationTimeline_.setSegmentAvailabilityDuration(sn)}}else this.presentationTimeline_.setDuration(this.getMinDuration_());this.presentationTimeline_.lockStartTime(),goog.asserts.assert(!this.presentationTimeline_.usingPresentationStartTime(),"We should not be using the presentation start time in HLS!")},shaka.hls.HlsParser.prototype.parseMasterVariables_=function(sn){sn=$jscomp.makeIterator(sn);for(var ln=sn.next();!ln.done;ln=sn.next()){var cn=ln.value;ln=cn.getAttributeValue("NAME"),cn=cn.getAttributeValue("VALUE"),ln&&cn&&(this.globalVariables_.has(ln)||this.globalVariables_.set(ln,cn))}},shaka.hls.HlsParser.prototype.parseMediaVariables_=function(sn){var ln=new Map;sn=$jscomp.makeIterator(sn);for(var cn=sn.next();!cn.done;cn=sn.next()){var dn=cn.value;cn=dn.getAttributeValue("NAME");var pn=dn.getAttributeValue("VALUE");dn=dn.getAttributeValue("IMPORT"),cn&&pn&&ln.set(cn,pn),dn&&(cn=this.globalVariables_.get(dn))&&ln.set(dn,cn)}return ln},shaka.hls.HlsParser.prototype.parseCodecs_=function(sn){var ln=shaka.util.ManifestParserUtils.ContentType;sn=$jscomp.makeIterator(sn);for(var cn=sn.next();!cn.done;cn=sn.next()){var dn=cn.value,pn=dn.getAttributeValue("AUDIO");cn=dn.getAttributeValue("VIDEO");var vn=dn.getAttributeValue("SUBTITLES");if(dn=this.getCodecsForVariantTag_(dn),vn){var kn=shaka.util.ManifestParserUtils.guessCodecsSafe(ln.TEXT,dn);goog.asserts.assert(kn!=null,"Text codecs should be valid."),this.groupIdToCodecsMap_.set(vn,kn),shaka.util.ArrayUtils.remove(dn,kn)}pn&&(vn=shaka.util.ManifestParserUtils.guessCodecsSafe(ln.AUDIO,dn),vn||(vn=this.config_.hls.defaultAudioCodec),this.groupIdToCodecsMap_.set(pn,vn)),cn&&(pn=shaka.util.ManifestParserUtils.guessCodecsSafe(ln.VIDEO,dn),pn||(pn=this.config_.hls.defaultVideoCodec),this.groupIdToCodecsMap_.set(cn,pn))}},shaka.hls.HlsParser.prototype.parseTexts_=function(sn){var ln=this,cn=shaka.hls.Utils.filterTagsByType(sn,"SUBTITLES");sn=cn.map(function(Sn){if(ln.config_.disableText)return null;try{return ln.createStreamInfoFromMediaTag_(Sn).stream}catch(wn){if(ln.config_.hls.ignoreTextStreamFailures)return null;throw wn}});var dn=shaka.util.ManifestParserUtils.ContentType.TEXT;cn=$jscomp.makeIterator(cn);for(var pn=cn.next();!pn.done;pn=cn.next()){var vn=pn.value.getRequiredAttrValue("GROUP-ID");if((pn=this.groupIdToCodecsMap_.get(vn))&&(vn=this.groupIdToStreamInfosMap_.get(vn))){vn=$jscomp.makeIterator(vn);for(var kn=vn.next();!kn.done;kn=vn.next())kn=kn.value,kn.stream.codecs=pn,kn.stream.mimeType=this.guessMimeTypeBeforeLoading_(dn,pn)||this.guessMimeTypeFallback_(dn)}}return sn.filter(function(Sn){return Sn})},shaka.hls.HlsParser.prototype.parseImages_=function(sn){var ln=this,cn,dn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pn){return pn.nextAddress==1?(cn=sn.map(function(vn){var kn,Sn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wn){if(wn.nextAddress==1)return ln.config_.disableThumbnails?wn.return(null):(wn.setCatchFinallyBlocks(2),wn.yield(ln.createStreamInfoFromImageTag_(vn),4));if(wn.nextAddress!=2)return kn=wn.yieldResult,wn.return(kn.stream);if(Sn=wn.enterCatchBlock(),ln.config_.hls.ignoreImageStreamFailures)return wn.return(null);throw Sn})}),pn.yield(Promise.all(cn),2)):(dn=pn.yieldResult,pn.return(dn.filter(function(vn){return vn})))})},shaka.hls.HlsParser.prototype.createStreamInfosFromMediaTags_=function(sn){sn=sn.filter(function(cn){var dn=cn.getAttributeValue("URI")||"";return cn.getAttributeValue("TYPE")!="SUBTITLES"&&dn!=""}),sn=$jscomp.makeIterator(sn);for(var ln=sn.next();!ln.done;ln=sn.next())this.createStreamInfoFromMediaTag_(ln.value)},shaka.hls.HlsParser.prototype.createVariantsForTags_=function(sn,ln){var cn=this,dn=[],pn=new Set;if(0<ln.length){ln=$jscomp.makeIterator(ln);for(var vn=ln.next();!vn.done;vn=ln.next()){vn=vn.value;var kn=vn.getRequiredAttrValue("METHOD");if(kn!="NONE"&&kn!="AES-128"){kn=vn.getAttributeValue("KEYFORMAT")||"identity";var Sn=shaka.hls.HlsParser.KEYFORMATS_TO_DRM_PARSERS_[kn];if(vn=Sn?Sn(vn,""):null){if(vn.keyIds)for(kn=$jscomp.makeIterator(vn.keyIds),Sn=kn.next();!Sn.done;Sn=kn.next())pn.add(Sn.value);dn.push(vn)}else shaka.log.warning("Unsupported HLS KEYFORMAT",kn)}}}return sn=sn.map(function(wn){var Pn=wn.getAttributeValue("FRAME-RATE"),Nn=Number(wn.getAttributeValue("AVERAGE-BANDWIDTH"))||Number(wn.getRequiredAttrValue("BANDWIDTH")),Ln=wn.getAttributeValue("RESOLUTION"),Fn=$jscomp.makeIterator(Ln?Ln.split("x"):[null,null]),zn=Fn.next().value;Fn=Fn.next().value;var Dn=wn.getAttributeValue("VIDEO-RANGE");return wn=cn.createStreamInfosForVariantTag_(wn,Ln,Pn),goog.asserts.assert(wn.audio.length||wn.video.length,"We should have created a stream!"),cn.createVariants_(wn.audio,wn.video,Nn,zn,Fn,Pn,Dn,dn,pn)}).reduce(shaka.util.Functional.collapseArrays,[]),sn=sn.filter(function(wn){return wn!=null})},shaka.hls.HlsParser.prototype.createStreamInfosForVariantTag_=function(sn,ln,cn){cn=shaka.util.ManifestParserUtils.ContentType,ln=this.getCodecsForVariantTag_(sn);var dn=sn.getAttributeValue("AUDIO"),pn=sn.getAttributeValue("VIDEO");goog.asserts.assert(dn==null||pn==null,"Unexpected: both video and audio described by media tags!");var vn=dn||pn;vn=vn&&this.groupIdToStreamInfosMap_.has(vn)?this.groupIdToStreamInfosMap_.get(vn):[],dn={audio:dn?vn:[],video:pn?vn:[]},shaka.log.debug("Guessing stream type for",sn.toString()),pn=!1;var kn=sn.getRequiredAttrValue("URI"),Sn=dn.audio.find(function(Nn){return Nn&&Nn.verbatimMediaPlaylistUri==kn}),wn=shaka.util.ManifestParserUtils.guessCodecsSafe(cn.VIDEO,ln),Pn=shaka.util.ManifestParserUtils.guessCodecsSafe(cn.AUDIO,ln);return Pn&&!wn?(cn=cn.AUDIO,shaka.log.debug("Guessing audio-only.")):!vn.length&&Pn&&wn?(shaka.log.debug("Guessing multiplexed audio+video."),cn=cn.VIDEO,ln=[[wn,Pn].join()]):dn.audio.length&&Sn?(shaka.log.debug("Guessing audio-only."),cn=cn.AUDIO,pn=!0):dn.video.length&&!dn.audio.length?(shaka.log.debug("Guessing audio-only."),cn=cn.AUDIO):(shaka.log.debug("Guessing video-only."),cn=cn.VIDEO),pn||(sn=this.createStreamInfoFromVariantTag_(sn,ln,cn),dn[sn.stream.type]=[sn]),dn},shaka.hls.HlsParser.prototype.getCodecsForVariantTag_=function(sn){var ln=[];this.config_.disableVideo||ln.push(this.config_.hls.defaultVideoCodec),this.config_.disableAudio||ln.push(this.config_.hls.defaultAudioCodec),ln=ln.join(",");var cn=sn.getAttributeValue("CODECS",ln).split(/\s*,\s*/);sn=new Set,ln=[],cn=$jscomp.makeIterator(cn);for(var dn=cn.next();!dn.done;dn=cn.next()){dn=dn.value;var pn=shaka.util.MimeUtils.getCodecBase(dn);sn.has(pn)?shaka.log.debug("Ignoring duplicate codec"):(ln.push(dn),sn.add(pn))}return ln},shaka.hls.HlsParser.prototype.getChannelsCount_=function(sn){return sn=sn.getAttributeValue("CHANNELS"),sn?(sn=sn.split("/")[0],parseInt(sn,10)):null},shaka.hls.HlsParser.prototype.isSpatialAudio_=function(sn){return(sn=sn.getAttributeValue("CHANNELS"))?sn.includes("/JOC"):!1},shaka.hls.HlsParser.prototype.getClosedCaptions_=function(sn,ln){var cn=shaka.util.ManifestParserUtils.ContentType;return sn=sn.getAttributeValue("CLOSED-CAPTIONS"),ln==cn.VIDEO&&sn&&sn!="NONE"?this.groupIdToClosedCaptionsMap_.get(sn):null},shaka.hls.HlsParser.prototype.getLanguage_=function(sn){var ln=shaka.util.LanguageUtils;return sn=sn.getAttributeValue("LANGUAGE")||"und",ln.normalize(sn)},shaka.hls.HlsParser.prototype.getType_=function(sn){return sn=sn.getRequiredAttrValue("TYPE").toLowerCase(),sn=="subtitles"&&(sn=shaka.util.ManifestParserUtils.ContentType.TEXT),sn},shaka.hls.HlsParser.prototype.createVariants_=function(sn,ln,cn,dn,pn,vn,kn,Sn,wn){for(var Pn=shaka.util.ManifestParserUtils.ContentType,Nn=shaka.media.DrmEngine,Ln=$jscomp.makeIterator(ln),Fn=Ln.next();!Fn.done;Fn=Ln.next())this.addVideoAttributes_(Fn.value.stream,dn,pn,vn,kn);for(dn=this.config_.disableAudio,(!sn.length||dn)&&(sn=[null]),dn=this.config_.disableVideo,(!ln.length||dn)&&(ln=[null]),dn=[],sn=$jscomp.makeIterator(sn),pn=sn.next();!pn.done;pn=sn.next())for(pn=pn.value,vn=$jscomp.makeIterator(ln),kn=vn.next();!kn.done;kn=vn.next()){var zn=kn.value;(kn=pn?pn.stream:null)&&(kn.drmInfos=Sn,kn.keyIds=wn),(Ln=zn?zn.stream:null)&&(Ln.drmInfos=Sn,Ln.keyIds=wn),Fn=pn?pn.stream.drmInfos:null;var Dn=zn?zn.stream.drmInfos:null;zn=(zn?zn.verbatimMediaPlaylistUri:"")+" - "+(pn?pn.verbatimMediaPlaylistUri:""),kn&&Ln&&!Nn.areDrmCompatible(Fn,Dn)?shaka.log.warning("Incompatible DRM info in HLS variant.  Skipping."):this.variantUriSet_.has(zn)?shaka.log.debug("Skipping variant which only differs in text streams."):(goog.asserts.assert(!kn||kn.type==Pn.AUDIO,"Audio parameter mismatch!"),goog.asserts.assert(!Ln||Ln.type==Pn.VIDEO,"Video parameter mismatch!"),kn={id:this.globalId_++,language:kn?kn.language:"und",primary:!!kn&&kn.primary||!!Ln&&Ln.primary,audio:kn,video:Ln,bandwidth:cn,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},dn.push(kn),this.variantUriSet_.add(zn))}return dn},shaka.hls.HlsParser.prototype.parseClosedCaptions_=function(sn){sn=shaka.hls.Utils.filterTagsByType(sn,"CLOSED-CAPTIONS"),sn=$jscomp.makeIterator(sn);for(var ln=sn.next();!ln.done;ln=sn.next()){var cn=ln.value;goog.asserts.assert(cn.name=="EXT-X-MEDIA","Should only be called on media tags!"),ln=this.getLanguage_(cn);var dn=cn.getRequiredAttrValue("GROUP-ID");cn=cn.getRequiredAttrValue("INSTREAM-ID"),this.groupIdToClosedCaptionsMap_.get(dn)||this.groupIdToClosedCaptionsMap_.set(dn,new Map),this.groupIdToClosedCaptionsMap_.get(dn).set(cn,ln)}},shaka.hls.HlsParser.prototype.createStreamInfoFromMediaTag_=function(sn){goog.asserts.assert(sn.name=="EXT-X-MEDIA","Should only be called on media tags!");var ln=sn.getRequiredAttrValue("GROUP-ID"),cn="",dn=this.getType_(sn);dn==shaka.util.ManifestParserUtils.ContentType.TEXT?cn=sn.getAttributeValue("CODECS")||"":ln&&this.groupIdToCodecsMap_.has(ln)&&(cn=this.groupIdToCodecsMap_.get(ln));var pn=this.variableSubstitution_(sn.getRequiredAttrValue("URI"),this.globalVariables_);if(this.uriToStreamInfosMap_.has(pn))return this.uriToStreamInfosMap_.get(pn);var vn=this.getLanguage_(sn),kn=sn.getAttributeValue("NAME"),Sn=sn.getAttributeValue("DEFAULT")=="YES",wn=dn=="audio"?this.getChannelsCount_(sn):null,Pn=dn=="audio"?this.isSpatialAudio_(sn):!1,Nn=sn.getAttributeValue("CHARACTERISTICS");return sn=sn.getAttributeValue("FORCED"),cn=this.createStreamInfo_(pn,cn,dn,vn,Sn,kn,wn,null,Nn,sn=="YES",Pn),this.groupIdToStreamInfosMap_.has(ln)?this.groupIdToStreamInfosMap_.get(ln).push(cn):this.groupIdToStreamInfosMap_.set(ln,[cn]),this.uriToStreamInfosMap_.has(pn)?this.uriToStreamInfosMap_.get(pn):(this.uriToStreamInfosMap_.set(pn,cn),cn)},shaka.hls.HlsParser.prototype.createStreamInfoFromImageTag_=function(sn){var ln=this,cn,dn,pn,vn,kn,Sn,wn,Pn,Nn,Ln,Fn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(zn){return zn.nextAddress==1?(goog.asserts.assert(sn.name=="EXT-X-IMAGE-STREAM-INF","Should only be called on image tags!"),cn=shaka.util.ManifestParserUtils.ContentType.IMAGE,dn=ln.variableSubstitution_(sn.getRequiredAttrValue("URI"),ln.globalVariables_),pn=sn.getAttributeValue("CODECS","jpeg")||"",ln.uriToStreamInfosMap_.has(dn)?zn.return(ln.uriToStreamInfosMap_.get(dn)):(vn=ln.getLanguage_(sn),kn=sn.getAttributeValue("NAME"),Sn=sn.getAttributeValue("CHARACTERISTICS"),wn=ln.createStreamInfo_(dn,pn,cn,vn,!1,kn,null,null,Sn,!1,!1),ln.uriToStreamInfosMap_.has(dn)?zn.return(ln.uriToStreamInfosMap_.get(dn)):(Pn=sn.getAttributeValue("RESOLUTION"))?zn.yield(wn.stream.createSegmentIndex(),3):zn.jumpTo(2))):(zn.nextAddress!=2&&(Nn=wn.stream.segmentIndex.get(0),Ln=Nn.getTilesLayout())&&(wn.stream.width=Number(Pn.split("x")[0])*Number(Ln.split("x")[0]),wn.stream.height=Number(Pn.split("x")[1])*Number(Ln.split("x")[1])),(Fn=sn.getAttributeValue("BANDWIDTH"))&&(wn.stream.bandwidth=Number(Fn)),ln.uriToStreamInfosMap_.set(dn,wn),zn.return(wn))})},shaka.hls.HlsParser.prototype.createStreamInfoFromVariantTag_=function(sn,ln,cn){goog.asserts.assert(sn.name=="EXT-X-STREAM-INF","Should only be called on variant tags!");var dn=this.variableSubstitution_(sn.getRequiredAttrValue("URI"),this.globalVariables_);return this.uriToStreamInfosMap_.has(dn)?this.uriToStreamInfosMap_.get(dn):(sn=this.getClosedCaptions_(sn,cn),ln=shaka.util.ManifestParserUtils.guessCodecs(cn,ln),cn=this.createStreamInfo_(dn,ln,cn,"und",!1,null,null,sn,null,!1,!1),this.uriToStreamInfosMap_.has(dn)?this.uriToStreamInfosMap_.get(dn):(this.uriToStreamInfosMap_.set(dn,cn),cn))},shaka.hls.HlsParser.prototype.createStreamInfo_=function(sn,ln,cn,dn,pn,vn,kn,Sn,wn,Pn,Nn){var Ln=this,Fn=shaka.hls.Utils.constructAbsoluteUri(this.masterPlaylistUri_,sn),zn=this.makeStreamObject_(ln,cn,dn,pn,vn,kn,Sn,wn,Pn,Nn);shaka.media.MediaSourceEngine.RAW_FORMATS.includes(zn.mimeType)&&(zn.codecs="");var Dn={stream:zn,type:cn,verbatimMediaPlaylistUri:sn,absoluteMediaPlaylistUri:Fn,maxTimestamp:0,mediaSequenceToStartTime:new Map,canSkipSegments:!1,hasEndList:!1,firstSequenceNumber:-1,loadedOnce:!1},Kn=function(Yn){var Jn,rs,ss,as,ds,Es,Ss,Qn,ms,Ts,Rs,ys,_s,js;return $jscomp.asyncExecutePromiseGeneratorProgram(function(bs){if(bs.nextAddress==1)return bs.yield(Ln.requestManifest_(Dn.absoluteMediaPlaylistUri),2);if(bs.nextAddress!=3)return Jn=bs.yieldResult,Yn.aborted?bs.return():(rs=Jn.uri,ss=Ln.manifestTextParser_.parsePlaylist(Jn.data,rs),as=Ln.isLive_(),bs.yield(Ln.convertParsedPlaylistIntoStreamInfo_(ss,sn,rs,ln,cn,dn,pn,vn,kn,Sn,wn,Pn,Nn),3));if(ds=bs.yieldResult,Yn.aborted)return bs.return();if(Es=ds.stream,Ln.isLive_()&&!as&&Ln.changePresentationTimelineToLive_(),Dn.absoluteMediaPlaylistUri=rs,Dn.maxTimestamp=ds.maxTimestamp,Dn.canSkipSegments=ds.canSkipSegments,Dn.hasEndList=ds.hasEndList,Dn.mediaSequenceToStartTime=ds.mediaSequenceToStartTime,Dn.loadedOnce=!0,zn.segmentIndex=Es.segmentIndex,zn.encrypted=Es.encrypted,zn.drmInfos=Es.drmInfos,zn.keyIds=Es.keyIds,zn.mimeType=Es.mimeType,shaka.media.MediaSourceEngine.RAW_FORMATS.includes(zn.mimeType)&&(zn.codecs=""),zn.drmInfos.length&&Ln.playerInterface_.newDrmInfo(zn),Ss=shaka.util.ManifestParserUtils.ContentType,cn==Ss.VIDEO||cn==Ss.AUDIO)for(Qn=$jscomp.makeIterator(Ln.uriToStreamInfosMap_.values()),ms=Qn.next();!ms.done;ms=Qn.next())Ts=ms.value,Ts.loadedOnce||Ts.type!=cn||(Ts.stream.mimeType=Es.mimeType,shaka.media.MediaSourceEngine.RAW_FORMATS.includes(Ts.stream.mimeType)&&(Ts.stream.codecs=""));cn==Ss.TEXT&&(Rs=Es.segmentIndex.get(0))&&Rs.initSegmentReference&&(zn.mimeType="application/mp4"),Ln.hasEnoughInfoToFinalizeStreams_()&&(Ln.streamsFinalized_?Ln.finalizeStreams_([Dn]):(Ln.streamsFinalized_=!0,ys=Array.from(Ln.uriToStreamInfosMap_.values()),_s=ys.filter(function(ks){return ks.stream.segmentIndex}),Ln.finalizeStreams_(_s),Ln.determineDuration_(),js=Ln.updatePlaylistDelay_,0<js&&Ln.updatePlaylistTimer_.tickAfter(js))),bs.jumpToEnd()})},qn=null,Zn=new AbortController;return zn.createSegmentIndex=function(){return qn||(Zn=new AbortController,qn=new Promise(function(Yn){Yn(Kn(Zn.signal))}))},zn.closeSegmentIndex=function(){qn&&!zn.segmentIndex&&Zn.abort(),zn.segmentIndex&&(zn.segmentIndex.release(),zn.segmentIndex=null),qn=null},Dn},shaka.hls.HlsParser.prototype.getMinDuration_=function(){for(var sn=1/0,ln=$jscomp.makeIterator(this.uriToStreamInfosMap_.values()),cn=ln.next();!cn.done;cn=ln.next())cn=cn.value,cn.stream.segmentIndex&&cn.stream.type!="text"&&(sn=Math.min(sn,cn.maxTimestamp));return sn},shaka.hls.HlsParser.prototype.notifySegmentsForStreams_=function(sn){var ln=[];sn=$jscomp.makeIterator(sn);for(var cn=sn.next();!cn.done;cn=sn.next())cn=cn.value,cn.segmentIndex&&cn.segmentIndex.forEachTopLevelReference(function(dn){ln.push(dn)});this.presentationTimeline_.notifySegments(ln)},shaka.hls.HlsParser.prototype.finalizeStreams_=function(sn){if(!this.isLive_())for(var ln=this.getMinDuration_(),cn=$jscomp.makeIterator(sn),dn=cn.next();!dn.done;dn=cn.next())dn.value.stream.segmentIndex.fit(0,ln);for(ln=$jscomp.makeIterator(sn),dn=ln.next();!dn.done;dn=ln.next())dn=dn.value.stream,shaka.media.MediaSourceEngine.RAW_FORMATS.includes(dn.mimeType)&&(dn.codecs="");this.notifySegmentsForStreams_(sn.map(function(pn){return pn.stream})),this.config_.hls.ignoreManifestProgramDateTime?this.syncStreamsWithSequenceNumber_(sn):this.syncStreamsWithProgramDateTime_(sn)},shaka.hls.HlsParser.prototype.hasEnoughInfoToFinalizeStreams_=function(){if(!this.manifest_)return!1;for(var sn=[],ln=[],cn=$jscomp.makeIterator(this.manifest_.variants),dn=cn.next();!dn.done;dn=cn.next())dn=dn.value,dn.video&&sn.push(dn.video),dn.audio&&ln.push(dn.audio);return!(0<sn.length&&!sn.some(function(pn){return pn.segmentIndex})||0<ln.length&&!ln.some(function(pn){return pn.segmentIndex}))},shaka.hls.HlsParser.prototype.convertParsedPlaylistIntoStreamInfo_=function(sn,ln,cn,dn,pn,vn,kn,Sn,wn,Pn,Nn,Ln,Fn,zn){var Dn=this,Kn,qn,Zn,Yn,Jn,rs,ss,as,ds,Es,Ss,Qn,ms,Ts,Rs;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ys){if(ys.nextAddress==1){if(sn.type!=shaka.hls.PlaylistType.MEDIA)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_INVALID_PLAYLIST_HIERARCHY);return Kn=shaka.hls.Utils.filterTagsByName(sn.tags,"EXT-X-DEFINE"),qn=Dn.parseMediaVariables_(Kn),goog.asserts.assert(sn.segments!=null,"Media playlist should have segments!"),Dn.determinePresentationType_(sn),zn?ys.jumpTo(2):ys.yield(Dn.guessMimeType_(pn,dn,sn,qn),3)}if(ys.nextAddress!=2&&(zn=ys.yieldResult),Zn=Dn.parseDrmInfo_(sn,zn),Yn=Zn.drmInfos,Jn=Zn.keyIds,rs=Zn.encrypted,ss=Zn.aesEncrypted,rs&&!Yn.length&&!ss)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_KEYFORMATS_NOT_SUPPORTED);return as=Dn.isLive_()?Dn.mediaSequenceToStartTimeByType_.get(pn):new Map,ds=Dn.lowLatencyMode_,Es=Dn.createSegments_(ln,sn,pn,zn,as,qn),ds!=Dn.lowLatencyMode_&&Dn.determinePresentationType_(sn),Ss=Es[Es.length-1].endTime,Qn=new shaka.media.SegmentIndex(Es),Ts=(ms=shaka.hls.Utils.getFirstTagWithName(sn.tags,"EXT-X-SERVER-CONTROL"))?ms.getAttribute("CAN-SKIP-UNTIL")!=null:!1,Rs=Dn.makeStreamObject_(dn,pn,vn,kn,Sn,wn,Pn,Nn,Ln,Fn),Rs.segmentIndex=Qn,Rs.encrypted=rs,Rs.drmInfos=Yn,Rs.keyIds=Jn,Rs.mimeType=zn,ys.return({stream:Rs,type:pn,verbatimMediaPlaylistUri:ln,absoluteMediaPlaylistUri:cn,maxTimestamp:Ss,canSkipSegments:Ts,hasEndList:!1,firstSequenceNumber:-1,mediaSequenceToStartTime:as,loadedOnce:!1})})},shaka.hls.HlsParser.prototype.makeStreamObject_=function(sn,ln,cn,dn,pn,vn,kn,Sn,wn,Pn){var Nn=this.guessMimeTypeBeforeLoading_(ln,sn)||this.guessMimeTypeFallback_(ln);return{id:this.globalId_++,originalId:pn,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:Nn,codecs:sn,kind:ln==shaka.util.ManifestParserUtils.ContentType.TEXT?shaka.util.ManifestParserUtils.TextStreamKind.SUBTITLE:void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:cn,label:pn,type:ln,primary:dn,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:Sn?Sn.split(","):[],forced:wn,channelsCount:vn,audioSamplingRate:null,spatialAudio:Pn,closedCaptions:kn,hdr:void 0,tilesLayout:void 0}},shaka.hls.HlsParser.prototype.parseDrmInfo_=function(sn,ln){var cn=[];if(sn.segments){sn=$jscomp.makeIterator(sn.segments);for(var dn=sn.next();!dn.done;dn=sn.next())dn=shaka.hls.Utils.filterTagsByName(dn.value.tags,"EXT-X-KEY"),cn.push.apply(cn,$jscomp.arrayFromIterable(dn))}dn=sn=!1;var pn=[],vn=new Set;cn=$jscomp.makeIterator(cn);for(var kn=cn.next();!kn.done;kn=cn.next()){kn=kn.value;var Sn=kn.getRequiredAttrValue("METHOD");if(Sn!="NONE")if(sn=!0,Sn=="AES-128")dn=!0;else{Sn=kn.getAttributeValue("KEYFORMAT")||"identity";var wn=shaka.hls.HlsParser.KEYFORMATS_TO_DRM_PARSERS_[Sn];if(kn=wn?wn(kn,ln):null){if(kn.keyIds)for(Sn=$jscomp.makeIterator(kn.keyIds),wn=Sn.next();!wn.done;wn=Sn.next())vn.add(wn.value);pn.push(kn)}else shaka.log.warning("Unsupported HLS KEYFORMAT",Sn)}}return{drmInfos:pn,keyIds:vn,encrypted:sn,aesEncrypted:dn}},shaka.hls.HlsParser.prototype.parseAES128DrmTag_=function(sn,ln){var cn=this;if(!window.crypto||!window.crypto.subtle)throw shaka.log.alwaysWarn("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.NO_WEB_CRYPTO_API);var dn=0,pn=sn.getAttributeValue("IV","");if(pn){var vn=shaka.util.Uint8ArrayUtils.fromHex(pn.substr(2));if(vn.byteLength!=16)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_AES_128_INVALID_IV_LENGTH)}else dn=shaka.hls.Utils.getFirstTagWithNameAsNumber(ln.tags,"EXT-X-MEDIA-SEQUENCE",0);sn=shaka.hls.Utils.constructAbsoluteUri(ln.absoluteUri,sn.getRequiredAttrValue("URI"));var kn=shaka.net.NetworkingEngine.RequestType.KEY,Sn=shaka.net.NetworkingEngine.makeRequest([sn],this.config_.retryParameters),wn={method:"AES-128",iv:vn,firstMediaSequenceNumber:dn,fetchKey:function(){var Pn,Nn,Ln;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fn){if(Fn.nextAddress==1)return Fn.yield(cn.makeNetworkRequest_(Sn,kn),2);if(Fn.nextAddress!=3){if(Pn=Fn.yieldResult,!Pn.data||Pn.data.byteLength!=16)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_AES_128_INVALID_KEY_LENGTH);return Nn={name:"AES-CBC"},Ln=wn,Fn.yield(window.crypto.subtle.importKey("raw",Pn.data,Nn,!0,["decrypt"]),3)}Ln.cryptoKey=Fn.yieldResult,wn.fetchKey=void 0,Fn.jumpToEnd()})}};return wn},shaka.hls.HlsParser.prototype.determinePresentationType_=function(sn){var ln=shaka.hls.HlsParser.PresentationType_,cn=shaka.hls.Utils.getFirstTagWithName(sn.tags,"EXT-X-PLAYLIST-TYPE"),dn=shaka.hls.Utils.getFirstTagWithName(sn.tags,"EXT-X-ENDLIST");dn=cn&&cn.value=="VOD"||dn,cn=cn&&cn.value=="EVENT"&&!dn,cn=!dn&&!cn,dn?this.setPresentationType_(ln.VOD):(cn?this.setPresentationType_(ln.LIVE):this.setPresentationType_(ln.EVENT),ln=this.getRequiredTag_(sn.tags,"EXT-X-TARGETDURATION"),ln=Number(ln.value),dn=shaka.hls.Utils.getFirstTagWithName(sn.tags,"EXT-X-PART-INF"),this.lowLatencyMode_&&dn?(this.partialTargetDuration_=Number(dn.getRequiredAttrValue("PART-TARGET")),this.minTargetDuration_=Math.min(this.partialTargetDuration_,this.minTargetDuration_),this.lowLatencyPresentationDelay_=(sn=shaka.hls.Utils.getFirstTagWithName(sn.tags,"EXT-X-SERVER-CONTROL"))?Number(sn.getRequiredAttrValue("PART-HOLD-BACK")):0):this.minTargetDuration_=Math.min(ln,this.minTargetDuration_),this.maxTargetDuration_=Math.max(ln,this.maxTargetDuration_))},shaka.hls.HlsParser.prototype.changePresentationTimelineToLive_=function(){var sn=this.config_.defaultPresentationDelay?this.config_.defaultPresentationDelay:this.lowLatencyPresentationDelay_?this.lowLatencyPresentationDelay_:this.maxTargetDuration_*this.config_.hls.liveSegmentsDelay;this.presentationTimeline_.setPresentationStartTime(0),this.presentationTimeline_.setDelay(sn),this.presentationTimeline_.setStatic(!1)},shaka.hls.HlsParser.prototype.getInitSegmentReference_=function(sn,ln,cn){if(ln=shaka.hls.Utils.getFirstTagWithName(ln,"EXT-X-MAP"),!ln)return null;var dn=ln.getRequiredAttrValue("URI");return cn=this.variableSubstitution_(shaka.hls.Utils.constructAbsoluteUri(sn,dn),cn),sn=[cn,ln.getAttributeValue("BYTERANGE","")].join("-"),this.mapTagToInitSegmentRefMap_.has(sn)||(ln=this.createInitSegmentReference_(cn,ln),this.mapTagToInitSegmentRefMap_.set(sn,ln)),this.mapTagToInitSegmentRefMap_.get(sn)},shaka.hls.HlsParser.prototype.createInitSegmentReference_=function(sn,ln){var cn=0,dn=null;return(ln=ln.getAttributeValue("BYTERANGE"))&&(cn=ln.split("@"),dn=Number(cn[0]),cn=Number(cn[1]),dn=cn+dn-1),new shaka.media.InitSegmentReference(function(){return[sn]},cn,dn)},shaka.hls.HlsParser.prototype.createSegmentReference_=function(sn,ln,cn,dn,pn,vn,kn,Sn,wn){var Pn=cn.tags,Nn=this.variableSubstitution_(cn.absoluteUri,pn),Ln=shaka.hls.Utils.getFirstTagWithName(Pn,"EXTINF"),Fn=0;pn=0;var zn=null;cn.partialSegments.length&&!this.lowLatencyMode_&&shaka.log.alwaysWarn("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.");var Dn=null;if(!this.config_.hls.ignoreManifestProgramDateTime){var Kn=shaka.hls.Utils.getFirstTagWithName(Pn,"EXT-X-PROGRAM-DATE-TIME");Kn&&Kn.value&&(Dn=shaka.util.XmlUtils.parseDate(Kn.value),goog.asserts.assert(Dn!=null,"EXT-X-PROGRAM-DATE-TIME format not valid"))}if(Kn=shaka.media.SegmentReference.Status.AVAILABLE,shaka.hls.Utils.getFirstTagWithName(Pn,"EXT-X-GAP")&&(Kn=shaka.media.SegmentReference.Status.MISSING),!Ln){if(cn.partialSegments.length==0)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_REQUIRED_TAG_MISSING,"EXTINF");if(!this.lowLatencyMode_)return null}var qn=[];if(this.lowLatencyMode_){Fn={};for(var Zn=0;Zn<cn.partialSegments.length;Fn={$jscomp$loop$prop$pAbsoluteUri$729:Fn.$jscomp$loop$prop$pAbsoluteUri$729},Zn++){var Yn=cn.partialSegments[Zn],Jn=Zn==0?ln:qn[qn.length-1],rs=Zn==0?dn:Jn.endTime,ss=Number(Yn.getAttributeValue("DURATION"))||this.partialTargetDuration_;if(ss){ss=rs+ss;var as=0,ds=null;Yn.name=="EXT-X-PRELOAD-HINT"?as=(as=Yn.getAttributeValue("BYTERANGE-START"))?Number(as):0:(as=Yn.getAttributeValue("BYTERANGE"),ds=$jscomp.makeIterator(this.parseByteRange_(Jn,as)),as=ds.next().value,ds=ds.next().value),(Jn=Yn.getAttributeValue("URI"))&&(Fn.$jscomp$loop$prop$pAbsoluteUri$729=shaka.hls.Utils.constructAbsoluteUri(vn,Jn),Jn=shaka.media.SegmentReference.Status.AVAILABLE,Yn.getAttributeValue("GAP")=="YES"&&(Jn=shaka.media.SegmentReference.Status.MISSING),Yn=new shaka.media.SegmentReference(rs,ss,function(Es){return function(){return[Es.$jscomp$loop$prop$pAbsoluteUri$729]}}(Fn),as,ds,sn,0,0,1/0,[],"",null,null,Jn),qn.push(Yn))}}}return Ln?(cn=Ln.value.split(","),Fn=dn+Number(cn[0])):Fn=qn[qn.length-1].endTime,(cn=shaka.hls.Utils.getFirstTagWithName(Pn,"EXT-X-BYTERANGE"))?(zn=$jscomp.makeIterator(this.parseByteRange_(ln,cn.value)),pn=zn.next().value,zn=zn.next().value):qn.length&&(pn=qn[0].startByte,zn=qn[qn.length-1].endByte),ln="",cn=null,kn==shaka.util.ManifestParserUtils.ContentType.IMAGE&&(ln="1x1",kn=shaka.hls.Utils.getFirstTagWithName(Pn,"EXT-X-TILES"))&&(ln=kn.getRequiredAttrValue("LAYOUT"),(kn=kn.getAttributeValue("DURATION"))&&(cn=Number(kn))),new shaka.media.SegmentReference(dn,Fn,function(){return Nn.length?[Nn]:[]},pn,zn,sn,Sn,0,1/0,qn,ln,cn,Dn,Kn,wn)},shaka.hls.HlsParser.prototype.parseByteRange_=function(sn,ln){var cn=0,dn=null;return ln&&(cn=ln.split("@"),ln=Number(cn[0]),cn[1]?cn=Number(cn[1]):(goog.asserts.assert(sn,"Cannot refer back to previous HLS segment!"),cn=sn.endByte+1),dn=cn+ln-1),[cn,dn]},shaka.hls.HlsParser.prototype.createSegments_=function(sn,ln,cn,dn,pn,vn){sn=ln.segments,goog.asserts.assert(sn.length,"Playlist should have segments!"),dn=void 0;var kn=shaka.hls.Utils.getFirstTagWithNameAsNumber(ln.tags,"EXT-X-DISCONTINUITY-SEQUENCE",0),Sn=shaka.hls.Utils.getFirstTagWithNameAsNumber(ln.tags,"EXT-X-MEDIA-SEQUENCE",0),wn=shaka.hls.Utils.getFirstTagWithName(ln.tags,"EXT-X-SKIP");wn=wn?Number(wn.getAttributeValue("SKIPPED-SEGMENTS")):0;var Pn=Sn+wn,Nn=0;this.isLive_()&&pn.has(Pn)&&(Nn=pn.get(Pn));for(var Ln=[],Fn=null,zn=Nn,Dn=0;Dn<sn.length;Dn++){var Kn=sn[Dn],qn=Dn==0?Nn:Fn.endTime;Pn=Sn+wn+Dn,shaka.hls.Utils.getFirstTagWithName(Kn.tags,"EXT-X-DISCONTINUITY")&&(kn++,zn=qn);for(var Zn=$jscomp.makeIterator(Kn.tags),Yn=Zn.next();!Yn.done;Yn=Zn.next())Yn=Yn.value,Yn.name=="EXT-X-KEY"&&(dn=Yn.getRequiredAttrValue("METHOD")=="AES-128"?this.parseAES128DrmTag_(Yn,ln):void 0);pn.set(Pn,qn),Zn=this.getInitSegmentReference_(ln.absoluteUri,Kn.tags,vn),!this.lowLatencyMode_&&this.playerInterface_.isAutoLowLatencyMode()&&(this.playerInterface_.enableLowLatencyMode(),this.lowLatencyMode_=this.playerInterface_.isLowLatencyMode()),(Fn=Kn=this.createSegmentReference_(Zn,Fn,Kn,qn,vn,ln.absoluteUri,cn,zn,dn))&&(Kn.discontinuitySequence=kn,this.config_.hls.ignoreManifestProgramDateTime&&this.minSequenceNumber_!=null&&Pn<this.minSequenceNumber_||Ln.push(Kn))}if(ln=Ln.some(function(Jn){return Jn.syncTime!=null})){for(cn={},pn=0;pn<Ln.length;cn={$jscomp$loop$prop$forwardI$731:cn.$jscomp$loop$prop$forwardI$731,$jscomp$loop$prop$forwardAdd$732:cn.$jscomp$loop$prop$forwardAdd$732,$jscomp$loop$prop$backwardI$733:cn.$jscomp$loop$prop$backwardI$733,$jscomp$loop$prop$reference$610$734:cn.$jscomp$loop$prop$reference$610$734,$jscomp$loop$prop$backwardAdd$735:cn.$jscomp$loop$prop$backwardAdd$735},pn++)if(cn.$jscomp$loop$prop$reference$610$734=Ln[pn],cn.$jscomp$loop$prop$reference$610$734.syncTime==null)for(cn.$jscomp$loop$prop$forwardAdd$732=0,cn.$jscomp$loop$prop$forwardI$731=pn,vn=function(Jn){return function(){var rs=Ln[Jn.$jscomp$loop$prop$forwardI$731];if(rs){if(rs.syncTime!=null)return rs.syncTime+Jn.$jscomp$loop$prop$forwardAdd$732;Jn.$jscomp$loop$prop$forwardAdd$732-=rs.endTime-rs.startTime,Jn.$jscomp$loop$prop$forwardI$731+=1}return null}}(cn),cn.$jscomp$loop$prop$backwardAdd$735=0,cn.$jscomp$loop$prop$backwardI$733=pn,sn=function(Jn){return function(){var rs=Ln[Jn.$jscomp$loop$prop$backwardI$733];if(rs){if(rs!=Jn.$jscomp$loop$prop$reference$610$734&&(Jn.$jscomp$loop$prop$backwardAdd$735+=rs.endTime-rs.startTime),rs.syncTime!=null)return rs.syncTime+Jn.$jscomp$loop$prop$backwardAdd$735;--Jn.$jscomp$loop$prop$backwardI$733}return null}}(cn);cn.$jscomp$loop$prop$reference$610$734.syncTime==null;)cn.$jscomp$loop$prop$reference$610$734.syncTime=sn(),cn.$jscomp$loop$prop$reference$610$734.syncTime==null&&(cn.$jscomp$loop$prop$reference$610$734.syncTime=vn())}if(ln)for(cn=$jscomp.makeIterator(Ln),pn=cn.next();!pn.done;pn=cn.next())for(vn=pn.value,pn=vn.syncTime,vn=$jscomp.makeIterator(vn.partialReferences),sn=vn.next();!sn.done;sn=vn.next())sn=sn.value,sn.syncTime=pn,pn+=sn.endTime-sn.startTime;if(cn=this.lowestSyncTime_,ln&&cn!=1/0)for(ln=$jscomp.makeIterator(Ln),pn=ln.next();!pn.done;pn=ln.next())pn.value.syncAgainst(cn);return Ln},shaka.hls.HlsParser.prototype.variableSubstitution_=function(sn,ln){sn=String(sn).replace(/%7B/g,"{").replace(/%7D/g,"}");var cn=sn.match(/{\$\w*}/g);if(cn){cn=$jscomp.makeIterator(cn);for(var dn=cn.next();!dn.done;dn=cn.next()){dn=dn.value;var pn=dn.slice(2,dn.length-1),vn=ln.get(pn);if(vn)sn=sn.replace(dn,vn);else throw shaka.log.error("A variable has been found that is not declared",pn),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_VARIABLE_NOT_FOUND,pn)}}return sn},shaka.hls.HlsParser.prototype.guessMimeTypeBeforeLoading_=function(sn,ln){if(sn==shaka.util.ManifestParserUtils.ContentType.TEXT){if(ln=="vtt"||ln=="wvtt")return"text/vtt";if(ln&&ln!=="")return"application/mp4"}return sn!=shaka.util.ManifestParserUtils.ContentType.IMAGE||ln&&ln!="jpeg"?sn==shaka.util.ManifestParserUtils.ContentType.AUDIO&&ln=="mp4a.40.34"?"audio/mpeg":null:"image/jpeg"},shaka.hls.HlsParser.prototype.guessMimeTypeFallback_=function(sn){return sn==shaka.util.ManifestParserUtils.ContentType.TEXT?"text/vtt":shaka.hls.HlsParser.EXTENSION_MAP_BY_CONTENT_TYPE_[sn].mp4},shaka.hls.HlsParser.prototype.guessMimeType_=function(sn,ln,cn,dn){var pn=this,vn,kn,Sn,wn,Pn,Nn,Ln,Fn,zn,Dn,Kn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(qn){return qn.nextAddress==1?(vn=shaka.hls.HlsParser,kn=shaka.net.NetworkingEngine.RequestType.SEGMENT,goog.asserts.assert(cn.segments.length,"Playlist should have segments!"),Sn=Math.trunc((cn.segments.length-1)/2),wn=pn.variableSubstitution_(cn.segments[Sn].absoluteUri,dn),Pn=new goog.Uri(wn),Nn=Pn.getPath().split(".").pop(),Ln=vn.EXTENSION_MAP_BY_CONTENT_TYPE_[sn],(Fn=Ln[Nn])||(Fn=vn.RAW_FORMATS_TO_MIME_TYPES_[Nn])||(Fn=pn.guessMimeTypeBeforeLoading_(sn,ln))?qn.return(Fn):(zn=shaka.net.NetworkingEngine.makeRequest([wn],pn.config_.retryParameters),zn.method="HEAD",qn.yield(pn.makeNetworkRequest_(zn,kn),2))):(Dn=qn.yieldResult,(Kn=Dn.headers["content-type"])?qn.return(Kn.split(";")[0]):qn.return(pn.guessMimeTypeFallback_(sn)))})},shaka.hls.HlsParser.prototype.getRequiredTag_=function(sn,ln){if(sn=shaka.hls.Utils.getFirstTagWithName(sn,ln),!sn)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_REQUIRED_TAG_MISSING,ln);return sn},shaka.hls.HlsParser.prototype.addVideoAttributes_=function(sn,ln,cn,dn,pn){sn&&(sn.width=Number(ln)||void 0,sn.height=Number(cn)||void 0,sn.frameRate=Number(dn)||void 0,sn.hdr=pn||void 0)},shaka.hls.HlsParser.prototype.requestManifest_=function(sn){var ln=shaka.net.NetworkingEngine.RequestType.MANIFEST;return sn=shaka.net.NetworkingEngine.makeRequest([sn],this.config_.retryParameters),this.playerInterface_.modifyManifestRequest(sn,{format:shaka.util.CmcdManager.StreamingFormat.HLS}),this.makeNetworkRequest_(sn,ln)},shaka.hls.HlsParser.prototype.onUpdate_=function(){var sn=this,ln,cn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(dn){if(dn.nextAddress==1)return shaka.log.info("Updating manifest..."),goog.asserts.assert(0<sn.updatePlaylistDelay_,"We should only call |onUpdate_| when we are suppose to be updating."),sn.playerInterface_?(dn.setCatchFinallyBlocks(2),dn.yield(sn.update(),4)):dn.return();if(dn.nextAddress!=2)return sn.isLive_()&&(ln=sn.updatePlaylistDelay_,sn.updatePlaylistTimer_.tickAfter(ln)),dn.leaveTryBlock(0);if(cn=dn.enterCatchBlock(),!sn.playerInterface_)return dn.return();goog.asserts.assert(cn instanceof shaka.util.Error,"Should only receive a Shaka error"),cn.severity=shaka.util.Error.Severity.RECOVERABLE,sn.playerInterface_.onError(cn),sn.updatePlaylistTimer_.tickAfter(.1),dn.jumpToEnd()})},shaka.hls.HlsParser.prototype.isLive_=function(){return this.presentationType_!=shaka.hls.HlsParser.PresentationType_.VOD},shaka.hls.HlsParser.prototype.setPresentationType_=function(sn){this.presentationType_=sn,this.presentationTimeline_&&this.presentationTimeline_.setStatic(!this.isLive_()),this.isLive_()||this.updatePlaylistTimer_.stop()},shaka.hls.HlsParser.prototype.makeNetworkRequest_=function(sn,ln){if(!this.operationManager_)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.PLAYER,shaka.util.Error.Code.OPERATION_ABORTED);return sn=this.playerInterface_.networkingEngine.request(ln,sn),this.operationManager_.manage(sn),sn.promise},shaka.hls.HlsParser.fairplayDrmParser_=function(sn,ln){if(ln=="video/mp2t")throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED);if(shaka.util.Platform.isMediaKeysPolyfilled())throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.MANIFEST,shaka.util.Error.Code.HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED);return shaka.util.ManifestParserUtils.createDrmInfo("com.apple.fps",[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}])},shaka.hls.HlsParser.widevineDrmParser_=function(sn){var ln=sn.getRequiredAttrValue("METHOD"),cn=["SAMPLE-AES","SAMPLE-AES-CTR"];return cn.includes(ln)?(ln=sn.getRequiredAttrValue("URI"),ln=shaka.net.DataUriPlugin.parseRaw(ln),ln=shaka.util.BufferUtils.toUint8(ln.data),ln=shaka.util.ManifestParserUtils.createDrmInfo("com.widevine.alpha",[{initDataType:"cenc",initData:ln}]),(sn=sn.getAttributeValue("KEYID"))&&(sn=sn.toLowerCase(),goog.asserts.assert(sn.startsWith("0x"),"Incorrect KEYID format!"),ln.keyIds=new Set([sn.substr(2)])),ln):(shaka.log.error("Widevine in HLS is only supported with [",cn.join(", "),"], not",ln),null)},shaka.hls.HlsParser.playreadyDrmParser_=function(sn){var ln=sn.getRequiredAttrValue("METHOD"),cn=["SAMPLE-AES","SAMPLE-AES-CTR"];return cn.includes(ln)?(sn=sn.getRequiredAttrValue("URI"),sn=shaka.net.DataUriPlugin.parseRaw(sn),sn=shaka.util.BufferUtils.toUint8(sn.data),ln=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),cn=new Set,sn=shaka.util.Pssh.createPssh(sn,ln,cn,0),shaka.util.ManifestParserUtils.createDrmInfo("com.microsoft.playready",[{initDataType:"cenc",initData:sn}])):(shaka.log.error("PlayReady in HLS is only supported with [",cn.join(", "),"], not",ln),null)},shaka.hls.HlsParser.identityDrmParser_=function(sn){sn=sn.getRequiredAttrValue("METHOD");var ln=["SAMPLE-AES","SAMPLE-AES-CTR"];return ln.includes(sn)?shaka.util.ManifestParserUtils.createDrmInfo("org.w3.clearkey",null):(shaka.log.error("Identity (ClearKey) in HLS is only supported with [",ln.join(", "),"], not",sn),null)},goog.exportSymbol("shaka.hls.HlsParser",shaka.hls.HlsParser),shaka.hls.HlsParser.RAW_FORMATS_TO_MIME_TYPES_={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},shaka.hls.HlsParser.AUDIO_EXTENSIONS_TO_MIME_TYPES_={mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",tsa:"video/mp2t"},shaka.hls.HlsParser.VIDEO_EXTENSIONS_TO_MIME_TYPES_={mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t",tsv:"video/mp2t"},shaka.hls.HlsParser.TEXT_EXTENSIONS_TO_MIME_TYPES_={mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},shaka.hls.HlsParser.IMAGE_EXTENSIONS_TO_MIME_TYPES_={jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"},shaka.hls.HlsParser.EXTENSION_MAP_BY_CONTENT_TYPE_={audio:shaka.hls.HlsParser.AUDIO_EXTENSIONS_TO_MIME_TYPES_,video:shaka.hls.HlsParser.VIDEO_EXTENSIONS_TO_MIME_TYPES_,text:shaka.hls.HlsParser.TEXT_EXTENSIONS_TO_MIME_TYPES_,image:shaka.hls.HlsParser.IMAGE_EXTENSIONS_TO_MIME_TYPES_},shaka.hls.HlsParser.KEYFORMATS_TO_DRM_PARSERS_={"com.apple.streamingkeydelivery":shaka.hls.HlsParser.fairplayDrmParser_,"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":shaka.hls.HlsParser.widevineDrmParser_,"com.microsoft.playready":shaka.hls.HlsParser.playreadyDrmParser_,identity:shaka.hls.HlsParser.identityDrmParser_},shaka.hls.HlsParser.PresentationType_={VOD:"VOD",EVENT:"EVENT",LIVE:"LIVE"},shaka.util.Platform.isTizen3()||shaka.util.Platform.isTizen2()||shaka.util.Platform.isWebOS3()||(shaka.media.ManifestParser.registerParserByExtension("m3u8",function(){return new shaka.hls.HlsParser}),shaka.media.ManifestParser.registerParserByMime("application/x-mpegurl",function(){return new shaka.hls.HlsParser}),shaka.media.ManifestParser.registerParserByMime("application/vnd.apple.mpegurl",function(){return new shaka.hls.HlsParser})),shaka.net.HttpPluginUtils=function(){},shaka.net.HttpPluginUtils.makeResponse=function(sn,ln,cn,dn,pn,vn){if(200<=cn&&299>=cn&&cn!=202)return{uri:pn||dn,originalUri:dn,data:ln,status:cn,headers:sn,fromCache:!!sn["x-shaka-from-cache"]};pn=null;try{pn=shaka.util.StringUtils.fromBytesAutoDetect(ln)}catch{}throw shaka.log.debug("HTTP error text:",pn),new shaka.util.Error(cn==401||cn==403?shaka.util.Error.Severity.CRITICAL:shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.BAD_HTTP_STATUS,dn,cn,pn,sn,vn)},shaka.net.HttpFetchPlugin=function(){},shaka.net.HttpFetchPlugin.parse=function(sn,ln,cn,dn,pn){var vn=new shaka.net.HttpFetchPlugin.Headers_;shaka.util.MapUtils.asMap(ln.headers).forEach(function(Pn,Nn){vn.append(Nn,Pn)});var kn=new shaka.net.HttpFetchPlugin.AbortController_,Sn={canceled:!1,timedOut:!1};if(sn=shaka.net.HttpFetchPlugin.request_(sn,cn,{body:ln.body||void 0,headers:vn,method:ln.method,signal:kn.signal,credentials:ln.allowCrossSiteCredentials?"include":void 0},Sn,dn,pn,ln.streamDataCallback),sn=new shaka.util.AbortableOperation(sn,function(){return Sn.canceled=!0,kn.abort(),Promise.resolve()}),ln=ln.retryParameters.timeout){var wn=new shaka.util.Timer(function(){Sn.timedOut=!0,kn.abort()});wn.tickAfter(ln/1e3),sn.finally(function(){wn.stop()})}return sn},shaka.net.HttpFetchPlugin.request_=function(sn,ln,cn,dn,pn,vn,kn){var Sn,wn,Pn,Nn,Ln,Fn,zn,Dn,Kn,qn,Zn,Yn,Jn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(rs){switch(rs.nextAddress){case 1:return Sn=shaka.net.HttpFetchPlugin.fetch_,wn=shaka.net.HttpFetchPlugin.ReadableStream_,Fn=Ln=0,zn=Date.now(),rs.setCatchFinallyBlocks(2),rs.yield(Sn(sn,cn),4);case 4:if(Pn=rs.yieldResult,vn(shaka.net.HttpFetchPlugin.headersToGenericObject_(Pn.headers)),cn.method=="HEAD"){rs.jumpTo(5);break}return goog.asserts.assert(Pn.body,"non-HEAD responses should have a body"),Dn=Pn.clone().body.getReader(),qn=(Kn=Pn.headers.get("Content-Length"))?parseInt(Kn,10):0,Zn=function(ss){var as=function(){var ds,Es,Ss;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Qn){switch(Qn.nextAddress){case 1:return Qn.setCatchFinallyBlocks(2),Qn.yield(Dn.read(),4);case 4:ds=Qn.yieldResult,Qn.leaveTryBlock(3);break;case 2:return Es=Qn.enterCatchBlock(),shaka.log.v1("error reading from stream",Es.message),Qn.return();case 3:if(ds.done){Qn.jumpTo(5);break}if(Ln+=ds.value.byteLength,!kn){Qn.jumpTo(5);break}return Qn.yield(kn(ds.value),5);case 5:Ss=Date.now(),(100<Ss-zn||ds.done)&&(pn(Ss-zn,Ln-Fn,qn-Ln),Fn=Ln,zn=Ss),ds.done?(goog.asserts.assert(!ds.value,'readObj should be unset when "done" is true.'),ss.close()):(ss.enqueue(ds.value),as()),Qn.jumpToEnd()}})};as()},new wn({start:Zn}),rs.yield(Pn.arrayBuffer(),6);case 6:Nn=rs.yieldResult;case 5:rs.leaveTryBlock(3);break;case 2:throw Yn=rs.enterCatchBlock(),dn.canceled?new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.OPERATION_ABORTED,sn,ln):dn.timedOut?new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.TIMEOUT,sn,ln):new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.HTTP_ERROR,sn,Yn,ln);case 3:return Jn=shaka.net.HttpFetchPlugin.headersToGenericObject_(Pn.headers),rs.return(shaka.net.HttpPluginUtils.makeResponse(Jn,Nn,Pn.status,sn,Pn.url,ln))}})},shaka.net.HttpFetchPlugin.headersToGenericObject_=function(sn){var ln={};return sn.forEach(function(cn,dn){ln[dn.trim()]=cn}),ln},shaka.net.HttpFetchPlugin.isSupported=function(){if(window.ReadableStream)try{new ReadableStream({})}catch{return!1}else return!1;if(window.Response){if(!new Response("").body)return!1}else return!1;return!(!window.fetch||!window.AbortController)},goog.exportSymbol("shaka.net.HttpFetchPlugin",shaka.net.HttpFetchPlugin),goog.exportProperty(shaka.net.HttpFetchPlugin,"isSupported",shaka.net.HttpFetchPlugin.isSupported),goog.exportProperty(shaka.net.HttpFetchPlugin,"parse",shaka.net.HttpFetchPlugin.parse),shaka.net.HttpFetchPlugin.fetch_=window.fetch,shaka.net.HttpFetchPlugin.AbortController_=window.AbortController,shaka.net.HttpFetchPlugin.ReadableStream_=window.ReadableStream,shaka.net.HttpFetchPlugin.Headers_=window.Headers,shaka.net.HttpFetchPlugin.isSupported()&&(shaka.net.NetworkingEngine.registerScheme("http",shaka.net.HttpFetchPlugin.parse,shaka.net.NetworkingEngine.PluginPriority.PREFERRED,!0),shaka.net.NetworkingEngine.registerScheme("https",shaka.net.HttpFetchPlugin.parse,shaka.net.NetworkingEngine.PluginPriority.PREFERRED,!0),shaka.net.NetworkingEngine.registerScheme("blob",shaka.net.HttpFetchPlugin.parse,shaka.net.NetworkingEngine.PluginPriority.PREFERRED,!0)),shaka.net.HttpXHRPlugin=function(){},shaka.net.HttpXHRPlugin.parse=function(sn,ln,cn,dn,pn){var vn=new shaka.net.HttpXHRPlugin.Xhr_,kn=Date.now(),Sn=0,wn=new Promise(function(Pn,Nn){vn.open(ln.method,sn,!0),vn.responseType="arraybuffer",vn.timeout=ln.retryParameters.timeout,vn.withCredentials=ln.allowCrossSiteCredentials,vn.onabort=function(){Nn(new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.OPERATION_ABORTED,sn,cn))};var Ln=!1;vn.onreadystatechange=function(Dn){vn.readyState!=2||Ln||(Dn=shaka.net.HttpXHRPlugin.headersToGenericObject_(vn),pn(Dn),Ln=!0)},vn.onload=function(Dn){Dn=shaka.net.HttpXHRPlugin.headersToGenericObject_(vn),goog.asserts.assert(vn.response instanceof ArrayBuffer,"XHR should have a response by now!");var Kn=vn.response;try{var qn=shaka.net.HttpPluginUtils.makeResponse(Dn,Kn,vn.status,sn,vn.responseURL,cn);Pn(qn)}catch(Zn){goog.asserts.assert(Zn instanceof shaka.util.Error,"Wrong error type!"),Nn(Zn)}},vn.onerror=function(Dn){Nn(new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.HTTP_ERROR,sn,Dn,cn))},vn.ontimeout=function(Dn){Nn(new shaka.util.Error(shaka.util.Error.Severity.RECOVERABLE,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.TIMEOUT,sn,cn))},vn.onprogress=function(Dn){var Kn=Date.now();(100<Kn-kn||Dn.lengthComputable&&Dn.loaded==Dn.total)&&(dn(Kn-kn,Dn.loaded-Sn,Dn.total-Dn.loaded),Sn=Dn.loaded,kn=Kn)};for(var Fn in ln.headers){var zn=Fn.toLowerCase();vn.setRequestHeader(zn,ln.headers[Fn])}vn.send(ln.body)});return new shaka.util.AbortableOperation(wn,function(){return vn.abort(),Promise.resolve()})},shaka.net.HttpXHRPlugin.headersToGenericObject_=function(sn){var ln=sn.getAllResponseHeaders().trim().split(`\r
`);sn={},ln=$jscomp.makeIterator(ln);for(var cn=ln.next();!cn.done;cn=ln.next())cn=cn.value.split(": "),sn[cn[0].toLowerCase()]=cn.slice(1).join(": ");return sn},goog.exportSymbol("shaka.net.HttpXHRPlugin",shaka.net.HttpXHRPlugin),goog.exportProperty(shaka.net.HttpXHRPlugin,"parse",shaka.net.HttpXHRPlugin.parse),shaka.net.HttpXHRPlugin.Xhr_=window.XMLHttpRequest,shaka.net.NetworkingEngine.registerScheme("http",shaka.net.HttpXHRPlugin.parse,shaka.net.NetworkingEngine.PluginPriority.FALLBACK,!0),shaka.net.NetworkingEngine.registerScheme("https",shaka.net.HttpXHRPlugin.parse,shaka.net.NetworkingEngine.PluginPriority.FALLBACK,!0),shaka.net.NetworkingEngine.registerScheme("blob",shaka.net.HttpXHRPlugin.parse,shaka.net.NetworkingEngine.PluginPriority.FALLBACK,!0),shaka.offline={},shaka.offline.DownloadInfo=function(sn,ln,cn,dn){this.ref=sn,this.estimateId=ln,this.groupId=cn,this.isInitSegment=dn},shaka.offline.DownloadInfo.idForSegmentRef=function(sn){return sn.getUris().map(function(ln){return"{"+encodeURI(ln)+"}"}).join("")+":"+sn.startByte+":"+sn.endByte},shaka.offline.DownloadInfo.prototype.getRefId=function(){return shaka.offline.DownloadInfo.idForSegmentRef(this.ref)},shaka.offline.DownloadInfo.prototype.makeSegmentRequest=function(sn){return shaka.util.Networking.createSegmentRequest(this.ref.getUris(),this.ref.startByte,this.ref.endByte,sn.streaming.retryParameters)},shaka.offline.DownloadProgressEstimator=function(){this.actualDownloaded_=this.estimatedDownloaded_=this.estimatedTotal_=0,this.pending_=new Map,this.nextId_=0},shaka.offline.DownloadProgressEstimator.prototype.open=function(sn){this.estimatedTotal_+=sn;var ln=this.nextId_;return this.nextId_++,this.pending_.set(ln,sn),ln},shaka.offline.DownloadProgressEstimator.prototype.close=function(sn,ln){if(this.pending_.has(sn)){var cn=this.pending_.get(sn);this.pending_.delete(sn),this.estimatedDownloaded_+=cn,this.actualDownloaded_+=ln}},shaka.offline.DownloadProgressEstimator.prototype.getEstimatedProgress=function(){return this.estimatedTotal_==0?0:this.estimatedDownloaded_/this.estimatedTotal_},shaka.offline.DownloadProgressEstimator.prototype.getTotalDownloaded=function(){return this.actualDownloaded_},shaka.offline.DownloadManager=function(sn){var ln=this;this.networkingEngine_=sn,this.groups_=new Map,this.destroyer_=new shaka.util.Destroyer(function(){return ln.abortAll().catch(function(){})}),this.abortCallbacks_=[],this.onProgress_=function(cn,dn){},this.onInitData_=function(cn,dn){},this.estimator_=new shaka.offline.DownloadProgressEstimator},shaka.offline.DownloadManager.prototype.destroy=function(){return this.destroyer_.destroy()},shaka.offline.DownloadManager.prototype.setCallbacks=function(sn,ln){this.onProgress_=sn,this.onInitData_=ln},shaka.offline.DownloadManager.prototype.abortAll=function(){var sn=this.abortCallbacks_.map(function(ln){return ln()});return this.abortCallbacks_=[],Promise.all(sn)},shaka.offline.DownloadManager.prototype.addDownloadEstimate=function(sn){return this.estimator_.open(sn)},shaka.offline.DownloadManager.prototype.queue=function(sn,ln,cn,dn,pn){var vn=this;this.destroyer_.ensureNotDestroyed();var kn=(this.groups_.get(sn)||Promise.resolve()).then(function(){var Sn,wn,Pn,Nn,Ln,Fn,zn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Dn){if(Dn.nextAddress==1)return Dn.yield(vn.fetchSegment_(ln),2);if(Sn=Dn.yieldResult,vn.destroyer_.destroyed())throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.OPERATION_ABORTED);if(dn)for(Nn in wn=shaka.util.BufferUtils.toUint8(Sn),Pn=new shaka.util.Pssh(wn),Pn.data)Ln=Number(Nn),Fn=Pn.data[Ln],zn=Pn.systemIds[Ln],vn.onInitData_(Fn,zn);return vn.estimator_.close(cn,Sn.byteLength),vn.onProgress_(vn.estimator_.getEstimatedProgress(),vn.estimator_.getTotalDownloaded()),Dn.return(pn(Sn))})});return this.groups_.set(sn,kn),kn},shaka.offline.DownloadManager.prototype.queueWork=function(sn,ln){this.destroyer_.ensureNotDestroyed();var cn=(this.groups_.get(sn)||Promise.resolve()).then(function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(dn){return dn.yield(ln(),0)})});return this.groups_.set(sn,cn),cn},shaka.offline.DownloadManager.prototype.waitToFinish=function(){var sn=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ln){return ln.nextAddress==1?ln.yield(Promise.all(sn.groups_.values()),2):ln.return(sn.estimator_.getTotalDownloaded())})},shaka.offline.DownloadManager.prototype.fetchSegment_=function(sn){var ln=this,cn,dn,pn,vn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(kn){return kn.nextAddress==1?(cn=shaka.net.NetworkingEngine.RequestType.SEGMENT,dn=ln.networkingEngine_.request(cn,sn),pn=function(){return dn.abort()},ln.abortCallbacks_.push(pn),kn.yield(dn.promise,2)):(vn=kn.yieldResult,shaka.util.ArrayUtils.remove(ln.abortCallbacks_,pn),kn.return(vn.data))})},shaka.offline.indexeddb={},shaka.offline.indexeddb.DBOperation=function(sn,ln){var cn=this;this.transaction_=sn,this.store_=sn.objectStore(ln),this.promise_=new shaka.util.PublicPromise,sn.onabort=function(dn){dn.preventDefault(),cn.promise_.reject()},sn.onerror=function(dn){dn.preventDefault(),cn.promise_.reject()},sn.oncomplete=function(dn){cn.promise_.resolve()}},shaka.offline.indexeddb.DBOperation.prototype.abort=function(){var sn=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ln){if(ln.nextAddress==1){try{sn.transaction_.abort()}catch{}return ln.setCatchFinallyBlocks(2),ln.yield(sn.promise_,4)}if(ln.nextAddress!=2)return ln.leaveTryBlock(0);ln.enterCatchBlock(),ln.jumpToEnd()})},shaka.offline.indexeddb.DBOperation.prototype.forEachEntry=function(sn){var ln=this;return new Promise(function(cn,dn){var pn=ln.store_.openCursor();pn.onerror=dn,pn.onsuccess=function(vn){var kn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sn){if(Sn.nextAddress==1)return pn.result==null?(cn(),Sn.return()):(kn=pn.result,Sn.yield(sn(kn.key,kn.value,kn),2));kn.continue(),Sn.jumpToEnd()})}})},shaka.offline.indexeddb.DBOperation.prototype.store=function(){return this.store_},shaka.offline.indexeddb.DBOperation.prototype.promise=function(){return this.promise_},shaka.offline.indexeddb.DBConnection=function(sn){this.connection_=sn,this.pending_=[]},shaka.offline.indexeddb.DBConnection.prototype.destroy=function(){return Promise.all(this.pending_.map(function(sn){return sn.abort()}))},shaka.offline.indexeddb.DBConnection.prototype.startReadOnlyOperation=function(sn){return this.startOperation_(sn,"readonly")},shaka.offline.indexeddb.DBConnection.prototype.startReadWriteOperation=function(sn){return this.startOperation_(sn,"readwrite")},shaka.offline.indexeddb.DBConnection.prototype.startOperation_=function(sn,ln){var cn=this;ln=this.connection_.transaction([sn],ln);var dn=new shaka.offline.indexeddb.DBOperation(ln,sn);return this.pending_.push(dn),dn.promise().then(function(){return cn.stopTracking_(dn)},function(){return cn.stopTracking_(dn)}),dn},shaka.offline.indexeddb.DBConnection.prototype.stopTracking_=function(sn){shaka.util.ArrayUtils.remove(this.pending_,sn)},shaka.offline.indexeddb.BaseStorageCell=function(sn,ln,cn){this.connection_=new shaka.offline.indexeddb.DBConnection(sn),this.segmentStore_=ln,this.manifestStore_=cn},shaka.offline.indexeddb.BaseStorageCell.prototype.destroy=function(){return this.connection_.destroy()},shaka.offline.indexeddb.BaseStorageCell.prototype.hasFixedKeySpace=function(){return!0},shaka.offline.indexeddb.BaseStorageCell.prototype.addSegments=function(sn){return this.rejectAdd(this.segmentStore_)},shaka.offline.indexeddb.BaseStorageCell.prototype.removeSegments=function(sn,ln){return this.remove_(this.segmentStore_,sn,ln)},shaka.offline.indexeddb.BaseStorageCell.prototype.getSegments=function(sn){var ln=this,cn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(dn){return dn.nextAddress==1?dn.yield(ln.get_(ln.segmentStore_,sn),2):(cn=dn.yieldResult,dn.return(cn.map(function(pn){return ln.convertSegmentData(pn)})))})},shaka.offline.indexeddb.BaseStorageCell.prototype.addManifests=function(sn){return this.rejectAdd(this.manifestStore_)},shaka.offline.indexeddb.BaseStorageCell.prototype.updateManifest=function(sn,ln){return this.rejectUpdate(this.manifestStore_)},shaka.offline.indexeddb.BaseStorageCell.prototype.updateManifestImplementation=function(sn,ln){var cn=this.connection_.startReadWriteOperation(this.manifestStore_),dn=cn.store();return dn.get(sn).onsuccess=function(pn){dn.put(ln,sn)},cn.promise()},shaka.offline.indexeddb.BaseStorageCell.prototype.updateManifestExpiration=function(sn,ln){var cn=this.connection_.startReadWriteOperation(this.manifestStore_),dn=cn.store();return dn.get(sn).onsuccess=function(pn){(pn=pn.target.result)&&(pn.expiration=ln,dn.put(pn,sn))},cn.promise()},shaka.offline.indexeddb.BaseStorageCell.prototype.removeManifests=function(sn,ln){return this.remove_(this.manifestStore_,sn,ln)},shaka.offline.indexeddb.BaseStorageCell.prototype.getManifests=function(sn){var ln=this,cn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(dn){return dn.nextAddress==1?dn.yield(ln.get_(ln.manifestStore_,sn),2):(cn=dn.yieldResult,dn.return(Promise.all(cn.map(function(pn){return ln.convertManifest(pn)}))))})},shaka.offline.indexeddb.BaseStorageCell.prototype.getAllManifests=function(){var sn=this,ln,cn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(dn){return dn.nextAddress==1?(ln=sn.connection_.startReadOnlyOperation(sn.manifestStore_),cn=new Map,dn.yield(ln.forEachEntry(function(pn,vn){var kn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sn){if(Sn.nextAddress==1)return Sn.yield(sn.convertManifest(vn),2);kn=Sn.yieldResult,cn.set(pn,kn),Sn.jumpToEnd()})}),2)):dn.nextAddress!=3?dn.yield(ln.promise(),3):dn.return(cn)})},shaka.offline.indexeddb.BaseStorageCell.prototype.convertSegmentData=function(sn){return sn},shaka.offline.indexeddb.BaseStorageCell.prototype.convertManifest=function(sn){return Promise.resolve(sn)},shaka.offline.indexeddb.BaseStorageCell.prototype.rejectAdd=function(sn){return Promise.reject(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.NEW_KEY_OPERATION_NOT_SUPPORTED,"Cannot add new value to "+sn))},shaka.offline.indexeddb.BaseStorageCell.prototype.rejectUpdate=function(sn){return Promise.reject(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.MODIFY_OPERATION_NOT_SUPPORTED,"Cannot modify values in "+sn))},shaka.offline.indexeddb.BaseStorageCell.prototype.add=function(sn,ln){var cn=this,dn,pn,vn,kn,Sn,wn,Pn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Nn){if(Nn.nextAddress==1){for(dn=cn.connection_.startReadWriteOperation(sn),pn=dn.store(),vn=[],kn={},Sn=$jscomp.makeIterator(ln),wn=Sn.next();!wn.done;kn={$jscomp$loop$prop$request$737:kn.$jscomp$loop$prop$request$737},wn=Sn.next())Pn=wn.value,kn.$jscomp$loop$prop$request$737=pn.add(Pn),kn.$jscomp$loop$prop$request$737.onsuccess=function(Ln){return function(Fn){vn.push(Ln.$jscomp$loop$prop$request$737.result)}}(kn);return Nn.yield(dn.promise(),2)}return Nn.return(vn)})},shaka.offline.indexeddb.BaseStorageCell.prototype.remove_=function(sn,ln,cn){sn=this.connection_.startReadWriteOperation(sn);var dn=sn.store(),pn={};ln=$jscomp.makeIterator(ln);for(var vn=ln.next();!vn.done;pn={$jscomp$loop$prop$key$739:pn.$jscomp$loop$prop$key$739},vn=ln.next())pn.$jscomp$loop$prop$key$739=vn.value,dn.delete(pn.$jscomp$loop$prop$key$739).onsuccess=function(kn){return function(){return cn(kn.$jscomp$loop$prop$key$739)}}(pn);return sn.promise()},shaka.offline.indexeddb.BaseStorageCell.prototype.get_=function(sn,ln){var cn=this,dn,pn,vn,kn,Sn,wn,Pn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Nn){if(Nn.nextAddress==1){for(dn=cn.connection_.startReadOnlyOperation(sn),pn=dn.store(),vn={},kn=[],Sn={},wn=$jscomp.makeIterator(ln),Pn=wn.next();!Pn.done;Sn={$jscomp$loop$prop$request$741:Sn.$jscomp$loop$prop$request$741,$jscomp$loop$prop$key$742:Sn.$jscomp$loop$prop$key$742},Pn=wn.next())Sn.$jscomp$loop$prop$key$742=Pn.value,Sn.$jscomp$loop$prop$request$741=pn.get(Sn.$jscomp$loop$prop$key$742),Sn.$jscomp$loop$prop$request$741.onsuccess=function(Ln){return function(){Ln.$jscomp$loop$prop$request$741.result==null&&kn.push(Ln.$jscomp$loop$prop$key$742),vn[Ln.$jscomp$loop$prop$key$742]=Ln.$jscomp$loop$prop$request$741.result}}(Sn);return Nn.yield(dn.promise(),2)}if(kn.length)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.KEY_NOT_FOUND,"Could not find values for "+kn);return Nn.return(ln.map(function(Ln){return vn[Ln]}))})},shaka.offline.indexeddb.EmeSessionStorageCell=function(sn,ln){this.connection_=new shaka.offline.indexeddb.DBConnection(sn),this.store_=ln},shaka.offline.indexeddb.EmeSessionStorageCell.prototype.destroy=function(){return this.connection_.destroy()},shaka.offline.indexeddb.EmeSessionStorageCell.prototype.getAll=function(){var sn=this,ln,cn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(dn){return dn.nextAddress==1?(ln=sn.connection_.startReadOnlyOperation(sn.store_),cn=[],dn.yield(ln.forEachEntry(function(pn,vn){cn.push(vn)}),2)):dn.nextAddress!=3?dn.yield(ln.promise(),3):dn.return(cn)})},shaka.offline.indexeddb.EmeSessionStorageCell.prototype.add=function(sn){var ln=this.connection_.startReadWriteOperation(this.store_),cn=ln.store();sn=$jscomp.makeIterator(sn);for(var dn=sn.next();!dn.done;dn=sn.next())cn.add(dn.value);return ln.promise()},shaka.offline.indexeddb.EmeSessionStorageCell.prototype.remove=function(sn){var ln=this,cn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(dn){return dn.nextAddress==1?(cn=ln.connection_.startReadWriteOperation(ln.store_),dn.yield(cn.forEachEntry(function(pn,vn,kn){sn.includes(vn.sessionId)&&kn.delete()}),2)):dn.yield(cn.promise(),0)})},shaka.offline.StorageCellHandle={},shaka.offline.StorageCellPath={},shaka.offline.StorageMuxer=function(){this.mechanisms_=new Map},shaka.offline.StorageMuxer.prototype.destroy=function(){for(var sn=[],ln=$jscomp.makeIterator(this.mechanisms_.values()),cn=ln.next();!cn.done;cn=ln.next())sn.push(cn.value.destroy());return this.mechanisms_.clear(),Promise.all(sn)},shaka.offline.StorageMuxer.prototype.init=function(){var sn=this;shaka.offline.StorageMuxer.getRegistry_().forEach(function(pn,vn){(pn=pn())?sn.mechanisms_.set(vn,pn):shaka.log.info("Skipping "+vn+" as it is not supported on this platform")});for(var ln=[],cn=$jscomp.makeIterator(this.mechanisms_.values()),dn=cn.next();!dn.done;dn=cn.next())ln.push(dn.value.init());return Promise.all(ln)},shaka.offline.StorageMuxer.prototype.getActive=function(){var sn=null;if(this.mechanisms_.forEach(function(ln,cn){ln.getCells().forEach(function(dn,pn){dn.hasFixedKeySpace()||sn||(sn={path:{mechanism:cn,cell:pn},cell:dn})})}),sn)return sn;throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.MISSING_STORAGE_CELL,"Could not find a cell that supports add-operations")},shaka.offline.StorageMuxer.prototype.forEachCell=function(sn){this.mechanisms_.forEach(function(ln,cn){ln.getCells().forEach(function(dn,pn){sn({mechanism:cn,cell:pn},dn)})})},shaka.offline.StorageMuxer.prototype.getCell=function(sn,ln){var cn=this.mechanisms_.get(sn);if(!cn)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.MISSING_STORAGE_CELL,"Could not find mechanism with name "+sn);if(sn=cn.getCells().get(ln),!sn)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.MISSING_STORAGE_CELL,"Could not find cell with name "+ln);return sn},shaka.offline.StorageMuxer.prototype.forEachEmeSessionCell=function(sn){this.mechanisms_.forEach(function(ln,cn){sn(ln.getEmeSessionCell())})},shaka.offline.StorageMuxer.prototype.getEmeSessionCell=function(){var sn=Array.from(this.mechanisms_.keys());if(!sn.length)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.STORAGE_NOT_SUPPORTED,"No supported storage mechanisms found");return this.mechanisms_.get(sn[0]).getEmeSessionCell()},shaka.offline.StorageMuxer.prototype.resolvePath=function(sn){var ln=this.mechanisms_.get(sn.mechanism);return ln?ln.getCells().get(sn.cell):null},shaka.offline.StorageMuxer.prototype.erase=function(){var sn=this,ln,cn,dn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pn){return pn.nextAddress==1?(ln=Array.from(sn.mechanisms_.values()),cn=0<ln.length,cn||(dn=shaka.offline.StorageMuxer.getRegistry_(),dn.forEach(function(vn,kn){(vn=vn())&&ln.push(vn)})),pn.yield(Promise.all(ln.map(function(vn){return vn.erase()})),2)):cn?pn.jumpTo(0):pn.yield(Promise.all(ln.map(function(vn){return vn.destroy()})),0)})},shaka.offline.StorageMuxer.register=function(sn,ln){shaka.offline.StorageMuxer.registry_.set(sn,ln)},shaka.offline.StorageMuxer.unregister=function(sn){shaka.offline.StorageMuxer.registry_.delete(sn)},shaka.offline.StorageMuxer.support=function(){var sn=shaka.offline.StorageMuxer.getRegistry_();sn=$jscomp.makeIterator(sn.values());for(var ln=sn.next();!ln.done;ln=sn.next())if(ln=ln.value,ln=ln())return ln.destroy(),!0;return!1},shaka.offline.StorageMuxer.overrideSupport=function(sn){shaka.offline.StorageMuxer.override_=sn},shaka.offline.StorageMuxer.clearOverride=function(){shaka.offline.StorageMuxer.override_=null},shaka.offline.StorageMuxer.getRegistry_=function(){shaka.offline.StorageMuxer.override_;var sn=shaka.offline.StorageMuxer.registry_;return sn},goog.exportSymbol("shaka.offline.StorageMuxer",shaka.offline.StorageMuxer),goog.exportProperty(shaka.offline.StorageMuxer,"unregister",shaka.offline.StorageMuxer.unregister),goog.exportProperty(shaka.offline.StorageMuxer,"register",shaka.offline.StorageMuxer.register),goog.exportProperty(shaka.offline.StorageMuxer.prototype,"destroy",shaka.offline.StorageMuxer.prototype.destroy),shaka.offline.StorageMuxer.override_=null,shaka.offline.StorageMuxer.registry_=new Map,shaka.offline.indexeddb.V1StorageCell=function(){shaka.offline.indexeddb.BaseStorageCell.apply(this,arguments)},$jscomp.inherits(shaka.offline.indexeddb.V1StorageCell,shaka.offline.indexeddb.BaseStorageCell),shaka.offline.indexeddb.V1StorageCell.prototype.updateManifestExpiration=function(sn,ln){var cn=this,dn,pn,vn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(kn){return dn=cn.connection_.startReadWriteOperation(cn.manifestStore_),pn=dn.store(),vn=new shaka.util.PublicPromise,pn.get(sn).onsuccess=function(Sn){(Sn=Sn.target.result)?(goog.asserts.assert(Sn.key==sn,"With in-line keys, the keys should match"),Sn.expiration=ln,pn.put(Sn),vn.resolve()):vn.reject(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.KEY_NOT_FOUND,"Could not find values for "+sn))},kn.yield(Promise.all([dn.promise(),vn]),0)})},shaka.offline.indexeddb.V1StorageCell.prototype.convertManifest=function(sn){var ln,cn,dn,pn,vn,kn,Sn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wn){if(wn.nextAddress==1){for(ln=shaka.offline.indexeddb.V1StorageCell,cn=[],dn=0;dn<sn.periods.length;++dn)pn=dn==sn.periods.length-1?sn.duration:sn.periods[dn+1].startTime,vn=pn-sn.periods[dn].startTime,kn=ln.convertPeriod_(sn.periods[dn],vn),cn.push(kn);return wn.yield(shaka.util.PeriodCombiner.combineDbStreams(cn),2)}return Sn=wn.yieldResult,wn.return({creationTime:0,originalManifestUri:sn.originalManifestUri,duration:sn.duration,size:sn.size,expiration:sn.expiration==null?1/0:sn.expiration,streams:Sn,sessionIds:sn.sessionIds,drmInfo:sn.drmInfo,appMetadata:sn.appMetadata,sequenceMode:!1})})},shaka.offline.indexeddb.V1StorageCell.convertPeriod_=function(sn,ln){var cn=shaka.offline.indexeddb.V1StorageCell;cn.fillMissingVariants_(sn);for(var dn=$jscomp.makeIterator(sn.streams),pn=dn.next();!pn.done;pn=dn.next())goog.asserts.assert(pn.value.variantIds,"After filling in missing variants, each stream should have variant ids");return sn.streams.map(function(vn){return cn.convertStream_(vn,sn.startTime,ln)})},shaka.offline.indexeddb.V1StorageCell.convertStream_=function(sn,ln,cn){var dn=shaka.offline.indexeddb.V1StorageCell,pn=sn.initSegmentUri?dn.getKeyFromSegmentUri_(sn.initSegmentUri):null,vn=ln+sn.presentationTimeOffset,kn=ln+cn;return{id:sn.id,originalId:null,primary:sn.primary,type:sn.contentType,mimeType:sn.mimeType,codecs:sn.codecs,frameRate:sn.frameRate,pixelAspectRatio:void 0,hdr:void 0,kind:sn.kind,language:sn.language,label:sn.label,width:sn.width,height:sn.height,initSegmentKey:pn,encrypted:sn.encrypted,keyIds:new Set([sn.keyId]),segments:sn.segments.map(function(Sn){return dn.convertSegment_(Sn,pn,ln,kn,vn)}),variantIds:sn.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0}},shaka.offline.indexeddb.V1StorageCell.convertSegment_=function(sn,ln,cn,dn,pn){var vn=shaka.offline.indexeddb.V1StorageCell.getKeyFromSegmentUri_(sn.uri);return{startTime:cn+sn.startTime,endTime:cn+sn.endTime,dataKey:vn,initSegmentKey:ln,appendWindowStart:cn,appendWindowEnd:dn,timestampOffset:pn,tilesLayout:""}},shaka.offline.indexeddb.V1StorageCell.prototype.convertSegmentData=function(sn){return{data:sn.data}},shaka.offline.indexeddb.V1StorageCell.getKeyFromSegmentUri_=function(sn){var ln;if((ln=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(sn))||(ln=/^offline:segment\/([0-9]+)$/.exec(sn)))return Number(ln[1]);throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.MALFORMED_OFFLINE_URI,"Could not parse uri "+sn)},shaka.offline.indexeddb.V1StorageCell.fillMissingVariants_=function(sn){var ln=shaka.util.ManifestParserUtils.ContentType.AUDIO,cn=shaka.util.ManifestParserUtils.ContentType.VIDEO,dn=sn.streams.filter(function(Pn){return Pn.contentType==ln});if(sn=sn.streams.filter(function(Pn){return Pn.contentType==cn}),!dn.every(function(Pn){return Pn.variantIds})||!sn.every(function(Pn){return Pn.variantIds})){goog.asserts.assert(dn.every(function(Pn){return!Pn.variantIds}),"Some audio streams have variant ids and some do not."),goog.asserts.assert(sn.every(function(Pn){return!Pn.variantIds}),"Some video streams have variant ids and some do not.");for(var pn=$jscomp.makeIterator(dn),vn=pn.next();!vn.done;vn=pn.next())vn.value.variantIds=[];for(pn=$jscomp.makeIterator(sn),vn=pn.next();!vn.done;vn=pn.next())vn.value.variantIds=[];if(pn=0,sn.length&&!dn.length){shaka.log.debug("Found video-only content. Creating variants for video.");var kn=pn++,Sn=$jscomp.makeIterator(sn);for(vn=Sn.next();!vn.done;vn=Sn.next())vn.value.variantIds.push(kn)}if(!sn.length&&dn.length)for(shaka.log.debug("Found audio-only content. Creating variants for audio."),kn=pn++,Sn=$jscomp.makeIterator(dn),vn=Sn.next();!vn.done;vn=Sn.next())vn.value.variantIds.push(kn);if(sn.length&&dn.length)for(shaka.log.debug("Found audio-video content. Creating variants."),dn=$jscomp.makeIterator(dn),vn=dn.next();!vn.done;vn=dn.next())for(vn=vn.value,kn=$jscomp.makeIterator(sn),Sn=kn.next();!Sn.done;Sn=kn.next()){Sn=Sn.value;var wn=pn++;vn.variantIds.push(wn),Sn.variantIds.push(wn)}}},shaka.offline.indexeddb.V2StorageCell=function(){shaka.offline.indexeddb.BaseStorageCell.apply(this,arguments)},$jscomp.inherits(shaka.offline.indexeddb.V2StorageCell,shaka.offline.indexeddb.BaseStorageCell),shaka.offline.indexeddb.V2StorageCell.prototype.convertManifest=function(sn){var ln=this,cn,dn,pn,vn,kn,Sn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wn){if(wn.nextAddress==1){for(cn=[],dn=0;dn<sn.periods.length;++dn)pn=dn==sn.periods.length-1?sn.duration:sn.periods[dn+1].startTime,vn=pn-sn.periods[dn].startTime,kn=ln.convertPeriod_(sn.periods[dn],vn),cn.push(kn);return wn.yield(shaka.util.PeriodCombiner.combineDbStreams(cn),2)}return Sn=wn.yieldResult,wn.return({appMetadata:sn.appMetadata,creationTime:0,drmInfo:sn.drmInfo,duration:sn.duration,expiration:sn.expiration==null?1/0:sn.expiration,originalManifestUri:sn.originalManifestUri,sessionIds:sn.sessionIds,size:sn.size,streams:Sn,sequenceMode:!1})})},shaka.offline.indexeddb.V2StorageCell.prototype.convertPeriod_=function(sn,ln){for(var cn=[],dn=$jscomp.makeIterator(sn.streams),pn=dn.next();!pn.done;pn=dn.next())pn=pn.value,pn.variantIds.length!=0&&cn.push(this.convertStream_(pn,sn.startTime,sn.startTime+ln));return cn},shaka.offline.indexeddb.V2StorageCell.prototype.convertStream_=function(sn,ln,cn){var dn=this;return{id:sn.id,originalId:sn.originalId,primary:sn.primary,type:sn.contentType,mimeType:sn.mimeType,codecs:sn.codecs,frameRate:sn.frameRate,pixelAspectRatio:sn.pixelAspectRatio,hdr:void 0,kind:sn.kind,language:sn.language,label:sn.label,width:sn.width,height:sn.height,encrypted:sn.encrypted,keyIds:new Set([sn.keyId]),segments:sn.segments.map(function(pn){return dn.convertSegment_(pn,sn.initSegmentKey,ln,cn,sn.presentationTimeOffset)}),variantIds:sn.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0}},shaka.offline.indexeddb.V2StorageCell.prototype.convertSegment_=function(sn,ln,cn,dn,pn){return{startTime:cn+sn.startTime,endTime:cn+sn.endTime,initSegmentKey:ln,appendWindowStart:cn,appendWindowEnd:dn,timestampOffset:cn-pn,dataKey:sn.dataKey,tilesLayout:""}},shaka.offline.indexeddb.V5StorageCell=function(){shaka.offline.indexeddb.BaseStorageCell.apply(this,arguments)},$jscomp.inherits(shaka.offline.indexeddb.V5StorageCell,shaka.offline.indexeddb.BaseStorageCell),shaka.offline.indexeddb.V5StorageCell.prototype.hasFixedKeySpace=function(){return!1},shaka.offline.indexeddb.V5StorageCell.prototype.addSegments=function(sn){return this.add(this.segmentStore_,sn)},shaka.offline.indexeddb.V5StorageCell.prototype.addManifests=function(sn){return this.add(this.manifestStore_,sn)},shaka.offline.indexeddb.V5StorageCell.prototype.updateManifest=function(sn,ln){return this.updateManifestImplementation(sn,ln)},shaka.offline.indexeddb.V5StorageCell.prototype.convertManifest=function(sn){return sn.expiration==null&&(sn.expiration=1/0),Promise.resolve(sn)},shaka.offline.indexeddb.StorageMechanism=function(){this.sessions_=this.v5_=this.v3_=this.v2_=this.v1_=this.db_=null},shaka.offline.indexeddb.StorageMechanism.prototype.init=function(){var sn=this,ln=shaka.offline.indexeddb.StorageMechanism.DB_NAME,cn=shaka.offline.indexeddb.StorageMechanism.VERSION,dn=new shaka.util.PublicPromise,pn=!1,vn=new shaka.util.Timer(function(){pn=!0,dn.reject(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.INDEXED_DB_INIT_TIMED_OUT))});vn.tickAfter(5);var kn=window.indexedDB.open(ln,cn);return kn.onsuccess=function(Sn){pn||(Sn=kn.result,sn.db_=Sn,sn.v1_=shaka.offline.indexeddb.StorageMechanism.createV1_(Sn),sn.v2_=shaka.offline.indexeddb.StorageMechanism.createV2_(Sn),sn.v3_=shaka.offline.indexeddb.StorageMechanism.createV3_(Sn),sn.v5_=shaka.offline.indexeddb.StorageMechanism.createV5_(Sn),sn.sessions_=shaka.offline.indexeddb.StorageMechanism.createEmeSessionCell_(Sn),vn.stop(),dn.resolve())},kn.onupgradeneeded=function(Sn){sn.createStores_(kn.result)},kn.onerror=function(Sn){pn||(dn.reject(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.INDEXED_DB_ERROR,kn.error)),vn.stop(),Sn.preventDefault())},dn},shaka.offline.indexeddb.StorageMechanism.prototype.destroy=function(){var sn=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ln){switch(ln.nextAddress){case 1:if(!sn.v1_){ln.jumpTo(2);break}return ln.yield(sn.v1_.destroy(),2);case 2:if(!sn.v2_){ln.jumpTo(4);break}return ln.yield(sn.v2_.destroy(),4);case 4:if(!sn.v3_){ln.jumpTo(6);break}return ln.yield(sn.v3_.destroy(),6);case 6:if(!sn.v5_){ln.jumpTo(8);break}return ln.yield(sn.v5_.destroy(),8);case 8:if(!sn.sessions_){ln.jumpTo(10);break}return ln.yield(sn.sessions_.destroy(),10);case 10:sn.db_&&sn.db_.close(),ln.jumpToEnd()}})},shaka.offline.indexeddb.StorageMechanism.prototype.getCells=function(){var sn=new Map;return this.v1_&&sn.set("v1",this.v1_),this.v2_&&sn.set("v2",this.v2_),this.v3_&&sn.set("v3",this.v3_),this.v5_&&sn.set("v5",this.v5_),sn},shaka.offline.indexeddb.StorageMechanism.prototype.getEmeSessionCell=function(){return goog.asserts.assert(this.sessions_,"Cannot be destroyed."),this.sessions_},shaka.offline.indexeddb.StorageMechanism.prototype.erase=function(){var sn=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ln){switch(ln.nextAddress){case 1:if(!sn.v1_){ln.jumpTo(2);break}return ln.yield(sn.v1_.destroy(),2);case 2:if(!sn.v2_){ln.jumpTo(4);break}return ln.yield(sn.v2_.destroy(),4);case 4:if(!sn.v3_){ln.jumpTo(6);break}return ln.yield(sn.v3_.destroy(),6);case 6:if(!sn.v5_){ln.jumpTo(8);break}return ln.yield(sn.v5_.destroy(),8);case 8:return sn.db_&&sn.db_.close(),ln.yield(shaka.offline.indexeddb.StorageMechanism.deleteAll_(),10);case 10:return sn.db_=null,sn.v1_=null,sn.v2_=null,sn.v3_=null,sn.v5_=null,ln.yield(sn.init(),0)}})},shaka.offline.indexeddb.StorageMechanism.createV1_=function(sn){var ln=shaka.offline.indexeddb.StorageMechanism,cn=ln.V1_SEGMENT_STORE;ln=ln.V1_MANIFEST_STORE;var dn=sn.objectStoreNames;return dn.contains(ln)&&dn.contains(cn)?(shaka.log.debug("Mounting v1 idb storage cell"),new shaka.offline.indexeddb.V1StorageCell(sn,cn,ln)):null},shaka.offline.indexeddb.StorageMechanism.createV2_=function(sn){var ln=shaka.offline.indexeddb.StorageMechanism,cn=ln.V2_SEGMENT_STORE;ln=ln.V2_MANIFEST_STORE;var dn=sn.objectStoreNames;return dn.contains(ln)&&dn.contains(cn)?(shaka.log.debug("Mounting v2 idb storage cell"),new shaka.offline.indexeddb.V2StorageCell(sn,cn,ln)):null},shaka.offline.indexeddb.StorageMechanism.createV3_=function(sn){var ln=shaka.offline.indexeddb.StorageMechanism,cn=ln.V3_SEGMENT_STORE;ln=ln.V3_MANIFEST_STORE;var dn=sn.objectStoreNames;return dn.contains(ln)&&dn.contains(cn)?(shaka.log.debug("Mounting v3 idb storage cell"),new shaka.offline.indexeddb.V2StorageCell(sn,cn,ln)):null},shaka.offline.indexeddb.StorageMechanism.createV5_=function(sn){var ln=shaka.offline.indexeddb.StorageMechanism,cn=ln.V5_SEGMENT_STORE;ln=ln.V5_MANIFEST_STORE;var dn=sn.objectStoreNames;return dn.contains(ln)&&dn.contains(cn)?(shaka.log.debug("Mounting v5 idb storage cell"),new shaka.offline.indexeddb.V5StorageCell(sn,cn,ln)):null},shaka.offline.indexeddb.StorageMechanism.createEmeSessionCell_=function(sn){var ln=shaka.offline.indexeddb.StorageMechanism.SESSION_ID_STORE;return sn.objectStoreNames.contains(ln)?(shaka.log.debug("Mounting session ID idb storage cell"),new shaka.offline.indexeddb.EmeSessionStorageCell(sn,ln)):null},shaka.offline.indexeddb.StorageMechanism.prototype.createStores_=function(sn){for(var ln=$jscomp.makeIterator([shaka.offline.indexeddb.StorageMechanism.V5_SEGMENT_STORE,shaka.offline.indexeddb.StorageMechanism.V5_MANIFEST_STORE,shaka.offline.indexeddb.StorageMechanism.SESSION_ID_STORE]),cn=ln.next();!cn.done;cn=ln.next())cn=cn.value,sn.objectStoreNames.contains(cn)||sn.createObjectStore(cn,{autoIncrement:!0})},shaka.offline.indexeddb.StorageMechanism.deleteAll_=function(){var sn=shaka.offline.indexeddb.StorageMechanism.DB_NAME,ln=new shaka.util.PublicPromise,cn=window.indexedDB.deleteDatabase(sn);return cn.onblocked=function(dn){shaka.log.warning("Deleting",sn,"is being blocked",dn)},cn.onsuccess=function(dn){ln.resolve()},cn.onerror=function(dn){ln.reject(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.INDEXED_DB_ERROR,cn.error)),dn.preventDefault()},ln},shaka.offline.indexeddb.StorageMechanism.DB_NAME="shaka_offline_db",shaka.offline.indexeddb.StorageMechanism.VERSION=5,shaka.offline.indexeddb.StorageMechanism.V1_SEGMENT_STORE="segment",shaka.offline.indexeddb.StorageMechanism.V2_SEGMENT_STORE="segment-v2",shaka.offline.indexeddb.StorageMechanism.V3_SEGMENT_STORE="segment-v3",shaka.offline.indexeddb.StorageMechanism.V5_SEGMENT_STORE="segment-v5",shaka.offline.indexeddb.StorageMechanism.V1_MANIFEST_STORE="manifest",shaka.offline.indexeddb.StorageMechanism.V2_MANIFEST_STORE="manifest-v2",shaka.offline.indexeddb.StorageMechanism.V3_MANIFEST_STORE="manifest-v3",shaka.offline.indexeddb.StorageMechanism.V5_MANIFEST_STORE="manifest-v5",shaka.offline.indexeddb.StorageMechanism.SESSION_ID_STORE="session-ids",shaka.offline.StorageMuxer.register("idb",function(){return shaka.util.Platform.isChromecast()||shaka.util.Platform.isXboxOne()||!window.indexedDB?null:new shaka.offline.indexeddb.StorageMechanism}),shaka.offline.OfflineUri=function(sn,ln,cn,dn){this.type_=sn,this.mechanism_=ln,this.cell_=cn,this.key_=dn,this.asString_=["offline:",sn,"/",ln,"/",cn,"/",dn].join("")},shaka.offline.OfflineUri.prototype.isManifest=function(){return this.type_=="manifest"},shaka.offline.OfflineUri.prototype.isSegment=function(){return this.type_=="segment"},shaka.offline.OfflineUri.prototype.mechanism=function(){return this.mechanism_},shaka.offline.OfflineUri.prototype.cell=function(){return this.cell_},shaka.offline.OfflineUri.prototype.key=function(){return this.key_},shaka.offline.OfflineUri.prototype.toString=function(){return this.asString_},shaka.offline.OfflineUri.parse=function(sn){if(sn=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(sn),sn==null)return null;var ln=sn[1];if(ln!="manifest"&&ln!="segment")return null;var cn=sn[2];if(!cn)return null;var dn=sn[3];return dn&&ln!=null?new shaka.offline.OfflineUri(ln,cn,dn,Number(sn[4])):null},shaka.offline.OfflineUri.manifest=function(sn,ln,cn){return new shaka.offline.OfflineUri("manifest",sn,ln,cn)},shaka.offline.OfflineUri.segment=function(sn,ln,cn){return new shaka.offline.OfflineUri("segment",sn,ln,cn)},shaka.offline.ManifestConverter=function(sn,ln){this.mechanism_=sn,this.cell_=ln},shaka.offline.ManifestConverter.prototype.fromManifestDB=function(sn){var ln=this,cn=new shaka.media.PresentationTimeline(null,0);cn.setDuration(sn.duration);var dn=sn.streams.filter(function(Pn){return ln.isAudio_(Pn)}),pn=sn.streams.filter(function(Pn){return ln.isVideo_(Pn)});dn=this.createVariants(dn,pn,cn),pn=sn.streams.filter(function(Pn){return ln.isText_(Pn)}).map(function(Pn){return ln.fromStreamDB_(Pn,cn)});var vn=sn.streams.filter(function(Pn){return ln.isImage_(Pn)}).map(function(Pn){return ln.fromStreamDB_(Pn,cn)}),kn=sn.drmInfo?[sn.drmInfo]:[];if(sn.drmInfo)for(var Sn=$jscomp.makeIterator(dn.values()),wn=Sn.next();!wn.done;wn=Sn.next())wn=wn.value,wn.audio&&wn.audio.encrypted&&(wn.audio.drmInfos=kn),wn.video&&wn.video.encrypted&&(wn.video.drmInfos=kn);return{presentationTimeline:cn,minBufferTime:2,offlineSessionIds:sn.sessionIds,variants:Array.from(dn.values()),textStreams:pn,imageStreams:vn,sequenceMode:sn.sequenceMode||!1}},shaka.offline.ManifestConverter.prototype.createVariants=function(sn,ln,cn){for(var dn=new Set,pn=$jscomp.makeIterator(sn),vn=pn.next();!vn.done;vn=pn.next()){var kn=$jscomp.makeIterator(vn.value.variantIds);for(vn=kn.next();!vn.done;vn=kn.next())dn.add(vn.value)}for(pn=$jscomp.makeIterator(ln),vn=pn.next();!vn.done;vn=pn.next())for(kn=$jscomp.makeIterator(vn.value.variantIds),vn=kn.next();!vn.done;vn=kn.next())dn.add(vn.value);for(pn=new Map,dn=$jscomp.makeIterator(dn),vn=dn.next();!vn.done;vn=dn.next())vn=vn.value,pn.set(vn,this.createEmptyVariant_(vn));for(sn=$jscomp.makeIterator(sn),dn=sn.next();!dn.done;dn=sn.next())for(dn=dn.value,vn=this.fromStreamDB_(dn,cn),kn=$jscomp.makeIterator(dn.variantIds),dn=kn.next();!dn.done;dn=kn.next())dn=pn.get(dn.value),goog.asserts.assert(!dn.audio,"A variant should only have one audio stream"),dn.language=vn.language,dn.primary=dn.primary||vn.primary,dn.audio=vn;for(ln=$jscomp.makeIterator(ln),sn=ln.next();!sn.done;sn=ln.next())for(dn=sn.value,sn=this.fromStreamDB_(dn,cn),vn=$jscomp.makeIterator(dn.variantIds),dn=vn.next();!dn.done;dn=vn.next())dn=pn.get(dn.value),goog.asserts.assert(!dn.video,"A variant should only have one video stream"),dn.primary=dn.primary||sn.primary,dn.video=sn;return pn},shaka.offline.ManifestConverter.prototype.fromStreamDB_=function(sn,ln){var cn=this,dn=sn.segments.map(function(pn,vn){return cn.fromSegmentDB_(vn,pn)});return ln.notifySegments(dn),ln=new shaka.media.SegmentIndex(dn),{id:sn.id,originalId:sn.originalId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:ln,mimeType:sn.mimeType,codecs:sn.codecs,width:sn.width||void 0,height:sn.height||void 0,frameRate:sn.frameRate,pixelAspectRatio:sn.pixelAspectRatio,hdr:sn.hdr,kind:sn.kind,encrypted:sn.encrypted,drmInfos:[],keyIds:sn.keyIds,language:sn.language,label:sn.label,type:sn.type,primary:sn.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:sn.roles,forced:sn.forced,channelsCount:sn.channelsCount,audioSamplingRate:sn.audioSamplingRate,spatialAudio:sn.spatialAudio,closedCaptions:sn.closedCaptions,tilesLayout:sn.tilesLayout}},shaka.offline.ManifestConverter.prototype.fromSegmentDB_=function(sn,ln){var cn=shaka.offline.OfflineUri.segment(this.mechanism_,this.cell_,ln.dataKey);return sn=ln.initSegmentKey!=null?this.fromInitSegmentDB_(ln.initSegmentKey):null,new shaka.media.SegmentReference(ln.startTime,ln.endTime,function(){return[cn.toString()]},0,null,sn,ln.timestampOffset,ln.appendWindowStart,ln.appendWindowEnd,[],ln.tilesLayout||"")},shaka.offline.ManifestConverter.prototype.fromInitSegmentDB_=function(sn){var ln=shaka.offline.OfflineUri.segment(this.mechanism_,this.cell_,sn);return new shaka.media.InitSegmentReference(function(){return[ln.toString()]},0,null)},shaka.offline.ManifestConverter.prototype.isAudio_=function(sn){return sn.type==shaka.util.ManifestParserUtils.ContentType.AUDIO},shaka.offline.ManifestConverter.prototype.isVideo_=function(sn){return sn.type==shaka.util.ManifestParserUtils.ContentType.VIDEO},shaka.offline.ManifestConverter.prototype.isText_=function(sn){return sn.type==shaka.util.ManifestParserUtils.ContentType.TEXT},shaka.offline.ManifestConverter.prototype.isImage_=function(sn){return sn.type==shaka.util.ManifestParserUtils.ContentType.IMAGE},shaka.offline.ManifestConverter.prototype.createEmptyVariant_=function(sn){return{id:sn,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}},shaka.offline.OfflineManifestParser=function(){this.uri_=null},shaka.offline.OfflineManifestParser.prototype.configure=function(sn){},shaka.offline.OfflineManifestParser.prototype.start=function(sn,ln){var cn=this,dn,pn,vn,kn,Sn,wn,Pn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Nn){switch(Nn.nextAddress){case 1:if(dn=shaka.offline.OfflineUri.parse(sn),cn.uri_=dn,dn==null||!dn.isManifest())throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.MALFORMED_OFFLINE_URI,sn);return pn=new shaka.offline.StorageMuxer,Nn.setFinallyBlock(2),Nn.yield(pn.init(),4);case 4:return Nn.yield(pn.getCell(dn.mechanism(),dn.cell()),5);case 5:return vn=Nn.yieldResult,Nn.yield(vn.getManifests([dn.key()]),6);case 6:return kn=Nn.yieldResult,Sn=kn[0],wn=new shaka.offline.ManifestConverter(dn.mechanism(),dn.cell()),Pn=wn.fromManifestDB(Sn),ln.makeTextStreamsForClosedCaptions(Pn),Nn.return(Pn);case 2:return Nn.enterFinallyBlock(),Nn.yield(pn.destroy(),7);case 7:Nn.leaveFinallyBlock(0)}})},shaka.offline.OfflineManifestParser.prototype.stop=function(){return Promise.resolve()},shaka.offline.OfflineManifestParser.prototype.update=function(){},shaka.offline.OfflineManifestParser.prototype.onExpirationUpdated=function(sn,ln){var cn=this,dn,pn,vn,kn,Sn,wn,Pn,Nn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ln){switch(Ln.nextAddress){case 1:return goog.asserts.assert(cn.uri_,"Should not get update event before start has been called"),dn=cn.uri_,pn=new shaka.offline.StorageMuxer,Ln.setCatchFinallyBlocks(2,3),Ln.yield(pn.init(),5);case 5:return Ln.yield(pn.getCell(dn.mechanism(),dn.cell()),6);case 6:return vn=Ln.yieldResult,Ln.yield(vn.getManifests([dn.key()]),7);case 7:if(kn=Ln.yieldResult,Sn=kn[0],wn=Sn.sessionIds.includes(sn),Pn=Sn.expiration==null||Sn.expiration>ln,!wn||!Pn){Ln.jumpTo(3);break}return shaka.log.debug("Updating expiration for stored content"),Ln.yield(vn.updateManifestExpiration(dn.key(),ln),3);case 3:return Ln.enterFinallyBlock(),Ln.yield(pn.destroy(),10);case 10:Ln.leaveFinallyBlock(0);break;case 2:Nn=Ln.enterCatchBlock(),shaka.log.error("There was an error updating",dn,Nn),Ln.jumpTo(3)}})},shaka.media.ManifestParser.registerParserByMime("application/x-offline-manifest",function(){return new shaka.offline.OfflineManifestParser}),shaka.offline.OfflineScheme=function(){},shaka.offline.OfflineScheme.plugin=function(sn,ln,cn,dn){return(ln=shaka.offline.OfflineUri.parse(sn))&&ln.isManifest()?shaka.offline.OfflineScheme.getManifest_(sn):ln&&ln.isSegment()?shaka.offline.OfflineScheme.getSegment_(ln.key(),ln):shaka.util.AbortableOperation.failed(new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.NETWORK,shaka.util.Error.Code.MALFORMED_OFFLINE_URI,sn))},shaka.offline.OfflineScheme.getManifest_=function(sn){return sn={uri:sn,originalUri:sn,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},shaka.util.AbortableOperation.completed(sn)},shaka.offline.OfflineScheme.getSegment_=function(sn,ln){goog.asserts.assert(ln.isSegment(),"Only segment uri's should be given to getSegment");var cn=new shaka.offline.StorageMuxer;return shaka.util.AbortableOperation.completed(void 0).chain(function(){return cn.init()}).chain(function(){return cn.getCell(ln.mechanism(),ln.cell())}).chain(function(dn){return dn.getSegments([ln.key()])}).chain(function(dn){return{uri:ln,data:dn[0].data,headers:{}}}).finally(function(){return cn.destroy()})},goog.exportSymbol("shaka.offline.OfflineScheme",shaka.offline.OfflineScheme),goog.exportProperty(shaka.offline.OfflineScheme,"plugin",shaka.offline.OfflineScheme.plugin),shaka.net.NetworkingEngine.registerScheme("offline",shaka.offline.OfflineScheme.plugin),shaka.offline.SessionDeleter=function(){},shaka.offline.SessionDeleter.prototype.delete=function(sn,ln,cn){var dn=this,pn,vn,kn,Sn,wn,Pn,Nn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Ln){switch(Ln.nextAddress){case 1:pn=shaka.offline.SessionDeleter,vn=[],kn=$jscomp.makeIterator(pn.createBuckets_(cn)),Sn=kn.next();case 2:if(Sn.done){Ln.jumpTo(4);break}return wn=Sn.value,Pn=dn.doDelete_(sn,ln,wn),Ln.yield(Pn,5);case 5:Nn=Ln.yieldResult,vn=vn.concat(Nn),Sn=kn.next(),Ln.jumpTo(2);break;case 4:return Ln.return(vn)}})},shaka.offline.SessionDeleter.prototype.doDelete_=function(sn,ln,cn){var dn,pn,vn,kn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sn){switch(Sn.nextAddress){case 1:return dn=new shaka.media.DrmEngine({netEngine:ln,onError:function(){},onKeyStatus:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),Sn.setCatchFinallyBlocks(2),dn.configure(sn),Sn.yield(dn.initForRemoval(cn.info.keySystem,cn.info.licenseUri,cn.info.serverCertificate,cn.info.audioCapabilities,cn.info.videoCapabilities),4);case 4:Sn.leaveTryBlock(3);break;case 2:return pn=Sn.enterCatchBlock(),shaka.log.warning("Error initializing EME",pn),Sn.yield(dn.destroy(),5);case 5:return Sn.return([]);case 3:return Sn.setCatchFinallyBlocks(6),Sn.yield(dn.setServerCertificate(),8);case 8:Sn.leaveTryBlock(7);break;case 6:return vn=Sn.enterCatchBlock(),shaka.log.warning("Error setting server certificate",vn),Sn.yield(dn.destroy(),9);case 9:return Sn.return([]);case 7:return kn=[],Sn.yield(Promise.all(cn.sessionIds.map(function(wn){var Pn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Nn){if(Nn.nextAddress==1)return Nn.setCatchFinallyBlocks(2),Nn.yield(dn.removeSession(wn),4);if(Nn.nextAddress!=2)return kn.push(wn),Nn.leaveTryBlock(0);Pn=Nn.enterCatchBlock(),shaka.log.warning("Error deleting offline session",Pn),Nn.jumpToEnd()})})),10);case 10:return Sn.yield(dn.destroy(),11);case 11:return Sn.return(kn)}})},shaka.offline.SessionDeleter.createBuckets_=function(sn){var ln=shaka.offline.SessionDeleter,cn=[];sn=$jscomp.makeIterator(sn);for(var dn=sn.next();!dn.done;dn=sn.next()){dn=dn.value;for(var pn=!1,vn=$jscomp.makeIterator(cn),kn=vn.next();!kn.done;kn=vn.next())if(kn=kn.value,ln.isCompatible_(kn.info,dn)){kn.sessionIds.push(dn.sessionId),pn=!0;break}pn||cn.push({info:dn,sessionIds:[dn.sessionId]})}return cn},shaka.offline.SessionDeleter.isCompatible_=function(sn,ln){var cn=shaka.util.ArrayUtils,dn=function(pn,vn){return pn.robustness==vn.robustness&&pn.contentType==vn.contentType};return sn.keySystem==ln.keySystem&&sn.licenseUri==ln.licenseUri&&cn.hasSameElements(sn.audioCapabilities,ln.audioCapabilities,dn)&&cn.hasSameElements(sn.videoCapabilities,ln.videoCapabilities,dn)},shaka.offline.StoredContentUtils=function(){},shaka.offline.StoredContentUtils.fromManifest=function(sn,ln,cn,dn){goog.asserts.assert(ln.variants.length,"Cannot create stored content from manifest with no variants.");var pn=ln.presentationTimeline.getDuration();return ln=shaka.offline.StoredContentUtils.getTracks_(ln),{offlineUri:null,originalManifestUri:sn,duration:pn,size:cn,expiration:1/0,tracks:ln,appMetadata:dn,isIncomplete:!1}},shaka.offline.StoredContentUtils.fromManifestDB=function(sn,ln){goog.asserts.assert(ln.streams.length,"Cannot create stored content from manifestDB with no streams.");var cn=new shaka.offline.ManifestConverter(sn.mechanism(),sn.cell()).fromManifestDB(ln),dn=ln.appMetadata||{};return cn=shaka.offline.StoredContentUtils.getTracks_(cn),goog.asserts.assert(ln.expiration!=null,"Manifest expiration must be set by now!"),{offlineUri:sn.toString(),originalManifestUri:ln.originalManifestUri,duration:ln.duration,size:ln.size,expiration:ln.expiration,tracks:cn,appMetadata:dn,isIncomplete:ln.isIncomplete||!1}},shaka.offline.StoredContentUtils.getTracks_=function(sn){var ln=shaka.util.StreamUtils,cn=[],dn=ln.getPlayableVariants(sn.variants);dn=$jscomp.makeIterator(dn);for(var pn=dn.next();!pn.done;pn=dn.next())cn.push(ln.variantToTrack(pn.value));for(sn=$jscomp.makeIterator(sn.textStreams),dn=sn.next();!dn.done;dn=sn.next())cn.push(ln.textStreamToTrack(dn.value));return cn},shaka.offline.StreamBandwidthEstimator=function(){this.estimateByStreamId_={}},shaka.offline.StreamBandwidthEstimator.prototype.addVariant=function(sn){var ln=sn.audio,cn=sn.video;if(ln&&!cn&&this.setBitrate_(ln.id,ln.bandwidth||sn.bandwidth),!ln&&cn&&this.setBitrate_(cn.id,cn.bandwidth||sn.bandwidth),ln&&cn){var dn=ln.bandwidth||shaka.offline.StreamBandwidthEstimator.DEFAULT_AUDIO_BITRATE_,pn=cn.bandwidth||sn.bandwidth-dn;0>=pn&&(shaka.log.warning("Audio bit rate consumes variants bandwidth. Setting video bandwidth to match variant's bandwidth."),pn=sn.bandwidth),this.setBitrate_(ln.id,dn),this.setBitrate_(cn.id,pn)}},shaka.offline.StreamBandwidthEstimator.prototype.setBitrate_=function(sn,ln){this.estimateByStreamId_[sn]=ln},shaka.offline.StreamBandwidthEstimator.prototype.addText=function(sn){this.estimateByStreamId_[sn.id]=shaka.offline.StreamBandwidthEstimator.DEFAULT_TEXT_BITRATE_},shaka.offline.StreamBandwidthEstimator.prototype.addImage=function(sn){this.estimateByStreamId_[sn.id]=sn.bandwidth||shaka.offline.StreamBandwidthEstimator.DEFAULT_IMAGE_BITRATE_},shaka.offline.StreamBandwidthEstimator.prototype.getSegmentEstimate=function(sn,ln){return ln=ln.endTime-ln.startTime,this.getEstimate_(sn)*ln},shaka.offline.StreamBandwidthEstimator.prototype.getInitSegmentEstimate=function(sn){return .5*this.getEstimate_(sn)},shaka.offline.StreamBandwidthEstimator.prototype.getEstimate_=function(sn){return sn=this.estimateByStreamId_[sn],sn==null&&(sn=0,shaka.log.error("Asking for bitrate of stream not given to the estimator")),sn==0&&shaka.log.warning("Using bitrate of 0, this stream won't affect progress"),sn},shaka.offline.StreamBandwidthEstimator.DEFAULT_AUDIO_BITRATE_=393216,shaka.offline.StreamBandwidthEstimator.DEFAULT_TEXT_BITRATE_=52,shaka.offline.StreamBandwidthEstimator.DEFAULT_IMAGE_BITRATE_=2048,shaka.offline.Storage=function(sn){var ln=this;if(sn&&sn.constructor!=shaka.Player)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.LOCAL_PLAYER_INSTANCE_REQUIRED);this.networkingEngine_=this.config_=null,sn?(this.config_=sn.getSharedConfiguration(),this.networkingEngine_=sn.getNetworkingEngine(),goog.asserts.assert(this.networkingEngine_,"Storage should not be initialized with a player that had |destroy| called on it.")):(this.config_=shaka.util.PlayerConfiguration.createDefault(),this.networkingEngine_=new shaka.net.NetworkingEngine),this.openOperations_=[],this.openDownloadManagers_=[];var cn=!sn;this.destroyer_=new shaka.util.Destroyer(function(){var dn,pn,vn,kn,Sn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wn){switch(wn.nextAddress){case 1:return wn.yield(Promise.all(ln.openDownloadManagers_.map(function(Pn){return Pn.abortAll()})),2);case 2:for(dn=function(){},pn=[],vn=$jscomp.makeIterator(ln.openOperations_),kn=vn.next();!kn.done;kn=vn.next())Sn=kn.value,pn.push(Sn.then(dn,dn));return wn.yield(Promise.all(pn),3);case 3:if(!cn){wn.jumpTo(4);break}return wn.yield(ln.networkingEngine_.destroy(),4);case 4:ln.config_=null,ln.networkingEngine_=null,wn.jumpToEnd()}})})},shaka.offline.Storage.support=function(){return shaka.util.Platform.supportsMediaSource()?shaka.offline.StorageMuxer.support():!1},shaka.offline.Storage.prototype.destroy=function(){return this.destroyer_.destroy()},shaka.offline.Storage.prototype.configure=function(sn,ln){return goog.asserts.assert(typeof sn=="object"||arguments.length==2,"String configs should have values!"),arguments.length==2&&typeof sn=="string"&&(sn=shaka.util.ConfigUtils.convertToConfigObject(sn,ln)),goog.asserts.assert(typeof sn=="object","Should be an object!"),goog.asserts.assert(this.config_,"Cannot reconfigure storage after calling destroy."),shaka.util.PlayerConfiguration.mergeConfigObjects(this.config_,sn)},shaka.offline.Storage.prototype.getConfiguration=function(){goog.asserts.assert(this.config_,"Config must not be null!");var sn=shaka.util.PlayerConfiguration.createDefault();return shaka.util.PlayerConfiguration.mergeConfigObjects(sn,this.config_,shaka.util.PlayerConfiguration.createDefault()),sn},shaka.offline.Storage.prototype.getNetworkingEngine=function(){return this.networkingEngine_},shaka.offline.Storage.prototype.store=function(sn,ln,cn){var dn=this;goog.asserts.assert(this.networkingEngine_,"Cannot call |store| after calling |destroy|.");var pn=this.getConfiguration(),vn=new shaka.offline.DownloadManager(this.networkingEngine_);return this.openDownloadManagers_.push(vn),ln=this.store_(sn,ln||{},function(){var kn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Sn){return Sn.nextAddress==1?(goog.asserts.assert(dn.networkingEngine_,"Should not call |store| after |destroy|"),Sn.yield(shaka.media.ManifestParser.getFactory(sn,dn.networkingEngine_,pn.manifest.retryParameters,cn||null),2)):(kn=Sn.yieldResult,Sn.return(kn()))})},pn,vn),ln=new shaka.util.AbortableOperation(ln,function(){return vn.abortAll()}),ln.finally(function(){shaka.util.ArrayUtils.remove(dn.openDownloadManagers_,vn)}),this.startAbortableOperation_(ln)},shaka.offline.Storage.prototype.store_=function(sn,ln,cn,dn,pn){var vn=this,kn,Sn,wn,Pn,Nn,Ln,Fn,zn,Dn,Kn,qn,Zn,Yn,Jn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(rs){switch(rs.nextAddress){case 1:return vn.requireSupport_(),Sn=kn=null,wn=new shaka.offline.StorageMuxer,Ln=Nn=Pn=null,rs.setCatchFinallyBlocks(2,3),rs.yield(cn(),5);case 5:return kn=rs.yieldResult,rs.yield(vn.parseManifest(sn,kn,dn),6);case 6:if(Fn=rs.yieldResult,vn.ensureNotDestroyed_(),zn=!Fn.presentationTimeline.isLive()&&!Fn.presentationTimeline.isInProgress(),!zn)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.CANNOT_STORE_LIVE_OFFLINE,sn);return rs.yield(vn.createDrmEngine(Fn,function(ss){Ln=Ln||ss},dn),7);case 7:if(Sn=rs.yieldResult,vn.ensureNotDestroyed_(),Ln)throw Ln;return rs.yield(vn.filterManifest_(Fn,Sn,dn),8);case 8:return rs.yield(wn.init(),9);case 9:return vn.ensureNotDestroyed_(),rs.yield(wn.getActive(),10);case 10:return Pn=rs.yieldResult,vn.ensureNotDestroyed_(),goog.asserts.assert(Sn,"drmEngine should be non-null here."),Dn=vn.makeManifestDB_(Sn,Fn,sn,ln,dn,pn),Kn=Dn.manifestDB,qn=Dn.toDownload,rs.yield(Pn.cell.addManifests([Kn]),11);case 11:if(Zn=rs.yieldResult,vn.ensureNotDestroyed_(),Nn=Zn[0],goog.asserts.assert(Sn,"drmEngine should be non-null here."),vn.ensureNotDestroyed_(),Ln)throw Ln;return rs.yield(vn.downloadSegments_(qn,Nn,Kn,pn,dn,Pn.cell,Fn,Sn),12);case 12:return vn.ensureNotDestroyed_(),Yn=shaka.offline.OfflineUri.manifest(Pn.path.mechanism,Pn.path.cell,Nn),rs.return(shaka.offline.StoredContentUtils.fromManifestDB(Yn,Kn));case 3:return rs.enterFinallyBlock(),rs.yield(wn.destroy(),13);case 13:if(!kn){rs.jumpTo(14);break}return rs.yield(kn.stop(),14);case 14:if(!Sn){rs.jumpTo(16);break}return rs.yield(Sn.destroy(),16);case 16:rs.leaveFinallyBlock(0);break;case 2:if(Jn=rs.enterCatchBlock(),Nn==null){rs.jumpTo(18);break}return rs.yield(shaka.offline.Storage.cleanStoredManifest(Nn),18);case 18:throw Ln||Jn}})},shaka.offline.Storage.prototype.downloadSegments_=function(sn,ln,cn,dn,pn,vn,kn,Sn){var wn=this,Pn,Nn,Ln,Fn,zn,Dn,Kn,qn,Zn,Yn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Jn){switch(Jn.nextAddress){case 1:if(Pn={},Nn=0,Ln=function(rs,ss){var as,ds,Es,Ss,Qn,ms,Ts;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Rs){if(Rs.nextAddress==1){for(as={},ds=$jscomp.makeIterator(rs),Es=ds.next();!Es.done;as={$jscomp$loop$prop$download$631$744:as.$jscomp$loop$prop$download$631$744},Es=ds.next())as.$jscomp$loop$prop$download$631$744=Es.value,Ss=as.$jscomp$loop$prop$download$631$744.makeSegmentRequest(pn),Qn=as.$jscomp$loop$prop$download$631$744.estimateId,ms=as.$jscomp$loop$prop$download$631$744.isInitSegment,Ts=function(ys){return function(_s){var js,bs,ks;return $jscomp.asyncExecutePromiseGeneratorProgram(function(xs){if(xs.nextAddress==1)return xs.yield(vn.addSegments([{data:_s}]),2);js=xs.yieldResult,wn.ensureNotDestroyed_(),bs=ys.$jscomp$loop$prop$download$631$744.ref,ks=shaka.offline.DownloadInfo.idForSegmentRef(bs),Pn[ks]=js[0],Nn+=_s.byteLength,xs.jumpToEnd()})}}(as),dn.queue(as.$jscomp$loop$prop$download$631$744.groupId,Ss,Qn,ms,Ts);return Rs.yield(dn.waitToFinish(),2)}return ss?(wn.ensureNotDestroyed_(),wn.setManifestDrmFields_(kn,cn,Sn,pn),Rs.yield(vn.updateManifest(ln,cn),0)):Rs.jumpTo(0)})},Fn=!1,Jn.setCatchFinallyBlocks(2),!wn.getManifestIsEncrypted_(kn)||!Fn||wn.getManifestIncludesInitData_(kn)){Jn.jumpTo(4);break}return Jn.yield(Ln(sn.filter(function(rs){return rs.isInitSegment}),!0),5);case 5:return wn.ensureNotDestroyed_(),sn=sn.filter(function(rs){return!rs.isInitSegment}),zn=Pn,Dn=Nn,Pn={},Nn=0,Jn.yield(shaka.offline.Storage.assignSegmentsToManifest(vn,ln,cn,zn,Dn,function(){return wn.ensureNotDestroyed_()}),6);case 6:wn.ensureNotDestroyed_();case 4:if(Fn){Jn.jumpTo(7);break}return Jn.yield(Ln(sn,!1),8);case 8:return wn.ensureNotDestroyed_(),Kn=Pn,qn=Nn,Pn={},Nn=0,Jn.yield(shaka.offline.Storage.assignSegmentsToManifest(vn,ln,cn,Kn,qn,function(){return wn.ensureNotDestroyed_()}),9);case 9:wn.ensureNotDestroyed_(),goog.asserts.assert(!cn.isIncomplete,"The manifest should be complete by now");case 7:Jn.leaveTryBlock(0);break;case 2:return Zn=Jn.enterCatchBlock(),Yn=Object.values(Pn),Jn.yield(vn.removeSegments(Yn,function(rs){}),10);case 10:throw Zn}})},shaka.offline.Storage.cleanStoredManifest=function(sn){var ln,cn,dn,pn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(vn){switch(vn.nextAddress){case 1:return ln=new shaka.offline.StorageMuxer,vn.yield(ln.init(),2);case 2:return vn.yield(ln.getActive(),3);case 3:return cn=vn.yieldResult,dn=shaka.offline.OfflineUri.manifest(cn.path.mechanism,cn.path.cell,sn),vn.yield(ln.destroy(),4);case 4:return pn=new shaka.offline.Storage,vn.yield(pn.remove(dn.toString()),0)}})},shaka.offline.Storage.assignSegmentsToManifest=function(sn,ln,cn,dn,pn,vn){var kn,Sn,wn,Pn,Nn,Ln,Fn,zn,Dn,Kn,qn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Zn){switch(Zn.nextAddress){case 1:for(kn=!1,Zn.setCatchFinallyBlocks(2),Sn=!0,wn=$jscomp.makeIterator(cn.streams),Pn=wn.next();!Pn.done;Pn=wn.next())for(Nn=Pn.value,Ln=$jscomp.makeIterator(Nn.segments),Fn=Ln.next();!Fn.done;Fn=Ln.next())zn=Fn.value,Dn=zn.pendingSegmentRefId?dn[zn.pendingSegmentRefId]:null,Dn!=null&&(zn.dataKey=Dn,zn.pendingSegmentRefId=void 0),Dn=zn.pendingInitSegmentRefId?dn[zn.pendingInitSegmentRefId]:null,Dn!=null&&(zn.initSegmentKey=Dn,zn.pendingInitSegmentRefId=void 0),zn.pendingSegmentRefId&&(Sn=!1),zn.pendingInitSegmentRefId&&(Sn=!1);return cn.size+=pn,Sn&&(cn.isIncomplete=!1),Zn.yield(sn.updateManifest(ln,cn),4);case 4:kn=!0,vn(),Zn.leaveTryBlock(0);break;case 2:return Kn=Zn.enterCatchBlock(),Zn.yield(shaka.offline.Storage.cleanStoredManifest(ln),5);case 5:if(kn){Zn.jumpTo(6);break}return qn=Object.values(dn),Zn.yield(sn.removeSegments(qn,function(Yn){}),6);case 6:throw Kn}})},shaka.offline.Storage.prototype.filterManifest_=function(sn,ln,cn){var dn,pn,vn,kn,Sn,wn,Pn,Nn,Ln,Fn,zn,Dn,Kn,qn,Zn,Yn,Jn,rs,ss,as,ds,Es,Ss,Qn,ms,Ts,Rs,ys,_s;return $jscomp.asyncExecutePromiseGeneratorProgram(function(js){switch(js.nextAddress){case 1:return dn={width:1/0,height:1/0},shaka.util.StreamUtils.filterByRestrictions(sn,cn.restrictions,dn),js.yield(shaka.util.StreamUtils.filterManifestByMediaCapabilities(sn,cn.offline.usePersistentLicense),2);case 2:for(pn=[],vn=cn.preferredAudioChannelCount,kn=cn.preferredDecodingAttributes,Sn=cn.preferredVideoCodecs,wn=cn.preferredAudioCodecs,shaka.util.StreamUtils.chooseCodecsAndFilterManifest(sn,Sn,wn,vn,kn),Pn=$jscomp.makeIterator(sn.variants),Nn=Pn.next();!Nn.done;Nn=Pn.next())Ln=Nn.value,goog.asserts.assert(shaka.util.StreamUtils.isPlayable(Ln),'We should have already filtered by "is playable"'),pn.push(shaka.util.StreamUtils.variantToTrack(Ln));for(Fn=$jscomp.makeIterator(sn.textStreams),zn=Fn.next();!zn.done;zn=Fn.next())Dn=zn.value,pn.push(shaka.util.StreamUtils.textStreamToTrack(Dn));for(Kn=$jscomp.makeIterator(sn.imageStreams),qn=Kn.next();!qn.done;qn=Kn.next())Zn=qn.value,pn.push(shaka.util.StreamUtils.imageStreamToTrack(Zn));return js.yield(cn.offline.trackSelectionCallback(pn),3);case 3:for(Yn=js.yieldResult,Jn=sn.presentationTimeline.getDuration(),rs=0,ss=$jscomp.makeIterator(Yn),as=ss.next();!as.done;as=ss.next())ds=as.value,Es=ds.bandwidth*Jn/8,rs+=Es;return js.setCatchFinallyBlocks(4),js.yield(cn.offline.downloadSizeCallback(rs),6);case 6:if(Ss=js.yieldResult,!Ss)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.STORAGE_LIMIT_REACHED);js.leaveTryBlock(5);break;case 4:throw Qn=js.enterCatchBlock(),Qn instanceof shaka.util.Error?Qn:(shaka.log.warning("downloadSizeCallback has produced an unexpected error",Qn),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.DOWNLOAD_SIZE_CALLBACK_ERROR));case 5:for(ms=new Set,Ts=new Set,Rs=new Set,ys=$jscomp.makeIterator(Yn),as=ys.next();!as.done;as=ys.next())_s=as.value,_s.type=="variant"&&ms.add(_s.id),_s.type=="text"&&Ts.add(_s.id),_s.type=="image"&&Rs.add(_s.id);sn.variants=sn.variants.filter(function(bs){return ms.has(bs.id)}),sn.textStreams=sn.textStreams.filter(function(bs){return Ts.has(bs.id)}),sn.imageStreams=sn.imageStreams.filter(function(bs){return Rs.has(bs.id)}),shaka.offline.Storage.validateManifest_(sn),js.jumpToEnd()}})},shaka.offline.Storage.prototype.makeManifestDB_=function(sn,ln,cn,dn,pn,vn){var kn=shaka.offline.StoredContentUtils.fromManifest(cn,ln,0,dn),Sn=pn.offline.progressCallback;vn.setCallbacks(function(zn,Dn){kn.size=Dn,Sn(kn,zn)},function(zn,Dn){wn&&pn.offline.usePersistentLicense&&Pn==Dn&&sn.newInitData("cenc",zn)});var wn=this.getManifestIsEncrypted_(ln)&&!this.getManifestIncludesInitData_(ln),Pn=null;if(wn){var Nn=sn.getDrmInfo();Pn=shaka.offline.Storage.defaultSystemIds_.get(Nn.keySystem)}Nn=new shaka.offline.StreamBandwidthEstimator;for(var Ln=$jscomp.makeIterator(ln.textStreams),Fn=Ln.next();!Fn.done;Fn=Ln.next())Nn.addText(Fn.value);for(Ln=$jscomp.makeIterator(ln.imageStreams),Fn=Ln.next();!Fn.done;Fn=Ln.next())Nn.addImage(Fn.value);for(Fn=$jscomp.makeIterator(ln.variants),Ln=Fn.next();!Ln.done;Ln=Fn.next())Nn.addVariant(Ln.value);return Nn=this.createStreams_(vn,Nn,sn,ln,pn),vn=Nn.streams,Nn=Nn.toDownload,Fn=sn.getDrmInfo(),Ln=pn.offline.usePersistentLicense,Fn&&Ln&&(Fn.initData=[]),{manifestDB:{creationTime:Date.now(),originalManifestUri:cn,duration:ln.presentationTimeline.getDuration(),size:0,expiration:sn.getExpiration(),streams:vn,sessionIds:Ln?sn.getSessionIds():[],drmInfo:Fn,appMetadata:dn,isIncomplete:!0,sequenceMode:ln.sequenceMode},toDownload:Nn}},shaka.offline.Storage.prototype.getManifestIsEncrypted_=function(sn){return sn.variants.some(function(ln){var cn=ln.audio&&ln.audio.encrypted;return ln.video&&ln.video.encrypted||cn})},shaka.offline.Storage.prototype.getManifestIncludesInitData_=function(sn){return sn.variants.some(function(ln){return(ln.video?ln.video.drmInfos:[]).concat(ln.audio?ln.audio.drmInfos:[]).some(function(cn){return cn.initData&&cn.initData.length})})},shaka.offline.Storage.prototype.setManifestDrmFields_=function(sn,ln,cn,dn){if(ln.expiration=cn.getExpiration(),cn=cn.getSessionIds(),ln.sessionIds=dn.offline.usePersistentLicense?cn:[],this.getManifestIsEncrypted_(sn)&&dn.offline.usePersistentLicense&&!cn.length)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.NO_INIT_DATA_FOR_OFFLINE)},shaka.offline.Storage.prototype.remove=function(sn){return this.startOperation_(this.remove_(sn))},shaka.offline.Storage.prototype.remove_=function(sn){var ln=this,cn,dn,pn,vn,kn,Sn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wn){switch(wn.nextAddress){case 1:if(ln.requireSupport_(),cn=shaka.offline.OfflineUri.parse(sn),cn==null||!cn.isManifest())throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.MALFORMED_OFFLINE_URI,sn);return dn=cn,pn=new shaka.offline.StorageMuxer,wn.setFinallyBlock(2),wn.yield(pn.init(),4);case 4:return wn.yield(pn.getCell(dn.mechanism(),dn.cell()),5);case 5:return vn=wn.yieldResult,wn.yield(vn.getManifests([dn.key()]),6);case 6:return kn=wn.yieldResult,Sn=kn[0],wn.yield(Promise.all([ln.removeFromDRM_(dn,Sn,pn),ln.removeFromStorage_(vn,dn,Sn)]),2);case 2:return wn.enterFinallyBlock(),wn.yield(pn.destroy(),8);case 8:wn.leaveFinallyBlock(0)}})},shaka.offline.Storage.getCapabilities_=function(sn,ln){for(var cn=shaka.util.MimeUtils,dn=[],pn=$jscomp.makeIterator(sn.streams),vn=pn.next();!vn.done;vn=pn.next())vn=vn.value,ln&&vn.type=="video"?dn.push({contentType:cn.getFullType(vn.mimeType,vn.codecs),robustness:sn.drmInfo.videoRobustness}):ln||vn.type!="audio"||dn.push({contentType:cn.getFullType(vn.mimeType,vn.codecs),robustness:sn.drmInfo.audioRobustness});return dn},shaka.offline.Storage.prototype.removeFromDRM_=function(sn,ln,cn){var dn=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pn){return goog.asserts.assert(dn.networkingEngine_,"Cannot be destroyed"),pn.yield(shaka.offline.Storage.deleteLicenseFor_(dn.networkingEngine_,dn.config_.drm,cn,ln),0)})},shaka.offline.Storage.prototype.removeFromStorage_=function(sn,ln,cn){var dn=this,pn=shaka.offline.Storage.getAllSegmentIds_(cn),vn=pn.length+1,kn=0,Sn=shaka.offline.StoredContentUtils.fromManifestDB(ln,cn);return cn=function(wn){kn+=1,dn.config_.offline.progressCallback(Sn,kn/vn)},Promise.all([sn.removeSegments(pn,cn),sn.removeManifests([ln.key()],cn)])},shaka.offline.Storage.prototype.removeEmeSessions=function(){return this.startOperation_(this.removeEmeSessions_())},shaka.offline.Storage.prototype.removeEmeSessions_=function(){var sn=this,ln,cn,dn,pn,vn,kn,Sn,wn,Pn,Nn,Ln;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Fn){switch(Fn.nextAddress){case 1:return sn.requireSupport_(),goog.asserts.assert(sn.networkingEngine_,"Cannot be destroyed"),ln=sn.networkingEngine_,cn=sn.config_.drm,dn=new shaka.offline.StorageMuxer,pn=new shaka.offline.SessionDeleter,vn=!1,Fn.setFinallyBlock(2),Fn.yield(dn.init(),4);case 4:kn=[],dn.forEachEmeSessionCell(function(zn){return kn.push(zn)}),Sn=$jscomp.makeIterator(kn),wn=Sn.next();case 5:if(wn.done){Fn.jumpTo(2);break}return Pn=wn.value,Fn.yield(Pn.getAll(),8);case 8:return Nn=Fn.yieldResult,Fn.yield(pn.delete(cn,ln,Nn),9);case 9:return Ln=Fn.yieldResult,Fn.yield(Pn.remove(Ln),10);case 10:Ln.length!=Nn.length&&(vn=!0),wn=Sn.next(),Fn.jumpTo(5);break;case 2:return Fn.enterFinallyBlock(),Fn.yield(dn.destroy(),11);case 11:Fn.leaveFinallyBlock(3);break;case 3:return Fn.return(!vn)}})},shaka.offline.Storage.prototype.list=function(){return this.startOperation_(this.list_())},shaka.offline.Storage.prototype.list_=function(){var sn=this,ln,cn,dn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pn){switch(pn.nextAddress){case 1:return sn.requireSupport_(),ln=[],cn=new shaka.offline.StorageMuxer,pn.setFinallyBlock(2),pn.yield(cn.init(),4);case 4:return dn=Promise.resolve(),cn.forEachCell(function(vn,kn){dn=dn.then(function(){var Sn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wn){if(wn.nextAddress==1)return wn.yield(kn.getAllManifests(),2);Sn=wn.yieldResult,Sn.forEach(function(Pn,Nn){Nn=shaka.offline.OfflineUri.manifest(vn.mechanism,vn.cell,Nn),Pn=shaka.offline.StoredContentUtils.fromManifestDB(Nn,Pn),ln.push(Pn)}),wn.jumpToEnd()})})}),pn.yield(dn,2);case 2:return pn.enterFinallyBlock(),pn.yield(cn.destroy(),6);case 6:pn.leaveFinallyBlock(3);break;case 3:return pn.return(ln)}})},shaka.offline.Storage.prototype.parseManifest=function(sn,ln,cn){var dn=this,pn,vn,kn,Sn,wn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Pn){if(Pn.nextAddress==1)return pn=null,vn=dn.networkingEngine_,goog.asserts.assert(vn,"Should be initialized!"),kn={networkingEngine:vn,modifyManifestRequest:function(Nn,Ln){},modifySegmentRequest:function(Nn,Ln){},filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(Nn){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(Nn){pn=Nn},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(Nn){}},ln.configure(cn.manifest),dn.ensureNotDestroyed_(),Pn.yield(ln.start(sn,kn),2);if(Pn.nextAddress!=3)return Sn=Pn.yieldResult,dn.ensureNotDestroyed_(),wn=shaka.offline.Storage.getAllStreamsFromManifest_(Sn),Pn.yield(Promise.all(shaka.util.Iterables.map(wn,function(Nn){return Nn.createSegmentIndex()})),3);if(dn.ensureNotDestroyed_(),pn)throw pn;return Pn.return(Sn)})},shaka.offline.Storage.prototype.createDrmEngine=function(sn,ln,cn){var dn=this,pn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(vn){switch(vn.nextAddress){case 1:return goog.asserts.assert(dn.networkingEngine_,"Cannot call |createDrmEngine| after |destroy|"),pn=new shaka.media.DrmEngine({netEngine:dn.networkingEngine_,onError:ln,onKeyStatus:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),pn.configure(cn.drm),vn.yield(pn.initForStorage(sn.variants,cn.offline.usePersistentLicense),2);case 2:return vn.yield(pn.setServerCertificate(),3);case 3:return vn.yield(pn.createOrLoad(),4);case 4:return vn.return(pn)}})},shaka.offline.Storage.prototype.createStreams_=function(sn,ln,cn,dn,pn){cn=new Map;var vn=shaka.offline.Storage.getAllStreamsFromManifest_(dn),kn=new Map;vn=$jscomp.makeIterator(vn);for(var Sn=vn.next();!Sn.done;Sn=vn.next()){Sn=Sn.value;var wn=this.createStream_(sn,ln,dn,Sn,pn,cn);kn.set(Sn.id,wn)}for(sn=$jscomp.makeIterator(dn.variants),ln=sn.next();!ln.done;ln=sn.next())ln=ln.value,ln.audio&&kn.get(ln.audio.id).variantIds.push(ln.id),ln.video&&kn.get(ln.video.id).variantIds.push(ln.id);return{streams:Array.from(kn.values()),toDownload:Array.from(cn.values())}},shaka.offline.Storage.prototype.createStream_=function(sn,ln,cn,dn,pn,vn){var kn={id:dn.id,originalId:dn.originalId,primary:dn.primary,type:dn.type,mimeType:dn.mimeType,codecs:dn.codecs,frameRate:dn.frameRate,pixelAspectRatio:dn.pixelAspectRatio,hdr:dn.hdr,kind:dn.kind,language:dn.language,label:dn.label,width:dn.width||null,height:dn.height||null,encrypted:dn.encrypted,keyIds:dn.keyIds,segments:[],variantIds:[],roles:dn.roles,forced:dn.forced,channelsCount:dn.channelsCount,audioSamplingRate:dn.audioSamplingRate,spatialAudio:dn.spatialAudio,closedCaptions:dn.closedCaptions,tilesLayout:dn.tilesLayout};cn=cn.presentationTimeline.getSegmentAvailabilityStart();var Sn=pn.offline.numberOfParallelDownloads,wn=0;return shaka.offline.Storage.forEachSegment_(dn,cn,function(Pn){var Nn=shaka.offline.DownloadInfo.idForSegmentRef(Pn),Ln=void 0;if(!vn.has(Nn)){var Fn=sn.addDownloadEstimate(ln.getSegmentEstimate(dn.id,Pn));Fn=new shaka.offline.DownloadInfo(Pn,Fn,wn,!1),vn.set(Nn,Fn)}Pn.initSegmentReference&&(Ln=shaka.offline.DownloadInfo.idForSegmentRef(Pn.initSegmentReference),vn.has(Ln)||(Fn=sn.addDownloadEstimate(ln.getInitSegmentEstimate(dn.id)),Fn=new shaka.offline.DownloadInfo(Pn.initSegmentReference,Fn,wn,!0),vn.set(Ln,Fn))),kn.segments.push({pendingInitSegmentRefId:Ln,initSegmentKey:Ln?0:null,startTime:Pn.startTime,endTime:Pn.endTime,appendWindowStart:Pn.appendWindowStart,appendWindowEnd:Pn.appendWindowEnd,timestampOffset:Pn.timestampOffset,tilesLayout:Pn.tilesLayout,pendingSegmentRefId:Nn,dataKey:0}),wn=(wn+1)%Sn}),kn},shaka.offline.Storage.forEachSegment_=function(sn,ln,cn){if(ln=sn.segmentIndex.find(ln),ln!=null)for(var dn=sn.segmentIndex.get(ln);dn;)cn(dn),dn=sn.segmentIndex.get(++ln)},shaka.offline.Storage.prototype.ensureNotDestroyed_=function(){if(this.destroyer_.destroyed())throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.OPERATION_ABORTED)},shaka.offline.Storage.prototype.requireSupport_=function(){if(!shaka.offline.Storage.support())throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.STORAGE,shaka.util.Error.Code.STORAGE_NOT_SUPPORTED)},shaka.offline.Storage.prototype.startOperation_=function(sn){var ln=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cn){return cn.nextAddress==1?(ln.openOperations_.push(sn),cn.setFinallyBlock(2),cn.yield(sn,4)):cn.nextAddress!=2?cn.return(cn.yieldResult):(cn.enterFinallyBlock(),shaka.util.ArrayUtils.remove(ln.openOperations_,sn),cn.leaveFinallyBlock(0))})},shaka.offline.Storage.prototype.startAbortableOperation_=function(sn){var ln=this,cn=sn.promise;return this.openOperations_.push(cn),sn.finally(function(){shaka.util.ArrayUtils.remove(ln.openOperations_,cn)})},shaka.offline.Storage.getAllSegmentIds_=function(sn){var ln=new Set;sn=$jscomp.makeIterator(sn.streams);for(var cn=sn.next();!cn.done;cn=sn.next()){cn=$jscomp.makeIterator(cn.value.segments);for(var dn=cn.next();!dn.done;dn=cn.next())dn=dn.value,dn.initSegmentKey!=null&&ln.add(dn.initSegmentKey),ln.add(dn.dataKey)}return Array.from(ln)},shaka.offline.Storage.deleteAll=function(){var sn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ln){return ln.nextAddress==1?(sn=new shaka.offline.StorageMuxer,ln.setFinallyBlock(2),ln.yield(sn.erase(),2)):ln.nextAddress!=5?(ln.enterFinallyBlock(),ln.yield(sn.destroy(),5)):ln.leaveFinallyBlock(0)})},shaka.offline.Storage.deleteLicenseFor_=function(sn,ln,cn,dn){var pn,vn,kn,Sn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(wn){return wn.nextAddress==1?dn.drmInfo?(pn=cn.getEmeSessionCell(),vn=dn.sessionIds.map(function(Pn){return{sessionId:Pn,keySystem:dn.drmInfo.keySystem,licenseUri:dn.drmInfo.licenseServerUri,serverCertificate:dn.drmInfo.serverCertificate,audioCapabilities:shaka.offline.Storage.getCapabilities_(dn,!1),videoCapabilities:shaka.offline.Storage.getCapabilities_(dn,!0)}}),kn=new shaka.offline.SessionDeleter,wn.yield(kn.delete(ln,sn,vn),2)):wn.return():wn.nextAddress!=3?(Sn=wn.yieldResult,wn.yield(pn.remove(Sn),3)):wn.yield(pn.add(vn.filter(function(Pn){return!Sn.includes(Pn.sessionId)})),0)})},shaka.offline.Storage.getAllStreamsFromManifest_=function(sn){for(var ln=new Set,cn=$jscomp.makeIterator(sn.textStreams),dn=cn.next();!dn.done;dn=cn.next())ln.add(dn.value);for(cn=$jscomp.makeIterator(sn.imageStreams),dn=cn.next();!dn.done;dn=cn.next())ln.add(dn.value);for(sn=$jscomp.makeIterator(sn.variants),cn=sn.next();!cn.done;cn=sn.next())cn=cn.value,cn.audio&&ln.add(cn.audio),cn.video&&ln.add(cn.video);return ln},shaka.offline.Storage.validateManifest_=function(sn){var ln=new Set(sn.variants.map(function(kn){return kn.video})),cn=new Set(sn.variants.map(function(kn){return kn.audio}));sn=sn.textStreams,1<ln.size&&shaka.log.warning("Multiple video tracks selected to be stored"),ln=$jscomp.makeIterator(cn);for(var dn=ln.next();!dn.done;dn=ln.next()){dn=dn.value;for(var pn=$jscomp.makeIterator(cn),vn=pn.next();!vn.done;vn=pn.next())vn=vn.value,dn!=vn&&dn.language==vn.language&&shaka.log.warning("Similar audio tracks were selected to be stored",dn.id,vn.id)}for(cn=$jscomp.makeIterator(sn),ln=cn.next();!ln.done;ln=cn.next())for(ln=ln.value,dn=$jscomp.makeIterator(sn),pn=dn.next();!pn.done;pn=dn.next())pn=pn.value,ln!=pn&&ln.language==pn.language&&shaka.log.warning("Similar text tracks were selected to be stored",ln.id,pn.id)},goog.exportSymbol("shaka.offline.Storage",shaka.offline.Storage),goog.exportProperty(shaka.offline.Storage,"deleteAll",shaka.offline.Storage.deleteAll),goog.exportProperty(shaka.offline.Storage.prototype,"list",shaka.offline.Storage.prototype.list),goog.exportProperty(shaka.offline.Storage.prototype,"removeEmeSessions",shaka.offline.Storage.prototype.removeEmeSessions),goog.exportProperty(shaka.offline.Storage.prototype,"remove",shaka.offline.Storage.prototype.remove),goog.exportProperty(shaka.offline.Storage.prototype,"store",shaka.offline.Storage.prototype.store),goog.exportProperty(shaka.offline.Storage.prototype,"getNetworkingEngine",shaka.offline.Storage.prototype.getNetworkingEngine),goog.exportProperty(shaka.offline.Storage.prototype,"getConfiguration",shaka.offline.Storage.prototype.getConfiguration),goog.exportProperty(shaka.offline.Storage.prototype,"configure",shaka.offline.Storage.prototype.configure),goog.exportProperty(shaka.offline.Storage.prototype,"destroy",shaka.offline.Storage.prototype.destroy),goog.exportProperty(shaka.offline.Storage,"support",shaka.offline.Storage.support),shaka.offline.Storage.defaultSystemIds_=new Map().set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb"),shaka.Player.registerSupportPlugin("offline",shaka.offline.Storage.support),shaka.polyfill=function(){},shaka.polyfill.installAll=function(){for(var sn=$jscomp.makeIterator(shaka.polyfill.polyfills_),ln=sn.next();!ln.done;ln=sn.next()){ln=ln.value;try{ln.callback()}catch(cn){shaka.log.alwaysWarn("Error installing polyfill!",cn)}}},shaka.polyfill.register=function(sn,ln){for(sn={priority:ln||0,callback:sn},ln=0;ln<shaka.polyfill.polyfills_.length;ln++)if(shaka.polyfill.polyfills_[ln].priority<sn.priority){shaka.polyfill.polyfills_.splice(ln,0,sn);return}shaka.polyfill.polyfills_.push(sn)},goog.exportSymbol("shaka.polyfill",shaka.polyfill),goog.exportProperty(shaka.polyfill,"register",shaka.polyfill.register),goog.exportProperty(shaka.polyfill,"installAll",shaka.polyfill.installAll),shaka.polyfill.polyfills_=[],shaka.polyfill.AbortController=function(){this.signal_=new shaka.polyfill.AbortController.AbortSignal},shaka.polyfill.AbortController.install=function(){window.AbortController||(window.AbortController=shaka.polyfill.AbortController,window.AbortSignal=shaka.polyfill.AbortController.AbortSignal)},shaka.polyfill.AbortController.prototype.abort=function(sn){this.signal_.doAbort_(sn)},$jscomp.global.Object.defineProperties(shaka.polyfill.AbortController.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.signal_}}}),goog.exportProperty(shaka.polyfill,"AbortController",shaka.polyfill.AbortController),goog.exportProperty(shaka.polyfill.AbortController,"install",shaka.polyfill.AbortController.install),shaka.polyfill.AbortController.AbortSignal=function(){shaka.util.FakeEventTarget.call(this),this.aborted_=!1,this.reason_=void 0,this.onabort=null},$jscomp.inherits(shaka.polyfill.AbortController.AbortSignal,shaka.util.FakeEventTarget),shaka.polyfill.AbortController.AbortSignal.prototype.doAbort_=function(sn){this.aborted_||(this.aborted_=!0,this.reason_=sn,this.reason_===void 0&&(this.reason_=new DOMException("signal is aborted without reason","AbortError")),sn=new shaka.util.FakeEvent("abort"),this.onabort&&this.onabort(sn),this.dispatchEvent(sn))},shaka.polyfill.AbortController.AbortSignal.abort=function(sn){var ln=new shaka.polyfill.AbortController.AbortSignal;return ln.doAbort_(sn),ln},shaka.polyfill.AbortController.AbortSignal.timeout=function(sn){var ln=new shaka.polyfill.AbortController.AbortSignal;return window.setTimeout(function(){ln.doAbort_(new DOMException("signal timed out","TimeoutError"))},sn),ln},$jscomp.global.Object.defineProperties(shaka.polyfill.AbortController.AbortSignal.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.aborted_}},reason:{configurable:!0,enumerable:!0,get:function(){return this.reason_}}}),shaka.polyfill.register(shaka.polyfill.AbortController.install),shaka.polyfill.Aria=function(){},shaka.polyfill.Aria.install=function(){if(Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))shaka.log.info("Using native ARIAMixin interface.");else{shaka.log.info("ARIAMixin interface not detected. Installing polyfill.");for(var sn=$jscomp.makeIterator(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),ln=sn.next();!ln.done;ln=sn.next())shaka.polyfill.Aria.addARIAMixinAttribute_(ln.value)}},shaka.polyfill.Aria.addARIAMixinAttribute_=function(sn){var ln="aria-"+sn.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,sn,{get:function(){return this.getAttribute(ln)},set:function(cn){cn==null||cn==null?this.removeAttribute(ln):this.setAttribute(ln,cn)}})},goog.exportProperty(shaka.polyfill,"Aria",shaka.polyfill.Aria),goog.exportProperty(shaka.polyfill.Aria,"install",shaka.polyfill.Aria.install),shaka.polyfill.register(shaka.polyfill.Aria.install),shaka.polyfill.EncryptionScheme=function(){},shaka.polyfill.EncryptionScheme.install=function(){EncryptionSchemePolyfills.install()},goog.exportProperty(shaka.polyfill,"EncryptionScheme",shaka.polyfill.EncryptionScheme),goog.exportProperty(shaka.polyfill.EncryptionScheme,"install",shaka.polyfill.EncryptionScheme.install),shaka.polyfill.register(shaka.polyfill.EncryptionScheme.install,-2),shaka.polyfill.Fullscreen=function(){},shaka.polyfill.Fullscreen.install=function(){if(window.Document){var sn=Element.prototype;sn.requestFullscreen=sn.requestFullscreen||sn.mozRequestFullScreen||sn.msRequestFullscreen||sn.webkitRequestFullscreen,sn=Document.prototype,sn.exitFullscreen=sn.exitFullscreen||sn.mozCancelFullScreen||sn.msExitFullscreen||sn.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),sn=shaka.polyfill.Fullscreen.proxyEvent_,document.addEventListener("webkitfullscreenchange",sn),document.addEventListener("webkitfullscreenerror",sn),document.addEventListener("mozfullscreenchange",sn),document.addEventListener("mozfullscreenerror",sn),document.addEventListener("MSFullscreenChange",sn),document.addEventListener("MSFullscreenError",sn)}},shaka.polyfill.Fullscreen.proxyEvent_=function(sn){var ln=sn.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),cn=document.createEvent("Event");cn.initEvent(ln,sn.bubbles,sn.cancelable),sn.target.dispatchEvent(cn)},goog.exportProperty(shaka.polyfill,"Fullscreen",shaka.polyfill.Fullscreen),goog.exportProperty(shaka.polyfill.Fullscreen,"install",shaka.polyfill.Fullscreen.install),shaka.polyfill.register(shaka.polyfill.Fullscreen.install),shaka.polyfill.MediaCapabilities=function(){},shaka.polyfill.MediaCapabilities.install=function(){var sn=!0;(shaka.util.Platform.isApple()||shaka.util.Platform.isPS5()||shaka.util.Platform.isPS4()||shaka.util.Platform.isWebOS()||shaka.util.Platform.isTizen()||shaka.util.Platform.isChromecast()||shaka.util.Platform.isEOS()||shaka.util.Platform.isHisense())&&(sn=!1),sn&&navigator.mediaCapabilities?shaka.log.info("MediaCapabilities: Native mediaCapabilities support found."):(shaka.log.info("MediaCapabilities: install"),navigator.mediaCapabilities||(navigator.mediaCapabilities={}),shaka.polyfill.MediaCapabilities.originalMcap=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=shaka.polyfill.MediaCapabilities.decodingInfo_)},shaka.polyfill.MediaCapabilities.decodingInfo_=function(sn){var ln,cn,dn,pn,vn,kn,Sn,wn,Pn,Nn,Ln,Fn,zn,Dn,Kn,qn,Zn,Yn,Jn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(rs){switch(rs.nextAddress){case 1:if(ln={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:sn},!sn)return rs.return(ln);if(cn=sn.video,dn=sn.audio,pn=shaka.media.Capabilities,sn.type=="media-source"){if(!shaka.util.Platform.supportsMediaSource()||cn&&(shaka.util.Platform.isChromecast()?vn=shaka.polyfill.MediaCapabilities.canCastDisplayType_(cn):shaka.util.Platform.isTizen()?(kn=cn.contentType,cn.width&&cn.height&&(kn+="; width="+cn.width,kn+="; height="+cn.height),cn.framerate&&(kn+="; framerate="+cn.framerate),cn.bitrate&&(kn+="; bitrate="+cn.bitrate),vn=pn.isTypeSupported(kn)):vn=pn.isTypeSupported(cn.contentType),!vn)||dn&&(Sn=dn.contentType,wn=pn.isTypeSupported(Sn),!wn))return rs.return(ln)}else if(sn.type=="file"){if(cn&&(Pn=cn.contentType,Nn=shaka.util.Platform.supportsMediaType(Pn),!Nn)||dn&&(Ln=dn.contentType,Fn=shaka.util.Platform.supportsMediaType(Ln),!Fn))return rs.return(ln)}else return rs.return(ln);return sn.keySystemConfiguration?(zn=sn.keySystemConfiguration,Dn=[],Kn=[],zn.audio&&(qn={robustness:zn.audio.robustness||"",contentType:sn.audio.contentType},Dn.push(qn)),zn.video&&(Zn={robustness:zn.video.robustness||"",contentType:sn.video.contentType},Kn.push(Zn)),Yn={initDataTypes:[zn.initDataType],distinctiveIdentifier:zn.distinctiveIdentifier,persistentState:zn.persistentState,sessionTypes:zn.sessionTypes},Dn.length&&(Yn.audioCapabilities=Dn),Kn.length&&(Yn.videoCapabilities=Kn),rs.setCatchFinallyBlocks(3),rs.yield(navigator.requestMediaKeySystemAccess(zn.keySystem,[Yn]),5)):(ln.supported=!0,rs.return(Promise.resolve(ln)));case 5:Jn=rs.yieldResult,rs.leaveTryBlock(4);break;case 3:rs.enterCatchBlock(),shaka.log.info("navigator.requestMediaKeySystemAccess failed.");case 4:Jn&&(ln.supported=!0,ln.keySystemAccess=Jn);case 2:return rs.return(ln)}})},shaka.polyfill.MediaCapabilities.canCastDisplayType_=function(sn){if(!(window.cast&&cast.__platform__&&cast.__platform__.canDisplayType))return shaka.log.warning("Expected cast APIs to be available! Falling back to shaka.media.Capabilities.isTypeSupported() for type support."),shaka.media.Capabilities.isTypeSupported(sn.contentType);var ln=sn.contentType;return sn.width&&sn.height&&(ln+="; width="+sn.width+"; height="+sn.height),sn.framerate&&(ln+="; framerate="+sn.framerate),sn.transferFunction==="pq"&&(ln+="; eotf=smpte2084"),cast.__platform__.canDisplayType(ln)},goog.exportProperty(shaka.polyfill,"MediaCapabilities",shaka.polyfill.MediaCapabilities),goog.exportProperty(shaka.polyfill.MediaCapabilities,"install",shaka.polyfill.MediaCapabilities.install),shaka.polyfill.MediaCapabilities.originalMcap=null,goog.exportProperty(shaka.polyfill.MediaCapabilities,"originalMcap",shaka.polyfill.MediaCapabilities.originalMcap),shaka.polyfill.register(shaka.polyfill.MediaCapabilities.install,-1),shaka.polyfill.MediaSource=function(){},shaka.polyfill.MediaSource.install=function(){shaka.log.debug("MediaSource.install");var sn=shaka.util.Platform.safariVersion();window.MediaSource?window.cast&&cast.__platform__&&cast.__platform__.canDisplayType?(shaka.log.info("Patching Chromecast MSE bugs."),shaka.polyfill.MediaSource.patchCastIsTypeSupported_()):sn?12>=sn?(shaka.log.info("Patching Safari 11 & 12 MSE bugs."),shaka.polyfill.MediaSource.stubAbort_(),shaka.polyfill.MediaSource.patchRemovalRange_()):15>=sn&&(shaka.log.info("Patching Safari 13 & 14 & 15 MSE bugs."),shaka.polyfill.MediaSource.stubAbort_()):shaka.util.Platform.isEdge()?(shaka.log.info("Rejecting TS container."),shaka.polyfill.MediaSource.rejectContainer_("mp2t")):shaka.util.Platform.isTizen2()||shaka.util.Platform.isTizen3()||shaka.util.Platform.isTizen4()?(shaka.log.info("Rejecting Opus."),shaka.polyfill.MediaSource.rejectCodec_("opus")):shaka.log.info("Using native MSE as-is."):shaka.log.info("No MSE implementation available."),window.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&(shaka.log.info("Patching vp09 support queries."),shaka.polyfill.MediaSource.patchVp09_())},shaka.polyfill.MediaSource.stubAbort_=function(){var sn=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var ln=$jscomp.getRestArguments.apply(0,arguments);return ln=sn.apply(this,ln),ln.abort=function(){},ln}},shaka.polyfill.MediaSource.patchRemovalRange_=function(){var sn=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(ln,cn){return sn.call(this,ln,cn-.001)}},shaka.polyfill.MediaSource.rejectContainer_=function(sn){var ln=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(cn){return shaka.util.MimeUtils.getContainerType(cn)!=sn&&ln(cn)}},shaka.polyfill.MediaSource.rejectCodec_=function(sn){var ln=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(cn){return shaka.util.MimeUtils.getCodecBase(cn)!=sn&&ln(cn)}},shaka.polyfill.MediaSource.patchCastIsTypeSupported_=function(){var sn=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(ln){var cn=ln.split(/ *; */);return cn.shift(),cn.some(function(dn){return dn.startsWith("codecs=")})?cast.__platform__.canDisplayType(ln):sn(ln)}},shaka.polyfill.MediaSource.patchVp09_=function(){var sn=MediaSource.isTypeSupported;shaka.util.Platform.isWebOS()||(MediaSource.isTypeSupported=function(ln){var cn=ln.split(/ *; */),dn=cn.findIndex(function(kn){return kn.startsWith("codecs=")});if(0>dn)return sn(ln);var pn=cn[dn].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),vn=pn.findIndex(function(kn){return kn.startsWith("vp09")});return 0<=vn&&(pn[vn]="vp9",cn[dn]='codecs="'+pn.join(",")+'"',ln=cn.join("; ")),sn(ln)})},goog.exportProperty(shaka.polyfill,"MediaSource",shaka.polyfill.MediaSource),goog.exportProperty(shaka.polyfill.MediaSource,"install",shaka.polyfill.MediaSource.install),shaka.polyfill.register(shaka.polyfill.MediaSource.install),shaka.polyfill.Orientation=function(){},shaka.polyfill.Orientation.install=function(){screen.orientation||window.orientation!=null&&shaka.polyfill.Orientation.installBasedOnWindowMethods_()},shaka.polyfill.Orientation.installBasedOnWindowMethods_=function(){var sn=new shaka.polyfill.Orientation.FakeOrientation;screen.orientation=sn;var ln=function(){switch(window.orientation){case-90:sn.type="landscape-secondary",sn.angle=270;break;case 0:sn.type="portrait-primary",sn.angle=0;break;case 90:sn.type="landscape-primary",sn.angle=90;break;case 180:sn.type="portrait-secondary",sn.angle=180}};ln(),window.addEventListener("orientationchange",function(){ln(),sn.dispatchChangeEvent()})},goog.exportProperty(shaka.polyfill,"Orientation",shaka.polyfill.Orientation),goog.exportProperty(shaka.polyfill.Orientation,"install",shaka.polyfill.Orientation.install),shaka.polyfill.Orientation.FakeOrientation=function(){shaka.util.FakeEventTarget.call(this),this.type="",this.angle=0},$jscomp.inherits(shaka.polyfill.Orientation.FakeOrientation,shaka.util.FakeEventTarget),shaka.polyfill.Orientation.FakeOrientation.prototype.dispatchChangeEvent=function(){var sn=new shaka.util.FakeEvent("change");this.dispatchEvent(sn)},shaka.polyfill.Orientation.FakeOrientation.prototype.lock=function(sn){var ln=function(dn){return screen.lockOrientation?screen.lockOrientation(dn):screen.mozLockOrientation?screen.mozLockOrientation(dn):screen.msLockOrientation?screen.msLockOrientation(dn):!1},cn=!1;switch(sn){case"natural":cn=ln("default");break;case"any":cn=!0,this.unlock();break;default:cn=ln(sn)}return cn?Promise.resolve():(sn=Error("screen.orientation.lock() is not available on this device"),sn.name="NotSupportedError",sn.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(sn))},shaka.polyfill.Orientation.FakeOrientation.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},shaka.polyfill.register(shaka.polyfill.Orientation.install),shaka.polyfill.PatchedMediaKeysApple=function(){},shaka.polyfill.PatchedMediaKeysApple.install=function(sn){var ln=shaka.polyfill.PatchedMediaKeysApple;window.HTMLVideoElement&&window.WebKitMediaKeys&&(sn!==void 0&&sn&&(ln.enableUninstall=!0,ln.originalHTMLMediaElementPrototypeMediaKeys=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),ln.originalHTMLMediaElementPrototypeSetMediaKeys=HTMLMediaElement.prototype.setMediaKeys,ln.originalWindowMediaKeys=window.MediaKeys,ln.originalWindowMediaKeySystemAccess=window.MediaKeySystemAccess,ln.originalNavigatorRequestMediaKeySystemAccess=navigator.requestMediaKeySystemAccess),shaka.log.info("Using Apple-prefixed EME"),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=ln.setMediaKeys,window.MediaKeys=ln.MediaKeys,window.MediaKeySystemAccess=ln.MediaKeySystemAccess,navigator.requestMediaKeySystemAccess=ln.requestMediaKeySystemAccess,window.shakaMediaKeysPolyfill=!0)},shaka.polyfill.PatchedMediaKeysApple.uninstall=function(){var sn=shaka.polyfill.PatchedMediaKeysApple;sn.enableUninstall&&(shaka.log.info("Un-installing Apple-prefixed EME"),sn.enableUninstall=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",sn.originalHTMLMediaElementPrototypeMediaKeys),HTMLMediaElement.prototype.setMediaKeys=sn.originalHTMLMediaElementPrototypeSetMediaKeys,window.MediaKeys=sn.originalWindowMediaKeys,window.MediaKeySystemAccess=sn.originalWindowMediaKeySystemAccess,navigator.requestMediaKeySystemAccess=sn.originalNavigatorRequestMediaKeySystemAccess,sn.originalWindowMediaKeys=null,sn.originalWindowMediaKeySystemAccess=null,sn.originalHTMLMediaElementPrototypeSetMediaKeys=null,sn.originalNavigatorRequestMediaKeySystemAccess=null,sn.originalHTMLMediaElementPrototypeMediaKeys=null,window.shakaMediaKeysPolyfill=!1)},shaka.polyfill.PatchedMediaKeysApple.requestMediaKeySystemAccess=function(sn,ln){shaka.log.debug("PatchedMediaKeysApple.requestMediaKeySystemAccess"),goog.asserts.assert(this==navigator,'bad "this" for requestMediaKeySystemAccess');var cn=shaka.polyfill.PatchedMediaKeysApple;try{var dn=new cn.MediaKeySystemAccess(sn,ln);return Promise.resolve(dn)}catch(pn){return Promise.reject(pn)}},shaka.polyfill.PatchedMediaKeysApple.setMediaKeys=function(sn){shaka.log.debug("PatchedMediaKeysApple.setMediaKeys"),goog.asserts.assert(this instanceof HTMLMediaElement,'bad "this" for setMediaKeys');var ln=shaka.polyfill.PatchedMediaKeysApple,cn=this.mediaKeys;return cn&&cn!=sn&&(goog.asserts.assert(cn instanceof ln.MediaKeys,"non-polyfill instance of oldMediaKeys"),cn.setMedia(null)),delete this.mediaKeys,(this.mediaKeys=sn)?(goog.asserts.assert(sn instanceof ln.MediaKeys,"non-polyfill instance of newMediaKeys"),sn.setMedia(this)):Promise.resolve()},shaka.polyfill.PatchedMediaKeysApple.onWebkitNeedKey_=function(sn){if(shaka.log.debug("PatchedMediaKeysApple.onWebkitNeedKey_",sn),goog.asserts.assert(this.mediaKeys instanceof shaka.polyfill.PatchedMediaKeysApple.MediaKeys,"non-polyfill instance of newMediaKeys"),goog.asserts.assert(sn.initData!=null,"missing init data!"),sn=shaka.util.BufferUtils.toUint8(sn.initData),shaka.util.BufferUtils.toDataView(sn).getUint32(0,!0)+4!=sn.byteLength)throw new RangeError("Malformed FairPlay init data");sn=shaka.util.StringUtils.fromUTF16(sn.subarray(4),!0),sn=shaka.util.StringUtils.toUTF8(sn);var ln=new Event("encrypted");ln.initDataType="skd",ln.initData=shaka.util.BufferUtils.toArrayBuffer(sn),this.dispatchEvent(ln)},goog.exportProperty(shaka.polyfill,"PatchedMediaKeysApple",shaka.polyfill.PatchedMediaKeysApple),goog.exportProperty(shaka.polyfill.PatchedMediaKeysApple,"uninstall",shaka.polyfill.PatchedMediaKeysApple.uninstall),goog.exportProperty(shaka.polyfill.PatchedMediaKeysApple,"install",shaka.polyfill.PatchedMediaKeysApple.install),shaka.polyfill.PatchedMediaKeysApple.MediaKeySystemAccess=function(sn,ln){if(shaka.log.debug("PatchedMediaKeysApple.MediaKeySystemAccess"),this.keySystem=sn,sn.startsWith("com.apple.fps")){for(sn=$jscomp.makeIterator(ln),ln=sn.next();!ln.done;ln=sn.next())if(ln=this.checkConfig_(ln.value)){this.configuration_=ln;return}}throw sn=Error("Unsupported keySystem"),sn.name="NotSupportedError",sn.code=DOMException.NOT_SUPPORTED_ERR,sn},shaka.polyfill.PatchedMediaKeysApple.MediaKeySystemAccess.prototype.checkConfig_=function(sn){if(sn.persistentState=="required")return null;var ln={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:sn.initDataTypes,sessionTypes:["temporary"],label:sn.label},cn=!1,dn=!1;if(sn.audioCapabilities){for(var pn=$jscomp.makeIterator(sn.audioCapabilities),vn=pn.next();!vn.done;vn=pn.next())if(vn=vn.value,vn.contentType){cn=!0;var kn=vn.contentType.split(";")[0];WebKitMediaKeys.isTypeSupported(this.keySystem,kn)&&(ln.audioCapabilities.push(vn),dn=!0)}}if(sn.videoCapabilities)for(sn=$jscomp.makeIterator(sn.videoCapabilities),vn=sn.next();!vn.done;vn=sn.next())pn=vn.value,pn.contentType&&(cn=!0,vn=pn.contentType.split(";")[0],WebKitMediaKeys.isTypeSupported(this.keySystem,vn)&&(ln.videoCapabilities.push(pn),dn=!0));return cn||(dn=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),dn?ln:null},shaka.polyfill.PatchedMediaKeysApple.MediaKeySystemAccess.prototype.createMediaKeys=function(){shaka.log.debug("PatchedMediaKeysApple.MediaKeySystemAccess.createMediaKeys");var sn=new shaka.polyfill.PatchedMediaKeysApple.MediaKeys(this.keySystem);return Promise.resolve(sn)},shaka.polyfill.PatchedMediaKeysApple.MediaKeySystemAccess.prototype.getConfiguration=function(){return shaka.log.debug("PatchedMediaKeysApple.MediaKeySystemAccess.getConfiguration"),this.configuration_},shaka.polyfill.PatchedMediaKeysApple.MediaKeys=function(sn){shaka.log.debug("PatchedMediaKeysApple.MediaKeys"),this.nativeMediaKeys_=new WebKitMediaKeys(sn),this.eventManager_=new shaka.util.EventManager},shaka.polyfill.PatchedMediaKeysApple.MediaKeys.prototype.createSession=function(sn){if(shaka.log.debug("PatchedMediaKeysApple.MediaKeys.createSession"),sn=sn||"temporary",sn!="temporary")throw new TypeError("Session type "+sn+" is unsupported on this platform.");return new shaka.polyfill.PatchedMediaKeysApple.MediaKeySession(this.nativeMediaKeys_,sn)},shaka.polyfill.PatchedMediaKeysApple.MediaKeys.prototype.setServerCertificate=function(sn){return shaka.log.debug("PatchedMediaKeysApple.MediaKeys.setServerCertificate"),Promise.resolve(!1)},shaka.polyfill.PatchedMediaKeysApple.MediaKeys.prototype.setMedia=function(sn){var ln=this,cn=shaka.polyfill.PatchedMediaKeysApple;if(this.eventManager_.removeAll(),!sn)return Promise.resolve();this.eventManager_.listen(sn,"webkitneedkey",cn.onWebkitNeedKey_);try{return shaka.util.MediaReadyState.waitForReadyState(sn,HTMLMediaElement.HAVE_METADATA,this.eventManager_,function(){sn.webkitSetMediaKeys(ln.nativeMediaKeys_)}),Promise.resolve()}catch(dn){return Promise.reject(dn)}},shaka.polyfill.PatchedMediaKeysApple.MediaKeySession=function(sn,ln){shaka.log.debug("PatchedMediaKeysApple.MediaKeySession"),shaka.util.FakeEventTarget.call(this),this.nativeMediaKeySession_=null,this.nativeMediaKeys_=sn,this.updatePromise_=this.generateRequestPromise_=null,this.eventManager_=new shaka.util.EventManager,this.sessionId="",this.expiration=NaN,this.closed=new shaka.util.PublicPromise,this.keyStatuses=new shaka.polyfill.PatchedMediaKeysApple.MediaKeyStatusMap},$jscomp.inherits(shaka.polyfill.PatchedMediaKeysApple.MediaKeySession,shaka.util.FakeEventTarget),shaka.polyfill.PatchedMediaKeysApple.MediaKeySession.prototype.generateRequest=function(sn,ln){var cn=this;shaka.log.debug("PatchedMediaKeysApple.MediaKeySession.generateRequest"),this.generateRequestPromise_=new shaka.util.PublicPromise;try{var dn=this.nativeMediaKeys_.createSession("video/mp4",shaka.util.BufferUtils.toUint8(ln));this.nativeMediaKeySession_=dn,this.sessionId=dn.sessionId||"",this.eventManager_.listen(this.nativeMediaKeySession_,"webkitkeymessage",function(pn){return cn.onWebkitKeyMessage_(pn)}),this.eventManager_.listen(dn,"webkitkeyadded",function(pn){return cn.onWebkitKeyAdded_(pn)}),this.eventManager_.listen(dn,"webkitkeyerror",function(pn){return cn.onWebkitKeyError_(pn)}),this.updateKeyStatus_("status-pending")}catch(pn){this.generateRequestPromise_.reject(pn)}return this.generateRequestPromise_},shaka.polyfill.PatchedMediaKeysApple.MediaKeySession.prototype.load=function(){return shaka.log.debug("PatchedMediaKeysApple.MediaKeySession.load"),Promise.reject(Error("MediaKeySession.load not yet supported"))},shaka.polyfill.PatchedMediaKeysApple.MediaKeySession.prototype.update=function(sn){shaka.log.debug("PatchedMediaKeysApple.MediaKeySession.update"),this.updatePromise_=new shaka.util.PublicPromise;try{this.nativeMediaKeySession_.update(shaka.util.BufferUtils.toUint8(sn))}catch(ln){this.updatePromise_.reject(ln)}return this.updatePromise_},shaka.polyfill.PatchedMediaKeysApple.MediaKeySession.prototype.close=function(){shaka.log.debug("PatchedMediaKeysApple.MediaKeySession.close");try{this.nativeMediaKeySession_.close(),this.closed.resolve(),this.eventManager_.removeAll()}catch(sn){this.closed.reject(sn)}return this.closed},shaka.polyfill.PatchedMediaKeysApple.MediaKeySession.prototype.remove=function(){return shaka.log.debug("PatchedMediaKeysApple.MediaKeySession.remove"),Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))},shaka.polyfill.PatchedMediaKeysApple.MediaKeySession.prototype.onWebkitKeyMessage_=function(sn){shaka.log.debug("PatchedMediaKeysApple.onWebkitKeyMessage_",sn),goog.asserts.assert(this.generateRequestPromise_,"generateRequestPromise_ should be set before now!"),this.generateRequestPromise_&&(this.generateRequestPromise_.resolve(),this.generateRequestPromise_=null);var ln=this.keyStatuses.getStatus()==null;sn=new Map().set("messageType",ln?"license-request":"license-renewal").set("message",shaka.util.BufferUtils.toArrayBuffer(sn.message)),sn=new shaka.util.FakeEvent("message",sn),this.dispatchEvent(sn)},shaka.polyfill.PatchedMediaKeysApple.MediaKeySession.prototype.onWebkitKeyAdded_=function(sn){shaka.log.debug("PatchedMediaKeysApple.onWebkitKeyAdded_",sn),goog.asserts.assert(!this.generateRequestPromise_,"Key added during generate!"),goog.asserts.assert(this.updatePromise_,"updatePromise_ should be set before now!"),this.updatePromise_&&(this.updateKeyStatus_("usable"),this.updatePromise_.resolve(),this.updatePromise_=null)},shaka.polyfill.PatchedMediaKeysApple.MediaKeySession.prototype.onWebkitKeyError_=function(sn){if(shaka.log.debug("PatchedMediaKeysApple.onWebkitKeyError_",sn),sn=Error("EME PatchedMediaKeysApple key error"),sn.errorCode=this.nativeMediaKeySession_.error,this.generateRequestPromise_!=null)this.generateRequestPromise_.reject(sn),this.generateRequestPromise_=null;else if(this.updatePromise_!=null)this.updatePromise_.reject(sn),this.updatePromise_=null;else switch(this.nativeMediaKeySession_.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:this.updateKeyStatus_("output-not-allowed");break;default:this.updateKeyStatus_("internal-error")}},shaka.polyfill.PatchedMediaKeysApple.MediaKeySession.prototype.updateKeyStatus_=function(sn){this.keyStatuses.setStatus(sn),sn=new shaka.util.FakeEvent("keystatuseschange"),this.dispatchEvent(sn)},shaka.polyfill.PatchedMediaKeysApple.MediaKeyStatusMap=function(){this.size=0,this.status_=void 0},shaka.polyfill.PatchedMediaKeysApple.MediaKeyStatusMap.prototype.setStatus=function(sn){this.size=sn==null?0:1,this.status_=sn},shaka.polyfill.PatchedMediaKeysApple.MediaKeyStatusMap.prototype.getStatus=function(){return this.status_},shaka.polyfill.PatchedMediaKeysApple.MediaKeyStatusMap.prototype.forEach=function(sn){this.status_&&sn(this.status_,shaka.media.DrmEngine.DUMMY_KEY_ID.value())},shaka.polyfill.PatchedMediaKeysApple.MediaKeyStatusMap.prototype.get=function(sn){if(this.has(sn))return this.status_},shaka.polyfill.PatchedMediaKeysApple.MediaKeyStatusMap.prototype.has=function(sn){var ln=shaka.media.DrmEngine.DUMMY_KEY_ID.value();return!!(this.status_&&shaka.util.BufferUtils.equal(sn,ln))},shaka.polyfill.PatchedMediaKeysApple.MediaKeyStatusMap.prototype.entries=function(){goog.asserts.assert(!1,"Not used!  Provided only for the compiler.")},shaka.polyfill.PatchedMediaKeysApple.MediaKeyStatusMap.prototype.keys=function(){goog.asserts.assert(!1,"Not used!  Provided only for the compiler.")},shaka.polyfill.PatchedMediaKeysApple.MediaKeyStatusMap.prototype.values=function(){goog.asserts.assert(!1,"Not used!  Provided only for the compiler.")},shaka.polyfill.PatchedMediaKeysNop=function(){},shaka.polyfill.PatchedMediaKeysNop.install=function(){if(!(!window.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){shaka.log.info("EME not available.");var sn=shaka.polyfill.PatchedMediaKeysNop;navigator.requestMediaKeySystemAccess=sn.requestMediaKeySystemAccess,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=sn.setMediaKeys,window.MediaKeys=sn.MediaKeys,window.MediaKeySystemAccess=sn.MediaKeySystemAccess,window.shakaMediaKeysPolyfill=!0}},shaka.polyfill.PatchedMediaKeysNop.requestMediaKeySystemAccess=function(sn,ln){return shaka.log.debug("PatchedMediaKeysNop.requestMediaKeySystemAccess"),goog.asserts.assert(this==navigator,'bad "this" for requestMediaKeySystemAccess'),Promise.reject(Error("The key system specified is not supported."))},shaka.polyfill.PatchedMediaKeysNop.setMediaKeys=function(sn){return shaka.log.debug("PatchedMediaKeysNop.setMediaKeys"),goog.asserts.assert(this instanceof HTMLMediaElement,'bad "this" for setMediaKeys'),sn==null?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))},goog.exportProperty(shaka.polyfill,"PatchedMediaKeysNop",shaka.polyfill.PatchedMediaKeysNop),goog.exportProperty(shaka.polyfill.PatchedMediaKeysNop,"install",shaka.polyfill.PatchedMediaKeysNop.install),shaka.polyfill.PatchedMediaKeysNop.MediaKeys=function(){throw new TypeError("Illegal constructor.")},shaka.polyfill.PatchedMediaKeysNop.MediaKeys.prototype.createSession=function(){},shaka.polyfill.PatchedMediaKeysNop.MediaKeys.prototype.setServerCertificate=function(){},shaka.polyfill.PatchedMediaKeysNop.MediaKeySystemAccess=function(){throw this.keySystem="",new TypeError("Illegal constructor.")},shaka.polyfill.PatchedMediaKeysNop.MediaKeySystemAccess.prototype.getConfiguration=function(){},shaka.polyfill.PatchedMediaKeysNop.MediaKeySystemAccess.prototype.createMediaKeys=function(){},shaka.polyfill.register(shaka.polyfill.PatchedMediaKeysNop.install,-10),shaka.polyfill.PatchedMediaKeysWebkit=function(){},shaka.polyfill.PatchedMediaKeysWebkit.install=function(){var sn=shaka.polyfill.PatchedMediaKeysWebkit;if(!(!window.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)shaka.log.info("Using webkit-prefixed EME v0.1b"),sn.prefix_="webkit";else if(HTMLMediaElement.prototype.generateKeyRequest)shaka.log.info("Using nonprefixed EME v0.1b");else return;goog.asserts.assert(HTMLMediaElement.prototype[sn.prefixApi_("generateKeyRequest")],"PatchedMediaKeysWebkit APIs not available!"),navigator.requestMediaKeySystemAccess=sn.requestMediaKeySystemAccess,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=sn.setMediaKeys,window.MediaKeys=sn.MediaKeys,window.MediaKeySystemAccess=sn.MediaKeySystemAccess,window.shakaMediaKeysPolyfill=!0}},shaka.polyfill.PatchedMediaKeysWebkit.prefixApi_=function(sn){var ln=shaka.polyfill.PatchedMediaKeysWebkit.prefix_;return ln?ln+sn.charAt(0).toUpperCase()+sn.slice(1):sn},shaka.polyfill.PatchedMediaKeysWebkit.requestMediaKeySystemAccess=function(sn,ln){shaka.log.debug("PatchedMediaKeysWebkit.requestMediaKeySystemAccess"),goog.asserts.assert(this==navigator,'bad "this" for requestMediaKeySystemAccess');var cn=shaka.polyfill.PatchedMediaKeysWebkit;try{var dn=new cn.MediaKeySystemAccess(sn,ln);return Promise.resolve(dn)}catch(pn){return Promise.reject(pn)}},shaka.polyfill.PatchedMediaKeysWebkit.setMediaKeys=function(sn){shaka.log.debug("PatchedMediaKeysWebkit.setMediaKeys"),goog.asserts.assert(this instanceof HTMLMediaElement,'bad "this" for setMediaKeys');var ln=shaka.polyfill.PatchedMediaKeysWebkit,cn=this.mediaKeys;return cn&&cn!=sn&&(goog.asserts.assert(cn instanceof ln.MediaKeys,"non-polyfill instance of oldMediaKeys"),cn.setMedia(null)),delete this.mediaKeys,(this.mediaKeys=sn)&&(goog.asserts.assert(sn instanceof ln.MediaKeys,"non-polyfill instance of newMediaKeys"),sn.setMedia(this)),Promise.resolve()},shaka.polyfill.PatchedMediaKeysWebkit.getVideoElement_=function(){var sn=document.getElementsByTagName("video");return sn.length?sn[0]:document.createElement("video")},goog.exportProperty(shaka.polyfill,"PatchedMediaKeysWebkit",shaka.polyfill.PatchedMediaKeysWebkit),goog.exportProperty(shaka.polyfill.PatchedMediaKeysWebkit,"install",shaka.polyfill.PatchedMediaKeysWebkit.install),shaka.polyfill.PatchedMediaKeysWebkit.MediaKeySystemAccess=function(sn,ln){shaka.log.debug("PatchedMediaKeysWebkit.MediaKeySystemAccess"),this.internalKeySystem_=this.keySystem=sn;var cn=!1;sn=="org.w3.clearkey"&&(this.internalKeySystem_="webkit-org.w3.clearkey",cn=!1);var dn=!1,pn=shaka.polyfill.PatchedMediaKeysWebkit.getVideoElement_();ln=$jscomp.makeIterator(ln);for(var vn=ln.next();!vn.done;vn=ln.next()){vn=vn.value;var kn={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:vn.initDataTypes,sessionTypes:["temporary"],label:vn.label},Sn=!1;if(vn.audioCapabilities){for(var wn=$jscomp.makeIterator(vn.audioCapabilities),Pn=wn.next();!Pn.done;Pn=wn.next())if(Pn=Pn.value,Pn.contentType){Sn=!0;var Nn=Pn.contentType.split(";")[0];pn.canPlayType(Nn,this.internalKeySystem_)&&(kn.audioCapabilities.push(Pn),dn=!0)}}if(vn.videoCapabilities)for(wn=$jscomp.makeIterator(vn.videoCapabilities),Pn=wn.next();!Pn.done;Pn=wn.next())Pn=Pn.value,Pn.contentType&&(Sn=!0,pn.canPlayType(Pn.contentType,this.internalKeySystem_)&&(kn.videoCapabilities.push(Pn),dn=!0));if(Sn||(dn=pn.canPlayType("video/mp4",this.internalKeySystem_)||pn.canPlayType("video/webm",this.internalKeySystem_)),vn.persistentState=="required"&&(cn?(kn.persistentState="required",kn.sessionTypes=["persistent-license"]):dn=!1),dn){this.configuration_=kn;return}}throw cn="Unsupported keySystem",(sn=="org.w3.clearkey"||sn=="com.widevine.alpha")&&(cn="None of the requested configurations were supported."),sn=Error(cn),sn.name="NotSupportedError",sn.code=DOMException.NOT_SUPPORTED_ERR,sn},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeySystemAccess.prototype.createMediaKeys=function(){shaka.log.debug("PatchedMediaKeysWebkit.MediaKeySystemAccess.createMediaKeys");var sn=new shaka.polyfill.PatchedMediaKeysWebkit.MediaKeys(this.internalKeySystem_);return Promise.resolve(sn)},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeySystemAccess.prototype.getConfiguration=function(){return shaka.log.debug("PatchedMediaKeysWebkit.MediaKeySystemAccess.getConfiguration"),this.configuration_},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeys=function(sn){shaka.log.debug("PatchedMediaKeysWebkit.MediaKeys"),this.keySystem_=sn,this.media_=null,this.eventManager_=new shaka.util.EventManager,this.newSessions_=[],this.sessionMap_=new Map},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeys.prototype.setMedia=function(sn){var ln=this;this.media_=sn,this.eventManager_.removeAll();var cn=shaka.polyfill.PatchedMediaKeysWebkit.prefix_;sn&&(this.eventManager_.listen(sn,cn+"needkey",function(dn){return ln.onWebkitNeedKey_(dn)}),this.eventManager_.listen(sn,cn+"keymessage",function(dn){return ln.onWebkitKeyMessage_(dn)}),this.eventManager_.listen(sn,cn+"keyadded",function(dn){return ln.onWebkitKeyAdded_(dn)}),this.eventManager_.listen(sn,cn+"keyerror",function(dn){return ln.onWebkitKeyError_(dn)}))},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeys.prototype.createSession=function(sn){if(shaka.log.debug("PatchedMediaKeysWebkit.MediaKeys.createSession"),sn=sn||"temporary",sn!="temporary"&&sn!="persistent-license")throw new TypeError("Session type "+sn+" is unsupported on this platform.");var ln=shaka.polyfill.PatchedMediaKeysWebkit,cn=this.media_||document.createElement("video");return cn.src||(cn.src="about:blank"),sn=new ln.MediaKeySession(cn,this.keySystem_,sn),this.newSessions_.push(sn),sn},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeys.prototype.setServerCertificate=function(sn){return shaka.log.debug("PatchedMediaKeysWebkit.MediaKeys.setServerCertificate"),Promise.resolve(!1)},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeys.prototype.onWebkitNeedKey_=function(sn){shaka.log.debug("PatchedMediaKeysWebkit.onWebkitNeedKey_",sn),goog.asserts.assert(this.media_,"media_ not set in onWebkitNeedKey_");var ln=new CustomEvent("encrypted");ln.initDataType="cenc",ln.initData=shaka.util.BufferUtils.toArrayBuffer(sn.initData),this.media_.dispatchEvent(ln)},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeys.prototype.onWebkitKeyMessage_=function(sn){shaka.log.debug("PatchedMediaKeysWebkit.onWebkitKeyMessage_",sn);var ln=this.findSession_(sn.sessionId);if(ln){var cn=ln.keyStatuses.getStatus()==null;sn=new Map().set("messageType",cn?"licenserequest":"licenserenewal").set("message",sn.message),sn=new shaka.util.FakeEvent("message",sn),ln.generated(),ln.dispatchEvent(sn)}else shaka.log.error("Session not found",sn.sessionId)},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeys.prototype.onWebkitKeyAdded_=function(sn){shaka.log.debug("PatchedMediaKeysWebkit.onWebkitKeyAdded_",sn),sn=this.findSession_(sn.sessionId),goog.asserts.assert(sn,"unable to find session in onWebkitKeyAdded_"),sn&&sn.ready()},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeys.prototype.onWebkitKeyError_=function(sn){shaka.log.debug("PatchedMediaKeysWebkit.onWebkitKeyError_",sn);var ln=this.findSession_(sn.sessionId);goog.asserts.assert(ln,"unable to find session in onWebkitKeyError_"),ln&&ln.handleError(sn)},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeys.prototype.findSession_=function(sn){var ln=this.sessionMap_.get(sn);return ln?(shaka.log.debug("PatchedMediaKeysWebkit.MediaKeys.findSession_",ln),ln):(ln=this.newSessions_.shift())?(ln.sessionId=sn,this.sessionMap_.set(sn,ln),shaka.log.debug("PatchedMediaKeysWebkit.MediaKeys.findSession_",ln),ln):null},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeySession=function(sn,ln,cn){shaka.log.debug("PatchedMediaKeysWebkit.MediaKeySession"),shaka.util.FakeEventTarget.call(this),this.media_=sn,this.initialized_=!1,this.updatePromise_=this.generatePromise_=null,this.keySystem_=ln,this.type_=cn,this.sessionId="",this.expiration=NaN,this.closed=new shaka.util.PublicPromise,this.keyStatuses=new shaka.polyfill.PatchedMediaKeysWebkit.MediaKeyStatusMap},$jscomp.inherits(shaka.polyfill.PatchedMediaKeysWebkit.MediaKeySession,shaka.util.FakeEventTarget),shaka.polyfill.PatchedMediaKeysWebkit.MediaKeySession.prototype.generated=function(){shaka.log.debug("PatchedMediaKeysWebkit.MediaKeySession.generated"),this.generatePromise_&&(this.generatePromise_.resolve(),this.generatePromise_=null)},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeySession.prototype.ready=function(){shaka.log.debug("PatchedMediaKeysWebkit.MediaKeySession.ready"),this.updateKeyStatus_("usable"),this.updatePromise_&&this.updatePromise_.resolve(),this.updatePromise_=null},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeySession.prototype.handleError=function(sn){shaka.log.debug("PatchedMediaKeysWebkit.MediaKeySession.handleError",sn);var ln=Error("EME v0.1b key error"),cn=sn.errorCode;cn.systemCode=sn.systemCode,ln.errorCode=cn,!sn.sessionId&&this.generatePromise_?(sn.systemCode==45&&(ln.message="Unsupported session type."),this.generatePromise_.reject(ln),this.generatePromise_=null):sn.sessionId&&this.updatePromise_?(this.updatePromise_.reject(ln),this.updatePromise_=null):(ln=sn.systemCode,sn.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?this.updateKeyStatus_("output-restricted"):ln==1?this.updateKeyStatus_("expired"):this.updateKeyStatus_("internal-error"))},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeySession.prototype.generate_=function(sn,ln){var cn=this,dn=shaka.polyfill.PatchedMediaKeysWebkit;if(this.initialized_)return Promise.reject(Error("The session is already initialized."));this.initialized_=!0;try{if(this.type_=="persistent-license"){var pn=shaka.util.StringUtils;if(ln)var vn=shaka.util.BufferUtils.toUint8(pn.toUTF8("LOAD_SESSION|"+ln));else{goog.asserts.assert(sn,"expecting init data");var kn=pn.toUTF8("PERSISTENT|");vn=shaka.util.Uint8ArrayUtils.concat(kn,sn)}}else goog.asserts.assert(this.type_=="temporary","expected temporary session"),goog.asserts.assert(!ln,"unexpected offline session ID"),goog.asserts.assert(sn,"expecting init data"),vn=shaka.util.BufferUtils.toUint8(sn);goog.asserts.assert(vn,"init data not set!")}catch(wn){return Promise.reject(wn)}goog.asserts.assert(this.generatePromise_==null,"generatePromise_ should be null"),this.generatePromise_=new shaka.util.PublicPromise;var Sn=dn.prefixApi_("generateKeyRequest");try{this.media_[Sn](this.keySystem_,vn)}catch(wn){if(wn.name!="InvalidStateError")return this.generatePromise_=null,Promise.reject(wn);new shaka.util.Timer(function(){try{cn.media_[Sn](cn.keySystem_,vn)}catch(Pn){cn.generatePromise_.reject(Pn),cn.generatePromise_=null}}).tickAfter(.01)}return this.generatePromise_},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeySession.prototype.update_=function(sn,ln){var cn=this,dn=shaka.polyfill.PatchedMediaKeysWebkit;if(this.updatePromise_)this.updatePromise_.then(function(){return cn.update_(sn,ln)}).catch(function(){return cn.update_(sn,ln)});else{if(this.updatePromise_=sn,this.keySystem_=="webkit-org.w3.clearkey"){var pn=shaka.util.Uint8ArrayUtils,vn=shaka.util.StringUtils.fromUTF8(ln),kn=JSON.parse(vn);kn.keys[0].kty!="oct"&&(this.updatePromise_.reject(Error("Response is not a valid JSON Web Key Set.")),this.updatePromise_=null),vn=pn.fromBase64(kn.keys[0].k),pn=pn.fromBase64(kn.keys[0].kid)}else vn=shaka.util.BufferUtils.toUint8(ln),pn=null;dn=dn.prefixApi_("addKey");try{this.media_[dn](this.keySystem_,vn,pn,this.sessionId)}catch(Sn){this.updatePromise_.reject(Sn),this.updatePromise_=null}}},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeySession.prototype.updateKeyStatus_=function(sn){this.keyStatuses.setStatus(sn),sn=new shaka.util.FakeEvent("keystatuseschange"),this.dispatchEvent(sn)},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeySession.prototype.generateRequest=function(sn,ln){return shaka.log.debug("PatchedMediaKeysWebkit.MediaKeySession.generateRequest"),this.generate_(ln,null)},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeySession.prototype.load=function(sn){return shaka.log.debug("PatchedMediaKeysWebkit.MediaKeySession.load"),this.type_=="persistent-license"?this.generate_(null,sn):Promise.reject(Error("Not a persistent session."))},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeySession.prototype.update=function(sn){shaka.log.debug("PatchedMediaKeysWebkit.MediaKeySession.update",sn),goog.asserts.assert(this.sessionId,"update without session ID");var ln=new shaka.util.PublicPromise;return this.update_(ln,sn),ln},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeySession.prototype.close=function(){var sn=shaka.polyfill.PatchedMediaKeysWebkit;if(shaka.log.debug("PatchedMediaKeysWebkit.MediaKeySession.close"),this.type_!="persistent-license"){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;sn=sn.prefixApi_("cancelKeyRequest");try{this.media_[sn](this.keySystem_,this.sessionId)}catch{}}return this.closed.resolve(),this.closed},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeySession.prototype.remove=function(){return shaka.log.debug("PatchedMediaKeysWebkit.MediaKeySession.remove"),this.type_!="persistent-license"?Promise.reject(Error("Not a persistent session.")):this.close()},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeyStatusMap=function(){this.size=0,this.status_=void 0},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeyStatusMap.prototype.setStatus=function(sn){this.size=sn==null?0:1,this.status_=sn},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeyStatusMap.prototype.getStatus=function(){return this.status_},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeyStatusMap.prototype.forEach=function(sn){this.status_&&sn(this.status_,shaka.media.DrmEngine.DUMMY_KEY_ID.value())},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeyStatusMap.prototype.get=function(sn){if(this.has(sn))return this.status_},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeyStatusMap.prototype.has=function(sn){var ln=shaka.media.DrmEngine.DUMMY_KEY_ID.value();return!!(this.status_&&shaka.util.BufferUtils.equal(sn,ln))},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeyStatusMap.prototype.entries=function(){goog.asserts.assert(!1,"Not used!  Provided only for compiler.")},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeyStatusMap.prototype.keys=function(){goog.asserts.assert(!1,"Not used!  Provided only for compiler.")},shaka.polyfill.PatchedMediaKeysWebkit.MediaKeyStatusMap.prototype.values=function(){goog.asserts.assert(!1,"Not used!  Provided only for compiler.")},shaka.polyfill.PatchedMediaKeysWebkit.prefix_="",shaka.polyfill.register(shaka.polyfill.PatchedMediaKeysWebkit.install),shaka.polyfill.PiPWebkit=function(){},shaka.polyfill.PiPWebkit.install=function(){if(window.HTMLVideoElement){var sn=HTMLVideoElement.prototype;if((!sn.requestPictureInPicture||!document.exitPictureInPicture)&&sn.webkitSupportsPresentationMode){var ln=shaka.polyfill.PiPWebkit;shaka.log.debug("PiPWebkit.install"),document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,sn.requestPictureInPicture=ln.requestPictureInPicture_,Object.defineProperty(sn,"disablePictureInPicture",{get:ln.getDisablePictureInPicture_,set:ln.setDisablePictureInPicture_,enumerable:!0,configurable:!0}),document.exitPictureInPicture=ln.exitPictureInPicture_,document.addEventListener("webkitpresentationmodechanged",ln.proxyEvent_,!0)}}},shaka.polyfill.PiPWebkit.proxyEvent_=function(sn){if(sn=sn.target,sn.webkitPresentationMode==shaka.polyfill.PiPWebkit.PIP_MODE_){document.pictureInPictureElement=sn;var ln=new Event("enterpictureinpicture");sn.dispatchEvent(ln)}else document.pictureInPictureElement==sn&&(document.pictureInPictureElement=null),ln=new Event("leavepictureinpicture"),sn.dispatchEvent(ln)},shaka.polyfill.PiPWebkit.requestPictureInPicture_=function(){var sn=shaka.polyfill.PiPWebkit;return this.webkitSupportsPresentationMode(sn.PIP_MODE_)?(this.webkitSetPresentationMode(sn.PIP_MODE_),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))},shaka.polyfill.PiPWebkit.exitPictureInPicture_=function(){var sn=shaka.polyfill.PiPWebkit,ln=document.pictureInPictureElement;return ln?(ln.webkitSetPresentationMode(sn.INLINE_MODE_),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))},shaka.polyfill.PiPWebkit.getDisablePictureInPicture_=function(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode(shaka.polyfill.PiPWebkit.PIP_MODE_)},shaka.polyfill.PiPWebkit.setDisablePictureInPicture_=function(sn){sn?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")},goog.exportProperty(shaka.polyfill,"PiPWebkit",shaka.polyfill.PiPWebkit),goog.exportProperty(shaka.polyfill.PiPWebkit,"install",shaka.polyfill.PiPWebkit.install),shaka.polyfill.PiPWebkit.PIP_MODE_="picture-in-picture",shaka.polyfill.PiPWebkit.INLINE_MODE_="inline",shaka.polyfill.register(shaka.polyfill.PiPWebkit.install),shaka.polyfill.RandomUUID=function(){},shaka.polyfill.RandomUUID.install=function(){shaka.log.debug("randomUUID.install"),window.crypto?"randomUUID"in window.crypto?shaka.log.debug("RandomUUID: Native window.crypto.randomUUID() support found."):window.crypto.randomUUID=shaka.polyfill.RandomUUID.randomUUID_:shaka.log.debug("window.crypto must be available to install randomUUID polyfill.")},shaka.polyfill.RandomUUID.randomUUID_=function(){var sn=URL.createObjectURL(new Blob),ln=sn.toString();return URL.revokeObjectURL(sn),ln.substr(ln.lastIndexOf("/")+1)},goog.exportProperty(shaka.polyfill,"RandomUUID",shaka.polyfill.RandomUUID),goog.exportProperty(shaka.polyfill.RandomUUID,"install",shaka.polyfill.RandomUUID.install),shaka.polyfill.register(shaka.polyfill.RandomUUID.install),shaka.polyfill.StorageEstimate=function(){},shaka.polyfill.StorageEstimate.install=function(){navigator.storage&&navigator.storage.estimate||!navigator.webkitTemporaryStorage||!navigator.webkitTemporaryStorage.queryUsageAndQuota||("storage"in navigator||(navigator.storage={}),navigator.storage.estimate=shaka.polyfill.StorageEstimate.storageEstimate_)},shaka.polyfill.StorageEstimate.storageEstimate_=function(){return new Promise(function(sn,ln){navigator.webkitTemporaryStorage.queryUsageAndQuota(function(cn,dn){sn({usage:cn,quota:dn})},ln)})},goog.exportProperty(shaka.polyfill,"StorageEstimate",shaka.polyfill.StorageEstimate),goog.exportProperty(shaka.polyfill.StorageEstimate,"install",shaka.polyfill.StorageEstimate.install),shaka.polyfill.register(shaka.polyfill.StorageEstimate.install),shaka.polyfill.Symbol=function(){},shaka.polyfill.Symbol.install=function(){shaka.log.debug("Symbol.install");var sn=Symbol.prototype;"description"in sn||Object.defineProperty(sn,"description",{get:shaka.polyfill.Symbol.getSymbolDescription_})},shaka.polyfill.Symbol.getSymbolDescription_=function(){var sn=/\((.*)\)/.exec(this.toString());return sn?sn[1]:void 0},goog.exportProperty(shaka.polyfill,"Symbol",shaka.polyfill.Symbol),goog.exportProperty(shaka.polyfill.Symbol,"install",shaka.polyfill.Symbol.install),shaka.polyfill.register(shaka.polyfill.Symbol.install),shaka.polyfill.VideoPlayPromise=function(){},shaka.polyfill.VideoPlayPromise.install=function(){if(shaka.log.debug("VideoPlayPromise.install"),window.HTMLMediaElement){var sn=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var ln=sn.apply(this);return ln&&ln.catch(function(){}),ln}}},goog.exportProperty(shaka.polyfill,"VideoPlayPromise",shaka.polyfill.VideoPlayPromise),goog.exportProperty(shaka.polyfill.VideoPlayPromise,"install",shaka.polyfill.VideoPlayPromise.install),shaka.polyfill.register(shaka.polyfill.VideoPlayPromise.install),shaka.polyfill.VideoPlaybackQuality=function(){},shaka.polyfill.VideoPlaybackQuality.install=function(){if(window.HTMLVideoElement){var sn=HTMLVideoElement.prototype;!sn.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in sn||shaka.util.Platform.isWebOS3())&&(sn.getVideoPlaybackQuality=shaka.polyfill.VideoPlaybackQuality.webkit_)}},shaka.polyfill.VideoPlaybackQuality.webkit_=function(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}},goog.exportProperty(shaka.polyfill,"VideoPlaybackQuality",shaka.polyfill.VideoPlaybackQuality),goog.exportProperty(shaka.polyfill.VideoPlaybackQuality,"install",shaka.polyfill.VideoPlaybackQuality.install),shaka.polyfill.register(shaka.polyfill.VideoPlaybackQuality.install),shaka.polyfill.VTTCue=function(){},shaka.polyfill.VTTCue.install=function(){if(window.VTTCue)shaka.log.info("Using native VTTCue.");else if(window.TextTrackCue){var sn=null,ln=TextTrackCue.length;ln==3?(shaka.log.info("Using VTTCue polyfill from 3 argument TextTrackCue."),sn=shaka.polyfill.VTTCue.from3ArgsTextTrackCue_):ln==6?(shaka.log.info("Using VTTCue polyfill from 6 argument TextTrackCue."),sn=shaka.polyfill.VTTCue.from6ArgsTextTrackCue_):shaka.polyfill.VTTCue.canUse3ArgsTextTrackCue_()&&(shaka.log.info("Using VTTCue polyfill from 3 argument TextTrackCue."),sn=shaka.polyfill.VTTCue.from3ArgsTextTrackCue_),sn?window.VTTCue=function(cn,dn,pn){return sn(cn,dn,pn)}:shaka.log.error("No recognized signature for TextTrackCue found!")}else shaka.log.error("VTTCue not available.")},shaka.polyfill.VTTCue.from3ArgsTextTrackCue_=function(sn,ln,cn){return new window.TextTrackCue(sn,ln,cn)},shaka.polyfill.VTTCue.from6ArgsTextTrackCue_=function(sn,ln,cn){return new window.TextTrackCue(sn+"-"+ln+"-"+cn,sn,ln,cn)},shaka.polyfill.VTTCue.canUse3ArgsTextTrackCue_=function(){try{return!!shaka.polyfill.VTTCue.from3ArgsTextTrackCue_(1,2,"")}catch{return!1}},goog.exportProperty(shaka.polyfill,"VTTCue",shaka.polyfill.VTTCue),goog.exportProperty(shaka.polyfill.VTTCue,"install",shaka.polyfill.VTTCue.install),shaka.polyfill.register(shaka.polyfill.VTTCue.install),shaka.text.LrcTextParser=function(){},shaka.text.LrcTextParser.prototype.parseInit=function(sn){goog.asserts.assert(!1,"LRC does not have init segments")},shaka.text.LrcTextParser.prototype.setSequenceMode=function(sn){},shaka.text.LrcTextParser.prototype.parseMedia=function(sn,ln){var cn=shaka.text.LrcTextParser,dn=null,pn=[];sn=shaka.util.StringUtils.fromUTF8(sn).split(/\r?\n/),sn=$jscomp.makeIterator(sn);for(var vn=sn.next();!vn.done;vn=sn.next()){var kn=vn.value;kn&&!/^\s+$/.test(kn)&&((vn=cn.lyricLine_.exec(kn))?(kn=cn.parseTime_(vn[1]),vn=new shaka.text.Cue(kn,ln.segmentEnd?ln.segmentEnd:kn+2,vn[2]),dn&&(dn.endTime=kn,pn.push(dn)),dn=vn):shaka.log.warning("LrcTextParser encountered an unknown line.",kn))}return dn&&pn.push(dn),pn},shaka.text.LrcTextParser.parseTime_=function(sn){var ln=shaka.text.LrcTextParser.timeFormat_.exec(sn);return sn=parseInt(ln[1],10),ln=parseFloat(ln[2].replace(",",".")),60*sn+ln},goog.exportSymbol("shaka.text.LrcTextParser",shaka.text.LrcTextParser),goog.exportProperty(shaka.text.LrcTextParser.prototype,"parseMedia",shaka.text.LrcTextParser.prototype.parseMedia),goog.exportProperty(shaka.text.LrcTextParser.prototype,"setSequenceMode",shaka.text.LrcTextParser.prototype.setSequenceMode),goog.exportProperty(shaka.text.LrcTextParser.prototype,"parseInit",shaka.text.LrcTextParser.prototype.parseInit),shaka.text.LrcTextParser.lyricLine_=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,shaka.text.LrcTextParser.timeFormat_=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/,shaka.text.TextEngine.registerParser("application/x-subtitle-lrc",function(){return new shaka.text.LrcTextParser}),shaka.text.TtmlTextParser=function(){},shaka.text.TtmlTextParser.prototype.parseInit=function(sn){goog.asserts.assert(!1,"TTML does not have init segments")},shaka.text.TtmlTextParser.prototype.setSequenceMode=function(sn){},shaka.text.TtmlTextParser.prototype.parseMedia=function(sn,ln){var cn=shaka.text.TtmlTextParser,dn=shaka.util.XmlUtils,pn=cn.parameterNs_,vn=cn.styleNs_,kn=shaka.util.StringUtils.fromUTF8(sn);if(sn=[],kn=="")return sn;var Sn=dn.parseXmlString(kn,"tt");if(!Sn)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_XML,"Failed to parse TTML.");if(kn=Sn.getElementsByTagName("body")[0],!kn)return[];var wn=dn.getAttributeNSList(Sn,pn,"frameRate"),Pn=dn.getAttributeNSList(Sn,pn,"subFrameRate"),Nn=dn.getAttributeNSList(Sn,pn,"frameRateMultiplier"),Ln=dn.getAttributeNSList(Sn,pn,"tickRate"),Fn=dn.getAttributeNSList(Sn,pn,"cellResolution"),zn=Sn.getAttribute("xml:space")||"default";if(pn=dn.getAttributeNSList(Sn,vn,"extent"),zn!="default"&&zn!="preserve")throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_XML,"Invalid xml:space value: "+zn);vn=zn=="default",wn=new cn.RateInfo_(wn,Pn,Nn,Ln),Pn=cn.getCellResolution_(Fn),Nn=(Nn=Sn.getElementsByTagName("metadata")[0])?dn.getChildren(Nn):[],Ln=Array.from(Sn.getElementsByTagName("style")),Sn=Array.from(Sn.getElementsByTagName("region")),Fn=[],zn=$jscomp.makeIterator(Sn);for(var Dn=zn.next();!Dn.done;Dn=zn.next())(Dn=cn.parseCueRegion_(Dn.value,Ln,pn))&&Fn.push(Dn);if(dn.findChildren(kn,"p").length)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_TEXT_CUE,"<p> can only be inside <div> in TTML");for(pn=$jscomp.makeIterator(dn.findChildren(kn,"div")),zn=pn.next();!zn.done;zn=pn.next())if(dn.findChildren(zn.value,"span").length)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_TEXT_CUE,"<span> can only be inside <p> in TTML");return(ln=cn.parseCue_(kn,ln,wn,Nn,Ln,Sn,Fn,vn,Pn,null,!1))&&(ln.backgroundColor||(ln.backgroundColor="transparent"),sn.push(ln)),sn},shaka.text.TtmlTextParser.parseCue_=function(sn,ln,cn,dn,pn,vn,kn,Sn,wn,Pn,Nn){var Ln=sn.parentNode;if(sn.nodeType==Node.COMMENT_NODE)return null;if(sn.nodeType==Node.TEXT_NODE){if(!Nn)return null;var Fn=document.createElement("span");Fn.textContent=sn.textContent}else goog.asserts.assert(sn.nodeType==Node.ELEMENT_NODE,"nodeType should be ELEMENT_NODE!"),Fn=sn;goog.asserts.assert(Fn,"cueElement should be non-null!");for(var zn=null,Dn=$jscomp.makeIterator(shaka.text.TtmlTextParser.smpteNsList_),Kn=Dn.next();!Kn.done&&!(zn=shaka.text.TtmlTextParser.getElementsFromCollection_(Fn,"backgroundImage",dn,"#",Kn.value)[0]);Kn=Dn.next());if(Dn=Nn,(sn.nodeName=="p"||zn)&&(Nn=!0),Sn=(Fn.getAttribute("xml:space")||(Sn?"default":"preserve"))=="default",Kn=Array.from(Fn.childNodes).every(function(rs){return rs.nodeType==Node.TEXT_NODE}),sn=[],!Kn)for(var qn=$jscomp.makeIterator(Fn.childNodes),Zn=qn.next();!Zn.done;Zn=qn.next())(Zn=shaka.text.TtmlTextParser.parseCue_(Zn.value,ln,cn,dn,pn,vn,kn,Sn,wn,Fn,Nn))&&sn.push(Zn);dn=Pn!=null,qn=/\S/.test(Fn.textContent);var Yn=Fn.hasAttribute("begin")||Fn.hasAttribute("end")||Fn.hasAttribute("dur");if(!(Yn||qn||Fn.tagName=="br"||sn.length!=0||dn&&!Sn))return null;for(Zn=shaka.text.TtmlTextParser.parseTime_(Fn,cn),qn=Zn.start,Zn=Zn.end;Ln&&Ln.nodeType==Node.ELEMENT_NODE&&Ln.tagName!="tt";)Zn=shaka.text.TtmlTextParser.resolveTime_(Ln,cn,qn,Zn),qn=Zn.start,Zn=Zn.end,Ln=Ln.parentNode;if(qn==null&&(qn=0),qn+=ln.periodStart,Zn=Zn==null?1/0:Zn+ln.periodStart,qn=Math.max(qn,ln.segmentStart),Zn=Math.min(Zn,ln.segmentEnd),!Yn&&0<sn.length)for(qn=1/0,Zn=0,ln=$jscomp.makeIterator(sn),cn=ln.next();!cn.done;cn=ln.next())cn=cn.value,qn=Math.min(qn,cn.startTime),Zn=Math.max(Zn,cn.endTime);if(Fn.tagName=="br")return pn=new shaka.text.Cue(qn,Zn,""),pn.lineBreak=!0,pn;if(ln="",Kn&&(ln=Fn.textContent,Sn&&(ln=ln.trim(),ln=ln.replace(/\s+/g," "))),ln=new shaka.text.Cue(qn,Zn,ln),ln.nestedCues=sn,Nn||(ln.isContainer=!0),wn&&(ln.cellResolution=wn),wn=shaka.text.TtmlTextParser.getElementsFromCollection_(Fn,"region",vn,"")[0],Fn.hasAttribute("region")&&wn&&wn.getAttribute("xml:id")){var Jn=wn.getAttribute("xml:id");ln.region=kn.filter(function(rs){return rs.id==Jn})[0]}return kn=wn,Pn&&dn&&!Fn.getAttribute("region")&&!Fn.getAttribute("style")&&(kn=shaka.text.TtmlTextParser.getElementsFromCollection_(Pn,"region",vn,"")[0]),shaka.text.TtmlTextParser.addStyle_(ln,Fn,kn,zn,pn,Dn,sn.length==0),ln},shaka.text.TtmlTextParser.parseCueRegion_=function(sn,ln,cn){var dn=shaka.text.TtmlTextParser,pn=new shaka.text.CueRegion,vn=sn.getAttribute("xml:id");if(!vn)return shaka.log.warning("TtmlTextParser parser encountered a region with no id. Region will be ignored."),null;pn.id=vn,vn=null,cn&&(vn=dn.percentValues_.exec(cn)||dn.pixelValues_.exec(cn)),cn=vn?Number(vn[1]):null,vn=vn?Number(vn[2]):null;var kn,Sn;return(kn=dn.getStyleAttributeFromRegion_(sn,ln,"extent"))&&(kn=(Sn=dn.percentValues_.exec(kn))||dn.pixelValues_.exec(kn),kn!=null&&(pn.width=Number(kn[1]),pn.height=Number(kn[2]),Sn||(cn!=null&&(pn.width=100*pn.width/cn),vn!=null&&(pn.height=100*pn.height/vn)),pn.widthUnits=Sn||cn!=null?shaka.text.CueRegion.units.PERCENTAGE:shaka.text.CueRegion.units.PX,pn.heightUnits=Sn||vn!=null?shaka.text.CueRegion.units.PERCENTAGE:shaka.text.CueRegion.units.PX)),(sn=dn.getStyleAttributeFromRegion_(sn,ln,"origin"))&&(kn=(Sn=dn.percentValues_.exec(sn))||dn.pixelValues_.exec(sn),kn!=null&&(pn.viewportAnchorX=Number(kn[1]),pn.viewportAnchorY=Number(kn[2]),Sn||(vn!=null&&(pn.viewportAnchorY=100*pn.viewportAnchorY/vn),cn!=null&&(pn.viewportAnchorX=100*pn.viewportAnchorX/cn)),pn.viewportAnchorUnits=Sn||cn!=null?shaka.text.CueRegion.units.PERCENTAGE:shaka.text.CueRegion.units.PX)),pn},shaka.text.TtmlTextParser.addStyle_=function(sn,ln,cn,dn,pn,vn,kn){var Sn=shaka.text.TtmlTextParser,wn=shaka.text.Cue;if(vn=vn||kn,Sn.getStyleAttribute_(ln,cn,pn,"direction",vn)=="rtl"&&(sn.direction=wn.direction.HORIZONTAL_RIGHT_TO_LEFT),kn=Sn.getStyleAttribute_(ln,cn,pn,"writingMode",vn),kn=="tb"||kn=="tblr"?sn.writingMode=wn.writingMode.VERTICAL_LEFT_TO_RIGHT:kn=="tbrl"?sn.writingMode=wn.writingMode.VERTICAL_RIGHT_TO_LEFT:kn=="rltb"||kn=="rl"?sn.direction=wn.direction.HORIZONTAL_RIGHT_TO_LEFT:kn&&(sn.direction=wn.direction.HORIZONTAL_LEFT_TO_RIGHT),(kn=Sn.getStyleAttribute_(ln,cn,pn,"textAlign",!0))?(sn.positionAlign=Sn.textAlignToPositionAlign_[kn],sn.lineAlign=Sn.textAlignToLineAlign_[kn],goog.asserts.assert(kn.toUpperCase()in wn.textAlign,kn.toUpperCase()+" Should be in Cue.textAlign values!"),sn.textAlign=wn.textAlign[kn.toUpperCase()]):sn.textAlign=wn.textAlign.CENTER,(kn=Sn.getStyleAttribute_(ln,cn,pn,"displayAlign",!0))&&(goog.asserts.assert(kn.toUpperCase()in wn.displayAlign,kn.toUpperCase()+" Should be in Cue.displayAlign values!"),sn.displayAlign=wn.displayAlign[kn.toUpperCase()]),(kn=Sn.getStyleAttribute_(ln,cn,pn,"color",vn))&&(sn.color=kn),(kn=Sn.getStyleAttribute_(ln,cn,pn,"backgroundColor",vn))&&(sn.backgroundColor=kn),(kn=Sn.getStyleAttribute_(ln,cn,pn,"border",vn))&&(sn.border=kn),kn=Sn.getStyleAttribute_(ln,cn,pn,"fontFamily",vn))switch(kn){case"monospaceSerif":sn.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":sn.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":sn.fontFamily="sans-serif";break;case"monospaceSansSerif":sn.fontFamily="Consolas,monospace";break;case"proportionalSerif":sn.fontFamily="serif";break;default:sn.fontFamily=kn}(kn=Sn.getStyleAttribute_(ln,cn,pn,"fontWeight",vn))&&kn=="bold"&&(sn.fontWeight=wn.fontWeight.BOLD),kn=Sn.getStyleAttribute_(ln,cn,pn,"wrapOption",vn),sn.wrapLine=!(kn&&kn=="noWrap"),(kn=Sn.getStyleAttribute_(ln,cn,pn,"lineHeight",vn))&&kn.match(Sn.unitValues_)&&(sn.lineHeight=kn),(kn=Sn.getStyleAttribute_(ln,cn,pn,"fontSize",vn))&&(kn.match(Sn.unitValues_)||kn.match(Sn.percentValue_))&&(sn.fontSize=kn),(kn=Sn.getStyleAttribute_(ln,cn,pn,"fontStyle",vn))&&(goog.asserts.assert(kn.toUpperCase()in wn.fontStyle,kn.toUpperCase()+" Should be in Cue.fontStyle values!"),sn.fontStyle=wn.fontStyle[kn.toUpperCase()]),dn&&(wn=dn.getAttribute("imageType")||dn.getAttribute("imagetype"),kn=dn.getAttribute("encoding"),dn=dn.textContent.trim(),wn=="PNG"&&kn=="Base64"&&dn&&(sn.backgroundImage="data:image/png;base64,"+dn)),(dn=Sn.getStyleAttribute_(ln,cn,pn,"textOutline",vn))&&(dn=dn.split(" "),dn[0].match(Sn.unitValues_)?sn.textStrokeColor=sn.color:(sn.textStrokeColor=dn[0],dn.shift()),dn[0]&&dn[0].match(Sn.unitValues_)?sn.textStrokeWidth=dn[0]:sn.textStrokeColor=""),(dn=Sn.getStyleAttribute_(ln,cn,pn,"letterSpacing",vn))&&dn.match(Sn.unitValues_)&&(sn.letterSpacing=dn),(dn=Sn.getStyleAttribute_(ln,cn,pn,"linePadding",vn))&&dn.match(Sn.unitValues_)&&(sn.linePadding=dn),(vn=Sn.getStyleAttribute_(ln,cn,pn,"opacity",vn))&&(sn.opacity=parseFloat(vn)),(cn=Sn.getStyleAttributeFromRegion_(cn,pn,"textDecoration"))&&Sn.addTextDecoration_(sn,cn),(ln=Sn.getStyleAttributeFromElement_(ln,pn,"textDecoration"))&&Sn.addTextDecoration_(sn,ln)},shaka.text.TtmlTextParser.addTextDecoration_=function(sn,ln){var cn=shaka.text.Cue;ln=$jscomp.makeIterator(ln.split(" "));for(var dn=ln.next();!dn.done;dn=ln.next())switch(dn.value){case"underline":sn.textDecoration.includes(cn.textDecoration.UNDERLINE)||sn.textDecoration.push(cn.textDecoration.UNDERLINE);break;case"noUnderline":sn.textDecoration.includes(cn.textDecoration.UNDERLINE)&&shaka.util.ArrayUtils.remove(sn.textDecoration,cn.textDecoration.UNDERLINE);break;case"lineThrough":sn.textDecoration.includes(cn.textDecoration.LINE_THROUGH)||sn.textDecoration.push(cn.textDecoration.LINE_THROUGH);break;case"noLineThrough":sn.textDecoration.includes(cn.textDecoration.LINE_THROUGH)&&shaka.util.ArrayUtils.remove(sn.textDecoration,cn.textDecoration.LINE_THROUGH);break;case"overline":sn.textDecoration.includes(cn.textDecoration.OVERLINE)||sn.textDecoration.push(cn.textDecoration.OVERLINE);break;case"noOverline":sn.textDecoration.includes(cn.textDecoration.OVERLINE)&&shaka.util.ArrayUtils.remove(sn.textDecoration,cn.textDecoration.OVERLINE)}},shaka.text.TtmlTextParser.getStyleAttribute_=function(sn,ln,cn,dn,pn){pn=pn===void 0?!0:pn;var vn=shaka.text.TtmlTextParser;return(sn=vn.getStyleAttributeFromElement_(sn,cn,dn))?sn:pn?vn.getStyleAttributeFromRegion_(ln,cn,dn):null},shaka.text.TtmlTextParser.getStyleAttributeFromRegion_=function(sn,ln,cn){if(!sn)return null;var dn=shaka.util.XmlUtils.getAttributeNSList(sn,shaka.text.TtmlTextParser.styleNs_,cn);return dn||shaka.text.TtmlTextParser.getInheritedStyleAttribute_(sn,ln,cn)},shaka.text.TtmlTextParser.getStyleAttributeFromElement_=function(sn,ln,cn){var dn=shaka.util.XmlUtils.getAttributeNSList(sn,shaka.text.TtmlTextParser.styleNs_,cn);return dn||shaka.text.TtmlTextParser.getInheritedStyleAttribute_(sn,ln,cn)},shaka.text.TtmlTextParser.getInheritedStyleAttribute_=function(sn,ln,cn){var dn=shaka.util.XmlUtils,pn=shaka.text.TtmlTextParser.styleNs_,vn=shaka.text.TtmlTextParser.styleEbuttsNs_;sn=shaka.text.TtmlTextParser.getElementsFromCollection_(sn,"style",ln,"");for(var kn=null,Sn=0;Sn<sn.length;Sn++){var wn=dn.getAttributeNS(sn[Sn],vn,cn);wn||(wn=dn.getAttributeNSList(sn[Sn],pn,cn)),wn||(wn=shaka.text.TtmlTextParser.getStyleAttributeFromElement_(sn[Sn],ln,cn)),wn&&(kn=wn)}return kn},shaka.text.TtmlTextParser.getElementsFromCollection_=function(sn,ln,cn,dn,pn){var vn=[];if(!sn||1>cn.length)return vn;if(sn=shaka.text.TtmlTextParser.getInheritedAttribute_(sn,ln,pn))for(sn=sn.split(" "),sn=$jscomp.makeIterator(sn),ln=sn.next();!ln.done;ln=sn.next()){ln=ln.value,pn=$jscomp.makeIterator(cn);for(var kn=pn.next();!kn.done;kn=pn.next())if(kn=kn.value,dn+kn.getAttribute("xml:id")==ln){vn.push(kn);break}}return vn},shaka.text.TtmlTextParser.getInheritedAttribute_=function(sn,ln,cn){for(var dn=null,pn=shaka.util.XmlUtils;sn&&!(dn=cn?pn.getAttributeNS(sn,cn,ln):sn.getAttribute(ln))&&(sn=sn.parentNode,sn instanceof Element););return dn},shaka.text.TtmlTextParser.resolveTime_=function(sn,ln,cn,dn){return sn=shaka.text.TtmlTextParser.parseTime_(sn,ln),cn==null?cn=sn.start:sn.start!=null&&(cn+=sn.start),dn==null?dn=sn.end:sn.start!=null&&(dn+=sn.start),{start:cn,end:dn}},shaka.text.TtmlTextParser.parseTime_=function(sn,ln){var cn=shaka.text.TtmlTextParser.parseTimeAttribute_(sn.getAttribute("begin"),ln),dn=shaka.text.TtmlTextParser.parseTimeAttribute_(sn.getAttribute("end"),ln);return sn=shaka.text.TtmlTextParser.parseTimeAttribute_(sn.getAttribute("dur"),ln),dn==null&&sn!=null&&(dn=cn+sn),{start:cn,end:dn}},shaka.text.TtmlTextParser.parseTimeAttribute_=function(sn,ln){var cn=null,dn=shaka.text.TtmlTextParser;if(dn.timeColonFormatFrames_.test(sn))cn=dn.parseColonTimeWithFrames_(ln,sn);else if(dn.timeColonFormat_.test(sn))cn=dn.parseTimeFromRegex_(dn.timeColonFormat_,sn);else if(dn.timeColonFormatMilliseconds_.test(sn))cn=dn.parseTimeFromRegex_(dn.timeColonFormatMilliseconds_,sn);else if(dn.timeFramesFormat_.test(sn))cn=dn.parseFramesTime_(ln,sn);else if(dn.timeTickFormat_.test(sn))cn=dn.parseTickTime_(ln,sn);else if(dn.timeHMSFormat_.test(sn))cn=dn.parseTimeFromRegex_(dn.timeHMSFormat_,sn);else if(sn)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_TEXT_CUE,"Could not parse cue time range in TTML");return cn},shaka.text.TtmlTextParser.parseFramesTime_=function(sn,ln){return ln=shaka.text.TtmlTextParser.timeFramesFormat_.exec(ln),Number(ln[1])/sn.frameRate},shaka.text.TtmlTextParser.parseTickTime_=function(sn,ln){return ln=shaka.text.TtmlTextParser.timeTickFormat_.exec(ln),Number(ln[1])/sn.tickRate},shaka.text.TtmlTextParser.parseColonTimeWithFrames_=function(sn,ln){ln=shaka.text.TtmlTextParser.timeColonFormatFrames_.exec(ln);var cn=Number(ln[1]),dn=Number(ln[2]),pn=Number(ln[3]),vn=Number(ln[4]);return vn+=(Number(ln[5])||0)/sn.subFrameRate,pn+=vn/sn.frameRate,pn+60*dn+3600*cn},shaka.text.TtmlTextParser.parseTimeFromRegex_=function(sn,ln){return sn=sn.exec(ln),sn==null||sn[0]==""?null:(Number(sn[4])||0)/1e3+(Number(sn[3])||0)+60*(Number(sn[2])||0)+3600*(Number(sn[1])||0)},shaka.text.TtmlTextParser.getCellResolution_=function(sn){if(!sn)return null;var ln=/^(\d+) (\d+)$/.exec(sn);return ln?(sn=parseInt(ln[1],10),ln=parseInt(ln[2],10),{columns:sn,rows:ln}):null},goog.exportSymbol("shaka.text.TtmlTextParser",shaka.text.TtmlTextParser),goog.exportProperty(shaka.text.TtmlTextParser.prototype,"parseMedia",shaka.text.TtmlTextParser.prototype.parseMedia),goog.exportProperty(shaka.text.TtmlTextParser.prototype,"setSequenceMode",shaka.text.TtmlTextParser.prototype.setSequenceMode),goog.exportProperty(shaka.text.TtmlTextParser.prototype,"parseInit",shaka.text.TtmlTextParser.prototype.parseInit),shaka.text.TtmlTextParser.RateInfo_=function(sn,ln,cn,dn){this.frameRate=Number(sn)||30,this.subFrameRate=Number(ln)||1,this.tickRate=Number(dn),this.tickRate==0&&(this.tickRate=sn?this.frameRate*this.subFrameRate:1),cn&&(sn=/^(\d+) (\d+)$/g.exec(cn))&&(this.frameRate*=Number(sn[1])/Number(sn[2]))},shaka.text.TtmlTextParser.percentValues_=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,shaka.text.TtmlTextParser.percentValue_=/^(\d{1,2}(?:\.\d+)?|100)%$/,shaka.text.TtmlTextParser.unitValues_=/^(\d+px|\d+em|\d*\.?\d+c)$/,shaka.text.TtmlTextParser.pixelValues_=/^(\d+)px (\d+)px$/,shaka.text.TtmlTextParser.timeColonFormatFrames_=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,shaka.text.TtmlTextParser.timeColonFormat_=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,shaka.text.TtmlTextParser.timeColonFormatMilliseconds_=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,shaka.text.TtmlTextParser.timeFramesFormat_=/^(\d*(?:\.\d*)?)f$/,shaka.text.TtmlTextParser.timeTickFormat_=/^(\d*(?:\.\d*)?)t$/,shaka.text.TtmlTextParser.timeHMSFormat_=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),shaka.text.TtmlTextParser.textAlignToLineAlign_={left:shaka.text.Cue.lineAlign.START,center:shaka.text.Cue.lineAlign.CENTER,right:shaka.text.Cue.lineAlign.END,start:shaka.text.Cue.lineAlign.START,end:shaka.text.Cue.lineAlign.END},shaka.text.TtmlTextParser.textAlignToPositionAlign_={left:shaka.text.Cue.positionAlign.LEFT,center:shaka.text.Cue.positionAlign.CENTER,right:shaka.text.Cue.positionAlign.RIGHT},shaka.text.TtmlTextParser.parameterNs_=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],shaka.text.TtmlTextParser.styleNs_=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],shaka.text.TtmlTextParser.styleEbuttsNs_="urn:ebu:tt:style",shaka.text.TtmlTextParser.smpteNsList_=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"],shaka.text.TextEngine.registerParser("application/ttml+xml",function(){return new shaka.text.TtmlTextParser}),shaka.text.Mp4TtmlParser=function(){this.parser_=new shaka.text.TtmlTextParser},shaka.text.Mp4TtmlParser.prototype.parseInit=function(sn){var ln=shaka.util.Mp4Parser,cn=!1;if(new ln().box("moov",ln.children).box("trak",ln.children).box("mdia",ln.children).box("minf",ln.children).box("stbl",ln.children).fullBox("stsd",ln.sampleDescription).box("stpp",function(dn){cn=!0,dn.parser.stop()}).parse(sn),!cn)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_MP4_TTML)},shaka.text.Mp4TtmlParser.prototype.setSequenceMode=function(sn){},shaka.text.Mp4TtmlParser.prototype.parseMedia=function(sn,ln){var cn=this,dn=shaka.util.Mp4Parser,pn=!1,vn=[];if(new dn().box("mdat",dn.allData(function(kn){pn=!0,vn=vn.concat(cn.parser_.parseMedia(kn,ln))})).parse(sn,!1),!pn)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_MP4_TTML);return vn},goog.exportSymbol("shaka.text.Mp4TtmlParser",shaka.text.Mp4TtmlParser),goog.exportProperty(shaka.text.Mp4TtmlParser.prototype,"parseMedia",shaka.text.Mp4TtmlParser.prototype.parseMedia),goog.exportProperty(shaka.text.Mp4TtmlParser.prototype,"setSequenceMode",shaka.text.Mp4TtmlParser.prototype.setSequenceMode),goog.exportProperty(shaka.text.Mp4TtmlParser.prototype,"parseInit",shaka.text.Mp4TtmlParser.prototype.parseInit),shaka.text.TextEngine.registerParser('application/mp4; codecs="stpp"',function(){return new shaka.text.Mp4TtmlParser}),shaka.text.TextEngine.registerParser('application/mp4; codecs="stpp.ttml"',function(){return new shaka.text.Mp4TtmlParser}),shaka.text.TextEngine.registerParser('application/mp4; codecs="stpp.ttml.im1t"',function(){return new shaka.text.Mp4TtmlParser}),shaka.text.TextEngine.registerParser('application/mp4; codecs="stpp.TTML.im1t"',function(){return new shaka.text.Mp4TtmlParser}),shaka.text.VttTextParser=function(){this.sequenceMode_=!1},shaka.text.VttTextParser.prototype.parseInit=function(sn){goog.asserts.assert(!1,"VTT does not have init segments")},shaka.text.VttTextParser.prototype.setSequenceMode=function(sn){this.sequenceMode_=sn},shaka.text.VttTextParser.prototype.parseMedia=function(sn,ln){var cn=shaka.text.VttTextParser;if(sn=shaka.util.StringUtils.fromUTF8(sn),sn=sn.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`),sn=sn.split(/\n{2,}/m),!/^WEBVTT($|[ \t\n])/m.test(sn[0]))throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_TEXT_HEADER);var dn=ln.vttOffset;if(sn[0].includes("X-TIMESTAMP-MAP")&&this.sequenceMode_){var pn=sn[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),vn=sn[0].match(/MPEGTS:(\d+)/m);if(pn&&vn){if(dn=new shaka.util.TextParser(pn[1]),dn=shaka.text.VttTextParser.parseTime_(dn),dn==null)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_TEXT_HEADER);vn=Number(vn[1]),pn=shaka.text.VttTextParser.MPEG_TIMESCALE_;for(var kn=shaka.text.VttTextParser.TS_ROLLOVER_/pn,Sn=ln.segmentStart-ln.periodStart;Sn>=kn;)Sn-=kn,vn+=shaka.text.VttTextParser.TS_ROLLOVER_;dn=ln.periodStart+vn/pn-dn}}for(ln=[],vn=$jscomp.makeIterator(sn[0].split(`
`)),pn=vn.next();!pn.done;pn=vn.next())pn=pn.value,/^Region:/.test(pn)&&(pn=cn.parseRegion_(pn),ln.push(pn));for(vn=new Map,cn.addDefaultTextColor_(vn),pn=[],sn=$jscomp.makeIterator(sn.slice(1)),kn=sn.next();!kn.done;kn=sn.next())kn=kn.value.split(`
`),cn.parseStyle_(kn,vn),(kn=cn.parseCue_(kn,dn,ln,vn))&&pn.push(kn);return pn},shaka.text.VttTextParser.addDefaultTextColor_=function(sn){for(var ln=$jscomp.makeIterator(Object.entries(shaka.text.Cue.defaultTextColor)),cn=ln.next();!cn.done;cn=ln.next()){var dn=$jscomp.makeIterator(cn.value);cn=dn.next().value,dn=dn.next().value;var pn=new shaka.text.Cue(0,0,"");pn.color=dn,sn.set("."+cn,pn)}for(ln=$jscomp.makeIterator(Object.entries(shaka.text.Cue.defaultTextBackgroundColor)),cn=ln.next();!cn.done;cn=ln.next())dn=$jscomp.makeIterator(cn.value),cn=dn.next().value,dn=dn.next().value,pn=new shaka.text.Cue(0,0,""),pn.backgroundColor=dn,sn.set("."+cn,pn)},shaka.text.VttTextParser.parseRegion_=function(sn){var ln=shaka.text.VttTextParser;sn=new shaka.util.TextParser(sn);var cn=new shaka.text.CueRegion;sn.readWord(),sn.skipWhitespace();for(var dn=sn.readWord();dn;)ln.parseRegionSetting_(cn,dn)||shaka.log.warning("VTT parser encountered an invalid VTTRegion setting: ",dn," The setting will be ignored."),sn.skipWhitespace(),dn=sn.readWord();return cn},shaka.text.VttTextParser.parseStyle_=function(sn,ln){if((sn.length!=1||sn[0])&&!/^NOTE($|[ \t])/.test(sn[0])&&sn[0]=="STYLE"){for(var cn=[],dn=-1,pn=1;pn<sn.length;pn++)sn[pn].includes("::cue")&&(cn.push([]),dn=cn.length-1),dn!=-1&&(cn[dn].push(sn[pn]),sn[pn].includes("}")&&(dn=-1));for(sn=$jscomp.makeIterator(cn),cn=sn.next();!cn.done;cn=sn.next()){pn=cn.value,cn="global",(dn=pn[0].match(/\((.*)\)/))&&(cn=dn.pop()),dn=pn.slice(1,-1),pn[0].includes("}")&&(pn=/\{(.*?)\}/.exec(pn[0]))&&(dn=pn[1].split(";")),(pn=ln.get(cn))||(pn=new shaka.text.Cue(0,0,""));for(var vn=!1,kn=0;kn<dn.length;kn++){var Sn=/^\s*([^:]+):\s*(.*)/.exec(dn[kn]);if(Sn){var wn=Sn[1].trim(),Pn=Sn[2].trim().replace(";","");switch(wn){case"background-color":case"background":vn=!0,pn.backgroundColor=Pn;break;case"color":vn=!0,pn.color=Pn;break;case"font-family":vn=!0,pn.fontFamily=Pn;break;case"font-size":vn=!0,pn.fontSize=Pn;break;case"font-weight":(700<=parseInt(Pn,10)||Pn=="bold")&&(vn=!0,pn.fontWeight=shaka.text.Cue.fontWeight.BOLD);break;case"font-style":switch(Pn){case"normal":vn=!0,pn.fontStyle=shaka.text.Cue.fontStyle.NORMAL;break;case"italic":vn=!0,pn.fontStyle=shaka.text.Cue.fontStyle.ITALIC;break;case"oblique":vn=!0,pn.fontStyle=shaka.text.Cue.fontStyle.OBLIQUE}break;case"opacity":vn=!0,pn.opacity=parseFloat(Pn);break;case"text-shadow":vn=!0,pn.textShadow=Pn;break;case"white-space":vn=!0,pn.wrapLine=Pn!="noWrap";break;default:shaka.log.warning("VTT parser encountered an unsupported style: ",Sn)}}}vn&&ln.set(cn,pn)}}},shaka.text.VttTextParser.parseCue_=function(sn,ln,cn,dn){var pn=shaka.text.VttTextParser;if(sn.length==1&&!sn[0]||/^NOTE($|[ \t])/.test(sn[0])||sn[0]=="STYLE"||sn[0]=="REGION")return null;var vn=null;sn[0].includes("-->")||(vn=sn[0],sn.splice(0,1));var kn=new shaka.util.TextParser(sn[0]),Sn=pn.parseTime_(kn),wn=kn.readRegex(/[ \t]+--\x3e[ \t]+/g),Pn=pn.parseTime_(kn);if(Sn==null||wn==null||Pn==null)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_TEXT_CUE,"Could not parse cue time range in WebVTT");for(Sn+=ln,Pn+=ln,ln=sn.slice(1).join(`
`).trim(),dn.has("global")?(sn=dn.get("global").clone(),sn.startTime=Sn,sn.endTime=Pn,sn.payload=""):sn=new shaka.text.Cue(Sn,Pn,""),pn.parseCueStyles(ln,sn,dn),kn.skipWhitespace(),dn=kn.readWord();dn;)pn.parseCueSetting(sn,dn,cn)||shaka.log.warning("VTT parser encountered an invalid VTT setting: ",dn," The setting will be ignored."),kn.skipWhitespace(),dn=kn.readWord();return vn!=null&&(sn.id=vn),sn},shaka.text.VttTextParser.parseCueStyles=function(sn,ln,cn){var dn=shaka.text.VttTextParser;cn.size===0&&dn.addDefaultTextColor_(cn),sn=dn.replaceColorPayload_(sn),sn=dn.replaceKaraokeStylePayload_(sn),sn=dn.replaceVoiceStylePayload_(sn);var pn=shaka.util.XmlUtils.parseXmlString("<span>"+sn+"</span>","span");if(pn){var vn=[];if(pn=pn.childNodes,pn.length==1){var kn=pn[0];if(kn.nodeType==Node.TEXT_NODE||kn.nodeType==Node.CDATA_SECTION_NODE){ln.payload=dn.htmlUnescape_(sn);return}}for(sn=$jscomp.makeIterator(pn),pn=sn.next();!pn.done;pn=sn.next())dn.generateCueFromElement_(pn.value,ln,vn,cn);ln.nestedCues=vn}else shaka.log.warning("The cue's markup could not be parsed: ",sn),ln.payload=dn.htmlUnescape_(sn)},shaka.text.VttTextParser.replaceVoiceStylePayload_=function(sn){for(var ln=[],cn=-1,dn="",pn=!1,vn=0;vn<sn.length;vn++)if(sn[vn]==="/"){var kn=sn.indexOf(">",vn);if(kn===-1)return sn;if((kn=sn.substring(vn+1,kn))&&kn=="v"){pn=!0;var Sn=null;if(ln.length&&(Sn=ln[ln.length-1]),Sn){if(Sn===kn)dn+="/"+kn+">";else{if(!Sn.startsWith("v")){dn+=sn[vn];continue}dn+="/"+Sn+">"}vn+=kn.length+1}else dn+=sn[vn]}else dn+=sn[vn]}else sn[vn]==="<"?(cn=vn+1,sn[cn]!="v"&&(cn=-1)):sn[vn]===">"&&0<cn&&(ln.push(sn.substr(cn,vn-cn)),cn=-1),dn+=sn[vn];for(sn=$jscomp.makeIterator(ln),ln=sn.next();!ln.done;ln=sn.next())ln=ln.value,cn=ln.replace(" ",".voice-"),dn=dn.replace("<"+ln+">","<"+cn+">"),dn=dn.replace("</"+ln+">","</"+cn+">"),pn||(dn+="</"+cn+">");return dn},shaka.text.VttTextParser.replaceKaraokeStylePayload_=function(sn){for(var ln=[],cn=-1,dn=0;dn<sn.length;dn++)sn[dn]==="<"?cn=dn+1:sn[dn]===">"&&0<cn&&(cn=sn.substr(cn,dn-cn),cn.match(shaka.text.VttTextParser.timeFormat_)&&ln.push(cn),cn=-1);for(ln=$jscomp.makeIterator(ln),dn=ln.next();!dn.done;dn=ln.next())dn=dn.value,sn=sn.replace("<"+dn+">",'<div time="'+dn+'">'),sn+="</div>";return sn},shaka.text.VttTextParser.replaceColorPayload_=function(sn){for(var ln=[],cn=-1,dn="",pn=0;pn<sn.length;pn++)if(sn[pn]==="/"&&0<pn&&sn[pn-1]==="<"){var vn=sn.indexOf(">",pn);if(vn<=pn)return sn;if((vn=sn.substring(pn+1,vn))&&vn==="c"){var kn=ln.pop();kn?kn===vn?(dn+="/"+vn+">",pn+=vn.length+1):kn.startsWith("c.")?(pn+=vn.length+1,dn+="/"+kn+">"):dn+=sn[pn]:dn+=sn[pn]}else dn+=sn[pn]}else sn[pn]==="<"?(cn=pn+1,sn[cn]!="c"&&(cn=-1)):sn[pn]===">"&&0<cn&&(ln.push(sn.substr(cn,pn-cn)),cn=-1),dn+=sn[pn];return dn},shaka.text.VttTextParser.getOrDefault_=function(sn,ln){return sn&&0<sn.length?sn:ln},shaka.text.VttTextParser.mergeStyle_=function(sn,ln){if(ln){var cn=shaka.text.VttTextParser;sn.backgroundColor=cn.getOrDefault_(ln.backgroundColor,sn.backgroundColor),sn.color=cn.getOrDefault_(ln.color,sn.color),sn.fontFamily=cn.getOrDefault_(ln.fontFamily,sn.fontFamily),sn.fontSize=cn.getOrDefault_(ln.fontSize,sn.fontSize),sn.fontWeight=ln.fontWeight,sn.fontStyle=ln.fontStyle,sn.opacity=ln.opacity,sn.wrapLine=ln.wrapLine}},shaka.text.VttTextParser.generateCueFromElement_=function(sn,ln,cn,dn){var pn=shaka.text.VttTextParser,vn=ln.clone();if(sn.nodeType===Node.ELEMENT_NODE&&sn.nodeName){var kn=shaka.text.Cue.fontWeight.BOLD,Sn=shaka.text.Cue.fontStyle.ITALIC,wn=shaka.text.Cue.textDecoration.UNDERLINE,Pn=sn.nodeName.split(/(?=[ .])+/g);Pn=$jscomp.makeIterator(Pn);for(var Nn=Pn.next();!Nn.done;Nn=Pn.next()){var Ln=Nn=Nn.value;if(Ln.startsWith(".voice-")){var Fn=Ln.split("-").pop();Ln='v[voice="'+Fn+'"]',dn.has(Ln)||(Ln="v[voice="+Fn+"]")}switch(dn.has(Ln)&&pn.mergeStyle_(vn,dn.get(Ln)),Nn){case"br":Nn=ln.clone(),Nn.lineBreak=!0,cn.push(Nn);break;case"b":vn.fontWeight=kn;break;case"i":vn.fontStyle=Sn;break;case"u":vn.textDecoration.push(wn);break;case"div":(Nn=sn.getAttribute("time"))&&(Nn=new shaka.util.TextParser(Nn),(Nn=shaka.text.VttTextParser.parseTime_(Nn))&&(vn.startTime=Nn))}}}if(shaka.util.XmlUtils.isText(sn))for(dn=sn.textContent.split(`
`),sn=!0,dn=$jscomp.makeIterator(dn),kn=dn.next();!kn.done;kn=dn.next())kn=kn.value,sn||(sn=ln.clone(),sn.lineBreak=!0,cn.push(sn)),0<kn.length&&(sn=vn.clone(),sn.payload=pn.htmlUnescape_(kn),cn.push(sn)),sn=!1;else for(ln=$jscomp.makeIterator(sn.childNodes),sn=ln.next();!sn.done;sn=ln.next())pn.generateCueFromElement_(sn.value,vn,cn,dn)},shaka.text.VttTextParser.parseCueSetting=function(sn,ln,cn){var dn=shaka.text.VttTextParser,pn;if(pn=/^align:(start|middle|center|end|left|right)$/.exec(ln))dn.setTextAlign_(sn,pn[1]);else if(pn=/^vertical:(lr|rl)$/.exec(ln))dn.setVerticalWritingMode_(sn,pn[1]);else if(pn=/^size:([\d.]+)%$/.exec(ln))sn.size=Number(pn[1]);else if(pn=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(ln))sn.position=Number(pn[1]),pn[2]&&dn.setPositionAlign_(sn,pn[2]);else if(pn=/^region:(.*)$/.exec(ln))(ln=dn.getRegionById_(cn,pn[1]))&&(sn.region=ln);else return dn.parsedLineValueAndInterpretation_(sn,ln);return!0},shaka.text.VttTextParser.getRegionById_=function(sn,ln){return sn=sn.filter(function(cn){return cn.id==ln}),sn.length?(goog.asserts.assert(sn.length==1,"VTTRegion ids should be unique!"),sn[0]):(shaka.log.warning("VTT parser could not find a region with id: ",ln," The region will be ignored."),null)},shaka.text.VttTextParser.parseRegionSetting_=function(sn,ln){var cn;if(cn=/^id=(.*)$/.exec(ln))sn.id=cn[1];else if(cn=/^width=(\d{1,2}|100)%$/.exec(ln))sn.width=Number(cn[1]);else if(cn=/^lines=(\d+)$/.exec(ln))sn.height=Number(cn[1]),sn.heightUnits=shaka.text.CueRegion.units.LINES;else if(cn=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(ln))sn.regionAnchorX=Number(cn[1]),sn.regionAnchorY=Number(cn[2]);else if(cn=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(ln))sn.viewportAnchorX=Number(cn[1]),sn.viewportAnchorY=Number(cn[2]);else if(/^scroll=up$/.exec(ln))sn.scroll=shaka.text.CueRegion.scrollMode.UP;else return!1;return!0},shaka.text.VttTextParser.setTextAlign_=function(sn,ln){var cn=shaka.text.Cue;ln=="middle"?sn.textAlign=cn.textAlign.CENTER:(goog.asserts.assert(ln.toUpperCase()in cn.textAlign,ln.toUpperCase()+" Should be in Cue.textAlign values!"),sn.textAlign=cn.textAlign[ln.toUpperCase()])},shaka.text.VttTextParser.setPositionAlign_=function(sn,ln){var cn=shaka.text.Cue;sn.positionAlign=ln=="line-left"||ln=="start"?cn.positionAlign.LEFT:ln=="line-right"||ln=="end"?cn.positionAlign.RIGHT:cn.positionAlign.CENTER},shaka.text.VttTextParser.setVerticalWritingMode_=function(sn,ln){var cn=shaka.text.Cue;sn.writingMode=ln=="lr"?cn.writingMode.VERTICAL_LEFT_TO_RIGHT:cn.writingMode.VERTICAL_RIGHT_TO_LEFT},shaka.text.VttTextParser.parsedLineValueAndInterpretation_=function(sn,ln){var cn=shaka.text.Cue,dn;if(dn=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(ln))sn.lineInterpretation=cn.lineInterpretation.PERCENTAGE,sn.line=Number(dn[1]),dn[2]&&(goog.asserts.assert(dn[2].toUpperCase()in cn.lineAlign,dn[2].toUpperCase()+" Should be in Cue.lineAlign values!"),sn.lineAlign=cn.lineAlign[dn[2].toUpperCase()]);else if(dn=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(ln))sn.lineInterpretation=cn.lineInterpretation.LINE_NUMBER,sn.line=Number(dn[1]),dn[2]&&(goog.asserts.assert(dn[2].toUpperCase()in cn.lineAlign,dn[2].toUpperCase()+" Should be in Cue.lineAlign values!"),sn.lineAlign=cn.lineAlign[dn[2].toUpperCase()]);else return!1;return!0},shaka.text.VttTextParser.parseTime_=function(sn){if(sn=sn.readRegex(shaka.text.VttTextParser.timeFormat_),sn==null)return null;var ln=Number(sn[2]),cn=Number(sn[3]);return 59<ln||59<cn?null:Number(sn[4])/1e3+cn+60*ln+3600*(Number(sn[1])||0)},shaka.text.VttTextParser.htmlUnescape_=function(sn){var ln={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},cn=/&(?:amp|lt|gt|quot|#(0+)?39|nbsp|lrm|rlm);/g,dn=RegExp(cn.source);return sn&&dn.test(sn)?sn.replace(cn,function(pn){return ln[pn]||"'"}):sn||""},goog.exportSymbol("shaka.text.VttTextParser",shaka.text.VttTextParser),goog.exportProperty(shaka.text.VttTextParser.prototype,"parseMedia",shaka.text.VttTextParser.prototype.parseMedia),goog.exportProperty(shaka.text.VttTextParser.prototype,"setSequenceMode",shaka.text.VttTextParser.prototype.setSequenceMode),goog.exportProperty(shaka.text.VttTextParser.prototype,"parseInit",shaka.text.VttTextParser.prototype.parseInit),shaka.text.VttTextParser.MPEG_TIMESCALE_=9e4,shaka.text.VttTextParser.TS_ROLLOVER_=8589934592,shaka.text.VttTextParser.timeFormat_=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g,shaka.text.TextEngine.registerParser("text/vtt",function(){return new shaka.text.VttTextParser}),shaka.text.TextEngine.registerParser('text/vtt; codecs="vtt"',function(){return new shaka.text.VttTextParser}),shaka.text.TextEngine.registerParser('text/vtt; codecs="wvtt"',function(){return new shaka.text.VttTextParser}),shaka.text.Mp4VttParser=function(){this.timescale_=null},shaka.text.Mp4VttParser.prototype.parseInit=function(sn){var ln=this,cn=shaka.util.Mp4Parser,dn=!1;if(new cn().box("moov",cn.children).box("trak",cn.children).box("mdia",cn.children).fullBox("mdhd",function(pn){goog.asserts.assert(pn.version==0||pn.version==1,"MDHD version can only be 0 or 1"),pn=shaka.util.Mp4BoxParsers.parseMDHD(pn.reader,pn.version),ln.timescale_=pn.timescale}).box("minf",cn.children).box("stbl",cn.children).fullBox("stsd",cn.sampleDescription).box("wvtt",function(pn){dn=!0}).parse(sn),!this.timescale_)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_MP4_VTT);if(!dn)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_MP4_VTT)},shaka.text.Mp4VttParser.prototype.setSequenceMode=function(sn){},shaka.text.Mp4VttParser.prototype.parseMedia=function(sn,ln){if(!sn.length)return[];if(!this.timescale_)throw shaka.log.error("No init segment for MP4+VTT!"),new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_MP4_VTT);var cn=shaka.util.Mp4Parser,dn=0,pn=[],vn,kn=[],Sn=!1,wn=!1,Pn=!1,Nn=null;if(new cn().box("moof",cn.children).box("traf",cn.children).fullBox("tfdt",function(Jn){Sn=!0,goog.asserts.assert(Jn.version==0||Jn.version==1,"TFDT version can only be 0 or 1"),dn=shaka.util.Mp4BoxParsers.parseTFDT(Jn.reader,Jn.version).baseMediaDecodeTime}).fullBox("tfhd",function(Jn){goog.asserts.assert(Jn.flags!=null,"A TFHD box should have a valid flags value"),Nn=shaka.util.Mp4BoxParsers.parseTFHD(Jn.reader,Jn.flags).defaultSampleDuration}).fullBox("trun",function(Jn){wn=!0,goog.asserts.assert(Jn.version!=null,"A TRUN box should have a valid version value"),goog.asserts.assert(Jn.flags!=null,"A TRUN box should have a valid flags value"),pn=shaka.util.Mp4BoxParsers.parseTRUN(Jn.reader,Jn.version,Jn.flags).sampleData}).box("mdat",cn.allData(function(Jn){goog.asserts.assert(!Pn,"VTT cues in mp4 with multiple MDAT are not currently supported"),Pn=!0,vn=Jn})).parse(sn,!1),!Pn&&!Sn&&!wn)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_MP4_VTT);sn=dn,cn=new shaka.util.DataViewReader(vn,shaka.util.DataViewReader.Endianness.BIG_ENDIAN);for(var Ln=$jscomp.makeIterator(pn),Fn=Ln.next();!Fn.done;Fn=Ln.next()){Fn=Fn.value;var zn=Fn.sampleDuration||Nn,Dn=Fn.sampleCompositionTimeOffset?dn+Fn.sampleCompositionTimeOffset:sn;sn=Dn+(zn||0);var Kn=0;do{var qn=cn.readUint32();Kn+=qn;var Zn=cn.readUint32();Zn=shaka.util.Mp4Parser.typeToString(Zn);var Yn=null;Zn=="vttc"?8<qn&&(Yn=cn.readBytes(qn-8)):(Zn!="vtte"&&shaka.log.error("Unknown box "+Zn+"! Skipping!"),cn.skip(qn-8)),zn?Yn&&(goog.asserts.assert(this.timescale_!=null,"Timescale should not be null!"),qn=shaka.text.Mp4VttParser.parseVTTC_(Yn,ln.periodStart+Dn/this.timescale_,ln.periodStart+sn/this.timescale_),kn.push(qn)):shaka.log.error("WVTT sample duration unknown, and no default found!"),goog.asserts.assert(!Fn.sampleSize||Kn<=Fn.sampleSize,"The samples do not fit evenly into the sample sizes given in the TRUN box!")}while(Fn.sampleSize&&Kn<Fn.sampleSize)}return goog.asserts.assert(!cn.hasMoreData(),"MDAT which contain VTT cues and non-VTT data are not currently supported!"),kn.filter(shaka.util.Functional.isNotNull)},shaka.text.Mp4VttParser.parseVTTC_=function(sn,ln,cn){var dn,pn,vn;return new shaka.util.Mp4Parser().box("payl",shaka.util.Mp4Parser.allData(function(kn){dn=shaka.util.StringUtils.fromUTF8(kn)})).box("iden",shaka.util.Mp4Parser.allData(function(kn){pn=shaka.util.StringUtils.fromUTF8(kn)})).box("sttg",shaka.util.Mp4Parser.allData(function(kn){vn=shaka.util.StringUtils.fromUTF8(kn)})).parse(sn),dn?shaka.text.Mp4VttParser.assembleCue_(dn,pn,vn,ln,cn):null},shaka.text.Mp4VttParser.assembleCue_=function(sn,ln,cn,dn,pn){if(dn=new shaka.text.Cue(dn,pn,""),pn=new Map,shaka.text.VttTextParser.parseCueStyles(sn,dn,pn),ln&&(dn.id=ln),cn)for(sn=new shaka.util.TextParser(cn),ln=sn.readWord();ln;)shaka.text.VttTextParser.parseCueSetting(dn,ln,[])||shaka.log.warning("VTT parser encountered an invalid VTT setting: ",ln," The setting will be ignored."),sn.skipWhitespace(),ln=sn.readWord();return dn},goog.exportSymbol("shaka.text.Mp4VttParser",shaka.text.Mp4VttParser),goog.exportProperty(shaka.text.Mp4VttParser.prototype,"parseMedia",shaka.text.Mp4VttParser.prototype.parseMedia),goog.exportProperty(shaka.text.Mp4VttParser.prototype,"setSequenceMode",shaka.text.Mp4VttParser.prototype.setSequenceMode),goog.exportProperty(shaka.text.Mp4VttParser.prototype,"parseInit",shaka.text.Mp4VttParser.prototype.parseInit),shaka.text.TextEngine.registerParser('application/mp4; codecs="wvtt"',function(){return new shaka.text.Mp4VttParser}),shaka.text.SbvTextParser=function(){},shaka.text.SbvTextParser.prototype.parseInit=function(sn){goog.asserts.assert(!1,"SubViewer does not have init segments")},shaka.text.SbvTextParser.prototype.setSequenceMode=function(sn){},shaka.text.SbvTextParser.prototype.parseMedia=function(sn,ln){ln=shaka.text.SbvTextParser;var cn=shaka.util.StringUtils.fromUTF8(sn).replace(/\r+/g,"");if(cn=cn.trim(),sn=[],cn=="")return sn;cn=cn.split(`

`),cn=$jscomp.makeIterator(cn);for(var dn=cn.next();!dn.done;dn=cn.next()){var pn=dn.value.split(`
`),vn=new shaka.util.TextParser(pn[0]);dn=ln.parseTime_(vn);var kn=vn.readRegex(/,/g);if(vn=ln.parseTime_(vn),dn==null||kn==null||vn==null)throw new shaka.util.Error(shaka.util.Error.Severity.CRITICAL,shaka.util.Error.Category.TEXT,shaka.util.Error.Code.INVALID_TEXT_CUE,"Could not parse cue time range in SubViewer");pn=pn.slice(1).join(`
`).trim(),dn=new shaka.text.Cue(dn,vn,pn),sn.push(dn)}return sn},shaka.text.SbvTextParser.parseTime_=function(sn){if(sn=sn.readRegex(/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g),sn==null)return null;var ln=Number(sn[2]),cn=Number(sn[3]);return 59<ln||59<cn?null:Number(sn[4])/1e3+cn+60*ln+3600*(Number(sn[1])||0)},goog.exportSymbol("shaka.text.SbvTextParser",shaka.text.SbvTextParser),goog.exportProperty(shaka.text.SbvTextParser.prototype,"parseMedia",shaka.text.SbvTextParser.prototype.parseMedia),goog.exportProperty(shaka.text.SbvTextParser.prototype,"setSequenceMode",shaka.text.SbvTextParser.prototype.setSequenceMode),goog.exportProperty(shaka.text.SbvTextParser.prototype,"parseInit",shaka.text.SbvTextParser.prototype.parseInit),shaka.text.TextEngine.registerParser("text/x-subviewer",function(){return new shaka.text.SbvTextParser}),shaka.text.SrtTextParser=function(){this.parser_=new shaka.text.VttTextParser},shaka.text.SrtTextParser.prototype.parseInit=function(sn){goog.asserts.assert(!1,"SRT does not have init segments")},shaka.text.SrtTextParser.prototype.setSequenceMode=function(sn){},shaka.text.SrtTextParser.prototype.parseMedia=function(sn,ln){var cn=shaka.text.SrtTextParser,dn=shaka.util.BufferUtils,pn=shaka.util.StringUtils;return sn=pn.fromUTF8(sn),cn=cn.srt2webvtt(sn),dn=dn.toUint8(pn.toUTF8(cn)),this.parser_.parseMedia(dn,ln)},shaka.text.SrtTextParser.srt2webvtt=function(sn){var ln=shaka.text.SrtTextParser,cn=`WEBVTT

`;if(sn=="")return cn;sn=sn.replace(/\r+/g,""),sn=sn.trim(),sn=sn.split(`

`),sn=$jscomp.makeIterator(sn);for(var dn=sn.next();!dn.done;dn=sn.next())cn+=ln.convertSrtCue_(dn.value);return cn},shaka.text.SrtTextParser.convertSrtCue_=function(sn){return sn=sn.split(/\n/),sn[0].match(/\d+/)&&sn.shift(),sn[0]=sn[0].replace(/,/g,"."),sn.join(`
`)+`

`},goog.exportSymbol("shaka.text.SrtTextParser",shaka.text.SrtTextParser),goog.exportProperty(shaka.text.SrtTextParser,"srt2webvtt",shaka.text.SrtTextParser.srt2webvtt),goog.exportProperty(shaka.text.SrtTextParser.prototype,"parseMedia",shaka.text.SrtTextParser.prototype.parseMedia),goog.exportProperty(shaka.text.SrtTextParser.prototype,"setSequenceMode",shaka.text.SrtTextParser.prototype.setSequenceMode),goog.exportProperty(shaka.text.SrtTextParser.prototype,"parseInit",shaka.text.SrtTextParser.prototype.parseInit),shaka.text.TextEngine.registerParser("text/srt",function(){return new shaka.text.SrtTextParser}),shaka.text.SsaTextParser=function(){},shaka.text.SsaTextParser.prototype.parseInit=function(sn){goog.asserts.assert(!1,"SSA does not have init segments")},shaka.text.SsaTextParser.prototype.setSequenceMode=function(sn){},shaka.text.SsaTextParser.prototype.parseMedia=function(sn,ln){ln=shaka.text.SsaTextParser;var cn="",dn="";sn=shaka.util.StringUtils.fromUTF8(sn).split(/\r?\n\s*\r?\n/),sn=$jscomp.makeIterator(sn);for(var pn=sn.next();!pn.done;pn=sn.next()){pn=pn.value;var vn=ln.ssaContent_.exec(pn);if(vn){var kn=vn[1];if(vn=vn[2],kn=="V4 Styles"||kn=="V4+ Styles"){cn=vn;continue}if(kn=="Events"){dn=vn;continue}}shaka.log.warning("SsaTextParser parser encountered an unknown part.",pn)}for(sn=[],pn=null,cn=cn.split(/\r?\n/),cn=$jscomp.makeIterator(cn),vn=cn.next();!vn.done;vn=cn.next())if(kn=vn.value,!/^\s*;/.test(kn)&&(vn=ln.lineParts_.exec(kn))){if(kn=vn[1].trim(),vn=vn[2].trim(),kn=="Format")pn=vn.split(ln.valuesFormat_);else if(kn=="Style"){kn=vn.split(ln.valuesFormat_),vn={};for(var Sn=0;Sn<pn.length&&Sn<kn.length;Sn++)vn[pn[Sn]]=kn[Sn];sn.push(vn)}}for(pn=[],cn=null,kn=dn.split(/\r?\n/),dn={},kn=$jscomp.makeIterator(kn),vn=kn.next();!vn.done;dn={$jscomp$loop$prop$styleName$746:dn.$jscomp$loop$prop$styleName$746},vn=kn.next())if(vn=vn.value,!/^\s*;/.test(vn)&&(Sn=ln.lineParts_.exec(vn))){if(vn=Sn[1].trim(),Sn=Sn[2].trim(),vn=="Format")cn=Sn.split(ln.valuesFormat_);else if(vn=="Dialogue"){Sn=Sn.split(ln.valuesFormat_),vn={};for(var wn=0;wn<cn.length&&wn<Sn.length;wn++)vn[cn[wn]]=Sn[wn];wn=ln.parseTime_(vn.Start);var Pn=ln.parseTime_(vn.End);Sn=Sn.slice(cn.length-1).join(",").replace(/\\N/g,`
`).replace(/\{[^}]+\}/g,""),Sn=new shaka.text.Cue(wn,Pn,Sn),dn.$jscomp$loop$prop$styleName$746=vn.Style,(vn=sn.find(function(Nn){return function(Ln){return Ln.Name==Nn.$jscomp$loop$prop$styleName$746}}(dn)))&&ln.addStyle_(Sn,vn),pn.push(Sn)}}return pn},shaka.text.SsaTextParser.addStyle_=function(sn,ln){var cn=shaka.text.Cue,dn=shaka.text.SsaTextParser,pn=ln.Fontname;if(pn&&(sn.fontFamily=pn),(pn=ln.Fontsize)&&(sn.fontSize=pn+"px"),(pn=ln.PrimaryColour)&&(pn=dn.parseSsaColor_(pn))&&(sn.color=pn),(pn=ln.BackColour)&&(dn=dn.parseSsaColor_(pn))&&(sn.backgroundColor=dn),ln.Bold&&(sn.fontWeight=cn.fontWeight.BOLD),ln.Italic&&(sn.fontStyle=cn.fontStyle.ITALIC),ln.Underline&&sn.textDecoration.push(cn.textDecoration.UNDERLINE),(dn=ln.Spacing)&&(sn.letterSpacing=dn+"px"),dn=ln.Alignment)switch(parseInt(dn,10)){case 1:sn.displayAlign=cn.displayAlign.AFTER,sn.textAlign=cn.textAlign.START;break;case 2:sn.displayAlign=cn.displayAlign.AFTER,sn.textAlign=cn.textAlign.CENTER;break;case 3:sn.displayAlign=cn.displayAlign.AFTER,sn.textAlign=cn.textAlign.END;break;case 5:sn.displayAlign=cn.displayAlign.BEFORE,sn.textAlign=cn.textAlign.START;break;case 6:sn.displayAlign=cn.displayAlign.BEFORE,sn.textAlign=cn.textAlign.CENTER;break;case 7:sn.displayAlign=cn.displayAlign.BEFORE,sn.textAlign=cn.textAlign.END;break;case 9:sn.displayAlign=cn.displayAlign.CENTER,sn.textAlign=cn.textAlign.START;break;case 10:sn.displayAlign=cn.displayAlign.CENTER,sn.textAlign=cn.textAlign.CENTER;break;case 11:sn.displayAlign=cn.displayAlign.CENTER,sn.textAlign=cn.textAlign.END}(ln=ln.AlphaLevel)&&(sn.opacity=parseFloat(ln))},shaka.text.SsaTextParser.parseSsaColor_=function(sn){return sn=parseInt(sn.replace("&H",""),16),0<=sn?"rgba("+(sn&255)+","+(sn>>8&255)+","+(sn>>16&255)+","+(sn>>24&255^255)/255+")":null},shaka.text.SsaTextParser.parseTime_=function(sn){var ln=shaka.text.SsaTextParser.timeFormat_.exec(sn);sn=ln[1]?parseInt(ln[1].replace(":",""),10):0;var cn=parseInt(ln[2],10);return ln=parseFloat(ln[3]),3600*sn+60*cn+ln},goog.exportSymbol("shaka.text.SsaTextParser",shaka.text.SsaTextParser),goog.exportProperty(shaka.text.SsaTextParser.prototype,"parseMedia",shaka.text.SsaTextParser.prototype.parseMedia),goog.exportProperty(shaka.text.SsaTextParser.prototype,"setSequenceMode",shaka.text.SsaTextParser.prototype.setSequenceMode),goog.exportProperty(shaka.text.SsaTextParser.prototype,"parseInit",shaka.text.SsaTextParser.prototype.parseInit),shaka.text.SsaTextParser.ssaContent_=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,shaka.text.SsaTextParser.lineParts_=/^\s*([^:]+):\s*(.*)/,shaka.text.SsaTextParser.valuesFormat_=/\s*,\s*/,shaka.text.SsaTextParser.timeFormat_=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/,shaka.text.TextEngine.registerParser("text/x-ssa",function(){return new shaka.text.SsaTextParser});/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/var EmeEncryptionSchemePolyfill=function(){};EmeEncryptionSchemePolyfill.install=function(){EmeEncryptionSchemePolyfill.originalRMKSA_?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(EmeEncryptionSchemePolyfill.originalRMKSA_=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=EmeEncryptionSchemePolyfill.probeRMKSA_):console.debug("EmeEncryptionSchemePolyfill: EME not found")},EmeEncryptionSchemePolyfill.probeRMKSA_=function(sn,ln){var cn=this,dn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(pn){return pn.nextAddress==1?(console.assert(cn==navigator,'bad "this" for requestMediaKeySystemAccess'),pn.yield(EmeEncryptionSchemePolyfill.originalRMKSA_.call(cn,sn,ln),2)):(dn=pn.yieldResult,hasEncryptionScheme(dn)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=EmeEncryptionSchemePolyfill.originalRMKSA_,pn.return(dn)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=EmeEncryptionSchemePolyfill.polyfillRMKSA_,pn.return(EmeEncryptionSchemePolyfill.polyfillRMKSA_.call(cn,sn,ln))))})},EmeEncryptionSchemePolyfill.polyfillRMKSA_=function(sn,ln){var cn=this,dn,pn,vn,kn,Sn,wn,Pn,Nn,Ln,Fn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(zn){if(zn.nextAddress==1){for(console.assert(cn==navigator,'bad "this" for requestMediaKeySystemAccess'),dn=guessSupportedScheme(sn),pn=[],vn=$jscomp.makeIterator(ln),kn=vn.next();!kn.done;kn=vn.next())Sn=kn.value,wn=EmeEncryptionSchemePolyfill.filterCapabilities_(Sn.videoCapabilities,dn),Pn=EmeEncryptionSchemePolyfill.filterCapabilities_(Sn.audioCapabilities,dn),Sn.videoCapabilities&&Sn.videoCapabilities.length&&!wn.length||Sn.audioCapabilities&&Sn.audioCapabilities.length&&!Pn.length||(Nn=Object.assign({},Sn),Nn.videoCapabilities=wn,Nn.audioCapabilities=Pn,pn.push(Nn));if(!pn.length)throw Ln=Error("Unsupported keySystem or supportedConfigurations."),Ln.name="NotSupportedError",Ln.code=DOMException.NOT_SUPPORTED_ERR,Ln;return zn.yield(EmeEncryptionSchemePolyfill.originalRMKSA_.call(cn,sn,pn),2)}return Fn=zn.yieldResult,zn.return(new EmeEncryptionSchemePolyfillMediaKeySystemAccess(Fn,dn))})},EmeEncryptionSchemePolyfill.filterCapabilities_=function(sn,ln){return sn&&sn.filter(function(cn){return!cn.encryptionScheme||cn.encryptionScheme==ln})},goog.exportSymbol("EmeEncryptionSchemePolyfill",EmeEncryptionSchemePolyfill),goog.exportProperty(EmeEncryptionSchemePolyfill,"install",EmeEncryptionSchemePolyfill.install);var McEncryptionSchemePolyfill=function(){};McEncryptionSchemePolyfill.install=function(){McEncryptionSchemePolyfill.originalDecodingInfo_?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(McEncryptionSchemePolyfill.originalDecodingInfo_=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=McEncryptionSchemePolyfill.probeDecodingInfo_):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")},McEncryptionSchemePolyfill.probeDecodingInfo_=function(sn){var ln=this,cn,dn,pn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(vn){switch(vn.nextAddress){case 1:return console.assert(ln==navigator.mediaCapabilities,'bad "this" for decodingInfo'),vn.yield(McEncryptionSchemePolyfill.originalDecodingInfo_.call(ln,sn),2);case 2:if(cn=vn.yieldResult,!sn.keySystemConfiguration)return vn.return(cn);if((dn=cn.keySystemAccess)&&hasEncryptionScheme(dn))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=McEncryptionSchemePolyfill.originalDecodingInfo_,vn.return(cn);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=McEncryptionSchemePolyfill.polyfillDecodingInfo_,dn){vn.jumpTo(3);break}return pn=cn,vn.yield(McEncryptionSchemePolyfill.getMediaKeySystemAccess_(sn),4);case 4:return pn.keySystemAccess=vn.yieldResult,vn.return(cn);case 3:return vn.return(McEncryptionSchemePolyfill.polyfillDecodingInfo_.call(ln,sn))}})},McEncryptionSchemePolyfill.polyfillDecodingInfo_=function(sn){var ln=this,cn,dn,pn,vn,kn,Sn,wn,Pn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(Nn){switch(Nn.nextAddress){case 1:return console.assert(ln==navigator.mediaCapabilities,'bad "this" for decodingInfo'),cn=null,sn.keySystemConfiguration&&(dn=sn.keySystemConfiguration,pn=dn.keySystem,vn=dn.audio&&dn.audio.encryptionScheme,kn=dn.video&&dn.video.encryptionScheme,cn=guessSupportedScheme(pn),Sn={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:sn},vn&&vn!=cn||kn&&kn!=cn)?Nn.return(Sn):Nn.yield(McEncryptionSchemePolyfill.originalDecodingInfo_.call(ln,sn),2);case 2:if(wn=Nn.yieldResult,wn.keySystemAccess){wn.keySystemAccess=new EmeEncryptionSchemePolyfillMediaKeySystemAccess(wn.keySystemAccess,cn),Nn.jumpTo(3);break}if(!sn.keySystemConfiguration){Nn.jumpTo(3);break}return Pn=wn,Nn.yield(McEncryptionSchemePolyfill.getMediaKeySystemAccess_(sn),5);case 5:Pn.keySystemAccess=Nn.yieldResult;case 3:return Nn.return(wn)}})},McEncryptionSchemePolyfill.getMediaKeySystemAccess_=function(sn){var ln,cn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(dn){return dn.nextAddress==1?(ln=McEncryptionSchemePolyfill.convertToMediaKeySystemConfig_(sn),dn.yield(navigator.requestMediaKeySystemAccess(sn.keySystemConfiguration.keySystem,[ln]),2)):(cn=dn.yieldResult,dn.return(cn))})},McEncryptionSchemePolyfill.convertToMediaKeySystemConfig_=function(sn){var ln=sn.keySystemConfiguration,cn=[],dn=[];return ln.audio&&cn.push({robustness:ln.audio.robustness||"",contentType:sn.audio.contentType}),ln.video&&dn.push({robustness:ln.video.robustness||"",contentType:sn.video.contentType}),sn={initDataTypes:ln.initDataType?[ln.initDataType]:[],distinctiveIdentifier:ln.distinctiveIdentifier,persistentState:ln.persistentState,sessionTypes:ln.sessionTypes},cn.length&&(sn.audioCapabilities=cn),dn.length&&(sn.videoCapabilities=dn),sn},goog.exportSymbol("McEncryptionSchemePolyfill",McEncryptionSchemePolyfill),goog.exportProperty(McEncryptionSchemePolyfill,"install",McEncryptionSchemePolyfill.install);var EmeEncryptionSchemePolyfillMediaKeySystemAccess=function(sn,ln){this.mksa_=sn,this.scheme_=ln,this.keySystem=sn.keySystem};EmeEncryptionSchemePolyfillMediaKeySystemAccess.prototype.getConfiguration=function(){var sn=this.mksa_.getConfiguration();if(sn.videoCapabilities)for(var ln=$jscomp.makeIterator(sn.videoCapabilities),cn=ln.next();!cn.done;cn=ln.next())cn.value.encryptionScheme=this.scheme_;if(sn.audioCapabilities)for(ln=$jscomp.makeIterator(sn.audioCapabilities),cn=ln.next();!cn.done;cn=ln.next())cn.value.encryptionScheme=this.scheme_;return sn},EmeEncryptionSchemePolyfillMediaKeySystemAccess.prototype.createMediaKeys=function(){return this.mksa_.createMediaKeys()};function guessSupportedScheme(sn){return sn.startsWith("com.widevine")||sn.startsWith("com.microsoft")||sn.startsWith("com.chromecast")||sn.startsWith("com.adobe")||sn.startsWith("org.w3")?"cenc":sn.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",sn,"Please contribute!"),null)}function hasEncryptionScheme(sn){sn=sn.getConfiguration();var ln=sn.audioCapabilities&&sn.audioCapabilities[0];return!!((sn=sn.videoCapabilities&&sn.videoCapabilities[0]||ln)&&sn.encryptionScheme!==void 0)}var EncryptionSchemePolyfills=function(){};EncryptionSchemePolyfills.install=function(){EmeEncryptionSchemePolyfill.install(),McEncryptionSchemePolyfill.install()},goog.exportSymbol("EncryptionSchemePolyfills",EncryptionSchemePolyfills),goog.exportProperty(EncryptionSchemePolyfills,"install",EncryptionSchemePolyfills.install),function(){typeof module<"u"&&module.exports&&(module.exports=EncryptionSchemePolyfills)}();/*
	 @license
	 Copyright 2013 Ali Al Dallal

	 Licensed under the MIT license.

	 Permission is hereby granted, free of charge, to any person obtaining a copy
	 of this software and associated documentation files (the "Software"), to deal
	 in the Software without restriction, including without limitation the rights
	 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
	 copies of the Software, and to permit persons to whom the Software is
	 furnished to do so, subject to the following conditions:

	 The above copyright notice and this permission notice shall be included in
	 all copies or substantial portions of the Software.

	 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
	 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
	 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
	 SOFTWARE.
	*/for(var mozilla={LanguageMapping:{ach:{nativeName:"Lwo",englishName:"Acholi"},ady:{nativeName:"Адыгэбзэ",englishName:"Adyghe"},af:{nativeName:"Afrikaans",englishName:"Afrikaans"},"af-NA":{nativeName:"Afrikaans (Namibia)",englishName:"Afrikaans (Namibia)"},"af-ZA":{nativeName:"Afrikaans (South Africa)",englishName:"Afrikaans (South Africa)"},ak:{nativeName:"Tɕɥi",englishName:"Akan"},ar:{nativeName:"العربية",englishName:"Arabic"},"ar-AR":{nativeName:"العربية",englishName:"Arabic"},"ar-MA":{nativeName:"العربية",englishName:"Arabic (Morocco)"},"ar-SA":{nativeName:"العربية (السعودية)",englishName:"Arabic (Saudi Arabia)"},"ay-BO":{nativeName:"Aymar aru",englishName:"Aymara"},az:{nativeName:"Azərbaycan dili",englishName:"Azerbaijani"},"az-AZ":{nativeName:"Azərbaycan dili",englishName:"Azerbaijani"},"be-BY":{nativeName:"Беларуская",englishName:"Belarusian"},bg:{nativeName:"Български",englishName:"Bulgarian"},"bg-BG":{nativeName:"Български",englishName:"Bulgarian"},bn:{nativeName:"বাংলা",englishName:"Bengali"},"bn-IN":{nativeName:"বাংলা (ভারত)",englishName:"Bengali (India)"},"bn-BD":{nativeName:"বাংলা(বাংলাদেশ)",englishName:"Bengali (Bangladesh)"},"bs-BA":{nativeName:"Bosanski",englishName:"Bosnian"},ca:{nativeName:"Català",englishName:"Catalan"},"ca-ES":{nativeName:"Català",englishName:"Catalan"},cak:{nativeName:"Maya Kaqchikel",englishName:"Kaqchikel"},"ck-US":{nativeName:"ᏣᎳᎩ (tsalagi)",englishName:"Cherokee"},cs:{nativeName:"Čeština",englishName:"Czech"},"cs-CZ":{nativeName:"Čeština",englishName:"Czech"},cy:{nativeName:"Cymraeg",englishName:"Welsh"},"cy-GB":{nativeName:"Cymraeg",englishName:"Welsh"},da:{nativeName:"Dansk",englishName:"Danish"},"da-DK":{nativeName:"Dansk",englishName:"Danish"},de:{nativeName:"Deutsch",englishName:"German"},"de-AT":{nativeName:"Deutsch (Österreich)",englishName:"German (Austria)"},"de-DE":{nativeName:"Deutsch (Deutschland)",englishName:"German (Germany)"},"de-CH":{nativeName:"Deutsch (Schweiz)",englishName:"German (Switzerland)"},dsb:{nativeName:"Dolnoserbšćina",englishName:"Lower Sorbian"},el:{nativeName:"Ελληνικά",englishName:"Greek"},"el-GR":{nativeName:"Ελληνικά",englishName:"Greek (Greece)"},en:{nativeName:"English",englishName:"English"},"en-GB":{nativeName:"English (UK)",englishName:"English (UK)"},"en-AU":{nativeName:"English (Australia)",englishName:"English (Australia)"},"en-CA":{nativeName:"English (Canada)",englishName:"English (Canada)"},"en-IE":{nativeName:"English (Ireland)",englishName:"English (Ireland)"},"en-IN":{nativeName:"English (India)",englishName:"English (India)"},"en-PI":{nativeName:"English (Pirate)",englishName:"English (Pirate)"},"en-UD":{nativeName:"English (Upside Down)",englishName:"English (Upside Down)"},"en-US":{nativeName:"English (US)",englishName:"English (US)"},"en-ZA":{nativeName:"English (South Africa)",englishName:"English (South Africa)"},"en@pirate":{nativeName:"English (Pirate)",englishName:"English (Pirate)"},eo:{nativeName:"Esperanto",englishName:"Esperanto"},"eo-EO":{nativeName:"Esperanto",englishName:"Esperanto"},es:{nativeName:"Español",englishName:"Spanish"},"es-AR":{nativeName:"Español (Argentine)",englishName:"Spanish (Argentina)"},"es-419":{nativeName:"Español (Latinoamérica)",englishName:"Spanish (Latin America)"},"es-CL":{nativeName:"Español (Chile)",englishName:"Spanish (Chile)"},"es-CO":{nativeName:"Español (Colombia)",englishName:"Spanish (Colombia)"},"es-EC":{nativeName:"Español (Ecuador)",englishName:"Spanish (Ecuador)"},"es-ES":{nativeName:"Español (España)",englishName:"Spanish (Spain)"},"es-LA":{nativeName:"Español (Latinoamérica)",englishName:"Spanish (Latin America)"},"es-NI":{nativeName:"Español (Nicaragua)",englishName:"Spanish (Nicaragua)"},"es-MX":{nativeName:"Español (México)",englishName:"Spanish (Mexico)"},"es-US":{nativeName:"Español (Estados Unidos)",englishName:"Spanish (United States)"},"es-VE":{nativeName:"Español (Venezuela)",englishName:"Spanish (Venezuela)"},et:{nativeName:"eesti keel",englishName:"Estonian"},"et-EE":{nativeName:"Eesti (Estonia)",englishName:"Estonian (Estonia)"},eu:{nativeName:"Euskara",englishName:"Basque"},"eu-ES":{nativeName:"Euskara",englishName:"Basque"},fa:{nativeName:"فارسی",englishName:"Persian"},"fa-IR":{nativeName:"فارسی",englishName:"Persian"},"fb-LT":{nativeName:"Leet Speak",englishName:"Leet"},ff:{nativeName:"Fulah",englishName:"Fulah"},fi:{nativeName:"Suomi",englishName:"Finnish"},"fi-FI":{nativeName:"Suomi",englishName:"Finnish"},"fo-FO":{nativeName:"Føroyskt",englishName:"Faroese"},fr:{nativeName:"Français",englishName:"French"},"fr-CA":{nativeName:"Français (Canada)",englishName:"French (Canada)"},"fr-FR":{nativeName:"Français (France)",englishName:"French (France)"},"fr-BE":{nativeName:"Français (Belgique)",englishName:"French (Belgium)"},"fr-CH":{nativeName:"Français (Suisse)",englishName:"French (Switzerland)"},"fy-NL":{nativeName:"Frysk",englishName:"Frisian (West)"},ga:{nativeName:"Gaeilge",englishName:"Irish"},"ga-IE":{nativeName:"Gaeilge (Gaelic)",englishName:"Irish (Gaelic)"},gl:{nativeName:"Galego",englishName:"Galician"},"gl-ES":{nativeName:"Galego",englishName:"Galician"},"gn-PY":{nativeName:"Avañe'ẽ",englishName:"Guarani"},"gu-IN":{nativeName:"ગુજરાતી",englishName:"Gujarati"},"gx-GR":{nativeName:"Ἑλληνική ἀρχαία",englishName:"Classical Greek"},he:{nativeName:"עברית‏",englishName:"Hebrew"},"he-IL":{nativeName:"עברית‏",englishName:"Hebrew"},hi:{nativeName:"हिन्दी",englishName:"Hindi"},"hi-IN":{nativeName:"हिन्दी",englishName:"Hindi"},hr:{nativeName:"Hrvatski",englishName:"Croatian"},"hr-HR":{nativeName:"Hrvatski",englishName:"Croatian"},hsb:{nativeName:"Hornjoserbšćina",englishName:"Upper Sorbian"},ht:{nativeName:"Kreyòl",englishName:"Haitian Creole"},hu:{nativeName:"Magyar",englishName:"Hungarian"},"hu-HU":{nativeName:"Magyar",englishName:"Hungarian"},"hy-AM":{nativeName:"Հայերեն",englishName:"Armenian"},id:{nativeName:"Bahasa Indonesia",englishName:"Indonesian"},"id-ID":{nativeName:"Bahasa Indonesia",englishName:"Indonesian"},is:{nativeName:"Íslenska",englishName:"Icelandic"},"is-IS":{nativeName:"Íslenska (Iceland)",englishName:"Icelandic (Iceland)"},it:{nativeName:"Italiano",englishName:"Italian"},"it-IT":{nativeName:"Italiano",englishName:"Italian"},ja:{nativeName:"日本語",englishName:"Japanese"},"ja-JP":{nativeName:"日本語",englishName:"Japanese"},"jv-ID":{nativeName:"Basa Jawa",englishName:"Javanese"},"ka-GE":{nativeName:"ქართული",englishName:"Georgian"},"kk-KZ":{nativeName:"Қазақша",englishName:"Kazakh"},km:{nativeName:"ភាសាខ្មែរ",englishName:"Khmer"},"km-KH":{nativeName:"ភាសាខ្មែរ",englishName:"Khmer"},kab:{nativeName:"Taqbaylit",englishName:"Kabyle"},kn:{nativeName:"ಕನ್ನಡ",englishName:"Kannada"},"kn-IN":{nativeName:"ಕನ್ನಡ (India)",englishName:"Kannada (India)"},ko:{nativeName:"한국어",englishName:"Korean"},"ko-KR":{nativeName:"한국어 (韩国)",englishName:"Korean (Korea)"},ku:{nativeName:"Kurdî",englishName:"Kurdish"},"ku-TR":{nativeName:"Kurdî",englishName:"Kurdish"},la:{nativeName:"Latin",englishName:"Latin"},"la-VA":{nativeName:"Latin",englishName:"Latin"},lb:{nativeName:"Lëtzebuergesch",englishName:"Luxembourgish"},"li-NL":{nativeName:"Lèmbörgs",englishName:"Limburgish"},lt:{nativeName:"Lietuvių",englishName:"Lithuanian"},"lt-LT":{nativeName:"Lietuvių",englishName:"Lithuanian"},lv:{nativeName:"Latviešu",englishName:"Latvian"},"lv-LV":{nativeName:"Latviešu",englishName:"Latvian"},mai:{nativeName:"मैथिली, মৈথিলী",englishName:"Maithili"},"mg-MG":{nativeName:"Malagasy",englishName:"Malagasy"},mk:{nativeName:"Македонски",englishName:"Macedonian"},"mk-MK":{nativeName:"Македонски (Македонски)",englishName:"Macedonian (Macedonian)"},ml:{nativeName:"മലയാളം",englishName:"Malayalam"},"ml-IN":{nativeName:"മലയാളം",englishName:"Malayalam"},"mn-MN":{nativeName:"Монгол",englishName:"Mongolian"},mr:{nativeName:"मराठी",englishName:"Marathi"},"mr-IN":{nativeName:"मराठी",englishName:"Marathi"},ms:{nativeName:"Bahasa Melayu",englishName:"Malay"},"ms-MY":{nativeName:"Bahasa Melayu",englishName:"Malay"},mt:{nativeName:"Malti",englishName:"Maltese"},"mt-MT":{nativeName:"Malti",englishName:"Maltese"},my:{nativeName:"ဗမာစကာ",englishName:"Burmese"},nb:{nativeName:"Norsk (bokmål)",englishName:"Norwegian (bokmal)"},"nb-NO":{nativeName:"Norsk (bokmål)",englishName:"Norwegian (bokmal)"},ne:{nativeName:"नेपाली",englishName:"Nepali"},"ne-NP":{nativeName:"नेपाली",englishName:"Nepali"},nl:{nativeName:"Nederlands",englishName:"Dutch"},"nl-BE":{nativeName:"Nederlands (België)",englishName:"Dutch (Belgium)"},"nl-NL":{nativeName:"Nederlands (Nederland)",englishName:"Dutch (Netherlands)"},"nn-NO":{nativeName:"Norsk (nynorsk)",englishName:"Norwegian (nynorsk)"},no:{nativeName:"Norsk",englishName:"Norwegian"},oc:{nativeName:"Occitan",englishName:"Occitan"},"or-IN":{nativeName:"ଓଡ଼ିଆ",englishName:"Oriya"},pa:{nativeName:"ਪੰਜਾਬੀ",englishName:"Punjabi"},"pa-IN":{nativeName:"ਪੰਜਾਬੀ (ਭਾਰਤ ਨੂੰ)",englishName:"Punjabi (India)"},pl:{nativeName:"Polski",englishName:"Polish"},"pl-PL":{nativeName:"Polski",englishName:"Polish"},"ps-AF":{nativeName:"پښتو",englishName:"Pashto"},pt:{nativeName:"Português",englishName:"Portuguese"},"pt-BR":{nativeName:"Português (Brasil)",englishName:"Portuguese (Brazil)"},"pt-PT":{nativeName:"Português (Portugal)",englishName:"Portuguese (Portugal)"},"qu-PE":{nativeName:"Qhichwa",englishName:"Quechua"},"rm-CH":{nativeName:"Rumantsch",englishName:"Romansh"},ro:{nativeName:"Română",englishName:"Romanian"},"ro-RO":{nativeName:"Română",englishName:"Romanian"},ru:{nativeName:"Русский",englishName:"Russian"},"ru-RU":{nativeName:"Русский",englishName:"Russian"},"sa-IN":{nativeName:"संस्कृतम्",englishName:"Sanskrit"},"se-NO":{nativeName:"Davvisámegiella",englishName:"Northern Sámi"},"si-LK":{nativeName:"පළාත",englishName:"Sinhala (Sri Lanka)"},sk:{nativeName:"Slovenčina",englishName:"Slovak"},"sk-SK":{nativeName:"Slovenčina (Slovakia)",englishName:"Slovak (Slovakia)"},sl:{nativeName:"Slovenščina",englishName:"Slovenian"},"sl-SI":{nativeName:"Slovenščina",englishName:"Slovenian"},"so-SO":{nativeName:"Soomaaliga",englishName:"Somali"},sq:{nativeName:"Shqip",englishName:"Albanian"},"sq-AL":{nativeName:"Shqip",englishName:"Albanian"},sr:{nativeName:"Српски",englishName:"Serbian"},"sr-RS":{nativeName:"Српски (Serbia)",englishName:"Serbian (Serbia)"},su:{nativeName:"Basa Sunda",englishName:"Sundanese"},sv:{nativeName:"Svenska",englishName:"Swedish"},"sv-SE":{nativeName:"Svenska",englishName:"Swedish"},sw:{nativeName:"Kiswahili",englishName:"Swahili"},"sw-KE":{nativeName:"Kiswahili",englishName:"Swahili (Kenya)"},ta:{nativeName:"தமிழ்",englishName:"Tamil"},"ta-IN":{nativeName:"தமிழ்",englishName:"Tamil"},te:{nativeName:"తెలుగు",englishName:"Telugu"},"te-IN":{nativeName:"తెలుగు",englishName:"Telugu"},tg:{nativeName:"забо́ни тоҷикӣ́",englishName:"Tajik"},"tg-TJ":{nativeName:"тоҷикӣ",englishName:"Tajik"},th:{nativeName:"ภาษาไทย",englishName:"Thai"},"th-TH":{nativeName:"ภาษาไทย (ประเทศไทย)",englishName:"Thai (Thailand)"},tl:{nativeName:"Filipino",englishName:"Filipino"},"tl-PH":{nativeName:"Filipino",englishName:"Filipino"},tlh:{nativeName:"tlhIngan-Hol",englishName:"Klingon"},tr:{nativeName:"Türkçe",englishName:"Turkish"},"tr-TR":{nativeName:"Türkçe",englishName:"Turkish"},"tt-RU":{nativeName:"татарча",englishName:"Tatar"},uk:{nativeName:"Українська",englishName:"Ukrainian"},"uk-UA":{nativeName:"Українська",englishName:"Ukrainian"},ur:{nativeName:"اردو",englishName:"Urdu"},"ur-PK":{nativeName:"اردو",englishName:"Urdu"},uz:{nativeName:"O'zbek",englishName:"Uzbek"},"uz-UZ":{nativeName:"O'zbek",englishName:"Uzbek"},vi:{nativeName:"Tiếng Việt",englishName:"Vietnamese"},"vi-VN":{nativeName:"Tiếng Việt",englishName:"Vietnamese"},"xh-ZA":{nativeName:"isiXhosa",englishName:"Xhosa"},yi:{nativeName:"ייִדיש",englishName:"Yiddish"},"yi-DE":{nativeName:"ייִדיש (German)",englishName:"Yiddish (German)"},zh:{nativeName:"中文",englishName:"Chinese"},"zh-HANS":{nativeName:"中文简体",englishName:"Chinese Simplified"},"zh-HANT":{nativeName:"中文繁體",englishName:"Chinese Traditional"},"zh-CN":{nativeName:"中文（中国）",englishName:"Chinese Simplified (China)"},"zh-HK":{nativeName:"中文（香港）",englishName:"Chinese Traditional (Hong Kong)"},"zh-SG":{nativeName:"中文（新加坡）",englishName:"Chinese Simplified (Singapore)"},"zh-TW":{nativeName:"中文（台灣）",englishName:"Chinese Traditional (Taiwan)"},"zu-ZA":{nativeName:"isiZulu",englishName:"Zulu"}}},$jscomp$iter$422=$jscomp.makeIterator(Object.keys(mozilla.LanguageMapping)),$jscomp$key$key=$jscomp$iter$422.next();!$jscomp$key$key.done;$jscomp$key$key=$jscomp$iter$422.next()){var key=$jscomp$key$key.value;mozilla.LanguageMapping[key.toLowerCase()]=mozilla.LanguageMapping[key]}shaka.ui.Element=function(sn,ln){var cn=this;this.parent=sn,this.controls=ln,this.eventManager=new shaka.util.EventManager,this.localization=this.controls.getLocalization(),this.player=this.controls.getPlayer(),this.video=this.controls.getVideo(),this.adManager=this.player.getAdManager(),this.ad=ln.getAd(),this.eventManager.listen(this.adManager,shaka.ads.AdManager.AD_STARTED,function(dn){cn.ad=dn.ad}),this.eventManager.listen(this.adManager,shaka.ads.AdManager.AD_STOPPED,function(){cn.ad=null})},shaka.ui.Element.prototype.release=function(){this.eventManager.release(),this.ad=this.adManager=this.video=this.player=this.localization=this.eventManager=this.controls=this.parent=null},goog.exportSymbol("shaka.ui.Element",shaka.ui.Element),goog.exportProperty(shaka.ui.Element.prototype,"release",shaka.ui.Element.prototype.release),shaka.ui.Enums={},shaka.ui.Enums.MaterialDesignIcons={FULLSCREEN:"fullscreen",EXIT_FULLSCREEN:"fullscreen_exit",CLOSE:"close",CLOSED_CAPTIONS:"closed_caption",CLOSED_CAPTIONS_OFF:"closed_caption_disabled",CHECKMARK:"done",LANGUAGE:"language",PIP:"picture_in_picture_alt",EXIT_PIP:"branding_watermark",BACK:"arrow_back",RESOLUTION:"settings",MUTE:"volume_up",UNMUTE:"volume_off",CAST:"cast",EXIT_CAST:"cast_connected",OPEN_OVERFLOW:"more_vert",REWIND:"fast_rewind",FAST_FORWARD:"fast_forward",PLAY:"play_arrow",PLAYBACK_RATE:"slow_motion_video",PAUSE:"pause",LOOP:"repeat",UNLOOP:"repeat_on",AIRPLAY:"airplay",REPLAY:"replay",STATISTICS_ON:"insert_chart_outlined",STATISTICS_OFF:"insert_chart"},shaka.ui.Utils=function(){},shaka.ui.Utils.getFirstDescendantWithClassName=function(sn,ln){return sn=shaka.ui.Utils.getDescendantIfExists(sn,ln),goog.asserts.assert(sn!=null,"Should not be null!"),sn},shaka.ui.Utils.getDescendantIfExists=function(sn,ln){return sn=sn.getElementsByClassName(ln),sn.length?sn[0]:null},shaka.ui.Utils.focusOnTheChosenItem=function(sn){sn&&(sn=shaka.ui.Utils.getDescendantIfExists(sn,"shaka-chosen-item"))&&sn.parentElement.focus()},shaka.ui.Utils.checkmarkIcon=function(){var sn=shaka.util.Dom.createHTMLElement("i");return sn.classList.add("material-icons-round"),sn.classList.add("shaka-chosen-item"),sn.textContent=shaka.ui.Enums.MaterialDesignIcons.CHECKMARK,sn.ariaHidden="true",sn},shaka.ui.Utils.setDisplay=function(sn,ln){sn&&(ln?sn.classList.remove("shaka-hidden"):sn.classList.add("shaka-hidden"))},shaka.ui.Utils.buildTimeString=function(sn,ln){var cn=Math.floor(sn/3600),dn=Math.floor(sn/60%60);return sn=Math.floor(sn%60),10>sn&&(sn="0"+sn),sn=dn+":"+sn,ln&&(10>dn&&(sn="0"+sn),sn=cn+":"+sn),sn},shaka.ui.AdCounter=function(sn,ln){shaka.ui.Element.call(this,sn,ln);var cn=this;this.container_=shaka.util.Dom.createHTMLElement("div"),this.container_.classList.add("shaka-ad-counter"),this.parent.appendChild(this.container_),this.span_=shaka.util.Dom.createHTMLElement("span"),this.span_.classList.add("shaka-ad-counter-span"),this.container_.appendChild(this.span_),this.timer_=new shaka.util.Timer(function(){cn.onTimerTick_()}),this.updateAriaLabel_(),this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_UPDATED,function(){cn.updateAriaLabel_()}),this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_CHANGED,function(){cn.updateAriaLabel_()}),this.eventManager.listen(this.adManager,shaka.ads.AdManager.AD_STARTED,function(){cn.onAdStarted_()}),this.eventManager.listen(this.adManager,shaka.ads.AdManager.AD_STOPPED,function(){cn.reset_()}),this.ad&&this.onAdStarted_()},$jscomp.inherits(shaka.ui.AdCounter,shaka.ui.Element),shaka.ui.AdCounter.prototype.updateAriaLabel_=function(){},shaka.ui.AdCounter.prototype.onAdStarted_=function(){this.timer_.tickNow(),this.timer_.tickEvery(.5)},shaka.ui.AdCounter.prototype.onTimerTick_=function(){goog.asserts.assert(this.ad!=null,"this.ad should exist at this point");var sn=Math.round(this.ad.getRemainingTime()),ln=this.ad.getDuration();sn!=-1&&ln!=-1&&(0<sn?(sn=shaka.ui.Utils.buildTimeString(ln-sn,!1),ln=shaka.ui.Utils.buildTimeString(ln,!1),ln=sn+" / "+ln,1<this.ad.getSequenceLength()?this.span_.textContent=ln:(sn=this.localization.resolve(shaka.ui.Locales.Ids.AD_TIME),this.span_.textContent=sn.replace("[AD_TIME]",ln))):this.reset_())},shaka.ui.AdCounter.prototype.reset_=function(){this.timer_.stop(),this.span_.textContent=""},shaka.ui.AdCounter.prototype.release=function(){this.timer_.stop(),this.timer_=null,shaka.ui.Element.prototype.release.call(this)},goog.exportSymbol("shaka.ui.AdCounter",shaka.ui.AdCounter),shaka.ui.AdPosition=function(sn,ln){shaka.ui.Element.call(this,sn,ln);var cn=this;this.container_=shaka.util.Dom.createHTMLElement("div"),this.container_.classList.add("shaka-ad-position"),shaka.ui.Utils.setDisplay(this.container_,!1),this.parent.appendChild(this.container_),this.span_=shaka.util.Dom.createHTMLElement("span"),this.span_.classList.add("shaka-ad-position-span"),this.container_.appendChild(this.span_),this.updateAriaLabel_(),this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_UPDATED,function(){cn.ad&&(cn.updateAriaLabel_(),cn.setPosition_())}),this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_CHANGED,function(){cn.ad&&(cn.updateAriaLabel_(),cn.setPosition_())}),this.eventManager.listen(this.adManager,shaka.ads.AdManager.AD_STARTED,function(){cn.setPosition_()}),this.eventManager.listen(this.adManager,shaka.ads.AdManager.AD_STOPPED,function(){cn.span_.textContent="",shaka.ui.Utils.setDisplay(cn.container_,!1)}),this.ad&&this.setPosition_()},$jscomp.inherits(shaka.ui.AdPosition,shaka.ui.Element),shaka.ui.AdPosition.prototype.updateAriaLabel_=function(){},shaka.ui.AdPosition.prototype.setPosition_=function(){var sn=this.ad.getSequenceLength();if(1<sn){var ln=shaka.ui.Locales.Ids,cn=this.ad.getPositionInSequence();this.span_.textContent=this.localization.resolve(ln.AD_PROGRESS).replace("[AD_ON]",String(cn)).replace("[NUM_ADS]",String(sn)),shaka.ui.Utils.setDisplay(this.container_,!0)}},goog.exportSymbol("shaka.ui.AdPosition",shaka.ui.AdPosition),shaka.ui.PlayButton=function(sn,ln){shaka.ui.Element.call(this,sn,ln);var cn=this;sn=shaka.ads.AdManager,this.button=shaka.util.Dom.createButton(),this.parent.appendChild(this.button),this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_UPDATED,function(){cn.updateAriaLabel()}),this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_CHANGED,function(){cn.updateAriaLabel()}),this.eventManager.listen(this.video,"play",function(){cn.updateAriaLabel(),cn.updateIcon()}),this.eventManager.listen(this.video,"pause",function(){cn.updateAriaLabel(),cn.updateIcon()}),this.eventManager.listen(this.video,"seeking",function(){cn.updateAriaLabel(),cn.updateIcon()}),this.eventManager.listen(this.adManager,sn.AD_PAUSED,function(){cn.updateAriaLabel(),cn.updateIcon()}),this.eventManager.listen(this.adManager,sn.AD_RESUMED,function(){cn.updateAriaLabel(),cn.updateIcon()}),this.eventManager.listen(this.adManager,sn.AD_STARTED,function(){cn.updateAriaLabel(),cn.updateIcon()}),this.eventManager.listen(this.button,"click",function(){cn.ad&&cn.ad.isLinear()?cn.controls.playPauseAd():cn.controls.playPausePresentation()}),this.ad&&(this.updateAriaLabel(),this.updateIcon())},$jscomp.inherits(shaka.ui.PlayButton,shaka.ui.Element),shaka.ui.PlayButton.prototype.isPaused=function(){return this.ad&&this.ad.isLinear()?this.ad.isPaused():this.controls.presentationIsPaused()},shaka.ui.PlayButton.prototype.updateAriaLabel=function(){},shaka.ui.PlayButton.prototype.updateIcon=function(){},goog.exportSymbol("shaka.ui.PlayButton",shaka.ui.PlayButton),shaka.ui.BigPlayButton=function(sn,ln){shaka.ui.PlayButton.call(this,sn,ln),this.button.classList.add("shaka-play-button"),this.button.classList.add("shaka-no-propagation"),this.updateIcon(),this.updateAriaLabel()},$jscomp.inherits(shaka.ui.BigPlayButton,shaka.ui.PlayButton),shaka.ui.BigPlayButton.prototype.updateIcon=function(){this.isPaused()?this.button.setAttribute("icon","play"):this.button.setAttribute("icon","pause")},shaka.ui.BigPlayButton.prototype.updateAriaLabel=function(){var sn=shaka.ui.Locales.Ids;sn=this.isPaused()?sn.PLAY:sn.PAUSE,this.button.ariaLabel=this.localization.resolve(sn)},goog.exportSymbol("shaka.ui.BigPlayButton",shaka.ui.BigPlayButton),shaka.ui.ContextMenu=function(sn,ln){shaka.ui.Element.call(this,sn,ln);var cn=this;this.config_=this.controls.getConfig(),this.controlsContainer_=this.controls.getControlsContainer(),this.children_=[],this.contextMenu_=shaka.util.Dom.createHTMLElement("div"),this.contextMenu_.classList.add("shaka-no-propagation"),this.contextMenu_.classList.add("shaka-context-menu"),this.contextMenu_.classList.add("shaka-hidden"),this.controlsContainer_.appendChild(this.contextMenu_),this.eventManager.listen(this.controlsContainer_,"contextmenu",function(dn){if(cn.contextMenu_.classList.contains("shaka-hidden")){dn.preventDefault();var pn=cn.controlsContainer_.getBoundingClientRect();cn.contextMenu_.style.left=dn.clientX-pn.left+"px",cn.contextMenu_.style.top=dn.clientY-pn.top+"px",shaka.ui.Utils.setDisplay(cn.contextMenu_,!0)}else shaka.ui.Utils.setDisplay(cn.contextMenu_,!1)}),this.eventManager.listen(window,"click",function(){shaka.ui.Utils.setDisplay(cn.contextMenu_,!1)}),this.createChildren_()},$jscomp.inherits(shaka.ui.ContextMenu,shaka.ui.Element),shaka.ui.ContextMenu.prototype.release=function(){this.controlsContainer_=null;for(var sn=$jscomp.makeIterator(this.children_),ln=sn.next();!ln.done;ln=sn.next())ln.value.release();this.children_=[],shaka.ui.Element.prototype.release.call(this)},shaka.ui.ContextMenu.registerElement=function(sn,ln){shaka.ui.ContextMenu.elementNamesToFactories_.set(sn,ln)},shaka.ui.ContextMenu.prototype.createChildren_=function(){for(var sn=$jscomp.makeIterator(this.config_.contextMenuElements),ln=sn.next();!ln.done;ln=sn.next()){ln=ln.value;var cn=shaka.ui.ContextMenu.elementNamesToFactories_.get(ln);cn?(goog.asserts.assert(this.controls,"Controls should not be null!"),this.children_.push(cn.create(this.contextMenu_,this.controls))):shaka.log.alwaysWarn("Unrecognized context menu element:",ln)}},goog.exportSymbol("shaka.ui.ContextMenu",shaka.ui.ContextMenu),goog.exportProperty(shaka.ui.ContextMenu,"registerElement",shaka.ui.ContextMenu.registerElement),shaka.ui.ContextMenu.elementNamesToFactories_=new Map,shaka.ui.Constants={},shaka.ui.Constants.MIN_SEEK_WINDOW_TO_SHOW_SEEKBAR=5,shaka.ui.RangeElement=function(sn,ln,cn,dn){shaka.ui.Element.call(this,sn,ln);var pn=this;this.container=shaka.util.Dom.createHTMLElement("div"),this.container.classList.add("shaka-range-container"),this.container.classList.add.apply(this.container.classList,$jscomp.arrayFromIterable(cn)),this.isChanging_=!1,this.bar=document.createElement("input"),this.endFakeChangeTimer_=new shaka.util.Timer(function(){pn.onChangeEnd(),pn.isChanging_=!1}),this.bar.classList.add("shaka-range-element"),this.bar.classList.add.apply(this.bar.classList,$jscomp.arrayFromIterable(dn)),this.bar.type="range",this.bar.step="any",this.bar.min="0",this.bar.max="1",this.bar.value="0",this.container.appendChild(this.bar),this.parent.appendChild(this.container),this.eventManager.listen(this.bar,"mousedown",function(){pn.controls.isOpaque()&&(pn.isChanging_=!0,pn.onChangeStart())}),this.eventManager.listen(this.bar,"touchstart",function(vn){pn.controls.isOpaque()&&(pn.isChanging_=!0,pn.setBarValueForTouch_(vn),pn.onChangeStart())}),this.eventManager.listen(this.bar,"input",function(){pn.onChange()}),this.eventManager.listen(this.bar,"touchmove",function(vn){pn.isChanging_&&(pn.setBarValueForTouch_(vn),pn.onChange())}),this.eventManager.listen(this.bar,"touchend",function(vn){pn.isChanging_&&(pn.isChanging_=!1,pn.setBarValueForTouch_(vn),pn.onChangeEnd())}),this.eventManager.listen(this.bar,"mouseup",function(){pn.isChanging_&&(pn.isChanging_=!1,pn.onChangeEnd())})},$jscomp.inherits(shaka.ui.RangeElement,shaka.ui.Element),shaka.ui.RangeElement.prototype.release=function(){this.endFakeChangeTimer_&&(this.endFakeChangeTimer_.stop(),this.endFakeChangeTimer_=null),shaka.ui.Element.prototype.release.call(this)},shaka.ui.RangeElement.prototype.setRange=function(sn,ln){this.bar.min=sn,this.bar.max=ln},shaka.ui.RangeElement.prototype.onChangeStart=function(){},shaka.ui.RangeElement.prototype.onChange=function(){},shaka.ui.RangeElement.prototype.onChangeEnd=function(){},shaka.ui.RangeElement.prototype.changeTo=function(sn){this.isChanging_||(this.isChanging_=!0,this.onChangeStart());var ln=parseFloat(this.bar.min),cn=parseFloat(this.bar.max);this.bar.value=sn>cn?cn:sn<ln?ln:sn,this.onChange(),this.endFakeChangeTimer_.tickAfter(.5)},shaka.ui.RangeElement.prototype.getValue=function(){return parseFloat(this.bar.value)},shaka.ui.RangeElement.prototype.setValue=function(sn){this.isChanging_||(this.bar.value=sn)},shaka.ui.RangeElement.prototype.setBarValueForTouch_=function(sn){sn.preventDefault();var ln=sn.changedTouches[0],cn=this.bar.getBoundingClientRect();sn=parseFloat(this.bar.min);var dn=parseFloat(this.bar.max);ln=sn+(dn-sn)/cn.width*(ln.clientX-cn.left),ln<sn?ln=sn:ln>dn&&(ln=dn),this.bar.value=ln},goog.exportSymbol("shaka.ui.RangeElement",shaka.ui.RangeElement),goog.exportProperty(shaka.ui.RangeElement.prototype,"setValue",shaka.ui.RangeElement.prototype.setValue),goog.exportProperty(shaka.ui.RangeElement.prototype,"getValue",shaka.ui.RangeElement.prototype.getValue),goog.exportProperty(shaka.ui.RangeElement.prototype,"changeTo",shaka.ui.RangeElement.prototype.changeTo),goog.exportProperty(shaka.ui.RangeElement.prototype,"onChangeEnd",shaka.ui.RangeElement.prototype.onChangeEnd),goog.exportProperty(shaka.ui.RangeElement.prototype,"onChange",shaka.ui.RangeElement.prototype.onChange),goog.exportProperty(shaka.ui.RangeElement.prototype,"onChangeStart",shaka.ui.RangeElement.prototype.onChangeStart),goog.exportProperty(shaka.ui.RangeElement.prototype,"setRange",shaka.ui.RangeElement.prototype.setRange),shaka.ui.SeekBar=function(sn,ln){shaka.ui.RangeElement.call(this,sn,ln,["shaka-seek-bar-container"],["shaka-seek-bar","shaka-no-propagation","shaka-show-controls-on-mouse-over"]);var cn=this;this.adMarkerContainer_=shaka.util.Dom.createHTMLElement("div"),this.adMarkerContainer_.classList.add("shaka-ad-markers"),this.container.insertBefore(this.adMarkerContainer_,this.container.childNodes[0]),this.config_=this.controls.getConfig(),this.seekTimer_=new shaka.util.Timer(function(){cn.video.currentTime=cn.getValue()}),this.adBreaksTimer_=new shaka.util.Timer(function(){cn.markAdBreaks_()}),this.wasPlaying_=!1,this.adCuePoints_=[],this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_UPDATED,function(){return cn.updateAriaLabel_()}),this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_CHANGED,function(){return cn.updateAriaLabel_()}),this.eventManager.listen(this.adManager,shaka.ads.AdManager.AD_STARTED,function(){cn.shouldBeDisplayed_()||shaka.ui.Utils.setDisplay(cn.container,!1)}),this.eventManager.listen(this.adManager,shaka.ads.AdManager.AD_STOPPED,function(){cn.shouldBeDisplayed_()&&shaka.ui.Utils.setDisplay(cn.container,!0)}),this.eventManager.listen(this.adManager,shaka.ads.AdManager.CUEPOINTS_CHANGED,function(dn){cn.adCuePoints_=dn.cuepoints,cn.onAdCuePointsChanged_()}),this.eventManager.listen(this.player,"unloading",function(){cn.adCuePoints_=[],cn.onAdCuePointsChanged_()}),this.setValue(this.video.currentTime),this.update(),this.updateAriaLabel_(),this.ad&&shaka.ui.Utils.setDisplay(this.container,!1)},$jscomp.inherits(shaka.ui.SeekBar,shaka.ui.RangeElement),shaka.ui.SeekBar.prototype.release=function(){this.seekTimer_&&(this.seekTimer_.stop(),this.seekTimer_=null,this.adBreaksTimer_.stop(),this.adBreaksTimer_=null),shaka.ui.RangeElement.prototype.release.call(this)},shaka.ui.SeekBar.prototype.onChangeStart=function(){this.wasPlaying_=!this.video.paused,this.controls.setSeeking(!0),this.video.pause()},shaka.ui.SeekBar.prototype.onChange=function(){this.video.duration&&(this.update(),this.seekTimer_.tickAfter(.125))},shaka.ui.SeekBar.prototype.onChangeEnd=function(){this.seekTimer_.tickNow(),this.controls.setSeeking(!1),this.wasPlaying_&&this.video.play()},shaka.ui.SeekBar.prototype.isShowing=function(){return!this.container.classList.contains("shaka-hidden")},shaka.ui.SeekBar.prototype.update=function(){var sn=this.config_.seekBarColors,ln=this.getValue(),cn=this.video.buffered.length,dn=cn?this.video.buffered.start(0):0,pn=cn?this.video.buffered.end(cn-1):0,vn=this.player.seekRange(),kn=vn.end-vn.start;this.setRange(vn.start,vn.end),this.shouldBeDisplayed_()?(shaka.ui.Utils.setDisplay(this.container,!0),cn==0?this.container.style.background=sn.base:(cn=(Math.max(dn,vn.start)-vn.start)/kn||0,pn=(Math.min(pn,vn.end)-vn.start)/kn||0,ln=(Math.min(Math.max(ln,vn.start),vn.end)-vn.start)/kn||0,sn=["to right",this.makeColor_(this.config_.showUnbufferedStart?sn.base:sn.played,cn),this.makeColor_(sn.played,cn),this.makeColor_(sn.played,ln),this.makeColor_(sn.buffered,ln),this.makeColor_(sn.buffered,pn),this.makeColor_(sn.base,pn)],this.container.style.background="linear-gradient("+sn.join(",")+")")):shaka.ui.Utils.setDisplay(this.container,!1)},shaka.ui.SeekBar.prototype.markAdBreaks_=function(){if(this.adCuePoints_.length){for(var sn=this.player.seekRange(),ln=sn.end-sn.start,cn=["to right"],dn=[],pn=this.config_.seekBarColors.adBreaks,vn=!1,kn=$jscomp.makeIterator(this.adCuePoints_),Sn=kn.next();!Sn.done;Sn=kn.next())if(Sn=Sn.value,Sn.start!=-1||Sn.end||(vn=!0),Sn.start>=sn.start&&Sn.start<sn.end&&!(Sn.end&&Sn.end>sn.end)){var wn=(Sn.start-sn.start)/ln||0,Pn=wn+.01;Sn.end&&(Pn=(Sn.end-sn.start)/ln||0),dn.push({start:wn,end:Pn})}for(sn=$jscomp.makeIterator(dn),Sn=sn.next();!Sn.done;Sn=sn.next())ln=Sn.value,cn.push(this.makeColor_("transparent",ln.start)),cn.push(this.makeColor_(pn,ln.start)),cn.push(this.makeColor_(pn,ln.end)),cn.push(this.makeColor_("transparent",ln.end));vn&&(cn.push(this.makeColor_("transparent",.99)),cn.push(this.makeColor_(pn,.99))),this.adMarkerContainer_.style.background="linear-gradient("+cn.join(",")+")"}else this.adMarkerContainer_.style.background="transparent"},shaka.ui.SeekBar.prototype.makeColor_=function(sn,ln){return sn+" "+100*ln+"%"},shaka.ui.SeekBar.prototype.onAdCuePointsChanged_=function(){this.markAdBreaks_();var sn=this.player.seekRange();sn=sn.end-sn.start;var ln=shaka.ui.Constants.MIN_SEEK_WINDOW_TO_SHOW_SEEKBAR;this.player.isLive()&&sn>ln&&this.adBreaksTimer_.tickEvery(1)},shaka.ui.SeekBar.prototype.shouldBeDisplayed_=function(){var sn=this.player.seekRange();return sn=sn.end-sn.start,this.player.isLive()&&sn<shaka.ui.Constants.MIN_SEEK_WINDOW_TO_SHOW_SEEKBAR?!1:this.ad==null||!this.ad.isLinear()},shaka.ui.SeekBar.prototype.updateAriaLabel_=function(){this.bar.ariaLabel=this.localization.resolve(shaka.ui.Locales.Ids.SEEK)},goog.exportSymbol("shaka.ui.SeekBar",shaka.ui.SeekBar),shaka.ui.SeekBar.Factory=function(){},shaka.ui.SeekBar.Factory.prototype.create=function(sn,ln){return new shaka.ui.SeekBar(sn,ln)},goog.exportProperty(shaka.ui.SeekBar,"Factory",shaka.ui.SeekBar.Factory),shaka.ui.ControlsPanel={},shaka.ui.Controls=function(sn,ln,cn,dn){shaka.util.FakeEventTarget.call(this);var pn=this;this.enabled_=!0,this.config_=dn,this.castProxy_=new shaka.cast.CastProxy(cn,sn,this.config_.castReceiverAppId,this.config_.castAndroidReceiverCompatible),this.castAllowed_=!0,this.video_=this.castProxy_.getVideo(),this.localVideo_=cn,this.player_=this.castProxy_.getPlayer(),this.localPlayer_=sn,this.videoContainer_=ln,this.adManager_=this.player_.getAdManager(),this.seekBar_=this.ad_=null,this.isSeeking_=!1,this.menus_=[],this.showOnHoverControls_=[],this.recentMouseMovement_=!1,this.mouseStillTimer_=new shaka.util.Timer(function(){pn.onMouseStill_()}),this.fadeControlsTimer_=new shaka.util.Timer(function(){pn.controlsContainer_.removeAttribute("shown"),pn.hideSettingsMenusTimer_.tickAfter(2)}),this.hideSettingsMenusTimer_=new shaka.util.Timer(function(){for(var vn=$jscomp.makeIterator(pn.menus_),kn=vn.next();!kn.done;kn=vn.next())shaka.ui.Utils.setDisplay(kn.value,!1)}),this.timeAndSeekRangeTimer_=new shaka.util.Timer(function(){pn.isOpaque()&&pn.updateTimeAndSeekRange_()}),this.lastTouchEventTime_=null,this.elements_=[],this.localization_=shaka.ui.Controls.createLocalization_(),this.eventManager_=new shaka.util.EventManager,this.configure(this.config_),this.addEventListeners_(),this.pressedKeys_=new Set,this.onCastStatusChange_(),this.timeAndSeekRangeTimer_.tickEvery(.125),this.eventManager_.listen(this.localization_,shaka.ui.Localization.LOCALE_CHANGED,function(vn){pn.adManager_.setLocale(vn.locales[0])})},$jscomp.inherits(shaka.ui.Controls,shaka.util.FakeEventTarget),shaka.ui.Controls.prototype.destroy=function(){var sn=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ln){switch(ln.nextAddress){case 1:if(document.pictureInPictureElement!=sn.localVideo_){ln.jumpTo(2);break}return ln.yield(document.exitPictureInPicture(),2);case 2:if(sn.eventManager_&&(sn.eventManager_.release(),sn.eventManager_=null),sn.mouseStillTimer_&&(sn.mouseStillTimer_.stop(),sn.mouseStillTimer_=null),sn.fadeControlsTimer_&&(sn.fadeControlsTimer_.stop(),sn.fadeControlsTimer_=null),sn.hideSettingsMenusTimer_&&(sn.hideSettingsMenusTimer_.stop(),sn.hideSettingsMenusTimer_=null),sn.timeAndSeekRangeTimer_&&(sn.timeAndSeekRangeTimer_.stop(),sn.timeAndSeekRangeTimer_=null),sn.releaseChildElements_(),sn.controlsContainer_&&(sn.videoContainer_.removeChild(sn.controlsContainer_),sn.controlsContainer_=null),!sn.castProxy_){ln.jumpTo(4);break}return ln.yield(sn.castProxy_.destroy(),5);case 5:sn.castProxy_=null;case 4:if(!sn.localPlayer_){ln.jumpTo(6);break}return ln.yield(sn.localPlayer_.destroy(),7);case 7:sn.localPlayer_=null;case 6:sn.player_=null,sn.localVideo_=null,sn.video_=null,sn.localization_=null,sn.pressedKeys_.clear(),shaka.util.FakeEventTarget.prototype.release.call(sn),ln.jumpToEnd()}})},shaka.ui.Controls.prototype.releaseChildElements_=function(){for(var sn=$jscomp.makeIterator(this.elements_),ln=sn.next();!ln.done;ln=sn.next())ln.value.release();this.elements_=[]},shaka.ui.Controls.registerElement=function(sn,ln){shaka.ui.ControlsPanel.elementNamesToFactories_.set(sn,ln)},shaka.ui.Controls.registerSeekBar=function(sn){shaka.ui.ControlsPanel.seekBarFactory_=sn},shaka.ui.Controls.prototype.allowCast=function(sn){this.castAllowed_=sn,this.onCastStatusChange_()},shaka.ui.Controls.prototype.loadComplete=function(){this.onPlayStateChange_()},shaka.ui.Controls.prototype.configure=function(sn){this.config_=sn,this.castProxy_.changeReceiverId(sn.castReceiverAppId,sn.castAndroidReceiverCompatible),this.seekBar_&&(this.seekBar_=null),this.playButton_&&(this.playButton_=null),this.contextMenu_&&(this.contextMenu_=null),this.controlsContainer_?(shaka.util.Dom.removeAllChildren(this.controlsContainer_),this.releaseChildElements_()):(this.addControlsContainer_(),this.addClientAdContainer_()),this.createDOM_(),this.onPlayStateChange_(),sn=this.videoContainer_.getElementsByClassName("shaka-no-propagation"),sn=$jscomp.makeIterator(sn);for(var ln=sn.next();!ln.done;ln=sn.next()){ln=ln.value;var cn=function(dn){return dn.stopPropagation()};this.eventManager_.listen(ln,"click",cn),this.eventManager_.listen(ln,"dblclick",cn)}},shaka.ui.Controls.prototype.setEnabledShakaControls=function(sn){(this.enabled_=sn)?(this.videoContainer_.setAttribute("shaka-controls","true"),this.localVideo_.tabIndex=-1,this.localVideo_.controls=!1):this.videoContainer_.removeAttribute("shaka-controls"),this.onPlayStateChange_()},shaka.ui.Controls.prototype.setEnabledNativeControls=function(sn){this.localVideo_.controls=sn,this.localVideo_.tabIndex=sn?0:-1,sn&&this.setEnabledShakaControls(!1)},shaka.ui.Controls.prototype.getAd=function(){return this.ad_},shaka.ui.Controls.prototype.getCastProxy=function(){return this.castProxy_},shaka.ui.Controls.prototype.getLocalization=function(){return this.localization_},shaka.ui.Controls.prototype.getVideoContainer=function(){return this.videoContainer_},shaka.ui.Controls.prototype.getVideo=function(){return this.video_},shaka.ui.Controls.prototype.getLocalVideo=function(){return this.localVideo_},shaka.ui.Controls.prototype.getPlayer=function(){return this.player_},shaka.ui.Controls.prototype.getLocalPlayer=function(){return this.localPlayer_},shaka.ui.Controls.prototype.getControlsContainer=function(){return goog.asserts.assert(this.controlsContainer_,"No controls container after destruction!"),this.controlsContainer_},shaka.ui.Controls.prototype.getServerSideAdContainer=function(){return this.daiAdContainer_},shaka.ui.Controls.prototype.getClientSideAdContainer=function(){return this.clientAdContainer_},shaka.ui.Controls.prototype.getConfig=function(){return this.config_},shaka.ui.Controls.prototype.isSeeking=function(){return this.isSeeking_},shaka.ui.Controls.prototype.setSeeking=function(sn){this.isSeeking_=sn},shaka.ui.Controls.prototype.isCastAllowed=function(){return this.castAllowed_},shaka.ui.Controls.prototype.getDisplayTime=function(){return this.seekBar_?this.seekBar_.getValue():this.video_.currentTime},shaka.ui.Controls.prototype.setLastTouchEventTime=function(sn){this.lastTouchEventTime_=sn},shaka.ui.Controls.prototype.anySettingsMenusAreOpen=function(){return this.menus_.some(function(sn){return!sn.classList.contains("shaka-hidden")})},shaka.ui.Controls.prototype.hideSettingsMenus=function(){this.hideSettingsMenusTimer_.tickNow()},shaka.ui.Controls.prototype.isFullScreenSupported=function(){return!!(document.fullscreenEnabled||this.localVideo_.webkitSupportsFullscreen)},shaka.ui.Controls.prototype.isFullScreenEnabled=function(){if(document.fullscreenEnabled)return!!document.fullscreenElement;var sn=this.localVideo_;return sn.webkitSupportsFullscreen?sn.webkitDisplayingFullscreen:!1},shaka.ui.Controls.prototype.enterFullScreen_=function(){var sn=this,ln,cn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(dn){switch(dn.nextAddress){case 1:if(dn.setCatchFinallyBlocks(2),!document.fullscreenEnabled){ln=sn.localVideo_,ln.webkitSupportsFullscreen&&ln.webkitEnterFullscreen(),dn.jumpTo(4);break}if(!document.pictureInPictureElement){dn.jumpTo(5);break}return dn.yield(document.exitPictureInPicture(),5);case 5:return dn.yield(sn.videoContainer_.requestFullscreen({navigationUI:"hide"}),7);case 7:if(!sn.config_.forceLandscapeOnFullscreen||!screen.orientation){dn.jumpTo(4);break}return dn.setCatchFinallyBlocks(9),dn.yield(screen.orientation.lock("landscape"),11);case 11:dn.leaveTryBlock(4,2);break;case 9:dn.enterCatchBlock(2);case 4:dn.leaveTryBlock(0);break;case 2:cn=dn.enterCatchBlock(),sn.dispatchEvent(new shaka.util.FakeEvent("error",new Map().set("detail",cn))),dn.jumpToEnd()}})},shaka.ui.Controls.prototype.exitFullScreen_=function(){var sn=this,ln;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cn){return document.fullscreenEnabled?(screen.orientation&&screen.orientation.unlock(),cn.yield(document.exitFullscreen(),0)):(ln=sn.localVideo_,ln.webkitSupportsFullscreen&&ln.webkitExitFullscreen(),cn.jumpTo(0))})},shaka.ui.Controls.prototype.toggleFullScreen=function(){var sn=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ln){return sn.isFullScreenEnabled()?ln.yield(sn.exitFullScreen_(),0):ln.yield(sn.enterFullScreen_(),0)})},shaka.ui.Controls.prototype.showAdUI=function(){shaka.ui.Utils.setDisplay(this.adPanel_,!0),shaka.ui.Utils.setDisplay(this.clientAdContainer_,!0),this.controlsContainer_.setAttribute("ad-active","true")},shaka.ui.Controls.prototype.hideAdUI=function(){shaka.ui.Utils.setDisplay(this.adPanel_,!1),shaka.ui.Utils.setDisplay(this.clientAdContainer_,!1),this.controlsContainer_.removeAttribute("ad-active")},shaka.ui.Controls.prototype.playPausePresentation=function(){this.enabled_&&this.video_.duration&&(this.player_.cancelTrickPlay(),this.presentationIsPaused()?this.video_.play():this.video_.pause())},shaka.ui.Controls.prototype.playPauseAd=function(){this.ad_&&this.ad_.isPaused()?this.ad_.play():this.ad_&&this.ad_.pause()},shaka.ui.Controls.prototype.presentationIsPaused=function(){return this.video_.paused&&!this.isSeeking()},shaka.ui.Controls.prototype.createDOM_=function(){this.videoContainer_.classList.add("shaka-video-container"),this.localVideo_.classList.add("shaka-video"),this.addScrimContainer_(),this.config_.addBigPlayButton&&this.addPlayButton_(),this.config_.customContextMenu&&this.addContextMenu_(),this.spinnerContainer_||this.addBufferingSpinner_(),this.addDaiAdContainer_(),this.addControlsButtonPanel_(),this.menus_=Array.from(this.videoContainer_.getElementsByClassName("shaka-settings-menu")),this.menus_.push.apply(this.menus_,$jscomp.arrayFromIterable(Array.from(this.videoContainer_.getElementsByClassName("shaka-overflow-menu")))),this.addSeekBar_(),this.showOnHoverControls_=Array.from(this.videoContainer_.getElementsByClassName("shaka-show-controls-on-mouse-over"))},shaka.ui.Controls.prototype.addControlsContainer_=function(){var sn=this;this.controlsContainer_=shaka.util.Dom.createHTMLElement("div"),this.controlsContainer_.classList.add("shaka-controls-container"),this.videoContainer_.appendChild(this.controlsContainer_),this.videoContainer_.setAttribute("shaka-controls","true"),this.eventManager_.listen(this.controlsContainer_,"touchstart",function(ln){sn.onContainerTouch_(ln)},{passive:!1}),this.eventManager_.listen(this.controlsContainer_,"click",function(){sn.onContainerClick_()}),this.eventManager_.listen(this.controlsContainer_,"dblclick",function(){sn.config_.doubleClickForFullscreen&&sn.isFullScreenSupported()&&sn.toggleFullScreen()})},shaka.ui.Controls.prototype.addPlayButton_=function(){var sn=shaka.util.Dom.createHTMLElement("div");sn.classList.add("shaka-play-button-container"),this.controlsContainer_.appendChild(sn),this.playButton_=new shaka.ui.BigPlayButton(sn,this),this.elements_.push(this.playButton_)},shaka.ui.Controls.prototype.addContextMenu_=function(){this.contextMenu_=new shaka.ui.ContextMenu(this.controlsButtonPanel_,this),this.elements_.push(this.contextMenu_)},shaka.ui.Controls.prototype.addScrimContainer_=function(){var sn=shaka.util.Dom.createHTMLElement("div");sn.classList.add("shaka-scrim-container"),this.controlsContainer_.appendChild(sn)},shaka.ui.Controls.prototype.addAdControls_=function(){this.adPanel_=shaka.util.Dom.createHTMLElement("div"),this.adPanel_.classList.add("shaka-ad-controls");var sn=this.ad_!=null&&this.ad_.isLinear();shaka.ui.Utils.setDisplay(this.adPanel_,sn),this.bottomControls_.appendChild(this.adPanel_),sn=new shaka.ui.AdPosition(this.adPanel_,this),this.elements_.push(sn),sn=new shaka.ui.AdCounter(this.adPanel_,this),this.elements_.push(sn)},shaka.ui.Controls.prototype.addBufferingSpinner_=function(){this.spinnerContainer_=shaka.util.Dom.createHTMLElement("div"),this.spinnerContainer_.classList.add("shaka-spinner-container"),this.videoContainer_.appendChild(this.spinnerContainer_);var sn=shaka.util.Dom.createHTMLElement("div");sn.classList.add("shaka-spinner"),this.spinnerContainer_.appendChild(sn);var ln=document.createElementNS("http://www.w3.org/2000/svg","svg");ln.classList.add("shaka-spinner-svg"),ln.setAttribute("viewBox","0 0 30 30"),sn.appendChild(ln),sn=document.createElementNS("http://www.w3.org/2000/svg","circle"),sn.classList.add("shaka-spinner-path"),sn.setAttribute("cx","15"),sn.setAttribute("cy","15"),sn.setAttribute("r","14.5"),sn.setAttribute("fill","none"),sn.setAttribute("stroke-width","1"),sn.setAttribute("stroke-miterlimit","10"),ln.appendChild(sn)},shaka.ui.Controls.prototype.addControlsButtonPanel_=function(){var sn=this;this.bottomControls_=shaka.util.Dom.createHTMLElement("div"),this.bottomControls_.classList.add("shaka-bottom-controls"),this.bottomControls_.classList.add("shaka-no-propagation"),this.controlsContainer_.appendChild(this.bottomControls_),this.eventManager_.listen(this.bottomControls_,"click",function(dn){dn.target.closest(".shaka-overflow-button")||sn.hideSettingsMenus()}),this.addAdControls_(),this.controlsButtonPanel_=shaka.util.Dom.createHTMLElement("div"),this.controlsButtonPanel_.classList.add("shaka-controls-button-panel"),this.controlsButtonPanel_.classList.add("shaka-show-controls-on-mouse-over"),this.config_.enableTooltips&&this.controlsButtonPanel_.classList.add("shaka-tooltips-on"),this.bottomControls_.appendChild(this.controlsButtonPanel_);for(var ln=$jscomp.makeIterator(this.config_.controlPanelElements),cn=ln.next();!cn.done;cn=ln.next())cn=cn.value,shaka.ui.ControlsPanel.elementNamesToFactories_.get(cn)?(cn=shaka.ui.ControlsPanel.elementNamesToFactories_.get(cn).create(this.controlsButtonPanel_,this),this.elements_.push(cn)):shaka.log.alwaysWarn("Unrecognized control panel element requested:",cn)},shaka.ui.Controls.prototype.addDaiAdContainer_=function(){this.daiAdContainer_=shaka.util.Dom.createHTMLElement("div"),this.daiAdContainer_.classList.add("shaka-server-side-ad-container"),this.controlsContainer_.appendChild(this.daiAdContainer_)},shaka.ui.Controls.prototype.addSeekBar_=function(){if(this.config_.addSeekBar)this.seekBar_=shaka.ui.ControlsPanel.seekBarFactory_.create(this.bottomControls_,this),this.elements_.push(this.seekBar_);else for(var sn=$jscomp.makeIterator(this.menus_),ln=sn.next();!ln.done;ln=sn.next())ln.value.classList.add("shaka-low-position")},shaka.ui.Controls.prototype.addClientAdContainer_=function(){var sn=this;this.clientAdContainer_=shaka.util.Dom.createHTMLElement("div"),this.clientAdContainer_.classList.add("shaka-client-side-ad-container"),shaka.ui.Utils.setDisplay(this.clientAdContainer_,!1),this.eventManager_.listen(this.clientAdContainer_,"click",function(){sn.onContainerClick_()}),this.videoContainer_.appendChild(this.clientAdContainer_)},shaka.ui.Controls.prototype.addEventListeners_=function(){var sn=this;this.eventManager_.listen(this.player_,"buffering",function(){sn.onBufferingStateChange_()}),this.onBufferingStateChange_(),this.eventManager_.listen(window,"keydown",function(ln){sn.onWindowKeyDown_(ln)}),this.eventManager_.listen(window,"click",function(){return sn.hideSettingsMenus()}),this.eventManager_.listen(this,"submenuopen",function(){sn.hideSettingsMenus()}),this.eventManager_.listen(this.video_,"play",function(){sn.onPlayStateChange_()}),this.eventManager_.listen(this.video_,"pause",function(){sn.onPlayStateChange_()}),this.eventManager_.listen(this.videoContainer_,"mousemove",function(ln){sn.onMouseMove_(ln)}),this.eventManager_.listen(this.videoContainer_,"touchmove",function(ln){sn.onMouseMove_(ln)},{passive:!0}),this.eventManager_.listen(this.videoContainer_,"touchend",function(ln){sn.onMouseMove_(ln)},{passive:!0}),this.eventManager_.listen(this.videoContainer_,"mouseleave",function(){sn.onMouseLeave_()}),this.eventManager_.listen(this.castProxy_,"caststatuschanged",function(){sn.onCastStatusChange_()}),this.eventManager_.listen(this.videoContainer_,"keydown",function(ln){sn.onControlsKeyDown_(ln)}),this.eventManager_.listen(this.videoContainer_,"keyup",function(ln){sn.onControlsKeyUp_(ln)}),this.eventManager_.listen(this.adManager_,shaka.ads.AdManager.AD_STARTED,function(ln){sn.ad_=ln.ad,sn.showAdUI()}),this.eventManager_.listen(this.adManager_,shaka.ads.AdManager.AD_STOPPED,function(){sn.ad_=null,sn.hideAdUI()}),screen.orientation&&this.eventManager_.listen(screen.orientation,"change",function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(ln){return ln.yield(sn.onScreenRotation_(),0)})})},shaka.ui.Controls.prototype.onScreenRotation_=function(){var sn=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ln){return sn.video_&&sn.video_.readyState!=0&&!sn.castProxy_.isCasting()&&sn.config_.enableFullscreenOnRotation&&sn.isFullScreenSupported()?screen.orientation.type.includes("landscape")&&!sn.isFullScreenEnabled()?ln.yield(sn.enterFullScreen_(),0):screen.orientation.type.includes("portrait")&&sn.isFullScreenEnabled()?ln.yield(sn.exitFullScreen_(),0):ln.jumpTo(0):ln.return()})},shaka.ui.Controls.prototype.onMouseMove_=function(sn){sn.type=="mousemove"&&(this.controlsContainer_.classList.remove("shaka-keyboard-navigation"),this.computeOpacity()),sn.type=="touchstart"||sn.type=="touchmove"||sn.type=="touchend"||sn.type=="keyup"?this.lastTouchEventTime_=Date.now():this.lastTouchEventTime_+1e3<Date.now()&&(this.lastTouchEventTime_=null),this.lastTouchEventTime_&&sn.type=="mousemove"||(this.videoContainer_.style.cursor="",this.recentMouseMovement_=!0,this.hideSettingsMenusTimer_.stop(),this.isOpaque()||(this.updateTimeAndSeekRange_(),this.computeOpacity()),this.mouseStillTimer_.stop(),sn.type!="touchend"&&sn.type!="keyup"&&this.lastTouchEventTime_||this.mouseStillTimer_.tickAfter(3))},shaka.ui.Controls.prototype.onMouseLeave_=function(){this.lastTouchEventTime_||this.mouseStillTimer_.tickNow()},shaka.ui.Controls.prototype.onMouseStill_=function(){this.videoContainer_.style.cursor="none",this.recentMouseMovement_=!1,this.computeOpacity()},shaka.ui.Controls.prototype.isHovered_=function(){return window.matchMedia("hover: hover").matches?this.showOnHoverControls_.some(function(sn){return sn.matches(":hover")}):!1},shaka.ui.Controls.prototype.computeOpacity=function(){var sn=this.ad_?this.ad_.isPaused():!1,ln=this.video_.paused&&!this.isSeeking_,cn=this.controlsContainer_.classList.contains("shaka-keyboard-navigation");sn||(!this.ad_||!this.ad_.isLinear())&&ln||this.recentMouseMovement_||cn||this.isHovered_()?(this.updateTimeAndSeekRange_(),this.controlsContainer_.setAttribute("shown","true"),this.fadeControlsTimer_.stop()):this.fadeControlsTimer_.tickAfter(this.config_.fadeDelay)},shaka.ui.Controls.prototype.onContainerTouch_=function(sn){this.video_.duration&&(this.isOpaque()?this.lastTouchEventTime_=Date.now():(this.onMouseMove_(sn),sn.cancelable&&sn.preventDefault()))},shaka.ui.Controls.prototype.onContainerClick_=function(){this.enabled_&&(this.anySettingsMenusAreOpen()?this.hideSettingsMenusTimer_.tickNow():this.config_.singleClickForPlayAndPause&&this.onPlayPauseClick_())},shaka.ui.Controls.prototype.onPlayPauseClick_=function(){this.ad_&&this.ad_.isLinear()?this.playPauseAd():this.playPausePresentation()},shaka.ui.Controls.prototype.onCastStatusChange_=function(){var sn=this.castProxy_.isCasting();this.dispatchEvent(new shaka.util.FakeEvent("caststatuschanged",new Map().set("newStatus",sn))),sn?this.controlsContainer_.setAttribute("casting","true"):this.controlsContainer_.removeAttribute("casting")},shaka.ui.Controls.prototype.onPlayStateChange_=function(){this.computeOpacity()},shaka.ui.Controls.prototype.onControlsKeyDown_=function(sn){var ln=document.activeElement,cn=ln&&ln.classList?ln.classList.contains("shaka-volume-bar"):!1,dn=ln&&ln.classList&&ln.classList.contains("shaka-seek-bar");if(this.controlsContainer_.contains(ln)&&this.onMouseMove_(sn),this.config_.enableKeyboardPlaybackControls)switch(ln=this.config_.keyboardSeekDistance,sn.key){case"ArrowLeft":this.seekBar_&&!cn&&0<ln&&(sn.preventDefault(),this.seek_(this.seekBar_.getValue()-ln));break;case"ArrowRight":this.seekBar_&&!cn&&0<ln&&(sn.preventDefault(),this.seek_(this.seekBar_.getValue()+ln));break;case"Home":this.seekBar_&&this.seek_(this.player_.seekRange().start);break;case"End":this.seekBar_&&this.seek_(this.player_.seekRange().end);break;case" ":dn&&this.onPlayPauseClick_()}},shaka.ui.Controls.prototype.onControlsKeyUp_=function(sn){this.pressedKeys_.delete(sn.key)},shaka.ui.Controls.prototype.onBufferingStateChange_=function(){this.enabled_&&shaka.ui.Utils.setDisplay(this.spinnerContainer_,this.player_.isBuffering())},shaka.ui.Controls.prototype.isOpaque=function(){return this.enabled_?this.controlsContainer_.getAttribute("shown")!=null||this.controlsContainer_.getAttribute("casting")!=null:!1},shaka.ui.Controls.prototype.seek_=function(sn){goog.asserts.assert(this.seekBar_,"Caller of seek_ must check for seekBar_ first!"),this.seekBar_.changeTo(sn),this.isOpaque()&&this.updateTimeAndSeekRange_()},shaka.ui.Controls.prototype.updateTimeAndSeekRange_=function(){if(this.seekBar_)if(this.seekBar_.setValue(this.video_.currentTime),this.seekBar_.update(),this.seekBar_.isShowing())for(var sn=$jscomp.makeIterator(this.menus_),ln=sn.next();!ln.done;ln=sn.next())ln.value.classList.remove("shaka-low-position");else for(sn=$jscomp.makeIterator(this.menus_),ln=sn.next();!ln.done;ln=sn.next())ln.value.classList.add("shaka-low-position");this.dispatchEvent(new shaka.util.FakeEvent("timeandseekrangeupdated"))},shaka.ui.Controls.prototype.onWindowKeyDown_=function(sn){var ln=this;this.pressedKeys_.add(sn.key);var cn=this.anySettingsMenusAreOpen();sn.key=="Tab"&&(this.controlsContainer_.classList.add("shaka-keyboard-navigation"),this.computeOpacity(),this.eventManager_.listen(window,"mousedown",function(){return ln.onMouseDown_()})),sn.key=="Escape"&&this.hideSettingsMenusTimer_.tickNow(),cn&&this.pressedKeys_.has("Tab")&&this.keepFocusInMenu_(sn)},shaka.ui.Controls.prototype.keepFocusInMenu_=function(sn){var ln=this.menus_.filter(function(pn){return!pn.classList.contains("shaka-hidden")});if(ln.length){var cn=ln[0];if(cn.childNodes.length){for(ln=cn.firstElementChild;ln&&ln.classList.contains("shaka-hidden");)ln=ln.nextElementSibling;for(cn=cn.lastElementChild;cn&&cn.classList.contains("shaka-hidden");)cn=cn.previousElementSibling;var dn=document.activeElement;this.pressedKeys_.has("Shift")?dn==ln&&(sn.preventDefault(),cn.focus()):dn==cn&&(sn.preventDefault(),ln.focus())}}},shaka.ui.Controls.prototype.onMouseDown_=function(){this.eventManager_.unlisten(window,"mousedown")},shaka.ui.Controls.createLocalization_=function(){var sn=new shaka.ui.Localization("en");return shaka.ui.Locales.addTo(sn),sn.changeLocale(navigator.languages||[]),sn},goog.exportSymbol("shaka.ui.Controls",shaka.ui.Controls),goog.exportProperty(shaka.ui.Controls.prototype,"isOpaque",shaka.ui.Controls.prototype.isOpaque),goog.exportProperty(shaka.ui.Controls.prototype,"hideAdUI",shaka.ui.Controls.prototype.hideAdUI),goog.exportProperty(shaka.ui.Controls.prototype,"showAdUI",shaka.ui.Controls.prototype.showAdUI),goog.exportProperty(shaka.ui.Controls.prototype,"toggleFullScreen",shaka.ui.Controls.prototype.toggleFullScreen),goog.exportProperty(shaka.ui.Controls.prototype,"isFullScreenEnabled",shaka.ui.Controls.prototype.isFullScreenEnabled),goog.exportProperty(shaka.ui.Controls.prototype,"isFullScreenSupported",shaka.ui.Controls.prototype.isFullScreenSupported),goog.exportProperty(shaka.ui.Controls.prototype,"hideSettingsMenus",shaka.ui.Controls.prototype.hideSettingsMenus),goog.exportProperty(shaka.ui.Controls.prototype,"anySettingsMenusAreOpen",shaka.ui.Controls.prototype.anySettingsMenusAreOpen),goog.exportProperty(shaka.ui.Controls.prototype,"setLastTouchEventTime",shaka.ui.Controls.prototype.setLastTouchEventTime),goog.exportProperty(shaka.ui.Controls.prototype,"getDisplayTime",shaka.ui.Controls.prototype.getDisplayTime),goog.exportProperty(shaka.ui.Controls.prototype,"isCastAllowed",shaka.ui.Controls.prototype.isCastAllowed),goog.exportProperty(shaka.ui.Controls.prototype,"setSeeking",shaka.ui.Controls.prototype.setSeeking),goog.exportProperty(shaka.ui.Controls.prototype,"isSeeking",shaka.ui.Controls.prototype.isSeeking),goog.exportProperty(shaka.ui.Controls.prototype,"getConfig",shaka.ui.Controls.prototype.getConfig),goog.exportProperty(shaka.ui.Controls.prototype,"getClientSideAdContainer",shaka.ui.Controls.prototype.getClientSideAdContainer),goog.exportProperty(shaka.ui.Controls.prototype,"getServerSideAdContainer",shaka.ui.Controls.prototype.getServerSideAdContainer),goog.exportProperty(shaka.ui.Controls.prototype,"getControlsContainer",shaka.ui.Controls.prototype.getControlsContainer),goog.exportProperty(shaka.ui.Controls.prototype,"getLocalPlayer",shaka.ui.Controls.prototype.getLocalPlayer),goog.exportProperty(shaka.ui.Controls.prototype,"getPlayer",shaka.ui.Controls.prototype.getPlayer),goog.exportProperty(shaka.ui.Controls.prototype,"getLocalVideo",shaka.ui.Controls.prototype.getLocalVideo),goog.exportProperty(shaka.ui.Controls.prototype,"getVideo",shaka.ui.Controls.prototype.getVideo),goog.exportProperty(shaka.ui.Controls.prototype,"getVideoContainer",shaka.ui.Controls.prototype.getVideoContainer),goog.exportProperty(shaka.ui.Controls.prototype,"getLocalization",shaka.ui.Controls.prototype.getLocalization),goog.exportProperty(shaka.ui.Controls.prototype,"getCastProxy",shaka.ui.Controls.prototype.getCastProxy),goog.exportProperty(shaka.ui.Controls.prototype,"getAd",shaka.ui.Controls.prototype.getAd),goog.exportProperty(shaka.ui.Controls.prototype,"setEnabledNativeControls",shaka.ui.Controls.prototype.setEnabledNativeControls),goog.exportProperty(shaka.ui.Controls.prototype,"setEnabledShakaControls",shaka.ui.Controls.prototype.setEnabledShakaControls),goog.exportProperty(shaka.ui.Controls.prototype,"configure",shaka.ui.Controls.prototype.configure),goog.exportProperty(shaka.ui.Controls.prototype,"loadComplete",shaka.ui.Controls.prototype.loadComplete),goog.exportProperty(shaka.ui.Controls.prototype,"allowCast",shaka.ui.Controls.prototype.allowCast),goog.exportProperty(shaka.ui.Controls,"registerSeekBar",shaka.ui.Controls.registerSeekBar),goog.exportProperty(shaka.ui.Controls,"registerElement",shaka.ui.Controls.registerElement),goog.exportProperty(shaka.ui.Controls.prototype,"destroy",shaka.ui.Controls.prototype.destroy),shaka.ui.ControlsPanel.elementNamesToFactories_=new Map,shaka.ui.ControlsPanel.seekBarFactory_=new shaka.ui.SeekBar.Factory,shaka.ui.OverflowMenu=function(sn,ln){shaka.ui.Element.call(this,sn,ln);var cn=this;this.config_=this.controls.getConfig(),this.controlsContainer_=this.controls.getControlsContainer(),this.children_=[],this.addOverflowMenuButton_(),this.addOverflowMenu_(),this.createChildren_(),this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_UPDATED,function(){cn.updateAriaLabel_()}),this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_CHANGED,function(){cn.updateAriaLabel_()}),this.eventManager.listen(this.adManager,shaka.ads.AdManager.AD_STARTED,function(){cn.ad&&cn.ad.isLinear()&&shaka.ui.Utils.setDisplay(cn.overflowMenuButton_,!1)}),this.eventManager.listen(this.adManager,shaka.ads.AdManager.AD_STOPPED,function(){shaka.ui.Utils.setDisplay(cn.overflowMenuButton_,!0)}),this.eventManager.listen(this.controls,"submenuopen",function(){shaka.ui.Utils.setDisplay(cn.overflowMenu_,!1)}),this.eventManager.listen(this.overflowMenu_,"touchstart",function(dn){cn.controls.setLastTouchEventTime(Date.now()),dn.stopPropagation()}),this.eventManager.listen(this.overflowMenuButton_,"click",function(){cn.onOverflowMenuButtonClick_()}),this.updateAriaLabel_(),this.ad&&this.ad.isLinear()&&shaka.ui.Utils.setDisplay(this.overflowMenuButton_,!1)},$jscomp.inherits(shaka.ui.OverflowMenu,shaka.ui.Element),shaka.ui.OverflowMenu.prototype.release=function(){this.controlsContainer_=null;for(var sn=$jscomp.makeIterator(this.children_),ln=sn.next();!ln.done;ln=sn.next())ln.value.release();this.children_=[],shaka.ui.Element.prototype.release.call(this)},shaka.ui.OverflowMenu.registerElement=function(sn,ln){shaka.ui.OverflowMenu.elementNamesToFactories_.set(sn,ln)},shaka.ui.OverflowMenu.prototype.addOverflowMenu_=function(){this.overflowMenu_=shaka.util.Dom.createHTMLElement("div"),this.overflowMenu_.classList.add("shaka-overflow-menu"),this.overflowMenu_.classList.add("shaka-no-propagation"),this.overflowMenu_.classList.add("shaka-show-controls-on-mouse-over"),this.overflowMenu_.classList.add("shaka-hidden"),this.controlsContainer_.appendChild(this.overflowMenu_)},shaka.ui.OverflowMenu.prototype.addOverflowMenuButton_=function(){this.overflowMenuButton_=shaka.util.Dom.createButton(),this.overflowMenuButton_.classList.add("shaka-overflow-menu-button"),this.overflowMenuButton_.classList.add("shaka-no-propagation"),this.overflowMenuButton_.classList.add("material-icons-round"),this.overflowMenuButton_.classList.add("shaka-tooltip"),this.overflowMenuButton_.textContent=shaka.ui.Enums.MaterialDesignIcons.OPEN_OVERFLOW,this.parent.appendChild(this.overflowMenuButton_)},shaka.ui.OverflowMenu.prototype.createChildren_=function(){for(var sn=$jscomp.makeIterator(this.config_.overflowMenuButtons),ln=sn.next();!ln.done;ln=sn.next())ln=ln.value,shaka.ui.OverflowMenu.elementNamesToFactories_.get(ln)?(ln=shaka.ui.OverflowMenu.elementNamesToFactories_.get(ln),goog.asserts.assert(this.controls,"Controls should not be null!"),this.children_.push(ln.create(this.overflowMenu_,this.controls))):shaka.log.alwaysWarn("Unrecognized overflow menu element requested:",ln)},shaka.ui.OverflowMenu.prototype.onOverflowMenuButtonClick_=function(){if(this.controls.anySettingsMenusAreOpen())this.controls.hideSettingsMenus();else{shaka.ui.Utils.setDisplay(this.overflowMenu_,!0),this.controls.computeOpacity();var sn=function(cn){return cn.classList.contains("shaka-hidden")==0},ln=shaka.util.Iterables;ln.some(this.overflowMenu_.childNodes,sn)&&ln.filter(this.overflowMenu_.childNodes,sn)[0].focus()}},shaka.ui.OverflowMenu.prototype.updateAriaLabel_=function(){this.overflowMenuButton_.ariaLabel=this.localization.resolve(shaka.ui.Locales.Ids.MORE_SETTINGS)},goog.exportSymbol("shaka.ui.OverflowMenu",shaka.ui.OverflowMenu),goog.exportProperty(shaka.ui.OverflowMenu,"registerElement",shaka.ui.OverflowMenu.registerElement),shaka.ui.OverflowMenu.Factory=function(){},shaka.ui.OverflowMenu.Factory.prototype.create=function(sn,ln){return new shaka.ui.OverflowMenu(sn,ln)},shaka.ui.Controls.registerElement("overflow_menu",new shaka.ui.OverflowMenu.Factory),shaka.ui.OverflowMenu.elementNamesToFactories_=new Map,shaka.ui.AirPlayButton=function(sn,ln){shaka.ui.Element.call(this,sn,ln);var cn=this;this.airplayButton_=shaka.util.Dom.createButton(),this.airplayButton_.classList.add("shaka-airplay-button"),this.airplayButton_.classList.add("shaka-tooltip"),this.airplayButton_.ariaPressed="false",this.airplayIcon_=shaka.util.Dom.createHTMLElement("i"),this.airplayIcon_.classList.add("material-icons-round"),this.airplayIcon_.textContent=shaka.ui.Enums.MaterialDesignIcons.AIRPLAY,this.airplayButton_.appendChild(this.airplayIcon_),window.WebKitPlaybackTargetAvailabilityEvent||this.airplayButton_.classList.add("shaka-hidden"),sn=shaka.util.Dom.createHTMLElement("label"),sn.classList.add("shaka-overflow-button-label"),sn.classList.add("shaka-overflow-menu-only"),this.airplayNameSpan_=shaka.util.Dom.createHTMLElement("span"),sn.appendChild(this.airplayNameSpan_),this.airplayCurrentSelectionSpan_=shaka.util.Dom.createHTMLElement("span"),this.airplayCurrentSelectionSpan_.classList.add("shaka-current-selection-span"),sn.appendChild(this.airplayCurrentSelectionSpan_),this.airplayButton_.appendChild(sn),this.parent.appendChild(this.airplayButton_),this.updateLocalizedStrings_(),this.onAirPlayStatusChange_(),this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_UPDATED,function(){cn.updateLocalizedStrings_()}),this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_CHANGED,function(){cn.updateLocalizedStrings_()}),this.eventManager.listen(this.airplayButton_,"click",function(){cn.onAirPlayClick_()}),sn=this.controls.getVideo(),goog.asserts.assert(sn!=null,"Should have a video!"),this.eventManager.listen(sn,"webkitplaybacktargetavailabilitychanged",function(dn){cn.onAirPlayAvailabilityChange_(dn)}),this.eventManager.listen(sn,"webkitcurrentplaybacktargetiswirelesschanged",function(){cn.onAirPlayStatusChange_()})},$jscomp.inherits(shaka.ui.AirPlayButton,shaka.ui.Element),shaka.ui.AirPlayButton.prototype.onAirPlayClick_=function(){var sn=this.controls.getVideo();goog.asserts.assert(sn!=null,"Should have a video!"),sn.webkitShowPlaybackTargetPicker()},shaka.ui.AirPlayButton.prototype.onAirPlayAvailabilityChange_=function(sn){sn=sn.availability=="available";var ln=this.player.getLoadMode()==shaka.Player.LoadMode.SRC_EQUALS;shaka.ui.Utils.setDisplay(this.airplayButton_,sn&&ln)},shaka.ui.AirPlayButton.prototype.onAirPlayStatusChange_=function(){var sn=this.controls.getVideo();goog.asserts.assert(sn!=null,"Should have a video!"),this.airplayButton_.ariaPressed=sn&&sn.webkitCurrentPlaybackTargetIsWireless?"true":"false"},shaka.ui.AirPlayButton.prototype.updateLocalizedStrings_=function(){var sn=shaka.ui.Locales.Ids;this.airplayButton_.ariaLabel=this.localization.resolve(sn.AIRPLAY),this.airplayNameSpan_.textContent=this.localization.resolve(sn.AIRPLAY)},goog.exportSymbol("shaka.ui.AirPlayButton",shaka.ui.AirPlayButton),shaka.ui.AirPlayButton.Factory=function(){},shaka.ui.AirPlayButton.Factory.prototype.create=function(sn,ln){return new shaka.ui.AirPlayButton(sn,ln)},shaka.ui.OverflowMenu.registerElement("airplay",new shaka.ui.AirPlayButton.Factory),shaka.ui.Controls.registerElement("airplay",new shaka.ui.AirPlayButton.Factory),shaka.ui.Overlay=function(sn,ln,cn){this.player_=sn,this.config_=this.defaultConfig_(),ln.dataset.shakaPlayerContainer="",ln.ui=this,this.isMobile()&&ln.classList.add("shaka-mobile"),this.controls_=new shaka.ui.Controls(sn,ln,cn,this.config_),this.configure({}),cn.controls||sn.setVideoContainer(ln),ln.ui=this,cn.ui=this},shaka.ui.Overlay.prototype.destroy=function(){var sn=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ln){if(ln.nextAddress==1)return sn.controls_?ln.yield(sn.controls_.destroy(),2):ln.jumpTo(2);if(ln.nextAddress!=4)return sn.controls_=null,sn.player_?ln.yield(sn.player_.destroy(),4):ln.jumpTo(4);sn.player_=null,ln.jumpToEnd()})},shaka.ui.Overlay.prototype.isMobile=function(){return shaka.util.Platform.isMobile()},shaka.ui.Overlay.prototype.getConfiguration=function(){var sn=this.defaultConfig_();return shaka.util.ConfigUtils.mergeConfigObjects(sn,this.config_,this.defaultConfig_(),{},""),sn},shaka.ui.Overlay.prototype.configure=function(sn,ln){goog.asserts.assert(typeof sn=="object"||arguments.length==2,"String configs should have values!"),arguments.length==2&&typeof sn=="string"&&(sn=shaka.util.ConfigUtils.convertToConfigObject(sn,ln)),goog.asserts.assert(typeof sn=="object","Should be an object!"),shaka.util.ConfigUtils.mergeConfigObjects(this.config_,sn,this.defaultConfig_(),{},""),this.config_.castReceiverAppId&&!this.config_.overflowMenuButtons.includes("cast")&&this.config_.overflowMenuButtons.push("cast"),goog.asserts.assert(this.player_!=null,"Should have a player!"),this.controls_.configure(this.config_),this.controls_.dispatchEvent(new shaka.util.FakeEvent("uiupdated"))},shaka.ui.Overlay.prototype.getControls=function(){return this.controls_},shaka.ui.Overlay.prototype.setEnabled=function(sn){this.controls_.setEnabledShakaControls(sn)},shaka.ui.Overlay.prototype.defaultConfig_=function(){var sn={controlPanelElements:"play_pause time_and_duration spacer mute volume fullscreen overflow_menu".split(" "),overflowMenuButtons:"captions quality language picture_in_picture cast playback_rate".split(" "),statisticsList:"width height corruptedFrames decodedFrames droppedFrames drmTimeSeconds licenseTime liveLatency loadLatency bufferingTime manifestTimeSeconds estimatedBandwidth streamBandwidth maxSegmentDuration pauseTime playTime completionPercent".split(" "),contextMenuElements:["loop","picture_in_picture","statistics"],playbackRates:[.5,.75,1,1.25,1.5,1.75,2],fastForwardRates:[2,4,8,1],rewindRates:[-1,-2,-4,-8],addSeekBar:!0,addBigPlayButton:!1,customContextMenu:!1,castReceiverAppId:"",castAndroidReceiverCompatible:!1,clearBufferOnQualityChange:!0,showUnbufferedStart:!1,seekBarColors:{base:"rgba(255, 255, 255, 0.3)",buffered:"rgba(255, 255, 255, 0.54)",played:"rgb(255, 255, 255)",adBreaks:"rgb(255, 204, 0)"},volumeBarColors:{base:"rgba(255, 255, 255, 0.54)",level:"rgb(255, 255, 255)"},trackLabelFormat:shaka.ui.Overlay.TrackLabelFormat.LANGUAGE,fadeDelay:0,doubleClickForFullscreen:!0,singleClickForPlayAndPause:!0,enableKeyboardPlaybackControls:!0,enableFullscreenOnRotation:!0,forceLandscapeOnFullscreen:!0,enableTooltips:!1,keyboardSeekDistance:5};return window.WebKitPlaybackTargetAvailabilityEvent&&sn.overflowMenuButtons.push("airplay"),this.isMobile()&&(sn.addBigPlayButton=!0,sn.controlPanelElements=sn.controlPanelElements.filter(function(ln){return ln!="play_pause"&&ln!="volume"})),sn},shaka.ui.Overlay.scanPageForShakaElements_=function(){var sn,ln,cn,dn,pn,vn,kn,Sn,wn,Pn,Nn,Ln,Fn,zn,Dn,Kn,qn,Zn,Yn,Jn,rs,ss;return $jscomp.asyncExecutePromiseGeneratorProgram(function(as){switch(as.nextAddress){case 1:if(shaka.polyfill.installAll(),!shaka.Player.isBrowserSupported())return shaka.log.error("Shaka Player does not support this browser. Please see https://tinyurl.com/y7s4j9tr for the list of supported browsers."),shaka.ui.Overlay.dispatchLoadedEvent_("shaka-ui-load-failed",shaka.ui.Overlay.FailReasonCode.NO_BROWSER_SUPPORT),as.return();if(sn=document.querySelectorAll("[data-shaka-player-container]"),ln=document.querySelectorAll("[data-shaka-player]"),cn=document.querySelectorAll("[data-shaka-player-canvas]"),!ln.length&&!sn.length){as.jumpTo(2);break}if(ln.length&&!sn.length){for(dn=$jscomp.makeIterator(ln),pn=dn.next();!pn.done;pn=dn.next())if(vn=pn.value,!vn.ui){for(goog.asserts.assert(vn.tagName.toLowerCase()=="video","Should be a video element!"),kn=document.createElement("div"),Sn=vn.parentElement,Sn.replaceChild(kn,vn),kn.appendChild(vn),wn=null,Pn=$jscomp.makeIterator(cn),Nn=Pn.next();!Nn.done;Nn=Pn.next())if(Ln=Nn.value,goog.asserts.assert(Ln.tagName.toLowerCase()=="canvas","Should be a canvas element!"),Ln.parentElement==kn){wn=Ln;break}wn||(wn=document.createElement("canvas"),wn.classList.add("shaka-canvas-container"),kn.appendChild(wn)),shaka.ui.Overlay.setupUIandAutoLoad_(kn,vn,wn)}as.jumpTo(2);break}Fn=$jscomp.makeIterator(sn),zn=Fn.next();case 4:if(zn.done){as.jumpTo(2);break}if(Dn=zn.value,Dn.ui){as.jumpTo(5);break}for(goog.asserts.assert(Dn.tagName.toLowerCase()=="div","Container should be a div!"),Kn=null,qn=$jscomp.makeIterator(ln),pn=qn.next();!pn.done;pn=qn.next())if(Zn=pn.value,goog.asserts.assert(Zn.tagName.toLowerCase()=="video","Should be a video element!"),Zn.parentElement==Dn){Kn=Zn;break}for(Kn||(Kn=document.createElement("video"),Kn.setAttribute("playsinline",""),Dn.appendChild(Kn)),Yn=null,Jn=$jscomp.makeIterator(cn),Nn=Jn.next();!Nn.done;Nn=Jn.next())if(rs=Nn.value,goog.asserts.assert(rs.tagName.toLowerCase()=="canvas","Should be a canvas element!"),rs.parentElement==Dn){Yn=rs;break}return Yn||(Yn=document.createElement("canvas"),Yn.classList.add("shaka-canvas-container"),Dn.appendChild(Yn)),as.setCatchFinallyBlocks(7),as.yield(shaka.ui.Overlay.setupUIandAutoLoad_(Dn,Kn,Yn),9);case 9:as.leaveTryBlock(5);break;case 7:return ss=as.enterCatchBlock(),shaka.log.error("Error setting up Shaka Player",ss),shaka.ui.Overlay.dispatchLoadedEvent_("shaka-ui-load-failed",shaka.ui.Overlay.FailReasonCode.PLAYER_FAILED_TO_LOAD),as.return();case 5:zn=Fn.next(),as.jumpTo(4);break;case 2:shaka.ui.Overlay.dispatchLoadedEvent_("shaka-ui-loaded"),as.jumpToEnd()}})},shaka.ui.Overlay.dispatchLoadedEvent_=function(sn,ln){var cn=null;ln!=null&&(cn={reasonCode:ln}),sn=new CustomEvent(sn,{detail:cn}),document.dispatchEvent(sn)},shaka.ui.Overlay.setupUIandAutoLoad_=function(sn,ln,cn){var dn,pn,vn,kn,Sn,wn,Pn,Nn,Ln,Fn;return $jscomp.asyncExecutePromiseGeneratorProgram(function(zn){switch(zn.nextAddress){case 1:dn=new shaka.Player(shaka.util.Dom.asHTMLMediaElement(ln)),pn=new shaka.ui.Overlay(dn,shaka.util.Dom.asHTMLElement(sn),shaka.util.Dom.asHTMLMediaElement(ln)),dn.attachCanvas(cn),vn="",kn=!1,sn.dataset&&sn.dataset.shakaPlayerCastReceiverId?(vn=sn.dataset.shakaPlayerCastReceiverId,kn=sn.dataset.shakaPlayerCastAndroidReceiverCompatible==="true"):ln.dataset&&ln.dataset.shakaPlayerCastReceiverId&&(vn=ln.dataset.shakaPlayerCastReceiverId,kn=ln.dataset.shakaPlayerCastAndroidReceiverCompatible==="true"),vn.length&&pn.configure({castReceiverAppId:vn,castAndroidReceiverCompatible:kn}),shaka.util.Dom.asHTMLMediaElement(ln).controls&&pn.getControls().setEnabledNativeControls(!0),(Sn=ln.getAttribute("src"))&&(wn=document.createElement("source"),wn.setAttribute("src",Sn),ln.appendChild(wn),ln.removeAttribute("src")),Pn=$jscomp.makeIterator(ln.querySelectorAll("source")),Nn=Pn.next();case 2:if(Nn.done){zn.jumpTo(0);break}return Ln=Nn.value,zn.setCatchFinallyBlocks(5),zn.yield(pn.getControls().getPlayer().load(Ln.getAttribute("src")),7);case 7:zn.jumpTo(0);break;case 5:Fn=zn.enterCatchBlock(),shaka.log.error("Error auto-loading asset",Fn);case 3:Nn=Pn.next(),zn.jumpTo(2)}})},goog.exportSymbol("shaka.ui.Overlay",shaka.ui.Overlay),goog.exportProperty(shaka.ui.Overlay.prototype,"setEnabled",shaka.ui.Overlay.prototype.setEnabled),goog.exportProperty(shaka.ui.Overlay.prototype,"getControls",shaka.ui.Overlay.prototype.getControls),goog.exportProperty(shaka.ui.Overlay.prototype,"configure",shaka.ui.Overlay.prototype.configure),goog.exportProperty(shaka.ui.Overlay.prototype,"getConfiguration",shaka.ui.Overlay.prototype.getConfiguration),goog.exportProperty(shaka.ui.Overlay.prototype,"isMobile",shaka.ui.Overlay.prototype.isMobile),goog.exportProperty(shaka.ui.Overlay.prototype,"destroy",shaka.ui.Overlay.prototype.destroy),shaka.ui.Overlay.TrackLabelFormat={LANGUAGE:0,ROLE:1,LANGUAGE_ROLE:2,LABEL:3},goog.exportProperty(shaka.ui.Overlay,"TrackLabelFormat",shaka.ui.Overlay.TrackLabelFormat),shaka.ui.Overlay.FailReasonCode={NO_BROWSER_SUPPORT:0,PLAYER_FAILED_TO_LOAD:1},goog.exportProperty(shaka.ui.Overlay,"FailReasonCode",shaka.ui.Overlay.FailReasonCode),document.readyState=="complete"?function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(sn){if(sn.nextAddress==1)return sn.yield(Promise.resolve(),2);shaka.ui.Overlay.scanPageForShakaElements_(),sn.jumpToEnd()})}():window.addEventListener("load",shaka.ui.Overlay.scanPageForShakaElements_),shaka.ui.LanguageUtils=function(){},shaka.ui.LanguageUtils.updateTracks=function(sn,ln,cn,dn,pn,vn,kn){var Sn=sn.find(function(Jn){return Jn.active==1}),wn=shaka.ui.Utils.getFirstDescendantWithClassName(ln,"shaka-back-to-overflow-button");shaka.util.Dom.removeAllChildren(ln),ln.appendChild(wn),wn=function(Jn){return Jn.type=="variant"?Jn.audioRoles?Jn.audioRoles.join(", "):void 0:Jn.roles.join(", ")};for(var Pn=function(Jn,rs){return Jn+": "+rs},Nn=new Map,Ln=$jscomp.makeIterator(sn),Fn=Ln.next();!Fn.done;Fn=Ln.next())Fn=Fn.value,Nn.has(Fn.language)||Nn.set(Fn.language,new Set),Nn.get(Fn.language).add(wn(Fn));for(Nn=new Set,Sn=Sn?Pn(Sn.language,wn(Sn)):"",Ln={},sn=$jscomp.makeIterator(sn),Fn=sn.next();!Fn.done;Ln={$jscomp$loop$prop$track$674$748:Ln.$jscomp$loop$prop$track$674$748},Fn=sn.next()){Ln.$jscomp$loop$prop$track$674$748=Fn.value,Fn=Ln.$jscomp$loop$prop$track$674$748.language;var zn=Ln.$jscomp$loop$prop$track$674$748.forced,Dn=vn.resolve(shaka.ui.Locales.Ids.SUBTITLE_FORCED),Kn=wn(Ln.$jscomp$loop$prop$track$674$748),qn=Pn(Fn,Kn);if(!Nn.has(qn)){Nn.add(qn);var Zn=shaka.util.Dom.createButton();Zn.addEventListener("click",function(Jn){return function(){cn(Jn.$jscomp$loop$prop$track$674$748)}}(Ln));var Yn=shaka.util.Dom.createHTMLElement("span");switch(Zn.appendChild(Yn),Yn.textContent=shaka.ui.LanguageUtils.getLanguageName(Fn,vn),kn){case shaka.ui.Overlay.TrackLabelFormat.LANGUAGE:zn&&(Yn.textContent+=" ("+Dn+")");break;case shaka.ui.Overlay.TrackLabelFormat.ROLE:Kn?Yn.textContent=Kn:(shaka.log.alwaysWarn("Track #"+Ln.$jscomp$loop$prop$track$674$748.id+" does not have a role, but the UI is configured to only show role."),Yn.textContent="?"),zn&&(Yn.textContent+=" ("+Dn+")");break;case shaka.ui.Overlay.TrackLabelFormat.LANGUAGE_ROLE:Kn&&(Yn.textContent+=": "+Kn),zn&&(Yn.textContent+=" ("+Dn+")");break;case shaka.ui.Overlay.TrackLabelFormat.LABEL:Ln.$jscomp$loop$prop$track$674$748.label?Yn.textContent=Ln.$jscomp$loop$prop$track$674$748.label:(shaka.log.alwaysWarn("Track #"+Ln.$jscomp$loop$prop$track$674$748.id+" does not have a label, but the UI is configured to only show labels."),Yn.textContent="?")}dn&&qn==Sn&&(Zn.appendChild(shaka.ui.Utils.checkmarkIcon()),Yn.classList.add("shaka-chosen-item"),Zn.ariaSelected="true",pn.textContent=Yn.textContent),ln.appendChild(Zn)}}},shaka.ui.LanguageUtils.getLanguageName=function(sn,ln){if(!sn&&!ln)return"";switch(sn){case"mul":return ln.resolve(shaka.ui.Locales.Ids.MULTIPLE_LANGUAGES);case"und":return ln.resolve(shaka.ui.Locales.Ids.UNDETERMINED_LANGUAGE);case"zxx":return ln.resolve(shaka.ui.Locales.Ids.NOT_APPLICABLE)}var cn=shaka.util.LanguageUtils.getBase(sn);return sn in mozilla.LanguageMapping?mozilla.LanguageMapping[sn].nativeName:cn in mozilla.LanguageMapping?mozilla.LanguageMapping[cn].nativeName+" ("+sn+")":ln.resolve(shaka.ui.Locales.Ids.UNRECOGNIZED_LANGUAGE)+" ("+sn+")"},shaka.ui.SettingsMenu=function(sn,ln,cn){shaka.ui.Element.call(this,sn,ln);var dn=this;this.addButton_(cn),this.addMenu_(),this.inOverflowMenu_(),this.eventManager.listen(this.button,"click",function(){dn.onButtonClick_()})},$jscomp.inherits(shaka.ui.SettingsMenu,shaka.ui.Element),shaka.ui.SettingsMenu.prototype.addButton_=function(sn){this.button=shaka.util.Dom.createButton(),this.button.classList.add("shaka-overflow-button"),this.icon=shaka.util.Dom.createHTMLElement("i"),this.icon.classList.add("material-icons-round"),this.icon.textContent=sn,this.button.appendChild(this.icon),sn=shaka.util.Dom.createHTMLElement("label"),sn.classList.add("shaka-overflow-button-label"),sn.classList.add("shaka-overflow-menu-only"),this.nameSpan=shaka.util.Dom.createHTMLElement("span"),sn.appendChild(this.nameSpan),this.currentSelection=shaka.util.Dom.createHTMLElement("span"),this.currentSelection.classList.add("shaka-current-selection-span"),sn.appendChild(this.currentSelection),this.button.appendChild(sn),this.parent.appendChild(this.button)},shaka.ui.SettingsMenu.prototype.addMenu_=function(){var sn=this;this.menu=shaka.util.Dom.createHTMLElement("div"),this.menu.classList.add("shaka-no-propagation"),this.menu.classList.add("shaka-show-controls-on-mouse-over"),this.menu.classList.add("shaka-settings-menu"),this.menu.classList.add("shaka-hidden"),this.backButton=shaka.util.Dom.createButton(),this.backButton.classList.add("shaka-back-to-overflow-button"),this.menu.appendChild(this.backButton),this.eventManager.listen(this.backButton,"click",function(){sn.controls.hideSettingsMenus()});var ln=shaka.util.Dom.createHTMLElement("i");ln.classList.add("material-icons-round"),ln.textContent=shaka.ui.Enums.MaterialDesignIcons.CLOSE,this.backButton.appendChild(ln),this.backSpan=shaka.util.Dom.createHTMLElement("span"),this.backButton.appendChild(this.backSpan),this.controls.getControlsContainer().appendChild(this.menu)},shaka.ui.SettingsMenu.prototype.inOverflowMenu_=function(){var sn=this;this.parent.classList.contains("shaka-overflow-menu")&&(this.backButton.firstChild.textContent=shaka.ui.Enums.MaterialDesignIcons.BACK,this.eventManager.listen(this.backButton,"click",function(){shaka.ui.Utils.setDisplay(sn.parent,!0);var ln=function(dn){return dn.classList.contains("shaka-hidden")==0},cn=shaka.util.Iterables;cn.some(sn.parent.childNodes,ln)&&cn.filter(sn.parent.childNodes,ln)[0].focus(),sn.controls.computeOpacity()}))},shaka.ui.SettingsMenu.prototype.onButtonClick_=function(){this.menu.classList.contains("shaka-hidden")?(this.controls.dispatchEvent(new shaka.util.FakeEvent("submenuopen")),shaka.ui.Utils.setDisplay(this.menu,!0),shaka.ui.Utils.focusOnTheChosenItem(this.menu)):shaka.ui.Utils.setDisplay(this.menu,!1)},goog.exportSymbol("shaka.ui.SettingsMenu",shaka.ui.SettingsMenu),shaka.ui.AudioLanguageSelection=function(sn,ln){shaka.ui.SettingsMenu.call(this,sn,ln,shaka.ui.Enums.MaterialDesignIcons.LANGUAGE);var cn=this;this.button.classList.add("shaka-language-button"),this.button.classList.add("shaka-tooltip-status"),this.menu.classList.add("shaka-audio-languages"),this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_UPDATED,function(){cn.updateLocalizedStrings_()}),this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_CHANGED,function(){cn.updateLocalizedStrings_()}),this.eventManager.listen(this.player,"trackschanged",function(){cn.onTracksChanged_()}),this.eventManager.listen(this.player,"variantchanged",function(){cn.updateAudioLanguages_()}),this.updateLocalizedStrings_(),this.updateAudioLanguages_()},$jscomp.inherits(shaka.ui.AudioLanguageSelection,shaka.ui.SettingsMenu),shaka.ui.AudioLanguageSelection.prototype.updateAudioLanguages_=function(){var sn=this,ln=this.player.getVariantTracks();shaka.ui.LanguageUtils.updateTracks(ln,this.menu,function(cn){return sn.onAudioTrackSelected_(cn)},!0,this.currentSelection,this.localization,this.controls.getConfig().trackLabelFormat),shaka.ui.Utils.focusOnTheChosenItem(this.menu),this.controls.dispatchEvent(new shaka.util.FakeEvent("languageselectionupdated")),this.button.setAttribute("shaka-status",this.currentSelection.innerText)},shaka.ui.AudioLanguageSelection.prototype.onTracksChanged_=function(){var sn=0<this.player.getVariantTracks().length;shaka.ui.Utils.setDisplay(this.button,sn),this.updateAudioLanguages_()},shaka.ui.AudioLanguageSelection.prototype.onAudioTrackSelected_=function(sn){this.player.selectAudioLanguage(sn.language,sn.roles[0])},shaka.ui.AudioLanguageSelection.prototype.updateLocalizedStrings_=function(){var sn=shaka.ui.Locales.Ids;this.backButton.ariaLabel=this.localization.resolve(sn.BACK),this.button.ariaLabel=this.localization.resolve(sn.LANGUAGE),this.nameSpan.textContent=this.localization.resolve(sn.LANGUAGE),this.backSpan.textContent=this.localization.resolve(sn.LANGUAGE)},goog.exportSymbol("shaka.ui.AudioLanguageSelection",shaka.ui.AudioLanguageSelection),shaka.ui.AudioLanguageSelection.Factory=function(){},shaka.ui.AudioLanguageSelection.Factory.prototype.create=function(sn,ln){return new shaka.ui.AudioLanguageSelection(sn,ln)},shaka.ui.OverflowMenu.registerElement("language",new shaka.ui.AudioLanguageSelection.Factory),shaka.ui.Controls.registerElement("language",new shaka.ui.AudioLanguageSelection.Factory),shaka.ui.CastButton=function(sn,ln){shaka.ui.Element.call(this,sn,ln);var cn=this;this.castProxy_=this.controls.getCastProxy(),this.castButton_=shaka.util.Dom.createButton(),this.castButton_.classList.add("shaka-cast-button"),this.castButton_.classList.add("shaka-tooltip"),this.castButton_.ariaPressed="false",this.castIcon_=shaka.util.Dom.createHTMLElement("i"),this.castIcon_.classList.add("material-icons-round"),this.castIcon_.textContent=shaka.ui.Enums.MaterialDesignIcons.CAST,this.castButton_.appendChild(this.castIcon_),sn=shaka.util.Dom.createHTMLElement("label"),sn.classList.add("shaka-overflow-button-label"),sn.classList.add("shaka-overflow-menu-only"),this.castNameSpan_=shaka.util.Dom.createHTMLElement("span"),sn.appendChild(this.castNameSpan_),this.castCurrentSelectionSpan_=shaka.util.Dom.createHTMLElement("span"),this.castCurrentSelectionSpan_.classList.add("shaka-current-selection-span"),sn.appendChild(this.castCurrentSelectionSpan_),this.castButton_.appendChild(sn),this.parent.appendChild(this.castButton_),this.updateLocalizedStrings_(),this.onCastStatusChange_(),this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_UPDATED,function(){cn.updateLocalizedStrings_()}),this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_CHANGED,function(){cn.updateLocalizedStrings_()}),this.eventManager.listen(this.castButton_,"click",function(){cn.onCastClick_()}),this.eventManager.listen(this.controls,"caststatuschanged",function(){cn.onCastStatusChange_()})},$jscomp.inherits(shaka.ui.CastButton,shaka.ui.Element),shaka.ui.CastButton.prototype.onCastClick_=function(){var sn=this,ln;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cn){if(cn.nextAddress==1)return sn.castProxy_.isCasting()?(sn.castProxy_.suggestDisconnect(),cn.jumpTo(0)):(cn.setCatchFinallyBlocks(3),sn.castButton_.disabled=!0,cn.yield(sn.castProxy_.cast(),5));if(cn.nextAddress!=3)return sn.castButton_.disabled=!1,cn.leaveTryBlock(0);ln=cn.enterCatchBlock(),sn.castButton_.disabled=!1,ln.code!=shaka.util.Error.Code.CAST_CANCELED_BY_USER&&sn.controls.dispatchEvent(new shaka.util.FakeEvent("error",new Map().set("detail",ln))),cn.jumpToEnd()})},shaka.ui.CastButton.prototype.onCastStatusChange_=function(){var sn=this.castProxy_.canCast()&&this.controls.isCastAllowed(),ln=this.castProxy_.isCasting(),cn=shaka.ui.Enums.MaterialDesignIcons;shaka.ui.Utils.setDisplay(this.castButton_,sn),this.castIcon_.textContent=ln?cn.EXIT_CAST:cn.CAST,sn&&(this.castButton_.ariaPressed=ln?"true":"false"),this.setCurrentCastSelection_()},shaka.ui.CastButton.prototype.setCurrentCastSelection_=function(){this.castProxy_.isCasting()?this.castCurrentSelectionSpan_.textContent=this.castProxy_.receiverName():this.castCurrentSelectionSpan_.textContent=this.localization.resolve(shaka.ui.Locales.Ids.OFF)},shaka.ui.CastButton.prototype.updateLocalizedStrings_=function(){var sn=shaka.ui.Locales.Ids;this.castButton_.ariaLabel=this.localization.resolve(sn.CAST),this.castNameSpan_.textContent=this.localization.resolve(sn.CAST),this.setCurrentCastSelection_()},goog.exportSymbol("shaka.ui.CastButton",shaka.ui.CastButton),shaka.ui.CastButton.Factory=function(){},shaka.ui.CastButton.Factory.prototype.create=function(sn,ln){return new shaka.ui.CastButton(sn,ln)},shaka.ui.OverflowMenu.registerElement("cast",new shaka.ui.CastButton.Factory),shaka.ui.Controls.registerElement("cast",new shaka.ui.CastButton.Factory),shaka.ui.FastForwardButton=function(sn,ln){shaka.ui.Element.call(this,sn,ln);var cn=this;this.button_=shaka.util.Dom.createButton(),this.button_.classList.add("material-icons-round"),this.button_.classList.add("shaka-fast-forward-button"),this.button_.classList.add("shaka-tooltip-status"),this.button_.setAttribute("shaka-status","1x"),this.button_.textContent=shaka.ui.Enums.MaterialDesignIcons.FAST_FORWARD,this.parent.appendChild(this.button_),this.updateAriaLabel_(),this.fastForwardRates_=this.controls.getConfig().fastForwardRates,this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_UPDATED,function(){cn.updateAriaLabel_()}),this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_CHANGED,function(){cn.updateAriaLabel_()}),this.eventManager.listen(this.button_,"click",function(){cn.fastForward_()})},$jscomp.inherits(shaka.ui.FastForwardButton,shaka.ui.Element),shaka.ui.FastForwardButton.prototype.updateAriaLabel_=function(){this.button_.ariaLabel=this.localization.resolve(shaka.ui.Locales.Ids.FAST_FORWARD)},shaka.ui.FastForwardButton.prototype.fastForward_=function(){if(this.video.duration){var sn=this.player.getPlaybackRate();sn=this.fastForwardRates_.indexOf(sn)+1,sn=sn!=this.fastForwardRates_.length?this.fastForwardRates_[sn]:this.fastForwardRates_[0],this.player.trickPlay(sn),this.button_.setAttribute("shaka-status",sn+"x")}},goog.exportSymbol("shaka.ui.FastForwardButton",shaka.ui.FastForwardButton),shaka.ui.FastForwardButton.Factory=function(){},shaka.ui.FastForwardButton.Factory.prototype.create=function(sn,ln){return new shaka.ui.FastForwardButton(sn,ln)},shaka.ui.Controls.registerElement("fast_forward",new shaka.ui.FastForwardButton.Factory),shaka.ui.FullscreenButton=function(sn,ln){shaka.ui.Element.call(this,sn,ln);var cn=this;this.localVideo_=this.controls.getLocalVideo(),this.button_=shaka.util.Dom.createButton(),this.button_.classList.add("shaka-fullscreen-button"),this.button_.classList.add("material-icons-round"),this.button_.classList.add("shaka-tooltip"),this.checkSupport_(),this.button_.textContent=shaka.ui.Enums.MaterialDesignIcons.FULLSCREEN,this.parent.appendChild(this.button_),this.updateAriaLabel_(),this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_UPDATED,function(){cn.updateAriaLabel_()}),this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_CHANGED,function(){cn.updateAriaLabel_()}),this.eventManager.listen(this.button_,"click",function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(dn){return dn.yield(cn.controls.toggleFullScreen(),0)})}),this.eventManager.listen(document,"fullscreenchange",function(){cn.updateIcon_(),cn.updateAriaLabel_()}),this.eventManager.listen(this.localVideo_,"loadedmetadata",function(){cn.checkSupport_()}),this.eventManager.listen(this.localVideo_,"loadeddata",function(){cn.checkSupport_()})},$jscomp.inherits(shaka.ui.FullscreenButton,shaka.ui.Element),shaka.ui.FullscreenButton.prototype.checkSupport_=function(){this.controls.isFullScreenSupported()?this.button_.classList.remove("shaka-hidden"):this.button_.classList.add("shaka-hidden")},shaka.ui.FullscreenButton.prototype.updateAriaLabel_=function(){var sn=shaka.ui.Locales.Ids;sn=this.controls.isFullScreenEnabled()?sn.EXIT_FULL_SCREEN:sn.FULL_SCREEN,this.button_.ariaLabel=this.localization.resolve(sn)},shaka.ui.FullscreenButton.prototype.updateIcon_=function(){this.button_.textContent=this.controls.isFullScreenEnabled()?shaka.ui.Enums.MaterialDesignIcons.EXIT_FULLSCREEN:shaka.ui.Enums.MaterialDesignIcons.FULLSCREEN},goog.exportSymbol("shaka.ui.FullscreenButton",shaka.ui.FullscreenButton),shaka.ui.FullscreenButton.Factory=function(){},shaka.ui.FullscreenButton.Factory.prototype.create=function(sn,ln){return new shaka.ui.FullscreenButton(sn,ln)},shaka.ui.Controls.registerElement("fullscreen",new shaka.ui.FullscreenButton.Factory),shaka.ui.LoopButton=function(sn,ln){shaka.ui.Element.call(this,sn,ln);var cn=this;sn=shaka.ui.Locales.Ids,this.button_=shaka.util.Dom.createButton(),this.button_.classList.add("shaka-loop-button"),this.button_.classList.add("shaka-tooltip"),this.icon_=shaka.util.Dom.createHTMLElement("i"),this.icon_.classList.add("material-icons-round"),this.icon_.textContent=shaka.ui.Enums.MaterialDesignIcons.LOOP,this.button_.appendChild(this.icon_),ln=shaka.util.Dom.createHTMLElement("label"),ln.classList.add("shaka-overflow-button-label"),ln.classList.add("shaka-overflow-menu-only"),this.nameSpan_=shaka.util.Dom.createHTMLElement("span"),this.nameSpan_.textContent=this.localization.resolve(sn.LOOP),ln.appendChild(this.nameSpan_),this.currentState_=shaka.util.Dom.createHTMLElement("span"),this.currentState_.classList.add("shaka-current-selection-span"),ln.appendChild(this.currentState_),this.button_.appendChild(ln),this.updateLocalizedStrings_(),this.parent.appendChild(this.button_),this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_UPDATED,function(){cn.updateLocalizedStrings_()}),this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_CHANGED,function(){cn.updateLocalizedStrings_()}),this.eventManager.listen(this.button_,"click",function(){cn.onClick_()}),this.loopEnabled_=this.video.loop,this.timer_=new shaka.util.Timer(function(){cn.onTimerTick_()}),this.timer_.tickEvery(1)},$jscomp.inherits(shaka.ui.LoopButton,shaka.ui.Element),shaka.ui.LoopButton.prototype.release=function(){this.timer_.stop(),this.timer_=null,shaka.ui.Element.prototype.release.call(this)},shaka.ui.LoopButton.prototype.onClick_=function(){this.video.loop=!this.video.loop,this.timer_.tickNow(),this.timer_.tickEvery(1)},shaka.ui.LoopButton.prototype.onTimerTick_=function(){this.loopEnabled_!=this.video.loop&&(this.updateLocalizedStrings_(),this.loopEnabled_=this.video.loop)},shaka.ui.LoopButton.prototype.updateLocalizedStrings_=function(){var sn=shaka.ui.Locales.Ids,ln=shaka.ui.Enums.MaterialDesignIcons;this.nameSpan_.textContent=this.localization.resolve(sn.LOOP),this.currentState_.textContent=this.localization.resolve(this.video.loop?sn.ON:sn.OFF),this.icon_.textContent=this.video.loop?ln.UNLOOP:ln.LOOP,this.button_.ariaLabel=this.localization.resolve(this.video.loop?sn.EXIT_LOOP_MODE:sn.ENTER_LOOP_MODE)},goog.exportSymbol("shaka.ui.LoopButton",shaka.ui.LoopButton),shaka.ui.LoopButton.Factory=function(){},shaka.ui.LoopButton.Factory.prototype.create=function(sn,ln){return new shaka.ui.LoopButton(sn,ln)},shaka.ui.OverflowMenu.registerElement("loop",new shaka.ui.LoopButton.Factory),shaka.ui.Controls.registerElement("loop",new shaka.ui.LoopButton.Factory),shaka.ui.ContextMenu.registerElement("loop",new shaka.ui.LoopButton.Factory),shaka.ui.MuteButton=function(sn,ln){shaka.ui.Element.call(this,sn,ln);var cn=this;this.button_=shaka.util.Dom.createButton(),this.button_.classList.add("shaka-mute-button"),this.button_.classList.add("material-icons-round"),this.button_.classList.add("shaka-tooltip"),this.parent.appendChild(this.button_),this.updateAriaLabel_(),this.updateIcon_(),this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_UPDATED,function(){cn.updateAriaLabel_()}),this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_CHANGED,function(){cn.updateAriaLabel_()}),this.eventManager.listen(this.button_,"click",function(){cn.ad&&cn.ad.isLinear()?cn.ad.setMuted(!cn.ad.isMuted()):cn.video.muted=!cn.video.muted}),this.eventManager.listen(this.video,"volumechange",function(){cn.updateAriaLabel_(),cn.updateIcon_()}),this.eventManager.listen(this.adManager,shaka.ads.AdManager.AD_VOLUME_CHANGED,function(){cn.updateAriaLabel_(),cn.updateIcon_()}),this.eventManager.listen(this.adManager,shaka.ads.AdManager.AD_MUTED,function(){cn.updateAriaLabel_(),cn.updateIcon_()}),this.eventManager.listen(this.adManager,shaka.ads.AdManager.AD_STOPPED,function(){cn.ad=null,cn.updateAriaLabel_(),cn.updateIcon_()})},$jscomp.inherits(shaka.ui.MuteButton,shaka.ui.Element),shaka.ui.MuteButton.prototype.updateAriaLabel_=function(){var sn=shaka.ui.Locales.Ids;sn=this.ad?this.ad.isMuted()?sn.UNMUTE:sn.MUTE:this.video.muted?sn.UNMUTE:sn.MUTE,this.button_.ariaLabel=this.localization.resolve(sn)},shaka.ui.MuteButton.prototype.updateIcon_=function(){var sn=shaka.ui.Enums.MaterialDesignIcons;sn=this.ad?this.ad.isMuted()?sn.UNMUTE:sn.MUTE:this.video.muted?sn.UNMUTE:sn.MUTE,this.button_.textContent=sn},goog.exportSymbol("shaka.ui.MuteButton",shaka.ui.MuteButton),shaka.ui.MuteButton.Factory=function(){},shaka.ui.MuteButton.Factory.prototype.create=function(sn,ln){return new shaka.ui.MuteButton(sn,ln)},shaka.ui.Controls.registerElement("mute",new shaka.ui.MuteButton.Factory),shaka.ui.PipButton=function(sn,ln){shaka.ui.Element.call(this,sn,ln);var cn=this;this.localVideo_=this.controls.getLocalVideo(),sn=shaka.ui.Locales.Ids,this.pipButton_=shaka.util.Dom.createButton(),this.pipButton_.classList.add("shaka-pip-button"),this.pipButton_.classList.add("shaka-tooltip"),this.pipIcon_=shaka.util.Dom.createHTMLElement("i"),this.pipIcon_.classList.add("material-icons-round"),this.pipIcon_.textContent=shaka.ui.Enums.MaterialDesignIcons.PIP,this.pipButton_.appendChild(this.pipIcon_),ln=shaka.util.Dom.createHTMLElement("label"),ln.classList.add("shaka-overflow-button-label"),ln.classList.add("shaka-overflow-menu-only"),this.pipNameSpan_=shaka.util.Dom.createHTMLElement("span"),this.pipNameSpan_.textContent=this.localization.resolve(sn.PICTURE_IN_PICTURE),ln.appendChild(this.pipNameSpan_),this.currentPipState_=shaka.util.Dom.createHTMLElement("span"),this.currentPipState_.classList.add("shaka-current-selection-span"),ln.appendChild(this.currentPipState_),this.pipButton_.appendChild(ln),this.updateLocalizedStrings_(),this.parent.appendChild(this.pipButton_),this.isPipAllowed_()||shaka.ui.Utils.setDisplay(this.pipButton_,!1),this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_UPDATED,function(){cn.updateLocalizedStrings_()}),this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_CHANGED,function(){cn.updateLocalizedStrings_()}),this.eventManager.listen(this.pipButton_,"click",function(){cn.onPipClick_()}),this.eventManager.listen(this.localVideo_,"enterpictureinpicture",function(){cn.onEnterPictureInPicture_()}),this.eventManager.listen(this.localVideo_,"leavepictureinpicture",function(){cn.onLeavePictureInPicture_()}),this.eventManager.listen(this.controls,"caststatuschanged",function(dn){cn.onCastStatusChange_(dn)}),this.eventManager.listen(this.player,"trackschanged",function(){cn.onTracksChanged_()})},$jscomp.inherits(shaka.ui.PipButton,shaka.ui.Element),shaka.ui.PipButton.prototype.isPipAllowed_=function(){return document.pictureInPictureEnabled&&!this.video.disablePictureInPicture},shaka.ui.PipButton.prototype.onPipClick_=function(){var sn=this,ln;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cn){if(cn.nextAddress==1)return cn.setCatchFinallyBlocks(2),document.pictureInPictureElement?cn.yield(document.exitPictureInPicture(),5):(document.fullscreenElement&&document.exitFullscreen(),cn.yield(sn.video.requestPictureInPicture(),5));if(cn.nextAddress!=2)return cn.leaveTryBlock(0);ln=cn.enterCatchBlock(),sn.controls.dispatchEvent(new shaka.util.FakeEvent("error",new Map().set("detail",ln))),cn.jumpToEnd()})},shaka.ui.PipButton.prototype.onEnterPictureInPicture_=function(){var sn=shaka.ui.Locales.Ids;this.pipIcon_.textContent=shaka.ui.Enums.MaterialDesignIcons.EXIT_PIP,this.pipButton_.ariaLabel=this.localization.resolve(sn.EXIT_PICTURE_IN_PICTURE),this.currentPipState_.textContent=this.localization.resolve(sn.ON)},shaka.ui.PipButton.prototype.onLeavePictureInPicture_=function(){var sn=shaka.ui.Locales.Ids;this.pipIcon_.textContent=shaka.ui.Enums.MaterialDesignIcons.PIP,this.pipButton_.ariaLabel=this.localization.resolve(sn.ENTER_PICTURE_IN_PICTURE),this.currentPipState_.textContent=this.localization.resolve(sn.OFF)},shaka.ui.PipButton.prototype.updateLocalizedStrings_=function(){var sn=shaka.ui.Locales.Ids;this.pipNameSpan_.textContent=this.localization.resolve(sn.PICTURE_IN_PICTURE),this.pipButton_.ariaLabel=this.localization.resolve(document.pictureInPictureElement?sn.EXIT_PICTURE_IN_PICTURE:sn.ENTER_PICTURE_IN_PICTURE),this.currentPipState_.textContent=this.localization.resolve(document.pictureInPictureElement?sn.ON:sn.OFF)},shaka.ui.PipButton.prototype.onCastStatusChange_=function(sn){sn.newStatus?this.isPipAllowed_()&&shaka.ui.Utils.setDisplay(this.pipButton_,!1):this.isPipAllowed_()&&shaka.ui.Utils.setDisplay(this.pipButton_,!0)},shaka.ui.PipButton.prototype.onTracksChanged_=function(){var sn=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(ln){return sn.isPipAllowed_()?!sn.player||!sn.player.isAudioOnly()?(shaka.ui.Utils.setDisplay(sn.pipButton_,!0),ln.jumpTo(0)):(shaka.ui.Utils.setDisplay(sn.pipButton_,!1),document.pictureInPictureElement?ln.yield(document.exitPictureInPicture(),0):ln.jumpTo(0)):(shaka.ui.Utils.setDisplay(sn.pipButton_,!1),ln.jumpTo(0))})},goog.exportSymbol("shaka.ui.PipButton",shaka.ui.PipButton),shaka.ui.PipButton.Factory=function(){},shaka.ui.PipButton.Factory.prototype.create=function(sn,ln){return new shaka.ui.PipButton(sn,ln)},shaka.ui.OverflowMenu.registerElement("picture_in_picture",new shaka.ui.PipButton.Factory),shaka.ui.Controls.registerElement("picture_in_picture",new shaka.ui.PipButton.Factory),shaka.ui.ContextMenu.registerElement("picture_in_picture",new shaka.ui.PipButton.Factory),shaka.ui.PlaybackRateSelection=function(sn,ln){shaka.ui.SettingsMenu.call(this,sn,ln,shaka.ui.Enums.MaterialDesignIcons.PLAYBACK_RATE);var cn=this;this.button.classList.add("shaka-playbackrate-button"),this.menu.classList.add("shaka-playback-rates"),this.button.classList.add("shaka-tooltip-status"),this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_UPDATED,function(){cn.updateLocalizedStrings_()}),this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_CHANGED,function(){cn.updateLocalizedStrings_()}),this.eventManager.listen(this.player,"ratechange",function(){cn.updatePlaybackRateSelection_(cn.player.getPlaybackRate())}),this.playbackRates_=new Map(this.controls.getConfig().playbackRates.map(function(dn){return[dn+"x",dn]})),this.updateLocalizedStrings_(),this.addPlaybackRates_(),this.updatePlaybackRateSelection_(this.player.getPlaybackRate())},$jscomp.inherits(shaka.ui.PlaybackRateSelection,shaka.ui.SettingsMenu),shaka.ui.PlaybackRateSelection.prototype.updateLocalizedStrings_=function(){var sn=shaka.ui.Locales.Ids;this.backButton.ariaLabel=this.localization.resolve(sn.BACK),this.button.ariaLabel=this.localization.resolve(sn.PLAYBACK_RATE),this.nameSpan.textContent=this.localization.resolve(sn.PLAYBACK_RATE),this.backSpan.textContent=this.localization.resolve(sn.PLAYBACK_RATE)},shaka.ui.PlaybackRateSelection.prototype.updatePlaybackRateSelection_=function(sn){var ln=this,cn=shaka.ui.Utils.getDescendantIfExists(this.menu,"material-icons-round shaka-chosen-item");if(cn){var dn=cn.parentElement;dn.removeAttribute("aria-selected"),dn.getElementsByTagName("span")[0].classList.remove("shaka-chosen-item"),dn.removeChild(cn)}(cn=Array.from(this.menu.querySelectorAll("span")).find(function(pn){return ln.playbackRates_.get(pn.textContent)==sn}))&&(dn=cn.parentElement,dn.appendChild(shaka.ui.Utils.checkmarkIcon()),dn.ariaSelected="true",cn.classList.add("shaka-chosen-item")),this.currentSelection.textContent=sn+"x",this.button.setAttribute("shaka-status",sn+"x")},shaka.ui.PlaybackRateSelection.prototype.addPlaybackRates_=function(){for(var sn=this,ln={},cn=$jscomp.makeIterator(this.playbackRates_.keys()),dn=cn.next();!dn.done;ln={$jscomp$loop$prop$rateStr$750:ln.$jscomp$loop$prop$rateStr$750},dn=cn.next()){ln.$jscomp$loop$prop$rateStr$750=dn.value,dn=shaka.util.Dom.createButton();var pn=shaka.util.Dom.createHTMLElement("span");pn.textContent=ln.$jscomp$loop$prop$rateStr$750,dn.appendChild(pn),this.eventManager.listen(dn,"click",function(vn){return function(){sn.video.playbackRate=sn.playbackRates_.get(vn.$jscomp$loop$prop$rateStr$750),sn.video.defaultPlaybackRate=sn.playbackRates_.get(vn.$jscomp$loop$prop$rateStr$750)}}(ln)),this.menu.appendChild(dn)}shaka.ui.Utils.focusOnTheChosenItem(this.menu)},goog.exportSymbol("shaka.ui.PlaybackRateSelection",shaka.ui.PlaybackRateSelection),shaka.ui.PlaybackRateSelection.Factory=function(){},shaka.ui.PlaybackRateSelection.Factory.prototype.create=function(sn,ln){return new shaka.ui.PlaybackRateSelection(sn,ln)},shaka.ui.OverflowMenu.registerElement("playback_rate",new shaka.ui.PlaybackRateSelection.Factory),shaka.ui.Controls.registerElement("playback_rate",new shaka.ui.PlaybackRateSelection.Factory),shaka.ui.PresentationTimeTracker=function(sn,ln){shaka.ui.Element.call(this,sn,ln);var cn=this;this.currentTime_=shaka.util.Dom.createButton(),this.currentTime_.classList.add("shaka-current-time"),this.setValue_("0:00"),this.parent.appendChild(this.currentTime_),this.eventManager.listen(this.currentTime_,"click",function(){cn.player.isLive()&&(cn.video.currentTime=cn.player.seekRange().end)}),this.eventManager.listen(this.controls,"timeandseekrangeupdated",function(){cn.updateTime_()}),this.eventManager.listen(this.player,"trackschanged",function(){cn.onTracksChanged_()})},$jscomp.inherits(shaka.ui.PresentationTimeTracker,shaka.ui.Element),shaka.ui.PresentationTimeTracker.prototype.setValue_=function(sn){sn!=this.currentTime_.textContent&&(this.currentTime_.textContent=sn)},shaka.ui.PresentationTimeTracker.prototype.updateTime_=function(){var sn=this.controls.isSeeking(),ln=this.controls.getDisplayTime(),cn=this.video.duration,dn=this.player.seekRange(),pn=dn.end-dn.start,vn=shaka.ui.Utils;this.player.isLive()?(ln=Math.max(0,Math.floor(dn.end-ln)),cn=3600<=pn,1<=ln||sn?(this.setValue_("- "+vn.buildTimeString(ln,cn)),this.currentTime_.disabled=!1):(this.setValue_(this.localization.resolve(shaka.ui.Locales.Ids.LIVE)),this.currentTime_.disabled=!0)):(sn=3600<=cn,ln=vn.buildTimeString(ln,sn),cn&&(ln+=" / "+vn.buildTimeString(cn,sn)),this.setValue_(ln),this.currentTime_.disabled=!0)},shaka.ui.PresentationTimeTracker.prototype.onTracksChanged_=function(){this.player.isLive()&&(this.currentTime_.ariaLabel=this.localization.resolve(shaka.ui.Locales.Ids.SKIP_TO_LIVE))},goog.exportSymbol("shaka.ui.PresentationTimeTracker",shaka.ui.PresentationTimeTracker),shaka.ui.PresentationTimeTracker.Factory=function(){},shaka.ui.PresentationTimeTracker.Factory.prototype.create=function(sn,ln){return new shaka.ui.PresentationTimeTracker(sn,ln)},shaka.ui.Controls.registerElement("time_and_duration",new shaka.ui.PresentationTimeTracker.Factory),shaka.ui.ResolutionSelection=function(sn,ln){shaka.ui.SettingsMenu.call(this,sn,ln,shaka.ui.Enums.MaterialDesignIcons.RESOLUTION);var cn=this;this.button.classList.add("shaka-resolution-button"),this.button.classList.add("shaka-tooltip-status"),this.menu.classList.add("shaka-resolutions"),this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_UPDATED,function(){cn.updateLocalizedStrings_()}),this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_CHANGED,function(){cn.updateLocalizedStrings_()}),this.eventManager.listen(this.player,"variantchanged",function(){cn.updateResolutionSelection_()}),this.eventManager.listen(this.player,"trackschanged",function(){cn.updateResolutionSelection_()}),this.eventManager.listen(this.player,"abrstatuschanged",function(){cn.updateResolutionSelection_()}),this.updateResolutionSelection_()},$jscomp.inherits(shaka.ui.ResolutionSelection,shaka.ui.SettingsMenu),shaka.ui.ResolutionSelection.prototype.updateResolutionSelection_=function(){var sn=this,ln=this.player.getVariantTracks(),cn=ln.find(function(wn){return wn.active});cn&&(ln=ln.filter(function(wn){return wn.language==cn.language&&wn.channelsCount==cn.channelsCount})),ln=ln.filter(function(wn,Pn){return(sn.player.isAudioOnly()?ln.findIndex(function(Nn){return Nn.bandwidth==wn.bandwidth}):ln.findIndex(function(Nn){return Nn.height==wn.height}))==Pn}),this.player.isAudioOnly()?ln.sort(function(wn,Pn){return goog.asserts.assert(wn.bandwidth!=null,"Null bandwidth"),goog.asserts.assert(Pn.bandwidth!=null,"Null bandwidth"),Pn.bandwidth-wn.bandwidth}):ln.sort(function(wn,Pn){return goog.asserts.assert(wn.height!=null,"Null height"),goog.asserts.assert(Pn.height!=null,"Null height"),Pn.height-wn.height});var dn=shaka.ui.Utils.getFirstDescendantWithClassName(this.menu,"shaka-back-to-overflow-button");shaka.util.Dom.removeAllChildren(this.menu),this.menu.appendChild(dn),dn=this.player.getConfiguration().abr.enabled;for(var pn={},vn=$jscomp.makeIterator(ln),kn=vn.next();!kn.done;pn={$jscomp$loop$prop$track$752:pn.$jscomp$loop$prop$track$752},kn=vn.next()){pn.$jscomp$loop$prop$track$752=kn.value,kn=shaka.util.Dom.createButton(),kn.classList.add("explicit-resolution"),this.eventManager.listen(kn,"click",function(wn){return function(){return sn.onTrackSelected_(wn.$jscomp$loop$prop$track$752)}}(pn));var Sn=shaka.util.Dom.createHTMLElement("span");Sn.textContent=this.player.isAudioOnly()?Math.round(pn.$jscomp$loop$prop$track$752.bandwidth/1e3)+" kbits/s":pn.$jscomp$loop$prop$track$752.height+"p",kn.appendChild(Sn),dn||pn.$jscomp$loop$prop$track$752!=cn||(kn.ariaSelected="true",kn.appendChild(shaka.ui.Utils.checkmarkIcon()),Sn.classList.add("shaka-chosen-item"),this.currentSelection.textContent=Sn.textContent),this.menu.appendChild(kn)}pn=shaka.util.Dom.createButton(),pn.classList.add("shaka-enable-abr-button"),this.eventManager.listen(pn,"click",function(){sn.player.configure({abr:{enabled:!0}}),sn.updateResolutionSelection_()}),this.abrOnSpan_=shaka.util.Dom.createHTMLElement("span"),this.abrOnSpan_.classList.add("shaka-auto-span"),this.abrOnSpan_.textContent=this.localization.resolve(shaka.ui.Locales.Ids.AUTO_QUALITY),pn.appendChild(this.abrOnSpan_),dn&&(pn.ariaSelected="true",pn.appendChild(shaka.ui.Utils.checkmarkIcon()),this.abrOnSpan_.classList.add("shaka-chosen-item"),this.currentSelection.textContent=this.localization.resolve(shaka.ui.Locales.Ids.AUTO_QUALITY)),this.button.setAttribute("shaka-status",this.currentSelection.textContent),this.menu.appendChild(pn),shaka.ui.Utils.focusOnTheChosenItem(this.menu),this.controls.dispatchEvent(new shaka.util.FakeEvent("resolutionselectionupdated")),this.updateLocalizedStrings_()},shaka.ui.ResolutionSelection.prototype.onTrackSelected_=function(sn){this.player.configure({abr:{enabled:!1}});var ln=this.controls.getConfig().clearBufferOnQualityChange;this.player.selectVariantTrack(sn,ln)},shaka.ui.ResolutionSelection.prototype.updateLocalizedStrings_=function(){var sn=shaka.ui.Locales.Ids,ln=this.player.isAudioOnly()?sn.QUALITY:sn.RESOLUTION;this.button.ariaLabel=this.localization.resolve(ln),this.backButton.ariaLabel=this.localization.resolve(ln),this.backSpan.textContent=this.localization.resolve(ln),this.nameSpan.textContent=this.localization.resolve(ln),this.abrOnSpan_.textContent=this.localization.resolve(sn.AUTO_QUALITY),this.player.getConfiguration().abr.enabled&&(this.currentSelection.textContent=this.localization.resolve(shaka.ui.Locales.Ids.AUTO_QUALITY))},goog.exportSymbol("shaka.ui.ResolutionSelection",shaka.ui.ResolutionSelection),shaka.ui.ResolutionSelection.Factory=function(){},shaka.ui.ResolutionSelection.Factory.prototype.create=function(sn,ln){return new shaka.ui.ResolutionSelection(sn,ln)},shaka.ui.OverflowMenu.registerElement("quality",new shaka.ui.ResolutionSelection.Factory),shaka.ui.Controls.registerElement("quality",new shaka.ui.ResolutionSelection.Factory),shaka.ui.RewindButton=function(sn,ln){shaka.ui.Element.call(this,sn,ln);var cn=this;this.button_=shaka.util.Dom.createButton(),this.button_.classList.add("material-icons-round"),this.button_.classList.add("shaka-rewind-button"),this.button_.classList.add("shaka-tooltip-status"),this.button_.setAttribute("shaka-status",this.localization.resolve(shaka.ui.Locales.Ids.OFF)),this.button_.textContent=shaka.ui.Enums.MaterialDesignIcons.REWIND,this.parent.appendChild(this.button_),this.updateAriaLabel_(),this.rewindRates_=this.controls.getConfig().rewindRates,this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_UPDATED,function(){cn.updateAriaLabel_()}),this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_CHANGED,function(){cn.updateAriaLabel_()}),this.eventManager.listen(this.button_,"click",function(){cn.rewind_()})},$jscomp.inherits(shaka.ui.RewindButton,shaka.ui.Element),shaka.ui.RewindButton.prototype.updateAriaLabel_=function(){this.button_.ariaLabel=this.localization.resolve(shaka.ui.Locales.Ids.REWIND)},shaka.ui.RewindButton.prototype.rewind_=function(){if(this.video.duration){var sn=this.player.getPlaybackRate();sn=this.rewindRates_.indexOf(sn)+1,sn=sn!=this.rewindRates_.length?this.rewindRates_[sn]:this.rewindRates_[0],this.player.trickPlay(sn),this.button_.setAttribute("shaka-status",sn+"x")}},goog.exportSymbol("shaka.ui.RewindButton",shaka.ui.RewindButton),shaka.ui.RewindButton.Factory=function(){},shaka.ui.RewindButton.Factory.prototype.create=function(sn,ln){return new shaka.ui.RewindButton(sn,ln)},shaka.ui.Controls.registerElement("rewind",new shaka.ui.RewindButton.Factory),shaka.ui.SkipAdButton=function(sn,ln){shaka.ui.Element.call(this,sn,ln);var cn=this;this.container_=shaka.util.Dom.createHTMLElement("div"),this.container_.classList.add("shaka-skip-ad-container"),this.parent.appendChild(this.container_),this.counter_=shaka.util.Dom.createHTMLElement("div"),this.counter_.classList.add("shaka-skip-ad-counter"),shaka.ui.Utils.setDisplay(this.counter_,!1),this.container_.appendChild(this.counter_),this.button_=shaka.util.Dom.createButton(),this.button_.classList.add("shaka-skip-ad-button"),this.button_.disabled=!0,shaka.ui.Utils.setDisplay(this.button_,!1),this.button_.classList.add("shaka-no-propagation"),this.container_.appendChild(this.button_),this.updateAriaLabel_(),this.updateLocalizedStrings_(),this.timer_=new shaka.util.Timer(function(){cn.onTimerTick_()}),this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_UPDATED,function(){cn.updateAriaLabel_(),cn.updateLocalizedStrings_()}),this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_CHANGED,function(){cn.updateAriaLabel_(),cn.updateLocalizedStrings_()}),this.eventManager.listen(this.adManager,shaka.ads.AdManager.AD_STARTED,function(){cn.onAdStarted_()}),this.eventManager.listen(this.adManager,shaka.ads.AdManager.AD_SKIP_STATE_CHANGED,function(){cn.onSkipStateChanged_()}),this.eventManager.listen(this.adManager,shaka.ads.AdManager.AD_STOPPED,function(){cn.reset_()}),this.eventManager.listen(this.button_,"click",function(){cn.ad.skip()}),this.ad&&this.onAdStarted_()},$jscomp.inherits(shaka.ui.SkipAdButton,shaka.ui.Element),shaka.ui.SkipAdButton.prototype.release=function(){this.timer_.stop(),this.timer_=null,shaka.ui.Element.prototype.release.call(this)},shaka.ui.SkipAdButton.prototype.updateLocalizedStrings_=function(){this.button_.textContent=this.localization.resolve(shaka.ui.Locales.Ids.SKIP_AD)},shaka.ui.SkipAdButton.prototype.updateAriaLabel_=function(){},shaka.ui.SkipAdButton.prototype.onAdStarted_=function(){this.ad.isSkippable()&&(shaka.ui.Utils.setDisplay(this.button_,!0),shaka.ui.Utils.setDisplay(this.counter_,!0),this.counter_.textContent="",this.timer_.tickNow(),this.timer_.tickEvery(.5))},shaka.ui.SkipAdButton.prototype.onTimerTick_=function(){goog.asserts.assert(this.ad!=null,"this.ad should exist at this point");var sn=Math.round(this.ad.getTimeUntilSkippable());0<sn?this.counter_.textContent=sn:(this.timer_.stop(),shaka.ui.Utils.setDisplay(this.counter_,!1))},shaka.ui.SkipAdButton.prototype.onSkipStateChanged_=function(){this.ad.canSkipNow()&&(this.button_.disabled=!1,this.timer_.stop(),shaka.ui.Utils.setDisplay(this.counter_,!1))},shaka.ui.SkipAdButton.prototype.reset_=function(){this.timer_.stop(),this.button_.disabled=!0,shaka.ui.Utils.setDisplay(this.button_,!1),shaka.ui.Utils.setDisplay(this.counter_,!1)},goog.exportSymbol("shaka.ui.SkipAdButton",shaka.ui.SkipAdButton),shaka.ui.SmallPlayButton=function(sn,ln){shaka.ui.PlayButton.call(this,sn,ln),this.button.classList.add("shaka-small-play-button"),this.button.classList.add("material-icons-round"),this.button.classList.add("shaka-tooltip"),this.updateIcon(),this.updateAriaLabel()},$jscomp.inherits(shaka.ui.SmallPlayButton,shaka.ui.PlayButton),shaka.ui.SmallPlayButton.prototype.updateIcon=function(){var sn=shaka.ui.Enums.MaterialDesignIcons;this.button.textContent=this.video.ended?sn.REPLAY:this.isPaused()?sn.PLAY:sn.PAUSE},shaka.ui.SmallPlayButton.prototype.updateAriaLabel=function(){var sn=shaka.ui.Locales.Ids;this.video.ended?this.button.ariaLabel=this.localization.resolve(sn.REPLAY):(sn=this.isPaused()?sn.PLAY:sn.PAUSE,this.button.ariaLabel=this.localization.resolve(sn))},goog.exportSymbol("shaka.ui.SmallPlayButton",shaka.ui.SmallPlayButton),shaka.ui.SmallPlayButton.Factory=function(){},shaka.ui.SmallPlayButton.Factory.prototype.create=function(sn,ln){return new shaka.ui.SmallPlayButton(sn,ln)},shaka.ui.Controls.registerElement("play_pause",new shaka.ui.SmallPlayButton.Factory),shaka.ui.Spacer=function(sn,ln){shaka.ui.Element.call(this,sn,ln),sn=shaka.util.Dom.createHTMLElement("div"),sn.classList.add("shaka-spacer"),sn.ariaHidden="true",this.parent.appendChild(sn)},$jscomp.inherits(shaka.ui.Spacer,shaka.ui.Element),goog.exportSymbol("shaka.ui.Spacer",shaka.ui.Spacer),shaka.ui.Spacer.Factory=function(){},shaka.ui.Spacer.Factory.prototype.create=function(sn,ln){return new shaka.ui.Spacer(sn,ln)},shaka.ui.Controls.registerElement("spacer",new shaka.ui.Spacer.Factory),shaka.ui.StatisticsButton=function(sn,ln){shaka.ui.Element.call(this,sn,ln);var cn=this;this.button_=shaka.util.Dom.createButton(),this.button_.classList.add("shaka-statistics-button"),this.icon_=shaka.util.Dom.createHTMLElement("i"),this.icon_.classList.add("material-icons-round"),this.icon_.textContent=shaka.ui.Enums.MaterialDesignIcons.STATISTICS_ON,this.button_.appendChild(this.icon_),sn=shaka.util.Dom.createHTMLElement("label"),sn.classList.add("shaka-overflow-button-label"),this.nameSpan_=shaka.util.Dom.createHTMLElement("span"),sn.appendChild(this.nameSpan_),this.stateSpan_=shaka.util.Dom.createHTMLElement("span"),this.stateSpan_.classList.add("shaka-current-selection-span"),sn.appendChild(this.stateSpan_),this.button_.appendChild(sn),this.parent.appendChild(this.button_),this.container_=shaka.util.Dom.createHTMLElement("div"),this.container_.classList.add("shaka-no-propagation"),this.container_.classList.add("shaka-show-controls-on-mouse-over"),this.container_.classList.add("shaka-statistics-container"),this.container_.classList.add("shaka-hidden"),this.controls.getControlsContainer().appendChild(this.container_),this.statisticsList_=[],this.skippedStats_=["stateHistory","switchHistory"],this.currentStats_=this.player.getStats(),this.displayedElements_={},sn=function(kn){return cn.currentStats_[kn]+" (px)"},ln=function(kn){return cn.currentStats_[kn]+" (frames)"};var dn=function(kn){return cn.currentStats_[kn].toFixed(2)+" (s)"},pn=function(kn){return Math.round(cn.currentStats_[kn]/1e3)+" (kbits/s)"},vn=function(kn){return shaka.ui.Utils.buildTimeString(cn.currentStats_[kn],!1)+" (m)"};this.parseFrom_={width:sn,height:sn,completionPercent:function(kn){return cn.currentStats_[kn]+" (%)"},bufferingTime:dn,drmTimeSeconds:dn,licenseTime:dn,liveLatency:dn,loadLatency:dn,manifestTimeSeconds:dn,estimatedBandwidth:pn,streamBandwidth:pn,maxSegmentDuration:vn,pauseTime:vn,playTime:vn,corruptedFrames:ln,decodedFrames:ln,droppedFrames:ln,stallsDetected:function(kn){return cn.currentStats_[kn]+" (stalls)"},gapsJumped:function(kn){return cn.currentStats_[kn]+" (gaps)"}},this.timer_=new shaka.util.Timer(function(){cn.onTimerTick_()}),this.updateLocalizedStrings_(),this.loadContainer_(),this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_UPDATED,function(){cn.updateLocalizedStrings_()}),this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_CHANGED,function(){cn.updateLocalizedStrings_()}),this.eventManager.listen(this.button_,"click",function(){cn.onClick_(),cn.updateLocalizedStrings_()})},$jscomp.inherits(shaka.ui.StatisticsButton,shaka.ui.Element),shaka.ui.StatisticsButton.prototype.onClick_=function(){shaka.ui.Utils.setDisplay(this.parent,!1),this.container_.classList.contains("shaka-hidden")?(this.icon_.textContent=shaka.ui.Enums.MaterialDesignIcons.STATISTICS_OFF,this.timer_.tickEvery(.1),shaka.ui.Utils.setDisplay(this.container_,!0)):(this.icon_.textContent=shaka.ui.Enums.MaterialDesignIcons.STATISTICS_ON,this.timer_.stop(),shaka.ui.Utils.setDisplay(this.container_,!1))},shaka.ui.StatisticsButton.prototype.updateLocalizedStrings_=function(){var sn=shaka.ui.Locales.Ids;this.nameSpan_.textContent=this.localization.resolve(sn.STATISTICS),this.button_.ariaLabel=this.localization.resolve(sn.STATISTICS),sn=this.container_.classList.contains("shaka-hidden")?sn.OFF:sn.ON,this.stateSpan_.textContent=this.localization.resolve(sn)},shaka.ui.StatisticsButton.prototype.generateComponent_=function(sn){var ln=shaka.util.Dom.createHTMLElement("div"),cn=shaka.util.Dom.createHTMLElement("label");return cn.textContent=sn+":",ln.appendChild(cn),cn=shaka.util.Dom.createHTMLElement("span"),cn.textContent=this.parseFrom_[sn](sn),ln.appendChild(cn),this.displayedElements_[sn]=cn,ln},shaka.ui.StatisticsButton.prototype.loadContainer_=function(){for(var sn=$jscomp.makeIterator(this.controls.getConfig().statisticsList),ln=sn.next();!ln.done;ln=sn.next())ln=ln.value,ln in this.currentStats_&&!this.skippedStats_.includes(ln)?(this.container_.appendChild(this.generateComponent_(ln)),this.statisticsList_.push(ln)):shaka.log.alwaysWarn("Unrecognized statistic element:",ln)},shaka.ui.StatisticsButton.prototype.onTimerTick_=function(){this.currentStats_=this.player.getStats();for(var sn=$jscomp.makeIterator(this.statisticsList_),ln=sn.next();!ln.done;ln=sn.next())ln=ln.value,this.displayedElements_[ln].textContent=this.parseFrom_[ln](ln)},shaka.ui.StatisticsButton.prototype.release=function(){this.timer_.stop(),this.timer_=null,shaka.ui.Element.prototype.release.call(this)},goog.exportSymbol("shaka.ui.StatisticsButton",shaka.ui.StatisticsButton),shaka.ui.StatisticsButton.Factory=function(){},shaka.ui.StatisticsButton.Factory.prototype.create=function(sn,ln){return new shaka.ui.StatisticsButton(sn,ln)},shaka.ui.OverflowMenu.registerElement("statistics",new shaka.ui.StatisticsButton.Factory),shaka.ui.ContextMenu.registerElement("statistics",new shaka.ui.StatisticsButton.Factory),shaka.ui.TextSelection=function(sn,ln){shaka.ui.SettingsMenu.call(this,sn,ln,shaka.ui.Enums.MaterialDesignIcons.CLOSED_CAPTIONS);var cn=this;this.button.classList.add("shaka-caption-button"),this.button.classList.add("shaka-tooltip-status"),this.menu.classList.add("shaka-text-languages"),this.player&&this.player.isTextTrackVisible()?this.button.ariaPressed="true":this.button.ariaPressed="false",this.addOffOption_(),this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_UPDATED,function(){cn.updateLocalizedStrings_(),cn.updateTextLanguages_()}),this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_CHANGED,function(){cn.updateLocalizedStrings_(),cn.updateTextLanguages_()}),this.eventManager.listen(this.player,"texttrackvisibility",function(){cn.onCaptionStateChange_(),cn.updateTextLanguages_()}),this.eventManager.listen(this.player,"textchanged",function(){cn.updateTextLanguages_()}),this.eventManager.listen(this.player,"trackschanged",function(){cn.onTracksChanged_()}),this.onCaptionStateChange_(),this.updateLocalizedStrings_(),this.updateTextLanguages_(),this.onTracksChanged_()},$jscomp.inherits(shaka.ui.TextSelection,shaka.ui.SettingsMenu),shaka.ui.TextSelection.prototype.addOffOption_=function(){var sn=shaka.util.Dom.createButton();sn.ariaSelected="true",this.menu.appendChild(sn),sn.appendChild(shaka.ui.Utils.checkmarkIcon()),this.captionsOffSpan_=shaka.util.Dom.createHTMLElement("span"),this.captionsOffSpan_.classList.add("shaka-auto-span"),sn.appendChild(this.captionsOffSpan_)},shaka.ui.TextSelection.prototype.onCaptionStateChange_=function(){this.player.isTextTrackVisible()?(this.icon.textContent=shaka.ui.Enums.MaterialDesignIcons.CLOSED_CAPTIONS,this.button.ariaPressed="true"):(this.icon.textContent=shaka.ui.Enums.MaterialDesignIcons.CLOSED_CAPTIONS_OFF,this.button.ariaPressed="false"),this.controls.dispatchEvent(new shaka.util.FakeEvent("captionselectionupdated"))},shaka.ui.TextSelection.prototype.updateTextLanguages_=function(){var sn=this,ln=this.player.getTextTracks();shaka.ui.LanguageUtils.updateTracks(ln,this.menu,function(cn){return sn.onTextTrackSelected_(cn)},this.player.isTextTrackVisible(),this.currentSelection,this.localization,this.controls.getConfig().trackLabelFormat),ln=shaka.util.Dom.createButton(),ln.classList.add("shaka-turn-captions-off-button"),this.eventManager.listen(ln,"click",function(){sn.player.setTextTrackVisibility(!1),sn.updateTextLanguages_()}),ln.appendChild(this.captionsOffSpan_),this.menu.appendChild(ln),this.player.isTextTrackVisible()||(ln.ariaSelected="true",ln.appendChild(shaka.ui.Utils.checkmarkIcon()),this.captionsOffSpan_.classList.add("shaka-chosen-item"),this.currentSelection.textContent=this.localization.resolve(shaka.ui.Locales.Ids.OFF)),this.button.setAttribute("shaka-status",this.currentSelection.textContent),shaka.ui.Utils.focusOnTheChosenItem(this.menu),this.controls.dispatchEvent(new shaka.util.FakeEvent("captionselectionupdated"))},shaka.ui.TextSelection.prototype.onTextTrackSelected_=function(sn){var ln=this;return $jscomp.asyncExecutePromiseGeneratorProgram(function(cn){return ln.player.selectTextTrack(sn),cn.yield(ln.player.setTextTrackVisibility(!0),0)})},shaka.ui.TextSelection.prototype.updateLocalizedStrings_=function(){var sn=shaka.ui.Locales.Ids;this.button.ariaLabel=this.localization.resolve(sn.CAPTIONS),this.backButton.ariaLabel=this.localization.resolve(sn.BACK),this.nameSpan.textContent=this.localization.resolve(sn.CAPTIONS),this.backSpan.textContent=this.localization.resolve(sn.CAPTIONS),this.captionsOffSpan_.textContent=this.localization.resolve(sn.OFF)},shaka.ui.TextSelection.prototype.onTracksChanged_=function(){var sn=0<this.player.getTextTracks().length;shaka.ui.Utils.setDisplay(this.button,sn),this.updateTextLanguages_()},goog.exportSymbol("shaka.ui.TextSelection",shaka.ui.TextSelection),shaka.ui.TextSelection.Factory=function(){},shaka.ui.TextSelection.Factory.prototype.create=function(sn,ln){return new shaka.ui.TextSelection(sn,ln)},shaka.ui.OverflowMenu.registerElement("captions",new shaka.ui.TextSelection.Factory),shaka.ui.Controls.registerElement("captions",new shaka.ui.TextSelection.Factory),shaka.ui.VolumeBar=function(sn,ln){shaka.ui.RangeElement.call(this,sn,ln,["shaka-volume-bar-container"],["shaka-volume-bar"]);var cn=this;this.config_=this.controls.getConfig(),this.eventManager.listen(this.video,"volumechange",function(){return cn.onPresentationVolumeChange_()}),this.eventManager.listen(this.adManager,shaka.ads.AdManager.AD_VOLUME_CHANGED,function(){return cn.onAdVolumeChange_()}),this.eventManager.listen(this.adManager,shaka.ads.AdManager.AD_MUTED,function(){return cn.onAdVolumeChange_()}),this.eventManager.listen(this.adManager,shaka.ads.AdManager.AD_STOPPED,function(){return cn.onPresentationVolumeChange_()}),this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_UPDATED,function(){return cn.updateAriaLabel_()}),this.eventManager.listen(this.localization,shaka.ui.Localization.LOCALE_CHANGED,function(){return cn.updateAriaLabel_()}),this.onPresentationVolumeChange_(),this.updateAriaLabel_(),this.ad&&this.onChange()},$jscomp.inherits(shaka.ui.VolumeBar,shaka.ui.RangeElement),shaka.ui.VolumeBar.prototype.onChange=function(){this.ad&&this.ad.isLinear()?this.ad.setVolume(this.getValue()):(this.video.volume=this.getValue(),this.video.muted=this.video.volume==0)},shaka.ui.VolumeBar.prototype.onPresentationVolumeChange_=function(){this.video.muted?this.setValue(0):this.setValue(this.video.volume),this.updateColors_()},shaka.ui.VolumeBar.prototype.onAdVolumeChange_=function(){goog.asserts.assert(this.ad!=null,"This.ad should exist at this point!");var sn=this.ad.getVolume();this.setValue(sn),this.updateColors_()},shaka.ui.VolumeBar.prototype.updateColors_=function(){var sn=this.config_.volumeBarColors,ln=["to right"];ln.push(sn.level+100*this.getValue()+"%"),ln.push(sn.base+100*this.getValue()+"%"),ln.push(sn.base+"100%"),this.container.style.background="linear-gradient("+ln.join(",")+")"},shaka.ui.VolumeBar.prototype.updateAriaLabel_=function(){this.bar.ariaLabel=this.localization.resolve(shaka.ui.Locales.Ids.VOLUME)},goog.exportSymbol("shaka.ui.VolumeBar",shaka.ui.VolumeBar),shaka.ui.VolumeBar.Factory=function(){},shaka.ui.VolumeBar.Factory.prototype.create=function(sn,ln){return new shaka.ui.VolumeBar(sn,ln)},shaka.ui.Controls.registerElement("volume",new shaka.ui.VolumeBar.Factory)}).call(exportTo,innerGlobal,innerGlobal,void 0);for(var k in exportTo.shaka)exports[k]=exportTo.shaka[k]})()})(shakaPlayer_ui_debug);const debugShaka=getDefaultExportFromCjs(shakaPlayer_ui_debug);var dayjs_min={exports:{}};dayjs_min.exports;(function(sn,ln){(function(cn,dn){sn.exports=dn()})(commonjsGlobal$1,function(){var cn=1e3,dn=6e4,pn=36e5,vn="millisecond",kn="second",Sn="minute",wn="hour",Pn="day",Nn="week",Ln="month",Fn="quarter",zn="year",Dn="date",Kn="Invalid Date",qn=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Zn=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Yn={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Rs){var ys=["th","st","nd","rd"],_s=Rs%100;return"["+Rs+(ys[(_s-20)%10]||ys[_s]||ys[0])+"]"}},Jn=function(Rs,ys,_s){var js=String(Rs);return!js||js.length>=ys?Rs:""+Array(ys+1-js.length).join(_s)+Rs},rs={s:Jn,z:function(Rs){var ys=-Rs.utcOffset(),_s=Math.abs(ys),js=Math.floor(_s/60),bs=_s%60;return(ys<=0?"+":"-")+Jn(js,2,"0")+":"+Jn(bs,2,"0")},m:function Rs(ys,_s){if(ys.date()<_s.date())return-Rs(_s,ys);var js=12*(_s.year()-ys.year())+(_s.month()-ys.month()),bs=ys.clone().add(js,Ln),ks=_s-bs<0,xs=ys.clone().add(js+(ks?-1:1),Ln);return+(-(js+(_s-bs)/(ks?bs-xs:xs-bs))||0)},a:function(Rs){return Rs<0?Math.ceil(Rs)||0:Math.floor(Rs)},p:function(Rs){return{M:Ln,y:zn,w:Nn,d:Pn,D:Dn,h:wn,m:Sn,s:kn,ms:vn,Q:Fn}[Rs]||String(Rs||"").toLowerCase().replace(/s$/,"")},u:function(Rs){return Rs===void 0}},ss="en",as={};as[ss]=Yn;var ds=function(Rs){return Rs instanceof ms},Es=function Rs(ys,_s,js){var bs;if(!ys)return ss;if(typeof ys=="string"){var ks=ys.toLowerCase();as[ks]&&(bs=ks),_s&&(as[ks]=_s,bs=ks);var xs=ys.split("-");if(!bs&&xs.length>1)return Rs(xs[0])}else{var Ks=ys.name;as[Ks]=ys,bs=Ks}return!js&&bs&&(ss=bs),bs||!js&&ss},Ss=function(Rs,ys){if(ds(Rs))return Rs.clone();var _s=typeof ys=="object"?ys:{};return _s.date=Rs,_s.args=arguments,new ms(_s)},Qn=rs;Qn.l=Es,Qn.i=ds,Qn.w=function(Rs,ys){return Ss(Rs,{locale:ys.$L,utc:ys.$u,x:ys.$x,$offset:ys.$offset})};var ms=function(){function Rs(_s){this.$L=Es(_s.locale,null,!0),this.parse(_s)}var ys=Rs.prototype;return ys.parse=function(_s){this.$d=function(js){var bs=js.date,ks=js.utc;if(bs===null)return new Date(NaN);if(Qn.u(bs))return new Date;if(bs instanceof Date)return new Date(bs);if(typeof bs=="string"&&!/Z$/i.test(bs)){var xs=bs.match(qn);if(xs){var Ks=xs[2]-1||0,Vs=(xs[7]||"0").substring(0,3);return ks?new Date(Date.UTC(xs[1],Ks,xs[3]||1,xs[4]||0,xs[5]||0,xs[6]||0,Vs)):new Date(xs[1],Ks,xs[3]||1,xs[4]||0,xs[5]||0,xs[6]||0,Vs)}}return new Date(bs)}(_s),this.$x=_s.x||{},this.init()},ys.init=function(){var _s=this.$d;this.$y=_s.getFullYear(),this.$M=_s.getMonth(),this.$D=_s.getDate(),this.$W=_s.getDay(),this.$H=_s.getHours(),this.$m=_s.getMinutes(),this.$s=_s.getSeconds(),this.$ms=_s.getMilliseconds()},ys.$utils=function(){return Qn},ys.isValid=function(){return this.$d.toString()!==Kn},ys.isSame=function(_s,js){var bs=Ss(_s);return this.startOf(js)<=bs&&bs<=this.endOf(js)},ys.isAfter=function(_s,js){return Ss(_s)<this.startOf(js)},ys.isBefore=function(_s,js){return this.endOf(js)<Ss(_s)},ys.$g=function(_s,js,bs){return Qn.u(_s)?this[js]:this.set(bs,_s)},ys.unix=function(){return Math.floor(this.valueOf()/1e3)},ys.valueOf=function(){return this.$d.getTime()},ys.startOf=function(_s,js){var bs=this,ks=!!Qn.u(js)||js,xs=Qn.p(_s),Ks=function(Xu,Du){var Fl=Qn.w(bs.$u?Date.UTC(bs.$y,Du,Xu):new Date(bs.$y,Du,Xu),bs);return ks?Fl:Fl.endOf(Pn)},Vs=function(Xu,Du){return Qn.w(bs.toDate()[Xu].apply(bs.toDate("s"),(ks?[0,0,0,0]:[23,59,59,999]).slice(Du)),bs)},Js=this.$W,ru=this.$M,hs=this.$D,lu="set"+(this.$u?"UTC":"");switch(xs){case zn:return ks?Ks(1,0):Ks(31,11);case Ln:return ks?Ks(1,ru):Ks(0,ru+1);case Nn:var _u=this.$locale().weekStart||0,yu=(Js<_u?Js+7:Js)-_u;return Ks(ks?hs-yu:hs+(6-yu),ru);case Pn:case Dn:return Vs(lu+"Hours",0);case wn:return Vs(lu+"Minutes",1);case Sn:return Vs(lu+"Seconds",2);case kn:return Vs(lu+"Milliseconds",3);default:return this.clone()}},ys.endOf=function(_s){return this.startOf(_s,!1)},ys.$set=function(_s,js){var bs,ks=Qn.p(_s),xs="set"+(this.$u?"UTC":""),Ks=(bs={},bs[Pn]=xs+"Date",bs[Dn]=xs+"Date",bs[Ln]=xs+"Month",bs[zn]=xs+"FullYear",bs[wn]=xs+"Hours",bs[Sn]=xs+"Minutes",bs[kn]=xs+"Seconds",bs[vn]=xs+"Milliseconds",bs)[ks],Vs=ks===Pn?this.$D+(js-this.$W):js;if(ks===Ln||ks===zn){var Js=this.clone().set(Dn,1);Js.$d[Ks](Vs),Js.init(),this.$d=Js.set(Dn,Math.min(this.$D,Js.daysInMonth())).$d}else Ks&&this.$d[Ks](Vs);return this.init(),this},ys.set=function(_s,js){return this.clone().$set(_s,js)},ys.get=function(_s){return this[Qn.p(_s)]()},ys.add=function(_s,js){var bs,ks=this;_s=Number(_s);var xs=Qn.p(js),Ks=function(ru){var hs=Ss(ks);return Qn.w(hs.date(hs.date()+Math.round(ru*_s)),ks)};if(xs===Ln)return this.set(Ln,this.$M+_s);if(xs===zn)return this.set(zn,this.$y+_s);if(xs===Pn)return Ks(1);if(xs===Nn)return Ks(7);var Vs=(bs={},bs[Sn]=dn,bs[wn]=pn,bs[kn]=cn,bs)[xs]||1,Js=this.$d.getTime()+_s*Vs;return Qn.w(Js,this)},ys.subtract=function(_s,js){return this.add(-1*_s,js)},ys.format=function(_s){var js=this,bs=this.$locale();if(!this.isValid())return bs.invalidDate||Kn;var ks=_s||"YYYY-MM-DDTHH:mm:ssZ",xs=Qn.z(this),Ks=this.$H,Vs=this.$m,Js=this.$M,ru=bs.weekdays,hs=bs.months,lu=function(Du,Fl,Vp,Ys){return Du&&(Du[Fl]||Du(js,ks))||Vp[Fl].slice(0,Ys)},_u=function(Du){return Qn.s(Ks%12||12,Du,"0")},yu=bs.meridiem||function(Du,Fl,Vp){var Ys=Du<12?"AM":"PM";return Vp?Ys.toLowerCase():Ys},Xu={YY:String(this.$y).slice(-2),YYYY:this.$y,M:Js+1,MM:Qn.s(Js+1,2,"0"),MMM:lu(bs.monthsShort,Js,hs,3),MMMM:lu(hs,Js),D:this.$D,DD:Qn.s(this.$D,2,"0"),d:String(this.$W),dd:lu(bs.weekdaysMin,this.$W,ru,2),ddd:lu(bs.weekdaysShort,this.$W,ru,3),dddd:ru[this.$W],H:String(Ks),HH:Qn.s(Ks,2,"0"),h:_u(1),hh:_u(2),a:yu(Ks,Vs,!0),A:yu(Ks,Vs,!1),m:String(Vs),mm:Qn.s(Vs,2,"0"),s:String(this.$s),ss:Qn.s(this.$s,2,"0"),SSS:Qn.s(this.$ms,3,"0"),Z:xs};return ks.replace(Zn,function(Du,Fl){return Fl||Xu[Du]||xs.replace(":","")})},ys.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},ys.diff=function(_s,js,bs){var ks,xs=Qn.p(js),Ks=Ss(_s),Vs=(Ks.utcOffset()-this.utcOffset())*dn,Js=this-Ks,ru=Qn.m(this,Ks);return ru=(ks={},ks[zn]=ru/12,ks[Ln]=ru,ks[Fn]=ru/3,ks[Nn]=(Js-Vs)/6048e5,ks[Pn]=(Js-Vs)/864e5,ks[wn]=Js/pn,ks[Sn]=Js/dn,ks[kn]=Js/cn,ks)[xs]||Js,bs?ru:Qn.a(ru)},ys.daysInMonth=function(){return this.endOf(Ln).$D},ys.$locale=function(){return as[this.$L]},ys.locale=function(_s,js){if(!_s)return this.$L;var bs=this.clone(),ks=Es(_s,js,!0);return ks&&(bs.$L=ks),bs},ys.clone=function(){return Qn.w(this.$d,this)},ys.toDate=function(){return new Date(this.valueOf())},ys.toJSON=function(){return this.isValid()?this.toISOString():null},ys.toISOString=function(){return this.$d.toISOString()},ys.toString=function(){return this.$d.toUTCString()},Rs}(),Ts=ms.prototype;return Ss.prototype=Ts,[["$ms",vn],["$s",kn],["$m",Sn],["$H",wn],["$W",Pn],["$M",Ln],["$y",zn],["$D",Dn]].forEach(function(Rs){Ts[Rs[1]]=function(ys){return this.$g(ys,Rs[0],Rs[1])}}),Ss.extend=function(Rs,ys){return Rs.$i||(Rs(ys,ms,Ss),Rs.$i=!0),Ss},Ss.locale=Es,Ss.isDayjs=ds,Ss.unix=function(Rs){return Ss(1e3*Rs)},Ss.en=as[ss],Ss.Ls=as,Ss.p={},Ss})})(dayjs_min,dayjs_min.exports);var dayjs_minExports=dayjs_min.exports;const B$1=getDefaultExportFromCjs(dayjs_minExports);var duration$1={exports:{}};duration$1.exports;(function(sn,ln){(function(cn,dn){sn.exports=dn()})(commonjsGlobal$1,function(){var cn,dn,pn=1e3,vn=6e4,kn=36e5,Sn=864e5,wn=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Pn=31536e6,Nn=2592e6,Ln=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,Fn={years:Pn,months:Nn,days:Sn,hours:kn,minutes:vn,seconds:pn,milliseconds:1,weeks:6048e5},zn=function(ss){return ss instanceof rs},Dn=function(ss,as,ds){return new rs(ss,ds,as.$l)},Kn=function(ss){return dn.p(ss)+"s"},qn=function(ss){return ss<0},Zn=function(ss){return qn(ss)?Math.ceil(ss):Math.floor(ss)},Yn=function(ss){return Math.abs(ss)},Jn=function(ss,as){return ss?qn(ss)?{negative:!0,format:""+Yn(ss)+as}:{negative:!1,format:""+ss+as}:{negative:!1,format:""}},rs=function(){function ss(ds,Es,Ss){var Qn=this;if(this.$d={},this.$l=Ss,ds===void 0&&(this.$ms=0,this.parseFromMilliseconds()),Es)return Dn(ds*Fn[Kn(Es)],this);if(typeof ds=="number")return this.$ms=ds,this.parseFromMilliseconds(),this;if(typeof ds=="object")return Object.keys(ds).forEach(function(Rs){Qn.$d[Kn(Rs)]=ds[Rs]}),this.calMilliseconds(),this;if(typeof ds=="string"){var ms=ds.match(Ln);if(ms){var Ts=ms.slice(2).map(function(Rs){return Rs!=null?Number(Rs):0});return this.$d.years=Ts[0],this.$d.months=Ts[1],this.$d.weeks=Ts[2],this.$d.days=Ts[3],this.$d.hours=Ts[4],this.$d.minutes=Ts[5],this.$d.seconds=Ts[6],this.calMilliseconds(),this}}return this}var as=ss.prototype;return as.calMilliseconds=function(){var ds=this;this.$ms=Object.keys(this.$d).reduce(function(Es,Ss){return Es+(ds.$d[Ss]||0)*Fn[Ss]},0)},as.parseFromMilliseconds=function(){var ds=this.$ms;this.$d.years=Zn(ds/Pn),ds%=Pn,this.$d.months=Zn(ds/Nn),ds%=Nn,this.$d.days=Zn(ds/Sn),ds%=Sn,this.$d.hours=Zn(ds/kn),ds%=kn,this.$d.minutes=Zn(ds/vn),ds%=vn,this.$d.seconds=Zn(ds/pn),ds%=pn,this.$d.milliseconds=ds},as.toISOString=function(){var ds=Jn(this.$d.years,"Y"),Es=Jn(this.$d.months,"M"),Ss=+this.$d.days||0;this.$d.weeks&&(Ss+=7*this.$d.weeks);var Qn=Jn(Ss,"D"),ms=Jn(this.$d.hours,"H"),Ts=Jn(this.$d.minutes,"M"),Rs=this.$d.seconds||0;this.$d.milliseconds&&(Rs+=this.$d.milliseconds/1e3);var ys=Jn(Rs,"S"),_s=ds.negative||Es.negative||Qn.negative||ms.negative||Ts.negative||ys.negative,js=ms.format||Ts.format||ys.format?"T":"",bs=(_s?"-":"")+"P"+ds.format+Es.format+Qn.format+js+ms.format+Ts.format+ys.format;return bs==="P"||bs==="-P"?"P0D":bs},as.toJSON=function(){return this.toISOString()},as.format=function(ds){var Es=ds||"YYYY-MM-DDTHH:mm:ss",Ss={Y:this.$d.years,YY:dn.s(this.$d.years,2,"0"),YYYY:dn.s(this.$d.years,4,"0"),M:this.$d.months,MM:dn.s(this.$d.months,2,"0"),D:this.$d.days,DD:dn.s(this.$d.days,2,"0"),H:this.$d.hours,HH:dn.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:dn.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:dn.s(this.$d.seconds,2,"0"),SSS:dn.s(this.$d.milliseconds,3,"0")};return Es.replace(wn,function(Qn,ms){return ms||String(Ss[Qn])})},as.as=function(ds){return this.$ms/Fn[Kn(ds)]},as.get=function(ds){var Es=this.$ms,Ss=Kn(ds);return Ss==="milliseconds"?Es%=1e3:Es=Ss==="weeks"?Zn(Es/Fn[Ss]):this.$d[Ss],Es===0?0:Es},as.add=function(ds,Es,Ss){var Qn;return Qn=Es?ds*Fn[Kn(Es)]:zn(ds)?ds.$ms:Dn(ds,this).$ms,Dn(this.$ms+Qn*(Ss?-1:1),this)},as.subtract=function(ds,Es){return this.add(ds,Es,!0)},as.locale=function(ds){var Es=this.clone();return Es.$l=ds,Es},as.clone=function(){return Dn(this.$ms,this)},as.humanize=function(ds){return cn().add(this.$ms,"ms").locale(this.$l).fromNow(!ds)},as.milliseconds=function(){return this.get("milliseconds")},as.asMilliseconds=function(){return this.as("milliseconds")},as.seconds=function(){return this.get("seconds")},as.asSeconds=function(){return this.as("seconds")},as.minutes=function(){return this.get("minutes")},as.asMinutes=function(){return this.as("minutes")},as.hours=function(){return this.get("hours")},as.asHours=function(){return this.as("hours")},as.days=function(){return this.get("days")},as.asDays=function(){return this.as("days")},as.weeks=function(){return this.get("weeks")},as.asWeeks=function(){return this.as("weeks")},as.months=function(){return this.get("months")},as.asMonths=function(){return this.as("months")},as.years=function(){return this.get("years")},as.asYears=function(){return this.as("years")},ss}();return function(ss,as,ds){cn=ds,dn=ds().$utils(),ds.duration=function(Qn,ms){var Ts=ds.locale();return Dn(Qn,{$l:Ts},ms)},ds.isDuration=zn;var Es=as.prototype.add,Ss=as.prototype.subtract;as.prototype.add=function(Qn,ms){return zn(Qn)&&(Qn=Qn.asMilliseconds()),Es.bind(this)(Qn,ms)},as.prototype.subtract=function(Qn,ms){return zn(Qn)&&(Qn=Qn.asMilliseconds()),Ss.bind(this)(Qn,ms)}}})})(duration$1,duration$1.exports);var durationExports=duration$1.exports;const duration=getDefaultExportFromCjs(durationExports);var isBetween$1={exports:{}};isBetween$1.exports;(function(sn,ln){(function(cn,dn){sn.exports=dn()})(commonjsGlobal$1,function(){return function(cn,dn,pn){dn.prototype.isBetween=function(vn,kn,Sn,wn){var Pn=pn(vn),Nn=pn(kn),Ln=(wn=wn||"()")[0]==="(",Fn=wn[1]===")";return(Ln?this.isAfter(Pn,Sn):!this.isBefore(Pn,Sn))&&(Fn?this.isBefore(Nn,Sn):!this.isAfter(Nn,Sn))||(Ln?this.isBefore(Pn,Sn):!this.isAfter(Pn,Sn))&&(Fn?this.isAfter(Nn,Sn):!this.isBefore(Nn,Sn))}}})})(isBetween$1,isBetween$1.exports);var isBetweenExports=isBetween$1.exports;const isBetween=getDefaultExportFromCjs(isBetweenExports);var isSameOrBefore$1={exports:{}};isSameOrBefore$1.exports;(function(sn,ln){(function(cn,dn){sn.exports=dn()})(commonjsGlobal$1,function(){return function(cn,dn){dn.prototype.isSameOrBefore=function(pn,vn){return this.isSame(pn,vn)||this.isBefore(pn,vn)}}})})(isSameOrBefore$1,isSameOrBefore$1.exports);var isSameOrBeforeExports=isSameOrBefore$1.exports;const isSameOrBefore=getDefaultExportFromCjs(isSameOrBeforeExports);var relativeTime$1={exports:{}};relativeTime$1.exports;(function(sn,ln){(function(cn,dn){sn.exports=dn()})(commonjsGlobal$1,function(){return function(cn,dn,pn){cn=cn||{};var vn=dn.prototype,kn={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function Sn(Pn,Nn,Ln,Fn){return vn.fromToBase(Pn,Nn,Ln,Fn)}pn.en.relativeTime=kn,vn.fromToBase=function(Pn,Nn,Ln,Fn,zn){for(var Dn,Kn,qn,Zn=Ln.$locale().relativeTime||kn,Yn=cn.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],Jn=Yn.length,rs=0;rs<Jn;rs+=1){var ss=Yn[rs];ss.d&&(Dn=Fn?pn(Pn).diff(Ln,ss.d,!0):Ln.diff(Pn,ss.d,!0));var as=(cn.rounding||Math.round)(Math.abs(Dn));if(qn=Dn>0,as<=ss.r||!ss.r){as<=1&&rs>0&&(ss=Yn[rs-1]);var ds=Zn[ss.l];zn&&(as=zn(""+as)),Kn=typeof ds=="string"?ds.replace("%d",as):ds(as,Nn,ss.l,qn);break}}if(Nn)return Kn;var Es=qn?Zn.future:Zn.past;return typeof Es=="function"?Es(Kn):Es.replace("%s",Kn)},vn.to=function(Pn,Nn){return Sn(Pn,Nn,this,!0)},vn.from=function(Pn,Nn){return Sn(Pn,Nn,this)};var wn=function(Pn){return Pn.$u?pn.utc():pn()};vn.toNow=function(Pn){return this.to(wn(this),Pn)},vn.fromNow=function(Pn){return this.from(wn(this),Pn)}}})})(relativeTime$1,relativeTime$1.exports);var relativeTimeExports=relativeTime$1.exports;const relativeTime=getDefaultExportFromCjs(relativeTimeExports);var updateLocale$1={exports:{}};updateLocale$1.exports;(function(sn,ln){(function(cn,dn){sn.exports=dn()})(commonjsGlobal$1,function(){return function(cn,dn,pn){pn.updateLocale=function(vn,kn){var Sn=pn.Ls[vn];if(Sn)return(kn?Object.keys(kn):[]).forEach(function(wn){Sn[wn]=kn[wn]}),Sn}}})})(updateLocale$1,updateLocale$1.exports);var updateLocaleExports=updateLocale$1.exports;const updateLocale=getDefaultExportFromCjs(updateLocaleExports);var ko={exports:{}};ko.exports;(function(sn,ln){(function(cn,dn){sn.exports=dn(dayjs_minExports)})(commonjsGlobal$1,function(cn){function dn(kn){return kn&&typeof kn=="object"&&"default"in kn?kn:{default:kn}}var pn=dn(cn),vn={name:"ko",weekdays:"일요일_월요일_화요일_수요일_목요일_금요일_토요일".split("_"),weekdaysShort:"일_월_화_수_목_금_토".split("_"),weekdaysMin:"일_월_화_수_목_금_토".split("_"),months:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),monthsShort:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),ordinal:function(kn){return kn},formats:{LT:"A h:mm",LTS:"A h:mm:ss",L:"YYYY.MM.DD.",LL:"YYYY년 MMMM D일",LLL:"YYYY년 MMMM D일 A h:mm",LLLL:"YYYY년 MMMM D일 dddd A h:mm",l:"YYYY.MM.DD.",ll:"YYYY년 MMMM D일",lll:"YYYY년 MMMM D일 A h:mm",llll:"YYYY년 MMMM D일 dddd A h:mm"},meridiem:function(kn){return kn<12?"오전":"오후"},relativeTime:{future:"%s 후",past:"%s 전",s:"몇 초",m:"1분",mm:"%d분",h:"한 시간",hh:"%d시간",d:"하루",dd:"%d일",M:"한 달",MM:"%d달",y:"일 년",yy:"%d년"}};return pn.default.locale(vn,null,!0),vn})})(ko,ko.exports);var koExports=ko.exports;const koreanLocale=getDefaultExportFromCjs(koExports);B$1.extend(relativeTime);B$1.extend(updateLocale);B$1.extend(isBetween);B$1.extend(duration);B$1.extend(isSameOrBefore);B$1.locale("ko");const DEBUG_COOKIE_NAME="lecture.debug",isDebugMode=()=>!!api.get(DEBUG_COOKIE_NAME),setDebugMode=(sn,ln=new Date)=>{const cn=B$1(ln).add(3,"day").toDate();api.set(DEBUG_COOKIE_NAME,sn?"true":"false",{expires:cn})},initLogger=()=>{datadogLogs.init({clientToken:"pubba81abeb82534976f298f54d286f9c47",site:"datadoghq.com",service:"inflearn-lecture",env:appConfig.MODE,version:appConfig.COMMIT_HASH,trackSessionAcrossSubdomains:!0,forwardConsoleLogs:["log","info"],silentMultipleInit:!0})};function getShaka(){return api.get(DEBUG_COOKIE_NAME)==="true"?debugShaka:commonShaka}const shaka$a=getShaka(),AUTOPLAY_ELEMENT_ID="auto-play-ui",SwitchContext=reactExports.createContext({checked:!1,disabled:!0,setChecked:sn=>{}});function useSwitchContext(){const sn=reactExports.useContext(SwitchContext);if(!sn)throw new Error("SwitchContext is not provided");return sn}function SwitchProvider({children:sn,isReview:ln}){const[cn,dn]=reactExports.useState(!!(getUserSetting().autoplay&&ln));reactExports.useEffect(()=>{ln||setUserSetting({autoplay:!1})},[ln]);const pn=vn=>{ln&&(dn(vn),setUserSetting({autoplay:vn}))};return jsx(SwitchContext.Provider,{value:{checked:cn,setChecked:pn,disabled:!ln},children:sn})}const styleIcon=sn=>css$1({display:"flex",justifyContent:"center",alignItems:"center",fontSize:"16px !important",width:"16px",height:"16px",color:sn?"#1C1B1F":"#FFF"},"",""),AutoPlayUiComponent=()=>{const{checked:sn,setChecked:ln,disabled:cn}=useSwitchContext(),dn=sn?"자동재생 사용 설정":"자동재생 사용 중지";return dn?jsx(o$5,{offset:8,label:dn,position:"top",events:{hover:!0,focus:!1,touch:!0},children:jsx("span",{children:jsx(AutoPlaySwitch,{disabled:cn,checked:sn,onChange:ln})})}):jsx(AutoPlaySwitch,{disabled:cn,checked:sn,onChange:ln})},styleAutoPlaySwitchContainer={name:"1h26gm7",styles:"display:flex;align-items:center;justify-content:center;height:100%;width:60px;margin-right:8px;label{cursor:pointer;}"},AutoPlaySwitch=({disabled:sn,checked:ln,onChange:cn})=>sn?null:jsx("span",{css:styleAutoPlaySwitchContainer,children:jsx(za$1,{disabled:sn,checked:ln,onChange:dn=>cn(dn.currentTarget.checked),color:"teal",size:"md",thumbIcon:jsx("span",{css:styleIcon(ln),className:"material-icons-round",children:ln?"play_arrow":"pause"}),styles:{thumb:{border:0,boxShadow:"0px 1px 3px 0px #00000033, 0px 2px 1px 0px #0000001F, 0px 1px 1px 0px #00000024",backgroundColor:ln?"#FFF":"#979797"},track:{background:"rgba(238, 238, 238, 0.5) !important",border:0}}})});class AutoPlayUi extends shaka$a.ui.Element{constructor(cn,dn){super(cn,dn);Tl(this,"container");this.container=document.createElement("div"),this.container.id=AUTOPLAY_ELEMENT_ID,cn.appendChild(this.container)}}class AutoPlayUiFactory{create(ln,cn){return new AutoPlayUi(ln,cn)}}Tl(AutoPlayUiFactory,"uiName","autoplay");var faExpand={};(function(sn){Object.defineProperty(sn,"__esModule",{value:!0});var ln="fas",cn="expand",dn=448,pn=512,vn=[],kn="f065",Sn="M32 32C14.3 32 0 46.3 0 64v96c0 17.7 14.3 32 32 32s32-14.3 32-32V96h64c17.7 0 32-14.3 32-32s-14.3-32-32-32H32zM64 352c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7 14.3 32 32 32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H64V352zM320 32c-17.7 0-32 14.3-32 32s14.3 32 32 32h64v64c0 17.7 14.3 32 32 32s32-14.3 32-32V64c0-17.7-14.3-32-32-32H320zM448 352c0-17.7-14.3-32-32-32s-32 14.3-32 32v64H320c-17.7 0-32 14.3-32 32s14.3 32 32 32h96c17.7 0 32-14.3 32-32V352z";sn.definition={prefix:ln,iconName:cn,icon:[dn,pn,vn,kn,Sn]},sn.faExpand=sn.definition,sn.prefix=ln,sn.iconName=cn,sn.width=dn,sn.height=pn,sn.ligatures=vn,sn.unicode=kn,sn.svgPathData=Sn,sn.aliases=vn})(faExpand);var faCompress={};(function(sn){Object.defineProperty(sn,"__esModule",{value:!0});var ln="fas",cn="compress",dn=448,pn=512,vn=[],kn="f066",Sn="M160 64c0-17.7-14.3-32-32-32s-32 14.3-32 32v64H32c-17.7 0-32 14.3-32 32s14.3 32 32 32h96c17.7 0 32-14.3 32-32V64zM32 320c-17.7 0-32 14.3-32 32s14.3 32 32 32H96v64c0 17.7 14.3 32 32 32s32-14.3 32-32V352c0-17.7-14.3-32-32-32H32zM352 64c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7 14.3 32 32 32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H352V64zM320 320c-17.7 0-32 14.3-32 32v96c0 17.7 14.3 32 32 32s32-14.3 32-32V384h64c17.7 0 32-14.3 32-32s-14.3-32-32-32H320z";sn.definition={prefix:ln,iconName:cn,icon:[dn,pn,vn,kn,Sn]},sn.faCompress=sn.definition,sn.prefix=ln,sn.iconName=cn,sn.width=dn,sn.height=pn,sn.ligatures=vn,sn.unicode=kn,sn.svgPathData=Sn,sn.aliases=vn})(faCompress);function usePlayerFullscreen(){var kn;const ln=(kn=usePlayerContext().player)==null?void 0:kn.getVideoElement(),cn=()=>document.fullscreenEnabled?!0:!!(ln!=null&&ln.webkitSupportsFullscreen),dn=()=>document.fullscreenEnabled?!!document.fullscreenElement:ln!=null&&ln.SupportsFullscreen?ln==null?void 0:ln.webkitDisplayingFullscreen:!1;return{checkFullScreenSupported:cn,enterFullScreen:async()=>{if(!dn())if(document.fullscreenEnabled){document.pictureInPictureElement&&await document.exitPictureInPicture();const Sn=document.querySelector("#player-container");await(Sn==null?void 0:Sn.requestFullscreen())}else ln!=null&&ln.webkitSupportsFullscreen&&(ln==null||ln.webkitEnterFullscreen())},exitFullScreen:async()=>{var Sn;dn()&&(document.fullscreenEnabled?(screen.orientation&&((Sn=screen.orientation)!=null&&Sn.unlock)&&screen.orientation.unlock(),await document.exitFullscreen()):ln!=null&&ln.webkitSupportsFullscreen&&(ln==null||ln.webkitExitFullscreen()))}}}function PlayerControlButton({children:sn,styleWrapper:ln}){return jsx(B$7,{css:[stylePlayerControlButton,ln,"",""],children:sn})}const stylePlayerControlButton={name:"gvkl91",styles:"width:40px;height:40px;display:inline-flex;justify-content:center;align-items:center"},shaka$9=getShaka(),FULLSCREEN_ELEMENT_ID="fullscreen-button-ui";var _ref$4={name:"1oaeivz",styles:"margin-right:8px"},_ref2$2={name:"1qjo0ip",styles:":fullscreen .fullscreen--expand{display:none;}:fullscreen .fullscreen--compress{display:flex;}.fullscreen--expand{display:flex;}.fullscreen--compress{display:none;}"};function FullScreenButtonUiComponent(){const{checkFullScreenSupported:sn,enterFullScreen:ln,exitFullScreen:cn}=usePlayerFullscreen();return sn()?jsxs(PlayerControlButton,{styleWrapper:_ref$4,children:[jsx(Global$1,{styles:_ref2$2}),jsx(Dr$2,{size:40,onClick:cn,variant:"transparent",className:"fullscreen--compress",children:jsx(I$a,{size:"md",icon:faCompress.faCompress})}),jsx(Dr$2,{size:40,onClick:ln,variant:"transparent",className:"fullscreen--expand",children:jsx(I$a,{size:"md",icon:faExpand.faExpand})})]}):null}class FullscreenButtonUi extends shaka$9.ui.Element{constructor(cn,dn){super(cn,dn);Tl(this,"container");this.container=document.createElement("div"),this.container.id=FULLSCREEN_ELEMENT_ID,cn.appendChild(this.container)}}class FullscreenButtonUiFactory{create(ln,cn){return new FullscreenButtonUi(ln,cn)}}Tl(FullscreenButtonUiFactory,"uiName","custom-fullscreen");const useHiddenMenuHandler=(sn,ln)=>{reactExports.useEffect(()=>{const cn=document.querySelector(`.${sn}-hidden-handler`);if(ln){cn==null||cn.classList.remove("shaka-hidden"),console.log(cn==null?void 0:cn.classList);return}},[ln])},generateHiddenMenuHandlerEl=sn=>{const ln=document.createElement("div");return ln.classList.add("shaka-settings-menu"),ln.classList.add("shaka-hidden"),ln.classList.add(`${sn}-hidden-handler`),ln},shaka$8=getShaka(),PLAYBACKRATE_ELEMENT_ID="playback-rate-button-ui";class PlaybackRateUi extends shaka$8.ui.Element{constructor(cn,dn){super(cn,dn);Tl(this,"container");this.container=document.createElement("div"),this.container.id=PLAYBACKRATE_ELEMENT_ID,this.container.appendChild(generateHiddenMenuHandlerEl(PlaybackRateUiFactory.uiName)),cn.appendChild(this.container)}}class PlaybackRateUiFactory{create(ln,cn){return new PlaybackRateUi(ln,cn)}}Tl(PlaybackRateUiFactory,"uiName","customPlayback");const getBackground=(sn,ln,cn)=>{const pn=((sn<10?sn*100:sn)-ln)/(cn-ln)*100;return`linear-gradient(to right, #EEE ${pn}%, #EEEEEE61 ${pn}%)`},getSafeFloat=sn=>Math.round(sn*100)/100,MIN_SLIDER_INPUT=50;var _ref$3={name:"1oaeivz",styles:"margin-right:8px"},_ref2$1={name:"49kx6r",styles:'.shaka-controls-container .playback-rate-ui-overflow-menu{opacity:0;transition:opacity cubic-bezier(.4, 0, .6, 1) .6s;}.shaka-controls-container[shown="true"] .playback-rate-ui-overflow-menu{opacity:1;}'};function PlaybackRateUiComponent(){var Yn,Jn,rs;const sn=usePlayerContext(),ln=(Yn=sn==null?void 0:sn.player)==null?void 0:Yn.videoElement,cn=reactExports.useRef(null),dn=reactExports.useRef(null),pn=reactExports.useRef(null),[vn,{open:kn,close:Sn}]=useDisclosure(!1),[wn,Pn]=reactExports.useState(getUserSetting().playbackRate),Nn=reactExports.useMemo(()=>wn*100,[wn]),Ln=(rs=(Jn=sn==null?void 0:sn.player)==null?void 0:Jn.overlay)==null?void 0:rs.getControls(),zn=(useAppSelector(ss=>ss.video.maxPlaybackRate)||2)*100;useHiddenMenuHandler(PlaybackRateUiFactory.uiName,vn),reactExports.useEffect(()=>{var Es,Ss,Qn;if(!(ln!=null&&ln.current))return;Dn()===2&&getUserSetting().playbackRate>2&&(ln.current.playbackRate=1,ln.current.defaultPlaybackRate=1,Pn(1),setUserSetting({playbackRate:1}));const ss=Ln==null?void 0:Ln.getControlsContainer(),as=ss==null?void 0:ss.querySelector(".shaka-bottom-controls");if(!as||!ss)return;as.addEventListener("click",ms=>{var Rs;const Ts=ms.target;Ts.closest(".shaka-playback-rate-button")||(Rs=cn.current)!=null&&Rs.contains(Ts)||Sn()});const ds=ss.querySelector(".shaka-overflow-menu-button");ds==null||ds.addEventListener("click",()=>{Sn()}),["click","touchend"].forEach(ms=>{document.body.addEventListener(ms,Ts=>{var ys,_s;const Rs=Ts.target;(ys=cn.current)!=null&&ys.contains(Rs)||(_s=dn.current)!=null&&_s.contains(Rs)||Sn()})}),(Es=pn.current)==null||Es.addEventListener("input",ms=>{const Ts=Number(ms.currentTarget.value);Pn(Ts)}),(Qn=(Ss=sn.player)==null?void 0:Ss.player)==null||Qn.addEventListener("ratechange",()=>{var ms;Pn(((ms=ln.current)==null?void 0:ms.playbackRate)||1)})},[]);const Dn=()=>last$1((Ln==null?void 0:Ln.getConfig().playbackRates)||[2]),Kn=()=>{if(vn){Sn();return}if(!(!Ln||!(ln!=null&&ln.current))){if(kn(),Ln!=null&&Ln.anySettingsMenusAreOpen()){Ln.hideSettingsMenus(),kn();return}if(!vn){kn();return}Sn()}},qn=ss=>{if(!(ln!=null&&ln.current))return;const as=Number(ss.target.value),ds=Math.round(as)/100;ln.current.playbackRate=ds,ln.current.defaultPlaybackRate=ln.current.playbackRate,Pn(ds),setUserSetting({playbackRate:ln.current.playbackRate})},Zn=`${getSafeFloat(wn)} X`;return jsxs(PlayerControlButton,{styleWrapper:_ref$3,children:[jsx(Global$1,{styles:_ref2$1}),jsx("button",{ref:dn,onClick:Kn,className:"icon-asset shaka-playback-rate-button shaka-no-propagation material-icons-round",css:stylePlaybackRateUiButton,children:"speed"}),vn&&jsxs("div",{ref:cn,className:"shaka-no-propagation shaka-settings-menu playback-rate-ui-overflow-menu shaka-show-controls-on-mouse-over shaka-displayed",css:stylePlaybackRateOverflow,children:[jsx("div",{css:stylePlaybackRateTopContainer,className:"playback-rate__top-container",children:jsx("h2",{css:stylePlaybackRateTitle,children:"재생 속도"})}),jsx("input",{ref:pn,onChange:qn,css:styleSlider,min:MIN_SLIDER_INPUT,max:zn,value:Nn,step:"5",style:{background:getBackground(wn,MIN_SLIDER_INPUT,zn)},className:"playback-rate__slider",type:"range"}),jsx("div",{css:stylePlayBackRateDesc,children:Zn})]})]})}const stylePlayBackRateDesc={name:"s6c7z8",styles:"font-style:normal;font-weight:400;font-size:12px;line-height:14px;display:flex;align-items:center;color:rgba(238, 238, 238, 0.7);&:not(:empty){height:16px;}"},stylePlaybackRateTopContainer={name:"1vsqpmi",styles:"height:40px;display:flex;flex-direction:column;justify-content:center;align-items:center"},stylePlaybackRateTitle={name:"wbdrem",styles:"font-style:normal;font-weight:500;font-size:13px;line-height:15px;display:flex;align-items:center;color:#EEEEEE"},stylePlaybackRateUiButton={name:"9spqz8",styles:"position:relative;width:40px;display:inline-flex;align-content:center;justify-content:center;background-color:transparent;border:none;color:#eee;cursor:pointer"},stylePlaybackRateOverflow={name:"19cnvc7",styles:"display:flex;z-index:2;flex-direction:column;align-items:center;padding:8px 0;position:absolute;width:200px;height:124px;right:10px;bottom:50px;background:rgba(28, 28, 28, 0.9);box-shadow:0px 1px 9px rgba(0, 0, 0, 0.66);border-radius:2px"},styleSlider={name:"1yxwq3l",styles:"-webkit-appearance:none;-moz-appearance:none;appearance:none;margin-top:17px;margin-bottom:17px;width:100%;max-width:168px;height:6px;border-radius:10px !important;&::-webkit-slider-thumb{-webkit-appearance:none;-moz-appearance:none;cursor:pointer;appearance:none;width:20px;height:20px;border-radius:10px;background:#EEE;transform:translate(0%, -7px);transition:.2s ease-in-out;}&::-moz-range-thumb{-moz-appearance:none;cursor:pointer;appearance:none;width:20px;height:20px;border-radius:10px;border:none;background:#EEE;transform:translate(0%, 0px);transition:.2s ease-in-out;}&::-webkit-slider-thumb:hover{box-shadow:0 0 0 10px rgba(238, 238,238, 0.24);}&::-moz-range-thumb:hover{box-shadow:0 0 0 10px rgba(238, 238,238, 0.24);}&::-webkit-slider-runnable-track{-webkit-appearance:none;-moz-appearance:none;appearance:none;height:6px;background-color:#EEEEEE61;border-radius:10px !important;}&::-moz-range-track{-webkit-appearance:none;-moz-appearance:none;appearance:none;height:6px;background-color:#EEEEEE61;border-radius:10px !important;}"};var faPlay={};(function(sn){Object.defineProperty(sn,"__esModule",{value:!0});var ln="fas",cn="play",dn=384,pn=512,vn=[9654],kn="f04b",Sn="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z";sn.definition={prefix:ln,iconName:cn,icon:[dn,pn,vn,kn,Sn]},sn.faPlay=sn.definition,sn.prefix=ln,sn.iconName=cn,sn.width=dn,sn.height=pn,sn.ligatures=vn,sn.unicode=kn,sn.svgPathData=Sn,sn.aliases=vn})(faPlay);var faPause={};(function(sn){Object.defineProperty(sn,"__esModule",{value:!0});var ln="fas",cn="pause",dn=320,pn=512,vn=[9208],kn="f04c",Sn="M48 64C21.5 64 0 85.5 0 112V400c0 26.5 21.5 48 48 48H80c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48H48zm192 0c-26.5 0-48 21.5-48 48V400c0 26.5 21.5 48 48 48h32c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48H240z";sn.definition={prefix:ln,iconName:cn,icon:[dn,pn,vn,kn,Sn]},sn.faPause=sn.definition,sn.prefix=ln,sn.iconName=cn,sn.width=dn,sn.height=pn,sn.ligatures=vn,sn.unicode=kn,sn.svgPathData=Sn,sn.aliases=vn})(faPause);const shaka$7=getShaka(),PLAY_PAUSE_ELEMENT_ID="play-pause-button-ui";var _ref$2={name:"1oaeivz",styles:"margin-right:8px"};function PlayPauseButtonUiComponent(){var Sn;const sn=usePlayerContext(),ln=(Sn=sn.player)==null?void 0:Sn.getVideoElement(),[cn,dn]=reactExports.useState(!(ln!=null&&ln.paused)),pn=()=>{var wn;sn&&((wn=sn.player)==null||wn.play())},vn=()=>{var wn;sn&&((wn=sn.player)==null||wn.pause())},kn=()=>{dn(!(ln!=null&&ln.paused))};return useEvent$2("play",kn,ln),useEvent$2("pause",kn,ln),useEvent$2("seeking",kn,ln),jsx(PlayerControlButton,{styleWrapper:_ref$2,children:cn?jsx(Dr$2,{size:40,onClick:vn,variant:"transparent",children:jsx(I$a,{size:"md",icon:faPause.faPause})}):jsx(Dr$2,{size:40,onClick:pn,variant:"transparent",children:jsx(I$a,{size:"md",icon:faPlay.faPlay})})})}class PlayPauseButtonUi extends shaka$7.ui.Element{constructor(cn,dn){super(cn,dn);Tl(this,"container");this.container=document.createElement("div"),this.container.id=PLAY_PAUSE_ELEMENT_ID,cn.appendChild(this.container)}}class PlayPauseButtonUiFactory{create(ln,cn){return new PlayPauseButtonUi(ln,cn)}}Tl(PlayPauseButtonUiFactory,"uiName","custome_play_pause");function PortalControl({elementId:sn,children:ln}){const[cn,dn]=reactExports.useState(null),pn=document.querySelector(`#${sn}`);return reactExports.useLayoutEffect(()=>{cn||dn(pn),cn!==pn&&dn(pn)},[pn]),cn&&reactDomExports.createPortal(ln,cn)}var faAngleRight={};(function(sn){Object.defineProperty(sn,"__esModule",{value:!0});var ln="fas",cn="angle-right",dn=320,pn=512,vn=[8250],kn="f105",Sn="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z";sn.definition={prefix:ln,iconName:cn,icon:[dn,pn,vn,kn,Sn]},sn.faAngleRight=sn.definition,sn.prefix=ln,sn.iconName=cn,sn.width=dn,sn.height=pn,sn.ligatures=vn,sn.unicode=kn,sn.svgPathData=Sn,sn.aliases=vn})(faAngleRight);var faCheck={},faAngleLeft={},faSubtitles$1={};(function(sn){Object.defineProperty(sn,"__esModule",{value:!0});var ln="far",cn="subtitles",dn=576,pn=512,vn=[],kn="e60f",Sn="M64 80c-8.8 0-16 7.2-16 16V416c0 8.8 7.2 16 16 16H512c8.8 0 16-7.2 16-16V96c0-8.8-7.2-16-16-16H64zM0 96C0 60.7 28.7 32 64 32H512c35.3 0 64 28.7 64 64V416c0 35.3-28.7 64-64 64H64c-35.3 0-64-28.7-64-64V96zM120 240H296c13.3 0 24 10.7 24 24s-10.7 24-24 24H120c-13.3 0-24-10.7-24-24s10.7-24 24-24zm256 0h80c13.3 0 24 10.7 24 24s-10.7 24-24 24H376c-13.3 0-24-10.7-24-24s10.7-24 24-24zM120 336h80c13.3 0 24 10.7 24 24s-10.7 24-24 24H120c-13.3 0-24-10.7-24-24s10.7-24 24-24zm160 0H456c13.3 0 24 10.7 24 24s-10.7 24-24 24H280c-13.3 0-24-10.7-24-24s10.7-24 24-24z";sn.definition={prefix:ln,iconName:cn,icon:[dn,pn,vn,kn,Sn]},sn.faSubtitles=sn.definition,sn.prefix=ln,sn.iconName=cn,sn.width=dn,sn.height=pn,sn.ligatures=vn,sn.unicode=kn,sn.svgPathData=Sn,sn.aliases=vn})(faSubtitles$1);var faSubtitles={};(function(sn){Object.defineProperty(sn,"__esModule",{value:!0});var ln="fas",cn="subtitles",dn=576,pn=512,vn=[],kn="e60f",Sn="M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H512c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zm56 208H296c13.3 0 24 10.7 24 24s-10.7 24-24 24H120c-13.3 0-24-10.7-24-24s10.7-24 24-24zm256 0h80c13.3 0 24 10.7 24 24s-10.7 24-24 24H376c-13.3 0-24-10.7-24-24s10.7-24 24-24zM120 336h80c13.3 0 24 10.7 24 24s-10.7 24-24 24H120c-13.3 0-24-10.7-24-24s10.7-24 24-24zm160 0H456c13.3 0 24 10.7 24 24s-10.7 24-24 24H280c-13.3 0-24-10.7-24-24s10.7-24 24-24z";sn.definition={prefix:ln,iconName:cn,icon:[dn,pn,vn,kn,Sn]},sn.faSubtitles=sn.definition,sn.prefix=ln,sn.iconName=cn,sn.width=dn,sn.height=pn,sn.ligatures=vn,sn.unicode=kn,sn.svgPathData=Sn,sn.aliases=vn})(faSubtitles);const secondsToHHmmss=sn=>{const ln=Math.floor(sn/3600),cn=Math.floor(sn%3600/60),dn=sn%60,pn=ln.toString().padStart(2,"0"),vn=cn.toString().padStart(2,"0"),kn=dn.toString().padStart(2,"0");return`${pn}:${vn}:${kn}`};function useSubtitleGtmProperty(){var kn,Sn,wn,Pn,Nn,Ln,Fn,zn,Dn,Kn;const sn=useQueryClient(),{slug:ln,unitId:cn}=useLectureParams(),dn=sn.getQueryData(courseQueryKey(ln)),pn=sn.getQueryData(myVoucherQueryKey),vn=sn.getQueryData(unitQueryKey(cn));return{course_id:String((kn=dn==null?void 0:dn.data)==null?void 0:kn.id),course_title:(Sn=dn==null?void 0:dn.data)==null?void 0:Sn.title,unit_id:String(cn),seq0_instructor_id:String((wn=dn==null?void 0:dn.data)==null?void 0:wn.instructorUserId),seq0_instructor_name:String((Pn=dn==null?void 0:dn.data)==null?void 0:Pn.instructorName),progress:Number((Nn=pn==null?void 0:pn.data)==null?void 0:Nn.voucher.progress),total_unit_count:(Ln=pn==null?void 0:pn.data)==null?void 0:Ln.lectureCount,progress_unit:(Fn=pn==null?void 0:pn.data)==null?void 0:Fn.voucher.completeCount,total_unit_time:secondsToHHmmss(Number((zn=vn==null?void 0:vn.data)==null?void 0:zn.runtime)),progress_time:secondsToHHmmss(Number((Kn=(Dn=vn==null?void 0:vn.data)==null?void 0:Dn.complete)==null?void 0:Kn.currentTime))}}const hexToRgb=sn=>{const ln=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(sn);return ln?{r:parseInt(ln[1],16),g:parseInt(ln[2],16),b:parseInt(ln[3],16)}:null},styleMobileVideoContent=css$1({display:"flex",flexDirection:"column",position:"relative",flexShrink:"0",height:"calc(var(--vw, 1vw) * 64)",backgroundColor:A$9.dark[8],transition:"height .3s ease"},"",""),styleSubtitleText=css$1({color:A$9.gray[1],textAlign:"center",wordBreak:"keep-all",userSelect:"none"},"",""),MAX_WIDTH_BREAKPOINT=1200,MIN_WIDTH_BREAKPOINT=360,MIN_FONT_SIZE=12,useSubtitleSizeByScreenWidth=()=>{const[sn,ln]=reactExports.useState(32),[cn,{width:dn}]=useMeasure$1(),{isTablet:pn}=useScreen(),vn=useAppSelector(Sn=>Sn.video.subTitleSize),kn=pn?DESKTOP_PADDING:MOBILE_PADDING;return reactExports.useEffect(()=>{ln(getSizeByScreenWidth(dn,vn))},[dn,vn]),{ref:cn,fontSize:sn,padding:kn}},getSizeByScreenWidth=(sn,ln)=>{if(sn>=MAX_WIDTH_BREAKPOINT)return SUBTITLE_SIZE[ln];if(sn<=MIN_WIDTH_BREAKPOINT)return MIN_FONT_SIZE;const cn=SUBTITLE_SIZE[ln]-MIN_FONT_SIZE,dn=MAX_WIDTH_BREAKPOINT-MIN_WIDTH_BREAKPOINT,pn=1-(sn-MIN_WIDTH_BREAKPOINT)/dn;return SUBTITLE_SIZE[ln]-cn*pn},MOBILE_PADDING=10,DESKTOP_PADDING=20;function checkInclude(sn,ln){return sn===0&&ln.start===0?0:sn<ln.start?-1:sn>=ln.start&&sn<ln.end?0:1}function binarySearch(sn,ln,cn){let dn=cn!==void 0?cn:0,pn=sn.length-1;for(;dn<=pn;){const vn=Math.floor((dn+pn)/2),kn=ln(sn[vn]);if(kn===0)return{index:vn,prevIndex:vn-1};kn===-1?pn=vn-1:dn=vn+1}return{index:null,prevIndex:min$6([dn,pn])??null}}function findIndexByCurrentTime(sn,ln,cn){return binarySearch(sn,dn=>checkInclude(ln,dn),cn)}function useVodSubtitlesIdQuery(sn,ln){return useVodSubtitleVodSubtitlesIdQuery({queryKey:[VOD_SUBTITLE_VOD_SUBTITLE_ID(`${sn}`)],url:VOD_SUBTITLE_VOD_SUBTITLE_ID(`${sn}`),options:ln})}const useVodSubtitle=(sn,ln)=>{var Zn,Yn;const{showNotification:cn}=z$6(),dn=useAppDispatch(),pn=useAppSelector(Jn=>Jn.video.isVodSubtitleOpened),{prevIndex:vn,index:kn}=useAppSelector(Jn=>Jn.video.currentScript),Sn=useVodSubtitlesIdQuery(sn,{select:Jn=>Jn.map(rs=>({...rs,end:rs.end/1e3,start:rs.start/1e3})),onError:()=>{dn(videoActions.setIsVodSubtitleOpened(!pn)),cn({type:"error",title:"일시적인 오류가 발생했습니다.",message:"새로고침을 진행해주세요. 오류가 지속되면 관리자에게 문의해주세요."})},useErrorBoundary:!1,enabled:!!sn,...ln}),{data:wn,isError:Pn}=Sn,Nn=usePlayerContext(),Ln=reactExports.useRef(null);reactExports.useEffect(()=>{const Jn=Fn();Kn(Jn)},[]);const Fn=()=>{var rs,ss;const Jn=(ss=(rs=Nn.player)==null?void 0:rs.getVideoElement())==null?void 0:ss.currentTime;return isNil(Jn)?null:Jn},zn=()=>{const Jn=Fn();if(isNil(wn)||Ln.current===Jn||Jn===null)return;const ss=findIndexByCurrentTime(wn,Jn,kn===0||kn===null?void 0:kn);Ln.current=Jn,qn({index:ss.index,prevIndex:ss.prevIndex,isPlaceholder:ss.index===null})},Dn=()=>{const Jn=Fn();Kn(Jn),Ln.current=Jn},Kn=Jn=>{if(Jn===null||isNil(wn))return;const rs=findIndexByCurrentTime(wn,Jn);qn({index:rs.index,prevIndex:rs.prevIndex,isPlaceholder:rs.index===null})},qn=Jn=>{dn(videoActions.setCurrentScriptIndex(Jn))};return useEvent$2("timeupdate",zn,(Zn=Nn.player)==null?void 0:Zn.getVideoElement()),useEvent$2("seeked",Dn,(Yn=Nn.player)==null?void 0:Yn.getVideoElement()),{currentScriptIndex:kn,prevScriptIndex:vn,subtitle:wn,vodSubtitlesIdQuery:Sn,isSubtitleError:Pn,setCurrentScriptIndex:qn}},shaka$6=getShaka(),SUBTITLE_ELEMENT_ID="subtitle-ui",SUBTITLE_SIZE={sm:24,md:28,lg:32},SUBTITLE_SIZE_LABEL={sm:"작게",md:"보통",lg:"크게"},SUBTITLE_SIZE_KEY={sm:"sm",md:"md",lg:"lg"};var _ref$1={name:"1rsnfy9",styles:"max-width:880px;text-align:center;width:100%;padding:0 16px"};function SubtitleUiComponent({subtitleOid:sn}){const{subtitle:ln,currentScriptIndex:cn}=useVodSubtitle(sn),{ref:dn,fontSize:pn}=useSubtitleSizeByScreenWidth();return isNil(ln)||isNil(cn)||isNil(ln[cn])?null:jsx("div",{ref:dn,css:styleSubtitleUi,children:jsx(B$7,{css:_ref$1,children:jsx(c$8,{weight:500,component:"span",style:{fontSize:`${pn}px`},css:[styleSubtitleText,styleSubtitleUiText,"",""],children:ln[cn].text})})})}const styleSubtitleUi=css$1({display:"flex",justifyContent:"center",overflow:"hidden",marginBottom:"8px",[mediaQueries.tablet]:{marginBottom:"16px"}},"",""),dark8=hexToRgb(A$9.dark[8]),styleSubtitleUiText=css$1({padding:"4px",lineHeight:"1.5",backgroundColor:`rgba(${dark8==null?void 0:dark8.r}, ${dark8==null?void 0:dark8.g}, ${dark8==null?void 0:dark8.b}, 0.8)`},"","");class SubtitleUi extends shaka$6.ui.Element{constructor(ln,cn){super(ln,cn);const dn=cn.getControlsContainer().querySelector(".shaka-bottom-controls");dn==null||dn.insertAdjacentHTML("afterbegin",`<div id="${SUBTITLE_ELEMENT_ID}"></div>`)}}class SubtitleUiFactory{create(ln,cn){return new SubtitleUi(ln,cn)}}Tl(SubtitleUiFactory,"uiName","subtitle");const shaka$5=getShaka(),SUBTITLE_BUTTON_ELEMENT_ID="subtitle-button-ui";var _ref={name:"1oaeivz",styles:"margin-right:8px"},_ref2={name:"s5xdrg",styles:"display:flex;align-items:center"},_ref3={name:"1q4vxyr",styles:"margin-left:8px"},_ref4={name:"1066lcq",styles:"display:flex;justify-content:space-between;align-items:center"};function SubtitleButtonUiComponent(){const sn=reactExports.useRef(),ln=useAppSelector(Ss=>Ss.video.isVodSubtitleOpened),cn=useAppSelector(Ss=>Ss.video.subTitleSize),[dn,pn]=useLocalStorage$1("showSubtitleTutorial",!ln),vn=useAppSelector(Ss=>Ss.video.subtitlePosition),kn=Yf(),[Sn,{open:wn,close:Pn}]=useDisclosure(!1),[Nn,{open:Ln,close:Fn}]=useDisclosure(!1),zn=useSubtitleGtmProperty();useHiddenMenuHandler(SubtitleButtonUiFactory.uiName,Sn),useHiddenMenuHandler(`${SubtitleButtonUiFactory.uiName}-size`,Nn);const Dn=useAppDispatch(),Kn=useAppSelector(Ss=>Ss.lecture.isMobileView),qn=ln?"자막 끄기":"자막 켜기",Zn=()=>{trackMixpanelEvent(eventNames.CLICK_SUBTITLE_ON,{...zn,subtitle_on:!ln}),Dn(videoActions.setIsVodSubtitleOpened(!ln))},Yn=Ss=>{Ss.preventDefault(),Ln()},Jn=()=>{const Ss=vn==="bottom"?"top":"bottom",Qn={bottom:"on",top:"off"};trackMixpanelEvent(eventNames.CLICK_SUBTITLE_UNDER_PLAYER,{...zn,flag_option:Qn[Ss]}),Dn(videoActions.setSubtitlePosition(Ss))},rs=()=>{trackMixpanelEvent(eventNames.CLICK_SUBTITLE,zn)},ss=()=>pn(!1),as=Ss=>{Dn(videoActions.setSubtitleSize(Ss)),setUserSetting({subtitleSize:Ss})};reactExports.useEffect(()=>()=>{sn.current&&clearTimeout(sn.current)},[]);const ds=()=>{Fn(),setTimeout(()=>{const Ss=document.querySelector(`.${SubtitleButtonUiFactory.uiName}-hidden-handler`);Ss==null||Ss.classList.remove("shaka-hidden")},10)};return jsx(PlayerControlButton,{styleWrapper:_ref,children:jsxs(w$6,{opened:Sn,onClose:()=>{Pn(),sn.current=setTimeout(()=>{Fn()},300)},onOpen:wn,shadow:"md",width:210,position:"top",onChange:rs,keepMounted:!0,children:[jsx(w$6.Target,{children:jsx("div",{children:jsxs(t$3,{withArrow:!0,opened:dn,middlewares:{flip:!0,shift:!0,inline:!0},position:"top",styles:{dropdown:{backgroundColor:"white",borderColor:A$9.gray[2],color:A$9.gray[9]}},children:[jsx(t$3.Target,{children:jsx(Dr$2,{size:40,variant:"transparent",onClick:ss,children:jsx(a$6,{inline:!1,radius:"xl",withBorder:!0,position:"top-start",styles:{indicator:{left:"1px",backgroundColor:A$9.infgreen[6]}},children:ln?jsx(I$a,{size:"md",icon:faSubtitles.faSubtitles}):jsx(I$a,{size:"md",icon:faSubtitles$1.faSubtitles})})})}),jsxs(t$3.Dropdown,{onClick:ss,children:[jsx(c$8,{weight:700,size:18,mb:4,align:"center",children:"자막 켜기"}),jsxs(c$8,{weight:400,size:14,align:"center",children:["지금부터 자막 기능을",jsx("br",{}),"사용할 수 있어요!"]})]})]})})}),jsx(w$6.Dropdown,{children:Nn?jsxs(Fragment,{children:[jsx(w$6.Item,{icon:jsx(I$a,{size:"sm",icon:faAngleLeft.faAngleLeft}),closeMenuOnClick:!1,onClick:ds,color:"dark.2",children:"크기 설정"}),jsx(w$6.Divider,{}),subtitleKeys.map(Ss=>jsx(w$6.Item,{icon:jsx(I$a,{size:"sm",icon:faCheck.faCheck,css:css$1({visibility:cn===Ss?"visible":"hidden"},"","")}),closeMenuOnClick:!1,onClick:()=>as(Ss),children:SUBTITLE_SIZE_LABEL[Ss]},Ss))]}):jsxs(Fragment,{children:[jsx(w$6.Item,{onClick:Zn,children:qn}),jsx(w$6.Item,{onClick:Jn,css:css$1({opacity:ln?void 0:.6},"",""),disabled:!ln,children:jsxs(m$5,{children:[jsx(c$8,{color:ln?void 0:"dark.2",children:"영상 아래 자막 표시"}),jsx(za$1,{ml:"auto",color:"dark",disabled:!ln,checked:vn==="bottom",css:css$1({pointerEvents:"none",".mantine-Switch-track > .mantine-Switch-thumb":{borderColor:A$9.dark[2],backgroundColor:A$9.dark[2]},"input:checked + .mantine-Switch-track > .mantine-Switch-thumb":{borderColor:kn.white,backgroundColor:kn.white}},"","")})]})}),Kn?null:jsx(w$6.Item,{disabled:!ln,css:css$1({opacity:ln?void 0:.6},"",""),closeMenuOnClick:!1,onClick:Yn,rightSection:ln?jsxs(c$8,{size:12,weight:400,color:"gray.6",css:_ref2,children:[SUBTITLE_SIZE_LABEL[cn],jsx(I$a,{size:"md",icon:faAngleRight.faAngleRight,color:"gray.6",css:_ref3})]}):null,children:jsx(B$7,{css:_ref4,children:jsx(c$8,{size:14,weight:400,color:ln?void 0:"dark.2",children:"크기 설정"})})})]})})]})})}const subtitleKeys=[SUBTITLE_SIZE_KEY.sm,SUBTITLE_SIZE_KEY.md,SUBTITLE_SIZE_KEY.lg];class SubtitleButtonUi extends shaka$5.ui.Element{constructor(cn,dn){super(cn,dn);Tl(this,"container");this.container=document.createElement("div"),this.container.id=SUBTITLE_BUTTON_ELEMENT_ID,this.container.appendChild(generateHiddenMenuHandlerEl(SubtitleButtonUiFactory.uiName)),this.container.appendChild(generateHiddenMenuHandlerEl(`${SubtitleButtonUiFactory.uiName}-size`)),cn.appendChild(this.container)}}class SubtitleButtonUiFactory{create(ln,cn){return new SubtitleButtonUi(ln,cn)}}Tl(SubtitleButtonUiFactory,"uiName","subtitle-button");var sha256$1={exports:{}};function commonjsRequire(sn){throw new Error('Could not dynamically require "'+sn+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var core={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);core.exports;var hasRequiredCore;function requireCore(){return hasRequiredCore||(hasRequiredCore=1,function(sn,ln){(function(cn,dn){sn.exports=dn()})(commonjsGlobal$1,function(){var cn=cn||function(dn,pn){var vn;if(typeof window<"u"&&window.crypto&&(vn=window.crypto),typeof self<"u"&&self.crypto&&(vn=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(vn=globalThis.crypto),!vn&&typeof window<"u"&&window.msCrypto&&(vn=window.msCrypto),!vn&&typeof commonjsGlobal$1<"u"&&commonjsGlobal$1.crypto&&(vn=commonjsGlobal$1.crypto),!vn&&typeof commonjsRequire=="function")try{vn=require$$0}catch{}var kn=function(){if(vn){if(typeof vn.getRandomValues=="function")try{return vn.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof vn.randomBytes=="function")try{return vn.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},Sn=Object.create||function(){function Yn(){}return function(Jn){var rs;return Yn.prototype=Jn,rs=new Yn,Yn.prototype=null,rs}}(),wn={},Pn=wn.lib={},Nn=Pn.Base=function(){return{extend:function(Yn){var Jn=Sn(this);return Yn&&Jn.mixIn(Yn),(!Jn.hasOwnProperty("init")||this.init===Jn.init)&&(Jn.init=function(){Jn.$super.init.apply(this,arguments)}),Jn.init.prototype=Jn,Jn.$super=this,Jn},create:function(){var Yn=this.extend();return Yn.init.apply(Yn,arguments),Yn},init:function(){},mixIn:function(Yn){for(var Jn in Yn)Yn.hasOwnProperty(Jn)&&(this[Jn]=Yn[Jn]);Yn.hasOwnProperty("toString")&&(this.toString=Yn.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),Ln=Pn.WordArray=Nn.extend({init:function(Yn,Jn){Yn=this.words=Yn||[],Jn!=pn?this.sigBytes=Jn:this.sigBytes=Yn.length*4},toString:function(Yn){return(Yn||zn).stringify(this)},concat:function(Yn){var Jn=this.words,rs=Yn.words,ss=this.sigBytes,as=Yn.sigBytes;if(this.clamp(),ss%4)for(var ds=0;ds<as;ds++){var Es=rs[ds>>>2]>>>24-ds%4*8&255;Jn[ss+ds>>>2]|=Es<<24-(ss+ds)%4*8}else for(var Ss=0;Ss<as;Ss+=4)Jn[ss+Ss>>>2]=rs[Ss>>>2];return this.sigBytes+=as,this},clamp:function(){var Yn=this.words,Jn=this.sigBytes;Yn[Jn>>>2]&=4294967295<<32-Jn%4*8,Yn.length=dn.ceil(Jn/4)},clone:function(){var Yn=Nn.clone.call(this);return Yn.words=this.words.slice(0),Yn},random:function(Yn){for(var Jn=[],rs=0;rs<Yn;rs+=4)Jn.push(kn());return new Ln.init(Jn,Yn)}}),Fn=wn.enc={},zn=Fn.Hex={stringify:function(Yn){for(var Jn=Yn.words,rs=Yn.sigBytes,ss=[],as=0;as<rs;as++){var ds=Jn[as>>>2]>>>24-as%4*8&255;ss.push((ds>>>4).toString(16)),ss.push((ds&15).toString(16))}return ss.join("")},parse:function(Yn){for(var Jn=Yn.length,rs=[],ss=0;ss<Jn;ss+=2)rs[ss>>>3]|=parseInt(Yn.substr(ss,2),16)<<24-ss%8*4;return new Ln.init(rs,Jn/2)}},Dn=Fn.Latin1={stringify:function(Yn){for(var Jn=Yn.words,rs=Yn.sigBytes,ss=[],as=0;as<rs;as++){var ds=Jn[as>>>2]>>>24-as%4*8&255;ss.push(String.fromCharCode(ds))}return ss.join("")},parse:function(Yn){for(var Jn=Yn.length,rs=[],ss=0;ss<Jn;ss++)rs[ss>>>2]|=(Yn.charCodeAt(ss)&255)<<24-ss%4*8;return new Ln.init(rs,Jn)}},Kn=Fn.Utf8={stringify:function(Yn){try{return decodeURIComponent(escape(Dn.stringify(Yn)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(Yn){return Dn.parse(unescape(encodeURIComponent(Yn)))}},qn=Pn.BufferedBlockAlgorithm=Nn.extend({reset:function(){this._data=new Ln.init,this._nDataBytes=0},_append:function(Yn){typeof Yn=="string"&&(Yn=Kn.parse(Yn)),this._data.concat(Yn),this._nDataBytes+=Yn.sigBytes},_process:function(Yn){var Jn,rs=this._data,ss=rs.words,as=rs.sigBytes,ds=this.blockSize,Es=ds*4,Ss=as/Es;Yn?Ss=dn.ceil(Ss):Ss=dn.max((Ss|0)-this._minBufferSize,0);var Qn=Ss*ds,ms=dn.min(Qn*4,as);if(Qn){for(var Ts=0;Ts<Qn;Ts+=ds)this._doProcessBlock(ss,Ts);Jn=ss.splice(0,Qn),rs.sigBytes-=ms}return new Ln.init(Jn,ms)},clone:function(){var Yn=Nn.clone.call(this);return Yn._data=this._data.clone(),Yn},_minBufferSize:0});Pn.Hasher=qn.extend({cfg:Nn.extend(),init:function(Yn){this.cfg=this.cfg.extend(Yn),this.reset()},reset:function(){qn.reset.call(this),this._doReset()},update:function(Yn){return this._append(Yn),this._process(),this},finalize:function(Yn){Yn&&this._append(Yn);var Jn=this._doFinalize();return Jn},blockSize:16,_createHelper:function(Yn){return function(Jn,rs){return new Yn.init(rs).finalize(Jn)}},_createHmacHelper:function(Yn){return function(Jn,rs){return new Zn.HMAC.init(Yn,rs).finalize(Jn)}}});var Zn=wn.algo={};return wn}(Math);return cn})}(core,core.exports)),core.exports}sha256$1.exports;(function(sn,ln){(function(cn,dn){sn.exports=dn(requireCore())})(commonjsGlobal$1,function(cn){return function(dn){var pn=cn,vn=pn.lib,kn=vn.WordArray,Sn=vn.Hasher,wn=pn.algo,Pn=[],Nn=[];(function(){function zn(Zn){for(var Yn=dn.sqrt(Zn),Jn=2;Jn<=Yn;Jn++)if(!(Zn%Jn))return!1;return!0}function Dn(Zn){return(Zn-(Zn|0))*4294967296|0}for(var Kn=2,qn=0;qn<64;)zn(Kn)&&(qn<8&&(Pn[qn]=Dn(dn.pow(Kn,1/2))),Nn[qn]=Dn(dn.pow(Kn,1/3)),qn++),Kn++})();var Ln=[],Fn=wn.SHA256=Sn.extend({_doReset:function(){this._hash=new kn.init(Pn.slice(0))},_doProcessBlock:function(zn,Dn){for(var Kn=this._hash.words,qn=Kn[0],Zn=Kn[1],Yn=Kn[2],Jn=Kn[3],rs=Kn[4],ss=Kn[5],as=Kn[6],ds=Kn[7],Es=0;Es<64;Es++){if(Es<16)Ln[Es]=zn[Dn+Es]|0;else{var Ss=Ln[Es-15],Qn=(Ss<<25|Ss>>>7)^(Ss<<14|Ss>>>18)^Ss>>>3,ms=Ln[Es-2],Ts=(ms<<15|ms>>>17)^(ms<<13|ms>>>19)^ms>>>10;Ln[Es]=Qn+Ln[Es-7]+Ts+Ln[Es-16]}var Rs=rs&ss^~rs&as,ys=qn&Zn^qn&Yn^Zn&Yn,_s=(qn<<30|qn>>>2)^(qn<<19|qn>>>13)^(qn<<10|qn>>>22),js=(rs<<26|rs>>>6)^(rs<<21|rs>>>11)^(rs<<7|rs>>>25),bs=ds+js+Rs+Nn[Es]+Ln[Es],ks=_s+ys;ds=as,as=ss,ss=rs,rs=Jn+bs|0,Jn=Yn,Yn=Zn,Zn=qn,qn=bs+ks|0}Kn[0]=Kn[0]+qn|0,Kn[1]=Kn[1]+Zn|0,Kn[2]=Kn[2]+Yn|0,Kn[3]=Kn[3]+Jn|0,Kn[4]=Kn[4]+rs|0,Kn[5]=Kn[5]+ss|0,Kn[6]=Kn[6]+as|0,Kn[7]=Kn[7]+ds|0},_doFinalize:function(){var zn=this._data,Dn=zn.words,Kn=this._nDataBytes*8,qn=zn.sigBytes*8;return Dn[qn>>>5]|=128<<24-qn%32,Dn[(qn+64>>>9<<4)+14]=dn.floor(Kn/4294967296),Dn[(qn+64>>>9<<4)+15]=Kn,zn.sigBytes=Dn.length*4,this._process(),this._hash},clone:function(){var zn=Sn.clone.call(this);return zn._hash=this._hash.clone(),zn}});pn.SHA256=Sn._createHelper(Fn),pn.HmacSHA256=Sn._createHmacHelper(Fn)}(Math),cn.SHA256})})(sha256$1,sha256$1.exports);var sha256Exports=sha256$1.exports;const sha256=getDefaultExportFromCjs(sha256Exports);var Stream$d=function sn(){this.init=function(){var ln={};this.on=function(cn,dn){ln[cn]||(ln[cn]=[]),ln[cn]=ln[cn].concat(dn)},this.off=function(cn,dn){var pn;return ln[cn]?(pn=ln[cn].indexOf(dn),ln[cn]=ln[cn].slice(),ln[cn].splice(pn,1),pn>-1):!1},this.trigger=function(cn){var dn,pn,vn,kn;if(dn=ln[cn],!!dn)if(arguments.length===2)for(vn=dn.length,pn=0;pn<vn;++pn)dn[pn].call(this,arguments[1]);else{for(kn=[],pn=arguments.length,pn=1;pn<arguments.length;++pn)kn.push(arguments[pn]);for(vn=dn.length,pn=0;pn<vn;++pn)dn[pn].apply(this,kn)}},this.dispose=function(){ln={}}}};Stream$d.prototype.pipe=function(sn){return this.on("data",function(ln){sn.push(ln)}),this.on("done",function(ln){sn.flush(ln)}),this.on("partialdone",function(ln){sn.partialFlush(ln)}),this.on("endedtimeline",function(ln){sn.endTimeline(ln)}),this.on("reset",function(ln){sn.reset(ln)}),sn};Stream$d.prototype.push=function(sn){this.trigger("data",sn)};Stream$d.prototype.flush=function(sn){this.trigger("done",sn)};Stream$d.prototype.partialFlush=function(sn){this.trigger("partialdone",sn)};Stream$d.prototype.endTimeline=function(sn){this.trigger("endedtimeline",sn)};Stream$d.prototype.reset=function(sn){this.trigger("reset",sn)};var stream=Stream$d,ONE_SECOND_IN_TS$5=9e4,secondsToVideoTs,secondsToAudioTs,videoTsToSeconds,audioTsToSeconds,audioTsToVideoTs,videoTsToAudioTs,metadataTsToSeconds;secondsToVideoTs=function sn(ln){return ln*ONE_SECOND_IN_TS$5};secondsToAudioTs=function sn(ln,cn){return ln*cn};videoTsToSeconds=function sn(ln){return ln/ONE_SECOND_IN_TS$5};audioTsToSeconds=function sn(ln,cn){return ln/cn};audioTsToVideoTs=function sn(ln,cn){return secondsToVideoTs(audioTsToSeconds(ln,cn))};videoTsToAudioTs=function sn(ln,cn){return secondsToAudioTs(videoTsToSeconds(ln),cn)};metadataTsToSeconds=function sn(ln,cn,dn){return videoTsToSeconds(dn?ln:ln-cn)};var clock$3={ONE_SECOND_IN_TS:ONE_SECOND_IN_TS$5,secondsToVideoTs,secondsToAudioTs,videoTsToSeconds,audioTsToSeconds,audioTsToVideoTs,videoTsToAudioTs,metadataTsToSeconds},Stream$c=stream,ONE_SECOND_IN_TS$4=clock$3.ONE_SECOND_IN_TS,_AdtsStream,ADTS_SAMPLING_FREQUENCIES$1=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];_AdtsStream=function sn(ln){var cn,dn=0;_AdtsStream.prototype.init.call(this),this.skipWarn_=function(pn,vn){this.trigger("log",{level:"warn",message:"adts skiping bytes "+pn+" to "+vn+" in frame "+dn+" outside syncword"})},this.push=function(pn){var vn=0,kn,Sn,wn,Pn,Nn;if(ln||(dn=0),pn.type==="audio"){cn&&cn.length?(wn=cn,cn=new Uint8Array(wn.byteLength+pn.data.byteLength),cn.set(wn),cn.set(pn.data,wn.byteLength)):cn=pn.data;for(var Ln;vn+7<cn.length;){if(cn[vn]!==255||(cn[vn+1]&246)!==240){typeof Ln!="number"&&(Ln=vn),vn++;continue}if(typeof Ln=="number"&&(this.skipWarn_(Ln,vn),Ln=null),Sn=(~cn[vn+1]&1)*2,kn=(cn[vn+3]&3)<<11|cn[vn+4]<<3|(cn[vn+5]&224)>>5,Pn=((cn[vn+6]&3)+1)*1024,Nn=Pn*ONE_SECOND_IN_TS$4/ADTS_SAMPLING_FREQUENCIES$1[(cn[vn+2]&60)>>>2],cn.byteLength-vn<kn)break;this.trigger("data",{pts:pn.pts+dn*Nn,dts:pn.dts+dn*Nn,sampleCount:Pn,audioobjecttype:(cn[vn+2]>>>6&3)+1,channelcount:(cn[vn+2]&1)<<2|(cn[vn+3]&192)>>>6,samplerate:ADTS_SAMPLING_FREQUENCIES$1[(cn[vn+2]&60)>>>2],samplingfrequencyindex:(cn[vn+2]&60)>>>2,samplesize:16,data:cn.subarray(vn+7+Sn,vn+kn)}),dn++,vn+=kn}typeof Ln=="number"&&(this.skipWarn_(Ln,vn),Ln=null),cn=cn.subarray(vn)}},this.flush=function(){dn=0,this.trigger("done")},this.reset=function(){cn=void 0,this.trigger("reset")},this.endTimeline=function(){cn=void 0,this.trigger("endedtimeline")}};_AdtsStream.prototype=new Stream$c;var adts=_AdtsStream,ExpGolomb$1;ExpGolomb$1=function sn(ln){var cn=ln.byteLength,dn=0,pn=0;this.length=function(){return 8*cn},this.bitsAvailable=function(){return 8*cn+pn},this.loadWord=function(){var vn=ln.byteLength-cn,kn=new Uint8Array(4),Sn=Math.min(4,cn);if(Sn===0)throw new Error("no bytes available");kn.set(ln.subarray(vn,vn+Sn)),dn=new DataView(kn.buffer).getUint32(0),pn=Sn*8,cn-=Sn},this.skipBits=function(vn){var kn;pn>vn?(dn<<=vn,pn-=vn):(vn-=pn,kn=Math.floor(vn/8),vn-=kn*8,cn-=kn,this.loadWord(),dn<<=vn,pn-=vn)},this.readBits=function(vn){var kn=Math.min(pn,vn),Sn=dn>>>32-kn;return pn-=kn,pn>0?dn<<=kn:cn>0&&this.loadWord(),kn=vn-kn,kn>0?Sn<<kn|this.readBits(kn):Sn},this.skipLeadingZeros=function(){var vn;for(vn=0;vn<pn;++vn)if(dn&2147483648>>>vn)return dn<<=vn,pn-=vn,vn;return this.loadWord(),vn+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var vn=this.skipLeadingZeros();return this.readBits(vn+1)-1},this.readExpGolomb=function(){var vn=this.readUnsignedExpGolomb();return 1&vn?1+vn>>>1:-1*(vn>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var expGolomb=ExpGolomb$1,Stream$b=stream,ExpGolomb=expGolomb,_H264Stream,_NalByteStream,PROFILES_WITH_OPTIONAL_SPS_DATA;_NalByteStream=function sn(){var ln=0,cn,dn;_NalByteStream.prototype.init.call(this),this.push=function(pn){var vn;dn?(vn=new Uint8Array(dn.byteLength+pn.data.byteLength),vn.set(dn),vn.set(pn.data,dn.byteLength),dn=vn):dn=pn.data;for(var kn=dn.byteLength;ln<kn-3;ln++)if(dn[ln+2]===1){cn=ln+5;break}for(;cn<kn;)switch(dn[cn]){case 0:if(dn[cn-1]!==0){cn+=2;break}else if(dn[cn-2]!==0){cn++;break}ln+3!==cn-2&&this.trigger("data",dn.subarray(ln+3,cn-2));do cn++;while(dn[cn]!==1&&cn<kn);ln=cn-2,cn+=3;break;case 1:if(dn[cn-1]!==0||dn[cn-2]!==0){cn+=3;break}this.trigger("data",dn.subarray(ln+3,cn-2)),ln=cn-2,cn+=3;break;default:cn+=3;break}dn=dn.subarray(ln),cn-=ln,ln=0},this.reset=function(){dn=null,ln=0,this.trigger("reset")},this.flush=function(){dn&&dn.byteLength>3&&this.trigger("data",dn.subarray(ln+3)),dn=null,ln=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}};_NalByteStream.prototype=new Stream$b;PROFILES_WITH_OPTIONAL_SPS_DATA={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0};_H264Stream=function sn(){var ln=new _NalByteStream,cn,dn,pn,vn,kn,Sn,wn;_H264Stream.prototype.init.call(this),cn=this,this.push=function(Pn){Pn.type==="video"&&(dn=Pn.trackId,pn=Pn.pts,vn=Pn.dts,ln.push(Pn))},ln.on("data",function(Pn){var Nn={trackId:dn,pts:pn,dts:vn,data:Pn,nalUnitTypeCode:Pn[0]&31};switch(Nn.nalUnitTypeCode){case 5:Nn.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:Nn.nalUnitType="sei_rbsp",Nn.escapedRBSP=kn(Pn.subarray(1));break;case 7:Nn.nalUnitType="seq_parameter_set_rbsp",Nn.escapedRBSP=kn(Pn.subarray(1)),Nn.config=Sn(Nn.escapedRBSP);break;case 8:Nn.nalUnitType="pic_parameter_set_rbsp";break;case 9:Nn.nalUnitType="access_unit_delimiter_rbsp";break}cn.trigger("data",Nn)}),ln.on("done",function(){cn.trigger("done")}),ln.on("partialdone",function(){cn.trigger("partialdone")}),ln.on("reset",function(){cn.trigger("reset")}),ln.on("endedtimeline",function(){cn.trigger("endedtimeline")}),this.flush=function(){ln.flush()},this.partialFlush=function(){ln.partialFlush()},this.reset=function(){ln.reset()},this.endTimeline=function(){ln.endTimeline()},wn=function(Nn,Ln){var Fn=8,zn=8,Dn,Kn;for(Dn=0;Dn<Nn;Dn++)zn!==0&&(Kn=Ln.readExpGolomb(),zn=(Fn+Kn+256)%256),Fn=zn===0?Fn:zn},kn=function(Nn){for(var Ln=Nn.byteLength,Fn=[],zn=1,Dn,Kn;zn<Ln-2;)Nn[zn]===0&&Nn[zn+1]===0&&Nn[zn+2]===3?(Fn.push(zn+2),zn+=2):zn++;if(Fn.length===0)return Nn;Dn=Ln-Fn.length,Kn=new Uint8Array(Dn);var qn=0;for(zn=0;zn<Dn;qn++,zn++)qn===Fn[0]&&(qn++,Fn.shift()),Kn[zn]=Nn[qn];return Kn},Sn=function(Nn){var Ln=0,Fn=0,zn=0,Dn=0,Kn,qn,Zn,Yn,Jn,rs,ss,as,ds,Es,Ss,Qn=[1,1],ms,Ts;if(Kn=new ExpGolomb(Nn),qn=Kn.readUnsignedByte(),Yn=Kn.readUnsignedByte(),Zn=Kn.readUnsignedByte(),Kn.skipUnsignedExpGolomb(),PROFILES_WITH_OPTIONAL_SPS_DATA[qn]&&(Jn=Kn.readUnsignedExpGolomb(),Jn===3&&Kn.skipBits(1),Kn.skipUnsignedExpGolomb(),Kn.skipUnsignedExpGolomb(),Kn.skipBits(1),Kn.readBoolean()))for(Ss=Jn!==3?8:12,Ts=0;Ts<Ss;Ts++)Kn.readBoolean()&&(Ts<6?wn(16,Kn):wn(64,Kn));if(Kn.skipUnsignedExpGolomb(),rs=Kn.readUnsignedExpGolomb(),rs===0)Kn.readUnsignedExpGolomb();else if(rs===1)for(Kn.skipBits(1),Kn.skipExpGolomb(),Kn.skipExpGolomb(),ss=Kn.readUnsignedExpGolomb(),Ts=0;Ts<ss;Ts++)Kn.skipExpGolomb();if(Kn.skipUnsignedExpGolomb(),Kn.skipBits(1),as=Kn.readUnsignedExpGolomb(),ds=Kn.readUnsignedExpGolomb(),Es=Kn.readBits(1),Es===0&&Kn.skipBits(1),Kn.skipBits(1),Kn.readBoolean()&&(Ln=Kn.readUnsignedExpGolomb(),Fn=Kn.readUnsignedExpGolomb(),zn=Kn.readUnsignedExpGolomb(),Dn=Kn.readUnsignedExpGolomb()),Kn.readBoolean()&&Kn.readBoolean()){switch(ms=Kn.readUnsignedByte(),ms){case 1:Qn=[1,1];break;case 2:Qn=[12,11];break;case 3:Qn=[10,11];break;case 4:Qn=[16,11];break;case 5:Qn=[40,33];break;case 6:Qn=[24,11];break;case 7:Qn=[20,11];break;case 8:Qn=[32,11];break;case 9:Qn=[80,33];break;case 10:Qn=[18,11];break;case 11:Qn=[15,11];break;case 12:Qn=[64,33];break;case 13:Qn=[160,99];break;case 14:Qn=[4,3];break;case 15:Qn=[3,2];break;case 16:Qn=[2,1];break;case 255:{Qn=[Kn.readUnsignedByte()<<8|Kn.readUnsignedByte(),Kn.readUnsignedByte()<<8|Kn.readUnsignedByte()];break}}Qn&&Qn[0]/Qn[1]}return{profileIdc:qn,levelIdc:Zn,profileCompatibility:Yn,width:(as+1)*16-Ln*2-Fn*2,height:(2-Es)*(ds+1)*16-zn*2-Dn*2,sarRatio:Qn}}};_H264Stream.prototype=new Stream$b;var h264={H264Stream:_H264Stream,NalByteStream:_NalByteStream},codecs$1={Adts:adts,h264},MAX_UINT32$1=Math.pow(2,32),getUint64$4=function sn(ln){var cn=new DataView(ln.buffer,ln.byteOffset,ln.byteLength),dn;return cn.getBigUint64?(dn=cn.getBigUint64(0),dn<Number.MAX_SAFE_INTEGER?Number(dn):dn):cn.getUint32(0)*MAX_UINT32$1+cn.getUint32(4)},numbers={getUint64:getUint64$4,MAX_UINT32:MAX_UINT32$1},MAX_UINT32=numbers.MAX_UINT32,box,dinf,esds,ftyp,mdat,mfhd,minf,moof,moov,mvex,mvhd,trak,tkhd,mdia,mdhd,hdlr,sdtp,stbl,stsd,traf,trex,trun$1,types,MAJOR_BRAND,MINOR_VERSION,AVC1_BRAND,VIDEO_HDLR,AUDIO_HDLR,HDLR_TYPES,VMHD,SMHD,DREF,STCO,STSC,STSZ,STTS;(function(){var sn;if(types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(sn in types)types.hasOwnProperty(sn)&&(types[sn]=[sn.charCodeAt(0),sn.charCodeAt(1),sn.charCodeAt(2),sn.charCodeAt(3)]);MAJOR_BRAND=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),AVC1_BRAND=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),MINOR_VERSION=new Uint8Array([0,0,0,1]),VIDEO_HDLR=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),AUDIO_HDLR=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),HDLR_TYPES={video:VIDEO_HDLR,audio:AUDIO_HDLR},DREF=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),STCO=new Uint8Array([0,0,0,0,0,0,0,0]),STSC=STCO,STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),STTS=STCO,VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})();box=function sn(ln){var cn=[],dn=0,pn,vn,kn;for(pn=1;pn<arguments.length;pn++)cn.push(arguments[pn]);for(pn=cn.length;pn--;)dn+=cn[pn].byteLength;for(vn=new Uint8Array(dn+8),kn=new DataView(vn.buffer,vn.byteOffset,vn.byteLength),kn.setUint32(0,vn.byteLength),vn.set(ln,4),pn=0,dn=8;pn<cn.length;pn++)vn.set(cn[pn],dn),dn+=cn[pn].byteLength;return vn};dinf=function sn(){return box(types.dinf,box(types.dref,DREF))};esds=function sn(ln){return box(types.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,ln.audioobjecttype<<3|ln.samplingfrequencyindex>>>1,ln.samplingfrequencyindex<<7|ln.channelcount<<3,6,1,2]))};ftyp=function sn(){return box(types.ftyp,MAJOR_BRAND,MINOR_VERSION,MAJOR_BRAND,AVC1_BRAND)};hdlr=function sn(ln){return box(types.hdlr,HDLR_TYPES[ln])};mdat=function sn(ln){return box(types.mdat,ln)};mdhd=function sn(ln){var cn=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,ln.duration>>>24&255,ln.duration>>>16&255,ln.duration>>>8&255,ln.duration&255,85,196,0,0]);return ln.samplerate&&(cn[12]=ln.samplerate>>>24&255,cn[13]=ln.samplerate>>>16&255,cn[14]=ln.samplerate>>>8&255,cn[15]=ln.samplerate&255),box(types.mdhd,cn)};mdia=function sn(ln){return box(types.mdia,mdhd(ln),hdlr(ln.type),minf(ln))};mfhd=function sn(ln){return box(types.mfhd,new Uint8Array([0,0,0,0,(ln&4278190080)>>24,(ln&16711680)>>16,(ln&65280)>>8,ln&255]))};minf=function sn(ln){return box(types.minf,ln.type==="video"?box(types.vmhd,VMHD):box(types.smhd,SMHD),dinf(),stbl(ln))};moof=function sn(ln,cn){for(var dn=[],pn=cn.length;pn--;)dn[pn]=traf(cn[pn]);return box.apply(null,[types.moof,mfhd(ln)].concat(dn))};moov=function sn(ln){for(var cn=ln.length,dn=[];cn--;)dn[cn]=trak(ln[cn]);return box.apply(null,[types.moov,mvhd(4294967295)].concat(dn).concat(mvex(ln)))};mvex=function sn(ln){for(var cn=ln.length,dn=[];cn--;)dn[cn]=trex(ln[cn]);return box.apply(null,[types.mvex].concat(dn))};mvhd=function sn(ln){var cn=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(ln&4278190080)>>24,(ln&16711680)>>16,(ln&65280)>>8,ln&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return box(types.mvhd,cn)};sdtp=function sn(ln){var cn=ln.samples||[],dn=new Uint8Array(4+cn.length),pn,vn;for(vn=0;vn<cn.length;vn++)pn=cn[vn].flags,dn[vn+4]=pn.dependsOn<<4|pn.isDependedOn<<2|pn.hasRedundancy;return box(types.sdtp,dn)};stbl=function sn(ln){return box(types.stbl,stsd(ln),box(types.stts,STTS),box(types.stsc,STSC),box(types.stsz,STSZ),box(types.stco,STCO))};(function(){var sn,ln;stsd=function(dn){return box(types.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),dn.type==="video"?sn(dn):ln(dn))},sn=function(dn){var pn=dn.sps||[],vn=dn.pps||[],kn=[],Sn=[],wn,Pn;for(wn=0;wn<pn.length;wn++)kn.push((pn[wn].byteLength&65280)>>>8),kn.push(pn[wn].byteLength&255),kn=kn.concat(Array.prototype.slice.call(pn[wn]));for(wn=0;wn<vn.length;wn++)Sn.push((vn[wn].byteLength&65280)>>>8),Sn.push(vn[wn].byteLength&255),Sn=Sn.concat(Array.prototype.slice.call(vn[wn]));if(Pn=[types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(dn.width&65280)>>8,dn.width&255,(dn.height&65280)>>8,dn.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),box(types.avcC,new Uint8Array([1,dn.profileIdc,dn.profileCompatibility,dn.levelIdc,255].concat([pn.length],kn,[vn.length],Sn))),box(types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],dn.sarRatio){var Nn=dn.sarRatio[0],Ln=dn.sarRatio[1];Pn.push(box(types.pasp,new Uint8Array([(Nn&4278190080)>>24,(Nn&16711680)>>16,(Nn&65280)>>8,Nn&255,(Ln&4278190080)>>24,(Ln&16711680)>>16,(Ln&65280)>>8,Ln&255])))}return box.apply(null,Pn)},ln=function(dn){return box(types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(dn.channelcount&65280)>>8,dn.channelcount&255,(dn.samplesize&65280)>>8,dn.samplesize&255,0,0,0,0,(dn.samplerate&65280)>>8,dn.samplerate&255,0,0]),esds(dn))}})();tkhd=function sn(ln){var cn=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(ln.id&4278190080)>>24,(ln.id&16711680)>>16,(ln.id&65280)>>8,ln.id&255,0,0,0,0,(ln.duration&4278190080)>>24,(ln.duration&16711680)>>16,(ln.duration&65280)>>8,ln.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(ln.width&65280)>>8,ln.width&255,0,0,(ln.height&65280)>>8,ln.height&255,0,0]);return box(types.tkhd,cn)};traf=function sn(ln){var cn,dn,pn,vn,kn,Sn,wn;return cn=box(types.tfhd,new Uint8Array([0,0,0,58,(ln.id&4278190080)>>24,(ln.id&16711680)>>16,(ln.id&65280)>>8,ln.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),Sn=Math.floor(ln.baseMediaDecodeTime/MAX_UINT32),wn=Math.floor(ln.baseMediaDecodeTime%MAX_UINT32),dn=box(types.tfdt,new Uint8Array([1,0,0,0,Sn>>>24&255,Sn>>>16&255,Sn>>>8&255,Sn&255,wn>>>24&255,wn>>>16&255,wn>>>8&255,wn&255])),kn=32+20+8+16+8+8,ln.type==="audio"?(pn=trun$1(ln,kn),box(types.traf,cn,dn,pn)):(vn=sdtp(ln),pn=trun$1(ln,vn.length+kn),box(types.traf,cn,dn,pn,vn))};trak=function sn(ln){return ln.duration=ln.duration||4294967295,box(types.trak,tkhd(ln),mdia(ln))};trex=function sn(ln){var cn=new Uint8Array([0,0,0,0,(ln.id&4278190080)>>24,(ln.id&16711680)>>16,(ln.id&65280)>>8,ln.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return ln.type!=="video"&&(cn[cn.length-1]=0),box(types.trex,cn)};(function(){var sn,ln,cn;cn=function(pn,vn){var kn=0,Sn=0,wn=0,Pn=0;return pn.length&&(pn[0].duration!==void 0&&(kn=1),pn[0].size!==void 0&&(Sn=2),pn[0].flags!==void 0&&(wn=4),pn[0].compositionTimeOffset!==void 0&&(Pn=8)),[0,0,kn|Sn|wn|Pn,1,(pn.length&4278190080)>>>24,(pn.length&16711680)>>>16,(pn.length&65280)>>>8,pn.length&255,(vn&4278190080)>>>24,(vn&16711680)>>>16,(vn&65280)>>>8,vn&255]},ln=function(pn,vn){var kn,Sn,wn,Pn,Nn,Ln;for(Pn=pn.samples||[],vn+=8+12+16*Pn.length,wn=cn(Pn,vn),Sn=new Uint8Array(wn.length+Pn.length*16),Sn.set(wn),kn=wn.length,Ln=0;Ln<Pn.length;Ln++)Nn=Pn[Ln],Sn[kn++]=(Nn.duration&4278190080)>>>24,Sn[kn++]=(Nn.duration&16711680)>>>16,Sn[kn++]=(Nn.duration&65280)>>>8,Sn[kn++]=Nn.duration&255,Sn[kn++]=(Nn.size&4278190080)>>>24,Sn[kn++]=(Nn.size&16711680)>>>16,Sn[kn++]=(Nn.size&65280)>>>8,Sn[kn++]=Nn.size&255,Sn[kn++]=Nn.flags.isLeading<<2|Nn.flags.dependsOn,Sn[kn++]=Nn.flags.isDependedOn<<6|Nn.flags.hasRedundancy<<4|Nn.flags.paddingValue<<1|Nn.flags.isNonSyncSample,Sn[kn++]=Nn.flags.degradationPriority&240<<8,Sn[kn++]=Nn.flags.degradationPriority&15,Sn[kn++]=(Nn.compositionTimeOffset&4278190080)>>>24,Sn[kn++]=(Nn.compositionTimeOffset&16711680)>>>16,Sn[kn++]=(Nn.compositionTimeOffset&65280)>>>8,Sn[kn++]=Nn.compositionTimeOffset&255;return box(types.trun,Sn)},sn=function(pn,vn){var kn,Sn,wn,Pn,Nn,Ln;for(Pn=pn.samples||[],vn+=8+12+8*Pn.length,wn=cn(Pn,vn),kn=new Uint8Array(wn.length+Pn.length*8),kn.set(wn),Sn=wn.length,Ln=0;Ln<Pn.length;Ln++)Nn=Pn[Ln],kn[Sn++]=(Nn.duration&4278190080)>>>24,kn[Sn++]=(Nn.duration&16711680)>>>16,kn[Sn++]=(Nn.duration&65280)>>>8,kn[Sn++]=Nn.duration&255,kn[Sn++]=(Nn.size&4278190080)>>>24,kn[Sn++]=(Nn.size&16711680)>>>16,kn[Sn++]=(Nn.size&65280)>>>8,kn[Sn++]=Nn.size&255;return box(types.trun,kn)},trun$1=function(pn,vn){return pn.type==="audio"?sn(pn,vn):ln(pn,vn)}})();var mp4Generator={ftyp,mdat,moof,moov,initSegment:function sn(ln){var cn=ftyp(),dn=moov(ln),pn;return pn=new Uint8Array(cn.byteLength+dn.byteLength),pn.set(cn),pn.set(dn,cn.byteLength),pn}},toUnsigned$3=function sn(ln){return ln>>>0},toHexString$1=function sn(ln){return("00"+ln.toString(16)).slice(-2)},bin={toUnsigned:toUnsigned$3,toHexString:toHexString$1},parseType$5=function sn(ln){var cn="";return cn+=String.fromCharCode(ln[0]),cn+=String.fromCharCode(ln[1]),cn+=String.fromCharCode(ln[2]),cn+=String.fromCharCode(ln[3]),cn},parseType_1=parseType$5,toUnsigned$2=bin.toUnsigned,parseType$4=parseType_1,findBox$3=function sn(ln,cn){var dn=[],pn,vn,kn,Sn,wn;if(!cn.length)return null;for(pn=0;pn<ln.byteLength;)vn=toUnsigned$2(ln[pn]<<24|ln[pn+1]<<16|ln[pn+2]<<8|ln[pn+3]),kn=parseType$4(ln.subarray(pn+4,pn+8)),Sn=vn>1?pn+vn:ln.byteLength,kn===cn[0]&&(cn.length===1?dn.push(ln.subarray(pn+8,Sn)):(wn=sn(ln.subarray(pn+8,Sn),cn.slice(1)),wn.length&&(dn=dn.concat(wn)))),pn=Sn;return dn},findBox_1=findBox$3,uint8ToCString$1=function sn(ln){for(var cn=0,dn=String.fromCharCode(ln[cn]),pn="";dn!=="\0";)pn+=dn,cn++,dn=String.fromCharCode(ln[cn]);return pn+=dn,pn},string={uint8ToCString:uint8ToCString$1},uint8ToCString=string.uint8ToCString,getUint64$3=numbers.getUint64,parseEmsgBox=function sn(ln){var cn=4,dn=ln[0],pn,vn,kn,Sn,wn,Pn,Nn,Ln;if(dn===0){pn=uint8ToCString(ln.subarray(cn)),cn+=pn.length,vn=uint8ToCString(ln.subarray(cn)),cn+=vn.length;var Fn=new DataView(ln.buffer);kn=Fn.getUint32(cn),cn+=4,wn=Fn.getUint32(cn),cn+=4,Pn=Fn.getUint32(cn),cn+=4,Nn=Fn.getUint32(cn),cn+=4}else if(dn===1){var Fn=new DataView(ln.buffer);kn=Fn.getUint32(cn),cn+=4,Sn=getUint64$3(ln.subarray(cn)),cn+=8,Pn=Fn.getUint32(cn),cn+=4,Nn=Fn.getUint32(cn),cn+=4,pn=uint8ToCString(ln.subarray(cn)),cn+=pn.length,vn=uint8ToCString(ln.subarray(cn)),cn+=vn.length}Ln=new Uint8Array(ln.subarray(cn,ln.byteLength));var zn={scheme_id_uri:pn,value:vn,timescale:kn||1,presentation_time:Sn,presentation_time_delta:wn,event_duration:Pn,id:Nn,message_data:Ln};return isValidEmsgBox(dn,zn)?zn:void 0},scaleTime=function sn(ln,cn,dn,pn){return ln||ln===0?ln/cn:pn+dn/cn},isValidEmsgBox=function sn(ln,cn){var dn=cn.scheme_id_uri!=="\0",pn=ln===0&&isDefined(cn.presentation_time_delta)&&dn,vn=ln===1&&isDefined(cn.presentation_time)&&dn;return!(ln>1)&&pn||vn},isDefined=function sn(ln){return ln!==void 0||ln!==null},emsg$1={parseEmsgBox,scaleTime},tfhd=function sn(ln){var cn=new DataView(ln.buffer,ln.byteOffset,ln.byteLength),dn={version:ln[0],flags:new Uint8Array(ln.subarray(1,4)),trackId:cn.getUint32(4)},pn=dn.flags[2]&1,vn=dn.flags[2]&2,kn=dn.flags[2]&8,Sn=dn.flags[2]&16,wn=dn.flags[2]&32,Pn=dn.flags[0]&65536,Nn=dn.flags[0]&131072,Ln;return Ln=8,pn&&(Ln+=4,dn.baseDataOffset=cn.getUint32(12),Ln+=4),vn&&(dn.sampleDescriptionIndex=cn.getUint32(Ln),Ln+=4),kn&&(dn.defaultSampleDuration=cn.getUint32(Ln),Ln+=4),Sn&&(dn.defaultSampleSize=cn.getUint32(Ln),Ln+=4),wn&&(dn.defaultSampleFlags=cn.getUint32(Ln)),Pn&&(dn.durationIsEmpty=!0),!pn&&Nn&&(dn.baseDataOffsetIsMoof=!0),dn},parseTfhd$2=tfhd,parseSampleFlags$1=function sn(ln){return{isLeading:(ln[0]&12)>>>2,dependsOn:ln[0]&3,isDependedOn:(ln[1]&192)>>>6,hasRedundancy:(ln[1]&48)>>>4,paddingValue:(ln[1]&14)>>>1,isNonSyncSample:ln[1]&1,degradationPriority:ln[2]<<8|ln[3]}},parseSampleFlags_1=parseSampleFlags$1,parseSampleFlags=parseSampleFlags_1,trun=function sn(ln){var cn={version:ln[0],flags:new Uint8Array(ln.subarray(1,4)),samples:[]},dn=new DataView(ln.buffer,ln.byteOffset,ln.byteLength),pn=cn.flags[2]&1,vn=cn.flags[2]&4,kn=cn.flags[1]&1,Sn=cn.flags[1]&2,wn=cn.flags[1]&4,Pn=cn.flags[1]&8,Nn=dn.getUint32(4),Ln=8,Fn;for(pn&&(cn.dataOffset=dn.getInt32(Ln),Ln+=4),vn&&Nn&&(Fn={flags:parseSampleFlags(ln.subarray(Ln,Ln+4))},Ln+=4,kn&&(Fn.duration=dn.getUint32(Ln),Ln+=4),Sn&&(Fn.size=dn.getUint32(Ln),Ln+=4),Pn&&(cn.version===1?Fn.compositionTimeOffset=dn.getInt32(Ln):Fn.compositionTimeOffset=dn.getUint32(Ln),Ln+=4),cn.samples.push(Fn),Nn--);Nn--;)Fn={},kn&&(Fn.duration=dn.getUint32(Ln),Ln+=4),Sn&&(Fn.size=dn.getUint32(Ln),Ln+=4),wn&&(Fn.flags=parseSampleFlags(ln.subarray(Ln,Ln+4)),Ln+=4),Pn&&(cn.version===1?Fn.compositionTimeOffset=dn.getInt32(Ln):Fn.compositionTimeOffset=dn.getUint32(Ln),Ln+=4),cn.samples.push(Fn);return cn},parseTrun$2=trun,toUnsigned$1=bin.toUnsigned,getUint64$2=numbers.getUint64,tfdt=function sn(ln){var cn={version:ln[0],flags:new Uint8Array(ln.subarray(1,4))};return cn.version===1?cn.baseMediaDecodeTime=getUint64$2(ln.subarray(4)):cn.baseMediaDecodeTime=toUnsigned$1(ln[4]<<24|ln[5]<<16|ln[6]<<8|ln[7]),cn},parseTfdt$2=tfdt,win;typeof window<"u"?win=window:typeof commonjsGlobal$1<"u"?win=commonjsGlobal$1:typeof self<"u"?win=self:win={};var window_1=win,typedArrayIndexOf$1=function sn(ln,cn,dn){if(!ln)return-1;for(var pn=dn;pn<ln.length;pn++)if(ln[pn]===cn)return pn;return-1},typedArray={typedArrayIndexOf:typedArrayIndexOf$1},typedArrayIndexOf=typedArray.typedArrayIndexOf,textEncodingDescriptionByte={Iso88591:0,Utf16:1,Utf16be:2,Utf8:3},percentEncode$1=function sn(ln,cn,dn){var pn,vn="";for(pn=cn;pn<dn;pn++)vn+="%"+("00"+ln[pn].toString(16)).slice(-2);return vn},parseUtf8=function sn(ln,cn,dn){return decodeURIComponent(percentEncode$1(ln,cn,dn))},parseIso88591$1=function sn(ln,cn,dn){return unescape(percentEncode$1(ln,cn,dn))},parseSyncSafeInteger$1=function sn(ln){return ln[0]<<21|ln[1]<<14|ln[2]<<7|ln[3]},frameParsers={APIC:function sn(ln){var cn=1,dn,pn,vn="-->";ln.data[0]===textEncodingDescriptionByte.Utf8&&(dn=typedArrayIndexOf(ln.data,0,cn),!(dn<0)&&(ln.mimeType=parseIso88591$1(ln.data,cn,dn),cn=dn+1,ln.pictureType=ln.data[cn],cn++,pn=typedArrayIndexOf(ln.data,0,cn),!(pn<0)&&(ln.description=parseUtf8(ln.data,cn,pn),cn=pn+1,ln.mimeType===vn?ln.url=parseIso88591$1(ln.data,cn,ln.data.length):ln.pictureData=ln.data.subarray(cn,ln.data.length))))},"T*":function sn(ln){ln.data[0]===textEncodingDescriptionByte.Utf8&&(ln.value=parseUtf8(ln.data,1,ln.data.length).replace(/\0*$/,""),ln.values=ln.value.split("\0"))},TXXX:function sn(ln){var cn;ln.data[0]===textEncodingDescriptionByte.Utf8&&(cn=typedArrayIndexOf(ln.data,0,1),cn!==-1&&(ln.description=parseUtf8(ln.data,1,cn),ln.value=parseUtf8(ln.data,cn+1,ln.data.length).replace(/\0*$/,""),ln.data=ln.value))},"W*":function sn(ln){ln.url=parseIso88591$1(ln.data,0,ln.data.length).replace(/\0.*$/,"")},WXXX:function sn(ln){var cn;ln.data[0]===textEncodingDescriptionByte.Utf8&&(cn=typedArrayIndexOf(ln.data,0,1),cn!==-1&&(ln.description=parseUtf8(ln.data,1,cn),ln.url=parseIso88591$1(ln.data,cn+1,ln.data.length).replace(/\0.*$/,"")))},PRIV:function sn(ln){var cn;for(cn=0;cn<ln.data.length;cn++)if(ln.data[cn]===0){ln.owner=parseIso88591$1(ln.data,0,cn);break}ln.privateData=ln.data.subarray(cn+1),ln.data=ln.privateData}},parseId3Frames$1=function sn(ln){var cn,dn,pn=10,vn=0,kn=[];if(!(ln.length<10||ln[0]!=="I".charCodeAt(0)||ln[1]!=="D".charCodeAt(0)||ln[2]!=="3".charCodeAt(0))){vn=parseSyncSafeInteger$1(ln.subarray(6,10)),vn+=10;var Sn=ln[5]&64;Sn&&(pn+=4,pn+=parseSyncSafeInteger$1(ln.subarray(10,14)),vn-=parseSyncSafeInteger$1(ln.subarray(16,20)));do{if(cn=parseSyncSafeInteger$1(ln.subarray(pn+4,pn+8)),cn<1)break;dn=String.fromCharCode(ln[pn],ln[pn+1],ln[pn+2],ln[pn+3]);var wn={id:dn,data:ln.subarray(pn+10,pn+cn+10)};wn.key=wn.id,frameParsers[wn.id]?frameParsers[wn.id](wn):wn.id[0]==="T"?frameParsers["T*"](wn):wn.id[0]==="W"&&frameParsers["W*"](wn),kn.push(wn),pn+=10,pn+=cn}while(pn<vn);return kn}},parseId3={parseId3Frames:parseId3Frames$1,parseSyncSafeInteger:parseSyncSafeInteger$1,frameParsers},toUnsigned=bin.toUnsigned,toHexString=bin.toHexString,findBox$2=findBox_1,parseType$3=parseType_1,emsg=emsg$1,parseTfhd$1=parseTfhd$2,parseTrun$1=parseTrun$2,parseTfdt$1=parseTfdt$2,getUint64$1=numbers.getUint64,timescale,startTime,compositionStartTime,getVideoTrackIds,getTracks,getTimescaleFromMediaHeader,getEmsgID3,window$2=window_1,parseId3Frames=parseId3.parseId3Frames;timescale=function sn(ln){var cn={},dn=findBox$2(ln,["moov","trak"]);return dn.reduce(function(pn,vn){var kn,Sn,wn,Pn,Nn;return kn=findBox$2(vn,["tkhd"])[0],!kn||(Sn=kn[0],wn=Sn===0?12:20,Pn=toUnsigned(kn[wn]<<24|kn[wn+1]<<16|kn[wn+2]<<8|kn[wn+3]),Nn=findBox$2(vn,["mdia","mdhd"])[0],!Nn)?null:(Sn=Nn[0],wn=Sn===0?12:20,pn[Pn]=toUnsigned(Nn[wn]<<24|Nn[wn+1]<<16|Nn[wn+2]<<8|Nn[wn+3]),pn)},cn)};startTime=function sn(ln,cn){var dn;dn=findBox$2(cn,["moof","traf"]);var pn=dn.reduce(function(vn,kn){var Sn=findBox$2(kn,["tfhd"])[0],wn=toUnsigned(Sn[4]<<24|Sn[5]<<16|Sn[6]<<8|Sn[7]),Pn=ln[wn]||9e4,Nn=findBox$2(kn,["tfdt"])[0],Ln=new DataView(Nn.buffer,Nn.byteOffset,Nn.byteLength),Fn;Nn[0]===1?Fn=getUint64$1(Nn.subarray(4,12)):Fn=Ln.getUint32(4);var zn;return typeof Fn=="bigint"?zn=Fn/window$2.BigInt(Pn):typeof Fn=="number"&&!isNaN(Fn)&&(zn=Fn/Pn),zn<Number.MAX_SAFE_INTEGER&&(zn=Number(zn)),zn<vn&&(vn=zn),vn},1/0);return typeof pn=="bigint"||isFinite(pn)?pn:0};compositionStartTime=function sn(ln,cn){var dn=findBox$2(cn,["moof","traf"]),pn=0,vn=0,kn;if(dn&&dn.length){var Sn=findBox$2(dn[0],["tfhd"])[0],wn=findBox$2(dn[0],["trun"])[0],Pn=findBox$2(dn[0],["tfdt"])[0];if(Sn){var Nn=parseTfhd$1(Sn);kn=Nn.trackId}if(Pn){var Ln=parseTfdt$1(Pn);pn=Ln.baseMediaDecodeTime}if(wn){var Fn=parseTrun$1(wn);Fn.samples&&Fn.samples.length&&(vn=Fn.samples[0].compositionTimeOffset||0)}}var zn=ln[kn]||9e4;typeof pn=="bigint"&&(vn=window$2.BigInt(vn),zn=window$2.BigInt(zn));var Dn=(pn+vn)/zn;return typeof Dn=="bigint"&&Dn<Number.MAX_SAFE_INTEGER&&(Dn=Number(Dn)),Dn};getVideoTrackIds=function sn(ln){var cn=findBox$2(ln,["moov","trak"]),dn=[];return cn.forEach(function(pn){var vn=findBox$2(pn,["mdia","hdlr"]),kn=findBox$2(pn,["tkhd"]);vn.forEach(function(Sn,wn){var Pn=parseType$3(Sn.subarray(8,12)),Nn=kn[wn],Ln,Fn,zn;Pn==="vide"&&(Ln=new DataView(Nn.buffer,Nn.byteOffset,Nn.byteLength),Fn=Ln.getUint8(0),zn=Fn===0?Ln.getUint32(12):Ln.getUint32(20),dn.push(zn))})}),dn};getTimescaleFromMediaHeader=function sn(ln){var cn=ln[0],dn=cn===0?12:20;return toUnsigned(ln[dn]<<24|ln[dn+1]<<16|ln[dn+2]<<8|ln[dn+3])};getTracks=function sn(ln){var cn=findBox$2(ln,["moov","trak"]),dn=[];return cn.forEach(function(pn){var vn={},kn=findBox$2(pn,["tkhd"])[0],Sn,wn;kn&&(Sn=new DataView(kn.buffer,kn.byteOffset,kn.byteLength),wn=Sn.getUint8(0),vn.id=wn===0?Sn.getUint32(12):Sn.getUint32(20));var Pn=findBox$2(pn,["mdia","hdlr"])[0];if(Pn){var Nn=parseType$3(Pn.subarray(8,12));Nn==="vide"?vn.type="video":Nn==="soun"?vn.type="audio":vn.type=Nn}var Ln=findBox$2(pn,["mdia","minf","stbl","stsd"])[0];if(Ln){var Fn=Ln.subarray(8);vn.codec=parseType$3(Fn.subarray(4,8));var zn=findBox$2(Fn,[vn.codec])[0],Dn,Kn;zn&&(/^[asm]vc[1-9]$/i.test(vn.codec)?(Dn=zn.subarray(78),Kn=parseType$3(Dn.subarray(4,8)),Kn==="avcC"&&Dn.length>11?(vn.codec+=".",vn.codec+=toHexString(Dn[9]),vn.codec+=toHexString(Dn[10]),vn.codec+=toHexString(Dn[11])):vn.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(vn.codec)?(Dn=zn.subarray(28),Kn=parseType$3(Dn.subarray(4,8)),Kn==="esds"&&Dn.length>20&&Dn[19]!==0?(vn.codec+="."+toHexString(Dn[19]),vn.codec+="."+toHexString(Dn[20]>>>2&63).replace(/^0/,"")):vn.codec="mp4a.40.2"):vn.codec=vn.codec.toLowerCase())}var qn=findBox$2(pn,["mdia","mdhd"])[0];qn&&(vn.timescale=getTimescaleFromMediaHeader(qn)),dn.push(vn)}),dn};getEmsgID3=function sn(ln,cn){cn===void 0&&(cn=0);var dn=findBox$2(ln,["emsg"]);return dn.map(function(pn){var vn=emsg.parseEmsgBox(new Uint8Array(pn)),kn=parseId3Frames(vn.message_data);return{cueTime:emsg.scaleTime(vn.presentation_time,vn.timescale,vn.presentation_time_delta,cn),duration:emsg.scaleTime(vn.event_duration,vn.timescale),frames:kn}})};var probe$2={findBox:findBox$2,parseType:parseType$3,timescale,startTime,compositionStartTime,videoTrackIds:getVideoTrackIds,tracks:getTracks,getTimescaleFromMediaHeader,getEmsgID3},groupNalsIntoFrames=function sn(ln){var cn,dn,pn=[],vn=[];for(vn.byteLength=0,vn.nalCount=0,vn.duration=0,pn.byteLength=0,cn=0;cn<ln.length;cn++)dn=ln[cn],dn.nalUnitType==="access_unit_delimiter_rbsp"?(pn.length&&(pn.duration=dn.dts-pn.dts,vn.byteLength+=pn.byteLength,vn.nalCount+=pn.length,vn.duration+=pn.duration,vn.push(pn)),pn=[dn],pn.byteLength=dn.data.byteLength,pn.pts=dn.pts,pn.dts=dn.dts):(dn.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(pn.keyFrame=!0),pn.duration=dn.dts-pn.dts,pn.byteLength+=dn.data.byteLength,pn.push(dn));return vn.length&&(!pn.duration||pn.duration<=0)&&(pn.duration=vn[vn.length-1].duration),vn.byteLength+=pn.byteLength,vn.nalCount+=pn.length,vn.duration+=pn.duration,vn.push(pn),vn},groupFramesIntoGops=function sn(ln){var cn,dn,pn=[],vn=[];for(pn.byteLength=0,pn.nalCount=0,pn.duration=0,pn.pts=ln[0].pts,pn.dts=ln[0].dts,vn.byteLength=0,vn.nalCount=0,vn.duration=0,vn.pts=ln[0].pts,vn.dts=ln[0].dts,cn=0;cn<ln.length;cn++)dn=ln[cn],dn.keyFrame?(pn.length&&(vn.push(pn),vn.byteLength+=pn.byteLength,vn.nalCount+=pn.nalCount,vn.duration+=pn.duration),pn=[dn],pn.nalCount=dn.length,pn.byteLength=dn.byteLength,pn.pts=dn.pts,pn.dts=dn.dts,pn.duration=dn.duration):(pn.duration+=dn.duration,pn.nalCount+=dn.length,pn.byteLength+=dn.byteLength,pn.push(dn));return vn.length&&pn.duration<=0&&(pn.duration=vn[vn.length-1].duration),vn.byteLength+=pn.byteLength,vn.nalCount+=pn.nalCount,vn.duration+=pn.duration,vn.push(pn),vn},extendFirstKeyFrame=function sn(ln){var cn;return!ln[0][0].keyFrame&&ln.length>1&&(cn=ln.shift(),ln.byteLength-=cn.byteLength,ln.nalCount-=cn.nalCount,ln[0][0].dts=cn.dts,ln[0][0].pts=cn.pts,ln[0][0].duration+=cn.duration),ln},createDefaultSample=function sn(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},sampleForFrame=function sn(ln,cn){var dn=createDefaultSample();return dn.dataOffset=cn,dn.compositionTimeOffset=ln.pts-ln.dts,dn.duration=ln.duration,dn.size=4*ln.length,dn.size+=ln.byteLength,ln.keyFrame&&(dn.flags.dependsOn=2,dn.flags.isNonSyncSample=0),dn},generateSampleTable$1=function sn(ln,cn){var dn,pn,vn,kn,Sn,wn=cn||0,Pn=[];for(dn=0;dn<ln.length;dn++)for(kn=ln[dn],pn=0;pn<kn.length;pn++)Sn=kn[pn],vn=sampleForFrame(Sn,wn),wn+=vn.size,Pn.push(vn);return Pn},concatenateNalData=function sn(ln){var cn,dn,pn,vn,kn,Sn,wn=0,Pn=ln.byteLength,Nn=ln.nalCount,Ln=Pn+4*Nn,Fn=new Uint8Array(Ln),zn=new DataView(Fn.buffer);for(cn=0;cn<ln.length;cn++)for(vn=ln[cn],dn=0;dn<vn.length;dn++)for(kn=vn[dn],pn=0;pn<kn.length;pn++)Sn=kn[pn],zn.setUint32(wn,Sn.data.byteLength),wn+=4,Fn.set(Sn.data,wn),wn+=Sn.data.byteLength;return Fn},generateSampleTableForFrame=function sn(ln,cn){var dn,pn=cn||0,vn=[];return dn=sampleForFrame(ln,pn),vn.push(dn),vn},concatenateNalDataForFrame=function sn(ln){var cn,dn,pn=0,vn=ln.byteLength,kn=ln.length,Sn=vn+4*kn,wn=new Uint8Array(Sn),Pn=new DataView(wn.buffer);for(cn=0;cn<ln.length;cn++)dn=ln[cn],Pn.setUint32(pn,dn.data.byteLength),pn+=4,wn.set(dn.data,pn),pn+=dn.data.byteLength;return wn},frameUtils$2={groupNalsIntoFrames,groupFramesIntoGops,extendFirstKeyFrame,generateSampleTable:generateSampleTable$1,concatenateNalData,generateSampleTableForFrame,concatenateNalDataForFrame},highPrefix=[33,16,5,32,164,27],lowPrefix=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],zeroFill=function sn(ln){for(var cn=[];ln--;)cn.push(0);return cn},makeTable=function sn(ln){return Object.keys(ln).reduce(function(cn,dn){return cn[dn]=new Uint8Array(ln[dn].reduce(function(pn,vn){return pn.concat(vn)},[])),cn},{})},silence,silence_1=function(){if(!silence){var sn={96e3:[highPrefix,[227,64],zeroFill(154),[56]],88200:[highPrefix,[231],zeroFill(170),[56]],64e3:[highPrefix,[248,192],zeroFill(240),[56]],48e3:[highPrefix,[255,192],zeroFill(268),[55,148,128],zeroFill(54),[112]],44100:[highPrefix,[255,192],zeroFill(268),[55,163,128],zeroFill(84),[112]],32e3:[highPrefix,[255,192],zeroFill(268),[55,234],zeroFill(226),[112]],24e3:[highPrefix,[255,192],zeroFill(268),[55,255,128],zeroFill(268),[111,112],zeroFill(126),[224]],16e3:[highPrefix,[255,192],zeroFill(268),[55,255,128],zeroFill(268),[111,255],zeroFill(269),[223,108],zeroFill(195),[1,192]],12e3:[lowPrefix,zeroFill(268),[3,127,248],zeroFill(268),[6,255,240],zeroFill(268),[13,255,224],zeroFill(268),[27,253,128],zeroFill(259),[56]],11025:[lowPrefix,zeroFill(268),[3,127,248],zeroFill(268),[6,255,240],zeroFill(268),[13,255,224],zeroFill(268),[27,255,192],zeroFill(268),[55,175,128],zeroFill(108),[112]],8e3:[lowPrefix,zeroFill(268),[3,121,16],zeroFill(47),[7]]};silence=makeTable(sn)}return silence},coneOfSilence=silence_1,clock$2=clock$3,sumFrameByteLengths=function sn(ln){var cn,dn,pn=0;for(cn=0;cn<ln.length;cn++)dn=ln[cn],pn+=dn.data.byteLength;return pn},prefixWithSilence=function sn(ln,cn,dn,pn){var vn,kn=0,Sn=0,wn=0,Pn=0,Nn,Ln,Fn;if(cn.length&&(vn=clock$2.audioTsToVideoTs(ln.baseMediaDecodeTime,ln.samplerate),kn=Math.ceil(clock$2.ONE_SECOND_IN_TS/(ln.samplerate/1024)),dn&&pn&&(Sn=vn-Math.max(dn,pn),wn=Math.floor(Sn/kn),Pn=wn*kn),!(wn<1||Pn>clock$2.ONE_SECOND_IN_TS/2))){for(Nn=coneOfSilence()[ln.samplerate],Nn||(Nn=cn[0].data),Ln=0;Ln<wn;Ln++)Fn=cn[0],cn.splice(0,0,{data:Nn,dts:Fn.dts-kn,pts:Fn.pts-kn});return ln.baseMediaDecodeTime-=Math.floor(clock$2.videoTsToAudioTs(Pn,ln.samplerate)),Pn}},trimAdtsFramesByEarliestDts=function sn(ln,cn,dn){return cn.minSegmentDts>=dn?ln:(cn.minSegmentDts=1/0,ln.filter(function(pn){return pn.dts>=dn?(cn.minSegmentDts=Math.min(cn.minSegmentDts,pn.dts),cn.minSegmentPts=cn.minSegmentDts,!0):!1}))},generateSampleTable=function sn(ln){var cn,dn,pn=[];for(cn=0;cn<ln.length;cn++)dn=ln[cn],pn.push({size:dn.data.byteLength,duration:1024});return pn},concatenateFrameData=function sn(ln){var cn,dn,pn=0,vn=new Uint8Array(sumFrameByteLengths(ln));for(cn=0;cn<ln.length;cn++)dn=ln[cn],vn.set(dn.data,pn),pn+=dn.data.byteLength;return vn},audioFrameUtils$2={prefixWithSilence,trimAdtsFramesByEarliestDts,generateSampleTable,concatenateFrameData},ONE_SECOND_IN_TS$3=clock$3.ONE_SECOND_IN_TS,collectDtsInfo=function sn(ln,cn){typeof cn.pts=="number"&&(ln.timelineStartInfo.pts===void 0&&(ln.timelineStartInfo.pts=cn.pts),ln.minSegmentPts===void 0?ln.minSegmentPts=cn.pts:ln.minSegmentPts=Math.min(ln.minSegmentPts,cn.pts),ln.maxSegmentPts===void 0?ln.maxSegmentPts=cn.pts:ln.maxSegmentPts=Math.max(ln.maxSegmentPts,cn.pts)),typeof cn.dts=="number"&&(ln.timelineStartInfo.dts===void 0&&(ln.timelineStartInfo.dts=cn.dts),ln.minSegmentDts===void 0?ln.minSegmentDts=cn.dts:ln.minSegmentDts=Math.min(ln.minSegmentDts,cn.dts),ln.maxSegmentDts===void 0?ln.maxSegmentDts=cn.dts:ln.maxSegmentDts=Math.max(ln.maxSegmentDts,cn.dts))},clearDtsInfo=function sn(ln){delete ln.minSegmentDts,delete ln.maxSegmentDts,delete ln.minSegmentPts,delete ln.maxSegmentPts},calculateTrackBaseMediaDecodeTime=function sn(ln,cn){var dn,pn,vn=ln.minSegmentDts;return cn||(vn-=ln.timelineStartInfo.dts),dn=ln.timelineStartInfo.baseMediaDecodeTime,dn+=vn,dn=Math.max(0,dn),ln.type==="audio"&&(pn=ln.samplerate/ONE_SECOND_IN_TS$3,dn*=pn,dn=Math.floor(dn)),dn},trackDecodeInfo$1={clearDtsInfo,calculateTrackBaseMediaDecodeTime,collectDtsInfo},USER_DATA_REGISTERED_ITU_T_T35=4,RBSP_TRAILING_BITS=128,parseSei=function sn(ln){for(var cn=0,dn={payloadType:-1,payloadSize:0},pn=0,vn=0;cn<ln.byteLength&&ln[cn]!==RBSP_TRAILING_BITS;){for(;ln[cn]===255;)pn+=255,cn++;for(pn+=ln[cn++];ln[cn]===255;)vn+=255,cn++;if(vn+=ln[cn++],!dn.payload&&pn===USER_DATA_REGISTERED_ITU_T_T35){var kn=String.fromCharCode(ln[cn+3],ln[cn+4],ln[cn+5],ln[cn+6]);if(kn==="GA94"){dn.payloadType=pn,dn.payloadSize=vn,dn.payload=ln.subarray(cn,cn+vn);break}else dn.payload=void 0}cn+=vn,pn=0,vn=0}return dn},parseUserData=function sn(ln){return ln.payload[0]!==181||(ln.payload[1]<<8|ln.payload[2])!==49||String.fromCharCode(ln.payload[3],ln.payload[4],ln.payload[5],ln.payload[6])!=="GA94"||ln.payload[7]!==3?null:ln.payload.subarray(8,ln.payload.length-1)},parseCaptionPackets=function sn(ln,cn){var dn=[],pn,vn,kn,Sn;if(!(cn[0]&64))return dn;for(vn=cn[0]&31,pn=0;pn<vn;pn++)kn=pn*3,Sn={type:cn[kn+2]&3,pts:ln},cn[kn+2]&4&&(Sn.ccData=cn[kn+3]<<8|cn[kn+4],dn.push(Sn));return dn},discardEmulationPreventionBytes$1=function sn(ln){for(var cn=ln.byteLength,dn=[],pn=1,vn,kn;pn<cn-2;)ln[pn]===0&&ln[pn+1]===0&&ln[pn+2]===3?(dn.push(pn+2),pn+=2):pn++;if(dn.length===0)return ln;vn=cn-dn.length,kn=new Uint8Array(vn);var Sn=0;for(pn=0;pn<vn;Sn++,pn++)Sn===dn[0]&&(Sn++,dn.shift()),kn[pn]=ln[Sn];return kn},captionPacketParser={parseSei,parseUserData,parseCaptionPackets,discardEmulationPreventionBytes:discardEmulationPreventionBytes$1,USER_DATA_REGISTERED_ITU_T_T35},Stream$a=stream,cea708Parser=captionPacketParser,CaptionStream$2=function sn(ln){ln=ln||{},sn.prototype.init.call(this),this.parse708captions_=typeof ln.parse708captions=="boolean"?ln.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new Cea608Stream(0,0),new Cea608Stream(0,1),new Cea608Stream(1,0),new Cea608Stream(1,1)],this.parse708captions_&&(this.cc708Stream_=new Cea708Stream({captionServices:ln.captionServices})),this.reset(),this.ccStreams_.forEach(function(cn){cn.on("data",this.trigger.bind(this,"data")),cn.on("partialdone",this.trigger.bind(this,"partialdone")),cn.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};CaptionStream$2.prototype=new Stream$a;CaptionStream$2.prototype.push=function(sn){var ln,cn,dn;if(sn.nalUnitType==="sei_rbsp"&&(ln=cea708Parser.parseSei(sn.escapedRBSP),!!ln.payload&&ln.payloadType===cea708Parser.USER_DATA_REGISTERED_ITU_T_T35&&(cn=cea708Parser.parseUserData(ln),!!cn))){if(sn.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(sn.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}dn=cea708Parser.parseCaptionPackets(sn.pts,cn),this.captionPackets_=this.captionPackets_.concat(dn),this.latestDts_!==sn.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=sn.dts}};CaptionStream$2.prototype.flushCCStreams=function(sn){this.ccStreams_.forEach(function(ln){return sn==="flush"?ln.flush():ln.partialFlush()},this)};CaptionStream$2.prototype.flushStream=function(sn){if(!this.captionPackets_.length){this.flushCCStreams(sn);return}this.captionPackets_.forEach(function(ln,cn){ln.presortIndex=cn}),this.captionPackets_.sort(function(ln,cn){return ln.pts===cn.pts?ln.presortIndex-cn.presortIndex:ln.pts-cn.pts}),this.captionPackets_.forEach(function(ln){ln.type<2?this.dispatchCea608Packet(ln):this.dispatchCea708Packet(ln)},this),this.captionPackets_.length=0,this.flushCCStreams(sn)};CaptionStream$2.prototype.flush=function(){return this.flushStream("flush")};CaptionStream$2.prototype.partialFlush=function(){return this.flushStream("partialFlush")};CaptionStream$2.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(sn){sn.reset()})};CaptionStream$2.prototype.dispatchCea608Packet=function(sn){this.setsTextOrXDSActive(sn)?this.activeCea608Channel_[sn.type]=null:this.setsChannel1Active(sn)?this.activeCea608Channel_[sn.type]=0:this.setsChannel2Active(sn)&&(this.activeCea608Channel_[sn.type]=1),this.activeCea608Channel_[sn.type]!==null&&this.ccStreams_[(sn.type<<1)+this.activeCea608Channel_[sn.type]].push(sn)};CaptionStream$2.prototype.setsChannel1Active=function(sn){return(sn.ccData&30720)===4096};CaptionStream$2.prototype.setsChannel2Active=function(sn){return(sn.ccData&30720)===6144};CaptionStream$2.prototype.setsTextOrXDSActive=function(sn){return(sn.ccData&28928)===256||(sn.ccData&30974)===4138||(sn.ccData&30974)===6186};CaptionStream$2.prototype.dispatchCea708Packet=function(sn){this.parse708captions_&&this.cc708Stream_.push(sn)};var CHARACTER_TRANSLATION_708={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},get708CharFromCode=function sn(ln){var cn=CHARACTER_TRANSLATION_708[ln]||ln;return ln&4096&&ln===cn?"":String.fromCharCode(cn)},within708TextBlock=function sn(ln){return 32<=ln&&ln<=127||160<=ln&&ln<=255},Cea708Window=function sn(ln){this.windowNum=ln,this.reset()};Cea708Window.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0};Cea708Window.prototype.getText=function(){return this.rows.join(`
`)};Cea708Window.prototype.clearText=function(){this.rows=[""],this.rowIdx=0};Cea708Window.prototype.newLine=function(sn){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(sn),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--};Cea708Window.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1};Cea708Window.prototype.addText=function(sn){this.rows[this.rowIdx]+=sn};Cea708Window.prototype.backspace=function(){if(!this.isEmpty()){var sn=this.rows[this.rowIdx];this.rows[this.rowIdx]=sn.substr(0,sn.length-1)}};var Cea708Service=function sn(ln,cn,dn){this.serviceNum=ln,this.text="",this.currentWindow=new Cea708Window(-1),this.windows=[],this.stream=dn,typeof cn=="string"&&this.createTextDecoder(cn)};Cea708Service.prototype.init=function(sn,ln){this.startPts=sn;for(var cn=0;cn<8;cn++)this.windows[cn]=new Cea708Window(cn),typeof ln=="function"&&(this.windows[cn].beforeRowOverflow=ln)};Cea708Service.prototype.setCurrentWindow=function(sn){this.currentWindow=this.windows[sn]};Cea708Service.prototype.createTextDecoder=function(sn){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(sn)}catch(ln){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+sn+" encoding. "+ln})}};var Cea708Stream=function sn(ln){ln=ln||{},sn.prototype.init.call(this);var cn=this,dn=ln.captionServices||{},pn={},vn;Object.keys(dn).forEach(function(kn){vn=dn[kn],/^SERVICE/.test(kn)&&(pn[kn]=vn.encoding)}),this.serviceEncodings=pn,this.current708Packet=null,this.services={},this.push=function(kn){kn.type===3?(cn.new708Packet(),cn.add708Bytes(kn)):(cn.current708Packet===null&&cn.new708Packet(),cn.add708Bytes(kn))}};Cea708Stream.prototype=new Stream$a;Cea708Stream.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}};Cea708Stream.prototype.add708Bytes=function(sn){var ln=sn.ccData,cn=ln>>>8,dn=ln&255;this.current708Packet.ptsVals.push(sn.pts),this.current708Packet.data.push(cn),this.current708Packet.data.push(dn)};Cea708Stream.prototype.push708Packet=function(){var sn=this.current708Packet,ln=sn.data,cn=null,dn=null,pn=0,vn=ln[pn++];for(sn.seq=vn>>6,sn.sizeCode=vn&63;pn<ln.length;pn++)vn=ln[pn++],cn=vn>>5,dn=vn&31,cn===7&&dn>0&&(vn=ln[pn++],cn=vn),this.pushServiceBlock(cn,pn,dn),dn>0&&(pn+=dn-1)};Cea708Stream.prototype.pushServiceBlock=function(sn,ln,cn){var dn,pn=ln,vn=this.current708Packet.data,kn=this.services[sn];for(kn||(kn=this.initService(sn,pn));pn<ln+cn&&pn<vn.length;pn++)dn=vn[pn],within708TextBlock(dn)?pn=this.handleText(pn,kn):dn===24?pn=this.multiByteCharacter(pn,kn):dn===16?pn=this.extendedCommands(pn,kn):128<=dn&&dn<=135?pn=this.setCurrentWindow(pn,kn):152<=dn&&dn<=159?pn=this.defineWindow(pn,kn):dn===136?pn=this.clearWindows(pn,kn):dn===140?pn=this.deleteWindows(pn,kn):dn===137?pn=this.displayWindows(pn,kn):dn===138?pn=this.hideWindows(pn,kn):dn===139?pn=this.toggleWindows(pn,kn):dn===151?pn=this.setWindowAttributes(pn,kn):dn===144?pn=this.setPenAttributes(pn,kn):dn===145?pn=this.setPenColor(pn,kn):dn===146?pn=this.setPenLocation(pn,kn):dn===143?kn=this.reset(pn,kn):dn===8?kn.currentWindow.backspace():dn===12?kn.currentWindow.clearText():dn===13?kn.currentWindow.pendingNewLine=!0:dn===14?kn.currentWindow.clearText():dn===141&&pn++};Cea708Stream.prototype.extendedCommands=function(sn,ln){var cn=this.current708Packet.data,dn=cn[++sn];return within708TextBlock(dn)&&(sn=this.handleText(sn,ln,{isExtended:!0})),sn};Cea708Stream.prototype.getPts=function(sn){return this.current708Packet.ptsVals[Math.floor(sn/2)]};Cea708Stream.prototype.initService=function(sn,ln){var dn="SERVICE"+sn,cn=this,dn,pn;return dn in this.serviceEncodings&&(pn=this.serviceEncodings[dn]),this.services[sn]=new Cea708Service(sn,pn,cn),this.services[sn].init(this.getPts(ln),function(vn){cn.flushDisplayed(vn,cn.services[sn])}),this.services[sn]};Cea708Stream.prototype.handleText=function(sn,ln,cn){var dn=cn&&cn.isExtended,pn=cn&&cn.isMultiByte,vn=this.current708Packet.data,kn=dn?4096:0,Sn=vn[sn],wn=vn[sn+1],Pn=ln.currentWindow,Nn,Ln;return ln.textDecoder_&&!dn?(pn?(Ln=[Sn,wn],sn++):Ln=[Sn],Nn=ln.textDecoder_.decode(new Uint8Array(Ln))):Nn=get708CharFromCode(kn|Sn),Pn.pendingNewLine&&!Pn.isEmpty()&&Pn.newLine(this.getPts(sn)),Pn.pendingNewLine=!1,Pn.addText(Nn),sn};Cea708Stream.prototype.multiByteCharacter=function(sn,ln){var cn=this.current708Packet.data,dn=cn[sn+1],pn=cn[sn+2];return within708TextBlock(dn)&&within708TextBlock(pn)&&(sn=this.handleText(++sn,ln,{isMultiByte:!0})),sn};Cea708Stream.prototype.setCurrentWindow=function(sn,ln){var cn=this.current708Packet.data,dn=cn[sn],pn=dn&7;return ln.setCurrentWindow(pn),sn};Cea708Stream.prototype.defineWindow=function(sn,ln){var cn=this.current708Packet.data,dn=cn[sn],pn=dn&7;ln.setCurrentWindow(pn);var vn=ln.currentWindow;return dn=cn[++sn],vn.visible=(dn&32)>>5,vn.rowLock=(dn&16)>>4,vn.columnLock=(dn&8)>>3,vn.priority=dn&7,dn=cn[++sn],vn.relativePositioning=(dn&128)>>7,vn.anchorVertical=dn&127,dn=cn[++sn],vn.anchorHorizontal=dn,dn=cn[++sn],vn.anchorPoint=(dn&240)>>4,vn.rowCount=dn&15,dn=cn[++sn],vn.columnCount=dn&63,dn=cn[++sn],vn.windowStyle=(dn&56)>>3,vn.penStyle=dn&7,vn.virtualRowCount=vn.rowCount+1,sn};Cea708Stream.prototype.setWindowAttributes=function(sn,ln){var cn=this.current708Packet.data,dn=cn[sn],pn=ln.currentWindow.winAttr;return dn=cn[++sn],pn.fillOpacity=(dn&192)>>6,pn.fillRed=(dn&48)>>4,pn.fillGreen=(dn&12)>>2,pn.fillBlue=dn&3,dn=cn[++sn],pn.borderType=(dn&192)>>6,pn.borderRed=(dn&48)>>4,pn.borderGreen=(dn&12)>>2,pn.borderBlue=dn&3,dn=cn[++sn],pn.borderType+=(dn&128)>>5,pn.wordWrap=(dn&64)>>6,pn.printDirection=(dn&48)>>4,pn.scrollDirection=(dn&12)>>2,pn.justify=dn&3,dn=cn[++sn],pn.effectSpeed=(dn&240)>>4,pn.effectDirection=(dn&12)>>2,pn.displayEffect=dn&3,sn};Cea708Stream.prototype.flushDisplayed=function(sn,ln){for(var cn=[],dn=0;dn<8;dn++)ln.windows[dn].visible&&!ln.windows[dn].isEmpty()&&cn.push(ln.windows[dn].getText());ln.endPts=sn,ln.text=cn.join(`

`),this.pushCaption(ln),ln.startPts=sn};Cea708Stream.prototype.pushCaption=function(sn){sn.text!==""&&(this.trigger("data",{startPts:sn.startPts,endPts:sn.endPts,text:sn.text,stream:"cc708_"+sn.serviceNum}),sn.text="",sn.startPts=sn.endPts)};Cea708Stream.prototype.displayWindows=function(sn,ln){var cn=this.current708Packet.data,dn=cn[++sn],pn=this.getPts(sn);this.flushDisplayed(pn,ln);for(var vn=0;vn<8;vn++)dn&1<<vn&&(ln.windows[vn].visible=1);return sn};Cea708Stream.prototype.hideWindows=function(sn,ln){var cn=this.current708Packet.data,dn=cn[++sn],pn=this.getPts(sn);this.flushDisplayed(pn,ln);for(var vn=0;vn<8;vn++)dn&1<<vn&&(ln.windows[vn].visible=0);return sn};Cea708Stream.prototype.toggleWindows=function(sn,ln){var cn=this.current708Packet.data,dn=cn[++sn],pn=this.getPts(sn);this.flushDisplayed(pn,ln);for(var vn=0;vn<8;vn++)dn&1<<vn&&(ln.windows[vn].visible^=1);return sn};Cea708Stream.prototype.clearWindows=function(sn,ln){var cn=this.current708Packet.data,dn=cn[++sn],pn=this.getPts(sn);this.flushDisplayed(pn,ln);for(var vn=0;vn<8;vn++)dn&1<<vn&&ln.windows[vn].clearText();return sn};Cea708Stream.prototype.deleteWindows=function(sn,ln){var cn=this.current708Packet.data,dn=cn[++sn],pn=this.getPts(sn);this.flushDisplayed(pn,ln);for(var vn=0;vn<8;vn++)dn&1<<vn&&ln.windows[vn].reset();return sn};Cea708Stream.prototype.setPenAttributes=function(sn,ln){var cn=this.current708Packet.data,dn=cn[sn],pn=ln.currentWindow.penAttr;return dn=cn[++sn],pn.textTag=(dn&240)>>4,pn.offset=(dn&12)>>2,pn.penSize=dn&3,dn=cn[++sn],pn.italics=(dn&128)>>7,pn.underline=(dn&64)>>6,pn.edgeType=(dn&56)>>3,pn.fontStyle=dn&7,sn};Cea708Stream.prototype.setPenColor=function(sn,ln){var cn=this.current708Packet.data,dn=cn[sn],pn=ln.currentWindow.penColor;return dn=cn[++sn],pn.fgOpacity=(dn&192)>>6,pn.fgRed=(dn&48)>>4,pn.fgGreen=(dn&12)>>2,pn.fgBlue=dn&3,dn=cn[++sn],pn.bgOpacity=(dn&192)>>6,pn.bgRed=(dn&48)>>4,pn.bgGreen=(dn&12)>>2,pn.bgBlue=dn&3,dn=cn[++sn],pn.edgeRed=(dn&48)>>4,pn.edgeGreen=(dn&12)>>2,pn.edgeBlue=dn&3,sn};Cea708Stream.prototype.setPenLocation=function(sn,ln){var cn=this.current708Packet.data,dn=cn[sn],pn=ln.currentWindow.penLoc;return ln.currentWindow.pendingNewLine=!0,dn=cn[++sn],pn.row=dn&15,dn=cn[++sn],pn.column=dn&63,sn};Cea708Stream.prototype.reset=function(sn,ln){var cn=this.getPts(sn);return this.flushDisplayed(cn,ln),this.initService(ln.serviceNum,sn)};var CHARACTER_TRANSLATION={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},getCharFromCode=function sn(ln){return ln===null?"":(ln=CHARACTER_TRANSLATION[ln]||ln,String.fromCharCode(ln))},BOTTOM_ROW=14,ROWS=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],createDisplayBuffer=function sn(){for(var ln=[],cn=BOTTOM_ROW+1;cn--;)ln.push("");return ln},Cea608Stream=function sn(ln,cn){sn.prototype.init.call(this),this.field_=ln||0,this.dataChannel_=cn||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(dn){var pn,vn,kn,Sn,wn;if(pn=dn.ccData&32639,pn===this.lastControlCode_){this.lastControlCode_=null;return}if((pn&61440)===4096?this.lastControlCode_=pn:pn!==this.PADDING_&&(this.lastControlCode_=null),kn=pn>>>8,Sn=pn&255,pn!==this.PADDING_)if(pn===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(pn===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(dn.pts),this.flushDisplayed(dn.pts),vn=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=vn,this.startPts_=dn.pts;else if(pn===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(dn.pts);else if(pn===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(dn.pts);else if(pn===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(dn.pts);else if(pn===this.CARRIAGE_RETURN_)this.clearFormatting(dn.pts),this.flushDisplayed(dn.pts),this.shiftRowsUp_(),this.startPts_=dn.pts;else if(pn===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(pn===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(dn.pts),this.displayed_=createDisplayBuffer();else if(pn===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=createDisplayBuffer();else if(pn===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(dn.pts),this.displayed_=createDisplayBuffer()),this.mode_="paintOn",this.startPts_=dn.pts;else if(this.isSpecialCharacter(kn,Sn))kn=(kn&3)<<8,wn=getCharFromCode(kn|Sn),this[this.mode_](dn.pts,wn),this.column_++;else if(this.isExtCharacter(kn,Sn))this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),kn=(kn&3)<<8,wn=getCharFromCode(kn|Sn),this[this.mode_](dn.pts,wn),this.column_++;else if(this.isMidRowCode(kn,Sn))this.clearFormatting(dn.pts),this[this.mode_](dn.pts," "),this.column_++,(Sn&14)===14&&this.addFormatting(dn.pts,["i"]),(Sn&1)===1&&this.addFormatting(dn.pts,["u"]);else if(this.isOffsetControlCode(kn,Sn))this.column_+=Sn&3;else if(this.isPAC(kn,Sn)){var Pn=ROWS.indexOf(pn&7968);this.mode_==="rollUp"&&(Pn-this.rollUpRows_+1<0&&(Pn=this.rollUpRows_-1),this.setRollUp(dn.pts,Pn)),Pn!==this.row_&&(this.clearFormatting(dn.pts),this.row_=Pn),Sn&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(dn.pts,["u"]),(pn&16)===16&&(this.column_=((pn&14)>>1)*4),this.isColorPAC(Sn)&&(Sn&14)===14&&this.addFormatting(dn.pts,["i"])}else this.isNormalChar(kn)&&(Sn===0&&(Sn=null),wn=getCharFromCode(kn),wn+=getCharFromCode(Sn),this[this.mode_](dn.pts,wn),this.column_+=wn.length)}};Cea608Stream.prototype=new Stream$a;Cea608Stream.prototype.flushDisplayed=function(sn){var ln=this.displayed_.map(function(cn,dn){try{return cn.trim()}catch{return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+dn+"."}),""}},this).join(`
`).replace(/^\n+|\n+$/g,"");ln.length&&this.trigger("data",{startPts:this.startPts_,endPts:sn,text:ln,stream:this.name_})};Cea608Stream.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=createDisplayBuffer(),this.nonDisplayed_=createDisplayBuffer(),this.lastControlCode_=null,this.column_=0,this.row_=BOTTOM_ROW,this.rollUpRows_=2,this.formatting_=[]};Cea608Stream.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46};Cea608Stream.prototype.isSpecialCharacter=function(sn,ln){return sn===this.EXT_&&ln>=48&&ln<=63};Cea608Stream.prototype.isExtCharacter=function(sn,ln){return(sn===this.EXT_+1||sn===this.EXT_+2)&&ln>=32&&ln<=63};Cea608Stream.prototype.isMidRowCode=function(sn,ln){return sn===this.EXT_&&ln>=32&&ln<=47};Cea608Stream.prototype.isOffsetControlCode=function(sn,ln){return sn===this.OFFSET_&&ln>=33&&ln<=35};Cea608Stream.prototype.isPAC=function(sn,ln){return sn>=this.BASE_&&sn<this.BASE_+8&&ln>=64&&ln<=127};Cea608Stream.prototype.isColorPAC=function(sn){return sn>=64&&sn<=79||sn>=96&&sn<=127};Cea608Stream.prototype.isNormalChar=function(sn){return sn>=32&&sn<=127};Cea608Stream.prototype.setRollUp=function(sn,ln){if(this.mode_!=="rollUp"&&(this.row_=BOTTOM_ROW,this.mode_="rollUp",this.flushDisplayed(sn),this.nonDisplayed_=createDisplayBuffer(),this.displayed_=createDisplayBuffer()),ln!==void 0&&ln!==this.row_)for(var cn=0;cn<this.rollUpRows_;cn++)this.displayed_[ln-cn]=this.displayed_[this.row_-cn],this.displayed_[this.row_-cn]="";ln===void 0&&(ln=this.row_),this.topRow_=ln-this.rollUpRows_+1};Cea608Stream.prototype.addFormatting=function(sn,ln){this.formatting_=this.formatting_.concat(ln);var cn=ln.reduce(function(dn,pn){return dn+"<"+pn+">"},"");this[this.mode_](sn,cn)};Cea608Stream.prototype.clearFormatting=function(sn){if(this.formatting_.length){var ln=this.formatting_.reverse().reduce(function(cn,dn){return cn+"</"+dn+">"},"");this.formatting_=[],this[this.mode_](sn,ln)}};Cea608Stream.prototype.popOn=function(sn,ln){var cn=this.nonDisplayed_[this.row_];cn+=ln,this.nonDisplayed_[this.row_]=cn};Cea608Stream.prototype.rollUp=function(sn,ln){var cn=this.displayed_[this.row_];cn+=ln,this.displayed_[this.row_]=cn};Cea608Stream.prototype.shiftRowsUp_=function(){var sn;for(sn=0;sn<this.topRow_;sn++)this.displayed_[sn]="";for(sn=this.row_+1;sn<BOTTOM_ROW+1;sn++)this.displayed_[sn]="";for(sn=this.topRow_;sn<this.row_;sn++)this.displayed_[sn]=this.displayed_[sn+1];this.displayed_[this.row_]=""};Cea608Stream.prototype.paintOn=function(sn,ln){var cn=this.displayed_[this.row_];cn+=ln,this.displayed_[this.row_]=cn};var captionStream={CaptionStream:CaptionStream$2,Cea608Stream,Cea708Stream},streamTypes={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Stream$9=stream,MAX_TS=8589934592,RO_THRESH=4294967296,TYPE_SHARED="shared",handleRollover$1=function sn(ln,cn){var dn=1;for(ln>cn&&(dn=-1);Math.abs(cn-ln)>RO_THRESH;)ln+=dn*MAX_TS;return ln},TimestampRolloverStream$1=function sn(ln){var cn,dn;sn.prototype.init.call(this),this.type_=ln||TYPE_SHARED,this.push=function(pn){this.type_!==TYPE_SHARED&&pn.type!==this.type_||(dn===void 0&&(dn=pn.dts),pn.dts=handleRollover$1(pn.dts,dn),pn.pts=handleRollover$1(pn.pts,dn),cn=pn.dts,this.trigger("data",pn))},this.flush=function(){dn=cn,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){dn=void 0,cn=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};TimestampRolloverStream$1.prototype=new Stream$9;var timestampRolloverStream={TimestampRolloverStream:TimestampRolloverStream$1,handleRollover:handleRollover$1},Stream$8=stream,StreamTypes$3=streamTypes,id3=parseId3,_MetadataStream;_MetadataStream=function sn(ln){var cn={descriptor:ln&&ln.descriptor},dn=0,pn=[],vn=0,kn;if(_MetadataStream.prototype.init.call(this),this.dispatchType=StreamTypes$3.METADATA_STREAM_TYPE.toString(16),cn.descriptor)for(kn=0;kn<cn.descriptor.length;kn++)this.dispatchType+=("00"+cn.descriptor[kn].toString(16)).slice(-2);this.push=function(Sn){var wn,Pn,Nn,Ln,Fn,zn;if(Sn.type==="timed-metadata"){if(Sn.dataAlignmentIndicator&&(vn=0,pn.length=0),pn.length===0&&(Sn.data.length<10||Sn.data[0]!=="I".charCodeAt(0)||Sn.data[1]!=="D".charCodeAt(0)||Sn.data[2]!=="3".charCodeAt(0))){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(pn.push(Sn),vn+=Sn.data.byteLength,pn.length===1&&(dn=id3.parseSyncSafeInteger(Sn.data.subarray(6,10)),dn+=10),!(vn<dn)){for(wn={data:new Uint8Array(dn),frames:[],pts:pn[0].pts,dts:pn[0].dts},Fn=0;Fn<dn;)wn.data.set(pn[0].data.subarray(0,dn-Fn),Fn),Fn+=pn[0].data.byteLength,vn-=pn[0].data.byteLength,pn.shift();Pn=10,wn.data[5]&64&&(Pn+=4,Pn+=id3.parseSyncSafeInteger(wn.data.subarray(10,14)),dn-=id3.parseSyncSafeInteger(wn.data.subarray(16,20)));do{if(Nn=id3.parseSyncSafeInteger(wn.data.subarray(Pn+4,Pn+8)),Nn<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if(zn=String.fromCharCode(wn.data[Pn],wn.data[Pn+1],wn.data[Pn+2],wn.data[Pn+3]),Ln={id:zn,data:wn.data.subarray(Pn+10,Pn+Nn+10)},Ln.key=Ln.id,id3.frameParsers[Ln.id]?id3.frameParsers[Ln.id](Ln):Ln.id[0]==="T"?id3.frameParsers["T*"](Ln):Ln.id[0]==="W"&&id3.frameParsers["W*"](Ln),Ln.owner==="com.apple.streaming.transportStreamTimestamp"){var Dn=Ln.data,Kn=(Dn[3]&1)<<30|Dn[4]<<22|Dn[5]<<14|Dn[6]<<6|Dn[7]>>>2;Kn*=4,Kn+=Dn[7]&3,Ln.timeStamp=Kn,wn.pts===void 0&&wn.dts===void 0&&(wn.pts=Ln.timeStamp,wn.dts=Ln.timeStamp),this.trigger("timestamp",Ln)}wn.frames.push(Ln),Pn+=10,Pn+=Nn}while(Pn<dn);this.trigger("data",wn)}}}};_MetadataStream.prototype=new Stream$8;var metadataStream=_MetadataStream,Stream$7=stream,CaptionStream$1=captionStream,StreamTypes$2=streamTypes,TimestampRolloverStream=timestampRolloverStream.TimestampRolloverStream,_TransportPacketStream,_TransportParseStream,_ElementaryStream,MP2T_PACKET_LENGTH$1=188,SYNC_BYTE$1=71;_TransportPacketStream=function sn(){var ln=new Uint8Array(MP2T_PACKET_LENGTH$1),cn=0;_TransportPacketStream.prototype.init.call(this),this.push=function(dn){var pn=0,vn=MP2T_PACKET_LENGTH$1,kn;for(cn?(kn=new Uint8Array(dn.byteLength+cn),kn.set(ln.subarray(0,cn)),kn.set(dn,cn),cn=0):kn=dn;vn<kn.byteLength;){if(kn[pn]===SYNC_BYTE$1&&kn[vn]===SYNC_BYTE$1){this.trigger("data",kn.subarray(pn,vn)),pn+=MP2T_PACKET_LENGTH$1,vn+=MP2T_PACKET_LENGTH$1;continue}pn++,vn++}pn<kn.byteLength&&(ln.set(kn.subarray(pn),0),cn=kn.byteLength-pn)},this.flush=function(){cn===MP2T_PACKET_LENGTH$1&&ln[0]===SYNC_BYTE$1&&(this.trigger("data",ln),cn=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){cn=0,this.trigger("reset")}};_TransportPacketStream.prototype=new Stream$7;_TransportParseStream=function sn(){var ln,cn,dn,pn;_TransportParseStream.prototype.init.call(this),pn=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,ln=function(kn,Sn){var wn=0;Sn.payloadUnitStartIndicator&&(wn+=kn[wn]+1),Sn.type==="pat"?cn(kn.subarray(wn),Sn):dn(kn.subarray(wn),Sn)},cn=function(kn,Sn){Sn.section_number=kn[7],Sn.last_section_number=kn[8],pn.pmtPid=(kn[10]&31)<<8|kn[11],Sn.pmtPid=pn.pmtPid},dn=function(kn,Sn){var wn,Pn,Nn,Ln;if(kn[5]&1){for(pn.programMapTable={video:null,audio:null,"timed-metadata":{}},wn=(kn[1]&15)<<8|kn[2],Pn=3+wn-4,Nn=(kn[10]&15)<<8|kn[11],Ln=12+Nn;Ln<Pn;){var Fn=kn[Ln],zn=(kn[Ln+1]&31)<<8|kn[Ln+2];Fn===StreamTypes$2.H264_STREAM_TYPE&&pn.programMapTable.video===null?pn.programMapTable.video=zn:Fn===StreamTypes$2.ADTS_STREAM_TYPE&&pn.programMapTable.audio===null?pn.programMapTable.audio=zn:Fn===StreamTypes$2.METADATA_STREAM_TYPE&&(pn.programMapTable["timed-metadata"][zn]=Fn),Ln+=((kn[Ln+3]&15)<<8|kn[Ln+4])+5}Sn.programMapTable=pn.programMapTable}},this.push=function(vn){var kn={},Sn=4;if(kn.payloadUnitStartIndicator=!!(vn[1]&64),kn.pid=vn[1]&31,kn.pid<<=8,kn.pid|=vn[2],(vn[3]&48)>>>4>1&&(Sn+=vn[Sn]+1),kn.pid===0)kn.type="pat",ln(vn.subarray(Sn),kn),this.trigger("data",kn);else if(kn.pid===this.pmtPid)for(kn.type="pmt",ln(vn.subarray(Sn),kn),this.trigger("data",kn);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([vn,Sn,kn]):this.processPes_(vn,Sn,kn)},this.processPes_=function(vn,kn,Sn){Sn.pid===this.programMapTable.video?Sn.streamType=StreamTypes$2.H264_STREAM_TYPE:Sn.pid===this.programMapTable.audio?Sn.streamType=StreamTypes$2.ADTS_STREAM_TYPE:Sn.streamType=this.programMapTable["timed-metadata"][Sn.pid],Sn.type="pes",Sn.data=vn.subarray(kn),this.trigger("data",Sn)}};_TransportParseStream.prototype=new Stream$7;_TransportParseStream.STREAM_TYPES={h264:27,adts:15};_ElementaryStream=function sn(){var ln=this,cn=!1,dn={data:[],size:0},pn={data:[],size:0},vn={data:[],size:0},kn,Sn=function(Nn,Ln){var Fn,zn=Nn[0]<<16|Nn[1]<<8|Nn[2];Ln.data=new Uint8Array,zn===1&&(Ln.packetLength=6+(Nn[4]<<8|Nn[5]),Ln.dataAlignmentIndicator=(Nn[6]&4)!==0,Fn=Nn[7],Fn&192&&(Ln.pts=(Nn[9]&14)<<27|(Nn[10]&255)<<20|(Nn[11]&254)<<12|(Nn[12]&255)<<5|(Nn[13]&254)>>>3,Ln.pts*=4,Ln.pts+=(Nn[13]&6)>>>1,Ln.dts=Ln.pts,Fn&64&&(Ln.dts=(Nn[14]&14)<<27|(Nn[15]&255)<<20|(Nn[16]&254)<<12|(Nn[17]&255)<<5|(Nn[18]&254)>>>3,Ln.dts*=4,Ln.dts+=(Nn[18]&6)>>>1)),Ln.data=Nn.subarray(9+Nn[8]))},wn=function(Nn,Ln,Fn){var zn=new Uint8Array(Nn.size),Dn={type:Ln},Kn=0,qn=0,Zn=!1,Yn;if(!(!Nn.data.length||Nn.size<9)){for(Dn.trackId=Nn.data[0].pid,Kn=0;Kn<Nn.data.length;Kn++)Yn=Nn.data[Kn],zn.set(Yn.data,qn),qn+=Yn.data.byteLength;Sn(zn,Dn),Zn=Ln==="video"||Dn.packetLength<=Nn.size,(Fn||Zn)&&(Nn.size=0,Nn.data.length=0),Zn&&ln.trigger("data",Dn)}};_ElementaryStream.prototype.init.call(this),this.push=function(Pn){({pat:function(){},pes:function(){var Ln,Fn;switch(Pn.streamType){case StreamTypes$2.H264_STREAM_TYPE:Ln=dn,Fn="video";break;case StreamTypes$2.ADTS_STREAM_TYPE:Ln=pn,Fn="audio";break;case StreamTypes$2.METADATA_STREAM_TYPE:Ln=vn,Fn="timed-metadata";break;default:return}Pn.payloadUnitStartIndicator&&wn(Ln,Fn,!0),Ln.data.push(Pn),Ln.size+=Pn.data.byteLength},pmt:function(){var Ln={type:"metadata",tracks:[]};kn=Pn.programMapTable,kn.video!==null&&Ln.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+kn.video,codec:"avc",type:"video"}),kn.audio!==null&&Ln.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+kn.audio,codec:"adts",type:"audio"}),cn=!0,ln.trigger("data",Ln)}})[Pn.type]()},this.reset=function(){dn.size=0,dn.data.length=0,pn.size=0,pn.data.length=0,this.trigger("reset")},this.flushStreams_=function(){wn(dn,"video"),wn(pn,"audio"),wn(vn,"timed-metadata")},this.flush=function(){if(!cn&&kn){var Pn={type:"metadata",tracks:[]};kn.video!==null&&Pn.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+kn.video,codec:"avc",type:"video"}),kn.audio!==null&&Pn.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+kn.audio,codec:"adts",type:"audio"}),ln.trigger("data",Pn)}cn=!1,this.flushStreams_(),this.trigger("done")}};_ElementaryStream.prototype=new Stream$7;var m2ts$4={PAT_PID:0,MP2T_PACKET_LENGTH:MP2T_PACKET_LENGTH$1,TransportPacketStream:_TransportPacketStream,TransportParseStream:_TransportParseStream,ElementaryStream:_ElementaryStream,TimestampRolloverStream,CaptionStream:CaptionStream$1.CaptionStream,Cea608Stream:CaptionStream$1.Cea608Stream,Cea708Stream:CaptionStream$1.Cea708Stream,MetadataStream:metadataStream};for(var type in StreamTypes$2)StreamTypes$2.hasOwnProperty(type)&&(m2ts$4[type]=StreamTypes$2[type]);var m2ts_1=m2ts$4,ADTS_SAMPLING_FREQUENCIES=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],parseId3TagSize=function sn(ln,cn){var dn=ln[cn+6]<<21|ln[cn+7]<<14|ln[cn+8]<<7|ln[cn+9],pn=ln[cn+5],vn=(pn&16)>>4;return dn=dn>=0?dn:0,vn?dn+20:dn+10},getId3Offset=function sn(ln,cn){return ln.length-cn<10||ln[cn]!=="I".charCodeAt(0)||ln[cn+1]!=="D".charCodeAt(0)||ln[cn+2]!=="3".charCodeAt(0)?cn:(cn+=parseId3TagSize(ln,cn),sn(ln,cn))},isLikelyAacData$2=function sn(ln){var cn=getId3Offset(ln,0);return ln.length>=cn+2&&(ln[cn]&255)===255&&(ln[cn+1]&240)===240&&(ln[cn+1]&22)===16},parseSyncSafeInteger=function sn(ln){return ln[0]<<21|ln[1]<<14|ln[2]<<7|ln[3]},percentEncode=function sn(ln,cn,dn){var pn,vn="";for(pn=cn;pn<dn;pn++)vn+="%"+("00"+ln[pn].toString(16)).slice(-2);return vn},parseIso88591=function sn(ln,cn,dn){return unescape(percentEncode(ln,cn,dn))},parseAdtsSize=function sn(ln,cn){var dn=(ln[cn+5]&224)>>5,pn=ln[cn+4]<<3,vn=ln[cn+3]&3<<11;return vn|pn|dn},parseType$2=function sn(ln,cn){return ln[cn]==="I".charCodeAt(0)&&ln[cn+1]==="D".charCodeAt(0)&&ln[cn+2]==="3".charCodeAt(0)?"timed-metadata":ln[cn]&!0&&(ln[cn+1]&240)===240?"audio":null},parseSampleRate=function sn(ln){for(var cn=0;cn+5<ln.length;){if(ln[cn]!==255||(ln[cn+1]&246)!==240){cn++;continue}return ADTS_SAMPLING_FREQUENCIES[(ln[cn+2]&60)>>>2]}return null},parseAacTimestamp=function sn(ln){var cn,dn,pn,vn;cn=10,ln[5]&64&&(cn+=4,cn+=parseSyncSafeInteger(ln.subarray(10,14)));do{if(dn=parseSyncSafeInteger(ln.subarray(cn+4,cn+8)),dn<1)return null;if(vn=String.fromCharCode(ln[cn],ln[cn+1],ln[cn+2],ln[cn+3]),vn==="PRIV"){pn=ln.subarray(cn+10,cn+dn+10);for(var kn=0;kn<pn.byteLength;kn++)if(pn[kn]===0){var Sn=parseIso88591(pn,0,kn);if(Sn==="com.apple.streaming.transportStreamTimestamp"){var wn=pn.subarray(kn+1),Pn=(wn[3]&1)<<30|wn[4]<<22|wn[5]<<14|wn[6]<<6|wn[7]>>>2;return Pn*=4,Pn+=wn[7]&3,Pn}break}}cn+=10,cn+=dn}while(cn<ln.byteLength);return null},utils={isLikelyAacData:isLikelyAacData$2,parseId3TagSize,parseAdtsSize,parseType:parseType$2,parseSampleRate,parseAacTimestamp},Stream$6=stream,aacUtils=utils,_AacStream;_AacStream=function sn(){var ln=new Uint8Array,cn=0;_AacStream.prototype.init.call(this),this.setTimestamp=function(dn){cn=dn},this.push=function(dn){var pn=0,vn=0,kn,Sn,wn,Pn;for(ln.length?(Pn=ln.length,ln=new Uint8Array(dn.byteLength+Pn),ln.set(ln.subarray(0,Pn)),ln.set(dn,Pn)):ln=dn;ln.length-vn>=3;){if(ln[vn]==="I".charCodeAt(0)&&ln[vn+1]==="D".charCodeAt(0)&&ln[vn+2]==="3".charCodeAt(0)){if(ln.length-vn<10||(pn=aacUtils.parseId3TagSize(ln,vn),vn+pn>ln.length))break;Sn={type:"timed-metadata",data:ln.subarray(vn,vn+pn)},this.trigger("data",Sn),vn+=pn;continue}else if((ln[vn]&255)===255&&(ln[vn+1]&240)===240){if(ln.length-vn<7||(pn=aacUtils.parseAdtsSize(ln,vn),vn+pn>ln.length))break;wn={type:"audio",data:ln.subarray(vn,vn+pn),pts:cn,dts:cn},this.trigger("data",wn),vn+=pn;continue}vn++}kn=ln.length-vn,kn>0?ln=ln.subarray(vn):ln=new Uint8Array},this.reset=function(){ln=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){ln=new Uint8Array,this.trigger("endedtimeline")}};_AacStream.prototype=new Stream$6;var aac=_AacStream,AUDIO_PROPERTIES$2=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],audioProperties=AUDIO_PROPERTIES$2,VIDEO_PROPERTIES$2=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],videoProperties=VIDEO_PROPERTIES$2,Stream$5=stream,mp4$3=mp4Generator,frameUtils$1=frameUtils$2,audioFrameUtils$1=audioFrameUtils$2,trackDecodeInfo=trackDecodeInfo$1,m2ts$3=m2ts_1,clock$1=clock$3,AdtsStream$2=adts,H264Stream$1=h264.H264Stream,AacStream$1=aac,isLikelyAacData$1=utils.isLikelyAacData,ONE_SECOND_IN_TS$2=clock$3.ONE_SECOND_IN_TS,AUDIO_PROPERTIES$1=audioProperties,VIDEO_PROPERTIES$1=videoProperties,_VideoSegmentStream$1,_AudioSegmentStream$1,_Transmuxer$1,_CoalesceStream,retriggerForStream=function sn(ln,cn){cn.stream=ln,this.trigger("log",cn)},addPipelineLogRetriggers=function sn(ln,cn){for(var dn=Object.keys(cn),pn=0;pn<dn.length;pn++){var vn=dn[pn];vn==="headOfPipeline"||!cn[vn].on||cn[vn].on("log",retriggerForStream.bind(ln,vn))}},arrayEquals=function sn(ln,cn){var dn;if(ln.length!==cn.length)return!1;for(dn=0;dn<ln.length;dn++)if(ln[dn]!==cn[dn])return!1;return!0},generateSegmentTimingInfo=function sn(ln,cn,dn,pn,vn,kn){var Sn=dn-cn,wn=pn-cn,Pn=vn-dn;return{start:{dts:ln,pts:ln+Sn},end:{dts:ln+wn,pts:ln+Pn},prependedContentDuration:kn,baseMediaDecodeTime:ln}};_AudioSegmentStream$1=function sn(ln,cn){var dn=[],pn,vn=0,kn=0,Sn=1/0;cn=cn||{},pn=cn.firstSequenceNumber||0,_AudioSegmentStream$1.prototype.init.call(this),this.push=function(wn){trackDecodeInfo.collectDtsInfo(ln,wn),ln&&AUDIO_PROPERTIES$1.forEach(function(Pn){ln[Pn]=wn[Pn]}),dn.push(wn)},this.setEarliestDts=function(wn){vn=wn},this.setVideoBaseMediaDecodeTime=function(wn){Sn=wn},this.setAudioAppendStart=function(wn){kn=wn},this.flush=function(){var wn,Pn,Nn,Ln,Fn,zn,Dn;if(dn.length===0){this.trigger("done","AudioSegmentStream");return}wn=audioFrameUtils$1.trimAdtsFramesByEarliestDts(dn,ln,vn),ln.baseMediaDecodeTime=trackDecodeInfo.calculateTrackBaseMediaDecodeTime(ln,cn.keepOriginalTimestamps),Dn=audioFrameUtils$1.prefixWithSilence(ln,wn,kn,Sn),ln.samples=audioFrameUtils$1.generateSampleTable(wn),Nn=mp4$3.mdat(audioFrameUtils$1.concatenateFrameData(wn)),dn=[],Pn=mp4$3.moof(pn,[ln]),Ln=new Uint8Array(Pn.byteLength+Nn.byteLength),pn++,Ln.set(Pn),Ln.set(Nn,Pn.byteLength),trackDecodeInfo.clearDtsInfo(ln),Fn=Math.ceil(ONE_SECOND_IN_TS$2*1024/ln.samplerate),wn.length&&(zn=wn.length*Fn,this.trigger("segmentTimingInfo",generateSegmentTimingInfo(clock$1.audioTsToVideoTs(ln.baseMediaDecodeTime,ln.samplerate),wn[0].dts,wn[0].pts,wn[0].dts+zn,wn[0].pts+zn,Dn||0)),this.trigger("timingInfo",{start:wn[0].pts,end:wn[0].pts+zn})),this.trigger("data",{track:ln,boxes:Ln}),this.trigger("done","AudioSegmentStream")},this.reset=function(){trackDecodeInfo.clearDtsInfo(ln),dn=[],this.trigger("reset")}};_AudioSegmentStream$1.prototype=new Stream$5;_VideoSegmentStream$1=function sn(ln,cn){var dn,pn=[],vn=[],kn,Sn;cn=cn||{},dn=cn.firstSequenceNumber||0,_VideoSegmentStream$1.prototype.init.call(this),delete ln.minPTS,this.gopCache_=[],this.push=function(wn){trackDecodeInfo.collectDtsInfo(ln,wn),wn.nalUnitType==="seq_parameter_set_rbsp"&&!kn&&(kn=wn.config,ln.sps=[wn.data],VIDEO_PROPERTIES$1.forEach(function(Pn){ln[Pn]=kn[Pn]},this)),wn.nalUnitType==="pic_parameter_set_rbsp"&&!Sn&&(Sn=wn.data,ln.pps=[wn.data]),pn.push(wn)},this.flush=function(){for(var wn,Pn,Nn,Ln,Fn,zn,Dn=0,Kn,qn;pn.length&&pn[0].nalUnitType!=="access_unit_delimiter_rbsp";)pn.shift();if(pn.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(wn=frameUtils$1.groupNalsIntoFrames(pn),Nn=frameUtils$1.groupFramesIntoGops(wn),Nn[0][0].keyFrame||(Pn=this.getGopForFusion_(pn[0],ln),Pn?(Dn=Pn.duration,Nn.unshift(Pn),Nn.byteLength+=Pn.byteLength,Nn.nalCount+=Pn.nalCount,Nn.pts=Pn.pts,Nn.dts=Pn.dts,Nn.duration+=Pn.duration):Nn=frameUtils$1.extendFirstKeyFrame(Nn)),vn.length){var Zn;if(cn.alignGopsAtEnd?Zn=this.alignGopsAtEnd_(Nn):Zn=this.alignGopsAtStart_(Nn),!Zn){this.gopCache_.unshift({gop:Nn.pop(),pps:ln.pps,sps:ln.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),pn=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}trackDecodeInfo.clearDtsInfo(ln),Nn=Zn}trackDecodeInfo.collectDtsInfo(ln,Nn),ln.samples=frameUtils$1.generateSampleTable(Nn),Fn=mp4$3.mdat(frameUtils$1.concatenateNalData(Nn)),ln.baseMediaDecodeTime=trackDecodeInfo.calculateTrackBaseMediaDecodeTime(ln,cn.keepOriginalTimestamps),this.trigger("processedGopsInfo",Nn.map(function(Yn){return{pts:Yn.pts,dts:Yn.dts,byteLength:Yn.byteLength}})),Kn=Nn[0],qn=Nn[Nn.length-1],this.trigger("segmentTimingInfo",generateSegmentTimingInfo(ln.baseMediaDecodeTime,Kn.dts,Kn.pts,qn.dts+qn.duration,qn.pts+qn.duration,Dn)),this.trigger("timingInfo",{start:Nn[0].pts,end:Nn[Nn.length-1].pts+Nn[Nn.length-1].duration}),this.gopCache_.unshift({gop:Nn.pop(),pps:ln.pps,sps:ln.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),pn=[],this.trigger("baseMediaDecodeTime",ln.baseMediaDecodeTime),this.trigger("timelineStartInfo",ln.timelineStartInfo),Ln=mp4$3.moof(dn,[ln]),zn=new Uint8Array(Ln.byteLength+Fn.byteLength),dn++,zn.set(Ln),zn.set(Fn,Ln.byteLength),this.trigger("data",{track:ln,boxes:zn}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),pn=[],this.gopCache_.length=0,vn.length=0,this.trigger("reset")},this.resetStream_=function(){trackDecodeInfo.clearDtsInfo(ln),kn=void 0,Sn=void 0},this.getGopForFusion_=function(wn){var Pn=45e3,Nn=1e4,Ln=1/0,Fn,zn,Dn,Kn,qn;for(qn=0;qn<this.gopCache_.length;qn++)Kn=this.gopCache_[qn],Dn=Kn.gop,!(!(ln.pps&&arrayEquals(ln.pps[0],Kn.pps[0]))||!(ln.sps&&arrayEquals(ln.sps[0],Kn.sps[0])))&&(Dn.dts<ln.timelineStartInfo.dts||(Fn=wn.dts-Dn.dts-Dn.duration,Fn>=-Nn&&Fn<=Pn&&(!zn||Ln>Fn)&&(zn=Kn,Ln=Fn)));return zn?zn.gop:null},this.alignGopsAtStart_=function(wn){var Pn,Nn,Ln,Fn,zn,Dn,Kn,qn;for(zn=wn.byteLength,Dn=wn.nalCount,Kn=wn.duration,Pn=Nn=0;Pn<vn.length&&Nn<wn.length&&(Ln=vn[Pn],Fn=wn[Nn],Ln.pts!==Fn.pts);){if(Fn.pts>Ln.pts){Pn++;continue}Nn++,zn-=Fn.byteLength,Dn-=Fn.nalCount,Kn-=Fn.duration}return Nn===0?wn:Nn===wn.length?null:(qn=wn.slice(Nn),qn.byteLength=zn,qn.duration=Kn,qn.nalCount=Dn,qn.pts=qn[0].pts,qn.dts=qn[0].dts,qn)},this.alignGopsAtEnd_=function(wn){var Pn,Nn,Ln,Fn,zn,Dn;for(Pn=vn.length-1,Nn=wn.length-1,zn=null,Dn=!1;Pn>=0&&Nn>=0;){if(Ln=vn[Pn],Fn=wn[Nn],Ln.pts===Fn.pts){Dn=!0;break}if(Ln.pts>Fn.pts){Pn--;continue}Pn===vn.length-1&&(zn=Nn),Nn--}if(!Dn&&zn===null)return null;var Kn;if(Dn?Kn=Nn:Kn=zn,Kn===0)return wn;var qn=wn.slice(Kn),Zn=qn.reduce(function(Yn,Jn){return Yn.byteLength+=Jn.byteLength,Yn.duration+=Jn.duration,Yn.nalCount+=Jn.nalCount,Yn},{byteLength:0,duration:0,nalCount:0});return qn.byteLength=Zn.byteLength,qn.duration=Zn.duration,qn.nalCount=Zn.nalCount,qn.pts=qn[0].pts,qn.dts=qn[0].dts,qn},this.alignGopsWith=function(wn){vn=wn}};_VideoSegmentStream$1.prototype=new Stream$5;_CoalesceStream=function sn(ln,cn){this.numberOfTracks=0,this.metadataStream=cn,ln=ln||{},typeof ln.remux<"u"?this.remuxTracks=!!ln.remux:this.remuxTracks=!0,typeof ln.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=ln.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,_CoalesceStream.prototype.init.call(this),this.push=function(dn){if(dn.text)return this.pendingCaptions.push(dn);if(dn.frames)return this.pendingMetadata.push(dn);this.pendingTracks.push(dn.track),this.pendingBytes+=dn.boxes.byteLength,dn.track.type==="video"&&(this.videoTrack=dn.track,this.pendingBoxes.push(dn.boxes)),dn.track.type==="audio"&&(this.audioTrack=dn.track,this.pendingBoxes.unshift(dn.boxes))}};_CoalesceStream.prototype=new Stream$5;_CoalesceStream.prototype.flush=function(sn){var ln=0,cn={captions:[],captionStreams:{},metadata:[],info:{}},dn,pn,vn,kn=0,Sn;if(this.pendingTracks.length<this.numberOfTracks){if(sn!=="VideoSegmentStream"&&sn!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(kn=this.videoTrack.timelineStartInfo.pts,VIDEO_PROPERTIES$1.forEach(function(wn){cn.info[wn]=this.videoTrack[wn]},this)):this.audioTrack&&(kn=this.audioTrack.timelineStartInfo.pts,AUDIO_PROPERTIES$1.forEach(function(wn){cn.info[wn]=this.audioTrack[wn]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?cn.type=this.pendingTracks[0].type:cn.type="combined",this.emittedTracks+=this.pendingTracks.length,vn=mp4$3.initSegment(this.pendingTracks),cn.initSegment=new Uint8Array(vn.byteLength),cn.initSegment.set(vn),cn.data=new Uint8Array(this.pendingBytes),Sn=0;Sn<this.pendingBoxes.length;Sn++)cn.data.set(this.pendingBoxes[Sn],ln),ln+=this.pendingBoxes[Sn].byteLength;for(Sn=0;Sn<this.pendingCaptions.length;Sn++)dn=this.pendingCaptions[Sn],dn.startTime=clock$1.metadataTsToSeconds(dn.startPts,kn,this.keepOriginalTimestamps),dn.endTime=clock$1.metadataTsToSeconds(dn.endPts,kn,this.keepOriginalTimestamps),cn.captionStreams[dn.stream]=!0,cn.captions.push(dn);for(Sn=0;Sn<this.pendingMetadata.length;Sn++)pn=this.pendingMetadata[Sn],pn.cueTime=clock$1.metadataTsToSeconds(pn.pts,kn,this.keepOriginalTimestamps),cn.metadata.push(pn);for(cn.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",cn),Sn=0;Sn<cn.captions.length;Sn++)dn=cn.captions[Sn],this.trigger("caption",dn);for(Sn=0;Sn<cn.metadata.length;Sn++)pn=cn.metadata[Sn],this.trigger("id3Frame",pn)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)};_CoalesceStream.prototype.setRemux=function(sn){this.remuxTracks=sn};_Transmuxer$1=function sn(ln){var cn=this,dn=!0,pn,vn;_Transmuxer$1.prototype.init.call(this),ln=ln||{},this.baseMediaDecodeTime=ln.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var kn={};this.transmuxPipeline_=kn,kn.type="aac",kn.metadataStream=new m2ts$3.MetadataStream,kn.aacStream=new AacStream$1,kn.audioTimestampRolloverStream=new m2ts$3.TimestampRolloverStream("audio"),kn.timedMetadataTimestampRolloverStream=new m2ts$3.TimestampRolloverStream("timed-metadata"),kn.adtsStream=new AdtsStream$2,kn.coalesceStream=new _CoalesceStream(ln,kn.metadataStream),kn.headOfPipeline=kn.aacStream,kn.aacStream.pipe(kn.audioTimestampRolloverStream).pipe(kn.adtsStream),kn.aacStream.pipe(kn.timedMetadataTimestampRolloverStream).pipe(kn.metadataStream).pipe(kn.coalesceStream),kn.metadataStream.on("timestamp",function(Sn){kn.aacStream.setTimestamp(Sn.timeStamp)}),kn.aacStream.on("data",function(Sn){Sn.type!=="timed-metadata"&&Sn.type!=="audio"||kn.audioSegmentStream||(vn=vn||{timelineStartInfo:{baseMediaDecodeTime:cn.baseMediaDecodeTime},codec:"adts",type:"audio"},kn.coalesceStream.numberOfTracks++,kn.audioSegmentStream=new _AudioSegmentStream$1(vn,ln),kn.audioSegmentStream.on("log",cn.getLogTrigger_("audioSegmentStream")),kn.audioSegmentStream.on("timingInfo",cn.trigger.bind(cn,"audioTimingInfo")),kn.adtsStream.pipe(kn.audioSegmentStream).pipe(kn.coalesceStream),cn.trigger("trackinfo",{hasAudio:!!vn,hasVideo:!!pn}))}),kn.coalesceStream.on("data",this.trigger.bind(this,"data")),kn.coalesceStream.on("done",this.trigger.bind(this,"done")),addPipelineLogRetriggers(this,kn)},this.setupTsPipeline=function(){var kn={};this.transmuxPipeline_=kn,kn.type="ts",kn.metadataStream=new m2ts$3.MetadataStream,kn.packetStream=new m2ts$3.TransportPacketStream,kn.parseStream=new m2ts$3.TransportParseStream,kn.elementaryStream=new m2ts$3.ElementaryStream,kn.timestampRolloverStream=new m2ts$3.TimestampRolloverStream,kn.adtsStream=new AdtsStream$2,kn.h264Stream=new H264Stream$1,kn.captionStream=new m2ts$3.CaptionStream(ln),kn.coalesceStream=new _CoalesceStream(ln,kn.metadataStream),kn.headOfPipeline=kn.packetStream,kn.packetStream.pipe(kn.parseStream).pipe(kn.elementaryStream).pipe(kn.timestampRolloverStream),kn.timestampRolloverStream.pipe(kn.h264Stream),kn.timestampRolloverStream.pipe(kn.adtsStream),kn.timestampRolloverStream.pipe(kn.metadataStream).pipe(kn.coalesceStream),kn.h264Stream.pipe(kn.captionStream).pipe(kn.coalesceStream),kn.elementaryStream.on("data",function(Sn){var wn;if(Sn.type==="metadata"){for(wn=Sn.tracks.length;wn--;)!pn&&Sn.tracks[wn].type==="video"?(pn=Sn.tracks[wn],pn.timelineStartInfo.baseMediaDecodeTime=cn.baseMediaDecodeTime):!vn&&Sn.tracks[wn].type==="audio"&&(vn=Sn.tracks[wn],vn.timelineStartInfo.baseMediaDecodeTime=cn.baseMediaDecodeTime);pn&&!kn.videoSegmentStream&&(kn.coalesceStream.numberOfTracks++,kn.videoSegmentStream=new _VideoSegmentStream$1(pn,ln),kn.videoSegmentStream.on("log",cn.getLogTrigger_("videoSegmentStream")),kn.videoSegmentStream.on("timelineStartInfo",function(Pn){vn&&!ln.keepOriginalTimestamps&&(vn.timelineStartInfo=Pn,kn.audioSegmentStream.setEarliestDts(Pn.dts-cn.baseMediaDecodeTime))}),kn.videoSegmentStream.on("processedGopsInfo",cn.trigger.bind(cn,"gopInfo")),kn.videoSegmentStream.on("segmentTimingInfo",cn.trigger.bind(cn,"videoSegmentTimingInfo")),kn.videoSegmentStream.on("baseMediaDecodeTime",function(Pn){vn&&kn.audioSegmentStream.setVideoBaseMediaDecodeTime(Pn)}),kn.videoSegmentStream.on("timingInfo",cn.trigger.bind(cn,"videoTimingInfo")),kn.h264Stream.pipe(kn.videoSegmentStream).pipe(kn.coalesceStream)),vn&&!kn.audioSegmentStream&&(kn.coalesceStream.numberOfTracks++,kn.audioSegmentStream=new _AudioSegmentStream$1(vn,ln),kn.audioSegmentStream.on("log",cn.getLogTrigger_("audioSegmentStream")),kn.audioSegmentStream.on("timingInfo",cn.trigger.bind(cn,"audioTimingInfo")),kn.audioSegmentStream.on("segmentTimingInfo",cn.trigger.bind(cn,"audioSegmentTimingInfo")),kn.adtsStream.pipe(kn.audioSegmentStream).pipe(kn.coalesceStream)),cn.trigger("trackinfo",{hasAudio:!!vn,hasVideo:!!pn})}}),kn.coalesceStream.on("data",this.trigger.bind(this,"data")),kn.coalesceStream.on("id3Frame",function(Sn){Sn.dispatchType=kn.metadataStream.dispatchType,cn.trigger("id3Frame",Sn)}),kn.coalesceStream.on("caption",this.trigger.bind(this,"caption")),kn.coalesceStream.on("done",this.trigger.bind(this,"done")),addPipelineLogRetriggers(this,kn)},this.setBaseMediaDecodeTime=function(kn){var Sn=this.transmuxPipeline_;ln.keepOriginalTimestamps||(this.baseMediaDecodeTime=kn),vn&&(vn.timelineStartInfo.dts=void 0,vn.timelineStartInfo.pts=void 0,trackDecodeInfo.clearDtsInfo(vn),Sn.audioTimestampRolloverStream&&Sn.audioTimestampRolloverStream.discontinuity()),pn&&(Sn.videoSegmentStream&&(Sn.videoSegmentStream.gopCache_=[]),pn.timelineStartInfo.dts=void 0,pn.timelineStartInfo.pts=void 0,trackDecodeInfo.clearDtsInfo(pn),Sn.captionStream.reset()),Sn.timestampRolloverStream&&Sn.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(kn){vn&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(kn)},this.setRemux=function(kn){var Sn=this.transmuxPipeline_;ln.remux=kn,Sn&&Sn.coalesceStream&&Sn.coalesceStream.setRemux(kn)},this.alignGopsWith=function(kn){pn&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(kn)},this.getLogTrigger_=function(kn){var Sn=this;return function(wn){wn.stream=kn,Sn.trigger("log",wn)}},this.push=function(kn){if(dn){var Sn=isLikelyAacData$1(kn);Sn&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!Sn&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),dn=!1}this.transmuxPipeline_.headOfPipeline.push(kn)},this.flush=function(){dn=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}};_Transmuxer$1.prototype=new Stream$5;var transmuxer$2={Transmuxer:_Transmuxer$1,VideoSegmentStream:_VideoSegmentStream$1,AudioSegmentStream:_AudioSegmentStream$1,AUDIO_PROPERTIES:AUDIO_PROPERTIES$1,VIDEO_PROPERTIES:VIDEO_PROPERTIES$1,generateSegmentTimingInfo},discardEmulationPreventionBytes=captionPacketParser.discardEmulationPreventionBytes,CaptionStream=captionStream.CaptionStream,findBox$1=findBox_1,parseTfdt=parseTfdt$2,parseTrun=parseTrun$2,parseTfhd=parseTfhd$2,window$1=window_1,mapToSample=function sn(ln,cn){for(var dn=ln,pn=0;pn<cn.length;pn++){var vn=cn[pn];if(dn<vn.size)return vn;dn-=vn.size}return null},findSeiNals=function sn(ln,cn,dn){var pn=new DataView(ln.buffer,ln.byteOffset,ln.byteLength),vn={logs:[],seiNals:[]},kn,Sn,wn,Pn;for(Sn=0;Sn+4<ln.length;Sn+=wn)if(wn=pn.getUint32(Sn),Sn+=4,!(wn<=0))switch(ln[Sn]&31){case 6:var Nn=ln.subarray(Sn+1,Sn+1+wn),Ln=mapToSample(Sn,cn);if(kn={nalUnitType:"sei_rbsp",size:wn,data:Nn,escapedRBSP:discardEmulationPreventionBytes(Nn),trackId:dn},Ln)kn.pts=Ln.pts,kn.dts=Ln.dts,Pn=Ln;else if(Pn)kn.pts=Pn.pts,kn.dts=Pn.dts;else{vn.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+Sn+" for trackId "+dn+". See mux.js#223."});break}vn.seiNals.push(kn);break}return vn},parseSamples=function sn(ln,cn,dn){var pn=cn,vn=dn.defaultSampleDuration||0,kn=dn.defaultSampleSize||0,Sn=dn.trackId,wn=[];return ln.forEach(function(Pn){var Nn=parseTrun(Pn),Ln=Nn.samples;Ln.forEach(function(Fn){Fn.duration===void 0&&(Fn.duration=vn),Fn.size===void 0&&(Fn.size=kn),Fn.trackId=Sn,Fn.dts=pn,Fn.compositionTimeOffset===void 0&&(Fn.compositionTimeOffset=0),typeof pn=="bigint"?(Fn.pts=pn+window$1.BigInt(Fn.compositionTimeOffset),pn+=window$1.BigInt(Fn.duration)):(Fn.pts=pn+Fn.compositionTimeOffset,pn+=Fn.duration)}),wn=wn.concat(Ln)}),wn},parseCaptionNals=function sn(ln,cn){var dn=findBox$1(ln,["moof","traf"]),pn=findBox$1(ln,["mdat"]),vn={},kn=[];return pn.forEach(function(Sn,wn){var Pn=dn[wn];kn.push({mdat:Sn,traf:Pn})}),kn.forEach(function(Sn){var wn=Sn.mdat,Pn=Sn.traf,Nn=findBox$1(Pn,["tfhd"]),Ln=parseTfhd(Nn[0]),Fn=Ln.trackId,zn=findBox$1(Pn,["tfdt"]),Dn=zn.length>0?parseTfdt(zn[0]).baseMediaDecodeTime:0,Kn=findBox$1(Pn,["trun"]),qn,Zn;cn===Fn&&Kn.length>0&&(qn=parseSamples(Kn,Dn,Ln),Zn=findSeiNals(wn,qn,Fn),vn[Fn]||(vn[Fn]={seiNals:[],logs:[]}),vn[Fn].seiNals=vn[Fn].seiNals.concat(Zn.seiNals),vn[Fn].logs=vn[Fn].logs.concat(Zn.logs))}),vn},parseEmbeddedCaptions=function sn(ln,cn,dn){var pn;if(cn===null)return null;pn=parseCaptionNals(ln,cn);var vn=pn[cn]||{};return{seiNals:vn.seiNals,logs:vn.logs,timescale:dn}},CaptionParser=function sn(){var ln=!1,cn,dn,pn,vn,kn,Sn;this.isInitialized=function(){return ln},this.init=function(wn){cn=new CaptionStream,ln=!0,Sn=wn?wn.isPartial:!1,cn.on("data",function(Pn){Pn.startTime=Pn.startPts/vn,Pn.endTime=Pn.endPts/vn,kn.captions.push(Pn),kn.captionStreams[Pn.stream]=!0}),cn.on("log",function(Pn){kn.logs.push(Pn)})},this.isNewInit=function(wn,Pn){return wn&&wn.length===0||Pn&&typeof Pn=="object"&&Object.keys(Pn).length===0?!1:pn!==wn[0]||vn!==Pn[pn]},this.parse=function(wn,Pn,Nn){var Ln;if(this.isInitialized()){if(!Pn||!Nn)return null;if(this.isNewInit(Pn,Nn))pn=Pn[0],vn=Nn[pn];else if(pn===null||!vn)return dn.push(wn),null}else return null;for(;dn.length>0;){var Fn=dn.shift();this.parse(Fn,Pn,Nn)}return Ln=parseEmbeddedCaptions(wn,pn,vn),Ln&&Ln.logs&&(kn.logs=kn.logs.concat(Ln.logs)),Ln===null||!Ln.seiNals?kn.logs.length?{logs:kn.logs,captions:[],captionStreams:[]}:null:(this.pushNals(Ln.seiNals),this.flushStream(),kn)},this.pushNals=function(wn){if(!this.isInitialized()||!wn||wn.length===0)return null;wn.forEach(function(Pn){cn.push(Pn)})},this.flushStream=function(){if(!this.isInitialized())return null;Sn?cn.partialFlush():cn.flush()},this.clearParsedCaptions=function(){kn.captions=[],kn.captionStreams={},kn.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;cn.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){dn=[],pn=null,vn=null,kn?this.clearParsedCaptions():kn={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},captionParser=CaptionParser,mp4$2={generator:mp4Generator,probe:probe$2,Transmuxer:transmuxer$2.Transmuxer,AudioSegmentStream:transmuxer$2.AudioSegmentStream,VideoSegmentStream:transmuxer$2.VideoSegmentStream,CaptionParser:captionParser},_FlvTag;_FlvTag=function sn(ln,cn){var dn=0,pn=16384,vn=function(Ln,Fn){var zn,Dn=Ln.position+Fn;Dn<Ln.bytes.byteLength||(zn=new Uint8Array(Dn*2),zn.set(Ln.bytes.subarray(0,Ln.position),0),Ln.bytes=zn,Ln.view=new DataView(Ln.bytes.buffer))},kn=_FlvTag.widthBytes||new Uint8Array(5),Sn=_FlvTag.heightBytes||new Uint8Array(6),wn=_FlvTag.videocodecidBytes||new Uint8Array(12),Pn;if(!_FlvTag.widthBytes){for(Pn=0;Pn<5;Pn++)kn[Pn]="width".charCodeAt(Pn);for(Pn=0;Pn<6;Pn++)Sn[Pn]="height".charCodeAt(Pn);for(Pn=0;Pn<12;Pn++)wn[Pn]="videocodecid".charCodeAt(Pn);_FlvTag.widthBytes=kn,_FlvTag.heightBytes=Sn,_FlvTag.videocodecidBytes=wn}switch(this.keyFrame=!1,ln){case _FlvTag.VIDEO_TAG:this.length=16,pn*=6;break;case _FlvTag.AUDIO_TAG:this.length=13,this.keyFrame=!0;break;case _FlvTag.METADATA_TAG:this.length=29,this.keyFrame=!0;break;default:throw new Error("Unknown FLV tag type")}this.bytes=new Uint8Array(pn),this.view=new DataView(this.bytes.buffer),this.bytes[0]=ln,this.position=this.length,this.keyFrame=cn,this.pts=0,this.dts=0,this.writeBytes=function(Nn,Ln,Fn){var zn=Ln||0,Dn;Fn=Fn||Nn.byteLength,Dn=zn+Fn,vn(this,Fn),this.bytes.set(Nn.subarray(zn,Dn),this.position),this.position+=Fn,this.length=Math.max(this.length,this.position)},this.writeByte=function(Nn){vn(this,1),this.bytes[this.position]=Nn,this.position++,this.length=Math.max(this.length,this.position)},this.writeShort=function(Nn){vn(this,2),this.view.setUint16(this.position,Nn),this.position+=2,this.length=Math.max(this.length,this.position)},this.negIndex=function(Nn){return this.bytes[this.length-Nn]},this.nalUnitSize=function(){return dn===0?0:this.length-(dn+4)},this.startNalUnit=function(){if(dn>0)throw new Error("Attempted to create new NAL wihout closing the old one");dn=this.length,this.length+=4,this.position=this.length},this.endNalUnit=function(Nn){var Ln,Fn;this.length===dn+4?this.length-=4:dn>0&&(Ln=dn+4,Fn=this.length-Ln,this.position=dn,this.view.setUint32(this.position,Fn),this.position=this.length,Nn&&Nn.push(this.bytes.subarray(Ln,Ln+Fn))),dn=0},this.writeMetaDataDouble=function(Nn,Ln){var Fn;if(vn(this,2+Nn.length+9),this.view.setUint16(this.position,Nn.length),this.position+=2,Nn==="width")this.bytes.set(kn,this.position),this.position+=5;else if(Nn==="height")this.bytes.set(Sn,this.position),this.position+=6;else if(Nn==="videocodecid")this.bytes.set(wn,this.position),this.position+=12;else for(Fn=0;Fn<Nn.length;Fn++)this.bytes[this.position]=Nn.charCodeAt(Fn),this.position++;this.position++,this.view.setFloat64(this.position,Ln),this.position+=8,this.length=Math.max(this.length,this.position),++dn},this.writeMetaDataBoolean=function(Nn,Ln){var Fn;for(vn(this,2),this.view.setUint16(this.position,Nn.length),this.position+=2,Fn=0;Fn<Nn.length;Fn++)vn(this,1),this.bytes[this.position]=Nn.charCodeAt(Fn),this.position++;vn(this,2),this.view.setUint8(this.position,1),this.position++,this.view.setUint8(this.position,Ln?1:0),this.position++,this.length=Math.max(this.length,this.position),++dn},this.finalize=function(){var Nn,Ln;switch(this.bytes[0]){case _FlvTag.VIDEO_TAG:this.bytes[11]=(this.keyFrame||cn?16:32)|7,this.bytes[12]=cn?0:1,Nn=this.pts-this.dts,this.bytes[13]=(Nn&16711680)>>>16,this.bytes[14]=(Nn&65280)>>>8,this.bytes[15]=(Nn&255)>>>0;break;case _FlvTag.AUDIO_TAG:this.bytes[11]=175,this.bytes[12]=cn?0:1;break;case _FlvTag.METADATA_TAG:this.position=11,this.view.setUint8(this.position,2),this.position++,this.view.setUint16(this.position,10),this.position+=2,this.bytes.set([111,110,77,101,116,97,68,97,116,97],this.position),this.position+=10,this.bytes[this.position]=8,this.position++,this.view.setUint32(this.position,dn),this.position=this.length,this.bytes.set([0,0,9],this.position),this.position+=3,this.length=this.position;break}return Ln=this.length-11,this.bytes[1]=(Ln&16711680)>>>16,this.bytes[2]=(Ln&65280)>>>8,this.bytes[3]=(Ln&255)>>>0,this.bytes[4]=(this.dts&16711680)>>>16,this.bytes[5]=(this.dts&65280)>>>8,this.bytes[6]=(this.dts&255)>>>0,this.bytes[7]=(this.dts&4278190080)>>>24,this.bytes[8]=0,this.bytes[9]=0,this.bytes[10]=0,vn(this,4),this.view.setUint32(this.length,this.length),this.length+=4,this.position+=4,this.bytes=this.bytes.subarray(0,this.length),this.frameTime=_FlvTag.frameTime(this.bytes),this}};_FlvTag.AUDIO_TAG=8;_FlvTag.VIDEO_TAG=9;_FlvTag.METADATA_TAG=18;_FlvTag.isAudioFrame=function(sn){return _FlvTag.AUDIO_TAG===sn[0]};_FlvTag.isVideoFrame=function(sn){return _FlvTag.VIDEO_TAG===sn[0]};_FlvTag.isMetaData=function(sn){return _FlvTag.METADATA_TAG===sn[0]};_FlvTag.isKeyFrame=function(sn){return _FlvTag.isVideoFrame(sn)?sn[11]===23:!!(_FlvTag.isAudioFrame(sn)||_FlvTag.isMetaData(sn))};_FlvTag.frameTime=function(sn){var ln=sn[4]<<16;return ln|=sn[5]<<8,ln|=sn[6]<<0,ln|=sn[7]<<24,ln};var flvTag=_FlvTag,Stream$4=stream,CoalesceStream$1=function sn(ln){this.numberOfTracks=0,this.metadataStream=ln.metadataStream,this.videoTags=[],this.audioTags=[],this.videoTrack=null,this.audioTrack=null,this.pendingCaptions=[],this.pendingMetadata=[],this.pendingTracks=0,this.processedTracks=0,sn.prototype.init.call(this),this.push=function(cn){if(cn.text)return this.pendingCaptions.push(cn);if(cn.frames)return this.pendingMetadata.push(cn);cn.track.type==="video"&&(this.videoTrack=cn.track,this.videoTags=cn.tags,this.pendingTracks++),cn.track.type==="audio"&&(this.audioTrack=cn.track,this.audioTags=cn.tags,this.pendingTracks++)}};CoalesceStream$1.prototype=new Stream$4;CoalesceStream$1.prototype.flush=function(sn){var ln,cn,dn,pn,vn={tags:{},captions:[],captionStreams:{},metadata:[]};if(this.pendingTracks<this.numberOfTracks){if(sn!=="VideoSegmentStream"&&sn!=="AudioSegmentStream")return;if(this.pendingTracks===0&&(this.processedTracks++,this.processedTracks<this.numberOfTracks))return}if(this.processedTracks+=this.pendingTracks,this.pendingTracks=0,!(this.processedTracks<this.numberOfTracks)){for(this.videoTrack?pn=this.videoTrack.timelineStartInfo.pts:this.audioTrack&&(pn=this.audioTrack.timelineStartInfo.pts),vn.tags.videoTags=this.videoTags,vn.tags.audioTags=this.audioTags,dn=0;dn<this.pendingCaptions.length;dn++)cn=this.pendingCaptions[dn],cn.startTime=cn.startPts-pn,cn.startTime/=9e4,cn.endTime=cn.endPts-pn,cn.endTime/=9e4,vn.captionStreams[cn.stream]=!0,vn.captions.push(cn);for(dn=0;dn<this.pendingMetadata.length;dn++)ln=this.pendingMetadata[dn],ln.cueTime=ln.pts-pn,ln.cueTime/=9e4,vn.metadata.push(ln);vn.metadata.dispatchType=this.metadataStream.dispatchType,this.videoTrack=null,this.audioTrack=null,this.videoTags=[],this.audioTags=[],this.pendingCaptions.length=0,this.pendingMetadata.length=0,this.pendingTracks=0,this.processedTracks=0,this.trigger("data",vn),this.trigger("done")}};var coalesceStream=CoalesceStream$1,TagList$1=function sn(){var ln=this;this.list=[],this.push=function(cn){this.list.push({bytes:cn.bytes,dts:cn.dts,pts:cn.pts,keyFrame:cn.keyFrame,metaDataTag:cn.metaDataTag})},Object.defineProperty(this,"length",{get:function(){return ln.list.length}})},tagList=TagList$1,Stream$3=stream,FlvTag$1=flvTag,m2ts$2=m2ts_1,AdtsStream$1=adts,H264Stream=h264.H264Stream,CoalesceStream=coalesceStream,TagList=tagList,_Transmuxer,_VideoSegmentStream,_AudioSegmentStream,collectTimelineInfo,metaDataTag,extraDataTag;collectTimelineInfo=function sn(ln,cn){typeof cn.pts=="number"&&(ln.timelineStartInfo.pts===void 0?ln.timelineStartInfo.pts=cn.pts:ln.timelineStartInfo.pts=Math.min(ln.timelineStartInfo.pts,cn.pts)),typeof cn.dts=="number"&&(ln.timelineStartInfo.dts===void 0?ln.timelineStartInfo.dts=cn.dts:ln.timelineStartInfo.dts=Math.min(ln.timelineStartInfo.dts,cn.dts))};metaDataTag=function sn(ln,cn){var dn=new FlvTag$1(FlvTag$1.METADATA_TAG);return dn.dts=cn,dn.pts=cn,dn.writeMetaDataDouble("videocodecid",7),dn.writeMetaDataDouble("width",ln.width),dn.writeMetaDataDouble("height",ln.height),dn};extraDataTag=function sn(ln,cn){var dn,pn=new FlvTag$1(FlvTag$1.VIDEO_TAG,!0);for(pn.dts=cn,pn.pts=cn,pn.writeByte(1),pn.writeByte(ln.profileIdc),pn.writeByte(ln.profileCompatibility),pn.writeByte(ln.levelIdc),pn.writeByte(255),pn.writeByte(225),pn.writeShort(ln.sps[0].length),pn.writeBytes(ln.sps[0]),pn.writeByte(ln.pps.length),dn=0;dn<ln.pps.length;++dn)pn.writeShort(ln.pps[dn].length),pn.writeBytes(ln.pps[dn]);return pn};_AudioSegmentStream=function sn(ln){var cn=[],dn=[],pn;_AudioSegmentStream.prototype.init.call(this),this.push=function(vn){collectTimelineInfo(ln,vn),ln&&(ln.audioobjecttype=vn.audioobjecttype,ln.channelcount=vn.channelcount,ln.samplerate=vn.samplerate,ln.samplingfrequencyindex=vn.samplingfrequencyindex,ln.samplesize=vn.samplesize,ln.extraData=ln.audioobjecttype<<11|ln.samplingfrequencyindex<<7|ln.channelcount<<3),vn.pts=Math.round(vn.pts/90),vn.dts=Math.round(vn.dts/90),cn.push(vn)},this.flush=function(){var vn,kn,Sn,wn=new TagList;if(cn.length===0){this.trigger("done","AudioSegmentStream");return}for(Sn=-1/0;cn.length;)vn=cn.shift(),dn.length&&vn.pts>=dn[0]&&(Sn=dn.shift(),this.writeMetaDataTags(wn,Sn)),(ln.extraData!==pn||vn.pts-Sn>=1e3)&&(this.writeMetaDataTags(wn,vn.pts),pn=ln.extraData,Sn=vn.pts),kn=new FlvTag$1(FlvTag$1.AUDIO_TAG),kn.pts=vn.pts,kn.dts=vn.dts,kn.writeBytes(vn.data),wn.push(kn.finalize());dn.length=0,pn=null,this.trigger("data",{track:ln,tags:wn.list}),this.trigger("done","AudioSegmentStream")},this.writeMetaDataTags=function(vn,kn){var Sn;Sn=new FlvTag$1(FlvTag$1.METADATA_TAG),Sn.pts=kn,Sn.dts=kn,Sn.writeMetaDataDouble("audiocodecid",10),Sn.writeMetaDataBoolean("stereo",ln.channelcount===2),Sn.writeMetaDataDouble("audiosamplerate",ln.samplerate),Sn.writeMetaDataDouble("audiosamplesize",16),vn.push(Sn.finalize()),Sn=new FlvTag$1(FlvTag$1.AUDIO_TAG,!0),Sn.pts=kn,Sn.dts=kn,Sn.view.setUint16(Sn.position,ln.extraData),Sn.position+=2,Sn.length=Math.max(Sn.length,Sn.position),vn.push(Sn.finalize())},this.onVideoKeyFrame=function(vn){dn.push(vn)}};_AudioSegmentStream.prototype=new Stream$3;_VideoSegmentStream=function sn(ln){var cn=[],dn,pn;_VideoSegmentStream.prototype.init.call(this),this.finishFrame=function(vn,kn){if(kn){if(dn&&ln&&ln.newMetadata&&(kn.keyFrame||vn.length===0)){var Sn=metaDataTag(dn,kn.dts).finalize(),wn=extraDataTag(ln,kn.dts).finalize();Sn.metaDataTag=wn.metaDataTag=!0,vn.push(Sn),vn.push(wn),ln.newMetadata=!1,this.trigger("keyframe",kn.dts)}kn.endNalUnit(),vn.push(kn.finalize()),pn=null}},this.push=function(vn){collectTimelineInfo(ln,vn),vn.pts=Math.round(vn.pts/90),vn.dts=Math.round(vn.dts/90),cn.push(vn)},this.flush=function(){for(var vn,kn=new TagList;cn.length&&cn[0].nalUnitType!=="access_unit_delimiter_rbsp";)cn.shift();if(cn.length===0){this.trigger("done","VideoSegmentStream");return}for(;cn.length;)vn=cn.shift(),vn.nalUnitType==="seq_parameter_set_rbsp"?(ln.newMetadata=!0,dn=vn.config,ln.width=dn.width,ln.height=dn.height,ln.sps=[vn.data],ln.profileIdc=dn.profileIdc,ln.levelIdc=dn.levelIdc,ln.profileCompatibility=dn.profileCompatibility,pn.endNalUnit()):vn.nalUnitType==="pic_parameter_set_rbsp"?(ln.newMetadata=!0,ln.pps=[vn.data],pn.endNalUnit()):vn.nalUnitType==="access_unit_delimiter_rbsp"?(pn&&this.finishFrame(kn,pn),pn=new FlvTag$1(FlvTag$1.VIDEO_TAG),pn.pts=vn.pts,pn.dts=vn.dts):(vn.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(pn.keyFrame=!0),pn.endNalUnit()),pn.startNalUnit(),pn.writeBytes(vn.data);pn&&this.finishFrame(kn,pn),this.trigger("data",{track:ln,tags:kn.list}),this.trigger("done","VideoSegmentStream")}};_VideoSegmentStream.prototype=new Stream$3;_Transmuxer=function sn(ln){var cn=this,dn,pn,vn,kn,Sn,wn,Pn,Nn,Ln,Fn,zn,Dn;_Transmuxer.prototype.init.call(this),ln=ln||{},this.metadataStream=new m2ts$2.MetadataStream,ln.metadataStream=this.metadataStream,dn=new m2ts$2.TransportPacketStream,pn=new m2ts$2.TransportParseStream,vn=new m2ts$2.ElementaryStream,kn=new m2ts$2.TimestampRolloverStream("video"),Sn=new m2ts$2.TimestampRolloverStream("audio"),wn=new m2ts$2.TimestampRolloverStream("timed-metadata"),Pn=new AdtsStream$1,Nn=new H264Stream,Dn=new CoalesceStream(ln),dn.pipe(pn).pipe(vn),vn.pipe(kn).pipe(Nn),vn.pipe(Sn).pipe(Pn),vn.pipe(wn).pipe(this.metadataStream).pipe(Dn),zn=new m2ts$2.CaptionStream(ln),Nn.pipe(zn).pipe(Dn),vn.on("data",function(Kn){var qn,Zn,Yn;if(Kn.type==="metadata"){for(qn=Kn.tracks.length;qn--;)Kn.tracks[qn].type==="video"?Zn=Kn.tracks[qn]:Kn.tracks[qn].type==="audio"&&(Yn=Kn.tracks[qn]);Zn&&!Ln&&(Dn.numberOfTracks++,Ln=new _VideoSegmentStream(Zn),Nn.pipe(Ln).pipe(Dn)),Yn&&!Fn&&(Dn.numberOfTracks++,Fn=new _AudioSegmentStream(Yn),Pn.pipe(Fn).pipe(Dn),Ln&&Ln.on("keyframe",Fn.onVideoKeyFrame))}}),this.push=function(Kn){dn.push(Kn)},this.flush=function(){dn.flush()},this.resetCaptions=function(){zn.reset()},Dn.on("data",function(Kn){cn.trigger("data",Kn)}),Dn.on("done",function(){cn.trigger("done")})};_Transmuxer.prototype=new Stream$3;var transmuxer$1=_Transmuxer,FlvTag=flvTag,getFlvHeader=function sn(ln,cn,dn){var pn=new Uint8Array(9),vn=new DataView(pn.buffer),kn,Sn,wn;return ln=ln||0,cn=cn===void 0?!0:cn,dn=dn===void 0?!0:dn,vn.setUint8(0,70),vn.setUint8(1,76),vn.setUint8(2,86),vn.setUint8(3,1),vn.setUint8(4,(cn?4:0)|(dn?1:0)),vn.setUint32(5,pn.byteLength),ln<=0?(Sn=new Uint8Array(pn.byteLength+4),Sn.set(pn),Sn.set([0,0,0,0],pn.byteLength),Sn):(kn=new FlvTag(FlvTag.METADATA_TAG),kn.pts=kn.dts=0,kn.writeMetaDataDouble("duration",ln),wn=kn.finalize().length,Sn=new Uint8Array(pn.byteLength+wn),Sn.set(pn),Sn.set(vn.byteLength,wn),Sn)},flvHeader=getFlvHeader,flv={tag:flvTag,Transmuxer:transmuxer$1,getFlvHeader:flvHeader},m2ts$1=m2ts_1,Stream$2=stream,mp4$1=mp4Generator,audioFrameUtils=audioFrameUtils$2,trackInfo$2=trackDecodeInfo$1,ONE_SECOND_IN_TS$1=clock$3.ONE_SECOND_IN_TS,AUDIO_PROPERTIES=audioProperties,AudioSegmentStream$1=function sn(ln,cn){var dn=[],pn=0,vn=0,kn=0,Sn=1/0,wn=null,Pn=null;cn=cn||{},sn.prototype.init.call(this),this.push=function(Nn){trackInfo$2.collectDtsInfo(ln,Nn),ln&&AUDIO_PROPERTIES.forEach(function(Ln){ln[Ln]=Nn[Ln]}),dn.push(Nn)},this.setEarliestDts=function(Nn){vn=Nn},this.setVideoBaseMediaDecodeTime=function(Nn){Sn=Nn},this.setAudioAppendStart=function(Nn){kn=Nn},this.processFrames_=function(){var Nn,Ln,Fn,zn,Dn;dn.length!==0&&(Nn=audioFrameUtils.trimAdtsFramesByEarliestDts(dn,ln,vn),Nn.length!==0&&(ln.baseMediaDecodeTime=trackInfo$2.calculateTrackBaseMediaDecodeTime(ln,cn.keepOriginalTimestamps),audioFrameUtils.prefixWithSilence(ln,Nn,kn,Sn),ln.samples=audioFrameUtils.generateSampleTable(Nn),Fn=mp4$1.mdat(audioFrameUtils.concatenateFrameData(Nn)),dn=[],Ln=mp4$1.moof(pn,[ln]),pn++,ln.initSegment=mp4$1.initSegment([ln]),zn=new Uint8Array(Ln.byteLength+Fn.byteLength),zn.set(Ln),zn.set(Fn,Ln.byteLength),trackInfo$2.clearDtsInfo(ln),wn===null&&(Pn=wn=Nn[0].pts),Pn+=Nn.length*(ONE_SECOND_IN_TS$1*1024/ln.samplerate),Dn={start:wn},this.trigger("timingInfo",Dn),this.trigger("data",{track:ln,boxes:zn})))},this.flush=function(){this.processFrames_(),this.trigger("timingInfo",{start:wn,end:Pn}),this.resetTiming_(),this.trigger("done","AudioSegmentStream")},this.partialFlush=function(){this.processFrames_(),this.trigger("partialdone","AudioSegmentStream")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline","AudioSegmentStream")},this.resetTiming_=function(){trackInfo$2.clearDtsInfo(ln),wn=null,Pn=null},this.reset=function(){this.resetTiming_(),dn=[],this.trigger("reset")}};AudioSegmentStream$1.prototype=new Stream$2;var audioSegmentStream=AudioSegmentStream$1,Stream$1=stream,mp4=mp4Generator,trackInfo$1=trackDecodeInfo$1,frameUtils=frameUtils$2,VIDEO_PROPERTIES=videoProperties,VideoSegmentStream$1=function sn(ln,cn){var dn=0,pn=[],vn=[],kn,Sn,wn=null,Pn=null,Nn,Ln=!0;cn=cn||{},sn.prototype.init.call(this),this.push=function(Fn){trackInfo$1.collectDtsInfo(ln,Fn),typeof ln.timelineStartInfo.dts>"u"&&(ln.timelineStartInfo.dts=Fn.dts),Fn.nalUnitType==="seq_parameter_set_rbsp"&&!kn&&(kn=Fn.config,ln.sps=[Fn.data],VIDEO_PROPERTIES.forEach(function(zn){ln[zn]=kn[zn]},this)),Fn.nalUnitType==="pic_parameter_set_rbsp"&&!Sn&&(Sn=Fn.data,ln.pps=[Fn.data]),pn.push(Fn)},this.processNals_=function(Fn){var zn;for(pn=vn.concat(pn);pn.length&&pn[0].nalUnitType!=="access_unit_delimiter_rbsp";)pn.shift();if(pn.length!==0){var Dn=frameUtils.groupNalsIntoFrames(pn);if(Dn.length){if(vn=Dn[Dn.length-1],Fn&&(Dn.pop(),Dn.duration-=vn.duration,Dn.nalCount-=vn.length,Dn.byteLength-=vn.byteLength),!Dn.length){pn=[];return}if(this.trigger("timelineStartInfo",ln.timelineStartInfo),Ln){if(Nn=frameUtils.groupFramesIntoGops(Dn),!Nn[0][0].keyFrame){if(Nn=frameUtils.extendFirstKeyFrame(Nn),!Nn[0][0].keyFrame){pn=[].concat.apply([],Dn).concat(vn),vn=[];return}Dn=[].concat.apply([],Nn),Dn.duration=Nn.duration}Ln=!1}for(wn===null&&(wn=Dn[0].pts,Pn=wn),Pn+=Dn.duration,this.trigger("timingInfo",{start:wn,end:Pn}),zn=0;zn<Dn.length;zn++){var Kn=Dn[zn];ln.samples=frameUtils.generateSampleTableForFrame(Kn);var qn=mp4.mdat(frameUtils.concatenateNalDataForFrame(Kn));trackInfo$1.clearDtsInfo(ln),trackInfo$1.collectDtsInfo(ln,Kn),ln.baseMediaDecodeTime=trackInfo$1.calculateTrackBaseMediaDecodeTime(ln,cn.keepOriginalTimestamps);var Zn=mp4.moof(dn,[ln]);dn++,ln.initSegment=mp4.initSegment([ln]);var Yn=new Uint8Array(Zn.byteLength+qn.byteLength);Yn.set(Zn),Yn.set(qn,Zn.byteLength),this.trigger("data",{track:ln,boxes:Yn,sequence:dn,videoFrameDts:Kn.dts,videoFramePts:Kn.pts})}pn=[]}}},this.resetTimingAndConfig_=function(){kn=void 0,Sn=void 0,wn=null,Pn=null},this.partialFlush=function(){this.processNals_(!0),this.trigger("partialdone","VideoSegmentStream")},this.flush=function(){this.processNals_(!1),this.resetTimingAndConfig_(),this.trigger("done","VideoSegmentStream")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline","VideoSegmentStream")},this.reset=function(){this.resetTimingAndConfig_(),vn=[],pn=[],Ln=!0,this.trigger("reset")}};VideoSegmentStream$1.prototype=new Stream$1;var videoSegmentStream=VideoSegmentStream$1,Stream=stream,m2ts=m2ts_1,codecs=codecs$1,AudioSegmentStream=audioSegmentStream,VideoSegmentStream=videoSegmentStream,trackInfo=trackDecodeInfo$1,isLikelyAacData=utils.isLikelyAacData,AdtsStream=adts,AacStream=aac,clock=clock$3,createPipeline=function sn(ln){return ln.prototype=new Stream,ln.prototype.init.call(ln),ln},tsPipeline=function sn(ln){var cn={type:"ts",tracks:{audio:null,video:null},packet:new m2ts.TransportPacketStream,parse:new m2ts.TransportParseStream,elementary:new m2ts.ElementaryStream,timestampRollover:new m2ts.TimestampRolloverStream,adts:new codecs.Adts,h264:new codecs.h264.H264Stream,captionStream:new m2ts.CaptionStream(ln),metadataStream:new m2ts.MetadataStream};return cn.headOfPipeline=cn.packet,cn.packet.pipe(cn.parse).pipe(cn.elementary).pipe(cn.timestampRollover),cn.timestampRollover.pipe(cn.h264),cn.h264.pipe(cn.captionStream),cn.timestampRollover.pipe(cn.metadataStream),cn.timestampRollover.pipe(cn.adts),cn.elementary.on("data",function(dn){if(dn.type==="metadata"){for(var pn=0;pn<dn.tracks.length;pn++)cn.tracks[dn.tracks[pn].type]||(cn.tracks[dn.tracks[pn].type]=dn.tracks[pn],cn.tracks[dn.tracks[pn].type].timelineStartInfo.baseMediaDecodeTime=ln.baseMediaDecodeTime);cn.tracks.video&&!cn.videoSegmentStream&&(cn.videoSegmentStream=new VideoSegmentStream(cn.tracks.video,ln),cn.videoSegmentStream.on("timelineStartInfo",function(vn){cn.tracks.audio&&!ln.keepOriginalTimestamps&&cn.audioSegmentStream.setEarliestDts(vn.dts-ln.baseMediaDecodeTime)}),cn.videoSegmentStream.on("timingInfo",cn.trigger.bind(cn,"videoTimingInfo")),cn.videoSegmentStream.on("data",function(vn){cn.trigger("data",{type:"video",data:vn})}),cn.videoSegmentStream.on("done",cn.trigger.bind(cn,"done")),cn.videoSegmentStream.on("partialdone",cn.trigger.bind(cn,"partialdone")),cn.videoSegmentStream.on("endedtimeline",cn.trigger.bind(cn,"endedtimeline")),cn.h264.pipe(cn.videoSegmentStream)),cn.tracks.audio&&!cn.audioSegmentStream&&(cn.audioSegmentStream=new AudioSegmentStream(cn.tracks.audio,ln),cn.audioSegmentStream.on("data",function(vn){cn.trigger("data",{type:"audio",data:vn})}),cn.audioSegmentStream.on("done",cn.trigger.bind(cn,"done")),cn.audioSegmentStream.on("partialdone",cn.trigger.bind(cn,"partialdone")),cn.audioSegmentStream.on("endedtimeline",cn.trigger.bind(cn,"endedtimeline")),cn.audioSegmentStream.on("timingInfo",cn.trigger.bind(cn,"audioTimingInfo")),cn.adts.pipe(cn.audioSegmentStream)),cn.trigger("trackinfo",{hasAudio:!!cn.tracks.audio,hasVideo:!!cn.tracks.video})}}),cn.captionStream.on("data",function(dn){var pn;cn.tracks.video?pn=cn.tracks.video.timelineStartInfo.pts||0:pn=0,dn.startTime=clock.metadataTsToSeconds(dn.startPts,pn,ln.keepOriginalTimestamps),dn.endTime=clock.metadataTsToSeconds(dn.endPts,pn,ln.keepOriginalTimestamps),cn.trigger("caption",dn)}),cn=createPipeline(cn),cn.metadataStream.on("data",cn.trigger.bind(cn,"id3Frame")),cn},aacPipeline=function sn(ln){var cn={type:"aac",tracks:{audio:null},metadataStream:new m2ts.MetadataStream,aacStream:new AacStream,audioRollover:new m2ts.TimestampRolloverStream("audio"),timedMetadataRollover:new m2ts.TimestampRolloverStream("timed-metadata"),adtsStream:new AdtsStream(!0)};return cn.headOfPipeline=cn.aacStream,cn.aacStream.pipe(cn.audioRollover).pipe(cn.adtsStream),cn.aacStream.pipe(cn.timedMetadataRollover).pipe(cn.metadataStream),cn.metadataStream.on("timestamp",function(dn){cn.aacStream.setTimestamp(dn.timeStamp)}),cn.aacStream.on("data",function(dn){dn.type!=="timed-metadata"&&dn.type!=="audio"||cn.audioSegmentStream||(cn.tracks.audio=cn.tracks.audio||{timelineStartInfo:{baseMediaDecodeTime:ln.baseMediaDecodeTime},codec:"adts",type:"audio"},cn.audioSegmentStream=new AudioSegmentStream(cn.tracks.audio,ln),cn.audioSegmentStream.on("data",function(pn){cn.trigger("data",{type:"audio",data:pn})}),cn.audioSegmentStream.on("partialdone",cn.trigger.bind(cn,"partialdone")),cn.audioSegmentStream.on("done",cn.trigger.bind(cn,"done")),cn.audioSegmentStream.on("endedtimeline",cn.trigger.bind(cn,"endedtimeline")),cn.audioSegmentStream.on("timingInfo",cn.trigger.bind(cn,"audioTimingInfo")),cn.adtsStream.pipe(cn.audioSegmentStream),cn.trigger("trackinfo",{hasAudio:!!cn.tracks.audio,hasVideo:!!cn.tracks.video}))}),cn=createPipeline(cn),cn.metadataStream.on("data",cn.trigger.bind(cn,"id3Frame")),cn},setupPipelineListeners=function sn(ln,cn){ln.on("data",cn.trigger.bind(cn,"data")),ln.on("done",cn.trigger.bind(cn,"done")),ln.on("partialdone",cn.trigger.bind(cn,"partialdone")),ln.on("endedtimeline",cn.trigger.bind(cn,"endedtimeline")),ln.on("audioTimingInfo",cn.trigger.bind(cn,"audioTimingInfo")),ln.on("videoTimingInfo",cn.trigger.bind(cn,"videoTimingInfo")),ln.on("trackinfo",cn.trigger.bind(cn,"trackinfo")),ln.on("id3Frame",function(dn){dn.dispatchType=ln.metadataStream.dispatchType,dn.cueTime=clock.videoTsToSeconds(dn.pts),cn.trigger("id3Frame",dn)}),ln.on("caption",function(dn){cn.trigger("caption",dn)})},Transmuxer=function sn(ln){var cn=null,dn=!0;ln=ln||{},sn.prototype.init.call(this),ln.baseMediaDecodeTime=ln.baseMediaDecodeTime||0,this.push=function(pn){if(dn){var vn=isLikelyAacData(pn);vn&&(!cn||cn.type!=="aac")?(cn=aacPipeline(ln),setupPipelineListeners(cn,this)):!vn&&(!cn||cn.type!=="ts")&&(cn=tsPipeline(ln),setupPipelineListeners(cn,this)),dn=!1}cn.headOfPipeline.push(pn)},this.flush=function(){cn&&(dn=!0,cn.headOfPipeline.flush())},this.partialFlush=function(){cn&&cn.headOfPipeline.partialFlush()},this.endTimeline=function(){cn&&cn.headOfPipeline.endTimeline()},this.reset=function(){cn&&cn.headOfPipeline.reset()},this.setBaseMediaDecodeTime=function(pn){ln.keepOriginalTimestamps||(ln.baseMediaDecodeTime=pn),cn&&(cn.tracks.audio&&(cn.tracks.audio.timelineStartInfo.dts=void 0,cn.tracks.audio.timelineStartInfo.pts=void 0,trackInfo.clearDtsInfo(cn.tracks.audio),cn.audioRollover&&cn.audioRollover.discontinuity()),cn.tracks.video&&(cn.videoSegmentStream&&(cn.videoSegmentStream.gopCache_=[]),cn.tracks.video.timelineStartInfo.dts=void 0,cn.tracks.video.timelineStartInfo.pts=void 0,trackInfo.clearDtsInfo(cn.tracks.video)),cn.timestampRollover&&cn.timestampRollover.discontinuity())},this.setRemux=function(pn){ln.remux=pn,cn&&cn.coalesceStream&&cn.coalesceStream.setRemux(pn)},this.setAudioAppendStart=function(pn){!cn||!cn.tracks.audio||!cn.audioSegmentStream||cn.audioSegmentStream.setAudioAppendStart(pn)},this.alignGopsWith=function(pn){}};Transmuxer.prototype=new Stream;var transmuxer=Transmuxer,partial={Transmuxer:transmuxer},parseSidx_1,hasRequiredParseSidx;function requireParseSidx(){if(hasRequiredParseSidx)return parseSidx_1;hasRequiredParseSidx=1;var sn=numbers.getUint64,ln=function(dn){var pn=new DataView(dn.buffer,dn.byteOffset,dn.byteLength),vn={version:dn[0],flags:new Uint8Array(dn.subarray(1,4)),references:[],referenceId:pn.getUint32(4),timescale:pn.getUint32(8)},kn=12;vn.version===0?(vn.earliestPresentationTime=pn.getUint32(kn),vn.firstOffset=pn.getUint32(kn+4),kn+=8):(vn.earliestPresentationTime=sn(dn.subarray(kn)),vn.firstOffset=sn(dn.subarray(kn+8)),kn+=16),kn+=2;var Sn=pn.getUint16(kn);for(kn+=2;Sn>0;kn+=12,Sn--)vn.references.push({referenceType:(dn[kn]&128)>>>7,referencedSize:pn.getUint32(kn)&2147483647,subsegmentDuration:pn.getUint32(kn+4),startsWithSap:!!(dn[kn+8]&128),sapType:(dn[kn+8]&112)>>>4,sapDeltaTime:pn.getUint32(kn+8)&268435455});return vn};return parseSidx_1=ln,parseSidx_1}var numberHelpers=numbers;numberHelpers.MAX_UINT32;var getUint64=numberHelpers.getUint64,inspectMp4,_textifyMp,parseMp4Date=function sn(ln){return new Date(ln*1e3-20828448e5)},parseType$1=parseType_1,findBox=findBox_1,nalParse=function sn(ln){var cn=new DataView(ln.buffer,ln.byteOffset,ln.byteLength),dn=[],pn,vn;for(pn=0;pn+4<ln.length;pn+=vn){if(vn=cn.getUint32(pn),pn+=4,vn<=0){dn.push("<span style='color:red;'>MALFORMED DATA</span>");continue}switch(ln[pn]&31){case 1:dn.push("slice_layer_without_partitioning_rbsp");break;case 5:dn.push("slice_layer_without_partitioning_rbsp_idr");break;case 6:dn.push("sei_rbsp");break;case 7:dn.push("seq_parameter_set_rbsp");break;case 8:dn.push("pic_parameter_set_rbsp");break;case 9:dn.push("access_unit_delimiter_rbsp");break;default:dn.push("UNKNOWN NAL - "+ln[pn]&31);break}}return dn},parse={avc1:function sn(ln){var cn=new DataView(ln.buffer,ln.byteOffset,ln.byteLength);return{dataReferenceIndex:cn.getUint16(6),width:cn.getUint16(24),height:cn.getUint16(26),horizresolution:cn.getUint16(28)+cn.getUint16(30)/16,vertresolution:cn.getUint16(32)+cn.getUint16(34)/16,frameCount:cn.getUint16(40),depth:cn.getUint16(74),config:inspectMp4(ln.subarray(78,ln.byteLength))}},avcC:function sn(ln){var cn=new DataView(ln.buffer,ln.byteOffset,ln.byteLength),dn={configurationVersion:ln[0],avcProfileIndication:ln[1],profileCompatibility:ln[2],avcLevelIndication:ln[3],lengthSizeMinusOne:ln[4]&3,sps:[],pps:[]},pn=ln[5]&31,vn,kn,Sn,wn;for(Sn=6,wn=0;wn<pn;wn++)kn=cn.getUint16(Sn),Sn+=2,dn.sps.push(new Uint8Array(ln.subarray(Sn,Sn+kn))),Sn+=kn;for(vn=ln[Sn],Sn++,wn=0;wn<vn;wn++)kn=cn.getUint16(Sn),Sn+=2,dn.pps.push(new Uint8Array(ln.subarray(Sn,Sn+kn))),Sn+=kn;return dn},btrt:function sn(ln){var cn=new DataView(ln.buffer,ln.byteOffset,ln.byteLength);return{bufferSizeDB:cn.getUint32(0),maxBitrate:cn.getUint32(4),avgBitrate:cn.getUint32(8)}},edts:function sn(ln){return{boxes:inspectMp4(ln)}},elst:function sn(ln){var cn=new DataView(ln.buffer,ln.byteOffset,ln.byteLength),dn={version:cn.getUint8(0),flags:new Uint8Array(ln.subarray(1,4)),edits:[]},pn=cn.getUint32(4),vn;for(vn=8;pn;pn--)dn.version===0?(dn.edits.push({segmentDuration:cn.getUint32(vn),mediaTime:cn.getInt32(vn+4),mediaRate:cn.getUint16(vn+8)+cn.getUint16(vn+10)/(256*256)}),vn+=12):(dn.edits.push({segmentDuration:getUint64(ln.subarray(vn)),mediaTime:getUint64(ln.subarray(vn+8)),mediaRate:cn.getUint16(vn+16)+cn.getUint16(vn+18)/(256*256)}),vn+=20);return dn},esds:function sn(ln){return{version:ln[0],flags:new Uint8Array(ln.subarray(1,4)),esId:ln[6]<<8|ln[7],streamPriority:ln[8]&31,decoderConfig:{objectProfileIndication:ln[11],streamType:ln[12]>>>2&63,bufferSize:ln[13]<<16|ln[14]<<8|ln[15],maxBitrate:ln[16]<<24|ln[17]<<16|ln[18]<<8|ln[19],avgBitrate:ln[20]<<24|ln[21]<<16|ln[22]<<8|ln[23],decoderConfigDescriptor:{tag:ln[24],length:ln[25],audioObjectType:ln[26]>>>3&31,samplingFrequencyIndex:(ln[26]&7)<<1|ln[27]>>>7&1,channelConfiguration:ln[27]>>>3&15}}}},ftyp:function sn(ln){for(var cn=new DataView(ln.buffer,ln.byteOffset,ln.byteLength),dn={majorBrand:parseType$1(ln.subarray(0,4)),minorVersion:cn.getUint32(4),compatibleBrands:[]},pn=8;pn<ln.byteLength;)dn.compatibleBrands.push(parseType$1(ln.subarray(pn,pn+4))),pn+=4;return dn},dinf:function sn(ln){return{boxes:inspectMp4(ln)}},dref:function sn(ln){return{version:ln[0],flags:new Uint8Array(ln.subarray(1,4)),dataReferences:inspectMp4(ln.subarray(8))}},hdlr:function sn(ln){var cn=new DataView(ln.buffer,ln.byteOffset,ln.byteLength),dn={version:cn.getUint8(0),flags:new Uint8Array(ln.subarray(1,4)),handlerType:parseType$1(ln.subarray(8,12)),name:""},pn=8;for(pn=24;pn<ln.byteLength;pn++){if(ln[pn]===0){pn++;break}dn.name+=String.fromCharCode(ln[pn])}return dn.name=decodeURIComponent(escape(dn.name)),dn},mdat:function sn(ln){return{byteLength:ln.byteLength,nals:nalParse(ln)}},mdhd:function sn(ln){var cn=new DataView(ln.buffer,ln.byteOffset,ln.byteLength),dn=4,pn,vn={version:cn.getUint8(0),flags:new Uint8Array(ln.subarray(1,4)),language:""};return vn.version===1?(dn+=4,vn.creationTime=parseMp4Date(cn.getUint32(dn)),dn+=8,vn.modificationTime=parseMp4Date(cn.getUint32(dn)),dn+=4,vn.timescale=cn.getUint32(dn),dn+=8,vn.duration=cn.getUint32(dn)):(vn.creationTime=parseMp4Date(cn.getUint32(dn)),dn+=4,vn.modificationTime=parseMp4Date(cn.getUint32(dn)),dn+=4,vn.timescale=cn.getUint32(dn),dn+=4,vn.duration=cn.getUint32(dn)),dn+=4,pn=cn.getUint16(dn),vn.language+=String.fromCharCode((pn>>10)+96),vn.language+=String.fromCharCode(((pn&992)>>5)+96),vn.language+=String.fromCharCode((pn&31)+96),vn},mdia:function sn(ln){return{boxes:inspectMp4(ln)}},mfhd:function sn(ln){return{version:ln[0],flags:new Uint8Array(ln.subarray(1,4)),sequenceNumber:ln[4]<<24|ln[5]<<16|ln[6]<<8|ln[7]}},minf:function sn(ln){return{boxes:inspectMp4(ln)}},mp4a:function sn(ln){var cn=new DataView(ln.buffer,ln.byteOffset,ln.byteLength),dn={dataReferenceIndex:cn.getUint16(6),channelcount:cn.getUint16(16),samplesize:cn.getUint16(18),samplerate:cn.getUint16(24)+cn.getUint16(26)/65536};return ln.byteLength>28&&(dn.streamDescriptor=inspectMp4(ln.subarray(28))[0]),dn},moof:function sn(ln){return{boxes:inspectMp4(ln)}},moov:function sn(ln){return{boxes:inspectMp4(ln)}},mvex:function sn(ln){return{boxes:inspectMp4(ln)}},mvhd:function sn(ln){var cn=new DataView(ln.buffer,ln.byteOffset,ln.byteLength),dn=4,pn={version:cn.getUint8(0),flags:new Uint8Array(ln.subarray(1,4))};return pn.version===1?(dn+=4,pn.creationTime=parseMp4Date(cn.getUint32(dn)),dn+=8,pn.modificationTime=parseMp4Date(cn.getUint32(dn)),dn+=4,pn.timescale=cn.getUint32(dn),dn+=8,pn.duration=cn.getUint32(dn)):(pn.creationTime=parseMp4Date(cn.getUint32(dn)),dn+=4,pn.modificationTime=parseMp4Date(cn.getUint32(dn)),dn+=4,pn.timescale=cn.getUint32(dn),dn+=4,pn.duration=cn.getUint32(dn)),dn+=4,pn.rate=cn.getUint16(dn)+cn.getUint16(dn+2)/16,dn+=4,pn.volume=cn.getUint8(dn)+cn.getUint8(dn+1)/8,dn+=2,dn+=2,dn+=2*4,pn.matrix=new Uint32Array(ln.subarray(dn,dn+9*4)),dn+=9*4,dn+=6*4,pn.nextTrackId=cn.getUint32(dn),pn},pdin:function sn(ln){var cn=new DataView(ln.buffer,ln.byteOffset,ln.byteLength);return{version:cn.getUint8(0),flags:new Uint8Array(ln.subarray(1,4)),rate:cn.getUint32(4),initialDelay:cn.getUint32(8)}},sdtp:function sn(ln){var cn={version:ln[0],flags:new Uint8Array(ln.subarray(1,4)),samples:[]},dn;for(dn=4;dn<ln.byteLength;dn++)cn.samples.push({dependsOn:(ln[dn]&48)>>4,isDependedOn:(ln[dn]&12)>>2,hasRedundancy:ln[dn]&3});return cn},sidx:requireParseSidx(),smhd:function sn(ln){return{version:ln[0],flags:new Uint8Array(ln.subarray(1,4)),balance:ln[4]+ln[5]/256}},stbl:function sn(ln){return{boxes:inspectMp4(ln)}},ctts:function sn(ln){var cn=new DataView(ln.buffer,ln.byteOffset,ln.byteLength),dn={version:cn.getUint8(0),flags:new Uint8Array(ln.subarray(1,4)),compositionOffsets:[]},pn=cn.getUint32(4),vn;for(vn=8;pn;vn+=8,pn--)dn.compositionOffsets.push({sampleCount:cn.getUint32(vn),sampleOffset:cn[dn.version===0?"getUint32":"getInt32"](vn+4)});return dn},stss:function sn(ln){var cn=new DataView(ln.buffer,ln.byteOffset,ln.byteLength),dn={version:cn.getUint8(0),flags:new Uint8Array(ln.subarray(1,4)),syncSamples:[]},pn=cn.getUint32(4),vn;for(vn=8;pn;vn+=4,pn--)dn.syncSamples.push(cn.getUint32(vn));return dn},stco:function sn(ln){var cn=new DataView(ln.buffer,ln.byteOffset,ln.byteLength),dn={version:ln[0],flags:new Uint8Array(ln.subarray(1,4)),chunkOffsets:[]},pn=cn.getUint32(4),vn;for(vn=8;pn;vn+=4,pn--)dn.chunkOffsets.push(cn.getUint32(vn));return dn},stsc:function sn(ln){var cn=new DataView(ln.buffer,ln.byteOffset,ln.byteLength),dn=cn.getUint32(4),pn={version:ln[0],flags:new Uint8Array(ln.subarray(1,4)),sampleToChunks:[]},vn;for(vn=8;dn;vn+=12,dn--)pn.sampleToChunks.push({firstChunk:cn.getUint32(vn),samplesPerChunk:cn.getUint32(vn+4),sampleDescriptionIndex:cn.getUint32(vn+8)});return pn},stsd:function sn(ln){return{version:ln[0],flags:new Uint8Array(ln.subarray(1,4)),sampleDescriptions:inspectMp4(ln.subarray(8))}},stsz:function sn(ln){var cn=new DataView(ln.buffer,ln.byteOffset,ln.byteLength),dn={version:ln[0],flags:new Uint8Array(ln.subarray(1,4)),sampleSize:cn.getUint32(4),entries:[]},pn;for(pn=12;pn<ln.byteLength;pn+=4)dn.entries.push(cn.getUint32(pn));return dn},stts:function sn(ln){var cn=new DataView(ln.buffer,ln.byteOffset,ln.byteLength),dn={version:ln[0],flags:new Uint8Array(ln.subarray(1,4)),timeToSamples:[]},pn=cn.getUint32(4),vn;for(vn=8;pn;vn+=8,pn--)dn.timeToSamples.push({sampleCount:cn.getUint32(vn),sampleDelta:cn.getUint32(vn+4)});return dn},styp:function sn(ln){return parse.ftyp(ln)},tfdt:parseTfdt$2,tfhd:parseTfhd$2,tkhd:function sn(ln){var cn=new DataView(ln.buffer,ln.byteOffset,ln.byteLength),dn=4,pn={version:cn.getUint8(0),flags:new Uint8Array(ln.subarray(1,4))};return pn.version===1?(dn+=4,pn.creationTime=parseMp4Date(cn.getUint32(dn)),dn+=8,pn.modificationTime=parseMp4Date(cn.getUint32(dn)),dn+=4,pn.trackId=cn.getUint32(dn),dn+=4,dn+=8,pn.duration=cn.getUint32(dn)):(pn.creationTime=parseMp4Date(cn.getUint32(dn)),dn+=4,pn.modificationTime=parseMp4Date(cn.getUint32(dn)),dn+=4,pn.trackId=cn.getUint32(dn),dn+=4,dn+=4,pn.duration=cn.getUint32(dn)),dn+=4,dn+=2*4,pn.layer=cn.getUint16(dn),dn+=2,pn.alternateGroup=cn.getUint16(dn),dn+=2,pn.volume=cn.getUint8(dn)+cn.getUint8(dn+1)/8,dn+=2,dn+=2,pn.matrix=new Uint32Array(ln.subarray(dn,dn+9*4)),dn+=9*4,pn.width=cn.getUint16(dn)+cn.getUint16(dn+2)/65536,dn+=4,pn.height=cn.getUint16(dn)+cn.getUint16(dn+2)/65536,pn},traf:function sn(ln){return{boxes:inspectMp4(ln)}},trak:function sn(ln){return{boxes:inspectMp4(ln)}},trex:function sn(ln){var cn=new DataView(ln.buffer,ln.byteOffset,ln.byteLength);return{version:ln[0],flags:new Uint8Array(ln.subarray(1,4)),trackId:cn.getUint32(4),defaultSampleDescriptionIndex:cn.getUint32(8),defaultSampleDuration:cn.getUint32(12),defaultSampleSize:cn.getUint32(16),sampleDependsOn:ln[20]&3,sampleIsDependedOn:(ln[21]&192)>>6,sampleHasRedundancy:(ln[21]&48)>>4,samplePaddingValue:(ln[21]&14)>>1,sampleIsDifferenceSample:!!(ln[21]&1),sampleDegradationPriority:cn.getUint16(22)}},trun:parseTrun$2,"url ":function sn(ln){return{version:ln[0],flags:new Uint8Array(ln.subarray(1,4))}},vmhd:function sn(ln){var cn=new DataView(ln.buffer,ln.byteOffset,ln.byteLength);return{version:ln[0],flags:new Uint8Array(ln.subarray(1,4)),graphicsmode:cn.getUint16(4),opcolor:new Uint16Array([cn.getUint16(6),cn.getUint16(8),cn.getUint16(10)])}}};inspectMp4=function sn(ln){for(var cn=0,dn=[],pn,vn,kn,Sn,wn,Pn=new ArrayBuffer(ln.length),Nn=new Uint8Array(Pn),Ln=0;Ln<ln.length;++Ln)Nn[Ln]=ln[Ln];for(pn=new DataView(Pn);cn<ln.byteLength;)vn=pn.getUint32(cn),kn=parseType$1(ln.subarray(cn+4,cn+8)),Sn=vn>1?cn+vn:ln.byteLength,wn=(parse[kn]||function(Fn){return{data:Fn}})(ln.subarray(cn+8,Sn)),wn.size=vn,wn.type=kn,dn.push(wn),cn=Sn;return dn};_textifyMp=function sn(ln,cn){var dn;return cn=cn||0,dn=new Array(cn*2+1).join(" "),ln.map(function(pn,vn){return dn+pn.type+`
`+Object.keys(pn).filter(function(kn){return kn!=="type"&&kn!=="boxes"}).map(function(kn){var Sn=dn+"  "+kn+": ",wn=pn[kn];if(wn instanceof Uint8Array||wn instanceof Uint32Array){var Pn=Array.prototype.slice.call(new Uint8Array(wn.buffer,wn.byteOffset,wn.byteLength)).map(function(Nn){return" "+("00"+Nn.toString(16)).slice(-2)}).join("").match(/.{1,24}/g);return Pn?Pn.length===1?Sn+"<"+Pn.join("").slice(1)+">":Sn+`<
`+Pn.map(function(Nn){return dn+"  "+Nn}).join(`
`)+`
`+dn+"  >":Sn+"<>"}return Sn+JSON.stringify(wn,null,2).split(`
`).map(function(Nn,Ln){return Ln===0?Nn:dn+"  "+Nn}).join(`
`)}).join(`
`)+(pn.boxes?`
`+_textifyMp(pn.boxes,cn+1):"")}).join(`
`)};var mp4Inspector={inspect:inspectMp4,textify:_textifyMp,parseType:parseType$1,findBox,parseTraf:parse.traf,parseTfdt:parse.tfdt,parseHdlr:parse.hdlr,parseTfhd:parse.tfhd,parseTrun:parse.trun,parseSidx:parse.sidx},tagTypes={8:"audio",9:"video",18:"metadata"},hex=function sn(ln){return"0x"+("00"+ln.toString(16)).slice(-2).toUpperCase()},hexStringList=function sn(ln){for(var cn=[],dn;ln.byteLength>0;)dn=0,cn.push(hex(ln[dn++])),ln=ln.subarray(dn);return cn.join(" ")},parseAVCTag=function sn(ln,cn){var dn=["AVC Sequence Header","AVC NALU","AVC End-of-Sequence"],pn=ln[1]&parseInt("01111111",2)<<16|ln[2]<<8|ln[3];return cn=cn||{},cn.avcPacketType=dn[ln[0]],cn.CompositionTime=ln[1]&parseInt("10000000",2)?-pn:pn,ln[0]===1?cn.nalUnitTypeRaw=hexStringList(ln.subarray(4,100)):cn.data=hexStringList(ln.subarray(4)),cn},parseVideoTag=function sn(ln,cn){var dn=["Unknown","Keyframe (for AVC, a seekable frame)","Inter frame (for AVC, a nonseekable frame)","Disposable inter frame (H.263 only)","Generated keyframe (reserved for server use only)","Video info/command frame"],pn=ln[0]&parseInt("00001111",2);return cn=cn||{},cn.frameType=dn[(ln[0]&parseInt("11110000",2))>>>4],cn.codecID=pn,pn===7?parseAVCTag(ln.subarray(1),cn):cn},parseAACTag=function sn(ln,cn){var dn=["AAC Sequence Header","AAC Raw"];return cn=cn||{},cn.aacPacketType=dn[ln[0]],cn.data=hexStringList(ln.subarray(1)),cn},parseAudioTag=function sn(ln,cn){var dn=["Linear PCM, platform endian","ADPCM","MP3","Linear PCM, little endian","Nellymoser 16-kHz mono","Nellymoser 8-kHz mono","Nellymoser","G.711 A-law logarithmic PCM","G.711 mu-law logarithmic PCM","reserved","AAC","Speex","MP3 8-Khz","Device-specific sound"],pn=["5.5-kHz","11-kHz","22-kHz","44-kHz"],vn=(ln[0]&parseInt("11110000",2))>>>4;return cn=cn||{},cn.soundFormat=dn[vn],cn.soundRate=pn[(ln[0]&parseInt("00001100",2))>>>2],cn.soundSize=(ln[0]&parseInt("00000010",2))>>>1?"16-bit":"8-bit",cn.soundType=ln[0]&parseInt("00000001",2)?"Stereo":"Mono",vn===10?parseAACTag(ln.subarray(1),cn):cn},parseGenericTag=function sn(ln){return{tagType:tagTypes[ln[0]],dataSize:ln[1]<<16|ln[2]<<8|ln[3],timestamp:ln[7]<<24|ln[4]<<16|ln[5]<<8|ln[6],streamID:ln[8]<<16|ln[9]<<8|ln[10]}},inspectFlvTag=function sn(ln){var cn=parseGenericTag(ln);switch(ln[0]){case 8:parseAudioTag(ln.subarray(11),cn);break;case 9:parseVideoTag(ln.subarray(11),cn);break}return cn},inspectFlv=function sn(ln){var cn=9,dn,pn=[],vn;for(cn+=4;cn<ln.byteLength;)dn=ln[cn+1]<<16,dn|=ln[cn+2]<<8,dn|=ln[cn+3],dn+=11,vn=ln.subarray(cn,cn+dn),pn.push(inspectFlvTag(vn)),cn+=dn+4;return pn},textifyFlv=function sn(ln){return JSON.stringify(ln,null,2)},flvInspector={inspectTag:inspectFlvTag,inspect:inspectFlv,textify:textifyFlv},StreamTypes$1=streamTypes,parsePid=function sn(ln){var cn=ln[1]&31;return cn<<=8,cn|=ln[2],cn},parsePayloadUnitStartIndicator=function sn(ln){return!!(ln[1]&64)},parseAdaptionField=function sn(ln){var cn=0;return(ln[3]&48)>>>4>1&&(cn+=ln[4]+1),cn},parseType=function sn(ln,cn){var dn=parsePid(ln);return dn===0?"pat":dn===cn?"pmt":cn?"pes":null},parsePat=function sn(ln){var cn=parsePayloadUnitStartIndicator(ln),dn=4+parseAdaptionField(ln);return cn&&(dn+=ln[dn]+1),(ln[dn+10]&31)<<8|ln[dn+11]},parsePmt=function sn(ln){var cn={},dn=parsePayloadUnitStartIndicator(ln),pn=4+parseAdaptionField(ln);if(dn&&(pn+=ln[pn]+1),!!(ln[pn+5]&1)){var vn,kn,Sn;vn=(ln[pn+1]&15)<<8|ln[pn+2],kn=3+vn-4,Sn=(ln[pn+10]&15)<<8|ln[pn+11];for(var wn=12+Sn;wn<kn;){var Pn=pn+wn;cn[(ln[Pn+1]&31)<<8|ln[Pn+2]]=ln[Pn],wn+=((ln[Pn+3]&15)<<8|ln[Pn+4])+5}return cn}},parsePesType=function sn(ln,cn){var dn=parsePid(ln),pn=cn[dn];switch(pn){case StreamTypes$1.H264_STREAM_TYPE:return"video";case StreamTypes$1.ADTS_STREAM_TYPE:return"audio";case StreamTypes$1.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime=function sn(ln){var cn=parsePayloadUnitStartIndicator(ln);if(!cn)return null;var dn=4+parseAdaptionField(ln);if(dn>=ln.byteLength)return null;var pn=null,vn;return vn=ln[dn+7],vn&192&&(pn={},pn.pts=(ln[dn+9]&14)<<27|(ln[dn+10]&255)<<20|(ln[dn+11]&254)<<12|(ln[dn+12]&255)<<5|(ln[dn+13]&254)>>>3,pn.pts*=4,pn.pts+=(ln[dn+13]&6)>>>1,pn.dts=pn.pts,vn&64&&(pn.dts=(ln[dn+14]&14)<<27|(ln[dn+15]&255)<<20|(ln[dn+16]&254)<<12|(ln[dn+17]&255)<<5|(ln[dn+18]&254)>>>3,pn.dts*=4,pn.dts+=(ln[dn+18]&6)>>>1)),pn},parseNalUnitType=function sn(ln){switch(ln){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},videoPacketContainsKeyFrame=function sn(ln){for(var cn=4+parseAdaptionField(ln),dn=ln.subarray(cn),pn=0,vn=0,kn=!1,Sn;vn<dn.byteLength-3;vn++)if(dn[vn+2]===1){pn=vn+5;break}for(;pn<dn.byteLength;)switch(dn[pn]){case 0:if(dn[pn-1]!==0){pn+=2;break}else if(dn[pn-2]!==0){pn++;break}vn+3!==pn-2&&(Sn=parseNalUnitType(dn[vn+3]&31),Sn==="slice_layer_without_partitioning_rbsp_idr"&&(kn=!0));do pn++;while(dn[pn]!==1&&pn<dn.length);vn=pn-2,pn+=3;break;case 1:if(dn[pn-1]!==0||dn[pn-2]!==0){pn+=3;break}Sn=parseNalUnitType(dn[vn+3]&31),Sn==="slice_layer_without_partitioning_rbsp_idr"&&(kn=!0),vn=pn-2,pn+=3;break;default:pn+=3;break}return dn=dn.subarray(vn),pn-=vn,vn=0,dn&&dn.byteLength>3&&(Sn=parseNalUnitType(dn[vn+3]&31),Sn==="slice_layer_without_partitioning_rbsp_idr"&&(kn=!0)),kn},probe$1={parseType,parsePat,parsePmt,parsePayloadUnitStartIndicator,parsePesType,parsePesTime,videoPacketContainsKeyFrame},StreamTypes=streamTypes,handleRollover=timestampRolloverStream.handleRollover,probe={};probe.ts=probe$1;probe.aac=utils;var ONE_SECOND_IN_TS=clock$3.ONE_SECOND_IN_TS,MP2T_PACKET_LENGTH=188,SYNC_BYTE=71,parsePsi_=function sn(ln,cn){for(var dn=0,pn=MP2T_PACKET_LENGTH,vn,kn;pn<ln.byteLength;){if(ln[dn]===SYNC_BYTE&&ln[pn]===SYNC_BYTE){switch(vn=ln.subarray(dn,pn),kn=probe.ts.parseType(vn,cn.pid),kn){case"pat":cn.pid=probe.ts.parsePat(vn);break;case"pmt":var Sn=probe.ts.parsePmt(vn);cn.table=cn.table||{},Object.keys(Sn).forEach(function(wn){cn.table[wn]=Sn[wn]});break}dn+=MP2T_PACKET_LENGTH,pn+=MP2T_PACKET_LENGTH;continue}dn++,pn++}},parseAudioPes_=function sn(ln,cn,dn){for(var pn=0,vn=MP2T_PACKET_LENGTH,kn,Sn,wn,Pn,Nn,Ln=!1;vn<=ln.byteLength;){if(ln[pn]===SYNC_BYTE&&(ln[vn]===SYNC_BYTE||vn===ln.byteLength)){switch(kn=ln.subarray(pn,vn),Sn=probe.ts.parseType(kn,cn.pid),Sn){case"pes":wn=probe.ts.parsePesType(kn,cn.table),Pn=probe.ts.parsePayloadUnitStartIndicator(kn),wn==="audio"&&Pn&&(Nn=probe.ts.parsePesTime(kn),Nn&&(Nn.type="audio",dn.audio.push(Nn),Ln=!0));break}if(Ln)break;pn+=MP2T_PACKET_LENGTH,vn+=MP2T_PACKET_LENGTH;continue}pn++,vn++}for(vn=ln.byteLength,pn=vn-MP2T_PACKET_LENGTH,Ln=!1;pn>=0;){if(ln[pn]===SYNC_BYTE&&(ln[vn]===SYNC_BYTE||vn===ln.byteLength)){switch(kn=ln.subarray(pn,vn),Sn=probe.ts.parseType(kn,cn.pid),Sn){case"pes":wn=probe.ts.parsePesType(kn,cn.table),Pn=probe.ts.parsePayloadUnitStartIndicator(kn),wn==="audio"&&Pn&&(Nn=probe.ts.parsePesTime(kn),Nn&&(Nn.type="audio",dn.audio.push(Nn),Ln=!0));break}if(Ln)break;pn-=MP2T_PACKET_LENGTH,vn-=MP2T_PACKET_LENGTH;continue}pn--,vn--}},parseVideoPes_=function sn(ln,cn,dn){for(var pn=0,vn=MP2T_PACKET_LENGTH,kn,Sn,wn,Pn,Nn,Ln,Fn,zn,Dn=!1,Kn={data:[],size:0};vn<ln.byteLength;){if(ln[pn]===SYNC_BYTE&&ln[vn]===SYNC_BYTE){switch(kn=ln.subarray(pn,vn),Sn=probe.ts.parseType(kn,cn.pid),Sn){case"pes":if(wn=probe.ts.parsePesType(kn,cn.table),Pn=probe.ts.parsePayloadUnitStartIndicator(kn),wn==="video"&&(Pn&&!Dn&&(Nn=probe.ts.parsePesTime(kn),Nn&&(Nn.type="video",dn.video.push(Nn),Dn=!0)),!dn.firstKeyFrame)){if(Pn&&Kn.size!==0){for(Ln=new Uint8Array(Kn.size),Fn=0;Kn.data.length;)zn=Kn.data.shift(),Ln.set(zn,Fn),Fn+=zn.byteLength;if(probe.ts.videoPacketContainsKeyFrame(Ln)){var qn=probe.ts.parsePesTime(Ln);qn?(dn.firstKeyFrame=qn,dn.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}Kn.size=0}Kn.data.push(kn),Kn.size+=kn.byteLength}break}if(Dn&&dn.firstKeyFrame)break;pn+=MP2T_PACKET_LENGTH,vn+=MP2T_PACKET_LENGTH;continue}pn++,vn++}for(vn=ln.byteLength,pn=vn-MP2T_PACKET_LENGTH,Dn=!1;pn>=0;){if(ln[pn]===SYNC_BYTE&&ln[vn]===SYNC_BYTE){switch(kn=ln.subarray(pn,vn),Sn=probe.ts.parseType(kn,cn.pid),Sn){case"pes":wn=probe.ts.parsePesType(kn,cn.table),Pn=probe.ts.parsePayloadUnitStartIndicator(kn),wn==="video"&&Pn&&(Nn=probe.ts.parsePesTime(kn),Nn&&(Nn.type="video",dn.video.push(Nn),Dn=!0));break}if(Dn)break;pn-=MP2T_PACKET_LENGTH,vn-=MP2T_PACKET_LENGTH;continue}pn--,vn--}},adjustTimestamp_=function sn(ln,cn){if(ln.audio&&ln.audio.length){var dn=cn;(typeof dn>"u"||isNaN(dn))&&(dn=ln.audio[0].dts),ln.audio.forEach(function(kn){kn.dts=handleRollover(kn.dts,dn),kn.pts=handleRollover(kn.pts,dn),kn.dtsTime=kn.dts/ONE_SECOND_IN_TS,kn.ptsTime=kn.pts/ONE_SECOND_IN_TS})}if(ln.video&&ln.video.length){var pn=cn;if((typeof pn>"u"||isNaN(pn))&&(pn=ln.video[0].dts),ln.video.forEach(function(kn){kn.dts=handleRollover(kn.dts,pn),kn.pts=handleRollover(kn.pts,pn),kn.dtsTime=kn.dts/ONE_SECOND_IN_TS,kn.ptsTime=kn.pts/ONE_SECOND_IN_TS}),ln.firstKeyFrame){var vn=ln.firstKeyFrame;vn.dts=handleRollover(vn.dts,pn),vn.pts=handleRollover(vn.pts,pn),vn.dtsTime=vn.dts/ONE_SECOND_IN_TS,vn.ptsTime=vn.pts/ONE_SECOND_IN_TS}}},inspectAac_=function sn(ln){for(var cn=!1,dn=0,pn=null,vn=null,kn=0,Sn=0,wn;ln.length-Sn>=3;){var Pn=probe.aac.parseType(ln,Sn);switch(Pn){case"timed-metadata":if(ln.length-Sn<10){cn=!0;break}if(kn=probe.aac.parseId3TagSize(ln,Sn),kn>ln.length){cn=!0;break}vn===null&&(wn=ln.subarray(Sn,Sn+kn),vn=probe.aac.parseAacTimestamp(wn)),Sn+=kn;break;case"audio":if(ln.length-Sn<7){cn=!0;break}if(kn=probe.aac.parseAdtsSize(ln,Sn),kn>ln.length){cn=!0;break}pn===null&&(wn=ln.subarray(Sn,Sn+kn),pn=probe.aac.parseSampleRate(wn)),dn++,Sn+=kn;break;default:Sn++;break}if(cn)return null}if(pn===null||vn===null)return null;var Nn=ONE_SECOND_IN_TS/pn,Ln={audio:[{type:"audio",dts:vn,pts:vn},{type:"audio",dts:vn+dn*1024*Nn,pts:vn+dn*1024*Nn}]};return Ln},inspectTs_=function sn(ln){var cn={pid:null,table:null},dn={};parsePsi_(ln,cn);for(var pn in cn.table)if(cn.table.hasOwnProperty(pn)){var vn=cn.table[pn];switch(vn){case StreamTypes.H264_STREAM_TYPE:dn.video=[],parseVideoPes_(ln,cn,dn),dn.video.length===0&&delete dn.video;break;case StreamTypes.ADTS_STREAM_TYPE:dn.audio=[],parseAudioPes_(ln,cn,dn),dn.audio.length===0&&delete dn.audio;break}}return dn},inspect=function sn(ln,cn){var dn=probe.aac.isLikelyAacData(ln),pn;return dn?pn=inspectAac_(ln):pn=inspectTs_(ln),!pn||!pn.audio&&!pn.video?null:(adjustTimestamp_(pn,cn),pn)},tsInspector={inspect,parseAudioPes_},muxjs={codecs:codecs$1,mp4:mp4$2,flv,mp2t:m2ts$1,partial};muxjs.mp4.tools=mp4Inspector;muxjs.flv.tools=flvInspector;muxjs.mp2t.tools=tsInspector;var es=muxjs;const muxjs$1=getDefaultExportFromCjs(es),shaka$4=getShaka();class LeftSeekingUi extends shaka$4.ui.Element{constructor(cn,dn){var pn,vn,kn;super(cn,dn);Tl(this,"lastTouchEventTimeSet_",null);Tl(this,"triggeredTouchValid_",!1);Tl(this,"TICK_TIME",.5);Tl(this,"hideRewindButtonOnControlsContainerTimer_");Tl(this,"rewindContainer_");Tl(this,"rewindValue_");Tl(this,"rewindIcon_");Tl(this,"getPrevValue",()=>this.rewindValue_.textContent?parseInt(this.rewindValue_.textContent,10):0);this.hideRewindButtonOnControlsContainerTimer_=new shaka$4.util.Timer(()=>{this.hideRewindButtonOnControlsContainer()}),this.rewindContainer_=document.createElement("div"),this.rewindContainer_.classList.add("shaka-rewind-on-controls-container"),(pn=this.parent)==null||pn.appendChild(this.rewindContainer_),(vn=this.eventManager)==null||vn.listen(this.rewindContainer_,"touchstart",Sn=>{var wn;Sn.cancelable&&Sn.preventDefault(),(wn=this.controls)!=null&&wn.anySettingsMenusAreOpen()?this.controls.hideSettingsMenus():this.onRewindButtonClick_()},{passive:!1}),(kn=this.eventManager)==null||kn.listen(this.rewindContainer_,"click",Sn=>{this.isTouchDevice_()&&Sn.stopPropagation()},{passive:!1}),this.rewindIcon_=document.createElement("span"),this.rewindIcon_.classList.add("shaka-forward-rewind-on-controls-container-icon"),this.rewindIcon_.textContent="<<",this.rewindContainer_.appendChild(this.rewindIcon_),this.rewindValue_=document.createElement("span"),this.rewindValue_.textContent="0s",this.rewindContainer_.appendChild(this.rewindValue_)}togglePlayPause(cn){cn&&(cn.paused?cn.play():cn.pause())}onRewindButtonClick_(){this.triggeredTouchValid_?this.lastTouchEventTimeSet_&&this.lastTouchEventTimeSet_+this.TICK_TIME*1e3>Date.now()&&(this.hideRewindButtonOnControlsContainerTimer_.stop(),this.lastTouchEventTimeSet_=Date.now(),this.rewindValue_.textContent=(this.getPrevValue()-5).toString()+"s",this.rewindContainer_.style.opacity="1",this.hideRewindButtonOnControlsContainerTimer_=this.getHideTimer_()):(this.triggeredTouchValid_=!0,this.lastTouchEventTimeSet_=Date.now(),this.hideRewindButtonOnControlsContainerTimer_=this.getHideTimer_(()=>{var cn;this.togglePlayPause((cn=this.controls)==null?void 0:cn.getVideo())}))}getHideTimer_(cn){return new shaka$4.util.Timer(()=>{this.hideRewindButtonOnControlsContainer(),cn&&cn()}).tickAfter(this.TICK_TIME)}hideRewindButtonOnControlsContainer(){var dn;const cn=(dn=this.controls)==null?void 0:dn.getDisplayTime();this.getPrevValue()!==0&&this.video&&cn&&(this.video.currentTime=cn+this.getPrevValue()),this.rewindContainer_.style.opacity="0",this.triggeredTouchValid_=!1,this.rewindValue_.textContent="0s",this.rewindContainer_.style.opacity="0",this.triggeredTouchValid_=!1,this.rewindValue_.textContent="0s"}isTouchDevice_(){return"ontouchstart"in window||navigator.maxTouchPoints>0}}const shaka$3=getShaka();class RightSeekingUi extends shaka$3.ui.Element{constructor(cn,dn){var pn,vn,kn;super(cn,dn);Tl(this,"lastTouchEventTimeSet_",null);Tl(this,"triggeredTouchValid_",!1);Tl(this,"TICK_TIME",.5);Tl(this,"hideFastForwardButtonOnControlsContainerTimer_");Tl(this,"fastForwardContainer_");Tl(this,"fastForwardValue_");Tl(this,"fastForwardIcon_");Tl(this,"getPrevValue",()=>this.fastForwardValue_.textContent?parseInt(this.fastForwardValue_.textContent,10):0);this.hideFastForwardButtonOnControlsContainerTimer_=new shaka$3.util.Timer(()=>{this.hideFastForwardButtonOnControlsContainer()}),this.fastForwardContainer_=document.createElement("div"),this.fastForwardContainer_.classList.add("shaka-fast-forward-on-controls-container"),(pn=this.parent)==null||pn.appendChild(this.fastForwardContainer_),(vn=this.eventManager)==null||vn.listen(this.fastForwardContainer_,"touchstart",Sn=>{var wn;Sn.cancelable&&Sn.preventDefault(),(wn=this.controls)!=null&&wn.anySettingsMenusAreOpen()?this.controls.hideSettingsMenus():this.onFastForwardButtonClick_()},{passive:!1}),(kn=this.eventManager)==null||kn.listen(this.fastForwardContainer_,"click",Sn=>{this.isTouchDevice_()&&Sn.stopPropagation()},{passive:!1}),this.fastForwardIcon_=document.createElement("span"),this.fastForwardIcon_.classList.add("shaka-forward-rewind-on-controls-container-icon"),this.fastForwardIcon_.textContent=">>",this.fastForwardContainer_.appendChild(this.fastForwardIcon_),this.fastForwardValue_=document.createElement("span"),this.fastForwardValue_.textContent="0s",this.fastForwardContainer_.appendChild(this.fastForwardValue_)}togglePlayPause(cn){cn&&(cn.paused?cn.play():cn.pause())}onFastForwardButtonClick_(){this.triggeredTouchValid_?this.lastTouchEventTimeSet_&&this.lastTouchEventTimeSet_+this.TICK_TIME*1e3>Date.now()&&(this.hideFastForwardButtonOnControlsContainerTimer_.stop(),this.lastTouchEventTimeSet_=Date.now(),this.fastForwardValue_.textContent=(this.getPrevValue()+5).toString()+"s",this.fastForwardContainer_.style.opacity="1",this.hideFastForwardButtonOnControlsContainerTimer_=this.getHideTimer_()):(this.triggeredTouchValid_=!0,this.lastTouchEventTimeSet_=Date.now(),this.hideFastForwardButtonOnControlsContainerTimer_=this.getHideTimer_(()=>{var cn;this.togglePlayPause((cn=this.controls)==null?void 0:cn.getVideo())}))}getHideTimer_(cn){return new shaka$3.util.Timer(()=>{this.hideFastForwardButtonOnControlsContainer(),cn&&cn()}).tickAfter(this.TICK_TIME)}hideFastForwardButtonOnControlsContainer(){var dn;const cn=(dn=this.controls)==null?void 0:dn.getDisplayTime();this.getPrevValue()!==0&&this.video&&cn&&(this.video.currentTime=cn+this.getPrevValue()),this.fastForwardContainer_.style.opacity="0",this.triggeredTouchValid_=!1,this.fastForwardValue_.textContent="0s"}isTouchDevice_(){return"ontouchstart"in window||navigator.maxTouchPoints>0}}const shaka$2=getShaka();class MobileSeekingUi extends shaka$2.ui.Element{constructor(cn,dn){super(cn,dn);Tl(this,"hiddenFastForwardContainer");Tl(this,"hiddenRewindContainer");this.hiddenFastForwardContainer=document.createElement("div"),this.hiddenFastForwardContainer.classList.add("shaka-hidden-fast-forward-container"),dn.getControlsContainer().appendChild(this.hiddenFastForwardContainer),new RightSeekingUi(this.hiddenFastForwardContainer,dn),this.hiddenRewindContainer=document.createElement("div"),this.hiddenRewindContainer.classList.add("shaka-hidden-rewind-container"),dn.getControlsContainer().appendChild(this.hiddenRewindContainer),new LeftSeekingUi(this.hiddenRewindContainer,dn)}}class MobileSeekingUiFactory{create(ln,cn){return new MobileSeekingUi(ln,cn)}}Tl(MobileSeekingUiFactory,"uiName","mobile");const shaka$1=getShaka();class UnitTitleUi extends shaka$1.ui.Element{constructor(cn,dn){var kn,Sn,wn,Pn;super(cn,dn);Tl(this,"title",null);const pn=this.getTitleElement();if(this.isExist(pn)){if(this.title===null){this.title=pn;return}this.title.textContent=this.getVideoDatasetTitle()||"";return}this.title=this.createTitle(),(kn=this.player)==null||kn.addEventListener("trackschanged",()=>{this.title!==null&&(this.title.textContent=this.getVideoDatasetTitle()||"")}),(Pn=(wn=(Sn=cn.parentElement)==null?void 0:Sn.parentElement)==null?void 0:wn.parentElement)==null||Pn.appendChild(this.title)}createTitle(){var dn;const cn=document.createElement("h1");return cn.classList.add("player-title"),cn.textContent=((dn=this.video)==null?void 0:dn.dataset.unitTitle)||"",cn}getTitleElement(){return document.querySelector(".player-title")}isExist(cn){return!!cn}getVideoDatasetTitle(){const cn=document.querySelector("video.shaka-video");return cn&&cn.dataset.unitTitle||""}}class UnitTitleUiFactory{create(ln,cn){return new UnitTitleUi(ln,cn)}}Tl(UnitTitleUiFactory,"uiName","unitTitle");const objectToString$1=Object.prototype.toString;function isError(sn){switch(objectToString$1.call(sn)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return isInstanceOf(sn,Error)}}function isBuiltin(sn,ln){return objectToString$1.call(sn)===`[object ${ln}]`}function isErrorEvent(sn){return isBuiltin(sn,"ErrorEvent")}function isDOMError(sn){return isBuiltin(sn,"DOMError")}function isDOMException(sn){return isBuiltin(sn,"DOMException")}function isString(sn){return isBuiltin(sn,"String")}function isPrimitive(sn){return sn===null||typeof sn!="object"&&typeof sn!="function"}function isPlainObject(sn){return isBuiltin(sn,"Object")}function isEvent(sn){return typeof Event<"u"&&isInstanceOf(sn,Event)}function isElement(sn){return typeof Element<"u"&&isInstanceOf(sn,Element)}function isRegExp(sn){return isBuiltin(sn,"RegExp")}function isThenable$1(sn){return!!(sn&&sn.then&&typeof sn.then=="function")}function isSyntheticEvent(sn){return isPlainObject(sn)&&"nativeEvent"in sn&&"preventDefault"in sn&&"stopPropagation"in sn}function isNaN$1(sn){return typeof sn=="number"&&sn!==sn}function isInstanceOf(sn,ln){try{return sn instanceof ln}catch{return!1}}function truncate(sn,ln=0){return typeof sn!="string"||ln===0||sn.length<=ln?sn:`${sn.slice(0,ln)}...`}function safeJoin(sn,ln){if(!Array.isArray(sn))return"";const cn=[];for(let dn=0;dn<sn.length;dn++){const pn=sn[dn];try{cn.push(String(pn))}catch{cn.push("[value cannot be serialized]")}}return cn.join(ln)}function isMatchingPattern(sn,ln,cn=!1){return isString(sn)?isRegExp(ln)?ln.test(sn):isString(ln)?cn?sn===ln:sn.includes(ln):!1:!1}function stringMatchesSomePattern(sn,ln=[],cn=!1){return ln.some(dn=>isMatchingPattern(sn,dn,cn))}function isGlobalObj(sn){return sn&&sn.Math==Math?sn:void 0}const GLOBAL_OBJ=typeof globalThis=="object"&&isGlobalObj(globalThis)||typeof window=="object"&&isGlobalObj(window)||typeof self=="object"&&isGlobalObj(self)||typeof global=="object"&&isGlobalObj(global)||function(){return this}()||{};function getGlobalObject(){return GLOBAL_OBJ}function getGlobalSingleton(sn,ln,cn){const dn=cn||GLOBAL_OBJ,pn=dn.__SENTRY__=dn.__SENTRY__||{};return pn[sn]||(pn[sn]=ln())}const WINDOW$1=getGlobalObject(),DEFAULT_MAX_STRING_LENGTH=80;function htmlTreeAsString(sn,ln={}){try{let cn=sn;const dn=5,pn=[];let vn=0,kn=0;const Sn=" > ",wn=Sn.length;let Pn;const Nn=Array.isArray(ln)?ln:ln.keyAttrs,Ln=!Array.isArray(ln)&&ln.maxStringLength||DEFAULT_MAX_STRING_LENGTH;for(;cn&&vn++<dn&&(Pn=_htmlElementAsString(cn,Nn),!(Pn==="html"||vn>1&&kn+pn.length*wn+Pn.length>=Ln));)pn.push(Pn),kn+=Pn.length,cn=cn.parentNode;return pn.reverse().join(Sn)}catch{return"<unknown>"}}function _htmlElementAsString(sn,ln){const cn=sn,dn=[];let pn,vn,kn,Sn,wn;if(!cn||!cn.tagName)return"";dn.push(cn.tagName.toLowerCase());const Pn=ln&&ln.length?ln.filter(Ln=>cn.getAttribute(Ln)).map(Ln=>[Ln,cn.getAttribute(Ln)]):null;if(Pn&&Pn.length)Pn.forEach(Ln=>{dn.push(`[${Ln[0]}="${Ln[1]}"]`)});else if(cn.id&&dn.push(`#${cn.id}`),pn=cn.className,pn&&isString(pn))for(vn=pn.split(/\s+/),wn=0;wn<vn.length;wn++)dn.push(`.${vn[wn]}`);const Nn=["aria-label","type","name","title","alt"];for(wn=0;wn<Nn.length;wn++)kn=Nn[wn],Sn=cn.getAttribute(kn),Sn&&dn.push(`[${kn}="${Sn}"]`);return dn.join("")}function getLocationHref(){try{return WINDOW$1.document.location.href}catch{return""}}const PREFIX="Sentry Logger ",CONSOLE_LEVELS=["debug","info","warn","error","log","assert","trace"];function consoleSandbox(sn){if(!("console"in GLOBAL_OBJ))return sn();const ln=GLOBAL_OBJ.console,cn={};CONSOLE_LEVELS.forEach(dn=>{const pn=ln[dn]&&ln[dn].__sentry_original__;dn in ln&&pn&&(cn[dn]=ln[dn],ln[dn]=pn)});try{return sn()}finally{Object.keys(cn).forEach(dn=>{ln[dn]=cn[dn]})}}function makeLogger(){let sn=!1;const ln={enable:()=>{sn=!0},disable:()=>{sn=!1}};return typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?CONSOLE_LEVELS.forEach(cn=>{ln[cn]=(...dn)=>{sn&&consoleSandbox(()=>{GLOBAL_OBJ.console[cn](`${PREFIX}[${cn}]:`,...dn)})}}):CONSOLE_LEVELS.forEach(cn=>{ln[cn]=()=>{}}),ln}let logger;typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__?logger=getGlobalSingleton("logger",makeLogger):logger=makeLogger();function fill$1(sn,ln,cn){if(!(ln in sn))return;const dn=sn[ln],pn=cn(dn);if(typeof pn=="function")try{markFunctionWrapped(pn,dn)}catch{}sn[ln]=pn}function addNonEnumerableProperty(sn,ln,cn){Object.defineProperty(sn,ln,{value:cn,writable:!0,configurable:!0})}function markFunctionWrapped(sn,ln){const cn=ln.prototype||{};sn.prototype=ln.prototype=cn,addNonEnumerableProperty(sn,"__sentry_original__",ln)}function getOriginalFunction(sn){return sn.__sentry_original__}function convertToPlainObject(sn){if(isError(sn))return{message:sn.message,name:sn.name,stack:sn.stack,...getOwnProperties(sn)};if(isEvent(sn)){const ln={type:sn.type,target:serializeEventTarget(sn.target),currentTarget:serializeEventTarget(sn.currentTarget),...getOwnProperties(sn)};return typeof CustomEvent<"u"&&isInstanceOf(sn,CustomEvent)&&(ln.detail=sn.detail),ln}else return sn}function serializeEventTarget(sn){try{return isElement(sn)?htmlTreeAsString(sn):Object.prototype.toString.call(sn)}catch{return"<unknown>"}}function getOwnProperties(sn){if(typeof sn=="object"&&sn!==null){const ln={};for(const cn in sn)Object.prototype.hasOwnProperty.call(sn,cn)&&(ln[cn]=sn[cn]);return ln}else return{}}function extractExceptionKeysForMessage(sn,ln=40){const cn=Object.keys(convertToPlainObject(sn));if(cn.sort(),!cn.length)return"[object has no keys]";if(cn[0].length>=ln)return truncate(cn[0],ln);for(let dn=cn.length;dn>0;dn--){const pn=cn.slice(0,dn).join(", ");if(!(pn.length>ln))return dn===cn.length?pn:truncate(pn,ln)}return""}function dropUndefinedKeys(sn){return _dropUndefinedKeys(sn,new Map)}function _dropUndefinedKeys(sn,ln){if(isPlainObject(sn)){const cn=ln.get(sn);if(cn!==void 0)return cn;const dn={};ln.set(sn,dn);for(const pn of Object.keys(sn))typeof sn[pn]<"u"&&(dn[pn]=_dropUndefinedKeys(sn[pn],ln));return dn}if(Array.isArray(sn)){const cn=ln.get(sn);if(cn!==void 0)return cn;const dn=[];return ln.set(sn,dn),sn.forEach(pn=>{dn.push(_dropUndefinedKeys(pn,ln))}),dn}return sn}function uuid4(){const sn=GLOBAL_OBJ,ln=sn.crypto||sn.msCrypto;if(ln&&ln.randomUUID)return ln.randomUUID().replace(/-/g,"");const cn=ln&&ln.getRandomValues?()=>ln.getRandomValues(new Uint8Array(1))[0]:()=>Math.random()*16;return([1e7]+1e3+4e3+8e3+1e11).replace(/[018]/g,dn=>(dn^(cn()&15)>>dn/4).toString(16))}function getFirstException(sn){return sn.exception&&sn.exception.values?sn.exception.values[0]:void 0}function getEventDescription(sn){const{message:ln,event_id:cn}=sn;if(ln)return ln;const dn=getFirstException(sn);return dn?dn.type&&dn.value?`${dn.type}: ${dn.value}`:dn.type||dn.value||cn||"<unknown>":cn||"<unknown>"}function addExceptionTypeValue(sn,ln,cn){const dn=sn.exception=sn.exception||{},pn=dn.values=dn.values||[],vn=pn[0]=pn[0]||{};vn.value||(vn.value=ln||""),vn.type||(vn.type=cn||"Error")}function addExceptionMechanism(sn,ln){const cn=getFirstException(sn);if(!cn)return;const dn={type:"generic",handled:!0},pn=cn.mechanism;if(cn.mechanism={...dn,...pn,...ln},ln&&"data"in ln){const vn={...pn&&pn.data,...ln.data};cn.mechanism.data=vn}}function arrayify(sn){return Array.isArray(sn)?sn:[sn]}function isBrowserBundle(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function isNodeEnv(){return!isBrowserBundle()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function dynamicRequire(sn,ln){return sn.require(ln)}var States;(function(sn){sn[sn.PENDING=0]="PENDING";const cn=1;sn[sn.RESOLVED=cn]="RESOLVED";const dn=2;sn[sn.REJECTED=dn]="REJECTED"})(States||(States={}));class SyncPromise{constructor(ln){SyncPromise.prototype.__init.call(this),SyncPromise.prototype.__init2.call(this),SyncPromise.prototype.__init3.call(this),SyncPromise.prototype.__init4.call(this),this._state=States.PENDING,this._handlers=[];try{ln(this._resolve,this._reject)}catch(cn){this._reject(cn)}}then(ln,cn){return new SyncPromise((dn,pn)=>{this._handlers.push([!1,vn=>{if(!ln)dn(vn);else try{dn(ln(vn))}catch(kn){pn(kn)}},vn=>{if(!cn)pn(vn);else try{dn(cn(vn))}catch(kn){pn(kn)}}]),this._executeHandlers()})}catch(ln){return this.then(cn=>cn,ln)}finally(ln){return new SyncPromise((cn,dn)=>{let pn,vn;return this.then(kn=>{vn=!1,pn=kn,ln&&ln()},kn=>{vn=!0,pn=kn,ln&&ln()}).then(()=>{if(vn){dn(pn);return}cn(pn)})})}__init(){this._resolve=ln=>{this._setResult(States.RESOLVED,ln)}}__init2(){this._reject=ln=>{this._setResult(States.REJECTED,ln)}}__init3(){this._setResult=(ln,cn)=>{if(this._state===States.PENDING){if(isThenable$1(cn)){cn.then(this._resolve,this._reject);return}this._state=ln,this._value=cn,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===States.PENDING)return;const ln=this._handlers.slice();this._handlers=[],ln.forEach(cn=>{cn[0]||(this._state===States.RESOLVED&&cn[1](this._value),this._state===States.REJECTED&&cn[2](this._value),cn[0]=!0)})}}}const WINDOW=getGlobalObject(),dateTimestampSource={nowSeconds:()=>Date.now()/1e3};function getBrowserPerformance(){const{performance:sn}=WINDOW;if(!sn||!sn.now)return;const ln=Date.now()-sn.now();return{now:()=>sn.now(),timeOrigin:ln}}function getNodePerformance(){try{return dynamicRequire(module,"perf_hooks").performance}catch{return}}const platformPerformance=isNodeEnv()?getNodePerformance():getBrowserPerformance(),timestampSource=platformPerformance===void 0?dateTimestampSource:{nowSeconds:()=>(platformPerformance.timeOrigin+platformPerformance.now())/1e3},dateTimestampInSeconds=dateTimestampSource.nowSeconds.bind(dateTimestampSource),timestampInSeconds=timestampSource.nowSeconds.bind(timestampSource);(()=>{const{performance:sn}=WINDOW;if(!sn||!sn.now)return;const ln=3600*1e3,cn=sn.now(),dn=Date.now(),pn=sn.timeOrigin?Math.abs(sn.timeOrigin+cn-dn):ln,vn=pn<ln,kn=sn.timing&&sn.timing.navigationStart,wn=typeof kn=="number"?Math.abs(kn+cn-dn):ln,Pn=wn<ln;return vn||Pn?pn<=wn?sn.timeOrigin:kn:dn})();const DEFAULT_ENVIRONMENT="production";function makeSession(sn){const ln=timestampInSeconds(),cn={sid:uuid4(),init:!0,timestamp:ln,started:ln,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>sessionToJSON(cn)};return sn&&updateSession(cn,sn),cn}function updateSession(sn,ln={}){if(ln.user&&(!sn.ipAddress&&ln.user.ip_address&&(sn.ipAddress=ln.user.ip_address),!sn.did&&!ln.did&&(sn.did=ln.user.id||ln.user.email||ln.user.username)),sn.timestamp=ln.timestamp||timestampInSeconds(),ln.ignoreDuration&&(sn.ignoreDuration=ln.ignoreDuration),ln.sid&&(sn.sid=ln.sid.length===32?ln.sid:uuid4()),ln.init!==void 0&&(sn.init=ln.init),!sn.did&&ln.did&&(sn.did=`${ln.did}`),typeof ln.started=="number"&&(sn.started=ln.started),sn.ignoreDuration)sn.duration=void 0;else if(typeof ln.duration=="number")sn.duration=ln.duration;else{const cn=sn.timestamp-sn.started;sn.duration=cn>=0?cn:0}ln.release&&(sn.release=ln.release),ln.environment&&(sn.environment=ln.environment),!sn.ipAddress&&ln.ipAddress&&(sn.ipAddress=ln.ipAddress),!sn.userAgent&&ln.userAgent&&(sn.userAgent=ln.userAgent),typeof ln.errors=="number"&&(sn.errors=ln.errors),ln.status&&(sn.status=ln.status)}function closeSession(sn,ln){let cn={};ln?cn={status:ln}:sn.status==="ok"&&(cn={status:"exited"}),updateSession(sn,cn)}function sessionToJSON(sn){return dropUndefinedKeys({sid:`${sn.sid}`,init:sn.init,started:new Date(sn.started*1e3).toISOString(),timestamp:new Date(sn.timestamp*1e3).toISOString(),status:sn.status,errors:sn.errors,did:typeof sn.did=="number"||typeof sn.did=="string"?`${sn.did}`:void 0,duration:sn.duration,attrs:{release:sn.release,environment:sn.environment,ip_address:sn.ipAddress,user_agent:sn.userAgent}})}const DEFAULT_MAX_BREADCRUMBS=100;class Scope{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=generatePropagationContext()}static clone(ln){const cn=new Scope;return ln&&(cn._breadcrumbs=[...ln._breadcrumbs],cn._tags={...ln._tags},cn._extra={...ln._extra},cn._contexts={...ln._contexts},cn._user=ln._user,cn._level=ln._level,cn._span=ln._span,cn._session=ln._session,cn._transactionName=ln._transactionName,cn._fingerprint=ln._fingerprint,cn._eventProcessors=[...ln._eventProcessors],cn._requestSession=ln._requestSession,cn._attachments=[...ln._attachments],cn._sdkProcessingMetadata={...ln._sdkProcessingMetadata},cn._propagationContext={...ln._propagationContext}),cn}addScopeListener(ln){this._scopeListeners.push(ln)}addEventProcessor(ln){return this._eventProcessors.push(ln),this}setUser(ln){return this._user=ln||{},this._session&&updateSession(this._session,{user:ln}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(ln){return this._requestSession=ln,this}setTags(ln){return this._tags={...this._tags,...ln},this._notifyScopeListeners(),this}setTag(ln,cn){return this._tags={...this._tags,[ln]:cn},this._notifyScopeListeners(),this}setExtras(ln){return this._extra={...this._extra,...ln},this._notifyScopeListeners(),this}setExtra(ln,cn){return this._extra={...this._extra,[ln]:cn},this._notifyScopeListeners(),this}setFingerprint(ln){return this._fingerprint=ln,this._notifyScopeListeners(),this}setLevel(ln){return this._level=ln,this._notifyScopeListeners(),this}setTransactionName(ln){return this._transactionName=ln,this._notifyScopeListeners(),this}setContext(ln,cn){return cn===null?delete this._contexts[ln]:this._contexts[ln]=cn,this._notifyScopeListeners(),this}setSpan(ln){return this._span=ln,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const ln=this.getSpan();return ln&&ln.transaction}setSession(ln){return ln?this._session=ln:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(ln){if(!ln)return this;if(typeof ln=="function"){const cn=ln(this);return cn instanceof Scope?cn:this}return ln instanceof Scope?(this._tags={...this._tags,...ln._tags},this._extra={...this._extra,...ln._extra},this._contexts={...this._contexts,...ln._contexts},ln._user&&Object.keys(ln._user).length&&(this._user=ln._user),ln._level&&(this._level=ln._level),ln._fingerprint&&(this._fingerprint=ln._fingerprint),ln._requestSession&&(this._requestSession=ln._requestSession),ln._propagationContext&&(this._propagationContext=ln._propagationContext)):isPlainObject(ln)&&(ln=ln,this._tags={...this._tags,...ln.tags},this._extra={...this._extra,...ln.extra},this._contexts={...this._contexts,...ln.contexts},ln.user&&(this._user=ln.user),ln.level&&(this._level=ln.level),ln.fingerprint&&(this._fingerprint=ln.fingerprint),ln.requestSession&&(this._requestSession=ln.requestSession),ln.propagationContext&&(this._propagationContext=ln.propagationContext)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=generatePropagationContext(),this}addBreadcrumb(ln,cn){const dn=typeof cn=="number"?cn:DEFAULT_MAX_BREADCRUMBS;if(dn<=0)return this;const pn={timestamp:dateTimestampInSeconds(),...ln};return this._breadcrumbs=[...this._breadcrumbs,pn].slice(-dn),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(ln){return this._attachments.push(ln),this}getAttachments(){return this._attachments}clearAttachments(){return this._attachments=[],this}applyToEvent(ln,cn={}){if(this._extra&&Object.keys(this._extra).length&&(ln.extra={...this._extra,...ln.extra}),this._tags&&Object.keys(this._tags).length&&(ln.tags={...this._tags,...ln.tags}),this._user&&Object.keys(this._user).length&&(ln.user={...this._user,...ln.user}),this._contexts&&Object.keys(this._contexts).length&&(ln.contexts={...this._contexts,...ln.contexts}),this._level&&(ln.level=this._level),this._transactionName&&(ln.transaction=this._transactionName),this._span){ln.contexts={trace:this._span.getTraceContext(),...ln.contexts};const dn=this._span.transaction;if(dn){ln.sdkProcessingMetadata={dynamicSamplingContext:dn.getDynamicSamplingContext(),...ln.sdkProcessingMetadata};const pn=dn.name;pn&&(ln.tags={transaction:pn,...ln.tags})}}return this._applyFingerprint(ln),ln.breadcrumbs=[...ln.breadcrumbs||[],...this._breadcrumbs],ln.breadcrumbs=ln.breadcrumbs.length>0?ln.breadcrumbs:void 0,ln.sdkProcessingMetadata={...ln.sdkProcessingMetadata,...this._sdkProcessingMetadata,propagationContext:this._propagationContext},this._notifyEventProcessors([...getGlobalEventProcessors(),...this._eventProcessors],ln,cn)}setSDKProcessingMetadata(ln){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...ln},this}setPropagationContext(ln){return this._propagationContext=ln,this}getPropagationContext(){return this._propagationContext}_notifyEventProcessors(ln,cn,dn,pn=0){return new SyncPromise((vn,kn)=>{const Sn=ln[pn];if(cn===null||typeof Sn!="function")vn(cn);else{const wn=Sn({...cn},dn);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&Sn.id&&wn===null&&logger.log(`Event processor "${Sn.id}" dropped event`),isThenable$1(wn)?wn.then(Pn=>this._notifyEventProcessors(ln,Pn,dn,pn+1).then(vn)).then(null,kn):this._notifyEventProcessors(ln,wn,dn,pn+1).then(vn).then(null,kn)}})}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(ln=>{ln(this)}),this._notifyingListeners=!1)}_applyFingerprint(ln){ln.fingerprint=ln.fingerprint?arrayify(ln.fingerprint):[],this._fingerprint&&(ln.fingerprint=ln.fingerprint.concat(this._fingerprint)),ln.fingerprint&&!ln.fingerprint.length&&delete ln.fingerprint}}function getGlobalEventProcessors(){return getGlobalSingleton("globalEventProcessors",()=>[])}function addGlobalEventProcessor(sn){getGlobalEventProcessors().push(sn)}function generatePropagationContext(){return{traceId:uuid4(),spanId:uuid4().substring(16),sampled:!1}}const API_VERSION=4,DEFAULT_BREADCRUMBS=100;class Hub{constructor(ln,cn=new Scope,dn=API_VERSION){this._version=dn,this._stack=[{scope:cn}],ln&&this.bindClient(ln)}isOlderThan(ln){return this._version<ln}bindClient(ln){const cn=this.getStackTop();cn.client=ln,ln&&ln.setupIntegrations&&ln.setupIntegrations()}pushScope(){const ln=Scope.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:ln}),ln}popScope(){return this.getStack().length<=1?!1:!!this.getStack().pop()}withScope(ln){const cn=this.pushScope();try{ln(cn)}finally{this.popScope()}}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(ln,cn){const dn=this._lastEventId=cn&&cn.event_id?cn.event_id:uuid4(),pn=new Error("Sentry syntheticException");return this._withClient((vn,kn)=>{vn.captureException(ln,{originalException:ln,syntheticException:pn,...cn,event_id:dn},kn)}),dn}captureMessage(ln,cn,dn){const pn=this._lastEventId=dn&&dn.event_id?dn.event_id:uuid4(),vn=new Error(ln);return this._withClient((kn,Sn)=>{kn.captureMessage(ln,cn,{originalException:ln,syntheticException:vn,...dn,event_id:pn},Sn)}),pn}captureEvent(ln,cn){const dn=cn&&cn.event_id?cn.event_id:uuid4();return ln.type||(this._lastEventId=dn),this._withClient((pn,vn)=>{pn.captureEvent(ln,{...cn,event_id:dn},vn)}),dn}lastEventId(){return this._lastEventId}addBreadcrumb(ln,cn){const{scope:dn,client:pn}=this.getStackTop();if(!pn)return;const{beforeBreadcrumb:vn=null,maxBreadcrumbs:kn=DEFAULT_BREADCRUMBS}=pn.getOptions&&pn.getOptions()||{};if(kn<=0)return;const wn={timestamp:dateTimestampInSeconds(),...ln},Pn=vn?consoleSandbox(()=>vn(wn,cn)):wn;Pn!==null&&(pn.emit&&pn.emit("beforeAddBreadcrumb",Pn,cn),dn.addBreadcrumb(Pn,kn))}setUser(ln){this.getScope().setUser(ln)}setTags(ln){this.getScope().setTags(ln)}setExtras(ln){this.getScope().setExtras(ln)}setTag(ln,cn){this.getScope().setTag(ln,cn)}setExtra(ln,cn){this.getScope().setExtra(ln,cn)}setContext(ln,cn){this.getScope().setContext(ln,cn)}configureScope(ln){const{scope:cn,client:dn}=this.getStackTop();dn&&ln(cn)}run(ln){const cn=makeMain(this);try{ln(this)}finally{makeMain(cn)}}getIntegration(ln){const cn=this.getClient();if(!cn)return null;try{return cn.getIntegration(ln)}catch{return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger.warn(`Cannot retrieve integration ${ln.id} from the current Hub`),null}}startTransaction(ln,cn){const dn=this._callExtensionMethod("startTransaction",ln,cn);return(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&!dn&&console.warn(`Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':
Sentry.addTracingExtensions();
Sentry.init({...});
`),dn}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(ln=!1){if(ln)return this.endSession();this._sendSessionUpdate()}endSession(){const cn=this.getStackTop().scope,dn=cn.getSession();dn&&closeSession(dn),this._sendSessionUpdate(),cn.setSession()}startSession(ln){const{scope:cn,client:dn}=this.getStackTop(),{release:pn,environment:vn=DEFAULT_ENVIRONMENT}=dn&&dn.getOptions()||{},{userAgent:kn}=GLOBAL_OBJ.navigator||{},Sn=makeSession({release:pn,environment:vn,user:cn.getUser(),...kn&&{userAgent:kn},...ln}),wn=cn.getSession&&cn.getSession();return wn&&wn.status==="ok"&&updateSession(wn,{status:"exited"}),this.endSession(),cn.setSession(Sn),Sn}shouldSendDefaultPii(){const ln=this.getClient(),cn=ln&&ln.getOptions();return!!(cn&&cn.sendDefaultPii)}_sendSessionUpdate(){const{scope:ln,client:cn}=this.getStackTop(),dn=ln.getSession();dn&&cn&&cn.captureSession&&cn.captureSession(dn)}_withClient(ln){const{scope:cn,client:dn}=this.getStackTop();dn&&ln(dn,cn)}_callExtensionMethod(ln,...cn){const pn=getMainCarrier().__SENTRY__;if(pn&&pn.extensions&&typeof pn.extensions[ln]=="function")return pn.extensions[ln].apply(this,cn);(typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__)&&logger.warn(`Extension method ${ln} couldn't be found, doing nothing.`)}}function getMainCarrier(){return GLOBAL_OBJ.__SENTRY__=GLOBAL_OBJ.__SENTRY__||{extensions:{},hub:void 0},GLOBAL_OBJ}function makeMain(sn){const ln=getMainCarrier(),cn=getHubFromCarrier(ln);return setHubOnCarrier(ln,sn),cn}function getCurrentHub(){const sn=getMainCarrier();if(sn.__SENTRY__&&sn.__SENTRY__.acs){const ln=sn.__SENTRY__.acs.getCurrentHub();if(ln)return ln}return getGlobalHub(sn)}function getGlobalHub(sn=getMainCarrier()){return(!hasHubOnCarrier(sn)||getHubFromCarrier(sn).isOlderThan(API_VERSION))&&setHubOnCarrier(sn,new Hub),getHubFromCarrier(sn)}function hasHubOnCarrier(sn){return!!(sn&&sn.__SENTRY__&&sn.__SENTRY__.hub)}function getHubFromCarrier(sn){return getGlobalSingleton("hub",()=>new Hub,sn)}function setHubOnCarrier(sn,ln){if(!sn)return!1;const cn=sn.__SENTRY__=sn.__SENTRY__||{};return cn.hub=ln,!0}function captureException(sn,ln){return getCurrentHub().captureException(sn,{captureContext:ln})}function configureScope(sn){getCurrentHub().configureScope(sn)}function withScope(sn){getCurrentHub().withScope(sn)}var shakaPlayer_compiled={};/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/(function(sn){(function(){var ln=typeof window<"u"?window:commonjsGlobal$1,cn={};(function(pn,vn,kn){/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/var Sn;function wn(gn){var bn=0;return function(){return bn<gn.length?{done:!1,value:gn[bn++]}:{done:!0}}}var Pn=typeof Object.defineProperties=="function"?Object.defineProperty:function(gn,bn,Cn){return gn==Array.prototype||gn==Object.prototype||(gn[bn]=Cn.value),gn};function Nn(gn){gn=[typeof globalThis=="object"&&globalThis,gn,typeof pn=="object"&&pn,typeof self=="object"&&self,typeof vn=="object"&&vn];for(var bn=0;bn<gn.length;++bn){var Cn=gn[bn];if(Cn&&Cn.Math==Math)return Cn}throw Error("Cannot find global object")}var Ln=Nn(this);function Fn(gn,bn){if(bn)e:{var Cn=Ln;gn=gn.split(".");for(var In=0;In<gn.length-1;In++){var Rn=gn[In];if(!(Rn in Cn))break e;Cn=Cn[Rn]}gn=gn[gn.length-1],In=Cn[gn],bn=bn(In),bn!=In&&bn!=null&&Pn(Cn,gn,{configurable:!0,writable:!0,value:bn})}}Fn("Symbol",function(gn){function bn(jn){if(this instanceof bn)throw new TypeError("Symbol is not a constructor");return new Cn(In+(jn||"")+"_"+Rn++,jn)}function Cn(jn,Vn){this.g=jn,Pn(this,"description",{configurable:!0,writable:!0,value:Vn})}if(gn)return gn;Cn.prototype.toString=function(){return this.g};var In="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",Rn=0;return bn}),Fn("Symbol.iterator",function(gn){if(gn)return gn;gn=Symbol("Symbol.iterator");for(var bn="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),Cn=0;Cn<bn.length;Cn++){var In=Ln[bn[Cn]];typeof In=="function"&&typeof In.prototype[gn]!="function"&&Pn(In.prototype,gn,{configurable:!0,writable:!0,value:function(){return zn(wn(this))}})}return gn});function zn(gn){return gn={next:gn},gn[Symbol.iterator]=function(){return this},gn}function Dn(gn){var bn=typeof Symbol<"u"&&Symbol.iterator&&gn[Symbol.iterator];return bn?bn.call(gn):{next:wn(gn)}}function Kn(gn){if(!(gn instanceof Array)){gn=Dn(gn);for(var bn,Cn=[];!(bn=gn.next()).done;)Cn.push(bn.value);gn=Cn}return gn}var qn=typeof Object.create=="function"?Object.create:function(gn){function bn(){}return bn.prototype=gn,new bn},Zn;if(typeof Object.setPrototypeOf=="function")Zn=Object.setPrototypeOf;else{var Yn;e:{var Jn={a:!0},rs={};try{rs.__proto__=Jn,Yn=rs.a;break e}catch{}Yn=!1}Zn=Yn?function(gn,bn){if(gn.__proto__=bn,gn.__proto__!==bn)throw new TypeError(gn+" is not extensible");return gn}:null}var ss=Zn;function as(gn,bn){if(gn.prototype=qn(bn.prototype),gn.prototype.constructor=gn,ss)ss(gn,bn);else for(var Cn in bn)if(Cn!="prototype")if(Object.defineProperties){var In=Object.getOwnPropertyDescriptor(bn,Cn);In&&Object.defineProperty(gn,Cn,In)}else gn[Cn]=bn[Cn];gn.wh=bn.prototype}function ds(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.u=this.i=null}function Es(gn){if(gn.o)throw new TypeError("Generator is already running");gn.o=!0}ds.prototype.s=function(gn){this.h=gn};function Ss(gn,bn){gn.i={Ee:bn,Le:!0},gn.g=gn.m||gn.j}ds.prototype.return=function(gn){this.i={return:gn},this.g=this.j};function Qn(gn,bn,Cn){return gn.g=Cn,{value:bn}}ds.prototype.A=function(gn){this.g=gn};function ms(gn){gn.g=0}function Ts(gn,bn,Cn){gn.m=bn,Cn!=null&&(gn.j=Cn)}function Rs(gn){gn.m=0,gn.j=2}function ys(gn,bn){gn.g=bn,gn.m=0}function _s(gn){gn.m=0;var bn=gn.i.Ee;return gn.i=null,bn}function js(gn){gn.u=[gn.i],gn.m=0,gn.j=0}function bs(gn,bn){var Cn=gn.u.splice(0)[0];(Cn=gn.i=gn.i||Cn)?Cn.Le?gn.g=gn.m||gn.j:Cn.A!=null&&gn.j<Cn.A?(gn.g=Cn.A,gn.i=null):gn.g=gn.j:gn.g=bn}function ks(gn){this.g=new ds,this.h=gn}function xs(gn,bn){Es(gn.g);var Cn=gn.g.l;return Cn?Ks(gn,"return"in Cn?Cn.return:function(In){return{value:In,done:!0}},bn,gn.g.return):(gn.g.return(bn),Vs(gn))}function Ks(gn,bn,Cn,In){try{var Rn=bn.call(gn.g.l,Cn);if(!(Rn instanceof Object))throw new TypeError("Iterator result "+Rn+" is not an object");if(!Rn.done)return gn.g.o=!1,Rn;var jn=Rn.value}catch(Vn){return gn.g.l=null,Ss(gn.g,Vn),Vs(gn)}return gn.g.l=null,In.call(gn.g,jn),Vs(gn)}function Vs(gn){for(;gn.g.g;)try{var bn=gn.h(gn.g);if(bn)return gn.g.o=!1,{value:bn.value,done:!1}}catch(Cn){gn.g.h=void 0,Ss(gn.g,Cn)}if(gn.g.o=!1,gn.g.i){if(bn=gn.g.i,gn.g.i=null,bn.Le)throw bn.Ee;return{value:bn.return,done:!0}}return{value:void 0,done:!0}}function Js(gn){this.next=function(bn){return Es(gn.g),gn.g.l?bn=Ks(gn,gn.g.l.next,bn,gn.g.s):(gn.g.s(bn),bn=Vs(gn)),bn},this.throw=function(bn){return Es(gn.g),gn.g.l?bn=Ks(gn,gn.g.l.throw,bn,gn.g.s):(Ss(gn.g,bn),bn=Vs(gn)),bn},this.return=function(bn){return xs(gn,bn)},this[Symbol.iterator]=function(){return this}}function ru(gn){function bn(In){return gn.next(In)}function Cn(In){return gn.throw(In)}return new Promise(function(In,Rn){function jn(Vn){Vn.done?In(Vn.value):Promise.resolve(Vn.value).then(bn,Cn).then(jn,Rn)}jn(gn.next())})}function hs(gn){return ru(new Js(new ks(gn)))}function lu(){for(var gn=Number(this),bn=[],Cn=gn;Cn<arguments.length;Cn++)bn[Cn-gn]=arguments[Cn];return bn}Fn("Promise",function(gn){function bn(Vn){this.h=0,this.i=void 0,this.g=[],this.o=!1;var Hn=this.j();try{Vn(Hn.resolve,Hn.reject)}catch(Xn){Hn.reject(Xn)}}function Cn(){this.g=null}function In(Vn){return Vn instanceof bn?Vn:new bn(function(Hn){Hn(Vn)})}if(gn)return gn;Cn.prototype.h=function(Vn){if(this.g==null){this.g=[];var Hn=this;this.i(function(){Hn.l()})}this.g.push(Vn)};var Rn=Ln.setTimeout;Cn.prototype.i=function(Vn){Rn(Vn,0)},Cn.prototype.l=function(){for(;this.g&&this.g.length;){var Vn=this.g;this.g=[];for(var Hn=0;Hn<Vn.length;++Hn){var Xn=Vn[Hn];Vn[Hn]=null;try{Xn()}catch(ns){this.j(ns)}}}this.g=null},Cn.prototype.j=function(Vn){this.i(function(){throw Vn})},bn.prototype.j=function(){function Vn(ns){return function(us){Xn||(Xn=!0,ns.call(Hn,us))}}var Hn=this,Xn=!1;return{resolve:Vn(this.F),reject:Vn(this.l)}},bn.prototype.F=function(Vn){if(Vn===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(Vn instanceof bn)this.H(Vn);else{e:switch(typeof Vn){case"object":var Hn=Vn!=null;break e;case"function":Hn=!0;break e;default:Hn=!1}Hn?this.D(Vn):this.m(Vn)}},bn.prototype.D=function(Vn){var Hn=void 0;try{Hn=Vn.then}catch(Xn){this.l(Xn);return}typeof Hn=="function"?this.J(Hn,Vn):this.m(Vn)},bn.prototype.l=function(Vn){this.s(2,Vn)},bn.prototype.m=function(Vn){this.s(1,Vn)},bn.prototype.s=function(Vn,Hn){if(this.h!=0)throw Error("Cannot settle("+Vn+", "+Hn+"): Promise already settled in state"+this.h);this.h=Vn,this.i=Hn,this.h===2&&this.G(),this.u()},bn.prototype.G=function(){var Vn=this;Rn(function(){if(Vn.B()){var Hn=Ln.console;typeof Hn<"u"&&Hn.error(Vn.i)}},1)},bn.prototype.B=function(){if(this.o)return!1;var Vn=Ln.CustomEvent,Hn=Ln.Event,Xn=Ln.dispatchEvent;return typeof Xn>"u"?!0:(typeof Vn=="function"?Vn=new Vn("unhandledrejection",{cancelable:!0}):typeof Hn=="function"?Vn=new Hn("unhandledrejection",{cancelable:!0}):(Vn=Ln.document.createEvent("CustomEvent"),Vn.initCustomEvent("unhandledrejection",!1,!0,Vn)),Vn.promise=this,Vn.reason=this.i,Xn(Vn))},bn.prototype.u=function(){if(this.g!=null){for(var Vn=0;Vn<this.g.length;++Vn)jn.h(this.g[Vn]);this.g=null}};var jn=new Cn;return bn.prototype.H=function(Vn){var Hn=this.j();Vn.Lc(Hn.resolve,Hn.reject)},bn.prototype.J=function(Vn,Hn){var Xn=this.j();try{Vn.call(Hn,Xn.resolve,Xn.reject)}catch(ns){Xn.reject(ns)}},bn.prototype.then=function(Vn,Hn){function Xn(fs,vs){return typeof fs=="function"?function(Is){try{ns(fs(Is))}catch(Ls){us(Ls)}}:vs}var ns,us,ps=new bn(function(fs,vs){ns=fs,us=vs});return this.Lc(Xn(Vn,ns),Xn(Hn,us)),ps},bn.prototype.catch=function(Vn){return this.then(void 0,Vn)},bn.prototype.Lc=function(Vn,Hn){function Xn(){switch(ns.h){case 1:Vn(ns.i);break;case 2:Hn(ns.i);break;default:throw Error("Unexpected state: "+ns.h)}}var ns=this;this.g==null?jn.h(Xn):this.g.push(Xn),this.o=!0},bn.resolve=In,bn.reject=function(Vn){return new bn(function(Hn,Xn){Xn(Vn)})},bn.race=function(Vn){return new bn(function(Hn,Xn){for(var ns=Dn(Vn),us=ns.next();!us.done;us=ns.next())In(us.value).Lc(Hn,Xn)})},bn.all=function(Vn){var Hn=Dn(Vn),Xn=Hn.next();return Xn.done?In([]):new bn(function(ns,us){function ps(Is){return function(Ls){fs[Is]=Ls,vs--,vs==0&&ns(fs)}}var fs=[],vs=0;do fs.push(void 0),vs++,In(Xn.value).Lc(ps(fs.length-1),us),Xn=Hn.next();while(!Xn.done)})},bn});function _u(gn,bn){return Object.prototype.hasOwnProperty.call(gn,bn)}Fn("WeakMap",function(gn){function bn(Xn){if(this.g=(Hn+=Math.random()+1).toString(),Xn){Xn=Dn(Xn);for(var ns;!(ns=Xn.next()).done;)ns=ns.value,this.set(ns[0],ns[1])}}function Cn(){}function In(Xn){var ns=typeof Xn;return ns==="object"&&Xn!==null||ns==="function"}function Rn(Xn){if(!_u(Xn,Vn)){var ns=new Cn;Pn(Xn,Vn,{value:ns})}}function jn(Xn){var ns=Object[Xn];ns&&(Object[Xn]=function(us){return us instanceof Cn?us:(Object.isExtensible(us)&&Rn(us),ns(us))})}if(function(){if(!gn||!Object.seal)return!1;try{var Xn=Object.seal({}),ns=Object.seal({}),us=new gn([[Xn,2],[ns,3]]);return us.get(Xn)!=2||us.get(ns)!=3?!1:(us.delete(Xn),us.set(ns,4),!us.has(Xn)&&us.get(ns)==4)}catch{return!1}}())return gn;var Vn="$jscomp_hidden_"+Math.random();jn("freeze"),jn("preventExtensions"),jn("seal");var Hn=0;return bn.prototype.set=function(Xn,ns){if(!In(Xn))throw Error("Invalid WeakMap key");if(Rn(Xn),!_u(Xn,Vn))throw Error("WeakMap key fail: "+Xn);return Xn[Vn][this.g]=ns,this},bn.prototype.get=function(Xn){return In(Xn)&&_u(Xn,Vn)?Xn[Vn][this.g]:void 0},bn.prototype.has=function(Xn){return In(Xn)&&_u(Xn,Vn)&&_u(Xn[Vn],this.g)},bn.prototype.delete=function(Xn){return In(Xn)&&_u(Xn,Vn)&&_u(Xn[Vn],this.g)?delete Xn[Vn][this.g]:!1},bn}),Fn("Map",function(gn){function bn(){var Hn={};return Hn.Pa=Hn.next=Hn.head=Hn}function Cn(Hn,Xn){var ns=Hn.g;return zn(function(){if(ns){for(;ns.head!=Hn.g;)ns=ns.Pa;for(;ns.next!=ns.head;)return ns=ns.next,{done:!1,value:Xn(ns)};ns=null}return{done:!0,value:void 0}})}function In(Hn,Xn){var ns=Xn&&typeof Xn;ns=="object"||ns=="function"?jn.has(Xn)?ns=jn.get(Xn):(ns=""+ ++Vn,jn.set(Xn,ns)):ns="p_"+Xn;var us=Hn.h[ns];if(us&&_u(Hn.h,ns))for(Hn=0;Hn<us.length;Hn++){var ps=us[Hn];if(Xn!==Xn&&ps.key!==ps.key||Xn===ps.key)return{id:ns,list:us,index:Hn,ga:ps}}return{id:ns,list:us,index:-1,ga:void 0}}function Rn(Hn){if(this.h={},this.g=bn(),this.size=0,Hn){Hn=Dn(Hn);for(var Xn;!(Xn=Hn.next()).done;)Xn=Xn.value,this.set(Xn[0],Xn[1])}}if(function(){if(!gn||typeof gn!="function"||!gn.prototype.entries||typeof Object.seal!="function")return!1;try{var Hn=Object.seal({x:4}),Xn=new gn(Dn([[Hn,"s"]]));if(Xn.get(Hn)!="s"||Xn.size!=1||Xn.get({x:4})||Xn.set({x:4},"t")!=Xn||Xn.size!=2)return!1;var ns=Xn.entries(),us=ns.next();return us.done||us.value[0]!=Hn||us.value[1]!="s"?!1:(us=ns.next(),!(us.done||us.value[0].x!=4||us.value[1]!="t"||!ns.next().done))}catch{return!1}}())return gn;var jn=new WeakMap;Rn.prototype.set=function(Hn,Xn){Hn=Hn===0?0:Hn;var ns=In(this,Hn);return ns.list||(ns.list=this.h[ns.id]=[]),ns.ga?ns.ga.value=Xn:(ns.ga={next:this.g,Pa:this.g.Pa,head:this.g,key:Hn,value:Xn},ns.list.push(ns.ga),this.g.Pa.next=ns.ga,this.g.Pa=ns.ga,this.size++),this},Rn.prototype.delete=function(Hn){return Hn=In(this,Hn),Hn.ga&&Hn.list?(Hn.list.splice(Hn.index,1),Hn.list.length||delete this.h[Hn.id],Hn.ga.Pa.next=Hn.ga.next,Hn.ga.next.Pa=Hn.ga.Pa,Hn.ga.head=null,this.size--,!0):!1},Rn.prototype.clear=function(){this.h={},this.g=this.g.Pa=bn(),this.size=0},Rn.prototype.has=function(Hn){return!!In(this,Hn).ga},Rn.prototype.get=function(Hn){return(Hn=In(this,Hn).ga)&&Hn.value},Rn.prototype.entries=function(){return Cn(this,function(Hn){return[Hn.key,Hn.value]})},Rn.prototype.keys=function(){return Cn(this,function(Hn){return Hn.key})},Rn.prototype.values=function(){return Cn(this,function(Hn){return Hn.value})},Rn.prototype.forEach=function(Hn,Xn){for(var ns=this.entries(),us;!(us=ns.next()).done;)us=us.value,Hn.call(Xn,us[1],us[0],this)},Rn.prototype[Symbol.iterator]=Rn.prototype.entries;var Vn=0;return Rn}),Fn("Set",function(gn){function bn(Cn){if(this.g=new Map,Cn){Cn=Dn(Cn);for(var In;!(In=Cn.next()).done;)this.add(In.value)}this.size=this.g.size}return function(){if(!gn||typeof gn!="function"||!gn.prototype.entries||typeof Object.seal!="function")return!1;try{var Cn=Object.seal({x:4}),In=new gn(Dn([Cn]));if(!In.has(Cn)||In.size!=1||In.add(Cn)!=In||In.size!=1||In.add({x:4})!=In||In.size!=2)return!1;var Rn=In.entries(),jn=Rn.next();return jn.done||jn.value[0]!=Cn||jn.value[1]!=Cn?!1:(jn=Rn.next(),jn.done||jn.value[0]==Cn||jn.value[0].x!=4||jn.value[1]!=jn.value[0]?!1:Rn.next().done)}catch{return!1}}()?gn:(bn.prototype.add=function(Cn){return Cn=Cn===0?0:Cn,this.g.set(Cn,Cn),this.size=this.g.size,this},bn.prototype.delete=function(Cn){return Cn=this.g.delete(Cn),this.size=this.g.size,Cn},bn.prototype.clear=function(){this.g.clear(),this.size=0},bn.prototype.has=function(Cn){return this.g.has(Cn)},bn.prototype.entries=function(){return this.g.entries()},bn.prototype.values=function(){return this.g.values()},bn.prototype.keys=bn.prototype.values,bn.prototype[Symbol.iterator]=bn.prototype.values,bn.prototype.forEach=function(Cn,In){var Rn=this;this.g.forEach(function(jn){return Cn.call(In,jn,jn,Rn)})},bn)});function yu(gn,bn,Cn){gn instanceof String&&(gn=String(gn));for(var In=gn.length,Rn=0;Rn<In;Rn++){var jn=gn[Rn];if(bn.call(Cn,jn,Rn,gn))return{Je:Rn,v:jn}}return{Je:-1,v:void 0}}Fn("Array.prototype.findIndex",function(gn){return gn||function(bn,Cn){return yu(this,bn,Cn).Je}}),Fn("Object.is",function(gn){return gn||function(bn,Cn){return bn===Cn?bn!==0||1/bn===1/Cn:bn!==bn&&Cn!==Cn}}),Fn("Array.prototype.includes",function(gn){return gn||function(bn,Cn){var In=this;In instanceof String&&(In=String(In));var Rn=In.length;for(Cn=Cn||0,0>Cn&&(Cn=Math.max(Cn+Rn,0));Cn<Rn;Cn++){var jn=In[Cn];if(jn===bn||Object.is(jn,bn))return!0}return!1}});function Xu(gn,bn,Cn){if(gn==null)throw new TypeError("The 'this' value for String.prototype."+Cn+" must not be null or undefined");if(bn instanceof RegExp)throw new TypeError("First argument to String.prototype."+Cn+" must not be a regular expression");return gn+""}Fn("String.prototype.includes",function(gn){return gn||function(bn,Cn){return Xu(this,bn,"includes").indexOf(bn,Cn||0)!==-1}}),Fn("Array.prototype.find",function(gn){return gn||function(bn,Cn){return yu(this,bn,Cn).v}}),Fn("String.prototype.startsWith",function(gn){return gn||function(bn,Cn){var In=Xu(this,bn,"startsWith"),Rn=In.length,jn=bn.length;Cn=Math.max(0,Math.min(Cn|0,In.length));for(var Vn=0;Vn<jn&&Cn<Rn;)if(In[Cn++]!=bn[Vn++])return!1;return Vn>=jn}});function Du(gn,bn){gn instanceof String&&(gn+="");var Cn=0,In=!1,Rn={next:function(){if(!In&&Cn<gn.length){var jn=Cn++;return{value:bn(jn,gn[jn]),done:!1}}return In=!0,{done:!0,value:void 0}}};return Rn[Symbol.iterator]=function(){return Rn},Rn}Fn("Array.prototype.keys",function(gn){return gn||function(){return Du(this,function(bn){return bn})}});var Fl=typeof Object.assign=="function"?Object.assign:function(gn,bn){for(var Cn=1;Cn<arguments.length;Cn++){var In=arguments[Cn];if(In)for(var Rn in In)_u(In,Rn)&&(gn[Rn]=In[Rn])}return gn};Fn("Object.assign",function(gn){return gn||Fl}),Fn("Array.from",function(gn){return gn||function(bn,Cn,In){Cn=Cn??function(Hn){return Hn};var Rn=[],jn=typeof Symbol<"u"&&Symbol.iterator&&bn[Symbol.iterator];if(typeof jn=="function"){bn=jn.call(bn);for(var Vn=0;!(jn=bn.next()).done;)Rn.push(Cn.call(In,jn.value,Vn++))}else for(jn=bn.length,Vn=0;Vn<jn;Vn++)Rn.push(Cn.call(In,bn[Vn],Vn));return Rn}}),Fn("Array.prototype.values",function(gn){return gn||function(){return Du(this,function(bn,Cn){return Cn})}}),Fn("Promise.prototype.finally",function(gn){return gn||function(bn){return this.then(function(Cn){return Promise.resolve(bn()).then(function(){return Cn})},function(Cn){return Promise.resolve(bn()).then(function(){throw Cn})})}}),Fn("Array.prototype.entries",function(gn){return gn||function(){return Du(this,function(bn,Cn){return[bn,Cn]})}}),Fn("String.prototype.repeat",function(gn){return gn||function(bn){var Cn=Xu(this,null,"repeat");if(0>bn||1342177279<bn)throw new RangeError("Invalid count value");bn|=0;for(var In="";bn;)bn&1&&(In+=Cn),(bn>>>=1)&&(Cn+=Cn);return In}}),Fn("Number.isNaN",function(gn){return gn||function(bn){return typeof bn=="number"&&isNaN(bn)}}),Fn("Object.values",function(gn){return gn||function(bn){var Cn=[],In;for(In in bn)_u(bn,In)&&Cn.push(bn[In]);return Cn}}),Fn("Math.log2",function(gn){return gn||function(bn){return Math.log(bn)/Math.LN2}}),Fn("Math.trunc",function(gn){return gn||function(bn){if(bn=Number(bn),isNaN(bn)||bn===1/0||bn===-1/0||bn===0)return bn;var Cn=Math.floor(Math.abs(bn));return 0>bn?-Cn:Cn}}),Fn("Object.entries",function(gn){return gn||function(bn){var Cn=[],In;for(In in bn)_u(bn,In)&&Cn.push([In,bn[In]]);return Cn}});var Vp=this||self;function Ys(gn,bn){gn=gn.split(".");var Cn=Vp;gn[0]in Cn||typeof Cn.execScript>"u"||Cn.execScript("var "+gn[0]);for(var In;gn.length&&(In=gn.shift());)gn.length||bn===void 0?Cn[In]&&Cn[In]!==Object.prototype[In]?Cn=Cn[In]:Cn=Cn[In]={}:Cn[In]=bn}function vu(gn){this.g=Math.exp(Math.log(.5)/gn),this.i=this.h=0}vu.prototype.sample=function(gn,bn){var Cn=Math.pow(this.g,gn);bn=bn*(1-Cn)+Cn*this.h,isNaN(bn)||(this.h=bn,this.i+=gn)};function Wl(gn){return gn.h/(1-Math.pow(gn.g,gn.i))}function lp(){this.h=new vu(2),this.j=new vu(5),this.g=0,this.i=128e3,this.l=16e3}lp.prototype.configure=function(gn){this.i=gn.minTotalBytes,this.l=gn.minBytes,this.h.g=Math.exp(Math.log(.5)/gn.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/gn.slowHalfLife)},lp.prototype.sample=function(gn,bn){if(!(bn<this.l)){var Cn=8e3*bn/gn;gn/=1e3,this.g+=bn,this.h.sample(gn,Cn),this.j.sample(gn,Cn)}},lp.prototype.getBandwidthEstimate=function(gn){return this.g<this.i?gn:Math.min(Wl(this.h),Wl(this.j))};function am(){}function fl(){}function Tu(){}function cp(gn){var bn=lu.apply(1,arguments);Jy.has(gn)||(Jy.add(gn),Tu.apply(am,Kn(bn)))}function wp(){}function ry(){}function vp(){}function Qv(){}var Jy=new Set;pn.console&&(Tu=function(){return console.warn.apply(console,Kn(lu.apply(0,arguments)))},fl=function(){console.error.apply(console,Kn(lu.apply(0,arguments)))});function Fu(gn){if(Eu.has(gn))return Eu.get(gn);var bn=MediaSource.isTypeSupported(gn);return Eu.set(gn,bn),bn}var Eu=new Map;function el(gn,bn){return typeof gn=="number"&&typeof bn=="number"&&isNaN(gn)&&isNaN(bn)?!0:gn===bn}function pl(gn,bn){bn=gn.indexOf(bn),-1<bn&&gn.splice(bn,1)}function Xp(gn,bn,Cn){if(Cn||(Cn=el),gn.length!=bn.length)return!1;bn=bn.slice();var In={};gn=Dn(gn);for(var Rn=gn.next();!Rn.done;In={md:In.md},Rn=gn.next()){if(In.md=Rn.value,Rn=bn.findIndex(function(jn){return function(Vn){return Cn(jn.md,Vn)}}(In)),Rn==-1)return!1;bn[Rn]=bn[bn.length-1],bn.pop()}return bn.length==0}function _p(gn,bn,Cn){if(Cn||(Cn=el),gn.length!=bn.length)return!1;for(var In=0;In<gn.length;In++)if(!Cn(gn[In],bn[In]))return!1;return!0}function Cu(gn,bn,Cn){this.startTime=gn,this.direction=zE,this.endTime=bn,this.payload=Cn,this.region=new Zv,this.position=null,this.positionAlign=Gp,this.size=0,this.textAlign=Qp,this.writingMode=Tv,this.lineInterpretation=HE,this.line=null,this.lineHeight="",this.lineAlign=kv,this.displayAlign=Ay,this.fontSize=this.textStrokeWidth=this.textStrokeColor=this.textShadow=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=Il,this.fontStyle=zs,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textDecoration=[],this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.cellResolution={columns:32,rows:15}}Cu.prototype.clone=function(){var gn=new Cu(0,0,""),bn;for(bn in this)gn[bn]=this[bn],gn[bn]&&gn[bn].constructor==Array&&(gn[bn]=gn[bn].slice());return gn};function Iu(gn,bn){if(gn.startTime!=bn.startTime||gn.endTime!=bn.endTime||gn.payload!=bn.payload)return!1;for(var Cn in gn)if(Cn!="startTime"&&Cn!="endTime"&&Cn!="payload"){if(Cn=="nestedCues"){if(!_p(gn.nestedCues,bn.nestedCues,Iu))return!1}else if(Cn=="region"||Cn=="cellResolution"){for(var In in gn[Cn])if(gn[Cn][In]!=bn[Cn][In])return!1}else if(Array.isArray(gn[Cn])){if(!_p(gn[Cn],bn[Cn]))return!1}else if(gn[Cn]!=bn[Cn])return!1}return!0}Ys("shaka.text.Cue",Cu);var Gp="auto";Cu.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Gp};var Qp="center",wy={LEFT:"left",RIGHT:"right",CENTER:Qp,START:"start",END:"end"};Cu.textAlign=wy;var Ay="after",ny={BEFORE:"before",CENTER:"center",AFTER:Ay};Cu.displayAlign=ny;var zE="ltr";Cu.direction={HORIZONTAL_LEFT_TO_RIGHT:zE,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var Tv="horizontal-tb";Cu.writingMode={HORIZONTAL_TOP_TO_BOTTOM:Tv,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var HE=0;Cu.lineInterpretation={LINE_NUMBER:HE,PERCENTAGE:1};var kv="start",KE={CENTER:"center",START:kv,END:"end"};Cu.lineAlign=KE;var Iy={white:"#FFF",lime:"#0F0",cyan:"#0FF",red:"#F00",yellow:"#FF0",magenta:"#F0F",blue:"#00F",black:"#000"};Cu.defaultTextColor=Iy;var Py={bg_white:"#FFF",bg_lime:"#0F0",bg_cyan:"#0FF",bg_red:"#F00",bg_yellow:"#FF0",bg_magenta:"#F0F",bg_blue:"#00F",bg_black:"#000"};Cu.defaultTextBackgroundColor=Py;var Il=400;Cu.fontWeight={NORMAL:Il,BOLD:700};var zs="normal",O0={NORMAL:zs,ITALIC:"italic",OBLIQUE:"oblique"};Cu.fontStyle=O0,Cu.textDecoration={UNDERLINE:"underline",LINE_THROUGH:"lineThrough",OVERLINE:"overline"};function Zv(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=Zl,this.scroll=Zp}Ys("shaka.text.CueRegion",Zv);var Zl=1;Zv.units={PX:0,PERCENTAGE:Zl,LINES:2};var Zp="";Zv.scrollMode={NONE:Zp,UP:"up"};function Mp(){}function Lm(gn,bn){if(!gn&&!bn)return!0;if(!gn||!bn||gn.byteLength!=bn.byteLength)return!1;if(ev(gn)==ev(bn)&&(gn.byteOffset||0)==(bn.byteOffset||0))return!0;var Cn=Pu(gn);bn=Pu(bn);for(var In=0;In<gn.byteLength;In++)if(Cn[In]!=bn[In])return!1;return!0}function ev(gn){return gn instanceof ArrayBuffer?gn:gn.buffer}function Vu(gn){return gn instanceof ArrayBuffer?gn:gn.byteOffset==0&&gn.byteLength==gn.buffer.byteLength?gn.buffer:new Uint8Array(gn).buffer}function Pu(gn,bn,Cn){return Cn=Cn===void 0?1/0:Cn,om(gn,bn===void 0?0:bn,Cn,Uint8Array)}function rp(gn,bn,Cn){return Cn=Cn===void 0?1/0:Cn,om(gn,bn===void 0?0:bn,Cn,DataView)}function om(gn,bn,Cn,In){var Rn=(gn.byteOffset||0)+gn.byteLength;return bn=Math.max(0,Math.min((gn.byteOffset||0)+bn,Rn)),new In(ev(gn),bn,Math.min(bn+Math.max(Cn,0),Rn)-bn)}Ys("shaka.util.BufferUtils",Mp),Mp.toDataView=rp,Mp.toUint8=Pu,Mp.toArrayBuffer=Vu,Mp.equal=Lm;function Bs(gn,bn,Cn){var In=lu.apply(3,arguments);this.severity=gn,this.category=bn,this.code=Cn,this.data=In,this.handled=!1}Bs.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},Ys("shaka.util.Error",Bs),Bs.Severity={RECOVERABLE:1,CRITICAL:2},Bs.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},Bs.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,CHAPTERS_TRACK_FAILED:2015,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_SRC_EQUALS:2016,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,HLS_AES_128_INVALID_IV_LENGTH:4043,HLS_AES_128_INVALID_KEY_LENGTH:4044,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004};/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/var O_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/function Rp(gn){var bn;gn instanceof Rp?(ol(this,gn.Ea),this.pb=gn.pb,this.Ha=gn.Ha,M0(this,gn.Kb),this.qa=gn.qa,pm(this,gn.g.clone()),this.fb=gn.fb):gn&&(bn=String(gn).match(O_))?(ol(this,bn[1]||"",!0),this.pb=iy(bn[2]||""),this.Ha=iy(bn[3]||"",!0),M0(this,bn[4]),this.qa=iy(bn[5]||"",!0),pm(this,bn[6]||"",!0),this.fb=iy(bn[7]||"")):this.g=new Jv(null)}Sn=Rp.prototype,Sn.Ea="",Sn.pb="",Sn.Ha="",Sn.Kb=null,Sn.qa="",Sn.fb="",Sn.toString=function(){var gn=[],bn=this.Ea;if(bn&&gn.push($v(bn,WE,!0),":"),bn=this.Ha){gn.push("//");var Cn=this.pb;Cn&&gn.push($v(Cn,WE,!0),"@"),gn.push(encodeURIComponent(bn).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),bn=this.Kb,bn!=null&&gn.push(":",String(bn))}return(bn=this.qa)&&(this.Ha&&bn.charAt(0)!="/"&&gn.push("/"),gn.push($v(bn,bn.charAt(0)=="/"?MT:np,!0))),(bn=this.g.toString())&&gn.push("?",bn),(bn=this.fb)&&gn.push("#",$v(bn,qE)),gn.join("")},Sn.resolve=function(gn){var bn=this.clone();bn.Ea==="data"&&(bn=new Rp);var Cn=!!gn.Ea;Cn?ol(bn,gn.Ea):Cn=!!gn.pb,Cn?bn.pb=gn.pb:Cn=!!gn.Ha,Cn?bn.Ha=gn.Ha:Cn=gn.Kb!=null;var In=gn.qa;if(Cn)M0(bn,gn.Kb);else if(Cn=!!gn.qa){if(In.charAt(0)!="/")if(this.Ha&&!this.qa)In="/"+In;else{var Rn=bn.qa.lastIndexOf("/");Rn!=-1&&(In=bn.qa.substr(0,Rn+1)+In)}if(In==".."||In==".")In="";else if(In.indexOf("./")!=-1||In.indexOf("/.")!=-1){Rn=In.lastIndexOf("/",0)==0,In=In.split("/");for(var jn=[],Vn=0;Vn<In.length;){var Hn=In[Vn++];Hn=="."?Rn&&Vn==In.length&&jn.push(""):Hn==".."?((1<jn.length||jn.length==1&&jn[0]!="")&&jn.pop(),Rn&&Vn==In.length&&jn.push("")):(jn.push(Hn),Rn=!0)}In=jn.join("/")}}return Cn?bn.qa=In:Cn=gn.g.toString()!=="",Cn?pm(bn,gn.g.clone()):Cn=!!gn.fb,Cn&&(bn.fb=gn.fb),bn},Sn.clone=function(){return new Rp(this)};function ol(gn,bn,Cn){gn.Ea=Cn?iy(bn,!0):bn,gn.Ea&&(gn.Ea=gn.Ea.replace(/:$/,""))}function M0(gn,bn){if(bn){if(bn=Number(bn),isNaN(bn)||0>bn)throw Error("Bad port number "+bn);gn.Kb=bn}else gn.Kb=null}function pm(gn,bn,Cn){bn instanceof Jv?gn.g=bn:(Cn||(bn=$v(bn,H$)),gn.g=new Jv(bn))}function iy(gn,bn){return gn?bn?decodeURI(gn):decodeURIComponent(gn):""}function $v(gn,bn,Cn){return gn!=null?(gn=encodeURI(gn).replace(bn,R0),Cn&&(gn=gn.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),gn):null}function R0(gn){return gn=gn.charCodeAt(0),"%"+(gn>>4&15).toString(16)+(gn&15).toString(16)}var WE=/[#\/\?@]/g,np=/[#\?:]/g,MT=/[#\?]/g,H$=/[#\?@]/g,qE=/#/g;function Jv(gn){this.g=gn||null}function M_(gn){if(!gn.ma&&(gn.ma={},gn.Oc=0,gn.g))for(var bn=gn.g.split("&"),Cn=0;Cn<bn.length;Cn++){var In=bn[Cn].indexOf("="),Rn=null;if(0<=In){var jn=bn[Cn].substring(0,In);Rn=bn[Cn].substring(In+1)}else jn=bn[Cn];jn=decodeURIComponent(jn.replace(/\+/g," ")),Rn=Rn||"",gn.add(jn,decodeURIComponent(Rn.replace(/\+/g," ")))}}Sn=Jv.prototype,Sn.ma=null,Sn.Oc=null,Sn.add=function(gn,bn){M_(this),this.g=null;var Cn=this.ma.hasOwnProperty(gn)?this.ma[gn]:null;return Cn||(this.ma[gn]=Cn=[]),Cn.push(bn),this.Oc++,this},Sn.set=function(gn,bn){return M_(this),this.g=null,this.ma.hasOwnProperty(gn)?this.ma[gn]=[bn]:this.add(gn,bn),this},Sn.toString=function(){if(this.g)return this.g;if(!this.ma)return"";var gn=[],bn;for(bn in this.ma)for(var Cn=encodeURIComponent(bn),In=this.ma[bn],Rn=0;Rn<In.length;Rn++){var jn=Cn;In[Rn]!==""&&(jn+="="+encodeURIComponent(In[Rn])),gn.push(jn)}return this.g=gn.join("&")},Sn.clone=function(){var gn=new Jv;if(gn.g=this.g,this.ma){var bn={},Cn;for(Cn in this.ma)bn[Cn]=this.ma[Cn].concat();gn.ma=bn,gn.Oc=this.Oc}return gn};function bv(gn,bn){return gn.concat(bn)}function R_(){}function dp(gn){return gn!=null}function zp(gn,bn){if(bn.length==0)return gn;var Cn=bn.map(function(In){return new Rp(In)});return gn.map(function(In){return new Rp(In)}).map(function(In){return Cn.map(function(Rn){return In.resolve(Rn)})}).reduce(bv,[]).map(function(In){return In.toString()})}function tv(gn,bn){return{keySystem:gn,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:bn||[],keyIds:new Set}}function Wu(gn,bn){if(bn.length==1)return bn[0];if(gn=Np(gn,bn),gn!=null)return gn;throw new Bs(2,4,4025,bn)}function Np(gn,bn){for(var Cn=Dn(N_[gn]),In=Cn.next();!In.done;In=Cn.next()){In=In.value;for(var Rn=Dn(bn),jn=Rn.next();!jn.done;jn=Rn.next())if(jn=jn.value,In.test(jn.trim()))return jn.trim()}return gn==Zu?"":null}var Zu="text",tl={va:"video",Hc:"audio",X:Zu,Wb:"image",Fg:"application"},N_={audio:[/^vorbis$/,/^opus$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4$/,/^dts[cex]$/],video:[/^avc/,/^hev/,/^hvc/,/^vp0?[89]/,/^av01/,/^dvhe/],text:[/^vtt$/,/^wvtt/,/^stpp/]};function bl(){var gn,bn,Cn=new Promise(function(In,Rn){gn=In,bn=Rn});return Cn.resolve=gn,Cn.reject=bn,Cn}bl.prototype.resolve=function(){},bl.prototype.reject=function(){};function Dp(gn){this.h=gn,this.g=void 0}Dp.prototype.value=function(){return this.g==null&&(this.g=this.h()),this.g};function ay(gn){this.h=gn,this.g=null}ay.prototype.O=function(gn){var bn=this;this.stop();var Cn=!0,In=null;return this.g=function(){pn.clearTimeout(In),Cn=!1},In=pn.setTimeout(function(){Cn&&bn.h()},1e3*gn),this},ay.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function Hu(gn){this.h=gn,this.g=null}Hu.prototype.Mb=function(){return this.stop(),this.h(),this},Hu.prototype.O=function(gn){var bn=this;return this.stop(),this.g=new ay(function(){bn.h()}).O(gn),this},Hu.prototype.Ca=function(gn){var bn=this;return this.stop(),this.g=new ay(function(){bn.g.O(gn),bn.h()}).O(gn),this},Hu.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},Ys("shaka.util.Timer",Hu),Hu.prototype.stop=Hu.prototype.stop,Hu.prototype.tickEvery=Hu.prototype.Ca,Hu.prototype.tickAfter=Hu.prototype.O,Hu.prototype.tickNow=Hu.prototype.Mb;function Ap(){return!!(pn.MediaSource&&MediaSource.isTypeSupported)}function Em(gn){return YE().canPlayType(gn)!=""}function Yl(){return!!navigator.userAgent.match(/Edge?\//)}function Um(){return gl("Xbox One")}function Ep(){return gl("Tizen")}function Oy(){return gl("Web0S")&&gl("Chrome/38.0.2125.122 Safari/537.36")}function D_(){return!!navigator.vendor&&navigator.vendor.includes("Apple")&&!Ep()&&!gl("PC=EOS")&&!gl("VirginMedia")&&!hm()&&!gl("AFT")}function hm(){return gl("PlayStation 4")}function L_(){if(!D_())return null;var gn=navigator.userAgent.match(/Version\/(\d+)/);return gn||(gn=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(gn[1],10):null}function gl(gn){return(navigator.userAgent||"").includes(gn)}function YE(){return ap||(Jp||(Jp=new Hu(function(){ap=null})),(ap=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(ap=document.createElement("video")),Jp.O(1),ap)}var Jp=null,ap=null;function Jl(){}function Ou(gn){if(!gn)return"";if(gn=Pu(gn),gn[0]==239&&gn[1]==187&&gn[2]==191&&(gn=gn.subarray(3)),pn.TextDecoder&&!hm())return gn=new TextDecoder().decode(gn),gn.includes("�")&&fl('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),gn;for(var bn="",Cn=0;Cn<gn.length;++Cn){var In=65533;if(gn[Cn]&128?gn.length>=Cn+2&&(gn[Cn]&224)==192&&(gn[Cn+1]&192)==128?(In=(gn[Cn]&31)<<6|gn[Cn+1]&63,Cn+=1):gn.length>=Cn+3&&(gn[Cn]&240)==224&&(gn[Cn+1]&192)==128&&(gn[Cn+2]&192)==128?(In=(gn[Cn]&15)<<12|(gn[Cn+1]&63)<<6|gn[Cn+2]&63,Cn+=2):gn.length>=Cn+4&&(gn[Cn]&241)==240&&(gn[Cn+1]&192)==128&&(gn[Cn+2]&192)==128&&(gn[Cn+3]&192)==128&&(In=(gn[Cn]&7)<<18|(gn[Cn+1]&63)<<12|(gn[Cn+2]&63)<<6|gn[Cn+3]&63,Cn+=3):In=gn[Cn],65535>=In)bn+=String.fromCharCode(In);else{In-=65536;var Rn=In&1023;bn+=String.fromCharCode(55296+(In>>10)),bn+=String.fromCharCode(56320+Rn)}}return bn}function Ip(gn,bn,Cn){if(!gn)return"";if(!Cn&&gn.byteLength%2!=0)throw new Bs(2,2,2004);Cn=Math.floor(gn.byteLength/2);var In=new Uint16Array(Cn);gn=rp(gn);for(var Rn=0;Rn<Cn;Rn++)In[Rn]=gn.getUint16(2*Rn,bn);return Hp.value()(In)}function My(gn){function bn(In){return Cn.byteLength<=In||32<=Cn[In]&&126>=Cn[In]}if(!gn)return"";var Cn=Pu(gn);if(Cn[0]==239&&Cn[1]==187&&Cn[2]==191)return Ou(Cn);if(Cn[0]==254&&Cn[1]==255)return Ip(Cn.subarray(2),!1);if(Cn[0]==255&&Cn[1]==254)return Ip(Cn.subarray(2),!0);if(Cn[0]==0&&Cn[2]==0)return Ip(gn,!1);if(Cn[1]==0&&Cn[3]==0)return Ip(gn,!0);if(bn(0)&&bn(1)&&bn(2)&&bn(3))return Ou(gn);throw new Bs(2,2,2003)}function fp(gn){if(pn.TextEncoder&&!hm()){var bn=new TextEncoder;return Vu(bn.encode(gn))}gn=encodeURIComponent(gn),gn=unescape(gn),bn=new Uint8Array(gn.length);for(var Cn=0;Cn<gn.length;Cn++)bn[Cn]=gn[Cn].charCodeAt(0);return Vu(bn)}function Ku(gn,bn){for(var Cn=new ArrayBuffer(2*gn.length),In=new DataView(Cn),Rn=0;Rn<gn.length;++Rn)In.setUint16(2*Rn,gn.charCodeAt(Rn),bn);return Cn}Ys("shaka.util.StringUtils",Jl),Jl.resetFromCharCode=function(){Hp.g=void 0},Jl.toUTF16=Ku,Jl.toUTF8=fp,Jl.fromBytesAutoDetect=My,Jl.fromUTF16=Ip,Jl.fromUTF8=Ou;var Hp=new Dp(function(){function gn(Cn){try{var In=new Uint8Array(Cn);return 0<String.fromCharCode.apply(null,In).length}catch{return!1}}for(var bn={Ta:65536};0<bn.Ta;bn={Ta:bn.Ta},bn.Ta/=2)if(gn(bn.Ta))return function(Cn){return function(In){for(var Rn="",jn=0;jn<In.length;jn+=Cn.Ta)Rn+=String.fromCharCode.apply(null,In.subarray(jn,jn+Cn.Ta));return Rn}}(bn);return null});function jm(){}function _l(gn){return gn=Pu(gn),gn=Hp.value()(gn),btoa(gn)}function Sm(gn,bn){return bn=bn??!0,gn=_l(gn).replace(/\+/g,"-").replace(/\//g,"_"),bn?gn:gn.replace(/[=]*$/,"")}function mm(gn){gn=pn.atob(gn.replace(/-/g,"+").replace(/_/g,"/"));for(var bn=new Uint8Array(gn.length),Cn=0;Cn<gn.length;++Cn)bn[Cn]=gn.charCodeAt(Cn);return bn}function ku(gn){for(var bn=gn.length/2,Cn=new Uint8Array(bn),In=0;In<bn;In++)Cn[In]=pn.parseInt(gn.substr(2*In,2),16);return Cn}function Sp(gn){var bn=Pu(gn);gn="",bn=Dn(bn);for(var Cn=bn.next();!Cn.done;Cn=bn.next())Cn=Cn.value,Cn=Cn.toString(16),Cn.length==1&&(Cn="0"+Cn),gn+=Cn;return gn}function oy(){for(var gn=lu.apply(0,arguments),bn=0,Cn=Dn(gn),In=Cn.next();!In.done;In=Cn.next())bn+=In.value.byteLength;for(bn=new Uint8Array(bn),Cn=0,gn=Dn(gn),In=gn.next();!In.done;In=gn.next())In=In.value,bn.set(Pu(In),Cn),Cn+=In.byteLength;return bn}Ys("shaka.util.Uint8ArrayUtils",jm),jm.concat=oy,jm.toHex=Sp,jm.fromHex=ku,jm.fromBase64=mm,jm.toBase64=Sm,jm.toStandardBase64=_l;function e_(){}Ys("shaka.dependencies",e_),e_.has=function(gn){return Fm.has(gn)},e_.add=function(gn,bn){if(!xv[gn])throw Error(gn+" is not supported");Fm.set(gn,function(){return bn})};var xv={muxjs:"muxjs"};e_.Allowed=xv;var Fm=new Map([["muxjs",function(){return pn.muxjs}]]);function XE(gn){var bn=this;this.o=gn,this.m=Fm.get("muxjs")(),this.h=this.g=null,this.l=[],this.i=[],this.j=!1,this.m&&(this.g=new this.m.mp4.Transmuxer({keepOriginalTimestamps:!0}),this.g.on("data",function(Cn){bn.i=Cn.captions,bn.l.push(oy(Cn.initSegment,Cn.data))}),this.g.on("done",function(){var Cn={data:oy.apply(jm,Kn(bn.l)),captions:bn.i};bn.h.resolve(Cn),bn.j=!1}))}XE.prototype.destroy=function(){return this.g&&this.g.dispose(),this.g=null,Promise.resolve()};function rv(gn,bn){var Cn=t_(gn),In=gn.toLowerCase().split(";")[0]=="audio/aac";return!Fm.get("muxjs")()||!Cn&&!In?!1:In?Fu('audio/mp4; codecs="mp4a.40.2"'):bn?Fu(wl(bn,gn)):(bn=wl("audio",gn),gn=wl("video",gn),Fu(bn)||Fu(gn))}function t_(gn){return gn.toLowerCase().split(";")[0].split("/")[1]=="mp2t"}function N0(gn,bn){return bn.toLowerCase().split(";")[0]=="audio/aac"?'audio/mp4; codecs="mp4a.40.2"':t_(bn)?wl(gn,bn):bn}function wl(gn,bn){if(bn=bn.replace(/mp2t/i,"mp4"),gn=="audio"&&(bn=bn.replace("video","audio")),gn=/avc1\.(66|77|100)\.(\d+)/.exec(bn)){var Cn="avc1.",In=gn[1],Rn=Number(gn[2]);Cn=(In=="66"?Cn+"4200":In=="77"?Cn+"4d00":Cn+"6400")+(Rn>>4).toString(16),Cn+=(Rn&15).toString(16),bn=bn.replace(gn[0],Cn)}return bn}function RT(gn,bn){return gn.j=!0,gn.h=new bl,gn.l=[],gn.i=[],bn=Pu(bn),gn.g.push(bn),gn.g.flush(),gn.j&&gn.h.reject(new Bs(2,3,3018)),gn.h}function D0(){}function _h(gn,bn){return bn&&(gn+='; codecs="'+bn+'"'),gn}function Tm(gn,bn,Cn){return bn=_h(gn,bn),rv(bn,Cn)?N0(Cn,bn):gn!="video/mp2t"&&Cn=="audio"?bn.replace("video","audio"):bn}function xl(gn){var bn=Bm(gn);switch(gn=bn[0],bn=bn[1].toLowerCase(),!0){case(gn==="mp4a"&&bn==="69"):case(gn==="mp4a"&&bn==="6b"):return"mp3";case(gn==="mp4a"&&bn==="66"):case(gn==="mp4a"&&bn==="67"):case(gn==="mp4a"&&bn==="68"):case(gn==="mp4a"&&bn==="40.2"):case(gn==="mp4a"&&bn==="40.02"):case(gn==="mp4a"&&bn==="40.5"):case(gn==="mp4a"&&bn==="40.05"):case(gn==="mp4a"&&bn==="40.29"):case(gn==="mp4a"&&bn==="40.42"):return"aac";case(gn==="mp4a"&&bn==="a5"):return"ac-3";case(gn==="mp4a"&&bn==="a6"):return"ec-3";case(gn==="mp4a"&&bn==="b2"):return"dtsx";case(gn==="mp4a"&&bn==="a9"):return"dtsc";case gn==="avc1":case gn==="avc3":return"avc";case gn==="hvc1":case gn==="hev1":return"hevc";case gn==="dvh1":case gn==="dvhe":return"dovi"}return gn}function Ry(gn){return gn=gn.split(/ *; */),gn.shift(),(gn=gn.find(function(bn){return bn.startsWith("codecs=")}))?gn.split("=")[1].replace(/^"|"$/g,""):""}function Bm(gn){gn=gn.split(".");var bn=gn[0];return gn.shift(),[bn,gn.join(".")]}Ys("shaka.util.MimeUtils",D0),D0.getFullType=_h,new Map().set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");function Kp(gn){this.i=null,this.j=gn,this.u=!1,this.l=this.s=0,this.m=1/0,this.h=this.g=null,this.B="",this.o=new Map}function r_(gn){return!!(_c[gn]||gn=="application/cea-608"||gn=="application/cea-708")}Kp.prototype.destroy=function(){return this.j=this.i=null,this.o.clear(),Promise.resolve()};function QE(gn,bn,Cn,In){var Rn,jn,Vn,Hn;return hs(function(Xn){if(Xn.g==1)return Qn(Xn,Promise.resolve(),2);if(!gn.i||!gn.j)return Xn.return();if(Cn==null||In==null)return gn.i.parseInit(Pu(bn)),Xn.return();Rn=gn.u?Cn:gn.s,jn={periodStart:gn.s,segmentStart:Cn,segmentEnd:In,vttOffset:Rn},Vn=gn.i.parseMedia(Pu(bn),jn),Hn=Vn.filter(function(ns){return ns.startTime>=gn.l&&ns.startTime<gn.m}),gn.j.append(Hn),gn.g==null&&(gn.g=Math.max(Cn,gn.l)),gn.h=Math.min(In,gn.m),ms(Xn)})}Kp.prototype.remove=function(gn,bn){var Cn=this;return hs(function(In){if(In.g==1)return Qn(In,Promise.resolve(),2);!Cn.j||!Cn.j.remove(gn,bn)||Cn.g==null||bn<=Cn.g||gn>=Cn.h||(gn<=Cn.g&&bn>=Cn.h?Cn.g=Cn.h=null:gn<=Cn.g&&bn<Cn.h?Cn.g=bn:gn>Cn.g&&bn>=Cn.h&&(Cn.h=gn)),ms(In)})};function km(gn,bn,Cn){gn.l=bn,gn.m=Cn}function ZE(gn,bn,Cn){if(gn.B=bn,bn=gn.o.get(bn))for(var In=Dn(bn.keys()),Rn=In.next();!Rn.done;Rn=In.next())(Rn=bn.get(Rn.value).filter(function(jn){return jn.endTime<=Cn}))&&gn.j.append(Rn)}function Ny(gn){var bn=[];gn=Dn(gn);for(var Cn=gn.next();!Cn.done;Cn=gn.next())Cn=Cn.value,bn.push({stream:Cn.stream,cue:new Cu(Cn.startTime,Cn.endTime,Cn.text)});return bn}function Lp(gn,bn,Cn){bn.startTime+=Cn,bn.endTime+=Cn,bn=Dn(bn.nestedCues);for(var In=bn.next();!In.done;In=bn.next())Lp(gn,In.value,Cn)}function n_(gn,bn,Cn,In,Rn){var jn=Cn+" "+In,Vn=new Map;bn=Dn(bn);for(var Hn=bn.next();!Hn.done;Hn=bn.next()){var Xn=Hn.value;Hn=Xn.stream,Xn=Xn.cue,Vn.has(Hn)||Vn.set(Hn,new Map),Vn.get(Hn).has(jn)||Vn.get(Hn).set(jn,[]),Lp(gn,Xn,Rn),Xn.startTime>=gn.l&&Xn.startTime<gn.m&&(Vn.get(Hn).get(jn).push(Xn),Hn==gn.B&&gn.j.append([Xn]))}for(Rn=Dn(Vn.keys()),jn=Rn.next();!jn.done;jn=Rn.next())for(jn=jn.value,gn.o.has(jn)||gn.o.set(jn,new Map),bn=Dn(Vn.get(jn).keys()),Hn=bn.next();!Hn.done;Hn=bn.next())Hn=Hn.value,Xn=Vn.get(jn).get(Hn),gn.o.get(jn).set(Hn,Xn);gn.g=gn.g==null?Math.max(Cn,gn.l):Math.min(gn.g,Math.max(Cn,gn.l)),gn.h=Math.max(gn.h,Math.min(In,gn.m))}Ys("shaka.text.TextEngine",Kp),Kp.prototype.destroy=Kp.prototype.destroy,Kp.findParser=function(gn){return _c[gn]},Kp.unregisterParser=function(gn){delete _c[gn]},Kp.registerParser=function(gn,bn){_c[gn]=bn};var _c={};function Up(){}function Cv(gn,bn){return gn=ml(gn),bn=ml(bn),gn.split("-")[0]==bn.split("-")[0]}function i_(gn,bn){return gn=ml(gn),bn=ml(bn),gn=gn.split("-"),bn=bn.split("-"),gn[0]==bn[0]&&gn.length==1&&bn.length==2}function a_(gn,bn){return gn=ml(gn),bn=ml(bn),gn=gn.split("-"),bn=bn.split("-"),gn.length==2&&bn.length==2&&gn[0]==bn[0]}function ml(gn){var bn=gn.split("-");return gn=bn[0]||"",bn=bn[1]||"",gn=gn.toLowerCase(),gn=NT.get(gn)||gn,(bn=bn.toUpperCase())?gn+"-"+bn:gn}function $m(gn,bn){return gn=ml(gn),bn=ml(bn),bn==gn?4:i_(bn,gn)?3:a_(bn,gn)?2:i_(gn,bn)?1:0}function L0(gn){var bn=gn.indexOf("-");return gn=0<=bn?gn.substring(0,bn):gn,gn=gn.toLowerCase(),gn=NT.get(gn)||gn}function U0(gn){return gn.language?ml(gn.language):gn.audio&&gn.audio.language?ml(gn.audio.language):gn.video&&gn.video.language?ml(gn.video.language):"und"}function wv(gn,bn){gn=ml(gn);var Cn=new Set,In=Dn(bn);for(bn=In.next();!bn.done;bn=In.next())Cn.add(ml(bn.value));for(In=Dn(Cn),bn=In.next();!bn.done;bn=In.next())if(bn=bn.value,bn==gn)return bn;for(In=Dn(Cn),bn=In.next();!bn.done;bn=In.next())if(bn=bn.value,i_(bn,gn))return bn;for(In=Dn(Cn),bn=In.next();!bn.done;bn=In.next())if(bn=bn.value,a_(bn,gn))return bn;for(Cn=Dn(Cn),bn=Cn.next();!bn.done;bn=Cn.next())if(bn=bn.value,i_(gn,bn))return bn;return null}Ys("shaka.util.LanguageUtils",Up),Up.findClosestLocale=wv,Up.getLocaleForVariant=U0,Up.getLocaleForText=function(gn){return ml(gn.language||"und")},Up.getBase=L0,Up.relatedness=$m,Up.areSiblings=function(gn,bn){var Cn=L0(gn),In=L0(bn);return gn!=Cn&&bn!=In&&Cn==In},Up.normalize=ml,Up.isSiblingOf=a_,Up.isParentOf=i_,Up.areLanguageCompatible=Cv,Up.areLocaleCompatible=function(gn,bn){return gn=ml(gn),bn=ml(bn),gn==bn};var NT=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function sy(){this.g={}}Sn=sy.prototype,Sn.push=function(gn,bn){this.g.hasOwnProperty(gn)?this.g[gn].push(bn):this.g[gn]=[bn]},Sn.get=function(gn){return(gn=this.g[gn])?gn.slice():null},Sn.remove=function(gn,bn){gn in this.g&&(this.g[gn]=this.g[gn].filter(function(Cn){return Cn!=bn}),this.g[gn].length==0&&delete this.g[gn])},Sn.forEach=function(gn){for(var bn in this.g)gn(bn,this.g[bn])},Sn.size=function(){return Object.keys(this.g).length},Sn.keys=function(){return Object.keys(this.g)};function Vm(gn,bn,Cn,In,Rn){var jn=gn.variants;(bn.length||Cn.length)&&(jn=As(jn,bn,Cn)),jn=Y$(jn,In),bn=su(jn),bn=_i(bn);var Vn=Hs(bn,Rn);gn.variants=gn.variants.filter(function(Hn){return mu(Hn)==Vn})}function su(gn){var bn=new sy;gn=Dn(gn);for(var Cn=gn.next();!Cn.done;Cn=gn.next()){Cn=Cn.value;var In=mu(Cn);bn.push(In,Cn)}return bn}function _i(gn){var bn=0,Cn=new Map,In=gn.size();return gn.forEach(function(Rn,jn){jn=Dn(jn);for(var Vn=jn.next();!Vn.done;Vn=jn.next()){Vn=Vn.value;var Hn=Vn.video;if(Hn&&Hn.width&&Hn.height){Hn=Hn.width*Hn.height*(Hn.frameRate||1),Cn.has(Hn)||Cn.set(Hn,new sy);var Xn=Cn.get(Hn);Xn.push(Rn,Vn),Xn.size()===In&&(bn=Math.max(bn,Hn))}}}),bn?Cn.get(bn):gn}function As(gn,bn,Cn){var In={};bn=Dn(bn);for(var Rn=bn.next();!Rn.done;In={xd:In.xd},Rn=bn.next())if(In.xd=Rn.value,Rn=gn.filter(function(jn){return function(Vn){return Vn.video&&Vn.video.codecs.startsWith(jn.xd)}}(In)),Rn.length){gn=Rn;break}for(In={},Cn=Dn(Cn),bn=Cn.next();!bn.done;In={jd:In.jd},bn=Cn.next())if(In.jd=bn.value,bn=gn.filter(function(jn){return function(Vn){return Vn.audio&&Vn.audio.codecs.startsWith(jn.jd)}}(In)),bn.length){gn=bn;break}return gn}function Hs(gn,bn){bn=Dn(bn);for(var Cn=bn.next();!Cn.done;Cn=bn.next())if(Cn=Cn.value,Cn==UT||Cn==Z$){if(gn=Us(gn,Cn),gn.size()==1)return gn.keys()[0]}else if(Cn==J$)break;return $s(gn)}function Us(gn,bn){var Cn=0,In=new sy;return gn.forEach(function(Rn,jn){for(var Vn=0,Hn=0,Xn=Dn(jn),ns=Xn.next();!ns.done;ns=Xn.next())ns=ns.value,ns.decodingInfos.length&&(Vn+=ns.decodingInfos[0][bn]?1:0,Hn++);Vn/=Hn,Vn>Cn?(In.g={},In.push(Rn,jn),Cn=Vn):Vn==Cn&&In.push(Rn,jn)}),In}function $s(gn){var bn="",Cn=1/0;return gn.forEach(function(In,Rn){var jn=0,Vn=0;Rn=Dn(Rn);for(var Hn=Rn.next();!Hn.done;Hn=Rn.next())jn+=Hn.value.bandwidth||0,++Vn;jn/=Vn,jn<Cn&&(bn=In,Cn=jn)}),bn}function mu(gn){var bn="";gn.video&&(bn=xl(gn.video.codecs));var Cn="";return gn.audio&&(Cn=xl(gn.audio.codecs)),bn+"-"+Cn}function uu(gn,bn,Cn){gn.variants=gn.variants.filter(function(In){return fu(In,bn,Cn)})}function fu(gn,bn,Cn){function In(jn,Vn,Hn){return jn>=Vn&&jn<=Hn}var Rn=gn.video;if(gn.disabledUntilTime!=0){if(gn.disabledUntilTime>Date.now()/1e3)return!1;gn.disabledUntilTime=0}return!(Rn&&Rn.width&&Rn.height&&(!In(Rn.width,bn.minWidth,Math.min(bn.maxWidth,Cn.width))||!In(Rn.height,bn.minHeight,Math.min(bn.maxHeight,Cn.height))||!In(Rn.width*Rn.height,bn.minPixels,bn.maxPixels))||gn&&gn.video&&gn.video.frameRate&&!In(gn.video.frameRate,bn.minFrameRate,bn.maxFrameRate)||!In(gn.bandwidth,bn.minBandwidth,bn.maxBandwidth))}function El(gn,bn,Cn){var In=!1;gn=Dn(gn);for(var Rn=gn.next();!Rn.done;Rn=gn.next()){Rn=Rn.value;var jn=Rn.allowedByApplication;Rn.allowedByApplication=fu(Rn,bn,Cn),jn!=Rn.allowedByApplication&&(In=!0)}return In}function wu(gn,bn){return hs(function(Cn){return Cn.g==1?Qn(Cn,jp(bn,0<bn.offlineSessionIds.length),2):(U_(gn,bn),hM(bn),Qn(Cn,mM(bn),0))})}function jp(gn,bn){return hs(function(Cn){if(Cn.g==1)return Qn(Cn,Ll(gn.variants,bn,!1),2);gn.variants=gn.variants.filter(function(In){var Rn=In.video;if(Rn){var jn=Ly(Rn.codecs);if(Rn.codecs.includes(",")){var Vn=Rn.codecs.split(",");jn=Wu("video",Vn),jn=Ly(jn),Vn=Wu("audio",Vn),Vn=Dy(Vn);var Hn=Tm(Rn.mimeType,Vn,"audio");if(!Fu(Hn))return!1;jn=[jn,Vn].join()}if(Vn=Tm(Rn.mimeType,jn,"video"),!Fu(Vn))return!1;Rn.codecs=jn}if(jn=In.audio){if(Vn=Dy(jn.codecs),Hn=Tm(jn.mimeType,Vn,"audio"),!Fu(Hn))return!1;jn.codecs=Vn}return Um()&&Rn&&(Rn.width&&1920<Rn.width||Rn.height&&1080<Rn.height)&&(Rn.codecs.includes("avc1.")||Rn.codecs.includes("avc3."))?(EA(In),!1):((Rn=In.decodingInfos.some(function(Xn){return Xn.supported}))||(EA(In),void 0),Rn)}),ms(Cn)})}function Ll(gn,bn,Cn){var In,Rn,jn,Vn,Hn,Xn,ns,us,ps,fs;return hs(function(vs){if(gn.some(function(Is){return Is.decodingInfos.length}))return vs.return();for(In=navigator.mediaCapabilities,Rn=[],jn=function(Is,Ls){var Cs;return hs(function(Ms){if(Ms.g==1)return Ts(Ms,2),Qn(Ms,In.decodingInfo(Ls),4);if(Ms.g!=2)return Cs=Ms.h,Is.decodingInfos.push(Cs),ys(Ms,0);_s(Ms),JSON.stringify(Ls),ms(Ms)})},Vn=Dn(gn),Hn=Vn.next();!Hn.done;Hn=Vn.next())for(Xn=Hn.value,ns=Bl(Xn,bn,Cn),us=Dn(ns),ps=us.next();!ps.done;ps=us.next())fs=ps.value,Rn.push(jn(Xn,fs));return Qn(vs,Promise.all(Rn),0)})}function Bl(gn,bn,Cn){var In=gn.audio,Rn=gn.video;if(Cn={type:Cn?"file":"media-source"},Rn){var jn=Rn.codecs;if(Rn.codecs.includes(",")){var Vn=Rn.codecs.split(",");jn=Wu("video",Vn),jn=Ly(jn),Vn=Wu("audio",Vn),Vn=Tm(Rn.mimeType,Vn,"audio"),Cn.audio={contentType:Vn,channels:2,bitrate:gn.bandwidth||1,samplerate:1,spatialRendering:!1}}if(jn=Ly(jn),jn=Tm(Rn.mimeType,jn,"video"),Cn.video={contentType:jn,width:Rn.width||64,height:Rn.height||64,bitrate:Rn.bandwidth||gn.bandwidth||1,framerate:Rn.frameRate||1},Rn.hdr)switch(Rn.hdr){case"SDR":Cn.video.transferFunction="srgb";break;case"PQ":Cn.video.transferFunction="pq";break;case"HLG":Cn.video.transferFunction="hlg"}}if(In&&(jn=Dy(In.codecs),jn=Tm(In.mimeType,jn,"audio"),Cn.audio={contentType:jn,channels:In.channelsCount||2,bitrate:In.bandwidth||gn.bandwidth||1,samplerate:In.audioSamplingRate||1,spatialRendering:In.spatialAudio}),Vn=(gn.video?gn.video.drmInfos:[]).concat(gn.audio?gn.audio.drmInfos:[]),!Vn.length)return[Cn];gn=[],jn=new Map,Vn=Dn(Vn);for(var Hn=Vn.next();!Hn.done;Hn=Vn.next()){var Xn=Hn.value;jn.get(Xn.keySystem)||jn.set(Xn.keySystem,[]),jn.get(Xn.keySystem).push(Xn)}Vn=bn?"required":"optional",bn=bn?["persistent-license"]:["temporary"],Xn=Dn(jn.keys());for(var ns=Xn.next();!ns.done;ns=Xn.next()){var us=ns.value;ns=Object.assign({},Cn);var ps=jn.get(us);for(us={keySystem:us,initDataType:"cenc",persistentState:Vn,distinctiveIdentifier:"optional",sessionTypes:bn},ps=Dn(ps),Hn=ps.next();!Hn.done;Hn=ps.next()){if(Hn=Hn.value,Hn.initData&&Hn.initData.length){for(var fs=new Set,vs=Dn(Hn.initData),Is=vs.next();!Is.done;Is=vs.next())fs.add(Is.value.initDataType);us.initDataType=Hn.initData[0].initDataType}Hn.distinctiveIdentifierRequired&&(us.distinctiveIdentifier="required"),Hn.persistentStateRequired&&(us.persistentState="required"),Hn.sessionType&&(us.sessionTypes=[Hn.sessionType]),In&&(Hn.audioRobustness!=""?us.audio?us.audio.robustness=us.audio.robustness||Hn.audioRobustness:us.audio={robustness:Hn.audioRobustness}:us.audio||(us.audio={})),Rn&&(Hn.videoRobustness!=""?us.video?us.video.robustness=us.video.robustness||Hn.videoRobustness:us.video={robustness:Hn.videoRobustness}:us.video||(us.video={}))}ns.keySystemConfiguration=us,gn.push(ns)}return gn}function Dy(gn){return Ep()&&gn.toLowerCase()=="ac-3"?"ec-3":gn}function Ly(gn){if(gn.includes("avc1")){var bn=gn.split(".");if(bn.length==3)return gn=bn.shift()+".",gn+=parseInt(bn.shift(),10).toString(16),gn+=("000"+parseInt(bn.shift(),10).toString(16)).slice(-4)}else if(gn=="vp9")return"vp09.00.41.08";return gn}function U_(gn,bn){bn.variants=bn.variants.filter(function(Cn){var In=Cn.audio;return Cn=Cn.video,!(In&&gn&&gn.audio&&!K$(In,gn.audio)||Cn&&gn&&gn.video&&!K$(Cn,gn.video))})}function hM(gn){gn.textStreams=gn.textStreams.filter(function(bn){return r_(_h(bn.mimeType,bn.codecs))})}function mM(gn){var bn,Cn,In,Rn,jn,Vn,Hn;return hs(function(Xn){switch(Xn.g){case 1:bn=[],Cn=Dn(gn.imageStreams),In=Cn.next();case 2:if(In.done){Xn.A(4);break}if(Rn=In.value,jn=Rn.mimeType,tS.has(jn)){Xn.A(5);break}if(Vn=jT.get(jn),!Vn){tS.set(jn,!1),Xn.A(5);break}return Qn(Xn,gM(Vn),7);case 7:Hn=Xn.h,tS.set(jn,Hn);case 5:tS.get(jn)&&bn.push(Rn),In=Cn.next(),Xn.A(2);break;case 4:gn.imageStreams=bn,ms(Xn)}})}function gM(gn){return new Promise(function(bn){var Cn=new Image;Cn.src=gn,"decode"in Cn?Cn.decode().then(function(){bn(!0)}).catch(function(){bn(!1)}):Cn.onload=Cn.onerror=function(){bn(Cn.height===2)}})}function K$(gn,bn){return!(gn.mimeType!=bn.mimeType||gn.codecs.split(".")[0]!=bn.codecs.split(".")[0])}function j_(gn){var bn=gn.audio,Cn=gn.video,In=bn?bn.mimeType:null,Rn=Cn?Cn.mimeType:null,jn=bn?bn.codecs:null,Vn=Cn?Cn.codecs:null,Hn=[];Vn&&Hn.push(Vn),jn&&Hn.push(jn);var Xn=[];Cn&&Xn.push(Cn.mimeType),bn&&Xn.push(bn.mimeType),Xn=Xn[0]||null;var ns=[];bn&&ns.push(bn.kind),Cn&&ns.push(Cn.kind),ns=ns[0]||null;var us=new Set;if(bn)for(var ps=Dn(bn.roles),fs=ps.next();!fs.done;fs=ps.next())us.add(fs.value);if(Cn)for(ps=Dn(Cn.roles),fs=ps.next();!fs.done;fs=ps.next())us.add(fs.value);return gn={id:gn.id,active:!1,type:"variant",bandwidth:gn.bandwidth,language:gn.language,label:null,kind:ns,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:Xn,audioMimeType:In,videoMimeType:Rn,codecs:Hn.join(", "),audioCodec:jn,videoCodec:Vn,primary:gn.primary,roles:Array.from(us),audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null},Cn&&(gn.videoId=Cn.id,gn.originalVideoId=Cn.originalId,gn.width=Cn.width||null,gn.height=Cn.height||null,gn.frameRate=Cn.frameRate||null,gn.pixelAspectRatio=Cn.pixelAspectRatio||null,gn.videoBandwidth=Cn.bandwidth||null),bn&&(gn.audioId=bn.id,gn.originalAudioId=bn.originalId,gn.channelsCount=bn.channelsCount,gn.audioSamplingRate=bn.audioSamplingRate,gn.audioBandwidth=bn.bandwidth||null,gn.spatialAudio=bn.spatialAudio,gn.label=bn.label,gn.audioRoles=bn.roles),gn}function j0(gn){return{id:gn.id,active:!1,type:Zu,bandwidth:0,language:gn.language,label:gn.label,kind:gn.kind||null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:gn.mimeType,audioMimeType:null,videoMimeType:null,codecs:gn.codecs||null,audioCodec:null,videoCodec:null,primary:gn.primary,roles:gn.roles,audioRoles:null,forced:gn.forced,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:gn.originalId,originalImageId:null}}function JE(gn){var bn=gn.width||null,Cn=gn.height||null,In=null;gn.segmentIndex&&(In=gn.segmentIndex.get(0));var Rn=gn.tilesLayout;return In&&(Rn=In.tilesLayout||Rn),Rn&&bn!=null&&(bn/=Number(Rn.split("x")[0])),Rn&&Cn!=null&&(Cn/=Number(Rn.split("x")[1])),{id:gn.id,active:!1,type:"image",bandwidth:gn.bandwidth||0,language:"",label:null,kind:null,width:bn,height:Cn,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:gn.mimeType,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],audioRoles:null,forced:!1,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:Rn||null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:gn.originalId}}function W$(gn){return gn.__shaka_id||(gn.__shaka_id=B_++),gn.__shaka_id}function q$(gn){var bn=vA(gn);return bn.active=gn.mode!="disabled",bn.type="text",bn.originalTextId=gn.id,gn.kind=="captions"&&(bn.mimeType="application/cea-608"),gn.kind&&(bn.roles=[gn.kind]),gn.kind=="forced"&&(bn.forced=!0),bn}function eS(gn){var bn=vA(gn);return bn.active=gn.enabled,bn.type="variant",bn.originalAudioId=gn.id,gn.kind=="main"&&(bn.primary=!0),gn.kind&&(bn.roles=[gn.kind],bn.audioRoles=[gn.kind],bn.label=gn.label),bn}function vA(gn){return{id:W$(gn),active:!1,type:"",bandwidth:0,language:ml(gn.language),label:gn.label,kind:gn.kind,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:!1,roles:[],forced:!1,audioRoles:null,videoId:null,audioId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null}}function F_(gn){return gn.allowedByApplication&&gn.allowedByKeySystem}function DT(gn){return gn.filter(function(bn){return F_(bn)})}function Y$(gn,bn){var Cn=gn.filter(function(Vn){return Vn.audio&&Vn.audio.channelsCount}),In=new Map;Cn=Dn(Cn);for(var Rn=Cn.next();!Rn.done;Rn=Cn.next()){Rn=Rn.value;var jn=Rn.audio.channelsCount;In.has(jn)||In.set(jn,[]),In.get(jn).push(Rn)}return Cn=Array.from(In.keys()),Cn.length==0?gn:(gn=Cn.filter(function(Vn){return Vn<=bn}),gn.length?In.get(Math.max.apply(Math,Kn(gn))):In.get(Math.min.apply(Math,Kn(Cn))))}function X$(gn,bn,Cn,In){var Rn=gn,jn=gn.filter(function(Xn){return Xn.primary});jn.length&&(Rn=jn);var Vn=Rn.length?Rn[0].language:"";if(Rn=Rn.filter(function(Xn){return Xn.language==Vn}),bn){var Hn=wv(ml(bn),gn.map(function(Xn){return Xn.language}));Hn&&(Rn=gn.filter(function(Xn){return ml(Xn.language)==Hn}))}if(Rn=Rn.filter(function(Xn){return Xn.forced==In}),Cn){if(gn=_A(Rn,Cn),gn.length)return gn}else if(gn=Rn.filter(function(Xn){return Xn.roles.length==0}),gn.length)return gn;return gn=Rn.map(function(Xn){return Xn.roles}).reduce(bv,[]),gn.length?_A(Rn,gn[0]):Rn}function _A(gn,bn){return gn.filter(function(Cn){return Cn.roles.includes(bn)})}function EA(gn){var bn=[];return gn.audio&&bn.push(Q$(gn.audio)),gn.video&&bn.push(Q$(gn.video)),bn.join(", ")}function Q$(gn){return gn.type=="audio"?"type=audio codecs="+gn.codecs+" bandwidth="+gn.bandwidth+" channelsCount="+gn.channelsCount+" audioSamplingRate="+gn.audioSamplingRate:gn.type=="video"?"type=video codecs="+gn.codecs+" bandwidth="+gn.bandwidth+" frameRate="+gn.frameRate+" width="+gn.width+" height="+gn.height:"unexpected stream type"}var B_=0,UT="smooth",Z$="powerEfficient",J$="bandwidth",tS=new Map().set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),jT=new Map().set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function ql(){var gn=this;this.l=null,this.o=!1,this.i=new lp,navigator.connection&&navigator.connection.addEventListener&&(this.u=function(){if(gn.g.useNetworkInformation&&gn.o){gn.i=new lp,gn.g&&gn.i.configure(gn.g.advanced);var bn=gn.chooseVariant();bn&&gn.l(bn)}},navigator.connection.addEventListener("change",this.u)),this.m=[],this.B=1,this.F=!1,this.u=this.h=this.j=this.g=this.s=null,this.D=new Hu(function(){if(gn.g.restrictToElementSize){var bn=gn.chooseVariant();bn&&gn.l(bn)}})}Sn=ql.prototype,Sn.stop=function(){this.l=null,this.o=!1,this.m=[],this.B=1,this.j=this.s=null,this.h&&(this.h.disconnect(),this.h=null),this.D.stop()},Sn.release=function(){navigator.connection&&navigator.connection.removeEventListener&&(navigator.connection.removeEventListener("change",this.u),this.u=null),this.D=null},Sn.init=function(gn){this.l=gn},Sn.chooseVariant=function(){var gn=1/0,bn=1/0;this.g.restrictToScreenSize&&(bn=this.g.ignoreDevicePixelRatio?1:pn.devicePixelRatio,gn=pn.screen.height*bn,bn*=pn.screen.width),this.h&&this.g.restrictToElementSize&&(bn=this.g.ignoreDevicePixelRatio?1:pn.devicePixelRatio,gn=this.j.clientWidth*bn,bn*=this.j.clientHeight),gn=SA(this.g.restrictions,this.m,gn,bn),bn=this.i.getBandwidthEstimate(V_(this)),this.m.length&&!gn.length&&(gn=SA(null,this.m,1/0,1/0),gn=[gn[0]]);for(var Cn=gn[0]||null,In=0;In<gn.length;In++){for(var Rn=gn[In],jn=isNaN(this.B)?1:Math.abs(this.B),Vn=jn*Rn.bandwidth/this.g.bandwidthDowngradeTarget,Hn={bandwidth:1/0},Xn=In+1;Xn<gn.length;Xn++)if(Rn.bandwidth!=gn[Xn].bandwidth){Hn=gn[Xn];break}jn=jn*Hn.bandwidth/this.g.bandwidthUpgradeTarget,bn>=Vn&&bn<=jn&&Cn.bandwidth!=Rn.bandwidth&&(Cn=Rn)}return this.s=Date.now(),Cn},Sn.enable=function(){this.o=!0},Sn.disable=function(){this.o=!1},Sn.segmentDownloaded=function(gn,bn){if(this.i.sample(gn,bn),this.s!=null&&this.o)e:{if(this.F){if(Date.now()-this.s<1e3*this.g.switchInterval)break e}else{if(gn=this.i,!(gn.g>=gn.i))break e;this.F=!0}gn=this.chooseVariant(),this.i.getBandwidthEstimate(V_(this)),gn&&this.l(gn)}},Sn.getBandwidthEstimate=function(){return this.i.getBandwidthEstimate(V_(this))},Sn.setVariants=function(gn){this.m=gn},Sn.playbackRateChanged=function(gn){this.B=gn},Sn.setMediaElement=function(gn){var bn=this;this.j=gn,this.h&&(this.h.disconnect(),this.h=null),this.j&&"ResizeObserver"in pn&&(this.h=new ResizeObserver(function(){bn.D.O(TA)}),this.h.observe(this.j))},Sn.configure=function(gn){this.g=gn,this.i&&this.g&&this.i.configure(this.g.advanced)};function V_(gn){var bn=gn.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&gn.g.useNetworkInformation&&(bn=1e6*navigator.connection.downlink),bn}function SA(gn,bn,Cn,In){return gn&&(bn=bn.filter(function(Rn){return fu(Rn,gn,{width:In,height:Cn})})),bn.sort(function(Rn,jn){return Rn.bandwidth-jn.bandwidth})}Ys("shaka.abr.SimpleAbrManager",ql),ql.prototype.configure=ql.prototype.configure,ql.prototype.setMediaElement=ql.prototype.setMediaElement,ql.prototype.playbackRateChanged=ql.prototype.playbackRateChanged,ql.prototype.setVariants=ql.prototype.setVariants,ql.prototype.getBandwidthEstimate=ql.prototype.getBandwidthEstimate,ql.prototype.segmentDownloaded=ql.prototype.segmentDownloaded,ql.prototype.disable=ql.prototype.disable,ql.prototype.enable=ql.prototype.enable,ql.prototype.chooseVariant=ql.prototype.chooseVariant,ql.prototype.init=ql.prototype.init,ql.prototype.release=ql.prototype.release,ql.prototype.stop=ql.prototype.stop;var TA=1;function rS(gn,bn){this.g=gn,this.h=bn}rS.prototype.toString=function(){return"v"+this.g+"."+this.h};function _b(gn,bn){var Cn=new rS(5,0),In=bA,Rn=In.g,jn=Cn.h-Rn.h;(0<(Cn.g-Rn.g||jn)?In.i:In.h)(In.g,Cn,gn,bn)}function kA(gn,bn,Cn,In){Tu([Cn,"has been deprecated and will be removed in",bn,". We are currently at version",gn,". Additional information:",In].join(" "))}function $A(gn,bn,Cn,In){fl([Cn,"has been deprecated and has been removed in",bn,". We are now at version",gn,". Additional information:",In].join(""))}var bA=null;Ys("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3});function FT(gn,bn){for(this.h=gn,this.g=new Set([gn]),bn=bn||[],gn=Dn(bn),bn=gn.next();!bn.done;bn=gn.next())this.add(bn.value)}FT.prototype.add=function(gn){return ex(this.h,gn)?(this.g.add(gn),!0):!1};function ex(gn,bn){var Cn;if(!(Cn=!!gn.audio!=!!bn.audio||!!gn.video!=!!bn.video||gn.language!=bn.language)&&(Cn=gn.audio&&bn.audio)){Cn=gn.audio;var In=bn.audio;Cn=!((!(!Cn.channelsCount||!In.channelsCount||2<Cn.channelsCount||2<In.channelsCount)||Cn.channelsCount==In.channelsCount)&&xA(Cn,In)&&nS(Cn.roles,In.roles))}return!Cn&&(Cn=gn.video&&bn.video)&&(gn=gn.video,bn=bn.video,Cn=!(xA(gn,bn)&&nS(gn.roles,bn.roles))),!Cn}FT.prototype.values=function(){return this.g.values()};function xA(gn,bn){if(gn.mimeType!=bn.mimeType||(gn=gn.codecs.split(",").map(function(In){return Bm(In)[0]}),bn=bn.codecs.split(",").map(function(In){return Bm(In)[0]}),gn.length!=bn.length))return!1;gn.sort(),bn.sort();for(var Cn=0;Cn<gn.length;Cn++)if(gn[Cn]!=bn[Cn])return!1;return!0}function nS(gn,bn){if(gn=new Set(gn),bn=new Set(bn),gn.delete("main"),bn.delete("main"),gn.size!=bn.size)return!1;gn=Dn(gn);for(var Cn=gn.next();!Cn.done;Cn=gn.next())if(!bn.has(Cn.value))return!1;return!0}function CA(gn){this.g=gn,this.h=new Pl(gn.language,"",gn.audio&&gn.audio.channelsCount?gn.audio.channelsCount:0,"")}CA.prototype.create=function(gn){var bn=this,Cn=gn.filter(function(In){return ex(bn.g,In)});return Cn.length?new FT(Cn[0],Cn):this.h.create(gn)};function Pl(gn,bn,Cn,In){this.i=gn,this.j=bn,this.g=Cn,this.h=In===void 0?"":In}Pl.prototype.create=function(gn){var bn=[];bn=tx(gn,this.i);var Cn=gn.filter(function(In){return In.primary});for(bn=bn.length?bn:Cn.length?Cn:gn,gn=wA(bn,this.j),gn.length&&(bn=gn),this.g&&(gn=Y$(bn,this.g),gn.length&&(bn=gn)),this.h&&(gn=yM(bn,this.h),gn.length&&(bn=gn)),gn=new FT(bn[0]),bn=Dn(bn),Cn=bn.next();!Cn.done;Cn=bn.next())Cn=Cn.value,ex(gn.h,Cn)&&gn.add(Cn);return gn};function tx(gn,bn){bn=ml(bn);var Cn=wv(bn,gn.map(function(In){return U0(In)}));return Cn?gn.filter(function(In){return Cn==U0(In)}):[]}function wA(gn,bn){return gn.filter(function(Cn){return Cn.audio?bn?Cn.audio.roles.includes(bn):Cn.audio.roles.length==0:!1})}function yM(gn,bn){return gn.filter(function(Cn){return Cn.audio?Cn.audio.label.toLowerCase()==bn.toLowerCase():!1})}function rx(){this.g=BT,this.h=new Map().set(BT,2).set(F0,1)}function nx(gn,bn,Cn){gn.h.set(BT,Cn).set(F0,bn)}var F0=0,BT=1;function ix(gn,bn){var Cn=o_();this.l=gn.maxAttempts==null?Cn.maxAttempts:gn.maxAttempts,this.j=gn.baseDelay==null?Cn.baseDelay:gn.baseDelay,this.o=gn.fuzzFactor==null?Cn.fuzzFactor:gn.fuzzFactor,this.m=gn.backoffFactor==null?Cn.backoffFactor:gn.backoffFactor,this.g=0,this.h=this.j,(this.i=bn===void 0?!1:bn)&&(this.g=1)}function iS(gn){var bn,Cn;return hs(function(In){if(In.g==1){if(gn.g>=gn.l)if(gn.i)gn.g=1,gn.h=gn.j;else throw new Bs(2,7,1010);return bn=gn.g,gn.g++,bn==0?In.return():(Cn=gn.h*(1+(2*Math.random()-1)*gn.o),Qn(In,new Promise(function(Rn){new Hu(Rn).O(Cn/1e3)}),2))}gn.h*=gn.m,ms(In)})}function o_(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function Vl(gn,bn){this.promise=gn,this.i=bn,this.g=!1}function s_(gn){return new Vl(Promise.reject(gn),function(){return Promise.resolve()})}function VT(){var gn=Promise.reject(new Bs(2,7,7001));return gn.catch(function(){}),new Vl(gn,function(){return Promise.resolve()})}function Uy(gn){return new Vl(Promise.resolve(gn),function(){return Promise.resolve()})}function nv(gn){return new Vl(gn,function(){return gn.catch(function(){})})}Vl.prototype.abort=function(){return this.g=!0,this.i()};function AA(gn){return new Vl(Promise.all(gn.map(function(bn){return bn.promise})),function(){return Promise.all(gn.map(function(bn){return bn.abort()}))})}Vl.prototype.finally=function(gn){return this.promise.then(function(){return gn(!0)},function(){return gn(!1)}),this},Vl.prototype.Y=function(gn,bn){function Cn(Hn){return function(Xn){if(Rn.g&&Hn)jn.reject(Vn);else{var ns=Hn?gn:bn;ns?In=vM(ns,Xn,jn):(Hn?jn.resolve:jn.reject)(Xn)}}}function In(){return jn.reject(Vn),Rn.abort()}var Rn=this,jn=new bl,Vn=new Bs(2,7,7001);return this.promise.then(Cn(!0),Cn(!1)),new Vl(jn,function(){return In()})};function vM(gn,bn,Cn){try{var In=gn(bn);return In&&In.promise&&In.abort?(Cn.resolve(In.promise),function(){return In.abort()}):(Cn.resolve(In),function(){return Promise.resolve(In).then(function(){},function(){})})}catch(Rn){return Cn.reject(Rn),function(){return Promise.resolve()}}}Ys("shaka.util.AbortableOperation",Vl),Vl.prototype.chain=Vl.prototype.Y,Vl.prototype.finally=Vl.prototype.finally,Vl.all=AA,Vl.prototype.abort=Vl.prototype.abort,Vl.notAbortable=nv,Vl.completed=Uy,Vl.aborted=VT,Vl.failed=s_;function Ju(gn,bn){if(bn)if(bn instanceof Map)for(var Cn=Dn(bn.keys()),In=Cn.next();!In.done;In=Cn.next())In=In.value,Object.defineProperty(this,In,{value:bn.get(In),writable:!0,enumerable:!0});else for(Cn in bn)Object.defineProperty(this,Cn,{value:bn[Cn],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=pn.performance&&pn.performance.now?pn.performance.now():Date.now(),this.type=gn,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function ax(gn){var bn=new Ju(gn.type),Cn;for(Cn in gn)Object.defineProperty(bn,Cn,{value:gn[Cn],writable:!0,enumerable:!0});return bn}Ju.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},Ju.prototype.stopImmediatePropagation=function(){this.g=!0},Ju.prototype.stopPropagation=function(){},Ys("shaka.util.FakeEvent",Ju);var Av={Hg:"abrstatuschanged",Ig:"adaptation",Jg:"buffering",Kg:"downloadfailed",Lg:"downloadheadersreceived",Mg:"drmsessionupdate",Og:"emsg",$g:"prft",Error:"error",Pg:"expirationupdated",Qg:"gapjumped",Sg:"loaded",Tg:"loading",Vg:"manifestparsed",Wg:"mediaqualitychanged",Metadata:"metadata",Yg:"onstatechange",Zg:"onstateidle",ah:"ratechange",dh:"segmentappended",eh:"sessiondata",fh:"stalldetected",gh:"streaming",hh:"textchanged",ih:"texttrackvisibility",jh:"timelineregionadded",kh:"timelineregionenter",lh:"timelineregionexit",mh:"trackschanged",oh:"unloading",ph:"variantchanged"};function hl(){this.da=new sy,this.Wc=this}hl.prototype.addEventListener=function(gn,bn){this.da&&this.da.push(gn,bn)},hl.prototype.removeEventListener=function(gn,bn){this.da&&this.da.remove(gn,bn)},hl.prototype.dispatchEvent=function(gn){if(!this.da)return!0;var bn=this.da.get(gn.type)||[],Cn=this.da.get("All");for(Cn&&(bn=bn.concat(Cn)),bn=Dn(bn),Cn=bn.next();!Cn.done;Cn=bn.next()){Cn=Cn.value,gn.target=this.Wc,gn.currentTarget=this.Wc;try{Cn.handleEvent?Cn.handleEvent(gn):Cn.call(this,gn)}catch{}if(gn.g)break}return gn.defaultPrevented},hl.prototype.release=function(){this.da=null};function G_(gn){function bn(In){switch(typeof In){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return In;default:if(!In||In.buffer&&In.buffer.constructor==ArrayBuffer)return In;if(Cn.has(In))return null;var Rn=In.constructor==Array;if(In.constructor!=Object&&!Rn)return null;Cn.add(In);var jn=Rn?[]:{},Vn;for(Vn in In)jn[Vn]=bn(In[Vn]);return Rn&&(jn.length=In.length),jn}}var Cn=new Set;return bn(gn)}function ox(gn){var bn={},Cn;for(Cn in gn)bn[Cn]=gn[Cn];return bn}function Iv(){this.g=[]}function Al(gn,bn){gn.g.push(bn.finally(function(){pl(gn.g,bn)}))}Iv.prototype.destroy=function(){for(var gn=[],bn=Dn(this.g),Cn=bn.next();!Cn.done;Cn=bn.next())Cn=Cn.value,Cn.promise.catch(function(){}),gn.push(Cn.abort());return this.g=[],Promise.all(gn)};function Sl(gn,bn,Cn){hl.call(this),this.i=!1,this.m=new Iv,this.g=new Set,this.h=new Set,this.l=gn||null,this.j=bn||null,this.s=Cn||null,this.o=!1}as(Sl,hl),Sn=Sl.prototype,Sn.je=function(gn){this.o=gn};function jy(gn,bn,Cn,In){Cn=Cn||H_;var Rn=Cl[gn];(!Rn||Cn>=Rn.priority)&&(Cl[gn]={priority:Cn,ig:bn,jg:In===void 0?!1:In})}Sn.kg=function(gn){this.g.add(gn)},Sn.Ag=function(gn){this.g.delete(gn)},Sn.qf=function(){this.g.clear()},Sn.lg=function(gn){this.h.add(gn)},Sn.Bg=function(gn){this.h.delete(gn)},Sn.rf=function(){this.h.clear()};function tm(gn,bn,Cn){return{uris:gn,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:bn,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:Cn===void 0?null:Cn}}Sn.destroy=function(){return this.i=!0,this.g.clear(),this.h.clear(),hl.prototype.release.call(this),this.m.destroy()},Sn.request=function(gn,bn){var Cn=this,In=new z_;if(this.i){var Rn=Promise.reject(new Bs(2,7,7001));return Rn.catch(function(){}),new aS(Rn,function(){return Promise.resolve()},In)}bn.method=bn.method||"GET",bn.headers=bn.headers||{},bn.retryParameters=bn.retryParameters?G_(bn.retryParameters):o_(),bn.uris=G_(bn.uris),Rn=iv(this,gn,bn);var jn=Rn.Y(function(){return sx(Cn,gn,bn,new ix(bn.retryParameters,!1),0,null,In)}),Vn=jn.Y(function(ps){return _M(Cn,gn,ps)}),Hn=Date.now(),Xn=0;Rn.promise.then(function(){Xn=Date.now()-Hn},function(){});var ns=0;jn.promise.then(function(){ns=Date.now()},function(){});var us=Vn.Y(function(ps){var fs=Date.now()-ns,vs=ps.response;return vs.timeMs+=Xn,vs.timeMs+=fs,ps.Xf||!Cn.l||vs.fromCache||bn.method=="HEAD"||gn!=Fy||Cn.l(vs.timeMs,vs.data.byteLength),vs},function(ps){throw ps&&(ps.severity=2),ps});return Rn=new aS(us.promise,function(){return us.abort()},In),Al(this.m,Rn),Rn};function iv(gn,bn,Cn){var In=Uy(void 0),Rn={};gn=Dn(gn.g);for(var jn=gn.next();!jn.done;Rn={sd:Rn.sd},jn=gn.next())Rn.sd=jn.value,In=In.Y(function(Vn){return function(){return Cn.body&&(Cn.body=Vu(Cn.body)),Vn.sd(bn,Cn)}}(Rn));return In.Y(void 0,function(Vn){throw Vn instanceof Bs&&Vn.code==7001?Vn:new Bs(2,1,1006,Vn)})}function sx(gn,bn,Cn,In,Rn,jn,Vn){gn.o&&(Cn.uris[Rn]=Cn.uris[Rn].replace("http://","https://"));var Hn=new Rp(Cn.uris[Rn]),Xn=Hn.Ea,ns=!1;Xn||(Xn=location.protocol,Xn=Xn.slice(0,-1),ol(Hn,Xn),Cn.uris[Rn]=Hn.toString()),Xn=Xn.toLowerCase();var us=(Xn=Cl[Xn])?Xn.ig:null;if(!us)return s_(new Bs(2,1,1e3,Hn));var ps=Xn.jg,fs=null,vs=null,Is=!1,Ls=!1,Cs;return nv(iS(In)).Y(function(){if(gn.i)return VT();Cs=Date.now();var Ms=us(Cn.uris[Rn],Cn,bn,function(Ws,Gs,eu){fs&&fs.stop(),vs&&vs.O(Fs/1e3),gn.l&&bn==Fy&&(gn.l(Ws,Gs),ns=!0,Vn.g=eu)},function(Ws){gn.j&&gn.j(Ws,Cn,bn),Ls=!0});if(!ps)return Ms;var Zs=Cn.retryParameters.connectionTimeout;Zs&&(fs=new Hu(function(){Is=!0,Ms.abort()}),fs.O(Zs/1e3));var Fs=Cn.retryParameters.stallTimeout;return Fs&&(vs=new Hu(function(){Is=!0,Ms.abort()})),Ms}).Y(function(Ms){fs&&fs.stop(),vs&&vs.stop(),Ms.timeMs==null&&(Ms.timeMs=Date.now()-Cs);var Zs={response:Ms,Xf:ns};return!Ls&&gn.j&&gn.j(Ms.headers,Cn,bn),Zs},function(Ms){if(fs&&fs.stop(),vs&&vs.stop(),gn.s){var Zs=null,Fs=0;Ms instanceof Bs&&(Zs=Ms,Ms.code==1001&&(Fs=Ms.data[1])),gn.s(Cn,Zs,Fs,Is)}if(gn.i)return VT();if(Is&&(Ms=new Bs(1,1,1003,Cn.uris[Rn],bn)),Ms instanceof Bs){if(Ms.code==7001)throw Ms;if(Ms.code==1010)throw jn;if(Ms.severity==1)return Zs=new Map().set("error",Ms),Zs=new Ju("retry",Zs),gn.dispatchEvent(Zs),Rn=(Rn+1)%Cn.uris.length,sx(gn,bn,Cn,In,Rn,Ms,Vn)}throw Ms})}function _M(gn,bn,Cn){var In=Uy(void 0),Rn={};gn=Dn(gn.h);for(var jn=gn.next();!jn.done;Rn={td:Rn.td},jn=gn.next())Rn.td=jn.value,In=In.Y(function(Vn){return function(){var Hn=Cn.response;return Hn.data&&(Hn.data=Vu(Hn.data)),Vn.td(bn,Hn)}}(Rn));return In.Y(function(){return Cn},function(Vn){var Hn=2;if(Vn instanceof Bs){if(Vn.code==7001)throw Vn;Hn=Vn.severity}throw new Bs(Hn,1,1007,Vn)})}Ys("shaka.net.NetworkingEngine",Sl),Sl.prototype.request=Sl.prototype.request,Sl.prototype.destroy=Sl.prototype.destroy,Sl.makeRequest=tm,Sl.defaultRetryParameters=function(){return o_()},Sl.prototype.clearAllResponseFilters=Sl.prototype.rf,Sl.prototype.unregisterResponseFilter=Sl.prototype.Bg,Sl.prototype.registerResponseFilter=Sl.prototype.lg,Sl.prototype.clearAllRequestFilters=Sl.prototype.qf,Sl.prototype.unregisterRequestFilter=Sl.prototype.Ag,Sl.prototype.registerRequestFilter=Sl.prototype.kg,Sl.unregisterScheme=function(gn){delete Cl[gn]},Sl.registerScheme=jy,Sl.prototype.setForceHTTPS=Sl.prototype.je;function z_(){this.g=0}Sl.NumBytesRemainingClass=z_;function aS(gn,bn,Cn){Vl.call(this,gn,bn),this.h=Cn}as(aS,Vl),Sl.PendingRequest=aS;var Fy=1;Sl.RequestType={MANIFEST:0,SEGMENT:Fy,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6};var H_=3;Sl.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:H_};var Cl={};function gm(gn){this.g=!1,this.h=new bl,this.i=gn}gm.prototype.destroy=function(){var gn=this;return this.g?this.h:(this.g=!0,this.i().then(function(){gn.h.resolve()},function(){gn.h.resolve()}))};function ll(gn,bn){if(gn.g)throw bn instanceof Bs&&bn.code==7003?bn:new Bs(2,7,7003,bn)}function Ul(){this.g=new sy}Sn=Ul.prototype,Sn.release=function(){this.nb(),this.g=null},Sn.C=function(gn,bn,Cn,In){this.g&&(gn=new ux(gn,bn,Cn,In),this.g.push(bn,gn))},Sn.ia=function(gn,bn,Cn,In){function Rn(Vn){jn.zc(gn,bn,Rn),Cn(Vn)}var jn=this;this.C(gn,bn,Rn,In)},Sn.zc=function(gn,bn,Cn){if(this.g){var In=this.g.get(bn)||[];In=Dn(In);for(var Rn=In.next();!Rn.done;Rn=In.next())Rn=Rn.value,Rn.target!=gn||Cn!=Rn.listener&&Cn||(Rn.zc(),this.g.remove(bn,Rn))}},Sn.nb=function(){if(this.g){var gn=this.g,bn=[],Cn;for(Cn in gn.g)bn.push.apply(bn,Kn(gn.g[Cn]));for(gn=Dn(bn),bn=gn.next();!bn.done;bn=gn.next())bn.value.zc();this.g.g={}}},Ys("shaka.util.EventManager",Ul),Ul.prototype.removeAll=Ul.prototype.nb,Ul.prototype.unlisten=Ul.prototype.zc,Ul.prototype.listenOnce=Ul.prototype.ia,Ul.prototype.listen=Ul.prototype.C,Ul.prototype.release=Ul.prototype.release;function ux(gn,bn,Cn,In){this.target=gn,this.type=bn,this.listener=Cn,this.g=EM(gn,In),this.target.addEventListener(bn,Cn,this.g)}ux.prototype.zc=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};function EM(gn,bn){if(bn==null)return!1;if(typeof bn=="boolean")return bn;var Cn=new Set(["passive","capture"]);return Object.keys(bn).filter(function(In){return!Cn.has(In)}),IA(gn)?bn:bn.capture||!1}function IA(gn){var bn=oS;if(bn==null){bn=!1;try{var Cn={},In={get:function(){return bn=!0,!1}};Object.defineProperty(Cn,"passive",In),Object.defineProperty(Cn,"capture",In),In=function(){},gn.addEventListener("test",In,Cn),gn.removeEventListener("test",In,Cn)}catch{bn=!1}oS=bn}return bn||!1}var oS=void 0;function Pv(gn,bn){var Cn=[];gn=Dn(gn);for(var In=gn.next();!In.done;In=gn.next())Cn.push(bn(In.value));return Cn}function PA(gn,bn){gn=Dn(gn);for(var Cn=gn.next();!Cn.done;Cn=gn.next())if(!bn(Cn.value))return!1;return!0}function u_(gn){for(var bn=new Map,Cn=Dn(Object.keys(gn)),In=Cn.next();!In.done;In=Cn.next())In=In.value,bn.set(In,gn[In]);return bn}function Ov(gn){var bn={};return gn.forEach(function(Cn,In){bn[In]=Cn}),bn}function Ol(gn,bn){if(gn||bn){if(gn&&!bn||bn&&!gn)return!1}else return!0;if(gn.size!=bn.size)return!1;gn=Dn(gn);for(var Cn=gn.next();!Cn.done;Cn=gn.next()){var In=Dn(Cn.value);if(Cn=In.next().value,In=In.next().value,!bn.has(Cn)||(Cn=bn.get(Cn),Cn!=In||Cn==null))return!1}return!0}function xu(gn,bn){this.S=rp(gn),this.h=bn==OA,this.g=0}Sn=xu.prototype,Sn.ha=function(){return this.g<this.S.byteLength},Sn.Z=function(){return this.g},Sn.Ff=function(){return this.S.byteLength},Sn.Qa=function(){try{var gn=this.S.getUint8(this.g);return this.g+=1,gn}catch{throw av()}},Sn.$d=function(){try{var gn=this.S.getUint16(this.g,this.h);return this.g+=2,gn}catch{throw av()}},Sn.K=function(){try{var gn=this.S.getUint32(this.g,this.h);return this.g+=4,gn}catch{throw av()}},Sn.Oe=function(){try{var gn=this.S.getInt32(this.g,this.h);return this.g+=4,gn}catch{throw av()}},Sn.$a=function(){try{if(this.h)var gn=this.S.getUint32(this.g,!0),bn=this.S.getUint32(this.g+4,!0);else bn=this.S.getUint32(this.g,!1),gn=this.S.getUint32(this.g+4,!1)}catch{throw av()}if(2097151<bn)throw new Bs(2,3,3001);return this.g+=8,bn*Math.pow(2,32)+gn},Sn.Za=function(gn){if(this.g+gn>this.S.byteLength)throw av();var bn=Pu(this.S,this.g,gn);return this.g+=gn,bn},Sn.skip=function(gn){if(this.g+gn>this.S.byteLength)throw av();this.g+=gn},Sn.rg=function(gn){if(this.g<gn)throw av();this.g-=gn},Sn.seek=function(gn){if(0>gn||gn>this.S.byteLength)throw av();this.g=gn},Sn.sc=function(){for(var gn=this.g;this.ha()&&this.S.getUint8(this.g)!=0;)this.g+=1;return gn=Pu(this.S,gn,this.g-gn),this.g+=1,Ou(gn)};function av(){return new Bs(2,3,3e3)}Ys("shaka.util.DataViewReader",xu),xu.prototype.readTerminatedString=xu.prototype.sc,xu.prototype.seek=xu.prototype.seek,xu.prototype.rewind=xu.prototype.rg,xu.prototype.skip=xu.prototype.skip,xu.prototype.readBytes=xu.prototype.Za,xu.prototype.readUint64=xu.prototype.$a,xu.prototype.readInt32=xu.prototype.Oe,xu.prototype.readUint32=xu.prototype.K,xu.prototype.readUint16=xu.prototype.$d,xu.prototype.readUint8=xu.prototype.Qa,xu.prototype.getLength=xu.prototype.Ff,xu.prototype.getPosition=xu.prototype.Z,xu.prototype.hasMoreData=xu.prototype.ha;var OA=1;xu.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:OA};function Rl(){this.i=[],this.h=[],this.g=!1}Sn=Rl.prototype,Sn.box=function(gn,bn){return gn=kl(gn),this.i[gn]=Nl,this.h[gn]=bn,this},Sn.R=function(gn,bn){return gn=kl(gn),this.i[gn]=zl,this.h[gn]=bn,this},Sn.stop=function(){this.g=!0},Sn.parse=function(gn,bn,Cn){for(gn=new xu(gn,0),this.g=!1;gn.ha()&&!this.g;)this.qc(0,gn,bn,Cn)},Sn.qc=function(gn,bn,Cn,In){var Rn=bn.Z();if(In&&Rn+8>bn.S.byteLength)this.g=!0;else{var jn=bn.K(),Vn=bn.K(),Hn=uy(Vn),Xn=!1;switch(jn){case 0:jn=bn.S.byteLength-Rn;break;case 1:if(In&&bn.Z()+8>bn.S.byteLength){this.g=!0;return}jn=bn.$a(),Xn=!0}var ns=this.h[Vn];if(ns){var us=null,ps=null;if(this.i[Vn]==zl){if(In&&bn.Z()+4>bn.S.byteLength){this.g=!0;return}ps=bn.K(),us=ps>>>24,ps&=16777215}Vn=Rn+jn,Cn&&Vn>bn.S.byteLength&&(Vn=bn.S.byteLength),In&&Vn>bn.S.byteLength?this.g=!0:(In=Vn-bn.Z(),bn=0<In?bn.Za(In):new Uint8Array(0),bn=new xu(bn,0),ns({name:Hn,parser:this,partialOkay:Cn||!1,version:us,flags:ps,reader:bn,size:jn,start:Rn+gn,has64BitSize:Xn}))}else bn.skip(Math.min(Rn+jn-bn.Z(),bn.S.byteLength-bn.Z()))}};function Gl(gn){for(var bn=V0(gn);gn.reader.ha()&&!gn.parser.g;)gn.parser.qc(gn.start+bn,gn.reader,gn.partialOkay)}function Mv(gn){for(var bn=V0(gn),Cn=gn.reader.K(),In=0;In<Cn&&(gn.parser.qc(gn.start+bn,gn.reader,gn.partialOkay),!gn.parser.g);In++);}function zT(gn){var bn=V0(gn);for(gn.reader.skip(78);gn.reader.ha()&&!gn.parser.g;)gn.parser.qc(gn.start+bn,gn.reader,gn.partialOkay)}function B0(gn){return function(bn){gn(bn.reader.Za(bn.reader.S.byteLength-bn.reader.Z()))}}function kl(gn){var bn=0;gn=Dn(gn);for(var Cn=gn.next();!Cn.done;Cn=gn.next())bn=bn<<8|Cn.value.charCodeAt(0);return bn}function uy(gn){return String.fromCharCode(gn>>24&255,gn>>16&255,gn>>8&255,gn&255)}function V0(gn){return 8+(gn.has64BitSize?8:0)+(gn.flags!=null?4:0)}Ys("shaka.util.Mp4Parser",Rl),Rl.headerSize=V0,Rl.typeToString=uy,Rl.allData=B0,Rl.visualSampleEntry=zT,Rl.sampleDescription=Mv,Rl.children=Gl,Rl.prototype.parseNext=Rl.prototype.qc,Rl.prototype.parse=Rl.prototype.parse,Rl.prototype.stop=Rl.prototype.stop,Rl.prototype.fullBox=Rl.prototype.R,Rl.prototype.box=Rl.prototype.box;var Nl=0,zl=1;function G0(gn){var bn=this;this.g=[],this.h=[],this.data=[],new Rl().box("moov",Gl).box("moof",Gl).R("pssh",function(Cn){if(!(1<Cn.version)){var In=Pu(Cn.reader.S,-12,Cn.size);if(bn.data.push(In),bn.g.push(Sp(Cn.reader.Za(16))),0<Cn.version){In=Cn.reader.K();for(var Rn=0;Rn<In;Rn++){var jn=Sp(Cn.reader.Za(16));bn.h.push(jn)}}}}).parse(gn)}function HT(gn,bn,Cn,In){var Rn=gn.length,jn=bn.length+16+Rn;0<In&&(jn+=4+16*Cn.size);var Vn=new Uint8Array(jn),Hn=rp(Vn),Xn=0;if(Hn.setUint32(Xn,jn),Xn+=4,Hn.setUint32(Xn,1886614376),Xn+=4,1>In?Hn.setUint32(Xn,0):Hn.setUint32(Xn,16777216),Xn+=4,Vn.set(bn,Xn),Xn+=bn.length,0<In)for(Hn.setUint32(Xn,Cn.size),Xn+=4,bn=Dn(Cn),Cn=bn.next();!Cn.done;Cn=bn.next())Cn=ku(Cn.value),Vn.set(Cn,Xn),Xn+=Cn.length;return Hn.setUint32(Xn,Rn),Vn.set(gn,Xn+4),Vn}function Rv(gn,bn){return gn=Hl(gn,bn),gn.length!=1?null:gn[0]}function sS(gn,bn,Cn){return gn=MA(gn,bn,Cn),gn.length!=1?null:gn[0]}function Hl(gn,bn){var Cn=[];gn=Dn(gn.childNodes);for(var In=gn.next();!In.done;In=gn.next())In=In.value,In instanceof Element&&In.tagName==bn&&Cn.push(In);return Cn}function uS(gn){return Array.from(gn.childNodes).filter(function(bn){return bn instanceof Element})}function MA(gn,bn,Cn){var In=[];gn=Dn(gn.childNodes);for(var Rn=gn.next();!Rn.done;Rn=gn.next())Rn=Rn.value,Rn instanceof Element&&Rn.localName==Cn&&Rn.namespaceURI==bn&&In.push(Rn);return In}function l_(gn,bn,Cn){return gn.hasAttributeNS(bn,Cn)?gn.getAttributeNS(bn,Cn):null}function ov(gn,bn,Cn){bn=Dn(bn);for(var In=bn.next();!In.done;In=bn.next())if(In=In.value,gn.hasAttributeNS(In,Cn))return gn.getAttributeNS(In,Cn);return null}function z0(gn){return Array.from(gn.childNodes).every(lS)?gn.textContent.trim():null}function lS(gn){return gn.nodeType==Node.TEXT_NODE||gn.nodeType==Node.CDATA_SECTION_NODE}function Ml(gn,bn,Cn,In){In=In===void 0?null:In;var Rn=null;return gn=gn.getAttribute(bn),gn!=null&&(Rn=Cn(gn)),Rn??In}function Xl(gn){return gn?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(gn)&&(gn+="Z"),gn=Date.parse(gn),isNaN(gn)?null:gn/1e3):null}function Nv(gn){return!gn||(gn=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$").exec(gn),!gn)?null:(gn=31536e3*Number(gn[1]||null)+2592e3*Number(gn[2]||null)+86400*Number(gn[3]||null)+3600*Number(gn[4]||null)+60*Number(gn[5]||null)+Number(gn[6]||null),isFinite(gn)?gn:null)}function cS(gn){var bn=/([0-9]+)-([0-9]+)/.exec(gn);return!bn||(gn=Number(bn[1]),!isFinite(gn))?null:(bn=Number(bn[2]),isFinite(bn)?{start:gn,end:bn}:null)}function K_(gn){return gn=Number(gn),gn%1===0?gn:null}function ly(gn){return gn=Number(gn),gn%1===0&&0<gn?gn:null}function Gm(gn){return gn=Number(gn),gn%1===0&&0<=gn?gn:null}function H0(gn){return gn=Number(gn),isNaN(gn)?null:gn}function Kl(gn){var bn,Cn=(bn=gn.match(/^(\d+)\/(\d+)$/))?Number(bn[1])/Number(bn[2]):Number(gn);return isNaN(Cn)?null:Cn}function K0(gn,bn){var Cn=new DOMParser,In=KT.value()(gn);gn=null;try{gn=Cn.parseFromString(In,"text/xml")}catch{return null}if(Cn=gn.documentElement,!Cn||Cn.getElementsByTagName("parsererror").length||Cn.tagName!=bn)return null;for(bn=document.createNodeIterator(gn,NodeFilter.SHOW_ALL);gn=bn.nextNode();)if(gn instanceof HTMLElement||gn instanceof SVGElement)return null;return Cn}function sv(gn,bn){try{var Cn=Ou(gn);return K0(Cn,bn)}catch{return null}}var KT=new Dp(function(){if(typeof trustedTypes<"u"){var gn=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(bn){return bn}});return function(bn){return gn.createHTML(bn)}}return function(bn){return bn}});function WT(gn,bn){var Cn=this;bn=bn===void 0?1:bn,this.D=gn,this.G=new Set,this.l=this.u=null,this.da=this.W=!1,this.H=0,this.g=null,this.s=new Ul,this.i=new Map,this.B=[],this.o=new bl,this.h=null,this.m=function(In){Cn.o.reject(In),gn.onError(In)},this.ea=new Map,this.ba=new Map,this.P=new Hu(function(){return xM(Cn)}),this.L=!1,this.J=[],this.M=!1,this.ca=new Hu(function(){AM(Cn)}).Ca(bn),this.o.catch(function(){}),this.j=new gm(function(){return qT(Cn)}),this.V=!1,this.F=null}Sn=WT.prototype,Sn.destroy=function(){return this.j.destroy()};function qT(gn){return hs(function(bn){switch(bn.g){case 1:return gn.s.release(),gn.s=null,gn.o.reject(),gn.ca.stop(),gn.ca=null,gn.P.stop(),gn.P=null,Qn(bn,mx(gn),2);case 2:if(!gn.l){bn.A(3);break}return Ts(bn,4),Qn(bn,gn.l.setMediaKeys(null),6);case 6:ys(bn,5);break;case 4:_s(bn);case 5:gn.l=null;case 3:gn.g=null,gn.G.clear(),gn.u=null,gn.B=[],gn.h=null,gn.m=function(){},gn.D=null,gn.V=!1,gn.F=null,ms(bn)}})}Sn.configure=function(gn){this.h=gn};function uv(gn,bn,Cn){return gn.da=!0,gn.B=[],gn.L=Cn,q0(gn,bn)}function W0(gn,bn,Cn){return gn.B=Cn,gn.L=0<Cn.length,q0(gn,bn)}function SM(gn,bn,Cn,In,Rn,jn){var Vn=new Map;return Rn={audioCapabilities:Rn,videoCapabilities:jn,distinctiveIdentifier:"optional",persistentState:"required",sessionTypes:["persistent-license"],label:bn},Rn.drmInfos=[{keySystem:bn,licenseServerUri:Cn,distinctiveIdentifierRequired:!1,persistentStateRequired:!0,audioRobustness:"",videoRobustness:"",serverCertificate:In,serverCertificateUri:"",initData:null,keyIds:null}],Vn.set(bn,Rn),dx(gn,Vn,[])}function q0(gn,bn){var Cn,In,Rn,jn,Vn,Hn,Xn,ns,us,ps,fs,vs,Is,Ls;return hs(function(Cs){if(Cs.g==1){if(Cn=bM(gn))for(In=Dn(bn),Rn=In.next();!Rn.done;Rn=In.next())jn=Rn.value,jn.video&&(jn.video.drmInfos=[Cn]),jn.audio&&(jn.audio.drmInfos=[Cn]);for(Vn=bn.some(function(Ms){return!!(Ms.video&&Ms.video.drmInfos.length||Ms.audio&&Ms.audio.drmInfos.length)}),Vn||(Hn=u_(gn.h.servers),IM(bn,Hn)),Xn=Dn(bn),Rn=Xn.next();!Rn.done;Rn=Xn.next())for(ns=Rn.value,us=QT(ns),ps=Dn(us),fs=ps.next();!fs.done;fs=ps.next())vs=fs.value,PM(vs,u_(gn.h.servers),u_(gn.h.advanced||{}),gn.h.keySystemsMapping);return Qn(Cs,Ll(bn,gn.L,gn.V),2)}return Is=Vn||Object.keys(gn.h.servers).length,Is?(Ls=dx(gn,void 0,bn),Cs.return(Vn?Ls:Ls.catch(function(){}))):(gn.W=!0,Cs.return(Promise.resolve()))})}function lx(gn){var bn;return hs(function(Cn){switch(Cn.g){case 1:if(gn.l.mediaKeys)return Cn.return();if(!gn.F){Cn.A(2);break}return Qn(Cn,gn.F,3);case 3:return ll(gn.j),Cn.return();case 2:return Ts(Cn,4),gn.F=gn.l.setMediaKeys(gn.u),Qn(Cn,gn.F,6);case 6:ys(Cn,5);break;case 4:bn=_s(Cn),gn.m(new Bs(2,6,6003,bn.message));case 5:ll(gn.j),ms(Cn)}})}function TM(gn,bn){return hs(function(Cn){if(Cn.g==1)return Qn(Cn,lx(gn),2);X0(gn,bn.initDataType,Pu(bn.initData)),ms(Cn)})}Sn.Yb=function(gn){var bn=this,Cn;return hs(function(In){if(In.g==1)return bn.u?(bn.l=gn,bn.s.ia(bn.l,"play",function(){for(var Rn=Dn(bn.J),jn=Rn.next();!jn.done;jn=Rn.next())YT(bn,jn.value);bn.M=!0,bn.J=[]}),"webkitCurrentPlaybackTargetIsWireless"in bn.l&&bn.s.C(bn.l,"webkitcurrentplaybacktargetiswirelesschanged",function(){return mx(bn)}),(Cn=bn.g?bn.g.initData.find(function(Rn){return 0<Rn.initData.length}):null)||bn.g.keySystem!=="com.apple.fps"||bn.B.length?Qn(In,lx(bn),2):In.A(2)):(bn.s.ia(gn,"encrypted",function(){bn.m(new Bs(2,6,6010))}),In.return());RA(bn),Cn||bn.B.length||bn.h.parseInbandPsshEnabled||bn.s.C(bn.l,"encrypted",function(Rn){return TM(bn,Rn)}),ms(In)})};function Y0(gn){var bn,Cn,In,Rn,jn;return hs(function(Vn){switch(Vn.g){case 1:if(!gn.u||!gn.g)return Vn.return();if(!gn.g.serverCertificateUri||gn.g.serverCertificate&&gn.g.serverCertificate.length){Vn.A(2);break}return bn=tm([gn.g.serverCertificateUri],gn.h.retryParameters),Ts(Vn,3),Cn=gn.D.kb.request(5,bn),Qn(Vn,Cn.promise,5);case 5:In=Vn.h,gn.g.serverCertificate=Pu(In.data),ys(Vn,4);break;case 3:throw Rn=_s(Vn),new Bs(2,6,6017,Rn);case 4:if(gn.j.g)return Vn.return();case 2:return!gn.g.serverCertificate||!gn.g.serverCertificate.length?Vn.return():(Ts(Vn,6),Qn(Vn,gn.u.setServerCertificate(gn.g.serverCertificate),8));case 8:ys(Vn,0);break;case 6:throw jn=_s(Vn),new Bs(2,6,6004,jn.message)}})}function kM(gn,bn){var Cn,In,Rn;return hs(function(jn){if(jn.g==1)return Qn(jn,px(gn,bn),2);if(jn.g!=3)return Cn=jn.h,Cn?(In=[],(Rn=gn.i.get(Cn))&&(Rn.Ja=new bl,In.push(Rn.Ja)),In.push(Cn.remove()),Qn(jn,Promise.all(In),3)):jn.return();gn.i.delete(Cn),ms(jn)})}function RA(gn){for(var bn=(gn.g?gn.g.initData:[])||[],Cn=Dn(bn),In=Cn.next();!In.done;In=Cn.next())In=In.value,X0(gn,In.initDataType,In.initData);for(Cn=Dn(gn.B),In=Cn.next();!In.done;In=Cn.next())px(gn,In.value);return bn.length||gn.B.length||gn.o.resolve(),gn.o}function X0(gn,bn,Cn){if(Cn.length){var In=gn.i.values();In=Dn(In);for(var Rn=In.next();!Rn.done;Rn=In.next())if(Lm(Cn,Rn.value.initData)&&!gl("Tizen 2"))return;0<gn.i.size&&fS(gn)&&(gn.o.resolve(),gn.o=new bl,gn.o.catch(function(){})),dS(gn,bn,Cn,gn.g.sessionType)}}function NA(gn){return gn?!!gn.match(/^com\.(microsoft|chromecast)\.playready/):!1}function cx(gn){return gn=gn.i.keys(),gn=Pv(gn,function(bn){return bn.sessionId}),Array.from(gn)}Sn.ic=function(){var gn=1/0,bn=this.i.keys();bn=Dn(bn);for(var Cn=bn.next();!Cn.done;Cn=bn.next())Cn=Cn.value,isNaN(Cn.expiration)||(gn=Math.min(gn,Cn.expiration));return gn},Sn.Qc=function(){return Ov(this.ba)};function dx(gn,bn,Cn){var In,Rn,jn,Vn,Hn,Xn,ns,us,ps,fs,vs,Is,Ls;return hs(function(Cs){switch(Cs.g){case 1:if(In=new Map,Cn.length){Rn=$M(gn,Cn,In),Cs.A(2);break}return Qn(Cs,fx(gn,bn),3);case 3:Rn=Cs.h;case 2:if(jn=Rn,!jn)throw new Bs(2,6,6001);for(ll(gn.j),Ts(Cs,4),gn.G.clear(),Vn=jn.getConfiguration(),Hn=Vn.audioCapabilities||[],Xn=Vn.videoCapabilities||[],ns=Dn(Hn),us=ns.next();!us.done;us=ns.next())ps=us.value,gn.G.add(ps.contentType.toLowerCase());for(fs=Dn(Xn),us=fs.next();!us.done;us=fs.next())vs=us.value,gn.G.add(vs.contentType.toLowerCase());if(Cn.length){var Ms=jn.keySystem,Zs=In.get(jn.keySystem),Fs=[],Ws=[],Gs=[],eu=[],au=new Set;LA(Zs,Fs,Gs,Ws,eu,au);var du=gn.L?"persistent-license":"temporary";for(Ms={keySystem:Ms,licenseServerUri:Fs[0],distinctiveIdentifierRequired:Zs[0].distinctiveIdentifierRequired,persistentStateRequired:Zs[0].persistentStateRequired,sessionType:Zs[0].sessionType||du,audioRobustness:Zs[0].audioRobustness||"",videoRobustness:Zs[0].videoRobustness||"",serverCertificate:Gs[0],serverCertificateUri:Ws[0],initData:eu,keyIds:au},Zs=Dn(Zs),Fs=Zs.next();!Fs.done;Fs=Zs.next())Fs=Fs.value,Fs.distinctiveIdentifierRequired&&(Ms.distinctiveIdentifierRequired=Fs.distinctiveIdentifierRequired),Fs.persistentStateRequired&&(Ms.persistentStateRequired=Fs.persistentStateRequired);Zs=Ms}else Zs=jn.keySystem,Ms=bn.get(jn.keySystem),Fs=[],Ws=[],Gs=[],eu=[],au=new Set,LA(Ms.drmInfos,Fs,Gs,Ws,eu,au),Zs={keySystem:Zs,licenseServerUri:Fs[0],distinctiveIdentifierRequired:Ms.distinctiveIdentifier=="required",persistentStateRequired:Ms.persistentState=="required",sessionType:Ms.sessionTypes[0]||"temporary",audioRobustness:(Ms.audioCapabilities?Ms.audioCapabilities[0].robustness:"")||"",videoRobustness:(Ms.videoCapabilities?Ms.videoCapabilities[0].robustness:"")||"",serverCertificate:Gs[0],serverCertificateUri:Ws[0],initData:eu,keyIds:au};if(gn.g=Zs,!gn.g.licenseServerUri)throw new Bs(2,6,6012,gn.g.keySystem);return Qn(Cs,jn.createMediaKeys(),6);case 6:return Is=Cs.h,ll(gn.j),gn.u=Is,gn.W=!0,Qn(Cs,Y0(gn),7);case 7:ll(gn.j),ys(Cs,0);break;case 4:throw Ls=_s(Cs),ll(gn.j,Ls),gn.g=null,gn.G.clear(),Ls instanceof Bs?Ls:new Bs(2,6,6002,Ls.message)}})}function $M(gn,bn,Cn){for(var In=Dn(bn),Rn=In.next();!Rn.done;Rn=In.next()){var jn=Dn(QT(Rn.value));for(Rn=jn.next();!Rn.done;Rn=jn.next())Rn=Rn.value,Cn.has(Rn.keySystem)||Cn.set(Rn.keySystem,[]),Cn.get(Rn.keySystem).push(Rn)}if(Cn.size==1&&Cn.has(""))throw new Bs(2,6,6e3);for(In={},gn=Dn(gn.h.preferredKeySystems),Rn=gn.next();!Rn.done;In={qd:In.qd},Rn=gn.next())for(In.qd=Rn.value,jn=Dn(bn),Rn=jn.next();!Rn.done;Rn=jn.next())if(Rn=Rn.value.decodingInfos.find(function(ns){return function(us){return us.supported&&us.keySystemAccess!=null&&us.keySystemAccess.keySystem==ns.qd}}(In)))return Rn.keySystemAccess;for(gn=Dn([!0,!1]),Rn=gn.next();!Rn.done;Rn=gn.next())for(In=Rn.value,jn=Dn(bn),Rn=jn.next();!Rn.done;Rn=jn.next()){var Vn=Dn(Rn.value.decodingInfos);for(Rn=Vn.next();!Rn.done;Rn=Vn.next()){var Hn=Rn.value;if(Hn.supported&&Hn.keySystemAccess){Rn=Cn.get(Hn.keySystemAccess.keySystem);var Xn=Dn(Rn);for(Rn=Xn.next();!Rn.done;Rn=Xn.next())if(!!Rn.value.licenseServerUri==In)return Hn.keySystemAccess}}}return null}function fx(gn,bn){var Cn,In,Rn,jn,Vn,Hn,Xn,ns,us,ps,fs,vs,Is,Ls,Cs;return hs(function(Ms){switch(Ms.g){case 1:if(bn.size==1&&bn.has(""))throw new Bs(2,6,6e3);for(In=Dn(bn.values()),Rn=In.next();!Rn.done;Rn=In.next())jn=Rn.value,jn.audioCapabilities.length==0&&delete jn.audioCapabilities,jn.videoCapabilities.length==0&&delete jn.videoCapabilities;Vn=Dn(gn.h.preferredKeySystems),Hn=Vn.next();case 2:if(Hn.done){Ms.A(4);break}if(Xn=Hn.value,!bn.has(Xn)){Ms.A(3);break}return ns=bn.get(Xn),Ts(Ms,6),Qn(Ms,navigator.requestMediaKeySystemAccess(Xn,[ns]),8);case 8:return Cn=Ms.h,Ms.return(Cn);case 6:_s(Ms);case 7:ll(gn.j);case 3:Hn=Vn.next(),Ms.A(2);break;case 4:us=Dn([!0,!1]),ps=us.next();case 9:if(ps.done){Ms.A(11);break}fs=ps.value,vs=Dn(bn.keys()),Hn=vs.next();case 12:if(Hn.done){ps=us.next(),Ms.A(9);break}if(Is=Hn.value,Ls=bn.get(Is),Cs=Ls.drmInfos.some(function(Zs){return!!Zs.licenseServerUri}),Cs!=fs){Ms.A(13);break}return Ts(Ms,15),Qn(Ms,navigator.requestMediaKeySystemAccess(Is,[Ls]),17);case 17:return Cn=Ms.h,Ms.return(Cn);case 15:_s(Ms);case 16:ll(gn.j);case 13:Hn=vs.next(),Ms.A(12);break;case 11:return Ms.return(Cn)}})}function bM(gn){if(gn=u_(gn.h.clearKeys),gn.size==0)return null;var bn=[],Cn=[];gn.forEach(function(Rn,jn){var Vn=jn;Vn.length!=22&&(Vn=Sm(ku(jn),!1)),jn=Rn,jn.length!=22&&(jn=Sm(ku(Rn),!1)),Rn={kty:"oct",kid:Vn,k:jn},bn.push(Rn),Cn.push(Rn.kid)}),gn=JSON.stringify({keys:bn});var In=JSON.stringify({kids:Cn});return In=[{initData:Pu(fp(In)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",licenseServerUri:"data:application/json;base64,"+pn.btoa(gn),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:In,keyIds:new Set(Cn)}}function px(gn,bn){var Cn,In,Rn,jn,Vn;return hs(function(Hn){switch(Hn.g){case 1:try{Cn=gn.u.createSession("persistent-license")}catch(Xn){return In=new Bs(2,6,6005,Xn.message),gn.m(In),Hn.return(Promise.reject(In))}return gn.s.C(Cn,"message",function(Xn){gn.l&&gn.h.delayLicenseRequestUntilPlayed&&gn.l.paused&&!gn.M?gn.J.push(Xn):YT(gn,Xn)}),gn.s.C(Cn,"keystatuseschange",function(Xn){return hx(gn,Xn)}),Rn={initData:null,initDataType:null,loaded:!1,Vd:1/0,Ja:null,type:"persistent-license"},gn.i.set(Cn,Rn),Ts(Hn,2),Qn(Hn,Cn.load(bn),4);case 4:return jn=Hn.h,ll(gn.j),jn?(Rn.loaded=!0,fS(gn)&&gn.o.resolve(),Hn.return(Cn)):(gn.i.delete(Cn),gn.m(new Bs(2,6,6013)),Hn.return(Promise.resolve()));case 2:Vn=_s(Hn),ll(gn.j,Vn),gn.i.delete(Cn),gn.m(new Bs(2,6,6005,Vn.message));case 3:return Hn.return(Promise.resolve())}})}function dS(gn,bn,Cn,In){try{var Rn=gn.u.createSession(In)}catch(jn){gn.m(new Bs(2,6,6005,jn.message));return}gn.s.C(Rn,"message",function(jn){gn.l&&gn.h.delayLicenseRequestUntilPlayed&&gn.l.paused&&!gn.M?gn.J.push(jn):YT(gn,jn)}),gn.s.C(Rn,"keystatuseschange",function(jn){return hx(gn,jn)}),gn.i.set(Rn,{initData:Cn,initDataType:bn,loaded:!1,Vd:1/0,Ja:null,type:In});try{Cn=gn.h.initDataTransform(Cn,bn,gn.g)}catch(jn){bn=jn,jn instanceof Bs||(bn=new Bs(2,6,6016,jn)),gn.m(bn);return}gn.h.logLicenseExchange&&Sm(Cn),Rn.generateRequest(bn,Cn).catch(function(jn){if(!gn.j.g){gn.i.delete(Rn);var Vn=jn.errorCode;if(Vn&&Vn.systemCode){var Hn=Vn.systemCode;0>Hn&&(Hn+=Math.pow(2,32)),Hn="0x"+Hn.toString(16)}gn.m(new Bs(2,6,6006,jn.message,jn,Hn))}})}function YT(gn,bn){var Cn,In,Rn,jn,Vn,Hn,Xn,ns,us,ps,fs,vs,Is,Ls;hs(function(Cs){switch(Cs.g){case 1:return Cn=bn.target,gn.h.logLicenseExchange&&Sm(bn.message),In=gn.i.get(Cn),Rn=gn.g.licenseServerUri,jn=gn.h.advanced[gn.g.keySystem],bn.messageType=="individualization-request"&&jn&&jn.individualizationServer&&(Rn=jn.individualizationServer),Vn=tm([Rn],gn.h.retryParameters),Vn.body=bn.message,Vn.method="POST",Vn.licenseRequestType=bn.messageType,Vn.sessionId=Cn.sessionId,Vn.drmInfo=gn.g,In&&(Vn.initData=In.initData,Vn.initDataType=In.initDataType),NA(gn.g.keySystem)&&DA(Vn),Hn=Date.now(),Ts(Cs,2),ns=gn.D.kb.request(2,Vn),Qn(Cs,ns.promise,4);case 4:Xn=Cs.h,ys(Cs,3);break;case 2:return us=_s(Cs),ps=new Bs(2,6,6007,us),gn.m(ps),In&&In.Ja&&In.Ja.reject(ps),Cs.return();case 3:return gn.j.g?Cs.return():(gn.H+=(Date.now()-Hn)/1e3,gn.h.logLicenseExchange&&Sm(Xn.data),Ts(Cs,5),Qn(Cs,Cn.update(Xn.data),7));case 7:ys(Cs,6);break;case 5:return fs=_s(Cs),vs=new Bs(2,6,6008,fs.message),gn.m(vs),In&&In.Ja&&In.Ja.reject(vs),Cs.return();case 6:if(gn.j.g)return Cs.return();Is=new Ju("drmsessionupdate"),gn.D.onEvent(Is),In&&(In.Ja&&In.Ja.resolve(),Ls=new Hu(function(){In.loaded=!0,fS(gn)&&gn.o.resolve()}),Ls.O(ZT)),ms(Cs)}})}function DA(gn){var bn=Ip(gn.body,!0,!0);if(bn.includes("PlayReadyKeyMessage")){bn=K0(bn,"PlayReadyKeyMessage");for(var Cn=Dn(bn.getElementsByTagName("HttpHeader")),In=Cn.next();!In.done;In=Cn.next())In=In.value,gn.headers[In.getElementsByTagName("name")[0].textContent]=In.getElementsByTagName("value")[0].textContent;gn.body=mm(bn.getElementsByTagName("Challenge")[0].textContent)}else gn.headers["Content-Type"]="text/xml; charset=utf-8"}function hx(gn,bn){bn=bn.target;var Cn=gn.i.get(bn),In=!1;bn.keyStatuses.forEach(function(jn,Vn){if(typeof Vn=="string"){var Hn=Vn;Vn=jn,jn=Hn}if(NA(gn.g.keySystem)&&Vn.byteLength==16&&(Yl()||hm())){Hn=rp(Vn);var Xn=Hn.getUint32(0,!0),ns=Hn.getUint16(4,!0),us=Hn.getUint16(6,!0);Hn.setUint32(0,Xn,!1),Hn.setUint16(4,ns,!1),Hn.setUint16(6,us,!1)}jn!="status-pending"&&(Cn.loaded=!0),jn=="expired"&&(In=!0),Vn=Sp(Vn).slice(0,32),gn.ea.set(Vn,jn)});var Rn=bn.expiration-Date.now();(0>Rn||In&&1e3>Rn)&&Cn&&!Cn.Ja&&(gn.i.delete(bn),bn.close().catch(function(){})),fS(gn)&&(gn.o.resolve(),gn.P.O(FA))}function xM(gn){var bn=gn.ea,Cn=gn.ba;Cn.clear(),bn.forEach(function(In,Rn){return Cn.set(Rn,In)}),bn=Array.from(Cn.values()),bn.length&&bn.every(function(In){return In=="expired"})&&gn.m(new Bs(2,6,6014)),gn.D.cd(Ov(Cn))}function CM(){var gn,bn,Cn,In,Rn,jn,Vn,Hn;return hs(function(Xn){return Xn.g==1?(gn="org.w3.clearkey com.widevine.alpha com.microsoft.playready com.microsoft.playready.recommendation com.apple.fps.1_0 com.apple.fps com.adobe.primetime".split(" "),bn=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],Cn={initDataTypes:["cenc"],videoCapabilities:bn},In={videoCapabilities:bn,persistentState:"required",sessionTypes:["persistent-license"]},Rn=[In,Cn],jn=new Map,Vn=function(ns){var us,ps,fs;return hs(function(vs){switch(vs.g){case 1:if(Ts(vs,2),ns==="org.w3.clearkey"&&L_())throw Error("Unsupported keySystem");return Qn(vs,navigator.requestMediaKeySystemAccess(ns,Rn),4);case 4:return us=vs.h,fs=(ps=us.getConfiguration().sessionTypes)?ps.includes("persistent-license"):!1,gl("Tizen 3")&&(fs=!1),jn.set(ns,{persistentState:fs}),Qn(vs,us.createMediaKeys(),5);case 5:ys(vs,0);break;case 2:_s(vs),jn.set(ns,null),ms(vs)}})},Hn=gn.map(function(ns){return Vn(ns)}),Qn(Xn,Promise.all(Hn),2)):Xn.return(Ov(jn))})}function wM(gn){var bn;return hs(function(Cn){if(Cn.g==1)return bn=new Promise(function(In,Rn){new Hu(Rn).O(jA)}),Ts(Cn,2),Qn(Cn,Promise.race([Promise.all([gn.close(),gn.closed]),bn]),4);if(Cn.g!=2)return ys(Cn,0);_s(Cn),ms(Cn)})}function mx(gn){var bn;return hs(function(Cn){return bn=Array.from(gn.i.entries()),gn.i.clear(),Qn(Cn,Promise.all(bn.map(function(In){In=Dn(In);var Rn=In.next().value,jn=In.next().value;return hs(function(Vn){if(Vn.g==1)return Ts(Vn,2),gn.da||gn.B.includes(Rn.sessionId)||jn.type!=="persistent-license"?Qn(Vn,wM(Rn),5):Qn(Vn,Rn.remove(),5);if(Vn.g!=2)return ys(Vn,0);_s(Vn),ms(Vn)})})),0)})}function XT(gn,bn){if(!gn.length)return bn;if(!bn.length)return gn;var Cn=[];gn=Dn(gn);for(var In=gn.next();!In.done;In=gn.next()){In=In.value;for(var Rn={},jn=Dn(bn),Vn=jn.next();!Vn.done;Rn={Da:Rn.Da},Vn=jn.next())if(Vn=Vn.value,In.keySystem==Vn.keySystem){Rn.Da=[],Rn.Da=Rn.Da.concat(In.initData||[]),Rn.Da=Rn.Da.concat(Vn.initData||[]),Rn.Da=Rn.Da.filter(function(Hn){return function(Xn,ns){return Xn.keyId===void 0||ns===Hn.Da.findIndex(function(us){return us.keyId===Xn.keyId})}}(Rn)),jn=In.keyIds&&Vn.keyIds?new Set([].concat(Kn(In.keyIds),Kn(Vn.keyIds))):In.keyIds||Vn.keyIds,Cn.push({keySystem:In.keySystem,licenseServerUri:In.licenseServerUri||Vn.licenseServerUri,distinctiveIdentifierRequired:In.distinctiveIdentifierRequired||Vn.distinctiveIdentifierRequired,persistentStateRequired:In.persistentStateRequired||Vn.persistentStateRequired,videoRobustness:In.videoRobustness||Vn.videoRobustness,audioRobustness:In.audioRobustness||Vn.audioRobustness,serverCertificate:In.serverCertificate||Vn.serverCertificate,serverCertificateUri:In.serverCertificateUri||Vn.serverCertificateUri,initData:Rn.Da,keyIds:jn});break}}return Cn}function QT(gn){return(gn.video?gn.video.drmInfos:[]).concat(gn.audio?gn.audio.drmInfos:[])}function AM(gn){gn.i.forEach(function(bn,Cn){var In=bn.Vd,Rn=Cn.expiration;isNaN(Rn)&&(Rn=1/0),Rn!=In&&(gn.D.onExpirationUpdated(Cn.sessionId,Rn),bn.Vd=Rn)})}function fS(gn){return gn=gn.i.values(),PA(gn,function(bn){return bn.loaded})}function IM(gn,bn){var Cn=[];for(bn.forEach(function(In,Rn){Cn.push({keySystem:Rn,licenseServerUri:In,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),gn=Dn(gn),bn=gn.next();!bn.done;bn=gn.next())bn=bn.value,bn.video&&(bn.video.drmInfos=Cn),bn.audio&&(bn.audio.drmInfos=Cn)}function LA(gn,bn,Cn,In,Rn,jn){var Vn={};gn=Dn(gn);for(var Hn=gn.next();!Hn.done;Vn={oa:Vn.oa},Hn=gn.next()){if(Vn.oa=Hn.value,bn.includes(Vn.oa.licenseServerUri)||bn.push(Vn.oa.licenseServerUri),In.includes(Vn.oa.serverCertificateUri)||In.push(Vn.oa.serverCertificateUri),Vn.oa.serverCertificate&&(Cn.some(function(us){return function(ps){return Lm(ps,us.oa.serverCertificate)}}(Vn))||Cn.push(Vn.oa.serverCertificate)),Vn.oa.initData){Hn={};for(var Xn=Dn(Vn.oa.initData),ns=Xn.next();!ns.done;Hn={Dc:Hn.Dc},ns=Xn.next())Hn.Dc=ns.value,Rn.some(function(us){return function(ps){var fs=us.Dc;return ps.keyId&&ps.keyId==fs.keyId?!0:ps.initDataType==fs.initDataType&&Lm(ps.initData,fs.initData)}}(Hn))||Rn.push(Hn.Dc)}if(Vn.oa.keyIds)for(Hn=Dn(Vn.oa.keyIds),Xn=Hn.next();!Xn.done;Xn=Hn.next())jn.add(Xn.value)}}function PM(gn,bn,Cn,In){var Rn=gn.keySystem;Rn&&(Rn!="org.w3.clearkey"||!gn.licenseServerUri)&&(bn.size&&(bn=bn.get(Rn)||"",gn.licenseServerUri=bn),gn.keyIds||(gn.keyIds=new Set),(Cn=Cn.get(Rn))&&(gn.distinctiveIdentifierRequired||(gn.distinctiveIdentifierRequired=Cn.distinctiveIdentifierRequired),gn.persistentStateRequired||(gn.persistentStateRequired=Cn.persistentStateRequired),gn.videoRobustness||(gn.videoRobustness=Cn.videoRobustness),gn.audioRobustness||(gn.audioRobustness=Cn.audioRobustness),gn.serverCertificate||(gn.serverCertificate=Cn.serverCertificate),Cn.sessionType&&(gn.sessionType=Cn.sessionType),gn.serverCertificateUri||(gn.serverCertificateUri=Cn.serverCertificateUri)),In[Rn]&&(gn.keySystem=In[Rn]),pn.cast&&pn.cast.__platform__&&Rn=="com.microsoft.playready"&&(gn.keySystem="com.chromecast.playready"))}var jA=1,ZT=5,FA=.5,JT=new Dp(function(){return Vu(new Uint8Array([0]))});function W_(){}function BA(gn,bn,Cn,In){var Rn,jn,Vn,Hn;return hs(function(Xn){if(Xn.g==1)return In&&(Rn=cy[In.toLowerCase()])?Xn.return(Rn):(jn=Q0(gn))&&(Vn=q_[jn])?Xn.return(Vn):In?Xn.A(2):Qn(Xn,gx(gn,bn,Cn),3);if(Xn.g!=2&&(In=Xn.h)&&(Hn=cy[In]))return Xn.return(Hn);throw new Bs(2,4,4e3,gn)})}function gx(gn,bn,Cn){var In,Rn,jn;return hs(function(Vn){return Vn.g==1?(In=tm([gn],Cn),In.method="HEAD",Qn(Vn,bn.request(0,In).promise,2)):(Rn=Vn.h,jn=Rn.headers["content-type"],Vn.return(jn?jn.toLowerCase().split(";").shift():""))})}function Q0(gn){return gn=new Rp(gn).qa.split("/").pop().split("."),gn.length==1?"":gn.pop().toLowerCase()}Ys("shaka.media.ManifestParser",W_),W_.unregisterParserByMime=function(gn){delete cy[gn]},W_.registerParserByMime=function(gn,bn){cy[gn]=bn},W_.registerParserByExtension=function(gn,bn){q_[gn]=bn};var cy={},q_={};function OM(gn){function bn(){In=!0}function Cn(ns){jn.push(ns),Gl(ns)}gn=Pu(gn);var In=!1,Rn,jn=[],Vn=[];if(new Rl().box("moov",Cn).box("trak",Cn).box("mdia",Cn).box("minf",Cn).box("stbl",Cn).R("stsd",function(ns){Rn=ns,jn.push(ns),Mv(ns)}).R("encv",bn).R("enca",bn).R("hev1",function(ns){Vn.push({box:ns,lb:1701733238})}).R("hvc1",function(ns){Vn.push({box:ns,lb:1701733238})}).R("avc1",function(ns){Vn.push({box:ns,lb:1701733238})}).R("avc3",function(ns){Vn.push({box:ns,lb:1701733238})}).R("ac-3",function(ns){Vn.push({box:ns,lb:1701733217})}).R("ec-3",function(ns){Vn.push({box:ns,lb:1701733217})}).R("mp4a",function(ns){Vn.push({box:ns,lb:1701733217})}).parse(gn),In)return gn;if(Vn.length==0||!Rn)throw Sp(gn),new Bs(2,3,3019);Vn.reverse();for(var Hn=Dn(Vn),Xn=Hn.next();!Xn.done;Xn=Hn.next())Xn=Xn.value,gn=_k(gn,Rn,Xn.box,jn,Xn.lb);return gn}function _k(gn,bn,Cn,In,Rn){var jn=VA.value(),Vn=gn.subarray(Cn.start,Cn.start+Cn.size),Hn=rp(Vn),Xn=new Uint8Array(Cn.size+jn.byteLength);for(Xn.set(Vn,0),Vn=rp(Xn),Vn.setUint32(4,Rn),Xn.set(jn,Cn.size),Rn=Hn.getUint32(4),Vn.setUint32(Cn.size+16,Rn),pS(Xn,0,Xn.byteLength),Rn=new Uint8Array(gn.byteLength+Xn.byteLength),Cn=Um()?Cn.start:Cn.start+Cn.size,jn=gn.subarray(Cn),Rn.set(gn.subarray(0,Cn)),Rn.set(Xn,Cn),Rn.set(jn,Cn+Xn.byteLength),gn=Dn(In),In=gn.next();!In.done;In=gn.next())In=In.value,pS(Rn,In.start,In.size+Xn.byteLength);return Xn=rp(Rn,bn.start),bn=V0(bn),gn=Xn.getUint32(bn),Xn.setUint32(bn,gn+1),Rn}function pS(gn,bn,Cn){gn=rp(gn,bn),bn=gn.getUint32(0),bn!=0&&(bn==1?(gn.setUint32(8,Cn>>32),gn.setUint32(12,Cn&4294967295)):gn.setUint32(0,Cn))}var VA=new Dp(function(){return new Uint8Array([0,0,0,80,115,105,110,102,0,0,0,12,102,114,109,97,0,0,0,0,0,0,0,20,115,99,104,109,0,0,0,0,99,101,110,99,0,1,0,0,0,0,0,40,115,99,104,105,0,0,0,32,116,101,110,99,0,0,0,0,0,0,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])});function yx(gn,bn,Cn,In,Rn){if(In>=Rn)return null;for(var jn=-1,Vn=-1,Hn=0;Hn<Cn.length;Hn++)if(Cn[Hn].some(function(Ws){return Ws!=null&&Ws.g.trim()!=""})){jn=Hn;break}for(Hn=Cn.length-1;0<=Hn;Hn--)if(Cn[Hn].some(function(Ws){return Ws!=null&&Ws.g.trim()!=""})){Vn=Hn;break}if(jn===-1||Vn===-1)return null;for(var Xn=Hn=!1,ns="white",us="black",ps=c_(In,Rn,Hn,Xn,ns,us);jn<=Vn;jn++){for(var fs=Cn[jn],vs=-1,Is=-1,Ls=0;Ls<fs.length;Ls++)if(fs[Ls]!=null&&fs[Ls].g.trim()!==""){vs=Ls;break}for(Ls=fs.length-1;0<=Ls;Ls--)if(fs[Ls]!=null&&fs[Ls].g.trim()!==""){Is=Ls;break}if(vs===-1||Is===-1)fs=zm(In,Rn),gn.nestedCues.push(fs);else{for(;vs<=Is;vs++)if(Ls=fs[vs]){var Cs=Ls.l,Ms=Ls.i,Zs=Ls.j,Fs=Ls.h;(Cs!=Hn||Ms!=Xn||Zs!=ns||Fs!=us)&&(ps.payload&&gn.nestedCues.push(ps),ps=c_(In,Rn,Cs,Ms,Zs,Fs),Hn=Cs,Xn=Ms,ns=Zs,us=Fs),ps.payload+=Ls.g}else ps.payload+=" ";ps.payload&&gn.nestedCues.push(ps),jn!==Vn&&(ps=zm(In,Rn),gn.nestedCues.push(ps)),ps=c_(In,Rn,Hn,Xn,ns,us)}}return gn.nestedCues.length?{cue:gn,stream:bn}:null}function c_(gn,bn,Cn,In,Rn,jn){return gn=new Cu(gn,bn,""),Cn&&gn.textDecoration.push("underline"),In&&(gn.fontStyle="italic"),gn.color=Rn,gn.backgroundColor=jn,gn}function zm(gn,bn){return gn=new Cu(gn,bn,""),gn.lineBreak=!0,gn}function d_(gn,bn,Cn,In,Rn){this.g=gn,this.l=bn,this.i=Cn,this.h=In,this.j=Rn}function vx(gn,bn){this.i=[],this.g=1,this.h=0,this.u=gn,this.s=bn,this.j=this.m=!1,this.l="white",this.o="black",Z0(this)}function Ek(gn,bn,Cn){return yx(new Cu(bn,Cn,""),"CC"+(gn.u<<1|gn.s+1),gn.i,bn,Cn)}function Z0(gn){By(gn,0,15),gn.g=1}function J0(gn,bn,Cn){if(!(32>Cn||127<Cn)){var In="";switch(bn){case eE:In=tE.has(Cn)?tE.get(Cn):String.fromCharCode(Cn);break;case Ex:In=rE.get(Cn);break;case Sk:gn.i[gn.g].pop(),In=GA.get(Cn);break;case hS:gn.i[gn.g].pop(),In=Dv.get(Cn)}In&&gn.i[gn.g].push(new d_(In,gn.m,gn.j,gn.o,gn.l))}}function _x(gn,bn,Cn,In){if(!(0>Cn||0>bn))if(bn>=Cn)for(--In;0<=In;In--)gn.i[bn+In]=gn.i[Cn+In].map(function(jn){return jn});else for(var Rn=0;Rn<In;Rn++)gn.i[bn+Rn]=gn.i[Cn+Rn].map(function(jn){return jn})}function By(gn,bn,Cn){for(var In=0;In<=Cn;In++)gn.i[bn+In]=[]}var eE=0,Ex=1,Sk=2,hS=3,tE=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),rE=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57,"⠀"],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),GA=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),Dv=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]);function f_(gn,bn){this.h=zA,this.o=new vx(gn,bn),this.i=new vx(gn,bn),this.l=new vx(gn,bn),this.g=this.i,this.j=0,this.m=null}function Tk(gn,bn,Cn){gn.g=gn.i;var In=gn.g,Rn=null;return gn.h!==$k&&gn.h!==mS&&(Rn=Ek(In,gn.j,Cn),Cn=gn.i,Cn.g=0<Cn.h?Cn.h:0,By(Cn,0,15),Cn=gn.l,Cn.g=0<Cn.h?Cn.h:0,By(Cn,0,15),In.g=15),gn.h=$k,In.h=bn,Rn}function Sx(gn){gn.h=MM,gn.g=gn.l,gn.g.h=0}function Tx(gn){cp("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),gn.g=gn.o,gn.h=mS}var zA=0,MM=1,$k=3,mS=4,Ck="black green blue cyan red yellow magenta black".split(" "),Ak="white green blue cyan red yellow magenta white_italics".split(" ");function kx(){this.l=!1,this.B=this.F=0,this.D=KA,this.i=[],this.g=this.h=this.j=0,this.u=this.o=!1,this.s="white",this.m="black",Ik(this)}function Ik(gn){gn.i=[];for(var bn=0;16>bn;bn++)gn.i.push($x())}function $x(){for(var gn=[],bn=0;42>bn;bn++)gn.push(null);return gn}function Y_(gn,bn){gS(gn)&&(gn.i[gn.h][gn.g]=new d_(bn,gn.u,gn.o,gn.m,gn.s),gn.g++)}function gS(gn){var bn=gn.g<gn.B&&0<=gn.g;return gn.h<gn.F&&0<=gn.h&&bn}kx.prototype.isVisible=function(){return this.l};function Vy(gn,bn,Cn){var In=new Cu(gn.j,bn,"");return In.textAlign=gn.D===RM?"left":gn.D===HA?"right":Qp,(Cn=yx(In,"svc"+Cn,gn.i,gn.j,bn))&&(gn.j=bn),Cn}var RM=0,HA=1,KA=2;function bx(){this.i=[],this.h=null,this.g=0}function xx(gn,bn){bn.type===3?(gn.g=2*(bn.value&63)-1,gn.h=[]):gn.h&&(0<gn.g&&(gn.h.push(bn),gn.g--),gn.g===0&&(gn.i.push(new lv(gn.h)),gn.h=null,gn.g=0))}function lv(gn){this.g=0,this.h=gn}lv.prototype.ha=function(){return this.g<this.h.length},lv.prototype.Z=function(){return this.g};function pp(gn){if(!gn.ha())throw new Bs(2,2,3e3);return gn.h[gn.g++]}lv.prototype.skip=function(gn){if(this.g+gn>this.h.length)throw new Bs(2,2,3e3);this.g+=gn};function X_(gn){this.i=gn,this.h=[null,null,null,null,null,null,null,null],this.g=null}function NM(gn,bn,Cn,In){if(128<=Cn&&135>=Cn)In=Cn&7,gn.h[In]&&(gn.g=gn.h[In]);else{if(Cn===136){Cn=pp(bn).value,bn=null,Cn=Dn(yS(gn,Cn));for(var Rn=Cn.next();!Rn.done;Rn=Cn.next())Rn=gn.h[Rn.value],Rn.isVisible()&&(bn=Vy(Rn,In,gn.i)),Ik(Rn);return bn}if(Cn===137)for(bn=pp(bn).value,bn=Dn(yS(gn,bn)),Cn=bn.next();!Cn.done;Cn=bn.next())Cn=gn.h[Cn.value],Cn.isVisible()||(Cn.j=In),Cn.l=!0;else{if(Cn===138){for(Cn=pp(bn).value,bn=null,Cn=Dn(yS(gn,Cn)),Rn=Cn.next();!Rn.done;Rn=Cn.next())Rn=gn.h[Rn.value],Rn.isVisible()&&(bn=Vy(Rn,In,gn.i)),Rn.l=!1;return bn}if(Cn===139){for(Cn=pp(bn).value,bn=null,Cn=Dn(yS(gn,Cn)),Rn=Cn.next();!Rn.done;Rn=Cn.next())Rn=gn.h[Rn.value],Rn.isVisible()?bn=Vy(Rn,In,gn.i):Rn.j=In,Rn.l=!Rn.l;return bn}if(Cn===140)return bn=pp(bn).value,WA(gn,bn,In);if(Cn===143)return In=WA(gn,255,In),qA(gn),In;if(Cn===144)bn.skip(1),In=pp(bn).value,gn.g&&(gn.g.o=0<(In&128),gn.g.u=0<(In&64));else if(Cn===145)In=pp(bn).value,Cn=pp(bn).value,bn.skip(1),gn.g&&(bn=YA((Cn&48)>>4,(Cn&12)>>2,Cn&3),gn.g.s=YA((In&48)>>4,(In&12)>>2,In&3),gn.g.m=bn);else if(Cn===146)In=pp(bn).value,bn=pp(bn).value,gn.g&&(gn=gn.g,gn.h=In&15,gn.g=bn&63);else if(Cn===151)bn.skip(1),bn.skip(1),In=pp(bn).value,bn.skip(1),gn.g&&(gn.g.D=In&3);else if(152<=Cn&&159>=Cn){if(Cn=(Cn&15)-8,Rn=gn.h[Cn]!==null,!Rn){var jn=new kx;jn.j=In,gn.h[Cn]=jn}In=pp(bn).value,pp(bn),pp(bn),jn=pp(bn).value;var Vn=pp(bn).value;bn=pp(bn).value,Rn&&!(bn&7)||(bn=gn.h[Cn],bn.h=0,bn.g=0,bn.u=!1,bn.o=!1,bn.s="white",bn.m="black"),bn=gn.h[Cn],bn.l=0<(In&32),bn.F=(jn&15)+1,bn.B=(Vn&63)+1,gn.g=gn.h[Cn]}}}return null}function yS(gn,bn){for(var Cn=[],In=0;8>In;In++)(bn&1)===1&&gn.h[In]&&Cn.push(In),bn>>=1;return Cn}function WA(gn,bn,Cn){var In=null;bn=Dn(yS(gn,bn));for(var Rn=bn.next();!Rn.done;Rn=bn.next()){Rn=Rn.value;var jn=gn.h[Rn];jn.isVisible()&&(In=Vy(jn,Cn,gn.i)),gn.h[Rn]=null}return In}function qA(gn){gn.g=null,gn.h=[null,null,null,null,null,null,null,null]}function YA(gn,bn,Cn){var In={0:0,1:0,2:1,3:1};return gn=In[gn],bn=In[bn],Cn=In[Cn],Tp[gn<<2|bn<<1|Cn]}var vS=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),Tp="black blue green cyan red magenta yellow white".split(" ");function DM(){this.h=[],this.g=[],this.i=new bx,this.l=0,this.s=new Map([["CC1",new f_(0,0)],["CC2",new f_(0,1)],["CC3",new f_(1,0)],["CC4",new f_(1,1)]]),this.o=this.m=0,this.j=new Map,Cx(this)}function Cx(gn){gn.m=0,gn.o=0,gn=Dn(gn.s.values());for(var bn=gn.next();!bn.done;bn=gn.next())bn=bn.value,bn.h=2,bn.g=bn.i,bn.m=null,Z0(bn.i),Z0(bn.l),Z0(bn.o)}function _S(gn){function bn(jn,Vn){return jn.pts-Vn.pts||jn.order-Vn.order}var Cn=[];gn.h.sort(bn),gn.g.sort(bn);for(var In=Dn(gn.h),Rn=In.next();!Rn.done;Rn=In.next())(Rn=XA(gn,Rn.value))&&Cn.push(Rn);for(In=Dn(gn.g),Rn=In.next();!Rn.done;Rn=In.next())xx(gn.i,Rn.value);for(In=Dn(gn.i.i),Rn=In.next();!Rn.done;Rn=In.next())Rn=QA(gn,Rn.value),Cn.push.apply(Cn,Kn(Rn));return gn.i.i=[],gn.h=[],gn.g=[],Cn}function XA(gn,bn){var Cn=bn.type;if((bn.xa&112)===16){var In=bn.xa>>3&1;Cn===0?gn.m=In:gn.o=In}if(Cn=gn.s.get("CC"+(Cn<<1|(Cn?gn.o:gn.m)+1)),bn.xa===255&&bn.La===255||!bn.xa&&!bn.La||!wx(bn.xa)||!wx(bn.La))return 45<=++gn.l&&Cx(gn),null;if(gn.l=0,bn.xa&=127,bn.La&=127,!bn.xa&&!bn.La)return null;if(gn=null,(bn.xa&112)===16)e:{if(In=bn.xa,gn=bn.La,Cn.m===(In<<8|gn))Cn.m=null;else if(Cn.m=In<<8|gn,(In&240)===16&&(gn&192)===64){bn=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(In&7)<<1|gn>>5&1];var Rn=(gn&30)>>1;In="white";var jn=!1;if(7>Rn?In=Ak[Rn]:Rn===7&&(jn=!0),gn=(gn&1)===1,Cn.h!==mS){if(Rn=Cn.g,Cn.h===$k&&bn!==Rn.g){var Vn=1+bn-Rn.h;_x(Rn,Vn,1+Rn.g-Rn.h,Rn.h),By(Rn,0,Vn-1),By(Rn,bn+1,15-bn)}Rn.g=bn,Cn.g.m=gn,Cn.g.j=jn,Cn.g.l=In,Cn.g.o="black"}}else if((In&247)===17&&(gn&240)===32)Cn.g.m=!1,Cn.g.j=!1,Cn.g.l="white",J0(Cn.g,eE,32),In=!1,bn=Ak[(gn&14)>>1],bn==="white_italics"&&(bn="white",In=!0),Cn.g.m=(gn&1)===1,Cn.g.j=In,Cn.g.l=bn;else if((In&247)===16&&(gn&240)===32||(In&247)===23&&(gn&255)===45)bn="black",!(In&7)&&(bn=Ck[(gn&14)>>1]),Cn.g.o=bn;else if((In&247)===17&&(gn&240)===48)J0(Cn.g,Ex,gn);else if((In&246)===18&&(gn&224)===32)J0(Cn.g,In&1?hS:Sk,gn);else if((In&246)===20&&(gn&240)===32){switch(gn=bn.pts,In=null,bn.La){case 32:Sx(Cn);break;case 33:Cn=Cn.g,Cn.i[Cn.g].pop();break;case 37:In=Tk(Cn,2,gn);break;case 38:In=Tk(Cn,3,gn);break;case 39:In=Tk(Cn,4,gn);break;case 40:J0(Cn.g,eE,32);break;case 41:Cn.h=2,Cn.g=Cn.i,Cn.g.h=0,Cn.j=gn;break;case 42:Z0(Cn.o),Tx(Cn);break;case 43:Tx(Cn);break;case 44:bn=Cn.i,In=null,Cn.h!==mS&&(In=Ek(bn,Cn.j,gn)),By(bn,0,15);break;case 45:bn=Cn.g,Cn.h!==$k?In=null:(In=Ek(bn,Cn.j,gn),jn=bn.g-bn.h+1,_x(bn,jn-1,jn,bn.h),By(bn,0,jn-1),By(bn,bn.g,15-bn.g),Cn.j=gn);break;case 46:By(Cn.l,0,15);break;case 47:bn=null,Cn.h!==mS&&(bn=Ek(Cn.i,Cn.j,gn)),In=Cn.l,Cn.l=Cn.i,Cn.i=In,Sx(Cn),Cn.j=gn,In=bn}gn=In;break e}gn=null}else In=bn.La,J0(Cn.g,eE,bn.xa),J0(Cn.g,eE,In);return gn}function QA(gn,bn){var Cn=[];try{for(;bn.ha();){var In=pp(bn).value,Rn=(In&224)>>5,jn=In&31;if(Rn===7&&jn!=0&&(Rn=pp(bn).value&63),Rn!=0){gn.j.has(Rn)||gn.j.set(Rn,new X_(Rn));for(var Vn=gn.j.get(Rn),Hn=bn.Z();bn.Z()-Hn<jn;){Rn=bn;var Xn=pp(Rn),ns=Xn.value,us=Xn.pts;if(ns===16){var ps=pp(Rn);ns=ns<<16|ps.value}if(0<=ns&&31>=ns){var fs=us;if(Vn.g){var vs=Vn.g;switch(Rn=null,ns){case 8:!gS(vs)||0>=vs.g&&0>=vs.h||(0>=vs.g?(vs.g=vs.B-1,vs.h--):vs.g--,vs.i[vs.h][vs.g]=null);break;case 13:if(vs.isVisible()&&(Rn=Vy(vs,fs,Vn.i)),vs.h+1>=vs.F){fs=vs;for(var Is=0,Ls=1;16>Ls;Ls++,Is++)fs.i[Is]=fs.i[Ls];for(Ls=0;1>Ls;Ls++,Is++)fs.i[Is]=$x()}else vs.h++;vs.g=0;break;case 14:vs.isVisible()&&(Rn=Vy(vs,fs,Vn.i)),vs.i[vs.h]=$x(),vs.g=0;break;case 12:vs.isVisible()&&(Rn=Vy(vs,fs,Vn.i)),Ik(vs),fs=vs,fs.h=0,fs.g=0}var Cs=Rn}else Cs=null}else if(128<=ns&&159>=ns)Cs=NM(Vn,Rn,ns,us);else{if(4096<=ns&&4127>=ns)fs=ns&255,8<=fs&&15>=fs?Rn.skip(1):16<=fs&&23>=fs?Rn.skip(2):24<=fs&&31>=fs&&Rn.skip(3);else if(4224<=ns&&4255>=ns)fs=ns&255,128<=fs&&135>=fs?Rn.skip(4):136<=fs&&143>=fs&&Rn.skip(5);else if(32<=ns&&127>=ns)Rn=ns,Vn.g&&(Rn===127?Y_(Vn.g,"♪"):Y_(Vn.g,String.fromCharCode(Rn)));else if(160<=ns&&255>=ns)Vn.g&&Y_(Vn.g,String.fromCharCode(ns));else if(4128<=ns&&4223>=ns){if(Rn=ns&255,Vn.g)if(vS.has(Rn)){var Ms=vS.get(Rn);Y_(Vn.g,Ms)}else Y_(Vn.g,"_")}else 4256<=ns&&4351>=ns&&Vn.g&&((ns&255)!=160?Y_(Vn.g,"_"):Y_(Vn.g,"[CC]"));Cs=null}(Rn=Cs)&&Cn.push(Rn)}}}}catch(Zs){if(Zs instanceof Bs&&Zs.code===3e3)cp("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw Zs}return Cn}function wx(gn){for(var bn=0;gn;)bn^=gn&1,gn>>=1;return bn===1}function Pk(){}Pk.prototype.init=function(){},Pk.prototype.parse=function(){return[]};function ZA(gn,bn){var Cn=null,In=null,Rn=null,jn=gn.K();return bn&1&&(Rn=gn.$a()),bn&2&&gn.skip(4),bn&8&&(Cn=gn.K()),bn&16&&(In=gn.K()),{trackId:jn,Ce:Cn,wf:In,qh:Rn}}function JA(gn,bn){return{we:bn==1?gn.$a():gn.K()}}function ES(gn,bn){return bn==1?(gn.skip(8),gn.skip(8)):(gn.skip(4),gn.skip(4)),{timescale:gn.K()}}function eI(gn,bn,Cn){var In=gn.K(),Rn=[],jn=null;Cn&1&&(jn=gn.K()),Cn&4&&gn.skip(4);for(var Vn=0;Vn<In;Vn++){var Hn={ee:null,sampleSize:null,ed:null};Cn&256&&(Hn.ee=gn.K()),Cn&512&&(Hn.sampleSize=gn.K()),Cn&1024&&gn.skip(4),Cn&2048&&(Hn.ed=bn==0?gn.K():gn.Oe()),Rn.push(Hn)}return{vh:In,Qe:Rn,vf:jn}}function Ax(){this.j=new Map,this.i=this.h=0,this.g=Ix}Ax.prototype.init=function(gn){function bn(jn){jn=jn.name,jn in SS&&(Cn.g=SS[jn])}var Cn=this,In=[],Rn=[];if(new Rl().box("moov",Gl).box("mvex",Gl).R("trex",function(jn){var Vn=jn.reader;Vn.skip(4),Vn.skip(4),jn=Vn.K(),Vn=Vn.K(),Cn.h=jn,Cn.i=Vn}).box("trak",Gl).R("tkhd",function(jn){var Vn=jn.reader;jn.version==1?(Vn.skip(8),Vn.skip(8)):(Vn.skip(4),Vn.skip(4)),jn=Vn.K(),In.push(jn)}).box("mdia",Gl).R("mdhd",function(jn){jn=ES(jn.reader,jn.version),Rn.push(jn.timescale)}).box("minf",Gl).box("stbl",Gl).R("stsd",Mv).box("avc1",bn).box("avc3",bn).box("hev1",bn).box("hvc1",bn).box("dvh1",bn).box("dvhe",bn).box("encv",zT).box("sinf",Gl).box("frma",function(jn){jn=jn.reader.K(),jn=uy(jn),jn in SS&&(Cn.g=SS[jn])}).parse(gn,!0),!In.length||!Rn.length||In.length!=Rn.length)throw new Bs(2,2,2010);this.g==Ix&&Tu("Unable to determine bitstream format for CEA parsing!"),In.forEach(function(jn,Vn){Cn.j.set(jn,Rn[Vn])})},Ax.prototype.parse=function(gn){var bn=this;if(this.g==Ix)return[];var Cn=[],In=this.h,Rn=this.i,jn=[],Vn=null,Hn=null,Xn=null,ns=9e4;return new Rl().box("moof",function(us){Vn=us.start,Gl(us)}).box("traf",Gl).R("trun",function(us){us=eI(us.reader,us.version,us.flags),jn=us.Qe,Hn=us.vf}).R("tfhd",function(us){us=ZA(us.reader,us.flags),In=us.Ce||bn.h,Rn=us.wf||bn.i,us=us.trackId,bn.j.has(us)&&(ns=bn.j.get(us))}).R("tfdt",function(us){Xn=JA(us.reader,us.version).we}).box("mdat",function(us){if(Xn===null)throw new Bs(2,2,2010);e:{var ps=us.reader,fs=Xn,vs=ns,Is=In,Ls=Rn,Cs=jn,Ms=0,Zs=Ls;for(Cs.length&&(Zs=Cs[0].sampleSize||Ls),ps.skip((Vn||0)+(Hn||0)-us.start-8);ps.ha();){us=ps.K();var Fs=ps.Qa();switch(bn.g){case Ok:Fs&=31,Fs=Fs==6;break;case Q_:Fs=Fs>>1&63,Fs=Fs==39||Fs==40;break;default:break e}if(Fs){Fs=0,Cs.length>Ms&&(Fs=Cs[Ms].ed||0),Fs=(fs+Fs)/vs;for(var Ws=[],Gs,eu=ps.Za(us-1),au=Gs=0;au<eu.length;)Gs==2&&eu[au]==3?(Gs=0,eu=[].concat(Kn(eu)),eu.splice(au,1),eu=new Uint8Array(eu)):eu[au]==0?Gs++:Gs=0,au++;for(Gs=eu,au=0;au<Gs.length;){for(eu=0;Gs[au]==255;)eu+=255,au++;eu+=Gs[au++];for(var du=0;Gs[au]==255;)du+=255,au++;du+=Gs[au++],eu==4&&Ws.push(Gs.subarray(au,au+du)),au+=du}for(Ws=Dn(Ws),Gs=Ws.next();!Gs.done;Gs=Ws.next())Cn.push({hg:Gs.value,pts:Fs})}else try{ps.skip(us-1)}catch{break}Zs-=us+4,Zs==0&&(fs=Cs.length>Ms?fs+(Cs[Ms].ee||Is):fs+Is,Ms++,Zs=Cs.length>Ms&&Cs[Ms].sampleSize||Ls)}}}).parse(gn,!1),Cn};var Ix=0,Ok=1,Q_=2,SS={avc1:Ok,avc3:Ok,hev1:Q_,hvc1:Q_,dvh1:Q_,dvhe:Q_};function Px(gn){this.h=new Pk,gn.includes("video/mp4")&&(this.h=new Ax),this.g=new DM}Px.prototype.init=function(gn){this.h.init(gn)};function Ox(gn,bn){bn=gn.h.parse(bn),bn=Dn(bn);for(var Cn=bn.next();!Cn.done;Cn=bn.next()){var In=Cn.value,Rn=Pu(In.hg);if(0<Rn.length&&(Cn=gn.g,In=In.pts,Rn=new xu(Rn,0),Rn.Qa()===181&&Rn.$d()===49&&Rn.K()===1195456820&&Rn.Qa()===3)){var jn=Rn.Qa();if(jn&64){jn&=31,Rn.skip(1);for(var Vn=0;Vn<jn;Vn++){var Hn=Rn.Qa(),Xn=(Hn&4)>>2,ns=Rn.Qa(),us=Rn.Qa();Xn&&(Hn&=3,Hn===0||Hn===1?Cn.h.push({pts:In,type:Hn,xa:ns,La:us,order:Cn.h.length}):(Cn.g.push({pts:In,type:Hn,value:ns,order:Cn.g.length}),Cn.g.push({pts:In,type:2,value:us,order:Cn.g.length})))}}}}return _S(gn.g)}function Hm(gn,bn,Cn,In,Rn){this.ya=gn,this.Ba=bn,this.la=Cn,this.Od=In===void 0?null:In,this.timescale=Rn}Hm.prototype.lc=function(){return this.Ba},Hm.prototype.hc=function(){return this.la};function Mx(gn,bn){return gn&&bn?gn.lc()==bn.lc()&&gn.hc()==bn.hc()&&_p(gn.ya(),bn.ya()):gn==bn}Ys("shaka.media.InitSegmentReference",Hm),Hm.prototype.getEndByte=Hm.prototype.hc,Hm.prototype.getStartByte=Hm.prototype.lc;function cl(gn,bn,Cn,In,Rn,jn,Vn,Hn,Xn,ns,us,ps,fs,vs,Is){ns=ns===void 0?[]:ns,vs=vs===void 0?nE:vs,this.startTime=gn,this.l=this.endTime=bn,this.u=Cn,this.Ba=In,this.la=Rn,this.h=jn,this.timestampOffset=Vn,this.appendWindowStart=Hn,this.appendWindowEnd=Xn,this.i=ns,this.tilesLayout=us===void 0?"":us,this.s=ps===void 0?null:ps,this.g=fs===void 0?null:fs,this.status=vs,this.m=Is===void 0?null:Is,this.o=null,this.j=0}Sn=cl.prototype,Sn.ya=function(){return this.u()},Sn.getStartTime=function(){return this.startTime},Sn.Df=function(){return this.endTime},Sn.lc=function(){return this.Ba},Sn.hc=function(){return this.la},Sn.Uf=function(){return this.tilesLayout},Sn.Tf=function(){return this.s},Sn.Eb=function(){return this.status},Sn.ag=function(){this.status=iE},Sn.Xe=function(gn){this.o=gn},Sn.Rf=function(){return this.o},Sn.offset=function(gn){this.startTime+=gn,this.endTime+=gn,this.l+=gn;for(var bn=Dn(this.i),Cn=bn.next();!Cn.done;Cn=bn.next())Cn=Cn.value,Cn.startTime+=gn,Cn.endTime+=gn,Cn.l+=gn},Sn.oe=function(gn){this.g==null?fl("Sync attempted without sync time!"):(gn=this.g-gn-this.startTime,.001<=Math.abs(gn)&&this.offset(gn))},Ys("shaka.media.SegmentReference",cl),cl.prototype.syncAgainst=cl.prototype.oe,cl.prototype.offset=cl.prototype.offset,cl.prototype.getThumbnailSprite=cl.prototype.Rf,cl.prototype.setThumbnailSprite=cl.prototype.Xe,cl.prototype.markAsUnavailable=cl.prototype.ag,cl.prototype.getStatus=cl.prototype.Eb,cl.prototype.getTileDuration=cl.prototype.Tf,cl.prototype.getTilesLayout=cl.prototype.Uf,cl.prototype.getEndByte=cl.prototype.hc,cl.prototype.getStartByte=cl.prototype.lc,cl.prototype.getEndTime=cl.prototype.Df,cl.prototype.getStartTime=cl.prototype.getStartTime,cl.prototype.getUris=cl.prototype.ya;var nE=0,iE=1;cl.Status={Gg:nE,nh:iE,Ug:2};function TS(gn){return!gn||gn.length==1&&1e-6>gn.end(0)-gn.start(0)?null:gn.length==1&&0>gn.start(0)?0:gn.length?gn.start(0):null}function Mk(gn){return!gn||gn.length==1&&1e-6>gn.end(0)-gn.start(0)?null:gn.length?gn.end(gn.length-1):null}function Rx(gn,bn){return!gn||!gn.length||gn.length==1&&1e-6>gn.end(0)-gn.start(0)||bn>gn.end(gn.length-1)?!1:bn>=gn.start(0)}function Km(gn,bn){if(!gn||!gn.length||gn.length==1&&1e-6>gn.end(0)-gn.start(0))return 0;var Cn=0;gn=Dn(rl(gn));for(var In=gn.next();!In.done;In=gn.next()){var Rn=In.value;In=Rn.start,Rn=Rn.end,Rn>bn&&(Cn+=Rn-Math.max(In,bn))}return Cn}function LM(gn,bn,Cn){return!gn||!gn.length||gn.length==1&&1e-6>gn.end(0)-gn.start(0)?null:(gn=rl(gn).findIndex(function(In,Rn,jn){return In.start>bn&&(Rn==0||jn[Rn-1].end-bn<=Cn)}),0<=gn?gn:null)}function rl(gn){if(!gn)return[];for(var bn=[],Cn=0;Cn<gn.length;Cn++)bn.push({start:gn.start(Cn),end:gn.end(Cn)});return bn}function kS(){}function Nx(gn,bn){var Cn=(gn[bn]&127)<<21;return Cn|=(gn[bn+1]&127)<<14,Cn|=(gn[bn+2]&127)<<7,Cn|=gn[bn+3]&127}function tI(gn){var bn={key:gn.type,description:"",data:""};if(gn.type==="TXXX"){if(2>gn.size||gn.data[0]!==3)return null;var Cn=gn.data.subarray(1).indexOf(0);if(Cn===-1)return null;var In=Ou(Pu(gn.data,1,Cn));return gn=Ou(Pu(gn.data,2+Cn)).replace(/\0*$/,""),bn.description=In,bn.data=gn,bn}return gn.type==="WXXX"?2>gn.size||gn.data[0]!==3||(Cn=gn.data.subarray(1).indexOf(0),Cn===-1)?null:(In=Ou(Pu(gn.data,1,Cn)),gn=Ou(Pu(gn.data,2+Cn)).replace(/\0*$/,""),bn.description=In,bn.data=gn,bn):gn.type==="PRIV"?2>gn.size||(In=gn.data.indexOf(0),In===-1)?null:(In=Ou(Pu(gn.data,0,In)),gn=Vu(gn.data.subarray(In.length+1)),bn.description=In,bn.data=gn,bn):gn.type[0]==="T"?2>gn.size||gn.data[0]!==3?null:(gn=Ou(gn.data.subarray(1)).replace(/\0*$/,""),bn.data=gn,bn):gn.type[0]==="W"?(gn=Ou(gn.data).replace(/\0*$/,""),bn.data=gn,bn):gn.data?(bn.data=Vu(gn.data),bn):null}function aE(gn){for(var bn=0,Cn=[];bn+10<=gn.length&&gn[bn]===73&&gn[bn+1]===68&&gn[bn+2]===51&&255>gn[bn+3]&&255>gn[bn+4]&&128>gn[bn+6]&&128>gn[bn+7]&&128>gn[bn+8]&&128>gn[bn+9];){var In=Nx(gn,bn+6);for(gn[bn+5]>>6&1&&(bn+=10),bn+=10,In=bn+In;bn+10<In;){var Rn=gn.subarray(bn),jn=Nx(Rn,4);Rn={type:String.fromCharCode(Rn[0],Rn[1],Rn[2],Rn[3]),size:jn,data:Rn.subarray(10,10+jn)},(jn=tI(Rn))&&Cn.push(jn),bn+=Rn.size+10}bn+10<=gn.length&&gn[bn]===51&&gn[bn+1]===68&&gn[bn+2]===73&&255>gn[bn+3]&&255>gn[bn+4]&&128>gn[bn+6]&&128>gn[bn+7]&&128>gn[bn+8]&&128>gn[bn+9]&&(bn+=10)}return Cn}Ys("shaka.util.Id3Utils",kS),kS.getID3Frames=aE;function oE(){this.o=null,this.s=!1,this.l=this.m=null,this.B=[],this.g=this.h=null,this.u=[],this.j=null,this.i=[]}oE.prototype.parse=function(gn){if(564>gn.length)return this;for(var bn=Math.max(0,Lv(gn)),Cn=gn.length-(gn.length+bn)%188,In=!1,Rn=bn;Rn<Cn;Rn+=188)if(gn[Rn]===71){var jn=!!(gn[Rn+1]&64),Vn=((gn[Rn+1]&31)<<8)+gn[Rn+2];if(1<(gn[Rn+3]&48)>>4){var Hn=Rn+5+gn[Rn+4];if(Hn===Rn+188)continue}else Hn=Rn+4;switch(Vn){case 0:jn&&(Hn+=gn[Hn]+1),this.o=(gn[Hn+10]&31)<<8|gn[Hn+11];break;case 17:case 8191:break;case this.o:jn&&(Hn+=gn[Hn]+1),jn=gn,Vn={audio:-1,video:-1,Ed:-1,audioCodec:"",videoCodec:""};var Xn=Hn+3+((jn[Hn+1]&15)<<8|jn[Hn+2])-4;for(Hn+=12+((jn[Hn+10]&15)<<8|jn[Hn+11]);Hn<Xn;){var ns=(jn[Hn+1]&31)<<8|jn[Hn+2];switch(jn[Hn]){case 15:Vn.audio===-1&&(Vn.audio=ns,Vn.audioCodec="aac");break;case 21:Vn.Ed===-1&&(Vn.Ed=ns);break;case 27:Vn.video===-1&&(Vn.video=ns,Vn.videoCodec="avc");break;case 3:case 4:Vn.audio===-1&&(Vn.audio=ns,Vn.audioCodec="mp3");break;case 36:Vn.video===-1&&(Vn.video=ns,Vn.videoCodec="hvc")}Hn+=((jn[Hn+3]&15)<<8|jn[Hn+4])+5}jn=Vn,this.l==null&&(this.l=jn.video),this.g==null&&(this.g=jn.audio),this.j==null&&(this.j=jn.Ed),In&&!this.s&&(In=!1,Rn=bn-188),this.s=!0;break;case this.l:jn=gn.subarray(Hn,Rn+188),this.m==null&&(Hn=Rk(jn))&&Hn.pts!=null&&(this.m=Hn.pts/9e4),this.B.push(jn);break;case this.g:jn=gn.subarray(Hn,Rn+188),this.h==null&&(Hn=Rk(jn))&&Hn.pts!=null&&(this.h=Hn.pts/9e4),this.u.push(jn);break;case this.j:this.i.push(gn.subarray(Hn,Rn+188));break;default:In=!0}}return this};function Rk(gn){if((gn[0]<<16|gn[1]<<8|gn[2])!==1)return null;var bn={data:new Uint8Array(0),uh:6+(gn[4]<<8|gn[5]),pts:null,dts:null},Cn=gn[7];return Cn&192&&(bn.pts=536870912*(gn[9]&14)+4194304*(gn[10]&255)+16384*(gn[11]&254)+128*(gn[12]&255)+(gn[13]&254)/2,bn.dts=bn.pts,Cn&64&&(bn.dts=536870912*(gn[14]&14)+4194304*(gn[15]&255)+16384*(gn[16]&254)+128*(gn[17]&255)+(gn[18]&254)/2)),bn.data=gn.subarray(9+gn[8]),bn}function UM(gn){for(var bn=[],Cn=new Uint8Array(0),In=gn.i.length-1;0<=In;In--){Cn=oy(gn.i[In],Cn);var Rn=Rk(Cn);Rn&&(bn.unshift({cueTime:Rn.pts?Rn.pts/9e4:null,data:Rn.data,frames:aE(Rn.data),dts:Rn.dts,pts:Rn.pts}),Cn=new Uint8Array(0))}return bn}oE.prototype.getStartTime=function(){return{audio:this.h,video:this.m}};function Lv(gn){for(var bn=Math.min(1e3,gn.length-564),Cn=0;Cn<bn;){if(gn[Cn]===71&&gn[Cn+188]===71&&gn[Cn+376]===71)return Cn;Cn++}return-1}Ys("shaka.util.TsParser",oE);function sE(gn,bn,Cn){this.g=null,this.i=-1,this.j=gn,this.h=bn,this.l=Cn,typeof libDPIModule>"u"&&Tu("Could not Find LCEVC Library dependencies on this page"),typeof LcevcDil>"u"?Tu("Could not Find LCEVC Library on this page"):LcevcDil.SupportObject.SupportStatus||Tu(LcevcDil.SupportObject.SupportError),typeof LcevcDil<"u"&&typeof libDPIModule<"u"&&this.h instanceof HTMLCanvasElement&&LcevcDil.SupportObject.SupportStatus&&!this.g&&LcevcDil.SupportObject.webGLSupport(this.h)&&(this.h.classList.remove("shaka-hidden"),this.g=new LcevcDil.LcevcDil(this.j,this.h,this.l))}sE.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function Dx(gn,bn){var Cn=jM;switch(bn.mimeType){case"video/webm":Cn=Nk;break;case"video/mp4":Cn=Dk}gn.g&&(gn.i=bn.id,gn.g.setLevelSwitching(bn.id,!0),gn.g.setContainerFormat(Cn))}Ys("shaka.lcevc.Dil",sE),sE.prototype.release=sE.prototype.release;var jM=0,Nk=1,Dk=2;function Lk(gn,bn,Cn,In){var Rn=this;this.l=gn,this.G=null,this.m=bn,this.h={},this.L={},this.P={},this.g=null,this.H=!1,this.V=Cn||function(){},this.F=In||null,this.i={},this.u=new Ul,this.o={},this.s=null,this.J=new bl,this.j=FM(this,this.J),this.D=new gm(function(){return rI(Rn)}),this.M="",this.B=!1,this.W=new bl}function FM(gn,bn){var Cn=new MediaSource;return gn.u.ia(Cn,"sourceopen",function(){URL.revokeObjectURL(gn.M),bn.resolve()}),gn.M=uE(Cn),gn.l.src=gn.M,Cn}Sn=Lk.prototype,Sn.destroy=function(){return this.D.destroy()};function rI(gn){var bn,Cn,In,Rn,jn,Vn,Hn,Xn;return hs(function(ns){if(ns.g==1){bn=[];for(Cn in gn.i)for(In=gn.i[Cn],Rn=In[0],gn.i[Cn]=In.slice(0,1),Rn&&bn.push(Rn.p.catch(R_)),jn=Dn(In.slice(1)),Vn=jn.next();!Vn.done;Vn=jn.next())Hn=Vn.value,Hn.p.reject(new Bs(2,7,7003,void 0));gn.g&&bn.push(gn.g.destroy()),gn.m&&bn.push(gn.m.destroy());for(Xn in gn.o)bn.push(gn.o[Xn].destroy());return Qn(ns,Promise.all(bn),2)}gn.u&&(gn.u.release(),gn.u=null),gn.l&&(gn.l.removeAttribute("src"),gn.l.load(),gn.l=null),gn.G=null,gn.j=null,gn.g=null,gn.m=null,gn.h={},gn.o={},gn.s=null,gn.i={},gn.F=null,ms(ns)})}Sn.init=function(gn,bn,Cn){Cn=Cn===void 0?!1:Cn;var In=this,Rn,jn,Vn,Hn,Xn,ns,us,ps;return hs(function(fs){if(fs.g==1)return Rn=tl,Qn(fs,In.J,2);for(In.B=Cn,jn={},Vn=Dn(gn.keys()),Hn=Vn.next();!Hn.done;jn={na:jn.na},Hn=Vn.next())if(jn.na=Hn.value,Xn=gn.get(jn.na),ns=_h(Xn.mimeType,Xn.codecs),jn.na==Rn.X)Uv(In,ns,Cn);else{!bn&&Fu(ns)||!rv(ns,jn.na)||(In.o[jn.na]=new XE(ns),ns=N0(jn.na,ns)),us=ns+In.G.sourceBufferExtraFeatures,ll(In.D),ps=void 0;try{ps=In.j.addSourceBuffer(us)}catch(vs){throw new Bs(2,3,3015,vs,"The mediaSource_ status was"+In.j.readyState+"expected 'open'")}In.u.C(ps,"error",function(vs){return function(){In.i[vs.na][0].p.reject(new Bs(2,3,3014,In.l.error?In.l.error.code:0))}}(jn)),In.u.C(ps,"updateend",function(vs){return function(){return Z_(In,vs.na)}}(jn)),In.h[jn.na]=ps,In.L[jn.na]=ns,In.i[jn.na]=[],In.P[jn.na]=!!Xn.drmInfos.length}ms(fs)})},Sn.configure=function(gn){this.G=gn};function Uv(gn,bn,Cn){gn.g||(gn.g=new Kp(gn.m));var In=gn.g;gn=gn.H,bn=="application/cea-608"||bn=="application/cea-708"?In.i=null:(In.i=(0,_c[bn])(),In.i.setSequenceMode?In.i.setSequenceMode(Cn):Tu('Text parsers should have a "setSequenceMode" method!'),In.u=gn)}function Lx(gn){return gn.j?gn.j.readyState=="ended":!0}function nI(gn,bn){return bn==Zu?gn.g.g:TS(p_(gn,bn))}function Uk(gn,bn){return bn==Zu?gn.g.h:Mk(p_(gn,bn))}function BM(gn,bn,Cn){return bn==Zu?(gn=gn.g,gn.h==null||gn.h<Cn?0:gn.h-Math.max(Cn,gn.g)):(gn=p_(gn,bn),Km(gn,Cn))}Sn.Ma=function(){var gn={total:rl(this.l.buffered),audio:rl(p_(this,"audio")),video:rl(p_(this,"video")),text:[]};if(this.g){var bn=this.g.g,Cn=this.g.h;bn!=null&&Cn!=null&&gn.text.push({start:bn,end:Cn})}return gn};function p_(gn,bn){try{return gn.h[bn].buffered}catch{return null}}function iI(gn,bn,Cn,In,Rn,jn,Vn){jn=jn===void 0?!1:jn,Vn=Vn===void 0?!1:Vn;var Hn,Xn,ns,us,ps,fs,vs,Is,Ls,Cs,Ms,Zs,Fs,Ws,Gs,eu,au,du,pu,bu,Uu,Bu,al;return hs(function(Mu){switch(Mu.g){case 1:if(Hn=tl,bn!=Hn.X){Mu.A(2);break}if(!gn.B){Mu.A(3);break}return Qn(Mu,gn.W,4);case 4:Xn=Mu.h,gn.g.s=Xn;case 3:return Qn(Mu,QE(gn.g,Cn,In?In.startTime:null,In?In.endTime:null),5);case 5:return Mu.return();case 2:if(ns=Pu(Cn),us=gn.L[bn],gn.o[bn]&&(us=gn.o[bn].o),0>Lv(ns)?dy.includes(us)&&(Is=aE(ns),Is.length&&In&&(Ls={cueTime:In.startTime,data:ns,frames:Is,dts:In.startTime,pts:In.startTime},gn.V([Ls],0,In.endTime))):(ps=new oE().parse(ns),fs=In.startTime-(ps.getStartTime()[bn]||0),vs=UM(ps),vs.length&&gn.V(vs,fs,In?In.endTime:null)),!gn.o[bn]){Rn&&bn==Hn.va&&(gn.g||Uv(gn,"application/cea-608",gn.B),gn.s||(gn.s=new Px(us)),In?(Cs=Ox(gn.s,Cn),Cs.length&&(Ms=gn.h[Hn.va].timestampOffset,n_(gn.g,Cs,In.startTime,In.endTime,Ms))):gn.s.init(Cn)),Mu.A(6);break}return jn&&gn.o[bn].g.resetCaptions(),Qn(Mu,RT(gn.o[bn],Cn),7);case 7:Zs=Mu.h,gn.g||Uv(gn,"application/cea-608",gn.B),Zs.captions&&Zs.captions.length&&(Fs=gn.h[Hn.va].timestampOffset,Ws=Ny(Zs.captions),n_(gn.g,Ws,In?In.startTime:null,In?In.endTime:null,Fs)),Cn=Zs.data;case 6:if(Cn=Bx(gn,Cn,In?In.startTime:null,bn),Gs=gn.h[bn],eu=Vx,!gn.B||Gs.mode==eu||!In){Mu.A(8);break}if(au=gn.j.duration,du=bn==Hn.va||!(Hn.va in gn.h),!du){Mu.A(9);break}return pu=[Gs.appendWindowStart,Gs.appendWindowEnd],Gs.appendWindowStart=0,Gs.appendWindowEnd=1/0,bu=Gs.timestampOffset,Gs.timestampOffset=0,Qn(Mu,sm(gn,bn,function(){return oI(gn,bn,Cn)}),10);case 10:return Qn(Mu,sm(gn,bn,function(){return xS(gn,bn)}),11);case 11:return Gs.timestampOffset=bu,Gs.appendWindowStart=pu[0],Gs.appendWindowEnd=pu[1],Uu=TS(p_(gn,bn)),Bu=(In.startTime||0)-(Uu||0),gn.W.resolve(Bu),Qn(Mu,sm(gn,bn,function(){return jv(gn,bn,0,au)}),12);case 12:if(bn!=Hn.va){Mu.A(9);break}return Qn(Mu,sm(gn,bn,function(){gn.l.currentTime-=.001,Z_(gn,bn)}),9);case 9:return Gs.mode=eu,Qn(Mu,gn.Aa(au),8);case 8:return In&&gn.B&&bn!=Hn.X&&(jn||Vn)&&(al=In.startTime,sm(gn,bn,function(){return xS(gn,bn)}),sm(gn,bn,function(){return jx(gn,bn,al)})),Qn(Mu,sm(gn,bn,function(){oI(gn,bn,Cn)}),16);case 16:ms(Mu)}})}function VM(gn,bn){var Cn=Uk(gn,"video")||0;ZE(gn.g,bn,Cn)}function $S(gn){gn.g&&ZE(gn.g,"",0)}Sn.remove=function(gn,bn,Cn){var In=this,Rn;return hs(function(jn){return Rn=tl,gn==Rn.X?Qn(jn,In.g.remove(bn,Cn),0):Qn(jn,sm(In,gn,function(){return jv(In,gn,bn,Cn)}),0)})};function Ux(gn,bn){var Cn;return hs(function(In){return Cn=tl,bn==Cn.X?gn.g?Qn(In,gn.g.remove(0,1/0),0):In.return():Qn(In,sm(gn,bn,function(){return jv(gn,bn,0,gn.j.duration)}),0)})}Sn.flush=function(gn){var bn=this,Cn;return hs(function(In){return Cn=tl,gn==Cn.X?In.return():Qn(In,sm(bn,gn,function(){bn.l.currentTime-=.001,Z_(bn,gn)}),0)})};function aI(gn,bn,Cn,In,Rn,jn){var Vn;return hs(function(Hn){return Vn=tl,bn==Vn.X?(jn||(gn.g.s=Cn),km(gn.g,In,Rn),Hn.return()):Qn(Hn,Promise.all([sm(gn,bn,function(){return xS(gn,bn)}),jn?Promise.resolve():sm(gn,bn,function(){return jx(gn,bn,Cn)}),sm(gn,bn,function(){gn.h[bn].appendWindowStart=0,gn.h[bn].appendWindowEnd=Rn,gn.h[bn].appendWindowStart=In,Z_(gn,bn)})]),0)})}function bS(gn,bn,Cn){var In;return hs(function(Rn){return In=tl,bn==In.X?Rn.return():(sm(gn,bn,function(){return xS(gn,bn)}),Qn(Rn,sm(gn,bn,function(){return jx(gn,bn,Cn)}),0))})}Sn.endOfStream=function(gn){var bn=this;return hs(function(Cn){return Qn(Cn,sI(bn,function(){Lx(bn)||bn.j.readyState==="closed"||(gn?bn.j.endOfStream(gn):bn.j.endOfStream())}),0)})},Sn.Aa=function(gn){var bn=this;return hs(function(Cn){return Qn(Cn,sI(bn,function(){if(gn<bn.j.duration)for(var In in bn.h){var Rn={start:function(){},p:new bl};bn.i[In].unshift(Rn)}bn.j.duration=gn}),0)})},Sn.getDuration=function(){return this.j.duration};function oI(gn,bn,Cn){if(bn=="video"&&gn.F){var In=gn.F;In.g&&In.g.appendBuffer(Cn,"video",In.i)}gn.h[bn].appendBuffer(Cn)}function jv(gn,bn,Cn,In){In<=Cn?Z_(gn,bn):gn.h[bn].remove(Cn,In)}function xS(gn,bn){var Cn=gn.h[bn].appendWindowStart,In=gn.h[bn].appendWindowEnd;gn.h[bn].abort(),gn.h[bn].appendWindowStart=Cn,gn.h[bn].appendWindowEnd=In,Z_(gn,bn)}function jx(gn,bn,Cn){0>Cn&&(Cn+=.001),gn.h[bn].timestampOffset=Cn,Z_(gn,bn)}function Z_(gn,bn){var Cn=gn.i[bn][0];Cn&&(Cn.p.resolve(),Fk(gn,bn))}function sm(gn,bn,Cn){return ll(gn.D),Cn={start:Cn,p:new bl},gn.i[bn].push(Cn),gn.i[bn].length==1&&Fx(gn,bn),Cn.p}function sI(gn,bn){var Cn,In,Rn,jn,Vn,Hn;return hs(function(Xn){switch(Xn.g){case 1:ll(gn.D),Cn=[],In={};for(Rn in gn.h)In.Ub=new bl,jn={start:function(ns){return function(){return ns.Ub.resolve()}}(In),p:In.Ub},gn.i[Rn].push(jn),Cn.push(In.Ub),gn.i[Rn].length==1&&jn.start(),In={Ub:In.Ub};return Ts(Xn,2),Qn(Xn,Promise.all(Cn),4);case 4:ys(Xn,3);break;case 2:throw Vn=_s(Xn),Vn;case 3:try{bn()}catch(ns){throw new Bs(2,3,3015,ns)}finally{for(Hn in gn.h)Fk(gn,Hn)}ms(Xn)}})}function Fk(gn,bn){gn.i[bn].shift(),Fx(gn,bn)}function Fx(gn,bn){var Cn=gn.i[bn][0];if(Cn)try{Cn.start()}catch(In){In.name=="QuotaExceededError"?Cn.p.reject(new Bs(2,3,3017,bn)):Cn.p.reject(new Bs(2,3,3015,In)),Fk(gn,bn)}}function Bx(gn,bn,Cn,In){var Rn=gn.P[In];return Cn==null&&Rn&&(Ep()||Um())&&gn.L[In].split(";")[0].split("/")[1]=="mp4"&&(bn=OM(bn)),bn}var uE=pn.URL.createObjectURL,Vx="sequence",dy=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function $u(gn,bn,Cn){this.i=gn,this.m=bn,this.o=this.j=1/0,this.g=1,this.h=this.l=null,this.s=0,this.u=!0,this.B=0,this.D=Cn===void 0?!0:Cn,this.F=0,this.G=!1}Sn=$u.prototype,Sn.getDuration=function(){return this.j},Sn.Jf=function(){return this.g},Sn.We=function(gn){this.i=gn},Sn.Aa=function(gn){this.j=gn},Sn.Of=function(){return this.i},Sn.Ue=function(gn){this.s=gn},Sn.yc=function(gn){this.u=gn},Sn.me=function(gn){this.o=gn},Sn.Ve=function(gn){this.m=gn},Sn.Cf=function(){return this.m},Sn.Ib=function(gn){if(gn.length!=0){var bn=gn[0].startTime,Cn=gn[0].endTime,In=(Date.now()+this.s)/1e3;gn=Dn(gn);for(var Rn=gn.next();!Rn.done;Rn=gn.next())Rn=Rn.value,In<Rn.startTime||(bn=Math.min(bn,Rn.startTime),Cn=Math.max(Cn,Rn.endTime),this.g=Math.max(this.g,Rn.endTime-Rn.startTime));this.Td(bn),this.h=Math.max(this.h,Cn),this.i!=null&&this.D&&!this.G&&(this.i=In-this.h-this.g)}},Sn.Md=function(){this.G=!0},Sn.Td=function(gn){this.l=this.l==null?gn:Math.min(this.l,gn)},Sn.Sd=function(gn){this.g=Math.max(this.g,gn)},Sn.offset=function(gn){this.l!=null&&(this.l+=gn),this.h!=null&&(this.h+=gn)},Sn.U=function(){return this.j==1/0&&!this.u},Sn.jb=function(){return this.j!=1/0&&!this.u},Sn.Oa=function(){return Math.max(this.B,this.gb()-this.o)},Sn.Ye=function(gn){this.B=gn},Sn.gb=function(){return this.U()||this.jb()?Math.min(Math.max(0,(Date.now()+this.s)/1e3-this.g-this.i)+this.F,this.j):this.h?Math.min(this.h,this.j):this.j},Sn.kc=function(gn){var bn=Math.max(this.l,this.B);return this.o==1/0?Math.ceil(1e3*bn)/1e3:Math.max(bn,Math.min(this.gb()-this.o+gn,this.Na()))},Sn.Db=function(){return this.kc(0)},Sn.Na=function(){return Math.max(0,this.gb()-(this.U()||this.jb()?this.m:0))},Sn.cf=function(){return!(this.i==null||this.h!=null&&this.D)},Sn.Te=function(gn){this.F=gn},Ys("shaka.media.PresentationTimeline",$u),$u.prototype.setAvailabilityTimeOffset=$u.prototype.Te,$u.prototype.usingPresentationStartTime=$u.prototype.cf,$u.prototype.getSeekRangeEnd=$u.prototype.Na,$u.prototype.getSeekRangeStart=$u.prototype.Db,$u.prototype.getSafeSeekRangeStart=$u.prototype.kc,$u.prototype.getSegmentAvailabilityEnd=$u.prototype.gb,$u.prototype.setUserSeekStart=$u.prototype.Ye,$u.prototype.getSegmentAvailabilityStart=$u.prototype.Oa,$u.prototype.isInProgress=$u.prototype.jb,$u.prototype.isLive=$u.prototype.U,$u.prototype.offset=$u.prototype.offset,$u.prototype.notifyMaxSegmentDuration=$u.prototype.Sd,$u.prototype.notifyMinSegmentStartTime=$u.prototype.Td,$u.prototype.lockStartTime=$u.prototype.Md,$u.prototype.notifySegments=$u.prototype.Ib,$u.prototype.getDelay=$u.prototype.Cf,$u.prototype.setDelay=$u.prototype.Ve,$u.prototype.setSegmentAvailabilityDuration=$u.prototype.me,$u.prototype.setStatic=$u.prototype.yc,$u.prototype.setClockOffset=$u.prototype.Ue,$u.prototype.getPresentationStartTime=$u.prototype.Of,$u.prototype.setDuration=$u.prototype.Aa,$u.prototype.setPresentationStartTime=$u.prototype.We,$u.prototype.getMaxSegmentDuration=$u.prototype.Jf,$u.prototype.getDuration=$u.prototype.getDuration;function Gx(gn,bn,Cn){this.l=Cn,this.j=gn,this.s=lI(gn),this.g=gn.g.currentTime,this.m=Date.now()/1e3,this.h=!1,this.o=0,this.u=bn,this.i=function(){}}Gx.prototype.release=function(){this.l=this.j=null,this.i=function(){}};function zx(gn,bn){gn.i=bn}function uI(gn){this.g=gn}function lI(gn){if(gn.g.paused||gn.g.playbackRate==0||gn.g.buffered.length==0)var bn=!1;else e:{bn=gn.g.currentTime,gn=Dn(rl(gn.g.buffered));for(var Cn=gn.next();!Cn.done;Cn=gn.next())if(Cn=Cn.value,!(bn<Cn.start-.1||bn>Cn.end-.5)){bn=!0;break e}bn=!1}return bn}function CS(gn,bn,Cn,In,Rn){var jn=this;this.o=Rn,this.g=gn,this.s=bn,this.D=Cn,this.i=new Ul,this.m=!1,this.B=gn.readyState,this.u=0,this.h=In,this.l=!1,this.i.C(gn,"waiting",function(){return Hx(jn)}),this.j=new Hu(function(){Hx(jn)}).Ca(.25)}CS.prototype.release=function(){this.i&&(this.i.release(),this.i=null),this.j!=null&&(this.j.stop(),this.j=null),this.h&&(this.h.release(),this.h=null),this.g=this.s=this.o=null},CS.prototype.Wd=function(){this.l=!0,Hx(this)};function Hx(gn){if(gn.g.readyState!=0){if(gn.g.seeking){if(!gn.m)return}else gn.m=!1;if(!gn.g.paused||gn.g.currentTime==0&&(gn.g.autoplay||gn.g.currentTime!=0)){gn.g.readyState!=gn.B&&(gn.B=gn.g.readyState);var bn;if(!(bn=!gn.h)){bn=gn.h;var Cn=bn.j,In=lI(Cn),Rn=Cn.g.currentTime,jn=Date.now()/1e3;(bn.g!=Rn||bn.s!=In)&&(bn.m=jn,bn.g=Rn,bn.s=In,bn.h=!1),Rn=jn-bn.m,(In=Rn>=bn.u&&In&&!bn.h)&&(bn.i(bn.g,Rn),bn.h=!0,bn.g=Cn.g.currentTime,bn.o++,bn.l(new Ju("stalldetected"))),bn=!In}bn&&(bn=gn.g.currentTime,Cn=gn.g.buffered,In=LM(Cn,bn,gn.D.gapDetectionThreshold),In==null||In==0&&!gn.l||(Rn=Cn.start(In),Rn>=gn.s.Na()||.001>Rn-bn||(In!=0&&Cn.end(In-1),gn.g.currentTime=Rn,gn.u++,gn.o(new Ju("gapjumped")))))}}}function Gy(gn,bn,Cn,In){bn==HTMLMediaElement.HAVE_NOTHING||gn.readyState>=bn?In():(bn=Gu.value().get(bn),Cn.ia(gn,bn,In))}var Gu=new Dp(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function Kx(gn,bn,Cn){var In=this;this.g=gn,this.l=bn,this.j=Cn,this.m=!1,this.h=new Ul,this.i=new Vk(gn),Gy(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){qx(In,In.j)})}Kx.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i!=null&&(this.i.release(),this.i=null),this.l=function(){},this.g=null};function Wx(gn){return gn.m?gn.g.currentTime:gn.j}function cI(gn,bn){0<gn.g.readyState?J_(gn.i,bn):Gy(gn.g,HTMLMediaElement.HAVE_METADATA,gn.h,function(){qx(gn,gn.j)})}function qx(gn,bn){.001>Math.abs(gn.g.currentTime-bn)?Bk(gn):(gn.h.ia(gn.g,"seeking",function(){Bk(gn)}),J_(gn.i,gn.g.currentTime&&gn.g.currentTime!=0?gn.g.currentTime:bn))}function Bk(gn){gn.m=!0,gn.h.C(gn.g,"seeking",function(){return gn.l()})}function Vk(gn){var bn=this;this.h=gn,this.m=10,this.l=this.j=this.i=0,this.g=new Hu(function(){0>=bn.i||bn.h.currentTime!=bn.j?bn.g.stop():(bn.h.currentTime=bn.l,bn.i--)})}Vk.prototype.release=function(){this.g&&(this.g.stop(),this.g=null),this.h=null};function J_(gn,bn){gn.j=gn.h.currentTime,gn.l=bn,gn.i=gn.m,gn.h.currentTime=bn,gn.g.Ca(.1)}function dI(gn){this.g=gn,this.j=!1,this.h=null,this.i=new Ul}Sn=dI.prototype,Sn.yd=function(){function gn(){bn.h==null||bn.h==0?bn.j=!0:(bn.i.ia(bn.g,"seeking",function(){bn.j=!0}),bn.g.currentTime=Math.max(0,bn.g.currentTime+bn.h))}var bn=this;Gy(this.g,HTMLMediaElement.HAVE_CURRENT_DATA,this.i,function(){gn()})},Sn.release=function(){this.i&&(this.i.release(),this.i=null),this.g=null},Sn.zd=function(gn){this.h=this.j?this.h:gn},Sn.Ic=function(){return(this.j?this.g.currentTime:this.h)||0},Sn.ue=function(){return 0},Sn.te=function(){return 0},Sn.Ne=function(){};function Yx(gn,bn,Cn,In,Rn,jn){var Vn=this;this.i=gn,this.g=bn.presentationTimeline,this.B=bn.minBufferTime||0,this.l=Cn,this.u=Rn,this.s=null,this.o=fI(gn,Cn,jn),this.j=new CS(gn,bn.presentationTimeline,Cn,this.o,jn),this.h=new Kx(gn,function(){e:{var Hn=Vn.j;Hn.m=!0,Hn.l=!1;var Xn=Wx(Vn.h);if(Hn=Zx(Vn,Xn),.001<Math.abs(Hn-Xn)&&(Xn=Date.now()/1e3,!Vn.s||Vn.s<Xn-1)){Vn.s=Xn,cI(Vn.h,Hn),Hn=void 0;break e}Vn.u(),Hn=void 0}return Hn},Xx(this,In)),this.m=new Hu(function(){if(Vn.i.readyState!=0&&!Vn.i.paused){var Hn=Wx(Vn.h),Xn=Vn.g.Db(),ns=Vn.g.Na();3>ns-Xn&&(Xn=ns-3),Hn<Xn&&(Hn=Zx(Vn,Hn),Vn.i.currentTime=Hn)}})}Sn=Yx.prototype,Sn.yd=function(){this.m.Ca(.25)},Sn.release=function(){this.h&&(this.h.release(),this.h=null),this.j&&(this.j.release(),this.j=null),this.m&&(this.m.stop(),this.m=null),this.i=this.h=this.g=this.l=null,this.u=function(){}},Sn.zd=function(gn){cI(this.h,gn)},Sn.Ic=function(){var gn=Wx(this.h);return 0<this.i.readyState&&!this.i.paused?Jx(this,gn):gn},Sn.ue=function(){return this.o?this.o.o:0},Sn.te=function(){return this.j.u};function Xx(gn,bn){return bn==null?bn=1/0>gn.g.getDuration()?gn.g.Db():gn.g.Na():0>bn&&(bn=gn.g.Na()+bn),Qx(gn,Jx(gn,bn))}Sn.Ne=function(){this.j.Wd()};function Qx(gn,bn){var Cn=gn.g.getDuration();return bn>=Cn?Cn-gn.l.durationBackoff:bn}function Zx(gn,bn){var Cn=Math.max(gn.B,gn.l.rebufferingGoal),In=gn.l.safeSeekOffset,Rn=gn.g.Db(),jn=gn.g.Na(),Vn=gn.g.getDuration();3>jn-Rn&&(Rn=jn-3);var Hn=gn.g.kc(Cn),Xn=gn.g.kc(In);return Cn=gn.g.kc(Cn+In),bn>=Vn?Qx(gn,bn):bn>jn?jn:bn<Rn?Rx(gn.i.buffered,Xn)?Xn:Cn:bn>=Hn||Rx(gn.i.buffered,bn)?bn:Cn}function Jx(gn,bn){var Cn=gn.g.Db();return bn<Cn?Cn:(gn=gn.g.Na(),bn>gn?gn:bn)}function fI(gn,bn,Cn){if(!bn.stallEnabled)return null;var In=bn.stallSkip;return bn=new Gx(new uI(gn),bn.stallThreshold,Cn),zx(bn,function(){In?gn.currentTime+=In:(gn.pause(),gn.play())}),bn}function yl(gn){this.g=gn,this.h=null,this.i=0,this.j=!1}Sn=yl.prototype,Sn.release=function(){this.j||(this.g=[],this.h&&this.h.stop(),this.h=null)},Sn.bg=function(){this.j=!0};function pI(gn,bn){gn=Dn(gn.g);for(var Cn=gn.next();!Cn.done;Cn=gn.next())bn(Cn.value)}Sn.find=function(gn){for(var bn=this.g.length-1,Cn=bn;0<=Cn;--Cn){var In=this.g[Cn],Rn=Cn<bn?this.g[Cn+1].startTime:In.endTime;if(gn>=In.startTime&&gn<Rn)return Cn+this.i}return this.g.length&&gn<this.g[0].startTime?this.i:null},Sn.get=function(gn){return this.g.length==0?null:(gn-=this.i,0>gn||gn>=this.g.length?null:this.g[gn])},Sn.offset=function(gn){if(!this.j)for(var bn=Dn(this.g),Cn=bn.next();!Cn.done;Cn=bn.next())Cn.value.offset(gn)},Sn.pc=function(gn){if(!this.j&&gn.length){var bn=Math.round(1e3*gn[0].startTime)/1e3;this.g=this.g.filter(function(Cn){return Math.round(1e3*Cn.startTime)/1e3<bn}),this.g.push.apply(this.g,Kn(gn))}},Sn.Hb=function(gn,bn){var Cn=this;gn=gn.filter(function(In){return In.endTime>bn&&(Cn.g.length==0||In.endTime>Cn.g[0].startTime)}),this.pc(gn),this.eb(bn)},Sn.eb=function(gn){if(!this.j){var bn=this.g.length;this.g=this.g.filter(function(Cn){return Cn.endTime>gn}),this.i+=bn-this.g.length}},Sn.Wa=function(gn,bn,Cn){if(Cn=Cn===void 0?!1:Cn,!this.j){for(;this.g.length&&this.g[this.g.length-1].startTime>=bn;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=gn;)this.g.shift(),Cn||this.i++;this.g.length!=0&&(gn=this.g[this.g.length-1],this.g[this.g.length-1]=new cl(gn.startTime,bn,gn.u,gn.Ba,gn.la,gn.h,gn.timestampOffset,gn.appendWindowStart,gn.appendWindowEnd,gn.i,gn.tilesLayout,gn.s,gn.g,gn.status,gn.m),this.g[this.g.length-1].j=gn.j)}},Sn.fd=function(gn,bn){var Cn=this;this.j||(this.h&&this.h.stop(),this.h=new Hu(function(){var In=bn();In?Cn.g.push.apply(Cn.g,Kn(In)):(Cn.h.stop(),Cn.h=null)}),this.h.Ca(gn))},yl.prototype[Symbol.iterator]=function(){return this.Cb(0)},yl.prototype.Cb=function(gn){var bn=this.find(gn);if(bn==null)return null;bn--;var Cn=this.get(bn+1),In=-1;if(Cn&&0<Cn.i.length)for(var Rn=Cn.i.length-1;0<=Rn;--Rn){var jn=Cn.i[Rn];if(gn>=jn.startTime&&gn<jn.endTime){bn++,In=Rn-1;break}}return new zy(this,bn,In)};function Gk(gn,bn,Cn){return new yl([new cl(gn,gn+bn,function(){return Cn},0,null,null,gn,gn,gn+bn)])}Ys("shaka.media.SegmentIndex",yl),yl.forSingleSegment=Gk,yl.prototype.getIteratorForTime=yl.prototype.Cb,yl.prototype.updateEvery=yl.prototype.fd,yl.prototype.fit=yl.prototype.Wa,yl.prototype.evict=yl.prototype.eb,yl.prototype.mergeAndEvict=yl.prototype.Hb,yl.prototype.offset=yl.prototype.offset,yl.prototype.get=yl.prototype.get,yl.prototype.find=yl.prototype.find,yl.prototype.markImmutable=yl.prototype.bg,yl.prototype.release=yl.prototype.release;function zy(gn,bn,Cn){this.i=gn,this.g=bn,this.h=Cn}zy.prototype.uf=function(){return this.g},zy.prototype.current=function(){var gn=this.i.get(this.g);return gn&&0<gn.i.length&&gn.ya().length&&this.h>=gn.i.length&&(this.g++,this.h=0,gn=this.i.get(this.g)),gn&&0<gn.i.length?gn.i[this.h]:gn},zy.prototype.next=function(){var gn=this.i.get(this.g);return gn&&0<gn.i.length?(this.h++,gn.ya().length&&this.h==gn.i.length&&(this.g++,this.h=0)):(this.g++,this.h=0),gn=this.current(),{value:gn,done:!gn}},Ys("shaka.media.SegmentIterator",zy),zy.prototype.next=zy.prototype.next,zy.prototype.current=zy.prototype.current,zy.prototype.currentPosition=zy.prototype.uf;function _d(){yl.call(this,[]),this.l=[]}as(_d,yl),Sn=_d.prototype,Sn.clone=function(){var gn=new _d;return gn.l=this.l.slice(),gn},Sn.release=function(){for(var gn=Dn(this.l),bn=gn.next();!bn.done;bn=gn.next())bn.value.release();this.l=[]},Sn.find=function(gn){for(var bn=0,Cn=Dn(this.l),In=Cn.next();!In.done;In=Cn.next()){In=In.value;var Rn=In.find(gn);if(Rn!=null)return Rn+bn;bn+=In.i+In.g.length}return null},Sn.get=function(gn){for(var bn=0,Cn=Dn(this.l),In=Cn.next();!In.done;In=Cn.next()){In=In.value;var Rn=In.get(gn-bn);if(Rn)return Rn;bn+=In.i+In.g.length}return null},Sn.offset=function(){},Sn.pc=function(){},Sn.eb=function(){},Sn.Hb=function(){},Sn.Wa=function(){},Sn.fd=function(){},Ys("shaka.media.MetaSegmentIndex",_d),_d.prototype.updateEvery=_d.prototype.fd,_d.prototype.fit=_d.prototype.Wa,_d.prototype.mergeAndEvict=_d.prototype.Hb,_d.prototype.evict=_d.prototype.eb,_d.prototype.merge=_d.prototype.pc,_d.prototype.offset=_d.prototype.offset,_d.prototype.get=_d.prototype.get,_d.prototype.find=_d.prototype.find,_d.prototype.release=_d.prototype.release;function lE(gn){var bn=this;this.g=gn,this.j=!1,this.i=this.g.Tc(),this.h=new Hu(function(){bn.g.Me(.25*bn.i)})}lE.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null},lE.prototype.set=function(gn){this.i=gn,eC(this)},lE.prototype.Pc=function(){return this.g.Pc()};function eC(gn){gn.h.stop();var bn=gn.j?0:gn.i;if(0<=bn)try{gn.g.Tc()!=bn&&gn.g.le(bn);return}catch{}gn.h.Ca(.25),gn.g.Tc()!=0&&gn.g.le(0)}function hI(gn){var bn=this;this.h=gn,this.g=new Set,this.i=new Hu(function(){vl(bn,!1)}).Ca(.25)}hI.prototype.release=function(){this.i.stop();for(var gn=Dn(this.g),bn=gn.next();!bn.done;bn=gn.next())bn.value.release();this.g.clear()};function vl(gn,bn){for(var Cn=Dn(gn.g),In=Cn.next();!In.done;In=Cn.next())In.value.j(gn.h.currentTime,bn)}function zk(gn){hl.call(this),this.g=new Map,this.h=gn}as(zk,hl),zk.prototype.release=function(){this.g.clear(),hl.prototype.release.call(this)};function tC(gn,bn){var Cn=gn.g.get(bn);return Cn||(Cn={rc:[],Ae:null,contentType:bn},gn.g.set(bn,Cn)),Cn}function Hy(gn,bn,Cn){var In=tC(gn,bn.contentType);ip(gn,In),gn={Od:bn,position:Cn},In=In.rc,bn=In.findIndex(function(Rn){return Rn.position>=Cn}),0<=bn?In.splice(bn,In[bn].position==Cn?1:0,gn):In.push(gn)}zk.prototype.j=function(gn){for(var bn=Dn(this.g.values()),Cn=bn.next();!Cn.done;Cn=bn.next()){Cn=Cn.value;e:{for(var In=Cn.rc,Rn=In.length-1;0<=Rn;Rn--){var jn=In[Rn];if(jn.position<=gn){In=jn.Od;break e}}In=null}if((Rn=In)&&(Rn=Cn.Ae,Rn=!(Rn===In||Rn&&In&&Rn.bandwidth==In.bandwidth&&Rn.audioSamplingRate==In.audioSamplingRate&&Rn.codecs==In.codecs&&Rn.contentType==In.contentType&&Rn.frameRate==In.frameRate&&Rn.height==In.height&&Rn.mimeType==In.mimeType&&Rn.channelsCount==In.channelsCount&&Rn.pixelAspectRatio==In.pixelAspectRatio&&Rn.width==In.width)),Rn)e:{if(Rn=gn,jn=In.contentType,(jn=this.h()[jn])&&0<jn.length){var Vn=jn[jn.length-1].end;if(Rn>=jn[0].start&&Rn<Vn){Rn=!0;break e}}Rn=!1}Rn&&(Cn.Ae=In,JSON.stringify(In),Cn=new Ju("qualitychange",new Map([["quality",In],["position",gn]])),this.dispatchEvent(Cn))}};function ip(gn,bn){if((gn=gn.h()[bn.contentType])&&0<gn.length){var Cn=gn[0].start,In=gn[gn.length-1].end,Rn=bn.rc;bn.rc=Rn.filter(function(jn,Vn){return!(jn.position<=Cn&&Vn+1<Rn.length&&Rn[Vn+1].position<=Cn||jn.position>=In)})}else bn.rc=[]}function e0(gn){hl.call(this);var bn=this;this.g=new Set,this.i=gn,this.h=new Hu(function(){for(var Cn=bn.i(),In=Dn(bn.g),Rn=In.next();!Rn.done;Rn=In.next())Rn=Rn.value,Rn.endTime<Cn.start&&(bn.g.delete(Rn),Rn=new Ju("regionremove",new Map([["region",Rn]])),bn.dispatchEvent(Rn))}).Ca(2)}as(e0,hl),e0.prototype.release=function(){this.g.clear(),this.h.stop(),hl.prototype.release.call(this)};function wS(gn){hl.call(this);var bn=this;this.i=gn,this.g=new Map,this.l=[{rb:null,qb:Fv,ib:function(Cn,In){return h_(bn,"enter",Cn,In)}},{rb:cE,qb:Fv,ib:function(Cn,In){return h_(bn,"enter",Cn,In)}},{rb:AS,qb:Fv,ib:function(Cn,In){return h_(bn,"enter",Cn,In)}},{rb:Fv,qb:cE,ib:function(Cn,In){return h_(bn,"exit",Cn,In)}},{rb:Fv,qb:AS,ib:function(Cn,In){return h_(bn,"exit",Cn,In)}},{rb:cE,qb:AS,ib:function(Cn,In){return h_(bn,"skip",Cn,In)}},{rb:AS,qb:cE,ib:function(Cn,In){return h_(bn,"skip",Cn,In)}}],this.h=new Ul,this.h.C(this.i,"regionremove",function(Cn){bn.g.delete(Cn.region)})}as(wS,hl),wS.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,hl.prototype.release.call(this)},wS.prototype.j=function(gn,bn){for(var Cn=Dn(this.i.g),In=Cn.next();!In.done;In=Cn.next()){In=In.value;var Rn=this.g.get(In),jn=gn<In.startTime?cE:gn>In.endTime?AS:Fv;this.g.set(In,jn);for(var Vn=Dn(this.l),Hn=Vn.next();!Hn.done;Hn=Vn.next())Hn=Hn.value,Hn.rb==Rn&&Hn.qb==jn&&Hn.ib(In,bn)}};function h_(gn,bn,Cn,In){bn=new Ju(bn,new Map([["region",Cn],["seeking",In]])),gn.dispatchEvent(bn)}var cE=1,Fv=2,AS=3;function rC(gn,bn,Cn,In,Rn){return gn=tm(gn,In,Rn),(bn!=0||Cn!=null)&&(gn.headers.Range=Cn?"bytes="+bn+"-"+Cn:"bytes="+bn+"-"),gn}function mI(gn,bn){var Cn=this;this.g=bn,this.m=gn,this.i=null,this.u=1,this.o=this.l=null,this.F=0,this.D=!1,this.j=new Map,this.B=!1,this.G=null,this.s=!1,this.h=new gm(function(){return nC(Cn)})}Sn=mI.prototype,Sn.destroy=function(){return this.h.destroy()};function nC(gn){var bn,Cn,In,Rn;return hs(function(jn){if(jn.g==1){for(bn=[],Cn=Dn(gn.j.values()),In=Cn.next();!In.done;In=Cn.next())Rn=In.value,IS(Rn),bn.push(SI(Rn));return Qn(jn,Promise.all(bn),2)}gn.j.clear(),gn.g=null,gn.m=null,gn.i=null,ms(jn)})}Sn.configure=function(gn){this.i=gn,this.G=new ix({maxAttempts:Math.max(gn.retryParameters.maxAttempts,2),baseDelay:gn.retryParameters.baseDelay,backoffFactor:gn.retryParameters.backoffFactor,fuzzFactor:gn.retryParameters.fuzzFactor,timeout:0,stallTimeout:0,connectionTimeout:0},!0)},Sn.start=function(){var gn=this;return hs(function(bn){if(bn.g==1)return Qn(bn,zM(gn),2);ll(gn.h),gn.B=!0,ms(bn)})};function Hk(gn,bn){var Cn,In,Rn,jn,Vn,Hn;hs(function(Xn){switch(Xn.g){case 1:return Cn=tl,gn.F++,In=gn.F,Ts(Xn,2),Qn(Xn,Ux(gn.g.N,Cn.X),4);case 4:ys(Xn,3);break;case 2:Rn=_s(Xn),gn.g&&gn.g.onError(Rn);case 3:jn=_h(bn.mimeType,bn.codecs),Uv(gn.g.N,jn,gn.m.sequenceMode),Vn=gn.g.N.m,(Vn.isTextVisible()||gn.i.alwaysStreamText)&&gn.F==In&&(Hn=yI(bn),gn.j.set(Cn.X,Hn),fy(gn,Hn,0)),ms(Xn)}})}function t0(gn){var bn=gn.j.get(Zu);bn&&(IS(bn),SI(bn).catch(function(){}),gn.j.delete(Zu)),gn.o=null}function dE(gn,bn){var Cn=gn.j.get("video");if(Cn){var In=Cn.stream;In&&(bn?(bn=In.trickModeVideo)&&!Cn.ob&&(g_(gn,bn,!1,0,!1),Cn.ob=In):(In=Cn.ob)&&(Cn.ob=null,g_(gn,In,!0,0,!1)))}}function r0(gn,bn,Cn,In,Rn,jn){Cn=Cn===void 0?!1:Cn,In=In===void 0?0:In,Rn=Rn===void 0?!1:Rn,jn=jn===void 0?!1:jn,gn.l=bn,gn.B&&(bn.video&&g_(gn,bn.video,Cn,In,Rn,jn),bn.audio&&g_(gn,bn.audio,Cn,In,Rn,jn))}function m_(gn,bn){hs(function(Cn){if(Cn.g==1)return gn.o=bn,gn.B?bn.segmentIndex?Cn.A(2):Qn(Cn,bn.createSegmentIndex(),2):Cn.return();g_(gn,bn,!0,0,!1),ms(Cn)})}function g_(gn,bn,Cn,In,Rn,jn){var Vn=gn.j.get(bn.type);Vn||bn.type!=Zu?Vn&&(Vn.ob&&(bn.trickModeVideo?(Vn.ob=bn,bn=bn.trickModeVideo):Vn.ob=null),Vn.stream!=bn||Rn)&&(bn.type==Zu&&Uv(gn.g.N,_h(bn.mimeType,bn.codecs),gn.m.sequenceMode),Vn.stream.closeSegmentIndex&&Vn.stream.closeSegmentIndex(),Vn.stream=bn,Vn.aa=null,Vn.ve=!!jn,Cn&&(Vn.ac?Vn.hd=!0:Vn.ra?(Vn.bb=!0,Vn.Nc=In,Vn.hd=!0):(IS(Vn),sC(gn,Vn,!0,In).catch(function(Hn){gn.g&&gn.g.onError(Hn)}))),gI(gn,Vn).catch(function(Hn){gn.g&&gn.g.onError(Hn)})):Hk(gn,bn)}function gI(gn,bn){var Cn,In;return hs(function(Rn){if(Rn.g==1)return bn.ta?(Cn=bn.stream,In=bn.ta,Cn.segmentIndex?Rn.A(2):Qn(Rn,Cn.createSegmentIndex(),2)):Rn.return();if(bn.ta!=In||bn.stream!=Cn)return Rn.return();var jn=gn.g.Sc(),Vn=Uk(gn.g.N,bn.type),Hn=bn.stream.segmentIndex.find(bn.pa?bn.pa.endTime:jn),Xn=Hn==null?null:bn.stream.segmentIndex.get(Hn);Hn=Xn&&Xn.la?Xn.la-Xn.Ba:null,Xn&&!Hn&&(Hn=(Xn.endTime-Xn.getStartTime())*(bn.stream.bandwidth||0)/8),Hn?((Xn=Xn.h)&&(Hn+=(Xn.la?Xn.la-Xn.Ba:null)||0),Xn=gn.g.getBandwidthEstimate(),jn=8*Hn/Xn<(Vn||0)-jn-Math.max(gn.m.minBufferTime||0,gn.i.rebufferingGoal)||bn.ta.h.g>Hn):jn=!1,jn&&bn.ta.abort(),ms(Rn)})}Sn.vc=function(){if(this.g)for(var gn=this.g.Sc(),bn=Dn(this.j.keys()),Cn=bn.next();!Cn.done;Cn=bn.next()){var In=Cn.value;Cn=this.j.get(In),Cn.aa=null;var Rn=this.g.N;if(In==Zu?(Rn=Rn.g,Rn=Rn.g==null||Rn.h==null?!1:gn>=Rn.g&&gn<Rn.h):(Rn=p_(Rn,In),Rn=Rx(Rn,gn)),!Rn){if((Uk(this.g.N,In)!=null||Cn.ra)&&GM(this,Cn),Cn.ta&&(Cn.ta.abort(),Cn.ta=null),In===Zu&&(In=this.g.N,In.s))for(In=In.s.g,In.l=0,In.h=[],In.g=[],Rn=In.i,Rn.i=[],Rn.h=[],Rn.g=0,Cx(In),In=Dn(In.j.values()),Rn=In.next();!Rn.done;Rn=In.next())qA(Rn.value);Cn.vc=!0}}};function GM(gn,bn){bn.ac||bn.bb||(bn.ra?(bn.bb=!0,bn.Nc=0):nI(gn.g.N,bn.type)==null?bn.Ka==null&&fy(gn,bn,0):(IS(bn),sC(gn,bn,!1,0).catch(function(Cn){gn.g&&gn.g.onError(Cn)})))}function zM(gn){var bn,Cn,In,Rn,jn,Vn,Hn,Xn,ns,us;return hs(function(ps){if(ps.g==1){if(bn=tl,!gn.l)throw new Bs(2,5,5006);return Cn=new Map,In=new Set,gn.l.audio&&(Cn.set(bn.Hc,gn.l.audio),In.add(gn.l.audio)),gn.l.video&&(Cn.set(bn.va,gn.l.video),In.add(gn.l.video)),gn.o&&(Cn.set(bn.X,gn.o),In.add(gn.o)),Rn=gn.g.N,jn=gn.i.forceTransmux,Qn(ps,Rn.init(Cn,jn,gn.m.sequenceMode),2)}for(ll(gn.h),gn.updateDuration(),Vn=Dn(Cn.keys()),Hn=Vn.next();!Hn.done;Hn=Vn.next())Xn=Hn.value,ns=Cn.get(Xn),gn.j.has(Xn)||(us=yI(ns),gn.j.set(Xn,us),fy(gn,us,0));ms(ps)})}function yI(gn){return{stream:gn,type:gn.type,aa:null,pa:null,Zc:null,Kd:null,Jd:null,Id:null,ob:null,endOfStream:!1,ra:!1,Ka:null,bb:!1,Nc:0,hd:!1,ac:!1,vc:!0,Rd:!1,be:!1,nc:!1,ta:null}}Sn.updateDuration=function(){var gn=this.m.presentationTimeline.getDuration();1/0>gn?this.g.N.Aa(gn):this.g.N.Aa(Math.pow(2,32))};function vI(gn,bn){var Cn,In,Rn,jn,Vn;return hs(function(Hn){switch(Hn.g){case 1:if(ll(gn.h),bn.ra||bn.Ka==null||bn.ac)return Hn.return();if(bn.Ka=null,!bn.bb){Hn.A(2);break}return Qn(Hn,sC(gn,bn,bn.hd,bn.Nc),3);case 3:return Hn.return();case 2:if(bn.stream.segmentIndex){Hn.A(4);break}return Cn=bn.stream,Qn(Hn,bn.stream.createSegmentIndex(),5);case 5:if(Cn!=bn.stream)return Cn.closeSegmentIndex&&Cn.closeSegmentIndex(),bn.ra||bn.Ka||fy(gn,bn,0),Hn.return();case 4:Ts(Hn,6),In=_I(gn,bn),In!=null&&(fy(gn,bn,In),bn.nc=!1),ys(Hn,7);break;case 6:return Rn=_s(Hn),Qn(Hn,Wk(gn,Rn),8);case 8:return Hn.return();case 7:if(jn=Array.from(gn.j.values()),!gn.B||!jn.every(function(Xn){return Xn.endOfStream})){Hn.A(0);break}return Qn(Hn,gn.g.N.endOfStream(),10);case 10:ll(gn.h),Vn=gn.g.N.getDuration(),Vn!=0&&Vn<gn.m.presentationTimeline.getDuration()&&gn.m.presentationTimeline.Aa(Vn),ms(Hn)}})}function _I(gn,bn){if(aC(bn))return VM(gn.g.N,bn.stream.originalId||""),null;bn.type==Zu&&$S(gn.g.N);var Cn=gn.g.Sc(),In=bn.pa?bn.pa.endTime:Cn,Rn=BM(gn.g.N,bn.type,Cn),jn=Math.max(gn.m.minBufferTime||0,gn.i.rebufferingGoal,gn.i.bufferingGoal)*gn.u,Vn=gn.m.presentationTimeline.getDuration()-In,Hn=Uk(gn.g.N,bn.type);if(1e-6>Vn&&Hn)return bn.endOfStream=!0,bn.type=="video"&&(gn=gn.j.get(Zu))&&aC(gn)&&(gn.endOfStream=!0),null;if(bn.endOfStream=!1,Rn>=jn)return gn.i.updateIntervalSeconds/2;if(Rn=Kk(gn,bn,Cn,Hn),!Rn)return gn.i.updateIntervalSeconds;for(jn=1/0,Vn=Array.from(gn.j.values()),Vn=Dn(Vn),Hn=Vn.next();!Hn.done;Hn=Vn.next())Hn=Hn.value,aC(Hn)||Hn.aa&&!Hn.aa.current()||(jn=Math.min(jn,Hn.pa?Hn.pa.endTime:Cn));return In>=jn+gn.m.presentationTimeline.g?gn.i.updateIntervalSeconds:(fE(gn,bn,Cn,Rn).catch(function(){}),null)}function Kk(gn,bn,Cn,In){if(bn.aa)return bn.aa.current();if(bn.pa||In)return Cn=bn.pa?bn.pa.endTime:In,bn.Rd=!0,bn.aa=bn.stream.segmentIndex.Cb(Cn),bn.aa&&bn.aa.next().value;gn=gn.i.inaccurateManifestTolerance,In=Math.max(Cn-gn,0);var Rn=null;return gn&&(bn.aa=bn.stream.segmentIndex.Cb(In),Rn=bn.aa&&bn.aa.next().value),Rn||(bn.aa=bn.stream.segmentIndex.Cb(Cn),Rn=bn.aa&&bn.aa.next().value),Rn}function fE(gn,bn,Cn,In){var Rn,jn,Vn,Hn,Xn,ns,us,ps,fs,vs,Is,Ls,Cs,Ms,Zs;return hs(function(Fs){switch(Fs.g){case 1:if(Rn=tl,jn=bn.stream,Vn=bn.aa,bn.ra=!0,Ts(Fs,2),In.Eb()==2)throw new Bs(1,1,1011);return Qn(Fs,EI(gn,bn,In),4);case 4:return ll(gn.h),gn.s?Fs.return():(Hn=jn.mimeType=="video/mp4"||jn.mimeType=="audio/mp4",Xn=pn.ReadableStream,gn.i.lowLatencyMode&&Xn&&Hn&&!In.m?(ps=new Uint8Array(0),vs=fs=!1,Is=function(Ws){var Gs,eu,au;return hs(function(du){return fs||(vs=!0,ll(gn.h),gn.s)?du.return():(ps=KM(ps,Ws),Gs=!1,eu=0,new Rl().box("mdat",function(pu){eu=pu.size+pu.start,Gs=!0}).parse(ps,!1,!0),Gs?(au=ps.subarray(0,eu),ps=ps.subarray(eu),Qn(du,iC(gn,bn,Cn,jn,In,au),0)):du.A(0))})},Qn(Fs,oC(gn,bn,In,Is),11)):(ns=oC(gn,bn,In),Qn(Fs,ns,7)));case 7:if(us=Fs.h,ll(gn.h),gn.s)return Fs.return();if(!In.m){Fs.A(8);break}return Qn(Fs,HM(us,In,Vn),9);case 9:us=Fs.h;case 8:return ll(gn.h),bn.bb?(bn.ra=!1,fy(gn,bn,0),Fs.return()):Qn(Fs,iC(gn,bn,Cn,jn,In,us),6);case 11:if(Ls=Fs.h,vs){Fs.A(6);break}return fs=!0,ll(gn.h),gn.s?Fs.return():bn.bb?(bn.ra=!1,fy(gn,bn,0),Fs.return()):Qn(Fs,iC(gn,bn,Cn,jn,In,Ls),6);case 6:if(ll(gn.h),gn.s)return Fs.return();bn.pa=In,Vn.next(),bn.ra=!1,bn.be=!1,Cs=gn.g.N.Ma(),Ms=Cs[bn.type],JSON.stringify(Ms),bn.bb||gn.g.Wd(In.startTime,In.endTime,bn.type),fy(gn,bn,0),ys(Fs,0);break;case 2:if(Zs=_s(Fs),ll(gn.h,Zs),gn.s)return Fs.return();if(bn.ra=!1,Zs.code==7001)bn.ra=!1,IS(bn),fy(gn,bn,0),Fs.A(0);else if(bn.type==Rn.X&&gn.i.ignoreTextStreamFailures)gn.j.delete(Rn.X),Fs.A(0);else if(Zs.code==3017)WM(gn,bn,Zs),Fs.A(0);else return bn.nc=!0,Zs.severity=2,Qn(Fs,Wk(gn,Zs),0)}})}function HM(gn,bn,Cn){var In,Rn,jn,Vn;return hs(function(Hn){if(Hn.g==1)return In=bn.m,In.cryptoKey?Hn.A(2):Qn(Hn,In.fetchKey(),3);if(Rn=In.iv,!Rn)for(Rn=Pu(new ArrayBuffer(16)),jn=In.firstMediaSequenceNumber+Cn.g,Vn=Rn.byteLength-1;0<=Vn;Vn--)Rn[Vn]=jn&255,jn>>=8;return Hn.return(pn.crypto.subtle.decrypt({name:"AES-CBC",iv:Rn},In.cryptoKey,gn))})}function KM(gn,bn){var Cn=new Uint8Array(gn.length+bn.length);return Cn.set(gn),Cn.set(bn,gn.length),Cn}function WM(gn,bn,Cn){if(!Array.from(gn.j.values()).some(function(Rn){return Rn!=bn&&Rn.be})){var In=Math.round(100*gn.u);if(20<In)gn.u-=.2;else if(4<In)gn.u-=.04;else{bn.nc=!0,gn.s=!0,gn.g.onError(Cn);return}bn.be=!0}fy(gn,bn,4)}function EI(gn,bn,Cn){var In,Rn,jn,Vn,Hn,Xn,ns,us;return hs(function(ps){return In=[],Rn=Math.max(0,Cn.appendWindowStart-.1),jn=Cn.appendWindowEnd+.01,Vn=Cn.timestampOffset,(Vn!=bn.Kd||Rn!=bn.Jd||jn!=bn.Id)&&(Hn=function(){var fs;return hs(function(vs){if(vs.g==1)return Ts(vs,2),bn.Jd=Rn,bn.Id=jn,bn.Kd=Vn,Qn(vs,aI(gn.g.N,bn.type,Vn,Rn,jn,gn.m.sequenceMode),4);if(vs.g!=2)return ys(vs,0);throw fs=_s(vs),bn.Jd=null,bn.Id=null,bn.Kd=null,fs})},In.push(Hn())),!Mx(Cn.h,bn.Zc)&&(bn.Zc=Cn.h)&&(Xn=oC(gn,bn,Cn.h),ns=function(){var fs,vs,Is,Ls;return hs(function(Cs){switch(Cs.g){case 1:return Ts(Cs,2),Qn(Cs,Xn,4);case 4:return fs=Cs.h,ll(gn.h),vs=new Rl,vs.box("moov",Gl).box("trak",Gl).box("mdia",Gl).R("mdhd",function(Ms){Ms=ES(Ms.reader||0,Ms.version||0),Cn.h.timescale=Ms.timescale}).parse(fs),Is=bn.stream.closedCaptions&&0<bn.stream.closedCaptions.size,Qn(Cs,gn.g.xe(bn.type,fs),5);case 5:return Qn(Cs,iI(gn.g.N,bn.type,fs,null,Is),6);case 6:ys(Cs,0);break;case 2:throw Ls=_s(Cs),bn.Zc=null,Ls}})},gn.g.eg(Cn.startTime,Cn.h),In.push(ns())),us=bn.pa?bn.pa.j:null,gn.m.sequenceMode?(Cn.j!=us||bn.Rd)&&(bn.Rd=!1,In.push(bS(gn.g.N,bn.type,Cn.startTime))):Cn.j!=us&&In.push(bS(gn.g.N,bn.type,Cn.timestampOffset)),Qn(ps,Promise.all(In),0)})}function iC(gn,bn,Cn,In,Rn,jn){var Vn,Hn,Xn,ns,us,ps;return hs(function(fs){switch(fs.g){case 1:return Vn=In.closedCaptions&&0<In.closedCaptions.size,Xn=In.emsgSchemeIdUris!=null&&0<In.emsgSchemeIdUris.length||gn.i.dispatchAllEmsgBoxes,ns=gn.i.parsePrftBox&&!gn.D,(Xn||ns)&&(Hn=new Rl),Xn&&Hn.R("emsg",function(vs){var Is=In.emsgSchemeIdUris;if(vs.version===0)var Ls=vs.reader.sc(),Cs=vs.reader.sc(),Ms=vs.reader.K(),Zs=vs.reader.K(),Fs=vs.reader.K(),Ws=vs.reader.K(),Gs=Rn.startTime+Zs/Ms;else Ms=vs.reader.K(),Gs=vs.reader.$a()/Ms+Rn.timestampOffset,Zs=Gs-Rn.startTime,Fs=vs.reader.K(),Ws=vs.reader.K(),Ls=vs.reader.sc(),Cs=vs.reader.sc();vs=vs.reader.Za(vs.reader.S.byteLength-vs.reader.Z()),(Is&&Is.includes(Ls)||gn.i.dispatchAllEmsgBoxes)&&(Ls=="urn:mpeg:dash:event:2012"?gn.g.fg():Ls=="https://aomedia.org/emsg/ID3"?(Is=aE(vs),Is.length&&Rn&&gn.g.gg([{cueTime:Rn.startTime,data:vs,frames:Is,dts:Rn.startTime,pts:Rn.startTime}],0,Rn.endTime)):(Is=new Map().set("detail",{startTime:Gs,endTime:Gs+Fs/Ms,schemeIdUri:Ls,value:Cs,timescale:Ms,presentationTimeDelta:Zs,eventDuration:Fs,id:Ws,messageData:vs}),Is=new Ju("emsg",Is),gn.g.onEvent(Is)))}),ns&&Hn.R("prft",function(vs){e:{if(!gn.D&&Rn.h.timescale){vs.reader.K();var Is=vs.reader.K(),Ls=vs.reader.K();if(Is=1e3*Is+Ls/Math.pow(2,32)*1e3,vs.version===0)var Cs=vs.reader.K();else try{Cs=vs.reader.$a()}catch{gn.D=!0,Cs=void 0;break e}vs=new Date(new Date(Date.UTC(1900,0,1,0,0,0)).getTime()+Is).getTime(),Cs=new Map().set("detail",{wallClockTime:vs,programStartDate:new Date(vs-Cs/Rn.h.timescale*1e3)}),Cs=new Ju("prft",Cs),gn.g.onEvent(Cs),gn.D=!0}Cs=void 0}return Cs}),(Xn||ns)&&Hn.parse(jn),Qn(fs,qM(gn,bn,Cn),2);case 2:return ll(gn.h),us=bn.vc,bn.vc=!1,ps=bn.ve,bn.ve=!1,Qn(fs,gn.g.xe(bn.type,jn),3);case 3:return Qn(fs,iI(gn.g.N,bn.type,jn,Rn,Vn,us,ps),4);case 4:ll(gn.h),ms(fs)}})}function qM(gn,bn,Cn){var In,Rn,jn,Vn;return hs(function(Hn){if(Hn.g==1)return In=Math.max(gn.i.bufferBehind,gn.m.presentationTimeline.g),Rn=nI(gn.g.N,bn.type),Rn==null?Hn.return():(jn=Cn-Rn,Vn=jn-In,.01>=Vn?Hn.return():Qn(Hn,gn.g.N.remove(bn.type,Rn,Rn+Vn),2));ll(gn.h),ms(Hn)})}function aC(gn){return gn&&gn.type==Zu&&(gn.stream.mimeType=="application/cea-608"||gn.stream.mimeType=="application/cea-708")}function oC(gn,bn,Cn,In){var Rn,jn,Vn,Hn,Xn;return hs(function(ns){return ns.g==1?(Rn=Fy,jn=rC(Cn.ya(),Cn.Ba,Cn.la,gn.i.retryParameters,In),Vn=bn.stream,gn.g.modifySegmentRequest(jn,{type:Vn.type,init:Cn instanceof Hm,duration:Cn.endTime-Cn.startTime,mimeType:Vn.mimeType,codecs:Vn.codecs,bandwidth:Vn.bandwidth}),Hn=gn.g.kb.request(Rn,jn),bn.ta=Hn,Qn(ns,Hn.promise,2)):(Xn=ns.h,bn.ta=null,ns.return(Xn.data))})}function sC(gn,bn,Cn,In){var Rn,jn;return hs(function(Vn){if(Vn.g==1)return bn.bb=!1,bn.hd=!1,bn.Nc=0,bn.ac=!0,bn.pa=null,bn.Zc=null,bn.aa=null,In?(Rn=gn.g.Sc(),jn=gn.g.N.getDuration(),Qn(Vn,gn.g.N.remove(bn.type,Rn+In,jn),3)):Qn(Vn,Ux(gn.g.N,bn.type),4);if(Vn.g!=3)return ll(gn.h),Cn?Qn(Vn,gn.g.N.flush(bn.type),3):Vn.A(3);ll(gn.h),bn.ac=!1,bn.endOfStream=!1,bn.ra||bn.Ka||fy(gn,bn,0),ms(Vn)})}function fy(gn,bn,Cn){var In=bn.type;(In!=Zu||gn.j.has(In))&&(bn.Ka=new ay(function(){var Rn;return hs(function(jn){if(jn.g==1)return Ts(jn,2),Qn(jn,vI(gn,bn),4);if(jn.g!=2)return ys(jn,0);Rn=_s(jn),gn.g&&gn.g.onError(Rn),ms(jn)})}).O(Cn))}function IS(gn){gn.Ka!=null&&(gn.Ka.stop(),gn.Ka=null)}function SI(gn){return hs(function(bn){return gn.ta?Qn(bn,gn.ta.abort(),0):bn.A(0)})}function Wk(gn,bn){return hs(function(Cn){if(Cn.g==1)return Qn(Cn,iS(gn.G),2);ll(gn.h),gn.g.onError(bn),bn.handled||gn.i.failureCallback(bn),ms(Cn)})}function TI(gn,bn){var Cn=y_(),In=this;this.j=bn,this.i=gn,this.l=Cn,this.o=null,this.m=[],this.h=this.g=null,this.u=Promise.resolve().then(function(){return lC(In)}),this.s=new gm(function(){return uC(In)})}TI.prototype.destroy=function(){return this.s.destroy()};function uC(gn){var bn,Cn,In;return hs(function(Rn){if(Rn.g==1)return gn.h&&gn.h.abort(),pE(gn),Qn(Rn,gn.u,2);for(gn.g&&gn.g.Ia.mb(),bn=Dn(gn.m),Cn=bn.next();!Cn.done;Cn=bn.next())In=Cn.value,In.Ia.mb();gn.g=null,gn.m=[],gn.j=null,ms(Rn)})}function n0(gn,bn){var Cn={Jb:function(){},bd:function(){},mb:function(){},onError:function(){},dd:function(){},th:function(){}};return gn.m.push({create:bn,Ia:Cn}),gn.h&&gn.h.abort(),pE(gn),Cn}function lC(gn){return hs(function(bn){if(gn.s.g)bn=bn.A(0);else{if(gn.m.length==0||gn.g&&!gn.g.hb)var Cn=!1;else{gn.g&&(gn.g.Ia.mb(),gn.g=null),Cn=gn.m.shift();var In=Cn.create(gn.l);In?(Cn.Ia.Jb(),gn.g={node:In.node,payload:In.payload,hb:In.hb,Ia:Cn.Ia}):Cn.Ia.dd(),Cn=!0}Cn?Cn=Promise.resolve():gn.g?Cn=py(gn):(gn.j.dg(gn.i),gn.o=new bl,Cn=gn.o),bn=Qn(bn,Cn,1)}return bn})}function py(gn){var bn,Cn;return hs(function(In){switch(In.g){case 1:return gn.i=gn.j.Lf(gn.i,gn.l,gn.g.node,gn.g.payload),Ts(In,2),gn.h=gn.j.xf(gn.i,gn.l,gn.g.payload),Qn(In,gn.h.promise,4);case 4:gn.h=null,gn.i==gn.g.node&&(gn.g.Ia.bd(),gn.g=null),ys(In,0);break;case 2:return bn=_s(In),bn.code==7001?gn.g.Ia.mb():gn.g.Ia.onError(bn),gn.g=null,gn.h=null,Cn=gn,Qn(In,gn.j.handleError(gn.l,bn),5);case 5:Cn.i=In.h,ms(In)}})}function pE(gn){gn.o&&(gn.o.resolve(),gn.o=null)}function cC(gn){var bn=[],Cn=700<=gn.fontWeight,In=gn.fontStyle=="italic",Rn=gn.textDecoration.includes("underline");return Cn&&bn.push("b"),In&&bn.push("i"),Rn&&bn.push("u"),Cn=bn.reduce(function(jn,Vn){return jn+"<"+Vn+">"},""),bn=bn.reduceRight(function(jn,Vn){return jn+"</"+Vn+">"},""),gn.lineBreak?`
`:gn.nestedCues.length?gn.nestedCues.map(cC).join(""):Cn+gn.payload+bn}function Yk(gn,bn){gn=Dn(gn);for(var Cn=gn.next();!Cn.done;Cn=gn.next())if(Cn=Cn.value,Cn.isContainer)Yk(Cn.nestedCues,bn);else{var In=Cn.clone();In.nestedCues=[],In.payload=cC(Cn),bn.push(In)}return bn}function bm(gn){this.g=null;for(var bn=Dn(Array.from(gn.textTracks)),Cn=bn.next();!Cn.done;Cn=bn.next())Cn=Cn.value,Cn.mode="disabled",Cn.label=="Shaka Player TextTrack"&&(this.g=Cn);this.g||(this.g=gn.addTextTrack("subtitles","Shaka Player TextTrack")),this.g.mode="hidden"}Sn=bm.prototype,Sn.remove=function(gn,bn){return this.g?(hE(this.g,function(Cn){return Cn.startTime<bn&&Cn.endTime>gn}),!0):!1},Sn.append=function(gn){var bn=Yk(gn,[]),Cn=[];gn=this.g.cues?Array.from(this.g.cues):[];var In={};bn=Dn(bn);for(var Rn=bn.next();!Rn.done;In={sb:In.sb},Rn=bn.next())In.sb=Rn.value,gn.some(function(jn){return function(Vn){return Vn.startTime==jn.sb.startTime&&Vn.endTime==jn.sb.endTime&&Vn.text==jn.sb.payload}}(In))||(Rn=YM(In.sb))&&Cn.push(Rn);for(gn=Cn.slice().sort(function(jn,Vn){return jn.startTime!=Vn.startTime?jn.startTime-Vn.startTime:jn.endTime!=Vn.endTime?jn.endTime-Vn.startTime:"line"in VTTCue.prototype?Cn.indexOf(Vn)-Cn.indexOf(jn):Cn.indexOf(jn)-Cn.indexOf(Vn)}),gn=Dn(gn),In=gn.next();!In.done;In=gn.next())this.g.addCue(In.value)},Sn.destroy=function(){return this.g&&(hE(this.g,function(){return!0}),this.g.mode="disabled"),this.g=null,Promise.resolve()},Sn.isTextVisible=function(){return this.g.mode=="showing"},Sn.setTextVisibility=function(gn){this.g.mode=gn?"showing":"hidden"};function YM(gn){if(gn.startTime>=gn.endTime)return null;var bn=new VTTCue(gn.startTime,gn.endTime,gn.payload);bn.lineAlign=gn.lineAlign,bn.positionAlign=gn.positionAlign,gn.size&&(bn.size=gn.size);try{bn.align=gn.textAlign}catch{}return gn.textAlign=="center"&&bn.align!="center"&&(bn.align="middle"),gn.writingMode=="vertical-lr"?bn.vertical="lr":gn.writingMode=="vertical-rl"&&(bn.vertical="rl"),gn.lineInterpretation==1&&(bn.snapToLines=!1),gn.line!=null&&(bn.line=gn.line),gn.position!=null&&(bn.position=gn.position),bn}function hE(gn,bn){var Cn=gn.mode;gn.mode=Cn=="showing"?"showing":"hidden";for(var In=Dn(Array.from(gn.cues)),Rn=In.next();!Rn.done;Rn=In.next())(Rn=Rn.value)&&bn(Rn)&&gn.removeCue(Rn);gn.mode=Cn}Ys("shaka.text.SimpleTextDisplayer",bm),bm.prototype.setTextVisibility=bm.prototype.setTextVisibility,bm.prototype.isTextVisible=bm.prototype.isTextVisible,bm.prototype.destroy=bm.prototype.destroy,bm.prototype.append=bm.prototype.append,bm.prototype.remove=bm.prototype.remove;function kI(){}function Xk(gn){for(;gn.firstChild;)gn.removeChild(gn.firstChild)}Ys("shaka.util.Dom",kI),kI.removeAllChildren=Xk;function xm(gn,bn){var Cn=this;this.j=!1,this.i=[],this.B=gn,this.m=bn,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.m.appendChild(this.g),this.u=new Hu(function(){rm(Cn)}).Ca(.25),this.h=new Map,this.s=new Ul,this.s.C(document,"fullscreenchange",function(){rm(Cn,!0)}),this.l=null,"ResizeObserver"in pn&&(this.l=new ResizeObserver(function(){rm(Cn,!0)}),this.l.observe(this.g)),this.o=new Map}Sn=xm.prototype,Sn.append=function(gn){var bn=[].concat(Kn(this.i)),Cn={};gn=Dn(gn);for(var In=gn.next();!In.done;Cn={Cc:Cn.Cc},In=gn.next())Cn.Cc=In.value,bn.some(function(Rn){return function(jn){return Iu(jn,Rn.Cc)}}(Cn))||this.i.push(Cn.Cc);rm(this)},Sn.destroy=function(){this.m.removeChild(this.g),this.g=null,this.j=!1,this.i=[],this.u&&this.u.stop(),this.h.clear(),this.s&&(this.s.release(),this.s=null),this.l&&(this.l.disconnect(),this.l=null)},Sn.remove=function(gn,bn){if(!this.g)return!1;var Cn=this.i.length;return this.i=this.i.filter(function(In){return In.startTime<gn||In.endTime>=bn}),rm(this,Cn>this.i.length),!0},Sn.isTextVisible=function(){return this.j},Sn.setTextVisibility=function(gn){this.j=gn};function $I(gn,bn){for(;bn!=null;){if(bn==gn.g)return!0;bn=bn.parentElement}return!1}function Qk(gn,bn,Cn,In,Rn){var jn=!1,Vn=[],Hn=[];bn=Dn(bn);for(var Xn=bn.next();!Xn.done;Xn=bn.next()){Xn=Xn.value,Rn.push(Xn);var ns=gn.h.get(Xn),us=Xn.startTime<=In&&Xn.endTime>In,ps=ns?ns.df:null;ns&&(Vn.push(ns.Bd),ns.tc&&Vn.push(ns.tc),us||(jn=!0,gn.h.delete(Xn),ns=null)),us&&(Hn.push(Xn),ns?$I(gn,ps)||(jn=!0):(XM(gn,Xn,Rn),ns=gn.h.get(Xn),ps=ns.df,jn=!0)),0<Xn.nestedCues.length&&ps&&Qk(gn,Xn.nestedCues,ps,In,Rn),Rn.pop()}if(jn){for(In=Dn(Vn),Rn=In.next();!Rn.done;Rn=In.next())Rn=Rn.value,Rn.parentElement&&Rn.parentElement.removeChild(Rn);for(Hn.sort(function(fs,vs){return fs.startTime!=vs.startTime?fs.startTime-vs.startTime:fs.endTime-vs.endTime}),Hn=Dn(Hn),Xn=Hn.next();!Xn.done;Xn=Hn.next())In=gn.h.get(Xn.value),In.tc?(Cn.appendChild(In.tc),In.tc.appendChild(In.Bd)):Cn.appendChild(In.Bd)}}function rm(gn,bn){if(gn.g){var Cn=gn.B.currentTime;if(!gn.j||bn!==void 0&&bn){bn=Dn(gn.o.values());for(var In=bn.next();!In.done;In=bn.next())Xk(In.value);Xk(gn.g),gn.h.clear(),gn.o.clear()}if(gn.j){bn=new Map,In=Dn(gn.h.keys());for(var Rn=In.next();!Rn.done;Rn=In.next())Rn=Rn.value,bn.set(Rn,gn.h.get(Rn));Qk(gn,gn.i,gn.g,Cn,[])}}}function XM(gn,bn,Cn){var In=1<Cn.length,Rn=In?"span":"div";bn.lineBreak&&(Rn="br"),In=!In&&0<bn.nestedCues.length;var jn=document.createElement(Rn);if(Rn!="br"&&bI(gn,jn,bn,Cn,In),Cn=null,bn.region&&bn.region.id)if(Cn=bn.region,Rn=Cn.id+"_"+Cn.width+"x"+Cn.height+(Cn.heightUnits==Zl?"%":"px")+"-"+Cn.viewportAnchorX+"x"+Cn.viewportAnchorY+(Cn.viewportAnchorUnits==Zl?"%":"px"),gn.o.has(Rn))Cn=gn.o.get(Rn);else{var Vn=document.createElement("span"),Hn=Cn.heightUnits==Zl?"%":"px",Xn=Cn.widthUnits==Zl?"%":"px",ns=Cn.viewportAnchorUnits==Zl?"%":"px";Vn.id="shaka-text-region---"+Rn,Vn.classList.add("shaka-text-region"),Vn.style.height=Cn.height+Hn,Vn.style.width=Cn.width+Xn,Vn.style.position="absolute",Vn.style.top=Cn.viewportAnchorY+ns,Vn.style.left=Cn.viewportAnchorX+ns,Vn.style.display="flex",Vn.style.flexDirection="column",Vn.style.alignItems="center",Vn.style.justifyContent=bn.displayAlign=="before"?"flex-start":bn.displayAlign=="center"?"center":"flex-end",gn.o.set(Rn,Vn),Cn=Vn}Rn=jn,In&&(Rn=document.createElement("span"),Rn.classList.add("shaka-text-wrapper"),Rn.style.backgroundColor=bn.backgroundColor,Rn.style.lineHeight="normal",jn.appendChild(Rn)),gn.h.set(bn,{Bd:jn,df:Rn,tc:Cn})}function bI(gn,bn,Cn,In,Rn){var jn=bn.style,Vn=Cn.nestedCues.length==0,Hn=1<In.length;jn.whiteSpace="pre-wrap";var Xn=Cn.payload.replace(/\s+$/g,function(us){return" ".repeat(us.length)});if(jn.webkitTextStrokeColor=Cn.textStrokeColor,jn.webkitTextStrokeWidth=Cn.textStrokeWidth,jn.color=Cn.color,jn.direction=Cn.direction,jn.opacity=Cn.opacity,jn.paddingLeft=Zk(Cn.linePadding,Cn,gn.m),jn.paddingRight=Zk(Cn.linePadding,Cn,gn.m),jn.textShadow=Cn.textShadow,Cn.backgroundImage)jn.backgroundImage="url('"+Cn.backgroundImage+"')",jn.backgroundRepeat="no-repeat",jn.backgroundSize="contain",jn.backgroundPosition="center",jn.width="100%",jn.height="100%";else{if(Cn.nestedCues.length)var ns=bn;else ns=document.createElement("span"),bn.appendChild(ns);Cn.border&&(ns.style.border=Cn.border),Rn||((bn=Au(In,function(us){return us.backgroundColor}))?ns.style.backgroundColor=bn:Xn&&(ns.style.backgroundColor="rgba(0, 0, 0, 0.8)")),Xn&&(ns.textContent=Xn)}Hn&&!In[In.length-1].isContainer?jn.display="inline":(jn.display="flex",jn.flexDirection="column",jn.alignItems="center",jn.justifyContent=Cn.displayAlign=="before"?"flex-start":Cn.displayAlign=="center"?"center":"flex-end"),Vn||(jn.margin="0"),jn.fontFamily=Cn.fontFamily,jn.fontWeight=Cn.fontWeight.toString(),jn.fontStyle=Cn.fontStyle,jn.letterSpacing=Cn.letterSpacing,jn.fontSize=Zk(Cn.fontSize,Cn,gn.m),Cn.line!=null&&Cn.lineInterpretation==1&&(jn.position="absolute",Cn.writingMode==Tv?(jn.width="100%",Cn.lineAlign==kv?jn.top=Cn.line+"%":Cn.lineAlign=="end"&&(jn.bottom=100-Cn.line+"%")):Cn.writingMode=="vertical-lr"?(jn.height="100%",Cn.lineAlign==kv?jn.left=Cn.line+"%":Cn.lineAlign=="end"&&(jn.right=100-Cn.line+"%")):(jn.height="100%",Cn.lineAlign==kv?jn.right=Cn.line+"%":Cn.lineAlign=="end"&&(jn.left=100-Cn.line+"%"))),jn.lineHeight=Cn.lineHeight,Cn.position!=null&&(Cn.writingMode==Tv?jn.paddingLeft=Cn.position:jn.paddingTop=Cn.position),Cn.positionAlign=="line-left"?jn.cssFloat="left":Cn.positionAlign=="line-right"&&(jn.cssFloat="right"),jn.textAlign=Cn.textAlign,jn.textDecoration=Cn.textDecoration.join(" "),jn.writingMode=Cn.writingMode,"writingMode"in document.documentElement.style&&jn.writingMode==Cn.writingMode||(jn.webkitWritingMode=Cn.writingMode),Cn.size&&(Cn.writingMode==Tv?jn.width=Cn.size+"%":jn.height=Cn.size+"%")}function Zk(gn,bn,Cn){var In=(In=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(gn))?{value:Number(In[1]),unit:In[2]}:null;if(!In)return gn;var Rn=In.value;switch(In.unit){case"%":return Rn/100*Cn.clientHeight/bn.cellResolution.rows+"px";case"c":return Cn.clientHeight*Rn/bn.cellResolution.rows+"px";default:return gn}}function Au(gn,bn){for(var Cn=gn.length-1;0<=Cn;Cn--){var In=bn(gn[Cn]);if(In||In===0)return In}return null}Ys("shaka.text.UITextDisplayer",xm),xm.prototype.setTextVisibility=xm.prototype.setTextVisibility,xm.prototype.isTextVisible=xm.prototype.isTextVisible,xm.prototype.remove=xm.prototype.remove,xm.prototype.destroy=xm.prototype.destroy,xm.prototype.append=xm.prototype.append;function kp(gn,bn){function Cn(jn){for(var Vn=jn,Hn=Dn(bn),Xn=Hn.next();!Xn.done;Xn=Hn.next())Xn=Xn.value,Xn.end&&Xn.start<jn&&(Vn+=Xn.end-Xn.start);return jn=Math.floor(Vn/3600),Hn=Math.floor(Vn/60%60),Xn=Math.floor(Vn%60),Vn=Math.floor(1e3*Vn%1e3),(10>jn?"0":"")+jn+":"+(10>Hn?"0":"")+Hn+":"+(10>Xn?"0":"")+Xn+"."+(100>Vn?10>Vn?"00":"0":"")+Vn}var In=Yk(gn,[]);gn=`WEBVTT

`,In=Dn(In);for(var Rn=In.next();!Rn.done;Rn=In.next())Rn=Rn.value,gn+=Cn(Rn.startTime)+" --> "+Cn(Rn.endTime)+function(jn){var Vn=[];switch(jn.textAlign){case"left":Vn.push("align:left");break;case"right":Vn.push("align:right");break;case Qp:Vn.push("align:middle");break;case"start":Vn.push("align:start");break;case"end":Vn.push("align:end")}switch(jn.writingMode){case"vertical-lr":Vn.push("vertical:lr");break;case"vertical-rl":Vn.push("vertical:rl")}return Vn.length?" "+Vn.join(" "):""}(Rn)+`
`,gn+=Rn.payload+`

`;return gn}Ys("shaka.text.WebVttGenerator",function(){});function i0(gn,bn){this.h=gn,this.g=bn,this.j="",this.o=void 0,this.i=!1,this.m=!0,this.l=!1}function Cm(gn,bn,Cn){try{if(gn.g.enabled){var In={d:1e3*Cn.duration,st:gn.h.U()?rR:t1};In.ot=ZM(Cn);var Rn=In.ot===mE||In.ot===hC||In.ot===gE||In.ot===gC;Rn&&(In.bl=JM(gn,Cn.type)),Cn.bandwidth&&(In.br=Cn.bandwidth/1e3),Rn&&In.ot!==gC&&(In.tb=dC(gn,In.ot)/1e3),a0(gn,bn,In)}}catch(jn){cp("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",jn)}}function QM(gn,bn,Cn){try{if(!gn.g.enabled)return bn;var In=Jk(gn);e:{switch(Cn){case"video/webm":case"video/mp4":var Rn=gE;break e;case"application/x-mpegurl":Rn=pC;break e}Rn=void 0}In.ot=Rn,In.su=!0;var jn=e1(In);return fC(bn,jn)}catch(Vn){return cp("CMCD_SRC_ERROR","Could not generate src CMCD data.",Vn),bn}}function Jk(gn){return gn.j||(gn.j=gn.g.sessionId||pn.crypto.randomUUID()),{v:1,sf:gn.o,sid:gn.j,cid:gn.g.contentId,mtp:gn.h.getBandwidthEstimate()/1e3}}function a0(gn,bn,Cn){Cn=Cn===void 0?{}:Cn;var In=In===void 0?gn.g.useHeaders:In;if(gn.g.enabled){Object.assign(Cn,Jk(gn)),Cn.pr=gn.h.Rc();var Rn=Cn.ot===mE||Cn.ot===gE;if(gn.l&&Rn&&(Cn.bs=!0,Cn.su=!0,gn.l=!1),Cn.su==null&&(Cn.su=gn.m),In)gn=eR(Cn),Object.keys(gn).length&&Object.assign(bn.headers,gn);else{var jn=e1(Cn);jn&&(bn.uris=bn.uris.map(function(Vn){return fC(Vn,jn)}))}}}function ZM(gn){var bn=gn.type;if(gn.init)return tR;if(bn=="video")return gn.codecs.includes(",")?gE:mE;if(bn=="audio")return hC;if(bn=="text")return gn.mimeType==="application/mp4"?gC:mC}function JM(gn,bn){if(bn=gn.h.Ma()[bn],!bn.length)return NaN;var Cn=gn.h.getCurrentTime();return(gn=bn.find(function(In){return In.start<=Cn&&In.end>=Cn}))?1e3*(gn.end-Cn):NaN}function dC(gn,bn){var Cn=gn.h.Xa();if(!Cn.length)return NaN;gn=Cn[0],Cn=Dn(Cn);for(var In=Cn.next();!In.done;In=Cn.next())In=In.value,In.type==="variant"&&In.bandwidth>gn.bandwidth&&(gn=In);switch(bn){case mE:return gn.videoBandwidth||NaN;case hC:return gn.audioBandwidth||NaN;default:return gn.bandwidth}}function e1(gn){function bn(ps){return 100*Cn(ps/100)}function Cn(ps){return Math.round(ps)}function In(ps){return!Number.isNaN(ps)&&ps!=null&&ps!==""&&ps!==!1}var Rn=[],jn={br:Cn,d:Cn,bl:bn,dl:bn,mtp:bn,nor:function(ps){return encodeURIComponent(ps)},rtp:bn,tb:Cn},Vn=Object.keys(gn||{}).sort();Vn=Dn(Vn);for(var Hn=Vn.next();!Hn.done;Hn=Vn.next()){Hn=Hn.value;var Xn=gn[Hn];if(In(Xn)&&(Hn!=="v"||Xn!==1)&&(Hn!="pr"||Xn!==1)){var ns=jn[Hn];ns&&(Xn=ns(Xn)),ns=typeof Xn;var us=void 0;us=ns==="string"&&Hn!=="ot"&&Hn!=="sf"&&Hn!=="st"?Hn+"="+JSON.stringify(Xn):ns==="boolean"?Hn:ns==="symbol"?Hn+"="+Xn.description:Hn+"="+Xn,Rn.push(us)}}return Rn.join(",")}function eR(gn){var bn=Object.keys(gn),Cn={},In=["Object","Request","Session","Status"],Rn=[{},{},{},{}],jn={br:0,d:0,ot:0,tb:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,bs:3,rtp:3};bn=Dn(bn);for(var Vn=bn.next();!Vn.done;Vn=bn.next())Vn=Vn.value,Rn[jn[Vn]!=null?jn[Vn]:1][Vn]=gn[Vn];for(gn=0;gn<Rn.length;gn++)(jn=e1(Rn[gn]))&&(Cn["CMCD-"+In[gn]]=jn);return Cn}function fC(gn,bn){return!bn||gn.includes("offline:")?gn:(gn=new Rp(gn),gn.g.set("CMCD",bn),gn.toString())}var pC="m",hC="a",mE="v",gE="av",tR="i",mC="c",gC="tt",t1="v",rR="l";Ys("shaka.util.CmcdManager.StreamingFormat",{DASH:"d",HLS:"h",bh:"s",Xg:"o"});function PS(){}function r1(gn,bn,Cn,In,Rn){var jn=Rn in In,Vn=!0,Hn;for(Hn in bn){var Xn=Rn+"."+Hn,ns=jn?In[Rn]:Cn[Hn];jn||Hn in Cn?bn[Hn]===void 0?ns===void 0||jn?delete gn[Hn]:gn[Hn]=G_(ns):ns.constructor==Object&&bn[Hn]&&bn[Hn].constructor==Object?(gn[Hn]||(gn[Hn]=G_(ns)),Xn=r1(gn[Hn],bn[Hn],ns,In,Xn),Vn=Vn&&Xn):typeof bn[Hn]!=typeof ns||bn[Hn]==null||typeof bn[Hn]!="function"&&bn[Hn].constructor!=ns.constructor?(fl("Invalid config, wrong type for "+Xn),Vn=!1):(typeof Cn[Hn]=="function"&&Cn[Hn].length!=bn[Hn].length&&Tu("Unexpected number of arguments for "+Xn),gn[Hn]=bn[Hn]):(fl("Invalid config, unrecognized key "+Xn),Vn=!1)}return Vn}function OS(gn,bn){for(var Cn={},In=Cn,Rn=0,jn=0;Rn=gn.indexOf(".",Rn),!(0>Rn);)(Rn==0||gn[Rn-1]!="\\")&&(jn=gn.substring(jn,Rn).replace(/\\\./g,"."),In[jn]={},In=In[jn],jn=Rn+1),Rn+=1;return In[gn.substring(jn).replace(/\\\./g,".")]=bn,Cn}function yE(gn,bn){return gn&&bn}Ys("shaka.util.ConfigUtils",PS),PS.convertToConfigObject=OS,PS.mergeConfigObjects=r1;function wm(){}function xI(gn){return gn=My(gn),new Rp(gn).Ha}function o0(gn,bn,Cn){function In(Hn){rp(jn).setUint32(Vn,Hn.byteLength,!0),Vn+=4,jn.set(Pu(Hn),Vn),Vn+=Hn.byteLength}if(!Cn||!Cn.byteLength)throw new Bs(2,6,6015);var Rn;typeof bn=="string"?Rn=Ku(bn,!0):Rn=bn,gn=My(gn),gn=Ku(gn,!0);var jn=new Uint8Array(12+gn.byteLength+Rn.byteLength+Cn.byteLength),Vn=0;return In(gn),In(Rn),In(Cn),jn}Ys("shaka.util.FairPlayUtils",wm),wm.commonFairPlayResponse=function(gn,bn){if(gn===2){try{var Cn=Ou(bn.data)}catch{return}gn=!1,Cn=Cn.trim(),Cn.substr(0,5)==="<ckc>"&&Cn.substr(-6)==="</ckc>"&&(Cn=Cn.slice(5,-6),gn=!0);try{var In=JSON.parse(Cn);In.ckc&&(Cn=In.ckc,gn=!0),In.CkcMessage&&(Cn=In.CkcMessage,gn=!0),In.License&&(Cn=In.License,gn=!0)}catch{}gn&&(bn.data=Vu(mm(Cn)))}},wm.conaxFairPlayRequest=function(gn,bn){gn===2&&(bn.headers["Content-Type"]="application/octet-stream")},wm.ezdrmFairPlayRequest=function(gn,bn){gn===2&&(bn.headers["Content-Type"]="application/octet-stream")},wm.verimatrixFairPlayRequest=function(gn,bn){gn===2&&(gn=Pu(bn.body),gn=Sm(gn),bn.headers["Content-Type"]="application/x-www-form-urlencoded",bn.body=fp("spc="+gn))},wm.conaxInitDataTransform=function(gn,bn,Cn){if(bn!=="skd")return gn;bn=Cn.serverCertificate,Cn=My(gn).split("skd://").pop().split("?").shift(),Cn=pn.atob(Cn);var In=new ArrayBuffer(2*Cn.length);In=new Uint16Array(In);for(var Rn=0,jn=Cn.length;Rn<jn;Rn++)In[Rn]=Cn.charCodeAt(Rn);return o0(gn,In,bn)},wm.ezdrmInitDataTransform=function(gn,bn,Cn){return bn!=="skd"?gn:(bn=Cn.serverCertificate,Cn=My(gn).split(";").pop(),o0(gn,Cn,bn))},wm.verimatrixInitDataTransform=function(gn,bn,Cn){return bn!=="skd"?gn:(bn=Cn.serverCertificate,Cn=My(gn).split("skd://").pop(),o0(gn,Cn,bn))},wm.initDataTransform=o0,wm.defaultGetContentId=xI,wm.isFairPlaySupported=function(){var gn;return hs(function(bn){return bn.g==1?(gn={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},Ts(bn,2),Qn(bn,navigator.requestMediaKeySystemAccess("com.apple.fps",[gn]),4)):bn.g!=2?bn.return(!0):(_s(bn),bn.return(!1))})};function RS(){}function vE(){var gn=1/0;navigator.connection&&navigator.connection.saveData&&(gn=360);var bn={retryParameters:o_(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,initDataTransform:function(Vn,Hn,Xn){return Xn.keySystem=="com.apple.fps.1_0"&&Hn=="skd"&&(Hn=Xn.serverCertificate,Xn=xI(Vn),Vn=o0(Vn,Xn,Hn)),Vn},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:Um()},Cn={retryParameters:o_(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,dash:{clockSyncUri:"",ignoreDrmInfo:!1,disableXlinkProcessing:!1,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},manifestPreprocessor:function(Vn){return yE([Vn],Vn)},sequenceMode:!1},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',useSafariBehaviorForLive:!0,liveSegmentsDelay:3}},In={retryParameters:o_(),failureCallback:function(Vn){return yE([Vn])},rebufferingGoal:2,bufferingGoal:10,bufferBehind:30,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,durationBackoff:1,forceTransmux:!1,safeSeekOffset:5,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsOnSafari:!0,inaccurateManifestTolerance:2,lowLatencyMode:!1,autoLowLatencyMode:!1,forceHTTPS:!1,preferNativeHls:!1,updateIntervalSeconds:1,dispatchAllEmsgBoxes:!1,observeQualityChanges:!1,maxDisabledTime:30,parsePrftBox:!1};(gl("Web0S")||Ep()||gl("CrKey"))&&(In.stallSkip=0);var Rn={trackSelectionCallback:function(Vn){return hs(function(Hn){return Hn.return(Vn)})},downloadSizeCallback:function(Vn){var Hn;return hs(function(Xn){return Xn.g==1?navigator.storage&&navigator.storage.estimate?Qn(Xn,navigator.storage.estimate(),3):Xn.return(!0):(Hn=Xn.h,Xn.return(Hn.usage+Vn<.95*Hn.quota))})},progressCallback:function(Vn,Hn){return yE([Vn,Hn])},usePersistentLicense:!0,numberOfParallelDownloads:5},jn={drm:bn,manifest:Cn,streaming:In,mediaSource:{sourceBufferExtraFeatures:""},offline:Rn,abrFactory:function(){return new ql},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:gn,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1},autoShowText:3,preferredAudioLanguage:"",preferredTextLanguage:"",preferredVariantRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoCodecs:[],preferredAudioCodecs:[],preferForcedSubs:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",useHeaders:!1},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1}};return Rn.trackSelectionCallback=function(Vn){return hs(function(Hn){return Hn.return(yC(Vn,jn.preferredAudioLanguage))})},jn}function _E(gn,bn,Cn){var In={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:"",audioRobustness:"",sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:""}};return r1(gn,bn,Cn||vE(),In,"")}function yC(gn,bn){var Cn=gn.filter(function(Vn){return Vn.type=="variant"}),In=[],Rn=wv(bn,Cn.map(function(Vn){return Vn.language}));Rn&&(In=Cn.filter(function(Vn){return ml(Vn.language)==Rn})),In.length==0&&(In=Cn.filter(function(Vn){return Vn.primary})),In.length==0&&(Cn.map(function(Vn){return Vn.language}),In=Cn);var jn=In.filter(function(Vn){return Vn.height&&480>=Vn.height});for(jn.length&&(jn.sort(function(Vn,Hn){return Hn.height-Vn.height}),In=jn.filter(function(Vn){return Vn.height==jn[0].height})),bn=[],In.length&&(Cn=Math.floor(In.length/2),In.sort(function(Vn,Hn){return Vn.bandwidth-Hn.bandwidth}),bn.push(In[Cn])),gn=Dn(gn),In=gn.next();!In.done;In=gn.next())In=In.value,In.type!=Zu&&In.type!="image"||bn.push(In);return bn}Ys("shaka.util.PlayerConfiguration",RS),RS.mergeConfigObjects=_E,RS.createDefault=vE;function NS(){this.g=null,this.h=[]}function s0(gn,bn){if(gn.g==null)gn.g={timestamp:Date.now()/1e3,state:bn,duration:0};else{var Cn=Date.now()/1e3;gn.g.duration=Cn-gn.g.timestamp,gn.g.state!=bn&&(gn.h.push(gn.g),gn.g={timestamp:Cn,state:bn,duration:0})}}function DS(gn,bn){var Cn=0;gn.g&&gn.g.state==bn&&(Cn+=gn.g.duration),gn=Dn(gn.h);for(var In=gn.next();!In.done;In=gn.next())In=In.value,Cn+=In.state==bn?In.duration:0;return Cn}function Ky(gn){function bn(jn){return{timestamp:jn.timestamp,state:jn.state,duration:jn.duration}}for(var Cn=[],In=Dn(gn.h),Rn=In.next();!Rn.done;Rn=In.next())Cn.push(bn(Rn.value));return gn.g&&Cn.push(bn(gn.g)),Cn}function CI(){this.i=this.h=null,this.g=[]}function u0(gn,bn,Cn){gn.i!=bn&&(gn.i=bn,gn.g.push({timestamp:Date.now()/1e3,id:bn.id,type:"text",fromAdaptation:Cn,bandwidth:null}))}function n1(){this.u=this.B=this.G=this.D=this.s=this.j=this.F=this.m=this.i=this.M=this.P=this.H=this.J=this.L=this.l=this.o=NaN,this.g=new NS,this.h=new CI}function nu(gn,bn){hl.call(this);var Cn=this;this.l=h1,this.Uc=this.g=null,this.ca=!1,this.Xc=new Ul,this.Xb=new Ul,this.u=new Ul,this.Nb=this.i=this.Yc=this.J=this.j=this.ua=this.L=this.bf=this.V=this.Fa=this.M=this.Vc=this.H=this.xb=this.B=this.G=this.m=this.D=null,this.dc=!1,this.Nd=this.s=null,this.Yd=1e9,this.h=SE(this),this.ec={width:1/0,height:1/0},this.o=null,this.ub=new Pl(this.h.preferredAudioLanguage,this.h.preferredVariantRole,this.h.preferredAudioChannelCount),this.vb=this.h.preferredTextLanguage,this.cc=this.h.preferredTextRole,this.$b=this.h.preferForcedSubs,this.Zb=[],this.fc=null,bn&&bn(this),this.D=lR(this),this.D.je(this.h.streaming.forceHTTPS),this.F=null,dv&&(this.F=dv()),this.Xc.C(pn,"online",function(){Cn.ce()}),this.P={name:"detach"},this.W={name:"attach"},this.ea={name:"unload"},this.Zd={name:"manifest-parser"},this.Xd={name:"manifest"},this.wb={name:"media-source"},this.Qd={name:"drm-engine"},this.ba={name:"load"},this.de={name:"src-equals-drm-engine"},this.yb={name:"src-equals"};var In=new Map;In.set(this.W,function(Rn,jn){return nv(vC(Cn,Rn,jn))}),In.set(this.P,function(Rn){return Rn.mediaElement&&(Cn.Xb.nb(),Rn.mediaElement=null),Cn.F&&Cn.F.release(),Cn.g=null,Rn=Promise.resolve(),nv(Rn)}),In.set(this.ea,function(Rn){return nv(wI(Cn,Rn))}),In.set(this.wb,function(Rn){return Rn=iR(Cn,Rn),nv(Rn)}),In.set(this.Zd,function(Rn,jn){return Rn=_C(Cn,Rn,jn),nv(Rn)}),In.set(this.Xd,function(Rn){return AI(Cn,Rn)}),In.set(this.Qd,function(Rn){return Rn=iu(Cn,Rn),nv(Rn)}),In.set(this.ba,function(Rn,jn){return nv(a1(Cn,Rn,jn))}),In.set(this.de,function(Rn,jn){return Rn=aR(Cn,Rn,jn),nv(Rn)}),In.set(this.yb,function(Rn,jn){return sp(Cn,Rn,jn)}),this.Ga=new TI(this.P,{Lf:function(Rn,jn,Vn,Hn){var Xn=null;return Rn==Cn.P&&(Xn=Vn==Cn.P?Cn.P:Cn.W),Rn==Cn.W&&(Xn=Vn==Cn.P||jn.mediaElement!=Hn.mediaElement?Cn.P:Vn==Cn.W?Cn.W:Vn==Cn.wb||Vn==Cn.ba?Cn.wb:Vn==Cn.yb?Cn.de:null),Rn==Cn.wb&&(Xn=Vn==Cn.ba&&jn.mediaElement==Hn.mediaElement?Cn.Zd:Cn.ea),Rn==Cn.Zd&&(Xn=c0(Cn.ba,Cn.Xd,Cn.ea,Vn,jn,Hn)),Rn==Cn.Xd&&(Xn=c0(Cn.ba,Cn.Qd,Cn.ea,Vn,jn,Hn)),Rn==Cn.Qd&&(Xn=c0(Cn.ba,Cn.ba,Cn.ea,Vn,jn,Hn)),Rn==Cn.de&&(Xn=Vn==Cn.yb&&jn.mediaElement==Hn.mediaElement?Cn.yb:Cn.ea),(Rn==Cn.ba||Rn==Cn.yb)&&(Xn=Cn.ea),Rn==Cn.ea&&(Xn=Hn.mediaElement&&jn.mediaElement==Hn.mediaElement?Cn.W:Cn.P),Xn},xf:function(Rn,jn,Vn){return Cn.dispatchEvent(op("onstatechange",new Map().set("state",Rn.name))),In.get(Rn)(jn,Vn)},handleError:function(Rn){return hs(function(jn){return jn.g==1?Qn(jn,wI(Cn,Rn),2):jn.return(Rn.mediaElement?Cn.W:Cn.P)})},dg:function(Rn){Cn.dispatchEvent(op("onstateidle",new Map().set("state",Rn.name)))}}),this.$e=new Hu(function(){El(Cn.i.variants,Cn.h.restrictions,Cn.ec)&&Vv(Cn)}),gn&&this.Yb(gn,!0)}as(nu,hl);function Bv(gn){gn.L!=null&&(gn.L.release(),gn.L=null)}function nR(gn,bn){if(bn.lcevc.enabled){var Cn=gn.Xa();Cn&&Cn[0]&&Cn[0].videoMimeType==wE.ts&&(Yl()||navigator.userAgent.match(/Edge\//))&&(bn.streaming.forceTransmux||Tu("LCEVC Warning: For MPEG-2 TS decoding the config.streaming.forceTransmux must be enabled.")),Bv(gn),gn.L==null&&(gn.L=new sE(gn.g,gn.bf,bn.lcevc),gn.G&&(gn.G.F=gn.L))}else Bv(gn)}function op(gn,bn){return new Ju(gn,bn)}Sn=nu.prototype,Sn.destroy=function(){var gn=this,bn;return hs(function(Cn){switch(Cn.g){case 1:return gn.l==my?Cn.return():(Bv(gn),gn.l=my,bn=n0(gn.Ga,function(){return{node:gn.P,payload:y_(),hb:!1}}),Qn(Cn,new Promise(function(In){bn.Jb=function(){},bn.bd=function(){In()},bn.mb=function(){In()},bn.onError=function(){In()},bn.dd=function(){In()}}),2));case 2:return Qn(Cn,gn.Ga.destroy(),3);case 3:if(gn.Xc&&(gn.Xc.release(),gn.Xc=null),gn.Xb&&(gn.Xb.release(),gn.Xb=null),gn.u&&(gn.u.release(),gn.u=null),gn.Nd=null,gn.h=null,gn.o=null,gn.Uc=null,gn.V=null,!gn.D){Cn.A(4);break}return Qn(Cn,gn.D.destroy(),5);case 5:gn.D=null;case 4:gn.s&&(gn.s.release(),gn.s=null),hl.prototype.release.call(gn),ms(Cn)}})},Sn.Yb=function(gn,bn){if(bn=bn===void 0?!0:bn,this.l==my)return Promise.reject(qm());var Cn=y_();Cn.mediaElement=gn,Ap()||(bn=!1);var In=bn?this.wb:this.W;return gn=n0(this.Ga,function(){return{node:In,payload:Cn,hb:!1}}),gn.Jb=function(){},p1(gn)},Sn.kf=function(gn){this.bf=gn},Sn.detach=function(){var gn=this;if(this.l==my)return Promise.reject(qm());var bn=n0(this.Ga,function(){return{node:gn.P,payload:y_(),hb:!1}});return bn.Jb=function(){},p1(bn)},Sn.re=function(gn){var bn=this;if(gn=gn===void 0?!0:gn,this.l==my)return Promise.reject(qm());this.dc=!1,Ap()||(gn=!1),Bv(this);var Cn=y_(),In=n0(this.Ga,function(Rn){var jn=Rn.mediaElement&&gn?bn.wb:Rn.mediaElement?bn.W:bn.P;return Cn.mediaElement=Rn.mediaElement,{node:jn,payload:Cn,hb:!1}});return In.Jb=function(){},p1(In)},Sn.Eg=function(gn){this.fc=gn},Sn.load=function(gn,bn,Cn){var In=this;if(this.fc=null,this.dc=!1,this.l==my)return Promise.reject(qm());this.dispatchEvent(op("loading"));var Rn=y_();Rn.uri=gn,Rn.ne=Date.now()/1e3,Cn&&(Rn.mimeType=Cn),bn!==void 0&&(Rn.startTime=bn);var jn=i1(this,Rn)?this.yb:this.ba,Vn=n0(this.Ga,function(Hn){return Hn.mediaElement==null?null:(Rn.mediaElement=Hn.mediaElement,{node:jn,payload:Rn,hb:!0})});return this.o=new n1,this.V=NI(this),Vn.Jb=function(){},new Promise(function(Hn,Xn){Vn.dd=function(){return Xn(new Bs(2,7,7002))},Vn.bd=function(){Hn(),In.dispatchEvent(op("loaded"))},Vn.mb=function(){return Xn(qm())},Vn.onError=function(ns){return Xn(ns)}})};function i1(gn,bn){if(!Ap())return!0;var Cn=bn.mimeType,In=bn.uri||"";if(Cn||(Cn=Q0(In),Cn=wE[Cn]),Cn){if((bn.mediaElement||YE()).canPlayType(Cn)=="")return!1;if(!Ap()||!(Cn in cy||Q0(In)in q_)||(Cn==="application/x-mpegurl"||Cn==="application/vnd.apple.mpegurl")&&gn.h.streaming.preferNativeHls)return!0;if(D_())return gn.h.streaming.useNativeHlsOnSafari}return!1}function vC(gn,bn,Cn){return bn.mediaElement==null&&(bn.mediaElement=Cn.mediaElement,gn.Xb.C(bn.mediaElement,"error",function(){var In=CE(gn);In&&cv(gn,In)})),gn.g=bn.mediaElement,Promise.resolve()}function wI(gn,bn){var Cn,In,Rn,jn,Vn,Hn,Xn,ns,us;return hs(function(ps){switch(ps.g){case 1:return gn.l!=my&&(gn.l=h1),Cn=gn.Zb.map(function(fs){return fs()}),gn.Zb=[],Qn(ps,Promise.all(Cn),2);case 2:if(gn.dispatchEvent(op("unloading")),bn.mimeType=null,bn.startTime=null,bn.uri=null,gn.Fa&&(gn.Fa.release(),gn.Fa=null),bn.mediaElement&&gn.u.nb(),gn.$e.stop(),gn.xb&&(gn.xb.release(),gn.xb=null),gn.Vc&&(gn.Vc.stop(),gn.Vc=null),!gn.J){ps.A(3);break}return Qn(ps,gn.J.stop(),4);case 4:gn.J=null,gn.Yc=null;case 3:if(!gn.s){ps.A(5);break}return Qn(ps,gn.s.stop(),5);case 5:if(!gn.j){ps.A(7);break}return Qn(ps,gn.j.destroy(),8);case 8:gn.j=null;case 7:if(gn.H&&(gn.H.release(),gn.H=null),gn.B&&(gn.B.release(),gn.B=null),!gn.G){ps.A(9);break}return Qn(ps,gn.G.destroy(),10);case 10:gn.G=null;case 9:if(gn.F&&gn.F.onAssetUnload(),!bn.mediaElement||!bn.mediaElement.src){ps.A(11);break}return Qn(ps,new Promise(function(fs){return new Hu(fs).O(.1)}),12);case 12:for(bn.mediaElement.removeAttribute("src"),bn.mediaElement.load();bn.mediaElement.lastChild;)bn.mediaElement.removeChild(bn.mediaElement.firstChild);case 11:if(!gn.m){ps.A(13);break}return Qn(ps,gn.m.destroy(),14);case 14:gn.m=null;case 13:if(gn.Nb=null,gn.M=null,gn.i){for(In=Dn(gn.i.variants),Rn=In.next();!Rn.done;Rn=In.next())for(jn=Rn.value,Vn=Dn([jn.audio,jn.video]),Hn=Vn.next();!Hn.done;Hn=Vn.next())(Xn=Hn.value)&&Xn.segmentIndex&&Xn.segmentIndex.release();for(ns=Dn(gn.i.textStreams),Hn=ns.next();!Hn.done;Hn=ns.next())us=Hn.value,us.segmentIndex&&us.segmentIndex.release()}gn.i=null,gn.o=new n1,gn.Ud=null,US(gn),ms(ps)}})}function iR(gn,bn){var Cn,In,Rn,jn,Vn;return hs(function(Hn){if(Hn.g==1)return Cn=gn.h.textDisplayFactory,In=Cn(),gn.Ud=Cn,Rn=fR(bn.mediaElement,In,function(Xn,ns,us){EC(gn,Xn,ns,us)},gn.L),Rn.configure(gn.h.mediaSource),jn=gn.h.manifest,Vn=jn.segmentRelativeVttTiming,Rn.H=Vn,Qn(Hn,Rn.J,2);gn.G=Rn,ms(Hn)})}function _C(gn,bn,Cn){var In,Rn,jn,Vn;return hs(function(Hn){if(Hn.g==1)return bn.mimeType=Cn.mimeType,bn.uri=Cn.uri,In=bn.uri,Rn=gn.D,gn.Nb=In,jn=gn,Qn(Hn,BA(In,Rn,gn.h.manifest.retryParameters,bn.mimeType),2);jn.Yc=Hn.h,gn.J=gn.Yc(),Vn=G_(gn.h.manifest),Cn.mediaElement&&Cn.mediaElement.nodeName==="AUDIO"&&(Vn.disableVideo=!0),gn.J.configure(Vn),ms(Hn)})}function AI(gn,bn){var Cn=bn.uri;bn=gn.D,gn.Fa=new e0(function(){return gn.uc()}),gn.Fa.addEventListener("regionadd",function(jn){jn=jn.region,Gv(gn,"timelineregionadded",jn),gn.F&&gn.F.onDashTimedMetadata(jn)}),gn.ua=null,gn.h.streaming.observeQualityChanges&&(gn.ua=new zk(function(){return gn.Ma()}),gn.ua.addEventListener("qualitychange",function(jn){var Vn=jn.quality;jn=jn.position,Vn=new Map().set("mediaQuality",{bandwidth:Vn.bandwidth,audioSamplingRate:Vn.audioSamplingRate,codecs:Vn.codecs,contentType:Vn.contentType,frameRate:Vn.frameRate,height:Vn.height,mimeType:Vn.mimeType,channelsCount:Vn.channelsCount,pixelAspectRatio:Vn.pixelAspectRatio,width:Vn.width}).set("position",jn),gn.dispatchEvent(op("mediaqualitychanged",Vn))}));var In={networkingEngine:bn,modifyManifestRequest:function(jn,Vn){var Hn=gn.V;try{Hn.g.enabled&&(Hn.o=Vn.format,a0(Hn,jn,{ot:pC,su:!Hn.i}))}catch(Xn){cp("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",Xn)}},modifySegmentRequest:function(jn,Vn){Cm(gn.V,jn,Vn)},filter:function(jn){return FI(gn,jn)},makeTextStreamsForClosedCaptions:function(jn){return pR(gn,jn)},onTimelineRegionAdded:function(jn){var Vn=gn.Fa;e:{for(var Hn=Dn(Vn.g),Xn=Hn.next();!Xn.done;Xn=Hn.next())if(Xn=Xn.value,Xn.schemeIdUri==jn.schemeIdUri&&Xn.id==jn.id&&Xn.startTime==jn.startTime&&Xn.endTime==jn.endTime){Hn=Xn;break e}Hn=null}Hn==null&&(Vn.g.add(jn),jn=new Ju("regionadd",new Map([["region",jn]])),Vn.dispatchEvent(jn))},onEvent:function(jn){return gn.dispatchEvent(jn)},onError:function(jn){return cv(gn,jn)},isLowLatencyMode:function(){return gn.h.streaming.lowLatencyMode},isAutoLowLatencyMode:function(){return gn.h.streaming.autoLowLatencyMode},enableLowLatencyMode:function(){gn.configure("streaming.lowLatencyMode",!0)},updateDuration:function(){gn.j&&gn.j.updateDuration()},newDrmInfo:function(jn){var Vn=gn.m?gn.m.g:null;Vn&&gn.m.u&&$C(gn,Vn.keySystem,jn)}},Rn=Date.now()/1e3;return new Vl(function(){var jn,Vn,Hn,Xn;return hs(function(ns){if(ns.g==1)return jn=gn,Qn(ns,gn.J.start(Cn,In),2);if(jn.i=ns.h,Vn=op("manifestparsed"),gn.dispatchEvent(Vn),gn.i.variants.length==0)throw new Bs(2,4,4036);uR(gn.i),Hn=Date.now()/1e3,Xn=Hn-Rn,gn.o.F=Xn,ms(ns)})}(),function(){return gn.J.stop()})}function iu(gn,bn){var Cn,In;return hs(function(Rn){return Rn.g==1?(Cn=Date.now()/1e3,In=!0,gn.m=MI(gn,{kb:gn.D,onError:function(jn){cv(gn,jn)},cd:function(jn){zI(gn,jn)},onExpirationUpdated:function(jn,Vn){xC(gn,jn,Vn)},onEvent:function(jn){gn.dispatchEvent(jn),jn.type=="drmsessionupdate"&&In&&(In=!1,gn.o.j=Date.now()/1e3-Cn,gn.L&&(jn=gn.L,jn.g&&jn.h.classList.add("shaka-hidden")))}}),gn.m.configure(gn.h.drm),Qn(Rn,W0(gn.m,gn.i.variants,gn.i.offlineSessionIds),2)):Rn.g!=3?Qn(Rn,gn.m.Yb(bn.mediaElement),3):Qn(Rn,FI(gn,gn.i),0)})}function a1(gn,bn,Cn){var In,Rn,jn,Vn,Hn,Xn,ns,us,ps,fs,vs,Is,Ls,Cs,Ms,Zs,Fs;return hs(function(Ws){switch(Ws.g){case 1:for(bn.startTime=Cn.startTime,gn.fc!=null&&(bn.startTime=gn.fc,gn.fc=null),In=bn.mediaElement,Rn=bn.uri,gn.Nb=Rn,gn.H=new lE({Tc:function(){return In.playbackRate},Pc:function(){return In.defaultPlaybackRate},le:function(Gs){In.playbackRate=Gs},Me:function(Gs){In.currentTime+=Gs}}),jn=function(){return kE(gn)},Vn=function(){return bC(gn)},gn.u.C(In,"playing",jn),gn.u.C(In,"pause",jn),gn.u.C(In,"ended",jn),gn.u.C(In,"ratechange",Vn),nR(gn,gn.h),Hn=gn.h.abrFactory,gn.s&&gn.Nd==Hn||(gn.Nd=Hn,gn.s=Hn(),typeof gn.s.setMediaElement!="function"&&(_b("AbrManager","Please use an AbrManager with setMediaElement function."),gn.s.setMediaElement=function(){}),gn.s.configure(gn.h.abr)),gn.ub=new Pl(gn.h.preferredAudioLanguage,gn.h.preferredVariantRole,gn.h.preferredAudioChannelCount),gn.vb=gn.h.preferredTextLanguage,gn.cc=gn.h.preferredTextRole,gn.$b=gn.h.preferForcedSubs,Wm(gn.i.presentationTimeline,gn.h.playRangeStart,gn.h.playRangeEnd),gn.s.init(function(Gs,eu,au){gn.j&&Gs!=gn.j.l&&bE(gn,Gs,!0,eu===void 0?!1:eu,au===void 0?0:au)}),gn.s.setMediaElement(In),Vm(gn.i,gn.h.preferredVideoCodecs,gn.h.preferredAudioCodecs,gn.h.preferredAudioChannelCount,gn.h.preferredDecodingAttributes),gn.j=DI(gn),gn.j.configure(gn.h.streaming),gn.l=Am,In.textTracks&&gn.u.C(In.textTracks,"addtrack",function(Gs){if(Gs.track)switch(Gs=Gs.track,Gs.kind){case"chapters":OI(gn,Gs)}}),gn.dispatchEvent(op("streaming")),Xn=null,(ns=gn.j.l)||(Xn=Vv(gn)),us=[],ps=ns||Xn,fs=Dn([ps.video,ps.audio]),vs=fs.next();!vs.done;vs=fs.next())(Is=vs.value)&&!Is.segmentIndex&&us.push(Is.createSegmentIndex());if(!(0<us.length)){Ws.A(2);break}return Qn(Ws,Promise.all(us),2);case 2:if(gn.B=cR(gn,bn.startTime),gn.xb=dR(gn),Ls=Math.max(gn.i.minBufferTime,gn.h.streaming.rebufferingGoal),RI(gn,Ls),ns){Ws.A(4);break}if(bE(gn,Xn,!0,!1,0),!gn.h.streaming.startAtSegmentBoundary){Ws.A(5);break}return Cs=gn.B.Ic(),Qn(Ws,VI(Xn,Cs),6);case 6:Ms=Ws.h,gn.B.zd(Ms);case 5:c1(gn,null,j_(Xn));case 4:return gn.B.yd(),Zs=gn.Fb().find(function(Gs){return Gs.active}),Zs||((Fs=X$(gn.i.textStreams,gn.vb,gn.cc,gn.$b)[0]||null)&&u0(gn.o.h,Fs,!0),Xn&&(Fs?(Xn.audio&&GI(gn,Xn.audio,Fs)&&(gn.ca=!0),gn.ca&&gn.G.m.setTextVisibility(!0),FS(gn)):gn.ca=!1),Fs&&(gn.h.streaming.alwaysStreamText||gn.Hd())&&m_(gn.j,Fs)),Qn(Ws,gn.j.start(),7);case 7:gn.h.abr.enabled&&(gn.s.enable(),xE(gn)),U_(gn.j?gn.j.l:null,gn.i),BS(gn.i),hy(gn),$E(gn),gn.i.variants.some(function(Gs){return Gs.primary}),gn.dc=!0,gn.u.ia(In,"loadedmetadata",function(){gn.o.m=Date.now()/1e3-Cn.ne}),ms(Ws)}})}function aR(gn,bn,Cn){var In,Rn,jn,Vn,Hn,Xn,ns;return hs(function(us){return us.g==1?(In=tl,Rn=Date.now()/1e3,jn=!0,gn.m=MI(gn,{kb:gn.D,onError:function(ps){cv(gn,ps)},cd:function(ps){zI(gn,ps)},onExpirationUpdated:function(ps,fs){xC(gn,ps,fs)},onEvent:function(ps){gn.dispatchEvent(ps),ps.type=="drmsessionupdate"&&jn&&(jn=!1,gn.o.j=Date.now()/1e3-Rn)}}),gn.m.configure(gn.h.drm),Vn=Cn.uri||"",Hn=Q0(Vn),Xn=wE[Hn],Xn=="application/x-mpegurl"&&D_()&&(Xn="application/vnd.apple.mpegurl"),Xn||(Xn="video/mp4"),ns={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:{id:0,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:Cn.mimeType?Cn.mimeType.split(";")[0]:Xn,codecs:Cn.mimeType?Ry(Cn.mimeType):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",label:null,type:In.va,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},gn.m.V=!0,Qn(us,W0(gn.m,[ns],[]),2)):Qn(us,gn.m.Yb(bn.mediaElement),0)})}function sp(gn,bn,Cn){function In(){return kE(gn)}bn.uri=Cn.uri,bn.startTime=Cn.startTime,gn.Nb=bn.uri;var Rn=bn.mediaElement;gn.B=new dI(Rn);var jn=!1;gn.Zb.push(function(){jn=!0}),bn.startTime!=null&&gn.B.zd(bn.startTime),gn.H=new lE({Tc:function(){return Rn.playbackRate},Pc:function(){return Rn.defaultPlaybackRate},le:function(Xn){Rn.playbackRate=Xn},Me:function(Xn){Rn.currentTime+=Xn}}),RI(gn,gn.h.streaming.rebufferingGoal),gn.u.C(Rn,"playing",In),gn.u.C(Rn,"pause",In),gn.u.C(Rn,"ended",In),gn.u.C(Rn,"ratechange",function(){return bC(gn)}),Rn.preload!="none"&&gn.u.ia(Rn,"loadedmetadata",function(){gn.o.m=Date.now()/1e3-Cn.ne}),Rn.audioTracks&&(gn.u.C(Rn.audioTracks,"addtrack",function(){return hy(gn)}),gn.u.C(Rn.audioTracks,"removetrack",function(){return hy(gn)}),gn.u.C(Rn.audioTracks,"change",function(){return hy(gn)})),Rn.textTracks&&(gn.u.C(Rn.textTracks,"addtrack",function(Xn){if(Xn.track)switch(Xn=Xn.track,Xn.kind){case"metadata":sR(gn,Xn);break;case"chapters":OI(gn,Xn);break;default:hy(gn)}}),gn.u.C(Rn.textTracks,"removetrack",function(){return hy(gn)}),gn.u.C(Rn.textTracks,"change",function(){return hy(gn)}));var Vn=Q0(bn.uri);Rn.src=QM(gn.V,bn.uri,wE[Vn]),(Ep()||gl("Web0S"))&&Rn.load(),gn.l=Ym,gn.dispatchEvent(op("streaming"));var Hn=new bl;return Gy(Rn,HTMLMediaElement.HAVE_METADATA,gn.u,function(){gn.B.yd(),Hn.resolve()}),Gy(Rn,HTMLMediaElement.HAVE_CURRENT_DATA,gn.u,function(){var Xn;return hs(function(ns){if(ns.g==1)return II(gn),Xn=LS(gn),Xn.find(function(us){return us.mode!="disabled"})?(0<Xn.length&&(gn.ca=!0),ns.A(2)):Qn(ns,new Promise(function(us){gn.u.ia(Rn.textTracks,"change",us),new Hu(us).O(1)}),2);if(jn)return ns.return();oR(gn),ms(ns)})}),Rn.error?Hn.reject(CE(gn)):Rn.preload=="none"&&(Tu('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),Hn.resolve()),gn.u.ia(Rn,"error",function(){Hn.reject(CE(gn))}),new Vl(Hn,function(){return Hn.reject(new Bs(2,7,7001)),Promise.resolve()}).Y(function(){gn.dc=!0})}function II(gn){var bn=gn.h.preferredAudioLanguage;if(bn!=""){gn.ge(bn);var Cn=gn.h.preferredVariantRole;Cn!=""&&gn.ge(bn,Cn)}}function oR(gn){var bn=gn.h.preferredTextLanguage,Cn=gn.h.preferForcedSubs;if(bn!=""){gn.he(bn,"",Cn);var In=gn.h.preferredTextRole;In!=""&&gn.he(bn,In,Cn)}}function sR(gn,bn){if(bn.kind=="metadata"){bn.mode="hidden",gn.u.C(bn,"cuechange",function(){if(bn.activeCues)for(var In=Dn(bn.activeCues),Rn=In.next();!Rn.done;Rn=In.next())Rn=Rn.value,PI(gn,Rn.startTime,Rn.endTime,Rn.type,Rn.value),gn.F&&gn.F.onCueMetadataChange(Rn.value)});var Cn=new Hu(function(){var In=LI(gn);In=Dn(In);for(var Rn=In.next();!Rn.done;Rn=In.next())Rn.value.mode="hidden"}).Mb().O(.5);gn.Zb.push(function(){Cn.stop()})}}function EC(gn,bn,Cn,In){bn=Dn(bn);for(var Rn=bn.next();!Rn.done;Rn=bn.next())if(Rn=Rn.value,Rn.data&&Rn.cueTime&&Rn.frames){var jn=Rn.cueTime+Cn,Vn=In;Vn&&jn>Vn&&(Vn=jn);for(var Hn=Dn(Rn.frames),Xn=Hn.next();!Xn.done;Xn=Hn.next())PI(gn,jn,Vn,"org.id3",Xn.value);gn.F&&gn.F.onHlsTimedMetadata(Rn,jn)}}function PI(gn,bn,Cn,In,Rn){bn=new Map().set("startTime",bn).set("endTime",Cn).set("metadataType",In).set("payload",Rn),gn.dispatchEvent(op("metadata",bn))}function OI(gn,bn){if(bn&&bn.kind=="chapters"){bn.mode="hidden";var Cn=new Hu(function(){bn.mode="hidden"}).Mb().O(.5);gn.Zb.push(function(){Cn.stop()})}}function uR(gn){function bn(Cn){return Cn.video&&Cn.audio||Cn.video&&Cn.video.codecs.includes(",")}gn.variants.some(bn)&&(gn.variants=gn.variants.filter(bn))}function MI(gn,bn){return new WT(bn,gn.h.drm.updateExpirationTime)}function lR(gn){return new Sl(function(bn,Cn){gn.s&&gn.s.segmentDownloaded(bn,Cn)},function(bn,Cn,In){bn=new Map().set("headers",bn).set("request",Cn).set("requestType",In),gn.dispatchEvent(op("downloadheadersreceived",bn))},function(bn,Cn,In,Rn){bn=new Map().set("request",bn).set("error",Cn).set("httpResponseCode",In).set("aborted",Rn),gn.dispatchEvent(op("downloadfailed",bn))})}function cR(gn,bn){return new Yx(gn.g,gn.i,gn.h.streaming,bn,function(){gn.xb&&vl(gn.xb,!0),gn.j&&gn.j.vc(),gn.M&&SC(gn)},function(Cn){return gn.dispatchEvent(Cn)})}function dR(gn){var bn=new wS(gn.Fa);bn.addEventListener("enter",function(In){Gv(gn,"timelineregionenter",In.region)}),bn.addEventListener("exit",function(In){Gv(gn,"timelineregionexit",In.region)}),bn.addEventListener("skip",function(In){var Rn=In.region;In.seeking||(Gv(gn,"timelineregionenter",Rn),Gv(gn,"timelineregionexit",Rn))});var Cn=new hI(gn.g);return Cn.g.add(bn),gn.ua&&Cn.g.add(gn.ua),Cn}function RI(gn,bn){gn.M=new rx,gn.M.g=F0,nx(gn.M,bn,Math.min(.5,bn/2)),US(gn),gn.Vc=new Hu(function(){SC(gn)}).Ca(.25)}function SC(gn){switch(gn.l){case Ym:if(gn.g.ended)var bn=!0;else{var Cn=Mk(gn.g.buffered);bn=Cn!=null&&Cn>=gn.g.duration-1}break;case Am:e:if(gn.g.ended||Lx(gn.G))bn=!0;else{if(gn.i.presentationTimeline.U()){Cn=gn.i.presentationTimeline.gb();var In=Mk(gn.g.buffered);if(In!=null&&In>=Cn){bn=!0;break e}}bn=!1}break;default:bn=!1}In=Km(gn.g.buffered,gn.g.currentTime),Cn=gn.M;var Rn=bn,jn=Cn.h.get(Cn.g);bn=Cn.g,In=Rn||In>=jn?BT:F0,Cn.g=In,bn!=In&&US(gn)}function fR(gn,bn,Cn,In){return new Lk(gn,bn,Cn,In)}function NI(gn){return new i0({getBandwidthEstimate:function(){return gn.s?gn.s.getBandwidthEstimate():NaN},Ma:function(){return gn.Ma()},getCurrentTime:function(){return gn.g?gn.g.currentTime:0},Xa:function(){return gn.Xa()},Rc:function(){return gn.Rc()},U:function(){return gn.U()}},gn.h.cmcd)}function DI(gn){return new mI(gn.i,{Sc:function(){return gn.B?gn.B.Ic():0},getBandwidthEstimate:function(){return gn.s.getBandwidthEstimate()},modifySegmentRequest:function(bn,Cn){Cm(gn.V,bn,Cn)},N:gn.G,kb:gn.D,onError:function(bn){return cv(gn,bn)},onEvent:function(bn){return gn.dispatchEvent(bn)},fg:function(){gn.J&&gn.J.update&&gn.J.update()},Wd:function(bn,Cn,In){gn.B&&gn.B.Ne(),SC(gn),bn=new Map().set("start",bn).set("end",Cn).set("contentType",In),gn.dispatchEvent(op("segmentappended",bn))},eg:function(bn,Cn){(Cn=Cn.Od)&&gn.ua&&Hy(gn.ua,Cn,bn)},xe:function(bn,Cn){var In=gn.m;if(In.h.parseInbandPsshEnabled&&["audio","video"].includes(bn)){Cn=new G0(Pu(Cn));var Rn=0,jn=Dn(Cn.data);for(bn=jn.next();!bn.done;bn=jn.next())Rn+=bn.value.length;if(Rn==0)In=Promise.resolve();else{for(Rn=new Uint8Array(Rn),jn=0,Cn=Dn(Cn.data),bn=Cn.next();!bn.done;bn=Cn.next())bn=bn.value,Rn.set(bn,jn),jn+=bn.length;X0(In,"cenc",Rn),In=In.o}}else In=Promise.resolve();return In},gg:function(bn,Cn,In){EC(gn,bn,Cn,In)}})}Sn.configure=function(gn,bn){arguments.length==2&&typeof gn=="string"&&(gn=OS(gn,bn)),gn.streaming&&"forceTransmuxTS"in gn.streaming&&(_b("streaming.forceTransmuxTS configuration","Please Use streaming.forceTransmux instead."),gn.streaming.forceTransmux=gn.streaming.forceTransmuxTS,delete gn.streaming.forceTransmuxTS),gn.streaming&&gn.streaming.lowLatencyMode&&(gn.streaming.inaccurateManifestTolerance==null&&(gn.streaming.inaccurateManifestTolerance=0),gn.streaming.rebufferingGoal==null&&(gn.streaming.rebufferingGoal=.01));var Cn=_E(this.h,gn,SE(this));return TC(this),Cn};function TC(gn){if(gn.J){var bn=G_(gn.h.manifest);gn.g&&gn.g.nodeName==="AUDIO"&&(bn.disableVideo=!0),gn.J.configure(bn)}if(gn.m&&gn.m.configure(gn.h.drm),gn.j){gn.j.configure(gn.h.streaming);try{TE(gn,gn.i)}catch(jn){cv(gn,jn)}gn.s&&$E(gn),bn=gn.j.l,!bn||bn.allowedByApplication&&bn.allowedByKeySystem||u1(gn)}if(gn.D&&gn.D.je(gn.h.streaming.forceHTTPS),gn.G&&(gn.G.configure(gn.h.mediaSource),gn.G.H=gn.h.manifest.segmentRelativeVttTiming,bn=gn.h.textDisplayFactory,gn.Ud!=bn)){var Cn=bn(),In=gn.G,Rn=In.m;In.m=Cn,Rn&&(Cn.setTextVisibility(Rn.isTextVisible()),Rn.destroy()),In.g&&(In.g.j=Cn),gn.Ud=bn,gn.j&&(bn=gn.j,(Cn=bn.j.get(Zu))&&g_(bn,Cn.stream,!0,0,!0))}gn.s&&(gn.s.configure(gn.h.abr),gn.h.abr.enabled?gn.s.enable():gn.s.disable(),xE(gn)),gn.M&&(bn=gn.h.streaming.rebufferingGoal,gn.i&&(bn=Math.max(bn,gn.i.minBufferTime)),nx(gn.M,bn,Math.min(.5,bn/2))),gn.i&&Wm(gn.i.presentationTimeline,gn.h.playRangeStart,gn.h.playRangeEnd)}Sn.getConfiguration=function(){var gn=SE(this);return _E(gn,this.h,SE(this)),gn},Sn.Af=function(){if(this.g){var gn=this.g.buffered.length;gn=gn?this.g.buffered.end(gn-1):0;var bn=this.getConfiguration().streaming.bufferingGoal;if(bn=Math.min(this.g.currentTime+bn,this.uc().end),gn>=bn)return 1;if(!(gn<=this.g.currentTime)&&gn<bn)return(gn-this.g.currentTime)/(bn-this.g.currentTime)}return 0},Sn.qg=function(){for(var gn in this.h)delete this.h[gn];_E(this.h,SE(this),SE(this)),TC(this)},Sn.Gf=function(){return this.l},Sn.Kf=function(){return this.g},Sn.jc=function(){return this.D},Sn.Dd=function(){return this.Nb},Sn.Ge=function(){return this.F?this.F:null},Sn.U=function(){return this.i?this.i.presentationTimeline.U():this.g&&this.g.src?this.g.duration==1/0:!1},Sn.jb=function(){return this.i?this.i.presentationTimeline.jb():!1},Sn.Yf=function(){if(this.i){var gn=this.i.variants;return gn.length?!gn[0].video:!1}return this.g&&this.g.src?this.g.videoTracks?this.g.videoTracks.length==0:this.g.videoHeight==0:!1},Sn.uc=function(){if(!this.dc)return{start:0,end:0};if(this.i){var gn=this.i.presentationTimeline;return{start:gn.Db(),end:gn.Na()}}return this.g&&this.g.src&&(gn=this.g.seekable,gn.length)?{start:gn.start(0),end:gn.end(gn.length-1)}:{start:0,end:0}},Sn.Wf=function(){this.U()&&(this.g.currentTime=this.uc().end)},Sn.keySystem=function(){var gn=this.drmInfo();return gn?gn.keySystem:""},Sn.drmInfo=function(){return this.m?this.m.g:null},Sn.ic=function(){return this.m?this.m.ic():1/0},Sn.Qc=function(){return this.m?this.m.Qc():{}},Sn.Fd=function(){return this.M?this.M.g==F0:!1},Sn.Rc=function(){return this.g?this.H?this.H.i:1:0},Sn.zg=function(gn){gn==0?Tu("A trick play rate of 0 is unsupported!"):(this.g.paused&&this.g.play(),this.H.set(gn),this.l==Am&&(this.s.playbackRateChanged(gn),dE(this.j,1<Math.abs(gn))))},Sn.nf=function(){var gn=this.H.Pc();this.l==Ym&&this.H.set(gn),this.l==Am&&(this.H.set(gn),this.s.playbackRateChanged(gn),dE(this.j,!1))},Sn.Xa=function(){if(this.i){for(var gn=this.j?this.j.l:null,bn=[],Cn=0,In=Dn(this.i.variants),Rn=In.next();!Rn.done;Rn=In.next())if(Rn=Rn.value,F_(Rn)){var jn=j_(Rn);jn.active=Rn==gn,jn.active||Cn==1||gn==null||Rn.video!=gn.video||Rn.audio!=gn.audio||(jn.active=!0),jn.active&&Cn++,bn.push(jn)}return bn}return this.g&&this.g.audioTracks?Array.from(this.g.audioTracks).map(function(Vn){return eS(Vn)}):[]},Sn.Fb=function(){if(this.i){for(var gn=this.j?this.j.o:null,bn=[],Cn=Dn(this.i.textStreams),In=Cn.next();!In.done;In=Cn.next()){In=In.value;var Rn=j0(In);Rn.active=In==gn,bn.push(Rn)}return bn}return this.g&&this.g.src&&this.g.textTracks?LS(this).map(function(jn){return q$(jn)}):[]},Sn.Ef=function(){return this.i?this.i.imageStreams.map(function(gn){return JE(gn)}):[]},Sn.Sf=function(gn,bn){var Cn=this,In,Rn,jn,Vn,Hn,Xn,ns,us,ps,fs,vs,Is,Ls,Cs,Ms,Zs,Fs,Ws,Gs,eu;return hs(function(au){return au.g==1?Cn.i?(In=Cn.i.imageStreams.find(function(du){return du.id==gn}))?In.segmentIndex?au.A(3):Qn(au,In.createSegmentIndex(),3):au.return(null):au.A(2):au.g!=2?(Rn=In.segmentIndex.find(bn),Rn==null||(jn=In.segmentIndex.get(Rn),Vn=jn.tilesLayout||In.tilesLayout,Hn=/(\d+)x(\d+)/.exec(Vn),!Hn)?au.return(null):(Xn=In.width||0,ns=In.height||0,us=parseInt(Hn[1],10),ps=parseInt(Hn[2],10),fs=Xn/us,vs=ns/ps,Is=us*ps,Ls=jn.l-jn.startTime,Cs=jn.s||Ls/Is,Ms=jn.startTime,Fs=Zs=0,1<Is&&(Ws=Math.floor((bn-jn.startTime)/Cs),Ms=jn.startTime+Ws*Cs,Zs=Ws%us*fs,Fs=Math.floor(Ws/us)*vs),Gs=!1,(eu=jn.o)&&(Gs=!0,vs=eu.height,Zs=eu.positionX,Fs=eu.positionY,fs=eu.width),au.return({imageHeight:ns,imageWidth:Xn,height:vs,positionX:Zs,positionY:Fs,startTime:Ms,duration:Cs,uris:jn.ya(),width:fs,sprite:Gs}))):au.return(null)})},Sn.Re=function(gn){if(this.i&&this.j){var bn=this.i.textStreams.find(function(In){return In.id==gn.id});bn&&bn!=this.j.o&&(u0(this.o.h,bn,!1),m_(this.j,bn),jS(this),this.vb=bn.language)}else if(this.g&&this.g.src&&this.g.textTracks){bn=LS(this),bn=Dn(bn);for(var Cn=bn.next();!Cn.done;Cn=bn.next())Cn=Cn.value,W$(Cn)==gn.id?Cn.mode=this.ca?"showing":"hidden":Cn.mode="disabled";jS(this)}},Sn.Se=function(gn,bn,Cn){if(bn=bn===void 0?!1:bn,Cn=Cn===void 0?0:Cn,this.i&&this.j){this.h.abr.enabled&&Tu("Changing tracks while abr manager is enabled will likely result in the selected track being overriden. Consider disabling abr before calling selectVariantTrack().");var In=this.i.variants.find(function(Rn){return Rn.id==gn.id});In&&F_(In)&&(bE(this,In,!1,bn,Cn),this.ub=new CA(In),$E(this))}else if(this.g&&this.g.audioTracks){for(bn=Array.from(this.g.audioTracks),bn=Dn(bn),Cn=bn.next();!Cn.done;Cn=bn.next())if(Cn=Cn.value,W$(Cn)==gn.id){l1(this,Cn);break}}},Sn.zf=function(){return HI(this.Xa())},Sn.Qf=function(){return HI(this.Fb())},Sn.yf=function(){return Array.from(wC(this.Xa()))},Sn.Pf=function(){return Array.from(wC(this.Fb()))},Sn.ge=function(gn,bn,Cn){if(Cn=Cn===void 0?0:Cn,this.i&&this.B){this.ub=new Pl(gn,bn||"",Cn,""),bn=function(Hn,Xn){return Hn.video||Xn.video?Hn.video&&Xn.video?Math.abs((Hn.video.height||0)-(Xn.video.height||0))+Math.abs((Hn.video.width||0)-(Xn.video.width||0)):1/0:0},gn=this.j.l;var In=this.ub.create(this.i.variants);Cn=null,In=Dn(In.values());for(var Rn=In.next();!Rn.done;Rn=In.next())Rn=Rn.value,(!Cn||bn(Cn,gn)>bn(Rn,gn))&&(Cn=Rn);Cn?(bn=j_(Cn),this.Se(bn,!0)):u1(this)}else if(this.g&&this.g.audioTracks){Rn=Array.from(this.g.audioTracks),gn=ml(gn),In=Cn=null,Rn=Dn(Rn);for(var jn=Rn.next();!jn.done;jn=Rn.next()){jn=jn.value;var Vn=eS(jn);ml(Vn.language)==gn&&(Cn=jn,bn?Vn.roles.includes(bn)&&(In=jn):Vn.roles.length==0&&(In=jn))}In?l1(this,In):Cn&&l1(this,Cn)}},Sn.he=function(gn,bn,Cn){if(Cn=Cn===void 0?!1:Cn,this.i&&this.B)this.vb=gn,this.cc=bn||"",this.$b=Cn,(gn=X$(this.i.textStreams,this.vb,this.cc,this.$b)[0]||null)&&gn!=this.j.o&&(u0(this.o.h,gn,!1),this.h.streaming.alwaysStreamText||this.Hd())&&(m_(this.j,gn),jS(this));else{var In=ml(gn);(gn=this.Fb().find(function(Rn){return ml(Rn.language)==In&&(!bn||Rn.roles.includes(bn))&&Rn.forced==Cn}))&&this.Re(gn)}},Sn.sg=function(gn){if(this.i&&this.B){for(var bn=null,Cn=Dn(this.i.variants),In=Cn.next();!In.done;In=Cn.next())if(In=In.value,In.audio.label==gn){bn=In;break}bn!=null&&(this.ub=new Pl(bn.language,"",0,gn),u1(this))}else if(this.g&&this.g.audioTracks){for(Cn=Array.from(this.g.audioTracks),bn=null,Cn=Dn(Cn),In=Cn.next();!In.done;In=Cn.next())In=In.value,In.label==gn&&(bn=In);bn&&l1(this,bn)}},Sn.Hd=function(){var gn=this.ca;return this.G?this.G.m.isTextVisible():this.g&&this.g.src&&this.g.textTracks?LS(this).some(function(bn){return bn.mode=="showing"}):gn},Sn.He=function(){return this.g&&this.g.src&&this.g.textTracks?UI(this).map(function(gn){return q$(gn)}):[]},Sn.Bf=function(gn){var bn=ml(gn),Cn=UI(this).filter(function(Hn){return ml(Hn.language)==bn});if(!Cn||!Cn.length)return[];gn=[];var In=new Set;Cn=Dn(Cn);for(var Rn=Cn.next();!Rn.done;Rn=Cn.next())if((Rn=Rn.value)&&Rn.cues){Rn=Dn(Rn.cues);for(var jn=Rn.next();!jn.done;jn=Rn.next()){var Vn=jn.value;(jn=Vn.id)&&jn!=""||(jn=Vn.startTime+"-"+Vn.endTime+"-"+Vn.text),Vn={id:jn,title:Vn.text,startTime:Vn.startTime,endTime:Vn.endTime},In.has(jn)||(gn.push(Vn),In.add(jn))}}return gn};function LS(gn){return Array.from(gn.g.textTracks).filter(function(bn){return bn.kind!="metadata"&&bn.kind!="chapters"&&bn.label!="Shaka Player TextTrack"})}function LI(gn){return Array.from(gn.g.textTracks).filter(function(bn){return bn.kind=="metadata"})}function UI(gn){return Array.from(gn.g.textTracks).filter(function(bn){return bn.kind=="chapters"})}Sn.xg=function(gn){if(gn=!!gn,this.ca!=gn){if(this.ca=gn,this.l==Am)this.G.m.setTextVisibility(gn),this.h.streaming.alwaysStreamText||(gn?this.j.o||(gn=X$(this.i.textStreams,this.vb,this.cc,this.$b),0<gn.length&&(m_(this.j,gn[0]),jS(this))):t0(this.j));else if(this.g&&this.g.src&&this.g.textTracks){var bn=LS(this);bn=Dn(bn);for(var Cn=bn.next();!Cn.done;Cn=bn.next())Cn=Cn.value,Cn.mode!="disabled"&&(Cn.mode=gn?"showing":"hidden")}FS(this)}},Sn.Nf=function(){if(!this.U())return null;var gn=this.Ga.l,bn=0;if(this.B)bn=this.B.Ic();else if(gn){if(gn.startTime==null)return new Date;bn=gn.startTime}return this.i?new Date(1e3*(this.i.presentationTimeline.i+bn)):this.g&&this.g.getStartDate?(gn=this.g.getStartDate(),isNaN(gn.getTime())?null:new Date(gn.getTime()+1e3*bn)):null},Sn.Ie=function(){if(!this.U())return null;if(this.i)return new Date(1e3*this.i.presentationTimeline.i);if(this.g&&this.g.getStartDate){var gn=this.g.getStartDate();return isNaN(gn.getTime())?null:gn}return null},Sn.Ma=function(){if(this.l==Am)return this.G.Ma();var gn={total:[],audio:[],video:[],text:[]};return this.l==Ym&&(gn.total=rl(this.g.buffered)),gn},Sn.getStats=function(){if(this.l!=Am&&this.l!=Ym)return{width:NaN,height:NaN,streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,switchHistory:[],stateHistory:[]};kE(this);var gn=this.g,bn=gn.currentTime/gn.duration;if(!isNaN(bn)){var Cn=this.o;bn=Math.round(100*bn),Cn.i=isNaN(Cn.i)?bn:Math.max(Cn.i,bn)}if(this.B&&(this.o.M=this.B.te(),this.o.P=this.B.ue()),gn.getVideoPlaybackQuality){Cn=gn.getVideoPlaybackQuality(),bn=this.o;var In=Number(Cn.totalVideoFrames);bn.L=Number(Cn.droppedVideoFrames),bn.J=In,this.o.H=Number(Cn.corruptedVideoFrames)}this.m?(Cn=this.m,Cn=Cn.H?Cn.H:NaN):Cn=NaN,this.o.s=Cn,this.l==Am&&((Cn=this.j.l)&&(this.o.B=(this.H?this.H.i:1)*Cn.bandwidth),Cn&&Cn.video&&(bn=this.o,In=Cn.video.height||NaN,bn.o=Cn.video.width||NaN,bn.l=In),this.U()&&(Cn=this.Ie().valueOf()+1e3*this.uc().end,this.o.D=(Date.now()-Cn)/1e3),this.i&&this.i.presentationTimeline&&(this.o.G=this.i.presentationTimeline.g),Cn=this.s.getBandwidthEstimate(),this.o.u=Cn),this.l==Ym&&(Cn=this.o,bn=gn.videoHeight||NaN,Cn.o=gn.videoWidth||NaN,Cn.l=bn);var Rn=this.o;gn=Rn.o,Cn=Rn.l,bn=Rn.B,In=Rn.J;var jn=Rn.L,Vn=Rn.H,Hn=Rn.P,Xn=Rn.M,ns=Rn.u,us=Rn.i,ps=Rn.m,fs=Rn.F,vs=Rn.j,Is=DS(Rn.g,"playing"),Ls=DS(Rn.g,"paused"),Cs=DS(Rn.g,"buffering"),Ms=Rn.s,Zs=Rn.D,Fs=Rn.G,Ws=Ky(Rn.g),Gs=[];Rn=Dn(Rn.h.g);for(var eu=Rn.next();!eu.done;eu=Rn.next())eu=eu.value,Gs.push({timestamp:eu.timestamp,id:eu.id,type:eu.type,fromAdaptation:eu.fromAdaptation,bandwidth:eu.bandwidth});return{width:gn,height:Cn,streamBandwidth:bn,decodedFrames:In,droppedFrames:jn,corruptedFrames:Vn,stallsDetected:Hn,gapsJumped:Xn,estimatedBandwidth:ns,completionPercent:us,loadLatency:ps,manifestTimeSeconds:fs,drmTimeSeconds:vs,playTime:Is,pauseTime:Ls,bufferingTime:Cs,licenseTime:Ms,liveLatency:Zs,maxSegmentDuration:Fs,stateHistory:Ws,switchHistory:Gs}},Sn.gf=function(gn,bn,Cn,In,Rn,jn,Vn){Vn=Vn===void 0?!1:Vn;var Hn=this,Xn,ns,us,ps,fs,vs,Is,Ls,Cs,Ms,Zs;return hs(function(Fs){switch(Fs.g){case 1:if(Hn.l!=Am&&Hn.l!=Ym)throw new Bs(1,7,7004);if(In){Fs.A(2);break}return Qn(Fs,kC(Hn,gn),3);case 3:In=Fs.h;case 2:if(Xn=[],Hn.F)try{Xn=Hn.F.getServerSideCuePoints()}catch{}if(Hn.l!=Ym){Fs.A(4);break}return Vn&&(Cn="forced"),Qn(Fs,jI(Hn,gn,bn,Cn,In,jn||"",Xn),5);case 5:if(ns=Hn.Fb(),us=ns.find(function(Ws){return Ws.language==bn&&Ws.label==(jn||"")&&Ws.kind==Cn}))return hy(Hn),Fs.return(us);throw new Bs(1,2,2012);case 4:if(ps=tl,fs=Hn.i.presentationTimeline.getDuration(),fs==1/0)throw new Bs(1,4,4033);if(!Xn.length){Fs.A(6);break}return Qn(Fs,o1(Hn,gn,Hn.D,Hn.h.streaming.retryParameters),7);case 7:vs=Fs.h,Is=s1(Hn,vs,In,Xn),Ls=new Blob([Is],{type:"text/vtt"}),gn=uE(Ls),In="text/vtt";case 6:if(Cs={id:Hn.Yd++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Gk(0,fs,[gn]),mimeType:In||"",codecs:Rn||"",kind:Cn,encrypted:!1,drmInfos:[],keyIds:new Set,language:bn,label:jn||null,type:ps.X,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!!Vn,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},Ms=_h(Cs.mimeType,Cs.codecs),Zs=r_(Ms),!Zs)throw new Bs(2,2,2014,In);return Hn.i.textStreams.push(Cs),hy(Hn),Fs.return(j0(Cs))}})},Sn.hf=function(gn,bn){var Cn=this,In,Rn,jn,Vn,Hn,Xn,ns,us,ps,fs,vs,Is,Ls,Cs,Ms,Zs;return hs(function(Fs){switch(Fs.g){case 1:if(Cn.l!=Am&&Cn.l!=Ym)throw new Bs(1,7,7004);if(Cn.l==Ym)throw new Bs(1,2,2016);if(bn){Fs.A(2);break}return Qn(Fs,kC(Cn,gn),3);case 3:bn=Fs.h;case 2:if(bn!="text/vtt")throw new Bs(1,2,2017,gn);if(In=tl,Rn=Cn.i.presentationTimeline.getDuration(),Rn==1/0)throw new Bs(1,4,4045);return Qn(Fs,o1(Cn,gn,Cn.D,Cn.h.streaming.retryParameters),4);case 4:if(jn=Fs.h,Vn=_c[bn],!Vn)throw new Bs(2,2,2014,bn);for(Hn=Vn(),Xn={periodStart:0,segmentStart:0,segmentEnd:Rn,vttOffset:0},ns=Pu(jn),us=Hn.parseMedia(ns,Xn),ps=[],fs={},vs=Dn(us),Is=vs.next();!Is.done;fs={Rb:fs.Rb},Is=vs.next())Ls=Is.value,fs.Rb=zp([gn],[Ls.payload])[0],Cs=new cl(Ls.startTime,Ls.endTime,function(Ws){return function(){return[Ws.Rb]}}(fs),0,null,null,0,0,1/0),fs.Rb.includes("#xywh")&&(Ms=fs.Rb.split("#xywh=")[1].split(","),Ms.length===4&&Cs.Xe({height:parseInt(Ms[3],10),positionX:parseInt(Ms[0],10),positionY:parseInt(Ms[1],10),width:parseInt(Ms[2],10)})),ps.push(Cs);return Zs={id:Cn.Yd++,originalId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new yl(ps),mimeType:bn||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",label:null,type:In.Wb,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1"},Cn.i.imageStreams.push(Zs),hy(Cn),Fs.return(JE(Zs))}})},Sn.ff=function(gn,bn,Cn){var In=this,Rn,jn,Vn,Hn;return hs(function(Xn){switch(Xn.g){case 1:if(In.l!=Am&&In.l!=Ym)throw new Bs(1,7,7004);if(Cn){Xn.A(2);break}return Qn(Xn,kC(In,gn),3);case 3:Cn=Xn.h;case 2:if(Rn=[],In.F)try{Rn=In.F.getServerSideCuePoints()}catch{}return Qn(Xn,jI(In,gn,bn,"chapters",Cn,"",Rn),4);case 4:if(jn=Xn.h,Vn=In.He(),Hn=Vn.find(function(ns){return ns.language==bn}),!Hn){Xn.A(5);break}return Qn(Xn,new Promise(function(ns,us){In.u.ia(jn,"load",ns),In.u.ia(jn,"error",function(){us(new Bs(1,2,2015))})}),6);case 6:return Xn.return(Hn);case 5:throw new Bs(1,2,2012)}})};function kC(gn,bn){var Cn,In;return hs(function(Rn){switch(Rn.g){case 1:return Cn=Q0(bn),(In=AE[Cn])?Rn.return(In):(Ts(Rn,2),Qn(Rn,gx(bn,gn.D,gn.h.streaming.retryParameters),4));case 4:In=Rn.h,ys(Rn,3);break;case 2:_s(Rn);case 3:if(In)return Rn.return(In);throw new Bs(1,2,2011,Cn)}})}function jI(gn,bn,Cn,In,Rn,jn,Vn){var Hn,Xn,ns,us;return hs(function(ps){if(ps.g==1)return Rn!="text/vtt"||Vn.length?Qn(ps,o1(gn,bn,gn.D,gn.h.streaming.retryParameters),3):ps.A(2);ps.g!=2&&(Hn=ps.h,Xn=s1(gn,Hn,Rn,Vn),ns=new Blob([Xn],{type:"text/vtt"}),bn=uE(ns),Rn="text/vtt"),us=document.createElement("track");var fs=gn.V,vs=bn;try{if(fs.g.enabled){var Is=Jk(fs);Is.ot=mC,Is.su=!0;var Ls=e1(Is),Cs=fC(vs,Ls)}else Cs=vs}catch(Ms){cp("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",Ms),Cs=vs}return us.src=Cs,us.label=jn,us.kind=In,us.srclang=Cn,gn.g.getAttribute("crossorigin")||gn.g.setAttribute("crossorigin","anonymous"),gn.g.appendChild(us),ps.return(us)})}function o1(gn,bn,Cn,In){var Rn,jn,Vn;return hs(function(Hn){if(Hn.g==1){Rn=Fy,jn=tm([bn],In),jn.method="GET";var Xn=gn.V;try{Xn.g.enabled&&a0(Xn,jn,{ot:mC,su:!0})}catch(ns){cp("CMCD_TEXT_ERROR","Could not generate text CMCD data.",ns)}return Qn(Hn,Cn.request(Rn,jn).promise,2)}return Vn=Hn.h,Hn.return(Vn.data)})}function s1(gn,bn,Cn,In){var Rn=_c[Cn];if(Rn)return Cn=Rn(),gn={periodStart:0,segmentStart:0,segmentEnd:gn.g.duration,vttOffset:0},bn=Pu(bn),bn=Cn.parseMedia(bn,gn),kp(bn,In);throw new Bs(2,2,2014,Cn)}Sn.ke=function(gn,bn){this.ec.width=gn,this.ec.height=bn},Sn.ce=function(gn){if(this.l==Am){var bn=this.j;if(gn=gn===void 0?.1:gn,bn.h.g)bn=!1;else if(bn.s)bn=!1;else{for(var Cn=Dn(bn.j.values()),In=Cn.next();!In.done;In=Cn.next())In=In.value,!In.nc||In.ra||In.Ka||(In.nc=!1,fy(bn,In,gn));bn=!0}}else bn=!1;return bn},Sn.Hf=function(){return Tu("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},Sn.If=function(){return this.Yc};function SE(gn){var bn=vE();return bn.streaming.failureCallback=function(Cn){if(gn.U()){var In=null;Cn.code==1001||Cn.code==1002?In=1:Cn.code==1003&&(In=.1),In!=null&&(Cn.severity=1,gn.ce(In))}},bn.textDisplayFactory=function(){return gn.Uc?new xm(gn.g,gn.Uc):new bm(gn.g)},bn}Sn.Ze=function(gn){this.Uc=gn};function pR(gn,bn){for(var Cn=new Set,In=Dn(bn.textStreams),Rn=In.next();!Rn.done;Rn=In.next())Rn=Rn.value,Rn.mimeType!="application/cea-608"&&Rn.mimeType!="application/cea-708"||Cn.add(Rn.originalId);for(In=Dn(bn.variants),Rn=In.next();!Rn.done;Rn=In.next())if((Rn=Rn.value.video)&&Rn.closedCaptions){for(var jn=Dn(Rn.closedCaptions.keys()),Vn=jn.next();!Vn.done;Vn=jn.next())if(Vn=Vn.value,!Cn.has(Vn)){var Hn=Vn.startsWith("CC")?"application/cea-608":"application/cea-708",Xn=new _d;Hn={id:gn.Yd++,originalId:Vn,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:Xn,mimeType:Hn,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:Rn.closedCaptions.get(Vn),label:null,type:Zu,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:Rn.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null},bn.textStreams.push(Hn),Cn.add(Vn)}}}function FI(gn,bn){return hs(function(Cn){if(Cn.g==1)return Qn(Cn,BI(gn,bn),2);TE(gn,bn),ms(Cn)})}function BI(gn,bn){var Cn;return hs(function(In){if(In.g==1)return Cn=gn.j?gn.j.l:null,Qn(In,wu(Cn,bn),2);BS(bn),ms(In)})}function TE(gn,bn){if(gn.l!=my){El(bn.variants,gn.h.restrictions,gn.ec)&&gn.j&&hy(gn);var Cn=gn.m?gn.m.g:null;if(Cn&&gn.m.u)for(var In=Dn(bn.variants),Rn=In.next();!Rn.done;Rn=In.next())Rn=Rn.value,$C(gn,Cn.keySystem,Rn.video),$C(gn,Cn.keySystem,Rn.audio);CC(gn,bn)}}function $C(gn,bn,Cn){if(Cn){Cn=Dn(Cn.drmInfos);for(var In=Cn.next();!In.done;In=Cn.next())if(In=In.value,In.keySystem==bn){In=Dn(In.initData||[]);for(var Rn=In.next();!Rn.done;Rn=In.next())Rn=Rn.value,X0(gn.m,Rn.initDataType,Rn.initData)}}}function VI(gn,bn){var Cn,In,Rn,jn,Vn;return hs(function(Hn){return Hn.g==1?(Cn=gn.audio,In=gn.video,Rn=function(Xn,ns){var us,ps,fs;return hs(function(vs){return vs.g==1?Xn?Qn(vs,Xn.createSegmentIndex(),2):vs.return(null):(ps=(us=Xn.segmentIndex.Cb(ns))?us.next().value:null,ps?(fs=ps.startTime,vs.return(fs)):vs.return(null))})},Qn(Hn,Rn(Cn,bn),2)):Hn.g!=3?(jn=Hn.h,Qn(Hn,Rn(In,bn),3)):(Vn=Hn.h,Vn!=null&&jn!=null?Hn.return(Math.max(Vn,jn)):Vn!=null?Hn.return(Vn):jn!=null?Hn.return(jn):Hn.return(bn))})}function US(gn){var bn=gn.Fd();if(gn.o&&gn.M&&gn.B){var Cn=gn.H;Cn.j=bn,eC(Cn),gn.V&&(Cn=gn.V,bn||Cn.i||(Cn.i=!0),Cn.i&&bn&&(Cn.l=!0),Cn.m=bn),kE(gn)}bn=new Map().set("buffering",bn),gn.dispatchEvent(op("buffering",bn))}function bC(gn){var bn=gn.g.playbackRate;bn!=0&&(gn.H&&gn.H.set(bn),bn=op("ratechange"),gn.dispatchEvent(bn))}function kE(gn){if(gn.o&&gn.M){var bn=gn.o.g;gn.M.g==F0?s0(bn,"buffering"):gn.g.paused?s0(bn,"paused"):gn.g.ended?s0(bn,"ended"):s0(bn,"playing")}}function $E(gn){try{CC(gn,gn.i)}catch(Cn){return cv(gn,Cn),!1}var bn=gn.i.variants.filter(function(Cn){return F_(Cn)});return bn=gn.ub.create(bn),gn.s.setVariants(Array.from(bn.values())),!0}function Vv(gn){return $E(gn)?gn.s.chooseVariant():null}function u1(gn){var bn=Vv(gn);bn&&bE(gn,bn,!0,!0,0)}function bE(gn,bn,Cn,In,Rn){var jn=gn.j.l;if(bn==jn)In&&r0(gn.j,bn,In,Rn,!0);else{var Vn=gn.o.h;Vn.h!=bn&&(Vn.h=bn,Vn.g.push({timestamp:Date.now()/1e3,id:bn.id,type:"variant",fromAdaptation:Cn,bandwidth:bn.bandwidth})),r0(gn.j,bn,In,Rn,void 0,Cn),In=null,jn&&(In=j_(jn)),bn=j_(bn),Cn?c1(gn,In,bn):d1(gn,In,bn)}}function l1(gn,bn){var Cn=Array.from(gn.g.audioTracks).find(function(In){return In.enabled});bn.enabled=!0,bn.id!==Cn.id&&(Cn.enabled=!1),Cn=eS(Cn),bn=eS(bn),d1(gn,Cn,bn)}function GI(gn,bn,Cn){if(gn.h.autoShowText==0)return!1;if(gn.h.autoShowText==1)return!0;var In=ml(gn.h.preferredTextLanguage);return Cn=ml(Cn.language),gn.h.autoShowText==2?Cv(Cn,In):gn.h.autoShowText==3?(gn=ml(bn.language),Cv(Cn,In)&&!Cv(gn,Cn)):(Tu("Invalid autoShowText setting!"),!1)}function c1(gn,bn,Cn){bn=new Map().set("oldTrack",bn).set("newTrack",Cn),gn.L&&Dx(gn.L,Cn),Cn=op("adaptation",bn),l0(gn,Cn)}function hy(gn){var bn=op("trackschanged");l0(gn,bn)}function d1(gn,bn,Cn){bn=new Map().set("oldTrack",bn).set("newTrack",Cn),gn.L&&Dx(gn.L,Cn),Cn=op("variantchanged",bn),l0(gn,Cn)}function jS(gn){var bn=op("textchanged");l0(gn,bn)}function FS(gn){var bn=op("texttrackvisibility");l0(gn,bn)}function xE(gn){var bn=new Map().set("newStatus",gn.h.abr.enabled);l0(gn,op("abrstatuschanged",bn))}function f1(gn,bn){if(bn.code!=1002&&bn.code!=1011||bn.category!=1||!navigator.onLine)return!1;var Cn=gn.h.streaming.maxDisabledTime;if(Cn==0)if(bn.code==1011)Cn=1;else return!1;bn=gn.Xa().find(function(Vn){return Vn.active});for(var In=gn.i,Rn=Dn(In.variants),jn=Rn.next();!jn.done;jn=Rn.next())jn=jn.value,jn.id===bn.id&&(jn.disabledUntilTime=Date.now()/1e3+Cn);return El(In.variants,gn.h.restrictions,gn.ec),bn=Vv(gn),bn?(In=gn.Ma().video.reduce(function(Vn,Hn){return Vn+Hn.end-Hn.start},0),bE(gn,bn,!1,!0,In),gn.$e.O(Cn),!0):!1}function cv(gn,bn){if(gn.l!=my)if(f1(gn,bn))bn.handled=!0;else{var Cn=op("error",new Map().set("detail",bn));gn.dispatchEvent(Cn),Cn.defaultPrevented&&(bn.handled=!0)}}function Gv(gn,bn,Cn){Cn=new Map().set("detail",{schemeIdUri:Cn.schemeIdUri,value:Cn.value,startTime:Cn.startTime,endTime:Cn.endTime,id:Cn.id,eventElement:Cn.eventElement}),gn.dispatchEvent(op(bn,Cn))}function CE(gn){if(!gn.g.error)return null;var bn=gn.g.error.code;if(bn==1)return null;var Cn=gn.g.error.msExtendedCode;return Cn&&(0>Cn&&(Cn+=Math.pow(2,32)),Cn=Cn.toString(16)),new Bs(2,3,3016,bn,Cn,gn.g.error.message)}function zI(gn,bn){if(gn.j){var Cn=Object.keys(bn),In=Cn.length==1&&Cn[0]=="00",Rn=!1;if(Cn.length){Cn=Dn(gn.i.variants);for(var jn=Cn.next();!jn.done;jn=Cn.next()){jn=jn.value;var Vn=[];jn.audio&&Vn.push(jn.audio),jn.video&&Vn.push(jn.video),Vn=Dn(Vn);for(var Hn=Vn.next();!Hn.done;Hn=Vn.next()){var Xn=Hn.value;if(Hn=jn.allowedByKeySystem,Xn.keyIds.size){jn.allowedByKeySystem=!0,Xn=Dn(Xn.keyIds);for(var ns=Xn.next();!ns.done;ns=Xn.next())ns=ns.value,ns=bn[In?"00":ns],jn.allowedByKeySystem=jn.allowedByKeySystem&&!!ns&&!AC.includes(ns)}Hn!=jn.allowedByKeySystem&&(Rn=!0)}}}(!Rn||$E(gn))&&((bn=gn.j.l)&&!bn.allowedByKeySystem&&u1(gn),Rn&&hy(gn))}}function xC(gn,bn,Cn){gn.J&&gn.J.onExpirationUpdated&&gn.J.onExpirationUpdated(bn,Cn),bn=op("expirationupdated"),gn.dispatchEvent(bn)}function Wm(gn,bn,Cn){0<bn&&(gn.U()||gn.Ye(bn)),bn=gn.getDuration(),Cn<bn&&(gn.U()||gn.Aa(Cn))}function CC(gn,bn){gn=gn.m?gn.m.Qc():{};var Cn=Object.keys(gn);Cn=Cn.length&&Cn[0]=="00";var In=!1,Rn=!1,jn=new Set,Vn=new Set;bn=Dn(bn.variants);for(var Hn=bn.next();!Hn.done;Hn=bn.next()){Hn=Hn.value;var Xn=[];Hn.audio&&Xn.push(Hn.audio),Hn.video&&Xn.push(Hn.video),Xn=Dn(Xn);for(var ns=Xn.next();!ns.done;ns=Xn.next())if(ns=ns.value,ns.keyIds.size){ns=Dn(ns.keyIds);for(var us=ns.next();!us.done;us=ns.next()){us=us.value;var ps=gn[Cn?"00":us];ps?AC.includes(ps)&&Vn.add(ps):jn.add(us)}}Hn.allowedByApplication?Hn.allowedByKeySystem&&(In=!0):Rn=!0}if(!In)throw gn={hasAppRestrictions:Rn,missingKeys:Array.from(jn),restrictedKeyStatuses:Array.from(Vn)},new Bs(2,4,4012,gn)}function BS(gn){if(!gn.variants.some(F_))throw new Bs(2,4,4032)}function l0(gn,bn){hs(function(Cn){if(Cn.g==1)return Qn(Cn,Promise.resolve(),2);gn.l!=my&&gn.dispatchEvent(bn),ms(Cn)})}function wC(gn){var bn=new Set;gn=Dn(gn);for(var Cn=gn.next();!Cn.done;Cn=gn.next())Cn=Cn.value,Cn.language?bn.add(ml(Cn.language)):bn.add("und");return bn}function HI(gn){var bn=new Map,Cn=new Map;gn=Dn(gn);for(var In=gn.next();!In.done;In=gn.next()){In=In.value;var Rn="und",jn=[];In.language&&(Rn=ml(In.language)),In.type=="variant"?jn=In.audioRoles:jn=In.roles,jn&&jn.length||(jn=[""]),bn.has(Rn)||bn.set(Rn,new Set),jn=Dn(jn);for(var Vn=jn.next();!Vn.done;Vn=jn.next())Vn=Vn.value,bn.get(Rn).add(Vn),In.label&&(Cn.has(Rn)||Cn.set(Rn,new Map),Cn.get(Rn).set(Vn,In.label))}var Hn=[];return bn.forEach(function(Xn,ns){Xn=Dn(Xn);for(var us=Xn.next();!us.done;us=Xn.next()){us=us.value;var ps=null;Cn.has(ns)&&Cn.get(ns).has(us)&&(ps=Cn.get(ns).get(us)),Hn.push({language:ns,role:us,label:ps})}}),Hn}function qm(){return new Bs(2,7,7e3)}function c0(gn,bn,Cn,In,Rn,jn){return In==gn&&Rn.mediaElement==jn.mediaElement&&Rn.uri==jn.uri&&Rn.mimeType==jn.mimeType?bn:Cn}function y_(){return{mediaElement:null,mimeType:null,startTime:null,ne:NaN,uri:null}}function p1(gn){return new Promise(function(bn,Cn){gn.mb=function(){return Cn(qm())},gn.bd=function(){return bn()},gn.onError=function(In){return Cn(In)},gn.dd=function(){return Cn(qm())}})}Ys("shaka.Player",nu),nu.prototype.setVideoContainer=nu.prototype.Ze,nu.prototype.getManifestParserFactory=nu.prototype.If,nu.prototype.getManifest=nu.prototype.Hf,nu.prototype.retryStreaming=nu.prototype.ce,nu.prototype.setMaxHardwareResolution=nu.prototype.ke,nu.prototype.addChaptersTrack=nu.prototype.ff,nu.prototype.addThumbnailsTrack=nu.prototype.hf,nu.prototype.addTextTrackAsync=nu.prototype.gf,nu.prototype.getStats=nu.prototype.getStats,nu.prototype.getBufferedInfo=nu.prototype.Ma,nu.prototype.getPresentationStartTimeAsDate=nu.prototype.Ie,nu.prototype.getPlayheadTimeAsDate=nu.prototype.Nf,nu.prototype.setTextTrackVisibility=nu.prototype.xg,nu.prototype.getChapters=nu.prototype.Bf,nu.prototype.getChaptersTracks=nu.prototype.He,nu.prototype.isTextTrackVisible=nu.prototype.Hd,nu.prototype.selectVariantsByLabel=nu.prototype.sg,nu.prototype.selectTextLanguage=nu.prototype.he,nu.prototype.selectAudioLanguage=nu.prototype.ge,nu.prototype.getTextLanguages=nu.prototype.Pf,nu.prototype.getAudioLanguages=nu.prototype.yf,nu.prototype.getTextLanguagesAndRoles=nu.prototype.Qf,nu.prototype.getAudioLanguagesAndRoles=nu.prototype.zf,nu.prototype.selectVariantTrack=nu.prototype.Se,nu.prototype.selectTextTrack=nu.prototype.Re,nu.prototype.getThumbnails=nu.prototype.Sf,nu.prototype.getImageTracks=nu.prototype.Ef,nu.prototype.getTextTracks=nu.prototype.Fb,nu.prototype.getVariantTracks=nu.prototype.Xa,nu.prototype.cancelTrickPlay=nu.prototype.nf,nu.prototype.trickPlay=nu.prototype.zg,nu.prototype.getPlaybackRate=nu.prototype.Rc,nu.prototype.isBuffering=nu.prototype.Fd,nu.prototype.getKeyStatuses=nu.prototype.Qc,nu.prototype.getExpiration=nu.prototype.ic,nu.prototype.drmInfo=nu.prototype.drmInfo,nu.prototype.keySystem=nu.prototype.keySystem,nu.prototype.goToLive=nu.prototype.Wf,nu.prototype.seekRange=nu.prototype.uc,nu.prototype.isAudioOnly=nu.prototype.Yf,nu.prototype.isInProgress=nu.prototype.jb,nu.prototype.isLive=nu.prototype.U,nu.prototype.getAdManager=nu.prototype.Ge,nu.prototype.getAssetUri=nu.prototype.Dd,nu.prototype.getNetworkingEngine=nu.prototype.jc,nu.prototype.getMediaElement=nu.prototype.Kf,nu.prototype.getLoadMode=nu.prototype.Gf,nu.prototype.resetConfiguration=nu.prototype.qg,nu.prototype.getBufferFullness=nu.prototype.Af,nu.prototype.getConfiguration=nu.prototype.getConfiguration,nu.prototype.configure=nu.prototype.configure,nu.prototype.load=nu.prototype.load,nu.prototype.updateStartTime=nu.prototype.Eg,nu.prototype.unload=nu.prototype.re,nu.prototype.detach=nu.prototype.detach,nu.prototype.attachCanvas=nu.prototype.kf,nu.prototype.attach=nu.prototype.Yb,nu.probeSupport=function(gn){gn=gn===void 0?!0:gn;var bn,Cn,In,Rn,jn,Vn;return hs(function(Hn){if(Hn.g==1)return bn={},gn?Qn(Hn,CM(),3):Hn.A(2);Hn.g!=2&&(bn=Hn.h);var Xn={};if(Ap()){for(var ns in cy)Xn[ns]=!0;for(var us in q_)Xn[us]=!0}ns={mpd:"application/dash+xml",m3u8:"application/x-mpegurl",ism:"application/vnd.ms-sstr+xml"},us=Dn(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]);for(var ps=us.next();!ps.done;ps=us.next())ps=ps.value,Xn[ps]=Ap()?!!cy[ps]:Em(ps);for(var fs in ns)Xn[fs]=Ap()?!!q_[fs]:Em(ns[fs]);for(Cn=Xn,fs='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(Kn(dy)),Xn={},fs=Dn(fs),ns=fs.next();!ns.done;ns=fs.next())ns=ns.value,Xn[ns]=Ap()?r_(ns)?!0:Fu(ns)||rv(ns):Em(ns),us=ns.split(";")[0],Xn[us]=Xn[us]||Xn[ns];In=Xn,Rn={manifest:Cn,media:In,drm:bn},jn=m1;for(Vn in jn)Rn[Vn]=jn[Vn]();return Hn.return(Rn)})},nu.isBrowserSupported=function(){if(pn.Promise||Tu("A Promise implementation or polyfill is required"),!(pn.Promise&&pn.Uint8Array&&Array.prototype.forEach)||gl("Trident/"))return!1;var gn=L_();return gn&&13>gn||!(pn.MediaKeys&&pn.navigator&&pn.navigator.requestMediaKeySystemAccess&&pn.MediaKeySystemAccess&&pn.MediaKeySystemAccess.prototype.getConfiguration)?!1:Ap()?!0:Em("application/x-mpegurl")},nu.setAdManagerFactory=function(gn){dv=gn},nu.registerSupportPlugin=function(gn,bn){m1[gn]=bn},nu.prototype.destroy=nu.prototype.destroy;var my=0,h1=1,Am=2,Ym=3;nu.LoadMode={DESTROYED:my,NOT_LOADED:h1,MEDIA_SOURCE:Am,SRC_EQUALS:Ym},nu.version="v4.3.6";var d0=["4","3"];bA=new function(gn){this.g=gn,this.i=kA,this.h=$A}(new rS(Number(d0[0]),Number(d0[1])));var AC=["output-restricted","internal-error"],m1={},dv=null,wE={mp4:"video/mp4",m4v:"video/mp4",m4a:"audio/mp4",webm:"video/webm",weba:"audio/webm",mkv:"video/webm",ts:"video/mp2t",ogv:"video/ogg",ogg:"audio/ogg",mpg:"video/mpeg",mpeg:"video/mpeg",m3u8:"application/x-mpegurl",mpd:"application/dash+xml",mp3:"audio/mpeg",aac:"audio/aac",flac:"audio/flac",wav:"audio/wav"},AE={sbv:"text/x-subviewer",srt:"text/srt",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml",lrc:"application/x-subtitle-lrc",ssa:"text/x-ssa",ass:"text/x-ssa"};function g1(){this.h=[],this.j=this.i=this.g=0}function zu(gn,bn,Cn){var In=this;this.h=gn,this.g=bn,this.m=Cn,this.i=!1,this.l=this.g.getVolume(),this.j=new Ul,this.j.C(this.g,google.ima.AdEvent.Type.PAUSED,function(){In.i=!0}),this.j.C(this.g,google.ima.AdEvent.Type.RESUMED,function(){In.i=!1})}Sn=zu.prototype,Sn.getDuration=function(){return this.h.getDuration()},Sn.getMinSuggestedDuration=function(){return this.h.getMinSuggestedDuration()},Sn.getRemainingTime=function(){return this.g.getRemainingTime()},Sn.isPaused=function(){return this.i},Sn.isSkippable=function(){return 0<=this.h.getSkipTimeOffset()},Sn.getTimeUntilSkippable=function(){var gn=this.h.getSkipTimeOffset();return gn=this.getRemainingTime()-gn,Math.max(gn,0)},Sn.canSkipNow=function(){return this.g.getAdSkippableState()},Sn.skip=function(){return this.g.skip()},Sn.pause=function(){return this.g.pause()},Sn.play=function(){return this.g.resume()},Sn.getVolume=function(){return this.g.getVolume()},Sn.setVolume=function(gn){return this.g.setVolume(gn)},Sn.isMuted=function(){return this.g.getVolume()==0},Sn.isLinear=function(){return this.h.isLinear()},Sn.resize=function(gn,bn){var Cn=!1,In=this.m;document.fullscreenEnabled?Cn=!!document.fullscreenElement:In.webkitSupportsFullscreen&&(Cn=In.webkitDisplayingFullscreen),this.g.resize(gn,bn,Cn?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)},Sn.setMuted=function(gn){gn?(this.l=this.getVolume(),this.setVolume(0)):this.setVolume(this.l)},Sn.getSequenceLength=function(){var gn=this.h.getAdPodInfo();return gn==null?1:gn.getTotalAds()},Sn.getPositionInSequence=function(){var gn=this.h.getAdPodInfo();return gn==null?1:gn.getAdPosition()},Sn.getTitle=function(){return this.h.getTitle()},Sn.getDescription=function(){return this.h.getDescription()},Sn.release=function(){this.g=this.h=null},Ys("shaka.ads.ClientSideAd",zu),zu.prototype.release=zu.prototype.release,zu.prototype.getDescription=zu.prototype.getDescription,zu.prototype.getTitle=zu.prototype.getTitle,zu.prototype.getPositionInSequence=zu.prototype.getPositionInSequence,zu.prototype.getSequenceLength=zu.prototype.getSequenceLength,zu.prototype.setMuted=zu.prototype.setMuted,zu.prototype.resize=zu.prototype.resize,zu.prototype.isLinear=zu.prototype.isLinear,zu.prototype.isMuted=zu.prototype.isMuted,zu.prototype.setVolume=zu.prototype.setVolume,zu.prototype.getVolume=zu.prototype.getVolume,zu.prototype.play=zu.prototype.play,zu.prototype.pause=zu.prototype.pause,zu.prototype.skip=zu.prototype.skip,zu.prototype.canSkipNow=zu.prototype.canSkipNow,zu.prototype.getTimeUntilSkippable=zu.prototype.getTimeUntilSkippable,zu.prototype.isSkippable=zu.prototype.isSkippable,zu.prototype.isPaused=zu.prototype.isPaused,zu.prototype.getRemainingTime=zu.prototype.getRemainingTime,zu.prototype.getMinSuggestedDuration=zu.prototype.getMinSuggestedDuration,zu.prototype.getDuration=zu.prototype.getDuration;function VS(gn,bn,Cn,In){var Rn=this;this.o=gn,this.i=bn,this.s=null,this.u=NaN,this.l=In,this.j=null,this.h=new Ul,google.ima.settings.setLocale(Cn),gn=new google.ima.AdDisplayContainer(this.o,this.i),gn.initialize(),this.m=new google.ima.AdsLoader(gn),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.3.6"),this.g=null,this.h.ia(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(jn){Xm(Rn,jn)}),this.h.C(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,function(jn){Im(Rn,jn)}),this.h.C(this.i,"ended",function(){Rn.m.contentComplete()})}VS.prototype.stop=function(){this.g&&this.g.stop(),this.o&&Xk(this.o)},VS.prototype.release=function(){this.stop(),this.s&&this.s.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy()};function Im(gn,bn){bn.getError(),f0(gn,null),gn.l(new Ju("ad-cue-points-changed",new Map().set("cuepoints",[])))}function Xm(gn,bn){gn.l(new Ju("ads-loaded",new Map().set("loadTime",Date.now()/1e3-gn.u))),gn.g=bn.getAdsManager(gn.i),gn.l(new Ju("ima-ad-manager-loaded",new Map().set("imaAdManager",gn.g)));var Cn=gn.g.getCuePoints();if(Cn.length){bn=[],Cn=Dn(Cn);for(var In=Cn.next();!In.done;In=Cn.next())bn.push({start:In.value,end:null});gn.l(new Ju("ad-cue-points-changed",new Map().set("cuepoints",bn)))}KI(gn);try{gn.g.init(gn.i.offsetWidth,gn.i.offsetHeight,GS(gn)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL),gn.h.C(gn.i,"loadeddata",function(){gn.g.resize(gn.i.offsetWidth,gn.i.offsetHeight,GS(gn)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),"ResizeObserver"in pn?(gn.s=new ResizeObserver(function(){gn.g.resize(gn.i.offsetWidth,gn.i.offsetHeight,GS(gn)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),gn.s.observe(gn.i)):gn.h.C(document,"fullscreenchange",function(){gn.g.resize(gn.i.offsetWidth,gn.i.offsetHeight,GS(gn)?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL)}),gn.h.ia(gn.i,"play",function(){gn.g.start()})}catch{f0(gn,null)}}function GS(gn){return document.fullscreenEnabled?!!document.fullscreenElement:(gn=gn.i,gn.webkitSupportsFullscreen?gn.webkitDisplayingFullscreen:!1)}function KI(gn){function bn(Cn,In){Cn=new Map().set("originalEvent",Cn),gn.l(new Ju(In,Cn))}gn.h.C(gn.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(Cn){Im(gn,Cn)}),gn.h.C(gn.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(Cn){y1(gn,Cn)}),gn.h.C(gn.g,google.ima.AdEvent.Type.STARTED,function(Cn){y1(gn,Cn)}),gn.h.C(gn.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(Cn){bn(Cn,"ad-first-quartile")}),gn.h.C(gn.g,google.ima.AdEvent.Type.MIDPOINT,function(Cn){bn(Cn,"ad-midpoint")}),gn.h.C(gn.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(Cn){bn(Cn,"ad-third-quartile")}),gn.h.C(gn.g,google.ima.AdEvent.Type.COMPLETE,function(Cn){bn(Cn,"ad-complete")}),gn.h.C(gn.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(Cn){f0(gn,Cn)}),gn.h.C(gn.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(Cn){f0(gn,Cn)}),gn.h.C(gn.g,google.ima.AdEvent.Type.SKIPPED,function(Cn){bn(Cn,"ad-skipped")}),gn.h.C(gn.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(Cn){bn(Cn,"ad-volume-changed")}),gn.h.C(gn.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(Cn){bn(Cn,"ad-muted")}),gn.h.C(gn.g,google.ima.AdEvent.Type.PAUSED,function(Cn){gn.j&&(gn.j.i=!0,bn(Cn,"ad-paused"))}),gn.h.C(gn.g,google.ima.AdEvent.Type.RESUMED,function(Cn){gn.j&&(gn.j.i=!1,bn(Cn,"ad-resumed"))}),gn.h.C(gn.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(Cn){gn.j&&bn(Cn,"ad-skip-state-changed")}),gn.h.C(gn.g,google.ima.AdEvent.Type.CLICK,function(Cn){bn(Cn,"ad-clicked")}),gn.h.C(gn.g,google.ima.AdEvent.Type.AD_PROGRESS,function(Cn){bn(Cn,"ad-progress")}),gn.h.C(gn.g,google.ima.AdEvent.Type.AD_BUFFERING,function(Cn){bn(Cn,"ad-buffering")}),gn.h.C(gn.g,google.ima.AdEvent.Type.IMPRESSION,function(Cn){bn(Cn,"ad-impression")}),gn.h.C(gn.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(Cn){bn(Cn,"ad-duration-changed")}),gn.h.C(gn.g,google.ima.AdEvent.Type.USER_CLOSE,function(Cn){bn(Cn,"ad-closed")}),gn.h.C(gn.g,google.ima.AdEvent.Type.LOADED,function(Cn){bn(Cn,"ad-loaded")}),gn.h.C(gn.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(Cn){bn(Cn,"all-ads-completed")}),gn.h.C(gn.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(Cn){bn(Cn,"ad-linear-changed")}),gn.h.C(gn.g,google.ima.AdEvent.Type.AD_METADATA,function(Cn){bn(Cn,"ad-metadata")}),gn.h.C(gn.g,google.ima.AdEvent.Type.LOG,function(Cn){bn(Cn,"ad-recoverable-error")}),gn.h.C(gn.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(Cn){bn(Cn,"ad-break-ready")}),gn.h.C(gn.g,google.ima.AdEvent.Type.INTERACTION,function(Cn){bn(Cn,"ad-interaction")})}function y1(gn,bn){var Cn=bn.getAd();Cn?(gn.j=new zu(Cn,gn.g,gn.i),bn=new Map().set("ad",gn.j).set("sdkAdObject",Cn).set("originalEvent",bn),gn.l(new Ju("ad-started",bn)),gn.j.isLinear()&&(gn.o.setAttribute("ad-active","true"),gn.i.pause(),gn.j.setVolume(gn.i.volume),gn.i.muted&&gn.j.setMuted(!0))):Tu("The IMA SDK fired a "+bn.type+" event with no associated ad. Unable to play ad!")}function f0(gn,bn){gn.l(new Ju("ad-stopped",new Map().set("originalEvent",bn))),gn.j&&gn.j.isLinear()&&(gn.o.removeAttribute("ad-active"),gn.i.ended||gn.i.play())}function nl(gn,bn){this.i=gn,this.h=null,this.g=bn}Sn=nl.prototype,Sn.getDuration=function(){return this.h?this.h.duration:-1},Sn.getMinSuggestedDuration=function(){return this.getDuration()},Sn.getRemainingTime=function(){return this.h?this.h.duration-this.h.currentTime:-1},Sn.isPaused=function(){return this.g.paused},Sn.isSkippable=function(){return this.i.isSkippable()},Sn.getTimeUntilSkippable=function(){var gn=this.i.getSkipTimeOffset();return gn=this.getRemainingTime()-gn,Math.max(gn,0)},Sn.canSkipNow=function(){return this.getTimeUntilSkippable()==0},Sn.skip=function(){this.g.currentTime+=this.getRemainingTime()},Sn.pause=function(){return this.g.pause()},Sn.play=function(){return this.g.play()},Sn.getVolume=function(){return this.g.volume},Sn.setVolume=function(gn){this.g.volume=gn},Sn.isMuted=function(){return this.g.muted},Sn.isLinear=function(){return!0},Sn.resize=function(){},Sn.setMuted=function(gn){this.g.muted=gn},Sn.getSequenceLength=function(){var gn=this.i.getAdPodInfo();return gn==null?1:gn.getTotalAds()},Sn.getPositionInSequence=function(){var gn=this.i.getAdPodInfo();return gn==null?1:gn.getAdPosition()},Sn.getTitle=function(){return this.i.getTitle()},Sn.getDescription=function(){return this.i.getDescription()},Sn.release=function(){this.g=this.h=this.i=null},Ys("shaka.ads.ServerSideAd",nl),nl.prototype.release=nl.prototype.release,nl.prototype.getDescription=nl.prototype.getDescription,nl.prototype.getTitle=nl.prototype.getTitle,nl.prototype.getPositionInSequence=nl.prototype.getPositionInSequence,nl.prototype.getSequenceLength=nl.prototype.getSequenceLength,nl.prototype.setMuted=nl.prototype.setMuted,nl.prototype.resize=nl.prototype.resize,nl.prototype.isLinear=nl.prototype.isLinear,nl.prototype.isMuted=nl.prototype.isMuted,nl.prototype.setVolume=nl.prototype.setVolume,nl.prototype.getVolume=nl.prototype.getVolume,nl.prototype.play=nl.prototype.play,nl.prototype.pause=nl.prototype.pause,nl.prototype.skip=nl.prototype.skip,nl.prototype.canSkipNow=nl.prototype.canSkipNow,nl.prototype.getTimeUntilSkippable=nl.prototype.getTimeUntilSkippable,nl.prototype.isSkippable=nl.prototype.isSkippable,nl.prototype.isPaused=nl.prototype.isPaused,nl.prototype.getRemainingTime=nl.prototype.getRemainingTime,nl.prototype.getMinSuggestedDuration=nl.prototype.getMinSuggestedDuration,nl.prototype.getDuration=nl.prototype.getDuration;function v1(gn,bn,Cn,In){var Rn=this;this.s=gn,this.l=bn,this.j=null,this.G=NaN,this.i=In,this.F=!1,this.u=this.m=this.o=null,this.B="",this.D=[],this.h=new Ul,gn=new google.ima.dai.api.UiSettings,gn.setLocale(Cn),this.g=new google.ima.dai.api.StreamManager(this.l,this.s,gn),this.i(new Ju("ima-stream-manager-loaded",new Map().set("imaStreamManager",this.g))),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(jn){WI(Rn,jn)}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){Rn.B.length?Rn.j.resolve(Rn.B):Rn.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),Rn.j=null}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(jn){jn=jn.getAd(),Rn.m=new nl(jn,Rn.l),Rn.u&&(Rn.m.h=Rn.u),Rn.i(new Ju("ad-started",new Map().set("ad",Rn.m))),Rn.s.setAttribute("ad-active","true")}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){Rn.s.removeAttribute("ad-active");var jn=Rn.l.currentTime;Rn.o&&Rn.o>jn&&(Rn.l.currentTime=Rn.o,Rn.o=null)}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(jn){Rn.u=jn.getStreamData().adProgressData,Rn.m&&(Rn.m.h=Rn.u)}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){Rn.i(new Ju("ad-first-quartile"))}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){Rn.i(new Ju("ad-midpoint"))}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){Rn.i(new Ju("ad-third-quartile"))}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){Rn.i(new Ju("ad-complete")),Rn.i(new Ju("ad-stopped")),Rn.s.removeAttribute("ad-active"),Rn.m=null}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){Rn.i(new Ju("ad-skipped")),Rn.i(new Ju("ad-stopped"))}),this.h.C(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(jn){var Vn=jn.getStreamData();jn=[],Vn=Dn(Vn.cuepoints);for(var Hn=Vn.next();!Hn.done;Hn=Vn.next())Hn=Hn.value,jn.push({start:Hn.start,end:Hn.end});Rn.D=jn,Rn.i(new Ju("ad-cue-points-changed",new Map().set("cuepoints",jn)))})}v1.prototype.stop=function(){this.B="",this.o=null,this.D=[]},v1.prototype.release=function(){this.stop(),this.h&&this.h.release()},v1.prototype.onCueMetadataChange=function(gn){if(gn.key&&gn.data){var bn={};bn[gn.key]=gn.data,this.g.onTimedMetadata(bn)}};function WI(gn,bn){gn.i(new Ju("ads-loaded",new Map().set("loadTime",Date.now()/1e3-gn.G))),bn=bn.getStreamData().url,gn.j.resolve(bn),gn.j=null,gn.F||gn.h.C(gn.l,"seeked",function(){var Cn=gn.l.currentTime;if(Cn!=0){gn.g.streamTimeForContentTime(Cn);var In=gn.g.previousCuePointForStreamTime(Cn);In&&!In.played&&(gn.o=Cn,gn.l.currentTime=In.start)}})}function cu(){hl.call(this),this.g=this.i=null,this.h=new g1,this.j=navigator.language}as(cu,hl),Sn=cu.prototype,Sn.setLocale=function(gn){this.j=gn},Sn.initClientSide=function(gn,bn){var Cn=this;if(!pn.google||!google.ima||!google.ima.AdsLoader)throw new Bs(2,10,1e4);this.i&&this.i.release(),this.i=new VS(gn,bn,this.j,function(In){if(In&&In.type)switch(In.type){case"ads-loaded":Cn.h.h.push(In.loadTime);break;case"ad-started":Cn.h.g++;break;case"ad-complete":Cn.h.i++;break;case"ad-skipped":Cn.h.j++}Cn.dispatchEvent(In)})},Sn.release=function(){this.i&&(this.i.release(),this.i=null),this.g&&(this.g.release(),this.g=null),hl.prototype.release.call(this)},Sn.onAssetUnload=function(){this.i&&this.i.stop(),this.g&&this.g.stop(),this.dispatchEvent(new Ju("ad-stopped")),this.h=new g1},Sn.requestClientSideAds=function(gn){if(!this.i)throw new Bs(1,10,10001);var bn=this.i;bn.u=Date.now()/1e3,bn.m.requestAds(gn)},Sn.initServerSide=function(gn,bn){var Cn=this;if(!pn.google||!google.ima||!google.ima.dai)throw new Bs(2,10,10002);this.g&&this.g.release(),this.g=new v1(gn,bn,this.j,function(In){if(In&&In.type)switch(In.type){case"ads-loaded":Cn.h.h.push(In.loadTime);break;case"ad-started":Cn.h.g++;break;case"ad-complete":Cn.h.i++;break;case"ad-skipped":Cn.h.j++}Cn.dispatchEvent(In)})},Sn.requestServerSideStream=function(gn,bn){if(bn=bn===void 0?"":bn,!this.g)throw new Bs(1,10,10003);gn.adTagParameters||(gn.adTagParameters={});var Cn=gn.adTagParameters;return(Cn.mpt||Cn.mpv)&&Tu('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),gn.adTagParameters.mpt="shaka-player",gn.adTagParameters.mpv="v4.3.6",Cn=this.g,Cn.j?gn=Promise.reject(new Bs(1,10,10004)):(gn instanceof google.ima.dai.api.LiveStreamRequest&&(Cn.F=!0),Cn.j=new bl,Cn.g.requestStream(gn),Cn.B=bn||"",Cn.G=Date.now()/1e3,gn=Cn.j),gn},Sn.replaceServerSideAdTagParameters=function(gn){if(!this.g)throw new Bs(1,10,10003);(gn.mpt||gn.mpv)&&Tu('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overriden.'),gn.mpt="Shaka Player",gn.mpv="v4.3.6",this.g.g.replaceAdTagParameters(gn)},Sn.getServerSideCuePoints=function(){if(!this.g)throw new Bs(1,10,10003);return this.g.D},Sn.getStats=function(){var gn=this.h;return{loadTimes:gn.h,started:gn.g,playedCompletely:gn.i,skipped:gn.j}},Sn.onDashTimedMetadata=function(gn){if(this.g&&gn.schemeIdUri=="urn:google:dai:2018"){var bn=gn.schemeIdUri,Cn=gn.eventElement?gn.eventElement.getAttribute("messageData"):null;this.g.g.processMetadata(bn,Cn,gn.startTime)}},Sn.onHlsTimedMetadata=function(gn,bn){this.g&&this.g.g.processMetadata("ID3",gn.data,bn)},Sn.onCueMetadataChange=function(gn){this.g&&this.g.onCueMetadataChange(gn)},Ys("shaka.ads.AdManager",cu),cu.prototype.onCueMetadataChange=cu.prototype.onCueMetadataChange,cu.prototype.onHlsTimedMetadata=cu.prototype.onHlsTimedMetadata,cu.prototype.onDashTimedMetadata=cu.prototype.onDashTimedMetadata,cu.prototype.getStats=cu.prototype.getStats,cu.prototype.getServerSideCuePoints=cu.prototype.getServerSideCuePoints,cu.prototype.replaceServerSideAdTagParameters=cu.prototype.replaceServerSideAdTagParameters,cu.prototype.requestServerSideStream=cu.prototype.requestServerSideStream,cu.prototype.initServerSide=cu.prototype.initServerSide,cu.prototype.requestClientSideAds=cu.prototype.requestClientSideAds,cu.prototype.onAssetUnload=cu.prototype.onAssetUnload,cu.prototype.release=cu.prototype.release,cu.prototype.initClientSide=cu.prototype.initClientSide,cu.prototype.setLocale=cu.prototype.setLocale,cu.ADS_LOADED="ads-loaded",cu.AD_STARTED="ad-started",cu.AD_FIRST_QUARTILE="ad-first-quartile",cu.AD_MIDPOINT="ad-midpoint",cu.AD_THIRD_QUARTILE="ad-third-quartile",cu.AD_COMPLETE="ad-complete",cu.AD_STOPPED="ad-stopped",cu.AD_SKIPPED="ad-skipped",cu.AD_VOLUME_CHANGED="ad-volume-changed",cu.AD_MUTED="ad-muted",cu.AD_PAUSED="ad-paused",cu.AD_RESUMED="ad-resumed",cu.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",cu.CUEPOINTS_CHANGED="ad-cue-points-changed",cu.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",cu.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",cu.AD_CLICKED="ad-clicked",cu.AD_PROGRESS="ad-progress",cu.AD_BUFFERING="ad-buffering",cu.AD_IMPRESSION="ad-impression",cu.AD_DURATION_CHANGED="ad-duration-changed",cu.AD_CLOSED="ad-closed",cu.AD_LOADED="ad-loaded",cu.ALL_ADS_COMPLETED="all-ads-completed",cu.AD_LINEAR_CHANGED="ad-linear-changed",cu.AD_METADATA="ad-metadata",cu.AD_RECOVERABLE_ERROR="ad-recoverable-error",cu.AD_BREAK_READY="ad-break-ready",cu.AD_INTERACTION="ad-interaction",dv=function(){return new cu};function _1(gn){return JSON.stringify(gn,function(bn,Cn){if(typeof Cn!="function"){if(Cn instanceof Event||Cn instanceof Ju){var In={};for(Rn in Cn)(bn=Cn[Rn])&&typeof bn=="object"?Rn=="detail"&&(In[Rn]=bn):Rn in Event||(In[Rn]=bn);return In}if(Cn instanceof Error){var Rn=new Set(["name","message","stack"]);for(In in Cn)Rn.add(In);for(bn=Dn(Object.getOwnPropertyNames(Cn)),In=bn.next();!In.done;In=bn.next())Rn.add(In.value);for(bn={},Rn=Dn(Rn),In=Rn.next();!In.done;In=Rn.next())In=In.value,bn[In]=Cn[In];Cn={__type__:"Error",contents:bn}}else if(Cn instanceof TimeRanges){for(Rn={__type__:"TimeRanges",length:Cn.length,start:[],end:[]},Cn=Dn(rl(Cn)),In=Cn.next();!In.done;In=Cn.next())In=In.value,bn=In.end,Rn.start.push(In.start),Rn.end.push(bn);Cn=Rn}else Cn=Cn instanceof Uint8Array?{__type__:"Uint8Array",entries:Array.from(Cn)}:typeof Cn=="number"?isNaN(Cn)?"NaN":isFinite(Cn)?Cn:0>Cn?"-Infinity":"Infinity":Cn;return Cn}})}function E1(gn){return JSON.parse(gn,function(bn,Cn){if(Cn=="NaN")var In=NaN;else if(Cn=="-Infinity")In=-1/0;else if(Cn=="Infinity")In=1/0;else if(Cn&&typeof Cn=="object"&&Cn.__type__=="TimeRanges")In=hR(Cn);else if(Cn&&typeof Cn=="object"&&Cn.__type__=="Uint8Array")In=new Uint8Array(Cn.entries);else if(Cn&&typeof Cn=="object"&&Cn.__type__=="Error"){bn=Cn.contents,Cn=Error(bn.message);for(In in bn)Cn[In]=bn[In];In=Cn}else In=Cn;return In})}function hR(gn){return{length:gn.length,start:function(bn){return gn.start[bn]},end:function(bn){return gn.end[bn]}}}var zS="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),mR="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),S1=["loop","playbackRate"],T1=["pause","play"],il={getAssetUri:2,getAudioLanguages:4,getAudioLanguagesAndRoles:4,getBufferFullness:1,getBufferedInfo:2,getExpiration:2,getKeyStatuses:2,getPlaybackRate:2,getTextLanguages:4,getTextLanguagesAndRoles:4,getImageTracks:2,getThumbnails:2,isAudioOnly:10,isBuffering:1,isInProgress:1,isLive:10,isTextTrackVisible:1,keySystem:10,seekRange:1,getLoadMode:10},p0={getConfiguration:4,getStats:5,getTextTracks:2,getVariantTracks:2},IC={getPlayheadTimeAsDate:1,getPresentationStartTimeAsDate:20},Ru=[["getConfiguration","configure"]],PC=[["isTextTrackVisible","setTextTrackVisibility"]],OC="addChaptersTrack addTextTrackAsync addThumbnailsTrack cancelTrickPlay configure getChapters getChaptersTracks resetConfiguration retryStreaming selectAudioLanguage selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel setTextTrackVisibility trickPlay updateStartTime goToLive".split(" "),gR=["attach","attachCanvas","detach","load","unload"];function k1(gn,bn,Cn,In,Rn,jn,Vn){var Hn=this;this.G=gn,this.M=Vn,this.j=new Hu(bn),this.P=Cn,this.u=!1,this.s=In,this.F=Rn,this.J=jn,this.h=this.m=!1,this.L="",this.o=null,this.B=function(){return qS(Hn)},this.D=function(Xn,ns){switch(Xn=E1(ns),Xn.type){case"event":var us=Xn.targetName,ps=ax(Xn.event);Hn.s(us,ps);break;case"update":us=Xn.update;for(ps in us){Xn=Hn.g[ps]||{};for(var fs in us[ps])Xn[fs]=us[ps][fs]}Hn.u&&(Hn.P(),Hn.u=!1);break;case"asyncComplete":if(ps=Xn.id,fs=Xn.error,Xn=Hn.i[ps],delete Hn.i[ps],Xn)if(fs){ps=new Bs(fs.severity,fs.category,fs.code);for(us in fs)ps[us]=fs[us];Xn.reject(ps)}else Xn.resolve()}},this.g={video:{},player:{}},this.H=0,this.i={},this.l=null,h0.add(this)}Sn=k1.prototype,Sn.destroy=function(){return h0.delete(this),$1(this),Pm&&WS(this),this.j&&(this.j.stop(),this.j=null),this.F=this.s=null,this.h=this.m=!1,this.D=this.B=this.l=this.i=this.g=this.o=null,Promise.resolve()},Sn.sa=function(){return this.h},Sn.ae=function(){return this.L},Sn.init=function(){if(this.G.length)if(pn.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.j.Mb();var gn=new chrome.cast.SessionRequest(this.G,[],null,this.M,null);gn=new chrome.cast.ApiConfig(gn,function(bn){for(var Cn=Dn(h0),In=Cn.next();!In.done;In=Cn.next())KS(In.value,bn)},function(bn){for(var Cn=Dn(h0),In=Cn.next();!In.done;In=Cn.next())In=In.value,b1=bn=="available",In.j.Mb()},"origin_scoped"),chrome.cast.initialize(gn,function(){},function(){}),b1&&this.j.O(vR),(gn=Pm)&&gn.status!=chrome.cast.SessionStatus.STOPPED?KS(this,gn):Pm=null}else pn.__onGCastApiAvailable!==MC&&(x1=pn.__onGCastApiAvailable||null,pn.__onGCastApiAvailable=MC)},Sn.ie=function(gn){this.o=gn,this.h&&IE(this,{type:"appData",appData:this.o})},Sn.cast=function(gn){var bn=this;return hs(function(Cn){if(!bn.m)throw new Bs(1,8,8e3);if(!b1)throw new Bs(1,8,8001);if(bn.h)throw new Bs(1,8,8002);return bn.l=new bl,chrome.cast.requestSession(function(In){return HS(bn,gn,In)},function(In){return qI(bn,In)}),Qn(Cn,bn.l,0)})};function yR(gn){if(gn.h){var bn=gn.J();chrome.cast.requestSession(function(Cn){return HS(gn,bn,Cn)},function(Cn){return qI(gn,Cn)})}}Sn.Ab=function(){if(this.h){if($1(this),Pm){WS(this);try{Pm.stop(function(){},function(){})}catch{}Pm=null}qS(this)}},Sn.get=function(gn,bn){var Cn=this;if(gn=="video"){if(T1.includes(bn))return function(){return Cn.Pe.apply(Cn,[gn,bn].concat(Kn(lu.apply(0,arguments))))}}else if(gn=="player"){if(IC[bn]&&!this.get("player","isLive")())return function(){};if(OC.includes(bn))return function(){return Cn.Pe.apply(Cn,[gn,bn].concat(Kn(lu.apply(0,arguments))))};if(gR.includes(bn))return function(){return Cn.ng.apply(Cn,[gn,bn].concat(Kn(lu.apply(0,arguments))))};if(il[bn]||p0[bn])return function(){return Cn.g[gn][bn]}}return this.g[gn][bn]},Sn.set=function(gn,bn,Cn){this.g[gn][bn]=Cn,IE(this,{type:"set",targetName:gn,property:bn,value:Cn})};function HS(gn,bn,Cn){Pm=Cn,Cn.addUpdateListener(gn.B),Cn.addMessageListener("urn:x-cast:com.google.shaka.v2",gn.D),qS(gn),IE(gn,{type:"init",initState:bn,appData:gn.o}),gn.l.resolve()}function qI(gn,bn){var Cn=8003;switch(bn.code){case"cancel":Cn=8004;break;case"timeout":Cn=8005;break;case"receiver_unavailable":Cn=8006}gn.l.reject(new Bs(2,8,Cn,bn))}Sn.Pe=function(gn,bn){IE(this,{type:"call",targetName:gn,methodName:bn,args:lu.apply(2,arguments)})},Sn.ng=function(gn,bn){var Cn=lu.apply(2,arguments),In=new bl,Rn=this.H.toString();this.H++,this.i[Rn]=In;try{IE(this,{type:"asyncCall",targetName:gn,methodName:bn,args:Cn,id:Rn})}catch(jn){In.reject(jn)}return In};function KS(gn,bn){var Cn=gn.J();gn.l=new bl,gn.u=!0,HS(gn,Cn,bn)}function WS(gn){var bn=Pm;bn.removeUpdateListener(gn.B),bn.removeMessageListener("urn:x-cast:com.google.shaka.v2",gn.D)}function qS(gn){var bn=Pm?Pm.status=="connected":!1;if(gn.h&&!bn){gn.F();for(var Cn in gn.g)gn.g[Cn]={};$1(gn)}gn.h=bn,gn.L=bn?Pm.receiver.friendlyName:"",gn.j.Mb()}function $1(gn){for(var bn in gn.i){var Cn=gn.i[bn];delete gn.i[bn],Cn.reject(new Bs(1,7,7e3))}}function IE(gn,bn){bn=_1(bn);var Cn=Pm;try{Cn.sendMessage("urn:x-cast:com.google.shaka.v2",bn,function(){},wp)}catch(In){throw bn=new Bs(2,8,8005,In),Cn=new Ju("error",new Map().set("detail",bn)),gn.s("player",Cn),gn.Ab(),bn}}var vR=.02,b1=!1,Pm=null,x1=null,h0=new Set;function MC(gn){if(x1?pn.__onGCastApiAvailable=x1:delete pn.__onGCastApiAvailable,x1=null,gn)for(var bn=Dn(h0),Cn=bn.next();!Cn.done;Cn=bn.next())Cn.value.init();typeof pn.__onGCastApiAvailable=="function"&&pn.__onGCastApiAvailable(gn)}function ep(gn,bn,Cn,In){In=In===void 0?!1:In,hl.call(this);var Rn=this;this.i=gn,this.h=bn,this.m=this.o=this.j=this.s=this.l=null,this.D=Cn,this.B=In,this.u=new Map,this.g=new k1(Cn,function(){return XI(Rn)},function(){return YS(Rn)},function(jn,Vn){return NC(Rn,jn,Vn)},function(){return Qm(Rn)},function(){return m0(Rn)},In),YI(this)}as(ep,hl),Sn=ep.prototype,Sn.destroy=function(gn){return gn&&this.g.Ab(),this.m&&(this.m.release(),this.m=null),gn=[],this.h&&(gn.push(this.h.destroy()),this.h=null),this.g&&(gn.push(this.g.destroy()),this.g=null),this.s=this.l=this.i=null,hl.prototype.release.call(this),Promise.all(gn)},Sn.Vf=function(){return this.l},Sn.Mf=function(){return this.s},Sn.mf=function(){return this.g.m&&b1},Sn.sa=function(){return this.g.sa()},Sn.ae=function(){return this.g.ae()},Sn.cast=function(){var gn=this,bn;return hs(function(Cn){return Cn.g==1?(bn=m0(gn),Qn(Cn,gn.g.cast(bn),2)):gn.h?Qn(Cn,gn.h.re(),0):Cn.return()})},Sn.ie=function(gn){this.g.ie(gn)},Sn.yg=function(){yR(this.g)},Sn.Ab=function(){this.g.Ab()},Sn.pf=function(gn,bn){bn=bn===void 0?!1:bn;var Cn=this;return hs(function(In){if(In.g==1)return gn==Cn.D&&bn==Cn.B?In.return():(Cn.D=gn,Cn.B=bn,Cn.g.Ab(),Qn(In,Cn.g.destroy(),2));Cn.g=null,Cn.g=new k1(gn,function(){return XI(Cn)},function(){return YS(Cn)},function(Rn,jn){return NC(Cn,Rn,jn)},function(){return Qm(Cn)},function(){return m0(Cn)},bn),Cn.g.init(),ms(In)})};function YI(gn){gn.g.init(),gn.m=new Ul;for(var bn=Dn(zS),Cn=bn.next();!Cn.done;Cn=bn.next())gn.m.C(gn.i,Cn.value,function(jn){gn.g.sa()||(jn=ax(jn),gn.j.dispatchEvent(jn))});for(var In in Av)gn.m.C(gn.h,Av[In],function(jn){gn.g.sa()||gn.o.dispatchEvent(jn)});gn.l={},bn={};for(var Rn in gn.i)bn.Sb=Rn,Object.defineProperty(gn.l,bn.Sb,{configurable:!1,enumerable:!0,get:function(jn){return function(){return w1(gn,jn.Sb)}}(bn),set:function(jn){return function(Vn){var Hn=jn.Sb;gn.g.sa()?gn.g.set("video",Hn,Vn):gn.i[Hn]=Vn}}(bn)}),bn={Sb:bn.Sb};gn.s={},C1(gn,function(jn){Object.defineProperty(gn.s,jn,{configurable:!1,enumerable:!0,get:function(){return XS(gn,jn)}})}),RC(gn),gn.j=new hl,gn.j.Wc=gn.l,gn.o=new hl,gn.o.Wc=gn.s}function RC(gn){var bn=new Map;C1(gn,function(Cn,In){bn.has(In)?(In=bn.get(In),Cn.length<In.length?gn.u.set(Cn,In):gn.u.set(In,Cn)):bn.set(In,Cn)})}function C1(gn,bn){function Cn(Xn){return Xn=="constructor"||typeof In[Xn]!="function"?!1:!Rn.has(Xn)}var In=gn.h,Rn=new Set,jn;for(jn in In)Cn(jn)&&(Rn.add(jn),bn(jn,In[jn]));for(gn=Object.getPrototypeOf(In),jn=Object.getPrototypeOf({});gn&&gn!=jn;){for(var Vn=Dn(Object.getOwnPropertyNames(gn)),Hn=Vn.next();!Hn.done;Hn=Vn.next())Hn=Hn.value,Cn(Hn)&&(Rn.add(Hn),bn(Hn,In[Hn]));gn=Object.getPrototypeOf(gn)}}function m0(gn){var bn={video:{},player:{},playerAfterLoad:{},manifest:gn.h.Dd(),startTime:null};gn.i.pause();for(var Cn=Dn(S1),In=Cn.next();!In.done;In=Cn.next())In=In.value,bn.video[In]=gn.i[In];for(gn.i.ended||(bn.startTime=gn.i.currentTime),Cn=Dn(Ru),In=Cn.next();!In.done;In=Cn.next()){var Rn=In.value;In=Rn[1],Rn=gn.h[Rn[0]](),bn.player[In]=Rn}for(Cn=Dn(PC),In=Cn.next();!In.done;In=Cn.next())Rn=In.value,In=Rn[1],Rn=gn.h[Rn[0]](),bn.playerAfterLoad[In]=Rn;return bn}function XI(gn){var bn=new Ju("caststatuschanged");gn.dispatchEvent(bn)}function YS(gn){var bn=new Ju(gn.l.paused?"pause":"play");gn.j.dispatchEvent(bn)}function Qm(gn){for(var bn=Dn(Ru),Cn=bn.next();!Cn.done;Cn=bn.next()){var In=Cn.value;Cn=In[1],In=gn.g.get("player",In[0])(),gn.h[Cn](In)}var Rn=gn.g.get("player","getAssetUri")();Cn=gn.g.get("video","ended"),bn=Promise.resolve();var jn=gn.i.autoplay;In=null,Cn||(In=gn.g.get("video","currentTime")),Rn&&(gn.i.autoplay=!1,bn=gn.h.load(Rn,In));var Vn={};for(Cn=Dn(S1),In=Cn.next();!In.done;In=Cn.next())In=In.value,Vn[In]=gn.g.get("video",In);bn.then(function(){if(gn.i){for(var Hn=Dn(S1),Xn=Hn.next();!Xn.done;Xn=Hn.next())Xn=Xn.value,gn.i[Xn]=Vn[Xn];for(Hn=Dn(PC),Xn=Hn.next();!Xn.done;Xn=Hn.next()){var ns=Xn.value;Xn=ns[1],ns=gn.g.get("player",ns[0])(),gn.h[Xn](ns)}gn.i.autoplay=jn,Rn&&gn.i.play()}},function(Hn){Hn=new Map().set("detail",Hn),Hn=new Ju("error",Hn),gn.h.dispatchEvent(Hn)})}function w1(gn,bn){if(bn=="addEventListener")return function(In,Rn,jn){return gn.j.addEventListener(In,Rn,jn)};if(bn=="removeEventListener")return function(In,Rn,jn){return gn.j.removeEventListener(In,Rn,jn)};if(gn.g.sa()&&Object.keys(gn.g.g.video).length==0){var Cn=gn.i[bn];if(typeof Cn!="function")return Cn}return gn.g.sa()?gn.g.get("video",bn):(bn=gn.i[bn],typeof bn=="function"&&(bn=bn.bind(gn.i)),bn)}function XS(gn,bn){if(gn.u.has(bn)&&(bn=gn.u.get(bn)),bn=="addEventListener")return function(Cn,In,Rn){return gn.o.addEventListener(Cn,In,Rn)};if(bn=="removeEventListener")return function(Cn,In,Rn){return gn.o.removeEventListener(Cn,In,Rn)};if(bn=="getMediaElement")return function(){return gn.l};if(bn=="getSharedConfiguration")return gn.g.get("player","getConfiguration");if(bn=="getNetworkingEngine")return function(){return gn.h.jc()};if(bn=="getDrmEngine")return function(){return gn.h.m};if(bn=="getAdManager")return function(){return gn.h.Ge()};if(bn=="setVideoContainer")return function(Cn){return gn.h.Ze(Cn)};if(gn.g.sa()){if(bn=="getManifest"||bn=="drmInfo")return function(){return Tu(bn+"() does not work while casting!"),null};if(bn=="attach"||bn=="detach")return function(){return Tu(bn+"() does not work while casting!"),Promise.resolve()}}return gn.g.sa()&&Object.keys(gn.g.g.video).length==0&&(il[bn]||p0[bn])||!gn.g.sa()?gn.h[bn].bind(gn.h):gn.g.get("player",bn)}function NC(gn,bn,Cn){gn.g.sa()&&(bn=="video"?gn.j.dispatchEvent(Cn):bn=="player"&&gn.o.dispatchEvent(Cn))}Ys("shaka.cast.CastProxy",ep),ep.prototype.changeReceiverId=ep.prototype.pf,ep.prototype.forceDisconnect=ep.prototype.Ab,ep.prototype.suggestDisconnect=ep.prototype.yg,ep.prototype.setAppData=ep.prototype.ie,ep.prototype.cast=ep.prototype.cast,ep.prototype.receiverName=ep.prototype.ae,ep.prototype.isCasting=ep.prototype.sa,ep.prototype.canCast=ep.prototype.mf,ep.prototype.getPlayer=ep.prototype.Mf,ep.prototype.getVideo=ep.prototype.Vf,ep.prototype.destroy=ep.prototype.destroy;function sl(gn,bn,Cn,In){hl.call(this);var Rn=this;this.g=gn,this.h=bn,this.j=new Ul,this.H={video:gn,player:bn},this.D=Cn||function(){},this.J=In||function(jn){return jn},this.i=null,this.F=!1,this.o=!0,this.m=0,this.B=!1,this.u=!0,this.s=this.l=null,this.G=new Hu(function(){A1(Rn)}),_R(this)}as(sl,hl),Sn=sl.prototype,Sn.isConnected=function(){return this.F},Sn.Zf=function(){return this.o},Sn.vg=function(gn){this.i=gn},Sn.tf=function(){this.i=null},Sn.wg=function(gn){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=gn},Sn.ug=function(gn){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:gn}]},Sn.tg=function(gn){this.i||(this.i={}),this.i.artist=gn,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},Sn.destroy=function(){var gn=this,bn,Cn;return hs(function(In){if(In.g==1)return gn.j&&(gn.j.release(),gn.j=null),bn=[],gn.h&&(bn.push(gn.h.destroy()),gn.h=null),gn.G&&(gn.G.stop(),gn.G=null),gn.g=null,gn.H=null,gn.D=null,gn.F=!1,gn.o=!0,gn.l=null,gn.s=null,hl.prototype.release.call(gn),Qn(In,Promise.all(bn),2);Cn=cast.receiver.CastReceiverManager.getInstance(),Cn.stop(),ms(In)})};function _R(gn){var bn=cast.receiver.CastReceiverManager.getInstance();bn.onSenderConnected=function(){return QI(gn)},bn.onSenderDisconnected=function(){return QI(gn)},bn.onSystemVolumeChanged=function(){var Rn=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();Rn&&zv(gn,{type:"update",update:{video:{volume:Rn.level,muted:Rn.muted}}},gn.l),zv(gn,{type:"event",targetName:"video",event:{type:"volumechange"}},gn.l)},gn.s=bn.getCastMessageBus("urn:x-cast:com.google.cast.media"),gn.s.onMessage=function(Rn){return ZI(gn,Rn)},gn.l=bn.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),gn.l.onMessage=function(Rn){return ER(gn,Rn)},bn.start(),bn=Dn(zS);for(var Cn=bn.next();!Cn.done;Cn=bn.next())gn.j.C(gn.g,Cn.value,function(Rn){return LC(gn,"video",Rn)});for(var In in Av)gn.j.C(gn.h,Av[In],function(Rn){return LC(gn,"player",Rn)});cast.__platform__&&cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160')?gn.h.ke(3840,2160):gn.h.ke(1920,1080),gn.j.C(gn.g,"loadeddata",function(){gn.B=!0}),gn.j.C(gn.h,"loading",function(){gn.o=!1,g0(gn)}),gn.j.C(gn.g,"playing",function(){gn.o=!1,g0(gn)}),gn.j.C(gn.g,"pause",function(){g0(gn)}),gn.j.C(gn.h,"unloading",function(){gn.o=!0,g0(gn)}),gn.j.C(gn.g,"ended",function(){new Hu(function(){gn.g&&gn.g.ended&&(gn.o=!0,g0(gn))}).O(SR)})}function QI(gn){gn.m=0,gn.u=!0,gn.F=cast.receiver.CastReceiverManager.getInstance().getSenders().length!=0,g0(gn)}function g0(gn){var bn;hs(function(Cn){if(Cn.g==1)return Qn(Cn,Promise.resolve(),2);if(!gn.h)return Cn.return();bn=new Ju("caststatuschanged"),gn.dispatchEvent(bn),UC(gn)||fv(gn),ms(Cn)})}function DC(gn,bn,Cn){var In,Rn,jn,Vn,Hn,Xn,ns,us,ps,fs;hs(function(vs){switch(vs.g){case 1:for(In in bn.player)Rn=bn.player[In],gn.h[In](Rn);return gn.D(Cn),jn=gn.g.autoplay,bn.manifest?(gn.g.autoplay=!1,Ts(vs,5),Qn(vs,gn.h.load(bn.manifest,bn.startTime),7)):Qn(vs,Promise.resolve(),3);case 7:ys(vs,3);break;case 5:return Vn=_s(vs),Hn=new Map().set("detail",Vn),Xn=new Ju("error",Hn),gn.h&&gn.h.dispatchEvent(Xn),vs.return();case 3:if(!gn.h)return vs.return();for(ns in bn.video)us=bn.video[ns],gn.g[ns]=us;for(ps in bn.playerAfterLoad)fs=bn.playerAfterLoad[ps],gn.h[ps](fs);gn.g.autoplay=jn,bn.manifest&&(gn.g.play(),fv(gn)),ms(vs)}})}function LC(gn,bn,Cn){gn.h&&(A1(gn),zv(gn,{type:"event",targetName:bn,event:Cn},gn.l))}function A1(gn){gn.G.O(PE);for(var bn={video:{},player:{}},Cn=Dn(mR),In=Cn.next();!In.done;In=Cn.next())In=In.value,bn.video[In]=gn.g[In];if(gn.h.U())for(var Rn in IC)gn.m%IC[Rn]==0&&(bn.player[Rn]=gn.h[Rn]());for(var jn in il)gn.m%il[jn]==0&&(bn.player[jn]=gn.h[jn]());(Cn=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(bn.video.volume=Cn.level,bn.video.muted=Cn.muted),zv(gn,{type:"update",update:bn},gn.l);for(var Vn in p0)gn.m%p0[Vn]==0&&(bn={player:{}},bn.player[Vn]=gn.h[Vn](),zv(gn,{type:"update",update:bn},gn.l));gn.B&&(gn.m+=1),UC(gn)}function UC(gn){return gn.u&&(gn.g.duration||gn.h.U())?(jC(gn),gn.u=!1,!0):!1}function jC(gn,bn){var Cn={contentId:gn.h.Dd(),streamType:gn.h.U()?"LIVE":"BUFFERED",contentType:""};gn.h.U()||(Cn.duration=gn.g.duration),gn.i&&(Cn.metadata=gn.i),fv(gn,bn===void 0?0:bn,Cn)}function ER(gn,bn){var Cn=E1(bn.data);switch(Cn.type){case"init":gn.m=0,gn.B=!1,gn.u=!0,DC(gn,Cn.initState,Cn.appData),A1(gn);break;case"appData":gn.D(Cn.appData);break;case"set":var In=Cn.targetName,Rn=Cn.property;if(Cn=Cn.value,In=="video"){if(bn=cast.receiver.CastReceiverManager.getInstance(),Rn=="volume"){bn.setSystemVolumeLevel(Cn);break}else if(Rn=="muted"){bn.setSystemVolumeMuted(Cn);break}}gn.H[In][Rn]=Cn;break;case"call":In=gn.H[Cn.targetName],In[Cn.methodName].apply(In,Cn.args);break;case"asyncCall":In=Cn.targetName,Rn=Cn.methodName,In=="player"&&Rn=="load"&&(gn.m=0,gn.B=!1);var jn=Cn.id,Vn=bn.senderId;bn=gn.H[In],Cn=bn[Rn].apply(bn,Cn.args),In=="player"&&Rn=="load"&&(Cn=Cn.then(function(){gn.u=!0})),Cn.then(function(){return Pp(gn,Vn,jn,null)},function(Hn){return Pp(gn,Vn,jn,Hn)})}}function ZI(gn,bn){var Cn=E1(bn.data);switch(Cn.type){case"PLAY":gn.g.play(),fv(gn);break;case"PAUSE":gn.g.pause(),fv(gn);break;case"SEEK":bn=Cn.currentTime;var In=Cn.resumeState;bn!=null&&(gn.g.currentTime=Number(bn)),In&&In=="PLAYBACK_START"?(gn.g.play(),fv(gn)):In&&In=="PLAYBACK_PAUSE"&&(gn.g.pause(),fv(gn));break;case"STOP":gn.h.re().then(function(){gn.h&&fv(gn)});break;case"GET_STATUS":jC(gn,Number(Cn.requestId));break;case"VOLUME":In=Cn.volume,bn=In.level,In=In.muted;var Rn=gn.g.volume,jn=gn.g.muted;bn!=null&&(gn.g.volume=Number(bn)),In!=null&&(gn.g.muted=In),Rn==gn.g.volume&&jn==gn.g.muted||fv(gn);break;case"LOAD":gn.m=0,gn.B=!1,gn.u=!1,bn=Cn.media,In=Cn.currentTime,Rn=gn.J(bn.contentId),jn=Cn.autoplay||!0,gn.D(bn.customData),jn&&(gn.g.autoplay=!0),gn.h.load(Rn,In).then(function(){gn.h&&jC(gn)}).catch(function(Vn){var Hn="LOAD_FAILED";Vn.category==7&&Vn.code==7e3&&(Hn="LOAD_CANCELLED"),zv(gn,{requestId:Number(Cn.requestId),type:Hn},gn.s)});break;default:zv(gn,{requestId:Number(Cn.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},gn.s)}}function Pp(gn,bn,Cn,In){gn.h&&zv(gn,{type:"asyncComplete",id:Cn,error:In},gn.l,bn)}function zv(gn,bn,Cn,In){gn.F&&(gn=_1(bn),In?Cn.getCastChannel(In).send(gn):Cn.broadcast(gn))}function fv(gn,bn,Cn){Cn=Cn===void 0?null:Cn;var In={mediaSessionId:0,playbackRate:gn.g.playbackRate,playerState:gn.o?JI:gn.h.Fd()?eP:gn.g.paused?BC:FC,currentTime:gn.g.currentTime,supportedMediaCommands:63,volume:{level:gn.g.volume,muted:gn.g.muted}};Cn&&(In.media=Cn),zv(gn,{requestId:bn===void 0?0:bn,type:"MEDIA_STATUS",status:[In]},gn.s)}Ys("shaka.cast.CastReceiver",sl),sl.prototype.destroy=sl.prototype.destroy,sl.prototype.setContentArtist=sl.prototype.tg,sl.prototype.setContentImage=sl.prototype.ug,sl.prototype.setContentTitle=sl.prototype.wg,sl.prototype.clearContentMetadata=sl.prototype.tf,sl.prototype.setContentMetadata=sl.prototype.vg,sl.prototype.isIdle=sl.prototype.Zf,sl.prototype.isConnected=sl.prototype.isConnected;var PE=.5,SR=5,JI="IDLE",FC="PLAYING",eP="BUFFERING",BC="PAUSED";function tP(gn,bn,Cn){var In=$R(gn),Rn=null;gn=[];var jn=[],Vn=new Set(In.map(function(Hn){return Hn.keyId}));if(Vn.delete(null),1<Vn.size)throw new Bs(2,4,4010);if(bn||(jn=In.filter(function(Hn){return Hn.fe=="urn:mpeg:dash:mp4protection:2011"?(Rn=Hn.init||Rn,!1):!0}),jn.length&&(gn=kR(Rn,jn,Cn,Vn),gn.length==0&&(gn=[tv("",Rn)]))),In.length&&(bn||!jn.length))for(gn=[],bn=Dn(Object.values(Cn)),Cn=bn.next();!Cn.done;Cn=bn.next())Cn=Cn.value,Cn!="org.w3.clearkey"&&gn.push(tv(Cn,Rn));if(Vn=Array.from(Vn)[0]||null)for(bn=Dn(gn),Cn=bn.next();!Cn.done;Cn=bn.next())for(Cn=Dn(Cn.value.initData),In=Cn.next();!In.done;In=Cn.next())In.value.keyId=Vn;return{Be:Vn,rh:Rn,drmInfos:gn,Fe:!0}}function TR(gn,bn,Cn,In){var Rn=tP(gn,Cn,In);if(bn.Fe)gn=bn.drmInfos.length==1&&!bn.drmInfos[0].keySystem,Cn=Rn.drmInfos.length==0,(bn.drmInfos.length==0||gn&&!Cn)&&(bn.drmInfos=Rn.drmInfos),bn.Fe=!1;else if(0<Rn.drmInfos.length&&(bn.drmInfos=bn.drmInfos.filter(function(jn){return Rn.drmInfos.some(function(Vn){return Vn.keySystem==jn.keySystem})}),bn.drmInfos.length==0))throw new Bs(2,4,4008);return Rn.Be||bn.Be}function rP(gn){var bn=0,Cn=rp(gn),In=Cn.getUint32(bn,!0);if(In!=gn.byteLength)return[];e:{for(gn=bn+6,bn=[];gn<Cn.byteLength-1;){In=Cn.getUint16(gn,!0),gn+=2;var Rn=Cn.getUint16(gn,!0);if(gn+=2,Rn&1||Rn+gn>Cn.byteLength){Cn=[];break e}var jn=Pu(Cn,gn,Rn);bn.push({type:In,value:jn}),gn+=Rn}Cn=bn}return Cn}function Hv(gn){gn=Dn(gn.getElementsByTagName("DATA"));for(var bn=gn.next();!bn.done;bn=gn.next()){bn=Dn(bn.value.childNodes);for(var Cn=bn.next();!Cn.done;Cn=bn.next())if(Cn=Cn.value,Cn instanceof Element&&Cn.tagName=="LA_URL")return Cn.textContent}return""}function gy(gn){return gn=sS(gn.node,"urn:microsoft:playready","pro"),!gn||(gn=mm(gn.textContent),gn=rP(gn).filter(function(bn){return bn.type===xR})[0],!gn)?"":(gn=Ip(gn.value,!0),(gn=K0(gn,"WRMHEADER"))?Hv(gn):"")}function kR(gn,bn,Cn,In){var Rn=[];bn=Dn(bn);for(var jn=bn.next();!jn.done;jn=bn.next()){jn=jn.value;var Vn=Cn[jn.fe];if(Vn){var Hn;if(Hn=sS(jn.node,"urn:microsoft:playready","pro")){Hn=mm(Hn.textContent);var Xn=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);Hn=[{initData:HT(Hn,Xn,new Set,0),initDataType:"cenc",keyId:jn.keyId}]}else Hn=null;if(Xn=null,jn.fe==="urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e")if(Xn=In,Xn.size==0)Xn=null;else{var ns=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),us=new Uint8Array([]);Xn=[{initData:HT(us,ns,Xn,1),initDataType:"cenc",keyId:jn.keyId}]}Hn=tv(Vn,jn.init||gn||Hn||Xn),(Vn=CR.get(Vn))&&(Hn.licenseServerUri=Vn(jn)),Rn.push(Hn)}}return Rn}function $R(gn){var bn=[];gn=Dn(gn);for(var Cn=gn.next();!Cn.done;Cn=gn.next())(Cn=bR(Cn.value))&&bn.push(Cn);return bn}function bR(gn){var bn=gn.getAttribute("schemeIdUri"),Cn=l_(gn,"urn:mpeg:cenc:2013","default_KID"),In=MA(gn,"urn:mpeg:cenc:2013","pssh").map(z0);if(!bn)return null;if(bn=bn.toLowerCase(),Cn&&(Cn=Cn.replace(/-/g,"").toLowerCase(),Cn.includes(" ")))throw new Bs(2,4,4009);var Rn=[];try{Rn=In.map(function(jn){return{initDataType:"cenc",initData:mm(jn),keyId:null}})}catch{throw new Bs(2,4,4007)}return{node:gn,fe:bn,keyId:Cn,init:0<Rn.length?Rn:null}}var xR=1,CR=new Map().set("com.widevine.alpha",function(gn){return(gn=sS(gn.node,"urn:microsoft","laurl"))&&gn.getAttribute("licenseUrl")||""}).set("com.microsoft.playready",gy).set("com.microsoft.playready.recommendation",gy).set("com.microsoft.playready.software",gy).set("com.microsoft.playready.hardware",gy).set("org.w3.clearkey",function(gn){return(gn=sS(gn.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&gn.getAttribute("Lic_type")==="EME-1.0"&&gn.textContent?gn.textContent:""});function I1(gn,bn,Cn,In,Rn){var jn={RepresentationID:bn,Number:Cn,Bandwidth:In,Time:Rn};return gn.replace(/\$(RepresentationID|Number|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(Vn,Hn,Xn,ns){if(Vn=="$$")return"$";var us=jn[Hn];if(us==null)return Vn;switch(Hn=="RepresentationID"&&Xn&&(Xn=void 0),Hn=="Time"&&(us=Math.round(us)),ns){case void 0:case"d":case"i":case"u":Vn=us.toString();break;case"o":Vn=us.toString(8);break;case"x":Vn=us.toString(16);break;case"X":Vn=us.toString(16).toUpperCase();break;default:Vn=us.toString()}return Xn=pn.parseInt(Xn,10)||1,Array(Math.max(0,Xn-Vn.length)+1).join("0")+Vn})}function VC(gn,bn){var Cn=pv(gn,bn,"timescale"),In=1;Cn&&(In=ly(Cn)||1);var Rn=pv(gn,bn,"duration");Cn=ly(Rn||""),gn.I.contentType=="image"&&(Cn=H0(Rn||"")),Cn&&(Cn/=In);var jn=pv(gn,bn,"startNumber");Rn=Number(pv(gn,bn,"presentationTimeOffset"))||0;var Vn=Gm(jn||"");if((jn==null||Vn==null)&&(Vn=1),jn=P1(gn,bn,"SegmentTimeline"),bn=null,jn){bn=In,gn=gn.T.duration||1/0,jn=Hl(jn,"S");for(var Hn=[],Xn=-Rn,ns=0;ns<jn.length;++ns){var us=jn[ns],ps=jn[ns+1],fs=Ml(us,"t",Gm),vs=Ml(us,"d",Gm);if(us=Ml(us,"r",K_),fs!=null&&(fs-=Rn),!vs)break;if(fs=fs??Xn,us=us||0,0>us)if(ps){if(ps=Ml(ps,"t",Gm),ps==null)break;if(fs>=ps)break;us=Math.ceil((ps-fs)/vs)-1}else{if(gn==1/0)break;if(fs/bn>=gn)break;us=Math.ceil((gn*bn-fs)/vs)-1}for(0<Hn.length&&fs!=Xn&&(Hn[Hn.length-1].end=fs/bn),ps=0;ps<=us;++ps)Xn=fs+vs,Hn.push({start:fs/bn,end:Xn/bn,Cg:fs}),fs=Xn}bn=Hn}return{timescale:In,ja:Cn,Lb:Vn,Ra:Rn/In||0,se:Rn,timeline:bn}}function pv(gn,bn,Cn){return[bn(gn.I),bn(gn.fa),bn(gn.$)].filter(dp).map(function(In){return In.getAttribute(Cn)}).reduce(function(In,Rn){return In||Rn})}function P1(gn,bn,Cn){return[bn(gn.I),bn(gn.fa),bn(gn.$)].filter(dp).map(function(In){return Rv(In,Cn)}).reduce(function(In,Rn){return In||Rn})}function wR(gn,bn,Cn,In,Rn,jn){for(var Vn=l_(gn,"http://www.w3.org/1999/xlink","href"),Hn=l_(gn,"http://www.w3.org/1999/xlink","actuate")||"onRequest",Xn=Dn(Array.from(gn.attributes)),ns=Xn.next();!ns.done;ns=Xn.next())ns=ns.value,ns.namespaceURI=="http://www.w3.org/1999/xlink"&&gn.removeAttributeNS(ns.namespaceURI,ns.localName);if(5<=jn)return s_(new Bs(2,4,4028));if(Hn!="onLoad")return s_(new Bs(2,4,4027));var us=zp([In],[Vn]);return Rn.request(0,tm(us,bn)).Y(function(ps){if(ps=sv(ps.data,gn.tagName),!ps)return s_(new Bs(2,4,4001,Vn));for(;gn.childNodes.length;)gn.removeChild(gn.childNodes[0]);for(;ps.childNodes.length;){var fs=ps.childNodes[0];ps.removeChild(fs),gn.appendChild(fs)}for(ps=Dn(Array.from(ps.attributes)),fs=ps.next();!fs.done;fs=ps.next())gn.setAttributeNode(fs.value.cloneNode(!1));return y0(gn,bn,Cn,us[0],Rn,jn+1)})}function y0(gn,bn,Cn,In,Rn,jn){if(jn=jn===void 0?0:jn,l_(gn,"http://www.w3.org/1999/xlink","href")){var Vn=wR(gn,bn,Cn,In,Rn,jn);return Cn&&(Vn=Vn.Y(void 0,function(){return y0(gn,bn,Cn,In,Rn,jn)})),Vn}Vn=[];for(var Hn=Dn(Array.from(gn.childNodes)),Xn=Hn.next();!Xn.done;Xn=Hn.next())Xn=Xn.value,Xn instanceof Element&&(l_(Xn,"http://www.w3.org/1999/xlink","href")=="urn:mpeg:dash:resolve-to-zero:2013"?gn.removeChild(Xn):Xn.tagName!="SegmentTimeline"&&Vn.push(y0(Xn,bn,Cn,In,Rn,jn)));return AA(Vn).Y(function(){return gn})}function AR(gn,bn,Cn,In,Rn,jn,Vn){var Hn,Xn=new Rl().R("sidx",function(ns){Hn=IR(bn,In,Rn,jn,Vn,Cn,ns)});if(gn&&Xn.parse(gn),Hn)return Hn;throw new Bs(2,3,3004)}function IR(gn,bn,Cn,In,Rn,jn,Vn){var Hn=[];Vn.reader.skip(4);var Xn=Vn.reader.K();if(Xn==0)throw new Bs(2,3,3005);if(Vn.version==0)var ns=Vn.reader.K(),us=Vn.reader.K();else ns=Vn.reader.$a(),us=Vn.reader.$a();Vn.reader.skip(2);var ps=Vn.reader.$d();for(gn=gn+Vn.size+us,us=0;us<ps;us++){var fs=Vn.reader.K(),vs=(fs&2147483648)>>>31;fs&=2147483647;var Is=Vn.reader.K();if(Vn.reader.skip(4),vs==1)throw new Bs(2,3,3006);Hn.push(new cl(ns/Xn+Cn,(ns+Is)/Xn+Cn,function(){return jn},gn,gn+fs-1,bn,Cn,In,Rn)),ns+=Is,gn+=fs}return Vn.parser.stop(),Hn}function v_(gn){this.h=rp(gn),this.g=new xu(this.h,0)}v_.prototype.ha=function(){return this.g.ha()};function Kv(gn){var bn=nP(gn);if(7<bn.length)throw new Bs(2,3,3002);var Cn=0;bn=Dn(bn);for(var In=bn.next();!In.done;In=bn.next())Cn=256*Cn+In.value;bn=nP(gn);e:{In=Dn(O1);for(var Rn=In.next();!Rn.done;Rn=In.next())if(Lm(bn,new Uint8Array(Rn.value))){In=!0;break e}In=!1}if(In)bn=gn.h.byteLength-gn.g.Z();else{if(bn.length==8&&bn[1]&224)throw new Bs(2,3,3001);for(Rn=In=0;Rn<bn.length;Rn++){var jn=bn[Rn];In=Rn==0?jn&(1<<8-bn.length)-1:256*In+jn}bn=In}return bn=gn.g.Z()+bn<=gn.h.byteLength?bn:gn.h.byteLength-gn.g.Z(),In=rp(gn.h,gn.g.Z(),bn),gn.g.skip(bn),new iP(Cn,In)}function nP(gn){var bn=gn.g.Z(),Cn=gn.g.Qa();if(Cn==0)throw new Bs(2,3,3002);return Cn=8-Math.floor(Math.log2(Cn)),gn.g.skip(Cn-1),Pu(gn.h,bn,Cn)}var O1=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function iP(gn,bn){this.id=gn,this.g=bn}function yy(gn){if(8<gn.g.byteLength)throw new Bs(2,3,3002);if(gn.g.byteLength==8&&gn.g.getUint8(0)&224)throw new Bs(2,3,3001);for(var bn=0,Cn=0;Cn<gn.g.byteLength;Cn++){var In=gn.g.getUint8(Cn);bn=256*bn+In}return bn}function M1(gn,bn,Cn,In,Rn,jn,Vn,Hn,Xn){function ns(){return Rn}var us=[];gn=new v_(gn.g);for(var ps=null,fs=null;gn.ha();){var vs=Kv(gn);if(vs.id==187){var Is=PR(vs);Is&&(vs=Cn*Is.Dg,Is=bn+Is.mg,ps!=null&&us.push(new cl(ps+Vn,vs+Vn,ns,fs,Is-1,jn,Vn,Hn,Xn)),ps=vs,fs=Is)}}return ps!=null&&us.push(new cl(ps+Vn,In+Vn,ns,fs,null,jn,Vn,Hn,Xn)),us}function PR(gn){var bn=new v_(gn.g);if(gn=Kv(bn),gn.id!=179)throw new Bs(2,3,3013);if(gn=yy(gn),bn=Kv(bn),bn.id!=183)throw new Bs(2,3,3012);bn=new v_(bn.g);for(var Cn=0;bn.ha();){var In=Kv(bn);if(In.id==241){Cn=yy(In);break}}return{Dg:gn,mg:Cn}}function QS(gn,bn){if(bn=P1(gn,bn,"Initialization"),!bn)return null;var Cn=gn.I.wa,In=bn.getAttribute("sourceURL");In&&(Cn=zp(gn.I.wa,[In])),In=0;var Rn=null;return(bn=Ml(bn,"range",cS))&&(In=bn.start,Rn=bn.end),new Hm(function(){return Cn},In,Rn,uP(gn))}function OR(gn,bn){var Cn=Number(pv(gn,Zm,"presentationTimeOffset"))||0,In=pv(gn,Zm,"timescale"),Rn=1;In&&(Rn=ly(In)||1);var jn=Cn/Rn||0,Vn=QS(gn,Zm);oP(gn,Vn);var Hn=ox(gn);return{Bb:function(){var Xn=P1(Hn,Zm,"RepresentationIndex"),ns=Hn.I.wa;return Xn&&(Xn=Xn.getAttribute("sourceURL"))&&(ns=zp(Hn.I.wa,[Xn])),Xn=hv(Hn),aP(Hn,bn,Vn,ns,Xn.start,Xn.end,jn)}}}function aP(gn,bn,Cn,In,Rn,jn,Vn){var Hn,Xn,ns,us,ps,fs,vs,Is,Ls,Cs,Ms,Zs,Fs,Ws,Gs;return hs(function(eu){if(eu.g==1)return Hn=gn.presentationTimeline,Xn=!gn.Va||!gn.T.Gd,ns=gn.T.start,us=gn.T.duration,ps=gn.I.mimeType.split("/")[1],fs=bn,vs=null,Is=[fs(In,Rn,jn),ps=="webm"?fs(Cn.ya(),Cn.Ba,Cn.la):null],fs=null,Qn(eu,Promise.all(Is),2);if(Ls=eu.h,Cs=Ls[0],Ms=Ls[1]||null,Zs=null,Fs=ns-Vn,Ws=ns,Gs=us?ns+us:1/0,ps=="mp4")var au=AR(Cs,Rn,In,Cn,Fs,Ws,Gs);else{if(au=new v_(Ms),Kv(au).id!=440786851)throw new Bs(2,3,3008);var du=Kv(au);if(du.id!=408125543)throw new Bs(2,3,3009);au=du.g.byteOffset,du=new v_(du.g);for(var pu=null;du.ha();){var bu=Kv(du);if(bu.id==357149030){pu=bu;break}}if(!pu)throw new Bs(2,3,3010);for(pu=new v_(pu.g),bu=1e6,du=null;pu.ha();){var Uu=Kv(pu);if(Uu.id==2807729)bu=yy(Uu);else if(Uu.id==17545)if(Uu.g.byteLength==4)du=Uu.g.getFloat32(0);else if(Uu.g.byteLength==8)du=Uu.g.getFloat64(0);else throw new Bs(2,3,3003)}if(du==null)throw new Bs(2,3,3011);if(pu=bu/1e9,du*=pu,bu=Kv(new v_(Cs)),bu.id!=475249515)throw new Bs(2,3,3007);au=M1(bu,au,pu,du,In,Cn,Fs,Ws,Gs)}return Zs=au,Hn.Ib(Zs),vs=new yl(Zs),Xn&&vs.Wa(Ws,Gs,!0),eu.return(vs)})}function Zm(gn){return gn.wc}function hv(gn){var bn=P1(gn,Zm,"RepresentationIndex");return gn=pv(gn,Zm,"indexRange"),gn=cS(gn||""),bn&&(gn=Ml(bn,"range",cS,gn)),gn}function oP(gn,bn){if(sP(gn,bn),!hv(gn))throw new Bs(2,4,4002)}function sP(gn,bn){var Cn=gn.I.mimeType.split("/")[1];if(gn.I.contentType!=Zu&&Cn!="mp4"&&Cn!="webm")throw new Bs(2,4,4006);if(Cn=="webm"&&!bn)throw new Bs(2,4,4005)}function uP(gn){var bn=gn.I;return{bandwidth:gn.bandwidth,audioSamplingRate:bn.audioSamplingRate,codecs:bn.codecs,contentType:bn.contentType,frameRate:bn.frameRate||null,height:bn.height||null,mimeType:bn.mimeType,channelsCount:bn.ad,pixelAspectRatio:bn.pixelAspectRatio||null,width:bn.width||null}}function GC(gn,bn){var Cn=QS(gn,lP),In=MR(gn);if(!In.ja&&!In.timeline&&1<In.Gb.length)throw new Bs(2,4,4002);if(!In.ja&&!gn.T.duration&&!In.timeline&&In.Gb.length==1)throw new Bs(2,4,4002);if(In.timeline&&In.timeline.length==0)throw new Bs(2,4,4002);var Rn=null,jn=null;gn.$.id&&gn.I.id&&(jn=bn[gn.$.id+","+gn.I.id])&&(Rn=jn.segmentIndex);var Vn=cP(gn.T.start,gn.T.duration,gn.I.wa,In,Cn);return bn=!Rn,Rn?Rn.Hb(Vn,gn.presentationTimeline.Oa()):Rn=new yl(Vn),gn.presentationTimeline.Ib(Vn),gn.Va&&gn.T.Gd||Rn.Wa(gn.T.start,gn.T.duration?gn.T.start+gn.T.duration:1/0,bn),jn&&(jn.segmentIndex=Rn),{Bb:function(){return Rn&&Rn.g.length!=0||Rn.pc(Vn),Promise.resolve(Rn)}}}function lP(gn){return gn.ab}function MR(gn){var bn=RR(gn);gn=VC(gn,lP);var Cn=gn.Lb;Cn==0&&(Cn=1);var In=0;return gn.ja?In=gn.ja*(Cn-1):gn.timeline&&0<gn.timeline.length&&(In=gn.timeline[0].start),{ja:gn.ja,startTime:In,Lb:Cn,Ra:gn.Ra,timeline:gn.timeline,Gb:bn}}function cP(gn,bn,Cn,In,Rn){var jn=In.Gb.length;In.timeline&&In.timeline.length!=In.Gb.length&&(jn=Math.min(In.timeline.length,In.Gb.length));for(var Vn=gn-In.Ra,Hn=bn?gn+bn:1/0,Xn=[],ns=In.startTime,us={},ps=0;ps<jn;us={od:us.od},ps++){var fs=In.Gb[ps];us.od=zp(Cn,[fs.cg]);var vs=void 0;vs=In.ja!=null?ns+In.ja:In.timeline?In.timeline[ps].end:ns+bn,Xn.push(new cl(gn+ns,gn+vs,function(Is){return function(){return Is.od}}(us),fs.start,fs.end,Rn,Vn,gn,Hn)),ns=vs}return Xn}function RR(gn){return[gn.I.ab,gn.fa.ab,gn.$.ab].filter(dp).map(function(bn){return Hl(bn,"SegmentURL")}).reduce(function(bn,Cn){return 0<bn.length?bn:Cn}).map(function(bn){bn.getAttribute("indexRange")&&!gn.Ke&&(gn.Ke=!0);var Cn=bn.getAttribute("media");return bn=Ml(bn,"mediaRange",cS,{start:0,end:null}),{cg:Cn,start:bn.start,end:bn.end}})}function dP(gn,bn,Cn,In,Rn,jn){var Vn=DR(gn),Hn=fP(gn);NR(Hn);var Xn=ox(gn);if(Hn.oc)return sP(gn,Vn),{Bb:function(){var vs=I1(Hn.oc,Xn.I.id,null,Xn.bandwidth||null,null);return vs=zp(Xn.I.wa,[vs]),aP(Xn,bn,Vn,vs,0,null,Hn.Ra)}};if(Hn.ja)return In||gn.fa.contentType==="image"||(gn.presentationTimeline.Sd(Hn.ja),gn.presentationTimeline.Td(gn.T.start)),{Bb:function(){return pP(Xn,Hn,Rn,Vn,jn)}};var ns=null;In=In=null,gn.$.id&&gn.I.id&&(In=gn.$.id+","+gn.I.id,In=Cn[In])&&(ns=In.segmentIndex);var us=hP(Xn,Hn,Vn);Cn=gn.T.start;var ps=gn.T.duration?gn.T.start+gn.T.duration:1/0,fs=!(gn.Va&&gn.T.Gd);return ns?(fs&&new yl(us).Wa(Cn,ps,!0),ns.Hb(us,gn.presentationTimeline.Oa())):ns=new yl(us),gn.presentationTimeline.Ib(us),fs&&ns.Wa(Cn,ps),In&&gn.Va&&(In.segmentIndex=ns),{Bb:function(){return ns&&ns.g.length!=0||ns.pc(us),Promise.resolve(ns)}}}function Wv(gn){return gn.xc}function fP(gn){var bn=VC(gn,Wv),Cn=pv(gn,Wv,"media");return gn=pv(gn,Wv,"index"),{ja:bn.ja,timescale:bn.timescale,Lb:bn.Lb,Ra:bn.Ra,se:bn.se,timeline:bn.timeline,Pd:Cn,oc:gn}}function NR(gn){var bn=gn.oc?1:0;if(bn+=gn.timeline?1:0,bn+=gn.ja?1:0,bn==0)throw new Bs(2,4,4002);if(bn!=1&&(gn.oc&&(gn.timeline=null),gn.ja=null),!gn.oc&&!gn.Pd)throw new Bs(2,4,4002)}function pP(gn,bn,Cn,In,Rn){function jn(pu){var bu=(pu-vs)*fs,Uu=bu+bn.Ra,Bu=bu+ns;bu=Bu+fs;var al=Math.min(bu,Hn());return Bu=new cl(Bu,al,function(){var Mu=I1(Ls,Ms,pu,Cs,Uu*Is);return zp(Zs,[Mu])},0,null,In,Fs,ns,Hn()),Bu.l=bu,Bu}function Vn(){var pu=[Math.max(Xn.Oa(),ns),Math.min(Xn.gb(),Hn())].map(function(bu){return bu-ns});return[Math.ceil(pu[0]/fs),Math.ceil(pu[1]/fs)-1].map(function(bu){return bu+vs})}function Hn(){var pu=us!=null&&Rn[us]||ps;return pu?ns+pu:1/0}var Xn=gn.presentationTimeline,ns=gn.T.start,us=gn.$.id,ps=gn.T.duration,fs=bn.ja,vs=bn.Lb,Is=bn.timescale,Ls=bn.Pd,Cs=gn.bandwidth||null,Ms=gn.I.id,Zs=gn.I.wa,Fs=ns-bn.Ra,Ws=Vn();gn=gn.Va?Math.max(Ws[0],Ws[1]-Cn+1):Ws[0],Ws=Ws[1],Cn=[];for(var Gs=gn;Gs<=Ws;++Gs){var eu=jn(Gs);Cn.push(eu)}var au=new yl(Cn);if(Cn=Xn.gb()<Hn(),Gs=Xn.U(),Cn||Gs){var du=Math.max(gn,Ws+1);au.fd(fs,function(){var pu=Xn.Oa();au.eb(pu);var bu=Dn(Vn());bu.next(),bu=bu.next().value;for(var Uu=[];du<=bu;){var Bu=jn(du);Uu.push(Bu),du++}return pu>Hn()&&!Uu.length?null:Uu})}return Promise.resolve(au)}function hP(gn,bn,Cn){var In=gn.T.start,Rn=gn.T.duration,jn=In-bn.Ra;Rn=Rn?In+Rn:1/0;for(var Vn=[],Hn={},Xn=0;Xn<bn.timeline.length;Hn={nd:Hn.nd,rd:Hn.rd,ud:Hn.ud,kd:Hn.kd,wd:Hn.wd,ld:Hn.ld},Xn++){var ns=bn.timeline[Xn],us=ns.start,ps=ns.Cg;ns=ns.end,Hn.ud=Xn+bn.Lb,Hn.wd=ps+bn.se,Hn.rd=gn.I.id,Hn.kd=gn.bandwidth||null,Hn.nd=bn.Pd,Hn.ld=gn.I.wa,Vn.push(new cl(In+us,In+ns,function(fs){return function(){var vs=I1(fs.nd,fs.rd,fs.ud,fs.kd||null,fs.wd);return zp(fs.ld,[vs]).map(function(Is){return Is.toString()})}}(Hn),0,null,Cn,jn,In,Rn))}return Vn}function DR(gn){var bn=pv(gn,Wv,"initialization");if(!bn)return null;var Cn=gn.I.id,In=gn.bandwidth||null,Rn=gn.I.wa;return new Hm(function(){var jn=I1(bn,Cn,null,In,null);return zp(Rn,[jn])},0,null,uP(gn))}function zC(){this.l=[],this.g=[],this.h=[],this.j=[],this.i=[],this.m=new Set}zC.prototype.release=function(){for(var gn=Dn(this.g.concat(this.h,this.j,this.i)),bn=gn.next();!bn.done;bn=gn.next())bn=bn.value,bn.segmentIndex&&bn.segmentIndex.release();this.g=[],this.h=[],this.j=[],this.i=[],this.l=[]};function LR(gn,bn,Cn){var In,Rn,jn,Vn,Hn,Xn,ns,us,ps,fs,vs,Is,Ls,Cs,Ms,Zs,Fs,Ws,Gs,eu,au,du,pu,bu,Uu,Bu,al,Mu,Ql,ul;return hs(function($l){switch($l.g){case 1:if(In=tl,UR(bn),FR(bn),jR(bn),R1(bn),!Cn&&bn.length==1){Rn=bn[0],gn.g=Rn.Kc,gn.h=Rn.gd,gn.j=Rn.textStreams,gn.i=Rn.imageStreams,$l.A(2);break}for(jn=-1,Vn=0;Vn<bn.length;Vn++)Hn=bn[Vn],gn.m.has(Hn.id)||(gn.m.add(Hn.id),jn==-1&&(jn=Vn));if(jn==-1)return $l.return();for(Xn=bn.map(function(Bp){return Bp.Kc}),ns=bn.map(function(Bp){return Bp.gd}),us=bn.map(function(Bp){return Bp.textStreams}),ps=bn.map(function(Bp){return Bp.imageStreams}),fs=Dn(us),vs=fs.next();!vs.done;vs=fs.next())Is=vs.value,Is.push(v0(In.X));for(Ls=Dn(ps),Cs=Ls.next();!Cs.done;Cs=Ls.next())Ms=Cs.value,Ms.push(v0(In.Wb));return Qn($l,__(gn.g,Xn,jn,ZS,OE),3);case 3:return Qn($l,__(gn.h,ns,jn,ZS,OE),4);case 4:return Qn($l,__(gn.j,us,jn,ZS,OE),5);case 5:return Qn($l,__(gn.i,ps,jn,ZS,OE),2);case 2:if(Zs=0,Fs=[],gn.h.length&&gn.g.length)for(pu=Dn(gn.g),bu=pu.next();!bu.done;bu=pu.next())for(Uu=bu.value,Bu=Dn(gn.h),al=Bu.next();!al.done;al=Bu.next())Mu=al.value,Ql=XT(Uu.drmInfos,Mu.drmInfos),Uu.drmInfos.length&&Mu.drmInfos.length&&!Ql.length||(ul=Zs++,Fs.push({id:ul,language:Uu.language,primary:Uu.primary,audio:Uu,video:Mu,bandwidth:(Uu.bandwidth||0)+(Mu.bandwidth||0),drmInfos:Ql,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(Ws=gn.h.concat(gn.g),Gs=Dn(Ws),eu=Gs.next();!eu.done;eu=Gs.next())au=eu.value,du=Zs++,Fs.push({id:du,language:au.language,primary:au.primary,audio:au.type==In.Hc?au:null,video:au.type==In.va?au:null,bandwidth:au.bandwidth||0,drmInfos:au.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});gn.l=Fs,ms($l)}})}function UR(gn){gn=Dn(gn);for(var bn=gn.next();!bn.done;bn=gn.next()){bn=bn.value;for(var Cn=[],In=Dn(bn.Kc),Rn=In.next();!Rn.done;Rn=In.next()){Rn=Rn.value;for(var jn=!1,Vn=Dn(Cn),Hn=Vn.next();!Hn.done;Hn=Vn.next())Hn=Hn.value,Rn.id!=Hn.id&&Rn.channelsCount==Hn.channelsCount&&Rn.language==Hn.language&&Rn.bandwidth==Hn.bandwidth&&Rn.label==Hn.label&&Rn.codecs==Hn.codecs&&Rn.mimeType==Hn.mimeType&&Xp(Rn.roles,Hn.roles)&&Rn.audioSamplingRate==Hn.audioSamplingRate&&Rn.primary==Hn.primary&&(jn=!0);jn||Cn.push(Rn)}bn.Kc=Cn}}function jR(gn){gn=Dn(gn);for(var bn=gn.next();!bn.done;bn=gn.next()){bn=bn.value;for(var Cn=[],In=Dn(bn.textStreams),Rn=In.next();!Rn.done;Rn=In.next()){Rn=Rn.value;for(var jn=!1,Vn=Dn(Cn),Hn=Vn.next();!Hn.done;Hn=Vn.next())Hn=Hn.value,Rn.id!=Hn.id&&Rn.language==Hn.language&&Rn.label==Hn.label&&Rn.codecs==Hn.codecs&&Rn.mimeType==Hn.mimeType&&Rn.bandwidth==Hn.bandwidth&&Xp(Rn.roles,Hn.roles)&&(jn=!0);jn||Cn.push(Rn)}bn.textStreams=Cn}}function FR(gn){gn=Dn(gn);for(var bn=gn.next();!bn.done;bn=gn.next()){bn=bn.value;for(var Cn=[],In=Dn(bn.gd),Rn=In.next();!Rn.done;Rn=In.next()){Rn=Rn.value;for(var jn=!1,Vn=Dn(Cn),Hn=Vn.next();!Hn.done;Hn=Vn.next())Hn=Hn.value,Rn.id!=Hn.id&&Rn.width==Hn.width&&Rn.frameRate==Hn.frameRate&&Rn.codecs==Hn.codecs&&Rn.mimeType==Hn.mimeType&&Rn.label==Hn.label&&Xp(Rn.roles,Hn.roles)&&Ol(Rn.closedCaptions,Hn.closedCaptions)&&Rn.bandwidth==Hn.bandwidth&&(jn=!0);jn||Cn.push(Rn)}bn.gd=Cn}}function R1(gn){gn=Dn(gn);for(var bn=gn.next();!bn.done;bn=gn.next()){bn=bn.value;for(var Cn=[],In=Dn(bn.imageStreams),Rn=In.next();!Rn.done;Rn=In.next()){Rn=Rn.value;for(var jn=!1,Vn=Dn(Cn),Hn=Vn.next();!Hn.done;Hn=Vn.next())Hn=Hn.value,Rn.id!=Hn.id&&Rn.width==Hn.width&&Rn.codecs==Hn.codecs&&Rn.mimeType==Hn.mimeType&&(jn=!0);jn||Cn.push(Rn)}bn.imageStreams=Cn}}function mP(gn){var bn,Cn,In,Rn,jn,Vn,Hn,Xn,ns,us,ps,fs,vs,Is,Ls,Cs,Ms,Zs,Fs,Ws,Gs,eu,au,du,pu,bu,Uu;return hs(function(Bu){switch(Bu.g){case 1:if(bn=tl,gn.length==1)return Bu.return(gn[0]);for(Cn=gn.map(function(al){return al.filter(function(Mu){return Mu.type==bn.Hc})}),In=gn.map(function(al){return al.filter(function(Mu){return Mu.type==bn.va})}),Rn=gn.map(function(al){return al.filter(function(Mu){return Mu.type==bn.X})}),jn=gn.map(function(al){return al.filter(function(Mu){return Mu.type==bn.Wb})}),Vn=Dn(Rn),Hn=Vn.next();!Hn.done;Hn=Vn.next())Xn=Hn.value,Xn.push(eT(bn.X));for(ns=Dn(jn),us=ns.next();!us.done;us=ns.next())ps=us.value,ps.push(eT(bn.Wb));return Qn(Bu,__([],Cn,0,N1,D1),2);case 2:return fs=Bu.h,Qn(Bu,__([],In,0,N1,D1),3);case 3:return vs=Bu.h,Qn(Bu,__([],Rn,0,N1,D1),4);case 4:return Is=Bu.h,Qn(Bu,__([],jn,0,N1,D1),5);case 5:if(Ls=Bu.h,Cs=0,vs.length&&fs.length)for(Gs=Dn(fs),eu=Gs.next();!eu.done;eu=Gs.next())for(au=eu.value,du=Dn(vs),pu=du.next();!pu.done;pu=du.next())bu=pu.value,Uu=Cs++,bu.variantIds.push(Uu),au.variantIds.push(Uu);else for(Ms=vs.concat(fs),Zs=Dn(Ms),Fs=Zs.next();!Fs.done;Fs=Zs.next())Ws=Fs.value,Ws.variantIds=[Cs++];return Bu.return(vs.concat(fs).concat(Is).concat(Ls))}})}function __(gn,bn,Cn,In,Rn){var jn,Vn,Hn,Xn,ns,us,ps,fs,vs,Is,Ls,Cs,Ms,Zs,Fs,Ws,Gs,eu,au,du;return hs(function(pu){switch(pu.g){case 1:for(jn=tl,Vn=[],Hn=0;Hn<bn.length;Hn++)Hn>=Cn?Vn.push(new Set(bn[Hn])):Vn.push(new Set);Xn=Dn(gn),ns=Xn.next();case 2:if(ns.done){pu.A(4);break}return us=ns.value,Qn(pu,BR(us,bn,Cn,Rn,Vn),5);case 5:if(ps=pu.h,!ps)throw new Bs(2,4,4037);ns=Xn.next(),pu.A(2);break;case 4:for(fs=Dn(Vn),vs=fs.next();!vs.done;vs=fs.next())for(Is=vs.value,Ls=Dn(Is),Cs=Ls.next();!Cs.done;Cs=Ls.next())Ms=Cs.value,(Zs=VR(Ms,bn,In,Rn,Vn))&&gn.push(Zs);for(Fs=Dn(Vn),vs=Fs.next();!vs.done;vs=Fs.next())for(Ws=vs.value,Gs={},eu=Dn(Ws),Cs=eu.next();!Cs.done;Gs={Ua:Gs.Ua},Cs=eu.next())if(Gs.Ua=Cs.value,au=Gs.Ua.type==jn.X&&!Gs.Ua.language,du=Gs.Ua.type==jn.Wb&&!Gs.Ua.tilesLayout,!au&&!du&&gn.some(function(bu){return function(Uu){return Uu.mimeType==bu.Ua.mimeType&&xl(Uu.codecs)==xl(bu.Ua.codecs)}}(Gs)))throw new Bs(2,4,4037);return pu.return(gn)}})}function BR(gn,bn,Cn,In,Rn){return hs(function(jn){return jn.g==1?(yP(bn,gn),gn.matchedStreams?gn.segmentIndex?Qn(jn,gP(gn,Cn),2):jn.A(2):jn.return(!1)):(HC(gn,Cn,In,Rn),jn.return(!0))})}function gP(gn,bn){var Cn,In,Rn,jn,Vn,Hn,Xn;return hs(function(ns){if(ns.g==1){for(Cn=[],In=gn.matchedStreams,Rn=Dn(In),jn=Rn.next();!jn.done;jn=Rn.next())Vn=jn.value,Cn.push(Vn.createSegmentIndex()),Vn.trickModeVideo&&!Vn.trickModeVideo.segmentIndex&&Cn.push(Vn.trickModeVideo.createSegmentIndex());return Qn(ns,Promise.all(Cn),2)}if(gn.segmentIndex instanceof _d)for(Hn=bn;Hn<In.length;Hn++)Xn=In[Hn],Xn.segmentIndex&&gn.segmentIndex.l.push(Xn.segmentIndex);ms(ns)})}function VR(gn,bn,Cn,In,Rn){var jn=Cn(gn);return yP(bn,jn),jn.createSegmentIndex&&(jn.createSegmentIndex=function(){return hs(function(Vn){return jn.segmentIndex?Vn.A(0):(jn.segmentIndex=new _d,Qn(Vn,gP(jn,0),0))})}),!jn.matchedStreams||!jn.matchedStreams.length?null:(HC(jn,0,In,Rn),jn)}function HC(gn,bn,Cn,In){for(var Rn=gn.matchedStreams,jn=0;jn<Rn.length;jn++)if(jn>=bn){var Vn=Rn[jn];Cn(gn,Vn);var Hn=!0;gn.type=="audio"&&$m(gn.language,Vn.language)==0&&(Hn=!1),Hn&&In[jn].delete(Vn)}}function ZS(gn){var bn=Object.assign({},gn);return bn.originalId=null,bn.createSegmentIndex=function(){return Promise.resolve()},bn.closeSegmentIndex=function(){if(bn.segmentIndex&&(bn.segmentIndex.release(),bn.segmentIndex=null),bn.matchedStreams)for(var Cn=Dn(bn.matchedStreams),In=Cn.next();!In.done;In=Cn.next())In=In.value,In.segmentIndex&&(In.segmentIndex.release(),In.segmentIndex=null)},bn.segmentIndex=null,bn.emsgSchemeIdUris=[],bn.keyIds=new Set,bn.closedCaptions=null,bn.trickModeVideo=null,bn}function N1(gn){return gn=Object.assign({},gn),gn.keyIds=new Set,gn.segments=[],gn.variantIds=[],gn.closedCaptions=null,gn}function OE(gn,bn){gn.roles=Array.from(new Set(gn.roles.concat(bn.roles))),bn.emsgSchemeIdUris&&(gn.emsgSchemeIdUris=Array.from(new Set(gn.emsgSchemeIdUris.concat(bn.emsgSchemeIdUris)))),gn.keyIds=function(jn,Vn){return new Set([].concat(Kn(jn),Kn(Vn)))}(gn.keyIds,bn.keyIds),gn.originalId==null?gn.originalId=bn.originalId:gn.originalId+=","+(bn.originalId||"");var Cn=XT(gn.drmInfos,bn.drmInfos);if(bn.drmInfos.length&&gn.drmInfos.length&&!Cn.length)throw new Bs(2,4,4038);if(gn.drmInfos=Cn,gn.encrypted=gn.encrypted||bn.encrypted,bn.closedCaptions){gn.closedCaptions||(gn.closedCaptions=new Map),Cn=Dn(bn.closedCaptions);for(var In=Cn.next();!In.done;In=Cn.next()){var Rn=Dn(In.value);In=Rn.next().value,Rn=Rn.next().value,gn.closedCaptions.set(In,Rn)}}bn.trickModeVideo?(gn.trickModeVideo||(gn.trickModeVideo=ZS(bn.trickModeVideo),gn.trickModeVideo.createSegmentIndex=function(){return gn.trickModeVideo.segmentIndex=gn.segmentIndex.clone(),Promise.resolve()}),OE(gn.trickModeVideo,bn.trickModeVideo)):gn.trickModeVideo&&OE(gn.trickModeVideo,bn)}function D1(gn,bn){gn.roles=Array.from(new Set(gn.roles.concat(bn.roles)));var Cn=bn.keyIds;if(Cn=new Set([].concat(Kn(gn.keyIds),Kn(Cn))),gn.keyIds=Cn,gn.encrypted=gn.encrypted&&bn.encrypted,gn.segments.push.apply(gn.segments,Kn(bn.segments)),bn.closedCaptions)for(gn.closedCaptions||(gn.closedCaptions=new Map),bn=Dn(bn.closedCaptions),Cn=bn.next();!Cn.done;Cn=bn.next()){var In=Dn(Cn.value);Cn=In.next().value,In=In.next().value,gn.closedCaptions.set(Cn,In)}}function yP(gn,bn){var Cn=[];gn=Dn(gn);for(var In=gn.next();!In.done;In=gn.next()){var Rn=bn,jn={audio:KC,video:KC,text:E_,image:GR}[Rn.type],Vn={audio:vP,video:zR,text:_P,image:JS}[Rn.type],Hn=null;In=Dn(In.value);for(var Xn=In.next();!Xn.done;Xn=In.next())Xn=Xn.value,!jn(Rn,Xn)||Hn&&!Vn(Rn,Hn,Xn)||(Hn=Xn);if(Rn=Hn,!Rn)return;Cn.push(Rn)}bn.matchedStreams=Cn}function KC(gn,bn){var Cn;return!(Cn=bn.mimeType!=gn.mimeType||xl(bn.codecs)!=xl(gn.codecs))&&(Cn=gn.drmInfos)&&(gn=gn.drmInfos,bn=bn.drmInfos,Cn=!(!(gn.length&&bn.length)||0<XT(gn,bn).length)),!Cn}function E_(gn,bn){return gn.language?bn.language?!($m(gn.language,bn.language)==0||bn.kind!=gn.kind):!0:!1}function GR(gn){return!!gn.tilesLayout}function vP(gn,bn,Cn){if(gn.id==Cn.id)return!0;var In=$m(gn.language,bn.language),Rn=$m(gn.language,Cn.language);return Rn>In?!0:Rn<In?!1:gn.roles.length?(In=bn.roles.filter(function(jn){return gn.roles.includes(jn)}),Rn=Cn.roles.filter(function(jn){return gn.roles.includes(jn)}),Rn.length>In.length?!0:Rn.length<In.length?!1:Cn.roles.length<bn.roles.length):!Cn.roles.length&&bn.roles.length?!0:Cn.roles.length&&!bn.roles.length?!1:!bn.primary&&Cn.primary?!0:bn.primary&&!Cn.primary?!1:(In=S_(gn.channelsCount,bn.channelsCount,Cn.channelsCount),In==vy?!0:In==qv?!1:(In=S_(gn.audioSamplingRate,bn.audioSamplingRate,Cn.audioSamplingRate),In==vy?!0:In==qv?!1:!!(gn.bandwidth&&WC(gn.bandwidth,bn.bandwidth,Cn.bandwidth)==vy)))}function zR(gn,bn,Cn){if(gn.id==Cn.id)return!0;var In=S_(gn.width*gn.height,bn.width*bn.height,Cn.width*Cn.height);if(In==vy)return!0;if(In==qv)return!1;if(gn.frameRate){if(In=S_(gn.frameRate,bn.frameRate,Cn.frameRate),In==vy)return!0;if(In==qv)return!1}return!!(gn.bandwidth&&WC(gn.bandwidth,bn.bandwidth,Cn.bandwidth)==vy)}function _P(gn,bn,Cn){if(gn.id==Cn.id)return!0;var In=$m(gn.language,bn.language),Rn=$m(gn.language,Cn.language);if(Rn>In)return!0;if(Rn<In)return!1;if(!bn.primary&&Cn.primary)return!0;if(bn.primary&&!Cn.primary)return!1;if(gn.roles.length){if(In=bn.roles.filter(function(jn){return gn.roles.includes(jn)}),Rn=Cn.roles.filter(function(jn){return gn.roles.includes(jn)}),Rn.length>In.length)return!0;if(Rn.length<In.length)return!1}else{if(!Cn.roles.length&&bn.roles.length)return!0;if(Cn.roles.length&&!bn.roles.length)return!1}return!(Cn.mimeType!=gn.mimeType||Cn.codecs!=gn.codecs||bn.mimeType==gn.mimeType&&bn.codecs==gn.codecs)}function JS(gn,bn,Cn){return gn.id==Cn.id?!0:S_(gn.width*gn.height,bn.width*bn.height,Cn.width*Cn.height)==vy}function eT(gn){return{id:0,originalId:"",primary:!1,type:gn,mimeType:"",codecs:"",language:"",label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}}function v0(gn){return{id:0,originalId:"",createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new yl([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",label:null,type:gn,primary:!1,trickModeVideo:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null}}function S_(gn,bn,Cn){if(bn==gn&&gn!=Cn)return qv;if(Cn==gn&&gn!=bn)return vy;if(bn>gn){if(Cn<=gn||Cn-gn<bn-gn)return vy;if(Cn-gn>bn-gn)return qv}else{if(Cn>gn)return qv;if(gn-Cn<gn-bn)return vy;if(gn-Cn>gn-bn)return qv}return EP}function WC(gn,bn,Cn){return bn=Math.abs(gn-bn),gn=Math.abs(gn-Cn),gn<bn?vy:bn<gn?qv:EP}var vy=1,EP=0,qv=-1;function tT(){var gn=this;this.h=this.g=null,this.m=[],this.i=null,this.G=1,this.l={},this.L={},this.j=new zC,this.F=0,this.H=new vu(5),this.D=new Hu(function(){bP(gn)}),this.o=new Iv,this.s=null,this.J=[],this.u=1/0,this.B=!1}Sn=tT.prototype,Sn.configure=function(gn){this.g=gn},Sn.start=function(gn,bn){var Cn=this,In;return hs(function(Rn){if(Rn.g==1)return Cn.B=bn.isLowLatencyMode(),Cn.m=[gn],Cn.h=bn,Qn(Rn,qC(Cn),2);if(In=Rn.h,Cn.h&&mv(Cn,In),!Cn.h)throw new Bs(2,7,7001);return Rn.return(Cn.i)})},Sn.stop=function(){for(var gn=Dn(Object.values(this.l)),bn=gn.next();!bn.done;bn=gn.next())bn=bn.value,bn.segmentIndex&&bn.segmentIndex.release();return this.j&&this.j.release(),this.g=this.h=null,this.m=[],this.i=null,this.l={},this.j=null,this.D!=null&&(this.D.stop(),this.D=null),this.o.destroy()},Sn.update=function(){var gn=this,bn;return hs(function(Cn){if(Cn.g==1)return Ts(Cn,2),Qn(Cn,qC(gn),4);if(Cn.g!=2)return ys(Cn,0);if(bn=_s(Cn),!gn.h||!bn)return Cn.return();gn.h.onError(bn),ms(Cn)})},Sn.onExpirationUpdated=function(){};function qC(gn){var bn,Cn,In,Rn,jn,Vn,Hn;return hs(function(Xn){return Xn.g==1?(bn=tm(gn.m,gn.g.retryParameters),Cn=gn.h.networkingEngine,gn.h.modifyManifestRequest(bn,{format:"d"}),In=Date.now(),Rn=Cn.request(0,bn),Al(gn.o,Rn),Qn(Xn,Rn.promise,2)):Xn.g!=3?(jn=Xn.h,gn.h?(jn.uri&&!gn.m.includes(jn.uri)&&gn.m.unshift(jn.uri),Qn(Xn,HR(gn,jn.data,jn.uri),3)):Xn.return(0)):(Vn=Date.now(),Hn=(Vn-In)/1e3,gn.H.sample(1,Hn),Xn.return(Hn))})}function HR(gn,bn,Cn){var In,Rn,jn,Vn;return hs(function(Hn){if(Hn.g==1){if(In=sv(bn,"MPD"),!In)throw new Bs(2,4,4001,Cn);return gn.g.dash.disableXlinkProcessing?Hn.return(SP(gn,In,Cn)):(Rn=gn.g.dash.xlinkFailGracefully,jn=y0(In,gn.g.retryParameters,Rn,Cn,gn.h.networkingEngine),Al(gn.o,jn),Qn(Hn,jn.promise,2))}return Vn=Hn.h,Hn.return(SP(gn,Vn,Cn))})}function SP(gn,bn,Cn){var In,Rn,jn,Vn,Hn,Xn,ns,us,ps,fs,vs,Is,Ls,Cs,Ms,Zs,Fs,Ws,Gs,eu,au,du,pu,bu,Uu,Bu,al,Mu,Ql,ul;return hs(function($l){switch($l.g){case 1:if((In=gn.g.dash.manifestPreprocessor)&&In(bn),Rn=[Cn],jn=Hl(bn,"Location").map(z0).filter(dp),0<jn.length&&(Vn=zp(Rn,jn),Rn=gn.m=Vn),Hn=Hl(bn,"BaseURL"),Xn=Hn.map(z0),ns=zp(Rn,Xn),us=0,Hn&&Hn.length&&(us=Ml(Hn[0],"availabilityTimeOffset",H0)||0),ps=gn.g.dash.ignoreMinBufferTime,fs=0,ps||(fs=Ml(bn,"minBufferTime",Nv)||0),gn.F=Ml(bn,"minimumUpdatePeriod",Nv,-1),vs=Ml(bn,"availabilityStartTime",Xl),Is=Ml(bn,"timeShiftBufferDepth",Nv),Ls=gn.g.dash.ignoreSuggestedPresentationDelay,Cs=null,Ls||(Cs=Ml(bn,"suggestedPresentationDelay",Nv)),Ms=gn.g.dash.ignoreMaxSegmentDuration,Zs=null,Ms||(Zs=Ml(bn,"maxSegmentDuration",Nv)),Fs=bn.getAttribute("type")||"static",gn.i)for(Ws=gn.i.presentationTimeline,Gs=Dn(Object.values(gn.l)),eu=Gs.next();!eu.done;eu=Gs.next())au=eu.value,au.segmentIndex&&au.segmentIndex.eb(Ws.Oa());else du=gn.g.defaultPresentationDelay||1.5*fs,pu=Cs??du,Ws=new $u(vs,pu,gn.g.dash.autoCorrectDrift);return Ws.yc(Fs=="static"),Ws.U()&&!isNaN(gn.g.availabilityWindowOverride)&&(Is=gn.g.availabilityWindowOverride),Is==null&&(Is=1/0),Ws.me(Is),bu=bn.getAttribute("profiles")||"",Uu={Va:Fs!="static",presentationTimeline:Ws,$:null,T:null,fa:null,I:null,bandwidth:0,Ke:!1,zb:us,profiles:bu.split(",")},Bu=TP(gn,Uu,ns,bn),al=Bu.duration,Mu=Bu.periods,Fs!="static"&&Bu.De||Ws.Aa(al||1/0),gn.u&&!gn.B&&gn.h.isAutoLowLatencyMode()&&(gn.h.enableLowLatencyMode(),gn.B=gn.h.isLowLatencyMode()),gn.B?Ws.Te(gn.u):gn.u&&Tu("Low-latency DASH live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details."),Ws.Sd(Zs||1),Qn($l,LR(gn.j,Mu,Uu.Va),2);case 2:if(gn.i){gn.i.variants=gn.j.l,gn.i.textStreams=gn.j.j.slice(),gn.i.imageStreams=gn.j.i,gn.h.filter(gn.i),$l.A(3);break}if(gn.i={presentationTimeline:Ws,variants:gn.j.l,textStreams:gn.j.j.slice(),imageStreams:gn.j.i,offlineSessionIds:[],minBufferTime:fs||0,sequenceMode:gn.g.dash.sequenceMode},!Ws.cf()){$l.A(4);break}return Ql=Hl(bn,"UTCTiming"),Qn($l,WR(gn,ns,Ql),5);case 5:if(ul=$l.h,!gn.h)return $l.return();Ws.Ue(ul);case 4:Ws.Md();case 3:gn.h.makeTextStreamsForClosedCaptions(gn.i),ms($l)}})}function TP(gn,bn,Cn,In){var Rn=Ml(In,"mediaPresentationDuration",Nv),jn=[],Vn=0;In=Hl(In,"Period");for(var Hn=0;Hn<In.length;Hn++){var Xn=In[Hn],ns=In[Hn+1],us=Ml(Xn,"start",Nv,Vn),ps=Xn.id,fs=Ml(Xn,"duration",Nv),vs=null;if(ns){var Is=Ml(ns,"start",Nv);Is!=null&&(vs=Is-us)}else Rn!=null&&(vs=Rn-us);if(vs==null&&(vs=fs),!(gn.s!==null&&ps!==null&&us!==null&&us<gn.s)||gn.J.includes(ps)||Hn+1==In.length){if(us!==null&&(gn.s===null||us>gn.s)&&(gn.s=us),Vn=kP(gn,bn,Cn,{start:us,duration:vs,node:Xn,Gd:vs==null||!ns}),jn.push(Vn),bn.$.id&&vs&&(gn.L[bn.$.id]=vs),vs==null){Vn=null;break}Vn=us+vs}}return gn.J=jn.map(function(Ls){return Ls.id}),Rn!=null?{periods:jn,duration:Rn,De:!1}:{periods:jn,duration:Vn,De:!0}}function kP(gn,bn,Cn,In){bn.$=_0(In.node,null,Cn),bn.T=In,bn.$.zb=bn.zb,bn.$.id||(bn.$.id="__shaka_period_"+In.start);var Rn=Hl(In.node,"EventStream");Cn=bn.presentationTimeline.Oa(),Rn=Dn(Rn);for(var jn=Rn.next();!jn.done;jn=Rn.next())qR(gn,In.start,In.duration,jn.value,Cn);if(Cn=Hl(In.node,"AdaptationSet").map(function(us){return $P(gn,bn,us)}).filter(dp),bn.Va){for(In=[],Rn=Dn(Cn),jn=Rn.next();!jn.done;jn=Rn.next()){jn=Dn(jn.value.pg);for(var Vn=jn.next();!Vn.done;Vn=jn.next())In.push(Vn.value)}if(In.length!=new Set(In).size)throw new Bs(2,4,4018)}for(In=Cn.filter(function(us){return!us.qe}),Cn=Cn.filter(function(us){return us.qe}),Cn=Dn(Cn),Rn=Cn.next();!Rn.done;Rn=Cn.next()){Rn=Rn.value,jn=Rn.qe.split(" "),Vn=Dn(In);for(var Hn=Vn.next();!Hn.done;Hn=Vn.next()){var Xn=Hn.value;if(jn.includes(Xn.id)){Hn={},Xn=Dn(Xn.streams);for(var ns=Xn.next();!ns.done;Hn={Gc:Hn.Gc},ns=Xn.next())Hn.Gc=ns.value,Hn.Gc.trickModeVideo=Rn.streams.find(function(us){return function(ps){return xl(us.Gc.codecs)==xl(ps.codecs)}}(Hn))}}}if(Rn=gn.g.disableAudio?[]:T_(In,"audio"),Vn=gn.g.disableVideo?[]:T_(In,"video"),jn=gn.g.disableText?[]:T_(In,Zu),Cn=gn.g.disableThumbnails?[]:T_(In,"image"),!Vn.length&&!Rn.length)throw new Bs(2,4,4004);for(In=[],Rn=Dn(Rn),Hn=Rn.next();!Hn.done;Hn=Rn.next())In.push.apply(In,Kn(Hn.value.streams));for(Rn=[],Vn=Dn(Vn),Hn=Vn.next();!Hn.done;Hn=Vn.next())Rn.push.apply(Rn,Kn(Hn.value.streams));for(Vn=[],jn=Dn(jn),Hn=jn.next();!Hn.done;Hn=jn.next())Vn.push.apply(Vn,Kn(Hn.value.streams));for(jn=[],Cn=Dn(Cn),Hn=Cn.next();!Hn.done;Hn=Cn.next())jn.push.apply(jn,Kn(Hn.value.streams));return{id:bn.$.id,Kc:In,gd:Rn,textStreams:Vn,imageStreams:jn}}function T_(gn,bn){return gn.filter(function(Cn){return Cn.contentType==bn})}function $P(gn,bn,Cn){function In(eu){switch(eu){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}bn.fa=_0(Cn,bn.$,null);var Rn=!1,jn=Hl(Cn,"Role"),Vn=jn.map(function(eu){return eu.getAttribute("value")}).filter(dp),Hn=void 0,Xn=bn.fa.contentType==Zu;Xn&&(Hn="subtitle"),jn=Dn(jn);for(var ns=jn.next();!ns.done;ns=jn.next()){ns=ns.value;var us=ns.getAttribute("schemeIdUri");if(us==null||us=="urn:mpeg:dash:role:2011")switch(ns=ns.getAttribute("value"),ns){case"main":Rn=!0;break;case"caption":case"subtitle":Hn=ns}}var ps;us=Hl(Cn,"EssentialProperty"),jn=null,ns=!1,us=Dn(us);for(var fs=us.next();!fs.done;fs=us.next()){fs=fs.value;var vs=fs.getAttribute("schemeIdUri");vs=="http://dashif.org/guidelines/trickmode"?jn=fs.getAttribute("value"):vs=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?ps=In(parseInt(fs.getAttribute("value"),10)):ns=!0}for(us=Hl(Cn,"SupplementalProperty"),us=Dn(us),fs=us.next();!fs.done;fs=us.next())fs=fs.value,fs.getAttribute("schemeIdUri")=="urn:mpeg:mpegB:cicp:TransferCharacteristics"&&(ps=In(parseInt(fs.getAttribute("value"),10)));us=Hl(Cn,"Accessibility");var Is=new Map;for(us=Dn(us),fs=us.next();!fs.done;fs=us.next())if(vs=fs.value,fs=vs.getAttribute("schemeIdUri"),vs=vs.getAttribute("value"),fs=="urn:scte:dash:cc:cea-608:2015")if(fs=1,vs!=null){vs=vs.split(";");for(var Ls=Dn(vs),Cs=Ls.next();!Cs.done;Cs=Ls.next()){var Ms=Cs.value,Zs=Cs=void 0;Ms.includes("=")?(Ms=Ms.split("="),Cs=Ms[0].startsWith("CC")?Ms[0]:"CC"+Ms[0],Zs=Ms[1]||"und"):(Cs="CC"+fs,vs.length==2?fs+=2:fs++,Zs=Ms),Is.set(Cs,ml(Zs))}}else Is.set("CC1","und");else if(fs=="urn:scte:dash:cc:cea-708:2015")if(fs=1,vs!=null)for(vs=Dn(vs.split(";")),Cs=vs.next();!Cs.done;Cs=vs.next())Cs=Cs.value,Ms=Ls=void 0,Cs.includes("=")?(Cs=Cs.split("="),Ls="svc"+Cs[0],Ms=Cs[1].split(",")[0].split(":").pop()):(Ls="svc"+fs,fs++,Ms=Cs),Is.set(Ls,ml(Ms));else Is.set("svc1","und");else fs=="urn:mpeg:dash:role:2011"&&vs!=null&&(Vn.push(vs),vs=="captions"&&(Hn="caption"));if(ns)return null;ns=Hl(Cn,"ContentProtection");var Fs=tP(ns,gn.g.dash.ignoreDrmInfo,gn.g.dash.keySystemsByURI),Ws=ml(Cn.getAttribute("lang")||"und"),Gs=Cn.getAttribute("label");if((ns=Hl(Cn,"Label"))&&ns.length&&(ns=ns[0],ns.textContent&&(Gs=ns.textContent)),ns=Hl(Cn,"Representation"),Cn=ns.map(function(eu){return(eu=Wy(gn,bn,Fs,Hn,Ws,Gs,Rn,Vn,Is,eu))&&(eu.hdr=eu.hdr||ps),eu}).filter(function(eu){return!!eu}),Cn.length==0){if(jn=bn.fa.contentType=="image",gn.g.dash.ignoreEmptyAdaptationSet||Xn||jn)return null;throw new Bs(2,4,4003)}if(!bn.fa.contentType||bn.fa.contentType=="application")for(bn.fa.contentType=xP(Cn[0].mimeType,Cn[0].codecs),Xn=Dn(Cn),us=Xn.next();!us.done;us=Xn.next())us.value.type=bn.fa.contentType;for(Xn=Dn(Cn),us=Xn.next();!us.done;us=Xn.next())for(us=us.value,fs=Dn(Fs.drmInfos),vs=fs.next();!vs.done;vs=fs.next())vs=vs.value,vs.keyIds=vs.keyIds&&us.keyIds?new Set([].concat(Kn(vs.keyIds),Kn(us.keyIds))):vs.keyIds||us.keyIds;return Xn=ns.map(function(eu){return eu.getAttribute("id")}).filter(dp),{id:bn.fa.id||"__fake__"+gn.G++,contentType:bn.fa.contentType,language:Ws,sh:Rn,streams:Cn,drmInfos:Fs.drmInfos,qe:jn,pg:Xn}}function Wy(gn,bn,Cn,In,Rn,jn,Vn,Hn,Xn,ns){if(bn.I=_0(ns,bn.fa,null),gn.u=Math.min(gn.u,bn.I.zb),!KR(bn.I))return null;var us=bn.T.start;bn.bandwidth=Ml(ns,"bandwidth",ly)||0;var ps=bn.I.contentType,fs=ps==Zu||ps=="application";ps=ps=="image";try{var vs=function(eu,au,du){return L1(gn,eu,au,du)};if(bn.I.wc)var Is=OR(bn,vs);else if(bn.I.ab)Is=GC(bn,gn.l);else if(bn.I.xc)Is=dP(bn,vs,gn.l,!!gn.i,gn.g.dash.initialSegmentLimit,gn.L);else{var Ls=bn.I.wa,Cs=bn.T.duration||0;Is={Bb:function(){return Promise.resolve(Gk(us,Cs,Ls))}}}}catch(eu){if((fs||ps)&&eu.code==4002)return null;throw eu}vs=Hl(ns,"ContentProtection"),vs=TR(vs,Cn,gn.g.dash.ignoreDrmInfo,gn.g.dash.keySystemsByURI),vs=new Set(vs?[vs]:[]);var Ms=!1;Hl(ns,"SupplementalProperty").some(function(eu){return eu.getAttribute("schemeIdUri")=="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&eu.getAttribute("value")=="JOC"})&&(Ms=!0);var Zs=!1;fs&&(Zs=Hn.includes("forced_subtitle")||Hn.includes("forced-subtitle"));var Fs;if(ps&&((ns=Hl(ns,"EssentialProperty").find(function(eu){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(eu.getAttribute("schemeIdUri"))}))&&(Fs=ns.getAttribute("value")),!Fs))return null;var Ws;ns=bn.I.codecs,bn.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(ns.includes("hvc1.2.4.L153.B0")||ns.includes("hev1.2.4.L153.B0"))&&(Ws="PQ"),ns=bn.I.id?bn.$.id+","+bn.I.id:"";var Gs=ns&&gn.l[ns]?gn.l[ns]:{id:gn.G++,originalId:bn.I.id,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){Gs.segmentIndex&&(Gs.segmentIndex.release(),Gs.segmentIndex=null)},segmentIndex:null,mimeType:bn.I.mimeType,codecs:bn.I.codecs,frameRate:bn.I.frameRate,pixelAspectRatio:bn.I.pixelAspectRatio,bandwidth:bn.bandwidth,width:bn.I.width,height:bn.I.height,kind:In,encrypted:0<Cn.drmInfos.length,drmInfos:Cn.drmInfos,keyIds:vs,language:Rn,label:jn,type:bn.fa.contentType,primary:Vn,trickModeVideo:null,emsgSchemeIdUris:bn.I.emsgSchemeIdUris,roles:Hn,forced:Zs,channelsCount:bn.I.ad,audioSamplingRate:bn.I.audioSamplingRate,spatialAudio:Ms,closedCaptions:Xn,hdr:Ws,tilesLayout:Fs,matchedStreams:[]};return Gs.createSegmentIndex=function(){var eu;return hs(function(au){if(au.g==1)return Gs.segmentIndex?au.A(0):(eu=Gs,Qn(au,Is.Bb(),3));eu.segmentIndex=au.h,ms(au)})},ns&&bn.Va&&!gn.l[ns]&&(gn.l[ns]=Gs),Gs}function bP(gn){var bn,Cn;hs(function(In){switch(In.g){case 1:return bn=0,Ts(In,2),Qn(In,qC(gn),4);case 4:bn=In.h,ys(In,3);break;case 2:Cn=_s(In),gn.h&&(Cn.severity=1,gn.h.onError(Cn));case 3:if(!gn.h)return In.return();mv(gn,bn),ms(In)}})}function mv(gn,bn){0>gn.F||gn.D.O(Math.max(3,gn.F-bn,Wl(gn.H)))}function _0(gn,bn,Cn){bn=bn||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,ad:null,audioSamplingRate:null,zb:0},Cn=Cn||bn.wa;var In=Hl(gn,"BaseURL"),Rn=In.map(z0),jn=gn.getAttribute("contentType")||bn.contentType,Vn=gn.getAttribute("mimeType")||bn.mimeType,Hn=gn.getAttribute("codecs")||bn.codecs,Xn=Ml(gn,"frameRate",Kl)||bn.frameRate,ns=gn.getAttribute("sar")||bn.pixelAspectRatio,us=Hl(gn,"InbandEventStream"),ps=bn.emsgSchemeIdUris.slice();us=Dn(us);for(var fs=us.next();!fs.done;fs=us.next())fs=fs.value.getAttribute("schemeIdUri"),ps.includes(fs)||ps.push(fs);us=Hl(gn,"AudioChannelConfiguration"),us=YC(us)||bn.ad,fs=Ml(gn,"audioSamplingRate",Gm)||bn.audioSamplingRate,jn||(jn=xP(Vn,Hn));var vs=Rv(gn,"SegmentBase"),Is=Rv(gn,"SegmentTemplate"),Ls=vs&&Ml(vs,"availabilityTimeOffset",H0)||0,Cs=Is&&Ml(Is,"availabilityTimeOffset",H0)||0;return In=In&&In.length&&Ml(In[0],"availabilityTimeOffset",H0)||0,In=bn.zb+In+Ls+Cs,{wa:zp(Cn,Rn),wc:vs||bn.wc,ab:Rv(gn,"SegmentList")||bn.ab,xc:Is||bn.xc,width:Ml(gn,"width",Gm)||bn.width,height:Ml(gn,"height",Gm)||bn.height,contentType:jn,mimeType:Vn,codecs:Hn,frameRate:Xn,pixelAspectRatio:ns,emsgSchemeIdUris:ps,id:gn.getAttribute("id"),ad:us,audioSamplingRate:fs,zb:In}}function YC(gn){gn=Dn(gn);for(var bn=gn.next();!bn.done;bn=gn.next()){var Cn=bn.value;if((bn=Cn.getAttribute("schemeIdUri"))&&(Cn=Cn.getAttribute("value")))switch(bn){case"urn:mpeg:dash:outputChannelPositionList:2012":return Cn.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(bn=parseInt(Cn,10),!bn)continue;return bn;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(bn=parseInt(Cn,16),!bn)continue;for(gn=0;bn;)bn&1&&++gn,bn>>=1;return gn;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(bn=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(Cn=parseInt(Cn,10))&&0<Cn&&Cn<bn.length)return bn[Cn]}}return null}function KR(gn){var bn=gn.wc?1:0;return bn+=gn.ab?1:0,bn+=gn.xc?1:0,bn==0?gn.contentType==Zu||gn.contentType=="application":(bn!=1&&(gn.wc&&(gn.ab=null),gn.xc=null),!0)}function XC(gn,bn,Cn,In){var Rn,jn,Vn,Hn,Xn,ns;return hs(function(us){if(us.g==1)return Rn=zp(bn,[Cn]),jn=tm(Rn,gn.g.retryParameters),jn.method=In,Vn=gn.h.networkingEngine.request(4,jn),Al(gn.o,Vn),Qn(us,Vn.promise,2);if(Hn=us.h,In=="HEAD"){if(!Hn.headers||!Hn.headers.date)return us.return(0);Xn=Hn.headers.date}else Xn=Ou(Hn.data);return ns=Date.parse(Xn),isNaN(ns)?us.return(0):us.return(ns-Date.now())})}function WR(gn,bn,Cn){var In,Rn,jn,Vn,Hn,Xn,ns,us;return hs(function(ps){switch(ps.g){case 1:In=Cn.map(function(fs){return{scheme:fs.getAttribute("schemeIdUri"),value:fs.getAttribute("value")}}),Rn=gn.g.dash.clockSyncUri,!In.length&&Rn&&In.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:Rn}),jn=Dn(In),Vn=jn.next();case 2:if(Vn.done){ps.A(4);break}switch(Hn=Vn.value,Ts(ps,5),Xn=Hn.scheme,ns=Hn.value,Xn){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return ps.A(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return ps.A(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return us=Date.parse(ns),ps.return(isNaN(us)?0:us-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":Tu("NTP UTCTiming scheme is not supported");break;default:Tu("Unrecognized scheme in UTCTiming element",Xn)}ps.A(9);break;case 7:return Qn(ps,XC(gn,bn,ns,"HEAD"),10);case 10:return ps.return(ps.h);case 8:return Qn(ps,XC(gn,bn,ns,"GET"),11);case 11:return ps.return(ps.h);case 9:ys(ps,3);break;case 5:_s(ps);case 3:Vn=jn.next(),ps.A(2);break;case 4:return Tu("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),ps.return(0)}})}function qR(gn,bn,Cn,In,Rn){var jn=In.getAttribute("schemeIdUri")||"",Vn=In.getAttribute("value")||"",Hn=Ml(In,"timescale",Gm)||1;In=Dn(Hl(In,"Event"));for(var Xn=In.next();!Xn.done;Xn=In.next()){Xn=Xn.value;var ns=Ml(Xn,"presentationTime",Gm)||0,us=Ml(Xn,"duration",Gm)||0;ns=ns/Hn+bn,us=ns+us/Hn,Cn!=null&&(ns=Math.min(ns,bn+Cn),us=Math.min(us,bn+Cn)),us<Rn||(Xn={schemeIdUri:jn,value:Vn,startTime:ns,endTime:us,id:Xn.getAttribute("id")||"",eventElement:Xn},gn.h.onTimelineRegionAdded(Xn))}}function L1(gn,bn,Cn,In){var Rn,jn,Vn,Hn,Xn;return hs(function(ns){return ns.g==1?(Rn=Fy,jn=rC(bn,Cn,In,gn.g.retryParameters),Vn=gn.h.networkingEngine,Hn=Vn.request(Rn,jn),Al(gn.o,Hn),Qn(ns,Hn.promise,2)):(Xn=ns.h,ns.return(Xn.data))})}function xP(gn,bn){return r_(_h(gn,bn))?Zu:gn.split("/")[0]}Ys("shaka.dash.DashParser",tT),q_.mpd=function(){return new tT},cy["application/dash+xml"]=function(){return new tT},cy["video/vnd.mpeg.dash.mpd"]=function(){return new tT};function CP(gn,bn,Cn,In){this.h=gn,this.type=bn,this.g=Cn,this.segments=In||null}function QC(gn,bn,Cn,In){this.id=gn,this.name=bn,this.g=Cn,this.value=In===void 0?null:In}QC.prototype.toString=function(){function gn(In){return In.name+"="+(isNaN(Number(In.value))?'"'+In.value+'"':In.value)}var bn="#"+this.name,Cn=this.g?this.g.map(gn):[];return this.value&&Cn.unshift(this.value),0<Cn.length&&(bn+=":"+Cn.join(",")),bn},QC.prototype.getAttribute=function(gn){var bn=this.g.filter(function(Cn){return Cn.name==gn});return bn.length?bn[0]:null};function qu(gn,bn,Cn){return(gn=gn.getAttribute(bn))?gn.value:Cn||null}function tp(gn,bn){if(gn=gn.getAttribute(bn),!gn)throw new Bs(2,4,4023,bn);return gn.value}function wP(gn,bn,Cn){Cn=Cn===void 0?[]:Cn,this.g=bn,this.i=gn,this.h=Cn}function AP(gn,bn){this.name=gn,this.value=bn}function qy(gn,bn){return gn.filter(function(Cn){return Cn.name==bn})}function IP(gn,bn){return gn.filter(function(Cn){return tp(Cn,"TYPE")==bn})}function um(gn,bn){return gn=qy(gn,bn),gn.length?gn[0]:null}function U1(gn,bn){var Cn=0;return Cn=Cn===void 0?0:Cn,(gn=um(gn,bn))?Number(gn.value):Cn}function E0(gn,bn){return zp([gn],[bn])[0]}function k_(gn){this.h=gn,this.g=0}function $_(gn){Lu(gn,/[ \t]+/gm)}function Lu(gn,bn){return bn.lastIndex=gn.g,bn=bn.exec(gn.h),bn=bn==null?null:{position:bn.index,length:bn[0].length,results:bn},gn.g==gn.h.length||bn==null||bn.position!=gn.g?null:(gn.g+=bn.length,bn.results)}function jl(gn){return gn.g==gn.h.length?null:(gn=Lu(gn,/[^ \t\n]*/gm))?gn[0]:null}function PP(){this.g=0}function j1(gn,bn,Cn){bn=Ou(bn),bn=bn.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`).trim();var In=bn.split(/\n+/m);if(!/^#EXTM3U($|[ \t\n])/m.test(In[0]))throw new Bs(2,4,4015);bn=0;for(var Rn=!0,jn=Dn(In),Vn=jn.next();!Vn.done;Vn=jn.next())if(Vn=Vn.value,/^#(?!EXT)/m.test(Vn)||Rn)Rn=!1;else if(Vn=_y(gn,Vn),--gn.g,ZC.includes(Vn.name)){bn=1;break}else Vn.name=="EXT-X-STREAM-INF"&&(Rn=!0);for(jn=[],Rn=!0,Vn=0;Vn<In.length;Vn++){var Hn=In[Vn],Xn=In[Vn+1];if(/^#(?!EXT)/m.test(Hn)||Rn)Rn=!1;else{if(Hn=_y(gn,Hn),lm.includes(Hn.name)){if(bn!=1)throw new Bs(2,4,4017);var ns=In.splice(Vn,In.length-Vn);In=Cn,Rn=[],Vn=[],Xn=[],Hn=null,ns=Dn(ns);for(var us=ns.next();!us.done;us=ns.next())us=us.value,/^(#EXT)/.test(us)?(us=_y(gn,us),ZC.includes(us.name)?jn.push(us):us.name=="EXT-X-MAP"?Hn=us:us.name=="EXT-X-PART"?Xn.push(us):us.name=="EXT-X-PRELOAD-HINT"?qu(us,"TYPE")=="PART"?Xn.push(us):qu(us,"TYPE")=="MAP"&&(us.name="EXT-X-MAP",Hn=us):Vn.push(us)):/^#(?!EXT)/m.test(us)||(us=E0(In,us.trim()),Hn&&Vn.push(Hn),Rn.push(new wP(us,Vn,Xn)),Vn=[],Xn=[]);return Xn.length&&(Hn&&Vn.push(Hn),Rn.push(new wP("",Vn,Xn))),new CP(Cn,bn,jn,Rn)}jn.push(Hn),Hn.name=="EXT-X-STREAM-INF"&&(Hn.g.push(new AP("URI",Xn)),Rn=!0)}}return new CP(Cn,bn,jn)}function _y(gn,bn){gn=gn.g++;var Cn=bn.match(/^#(EXT[^:]*)(?::(.*))?$/);if(!Cn)throw new Bs(2,4,4016,bn);bn=Cn[1];var In=Cn[2];Cn=[];var Rn;if(In){In=new k_(In);var jn;(jn=Lu(In,/^([^,=]+)(?:,|$)/g))&&(Rn=jn[1]);for(var Vn=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g;jn=Lu(In,Vn);)Cn.push(new AP(jn[1],jn[2]||jn[3])),$_(In)}return new QC(gn,bn,Cn,Rn)}var ZC="EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP".split(" "),lm="EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP".split(" ");function rT(){}function S0(gn){try{var bn=Yv(gn);return Uy({uri:gn,originalUri:gn,data:bn.data,headers:{"content-type":bn.contentType}})}catch(Cn){return s_(Cn)}}function Yv(gn){var bn=gn.split(":");if(2>bn.length||bn[0]!="data")throw new Bs(2,1,1004,gn);if(bn=bn.slice(1).join(":").split(","),2>bn.length)throw new Bs(2,1,1004,gn);var Cn=bn[0];gn=pn.decodeURIComponent(bn.slice(1).join(",")),bn=Cn.split(";"),Cn=bn[0];var In=!1;1<bn.length&&bn[bn.length-1]=="base64"&&(In=!0,bn.pop());var Rn;return In?Rn=mm(gn):Rn=fp(gn),{data:Rn,contentType:Cn}}Ys("shaka.net.DataUriPlugin",rT),rT.parse=S0,jy("data",S0);function gv(){var gn=this;this.g=this.i=null,this.Fa=1,this.o=new Map,this.u=new Map,this.F=new Map,this.F.set("video",new Map),this.F.set("audio",new Map),this.F.set(Zu,new Map),this.F.set("image",new Map),this.ua=new Set,this.h=new Map,this.j=null,this.M="",this.W=new PP,this.P=0,this.B=-1,this.H=1/0,this.Ga=!1,this.m=new Hu(function(){zP(gn)}),this.ea=Q1,this.D=null,this.ca=0,this.J=1/0,this.V=this.da=0,this.G=new Iv,this.L=new Map,this.s=new Map,this.ba=new Map,this.l=!1}Sn=gv.prototype,Sn.configure=function(gn){this.g=gn},Sn.start=function(gn,bn){var Cn=this,In;return hs(function(Rn){return Rn.g==1?(Cn.i=bn,Cn.l=bn.isLowLatencyMode(),Qn(Rn,K1(Cn,gn),2)):Rn.g!=3?(In=Rn.h,Cn.M=In.uri,Qn(Rn,OP(Cn,In.data,gn),3)):Rn.return(Cn.D)})},Sn.stop=function(){this.m&&(this.m.stop(),this.m=null);var gn=[];return this.G&&(gn.push(this.G.destroy()),this.G=null),this.g=this.i=null,this.ua.clear(),this.D=null,this.h.clear(),this.u.clear(),this.s.clear(),this.o.clear(),Promise.all(gn)},Sn.update=function(){var gn=this,bn,Cn,In,Rn,jn,Vn,Hn,Xn,ns;return hs(function(us){if(us.g==1){if(!Ey(gn))return us.return();for(bn=[],Cn=Array.from(gn.h.values()),In=Cn.filter(function(ps){return ps.stream.segmentIndex}),Rn=Dn(In),jn=Rn.next();!jn.done;jn=Rn.next())Vn=jn.value,bn.push(T0(gn,Vn));return Qn(us,Promise.all(bn),2)}LP(gn,In.map(function(ps){return ps.stream})),Hn=In.some(function(ps){return ps.mc==0}),In.length&&!Hn&&(Xn=Sy,W1(gn,Xn.ef),ns=In.map(function(ps){return ps.Ya}),gn.j.Aa(Math.min.apply(Math,Kn(ns))),gn.i.updateDuration()),ms(us)})};function yv(gn,bn){return Ey(gn)?gn.F.get(bn.type):bn.$c}function T0(gn,bn){var Cn,In,Rn,jn,Vn,Hn,Xn,ns,us,ps,fs,vs,Is,Ls,Cs,Ms;return hs(function(Zs){if(Zs.g==1)return Cn=bn.Jc,In=new Rp(Cn),gn.l&&bn.Mc&&pm(In,new Jv("_HLS_skip=YES")),Qn(Zs,K1(gn,In.toString()),2);if(Rn=Zs.h,!bn.stream.segmentIndex)return Zs.return();if(jn=j1(gn.W,Rn.data,Rn.uri),jn.type!=1)throw new Bs(2,4,4017);Vn=qy(jn.g,"EXT-X-DEFINE"),Hn=ew(gn,Vn),Xn=bn.stream,ns=yv(gn,bn),us=V1(jn,Xn.mimeType),ps=us.keyIds,fs=us.drmInfos,vs=function(Fs,Ws){return Fs.size===Ws.size&&[].concat(Kn(Fs)).every(function(Gs){return Ws.has(Gs)})},vs(Xn.keyIds,ps)||(Xn.keyIds=ps,Xn.drmInfos=fs,gn.i.newDrmInfo(Xn)),Is=GP(gn,jn,Xn.type,ns,Hn),Xn.segmentIndex.Hb(Is,gn.j.Oa()),Is.length&&(Ls=U1(jn.g,"EXT-X-MEDIA-SEQUENCE"),Cs=ns.get(Ls),Xn.segmentIndex.eb(Cs)),Ms=Is[Is.length-1],um(jn.g,"EXT-X-ENDLIST")&&(bn.mc=!0,bn.Ya=Ms.endTime),ms(Zs)})}Sn.onExpirationUpdated=function(){};function YR(gn,bn){for(var Cn=gn.B==-1,In=Dn(bn),Rn=In.next();!Rn.done;Rn=In.next()){Rn=Rn.value;var jn=Rn.stream.segmentIndex,Vn=yv(gn,Rn);if(jn=jn.g[0]||null){Vn=Dn(Vn);for(var Hn=Vn.next();!Hn.done;Hn=Vn.next()){Hn=Dn(Hn.value);var Xn=Hn.next().value;if(Hn.next().value==jn.startTime){Cn&&(gn.B=Math.max(gn.B,Xn)),Rn.Cd=Xn;break}}}}if(!(0>gn.B))for(bn=Dn(bn),Rn=bn.next();!Rn.done;Rn=bn.next())Cn=Rn.value,(In=Cn.stream.segmentIndex)&&(In.g.splice(0,gn.B-Cn.Cd),(In=In.g[0]||null)&&(In=-In.startTime,Cn.stream.segmentIndex.offset(In),F1(gn,Cn,In)))}function JC(gn,bn){if(gn.H==1/0){bn=Dn(bn);for(var Cn=bn.next();!Cn.done;Cn=bn.next()){var In=Cn.value.stream.segmentIndex.g[0]||null;In!=null&&In.g!=null&&(gn.H=Math.min(gn.H,In.g))}}if(bn=gn.H,bn!=1/0)for(In=Dn(gn.h.values()),Cn=In.next();!Cn.done;Cn=In.next()){Cn=Cn.value;var Rn=Cn.stream.segmentIndex;if(Rn!=null){var jn=Rn.g[0]||null;if(jn.g==null)fl("Missing EXT-X-PROGRAM-DATE-TIME for stream",Cn.Ac,"Expect AV sync issues!");else for(F1(gn,Cn,jn.g-bn-jn.startTime),Cn=Dn(Rn),Rn=Cn.next();!Rn.done;Rn=Cn.next())Rn.value.oe(bn)}}}function F1(gn,bn,Cn){bn.Ya+=Cn,gn=yv(gn,bn),bn=Dn(gn);for(var In=bn.next();!In.done;In=bn.next()){var Rn=Dn(In.value);In=Rn.next().value,Rn=Rn.next().value,gn.set(In,Rn+Cn)}}function OP(gn,bn,Cn){var In,Rn,jn,Vn,Hn,Xn,ns,us,ps,fs,vs,Is,Ls,Cs,Ms,Zs,Fs,Ws,Gs,eu,au,du,pu,bu,Uu,Bu,al,Mu,Ql,ul,$l,Bp;return hs(function(ey){switch(ey.g){case 1:In=j1(gn.W,bn,gn.M),Rn=qy(In.g,"EXT-X-DEFINE");for(var Qy=Dn(Rn),yp=Qy.next();!yp.done;yp=Qy.next()){var qp=yp.value;yp=qu(qp,"NAME"),qp=qu(qp,"VALUE"),yp&&qp&&(gn.o.has(yp)||gn.o.set(yp,qp))}if(jn=[],Vn=[],Hn=[],In.type==1)return eu=gn.g.hls.mediaPlaylistFullMimeType,In.segments.length&&(au=new Rp(In.segments[0].i),du=au.qa.split(".").pop(),(pu=dw[du])?eu=pu:du!=="ts"&&du!=="mp4"&&(q1[du]?(pu=q1[du],bu=gn.g.hls.defaultAudioCodec,eu=pu+'; codecs="'+bu+'"'):b_[du]&&(pu=b_[du],Uu=gn.g.hls.defaultVideoCodec,eu=pu+'; codecs="'+Uu+'"'))),Bu=eu.split(";")[0],al=Bu.split("/")[0],Mu=Ry(eu),Ql=new Map,Qn(ey,UP(gn,In,Cn,Cn,Mu,al,"",!0,"Media Playlist",null,Ql,null,!1,!1,Bu),5);for(Xn=qy(In.g,"EXT-X-MEDIA"),ns=qy(In.g,"EXT-X-STREAM-INF"),us=qy(In.g,"EXT-X-IMAGE-STREAM-INF"),ps=qy(In.g,"EXT-X-SESSION-KEY"),Qy=Dn(ns),yp=Qy.next();!yp.done;yp=Qy.next()){var Zy=yp.value;qp=qu(Zy,"AUDIO"),yp=qu(Zy,"VIDEO");var Su=qu(Zy,"SUBTITLES");if(Zy=NP(gn,Zy),Su){var fA=Np(Zu,Zy);gn.s.set(Su,fA),pl(Zy,fA)}qp&&(Su=Np("audio",Zy),Su||(Su=gn.g.hls.defaultAudioCodec),gn.s.set(qp,Su)),yp&&(qp=Np("video",Zy),qp||(qp=gn.g.hls.defaultVideoCodec),gn.s.set(yp,qp))}for(fs=qy(In.g,"EXT-X-SESSION-DATA"),vs=Dn(fs),Is=vs.next();!Is.done;Is=vs.next())Ls=Is.value,Cs=qu(Ls,"DATA-ID"),Ms=qu(Ls,"URI"),Zs=qu(Ls,"LANGUAGE"),Fs=qu(Ls,"VALUE"),Ws=new Map().set("id",Cs),Ms&&Ws.set("uri",E0(gn.M,Ms)),Zs&&Ws.set("language",Zs),Fs&&Ws.set("value",Fs),Gs=new Ju("sessiondata",Ws),gn.i&&gn.i.onEvent(Gs);for(nT(gn,Xn),Qy=IP(Xn,"CLOSED-CAPTIONS"),Qy=Dn(Qy),yp=Qy.next();!yp.done;yp=Qy.next())Su=yp.value,yp=nw(Su),qp=tp(Su,"GROUP-ID"),Su=tp(Su,"INSTREAM-ID"),gn.L.get(qp)||gn.L.set(qp,new Map),gn.L.get(qp).set(Su,yp);return jn=rw(gn,ns,ps),Vn=RP(gn,Xn),Qn(ey,tw(gn,us),4);case 4:Hn=ey.h,ey.A(3);break;case 5:ul=ey.h,gn.h.set(Cn,ul),jn.push({id:0,language:"und",disabledUntilTime:0,primary:!0,audio:al=="audio"?ul.stream:null,video:al=="video"?ul.stream:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!gn.i)throw new Bs(2,7,7001);gn.j=new $u(null,0),gn.j.yc(!0),In.type==1&&(Ey(gn)&&(BP(gn),$l=gn.P,gn.m.O($l)),Bp=Array.from(gn.h.values()),ow(gn,Bp),MP(gn)),gn.D={presentationTimeline:gn.j,variants:jn,textStreams:Vn,imageStreams:Hn,offlineSessionIds:[],minBufferTime:0,sequenceMode:!0},gn.i.makeTextStreamsForClosedCaptions(gn.D),ms(ey)}})}function MP(gn){if(Ey(gn)){if(gn.P=gn.J,gn.ea==fw){var bn=aw(gn);gn.g.hls.useSafariBehaviorForLive&&(bn=gn.j.m),isNaN(gn.g.availabilityWindowOverride)||(bn=gn.g.availabilityWindowOverride),gn.j.me(bn)}}else gn.j.Aa(aw(gn));gn.j.Md()}function ew(gn,bn){var Cn=new Map;bn=Dn(bn);for(var In=bn.next();!In.done;In=bn.next()){var Rn=In.value;In=qu(Rn,"NAME");var jn=qu(Rn,"VALUE");Rn=qu(Rn,"IMPORT"),In&&jn&&Cn.set(In,jn),Rn&&(In=gn.o.get(Rn))&&Cn.set(Rn,In)}return Cn}function RP(gn,bn){var Cn=IP(bn,"SUBTITLES");bn=Cn.map(function(Vn){if(gn.g.disableText)return null;try{return iw(gn,Vn).stream}catch(Hn){if(gn.g.hls.ignoreTextStreamFailures)return null;throw Hn}}),Cn=Dn(Cn);for(var In=Cn.next();!In.done;In=Cn.next()){var Rn=tp(In.value,"GROUP-ID");if((In=gn.s.get(Rn))&&(Rn=gn.u.get(Rn))){Rn=Dn(Rn);for(var jn=Rn.next();!jn.done;jn=Rn.next())jn=jn.value,jn.stream.codecs=In,jn.stream.mimeType=z1(Zu,In)||H1(Zu)}}return bn.filter(function(Vn){return Vn})}function tw(gn,bn){var Cn,In;return hs(function(Rn){return Rn.g==1?(Cn=bn.map(function(jn){var Vn,Hn;return hs(function(Xn){if(Xn.g==1)return gn.g.disableThumbnails?Xn.return(null):(Ts(Xn,2),Qn(Xn,QR(gn,jn),4));if(Xn.g!=2)return Vn=Xn.h,Xn.return(Vn.stream);if(Hn=_s(Xn),gn.g.hls.ignoreImageStreamFailures)return Xn.return(null);throw Hn})}),Qn(Rn,Promise.all(Cn),2)):(In=Rn.h,Rn.return(In.filter(function(jn){return jn})))})}function nT(gn,bn){bn=bn.filter(function(In){var Rn=qu(In,"URI")||"";return qu(In,"TYPE")!="SUBTITLES"&&Rn!=""}),bn=Dn(bn);for(var Cn=bn.next();!Cn.done;Cn=bn.next())iw(gn,Cn.value)}function rw(gn,bn,Cn){var In=[],Rn=new Set;if(0<Cn.length){Cn=Dn(Cn);for(var jn=Cn.next();!jn.done;jn=Cn.next()){jn=jn.value;var Vn=tp(jn,"METHOD");if(Vn!="NONE"&&Vn!="AES-128"&&(Vn=qu(jn,"KEYFORMAT")||"identity",jn=(Vn=X1[Vn])?Vn(jn,""):null)){if(jn.keyIds){Vn=Dn(jn.keyIds);for(var Hn=Vn.next();!Hn.done;Hn=Vn.next())Rn.add(Hn.value)}In.push(jn)}}}return bn=bn.map(function(Xn){var ns=qu(Xn,"FRAME-RATE"),us=Number(qu(Xn,"AVERAGE-BANDWIDTH"))||Number(tp(Xn,"BANDWIDTH")),ps=qu(Xn,"RESOLUTION");ps=Dn(ps?ps.split("x"):[null,null]);var fs=ps.next().value,vs=ps.next().value,Is=qu(Xn,"VIDEO-RANGE");Xn=XR(gn,Xn),ps=Xn.audio,Xn=Xn.video;for(var Ls=Dn(Xn),Cs=Ls.next();!Cs.done;Cs=Ls.next())(Cs=Cs.value.stream)&&(Cs.width=Number(fs)||void 0,Cs.height=Number(vs)||void 0,Cs.frameRate=Number(ns)||void 0,Cs.hdr=Is||void 0);for(ns=gn.g.disableAudio,(!ps.length||ns)&&(ps=[null]),ns=gn.g.disableVideo,(!Xn.length||ns)&&(Xn=[null]),ns=[],ps=Dn(ps),fs=ps.next();!fs.done;fs=ps.next())for(fs=fs.value,vs=Dn(Xn),Is=vs.next();!Is.done;Is=vs.next()){var Ms=Is.value;(Is=fs?fs.stream:null)&&(Is.drmInfos=In,Is.keyIds=Rn),(Ls=Ms?Ms.stream:null)&&(Ls.drmInfos=In,Ls.keyIds=Rn),Cs=fs?fs.stream.drmInfos:null;var Zs=Ms?Ms.stream.drmInfos:null;Ms=(Ms?Ms.Ac:"")+" - "+(fs?fs.Ac:""),Is&&Ls&&Cs.length&&Zs.length&&!(0<XT(Cs,Zs).length)||gn.ua.has(Ms)||(Is={id:gn.Fa++,language:Is?Is.language:"und",primary:!!Is&&Is.primary||!!Ls&&Ls.primary,audio:Is,video:Ls,bandwidth:us,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},ns.push(Is),gn.ua.add(Ms))}return ns}).reduce(bv,[]),bn=bn.filter(function(Xn){return Xn!=null})}function XR(gn,bn){var Cn=NP(gn,bn),In=qu(bn,"AUDIO"),Rn=qu(bn,"VIDEO"),jn=In||Rn;jn=jn&&gn.u.has(jn)?gn.u.get(jn):[],In={audio:In?jn:[],video:Rn?jn:[]},Rn=!1;var Vn=tp(bn,"URI"),Hn=In.audio.find(function(us){return us&&us.Ac==Vn}),Xn=Np("video",Cn),ns=Np("audio",Cn);return ns&&!Xn?jn="audio":!jn.length&&ns&&Xn?(jn="video",Cn=[[Xn,ns].join()]):In.audio.length&&Hn?(jn="audio",Rn=!0):jn=In.video.length&&!In.audio.length?"audio":"video",Rn||(gn=DP(gn,bn,Cn,jn),In[gn.stream.type]=[gn]),In}function NP(gn,bn){var Cn=[];gn.g.disableVideo||Cn.push(gn.g.hls.defaultVideoCodec),gn.g.disableAudio||Cn.push(gn.g.hls.defaultAudioCodec),Cn=qu(bn,"CODECS",Cn.join(",")).split(/\s*,\s*/),gn=new Set,bn=[],Cn=Dn(Cn);for(var In=Cn.next();!In.done;In=Cn.next()){In=In.value;var Rn=Bm(In)[0];gn.has(Rn)||(bn.push(In),gn.add(Rn))}return bn}function nw(gn){return gn=qu(gn,"LANGUAGE")||"und",ml(gn)}function iw(gn,bn){var Cn=tp(bn,"GROUP-ID"),In="",Rn=tp(bn,"TYPE").toLowerCase();Rn=="subtitles"&&(Rn=Zu);var jn=Rn;if(jn==Zu?In=qu(bn,"CODECS")||"":Cn&&gn.s.has(Cn)&&(In=gn.s.get(Cn)),Rn=k0(tp(bn,"URI"),gn.o),gn.h.has(Rn))return gn.h.get(Rn);var Vn=nw(bn),Hn=qu(bn,"NAME"),Xn=qu(bn,"DEFAULT")=="YES",ns=jn=="audio"&&(ns=qu(bn,"CHANNELS"))?parseInt(ns.split("/")[0],10):null,us=jn=="audio"&&(us=qu(bn,"CHANNELS"))?us.includes("/JOC"):!1,ps=qu(bn,"CHARACTERISTICS");return bn=qu(bn,"FORCED")=="YES",In=B1(gn,Rn,In,jn,Vn,Xn,Hn,ns,null,ps,bn,us),gn.u.has(Cn)?gn.u.get(Cn).push(In):gn.u.set(Cn,[In]),gn.h.has(Rn)?gn.h.get(Rn):(gn.h.set(Rn,In),In)}function QR(gn,bn){var Cn,In,Rn,jn,Vn,Hn,Xn,ns,us,ps;return hs(function(fs){return fs.g==1?(Cn=k0(tp(bn,"URI"),gn.o),In=qu(bn,"CODECS","jpeg")||"",gn.h.has(Cn)?fs.return(gn.h.get(Cn)):(Rn=nw(bn),jn=qu(bn,"NAME"),Vn=qu(bn,"CHARACTERISTICS"),Hn=B1(gn,Cn,In,"image",Rn,!1,jn,null,null,Vn,!1,!1),gn.h.has(Cn)?fs.return(gn.h.get(Cn)):(Xn=qu(bn,"RESOLUTION"))?Qn(fs,Hn.stream.createSegmentIndex(),3):fs.A(2))):(fs.g!=2&&(ns=Hn.stream.segmentIndex.get(0),us=ns.tilesLayout)&&(Hn.stream.width=Number(Xn.split("x")[0])*Number(us.split("x")[0]),Hn.stream.height=Number(Xn.split("x")[1])*Number(us.split("x")[1])),(ps=qu(bn,"BANDWIDTH"))&&(Hn.stream.bandwidth=Number(ps)),gn.h.set(Cn,Hn),fs.return(Hn))})}function DP(gn,bn,Cn,In){var Rn=k0(tp(bn,"URI"),gn.o);return gn.h.has(Rn)||(bn=qu(bn,"CLOSED-CAPTIONS"),bn=In=="video"&&bn&&bn!="NONE"?gn.L.get(bn):null,Cn=Wu(In,Cn),In=B1(gn,Rn,Cn,In,"und",!1,null,null,bn,null,!1,!1),gn.h.has(Rn))?gn.h.get(Rn):(gn.h.set(Rn,In),In)}function B1(gn,bn,Cn,In,Rn,jn,Vn,Hn,Xn,ns,us,ps){function fs(Zs){var Fs,Ws,Gs,eu,au,du,pu,bu,Uu,Bu,al,Mu,Ql,ul;return hs(function($l){if($l.g==1)return Qn($l,K1(gn,Ls.Jc),2);if($l.g!=3)return Fs=$l.h,Zs.aborted?$l.return():(Ws=Fs.uri,Gs=j1(gn.W,Fs.data,Ws),eu=Ey(gn),Qn($l,UP(gn,Gs,bn,Ws,Cn,In,Rn,jn,Vn,Hn,Xn,ns,us,ps),3));if(au=$l.h,Zs.aborted)return $l.return();if(du=au.stream,Ey(gn)&&!eu&&BP(gn),Ls.Jc=Ws,Ls.Ya=au.Ya,Ls.Mc=au.Mc,Ls.mc=au.mc,Ls.$c=au.$c,Ls.Ld=!0,Is.segmentIndex=du.segmentIndex,Is.encrypted=du.encrypted,Is.drmInfos=du.drmInfos,Is.keyIds=du.keyIds,Is.mimeType=du.mimeType,dy.includes(Is.mimeType)&&(Is.codecs=""),Is.drmInfos.length&&gn.i.newDrmInfo(Is),pu=tl,In==pu.va||In==pu.Hc)for(bu=Dn(gn.h.values()),Uu=bu.next();!Uu.done;Uu=bu.next())Bu=Uu.value,Bu.Ld||Bu.type!=In||(Bu.stream.mimeType=du.mimeType,dy.includes(Bu.stream.mimeType)&&(Bu.stream.codecs=""));In==pu.X&&(al=du.segmentIndex.get(0))&&al.h&&(Is.mimeType="application/mp4"),ZR(gn)&&(gn.Ga?ow(gn,[Ls]):(gn.Ga=!0,Mu=Array.from(gn.h.values()),Ql=Mu.filter(function(Bp){return Bp.stream.segmentIndex}),ow(gn,Ql),MP(gn),ul=gn.P,0<ul&&gn.m.O(ul))),ms($l)})}var vs=E0(gn.M,bn),Is=sw(gn,Cn,In,Rn,jn,Vn,Hn,Xn,ns,us,ps);dy.includes(Is.mimeType)&&(Is.codecs="");var Ls={stream:Is,type:In,Ac:bn,Jc:vs,Ya:0,$c:new Map,Mc:!1,mc:!1,Cd:-1,Ld:!1},Cs=null,Ms=new AbortController;return Is.createSegmentIndex=function(){return Cs||(Ms=new AbortController,Cs=new Promise(function(Zs){Zs(fs(Ms.signal))}))},Is.closeSegmentIndex=function(){Cs&&!Is.segmentIndex&&Ms.abort(),Is.segmentIndex&&(Is.segmentIndex.release(),Is.segmentIndex=null),Cs=null},Ls}function aw(gn){var bn=1/0;gn=Dn(gn.h.values());for(var Cn=gn.next();!Cn.done;Cn=gn.next())Cn=Cn.value,Cn.stream.segmentIndex&&Cn.stream.type!="text"&&(bn=Math.min(bn,Cn.Ya));return bn}function LP(gn,bn){var Cn=[];bn=Dn(bn);for(var In=bn.next();!In.done;In=bn.next())In=In.value,In.segmentIndex&&pI(In.segmentIndex,function(Rn){Cn.push(Rn)});gn.j.Ib(Cn)}function ow(gn,bn){if(!Ey(gn))for(var Cn=aw(gn),In=Dn(bn),Rn=In.next();!Rn.done;Rn=In.next())Rn.value.stream.segmentIndex.Wa(0,Cn);for(Cn=Dn(bn),Rn=Cn.next();!Rn.done;Rn=Cn.next())Rn=Rn.value.stream,dy.includes(Rn.mimeType)&&(Rn.codecs="");LP(gn,bn.map(function(jn){return jn.stream})),gn.g.hls.ignoreManifestProgramDateTime?YR(gn,bn):JC(gn,bn)}function ZR(gn){if(!gn.D)return!1;var bn=[],Cn=[];gn=Dn(gn.D.variants);for(var In=gn.next();!In.done;In=gn.next())In=In.value,In.video&&bn.push(In.video),In.audio&&Cn.push(In.audio);return!(0<bn.length&&!bn.some(function(Rn){return Rn.segmentIndex})||0<Cn.length&&!Cn.some(function(Rn){return Rn.segmentIndex}))}function UP(gn,bn,Cn,In,Rn,jn,Vn,Hn,Xn,ns,us,ps,fs,vs,Is){var Ls,Cs,Ms,Zs,Fs,Ws,Gs,eu,au,du,pu,bu,Uu,Bu,al;return hs(function(Mu){if(Mu.g==1){if(bn.type!=1)throw new Bs(2,4,4017);return Ls=qy(bn.g,"EXT-X-DEFINE"),Cs=ew(gn,Ls),FP(gn,bn),Is?Mu.A(2):Qn(Mu,JR(gn,jn,Rn,bn,Cs),3)}if(Mu.g!=2&&(Is=Mu.h),Ms=V1(bn,Is),Zs=Ms.drmInfos,Fs=Ms.keyIds,Ws=Ms.encrypted,Gs=Ms.jf,Ws&&!Zs.length&&!Gs)throw new Bs(2,4,4026);return eu=Ey(gn)?gn.F.get(jn):new Map,au=gn.l,du=GP(gn,bn,jn,eu,Cs),au!=gn.l&&FP(gn,bn),pu=du[du.length-1].endTime,bu=new yl(du),Bu=(Uu=um(bn.g,"EXT-X-SERVER-CONTROL"))?Uu.getAttribute("CAN-SKIP-UNTIL")!=null:!1,al=sw(gn,Rn,jn,Vn,Hn,Xn,ns,us,ps,fs,vs),al.segmentIndex=bu,al.encrypted=Ws,al.drmInfos=Zs,al.keyIds=Fs,al.mimeType=Is,Mu.return({stream:al,type:jn,Ac:Cn,Jc:In,Ya:pu,Mc:Bu,mc:!1,Cd:-1,$c:eu,Ld:!1})})}function sw(gn,bn,Cn,In,Rn,jn,Vn,Hn,Xn,ns,us){var ps=z1(Cn,bn)||H1(Cn);return{id:gn.Fa++,originalId:jn,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:ps,codecs:bn,kind:Cn==Zu?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:In,label:jn,type:Cn,primary:Rn,trickModeVideo:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:Xn?Xn.split(","):[],forced:ns,channelsCount:Vn,audioSamplingRate:null,spatialAudio:us,closedCaptions:Hn,hdr:void 0,tilesLayout:void 0}}function V1(gn,bn){var Cn=[];if(gn.segments){gn=Dn(gn.segments);for(var In=gn.next();!In.done;In=gn.next())In=qy(In.value.g,"EXT-X-KEY"),Cn.push.apply(Cn,Kn(In))}In=gn=!1;var Rn=[],jn=new Set;Cn=Dn(Cn);for(var Vn=Cn.next();!Vn.done;Vn=Cn.next()){Vn=Vn.value;var Hn=tp(Vn,"METHOD");if(Hn!="NONE"){if(gn=!0,Hn=="AES-128")In=!0;else if(Hn=qu(Vn,"KEYFORMAT")||"identity",Vn=(Hn=X1[Hn])?Hn(Vn,bn):null){if(Vn.keyIds){Hn=Dn(Vn.keyIds);for(var Xn=Hn.next();!Xn.done;Xn=Hn.next())jn.add(Xn.value)}Rn.push(Vn)}}}return{drmInfos:Rn,keyIds:jn,encrypted:gn,jf:In}}function jP(gn,bn,Cn){if(!pn.crypto||!pn.crypto.subtle)throw Tu("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new Bs(2,4,4042);var In=0,Rn=qu(bn,"IV","");if(Rn){var jn=ku(Rn.substr(2));if(jn.byteLength!=16)throw new Bs(2,4,4043)}else In=U1(Cn.g,"EXT-X-MEDIA-SEQUENCE");bn=E0(Cn.h,tp(bn,"URI"));var Vn=tm([bn],gn.g.retryParameters),Hn={method:"AES-128",iv:jn,firstMediaSequenceNumber:In,fetchKey:function(){var Xn,ns,us;return hs(function(ps){if(ps.g==1)return Qn(ps,cw(gn,Vn,6),2);if(ps.g!=3){if(Xn=ps.h,!Xn.data||Xn.data.byteLength!=16)throw new Bs(2,4,4044);return ns={name:"AES-CBC"},us=Hn,Qn(ps,pn.crypto.subtle.importKey("raw",Xn.data,ns,!0,["decrypt"]),3)}us.cryptoKey=ps.h,Hn.fetchKey=void 0,ms(ps)})}};return Hn}function FP(gn,bn){var Cn=um(bn.g,"EXT-X-PLAYLIST-TYPE"),In=um(bn.g,"EXT-X-ENDLIST");if(In=Cn&&Cn.value=="VOD"||In,Cn=Cn&&Cn.value=="EVENT"&&!In,Cn=!In&&!Cn,In)W1(gn,Q1);else{if(Cn?W1(gn,fw):W1(gn,Z1),In=um(bn.g,"EXT-X-TARGETDURATION"),!In)throw new Bs(2,4,4024,"EXT-X-TARGETDURATION");In=Number(In.value),Cn=um(bn.g,"EXT-X-PART-INF"),gn.l&&Cn?(gn.da=Number(tp(Cn,"PART-TARGET")),gn.J=Math.min(gn.da,gn.J),bn=um(bn.g,"EXT-X-SERVER-CONTROL"),gn.V=bn?Number(tp(bn,"PART-HOLD-BACK")):0):gn.J=Math.min(In,gn.J),gn.ca=Math.max(In,gn.ca)}}function BP(gn){var bn=gn.g.defaultPresentationDelay?gn.g.defaultPresentationDelay:gn.V?gn.V:gn.ca*gn.g.hls.liveSegmentsDelay;gn.j.We(0),gn.j.Ve(bn),gn.j.yc(!1)}function uw(gn,bn,Cn,In){if(Cn=um(Cn,"EXT-X-MAP"),!Cn)return null;var Rn=tp(Cn,"URI");return In=k0(E0(bn,Rn),In),bn=[In,qu(Cn,"BYTERANGE","")].join("-"),gn.ba.has(bn)||(Cn=lw(In,Cn),gn.ba.set(bn,Cn)),gn.ba.get(bn)}function lw(gn,bn){var Cn=0,In=null;return(bn=qu(bn,"BYTERANGE"))&&(Cn=bn.split("@"),In=Number(Cn[0]),Cn=Number(Cn[1]),In=Cn+In-1),new Hm(function(){return[gn]},Cn,In)}function VP(gn,bn,Cn,In,Rn,jn,Vn,Hn,Xn,ns){var us=In.g,ps=k0(In.i,jn),fs=um(us,"EXTINF"),vs=jn=0,Is=null;In.h.length&&!gn.l&&Tu("Low-latency HLS live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.");var Ls=null;if(!gn.g.hls.ignoreManifestProgramDateTime){var Cs=um(us,"EXT-X-PROGRAM-DATE-TIME");Cs&&Cs.value&&(Ls=Xl(Cs.value))}if(Cs=nE,um(us,"EXT-X-GAP")&&(Cs=2),!fs){if(In.h.length==0)throw new Bs(2,4,4024,"EXTINF");if(!gn.l)return null}var Ms=[];if(gn.l)for(var Zs={},Fs=0;Fs<In.h.length;Zs={pd:Zs.pd},Fs++){var Ws=In.h[Fs],Gs=Fs==0?Cn:Ms[Ms.length-1],eu=Fs==0?Rn:Gs.endTime,au=Number(qu(Ws,"DURATION"))||gn.da;if(au){au=eu+au;var du=0,pu=null;Ws.name=="EXT-X-PRELOAD-HINT"?du=(du=qu(Ws,"BYTERANGE-START"))?Number(du):0:(du=qu(Ws,"BYTERANGE"),pu=Dn(G1(Gs,du)),du=pu.next().value,pu=pu.next().value),(Gs=qu(Ws,"URI"))&&(Zs.pd=E0(Vn,Gs),Gs=nE,qu(Ws,"GAP")=="YES"&&(Gs=2),Ms.push(new cl(eu,au,function(bu){return function(){return[bu.pd]}}(Zs),du,pu,bn,0,0,1/0,[],"",null,null,Gs)))}}return fs?jn=Rn+Number(fs.value.split(",")[0]):jn=Ms[Ms.length-1].endTime,(gn=um(us,"EXT-X-BYTERANGE"))?(Is=Dn(G1(Cn,gn.value)),vs=Is.next().value,Is=Is.next().value):Ms.length&&(vs=Ms[0].Ba,Is=Ms[Ms.length-1].la),Cn="",gn=null,Hn=="image"&&(Cn="1x1",Hn=um(us,"EXT-X-TILES"))&&(Cn=tp(Hn,"LAYOUT"),(Hn=qu(Hn,"DURATION"))&&(gn=Number(Hn))),new cl(Rn,jn,function(){return ps.length?[ps]:[]},vs,Is,bn,Xn,0,1/0,Ms,Cn,gn,Ls,Cs,ns)}function G1(gn,bn){var Cn=0,In=null;return bn&&(Cn=bn.split("@"),bn=Number(Cn[0]),Cn=Cn[1]?Number(Cn[1]):gn.la+1,In=Cn+bn-1),[Cn,In]}function GP(gn,bn,Cn,In,Rn){var jn=bn.segments,Vn=void 0,Hn=U1(bn.g,"EXT-X-DISCONTINUITY-SEQUENCE"),Xn=U1(bn.g,"EXT-X-MEDIA-SEQUENCE"),ns=um(bn.g,"EXT-X-SKIP");ns=ns?Number(qu(ns,"SKIPPED-SEGMENTS")):0;var us=Xn+ns,ps=0;Ey(gn)&&In.has(us)&&(ps=In.get(us));for(var fs=[],vs=null,Is=ps,Ls=0;Ls<jn.length;Ls++){var Cs=jn[Ls],Ms=Ls==0?ps:vs.endTime;us=Xn+ns+Ls,um(Cs.g,"EXT-X-DISCONTINUITY")&&(Hn++,Is=Ms);for(var Zs=Dn(Cs.g),Fs=Zs.next();!Fs.done;Fs=Zs.next())Fs=Fs.value,Fs.name=="EXT-X-KEY"&&(tp(Fs,"METHOD")=="AES-128"?Vn=jP(gn,Fs,bn):Vn=void 0);In.set(us,Ms),Zs=uw(gn,bn.h,Cs.g,Rn),!gn.l&&gn.i.isAutoLowLatencyMode()&&(gn.i.enableLowLatencyMode(),gn.l=gn.i.isLowLatencyMode()),(vs=Cs=VP(gn,Zs,vs,Cs,Ms,Rn,bn.h,Cn,Is,Vn))&&(Cs.j=Hn,gn.g.hls.ignoreManifestProgramDateTime&&gn.B!=null&&us<gn.B||fs.push(Cs))}if(bn=fs.some(function(Ws){return Ws.g!=null})){for(Cn={},In=0;In<fs.length;Cn={Qb:Cn.Qb,Pb:Cn.Pb,Bc:Cn.Bc,Sa:Cn.Sa,Ob:Cn.Ob},In++)if(Cn.Sa=fs[In],Cn.Sa.g==null)for(Cn.Pb=0,Cn.Qb=In,Rn=function(Ws){return function(){var Gs=fs[Ws.Qb];if(Gs){if(Gs.g!=null)return Gs.g+Ws.Pb;Ws.Pb-=Gs.endTime-Gs.startTime,Ws.Qb+=1}return null}}(Cn),Cn.Ob=0,Cn.Bc=In,jn=function(Ws){return function(){var Gs=fs[Ws.Bc];if(Gs){if(Gs!=Ws.Sa&&(Ws.Ob+=Gs.endTime-Gs.startTime),Gs.g!=null)return Gs.g+Ws.Ob;--Ws.Bc}return null}}(Cn);Cn.Sa.g==null;)Cn.Sa.g=jn(),Cn.Sa.g==null&&(Cn.Sa.g=Rn())}if(bn)for(Cn=Dn(fs),In=Cn.next();!In.done;In=Cn.next())for(Rn=In.value,In=Rn.g,Rn=Dn(Rn.i),jn=Rn.next();!jn.done;jn=Rn.next())jn=jn.value,jn.g=In,In+=jn.endTime-jn.startTime;if(gn=gn.H,bn&&gn!=1/0)for(bn=Dn(fs),In=bn.next();!In.done;In=bn.next())In.value.oe(gn);return fs}function k0(gn,bn){gn=String(gn).replace(/%7B/g,"{").replace(/%7D/g,"}");var Cn=gn.match(/{\$\w*}/g);if(Cn){Cn=Dn(Cn);for(var In=Cn.next();!In.done;In=Cn.next()){In=In.value;var Rn=In.slice(2,In.length-1),jn=bn.get(Rn);if(jn)gn=gn.replace(In,jn);else throw new Bs(2,4,4039,Rn)}}return gn}function z1(gn,bn){if(gn==Zu){if(bn=="vtt"||bn=="wvtt")return"text/vtt";if(bn&&bn!=="")return"application/mp4"}return gn!="image"||bn&&bn!="jpeg"?gn=="audio"&&bn=="mp4a.40.34"?"audio/mpeg":null:"image/jpeg"}function H1(gn){return gn==Zu?"text/vtt":Y1[gn].mp4}function JR(gn,bn,Cn,In,Rn){var jn,Vn,Hn,Xn,ns,us,ps,fs,vs,Is;return hs(function(Ls){return Ls.g==1?(jn=Fy,Vn=Math.trunc((In.segments.length-1)/2),Hn=k0(In.segments[Vn].i,Rn),Xn=new Rp(Hn),ns=Xn.qa.split(".").pop(),us=Y1[bn],(ps=us[ns])||(ps=dw[ns])||(ps=z1(bn,Cn))?Ls.return(ps):(fs=tm([Hn],gn.g.retryParameters),fs.method="HEAD",Qn(Ls,cw(gn,fs,jn),2))):(vs=Ls.h,(Is=vs.headers["content-type"])?Ls.return(Is.split(";")[0]):Ls.return(H1(bn)))})}function K1(gn,bn){return bn=tm([bn],gn.g.retryParameters),gn.i.modifyManifestRequest(bn,{format:"h"}),cw(gn,bn,0)}function zP(gn){var bn,Cn;hs(function(In){if(In.g==1)return gn.i?(Ts(In,2),Qn(In,gn.update(),4)):In.return();if(In.g!=2)return Ey(gn)&&(bn=gn.P,gn.m.O(bn)),ys(In,0);if(Cn=_s(In),!gn.i)return In.return();Cn.severity=1,gn.i.onError(Cn),gn.m.O(.1),ms(In)})}function Ey(gn){return gn.ea!=Q1}function W1(gn,bn){gn.ea=bn,gn.j&&gn.j.yc(!Ey(gn)),Ey(gn)||gn.m.stop()}function cw(gn,bn,Cn){if(!gn.G)throw new Bs(2,7,7001);return bn=gn.i.networkingEngine.request(Cn,bn),Al(gn.G,bn),bn.promise}Ys("shaka.hls.HlsParser",gv);var dw={aac:"audio/aac",ac3:"audio/ac3",ec3:"audio/ec3",mp3:"audio/mpeg"},q1={mp4:"audio/mp4",mp4a:"audio/mp4",m4s:"audio/mp4",m4i:"audio/mp4",m4a:"audio/mp4",m4f:"audio/mp4",cmfa:"audio/mp4",ts:"video/mp2t",tsa:"video/mp2t"},b_={mp4:"video/mp4",mp4v:"video/mp4",m4s:"video/mp4",m4i:"video/mp4",m4v:"video/mp4",m4f:"video/mp4",cmfv:"video/mp4",ts:"video/mp2t",tsv:"video/mp2t"},Y1={audio:q1,video:b_,text:{mp4:"application/mp4",m4s:"application/mp4",m4i:"application/mp4",m4f:"application/mp4",cmft:"application/mp4",vtt:"text/vtt",webvtt:"text/vtt",ttml:"application/ttml+xml"},image:{jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml",webp:"image/webp",avif:"image/avif"}},X1={"com.apple.streamingkeydelivery":function(gn,bn){if(bn=="video/mp2t")throw new Bs(2,4,4040);if(pn.shakaMediaKeysPolyfill)throw new Bs(2,4,4041);return tv("com.apple.fps",[{initDataType:"sinf",initData:new Uint8Array(0),keyId:null}])},"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":function(gn){var bn=tp(gn,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(bn)?(bn=tp(gn,"URI"),bn=Yv(bn),bn=Pu(bn.data),bn=tv("com.widevine.alpha",[{initDataType:"cenc",initData:bn}]),(gn=qu(gn,"KEYID"))&&(bn.keyIds=new Set([gn.toLowerCase().substr(2)])),bn):null},"com.microsoft.playready":function(gn){var bn=tp(gn,"METHOD");return["SAMPLE-AES","SAMPLE-AES-CTR"].includes(bn)?(gn=tp(gn,"URI"),gn=Yv(gn),gn=Pu(gn.data),bn=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]),gn=HT(gn,bn,new Set,0),tv("com.microsoft.playready",[{initDataType:"cenc",initData:gn}])):null},identity:function(gn){return gn=tp(gn,"METHOD"),["SAMPLE-AES","SAMPLE-AES-CTR"].includes(gn)?tv("org.w3.clearkey",null):null}},Q1="VOD",Z1="EVENT",fw="LIVE",Sy={ef:Q1,Ng:Z1,Rg:fw};gl("Tizen 3")||gl("Tizen 2")||Oy()||(q_.m3u8=function(){return new gv},cy["application/x-mpegurl"]=function(){return new gv},cy["application/vnd.apple.mpegurl"]=function(){return new gv});function iT(gn,bn,Cn,In,Rn,jn){if(200<=Cn&&299>=Cn&&Cn!=202)return{uri:Rn||In,originalUri:In,data:bn,status:Cn,headers:gn,fromCache:!!gn["x-shaka-from-cache"]};Rn=null;try{Rn=My(bn)}catch{}throw new Bs(Cn==401||Cn==403?2:1,1,1001,In,Cn,Rn,gn,jn)}function aT(){}function oT(gn,bn,Cn,In,Rn){var jn=new mw;u_(bn.headers).forEach(function(ns,us){jn.append(us,ns)});var Vn=new e$,Hn={ye:!1,af:!1};if(gn=pw(gn,Cn,{body:bn.body||void 0,headers:jn,method:bn.method,signal:Vn.signal,credentials:bn.allowCrossSiteCredentials?"include":void 0},Hn,In,Rn,bn.streamDataCallback),gn=new Vl(gn,function(){return Hn.ye=!0,Vn.abort(),Promise.resolve()}),bn=bn.retryParameters.timeout){var Xn=new Hu(function(){Hn.af=!0,Vn.abort()});Xn.O(bn/1e3),gn.finally(function(){Xn.stop()})}return gn}function pw(gn,bn,Cn,In,Rn,jn,Vn){var Hn,Xn,ns,us,ps,fs,vs,Is,Ls,Cs,Ms,Zs,Fs;return hs(function(Ws){switch(Ws.g){case 1:return Hn=HP,Xn=KP,fs=ps=0,vs=Date.now(),Ts(Ws,2),Qn(Ws,Hn(gn,Cn),4);case 4:if(ns=Ws.h,jn(J1(ns.headers)),Cn.method=="HEAD"){Ws.A(5);break}return Is=ns.clone().body.getReader(),Cs=(Ls=ns.headers.get("Content-Length"))?parseInt(Ls,10):0,Ms=function(Gs){function eu(){var au,du;return hs(function(pu){switch(pu.g){case 1:return Ts(pu,2),Qn(pu,Is.read(),4);case 4:au=pu.h,ys(pu,3);break;case 2:return _s(pu),pu.return();case 3:if(au.done){pu.A(5);break}if(ps+=au.value.byteLength,!Vn){pu.A(5);break}return Qn(pu,Vn(au.value),5);case 5:du=Date.now(),(100<du-vs||au.done)&&(Rn(du-vs,ps-fs,Cs-ps),fs=ps,vs=du),au.done?Gs.close():(Gs.enqueue(au.value),eu()),ms(pu)}})}eu()},new Xn({start:Ms}),Qn(Ws,ns.arrayBuffer(),6);case 6:us=Ws.h;case 5:ys(Ws,3);break;case 2:throw Zs=_s(Ws),In.ye?new Bs(1,1,7001,gn,bn):In.af?new Bs(1,1,1003,gn,bn):new Bs(1,1,1002,gn,Zs,bn);case 3:return Fs=J1(ns.headers),Ws.return(iT(Fs,us,ns.status,gn,ns.url,bn))}})}function J1(gn){var bn={};return gn.forEach(function(Cn,In){bn[In.trim()]=Cn}),bn}function hw(){if(pn.ReadableStream)try{new ReadableStream({})}catch{return!1}else return!1;if(pn.Response){if(!new Response("").body)return!1}else return!1;return!(!pn.fetch||!pn.AbortController)}Ys("shaka.net.HttpFetchPlugin",aT),aT.isSupported=hw,aT.parse=oT;var HP=pn.fetch,e$=pn.AbortController,KP=pn.ReadableStream,mw=pn.Headers;hw()&&(jy("http",oT,2,!0),jy("https",oT,2,!0),jy("blob",oT,2,!0));function WP(){}function sT(gn,bn,Cn,In,Rn){var jn=new r$,Vn=Date.now(),Hn=0,Xn=new Promise(function(ns,us){jn.open(bn.method,gn,!0),jn.responseType="arraybuffer",jn.timeout=bn.retryParameters.timeout,jn.withCredentials=bn.allowCrossSiteCredentials,jn.onabort=function(){us(new Bs(1,1,7001,gn,Cn))};var ps=!1;jn.onreadystatechange=function(){if(jn.readyState==2&&!ps){var vs=t$(jn);Rn(vs),ps=!0}},jn.onload=function(){var vs=t$(jn),Is=jn.response;try{var Ls=iT(vs,Is,jn.status,gn,jn.responseURL,Cn);ns(Ls)}catch(Cs){us(Cs)}},jn.onerror=function(vs){us(new Bs(1,1,1002,gn,vs,Cn))},jn.ontimeout=function(){us(new Bs(1,1,1003,gn,Cn))},jn.onprogress=function(vs){var Is=Date.now();(100<Is-Vn||vs.lengthComputable&&vs.loaded==vs.total)&&(In(Is-Vn,vs.loaded-Hn,vs.total-vs.loaded),Hn=vs.loaded,Vn=Is)};for(var fs in bn.headers)jn.setRequestHeader(fs.toLowerCase(),bn.headers[fs]);jn.send(bn.body)});return new Vl(Xn,function(){return jn.abort(),Promise.resolve()})}function t$(gn){var bn=gn.getAllResponseHeaders().trim().split(`\r
`);gn={},bn=Dn(bn);for(var Cn=bn.next();!Cn.done;Cn=bn.next())Cn=Cn.value.split(": "),gn[Cn[0].toLowerCase()]=Cn.slice(1).join(": ");return gn}Ys("shaka.net.HttpXHRPlugin",WP),WP.parse=sT;var r$=pn.XMLHttpRequest;jy("http",sT,1,!0),jy("https",sT,1,!0),jy("blob",sT,1,!0);function qP(gn,bn,Cn,In){this.g=gn,this.i=bn,this.groupId=Cn,this.h=In}function n$(gn){return gn.ya().map(function(bn){return"{"+encodeURI(bn)+"}"}).join("")+":"+gn.Ba+":"+gn.la}function YP(gn,bn){return rC(gn.g.ya(),gn.g.Ba,gn.g.la,bn.streaming.retryParameters)}function XP(){this.h=this.j=this.i=0,this.g=new Map,this.l=0}function QP(gn,bn){gn.i+=bn;var Cn=gn.l;return gn.l++,gn.g.set(Cn,bn),Cn}XP.prototype.close=function(gn,bn){if(this.g.has(gn)){var Cn=this.g.get(gn);this.g.delete(gn),this.j+=Cn,this.h+=bn}};function ZP(gn){var bn=this;this.o=gn,this.j=new Map,this.i=new gm(function(){return i$(bn).catch(function(){})}),this.h=[],this.m=function(){},this.l=function(){},this.g=new XP}ZP.prototype.destroy=function(){return this.i.destroy()};function eN(gn,bn,Cn){gn.m=bn,gn.l=Cn}function i$(gn){var bn=gn.h.map(function(Cn){return Cn()});return gn.h=[],Promise.all(bn)}function a$(gn,bn,Cn,In,Rn,jn){ll(gn.i);var Vn=(gn.j.get(bn)||Promise.resolve()).then(function(){var Hn,Xn,ns,us,ps,fs,vs;return hs(function(Is){if(Is.g==1)return Qn(Is,tN(gn,Cn),2);if(Hn=Is.h,gn.i.g)throw new Bs(2,9,7001);if(Rn)for(us in Xn=Pu(Hn),ns=new G0(Xn),ns.data)ps=Number(us),fs=ns.data[ps],vs=ns.g[ps],gn.l(fs,vs);gn.g.close(In,Hn.byteLength);var Ls=gn.g;return gn.m(Ls.i==0?0:Ls.j/Ls.i,gn.g.h),Is.return(jn(Hn))})});gn.j.set(bn,Vn)}function JP(gn){return hs(function(bn){return bn.g==1?Qn(bn,Promise.all(gn.j.values()),2):bn.return(gn.g.h)})}function tN(gn,bn){var Cn,In,Rn,jn;return hs(function(Vn){return Vn.g==1?(Cn=Fy,In=gn.o.request(Cn,bn),Rn=function(){return In.abort()},gn.h.push(Rn),Qn(Vn,In.promise,2)):(jn=Vn.h,pl(gn.h,Rn),Vn.return(jn.data))})}function uT(gn,bn){var Cn=this;this.i=gn,this.h=gn.objectStore(bn),this.g=new bl,gn.onabort=function(In){In.preventDefault(),Cn.g.reject()},gn.onerror=function(In){In.preventDefault(),Cn.g.reject()},gn.oncomplete=function(){Cn.g.resolve()}}uT.prototype.abort=function(){var gn=this;return hs(function(bn){if(bn.g==1){try{gn.i.abort()}catch{}return Ts(bn,2),Qn(bn,gn.g,4)}if(bn.g!=2)return ys(bn,0);_s(bn),ms(bn)})};function lT(gn,bn){return new Promise(function(Cn,In){var Rn=gn.h.openCursor();Rn.onerror=In,Rn.onsuccess=function(){var jn;return hs(function(Vn){if(Vn.g==1)return Rn.result==null?(Cn(),Vn.return()):(jn=Rn.result,Qn(Vn,bn(jn.key,jn.value,jn),2));jn.continue(),ms(Vn)})}})}uT.prototype.store=function(){return this.h},uT.prototype.promise=function(){return this.g};function gw(gn){this.h=gn,this.g=[]}gw.prototype.destroy=function(){return Promise.all(this.g.map(function(gn){return gn.abort()}))};function x_(gn,bn){return cT(gn,bn,"readwrite")}function cT(gn,bn,Cn){Cn=gn.h.transaction([bn],Cn);var In=new uT(Cn,bn);return gn.g.push(In),In.promise().then(function(){pl(gn.g,In)},function(){pl(gn.g,In)}),In}function C_(gn,bn,Cn){this.h=new gw(gn),this.i=bn,this.g=Cn}Sn=C_.prototype,Sn.destroy=function(){return this.h.destroy()},Sn.hasFixedKeySpace=function(){return!0},Sn.addSegments=function(){return o$(this.i)},Sn.removeSegments=function(gn,bn){return eO(this,this.i,gn,bn)},Sn.getSegments=function(gn){var bn=this,Cn;return hs(function(In){return In.g==1?Qn(In,tO(bn,bn.i,gn),2):(Cn=In.h,In.return(Cn.map(function(Rn){return bn.ze(Rn)})))})},Sn.addManifests=function(){return o$(this.g)},Sn.updateManifest=function(){return Promise.reject(new Bs(2,9,9016,"Cannot modify values in "+this.g))};function rN(gn,bn,Cn){gn=x_(gn.h,gn.g);var In=gn.store();return In.get(bn).onsuccess=function(){In.put(Cn,bn)},gn.promise()}Sn.updateManifestExpiration=function(gn,bn){var Cn=x_(this.h,this.g),In=Cn.store();return In.get(gn).onsuccess=function(Rn){(Rn=Rn.target.result)&&(Rn.expiration=bn,In.put(Rn,gn))},Cn.promise()},Sn.removeManifests=function(gn,bn){return eO(this,this.g,gn,bn)},Sn.getManifests=function(gn){var bn=this,Cn;return hs(function(In){return In.g==1?Qn(In,tO(bn,bn.g,gn),2):(Cn=In.h,In.return(Promise.all(Cn.map(function(Rn){return bn.bc(Rn)}))))})},Sn.getAllManifests=function(){var gn=this,bn,Cn;return hs(function(In){return In.g==1?(bn=cT(gn.h,gn.g,"readonly"),Cn=new Map,Qn(In,lT(bn,function(Rn,jn){var Vn;return hs(function(Hn){if(Hn.g==1)return Qn(Hn,gn.bc(jn),2);Vn=Hn.h,Cn.set(Rn,Vn),ms(Hn)})}),2)):In.g!=3?Qn(In,bn.promise(),3):In.return(Cn)})},Sn.ze=function(gn){return gn},Sn.bc=function(gn){return Promise.resolve(gn)};function o$(gn){return Promise.reject(new Bs(2,9,9011,"Cannot add new value to "+gn))}Sn.add=function(gn,bn){var Cn=this,In,Rn,jn,Vn,Hn,Xn,ns;return hs(function(us){if(us.g==1){for(In=x_(Cn.h,gn),Rn=In.store(),jn=[],Vn={},Hn=Dn(bn),Xn=Hn.next();!Xn.done;Vn={Fc:Vn.Fc},Xn=Hn.next())ns=Xn.value,Vn.Fc=Rn.add(ns),Vn.Fc.onsuccess=function(ps){return function(){jn.push(ps.Fc.result)}}(Vn);return Qn(us,In.promise(),2)}return us.return(jn)})};function eO(gn,bn,Cn,In){gn=x_(gn.h,bn),bn=gn.store();var Rn={};Cn=Dn(Cn);for(var jn=Cn.next();!jn.done;Rn={Ec:Rn.Ec},jn=Cn.next())Rn.Ec=jn.value,bn.delete(Rn.Ec).onsuccess=function(Vn){return function(){return In(Vn.Ec)}}(Rn);return gn.promise()}function tO(gn,bn,Cn){var In,Rn,jn,Vn,Hn,Xn,ns;return hs(function(us){if(us.g==1){for(In=cT(gn.h,bn,"readonly"),Rn=In.store(),jn={},Vn=[],Hn={},Xn=Dn(Cn),ns=Xn.next();!ns.done;Hn={Vb:Hn.Vb,Tb:Hn.Tb},ns=Xn.next())Hn.Tb=ns.value,Hn.Vb=Rn.get(Hn.Tb),Hn.Vb.onsuccess=function(ps){return function(){ps.Vb.result==null&&Vn.push(ps.Tb),jn[ps.Tb]=ps.Vb.result}}(Hn);return Qn(us,In.promise(),2)}if(Vn.length)throw new Bs(2,9,9012,"Could not find values for "+Vn);return us.return(Cn.map(function(ps){return jn[ps]}))})}function dT(gn){this.g=new gw(gn)}dT.prototype.destroy=function(){return this.g.destroy()},dT.prototype.getAll=function(){var gn=this,bn,Cn;return hs(function(In){return In.g==1?(bn=cT(gn.g,"session-ids","readonly"),Cn=[],Qn(In,lT(bn,function(Rn,jn){Cn.push(jn)}),2)):In.g!=3?Qn(In,bn.promise(),3):In.return(Cn)})},dT.prototype.add=function(gn){var bn=x_(this.g,"session-ids"),Cn=bn.store();gn=Dn(gn);for(var In=gn.next();!In.done;In=gn.next())Cn.add(In.value);return bn.promise()},dT.prototype.remove=function(gn){var bn=this,Cn;return hs(function(In){return In.g==1?(Cn=x_(bn.g,"session-ids"),Qn(In,lT(Cn,function(Rn,jn,Vn){gn.includes(jn.sessionId)&&Vn.delete()}),2)):Qn(In,Cn.promise(),0)})};function Fp(){this.g=new Map}Fp.prototype.destroy=function(){for(var gn=[],bn=Dn(this.g.values()),Cn=bn.next();!Cn.done;Cn=bn.next())gn.push(Cn.value.destroy());return this.g.clear(),Promise.all(gn)},Fp.prototype.init=function(){var gn=this;ME.forEach(function(Rn,jn){(Rn=Rn())&&gn.g.set(jn,Rn)});for(var bn=[],Cn=Dn(this.g.values()),In=Cn.next();!In.done;In=Cn.next())bn.push(In.value.init());return Promise.all(bn)};function s$(gn){var bn=null;if(gn.g.forEach(function(Cn,In){Cn.getCells().forEach(function(Rn,jn){Rn.hasFixedKeySpace()||bn||(bn={path:{za:In,ka:jn},ka:Rn})})}),bn)return bn;throw new Bs(2,9,9013,"Could not find a cell that supports add-operations")}function yw(gn,bn){gn.g.forEach(function(Cn,In){Cn.getCells().forEach(function(Rn,jn){bn({za:In,ka:jn},Rn)})})}function vv(gn,bn,Cn){if(gn=gn.g.get(bn),!gn)throw new Bs(2,9,9013,"Could not find mechanism with name "+bn);if(bn=gn.getCells().get(Cn),!bn)throw new Bs(2,9,9013,"Could not find cell with name "+Cn);return bn}function u$(gn,bn){gn.g.forEach(function(Cn){bn(Cn.getEmeSessionCell())})}function $0(gn){var bn=Array.from(gn.g.keys());if(!bn.length)throw new Bs(2,9,9e3,"No supported storage mechanisms found");return gn.g.get(bn[0]).getEmeSessionCell()}function nN(gn){var bn,Cn,In;return hs(function(Rn){return Rn.g==1?(bn=Array.from(gn.g.values()),Cn=0<bn.length,Cn||(In=ME,In.forEach(function(jn){(jn=jn())&&bn.push(jn)})),Qn(Rn,Promise.all(bn.map(function(jn){return jn.erase()})),2)):Cn?Rn.A(0):Qn(Rn,Promise.all(bn.map(function(jn){return jn.destroy()})),0)})}function vw(gn,bn){ME.set(gn,bn)}Ys("shaka.offline.StorageMuxer",Fp),Fp.unregister=function(gn){ME.delete(gn)},Fp.register=vw,Fp.prototype.destroy=Fp.prototype.destroy;var ME=new Map;function RE(){C_.apply(this,arguments)}as(RE,C_),RE.prototype.updateManifestExpiration=function(gn,bn){var Cn=this,In,Rn,jn;return hs(function(Vn){return In=x_(Cn.h,Cn.g),Rn=In.store(),jn=new bl,Rn.get(gn).onsuccess=function(Hn){(Hn=Hn.target.result)?(Hn.expiration=bn,Rn.put(Hn),jn.resolve()):jn.reject(new Bs(2,9,9012,"Could not find values for "+gn))},Qn(Vn,Promise.all([In.promise(),jn]),0)})},RE.prototype.bc=function(gn){var bn,Cn,In,Rn,jn,Vn;return hs(function(Hn){if(Hn.g==1){for(bn=[],Cn=0;Cn<gn.periods.length;++Cn)In=Cn==gn.periods.length-1?gn.duration:gn.periods[Cn+1].startTime,Rn=In-gn.periods[Cn].startTime,jn=fT(gn.periods[Cn],Rn),bn.push(jn);return Qn(Hn,mP(bn),2)}return Vn=Hn.h,Hn.return({creationTime:0,originalManifestUri:gn.originalManifestUri,duration:gn.duration,size:gn.size,expiration:gn.expiration==null?1/0:gn.expiration,streams:Vn,sessionIds:gn.sessionIds,drmInfo:gn.drmInfo,appMetadata:gn.appMetadata,sequenceMode:!1})})};function fT(gn,bn){iN(gn);for(var Cn=Dn(gn.streams),In=Cn.next();!In.done;In=Cn.next());return gn.streams.map(function(Rn){return cm(Rn,gn.startTime,bn)})}function cm(gn,bn,Cn){var In=gn.initSegmentUri?_w(gn.initSegmentUri):null,Rn=bn+gn.presentationTimeOffset,jn=bn+Cn;return{id:gn.id,originalId:null,primary:gn.primary,type:gn.contentType,mimeType:gn.mimeType,codecs:gn.codecs,frameRate:gn.frameRate,pixelAspectRatio:void 0,hdr:void 0,kind:gn.kind,language:gn.language,label:gn.label,width:gn.width,height:gn.height,initSegmentKey:In,encrypted:gn.encrypted,keyIds:new Set([gn.keyId]),segments:gn.segments.map(function(Vn){var Hn=_w(Vn.uri);return{startTime:bn+Vn.startTime,endTime:bn+Vn.endTime,dataKey:Hn,initSegmentKey:In,appendWindowStart:bn,appendWindowEnd:jn,timestampOffset:Rn,tilesLayout:""}}),variantIds:gn.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0}}RE.prototype.ze=function(gn){return{data:gn.data}};function _w(gn){var bn;if((bn=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(gn))||(bn=/^offline:segment\/([0-9]+)$/.exec(gn)))return Number(bn[1]);throw new Bs(2,9,9004,"Could not parse uri "+gn)}function iN(gn){var bn=gn.streams.filter(function(Hn){return Hn.contentType=="audio"});if(gn=gn.streams.filter(function(Hn){return Hn.contentType=="video"}),!bn.every(function(Hn){return Hn.variantIds})||!gn.every(function(Hn){return Hn.variantIds})){for(var Cn=Dn(bn),In=Cn.next();!In.done;In=Cn.next())In.value.variantIds=[];for(Cn=Dn(gn),In=Cn.next();!In.done;In=Cn.next())In.value.variantIds=[];if(Cn=0,gn.length&&!bn.length){var Rn=Cn++,jn=Dn(gn);for(In=jn.next();!In.done;In=jn.next())In.value.variantIds.push(Rn)}if(!gn.length&&bn.length)for(Rn=Cn++,jn=Dn(bn),In=jn.next();!In.done;In=jn.next())In.value.variantIds.push(Rn);if(gn.length&&bn.length)for(bn=Dn(bn),In=bn.next();!In.done;In=bn.next())for(In=In.value,Rn=Dn(gn),jn=Rn.next();!jn.done;jn=Rn.next()){jn=jn.value;var Vn=Cn++;In.variantIds.push(Vn),jn.variantIds.push(Vn)}}}function b0(){C_.apply(this,arguments)}as(b0,C_),b0.prototype.bc=function(gn){var bn,Cn,In,Rn,jn,Vn;return hs(function(Hn){if(Hn.g==1){for(bn=[],Cn=0;Cn<gn.periods.length;++Cn){In=Cn==gn.periods.length-1?gn.duration:gn.periods[Cn+1].startTime,Rn=In-gn.periods[Cn].startTime;for(var Xn=gn.periods[Cn],ns=[],us=Dn(Xn.streams),ps=us.next();!ps.done;ps=us.next())ps=ps.value,ps.variantIds.length!=0&&ns.push(aN(ps,Xn.startTime,Xn.startTime+Rn));jn=ns,bn.push(jn)}return Qn(Hn,mP(bn),2)}return Vn=Hn.h,Hn.return({appMetadata:gn.appMetadata,creationTime:0,drmInfo:gn.drmInfo,duration:gn.duration,expiration:gn.expiration==null?1/0:gn.expiration,originalManifestUri:gn.originalManifestUri,sessionIds:gn.sessionIds,size:gn.size,streams:Vn,sequenceMode:!1})})};function aN(gn,bn,Cn){return{id:gn.id,originalId:gn.originalId,primary:gn.primary,type:gn.contentType,mimeType:gn.mimeType,codecs:gn.codecs,frameRate:gn.frameRate,pixelAspectRatio:gn.pixelAspectRatio,hdr:void 0,kind:gn.kind,language:gn.language,label:gn.label,width:gn.width,height:gn.height,encrypted:gn.encrypted,keyIds:new Set([gn.keyId]),segments:gn.segments.map(function(In){return{startTime:bn+In.startTime,endTime:bn+In.endTime,initSegmentKey:gn.initSegmentKey,appendWindowStart:bn,appendWindowEnd:Cn,timestampOffset:bn-gn.presentationTimeOffset,dataKey:In.dataKey,tilesLayout:""}}),variantIds:gn.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0}}function Ew(){C_.apply(this,arguments)}as(Ew,C_),Sn=Ew.prototype,Sn.hasFixedKeySpace=function(){return!1},Sn.addSegments=function(gn){return this.add(this.i,gn)},Sn.addManifests=function(gn){return this.add(this.g,gn)},Sn.updateManifest=function(gn,bn){return rN(this,gn,bn)},Sn.bc=function(gn){return gn.expiration==null&&(gn.expiration=1/0),Promise.resolve(gn)};function rO(){this.m=this.j=this.i=this.h=this.g=this.l=null}Sn=rO.prototype,Sn.init=function(){var gn=this,bn=new bl,Cn=!1,In=new Hu(function(){Cn=!0,bn.reject(new Bs(2,9,9017))});In.O(5);var Rn=pn.indexedDB.open("shaka_offline_db",5);return Rn.onsuccess=function(){if(!Cn){var jn=Rn.result;gn.l=jn;var Vn=jn.objectStoreNames;Vn=Vn.contains("manifest")&&Vn.contains("segment")?new RE(jn,"segment","manifest"):null,gn.g=Vn,Vn=jn.objectStoreNames,Vn=Vn.contains("manifest-v2")&&Vn.contains("segment-v2")?new b0(jn,"segment-v2","manifest-v2"):null,gn.h=Vn,Vn=jn.objectStoreNames,Vn=Vn.contains("manifest-v3")&&Vn.contains("segment-v3")?new b0(jn,"segment-v3","manifest-v3"):null,gn.i=Vn,Vn=jn.objectStoreNames,Vn=Vn.contains("manifest-v5")&&Vn.contains("segment-v5")?new Ew(jn,"segment-v5","manifest-v5"):null,gn.j=Vn,jn=jn.objectStoreNames.contains("session-ids")?new dT(jn):null,gn.m=jn,In.stop(),bn.resolve()}},Rn.onupgradeneeded=function(){for(var jn=Rn.result,Vn=Dn(["segment-v5","manifest-v5","session-ids"]),Hn=Vn.next();!Hn.done;Hn=Vn.next())Hn=Hn.value,jn.objectStoreNames.contains(Hn)||jn.createObjectStore(Hn,{autoIncrement:!0})},Rn.onerror=function(jn){Cn||(bn.reject(new Bs(2,9,9001,Rn.error)),In.stop(),jn.preventDefault())},bn},Sn.destroy=function(){var gn=this;return hs(function(bn){switch(bn.g){case 1:if(!gn.g){bn.A(2);break}return Qn(bn,gn.g.destroy(),2);case 2:if(!gn.h){bn.A(4);break}return Qn(bn,gn.h.destroy(),4);case 4:if(!gn.i){bn.A(6);break}return Qn(bn,gn.i.destroy(),6);case 6:if(!gn.j){bn.A(8);break}return Qn(bn,gn.j.destroy(),8);case 8:if(!gn.m){bn.A(10);break}return Qn(bn,gn.m.destroy(),10);case 10:gn.l&&gn.l.close(),ms(bn)}})},Sn.getCells=function(){var gn=new Map;return this.g&&gn.set("v1",this.g),this.h&&gn.set("v2",this.h),this.i&&gn.set("v3",this.i),this.j&&gn.set("v5",this.j),gn},Sn.getEmeSessionCell=function(){return this.m},Sn.erase=function(){var gn=this;return hs(function(bn){switch(bn.g){case 1:if(!gn.g){bn.A(2);break}return Qn(bn,gn.g.destroy(),2);case 2:if(!gn.h){bn.A(4);break}return Qn(bn,gn.h.destroy(),4);case 4:if(!gn.i){bn.A(6);break}return Qn(bn,gn.i.destroy(),6);case 6:if(!gn.j){bn.A(8);break}return Qn(bn,gn.j.destroy(),8);case 8:return gn.l&&gn.l.close(),Qn(bn,nO(),10);case 10:return gn.l=null,gn.g=null,gn.h=null,gn.i=null,gn.j=null,Qn(bn,gn.init(),0)}})};function nO(){var gn=new bl,bn=pn.indexedDB.deleteDatabase("shaka_offline_db");return bn.onblocked=function(){},bn.onsuccess=function(){gn.resolve()},bn.onerror=function(Cn){gn.reject(new Bs(2,9,9001,bn.error)),Cn.preventDefault()},gn}vw("idb",function(){return gl("CrKey")||Um()||!pn.indexedDB?null:new rO});function Om(gn,bn,Cn,In){this.g=gn,this.i=bn,this.h=Cn,this.l=In,this.j=["offline:",gn,"/",bn,"/",Cn,"/",In].join("")}Om.prototype.za=function(){return this.i},Om.prototype.ka=function(){return this.h},Om.prototype.key=function(){return this.l},Om.prototype.toString=function(){return this.j};function x0(gn){if(gn=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(gn),gn==null)return null;var bn=gn[1];if(bn!="manifest"&&bn!="segment")return null;var Cn=gn[2];if(!Cn)return null;var In=gn[3];return In&&bn!=null?new Om(bn,Cn,In,Number(gn[4])):null}function iO(gn,bn){this.h=gn,this.g=bn}function aO(gn,bn){var Cn=new $u(null,0);Cn.Aa(bn.duration);var In=bn.streams.filter(function(ns){return ns.type=="audio"}),Rn=bn.streams.filter(function(ns){return ns.type=="video"});In=oO(gn,In,Rn,Cn),Rn=bn.streams.filter(function(ns){return ns.type==Zu}).map(function(ns){return l$(gn,ns,Cn)});var jn=bn.streams.filter(function(ns){return ns.type=="image"}).map(function(ns){return l$(gn,ns,Cn)}),Vn=bn.drmInfo?[bn.drmInfo]:[];if(bn.drmInfo)for(var Hn=Dn(In.values()),Xn=Hn.next();!Xn.done;Xn=Hn.next())Xn=Xn.value,Xn.audio&&Xn.audio.encrypted&&(Xn.audio.drmInfos=Vn),Xn.video&&Xn.video.encrypted&&(Xn.video.drmInfos=Vn);return{presentationTimeline:Cn,minBufferTime:2,offlineSessionIds:bn.sessionIds,variants:Array.from(In.values()),textStreams:Rn,imageStreams:jn,sequenceMode:bn.sequenceMode||!1}}function oO(gn,bn,Cn,In){for(var Rn=new Set,jn=Dn(bn),Vn=jn.next();!Vn.done;Vn=jn.next()){var Hn=Dn(Vn.value.variantIds);for(Vn=Hn.next();!Vn.done;Vn=Hn.next())Rn.add(Vn.value)}for(jn=Dn(Cn),Vn=jn.next();!Vn.done;Vn=jn.next())for(Hn=Dn(Vn.value.variantIds),Vn=Hn.next();!Vn.done;Vn=Hn.next())Rn.add(Vn.value);for(jn=new Map,Rn=Dn(Rn),Vn=Rn.next();!Vn.done;Vn=Rn.next())Vn=Vn.value,jn.set(Vn,{id:Vn,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(bn=Dn(bn),Rn=bn.next();!Rn.done;Rn=bn.next())for(Rn=Rn.value,Vn=l$(gn,Rn,In),Hn=Dn(Rn.variantIds),Rn=Hn.next();!Rn.done;Rn=Hn.next())Rn=jn.get(Rn.value),Rn.language=Vn.language,Rn.primary=Rn.primary||Vn.primary,Rn.audio=Vn;for(Cn=Dn(Cn),bn=Cn.next();!bn.done;bn=Cn.next())for(Rn=bn.value,bn=l$(gn,Rn,In),Vn=Dn(Rn.variantIds),Rn=Vn.next();!Rn.done;Rn=Vn.next())Rn=jn.get(Rn.value),Rn.primary=Rn.primary||bn.primary,Rn.video=bn;return jn}function l$(gn,bn,Cn){var In=bn.segments.map(function(Rn){return c$(gn,Rn)});return Cn.Ib(In),{id:bn.id,originalId:bn.originalId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new yl(In),mimeType:bn.mimeType,codecs:bn.codecs,width:bn.width||void 0,height:bn.height||void 0,frameRate:bn.frameRate,pixelAspectRatio:bn.pixelAspectRatio,hdr:bn.hdr,kind:bn.kind,encrypted:bn.encrypted,drmInfos:[],keyIds:bn.keyIds,language:bn.language,label:bn.label,type:bn.type,primary:bn.primary,trickModeVideo:null,emsgSchemeIdUris:null,roles:bn.roles,forced:bn.forced,channelsCount:bn.channelsCount,audioSamplingRate:bn.audioSamplingRate,spatialAudio:bn.spatialAudio,closedCaptions:bn.closedCaptions,tilesLayout:bn.tilesLayout}}function c$(gn,bn){var Cn=new Om("segment",gn.h,gn.g,bn.dataKey);return new cl(bn.startTime,bn.endTime,function(){return[Cn.toString()]},0,null,bn.initSegmentKey!=null?oN(gn,bn.initSegmentKey):null,bn.timestampOffset,bn.appendWindowStart,bn.appendWindowEnd,[],bn.tilesLayout||"")}function oN(gn,bn){var Cn=new Om("segment",gn.h,gn.g,bn);return new Hm(function(){return[Cn.toString()]},0,null)}function d$(){this.g=null}Sn=d$.prototype,Sn.configure=function(){},Sn.start=function(gn,bn){var Cn=this,In,Rn,jn,Vn,Hn,Xn,ns;return hs(function(us){switch(us.g){case 1:if(In=x0(gn),Cn.g=In,In==null||In.g!="manifest")throw new Bs(2,1,9004,gn);return Rn=new Fp,Rs(us),Qn(us,Rn.init(),4);case 4:return Qn(us,vv(Rn,In.za(),In.ka()),5);case 5:return jn=us.h,Qn(us,jn.getManifests([In.key()]),6);case 6:return Vn=us.h,Hn=Vn[0],Xn=new iO(In.za(),In.ka()),ns=aO(Xn,Hn),bn.makeTextStreamsForClosedCaptions(ns),us.return(ns);case 2:return js(us),Qn(us,Rn.destroy(),7);case 7:bs(us,0)}})},Sn.stop=function(){return Promise.resolve()},Sn.update=function(){},Sn.onExpirationUpdated=function(gn,bn){var Cn=this,In,Rn,jn,Vn,Hn,Xn,ns;return hs(function(us){switch(us.g){case 1:return In=Cn.g,Rn=new Fp,Ts(us,2,3),Qn(us,Rn.init(),5);case 5:return Qn(us,vv(Rn,In.za(),In.ka()),6);case 6:return jn=us.h,Qn(us,jn.getManifests([In.key()]),7);case 7:if(Vn=us.h,Hn=Vn[0],Xn=Hn.sessionIds.includes(gn),ns=Hn.expiration==null||Hn.expiration>bn,!Xn||!ns){us.A(3);break}return Qn(us,jn.updateManifestExpiration(In.key(),bn),3);case 3:return js(us),Qn(us,Rn.destroy(),10);case 10:bs(us,0);break;case 2:_s(us),us.A(3)}})},cy["application/x-offline-manifest"]=function(){return new d$};function Sw(){}function sO(gn){var bn=x0(gn);return bn&&bn.g=="manifest"?(gn={uri:gn,originalUri:gn,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"}},gn=Uy(gn)):gn=bn&&bn.g=="segment"?_v(bn.key(),bn):s_(new Bs(2,1,9004,gn)),gn}function _v(gn,bn){var Cn=new Fp;return Uy(void 0).Y(function(){return Cn.init()}).Y(function(){return vv(Cn,bn.za(),bn.ka())}).Y(function(In){return In.getSegments([bn.key()])}).Y(function(In){return{uri:bn,data:In[0].data,headers:{}}}).finally(function(){return Cn.destroy()})}Ys("shaka.offline.OfflineScheme",Sw),Sw.plugin=sO,jy("offline",sO);function f$(gn,bn,Cn){var In,Rn,jn,Vn,Hn,Xn;return hs(function(ns){switch(ns.g){case 1:In=[];for(var us=[],ps=Dn(Cn),fs=ps.next();!fs.done;fs=ps.next()){fs=fs.value;for(var vs=!1,Is=Dn(us),Ls=Is.next();!Ls.done;Ls=Is.next())if(Ls=Ls.value,lO(Ls.info,fs)){Ls.sessionIds.push(fs.sessionId),vs=!0;break}vs||us.push({info:fs,sessionIds:[fs.sessionId]})}Rn=Dn(us),jn=Rn.next();case 2:if(jn.done){ns.A(4);break}return Vn=jn.value,Hn=uO(gn,bn,Vn),Qn(ns,Hn,5);case 5:Xn=ns.h,In=In.concat(Xn),jn=Rn.next(),ns.A(2);break;case 4:return ns.return(In)}})}function uO(gn,bn,Cn){var In,Rn;return hs(function(jn){switch(jn.g){case 1:return In=new WT({kb:bn,onError:function(){},cd:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),Ts(jn,2),In.configure(gn),Qn(jn,SM(In,Cn.info.keySystem,Cn.info.licenseUri,Cn.info.serverCertificate,Cn.info.audioCapabilities,Cn.info.videoCapabilities),4);case 4:ys(jn,3);break;case 2:return _s(jn),Qn(jn,In.destroy(),5);case 5:return jn.return([]);case 3:return Ts(jn,6),Qn(jn,Y0(In),8);case 8:ys(jn,7);break;case 6:return _s(jn),Qn(jn,In.destroy(),9);case 9:return jn.return([]);case 7:return Rn=[],Qn(jn,Promise.all(Cn.sessionIds.map(function(Vn){return hs(function(Hn){if(Hn.g==1)return Ts(Hn,2),Qn(Hn,kM(In,Vn),4);if(Hn.g!=2)return Rn.push(Vn),ys(Hn,0);_s(Hn),ms(Hn)})})),10);case 10:return Qn(jn,In.destroy(),11);case 11:return jn.return(Rn)}})}function lO(gn,bn){function Cn(In,Rn){return In.robustness==Rn.robustness&&In.contentType==Rn.contentType}return gn.keySystem==bn.keySystem&&gn.licenseUri==bn.licenseUri&&Xp(gn.audioCapabilities,bn.audioCapabilities,Cn)&&Xp(gn.videoCapabilities,bn.videoCapabilities,Cn)}function sN(gn,bn,Cn){var In=bn.presentationTimeline.getDuration();return bn=cO(bn),{offlineUri:null,originalManifestUri:gn,duration:In,size:0,expiration:1/0,tracks:bn,appMetadata:Cn,isIncomplete:!1}}function NE(gn,bn){var Cn=aO(new iO(gn.za(),gn.ka()),bn),In=bn.appMetadata||{};return Cn=cO(Cn),{offlineUri:gn.toString(),originalManifestUri:bn.originalManifestUri,duration:bn.duration,size:bn.size,expiration:bn.expiration,tracks:Cn,appMetadata:In,isIncomplete:bn.isIncomplete||!1}}function cO(gn){var bn=[],Cn=DT(gn.variants);Cn=Dn(Cn);for(var In=Cn.next();!In.done;In=Cn.next())bn.push(j_(In.value));for(gn=Dn(gn.textStreams),Cn=gn.next();!Cn.done;Cn=gn.next())bn.push(j0(Cn.value));return bn}function uN(){this.g={}}function dO(gn,bn){var Cn=bn.audio,In=bn.video;if(Cn&&!In&&(gn.g[Cn.id]=Cn.bandwidth||bn.bandwidth),!Cn&&In&&(gn.g[In.id]=In.bandwidth||bn.bandwidth),Cn&&In){var Rn=Cn.bandwidth||393216,jn=In.bandwidth||bn.bandwidth-Rn;0>=jn&&(jn=bn.bandwidth),gn.g[Cn.id]=Rn,gn.g[In.id]=jn}}function fO(gn,bn){gn.g[bn.id]=bn.bandwidth||2048}function Tw(gn,bn){return gn=gn.g[bn],gn==null&&(gn=0),gn}function $p(gn){var bn=this;if(gn&&gn.constructor!=nu)throw new Bs(2,9,9008);this.g=this.h=null,gn?(this.h=gn.h,this.g=gn.jc()):(this.h=vE(),this.g=new Sl),this.i=[],this.j=[];var Cn=!gn;this.l=new gm(function(){var In,Rn,jn,Vn,Hn;return hs(function(Xn){switch(Xn.g){case 1:return Qn(Xn,Promise.all(bn.j.map(function(ns){return i$(ns)})),2);case 2:for(In=function(){},Rn=[],jn=Dn(bn.i),Vn=jn.next();!Vn.done;Vn=jn.next())Hn=Vn.value,Rn.push(Hn.then(In,In));return Qn(Xn,Promise.all(Rn),3);case 3:if(!Cn){Xn.A(4);break}return Qn(Xn,bn.g.destroy(),4);case 4:bn.h=null,bn.g=null,ms(Xn)}})})}function p$(){if(Ap())e:{for(var gn=Dn(ME.values()),bn=gn.next();!bn.done;bn=gn.next())if(bn=bn.value,bn=bn()){bn.destroy(),gn=!0;break e}gn=!1}else gn=!1;return gn}Sn=$p.prototype,Sn.destroy=function(){return this.l.destroy()},Sn.configure=function(gn,bn){return arguments.length==2&&typeof gn=="string"&&(gn=OS(gn,bn)),_E(this.h,gn)},Sn.getConfiguration=function(){var gn=vE();return _E(gn,this.h,vE()),gn},Sn.jc=function(){return this.g},Sn.store=function(gn,bn,Cn){var In=this,Rn=this.getConfiguration(),jn=new ZP(this.g);return this.j.push(jn),bn=lN(this,gn,bn||{},function(){var Vn;return hs(function(Hn){return Hn.g==1?Qn(Hn,BA(gn,In.g,Rn.manifest.retryParameters,Cn||null),2):(Vn=Hn.h,Hn.return(Vn()))})},Rn,jn),bn=new Vl(bn,function(){return i$(jn)}),bn.finally(function(){pl(In.j,jn)}),yN(this,bn)};function lN(gn,bn,Cn,In,Rn,jn){var Vn,Hn,Xn,ns,us,ps,fs,vs,Is,Ls,Cs,Ms,Zs,Fs;return hs(function(Ws){switch(Ws.g){case 1:return pT(),Hn=Vn=null,Xn=new Fp,ps=us=ns=null,Ts(Ws,2,3),Qn(Ws,In(),5);case 5:return Vn=Ws.h,Qn(Ws,hN(gn,bn,Vn,Rn),6);case 6:if(fs=Ws.h,Wp(gn),vs=!fs.presentationTimeline.U()&&!fs.presentationTimeline.jb(),!vs)throw new Bs(2,9,9005,bn);return Qn(Ws,mN(gn,fs,function(Gs){ps=ps||Gs},Rn),7);case 7:if(Hn=Ws.h,Wp(gn),ps)throw ps;return Qn(Ws,hO(fs,Rn),8);case 8:return Qn(Ws,Xn.init(),9);case 9:return Wp(gn),Qn(Ws,s$(Xn),10);case 10:return ns=Ws.h,Wp(gn),Is=dN(Hn,fs,bn,Cn,Rn,jn),Ls=Is.$f,Cs=Is.pe,Qn(Ws,ns.ka.addManifests([Ls]),11);case 11:if(Ms=Ws.h,Wp(gn),us=Ms[0],Wp(gn),ps)throw ps;return Qn(Ws,cN(gn,Cs,us,Ls,jn,Rn,ns.ka,fs,Hn),12);case 12:return Wp(gn),Zs=new Om("manifest",ns.path.za,ns.path.ka,us),Ws.return(NE(Zs,Ls));case 3:return js(Ws),Qn(Ws,Xn.destroy(),13);case 13:if(!Vn){Ws.A(14);break}return Qn(Ws,Vn.stop(),14);case 14:if(!Hn){Ws.A(16);break}return Qn(Ws,Hn.destroy(),16);case 16:bs(Ws,0);break;case 2:if(Fs=_s(Ws),us==null){Ws.A(18);break}return Qn(Ws,pO(us),18);case 18:throw ps||Fs}})}function cN(gn,bn,Cn,In,Rn,jn,Vn,Hn,Xn){var ns,us,ps,fs,vs,Is,Ls,Cs,Ms,Zs;return hs(function(Fs){switch(Fs.g){case 1:if(ns={},us=0,ps=function(Ws,Gs){var eu,au,du,pu,bu,Uu,Bu;return hs(function(al){if(al.g==1){for(eu={},au=Dn(Ws),du=au.next();!du.done;eu={cb:eu.cb},du=au.next())eu.cb=du.value,pu=YP(eu.cb,jn),bu=eu.cb.i,Uu=eu.cb.h,Bu=function(Mu){return function(Ql){var ul,$l,Bp;return hs(function(ey){if(ey.g==1)return Qn(ey,Vn.addSegments([{data:Ql}]),2);ul=ey.h,Wp(gn),$l=Mu.cb.g,Bp=n$($l),ns[Bp]=ul[0],us+=Ql.byteLength,ms(ey)})}}(eu),a$(Rn,eu.cb.groupId,pu,bu,Uu,Bu);return Qn(al,JP(Rn),2)}return Gs?(Wp(gn),gO(Hn,In,Xn,jn),Qn(al,Vn.updateManifest(Cn,In),0)):al.A(0)})},fs=!1,Ts(Fs,2),!kw(Hn)||!fs||mO(Hn)){Fs.A(4);break}return Qn(Fs,ps(bn.filter(function(Ws){return Ws.h}),!0),5);case 5:return Wp(gn),bn=bn.filter(function(Ws){return!Ws.h}),vs=ns,Is=us,ns={},us=0,Qn(Fs,h$(Vn,Cn,In,vs,Is,function(){return Wp(gn)}),6);case 6:Wp(gn);case 4:if(fs){Fs.A(7);break}return Qn(Fs,ps(bn,!1),8);case 8:return Wp(gn),Ls=ns,Cs=us,ns={},us=0,Qn(Fs,h$(Vn,Cn,In,Ls,Cs,function(){return Wp(gn)}),9);case 9:Wp(gn);case 7:ys(Fs,0);break;case 2:return Ms=_s(Fs),Zs=Object.values(ns),Qn(Fs,Vn.removeSegments(Zs,function(){}),10);case 10:throw Ms}})}function pO(gn){var bn,Cn,In,Rn;return hs(function(jn){switch(jn.g){case 1:return bn=new Fp,Qn(jn,bn.init(),2);case 2:return Qn(jn,s$(bn),3);case 3:return Cn=jn.h,In=new Om("manifest",Cn.path.za,Cn.path.ka,gn),Qn(jn,bn.destroy(),4);case 4:return Rn=new $p,Qn(jn,Rn.remove(In.toString()),0)}})}function h$(gn,bn,Cn,In,Rn,jn){var Vn,Hn,Xn,ns,us,ps,fs,vs,Is,Ls,Cs;return hs(function(Ms){switch(Ms.g){case 1:for(Vn=!1,Ts(Ms,2),Hn=!0,Xn=Dn(Cn.streams),ns=Xn.next();!ns.done;ns=Xn.next())for(us=ns.value,ps=Dn(us.segments),fs=ps.next();!fs.done;fs=ps.next())vs=fs.value,Is=vs.pendingSegmentRefId?In[vs.pendingSegmentRefId]:null,Is!=null&&(vs.dataKey=Is,vs.pendingSegmentRefId=void 0),Is=vs.pendingInitSegmentRefId?In[vs.pendingInitSegmentRefId]:null,Is!=null&&(vs.initSegmentKey=Is,vs.pendingInitSegmentRefId=void 0),vs.pendingSegmentRefId&&(Hn=!1),vs.pendingInitSegmentRefId&&(Hn=!1);return Cn.size+=Rn,Hn&&(Cn.isIncomplete=!1),Qn(Ms,gn.updateManifest(bn,Cn),4);case 4:Vn=!0,jn(),ys(Ms,0);break;case 2:return Ls=_s(Ms),Qn(Ms,pO(bn),5);case 5:if(Vn){Ms.A(6);break}return Cs=Object.values(In),Qn(Ms,gn.removeSegments(Cs,function(){}),6);case 6:throw Ls}})}function hO(gn,bn){var Cn,In,Rn,jn,Vn,Hn,Xn,ns,us,ps,fs,vs,Is,Ls,Cs,Ms,Zs,Fs,Ws,Gs,eu,au,du,pu,bu,Uu,Bu,al,Mu;return hs(function(Ql){switch(Ql.g){case 1:return Cn={width:1/0,height:1/0},uu(gn,bn.restrictions,Cn),Qn(Ql,jp(gn,bn.offline.usePersistentLicense),2);case 2:for(In=[],Rn=bn.preferredAudioChannelCount,jn=bn.preferredDecodingAttributes,Vn=bn.preferredVideoCodecs,Hn=bn.preferredAudioCodecs,Vm(gn,Vn,Hn,Rn,jn),Xn=Dn(gn.variants),ns=Xn.next();!ns.done;ns=Xn.next())us=ns.value,In.push(j_(us));for(ps=Dn(gn.textStreams),fs=ps.next();!fs.done;fs=ps.next())vs=fs.value,In.push(j0(vs));for(Is=Dn(gn.imageStreams),Ls=Is.next();!Ls.done;Ls=Is.next())Cs=Ls.value,In.push(JE(Cs));return Qn(Ql,bn.offline.trackSelectionCallback(In),3);case 3:for(Ms=Ql.h,Zs=gn.presentationTimeline.getDuration(),Fs=0,Ws=Dn(Ms),Gs=Ws.next();!Gs.done;Gs=Ws.next())eu=Gs.value,au=eu.bandwidth*Zs/8,Fs+=au;return Ts(Ql,4),Qn(Ql,bn.offline.downloadSizeCallback(Fs),6);case 6:if(du=Ql.h,!du)throw new Bs(2,9,9014);ys(Ql,5);break;case 4:throw pu=_s(Ql),pu instanceof Bs?pu:new Bs(2,9,9015);case 5:for(bu=new Set,Uu=new Set,Bu=new Set,al=Dn(Ms),Gs=al.next();!Gs.done;Gs=al.next())Mu=Gs.value,Mu.type=="variant"&&bu.add(Mu.id),Mu.type=="text"&&Uu.add(Mu.id),Mu.type=="image"&&Bu.add(Mu.id);gn.variants=gn.variants.filter(function(ul){return bu.has(ul.id)}),gn.textStreams=gn.textStreams.filter(function(ul){return Uu.has(ul.id)}),gn.imageStreams=gn.imageStreams.filter(function(ul){return Bu.has(ul.id)}),EN(gn),ms(Ql)}})}function dN(gn,bn,Cn,In,Rn,jn){var Vn=sN(Cn,bn,In),Hn=Rn.offline.progressCallback;eN(jn,function(vs,Is){Vn.size=Is,Hn(Vn,vs)},function(vs,Is){Xn&&Rn.offline.usePersistentLicense&&ns==Is&&X0(gn,"cenc",vs)});var Xn=kw(bn)&&!mO(bn),ns=null;Xn&&(ns=SN.get(gn.g.keySystem));for(var us=new uN,ps=Dn(bn.textStreams),fs=ps.next();!fs.done;fs=ps.next())us.g[fs.value.id]=52;for(ps=Dn(bn.imageStreams),fs=ps.next();!fs.done;fs=ps.next())fO(us,fs.value);for(fs=Dn(bn.variants),ps=fs.next();!ps.done;ps=fs.next())dO(us,ps.value);return us=$w(jn,us,bn,Rn),jn=us.streams,us=us.pe,fs=gn.g,ps=Rn.offline.usePersistentLicense,fs&&ps&&(fs.initData=[]),{$f:{creationTime:Date.now(),originalManifestUri:Cn,duration:bn.presentationTimeline.getDuration(),size:0,expiration:gn.ic(),streams:jn,sessionIds:ps?cx(gn):[],drmInfo:fs,appMetadata:In,isIncomplete:!0,sequenceMode:bn.sequenceMode},pe:us}}function kw(gn){return gn.variants.some(function(bn){var Cn=bn.audio&&bn.audio.encrypted;return bn.video&&bn.video.encrypted||Cn})}function mO(gn){return gn.variants.some(function(bn){return(bn.video?bn.video.drmInfos:[]).concat(bn.audio?bn.audio.drmInfos:[]).some(function(Cn){return Cn.initData&&Cn.initData.length})})}function gO(gn,bn,Cn,In){if(bn.expiration=Cn.ic(),Cn=cx(Cn),bn.sessionIds=In.offline.usePersistentLicense?Cn:[],kw(gn)&&In.offline.usePersistentLicense&&!Cn.length)throw new Bs(2,9,9007)}Sn.remove=function(gn){return bw(this,bp(this,gn))};function bp(gn,bn){var Cn,In,Rn,jn,Vn,Hn;return hs(function(Xn){switch(Xn.g){case 1:if(pT(),Cn=x0(bn),Cn==null||Cn.g!="manifest")throw new Bs(2,9,9004,bn);return In=Cn,Rn=new Fp,Rs(Xn),Qn(Xn,Rn.init(),4);case 4:return Qn(Xn,vv(Rn,In.za(),In.ka()),5);case 5:return jn=Xn.h,Qn(Xn,jn.getManifests([In.key()]),6);case 6:return Vn=Xn.h,Hn=Vn[0],Qn(Xn,Promise.all([fN(gn,Hn,Rn),pN(jn,In,Hn)]),2);case 2:return js(Xn),Qn(Xn,Rn.destroy(),8);case 8:bs(Xn,0)}})}function m$(gn,bn){for(var Cn=[],In=Dn(gn.streams),Rn=In.next();!Rn.done;Rn=In.next())Rn=Rn.value,bn&&Rn.type=="video"?Cn.push({contentType:_h(Rn.mimeType,Rn.codecs),robustness:gn.drmInfo.videoRobustness}):bn||Rn.type!="audio"||Cn.push({contentType:_h(Rn.mimeType,Rn.codecs),robustness:gn.drmInfo.audioRobustness});return Cn}function fN(gn,bn,Cn){return hs(function(In){return Qn(In,_N(gn.g,gn.h.drm,Cn,bn),0)})}function pN(gn,bn,Cn){function In(){}var Rn=vN(Cn);return NE(bn,Cn),Promise.all([gn.removeSegments(Rn,In),gn.removeManifests([bn.key()],In)])}Sn.og=function(){return bw(this,yO(this))};function yO(gn){var bn,Cn,In,Rn,jn,Vn,Hn,Xn,ns,us;return hs(function(ps){switch(ps.g){case 1:return pT(),bn=gn.g,Cn=gn.h.drm,In=new Fp,Rn=!1,Rs(ps),Qn(ps,In.init(),4);case 4:jn=[],u$(In,function(fs){return jn.push(fs)}),Vn=Dn(jn),Hn=Vn.next();case 5:if(Hn.done){ps.A(2);break}return Xn=Hn.value,Qn(ps,Xn.getAll(),8);case 8:return ns=ps.h,Qn(ps,f$(Cn,bn,ns),9);case 9:return us=ps.h,Qn(ps,Xn.remove(us),10);case 10:us.length!=ns.length&&(Rn=!0),Hn=Vn.next(),ps.A(5);break;case 2:return js(ps),Qn(ps,In.destroy(),11);case 11:bs(ps,3);break;case 3:return ps.return(!Rn)}})}Sn.list=function(){return bw(this,vO())};function vO(){var gn,bn,Cn;return hs(function(In){switch(In.g){case 1:return pT(),gn=[],bn=new Fp,Rs(In),Qn(In,bn.init(),4);case 4:return Cn=Promise.resolve(),yw(bn,function(Rn,jn){Cn=Cn.then(function(){var Vn;return hs(function(Hn){if(Hn.g==1)return Qn(Hn,jn.getAllManifests(),2);Vn=Hn.h,Vn.forEach(function(Xn,ns){Xn=NE(new Om("manifest",Rn.za,Rn.ka,ns),Xn),gn.push(Xn)}),ms(Hn)})})}),Qn(In,Cn,2);case 2:return js(In),Qn(In,bn.destroy(),6);case 6:bs(In,3);break;case 3:return In.return(gn)}})}function hN(gn,bn,Cn,In){var Rn,jn,Vn,Hn,Xn;return hs(function(ns){if(ns.g==1)return Rn=null,jn=gn.g,Vn={networkingEngine:jn,modifyManifestRequest:function(){},modifySegmentRequest:function(){},filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(us){Rn=us},isLowLatencyMode:function(){return!1},isAutoLowLatencyMode:function(){return!1},enableLowLatencyMode:function(){},updateDuration:function(){},newDrmInfo:function(){}},Cn.configure(In.manifest),Wp(gn),Qn(ns,Cn.start(bn,Vn),2);if(ns.g!=3)return Hn=ns.h,Wp(gn),Xn=EO(Hn),Qn(ns,Promise.all(Pv(Xn,function(us){return us.createSegmentIndex()})),3);if(Wp(gn),Rn)throw Rn;return ns.return(Hn)})}function mN(gn,bn,Cn,In){var Rn;return hs(function(jn){switch(jn.g){case 1:return Rn=new WT({kb:gn.g,onError:Cn,cd:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),Rn.configure(In.drm),Qn(jn,uv(Rn,bn.variants,In.offline.usePersistentLicense),2);case 2:return Qn(jn,Y0(Rn),3);case 3:return Qn(jn,RA(Rn),4);case 4:return jn.return(Rn)}})}function $w(gn,bn,Cn,In){var Rn=new Map,jn=EO(Cn),Vn=new Map;jn=Dn(jn);for(var Hn=jn.next();!Hn.done;Hn=jn.next()){Hn=Hn.value;var Xn=_O(gn,bn,Cn,Hn,In,Rn);Vn.set(Hn.id,Xn)}for(gn=Dn(Cn.variants),bn=gn.next();!bn.done;bn=gn.next())bn=bn.value,bn.audio&&Vn.get(bn.audio.id).variantIds.push(bn.id),bn.video&&Vn.get(bn.video.id).variantIds.push(bn.id);return{streams:Array.from(Vn.values()),pe:Array.from(Rn.values())}}function _O(gn,bn,Cn,In,Rn,jn){var Vn={id:In.id,originalId:In.originalId,primary:In.primary,type:In.type,mimeType:In.mimeType,codecs:In.codecs,frameRate:In.frameRate,pixelAspectRatio:In.pixelAspectRatio,hdr:In.hdr,kind:In.kind,language:In.language,label:In.label,width:In.width||null,height:In.height||null,encrypted:In.encrypted,keyIds:In.keyIds,segments:[],variantIds:[],roles:In.roles,forced:In.forced,channelsCount:In.channelsCount,audioSamplingRate:In.audioSamplingRate,spatialAudio:In.spatialAudio,closedCaptions:In.closedCaptions,tilesLayout:In.tilesLayout},Hn=Rn.offline.numberOfParallelDownloads,Xn=0;return gN(In,Cn.presentationTimeline.Oa(),function(ns){var us=n$(ns),ps=void 0;if(!jn.has(us)){var fs=ns.endTime-ns.startTime;fs=Tw(bn,In.id)*fs,fs=QP(gn.g,fs),jn.set(us,new qP(ns,fs,Xn,!1))}ns.h&&(ps=n$(ns.h),jn.has(ps)||(fs=.5*Tw(bn,In.id),fs=QP(gn.g,fs),jn.set(ps,new qP(ns.h,fs,Xn,!0)))),Vn.segments.push({pendingInitSegmentRefId:ps,initSegmentKey:ps?0:null,startTime:ns.startTime,endTime:ns.endTime,appendWindowStart:ns.appendWindowStart,appendWindowEnd:ns.appendWindowEnd,timestampOffset:ns.timestampOffset,tilesLayout:ns.tilesLayout,pendingSegmentRefId:us,dataKey:0}),Xn=(Xn+1)%Hn}),Vn}function gN(gn,bn,Cn){if(bn=gn.segmentIndex.find(bn),bn!=null)for(var In=gn.segmentIndex.get(bn);In;)Cn(In),In=gn.segmentIndex.get(++bn)}function Wp(gn){if(gn.l.g)throw new Bs(2,9,7001)}function pT(){if(!p$())throw new Bs(2,9,9e3)}function bw(gn,bn){return hs(function(Cn){return Cn.g==1?(gn.i.push(bn),Rs(Cn),Qn(Cn,bn,4)):Cn.g!=2?Cn.return(Cn.h):(js(Cn),pl(gn.i,bn),bs(Cn,0))})}function yN(gn,bn){var Cn=bn.promise;return gn.i.push(Cn),bn.finally(function(){pl(gn.i,Cn)})}function vN(gn){var bn=new Set;gn=Dn(gn.streams);for(var Cn=gn.next();!Cn.done;Cn=gn.next()){Cn=Dn(Cn.value.segments);for(var In=Cn.next();!In.done;In=Cn.next())In=In.value,In.initSegmentKey!=null&&bn.add(In.initSegmentKey),bn.add(In.dataKey)}return Array.from(bn)}function _N(gn,bn,Cn,In){var Rn,jn,Vn;return hs(function(Hn){return Hn.g==1?In.drmInfo?(Rn=$0(Cn),jn=In.sessionIds.map(function(Xn){return{sessionId:Xn,keySystem:In.drmInfo.keySystem,licenseUri:In.drmInfo.licenseServerUri,serverCertificate:In.drmInfo.serverCertificate,audioCapabilities:m$(In,!1),videoCapabilities:m$(In,!0)}}),Qn(Hn,f$(bn,gn,jn),2)):Hn.return():Hn.g!=3?(Vn=Hn.h,Qn(Hn,Rn.remove(Vn),3)):Qn(Hn,Rn.add(jn.filter(function(Xn){return!Vn.includes(Xn.sessionId)})),0)})}function EO(gn){for(var bn=new Set,Cn=Dn(gn.textStreams),In=Cn.next();!In.done;In=Cn.next())bn.add(In.value);for(Cn=Dn(gn.imageStreams),In=Cn.next();!In.done;In=Cn.next())bn.add(In.value);for(gn=Dn(gn.variants),Cn=gn.next();!Cn.done;Cn=gn.next())Cn=Cn.value,Cn.audio&&bn.add(Cn.audio),Cn.video&&bn.add(Cn.video);return bn}function EN(gn){gn.variants.map(function(jn){return jn.video});var bn=new Set(gn.variants.map(function(jn){return jn.audio}));gn=gn.textStreams;for(var Cn=Dn(bn),In=Cn.next();!In.done;In=Cn.next()){In=Dn(bn);for(var Rn=In.next();!Rn.done;Rn=In.next());}for(bn=Dn(gn),Cn=bn.next();!Cn.done;Cn=bn.next())for(Cn=Dn(gn),In=Cn.next();!In.done;In=Cn.next());}Ys("shaka.offline.Storage",$p),$p.deleteAll=function(){var gn;return hs(function(bn){return bn.g==1?(gn=new Fp,Rs(bn),Qn(bn,nN(gn),2)):bn.g!=5?(js(bn),Qn(bn,gn.destroy(),5)):bs(bn,0)})},$p.prototype.list=$p.prototype.list,$p.prototype.removeEmeSessions=$p.prototype.og,$p.prototype.remove=$p.prototype.remove,$p.prototype.store=$p.prototype.store,$p.prototype.getNetworkingEngine=$p.prototype.jc,$p.prototype.getConfiguration=$p.prototype.getConfiguration,$p.prototype.configure=$p.prototype.configure,$p.prototype.destroy=$p.prototype.destroy,$p.support=p$;var SN=new Map().set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.adobe.primetime","f239e769efa348509c16a903c6932efb");m1.offline=p$;function Op(){}function nm(gn,bn){for(gn={priority:bn||0,lf:gn},bn=0;bn<hp.length;bn++)if(hp[bn].priority<gn.priority){hp.splice(bn,0,gn);return}hp.push(gn)}Ys("shaka.polyfill",Op),Op.register=nm,Op.installAll=function(){for(var gn=Dn(hp),bn=gn.next();!bn.done;bn=gn.next()){bn=bn.value;try{bn.lf()}catch(Cn){Tu("Error installing polyfill!",Cn)}}};var hp=[];function w_(){this.g=new y$}function g$(){pn.AbortController||(pn.AbortController=w_,pn.AbortSignal=y$)}w_.prototype.abort=function(gn){var bn=this.g;bn.h||(bn.h=!0,bn.g=gn,bn.g===void 0&&(bn.g=new DOMException("signal is aborted without reason","AbortError")),gn=new Ju("abort"),bn.onabort&&bn.onabort(gn),bn.dispatchEvent(gn))},Ln.Object.defineProperties(w_.prototype,{signal:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),Op.AbortController=w_,w_.install=g$;function y$(){hl.call(this),this.h=!1,this.g=void 0,this.onabort=null}as(y$,hl),Ln.Object.defineProperties(y$.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.h}},reason:{configurable:!0,enumerable:!0,get:function(){return this.g}}}),nm(g$);function SO(){}function TO(){if(!Object.getOwnPropertyDescriptor(Element.prototype,"ariaHidden"))for(var gn=Dn(["ariaHidden","ariaLabel","ariaPressed","ariaSelected"]),bn=gn.next();!bn.done;bn=gn.next())kO(bn.value)}function kO(gn){var bn="aria-"+gn.toLowerCase().replace(/^aria/,"");Object.defineProperty(Element.prototype,gn,{get:function(){return this.getAttribute(bn)},set:function(Cn){Cn==null||Cn==null?this.removeAttribute(bn):this.setAttribute(bn,Cn)}})}Op.Aria=SO,SO.install=TO,nm(TO);function $O(){}function bO(){dA()}Op.EncryptionScheme=$O,$O.install=bO,nm(bO,-2);function xp(){}function xw(){if(pn.Document){var gn=Element.prototype;gn.requestFullscreen=gn.requestFullscreen||gn.mozRequestFullScreen||gn.msRequestFullscreen||gn.webkitRequestFullscreen,gn=Document.prototype,gn.exitFullscreen=gn.exitFullscreen||gn.mozCancelFullScreen||gn.msExitFullscreen||gn.webkitCancelFullScreen,"fullscreenElement"in document||(Object.defineProperty(document,"fullscreenElement",{get:function(){return document.mozFullScreenElement||document.msFullscreenElement||document.webkitCurrentFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(document,"fullscreenEnabled",{get:function(){return document.mozFullScreenEnabled||document.msFullscreenEnabled||document.webkitFullscreenEnabled}})),document.addEventListener("webkitfullscreenchange",mp),document.addEventListener("webkitfullscreenerror",mp),document.addEventListener("mozfullscreenchange",mp),document.addEventListener("mozfullscreenerror",mp),document.addEventListener("MSFullscreenChange",mp),document.addEventListener("MSFullscreenError",mp)}}function mp(gn){var bn=gn.type.replace(/^(webkit|moz|MS)/,"").toLowerCase(),Cn=document.createEvent("Event");Cn.initEvent(bn,gn.bubbles,gn.cancelable),gn.target.dispatchEvent(Cn)}Op.Fullscreen=xp,xp.install=xw,nm(xw);function C0(){}function DE(){var gn=!0;(D_()||gl("PlayStation 5")||hm()||gl("Web0S")||Ep()||gl("CrKey")||gl("PC=EOS")||gl("Hisense")||gl("VIDAA"))&&(gn=!1),gn&&navigator.mediaCapabilities||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),hT=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=xO)}function xO(gn){var bn,Cn,In,Rn,jn,Vn,Hn,Xn,ns,us,ps,fs,vs,Is,Ls,Cs,Ms,Zs;return hs(function(Fs){switch(Fs.g){case 1:if(bn={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:gn},!gn)return Fs.return(bn);if(Cn=gn.video,In=gn.audio,gn.type=="media-source"){if(!Ap())return Fs.return(bn);if(Cn){if(gl("CrKey"))if(pn.cast&&cast.__platform__&&cast.__platform__.canDisplayType){var Ws=Cn.contentType;Cn.width&&Cn.height&&(Ws+="; width="+Cn.width+"; height="+Cn.height),Cn.framerate&&(Ws+="; framerate="+Cn.framerate),Cn.transferFunction==="pq"&&(Ws+="; eotf=smpte2084"),Rn=cast.__platform__.canDisplayType(Ws)}else Rn=Fu(Cn.contentType);else Ep()?(jn=Cn.contentType,Cn.width&&Cn.height&&(jn+="; width="+Cn.width,jn+="; height="+Cn.height),Cn.framerate&&(jn+="; framerate="+Cn.framerate),Cn.bitrate&&(jn+="; bitrate="+Cn.bitrate),Rn=Fu(jn)):Rn=Fu(Cn.contentType);if(!Rn)return Fs.return(bn)}if(In&&(Vn=In.contentType,Hn=Fu(Vn),!Hn))return Fs.return(bn)}else if(gn.type=="file"){if(Cn&&(Xn=Cn.contentType,ns=Em(Xn),!ns)||In&&(us=In.contentType,ps=Em(us),!ps))return Fs.return(bn)}else return Fs.return(bn);return gn.keySystemConfiguration?(fs=gn.keySystemConfiguration,vs=[],Is=[],fs.audio&&(Ls={robustness:fs.audio.robustness||"",contentType:gn.audio.contentType},vs.push(Ls)),fs.video&&(Cs={robustness:fs.video.robustness||"",contentType:gn.video.contentType},Is.push(Cs)),Ms={initDataTypes:[fs.initDataType],distinctiveIdentifier:fs.distinctiveIdentifier,persistentState:fs.persistentState,sessionTypes:fs.sessionTypes},vs.length&&(Ms.audioCapabilities=vs),Is.length&&(Ms.videoCapabilities=Is),Ts(Fs,3),Qn(Fs,navigator.requestMediaKeySystemAccess(fs.keySystem,[Ms]),5)):(bn.supported=!0,Fs.return(Promise.resolve(bn)));case 5:Zs=Fs.h,ys(Fs,4);break;case 3:_s(Fs);case 4:Zs&&(bn.supported=!0,bn.keySystemAccess=Zs);case 2:return Fs.return(bn)}})}Op.MediaCapabilities=C0,C0.install=DE;var hT=null;C0.originalMcap=hT,nm(DE,-1);function Cw(){}function ww(){var gn=L_();pn.MediaSource&&(pn.cast&&cast.__platform__&&cast.__platform__.canDisplayType?PO():gn?12>=gn?(CO(),wO()):15>=gn&&CO():Yl()?AO():(gl("Tizen 2")||gl("Tizen 3")||gl("Tizen 4"))&&IO()),pn.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&LE()}function CO(){var gn=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var bn=gn.apply(this,lu.apply(0,arguments));return bn.abort=function(){},bn}}function wO(){var gn=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(bn,Cn){return gn.call(this,bn,Cn-.001)}}function AO(){var gn=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(bn){return bn.split(";")[0].split("/")[1]!="mp2t"&&gn(bn)}}function IO(){var gn=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(bn){return Bm(bn)[0]!="opus"&&gn(bn)}}function PO(){var gn=MediaSource.isTypeSupported;MediaSource.isTypeSupported=function(bn){var Cn=bn.split(/ *; */);return Cn.shift(),Cn.some(function(In){return In.startsWith("codecs=")})?cast.__platform__.canDisplayType(bn):gn(bn)}}function LE(){var gn=MediaSource.isTypeSupported;gl("Web0S")||(MediaSource.isTypeSupported=function(bn){var Cn=bn.split(/ *; */),In=Cn.findIndex(function(Vn){return Vn.startsWith("codecs=")});if(0>In)return gn(bn);var Rn=Cn[In].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),jn=Rn.findIndex(function(Vn){return Vn.startsWith("vp09")});return 0<=jn&&(Rn[jn]="vp9",Cn[In]='codecs="'+Rn.join(",")+'"',bn=Cn.join("; ")),gn(bn)})}Op.MediaSource=Cw,Cw.install=ww,nm(ww);function v$(){}function Aw(){screen.orientation||pn.orientation!=null&&TN()}function TN(){function gn(){switch(pn.orientation){case-90:bn.type="landscape-secondary",bn.angle=270;break;case 0:bn.type="portrait-primary",bn.angle=0;break;case 90:bn.type="landscape-primary",bn.angle=90;break;case 180:bn.type="portrait-secondary",bn.angle=180}}var bn=new mT;screen.orientation=bn,gn(),pn.addEventListener("orientationchange",function(){gn();var Cn=new Ju("change");bn.dispatchEvent(Cn)})}Op.Orientation=v$,v$.install=Aw;function mT(){hl.call(this),this.type="",this.angle=0}as(mT,hl),mT.prototype.lock=function(gn){function bn(In){return screen.lockOrientation?screen.lockOrientation(In):screen.mozLockOrientation?screen.mozLockOrientation(In):screen.msLockOrientation?screen.msLockOrientation(In):!1}var Cn=!1;switch(gn){case"natural":Cn=bn("default");break;case"any":Cn=!0,this.unlock();break;default:Cn=bn(gn)}return Cn?Promise.resolve():(gn=Error("screen.orientation.lock() is not available on this device"),gn.name="NotSupportedError",gn.code=DOMException.NOT_SUPPORTED_ERR,Promise.reject(gn))},mT.prototype.unlock=function(){screen.unlockOrientation?screen.unlockOrientation():screen.mozUnlockOrientation?screen.mozUnlockOrientation():screen.msUnlockOrientation&&screen.msUnlockOrientation()},nm(Aw);function _$(){}var E$,S$,Iw,Pw,Ow,Mw;function kN(gn,bn){try{var Cn=new T$(gn,bn);return Promise.resolve(Cn)}catch(In){return Promise.reject(In)}}function OO(gn){var bn=this.mediaKeys;return bn&&bn!=gn&&k$(bn,null),delete this.mediaKeys,(this.mediaKeys=gn)?k$(gn,this):Promise.resolve()}function MO(gn){if(gn=Pu(gn.initData),rp(gn).getUint32(0,!0)+4!=gn.byteLength)throw new RangeError("Malformed FairPlay init data");gn=Ip(gn.subarray(4),!0),gn=fp(gn);var bn=new Event("encrypted");bn.initDataType="skd",bn.initData=Vu(gn),this.dispatchEvent(bn)}Op.PatchedMediaKeysApple=_$,_$.uninstall=function(){E$&&(E$=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",S$),HTMLMediaElement.prototype.setMediaKeys=Iw,pn.MediaKeys=Pw,pn.MediaKeySystemAccess=Ow,navigator.requestMediaKeySystemAccess=Mw,S$=Mw=Iw=Ow=Pw=null,pn.shakaMediaKeysPolyfill=!1)},_$.install=function(gn){pn.HTMLVideoElement&&pn.WebKitMediaKeys&&(gn!==void 0&&gn&&(E$=!0,S$=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),Iw=HTMLMediaElement.prototype.setMediaKeys,Pw=pn.MediaKeys,Ow=pn.MediaKeySystemAccess,Mw=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=OO,pn.MediaKeys=w0,pn.MediaKeySystemAccess=T$,navigator.requestMediaKeySystemAccess=kN,pn.shakaMediaKeysPolyfill=!0)};function T$(gn,bn){if(this.keySystem=gn,gn.startsWith("com.apple.fps"))for(gn=Dn(bn),bn=gn.next();!bn.done;bn=gn.next()){var Cn=bn.value;if(Cn.persistentState=="required")bn=null;else{bn={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:Cn.initDataTypes,sessionTypes:["temporary"],label:Cn.label};var In=!1,Rn=!1;if(Cn.audioCapabilities)for(var jn=Dn(Cn.audioCapabilities),Vn=jn.next();!Vn.done;Vn=jn.next())Vn=Vn.value,Vn.contentType&&(In=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,Vn.contentType.split(";")[0])&&(bn.audioCapabilities.push(Vn),Rn=!0));if(Cn.videoCapabilities)for(Cn=Dn(Cn.videoCapabilities),Vn=Cn.next();!Vn.done;Vn=Cn.next())jn=Vn.value,jn.contentType&&(In=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,jn.contentType.split(";")[0])&&(bn.videoCapabilities.push(jn),Rn=!0));In||(Rn=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),bn=Rn?bn:null}if(bn){this.g=bn;return}}throw gn=Error("Unsupported keySystem"),gn.name="NotSupportedError",gn.code=DOMException.NOT_SUPPORTED_ERR,gn}T$.prototype.createMediaKeys=function(){var gn=new w0(this.keySystem);return Promise.resolve(gn)},T$.prototype.getConfiguration=function(){return this.g};function w0(gn){this.h=new WebKitMediaKeys(gn),this.g=new Ul}w0.prototype.createSession=function(gn){if(gn=gn||"temporary",gn!="temporary")throw new TypeError("Session type "+gn+" is unsupported on this platform.");return new gT(this.h)},w0.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function k$(gn,bn){if(gn.g.nb(),!bn)return Promise.resolve();gn.g.C(bn,"webkitneedkey",MO);try{return Gy(bn,HTMLMediaElement.HAVE_METADATA,gn.g,function(){bn.webkitSetMediaKeys(gn.h)}),Promise.resolve()}catch(Cn){return Promise.reject(Cn)}}function gT(gn){hl.call(this),this.i=null,this.l=gn,this.g=this.h=null,this.j=new Ul,this.sessionId="",this.expiration=NaN,this.closed=new bl,this.keyStatuses=new $$}as(gT,hl),Sn=gT.prototype,Sn.generateRequest=function(gn,bn){var Cn=this;this.h=new bl;try{var In=this.l.createSession("video/mp4",Pu(bn));this.i=In,this.sessionId=In.sessionId||"",this.j.C(this.i,"webkitkeymessage",function(Rn){Cn.h&&(Cn.h.resolve(),Cn.h=null),Rn=new Map().set("messageType",Cn.keyStatuses.Eb()==null?"license-request":"license-renewal").set("message",Vu(Rn.message)),Rn=new Ju("message",Rn),Cn.dispatchEvent(Rn)}),this.j.C(In,"webkitkeyadded",function(){Cn.g&&(UE(Cn,"usable"),Cn.g.resolve(),Cn.g=null)}),this.j.C(In,"webkitkeyerror",function(){var Rn=Error("EME PatchedMediaKeysApple key error");if(Rn.errorCode=Cn.i.error,Cn.h!=null)Cn.h.reject(Rn),Cn.h=null;else if(Cn.g!=null)Cn.g.reject(Rn),Cn.g=null;else switch(Cn.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:UE(Cn,"output-not-allowed");break;default:UE(Cn,"internal-error")}}),UE(this,"status-pending")}catch(Rn){this.h.reject(Rn)}return this.h},Sn.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},Sn.update=function(gn){this.g=new bl;try{this.i.update(Pu(gn))}catch(bn){this.g.reject(bn)}return this.g},Sn.close=function(){try{this.i.close(),this.closed.resolve(),this.j.nb()}catch(gn){this.closed.reject(gn)}return this.closed},Sn.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function UE(gn,bn){var Cn=gn.keyStatuses;Cn.size=bn==null?0:1,Cn.g=bn,bn=new Ju("keystatuseschange"),gn.dispatchEvent(bn)}function $$(){this.size=0,this.g=void 0}Sn=$$.prototype,Sn.Eb=function(){return this.g},Sn.forEach=function(gn){this.g&&gn(this.g,JT.value())},Sn.get=function(gn){if(this.has(gn))return this.g},Sn.has=function(gn){var bn=JT.value();return!!(this.g&&Lm(gn,bn))},Sn.entries=function(){},Sn.keys=function(){},Sn.values=function(){};function b$(){}function x$(){!pn.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||(navigator.requestMediaKeySystemAccess=Rw,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=$N,pn.MediaKeys=Nw,pn.MediaKeySystemAccess=Dw,pn.shakaMediaKeysPolyfill=!0)}function Rw(){return Promise.reject(Error("The key system specified is not supported."))}function $N(gn){return gn==null?Promise.resolve():Promise.reject(Error("MediaKeys not supported."))}Op.PatchedMediaKeysNop=b$,b$.install=x$;function Nw(){throw new TypeError("Illegal constructor.")}Nw.prototype.createSession=function(){},Nw.prototype.setServerCertificate=function(){};function Dw(){throw this.keySystem="",new TypeError("Illegal constructor.")}Dw.prototype.getConfiguration=function(){},Dw.prototype.createMediaKeys=function(){},nm(x$,-10);function yT(){}function vT(){if(!(!pn.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)kT="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=Lw,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=w$,pn.MediaKeys=ET,pn.MediaKeySystemAccess=_T,pn.shakaMediaKeysPolyfill=!0}}function C$(gn){var bn=kT;return bn?bn+gn.charAt(0).toUpperCase()+gn.slice(1):gn}function Lw(gn,bn){try{var Cn=new _T(gn,bn);return Promise.resolve(Cn)}catch(In){return Promise.reject(In)}}function w$(gn){var bn=this.mediaKeys;return bn&&bn!=gn&&Uw(bn,null),delete this.mediaKeys,(this.mediaKeys=gn)&&Uw(gn,this),Promise.resolve()}Op.PatchedMediaKeysWebkit=yT,yT.install=vT;function _T(gn,bn){this.g=this.keySystem=gn;var Cn=!1;gn=="org.w3.clearkey"&&(this.g="webkit-org.w3.clearkey",Cn=!1);var In=!1,Rn=document.getElementsByTagName("video");Rn=Rn.length?Rn[0]:document.createElement("video"),bn=Dn(bn);for(var jn=bn.next();!jn.done;jn=bn.next()){jn=jn.value;var Vn={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:jn.initDataTypes,sessionTypes:["temporary"],label:jn.label},Hn=!1;if(jn.audioCapabilities)for(var Xn=Dn(jn.audioCapabilities),ns=Xn.next();!ns.done;ns=Xn.next())ns=ns.value,ns.contentType&&(Hn=!0,Rn.canPlayType(ns.contentType.split(";")[0],this.g)&&(Vn.audioCapabilities.push(ns),In=!0));if(jn.videoCapabilities)for(Xn=Dn(jn.videoCapabilities),ns=Xn.next();!ns.done;ns=Xn.next())ns=ns.value,ns.contentType&&(Hn=!0,Rn.canPlayType(ns.contentType,this.g)&&(Vn.videoCapabilities.push(ns),In=!0));if(Hn||(In=Rn.canPlayType("video/mp4",this.g)||Rn.canPlayType("video/webm",this.g)),jn.persistentState=="required"&&(Cn?(Vn.persistentState="required",Vn.sessionTypes=["persistent-license"]):In=!1),In){this.h=Vn;return}}throw Cn="Unsupported keySystem",(gn=="org.w3.clearkey"||gn=="com.widevine.alpha")&&(Cn="None of the requested configurations were supported."),gn=Error(Cn),gn.name="NotSupportedError",gn.code=DOMException.NOT_SUPPORTED_ERR,gn}_T.prototype.createMediaKeys=function(){var gn=new ET(this.g);return Promise.resolve(gn)},_T.prototype.getConfiguration=function(){return this.h};function ET(gn){this.l=gn,this.h=null,this.g=new Ul,this.i=[],this.j=new Map}function Uw(gn,bn){gn.h=bn,gn.g.nb();var Cn=kT;bn&&(gn.g.C(bn,Cn+"needkey",function(In){var Rn=new CustomEvent("encrypted");Rn.initDataType="cenc",Rn.initData=Vu(In.initData),gn.h.dispatchEvent(Rn)}),gn.g.C(bn,Cn+"keymessage",function(In){var Rn=jw(gn,In.sessionId);Rn&&(In=new Map().set("messageType",Rn.keyStatuses.Eb()==null?"licenserequest":"licenserenewal").set("message",In.message),In=new Ju("message",In),Rn.h&&(Rn.h.resolve(),Rn.h=null),Rn.dispatchEvent(In))}),gn.g.C(bn,Cn+"keyadded",function(In){(In=jw(gn,In.sessionId))&&(TT(In,"usable"),In.g&&In.g.resolve(),In.g=null)}),gn.g.C(bn,Cn+"keyerror",function(In){var Rn=jw(gn,In.sessionId);Rn&&Rn.handleError(In)}))}ET.prototype.createSession=function(gn){if(gn=gn||"temporary",gn!="temporary"&&gn!="persistent-license")throw new TypeError("Session type "+gn+" is unsupported on this platform.");var bn=this.h||document.createElement("video");return bn.src||(bn.src="about:blank"),gn=new Fw(bn,this.l,gn),this.i.push(gn),gn},ET.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function jw(gn,bn){var Cn=gn.j.get(bn);return Cn||((Cn=gn.i.shift())?(Cn.sessionId=bn,gn.j.set(bn,Cn),Cn):null)}function Fw(gn,bn,Cn){hl.call(this),this.j=gn,this.m=!1,this.g=this.h=null,this.i=bn,this.l=Cn,this.sessionId="",this.expiration=NaN,this.closed=new bl,this.keyStatuses=new Bw}as(Fw,hl),Sn=Fw.prototype,Sn.handleError=function(gn){var bn=Error("EME v0.1b key error"),Cn=gn.errorCode;Cn.systemCode=gn.systemCode,bn.errorCode=Cn,!gn.sessionId&&this.h?(gn.systemCode==45&&(bn.message="Unsupported session type."),this.h.reject(bn),this.h=null):gn.sessionId&&this.g?(this.g.reject(bn),this.g=null):(bn=gn.systemCode,gn.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?TT(this,"output-restricted"):bn==1?TT(this,"expired"):TT(this,"internal-error"))};function A$(gn,bn,Cn){if(gn.m)return Promise.reject(Error("The session is already initialized."));gn.m=!0;try{if(gn.l=="persistent-license")if(Cn)var In=Pu(fp("LOAD_SESSION|"+Cn));else{var Rn=fp("PERSISTENT|");In=oy(Rn,bn)}else In=Pu(bn)}catch(Vn){return Promise.reject(Vn)}gn.h=new bl;var jn=C$("generateKeyRequest");try{gn.j[jn](gn.i,In)}catch(Vn){if(Vn.name!="InvalidStateError")return gn.h=null,Promise.reject(Vn);new Hu(function(){try{gn.j[jn](gn.i,In)}catch(Hn){gn.h.reject(Hn),gn.h=null}}).O(.01)}return gn.h}function ST(gn,bn,Cn){if(gn.g)gn.g.then(function(){return ST(gn,bn,Cn)}).catch(function(){return ST(gn,bn,Cn)});else{if(gn.g=bn,gn.i=="webkit-org.w3.clearkey"){var In=Ou(Cn),Rn=JSON.parse(In);Rn.keys[0].kty!="oct"&&(gn.g.reject(Error("Response is not a valid JSON Web Key Set.")),gn.g=null),In=mm(Rn.keys[0].k),Rn=mm(Rn.keys[0].kid)}else In=Pu(Cn),Rn=null;var jn=C$("addKey");try{gn.j[jn](gn.i,In,Rn,gn.sessionId)}catch(Vn){gn.g.reject(Vn),gn.g=null}}}function TT(gn,bn){var Cn=gn.keyStatuses;Cn.size=bn==null?0:1,Cn.g=bn,bn=new Ju("keystatuseschange"),gn.dispatchEvent(bn)}Sn.generateRequest=function(gn,bn){return A$(this,bn,null)},Sn.load=function(gn){return this.l=="persistent-license"?A$(this,null,gn):Promise.reject(Error("Not a persistent session."))},Sn.update=function(gn){var bn=new bl;return ST(this,bn,gn),bn},Sn.close=function(){if(this.l!="persistent-license"){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var gn=C$("cancelKeyRequest");try{this.j[gn](this.i,this.sessionId)}catch{}}return this.closed.resolve(),this.closed},Sn.remove=function(){return this.l!="persistent-license"?Promise.reject(Error("Not a persistent session.")):this.close()};function Bw(){this.size=0,this.g=void 0}Sn=Bw.prototype,Sn.Eb=function(){return this.g},Sn.forEach=function(gn){this.g&&gn(this.g,JT.value())},Sn.get=function(gn){if(this.has(gn))return this.g},Sn.has=function(gn){var bn=JT.value();return!!(this.g&&Lm(gn,bn))},Sn.entries=function(){},Sn.keys=function(){},Sn.values=function(){};var kT="";nm(vT);function RO(){}function NO(){if(pn.HTMLVideoElement){var gn=HTMLVideoElement.prototype;gn.requestPictureInPicture&&document.exitPictureInPicture||!gn.webkitSupportsPresentationMode||(document.pictureInPictureEnabled=!0,document.pictureInPictureElement=null,gn.requestPictureInPicture=P$,Object.defineProperty(gn,"disablePictureInPicture",{get:Vw,set:Gw,enumerable:!0,configurable:!0}),document.exitPictureInPicture=DO,document.addEventListener("webkitpresentationmodechanged",I$,!0))}}function I$(gn){if(gn=gn.target,gn.webkitPresentationMode=="picture-in-picture"){document.pictureInPictureElement=gn;var bn=new Event("enterpictureinpicture");gn.dispatchEvent(bn)}else document.pictureInPictureElement==gn&&(document.pictureInPictureElement=null),bn=new Event("leavepictureinpicture"),gn.dispatchEvent(bn)}function P$(){return this.webkitSupportsPresentationMode("picture-in-picture")?(this.webkitSetPresentationMode("picture-in-picture"),document.pictureInPictureElement=this,Promise.resolve()):Promise.reject(Error("PiP not allowed by video element"))}function DO(){var gn=document.pictureInPictureElement;return gn?(gn.webkitSetPresentationMode("inline"),document.pictureInPictureElement=null,Promise.resolve()):Promise.reject(Error("No picture in picture element found"))}function Vw(){return this.hasAttribute("disablePictureInPicture")?!0:!this.webkitSupportsPresentationMode("picture-in-picture")}function Gw(gn){gn?this.setAttribute("disablePictureInPicture",""):this.removeAttribute("disablePictureInPicture")}Op.PiPWebkit=RO,RO.install=NO,nm(NO);function zw(){}function O$(){pn.crypto&&("randomUUID"in pn.crypto||(pn.crypto.randomUUID=M$))}function M$(){var gn=URL.createObjectURL(new Blob),bn=gn.toString();return URL.revokeObjectURL(gn),bn.substr(bn.lastIndexOf("/")+1)}Op.RandomUUID=zw,zw.install=O$,nm(O$);function Hw(){}function R$(){navigator.storage&&navigator.storage.estimate||!navigator.webkitTemporaryStorage||!navigator.webkitTemporaryStorage.queryUsageAndQuota||("storage"in navigator||(navigator.storage={}),navigator.storage.estimate=LO)}function LO(){return new Promise(function(gn,bn){navigator.webkitTemporaryStorage.queryUsageAndQuota(function(Cn,In){gn({usage:Cn,quota:In})},bn)})}Op.StorageEstimate=Hw,Hw.install=R$,nm(R$);function Kw(){}function UO(){var gn=Symbol.prototype;"description"in gn||Object.defineProperty(gn,"description",{get:bN})}function bN(){var gn=/\((.*)\)/.exec(this.toString());return gn?gn[1]:void 0}Op.Symbol=Kw,Kw.install=UO,nm(UO);function jO(){}function FO(){if(pn.HTMLMediaElement){var gn=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var bn=gn.apply(this);return bn&&bn.catch(function(){}),bn}}}Op.VideoPlayPromise=jO,jO.install=FO,nm(FO);function BO(){}function Ww(){if(pn.HTMLVideoElement){var gn=HTMLVideoElement.prototype;!gn.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in gn||Oy())&&(gn.getVideoPlaybackQuality=VO)}}function VO(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}Op.VideoPlaybackQuality=BO,BO.install=Ww,nm(Ww);function GO(){}function qw(){if(!pn.VTTCue&&pn.TextTrackCue){var gn=null,bn=TextTrackCue.length;if(bn==3)gn=N$;else if(bn==6)gn=xN;else{try{var Cn=!!N$(1,2,"")}catch{Cn=!1}Cn&&(gn=N$)}gn&&(pn.VTTCue=function(In,Rn,jn){return gn(In,Rn,jn)})}}function N$(gn,bn,Cn){return new pn.TextTrackCue(gn,bn,Cn)}function xN(gn,bn,Cn){return new pn.TextTrackCue(gn+"-"+bn+"-"+Cn,gn,bn,Cn)}Op.VTTCue=GO,GO.install=qw,nm(qw);function Ty(){}Ty.prototype.parseInit=function(){},Ty.prototype.setSequenceMode=function(){},Ty.prototype.parseMedia=function(gn,bn){var Cn=null,In=[];gn=Ou(gn).split(/\r?\n/),gn=Dn(gn);for(var Rn=gn.next();!Rn.done;Rn=gn.next())if((Rn=Rn.value)&&!/^\s+$/.test(Rn)&&(Rn=zO.exec(Rn))){var jn=CN.exec(Rn[1]);jn=60*parseInt(jn[1],10)+parseFloat(jn[2].replace(",",".")),Rn=new Cu(jn,bn.segmentEnd?bn.segmentEnd:jn+2,Rn[2]),Cn&&(Cn.endTime=jn,In.push(Cn)),Cn=Rn}return Cn&&In.push(Cn),In},Ys("shaka.text.LrcTextParser",Ty),Ty.prototype.parseMedia=Ty.prototype.parseMedia,Ty.prototype.setSequenceMode=Ty.prototype.setSequenceMode,Ty.prototype.parseInit=Ty.prototype.parseInit;var zO=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,CN=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;_c["application/x-subtitle-lrc"]=function(){return new Ty};function Jm(){}Jm.prototype.parseInit=function(){},Jm.prototype.setSequenceMode=function(){},Jm.prototype.parseMedia=function(gn,bn){var Cn=Ou(gn);if(gn=[],Cn=="")return gn;var In=K0(Cn,"tt");if(!In)throw new Bs(2,2,2005,"Failed to parse TTML.");if(Cn=In.getElementsByTagName("body")[0],!Cn)return[];var Rn=ov(In,A0,"frameRate"),jn=ov(In,A0,"subFrameRate"),Vn=ov(In,A0,"frameRateMultiplier"),Hn=ov(In,A0,"tickRate"),Xn=ov(In,A0,"cellResolution"),ns=In.getAttribute("xml:space")||"default",us=ov(In,B$,"extent");if(ns!="default"&&ns!="preserve")throw new Bs(2,2,2005,"Invalid xml:space value: "+ns);ns=ns=="default",Rn=new WO(Rn,jn,Vn,Hn),Xn=Xn&&(Xn=/^(\d+) (\d+)$/.exec(Xn))?{columns:parseInt(Xn[1],10),rows:parseInt(Xn[2],10)}:null,jn=(jn=In.getElementsByTagName("metadata")[0])?uS(jn):[],Vn=Array.from(In.getElementsByTagName("style")),In=Array.from(In.getElementsByTagName("region")),Hn=[];for(var ps=Dn(In),fs=ps.next();!fs.done;fs=ps.next()){var vs=fs.value;fs=new Zv;var Is=vs.getAttribute("xml:id");if(Is){fs.id=Is;var Ls=null;us&&(Ls=Zw.exec(us)||jE.exec(us)),Is=Ls?Number(Ls[1]):null,Ls=Ls?Number(Ls[2]):null;var Cs,Ms;(Cs=$T(vs,Vn,"extent"))&&(Cs=(Ms=Zw.exec(Cs))||jE.exec(Cs),Cs!=null&&(fs.width=Number(Cs[1]),fs.height=Number(Cs[2]),Ms||(Is!=null&&(fs.width=100*fs.width/Is),Ls!=null&&(fs.height=100*fs.height/Ls)),fs.widthUnits=Ms||Is!=null?Zl:0,fs.heightUnits=Ms||Ls!=null?Zl:0)),(vs=$T(vs,Vn,"origin"))&&(Cs=(Ms=Zw.exec(vs))||jE.exec(vs),Cs!=null&&(fs.viewportAnchorX=Number(Cs[1]),fs.viewportAnchorY=Number(Cs[2]),Ms||(Ls!=null&&(fs.viewportAnchorY=100*fs.viewportAnchorY/Ls),Is!=null&&(fs.viewportAnchorX=100*fs.viewportAnchorX/Is)),fs.viewportAnchorUnits=Ms||Is!=null?Zl:0))}else fs=null;fs&&Hn.push(fs)}if(Hl(Cn,"p").length)throw new Bs(2,2,2001,"<p> can only be inside <div> in TTML");for(us=Dn(Hl(Cn,"div")),ps=us.next();!ps.done;ps=us.next())if(Hl(ps.value,"span").length)throw new Bs(2,2,2001,"<span> can only be inside <p> in TTML");return(bn=Yw(Cn,bn,Rn,jn,Vn,In,Hn,ns,Xn,null,!1))&&(bn.backgroundColor||(bn.backgroundColor="transparent"),gn.push(bn)),gn};function Yw(gn,bn,Cn,In,Rn,jn,Vn,Hn,Xn,ns,us){var ps=gn.parentNode;if(gn.nodeType==Node.COMMENT_NODE)return null;if(gn.nodeType==Node.TEXT_NODE){if(!us)return null;var fs=document.createElement("span");fs.textContent=gn.textContent}else fs=gn;for(var vs=null,Is=Dn(FE),Ls=Is.next();!Ls.done&&!(vs=U$(fs,"backgroundImage",In,"#",Ls.value)[0]);Ls=Is.next());if(Is=us,(gn.nodeName=="p"||vs)&&(us=!0),Hn=(fs.getAttribute("xml:space")||(Hn?"default":"preserve"))=="default",Ls=Array.from(fs.childNodes).every(function(Ws){return Ws.nodeType==Node.TEXT_NODE}),gn=[],!Ls)for(var Cs=Dn(fs.childNodes),Ms=Cs.next();!Ms.done;Ms=Cs.next())(Ms=Yw(Ms.value,bn,Cn,In,Rn,jn,Vn,Hn,Xn,fs,us))&&gn.push(Ms);In=ns!=null,Cs=/\S/.test(fs.textContent);var Zs=fs.hasAttribute("begin")||fs.hasAttribute("end")||fs.hasAttribute("dur");if(!(Zs||Cs||fs.tagName=="br"||gn.length!=0||In&&!Hn))return null;for(Ms=KO(fs,Cn),Cs=Ms.start,Ms=Ms.end;ps&&ps.nodeType==Node.ELEMENT_NODE&&ps.tagName!="tt";)Ms=Yy(ps,Cn,Cs,Ms),Cs=Ms.start,Ms=Ms.end,ps=ps.parentNode;if(Cs==null&&(Cs=0),Cs+=bn.periodStart,Ms=Ms==null?1/0:Ms+bn.periodStart,Cs=Math.max(Cs,bn.segmentStart),Ms=Math.min(Ms,bn.segmentEnd),!Zs&&0<gn.length)for(Cs=1/0,Ms=0,bn=Dn(gn),Cn=bn.next();!Cn.done;Cn=bn.next())Cn=Cn.value,Cs=Math.min(Cs,Cn.startTime),Ms=Math.max(Ms,Cn.endTime);if(fs.tagName=="br")return Rn=new Cu(Cs,Ms,""),Rn.lineBreak=!0,Rn;if(bn="",Ls&&(bn=fs.textContent,Hn&&(bn=bn.trim(),bn=bn.replace(/\s+/g," "))),bn=new Cu(Cs,Ms,bn),bn.nestedCues=gn,us||(bn.isContainer=!0),Xn&&(bn.cellResolution=Xn),Xn=U$(fs,"region",jn,"")[0],fs.hasAttribute("region")&&Xn&&Xn.getAttribute("xml:id")){var Fs=Xn.getAttribute("xml:id");bn.region=Vn.filter(function(Ws){return Ws.id==Fs})[0]}return Vn=Xn,ns&&In&&!fs.getAttribute("region")&&!fs.getAttribute("style")&&(Vn=U$(ns,"region",jn,"")[0]),HO(bn,fs,Vn,vs,Rn,Is,gn.length==0),bn}function HO(gn,bn,Cn,In,Rn,jn,Vn){if(jn=jn||Vn,im(bn,Cn,Rn,"direction",jn)=="rtl"&&(gn.direction="rtl"),Vn=im(bn,Cn,Rn,"writingMode",jn),Vn=="tb"||Vn=="tblr"?gn.writingMode="vertical-lr":Vn=="tbrl"?gn.writingMode="vertical-rl":Vn=="rltb"||Vn=="rl"?gn.direction="rtl":Vn&&(gn.direction=zE),(Vn=im(bn,Cn,Rn,"textAlign",!0))?(gn.positionAlign=wN[Vn],gn.lineAlign=tA[Vn],gn.textAlign=wy[Vn.toUpperCase()]):gn.textAlign=Qp,(Vn=im(bn,Cn,Rn,"displayAlign",!0))&&(gn.displayAlign=ny[Vn.toUpperCase()]),(Vn=im(bn,Cn,Rn,"color",jn))&&(gn.color=Vn),(Vn=im(bn,Cn,Rn,"backgroundColor",jn))&&(gn.backgroundColor=Vn),(Vn=im(bn,Cn,Rn,"border",jn))&&(gn.border=Vn),Vn=im(bn,Cn,Rn,"fontFamily",jn))switch(Vn){case"monospaceSerif":gn.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":gn.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":gn.fontFamily="sans-serif";break;case"monospaceSansSerif":gn.fontFamily="Consolas,monospace";break;case"proportionalSerif":gn.fontFamily="serif";break;default:gn.fontFamily=Vn}if((Vn=im(bn,Cn,Rn,"fontWeight",jn))&&Vn=="bold"&&(gn.fontWeight=700),Vn=im(bn,Cn,Rn,"wrapOption",jn),gn.wrapLine=!(Vn&&Vn=="noWrap"),(Vn=im(bn,Cn,Rn,"lineHeight",jn))&&Vn.match(gp)&&(gn.lineHeight=Vn),(Vn=im(bn,Cn,Rn,"fontSize",jn))&&(Vn.match(gp)||Vn.match(qO))&&(gn.fontSize=Vn),(Vn=im(bn,Cn,Rn,"fontStyle",jn))&&(gn.fontStyle=O0[Vn.toUpperCase()]),In){Vn=In.getAttribute("imageType")||In.getAttribute("imagetype");var Hn=In.getAttribute("encoding");In=In.textContent.trim(),Vn=="PNG"&&Hn=="Base64"&&In&&(gn.backgroundImage="data:image/png;base64,"+In)}(In=im(bn,Cn,Rn,"textOutline",jn))&&(In=In.split(" "),In[0].match(gp)?gn.textStrokeColor=gn.color:(gn.textStrokeColor=In[0],In.shift()),In[0]&&In[0].match(gp)?gn.textStrokeWidth=In[0]:gn.textStrokeColor=""),(In=im(bn,Cn,Rn,"letterSpacing",jn))&&In.match(gp)&&(gn.letterSpacing=In),(In=im(bn,Cn,Rn,"linePadding",jn))&&In.match(gp)&&(gn.linePadding=In),(jn=im(bn,Cn,Rn,"opacity",jn))&&(gn.opacity=parseFloat(jn)),(Cn=$T(Cn,Rn,"textDecoration"))&&Xw(gn,Cn),(bn=D$(bn,Rn,"textDecoration"))&&Xw(gn,bn)}function Xw(gn,bn){bn=Dn(bn.split(" "));for(var Cn=bn.next();!Cn.done;Cn=bn.next())switch(Cn.value){case"underline":gn.textDecoration.includes("underline")||gn.textDecoration.push("underline");break;case"noUnderline":gn.textDecoration.includes("underline")&&pl(gn.textDecoration,"underline");break;case"lineThrough":gn.textDecoration.includes("lineThrough")||gn.textDecoration.push("lineThrough");break;case"noLineThrough":gn.textDecoration.includes("lineThrough")&&pl(gn.textDecoration,"lineThrough");break;case"overline":gn.textDecoration.includes("overline")||gn.textDecoration.push("overline");break;case"noOverline":gn.textDecoration.includes("overline")&&pl(gn.textDecoration,"overline")}}function im(gn,bn,Cn,In,Rn){return Rn=Rn===void 0?!0:Rn,(gn=D$(gn,Cn,In))?gn:Rn?$T(bn,Cn,In):null}function $T(gn,bn,Cn){if(!gn)return null;var In=ov(gn,B$,Cn);return In||L$(gn,bn,Cn)}function D$(gn,bn,Cn){var In=ov(gn,B$,Cn);return In||L$(gn,bn,Cn)}function L$(gn,bn,Cn){gn=U$(gn,"style",bn,"");for(var In=null,Rn=0;Rn<gn.length;Rn++){var jn=l_(gn[Rn],"urn:ebu:tt:style",Cn);jn||(jn=ov(gn[Rn],B$,Cn)),jn||(jn=D$(gn[Rn],bn,Cn)),jn&&(In=jn)}return In}function U$(gn,bn,Cn,In,Rn){var jn=[];if(!gn||1>Cn.length)return jn;var Vn=gn;for(gn=null;Vn&&!(gn=Rn?l_(Vn,Rn,bn):Vn.getAttribute(bn))&&(Vn=Vn.parentNode,Vn instanceof Element););if(bn=gn){for(bn=Dn(bn.split(" ")),Rn=bn.next();!Rn.done;Rn=bn.next())for(Rn=Rn.value,gn=Dn(Cn),Vn=gn.next();!Vn.done;Vn=gn.next())if(Vn=Vn.value,In+Vn.getAttribute("xml:id")==Rn){jn.push(Vn);break}}return jn}function Yy(gn,bn,Cn,In){return gn=KO(gn,bn),Cn==null?Cn=gn.start:gn.start!=null&&(Cn+=gn.start),In==null?In=gn.end:gn.start!=null&&(In+=gn.start),{start:Cn,end:In}}function KO(gn,bn){var Cn=Qw(gn.getAttribute("begin"),bn),In=Qw(gn.getAttribute("end"),bn);return gn=Qw(gn.getAttribute("dur"),bn),In==null&&gn!=null&&(In=Cn+gn),{start:Cn,end:In}}function Qw(gn,bn){var Cn=null;if(j$.test(gn)){gn=j$.exec(gn),Cn=Number(gn[1]);var In=Number(gn[2]),Rn=Number(gn[3]),jn=Number(gn[4]);jn+=(Number(gn[5])||0)/bn.h,Rn+=jn/bn.frameRate,Cn=Rn+60*In+3600*Cn}else if(Jw.test(gn))Cn=Mm(Jw,gn);else if(bT.test(gn))Cn=Mm(bT,gn);else if(YO.test(gn))gn=YO.exec(gn),Cn=Number(gn[1])/bn.frameRate;else if(eA.test(gn))gn=eA.exec(gn),Cn=Number(gn[1])/bn.g;else if(F$.test(gn))Cn=Mm(F$,gn);else if(gn)throw new Bs(2,2,2001,"Could not parse cue time range in TTML");return Cn}function Mm(gn,bn){return gn=gn.exec(bn),gn==null||gn[0]==""?null:(Number(gn[4])||0)/1e3+(Number(gn[3])||0)+60*(Number(gn[2])||0)+3600*(Number(gn[1])||0)}Ys("shaka.text.TtmlTextParser",Jm),Jm.prototype.parseMedia=Jm.prototype.parseMedia,Jm.prototype.setSequenceMode=Jm.prototype.setSequenceMode,Jm.prototype.parseInit=Jm.prototype.parseInit;function WO(gn,bn,Cn,In){this.frameRate=Number(gn)||30,this.h=Number(bn)||1,this.g=Number(In),this.g==0&&(this.g=gn?this.frameRate*this.h:1),Cn&&(gn=/^(\d+) (\d+)$/g.exec(Cn))&&(this.frameRate*=Number(gn[1])/Number(gn[2]))}var Zw=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,qO=/^(\d{1,2}(?:\.\d+)?|100)%$/,gp=/^(\d+px|\d+em|\d*\.?\d+c)$/,jE=/^(\d+)px (\d+)px$/,j$=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,Jw=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,bT=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d{2,})$/,YO=/^(\d*(?:\.\d*)?)f$/,eA=/^(\d*(?:\.\d*)?)t$/,F$=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),tA={left:kv,center:"center",right:"end",start:kv,end:"end"},wN={left:"line-left",center:"center",right:"line-right"},A0=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],B$=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],FE=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];_c["application/ttml+xml"]=function(){return new Jm};function dm(){this.g=new Jm}dm.prototype.parseInit=function(gn){var bn=!1;if(new Rl().box("moov",Gl).box("trak",Gl).box("mdia",Gl).box("minf",Gl).box("stbl",Gl).R("stsd",Mv).box("stpp",function(Cn){bn=!0,Cn.parser.stop()}).parse(gn),!bn)throw new Bs(2,2,2007)},dm.prototype.setSequenceMode=function(){},dm.prototype.parseMedia=function(gn,bn){var Cn=this,In=!1,Rn=[];if(new Rl().box("mdat",B0(function(jn){In=!0,Rn=Rn.concat(Cn.g.parseMedia(jn,bn))})).parse(gn,!1),!In)throw new Bs(2,2,2007);return Rn},Ys("shaka.text.Mp4TtmlParser",dm),dm.prototype.parseMedia=dm.prototype.parseMedia,dm.prototype.setSequenceMode=dm.prototype.setSequenceMode,dm.prototype.parseInit=dm.prototype.parseInit,_c['application/mp4; codecs="stpp"']=function(){return new dm},_c['application/mp4; codecs="stpp.ttml"']=function(){return new dm},_c['application/mp4; codecs="stpp.ttml.im1t"']=function(){return new dm},_c['application/mp4; codecs="stpp.TTML.im1t"']=function(){return new dm};function ym(){this.g=!1}ym.prototype.parseInit=function(){},ym.prototype.setSequenceMode=function(gn){this.g=gn},ym.prototype.parseMedia=function(gn,bn){gn=Ou(gn),gn=gn.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`);var Cn=gn.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(Cn[0]))throw new Bs(2,2,2e3);if(gn=bn.vttOffset,Cn[0].includes("X-TIMESTAMP-MAP")&&this.g){var In=Cn[0].match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),Rn=Cn[0].match(/MPEGTS:(\d+)/m);if(In&&Rn){if(gn=V$(new k_(In[1])),gn==null)throw new Bs(2,2,2e3);for(Rn=Number(Rn[1]),In=bn.segmentStart-bn.periodStart;95443.7176888889<=In;)In-=95443.7176888889,Rn+=8589934592;gn=bn.periodStart+Rn/9e4-gn}}for(bn=[],Rn=Dn(Cn[0].split(`
`)),In=Rn.next();!In.done;In=Rn.next())if(In=In.value,/^Region:/.test(In)){In=new k_(In);var jn=new Zv;jl(In),$_(In);for(var Vn=jl(In);Vn;){var Hn=jn,Xn=Vn;(Vn=/^id=(.*)$/.exec(Xn))?Hn.id=Vn[1]:(Vn=/^width=(\d{1,2}|100)%$/.exec(Xn))?Hn.width=Number(Vn[1]):(Vn=/^lines=(\d+)$/.exec(Xn))?(Hn.height=Number(Vn[1]),Hn.heightUnits=2):(Vn=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(Xn))?(Hn.regionAnchorX=Number(Vn[1]),Hn.regionAnchorY=Number(Vn[2])):(Vn=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(Xn))?(Hn.viewportAnchorX=Number(Vn[1]),Hn.viewportAnchorY=Number(Vn[2])):/^scroll=up$/.exec(Xn)&&(Hn.scroll="up"),$_(In),Vn=jl(In)}bn.push(jn)}for(Rn=new Map,rA(Rn),In=[],Cn=Dn(Cn.slice(1)),jn=Cn.next();!jn.done;jn=Cn.next()){if(jn=jn.value.split(`
`),(jn.length!=1||jn[0])&&!/^NOTE($|[ \t])/.test(jn[0])&&jn[0]=="STYLE"){for(Hn=[],Vn=-1,Xn=1;Xn<jn.length;Xn++)jn[Xn].includes("::cue")&&(Hn.push([]),Vn=Hn.length-1),Vn!=-1&&(Hn[Vn].push(jn[Xn]),jn[Xn].includes("}")&&(Vn=-1));for(Hn=Dn(Hn),Vn=Hn.next();!Vn.done;Vn=Hn.next()){var ns=Vn.value;Vn="global",(Xn=ns[0].match(/\((.*)\)/))&&(Vn=Xn.pop()),Xn=ns.slice(1,-1),ns[0].includes("}")&&(ns=/\{(.*?)\}/.exec(ns[0]))&&(Xn=ns[1].split(";")),(ns=Rn.get(Vn))||(ns=new Cu(0,0,""));for(var us=!1,ps=0;ps<Xn.length;ps++){var fs=/^\s*([^:]+):\s*(.*)/.exec(Xn[ps]);if(fs){var vs=fs[2].trim().replace(";","");switch(fs[1].trim()){case"background-color":case"background":us=!0,ns.backgroundColor=vs;break;case"color":us=!0,ns.color=vs;break;case"font-family":us=!0,ns.fontFamily=vs;break;case"font-size":us=!0,ns.fontSize=vs;break;case"font-weight":(700<=parseInt(vs,10)||vs=="bold")&&(us=!0,ns.fontWeight=700);break;case"font-style":switch(vs){case"normal":us=!0,ns.fontStyle=zs;break;case"italic":us=!0,ns.fontStyle="italic";break;case"oblique":us=!0,ns.fontStyle="oblique"}break;case"opacity":us=!0,ns.opacity=parseFloat(vs);break;case"text-shadow":us=!0,ns.textShadow=vs;break;case"white-space":us=!0,ns.wrapLine=vs!="noWrap"}}}us&&Rn.set(Vn,ns)}}if(us=gn,jn.length==1&&!jn[0]||/^NOTE($|[ \t])/.test(jn[0])||jn[0]=="STYLE"||jn[0]=="REGION")jn=null;else{if(Hn=null,jn[0].includes("-->")||(Hn=jn[0],jn.splice(0,1)),Vn=new k_(jn[0]),Xn=V$(Vn),ps=Lu(Vn,/[ \t]+--\x3e[ \t]+/g),ns=V$(Vn),Xn==null||ps==null||ns==null)throw new Bs(2,2,2001,"Could not parse cue time range in WebVTT");for(Xn+=us,ns+=us,us=jn.slice(1).join(`
`).trim(),Rn.has("global")?(jn=Rn.get("global").clone(),jn.startTime=Xn,jn.endTime=ns,jn.payload=""):jn=new Cu(Xn,ns,""),nA(us,jn,Rn),$_(Vn),Xn=jl(Vn);Xn;)aA(jn,Xn,bn),$_(Vn),Xn=jl(Vn);Hn!=null&&(jn.id=Hn)}jn&&In.push(jn)}return In};function rA(gn){for(var bn=Dn(Object.entries(Iy)),Cn=bn.next();!Cn.done;Cn=bn.next()){var In=Dn(Cn.value);Cn=In.next().value,In=In.next().value;var Rn=new Cu(0,0,"");Rn.color=In,gn.set("."+Cn,Rn)}for(bn=Dn(Object.entries(Py)),Cn=bn.next();!Cn.done;Cn=bn.next())In=Dn(Cn.value),Cn=In.next().value,In=In.next().value,Rn=new Cu(0,0,""),Rn.backgroundColor=In,gn.set("."+Cn,Rn)}function nA(gn,bn,Cn){Cn.size===0&&rA(Cn);e:{var In=gn;gn=[];for(var Rn=-1,jn="",Vn=0;Vn<In.length;Vn++)if(In[Vn]==="/"&&0<Vn&&In[Vn-1]==="<"){var Hn=In.indexOf(">",Vn);if(Hn<=Vn){gn=In;break e}if((Hn=In.substring(Vn+1,Hn))&&Hn==="c"){var Xn=gn.pop();Xn?Xn===Hn?(jn+="/"+Hn+">",Vn+=Hn.length+1):Xn.startsWith("c.")?(Vn+=Hn.length+1,jn+="/"+Xn+">"):jn+=In[Vn]:jn+=In[Vn]}else jn+=In[Vn]}else In[Vn]==="<"?(Rn=Vn+1,In[Rn]!="c"&&(Rn=-1)):In[Vn]===">"&&0<Rn&&(gn.push(In.substr(Rn,Vn-Rn)),Rn=-1),jn+=In[Vn];gn=jn}for(In=[],jn=-1,Rn=0;Rn<gn.length;Rn++)gn[Rn]==="<"?jn=Rn+1:gn[Rn]===">"&&0<jn&&(jn=gn.substr(jn,Rn-jn),jn.match(CT)&&In.push(jn),jn=-1);for(In=Dn(In),Rn=In.next();!Rn.done;Rn=In.next())Rn=Rn.value,gn=gn.replace("<"+Rn+">",'<div time="'+Rn+'">'),gn+="</div>";e:{for(Rn=gn,jn=[],Vn=-1,In="",gn=!1,Hn=0;Hn<Rn.length;Hn++)if(Rn[Hn]==="/"){if(Xn=Rn.indexOf(">",Hn),Xn===-1){gn=Rn;break e}if((Xn=Rn.substring(Hn+1,Xn))&&Xn=="v"){gn=!0;var ns=null;if(jn.length&&(ns=jn[jn.length-1]),ns){if(ns===Xn)In+="/"+Xn+">";else{if(!ns.startsWith("v")){In+=Rn[Hn];continue}In+="/"+ns+">"}Hn+=Xn.length+1}else In+=Rn[Hn]}else In+=Rn[Hn]}else Rn[Hn]==="<"?(Vn=Hn+1,Rn[Vn]!="v"&&(Vn=-1)):Rn[Hn]===">"&&0<Vn&&(jn.push(Rn.substr(Vn,Hn-Vn)),Vn=-1),In+=Rn[Hn];for(Rn=Dn(jn),jn=Rn.next();!jn.done;jn=Rn.next())jn=jn.value,Vn=jn.replace(" ",".voice-"),In=In.replace("<"+jn+">","<"+Vn+">"),In=In.replace("</"+jn+">","</"+Vn+">"),gn||(In+="</"+Vn+">");gn=In}if(Rn=K0("<span>"+gn+"</span>","span")){if(In=[],Rn=Rn.childNodes,Rn.length==1&&(jn=Rn[0],jn.nodeType==Node.TEXT_NODE||jn.nodeType==Node.CDATA_SECTION_NODE)){bn.payload=I0(gn);return}for(gn=Dn(Rn),Rn=gn.next();!Rn.done;Rn=gn.next())iA(Rn.value,bn,In,Cn);bn.nestedCues=In}else bn.payload=I0(gn)}function xT(gn,bn){return gn&&0<gn.length?gn:bn}function iA(gn,bn,Cn,In){var Rn=bn.clone();if(gn.nodeType===Node.ELEMENT_NODE&&gn.nodeName)for(var jn=Dn(gn.nodeName.split(/(?=[ .])+/g)),Vn=jn.next();!Vn.done;Vn=jn.next()){var Hn=Vn=Vn.value;if(Hn.startsWith(".voice-")){var Xn=Hn.split("-").pop();Hn='v[voice="'+Xn+'"]',In.has(Hn)||(Hn="v[voice="+Xn+"]")}switch(In.has(Hn)&&(Hn=In.get(Hn))&&(Rn.backgroundColor=xT(Hn.backgroundColor,Rn.backgroundColor),Rn.color=xT(Hn.color,Rn.color),Rn.fontFamily=xT(Hn.fontFamily,Rn.fontFamily),Rn.fontSize=xT(Hn.fontSize,Rn.fontSize),Rn.fontWeight=Hn.fontWeight,Rn.fontStyle=Hn.fontStyle,Rn.opacity=Hn.opacity,Rn.wrapLine=Hn.wrapLine),Vn){case"br":Vn=bn.clone(),Vn.lineBreak=!0,Cn.push(Vn);break;case"b":Rn.fontWeight=700;break;case"i":Rn.fontStyle="italic";break;case"u":Rn.textDecoration.push("underline");break;case"div":(Vn=gn.getAttribute("time"))&&(Vn=V$(new k_(Vn)))&&(Rn.startTime=Vn)}}if(lS(gn))for(jn=!0,In=Dn(gn.textContent.split(`
`)),gn=In.next();!gn.done;gn=In.next())gn=gn.value,jn||(jn=bn.clone(),jn.lineBreak=!0,Cn.push(jn)),0<gn.length&&(jn=Rn.clone(),jn.payload=I0(gn),Cn.push(jn)),jn=!1;else for(bn=Dn(gn.childNodes),gn=bn.next();!gn.done;gn=bn.next())iA(gn.value,Rn,Cn,In)}function aA(gn,bn,Cn){var In;(In=/^align:(start|middle|center|end|left|right)$/.exec(bn))?(bn=In[1],bn=="middle"?gn.textAlign=Qp:gn.textAlign=wy[bn.toUpperCase()]):(In=/^vertical:(lr|rl)$/.exec(bn))?gn.writingMode=In[1]=="lr"?"vertical-lr":"vertical-rl":(In=/^size:([\d.]+)%$/.exec(bn))?gn.size=Number(In[1]):(In=/^position:([\d.]+)%(?:,(line-left|line-right|center|start|end))?$/.exec(bn))?(gn.position=Number(In[1]),In[2]&&(bn=In[2],gn.positionAlign=bn=="line-left"||bn=="start"?"line-left":bn=="line-right"||bn=="end"?"line-right":"center")):(In=/^region:(.*)$/.exec(bn))?(bn=AN(Cn,In[1]))&&(gn.region=bn):(Cn=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(bn))?(gn.lineInterpretation=1,gn.line=Number(Cn[1]),Cn[2]&&(gn.lineAlign=KE[Cn[2].toUpperCase()])):(Cn=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(bn))&&(gn.lineInterpretation=HE,gn.line=Number(Cn[1]),Cn[2]&&(gn.lineAlign=KE[Cn[2].toUpperCase()]))}function AN(gn,bn){return gn=gn.filter(function(Cn){return Cn.id==bn}),gn.length?gn[0]:null}function V$(gn){if(gn=Lu(gn,CT),gn==null)return null;var bn=Number(gn[2]),Cn=Number(gn[3]);return 59<bn||59<Cn?null:Number(gn[4])/1e3+Cn+60*bn+3600*(Number(gn[1])||0)}function I0(gn){var bn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},Cn=/&(?:amp|lt|gt|quot|#(0+)?39|nbsp|lrm|rlm);/g,In=RegExp(Cn.source);return gn&&In.test(gn)?gn.replace(Cn,function(Rn){return bn[Rn]||"'"}):gn||""}Ys("shaka.text.VttTextParser",ym),ym.prototype.parseMedia=ym.prototype.parseMedia,ym.prototype.setSequenceMode=ym.prototype.setSequenceMode,ym.prototype.parseInit=ym.prototype.parseInit;var CT=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;_c["text/vtt"]=function(){return new ym},_c['text/vtt; codecs="vtt"']=function(){return new ym},_c['text/vtt; codecs="wvtt"']=function(){return new ym};function Xy(){this.g=null}Xy.prototype.parseInit=function(gn){var bn=this,Cn=!1;if(new Rl().box("moov",Gl).box("trak",Gl).box("mdia",Gl).R("mdhd",function(In){In=ES(In.reader,In.version),bn.g=In.timescale}).box("minf",Gl).box("stbl",Gl).R("stsd",Mv).box("wvtt",function(){Cn=!0}).parse(gn),!this.g)throw new Bs(2,2,2008);if(!Cn)throw new Bs(2,2,2008)},Xy.prototype.setSequenceMode=function(){},Xy.prototype.parseMedia=function(gn,bn){if(!gn.length)return[];if(!this.g)throw new Bs(2,2,2008);var Cn=0,In=[],Rn,jn=[],Vn=!1,Hn=!1,Xn=!1,ns=null;if(new Rl().box("moof",Gl).box("traf",Gl).R("tfdt",function(Fs){Vn=!0,Cn=JA(Fs.reader,Fs.version).we}).R("tfhd",function(Fs){ns=ZA(Fs.reader,Fs.flags).Ce}).R("trun",function(Fs){Hn=!0,In=eI(Fs.reader,Fs.version,Fs.flags).Qe}).box("mdat",B0(function(Fs){Xn=!0,Rn=Fs})).parse(gn,!1),!Xn&&!Vn&&!Hn)throw new Bs(2,2,2008);gn=Cn;for(var us=new xu(Rn,0),ps=Dn(In),fs=ps.next();!fs.done;fs=ps.next()){fs=fs.value;var vs=fs.ee||ns,Is=fs.ed?Cn+fs.ed:gn;gn=Is+(vs||0);var Ls=0;do{var Cs=us.K();Ls+=Cs;var Ms=us.K(),Zs=null;uy(Ms)=="vttc"?8<Cs&&(Zs=us.Za(Cs-8)):us.skip(Cs-8),vs&&Zs&&(Cs=Rm(Zs,bn.periodStart+Is/this.g,bn.periodStart+gn/this.g),jn.push(Cs))}while(fs.sampleSize&&Ls<fs.sampleSize)}return jn.filter(dp)};function Rm(gn,bn,Cn){var In,Rn,jn;return new Rl().box("payl",B0(function(Vn){In=Ou(Vn)})).box("iden",B0(function(Vn){Rn=Ou(Vn)})).box("sttg",B0(function(Vn){jn=Ou(Vn)})).parse(gn),In?Nm(In,Rn,jn,bn,Cn):null}function Nm(gn,bn,Cn,In,Rn){if(In=new Cu(In,Rn,""),nA(gn,In,new Map),bn&&(In.id=bn),Cn)for(gn=new k_(Cn),bn=jl(gn);bn;)aA(In,bn,[]),$_(gn),bn=jl(gn);return In}Ys("shaka.text.Mp4VttParser",Xy),Xy.prototype.parseMedia=Xy.prototype.parseMedia,Xy.prototype.setSequenceMode=Xy.prototype.setSequenceMode,Xy.prototype.parseInit=Xy.prototype.parseInit,_c['application/mp4; codecs="wvtt"']=function(){return new Xy};function ky(){}ky.prototype.parseInit=function(){},ky.prototype.setSequenceMode=function(){},ky.prototype.parseMedia=function(gn){var bn=Ou(gn).replace(/\r+/g,"");if(bn=bn.trim(),gn=[],bn=="")return gn;bn=Dn(bn.split(`

`));for(var Cn=bn.next();!Cn.done;Cn=bn.next()){Cn=Cn.value.split(`
`);var In=new k_(Cn[0]),Rn=oA(In),jn=Lu(In,/,/g);if(In=oA(In),Rn==null||jn==null||In==null)throw new Bs(2,2,2001,"Could not parse cue time range in SubViewer");gn.push(new Cu(Rn,In,Cn.slice(1).join(`
`).trim()))}return gn};function oA(gn){if(gn=Lu(gn,/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g),gn==null)return null;var bn=Number(gn[2]),Cn=Number(gn[3]);return 59<bn||59<Cn?null:Number(gn[4])/1e3+Cn+60*bn+3600*(Number(gn[1])||0)}Ys("shaka.text.SbvTextParser",ky),ky.prototype.parseMedia=ky.prototype.parseMedia,ky.prototype.setSequenceMode=ky.prototype.setSequenceMode,ky.prototype.parseInit=ky.prototype.parseInit,_c["text/x-subviewer"]=function(){return new ky};function vm(){this.g=new ym}vm.prototype.parseInit=function(){},vm.prototype.setSequenceMode=function(){},vm.prototype.parseMedia=function(gn,bn){return gn=Ou(gn),gn=sA(gn),gn=Pu(fp(gn)),this.g.parseMedia(gn,bn)};function sA(gn){var bn=`WEBVTT

`;if(gn=="")return bn;gn=gn.replace(/\r+/g,""),gn=gn.trim(),gn=Dn(gn.split(`

`));for(var Cn=gn.next();!Cn.done;Cn=gn.next())Cn=Cn.value.split(/\n/),Cn[0].match(/\d+/)&&Cn.shift(),Cn[0]=Cn[0].replace(/,/g,"."),bn+=Cn.join(`
`)+`

`;return bn}Ys("shaka.text.SrtTextParser",vm),vm.srt2webvtt=sA,vm.prototype.parseMedia=vm.prototype.parseMedia,vm.prototype.setSequenceMode=vm.prototype.setSequenceMode,vm.prototype.parseInit=vm.prototype.parseInit,_c["text/srt"]=function(){return new vm};function $y(){}$y.prototype.parseInit=function(){},$y.prototype.setSequenceMode=function(){},$y.prototype.parseMedia=function(gn){var bn="",Cn="";gn=Ou(gn).split(/\r?\n\s*\r?\n/),gn=Dn(gn);for(var In=gn.next();!In.done;In=gn.next()){var Rn=XO.exec(In.value);Rn&&(In=Rn[1],Rn=Rn[2],In=="V4 Styles"||In=="V4+ Styles"?bn=Rn:In=="Events"&&(Cn=Rn))}gn=[],In=null,bn=Dn(bn.split(/\r?\n/));for(var jn=bn.next();!jn.done;jn=bn.next())if(Rn=jn.value,!/^\s*;/.test(Rn)&&(jn=by.exec(Rn))){if(Rn=jn[1].trim(),jn=jn[2].trim(),Rn=="Format")In=jn.split(z$);else if(Rn=="Style"){Rn=jn.split(z$),jn={};for(var Vn=0;Vn<In.length&&Vn<Rn.length;Vn++)jn[In[Vn]]=Rn[Vn];gn.push(jn)}}for(In=[],bn=null,Rn={},Cn=Dn(Cn.split(/\r?\n/)),jn=Cn.next();!jn.done;Rn={vd:Rn.vd},jn=Cn.next())if(jn=jn.value,!/^\s*;/.test(jn)&&(Vn=by.exec(jn))){if(jn=Vn[1].trim(),Vn=Vn[2].trim(),jn=="Format")bn=Vn.split(z$);else if(jn=="Dialogue"){Vn=Vn.split(z$),jn={};for(var Hn=0;Hn<bn.length&&Hn<Vn.length;Hn++)jn[bn[Hn]]=Vn[Hn];Hn=G$(jn.Start);var Xn=G$(jn.End);Vn=new Cu(Hn,Xn,Vn.slice(bn.length-1).join(",").replace(/\\N/g,`
`).replace(/\{[^}]+\}/g,"")),Rn.vd=jn.Style,(jn=gn.find(function(ns){return function(us){return us.Name==ns.vd}}(Rn)))&&IN(Vn,jn),In.push(Vn)}}return In};function IN(gn,bn){var Cn=bn.Fontname;if(Cn&&(gn.fontFamily=Cn),(Cn=bn.Fontsize)&&(gn.fontSize=Cn+"px"),(Cn=bn.PrimaryColour)&&(Cn=wT(Cn))&&(gn.color=Cn),(Cn=bn.BackColour)&&(Cn=wT(Cn))&&(gn.backgroundColor=Cn),bn.Bold&&(gn.fontWeight=700),bn.Italic&&(gn.fontStyle="italic"),bn.Underline&&gn.textDecoration.push("underline"),(Cn=bn.Spacing)&&(gn.letterSpacing=Cn+"px"),Cn=bn.Alignment)switch(parseInt(Cn,10)){case 1:gn.displayAlign=Ay,gn.textAlign="start";break;case 2:gn.displayAlign=Ay,gn.textAlign=Qp;break;case 3:gn.displayAlign=Ay,gn.textAlign="end";break;case 5:gn.displayAlign="before",gn.textAlign="start";break;case 6:gn.displayAlign="before",gn.textAlign=Qp;break;case 7:gn.displayAlign="before",gn.textAlign="end";break;case 9:gn.displayAlign="center",gn.textAlign="start";break;case 10:gn.displayAlign="center",gn.textAlign=Qp;break;case 11:gn.displayAlign="center",gn.textAlign="end"}(bn=bn.AlphaLevel)&&(gn.opacity=parseFloat(bn))}function wT(gn){return gn=parseInt(gn.replace("&H",""),16),0<=gn?"rgba("+(gn&255)+","+(gn>>8&255)+","+(gn>>16&255)+","+(gn>>24&255^255)/255+")":null}function G$(gn){return gn=PN.exec(gn),3600*(gn[1]?parseInt(gn[1].replace(":",""),10):0)+60*parseInt(gn[2],10)+parseFloat(gn[3])}Ys("shaka.text.SsaTextParser",$y),$y.prototype.parseMedia=$y.prototype.parseMedia,$y.prototype.setSequenceMode=$y.prototype.setSequenceMode,$y.prototype.parseInit=$y.prototype.parseInit;var XO=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,by=/^\s*([^:]+):\s*(.*)/,z$=/\s*,\s*/,PN=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;_c["text/x-ssa"]=function(){return new $y};/*
 @license
 EME Encryption Scheme Polyfill
 Copyright 2019 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function xy(){}var BE;function _g(){BE?console.debug("EmeEncryptionSchemePolyfill: Already installed."):navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration?(BE=navigator.requestMediaKeySystemAccess,console.debug("EmeEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.requestMediaKeySystemAccess=QO):console.debug("EmeEncryptionSchemePolyfill: EME not found")}function QO(gn,bn){var Cn=this,In;return hs(function(Rn){return Rn.g==1?(console.assert(Cn==navigator,'bad "this" for requestMediaKeySystemAccess'),Qn(Rn,BE.call(Cn,gn,bn),2)):(In=Rn.h,lA(In)?(console.debug("EmeEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.requestMediaKeySystemAccess=BE,Rn.return(In)):(console.debug("EmeEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.requestMediaKeySystemAccess=Cy,Rn.return(Cy.call(Cn,gn,bn))))})}function Cy(gn,bn){var Cn=this,In,Rn,jn,Vn,Hn,Xn,ns,us,ps,fs;return hs(function(vs){if(vs.g==1){for(console.assert(Cn==navigator,'bad "this" for requestMediaKeySystemAccess'),In=GE(gn),Rn=[],jn=Dn(bn),Vn=jn.next();!Vn.done;Vn=jn.next())Hn=Vn.value,Xn=ZO(Hn.videoCapabilities,In),ns=ZO(Hn.audioCapabilities,In),Hn.videoCapabilities&&Hn.videoCapabilities.length&&!Xn.length||Hn.audioCapabilities&&Hn.audioCapabilities.length&&!ns.length||(us=Object.assign({},Hn),us.videoCapabilities=Xn,us.audioCapabilities=ns,Rn.push(us));if(!Rn.length)throw ps=Error("Unsupported keySystem or supportedConfigurations."),ps.name="NotSupportedError",ps.code=DOMException.NOT_SUPPORTED_ERR,ps;return Qn(vs,BE.call(Cn,gn,Rn),2)}return fs=vs.h,vs.return(new IT(fs,In))})}function ZO(gn,bn){return gn&&gn.filter(function(Cn){return!Cn.encryptionScheme||Cn.encryptionScheme==bn})}Ys("EmeEncryptionSchemePolyfill",xy),xy.install=_g;function uA(){}var VE;function JO(){VE?console.debug("McEncryptionSchemePolyfill: Already installed."):navigator.mediaCapabilities?(VE=navigator.mediaCapabilities.decodingInfo,console.debug("McEncryptionSchemePolyfill: Waiting to detect encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=eM):console.debug("McEncryptionSchemePolyfill: MediaCapabilities not found")}function eM(gn){var bn=this,Cn,In,Rn;return hs(function(jn){switch(jn.g){case 1:return console.assert(bn==navigator.mediaCapabilities,'bad "this" for decodingInfo'),Qn(jn,VE.call(bn,gn),2);case 2:if(Cn=jn.h,!gn.keySystemConfiguration)return jn.return(Cn);if((In=Cn.keySystemAccess)&&lA(In))return console.debug("McEncryptionSchemePolyfill: Native encryptionScheme support found."),navigator.mediaCapabilities.decodingInfo=VE,jn.return(Cn);if(console.debug("McEncryptionSchemePolyfill: No native encryptionScheme support found. Patching encryptionScheme support."),navigator.mediaCapabilities.decodingInfo=AT,In){jn.A(3);break}return Rn=Cn,Qn(jn,tM(gn),4);case 4:return Rn.keySystemAccess=jn.h,jn.return(Cn);case 3:return jn.return(AT.call(bn,gn))}})}function AT(gn){var bn=this,Cn,In,Rn,jn,Vn,Hn,Xn,ns;return hs(function(us){switch(us.g){case 1:return console.assert(bn==navigator.mediaCapabilities,'bad "this" for decodingInfo'),Cn=null,gn.keySystemConfiguration&&(In=gn.keySystemConfiguration,Rn=In.keySystem,jn=In.audio&&In.audio.encryptionScheme,Vn=In.video&&In.video.encryptionScheme,Cn=GE(Rn),Hn={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:gn},jn&&jn!=Cn||Vn&&Vn!=Cn)?us.return(Hn):Qn(us,VE.call(bn,gn),2);case 2:if(Xn=us.h,Xn.keySystemAccess){Xn.keySystemAccess=new IT(Xn.keySystemAccess,Cn),us.A(3);break}if(!gn.keySystemConfiguration){us.A(3);break}return ns=Xn,Qn(us,tM(gn),5);case 5:ns.keySystemAccess=us.h;case 3:return us.return(Xn)}})}function tM(gn){var bn,Cn;return hs(function(In){if(In.g==1){var Rn=gn.keySystemConfiguration,jn=[],Vn=[];return Rn.audio&&jn.push({robustness:Rn.audio.robustness||"",contentType:gn.audio.contentType}),Rn.video&&Vn.push({robustness:Rn.video.robustness||"",contentType:gn.video.contentType}),Rn={initDataTypes:Rn.initDataType?[Rn.initDataType]:[],distinctiveIdentifier:Rn.distinctiveIdentifier,persistentState:Rn.persistentState,sessionTypes:Rn.sessionTypes},jn.length&&(Rn.audioCapabilities=jn),Vn.length&&(Rn.videoCapabilities=Vn),bn=Rn,Qn(In,navigator.requestMediaKeySystemAccess(gn.keySystemConfiguration.keySystem,[bn]),2)}return Cn=In.h,In.return(Cn)})}Ys("McEncryptionSchemePolyfill",uA),uA.install=JO;function IT(gn,bn){this.h=gn,this.g=bn,this.keySystem=gn.keySystem}IT.prototype.getConfiguration=function(){var gn=this.h.getConfiguration();if(gn.videoCapabilities)for(var bn=Dn(gn.videoCapabilities),Cn=bn.next();!Cn.done;Cn=bn.next())Cn.value.encryptionScheme=this.g;if(gn.audioCapabilities)for(bn=Dn(gn.audioCapabilities),Cn=bn.next();!Cn.done;Cn=bn.next())Cn.value.encryptionScheme=this.g;return gn},IT.prototype.createMediaKeys=function(){return this.h.createMediaKeys()};function GE(gn){return gn.startsWith("com.widevine")||gn.startsWith("com.microsoft")||gn.startsWith("com.chromecast")||gn.startsWith("com.adobe")||gn.startsWith("org.w3")?"cenc":gn.startsWith("com.apple")?"cbcs-1-9":(console.warn("EmeEncryptionSchemePolyfill: Unknown key system:",gn,"Please contribute!"),null)}function lA(gn){gn=gn.getConfiguration();var bn=gn.audioCapabilities&&gn.audioCapabilities[0];return!!((gn=gn.videoCapabilities&&gn.videoCapabilities[0]||bn)&&gn.encryptionScheme!==void 0)}function cA(){}function dA(){_g(),JO()}Ys("EncryptionSchemePolyfills",cA),cA.install=dA,typeof kn<"u"&&kn.exports&&(kn.exports=cA)}).call(cn,ln,ln,void 0);for(var dn in cn.shaka)sn[dn]=cn.shaka[dn]})()})(shakaPlayer_compiled);const Shaka=getDefaultExportFromCjs(shakaPlayer_compiled),errorLogger=(sn,ln)=>{const cn=getErrorEnvironment();sn instanceof Error&&datadogRum.addError(sn,Object.assign(cn,ln)),datadogRum.addError(sn,Object.assign(cn,ln,{originError:sn}))},getErrorEnvironment=()=>{var sn;return{userAgent:navigator.userAgent,connectionType:((sn=navigator.connection)==null?void 0:sn.type)||"unknown",maxTouchPoints:navigator.maxTouchPoints}};class ShakaError extends Error{constructor(cn){super(cn.message);Tl(this,"category");Tl(this,"severity");Tl(this,"code");this.name="ShakaError",this.message=this.getErrorMessage(cn),this.code=cn.code,this.severity=cn.severity,this.category=cn.category}static isShakaError(cn){return!!(has$1(cn,"category")&&has$1(cn,"code")&&has$1(cn,"severity"))}isCriticalError(){return this.code===Shaka.util.Error.Code.LOAD_INTERRUPTED&&this.category===Shaka.util.Error.Category.PLAYER}getErrorMessage(cn){const dn=cn.category,pn=cn.severity,vn=cn.code;return`category: ${dn} severity: ${pn} code: ${vn} message: ${cn.message||""}`}}const isMobile=()=>{const sn=/Android|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini|Mobile|mobile|CriOS/i,ln="ontouchstart"in window||navigator.maxTouchPoints>0;return sn.test(navigator.userAgent)||ln&&window.innerWidth<=1024};isMobile();function getSrc(sn){return(sn==null?void 0:sn.url)||""}function isVodCdnUrl(sn){return RegExp(/^https:\/\/vod\.(dev)?inflearn.com/).test(sn)}function isHlsKeyUrl(sn){return isVodCdnUrl(sn)&&RegExp(/^https:\/\/vod\.(dev)?inflearn.com\/key\/[^/]+\/[^/]+$/).test(sn)}const style="",shaka=getShaka();shaka.ui.Controls.registerElement(MobileSeekingUiFactory.uiName,new MobileSeekingUiFactory);shaka.ui.Controls.registerElement(PlaybackRateUiFactory.uiName,new PlaybackRateUiFactory);shaka.ui.Controls.registerElement(AutoPlayUiFactory.uiName,new AutoPlayUiFactory);shaka.ui.Controls.registerElement(SubtitleButtonUiFactory.uiName,new SubtitleButtonUiFactory);shaka.ui.Controls.registerElement(UnitTitleUiFactory.uiName,new UnitTitleUiFactory);shaka.ui.Controls.registerElement(FullscreenButtonUiFactory.uiName,new FullscreenButtonUiFactory);shaka.ui.Controls.registerElement(PlayPauseButtonUiFactory.uiName,new PlayPauseButtonUiFactory);shaka.ui.Controls.registerElement(SubtitleUiFactory.uiName,new SubtitleUiFactory);const getPlayBackRate=(sn,ln)=>{const cn=[];for(let dn=sn*100;dn<=ln*100;dn+=5)cn.push(Number(dn));return cn.map(dn=>dn/100)},PLAYER_CONFIG={streaming:{bufferingGoal:20,retryParameters:{maxAttempts:5,baseDelay:2e3}}},isIosDevice$1=isIos(navigator.userAgent,document),isSafariBrowser$1=isSafari(navigator.userAgent),OVERLAY_CONFIG={controlPanelElements:[SubtitleUiFactory.uiName,PlayPauseButtonUiFactory.uiName,"mute",...isMobile()?[]:["volume"],"time_and_duration","spacer",AutoPlayUiFactory.uiName,PlaybackRateUiFactory.uiName,SubtitleButtonUiFactory.uiName,FullscreenButtonUiFactory.uiName,"overflow_menu",...isMobile()?[MobileSeekingUiFactory.uiName]:[],...isMobile()?[]:[UnitTitleUiFactory.uiName]],overflowMenuButtons:[...isIosDevice$1||isSafariBrowser$1?[]:["quality"],"picture_in_picture"],seekBarColors:{base:"rgba(255,255,255,.2)",buffered:"rgba(255,255,255,.4)",played:A$9.infgreen[6],adBreaks:A$9.infgreen[6]},playbackRates:getPlayBackRate(.5,2),enableKeyboardPlaybackControls:!1,doubleClickForFullscreen:!1,addBigPlayButton:!1,enableFullscreenOnRotation:!0};window.muxjs=muxjs$1;const PASSPHRASE=appConfig.PASSPHRASE,useCustomPlayer=({src:sn,unitTitle:ln,currentTime:cn,config:dn,overlayConfig:pn})=>{const[vn,kn]=reactExports.useState(null),[Sn,wn]=reactExports.useState(null),Pn=reactExports.useRef(null),Nn=reactExports.useRef(null),Ln=reactExports.useRef(null);reactExports.useEffect(()=>{if(!Nn.current||!Pn.current)return;const ks=new shaka.Player(Pn.current),xs=new shaka.ui.Overlay(ks,Nn.current,Pn.current);return Dn(ks),kn(ks),wn(xs),ks.configure({...PLAYER_CONFIG}),xs.configure(defaults$1(pn,OVERLAY_CONFIG)),()=>{ks.destroy(),xs.destroy(),kn(null),wn(null)}},[]);const Fn=ks=>{const xs={url:`${location.pathname}${location.search}`,playbackRate:vn==null?void 0:vn.getPlaybackRate()};if(ShakaError.isShakaError(ks)&&ks.severity===shaka.util.Error.Severity.CRITICAL){if(ks.severity!==shaka.util.Error.Severity.CRITICAL)return;const Ks=new ShakaError(ks);errorLogger(Ks,xs);return}errorLogger(ks,xs)};reactExports.useEffect(()=>{vn&&Ln.current!==sn&&sn&&(Pn.current&&(Pn.current.dataset.unitTitle=ln),vn.load(sn,cn,"application/x-mpegURL").then(()=>{Ln.current=sn}).catch(Fn))},[vn,sn]);const zn=(ks,xs)=>{if(isNil(ks))return;const Ks=vn==null?void 0:vn.getMediaElement();Ks&&(Ks.currentTime=ks,xs&&Ks.play())},Dn=ks=>{var xs;(xs=ks.getNetworkingEngine())==null||xs.registerRequestFilter((Ks,Vs)=>{var hs;const Js=Vs.uris[0],ru=isVodCdnUrl(Js)||!1;if(Ks!==shaka.net.NetworkingEngine.RequestType.LICENSE&&ru&&(Vs.allowCrossSiteCredentials=!!((hs=dn==null?void 0:dn.headers)!=null&&hs.withCredentials)),Ks!==shaka.net.NetworkingEngine.RequestType.LICENSE&&isHlsKeyUrl(Js)){const[lu,_u]=Js.split("/key/")[1].split("/"),yu=sha256(`${lu}${_u}${PASSPHRASE}`);Vs.uris[0]=`${Vs.uris[0]}?key=${yu}`}})},Kn=()=>{const ks=vn==null?void 0:vn.getMediaElement(),xs=ks==null?void 0:ks.currentTime;return isNil(xs)?null:Math.floor(xs)},qn=()=>{const ks=vn==null?void 0:vn.getMediaElement(),xs=ks==null?void 0:ks.duration;return isNil(xs)?null:Math.floor(xs)},Zn=ks=>{const xs=vn==null?void 0:vn.getMediaElement();xs&&(xs.playbackRate=ks,xs.defaultPlaybackRate=ks)},Yn=useDispatch();return{overlayElement:Nn,videoElement:Pn,player:vn,overlay:Sn,setCurrentTime:zn,getCurrentTime:Kn,getDuration:qn,setPlaybackRate:Zn,setPlaybackRateOptions:ks=>{if(Sn&&(vn!=null&&vn.getMediaElement())){const xs=isSafariBrowser$1?2:ks;Yn(videoActions.setMaxPlaybackRate(xs)),Sn.configure({playbackRates:getPlayBackRate(.5,xs)})}},setQuality:ks=>{const xs=vn==null?void 0:vn.getVariantTracks(),Ks=find$1(xs,{height:ks});if(!Ks){vn==null||vn.configure({abr:{enabled:!0}});return}vn==null||vn.configure({abr:{enabled:!1}}),vn==null||vn.selectVariantTrack(Ks,!0)},setVolume:ks=>{const xs=vn==null?void 0:vn.getMediaElement();xs&&(xs.volume=ks)},toggleFullscreen:()=>{var ks;(ks=Sn==null?void 0:Sn.getControls())==null||ks.toggleFullScreen()},play:()=>{var ks;(ks=vn==null?void 0:vn.getMediaElement())==null||ks.play()},pause:()=>{var ks;(ks=vn==null?void 0:vn.getMediaElement())==null||ks.pause()},togglePlayPause:()=>{const ks=vn==null?void 0:vn.getMediaElement();ks&&(ks.paused?ks.play():ks.pause())},forward:ks=>{const xs=vn==null?void 0:vn.getMediaElement();if(!xs)return;const Ks=xs.duration,Vs=xs.currentTime+ks;zn(Vs>=Ks?Ks-.001:Vs)},rewind:ks=>{const xs=vn==null?void 0:vn.getMediaElement();if(!xs)return;const Ks=xs.currentTime-ks;xs.currentTime=Ks<=0?0:Ks},setMuted:ks=>{const xs=vn==null?void 0:vn.getMediaElement();xs&&(xs.muted=ks)},getVolume:()=>{var ks;return((ks=vn==null?void 0:vn.getMediaElement())==null?void 0:ks.volume)||0},toggleMuted:()=>{const ks=vn==null?void 0:vn.getMediaElement();ks&&(ks.muted=!ks.muted)},getPlaybackRate:()=>{const ks=vn==null?void 0:vn.getMediaElement();return(ks==null?void 0:ks.playbackRate)||1},getQuality:()=>{var Vs,Js,ru;const ks=(Js=(Vs=vn==null?void 0:vn.getConfiguration())==null?void 0:Vs.abr)==null?void 0:Js.enabled,xs=vn==null?void 0:vn.getVariantTracks(),Ks=((ru=xs==null?void 0:xs.find(hs=>hs.active))==null?void 0:ru.height)??null;return ks?null:Ks},getVideoElement:()=>Pn.current}},useErrorMonitoring=({player:sn})=>{useEvent$2("error",ln=>{const cn={url:`${location.pathname}${location.search}`,playbackRate:sn.getPlaybackRate()};if(ShakaError.isShakaError(ln)){const dn=new ShakaError(ln);errorLogger(dn,cn),dn.isCriticalError()&&(setDebugMode(!0),initLogger());return}errorLogger(ln,cn)},sn.player)},defaultKeyConditions={playPauseKey:sn=>sn.code==="Space",rewindKey:sn=>sn.code==="ArrowLeft",forwardKey:sn=>sn.code==="ArrowRight",volumeUpKey:sn=>sn.code==="ArrowUp",volumeDownKey:sn=>sn.code==="ArrowDown",muteKey:sn=>sn.code==="KeyM",subtitleKey:sn=>sn.code==="KeyC"&&!sn.metaKey&&!sn.ctrlKey,fullscreenKey:sn=>sn.code==="KeyF"&&!sn.metaKey&&!sn.ctrlKey,speedUpKey:sn=>sn.shiftKey&&sn.code==="Period",speedDown:sn=>sn.shiftKey&&sn.code==="Comma"},defaultOptions={volumeStep:.1,seekStep:5,documentHotkeysFocusElementFilter:()=>!1};function usePlayerHotkey({player:sn,mediaElement:ln,customOptions:cn,customOverlay:dn}){const pn=useAppSelector(Fn=>Fn.video.isVodSubtitleOpened),vn=useAppDispatch(),{enterFullScreen:kn}=usePlayerFullscreen(),Sn={...defaultOptions,...cn},wn={...defaultKeyConditions,...cn},Pn=Fn=>Fn===document.body,Nn=Fn=>Fn.find(zn=>{var Dn;return(Dn=zn==null?void 0:zn.classList)==null?void 0:Dn.contains("shaka-video-container")});useEvent$2("keydown",Fn=>{var zn,Dn;if(ln&&(Pn(Fn.target)||Nn(Fn.composedPath()))&&!Sn.documentHotkeysFocusElementFilter(Fn)){if(wn.playPauseKey(Fn)){Fn.preventDefault(),sn.togglePlayPause();return}if(wn.rewindKey(Fn)){Fn.preventDefault(),sn.rewind(Sn.seekStep);return}if(wn.forwardKey(Fn)){Fn.preventDefault(),sn.forward(Sn.seekStep);return}if(wn.volumeUpKey(Fn)){Fn.preventDefault(),sn.setMuted(!1);const Kn=sn.getVolume()+Sn.volumeStep;sn.setVolume(Kn>=1?1:Kn);return}if(wn.volumeDownKey(Fn)){Fn.preventDefault(),sn.setMuted(!1);const Kn=sn.getVolume()-Sn.volumeStep;sn.setVolume(Kn<0?0:Kn);return}if(wn.muteKey(Fn)){sn.toggleMuted();return}if(wn.fullscreenKey(Fn)&&(Fn.preventDefault(),kn()),wn.speedUpKey(Fn)){const Kn=sn.getPlaybackRate(),qn=last$1(((zn=sn.overlay)==null?void 0:zn.getConfiguration().playbackRates)||[2]);if(Kn===qn)return;const Zn=Number((Kn+.25).toFixed(2)),Yn=qn>Zn?Zn:qn;sn.setPlaybackRate(Yn),setUserSetting({playbackRate:Yn}),dn.showPlaybackFeedback("forward",Yn);return}if(wn.speedDown(Fn)){const Kn=sn.getPlaybackRate(),qn=head$1(((Dn=sn.overlay)==null?void 0:Dn.getConfiguration().playbackRates)||[.5]);if(Kn===qn)return;const Zn=Number((Kn-.25).toFixed(2)),Yn=Zn<qn?qn:Zn;sn.setPlaybackRate(Yn),setUserSetting({playbackRate:Yn}),dn.showPlaybackFeedback("backward",Yn);return}wn.subtitleKey(Fn)&&vn(videoActions.setIsVodSubtitleOpened(!pn))}})}const controls="",styleMobileSeekingUi={name:"hvg71l",styles:".shaka-fast-forward-on-controls-container{height:100%;width:100%;flex-shrink:1;position:absolute;left:0;right:0;top:0;bottom:0;display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:40% 0 0 40%;margin:0;border:none;color:#fff;background-color:#0000007f;cursor:default;font-size:20px;opacity:0;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.shaka-rewind-on-controls-container{height:100%;width:100%;flex-shrink:1;position:absolute;left:0;right:0;top:0;bottom:0;display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:0 40% 40% 0;margin:0;border:none;color:#fff;background-color:#0000007f;cursor:default;font-size:20px;opacity:0;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}.shaka-forward-rewind-on-controls-container-icon{font-weight:bold;font-size:34px;}.shaka-hidden-fast-forward-container{height:100%;width:40%;flex-shrink:1;position:absolute;top:0;right:0;left:60%;}.shaka-hidden-rewind-container{height:100%;width:40%;flex-shrink:1;position:absolute;left:0;right:0;top:0;bottom:0;}"},VideoPlayer=({player:sn,subtitleUrl:ln,onReady:cn,onTimeUpdate:dn,onPlay:pn,onEnd:vn,onPlaybackRateChange:kn,onVolumeChange:Sn,onQualityChange:wn,onFullscreenChange:Pn,onLoadStart:Nn})=>{var ss;const Ln=reactExports.useRef(!1),Fn=()=>{const as=sn.getDuration()||0,ds=sn.getCurrentTime()||0;dn==null||dn(sn,{time:ds,duration:as})},zn=()=>{const as=sn.getVolume();Sn==null||Sn(sn,{volume:as})},Dn=()=>{cn==null||cn(sn)},Kn=()=>vn==null?void 0:vn(sn),qn=()=>pn==null?void 0:pn(sn),Zn=()=>{Pn==null||Pn(sn,{fullscreen:!!document.fullscreenElement})},Yn=()=>{const as=sn.getPlaybackRate();as!==0&&(kn==null||kn(sn,{playbackRate:as}))},Jn=()=>Nn==null?void 0:Nn(sn),rs=()=>{const as=sn.getQuality();wn==null||wn(sn,{quality:as})};return useEvent$2("fullscreenchange",Zn,document),useEvent$2("resolutionselectionupdated",rs,(ss=sn.overlay)==null?void 0:ss.getControls()),reactExports.useEffect(()=>{var Es,Ss;const as=(Ss=(Es=sn.overlay)==null?void 0:Es.getControls())==null?void 0:Ss.getControlsContainer(),ds=document.querySelector(".shaka-playback-rates");Ln.current||!as||!ds||(Ln.current=!0,ds.addEventListener("click",Qn=>{const ms=Qn.target,Ts=ms.textContent;if(ds.contains(ms)&&(Ts==null?void 0:Ts.includes("x"))&&Ts){const ys=Number(Ts.replace("x",""));trackEvent(eventNames.UNIT__VIDEO_CONTENT_PLAYBACK_RATE,{Type:ys})}}))},[sn.player]),reactExports.useEffect(()=>{var Es;const as=(Es=sn.videoElement)==null?void 0:Es.current;if(!as)return;const ds=as==null?void 0:as.querySelector('[srcLang="ko"]');if(!ln){ds==null||ds.remove();return}if(ds){ds.src=ln;return}if(!ds){const Ss=document.createElement("track");Ss.kind="captions",Ss.srclang="ko",Ss.src=ln,as.appendChild(Ss)}},[ln]),jsx("div",{ref:sn.overlayElement,css:[styleVideoCover,styleYoutube,styleMobileSeekingUi,"",""],children:jsx("video",{onLoadStart:Jn,onLoadedData:Dn,onTimeUpdate:Fn,onVolumeChange:zn,onEnded:Kn,onRateChange:Yn,onPlay:qn,ref:sn.videoElement,css:styleVideo,controls:!1,autoPlay:!0,playsInline:!0})})},styleVideoCover={name:"w1atjl",styles:"width:100%;height:100%"},styleYoutube=css$1({".shaka-controls-container[casting=true] .shaka-seek-bar-container, .shaka-controls-container[shown=true] .shaka-seek-bar-container":{height:"3px"},".shaka-controls-container[casting=true] .shaka-controls-button-panel, .shaka-controls-container[shown=true] .shaka-controls-button-panel":{height:"40px"},".shaka-bottom-controls":{width:"100%",padding:0,paddingBottom:0,zIndex:1,display:"flex",WebkitBoxOrient:"vertical",WebkitBoxDirection:"normal",msFlexDirection:"column",flexDirection:"column"},".shaka-controls-button-panel":{WebkitBoxOrdinalGroup:3,msFlexOrder:2,order:2,height:0,padding:"0 2px",transition:"opacity cubic-bezier(.4, 0, .6, 1) .6s, height cubic-bezier(.4, 0, .6, 1) .2s",[mediaQueries.tablet]:{padding:"0 10px"}},".shaka-range-container":{margin:"4px 0px 4px 0px",top:0,[mediaQueries.tablet]:{margin:"4px 10px 4px 10px"}},".shaka-controls-button-panel > *":{margin:0,color:"#EEE",height:"40px",padding:0},".shaka-controls-button-panel > *:focus":{outline:"none",WebkitBoxShadow:"inset 0 0 0 2px rgba(27, 127, 204, 0.8)",boxShadow:"inset 0 0 0 2px rgba(27, 127, 204, 0.8)",color:"#FFF"},".shaka-controls-button-panel > *:hover":{color:"#FFF"},".shaka-controls-button-panel .shaka-volume-bar-container":{display:"none",position:"relative",zIndex:10,left:"-1px",WebkitBoxOrdinalGroup:0,opacity:0,width:0,WebkitTransition:"width 0.2s cubic-bezier(0.4, 0, 1, 1)",height:"3px",transition:"width 0.2s cubic-bezier(0.4, 0, 1, 1)",padding:0,marginRight:"8px",[mediaQueries.tablet]:{display:"block"}},".shaka-controls-button-panel .shaka-volume-bar-container:hover, .shaka-controls-button-panel .shaka-volume-bar-container:focus":{display:"block",width:"50px",opacity:1,padding:"0 6px"},".shaka-mute-button":{display:"none",width:"40px",alignItems:"center",justifyContent:"center",[mediaQueries.tablet]:{display:"inline-flex"}},".shaka-mute-button:hover + div":{width:"50px",opacity:1},".shaka-current-time":{fontSize:"12px"},".shaka-seek-bar-container":{height:0,position:"relative",top:"-1px",borderRadius:0,marginBottom:0},".shaka-seek-bar-container .shaka-range-element":{opacity:0},".shaka-seek-bar-container:hover":{height:"5px",top:0,cursor:"pointer"},".shaka-seek-bar-container:hover .shaka-range-element":{opacity:1,cursor:"pointer"},'.shaka-seek-bar-container input[type="range"]::-webkit-slider-thumb':{background:colors.primary500,cursor:"pointer"},'.shaka-seek-bar-container input[type="range"]::-moz-range-thumb':{background:colors.primary500,cursor:"pointer"},'.shaka-seek-bar-container input[type="range"]::-ms-thumb':{background:colors.primary500,cursor:"pointer"},".shaka-video-container .material-icons-round":{fontFamily:"Material Icons Sharp"},".shaka-overflow-menu, .shaka-settings-menu":{borderRadius:"2px",background:"rgba(28, 28, 28, 0.9)",textShadow:"0 0 2px rgb(0 0 0%)",WebkitTransition:"opacity 0.1s cubic-bezier(0, 0, 0.2, 1)",transition:"opacity 0.1s cubic-bezier(0, 0, 0.2, 1)",MozUserSelect:"none",msUserSelect:"none",WebkitUserSelect:"none",right:"10px",bottom:"50px",padding:"8px 0",minWidth:"200px"},".shaka-settings-menu":{padding:"0 0 8px 0"},".shaka-settings-menu button":{fontSize:"12px"},".shaka-settings-menu button span":{marginLeft:"33px",fontSize:"13px"},'.shaka-settings-menu button[aria-selected="true"]':{display:"flex"},'.shaka-settings-menu button[aria-selected="true"] span':{WebkitBoxOrdinalGroup:3,msFlexOrder:2,order:2,marginLeft:0},'.shaka-settings-menu button[aria-selected="true"] i':{WebkitBoxOrdinalGroup:2,msFlexOrder:1,order:1,fontSize:"18px",paddingLeft:"5px"},".shaka-overflow-menu button":{padding:0},".shaka-overflow-menu button i":{display:"none"},".shaka-overflow-menu button .shaka-overflow-button-label":{display:"flex",WebkitBoxPack:"justify",msFlexPack:"justify",justifyContent:"space-between",WebkitBoxOrient:"horizontal",WebkitBoxDirection:"normal",msFlexDirection:"row",flexDirection:"row",WebkitBoxAlign:"center",msFlexAlign:"center",alignItems:"center",cursor:"default",outline:"none",height:"40px",WebkitBoxFlex:0,msFlex:"0 0 100%",flex:"0 0 100%"},".shaka-overflow-menu button .shaka-overflow-button-label span":{msFlexNegative:"initial",flexShrink:"initial",paddingLeft:"15px",fontSize:"13px",fontWeight:500,display:"flex",WebkitBoxAlign:"center",msFlexAlign:"center",alignItems:"center"},".shaka-overflow-menu span + span":{color:"#FFF",fontWeight:"400 !important",fontSize:"12px !important",paddingRight:"8px",paddingLeft:"0 !important"},".shaka-overflow-menu .shaka-pip-button span + span":{paddingRight:"15px !important"},".shaka-overflow-menu .shaka-pip-button span + span::after":{content:'""'},".shaka-back-to-overflow-button":{padding:"8px 0",borderBottom:"1px solid rgba(255, 255, 255, 0.2)",fontSize:"12px",color:"#eee",height:"40px"},".shaka-back-to-overflow-button .material-icons-round":{fontSize:"15px",paddingRight:"10px"},".shaka-back-to-overflow-button span":{marginLeft:"3px !important"},".shaka-overflow-menu button:hover, .shaka-settings-menu button:hover":{cursor:"pointer"},".shaka-overflow-menu button:hover label, .shaka-settings-menu button:hover label":{cursor:"pointer"},".shaka-overflow-menu button:focus, .shaka-settings-menu button:focus":{backgroundColor:"rgba(255, 255, 255, 0.1)",border:"none",outline:"none"},".shaka-overflow-menu button, .shaka-settings-menu button":{color:"#EEE"},".shaka-captions-off":{color:"#BFBFBF"},".shaka-spacer":{flexGrow:1,padding:0,minWidth:0},".shaka-overflow-menu-button":{fontSize:"18px",width:"34px",display:"inline-flex",alignItems:"center",justifyContent:"center"},".shaka-scrim-container":{background:`linear-gradient(to top,${A$9.dark[8]} 0,transparent 15%);`}},"",""),styleVideo={name:"w1atjl",styles:"width:100%;height:100%"},storageKey="userSetting",isLocalStorageAvailable=()=>typeof localStorage<"u",isIosDevice=isIos(navigator.userAgent,document),isSafariBrowser=isSafari(navigator.userAgent),setStorage=(sn,ln)=>{if(isLocalStorageAvailable()){localStorage.setItem(sn,JSON.stringify(ln));return}window.__storage__[sn]=JSON.stringify(ln)},getStorage=sn=>isLocalStorageAvailable()?localStorage.getItem(sn):window.__storage__[sn],setUserSetting=sn=>{const ln=getUserSetting();setStorage(storageKey,{...ln,...sn})},getUserSetting=()=>{const sn={quality:null,playbackRate:1,volume:1,autoplay:!1,isVodSubtitleOpened:!1,subtitlePosition:"top",subtitleSize:"sm"},ln=getStorage(storageKey),cn=ln?JSON.parse(ln):sn;return`${cn.playbackRate}`.length>4&&(cn.playbackRate=1,setStorage(storageKey,cn)),cn};function PlayerWrapper({currentTime:sn,src:ln,unitTitle:cn,isReview:dn,hasSubtitle:pn,subtitleOid:vn,isShowTopSubtitle:kn}){var Es;const Sn=useAppDispatch(),{setPlayerContext:wn}=useDispatchPlayerContext(),{unitId:Pn,slug:Nn}=useLectureParams(),Ln=reactExports.useRef(!1),Fn=reactExports.useRef(0),zn=vn?VOD_SUBTITLE_VTT_VOD_SUBTITLE_ID(vn):void 0,Dn=useCustomPlayer({src:ln,unitTitle:cn,currentTime:sn,config:{headers:{withCredentials:!0}},overlayConfig:{playbackRates:getPlayBackRate(.5,dn&&!(isIosDevice||isSafariBrowser)?3:2)}});return usePlayerHotkey({player:Dn,mediaElement:(Es=Dn.player)==null?void 0:Es.getMediaElement(),customOverlay:{showPlaybackFeedback:(Ss,Qn)=>{var ms;(ms=Dn.overlayElement)!=null&&ms.current&&showPlaybackOverlay({playbackRate:Qn,dir:Ss})()}}}),useErrorMonitoring({player:Dn}),reactExports.useEffect(()=>{wn(Dn)},[Dn.player]),jsxs(B$7,{css:stylePlayerWrapper,children:[jsx(VideoPlayer,{player:Dn,subtitleUrl:zn,onReady:Ss=>{Ln.current=!0;const Qn=getUserSetting();Ss.setVolume(Qn.volume),Ss.setQuality(Qn.quality),Ss.setPlaybackRate(Qn.playbackRate),Qn.subtitleSize&&Sn(videoActions.setSubtitleSize(Qn.subtitleSize))},onPlay:()=>{Sn(videoActions.setIsOverlay(!1))},onEnd:()=>{Sn(videoActions.setIsOverlay(!0))},onTimeUpdate:(Ss,{time:Qn})=>{const ms=Math.floor(Qn);Fn.current!==ms&&ms%10===0&&(Fn.current=ms,datadogLogs.logger.info(`slug: ${Nn}, currentTime: ${ms}, unitId: ${Pn}`))},onPlaybackRateChange:()=>{Ln.current},onVolumeChange:(Ss,Qn)=>{Ln.current&&setUserSetting({volume:Qn.volume})},onQualityChange:(Ss,Qn)=>{Ln.current&&setUserSetting({quality:Qn.quality})},onFullscreenChange:(Ss,Qn)=>{Qn.fullscreen&&trackEvent(eventNames.LECTUREM_FULLSCREEN_CLICK)},onLoadStart:()=>{Ln.current=!1}}),jsx(SwitchProvider,{isReview:dn,children:jsx(PortalControl,{elementId:AUTOPLAY_ELEMENT_ID,children:jsx(AutoPlayUiComponent,{})})}),pn&&jsx(PortalControl,{elementId:SUBTITLE_BUTTON_ELEMENT_ID,children:jsx(SubtitleButtonUiComponent,{})}),kn&&vn&&jsx(PortalControl,{elementId:SUBTITLE_ELEMENT_ID,children:jsx(SubtitleUiComponent,{subtitleOid:vn})}),jsx(PortalControl,{elementId:FULLSCREEN_ELEMENT_ID,children:jsx(FullScreenButtonUiComponent,{})}),jsx(PortalControl,{elementId:PLAYBACKRATE_ELEMENT_ID,children:jsx(PlaybackRateUiComponent,{})}),jsx(PortalControl,{elementId:PLAY_PAUSE_ELEMENT_ID,children:jsx(PlayPauseButtonUiComponent,{})})]})}const stylePlayerWrapper={name:"2pste9",styles:"flex:1 1 auto;height:0"},{isVodSubtitleOpened,subtitlePosition}=getUserSetting(),initialVideo={isOverlay:!1,isVodSubtitleOpened:isVodSubtitleOpened||!1,subtitlePosition:subtitlePosition||"top",currentScript:{index:null,prevIndex:null,isPlaceholder:!1},subTitleSize:SUBTITLE_SIZE_KEY.sm,maxPlaybackRate:2},slice$2=createSlice({name:"video",initialState:initialVideo,reducers:{setIsOverlay(sn,{payload:ln}){sn.isOverlay=ln},setIsVodSubtitleOpened(sn,{payload:ln}){sn.isVodSubtitleOpened=ln},setSubtitlePosition(sn,{payload:ln}){sn.subtitlePosition=ln},setCurrentScriptIndex(sn,{payload:ln}){return sn.currentScript=ln,sn},setSubtitleSize(sn,{payload:ln}){return sn.subTitleSize=ln,sn},setMaxPlaybackRate(sn,{payload:ln}){return sn.maxPlaybackRate=ln,sn}}}),{reducer:videoReducer}=slice$2,videoActions=slice$2.actions;function useMoveUnit(){const sn=useAppSelector(zn=>zn.lecture.prevRequestTime),{slug:ln,unitId:cn}=useLectureParams(),{data:dn}=useUnit(Number(cn),ln),{data:pn}=useSession(),{player:vn}=usePlayerContext(),kn=useAppDispatch(),{updateCurrentTime:Sn}=useUpdateCurrentTime(),wn=useNavigate(),[Pn,Nn]=useSearchParams(),Ln=zn=>{Nn(Kn=>(Kn.delete("time"),Kn)),window.innerWidth<laptopSize&&Nn(Kn=>(Kn.delete("tab"),Kn)),Nn(Kn=>(Kn.set("unitId",String(zn)),Kn.set("courseSlug",ln),Kn));const Dn=`${URL_LECTURE_V2}?${Pn.toString()}`;wn(Dn)},Fn=zn=>{if(zn===Number(cn))return;const Dn=vn==null?void 0:vn.getCurrentTime(),Kn=vn==null?void 0:vn.getDuration();Dn&&Kn&&pn&&Sn({unitId:Number(cn),userId:pn==null?void 0:pn.userId,currentTime:Dn,prevRequestTime:sn}),Ln(zn),kn(lectureActions.setUnitId(zn)),kn(videoActions.setIsOverlay(!1))};return{unitId:Number(cn),prevUnitId:dn==null?void 0:dn.prevUnitId,nextUnitId:dn==null?void 0:dn.nextUnitId,moveUnit:Fn}}const MODAL_OPEN_SHORTCUT="?",keyConditions={moveToPrevUnitKey:sn=>sn.shiftKey&&sn.code==="KeyP",moveToNextUnitKey:sn=>sn.shiftKey&&sn.code==="KeyN"};function useShortcut(){const{openShortcutGuideModal:sn}=useShortcutGuide(),{moveUnit:ln,prevUnitId:cn,nextUnitId:dn}=useMoveUnit();function pn(kn){if(!!document.querySelector('[aria-label="shortcut-table"]'))return;const wn=kn.target;isShortcutDisabledTargetElement(wn)||kn.key===MODAL_OPEN_SHORTCUT&&sn()}function vn(kn){const Sn=kn.target;if(!isShortcutDisabledTargetElement(Sn)){if(keyConditions.moveToPrevUnitKey(kn)){if(!cn)return;ln(cn)}if(keyConditions.moveToNextUnitKey(kn)){if(!dn)return;ln(dn)}}}useEvent$2("keypress",pn),useEvent$2("keypress",vn)}const SHORTCUT_DISABLED_TAGS=["input","textarea"];function isShortcutDisabledTargetElement(sn){return sn.getAttribute("contenteditable")||SHORTCUT_DISABLED_TAGS.some(ln=>ln===sn.tagName.toLowerCase())}const DesktopCourse=reactExports.lazy(()=>__vitePreload(()=>import("./DesktopCourse-940b7e91.js"),["assets/DesktopCourse-940b7e91.js","assets/canViewContent-60e57dcf.js","assets/canViewContent-11a542c1.css"])),MobileCourse=reactExports.lazy(()=>__vitePreload(()=>import("./MobileCourse-33869b29.js"),["assets/MobileCourse-33869b29.js","assets/canViewContent-60e57dcf.js","assets/canViewContent-11a542c1.css"]));function getCookieDomain(sn){return sn==="production"?".inflearn.com":sn==="development"?".devinflearn.com":"localhost"}function Course(){useShortcut();const sn=useAppSelector(Kn=>Kn.lecture.isCompleteModalOpened),ln=useAppSelector(Kn=>Kn.lecture.isReviewModalOpened),cn=useAppSelector(Kn=>Kn.lecture.prevRequestTime),dn=useAppSelector(Kn=>Kn.lecture.isRecommendReviewModalOpened),pn=usePlayerContext(),vn=useAppDispatch(),{slug:kn,unitId:Sn}=useLectureParams(),{data:wn,isLoading:Pn}=useCourse(kn),{data:Nn,isLoading:Ln}=useUnit(Sn,kn,{onSuccess:({data:Kn})=>{var qn,Zn,Yn;(qn=Kn==null?void 0:Kn.complete)!=null&&qn.nowInMilliseconds&&Fn((Zn=Kn==null?void 0:Kn.complete)==null?void 0:Zn.nowInMilliseconds),zn(((Yn=Kn==null?void 0:Kn.complete)==null?void 0:Yn.isComplete)===!0?3:2)}}),Fn=Kn=>{Kn!==cn&&Kn&&vn(lectureActions.setPrevRequestTime(Number(Kn)))},zn=Kn=>{var qn;((qn=pn.player)==null?void 0:qn.getPlaybackRate())!==Kn&&pn.player&&pn.player.setPlaybackRateOptions(Kn)};reactExports.useEffect(()=>{if(isIos(navigator.userAgent,document)||isSafari(navigator.userAgent)){const Kn=appConfig.MODE,qn=getCookieDomain(Kn);api.set("CloudFront-Is-Apple-Viewer","true",{domain:qn})}},[]),reactExports.useEffect(()=>{(!kn||!Sn)&&(window.location.href=`${appConfig.ANTMAN_APP_URL}/not-found`)},[kn,Sn]);const Dn=()=>{const Kn=queryString.parse(window.location.search).inst;if(!(!Kn||typeof Kn=="object"))return Kn||void 0};return reactExports.useEffect(()=>{vn(lectureActions.setInstCode(Dn()))},[]),reactExports.useEffect(()=>{!(Nn!=null&&Nn.id)||!wn||trackMixpanelEvent(eventNames.LECTURE_VIEW_UNIT,{course_identification:`${wn.id}`,course_title:wn.title,unit_id:`${Sn}`,is_class_material:Nn.hasAttachment})},[Nn==null?void 0:Nn.id,wn]),Pn||Ln?jsx(LogoLoading,{styleWrapper:styleLogoLoading}):jsxs(Fragment,{children:[jsx(reactExports.Suspense,{fallback:jsx(LogoLoading,{styleWrapper:styleLogoLoading}),children:jsx(DeviceBranch,{desktopComponent:jsx(DesktopCourse,{}),mobileComponent:jsx(MobileCourse,{})})}),jsx(CompleteModal,{isOpened:sn,onClose:()=>vn(lectureActions.setIsCompleteModalOpened(!1))}),jsx(WriteReviewModal,{isOpened:ln,onClose:()=>vn(lectureActions.setIsReviewModalOpened(!1))}),jsx(RecommendReviewModal,{isOpened:dn,onClose:()=>vn(lectureActions.setIsRecommendReviewModalOpened(!1))})]})}function NotFound({title:sn,message:ln,linkTitle:cn,link:dn}){const pn="https://www.inflearn.com";return jsxs("section",{css:styleNotFoundSection,children:[jsx("header",{css:styleNotFoundHeader,children:jsx("a",{href:pn,children:jsx("img",{css:styleBrandLogo,src:"https://cdn.inflearn.com/assets/brand/brand_logo.png",alt:"inflearn logo"})})}),jsxs("div",{children:[jsxs("div",{css:styleNotFoundMessage,children:[jsx("h1",{children:sn||"해당 페이지를 찾지 못했습니다."}),jsx("p",{children:ln||"주소가 잘못되었거나 더 이상 제공되지 않는 페이지입니다."}),jsxs("a",{href:dn||pn,children:[cn||"메인페이지로 이동"," 🏠🏃🏻‍♀"]})]}),jsx("img",{css:styleNotFoundCat,src:"https://cdn.inflearn.com/assets/images/lost_pages/coding_cat.gif",alt:"developer cat"}),jsx("img",{css:styleNotFoundStamp,src:"https://cdn.inflearn.com/assets/brand/dojang.png",alt:"inflearn stamp"})]})]})}const styleNotFoundSection={name:"1crdin7",styles:"position:absolute;top:0;left:0;right:0;bottom:0;width:100%;height:100%;overflow:hidden"},styleNotFoundHeader={name:"1ojr9dm",styles:"padding:32px;text-align:center"},styleBrandLogo={name:"educr3",styles:"width:180px"},styleNotFoundMessage=css$1({width:"100%",padding:0,zIndex:9,[mediaQueries.tablet]:{position:"absolute",marginTop:"32px",padding:"64px"},"> h1":{padding:"0 16px",fontSize:"32px",marginBottom:"16px",[mediaQueries.tablet]:{padding:0,fontSize:"48px",marginBottom:"32px"}},"> p":{padding:"0 16px",fontSize:"24px",[mediaQueries.tablet]:{padding:0,fontSize:"32px",lineHeight:1.6}},"> a":{padding:"0 16px",color:"#1dc078",fontSize:"32px",[mediaQueries.tablet]:{padding:0}}},"",""),styleNotFoundCat=css$1({position:"absolute",right:0,bottom:"120px",width:"100%",[mediaQueries.tablet]:{position:"absolute",right:"-10%",bottom:0,width:"80%"}},"",""),styleNotFoundStamp=css$1({position:"absolute",bottom:"24px",right:0,maxWidth:"100px",maxHeight:"100px",[mediaQueries.tablet]:{position:"absolute",bottom:"16px",right:"16px",maxWidth:"100px",maxHeight:"100px"}},"",""),isAccountError=sn=>["/activity-log","/coach/alarm","/coach/weekly-goal","/institution"].some(ln=>sn.includes(ln)),isHackleError=sn=>{var dn;const ln=sn.error.message.includes("Request error"),cn=(dn=sn.error.handling_stack)==null?void 0:dn.includes("hackle");return ln&&cn},isRumErrorEvent=sn=>sn.error!==void 0;isDebugMode()&&appConfig.MODE!=="localhost"&&initLogger();datadogRum.init({applicationId:"a321fe62-4c8b-4f29-814f-b9a8f40ed7f2",clientToken:"pubba81abeb82534976f298f54d286f9c47",site:"datadoghq.com",service:"inflearn-lecture",env:appConfig.MODE,version:appConfig.COMMIT_HASH,sessionSampleRate:isBot(window.navigator.userAgent)?0:100,trackInteractions:!0,defaultPrivacyLevel:appConfig.DATADOG_RUM_PRIVACY_LEVEL,trackSessionAcrossSubdomains:!0,trackResources:!0,beforeSend:sn=>{const ln=isRumErrorEvent(sn);if(ln&&(IGNORE_ERRORS.includes(sn.error.message)||isHackleError(sn)))return!1;ln&&isAccountError(sn.error.message)&&(sn.context={...sn.context,cell:"account"})}}),datadogRum.startSessionReplayRecording();function App(){return useSetMobileVh(),jsxs(Routes,{children:[jsx(Route,{path:URL_LECTURE_V2,element:jsxs(ErrorBoundary,{FallbackComponent:AppErrorFallback,children:[jsx(Course,{}),jsx(Modals,{})]})}),jsx(Route,{path:"*",element:jsx(NotFound,{})})]})}var getRandomValues,rnds8=new Uint8Array(16);function rng(){if(!getRandomValues&&(getRandomValues=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!getRandomValues))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return getRandomValues(rnds8)}const REGEX=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function validate(sn){return typeof sn=="string"&&REGEX.test(sn)}var byteToHex=[];for(var i$1=0;i$1<256;++i$1)byteToHex.push((i$1+256).toString(16).substr(1));function stringify(sn){var ln=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,cn=(byteToHex[sn[ln+0]]+byteToHex[sn[ln+1]]+byteToHex[sn[ln+2]]+byteToHex[sn[ln+3]]+"-"+byteToHex[sn[ln+4]]+byteToHex[sn[ln+5]]+"-"+byteToHex[sn[ln+6]]+byteToHex[sn[ln+7]]+"-"+byteToHex[sn[ln+8]]+byteToHex[sn[ln+9]]+"-"+byteToHex[sn[ln+10]]+byteToHex[sn[ln+11]]+byteToHex[sn[ln+12]]+byteToHex[sn[ln+13]]+byteToHex[sn[ln+14]]+byteToHex[sn[ln+15]]).toLowerCase();if(!validate(cn))throw TypeError("Stringified UUID is invalid");return cn}function v4(sn,ln,cn){sn=sn||{};var dn=sn.random||(sn.rng||rng)();if(dn[6]=dn[6]&15|64,dn[8]=dn[8]&63|128,ln){cn=cn||0;for(var pn=0;pn<16;++pn)ln[cn+pn]=dn[pn];return ln}return stringify(dn)}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var extendStatics$1=function(sn,ln){return extendStatics$1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(cn,dn){cn.__proto__=dn}||function(cn,dn){for(var pn in dn)dn.hasOwnProperty(pn)&&(cn[pn]=dn[pn])},extendStatics$1(sn,ln)};function __extends$1(sn,ln){extendStatics$1(sn,ln);function cn(){this.constructor=sn}sn.prototype=ln===null?Object.create(ln):(cn.prototype=ln.prototype,new cn)}var __assign$1=function(){return __assign$1=Object.assign||function(ln){for(var cn,dn=1,pn=arguments.length;dn<pn;dn++){cn=arguments[dn];for(var vn in cn)Object.prototype.hasOwnProperty.call(cn,vn)&&(ln[vn]=cn[vn])}return ln},__assign$1.apply(this,arguments)};function __awaiter(sn,ln,cn,dn){function pn(vn){return vn instanceof cn?vn:new cn(function(kn){kn(vn)})}return new(cn||(cn=Promise))(function(vn,kn){function Sn(Nn){try{Pn(dn.next(Nn))}catch(Ln){kn(Ln)}}function wn(Nn){try{Pn(dn.throw(Nn))}catch(Ln){kn(Ln)}}function Pn(Nn){Nn.done?vn(Nn.value):pn(Nn.value).then(Sn,wn)}Pn((dn=dn.apply(sn,ln||[])).next())})}function __generator(sn,ln){var cn={label:0,sent:function(){if(vn[0]&1)throw vn[1];return vn[1]},trys:[],ops:[]},dn,pn,vn,kn;return kn={next:Sn(0),throw:Sn(1),return:Sn(2)},typeof Symbol=="function"&&(kn[Symbol.iterator]=function(){return this}),kn;function Sn(Pn){return function(Nn){return wn([Pn,Nn])}}function wn(Pn){if(dn)throw new TypeError("Generator is already executing.");for(;cn;)try{if(dn=1,pn&&(vn=Pn[0]&2?pn.return:Pn[0]?pn.throw||((vn=pn.return)&&vn.call(pn),0):pn.next)&&!(vn=vn.call(pn,Pn[1])).done)return vn;switch(pn=0,vn&&(Pn=[Pn[0]&2,vn.value]),Pn[0]){case 0:case 1:vn=Pn;break;case 4:return cn.label++,{value:Pn[1],done:!1};case 5:cn.label++,pn=Pn[1],Pn=[0];continue;case 7:Pn=cn.ops.pop(),cn.trys.pop();continue;default:if(vn=cn.trys,!(vn=vn.length>0&&vn[vn.length-1])&&(Pn[0]===6||Pn[0]===2)){cn=0;continue}if(Pn[0]===3&&(!vn||Pn[1]>vn[0]&&Pn[1]<vn[3])){cn.label=Pn[1];break}if(Pn[0]===6&&cn.label<vn[1]){cn.label=vn[1],vn=Pn;break}if(vn&&cn.label<vn[2]){cn.label=vn[2],cn.ops.push(Pn);break}vn[2]&&cn.ops.pop(),cn.trys.pop();continue}Pn=ln.call(sn,cn)}catch(Nn){Pn=[6,Nn],pn=0}finally{dn=vn=0}if(Pn[0]&5)throw Pn[1];return{value:Pn[0]?Pn[1]:void 0,done:!0}}}var ObjectUtil$1=function(){function sn(){}return sn.isNotNullOrUndefined=function(ln){return ln!=null},sn.isNullOrUndefined=function(ln){return ln==null},sn.requiredNotNullOrUndefined=function(ln,cn){if(cn===void 0&&(cn=function(){return"Required value is null or undefined"}),this.isNullOrUndefined(ln))throw new Error(cn());return ln},sn}(),CollectionUtil=function(){function sn(){}return sn.mapNotNullOrUndefined=function(ln,cn){for(var dn=Array(),pn=0,vn=ln;pn<vn.length;pn++){var kn=vn[pn],Sn=cn(kn);ObjectUtil$1.isNotNullOrUndefined(Sn)&&dn.push(Sn)}return dn},sn.associateTo=function(ln,cn,dn){for(var pn=0,vn=ln;pn<vn.length;pn++){var kn=vn[pn],Sn=dn(kn);cn.set(Sn[0],Sn[1])}return cn},sn.associate=function(ln,cn){return this.associateTo(ln,new Map,cn)},sn.associateBy=function(ln,cn){return this.associate(ln,function(dn){return[cn(dn),dn]})},sn.chunked=function(ln,cn){for(var dn=[],pn=ln.slice();pn.length;)dn.push(pn.splice(0,cn));return dn},sn}(),logLevels={DISABLE:0,ERROR:1,WARN:2,INFO:3,DEBUG:4},Logger=function(){function sn(){}return sn.setLogLevel=function(ln){ln===void 0&&(ln=logLevels.INFO),this.logLevel=ln},sn.initCounter=function(ln){this.counters=CollectionUtil.associate(Object.keys(logLevels),function(cn){return[cn,ln(cn)]})},sn._log=function(ln,cn){var dn;switch(ln){case"WARN":dn="orange";break;case"ERROR":dn="red";break;default:dn="#AAAAAA"}if(cn instanceof Error){ConsoleLogger.log(ln,dn,cn.message,cn);return}try{ConsoleLogger.log(ln,dn,cn)}catch{}},sn.increment=function(ln){var cn,dn;(dn=(cn=sn.counters)===null||cn===void 0?void 0:cn.get(ln))===null||dn===void 0||dn.increment()},sn.logLevel=logLevels.INFO,sn.log={error:function(ln){sn.logLevel>=logLevels.ERROR&&(sn._log("ERROR",ln),sn.increment("ERROR"))},warn:function(ln){sn.logLevel>=logLevels.WARN&&(sn._log("WARN",ln),sn.increment("WARN"))},info:function(ln){sn.logLevel>=logLevels.INFO&&(sn._log("INFO",ln),sn.increment("INFO"))},debug:function(ln){sn.logLevel>=logLevels.DEBUG&&(sn._log("DEBUG",ln),sn.increment("DEBUG"))}},sn}(),ConsoleLogger=function(){function sn(){}return sn.log=function(ln,cn,dn,pn){try{console.log("%c[".concat(ln,"] Hackle: ").concat(dn),"color: ".concat(cn))}catch{}},sn}(),DEFAULT_CLIENT_SDK_URL="https://client-sdk.hackle.io",DEFAULT_EVENT_URL="https://event.hackle.io",DEFAULT_MONITORING_URL="https://monitoring.hackle.io",SDK_KEY_HEADER="X-HACKLE-SDK-KEY",SDK_NAME_HEADER$1="X-HACKLE-SDK-NAME",SDK_VERSION_HEADER$1="X-HACKLE-SDK-VERSION",SDK_TIME_HEADER="X-HACKLE-SDK-TIME",SDK_VERSION="11.14.2",BROWSER_MIN_POOL_INTERVAL=3e4,BROWSER_BATCH_SIZE=100,METRIC_FLUSH_INTERVAL=1e3*60,BROWSER_FLUSH_INTERVAL=500,DEFAULT_ON_READY_TIMEOUT=3e3,ERROR_RETRY_BASE_WAIT_SECONDS_BY_ERROR_COUNT=[0,8,16,32,64,128,256,512],COOKIE_EXPIRE_DAYS=365*10,COOKIE_HID_KEY="_hackle_hid",COOKIE_USER_ID_KEY="_hackle_id",LOCAL_STORAGE_KEY_PREFIX="hackle-repository-storage",DEFAULT_SESSION_TIMEOUT_MILLIS=1e3*60*30,SESSION_ID_STORAGE_KEY="_hackle_session_id",LAST_EVENT_TIME_STORAGE_KEY="_hackle_last_event_ts",USER_ID_STORAGE_KEY="_hackle_uid",DEVICE_ID_STORAGE_KEY="_hackle_did",OVERRIDE_AB_STORAGE_PREFIX="hackle-manual-override_ab",OVERRIDE_FF_STORAGE_PREFIX="hackle-manual-override_ff",log$8=Logger.log;function getRequest(sn,ln){var cn=new Promise(function(dn,pn){var vn=new XMLHttpRequest;vn.open("GET",sn),vn.onreadystatechange=function(){if(vn.readyState===vn.DONE){if(vn.status===0){pn(new Error("Request error"));return}dn({statusCode:vn.status,body:vn.responseText})}},vn.onerror=function(){pn()},vn.setRequestHeader("content-type","application/json"),setHeaders(vn,ln),vn.send()});return{abort:function(){},responsePromise:cn}}function postRequest(sn,ln,cn,dn,pn){var vn=JSON.stringify(ln),kn=new XMLHttpRequest;kn.open("POST",sn),kn.onreadystatechange=function(){kn.readyState===kn.DONE&&(kn.status>=200&&kn.status<400?dn({statusCode:kn.status}):pn&&pn({statusCode:kn.status}))},kn.setRequestHeader("content-type","application/json"),setHeaders(kn,cn),kn.send(vn)}function setHeaders(sn,ln){for(var cn in ln)ln.hasOwnProperty(cn)&&sn.setRequestHeader(cn,ln[cn])}function sendBeacon(sn,ln,cn,dn,pn){var vn=!1;if(typeof window<"u"&&(vn=window&&window.navigator&&window.navigator.sendBeacon&&!0),vn){var kn=JSON.stringify(ln),Sn=new URLSearchParams;Sn.append("sdkName",cn[SDK_NAME_HEADER$1]),Sn.append("sdkVersion",cn[SDK_VERSION_HEADER$1]),Sn.append("sdkKey",cn[SDK_KEY_HEADER]),Sn.append("data",kn);var wn=window.navigator.sendBeacon(sn,Sn);if(!wn){log$8.error("sendBeacon failed to queue request."),pn();return}dn()}else log$8.error("Does not support sendBeacon"),pn()}var HttpRequest={getRequest,postRequest,sendBeacon},log$7=Logger.log,IdentifierUtil=function(){function sn(){}return sn.isEquals=function(ln,cn){if(cn==null)return!1;var dn=Object.keys(ln);return dn.length!==Object.keys(cn).length?!1:dn.every(function(pn){return ln[pn]===cn[pn]})},sn.sanitize=function(ln){var cn={};if(ObjectUtil$1.isNullOrUndefined(ln))return cn;for(var dn=0,pn=Object.entries(ln);dn<pn.length;dn++){var vn=pn[dn],kn=vn[0],Sn=vn[1];if(!this.isValidType(kn)){log$7.debug("Invalid identifier type. The identifier type must be a string of 128 characters or less. [".concat(kn,"]"));continue}var wn=this.sanitizeValue(Sn);if(ObjectUtil$1.isNullOrUndefined(wn)){log$7.debug("Invalid identifier value. The identifier type value be a string of 512 characters or less. [".concat(kn,"]"));continue}cn[kn]=wn}return cn},sn.isValidType=function(ln){return ObjectUtil$1.isNullOrUndefined(ln)?!1:typeof ln=="string"&&ln.length>0&&ln.length<=this.MAX_IDENTIFIER_TYPE_LENGTH},sn.sanitizeValue=function(ln){return typeof ln=="string"&&ln.length>0&&ln.length<=this.MAX_IDENTIFIER_VALUE_LENGTH?ln:typeof ln=="number"?ln.toString():null},sn.MAX_IDENTIFIER_TYPE_LENGTH=128,sn.MAX_IDENTIFIER_VALUE_LENGTH=512,sn}(),log$6=Logger.log,PropertyUtil=function(){function sn(){}return sn.sanitize=function(ln){var cn={};if(ObjectUtil$1.isNullOrUndefined(ln))return cn;for(var dn=0,pn=Object.entries(ln);dn<pn.length;dn++){var vn=pn[dn],kn=vn[0],Sn=vn[1];if(Object.keys(cn).length>=this.MAX_PROPERTIES_COUNT){log$6.debug("The number of properties cannot exceed 128. Drops excess properties. [".concat(kn,", ").concat(Sn,"]"));break}if(!this.isValidKey(kn)){log$6.debug("Invalid property key. The property key must be a string of 128 characters or less. [".concat(kn,"]"));continue}var wn=this.sanitizeValue(kn,Sn);if(ObjectUtil$1.isNullOrUndefined(wn)){log$6.debug("Invalid property value. The property value mus be 'string(..1024)', 'number', 'boolean', or 'array' type. [".concat(Sn,"]"));continue}cn[kn]=wn}return cn},sn.isValidProperty=function(ln,cn){return this.isValidKey(ln)&&this.isValidValue(cn)},sn.isValidKey=function(ln){return ObjectUtil$1.isNotNullOrUndefined(ln)&&typeof ln=="string"&&ln.length>0&&ln.length<=this.MAX_PROPERTY_KEY_LENGTH},sn.sanitizeValue=function(ln,cn){var dn=this;return ln.startsWith(this.SYSTEM_PROPERTY_KEY_PREFIX)?cn:this.isValidValue(cn)?Array.isArray(cn)?cn.filter(function(pn){return dn.isValidElement(pn)}):cn:null},sn.isValidValue=function(ln){return ObjectUtil$1.isNullOrUndefined(ln)?!1:typeof ln=="string"?ln.length<=this.MAX_PROPERTY_VALUE_LENGTH:typeof ln=="number"?!isNaN(ln)&&isFinite(ln):typeof ln=="boolean"||Array.isArray(ln)},sn.isValidElement=function(ln){return ObjectUtil$1.isNullOrUndefined(ln)?!1:typeof ln=="string"?ln.length>0&&ln.length<=this.MAX_PROPERTY_VALUE_LENGTH:typeof ln=="number"},sn.SYSTEM_PROPERTY_KEY_PREFIX="$",sn.MAX_PROPERTIES_COUNT=128,sn.MAX_PROPERTY_KEY_LENGTH=128,sn.MAX_PROPERTY_VALUE_LENGTH=1024,sn}(),log$5=Logger.log,RemoteConfigDecision=function(){function sn(ln,cn){this.value=ln,this.reason=cn}return sn.of=function(ln,cn){return new sn(ln,cn)},sn}(),Decision=function(){function sn(ln,cn,dn){this.variation=ln,this.reason=cn,this.config=dn}return sn.of=function(ln,cn,dn){return dn===void 0&&(dn=new EmptyParameterConfig),new sn(ln,cn,dn)},sn.prototype.get=function(ln,cn){switch(typeof cn){case"string":return this.config.get(ln,cn);case"number":return this.config.get(ln,cn);case"boolean":return this.config.get(ln,cn);default:return this.config.get(ln,cn)}},sn}(),FeatureFlagDecision=function(){function sn(ln,cn,dn){this.isOn=ln,this.reason=cn,this.config=dn}return sn.on=function(ln,cn){return cn===void 0&&(cn=new EmptyParameterConfig),new sn(!0,ln,cn)},sn.off=function(ln,cn){return cn===void 0&&(cn=new EmptyParameterConfig),new sn(!1,ln,cn)},sn.prototype.get=function(ln,cn){switch(typeof cn){case"string":return this.config.get(ln,cn);case"number":return this.config.get(ln,cn);case"boolean":return this.config.get(ln,cn);default:return this.config.get(ln,cn)}},sn}(),EmptyParameterConfig=function(){function sn(){}return sn.prototype.get=function(ln,cn){return cn},sn}(),DecisionReason=function(){function sn(){}return sn.SDK_NOT_READY="SDK_NOT_READY",sn.EXCEPTION="EXCEPTION",sn.INVALID_INPUT="INVALID_INPUT",sn.EXPERIMENT_NOT_FOUND="EXPERIMENT_NOT_FOUND",sn.EXPERIMENT_DRAFT="EXPERIMENT_DRAFT",sn.EXPERIMENT_PAUSED="EXPERIMENT_PAUSED",sn.EXPERIMENT_COMPLETED="EXPERIMENT_COMPLETED",sn.OVERRIDDEN="OVERRIDDEN",sn.TRAFFIC_NOT_ALLOCATED="TRAFFIC_NOT_ALLOCATED",sn.NOT_IN_MUTUAL_EXCLUSION_EXPERIMENT="NOT_IN_MUTUAL_EXCLUSION_EXPERIMENT",sn.IDENTIFIER_NOT_FOUND="IDENTIFIER_NOT_FOUND",sn.VARIATION_DROPPED="VARIATION_DROPPED",sn.TRAFFIC_ALLOCATED="TRAFFIC_ALLOCATED",sn.TRAFFIC_ALLOCATED_BY_TARGETING="TRAFFIC_ALLOCATED_BY_TARGETING",sn.NOT_IN_EXPERIMENT_TARGET="NOT_IN_EXPERIMENT_TARGET",sn.FEATURE_FLAG_NOT_FOUND="FEATURE_FLAG_NOT_FOUND",sn.FEATURE_FLAG_INACTIVE="FEATURE_FLAG_INACTIVE",sn.INDIVIDUAL_TARGET_MATCH="INDIVIDUAL_TARGET_MATCH",sn.TARGET_RULE_MATCH="TARGET_RULE_MATCH",sn.DEFAULT_RULE="DEFAULT_RULE",sn.REMOTE_CONFIG_PARAMETER_NOT_FOUND="REMOTE_CONFIG_PARAMETER_NOT_FOUND",sn.TYPE_MISMATCH="TYPE_MISMATCH",sn}(),Experiment=function(){function sn(ln,cn,dn,pn,vn,kn,Sn,wn,Pn,Nn,Ln,Fn,zn,Dn){this.id=ln,this.key=cn,this.type=dn,this.identifierType=pn,this.status=vn,this.version=kn,this.variations=Sn,this.userOverrides=wn,this.segmentOverrides=Pn,this.targetAudiences=Nn,this.targetRules=Ln,this.defaultRule=Fn,this.containerId=zn,this._winnerVariationId=Dn}return sn.prototype._winnerVariationOrNull=function(){if(this._winnerVariationId)return this._getVariationByIdOrNull(this._winnerVariationId)},sn.prototype._getVariationByIdOrNull=function(ln){return this.variations.find(function(cn){return cn.id===ln})},sn.prototype._getVariationByKeyOrNull=function(ln){return this.variations.find(function(cn){return cn.key===ln})},sn}(),Variation=function(){function sn(ln,cn,dn,pn){this.id=ln,this.key=cn,this.isDropped=dn,this.parameterConfigurationId=pn}return sn}(),Bucket=function(){function sn(ln,cn,dn){this.seed=ln,this.slotSize=cn,this.slots=dn}return sn}(),Slot=function(){function sn(ln,cn,dn){this.startInclusive=ln,this.endExclusive=cn,this.variationId=dn}return sn.prototype.contains=function(ln){return this.startInclusive<=ln&&ln<this.endExclusive},sn}(),EventType=function(){function sn(ln,cn){this.id=ln,this.key=cn}return sn}(),IdentifierType=function(){function sn(){}return sn.ID="$id",sn.USER="$userId",sn.DEVICE="$deviceId",sn.SESSION="$sessionId",sn.HACKLE_DEVICE="$hackleDeviceId",sn}(),IdentifiersBuilder=function(){function sn(){this.identifiers={}}return sn.prototype.addIdentifiers=function(ln){for(var cn in ln)this.add(cn,ln[cn]);return this},sn.prototype.add=function(ln,cn){var dn=IdentifierUtil.sanitizeValue(cn);return IdentifierUtil.isValidType(ln)&&dn?this.identifiers[ln]=cn:log$5.warn("Invalid user identifier [type=".concat(ln,", value=").concat(cn,"]")),this},sn.prototype.build=function(){return this.identifiers},sn}(),isValidUser=function(sn){return!!(sn.id||sn.userId||sn.deviceId||sn.identifiers&&Object.keys(sn.identifiers).length>0)},sanitizeUser=function(sn){var ln,cn,dn,pn={};return pn.id=(ln=IdentifierUtil.sanitizeValue(sn.id))!==null&&ln!==void 0?ln:void 0,pn.userId=(cn=IdentifierUtil.sanitizeValue(sn.userId))!==null&&cn!==void 0?cn:void 0,pn.deviceId=(dn=IdentifierUtil.sanitizeValue(sn.deviceId))!==null&&dn!==void 0?dn:void 0,typeof sn.properties=="object"&&(pn.properties=PropertyUtil.sanitize(sn.properties)),typeof sn.identifiers=="object"&&(pn.identifiers=IdentifierUtil.sanitize(sn.identifiers)),isValidUser(pn)?pn:null},Target=function(){function sn(ln){this.conditions=ln}return sn}(),TargetCondition=function(){function sn(ln,cn){this.key=ln,this.match=cn}return sn}(),TargetKey=function(){function sn(ln,cn){this.type=ln,this.name=cn}return sn}(),TargetMatch=function(){function sn(ln,cn,dn,pn){this.type=ln,this.operator=cn,this.valueType=dn,this.values=pn}return sn}(),TargetAction=function(){function sn(ln,cn,dn){this.type=ln,this.variationId=cn,this.bucketId=dn}return sn}(),TargetRule=function(){function sn(ln,cn){this.target=ln,this.action=cn}return sn}(),Segment=function(){function sn(ln,cn,dn,pn){this.id=ln,this.key=cn,this.type=dn,this.targets=pn}return sn}(),Container=function(){function sn(ln,cn,dn){this.id=ln,this.bucketId=cn,this.groups=dn}return sn.prototype.getGroupOrNull=function(ln){return this.groups.find(function(cn){return cn.id===ln})},sn}(),ContainerGroup=function(){function sn(ln,cn){this.id=ln,this.experiments=cn}return sn}(),ParameterConfiguration=function(){function sn(ln,cn){this.id=ln,this.parameters=cn}return sn.prototype.get=function(ln,cn){var dn=this.parameters.get(ln);return ObjectUtil$1.isNullOrUndefined(dn)?cn:ObjectUtil$1.isNullOrUndefined(cn)||typeof dn==typeof cn?dn:cn},sn}(),RemoteConfigParameter=function(){function sn(ln,cn,dn,pn,vn,kn){this.id=ln,this.key=cn,this.type=dn,this.identifierType=pn,this.targetRules=vn,this.defaultValue=kn}return sn}(),RemoteConfigTargetRule=function(){function sn(ln,cn,dn,pn,vn){this.key=ln,this.name=cn,this.target=dn,this.bucketId=pn,this.value=vn}return sn}(),RemoteConfigParameterValue=function(){function sn(ln,cn){this.id=ln,this.rawValue=cn}return sn}();function compareValues(sn,ln){return sn-ln}var Version=function(){function sn(ln,cn,dn){this.coreVersion=ln,this.prerelease=cn,this.build=dn}return sn.tryParse=function(ln){var cn=sn.regExp.exec(ln);if(cn){cn[0];var dn=cn[1],pn=cn[2],vn=pn===void 0?"0":pn,kn=cn[3],Sn=kn===void 0?"0":kn,wn=cn[4],Pn=cn[5],Nn=new CoreVersion(parseInt(dn,10),parseInt(vn,10),parseInt(Sn,10));return new sn(Nn,MetaVersion.parse(wn),MetaVersion.parse(Pn))}},sn.prototype.compareTo=function(ln){return this.coreVersion.compareTo(ln.coreVersion)||this.prerelease.compareTo(ln.prerelease)},sn.prototype.isEqualTo=function(ln){return this.compareTo(ln)===0},sn.prototype.isGreaterThan=function(ln){return this.compareTo(ln)>0},sn.prototype.isGreaterThanOrEqualTo=function(ln){return this.compareTo(ln)>=0},sn.prototype.isLessThan=function(ln){return this.compareTo(ln)<0},sn.prototype.isLessThanOrEqualTo=function(ln){return this.compareTo(ln)<=0},sn.regExp=/^(0|[1-9]\d*)(?:\.(0|[1-9]\d*))?(?:\.(0|[1-9]\d*))?(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?$/,sn}(),CoreVersion=function(){function sn(ln,cn,dn){this.major=ln,this.minor=cn,this.patch=dn}return sn.prototype.compareTo=function(ln){return compareValues(this.major,ln.major)||compareValues(this.minor,ln.minor)||compareValues(this.patch,ln.patch)},sn}(),MetaVersion=function(){function sn(ln){this.identifiers=ln}return sn.parse=function(ln){return ln?new sn(ln.split(".")):sn.EMPTY},sn.prototype.isEmpty=function(){return this.identifiers.length===0},sn.prototype.isNotEmpty=function(){return!this.isEmpty()},sn.prototype.compareTo=function(ln){return this.isEmpty()&&ln.isEmpty()?0:this.isEmpty()&&ln.isNotEmpty()?1:this.isNotEmpty()&&ln.isEmpty()?-1:this.compareIdentifiers(ln)},sn.prototype.compareIdentifiers=function(ln){for(var cn=Math.min(this.identifiers.length,ln.identifiers.length),dn=0;dn<cn;dn++){var pn=sn.compareIdentifiers(this.identifiers[dn],ln.identifiers[dn]);if(pn!==0)return pn}return compareValues(this.identifiers.length,ln.identifiers.length)},sn.compareIdentifiers=function(ln,cn){return sn.numericIdentifierRegExp.test(ln)&&sn.numericIdentifierRegExp.test(cn)?compareValues(+ln,+cn):ln===cn?0:ln<cn?-1:1},sn.EMPTY=new sn([]),sn.numericIdentifierRegExp=/^(0|[1-9]\d*)$/,sn}(),MATCH_TYPES=["MATCH","NOT_MATCH"],MATCH_VALUE_TYPES=["STRING","NUMBER","BOOLEAN","VERSION","JSON","NULL","UNKNOWN"],MATCH_OPERATORS=["IN","CONTAINS","STARTS_WITH","ENDS_WITH","GT","GTE","LT","LTE"],TARGET_ACTION_TYPES=["VARIATION","BUCKET"],TARGET_KEY_TYPES=["USER_ID","USER_PROPERTY","HACKLE_PROPERTY","SEGMENT","AB_TEST","FEATURE_FLAG"],SEGMENT_TYPES=["USER_ID","USER_PROPERTY"],TargetingType=function(){function sn(){for(var ln=[],cn=0;cn<arguments.length;cn++)ln[cn]=arguments[cn];this.supportedKeyTypes=ln}return sn.prototype.supports=function(ln){return this.supportedKeyTypes.includes(ln)},sn.IDENTIFIER=new sn("SEGMENT"),sn.PROPERTY=new sn("SEGMENT","USER_PROPERTY","HACKLE_PROPERTY","AB_TEST","FEATURE_FLAG"),sn.SEGMENT=new sn("USER_ID","USER_PROPERTY","HACKLE_PROPERTY"),sn}(),TimeUtil=function(){function sn(){}return sn.nanosToUnit=function(ln,cn){switch(cn){case"microseconds":return ln/(sn.C1/sn.C0);case"milliseconds":return ln/(sn.C2/sn.C0);case"seconds":return ln/(sn.C3/sn.C0);case"nanoseconds":default:return ln}},sn.microsToUnit=function(ln,cn){switch(cn){case"nanoseconds":return ln*(sn.C1/sn.C0);case"milliseconds":return ln/(sn.C2/sn.C1);case"seconds":return ln/(sn.C3/sn.C1);case"microseconds":default:return ln}},sn.millisToUnit=function(ln,cn){switch(cn){case"nanoseconds":return ln*(sn.C2/sn.C0);case"microseconds":return ln*(sn.C2/sn.C1);case"seconds":return ln/(sn.C3/sn.C2);case"milliseconds":default:return ln}},sn.secondsToUnit=function(ln,cn){switch(cn){case"nanoseconds":return ln*(sn.C3/sn.C0);case"microseconds":return ln*(sn.C3/sn.C1);case"milliseconds":return ln*(sn.C3/sn.C2);case"seconds":default:return ln}},sn.C0=1,sn.C1=sn.C0*1e3,sn.C2=sn.C1*1e3,sn.C3=sn.C2*1e3,sn.converter={nanoseconds:sn.nanosToUnit,microseconds:sn.microsToUnit,milliseconds:sn.millisToUnit,seconds:sn.secondsToUnit},sn}(),SystemClock=function(){function sn(){}return sn.prototype.tick=function(){return Date.now()*1e3},sn.prototype.currentMillis=function(){return Date.now()},sn.instance=new sn,sn}(),TimerBuilder=function(){function sn(ln){this.name=ln,this._tags={},this.name=ln}return sn.prototype.tags=function(ln){var cn=this;return Object.entries(ln).forEach(function(dn){var pn=dn[0],vn=dn[1];cn._tags[pn]=vn}),this},sn.prototype.tag=function(ln,cn){return this._tags[ln]=cn,this},sn.prototype.register=function(ln){return ln.registerTimer({name:this.name,tags:this._tags,type:"TIMER"})},sn}(),TimerSample=function(){function sn(ln){this._clock=ln,this.startTime=this._clock.tick()}return sn.start=function(ln){return ln===void 0&&(ln=sn.defaultClock),new sn(ln)},sn.prototype.stop=function(ln){var cn=this._clock.tick(),dn=cn-this.startTime;ln.record(dn,"microseconds")},sn.defaultClock=new SystemClock,sn}();function isTimerMetric(sn){return sn.id.type==="TIMER"}var CounterBuilder=function(){function sn(ln){this.name=ln,this._tags={}}return sn.prototype.tags=function(ln){var cn=this;return Object.entries(ln).forEach(function(dn){var pn=dn[0],vn=dn[1];cn._tags[pn]=vn}),this},sn.prototype.tag=function(ln,cn){return this._tags[ln]=cn,this},sn.prototype.register=function(ln){return ln.registerCounter({name:this.name,tags:this._tags,type:"COUNTER"})},sn}();function isCounterMetric(sn){return sn.id.type==="COUNTER"}var Measurement=function(){function sn(ln,cn){this.valueSupplier=cn,this.field=ln}return Object.defineProperty(sn.prototype,"value",{get:function(){return this.valueSupplier()},enumerable:!1,configurable:!0}),sn}();function isMetricIdEqual(sn,ln){return sn.name===ln.name&&IdentifierUtil.isEquals(sn.tags,ln.tags)}var CumulativeCounter=function(){function sn(ln){this.counterValue=0,this.id=ln}return sn.prototype.count=function(){return this.counterValue},sn.prototype.increment=function(ln){this.counterValue+=ln??1},sn.prototype.measure=function(){return[new Measurement("count",this.count.bind(this))]},sn}(),FlushCounter=function(){function sn(ln){this.id=ln,this.currentCounter=new CumulativeCounter(ln)}return sn.prototype.flush=function(){var ln=this.currentCounter;return this.currentCounter=new CumulativeCounter(this.id),ln},sn.prototype.count=function(){return this.currentCounter.count()},sn.prototype.increment=function(ln){this.currentCounter.increment(ln)},sn.prototype.measure=function(){return[new Measurement("count",this.count.bind(this))]},sn}(),Comparable=function(){function sn(ln){this.compareFn=ln,this.data=new Map,this.compareFn=ln,this.data=new Map}return sn.prototype.values=function(){return Array.from(this.data.values())},sn.prototype.keys=function(){return Array.from(this.data.keys())},sn.prototype.get=function(ln){var cn=this,dn=this.keys().find(function(pn){return cn.compareFn(pn,ln)});return dn?this.data.get(dn):void 0},sn.prototype.has=function(ln){return this.get(ln)!==void 0},sn.prototype.add=function(ln,cn){var dn=cn;return dn||(dn=ln),this.data.set(ln,dn),this},sn.prototype.delete=function(ln){if(this.has(ln)){var cn=this.get(ln);return this.data.delete(ln),cn}},sn.prototype.forEach=function(ln){this.data.forEach(ln)},sn.prototype.entries=function(){return Array.from(this.data.entries())},sn}(),MetricRegistry=function(){function sn(){this.id=v4(),this.name="MetricRegistry",this._metrics=new Comparable(isMetricIdEqual)}return Object.defineProperty(sn.prototype,"metrics",{get:function(){return Array.from(this._metrics.values())},enumerable:!1,configurable:!0}),sn.prototype.registerCounter=function(ln){return this.registerMetricIfNecessary(ln,this.createCounter.bind(this))},sn.prototype.registerTimer=function(ln){return this.registerMetricIfNecessary(ln,this.createTimer.bind(this))},sn.prototype.counter=function(ln,cn){return cn===void 0&&(cn={}),new CounterBuilder(ln).tags(cn).register(this)},sn.prototype.timer=function(ln,cn){return cn===void 0&&(cn={}),new TimerBuilder(ln).tags(cn).register(this)},sn.prototype.registerMetricIfNecessary=function(ln,cn){return this.getOrCreateMetric(ln,cn)},sn.prototype.getOrCreateMetric=function(ln,cn){var dn,pn=this._metrics.get(ln);return pn?dn=pn:(dn=cn(ln),this._metrics.add(ln,dn)),dn},sn.prototype.close=function(){},sn}(),PushMetricRegistry=function(sn){__extends$1(ln,sn);function ln(cn){var dn=sn.call(this)||this;return dn.pushIntervalMillis=cn,dn.currentIntervalId=void 0,dn.pushIntervalMillis=cn,dn}return ln.prototype.start=function(){var cn=this;this.currentIntervalId===void 0&&(this.currentIntervalId=setInterval(function(){cn.publish()},this.pushIntervalMillis),Logger.log.debug("PushMetricRegistry started. Publish metrics every ".concat(this.pushIntervalMillis,"ms.")))},ln.prototype.stop=function(){this.currentIntervalId!==void 0&&(clearInterval(this.currentIntervalId),this.currentIntervalId=void 0,this.publish(),Logger.log.debug("PushMetricRegistry stopped."))},ln.prototype.close=function(){this.stop()},ln}(MetricRegistry);function isFlushMetric(sn){return typeof sn.flush<"u"&&typeof sn.flush=="function"}var CumulativeTimer=function(){function sn(ln){this._count=0,this._total=0,this._max=0,this.id=ln}return sn.prototype.count=function(){return this._count},sn.prototype.totalTime=function(ln){return TimeUtil.nanosToUnit(this._total,ln)},sn.prototype.max=function(ln){return TimeUtil.nanosToUnit(this._max,ln)},sn.prototype.mean=function(ln){return this.count()===0?0:this.totalTime(ln)/this.count()},sn.prototype.record=function(ln,cn){if(!(ln<0)){var dn=TimeUtil.converter[cn](ln,"nanoseconds");this._count=this.count()+1,this._total+=dn,this._max=Math.max(dn,this._max)}},sn.prototype.measure=function(){var ln=this;return[new Measurement("count",this.count.bind(this)),new Measurement("total",function(){return ln.totalTime("milliseconds")}),new Measurement("max",function(){return ln.max("milliseconds")}),new Measurement("mean",function(){return ln.mean("milliseconds")})]},sn}(),FlushTimer=function(){function sn(ln){this.id=ln,this.currentTimer=new CumulativeTimer(ln)}return sn.prototype.flush=function(){var ln=this.currentTimer;return this.currentTimer=new CumulativeTimer(this.id),ln},sn.prototype.count=function(){return this.currentTimer.count()},sn.prototype.totalTime=function(ln){return this.currentTimer.totalTime(ln)},sn.prototype.max=function(ln){return this.currentTimer.max(ln)},sn.prototype.record=function(ln,cn){this.currentTimer.record(ln,cn)},sn.prototype.mean=function(ln){return this.count()===0?0:this.totalTime(ln)/this.count()},sn.prototype.measure=function(){var ln=this;return[new Measurement("count",this.count.bind(this)),new Measurement("total",function(){return ln.totalTime("milliseconds")}),new Measurement("max",function(){return ln.max("milliseconds")}),new Measurement("mean",function(){return ln.mean("milliseconds")})]},sn}(),FlushMetricRegistry=function(sn){__extends$1(ln,sn);function ln(cn){return sn.call(this,cn)||this}return ln.prototype.createCounter=function(cn){return new FlushCounter(cn)},ln.prototype.createTimer=function(cn){return new FlushTimer(cn)},ln.prototype.publish=function(){var cn=this.metrics.reduce(function(dn,pn){return isFlushMetric(pn)?dn.concat(pn.flush()):dn},[]);this.flushMetrics(cn)},ln.prototype.close=function(){sn.prototype.close.call(this)},ln}(PushMetricRegistry),NoopCounter=function(){function sn(ln){this.id=ln}return sn.prototype.count=function(){return 0},sn.prototype.increment=function(ln){},sn.prototype.measure=function(){return[new Measurement("count",this.count.bind(this))]},sn}(),DelegatingCounter=function(){function sn(ln){this._counters=new Comparable(function(cn,dn){return cn.id===dn.id}),this.id=ln,this.noopCounter=new NoopCounter(ln)}return Object.defineProperty(sn.prototype,"counters",{get:function(){return Array.from(this._counters.values())},enumerable:!1,configurable:!0}),sn.prototype.add=function(ln){this._counters.add(ln,ln.registerCounter(this.id))},sn.prototype.count=function(){return(this.counters[0]||this.noopCounter).count()},sn.prototype.increment=function(ln){this.counters.forEach(function(cn){cn.increment(ln)})},sn.prototype.measure=function(){return[new Measurement("count",this.count.bind(this))]},sn}();function isDelegatingMetric(sn){return typeof sn.add<"u"&&typeof sn.add=="function"}var NoopTimer=function(){function sn(ln){this.id=ln}return sn.prototype.measure=function(){var ln=this;return[new Measurement("count",this.count.bind(this)),new Measurement("total",function(){return ln.totalTime("milliseconds")}),new Measurement("max",function(){return ln.max("milliseconds")}),new Measurement("mean",function(){return ln.mean("milliseconds")})]},sn.prototype.count=function(){return 0},sn.prototype.totalTime=function(ln){return 0},sn.prototype.max=function(ln){return 0},sn.prototype.mean=function(ln){return 0},sn.prototype.record=function(ln,cn){},sn}(),DelegatingTimer=function(){function sn(ln){this._timers=new Comparable(function(cn,dn){return cn.id===dn.id}),this.id=ln,this.noopTimer=new NoopTimer(ln)}return Object.defineProperty(sn.prototype,"firstTimer",{get:function(){return this.timers[0]||this.noopTimer},enumerable:!1,configurable:!0}),sn.prototype.totalTime=function(ln){return this.firstTimer.totalTime(ln)},sn.prototype.max=function(ln){return this.firstTimer.max(ln)},sn.prototype.mean=function(ln){return this.firstTimer.mean(ln)},sn.prototype.record=function(ln,cn){this.timers.forEach(function(dn){dn.record(ln,cn)})},Object.defineProperty(sn.prototype,"timers",{get:function(){return Array.from(this._timers.values())},enumerable:!1,configurable:!0}),sn.prototype.add=function(ln){this._timers.add(ln,ln.registerTimer(this.id))},sn.prototype.count=function(){return this.firstTimer.count()},sn.prototype.measure=function(){var ln=this;return[new Measurement("count",this.count.bind(this)),new Measurement("total",function(){return ln.totalTime("milliseconds")}),new Measurement("max",function(){return ln.max("milliseconds")}),new Measurement("mean",function(){return ln.mean("milliseconds")})]},sn}(),DelegatingMetricRegistry=function(sn){__extends$1(ln,sn);function ln(){var cn=sn!==null&&sn.apply(this,arguments)||this;return cn.registries=new Comparable(function(dn,pn){return dn.id===pn.id}),cn}return ln.prototype.createCounter=function(cn){var dn=new DelegatingCounter(cn);return this.addRegistry(dn),dn},ln.prototype.createTimer=function(cn){var dn=new DelegatingTimer(cn);return this.addRegistry(dn),dn},ln.prototype.addRegistry=function(cn){this.registries.forEach(function(dn){return cn.add(dn)})},ln.prototype.add=function(cn){cn instanceof ln||this.registries.has(cn)||(this.registries.add(cn),this.metrics.forEach(function(dn){isDelegatingMetric(dn)&&dn.add(cn)}))},ln.prototype.close=function(){this.registries.forEach(function(cn){cn.close()})},ln}(MetricRegistry),Metrics=function(){function sn(){}return sn.counter=function(ln,cn){return sn.globalRegistry.counter(ln,cn)},sn.timer=function(ln,cn){return sn.globalRegistry.timer(ln,cn)},sn.addRegistry=function(ln){sn.globalRegistry.add(ln),Logger.log.debug("MetricRegistry added ".concat(ln.name))},sn.globalRegistry=new DelegatingMetricRegistry,sn}(),MonitoringMetricRegistry=function(sn){__extends$1(ln,sn);function ln(cn,dn,pn,vn,kn){var Sn=sn.call(this,dn)||this;return Sn.monitoringBaseUrl=cn,Sn.httpClient=pn,Sn.httpHeader=vn,Sn.useBeacon=kn,Sn.monitoringEndPoint="".concat(Sn.monitoringBaseUrl,"/metrics"),Sn.shouldUseBeacon=!1,Sn.start(),Sn.monitoringBaseUrl=cn,Sn}return ln.prototype.flushMetrics=function(cn){var dn=this;CollectionUtil.chunked(cn.filter(this.isDispatchTarget.bind(this)),BROWSER_BATCH_SIZE).forEach(function(pn){dn.dispatch(pn)})},ln.prototype.isDispatchTarget=function(cn){return isCounterMetric(cn)||isTimerMetric(cn)?cn.count()>0:!1},ln.prototype.dispatch=function(cn){if(this.useBeacon&&this.shouldUseBeacon){this.httpClient.sendBeacon(this.monitoringEndPoint,this.batch(cn),this.httpHeader,function(){Logger.log.debug("Beacon called.")});return}this.httpClient.postRequest(this.monitoringEndPoint,this.batch(cn),this.httpHeader,function(){},function(){Logger.log.debug("Failed to flushing metrics.")})},ln.prototype.batch=function(cn){return{metrics:cn.map(function(dn){return{name:dn.id.name,type:dn.id.type,tags:dn.id.tags,measurements:Object.fromEntries(CollectionUtil.associate(dn.measure(),function(pn){return[pn.field,pn.value]}))}})}},ln.prototype.createCounter=function(cn){return new FlushCounter(cn)},ln.prototype.createTimer=function(cn){return new FlushTimer(cn)},ln.prototype.close=function(){this.shouldUseBeacon=!0,sn.prototype.close.call(this)},ln}(FlushMetricRegistry),DecisionMetrics=function(){function sn(){}return sn.experiment=function(ln,cn,dn){var pn=Metrics.timer("experiment.decision",{key:String(cn),variation:dn.variation,reason:String(dn.reason)});ln.stop(pn)},sn.featureFlag=function(ln,cn,dn){var pn=Metrics.timer("feature.flag.decision",{key:String(cn),on:String(dn.isOn),reason:String(dn.reason)});ln.stop(pn)},sn.remoteConfig=function(ln,cn,dn){var pn=Metrics.timer("remote.config.decision",{key:String(cn),reason:String(dn.reason)});ln.stop(pn)},sn}(),ApiCallMetrics=function(){function sn(){}return sn.record=function(ln,cn,dn){var pn=Metrics.timer("api.call",{operation:ln,success:String(dn)});cn.stop(pn)},sn}(),HackleRemoteConfigDecider=function(){function sn(){}return sn.decide=function(ln,cn,dn,pn){if(ObjectUtil$1.isNullOrUndefined(dn))return this.decision(ln,cn,"NULL",dn,pn);switch(typeof dn){case"string":return this.decision(ln,cn,"STRING",dn,pn);case"number":return this.decision(ln,cn,"NUMBER",dn,pn);case"boolean":return this.decision(ln,cn,"BOOLEAN",dn,pn);default:return this.decision(ln,cn,"UNKNOWN",dn,pn)}},sn.decision=function(ln,cn,dn,pn,vn){return ObjectUtil$1.isNullOrUndefined(cn)?RemoteConfigDecision.of(pn,DecisionReason.INVALID_INPUT):ln.remoteConfig(cn,vn,dn,pn)},sn}(),log$4=Logger.log,HackleRemoteConfigImpl=function(){function sn(ln,cn,dn,pn){this.core=ln,this.userManager=cn,this.hackleUserResolver=dn,this.user=pn}return sn.prototype.get=function(ln,cn){var dn=TimerSample.start(),pn;try{pn=this.decide(ln,cn)}catch(vn){log$4.error("Unexpected exception while deciding remote config parameter[".concat(ln,"]. Returning default value. : ").concat(vn)),pn=RemoteConfigDecision.of(cn,DecisionReason.EXCEPTION)}return DecisionMetrics.remoteConfig(dn,ln,pn),pn.value},sn.prototype.decide=function(ln,cn){var dn=this.userManager.resolveCurrentOrNull(this.user);if(!dn)return log$4.warn("invalid user"),RemoteConfigDecision.of(cn,DecisionReason.INVALID_INPUT);var pn=this.hackleUserResolver.resolve(dn);return HackleRemoteConfigDecider.decide(this.core,ln,cn,pn)},sn}(),log$3=Logger.log,HackleClientImpl=function(){function sn(ln,cn,dn,pn,vn){this.core=ln,this.hackleUserResolver=cn,this.sessionManager=dn,this.userManager=pn,this.devTools=vn}return sn.prototype.getSessionId=function(){return this.sessionManager.sessionId},sn.prototype.getUser=function(){return this.userManager.currentUser},sn.prototype.setUser=function(ln){try{var cn=sanitizeUser(ln);if(!cn){log$3.warn("invalid user");return}this.userManager.setUser(cn)}catch(dn){log$3.error("Unexpected exception while set user: ".concat(dn))}},sn.prototype.setUserId=function(ln){try{ln===void 0&&this.userManager.setUserId(void 0);var cn=IdentifierUtil.sanitizeValue(ln);if(!cn){log$3.warn("Invalid userId. [userId=".concat(ln,"]"));return}this.userManager.setUserId(cn)}catch(dn){log$3.error("Unexpected exception while set userId: ".concat(dn))}},sn.prototype.setDeviceId=function(ln){try{var cn=IdentifierUtil.sanitizeValue(ln);if(!cn){log$3.warn("Invalid deviceId. [deviceId=".concat(ln,"]"));return}this.userManager.setDeviceId(ln)}catch(dn){log$3.error("Unexpected exception while set deviceId: ".concat(dn))}},sn.prototype.setUserProperty=function(ln,cn){try{if(!PropertyUtil.isValidKey(ln)){log$3.warn("Invalid property key. [key=".concat(ln,"]"));return}if(!PropertyUtil.isValidValue(cn)){log$3.warn("Invalid property value. [key=".concat(cn,"]"));return}this.userManager.setUserProperty(ln,cn)}catch(dn){log$3.error("Unexpected exception while set userProperty: ".concat(dn))}},sn.prototype.setUserProperties=function(ln){try{var cn=PropertyUtil.sanitize(ln);this.userManager.setUserProperties(cn)}catch(dn){log$3.error("Unexpected exception while set userProperties: ".concat(dn))}},sn.prototype.resetUser=function(){try{this.userManager.resetUser()}catch(ln){log$3.error("Unexpected exception while reset user: ".concat(ln))}},sn.prototype.variation=function(ln,cn,dn){return this.variationDetail(ln,cn,dn).variation},sn.prototype.variationDetail=function(ln,cn,dn){var pn=dn||"A",vn=TimerSample.start(),kn=function(Sn){try{var wn=Sn.userManager.resolveCurrentOrNull(cn);if(!wn)return log$3.warn("invalid user"),Decision.of(pn,DecisionReason.INVALID_INPUT);var Pn=Sn.hackleUserResolver.resolve(wn);return Sn.core.experiment(ln,Pn,pn)}catch(Nn){return log$3.error("Unexpected exception while deciding variation for experiment[".concat(ln,"]. Returning default variation[").concat(pn,"] : ").concat(Nn)),Decision.of(pn,DecisionReason.EXCEPTION)}}(this);return DecisionMetrics.experiment(vn,ln,kn),kn},sn.prototype.isFeatureOn=function(ln,cn){return this.featureFlagDetail(ln,cn).isOn},sn.prototype.featureFlagDetail=function(ln,cn){var dn=TimerSample.start(),pn=function(vn){try{var kn=vn.userManager.resolveCurrentOrNull(cn);if(!kn)return log$3.warn("invalid user"),FeatureFlagDecision.off(DecisionReason.INVALID_INPUT);var Sn=vn.hackleUserResolver.resolve(kn);return vn.core.featureFlag(ln,Sn)}catch(wn){return log$3.error("Unexpected exception while deciding feature flag[".concat(ln,"]. Returning default value[false] : ").concat(wn)),FeatureFlagDecision.off(DecisionReason.EXCEPTION)}}(this);return DecisionMetrics.featureFlag(dn,ln,pn),pn},sn.prototype.track=function(ln,cn){try{log$3.debug("track event : ".concat(JSON.stringify(ln)));var dn=this._convertEvent(ln),pn=this.userManager.resolveCurrentOrNull(cn);if(!pn){log$3.warn("invalid user");return}var vn=this.hackleUserResolver.resolve(pn);this.core.track(dn,vn)}catch{log$3.error("Unexpected exception while tracking event: $t")}},sn.prototype.trackPageView=function(ln){log$3.debug("tracking page view");var cn={key:"$page_view"},dn=this.hackleUserResolver.resolve(this.userManager.currentUser);this.core.track(cn,dn)},sn.prototype.remoteConfig=function(ln){return new HackleRemoteConfigImpl(this.core,this.userManager,this.hackleUserResolver,ln)},sn.prototype.onReady=function(ln,cn){cn===void 0&&(cn=DEFAULT_ON_READY_TIMEOUT),this.core.onReady(ln,cn)},sn.prototype.onInitialized=function(ln){return this.core.onInitialized({timeout:ln==null?void 0:ln.timeout})},sn.prototype.close=function(){log$3.debug("Hackle Client is closing"),this.core.close()},sn.prototype._convertEvent=function(ln){return typeof ln=="string"?{key:ln}:ln},sn.prototype.showUserExplorer=function(){var ln;if(!(!((ln=this.devTools)===null||ln===void 0)&&ln.userExplorer)){log$3.error("UserExplorer is not provided");return}log$3.debug("UserExplorer opened."),Metrics.counter("user.explorer.show",{}).increment(),this.devTools.manager.userExplorer(this.devTools.userExplorer)},sn.prototype.hideUserExplorer=function(){if(!this.devTools){log$3.warn("There is no active HackleDevtools.");return}this.devTools.manager.close()},sn}(),Event$1=function(){function sn(ln,cn,dn){dn===void 0&&(dn=v4()),this.timestamp=ln,this.user=cn,this.insertId=dn}return sn.exposure=function(ln,cn,dn,pn){return new Exposure(pn,ln,cn.experiment,cn.variationId,cn.variationKey,cn.reason,dn)},sn.track=function(ln,cn,dn,pn){return new Track(pn,dn,ln,cn)},sn.remoteConfig=function(ln,cn,dn,pn){return new RemoteConfig(pn,ln,cn.parameter,cn.valueId,cn.reason,dn)},sn.isExposure=function(ln){return ln.experiment!==void 0},sn.isTrack=function(ln){return ln.eventType!==void 0},sn.isRemoteConfig=function(ln){return ln.parameter!==void 0},sn.isExposureDto=function(ln){return"experimentId"in ln&&typeof ln.experimentId<"u"},sn.isTrackDto=function(ln){return"eventTypeId"in ln&&typeof ln.eventTypeId<"u"},sn.isRemoteConfigDto=function(ln){return"parameterId"in ln&&typeof ln.parameterId<"u"},sn.prototype.toDto=function(){return{insertId:this.insertId,timestamp:this.timestamp,userId:this.user.identifiers[IdentifierType.ID],identifiers:this.user.identifiers,userProperties:PropertyUtil.sanitize(this.user.properties),hackleProperties:PropertyUtil.sanitize(this.user.hackleProperties)}},sn}(),Exposure=function(sn){__extends$1(ln,sn);function ln(cn,dn,pn,vn,kn,Sn,wn,Pn){var Nn=sn.call(this,cn,dn,Pn)||this;return Nn.experiment=pn,Nn.variationId=vn,Nn.variationKey=kn,Nn.decisionReason=Sn,Nn.properties=wn,Nn}return ln.prototype.copyWithUser=function(cn){return new ln(this.timestamp,cn,this.experiment,this.variationId,this.variationKey,this.decisionReason,this.properties,this.insertId)},ln.prototype.toDto=function(){return __assign$1(__assign$1({},sn.prototype.toDto.call(this)),{experimentId:this.experiment.id,experimentKey:this.experiment.key,experimentType:this.experiment.type,experimentVersion:this.experiment.version,variationId:this.variationId,variationKey:this.variationKey,decisionReason:this.decisionReason.toString(),properties:this.properties})},ln}(Event$1),Track=function(sn){__extends$1(ln,sn);function ln(cn,dn,pn,vn,kn){var Sn=sn.call(this,cn,dn,kn)||this;return Sn.eventType=pn,Sn.event=vn,Sn}return ln.prototype.copyWithUser=function(cn){return new ln(this.timestamp,cn,this.eventType,this.event,this.insertId)},ln.prototype.toDto=function(){return __assign$1(__assign$1({},sn.prototype.toDto.call(this)),{eventTypeId:this.eventType.id,eventTypeKey:this.eventType.key,value:this.event.value||0,properties:PropertyUtil.sanitize(this.event.properties)})},ln}(Event$1),RemoteConfig=function(sn){__extends$1(ln,sn);function ln(cn,dn,pn,vn,kn,Sn,wn){var Pn=sn.call(this,cn,dn,wn)||this;return Pn.parameter=pn,Pn.valueId=vn,Pn.decisionReason=kn,Pn.properties=Sn,Pn}return ln.prototype.copyWithUser=function(cn){return new ln(this.timestamp,cn,this.parameter,this.valueId,this.decisionReason,this.properties,this.insertId)},ln.prototype.toDto=function(){return __assign$1(__assign$1({},sn.prototype.toDto.call(this)),{parameterId:this.parameter.id,parameterKey:this.parameter.key,parameterType:this.parameter.type,valueId:this.valueId,decisionReason:this.decisionReason.toString(),properties:PropertyUtil.sanitize(this.properties)})},ln}(Event$1);function toPayload(sn){var ln=new Array,cn=new Array,dn=new Array;return sn.forEach(function(pn){pn instanceof Event$1?Event$1.isExposure(pn)?ln.push(pn.toDto()):Event$1.isTrack(pn)?cn.push(pn.toDto()):Event$1.isRemoteConfig(pn)&&dn.push(pn.toDto()):Event$1.isExposureDto(pn)?ln.push(pn):Event$1.isTrackDto(pn)?cn.push(pn):Event$1.isRemoteConfigDto(pn)&&dn.push(pn)}),{exposureEvents:ln,trackEvents:cn,remoteConfigEvents:dn}}var EventDispatcher=function(){function sn(ln,cn,dn){this.sdkKey=ln,this.httpRequest=cn,this.headers=dn.headers,this.dispatchUrl=dn.dispatchUrl,this.beaconDispatchUrl=dn.beaconDispatchUrl||"",this.useBeacon=dn.useBeacon||!1}return sn.prototype.dispatch=function(ln,cn,dn){var pn={};pn[SDK_KEY_HEADER]=this.sdkKey,pn[SDK_NAME_HEADER$1]=this.headers[SDK_NAME_HEADER$1],pn[SDK_VERSION_HEADER$1]=this.headers[SDK_VERSION_HEADER$1],pn[SDK_TIME_HEADER]=new Date().getTime().toString();var vn=toPayload(ln),kn=TimerSample.start();this.httpRequest.postRequest(this.dispatchUrl,vn,pn,function(Sn){cn(Sn),ApiCallMetrics.record("post.events",kn,!0)},function(Sn){dn==null||dn(Sn),ApiCallMetrics.record("post.events",kn,!1)})},sn.prototype.dispatchXhrOrBeacon=function(ln,cn,dn){if(this.useBeacon){var pn={};pn[SDK_KEY_HEADER]=this.sdkKey,pn[SDK_NAME_HEADER$1]=this.headers[SDK_NAME_HEADER$1],pn[SDK_VERSION_HEADER$1]=this.headers[SDK_VERSION_HEADER$1],pn[SDK_TIME_HEADER]=new Date().getTime().toString();var vn=toPayload(ln),kn=TimerSample.start();this.httpRequest.sendBeacon(this.beaconDispatchUrl,vn,pn,function(Sn){cn(Sn),ApiCallMetrics.record("post.events",kn,!0)},function(Sn){dn==null||dn(Sn),ApiCallMetrics.record("post.events",kn,!1)})}else this.dispatch(ln,cn,dn)},sn}(),log$2=Logger.log,Workspace=function(){function sn(ln,cn,dn,pn,vn,kn,Sn,wn){this.experiments=ln,this.featureFlags=cn,this.buckets=dn,this.eventTypes=pn,this.segments=vn,this.containers=kn,this.parameterConfigurations=Sn,this.remoteConfigParameters=wn}return sn.prototype.getExperiments=function(){return Array.from(this.experiments.values())},sn.prototype.getExperimentOrNull=function(ln){return this.experiments.get(ln)},sn.prototype.getFeatureFlags=function(){return Array.from(this.featureFlags.values())},sn.prototype.getFeatureFlagOrNull=function(ln){return this.featureFlags.get(ln)},sn.prototype.getBucketOrNull=function(ln){return this.buckets.get(ln)},sn.prototype.getEventTypeOrNull=function(ln){return this.eventTypes.get(ln)},sn.prototype.getSegmentOrNull=function(ln){return this.segments.get(ln)},sn.prototype.getContainerOrNull=function(ln){return this.containers.get(ln)},sn.prototype.getParameterConfigurationOrNull=function(ln){return this.parameterConfigurations.get(ln)},sn.prototype.getRemoteConfigParameterOrNull=function(ln){return this.remoteConfigParameters.get(ln)},sn.from=function(ln){var cn=this,dn=CollectionUtil.associate(ln.buckets,function(Ln){return[Ln.id,cn.toBucket(Ln)]}),pn=CollectionUtil.associateBy(CollectionUtil.mapNotNullOrUndefined(ln.experiments,function(Ln){return cn.toExperimentOrNull("AB_TEST",Ln)}),function(Ln){return Ln.key}),vn=CollectionUtil.associateBy(CollectionUtil.mapNotNullOrUndefined(ln.featureFlags,function(Ln){return cn.toExperimentOrNull("FEATURE_FLAG",Ln)}),function(Ln){return Ln.key}),kn=CollectionUtil.associate(ln.events,function(Ln){return[Ln.key,new EventType(Ln.id,Ln.key)]}),Sn=CollectionUtil.associateBy(CollectionUtil.mapNotNullOrUndefined(ln.segments,function(Ln){return cn.toSegmentOrNull(Ln)}),function(Ln){return Ln.key}),wn=CollectionUtil.associate(ln.containers,function(Ln){return[Ln.id,cn.toContainer(Ln)]}),Pn=CollectionUtil.associate(ln.parameterConfigurations,function(Ln){return[Ln.id,cn.toParameterConfiguration(Ln)]}),Nn=CollectionUtil.associateBy(CollectionUtil.mapNotNullOrUndefined(ln.remoteConfigParameters,function(Ln){return cn.toRemoteConfigParameterOrNull(Ln)}),function(Ln){return Ln.key});return new sn(pn,vn,dn,kn,Sn,wn,Pn,Nn)},sn.toBucket=function(ln){return new Bucket(ln.seed,ln.slotSize,ln.slots.map(function(cn){var dn=cn.startInclusive,pn=cn.endExclusive,vn=cn.variationId;return new Slot(dn,pn,vn)}))},sn.toExperimentOrNull=function(ln,cn){var dn=this,pn=this.experimentStatusOrNull(cn.execution.status),vn=cn.variations.map(function(Ln){return new Variation(Ln.id,Ln.key,Ln.status==="DROPPED",Ln.parameterConfigurationId)}),kn=CollectionUtil.associate(cn.execution.userOverrides,function(Ln){return[Ln.userId,Ln.variationId]}),Sn=CollectionUtil.mapNotNullOrUndefined(cn.execution.segmentOverrides,function(Ln){return dn.toTargetRuleOrNull(Ln,TargetingType.IDENTIFIER)}),wn=CollectionUtil.mapNotNullOrUndefined(cn.execution.targetAudiences,function(Ln){return dn.toTargetOrNull(Ln,TargetingType.PROPERTY)}),Pn=CollectionUtil.mapNotNullOrUndefined(cn.execution.targetRules,function(Ln){return dn.toTargetRuleOrNull(Ln,TargetingType.PROPERTY)}),Nn=this.toTargetActionOrNull(cn.execution.defaultRule);return pn&&Nn&&new Experiment(cn.id,cn.key,ln,cn.identifierType,pn,cn.version,vn,kn,Sn,wn,Pn,Nn,cn.containerId,cn.winnerVariationId)},sn.experimentStatusOrNull=function(ln){switch(ln){case"READY":return"DRAFT";case"RUNNING":return"RUNNING";case"PAUSED":return"PAUSED";case"STOPPED":return"COMPLETED";default:log$2.debug("Unsupported status [".concat(ln,"]"));return}},sn.toTargetRuleOrNull=function(ln,cn){var dn=this.toTargetOrNull(ln.target,cn),pn=this.toTargetActionOrNull(ln.action);return dn&&pn&&new TargetRule(dn,pn)},sn.toTargetActionOrNull=function(ln){var cn=this.parseOrNull(TARGET_ACTION_TYPES,ln.type);return cn&&new TargetAction(cn,ln.variationId,ln.bucketId)},sn.toTargetOrNull=function(ln,cn){var dn=this,pn=CollectionUtil.mapNotNullOrUndefined(ln.conditions,function(vn){return dn.toConditionOrNull(vn,cn)});return new Target(pn)},sn.toConditionOrNull=function(ln,cn){var dn=this.toTargetKeyOrNull(ln.key);if(dn&&cn.supports(dn.type)){var pn=this.toTargetMatchOrNull(ln.match);return pn&&new TargetCondition(dn,pn)}},sn.toTargetKeyOrNull=function(ln){var cn=this.parseOrNull(TARGET_KEY_TYPES,ln.type);return cn&&new TargetKey(cn,ln.name)},sn.toTargetMatchOrNull=function(ln){var cn=this.parseOrNull(MATCH_TYPES,ln.type),dn=this.parseOrNull(MATCH_OPERATORS,ln.operator),pn=this.parseOrNull(MATCH_VALUE_TYPES,ln.valueType);return cn&&dn&&pn&&new TargetMatch(cn,dn,pn,ln.values)},sn.toSegmentOrNull=function(ln){var cn=this,dn=this.parseOrNull(SEGMENT_TYPES,ln.type);return dn&&new Segment(ln.id,ln.key,dn,CollectionUtil.mapNotNullOrUndefined(ln.targets,function(pn){return cn.toTargetOrNull(pn,TargetingType.SEGMENT)}))},sn.toContainer=function(ln){var cn=this;return new Container(ln.id,ln.bucketId,ln.groups.map(function(dn){return cn.toContainerGroup(dn)}))},sn.toContainerGroup=function(ln){return new ContainerGroup(ln.id,ln.experiments)},sn.toParameterConfiguration=function(ln){return new ParameterConfiguration(ln.id,CollectionUtil.associate(ln.parameters,function(cn){return[cn.key,cn.value]}))},sn.toRemoteConfigParameterOrNull=function(ln){var cn=this,dn=this.parseOrNull(MATCH_VALUE_TYPES,ln.type),pn=CollectionUtil.mapNotNullOrUndefined(ln.targetRules,function(kn){return cn.toRemoteConfigTargetRuleOrNull(kn,TargetingType.PROPERTY)}),vn=this.toRemoteConfigParameterValueOrNull(ln.defaultValue);return dn&&new RemoteConfigParameter(ln.id,ln.key,dn,ln.identifierType,pn,vn)},sn.toRemoteConfigTargetRuleOrNull=function(ln,cn){var dn=this.toTargetOrNull(ln.target,cn);return dn&&new RemoteConfigTargetRule(ln.key,ln.name,dn,ln.bucketId,this.toRemoteConfigParameterValueOrNull(ln.value))},sn.toRemoteConfigParameterValueOrNull=function(ln){return new RemoteConfigParameterValue(ln.id,ln.value)},sn.parseOrNull=function(ln,cn){var dn=ln.find(function(pn){return pn===cn});return dn||log$2.debug("Unsupported type [".concat(cn,"]. Please use the latest version of sdk.")),dn},sn}(),PollingWorkspaceFetcher=function(){function sn(ln,cn,dn){var pn=this;this.workspace=null,this.sdkKey=ln,this.httpRequest=cn,this.isStarted=!1,this.updateInterval=dn.updateInterval,this.fetchUrl=dn.fetchUrl,this.headers=dn.headers,this.readyPromiseResolver=function(){},this.readyPromiseRejecter=function(){},this.readyPromise=new Promise(function(vn,kn){pn.readyPromiseResolver=vn,pn.readyPromiseRejecter=kn}),this.currentTimeout=null,this.errorRetryController=new ErrorRetryController,this.currentRequest=null,this.syncOnCurrentRequestComplete=!1,this.isReadyPromiseSettled=!1}return sn.prototype.onReady=function(){return this.readyPromise},sn.prototype.start=function(){this.isStarted||(this.isStarted=!0,this.errorRetryController.reset(),this.fetch())},sn.prototype.stop=function(){return this.isStarted=!1,this.currentTimeout&&(clearTimeout(this.currentTimeout),this.currentTimeout=null),this.currentRequest&&(this.currentRequest.abort(),this.currentRequest=null),Promise.resolve()},sn.prototype.get=function(){return this.workspace},sn.prototype.scheduleNextUpdate=function(){var ln=this,cn=this.errorRetryController.getDelay(),dn=Math.max(cn,this.updateInterval);this.currentTimeout=setTimeout(function(){ln.currentRequest?ln.syncOnCurrentRequestComplete=!0:ln.fetch()},dn)},sn.prototype.fetch=function(){var ln,cn=this,dn,pn=(ln={},ln[SDK_KEY_HEADER]=this.sdkKey,ln[SDK_TIME_HEADER]=new Date().getTime().toString(),ln[SDK_NAME_HEADER$1]=this.headers[SDK_NAME_HEADER$1],ln[SDK_VERSION_HEADER$1]=this.headers[SDK_VERSION_HEADER$1],ln),vn=TimerSample.start();this.currentRequest=this.httpRequest.getRequest(this.fetchUrl,pn);var kn=function(Nn){var Ln=Nn.isSuccess;ApiCallMetrics.record("get.workspace",vn,Ln)},Sn=function(){cn.onRequestComplete()},wn=function(Nn){cn.onRequestResolved(Nn,kn)},Pn=function(Nn){cn.onRequestRejected(Nn,kn)};(dn=this.currentRequest)===null||dn===void 0||dn.responsePromise.then(wn,Pn).then(Sn,Sn),this.updateInterval>0&&this.scheduleNextUpdate()},sn.prototype.onRequestComplete=function(){this.isStarted&&(this.currentRequest=null,this.syncOnCurrentRequestComplete&&this.fetch(),this.syncOnCurrentRequestComplete=!1)},sn.prototype.onRequestResolved=function(ln,cn){if(this.isStarted){if(typeof ln.statusCode<"u"&&ln.statusCode>=200&&ln.statusCode<400)this.errorRetryController.reset(),cn({isSuccess:!0});else if(cn({isSuccess:!1}),ln.statusCode===401||ln.statusCode===403){this.readyPromiseRejecter(new Error("Invalid key provided."));return}else this.errorRetryController.countError();if(ln.body){var dn=JSON.parse(ln.body);this.workspace=Workspace.from(dn),this.readyPromiseResolver()}}},sn.prototype.onRequestRejected=function(ln,cn){this.isStarted&&(cn({isSuccess:!1}),this.errorRetryController.countError(),console.error("Error fetching data",ln))},sn.prototype.close=function(){this.stop()},sn}(),ErrorRetryController=function(){function sn(){this.errorCount=0}return sn.prototype.getDelay=function(){if(this.errorCount===0)return 0;var ln=ERROR_RETRY_BASE_WAIT_SECONDS_BY_ERROR_COUNT[Math.min(ERROR_RETRY_BASE_WAIT_SECONDS_BY_ERROR_COUNT.length-1,this.errorCount)];return ln*1e3+Math.round(Math.random()*1e3)},sn.prototype.countError=function(){this.errorCount<ERROR_RETRY_BASE_WAIT_SECONDS_BY_ERROR_COUNT.length-1&&this.errorCount++},sn.prototype.reset=function(){this.errorCount=0},sn}(),MODEL="model",NAME="name",TYPE="type",VENDOR="vendor",VERSION="version",ARCHITECTURE="architecture",CONSOLE="console",MOBILE="mobile",TABLET="tablet",SMARTTV="smarttv",WEARABLE="wearable",UAParser=function(){function sn(){}return sn.parse=function(ln){return{browser:sn.getBrowser(ln),cpu:sn.getCPU(ln),device:sn.getDevice(ln),engine:sn.getEngine(ln),os:sn.getOS(ln)}},sn.getBrowser=function(ln){var cn={name:void 0,version:void 0,major:void 0};return sn.mapper.rgx.call(cn,ln,sn.regexes.browser),cn.major=sn.util.major(cn.version),cn},sn.getCPU=function(ln){var cn={architecture:void 0};return sn.mapper.rgx.call(cn,ln,sn.regexes.cpu),cn},sn.getDevice=function(ln){var cn={model:void 0,type:void 0,vendor:void 0};return sn.mapper.rgx.call(cn,ln,sn.regexes.device),cn},sn.getEngine=function(ln){var cn={name:void 0,version:void 0};return sn.mapper.rgx.call(cn,ln,sn.regexes.os),cn},sn.getOS=function(ln){var cn={name:void 0,version:void 0};return sn.mapper.rgx.call(cn,ln,sn.regexes.os),cn},sn.util={extend:function(ln,cn){var dn={};for(var pn in ln)cn[pn]&&cn[pn].length%2===0?dn[pn]=cn[pn].concat(ln[pn]):dn[pn]=ln[pn];return dn},has:function(ln,cn){return typeof ln=="string"?cn.toLowerCase().indexOf(ln.toLowerCase())!==-1:!1},lowerize:function(ln){return ln.toLowerCase()},major:function(ln){return typeof ln=="string"?ln.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(ln){return ln.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},sn.mapper={rgx:function(ln,cn){for(var dn=0,pn,vn,kn,Sn,wn,Pn;dn<cn.length&&!wn;){var Nn=cn[dn],Ln=cn[dn+1];for(pn=vn=0;pn<Nn.length&&!wn;)if(wn=Nn[pn++].exec(ln),wn)for(kn=0;kn<Ln.length;kn++)Pn=wn[++vn],Sn=Ln[kn],typeof Sn=="object"&&Sn.length>0?Sn.length==2?typeof Sn[1]=="function"?this[Sn[0]]=Sn[1].call(this,Pn):this[Sn[0]]=Sn[1]:Sn.length==3?typeof Sn[1]=="function"&&!(Sn[1].exec&&Sn[1].test)?this[Sn[0]]=Pn?Sn[1].call(this,Pn,Sn[2]):void 0:this[Sn[0]]=Pn?Pn.replace(Sn[1],Sn[2]):void 0:Sn.length==4&&(this[Sn[0]]=Pn?Sn[3].call(this,Pn.replace(Sn[1],Sn[2])):void 0):this[Sn]=Pn||void 0;dn+=2}},str:function(ln,cn){for(var dn in cn)if(typeof cn[dn]=="object"&&cn[dn].length>0){for(var pn=0;pn<cn[dn].length;pn++)if(sn.util.has(cn[dn][pn],ln))return dn==="?"?void 0:dn}else if(sn.util.has(cn[dn],ln))return dn==="?"?void 0:dn;return ln}},sn.maps={browser:{oldsafari:{version:{"1.0":"/8","1.2":"/1","1.3":"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2","8.1":"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},sn.regexes={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[NAME,VERSION],[/(opios)[\/\s]+([\w\.]+)/i],[[NAME,"Opera Mini"],VERSION],[/\s(opr)\/([\w\.]+)/i],[[NAME,"Opera"],VERSION],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(bidubrowser|baidubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[NAME,VERSION],[/(konqueror)\/([\w\.]+)/i],[[NAME,"Konqueror"],VERSION],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[NAME,"IE"],VERSION],[/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],[[NAME,"Edge"],VERSION],[/(yabrowser)\/([\w\.]+)/i],[[NAME,"Yandex"],VERSION],[/(Avast)\/([\w\.]+)/i],[[NAME,"Avast Secure Browser"],VERSION],[/(AVG)\/([\w\.]+)/i],[[NAME,"AVG Secure Browser"],VERSION],[/(puffin)\/([\w\.]+)/i],[[NAME,"Puffin"],VERSION],[/(focus)\/([\w\.]+)/i],[[NAME,"Firefox Focus"],VERSION],[/(opt)\/([\w\.]+)/i],[[NAME,"Opera Touch"],VERSION],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[NAME,"UCBrowser"],VERSION],[/(comodo_dragon)\/([\w\.]+)/i],[[NAME,/_/g," "],VERSION],[/(windowswechat qbcore)\/([\w\.]+)/i],[[NAME,"WeChat(Win) Desktop"],VERSION],[/(micromessenger)\/([\w\.]+)/i],[[NAME,"WeChat"],VERSION],[/(brave)\/([\w\.]+)/i],[[NAME,"Brave"],VERSION],[/(whale)\/([\w\.]+)/i],[[NAME,"Whale"],VERSION],[/(qqbrowserlite)\/([\w\.]+)/i],[NAME,VERSION],[/(QQ)\/([\d\.]+)/i],[NAME,VERSION],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[NAME,VERSION],[/(baiduboxapp)[\/\s]?([\w\.]+)/i],[NAME,VERSION],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[NAME,VERSION],[/(MetaSr)[\/\s]?([\w\.]+)/i],[NAME],[/(LBBROWSER)/i],[NAME],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[VERSION,[NAME,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[VERSION,[NAME,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[NAME,VERSION],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[VERSION,[NAME,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[NAME,/(.+)/,"$1 WebView"],VERSION],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[NAME,/(.+(?:g|us))(.+)/,"$1 $2"],VERSION],[/((?:android.+)crmo|crios)\/([\w\.]+)/i,/android.+(chrome)\/([\w\.]+)\s+(?:mobile\s?safari)/i],[[NAME,"Chrome Mobile"],VERSION],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[VERSION,[NAME,"Android Browser"]],[/(sailfishbrowser)\/([\w\.]+)/i],[[NAME,"Sailfish Browser"],VERSION],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[NAME,VERSION],[/(dolfin)\/([\w\.]+)/i],[[NAME,"Dolphin"],VERSION],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[NAME,"360 Browser"]],[/(coast)\/([\w\.]+)/i],[[NAME,"Opera Coast"],VERSION],[/fxios\/([\w\.-]+)/i],[VERSION,[NAME,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[VERSION,[NAME,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[VERSION,NAME],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[NAME,"GSA"],VERSION],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[NAME,[VERSION,sn.mapper.str,sn.maps.browser.oldsafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[NAME,VERSION],[/(navigator|netscape)\/([\w\.-]+)/i],[[NAME,"Netscape"],VERSION],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[NAME,VERSION]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[ARCHITECTURE,"amd64"]],[/(ia32(?=;))/i],[[ARCHITECTURE,sn.util.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[ARCHITECTURE,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[ARCHITECTURE,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[ARCHITECTURE,/ower/,"",sn.util.lowerize]],[/(sun4\w)[;\)]/i],[[ARCHITECTURE,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[ARCHITECTURE,sn.util.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[MODEL,VENDOR,[TYPE,TABLET]],[/applecoremedia\/[\w\.]+ \((ipad)/],[MODEL,[VENDOR,"Apple"],[TYPE,TABLET]],[/(apple\s{0,1}tv)/i],[[MODEL,"Apple TV"],[VENDOR,"Apple"],[TYPE,SMARTTV]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[VENDOR,MODEL,[TYPE,TABLET]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[MODEL,[VENDOR,"Amazon"],[TYPE,TABLET]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[MODEL,sn.mapper.str,sn.maps.device.amazon.model],[VENDOR,"Amazon"],[TYPE,MOBILE]],[/android.+aft([bms])\sbuild/i],[MODEL,[VENDOR,"Amazon"],[TYPE,SMARTTV]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[MODEL,VENDOR,[TYPE,MOBILE]],[/\((ip[honed|\s\w*]+);/i],[MODEL,[VENDOR,"Apple"],[TYPE,MOBILE]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[VENDOR,MODEL,[TYPE,MOBILE]],[/\(bb10;\s(\w+)/i],[MODEL,[VENDOR,"BlackBerry"],[TYPE,MOBILE]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[MODEL,[VENDOR,"Asus"],[TYPE,TABLET]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[VENDOR,"Sony"],[MODEL,"Xperia Tablet"],[TYPE,TABLET]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[MODEL,[VENDOR,"Sony"],[TYPE,MOBILE]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[VENDOR,MODEL,[TYPE,CONSOLE]],[/android.+;\s(shield)\sbuild/i],[MODEL,[VENDOR,"Nvidia"],[TYPE,CONSOLE]],[/(playstation\s[34portablevi]+)/i],[MODEL,[VENDOR,"Sony"],[TYPE,CONSOLE]],[/(sprint\s(\w+))/i],[[VENDOR,sn.mapper.str,sn.maps.device.sprint.vendor],[MODEL,sn.mapper.str,sn.maps.device.sprint.model],[TYPE,MOBILE]],[/(htc)[;_\s-]+([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[VENDOR,[MODEL,/_/g," "],[TYPE,MOBILE]],[/(nexus\s9)/i],[MODEL,[VENDOR,"HTC"],[TYPE,TABLET]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p|vog-l29|ane-lx1|eml-l29)/i],[MODEL,[VENDOR,"Huawei"],[TYPE,MOBILE]],[/android.+(bah2?-a?[lw]\d{2})/i],[MODEL,[VENDOR,"Huawei"],[TYPE,TABLET]],[/(microsoft);\s(lumia[\s\w]+)/i],[VENDOR,MODEL,[TYPE,MOBILE]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[MODEL,[VENDOR,"Microsoft"],[TYPE,CONSOLE]],[/(kin\.[onetw]{3})/i],[[MODEL,/\./g," "],[VENDOR,"Microsoft"],[TYPE,MOBILE]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[MODEL,[VENDOR,"Motorola"],[TYPE,MOBILE]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[MODEL,[VENDOR,"Motorola"],[TYPE,TABLET]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[VENDOR,sn.util.trim],[MODEL,sn.util.trim],[TYPE,SMARTTV]],[/hbbtv.+maple;(\d+)/i],[[MODEL,/^/,"SmartTV"],[VENDOR,"Samsung"],[TYPE,SMARTTV]],[/\(dtv[\);].+(aquos)/i],[MODEL,[VENDOR,"Sharp"],[TYPE,SMARTTV]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[VENDOR,"Samsung"],MODEL,[TYPE,TABLET]],[/smart-tv.+(samsung)/i],[VENDOR,[TYPE,SMARTTV],MODEL],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[VENDOR,"Samsung"],MODEL,[TYPE,MOBILE]],[/sie-(\w*)/i],[MODEL,[VENDOR,"Siemens"],[TYPE,MOBILE]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[VENDOR,"Nokia"],MODEL,[TYPE,MOBILE]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[MODEL,[VENDOR,"Acer"],[TYPE,TABLET]],[/android.+([vl]k\-?\d{3})\s+build/i],[MODEL,[VENDOR,"LG"],[TYPE,TABLET]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[VENDOR,"LG"],MODEL,[TYPE,TABLET]],[/(lg) netcast\.tv/i],[VENDOR,MODEL,[TYPE,SMARTTV]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[MODEL,[VENDOR,"LG"],[TYPE,MOBILE]],[/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],[VENDOR,MODEL,[TYPE,TABLET]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[MODEL,[VENDOR,"Lenovo"],[TYPE,TABLET]],[/(lenovo)[_\s-]?([\w-]+)/i],[VENDOR,MODEL,[TYPE,MOBILE]],[/linux;.+((jolla));/i],[VENDOR,MODEL,[TYPE,MOBILE]],[/((pebble))app\/[\d\.]+\s/i],[VENDOR,MODEL,[TYPE,WEARABLE]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[VENDOR,MODEL,[TYPE,MOBILE]],[/crkey/i],[[MODEL,"Chromecast"],[VENDOR,"Google"],[TYPE,SMARTTV]],[/android.+;\s(glass)\s\d/i],[MODEL,[VENDOR,"Google"],[TYPE,WEARABLE]],[/android.+;\s(pixel c)[\s)]/i],[MODEL,[VENDOR,"Google"],[TYPE,TABLET]],[/android.+;\s(pixel( [23])?( xl)?)[\s)]/i],[MODEL,[VENDOR,"Google"],[TYPE,MOBILE]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:a\d|one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[MODEL,/_/g," "],[VENDOR,"Xiaomi"],[TYPE,MOBILE]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[MODEL,/_/g," "],[VENDOR,"Xiaomi"],[TYPE,TABLET]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[MODEL,[VENDOR,"Meizu"],[TYPE,MOBILE]],[/(mz)-([\w-]{2,})/i],[[VENDOR,"Meizu"],MODEL,[TYPE,MOBILE]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})[\s)]/i],[MODEL,[VENDOR,"OnePlus"],[TYPE,MOBILE]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[MODEL,[VENDOR,"RCA"],[TYPE,TABLET]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[MODEL,[VENDOR,"Dell"],[TYPE,TABLET]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[MODEL,[VENDOR,"Verizon"],[TYPE,TABLET]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[VENDOR,"Barnes & Noble"],MODEL,[TYPE,TABLET]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[MODEL,[VENDOR,"NuVision"],[TYPE,TABLET]],[/android.+;\s(k88)\sbuild/i],[MODEL,[VENDOR,"ZTE"],[TYPE,TABLET]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[MODEL,[VENDOR,"Swiss"],[TYPE,MOBILE]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[MODEL,[VENDOR,"Swiss"],[TYPE,TABLET]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[MODEL,[VENDOR,"Zeki"],[TYPE,TABLET]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[VENDOR,"Dragon Touch"],MODEL,[TYPE,TABLET]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[MODEL,[VENDOR,"Insignia"],[TYPE,TABLET]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[MODEL,[VENDOR,"NextBook"],[TYPE,TABLET]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[VENDOR,"Voice"],MODEL,[TYPE,MOBILE]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[VENDOR,"LvTel"],MODEL,[TYPE,MOBILE]],[/android.+;\s(PH-1)\s/i],[MODEL,[VENDOR,"Essential"],[TYPE,MOBILE]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[MODEL,[VENDOR,"Envizen"],[TYPE,TABLET]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[VENDOR,MODEL,[TYPE,TABLET]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[MODEL,[VENDOR,"MachSpeed"],[TYPE,TABLET]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[VENDOR,MODEL,[TYPE,TABLET]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[MODEL,[VENDOR,"Rotor"],[TYPE,TABLET]],[/android.+(KS(.+))\s+build/i],[MODEL,[VENDOR,"Amazon"],[TYPE,TABLET]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[VENDOR,MODEL,[TYPE,TABLET]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[TYPE,sn.util.lowerize],VENDOR,MODEL],[/[\s\/\(](smart-?tv)[;\)]/i],[[TYPE,SMARTTV]],[/(android[\w\.\s\-]{0,9});.+build/i],[MODEL,[VENDOR,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[VERSION,[NAME,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[VERSION,[NAME,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[NAME,VERSION],[/rv\:([\w\.]{1,9}).+(gecko)/i],[VERSION,NAME]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[NAME,VERSION],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[[NAME,sn.mapper.str,sn.maps.os.windows],[VERSION,sn.mapper.str,sn.maps.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[NAME,"Windows"],[VERSION,sn.mapper.str,sn.maps.os.windows.version]],[/\((bb)(10);/i],[[NAME,"BlackBerry"],VERSION],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[NAME,VERSION],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[NAME,"Symbian"],VERSION],[/\((series40);/i],[NAME],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[NAME,"Firefox OS"],VERSION],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[[NAME,"Linux"],VERSION],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[NAME,"Chromium OS"],VERSION],[/(sunos)\s?([\w\.\d]*)/i],[[NAME,"Solaris"],VERSION],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[[NAME,"Linux"],VERSION],[/(iphone)(?:.*os\s*([\w]*)\slike\smac|;\sopera)/i],[[NAME,"iPhone"],[VERSION,/_/g,"."]],[/(ipad)(?:.*os\s*([\w]*)\slike\smac|;\sopera)/i],[[NAME,"iPad"],[VERSION,/_/g,"."]],[/(haiku)\s(\w+)/i],[NAME,VERSION],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[VERSION,/_/g,"."],[NAME,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[NAME,"Mac"],[VERSION,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[NAME,VERSION]]},sn}(),HacklePropertyGenerator=function(){function sn(){}return sn.generate=function(ln){var cn,dn;if(typeof ln>"u"){var pn={hostname:"",pathname:"",host:"",search:"",protocol:""};dn={navigator:{userAgent:"",vendor:"",languages:[]},document:{location:pn,title:""},location:pn,screen:{width:"",height:""}}}else dn=ln;var vn=UAParser.parse(dn.navigator.userAgent),kn=vn.browser,Sn=vn.os,wn=vn.device,Pn=wn.type?wn.type==="mobile"?"Mobile":"ETC":"Web",Nn=dn.location.protocol||"",Ln=Nn.replace(":",""),Fn=dn.screen,zn="";try{zn=Intl.DateTimeFormat().resolvedOptions().timeZone}catch{}return{platform:Pn||"",browserName:kn.name||"",browserMajorVersion:kn.major||"",browserVersion:kn.version||"",osName:Sn.name||"",osVersion:Sn.version||"",deviceModel:wn.model||"",deviceType:wn.type||"",deviceVendor:wn.vendor||"",language:((cn=dn.navigator.languages)===null||cn===void 0?void 0:cn[0])||"",userAgent:dn.navigator.userAgent||"",pagePath:dn.location.pathname||"",pageTitle:dn.document.title||"",host:dn.location.host||"",protocol:Ln,referrer:dn.document.referrer||"",queryParameter:dn.location.search||"",screenWidth:Fn.width||"",screenHeight:Fn.height||"",timeZone:zn||""}},sn}(),CookieStorage=function(){function sn(ln){ln===void 0&&(ln={days:0,isCrossSubdomain:!1,isSecure:!1,isCrossSite:!1}),this.options=ln}return sn.extractDomain=function(ln){var cn=/[a-z0-9][a-z0-9-]+\.[a-z.]{2,6}$/i,dn=/[a-z0-9][a-z0-9-]*\.[a-z]+$/i,pn=cn,vn=ln.split("."),kn=vn[vn.length-1];(kn.length>4||kn==="com"||kn==="org")&&(pn=dn);var Sn=ln.match(pn);return Sn?Sn[0]:""},sn.prototype.getItem=function(ln){for(var cn=ln+"=",dn=document.cookie.split(";"),pn=0;pn<dn.length;pn++){for(var vn=dn[pn];vn.charAt(0)==" ";)vn=vn.substring(1,vn.length);if(vn.indexOf(cn)===0)return decodeURIComponent(vn.substring(cn.length,vn.length))}return null},sn.prototype.getAllItem=function(ln){var cn=document.cookie.split("; ").map(function(pn){return pn.split("=")}),dn=ln==null?void 0:ln.keyPrefix;return dn?cn.filter(function(pn){var vn=pn[0];return pn[1],vn.startsWith(dn)}):cn},sn.prototype.setItem=function(ln,cn,dn){var pn=__assign$1(__assign$1({},this.options),dn),vn=pn.isSecure,kn="",Sn="",wn="";if(pn.isCrossSubdomain){var Pn=sn.extractDomain(document.location.hostname);kn=Pn?"; domain=."+Pn:""}if(pn.days){var Nn=new Date;Nn.setTime(Nn.getTime()+pn.days*24*60*60*1e3),Sn="; expires="+Nn.toUTCString()}pn.isCrossSite&&(vn=!0,wn="; SameSite=None"),vn&&(wn+="; secure");var Ln=ln+"="+encodeURIComponent(cn)+Sn+"; path=/"+kn+wn;return document.cookie=Ln,Ln},sn.prototype.removeItem=function(ln,cn){this.setItem(ln,"",__assign$1(__assign$1({},cn),{days:-1}))},sn}(),cookieStorage=new CookieStorage({days:COOKIE_EXPIRE_DAYS,isCrossSubdomain:!0}),LocationSearchParser=function(){function sn(ln){this.search=ln}return sn.prototype.getQueryParam=function(ln){var cn=this.getQueryParams(function(){return!0});return cn[ln]||""},sn.prototype.getQueryParams=function(ln){for(var cn={},dn=this.search.substring(1).split("&"),pn=0,vn=dn;pn<vn.length;pn++){var kn=vn[pn],Sn=kn.split("="),wn=Sn[0],Pn=Sn[1];ln(wn,Pn)&&(cn[wn]=decodeURIComponent(Pn))}return cn},sn}(),HackleUserResolver=function(){function sn(ln){this.userManager=ln,IdentifierManager.initialize()}return sn.prototype.resolve=function(ln){var cn=getUserId(),dn=new IdentifiersBuilder().addIdentifiers(ln.identifiers||{}).add(IdentifierType.ID,ln.id||cn).add(IdentifierType.DEVICE,ln.deviceId||cn).add(IdentifierType.HACKLE_DEVICE,cn);ObjectUtil$1.isNotNullOrUndefined(ln.userId)&&dn.add(IdentifierType.USER,ln.userId);var pn=dn.build();return{identifiers:pn,properties:this._userProperties(ln.properties),hackleProperties:this._getHackleProperties()}},sn.prototype.resolveCurrentUser=function(){return this.resolve(this.userManager.currentUser)},sn.prototype._userProperties=function(ln){ln===void 0&&(ln={});var cn={};if(typeof window<"u"){var dn=new LocationSearchParser(window.location.search);cn=__assign$1(__assign$1({},dn.getQueryParams(function(pn){return pn.startsWith("utm_")})),dn.getQueryParams(function(pn){return["gclid","fbclid"].includes(pn)}))}return __assign$1(__assign$1({},cn),ln)},sn.prototype._getHackleProperties=function(){var ln;return typeof window<"u"&&(ln=HacklePropertyGenerator.generate(window)),ln||{}},sn}(),IdentifierManager=function(){function sn(){}return sn.initialize=function(){var ln=cookieStorage.getItem(COOKIE_HID_KEY);ln||generateIdentifier()},sn.reInitialize=function(){generateIdentifier()},sn}();function getUserId(){var sn=cookieStorage.getItem(COOKIE_USER_ID_KEY);if(sn)return sn;var ln=cookieStorage.getItem(COOKIE_HID_KEY);return ln||generateIdentifier()}function removeUserId(){cookieStorage.removeItem(COOKIE_USER_ID_KEY)}function generateIdentifier(){var sn=v4();return cookieStorage.setItem(COOKIE_HID_KEY,sn),sn}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},promise$5={exports:{}},check=function(sn){return sn&&sn.Math==Math&&sn},global$n=check(typeof globalThis=="object"&&globalThis)||check(typeof window=="object"&&window)||check(typeof self=="object"&&self)||check(typeof commonjsGlobal=="object"&&commonjsGlobal)||function(){return this}()||Function("return this")(),objectGetOwnPropertyDescriptor={},fails$p=function(sn){try{return!!sn()}catch{return!0}},fails$o=fails$p,descriptors=!fails$o(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),fails$n=fails$p,functionBindNative=!fails$n(function(){var sn=function(){}.bind();return typeof sn!="function"||sn.hasOwnProperty("prototype")}),NATIVE_BIND$3=functionBindNative,call$k=Function.prototype.call,functionCall=NATIVE_BIND$3?call$k.bind(call$k):function(){return call$k.apply(call$k,arguments)},objectPropertyIsEnumerable={},$propertyIsEnumerable={}.propertyIsEnumerable,getOwnPropertyDescriptor$2=Object.getOwnPropertyDescriptor,NASHORN_BUG=getOwnPropertyDescriptor$2&&!$propertyIsEnumerable.call({1:2},1);objectPropertyIsEnumerable.f=NASHORN_BUG?function sn(ln){var cn=getOwnPropertyDescriptor$2(this,ln);return!!cn&&cn.enumerable}:$propertyIsEnumerable;var createPropertyDescriptor$6=function(sn,ln){return{enumerable:!(sn&1),configurable:!(sn&2),writable:!(sn&4),value:ln}},NATIVE_BIND$2=functionBindNative,FunctionPrototype$2=Function.prototype,bind$d=FunctionPrototype$2.bind,call$j=FunctionPrototype$2.call,uncurryThis$q=NATIVE_BIND$2&&bind$d.bind(call$j,call$j),functionUncurryThis=NATIVE_BIND$2?function(sn){return sn&&uncurryThis$q(sn)}:function(sn){return sn&&function(){return call$j.apply(sn,arguments)}},uncurryThis$p=functionUncurryThis,toString$7=uncurryThis$p({}.toString),stringSlice$1=uncurryThis$p("".slice),classofRaw$1=function(sn){return stringSlice$1(toString$7(sn),8,-1)},uncurryThis$o=functionUncurryThis,fails$m=fails$p,classof$9=classofRaw$1,$Object$4=Object,split=uncurryThis$o("".split),indexedObject=fails$m(function(){return!$Object$4("z").propertyIsEnumerable(0)})?function(sn){return classof$9(sn)=="String"?split(sn,""):$Object$4(sn)}:$Object$4,$TypeError$e=TypeError,requireObjectCoercible$3=function(sn){if(sn==null)throw $TypeError$e("Can't call method on "+sn);return sn},IndexedObject$6=indexedObject,requireObjectCoercible$2=requireObjectCoercible$3,toIndexedObject$d=function(sn){return IndexedObject$6(requireObjectCoercible$2(sn))},isCallable$o=function(sn){return typeof sn=="function"},isCallable$n=isCallable$o,isObject$f=function(sn){return typeof sn=="object"?sn!==null:isCallable$n(sn)},global$m=global$n,isCallable$m=isCallable$o,aFunction=function(sn){return isCallable$m(sn)?sn:void 0},getBuiltIn$g=function(sn,ln){return arguments.length<2?aFunction(global$m[sn]):global$m[sn]&&global$m[sn][ln]},uncurryThis$n=functionUncurryThis,objectIsPrototypeOf=uncurryThis$n({}.isPrototypeOf),getBuiltIn$f=getBuiltIn$g,engineUserAgent=getBuiltIn$f("navigator","userAgent")||"",global$l=global$n,userAgent$5=engineUserAgent,process$3=global$l.process,Deno$1=global$l.Deno,versions=process$3&&process$3.versions||Deno$1&&Deno$1.version,v8=versions&&versions.v8,match,version;v8&&(match=v8.split("."),version=match[0]>0&&match[0]<4?1:+(match[0]+match[1]));!version&&userAgent$5&&(match=userAgent$5.match(/Edge\/(\d+)/),(!match||match[1]>=74)&&(match=userAgent$5.match(/Chrome\/(\d+)/),match&&(version=+match[1])));var engineV8Version=version,V8_VERSION$3=engineV8Version,fails$l=fails$p,nativeSymbol=!!Object.getOwnPropertySymbols&&!fails$l(function(){var sn=Symbol();return!String(sn)||!(Object(sn)instanceof Symbol)||!Symbol.sham&&V8_VERSION$3&&V8_VERSION$3<41}),NATIVE_SYMBOL$1=nativeSymbol,useSymbolAsUid=NATIVE_SYMBOL$1&&!Symbol.sham&&typeof Symbol.iterator=="symbol",getBuiltIn$e=getBuiltIn$g,isCallable$l=isCallable$o,isPrototypeOf$3=objectIsPrototypeOf,USE_SYMBOL_AS_UID$1=useSymbolAsUid,$Object$3=Object,isSymbol$2=USE_SYMBOL_AS_UID$1?function(sn){return typeof sn=="symbol"}:function(sn){var ln=getBuiltIn$e("Symbol");return isCallable$l(ln)&&isPrototypeOf$3(ln.prototype,$Object$3(sn))},$String$3=String,tryToString$5=function(sn){try{return $String$3(sn)}catch{return"Object"}},isCallable$k=isCallable$o,tryToString$4=tryToString$5,$TypeError$d=TypeError,aCallable$g=function(sn){if(isCallable$k(sn))return sn;throw $TypeError$d(tryToString$4(sn)+" is not a function")},aCallable$f=aCallable$g,getMethod$7=function(sn,ln){var cn=sn[ln];return cn==null?void 0:aCallable$f(cn)},call$i=functionCall,isCallable$j=isCallable$o,isObject$e=isObject$f,$TypeError$c=TypeError,ordinaryToPrimitive$1=function(sn,ln){var cn,dn;if(ln==="string"&&isCallable$j(cn=sn.toString)&&!isObject$e(dn=call$i(cn,sn))||isCallable$j(cn=sn.valueOf)&&!isObject$e(dn=call$i(cn,sn))||ln!=="string"&&isCallable$j(cn=sn.toString)&&!isObject$e(dn=call$i(cn,sn)))return dn;throw $TypeError$c("Can't convert object to primitive value")},shared$4={exports:{}},global$k=global$n,defineProperty$7=Object.defineProperty,defineGlobalProperty$3=function(sn,ln){try{defineProperty$7(global$k,sn,{value:ln,configurable:!0,writable:!0})}catch{global$k[sn]=ln}return ln},global$j=global$n,defineGlobalProperty$2=defineGlobalProperty$3,SHARED="__core-js_shared__",store$3=global$j[SHARED]||defineGlobalProperty$2(SHARED,{}),sharedStore=store$3,store$2=sharedStore;(shared$4.exports=function(sn,ln){return store$2[sn]||(store$2[sn]=ln!==void 0?ln:{})})("versions",[]).push({version:"3.24.1",mode:"global",copyright:"© 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.24.1/LICENSE",source:"https://github.com/zloirock/core-js"});var requireObjectCoercible$1=requireObjectCoercible$3,$Object$2=Object,toObject$m=function(sn){return $Object$2(requireObjectCoercible$1(sn))},uncurryThis$m=functionUncurryThis,toObject$l=toObject$m,hasOwnProperty=uncurryThis$m({}.hasOwnProperty),hasOwnProperty_1=Object.hasOwn||function sn(ln,cn){return hasOwnProperty(toObject$l(ln),cn)},uncurryThis$l=functionUncurryThis,id$1=0,postfix=Math.random(),toString$6=uncurryThis$l(1 .toString),uid$3=function(sn){return"Symbol("+(sn===void 0?"":sn)+")_"+toString$6(++id$1+postfix,36)},global$i=global$n,shared$3=shared$4.exports,hasOwn$a=hasOwnProperty_1,uid$2=uid$3,NATIVE_SYMBOL=nativeSymbol,USE_SYMBOL_AS_UID=useSymbolAsUid,WellKnownSymbolsStore=shared$3("wks"),Symbol$1=global$i.Symbol,symbolFor=Symbol$1&&Symbol$1.for,createWellKnownSymbol=USE_SYMBOL_AS_UID?Symbol$1:Symbol$1&&Symbol$1.withoutSetter||uid$2,wellKnownSymbol$m=function(sn){if(!hasOwn$a(WellKnownSymbolsStore,sn)||!(NATIVE_SYMBOL||typeof WellKnownSymbolsStore[sn]=="string")){var ln="Symbol."+sn;NATIVE_SYMBOL&&hasOwn$a(Symbol$1,sn)?WellKnownSymbolsStore[sn]=Symbol$1[sn]:USE_SYMBOL_AS_UID&&symbolFor?WellKnownSymbolsStore[sn]=symbolFor(ln):WellKnownSymbolsStore[sn]=createWellKnownSymbol(ln)}return WellKnownSymbolsStore[sn]},call$h=functionCall,isObject$d=isObject$f,isSymbol$1=isSymbol$2,getMethod$6=getMethod$7,ordinaryToPrimitive=ordinaryToPrimitive$1,wellKnownSymbol$l=wellKnownSymbol$m,$TypeError$b=TypeError,TO_PRIMITIVE=wellKnownSymbol$l("toPrimitive"),toPrimitive$1=function(sn,ln){if(!isObject$d(sn)||isSymbol$1(sn))return sn;var cn=getMethod$6(sn,TO_PRIMITIVE),dn;if(cn){if(ln===void 0&&(ln="default"),dn=call$h(cn,sn,ln),!isObject$d(dn)||isSymbol$1(dn))return dn;throw $TypeError$b("Can't convert object to primitive value")}return ln===void 0&&(ln="number"),ordinaryToPrimitive(sn,ln)},toPrimitive=toPrimitive$1,isSymbol=isSymbol$2,toPropertyKey$4=function(sn){var ln=toPrimitive(sn,"string");return isSymbol(ln)?ln:ln+""},global$h=global$n,isObject$c=isObject$f,document$3=global$h.document,EXISTS$1=isObject$c(document$3)&&isObject$c(document$3.createElement),documentCreateElement$2=function(sn){return EXISTS$1?document$3.createElement(sn):{}},DESCRIPTORS$c=descriptors,fails$k=fails$p,createElement$1=documentCreateElement$2,ie8DomDefine=!DESCRIPTORS$c&&!fails$k(function(){return Object.defineProperty(createElement$1("div"),"a",{get:function(){return 7}}).a!=7}),DESCRIPTORS$b=descriptors,call$g=functionCall,propertyIsEnumerableModule=objectPropertyIsEnumerable,createPropertyDescriptor$5=createPropertyDescriptor$6,toIndexedObject$c=toIndexedObject$d,toPropertyKey$3=toPropertyKey$4,hasOwn$9=hasOwnProperty_1,IE8_DOM_DEFINE$1=ie8DomDefine,$getOwnPropertyDescriptor$1=Object.getOwnPropertyDescriptor;objectGetOwnPropertyDescriptor.f=DESCRIPTORS$b?$getOwnPropertyDescriptor$1:function sn(ln,cn){if(ln=toIndexedObject$c(ln),cn=toPropertyKey$3(cn),IE8_DOM_DEFINE$1)try{return $getOwnPropertyDescriptor$1(ln,cn)}catch{}if(hasOwn$9(ln,cn))return createPropertyDescriptor$5(!call$g(propertyIsEnumerableModule.f,ln,cn),ln[cn])};var objectDefineProperty={},DESCRIPTORS$a=descriptors,fails$j=fails$p,v8PrototypeDefineBug=DESCRIPTORS$a&&fails$j(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42}),isObject$b=isObject$f,$String$2=String,$TypeError$a=TypeError,anObject$f=function(sn){if(isObject$b(sn))return sn;throw $TypeError$a($String$2(sn)+" is not an object")},DESCRIPTORS$9=descriptors,IE8_DOM_DEFINE=ie8DomDefine,V8_PROTOTYPE_DEFINE_BUG$1=v8PrototypeDefineBug,anObject$e=anObject$f,toPropertyKey$2=toPropertyKey$4,$TypeError$9=TypeError,$defineProperty=Object.defineProperty,$getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor,ENUMERABLE="enumerable",CONFIGURABLE$1="configurable",WRITABLE="writable";objectDefineProperty.f=DESCRIPTORS$9?V8_PROTOTYPE_DEFINE_BUG$1?function sn(ln,cn,dn){if(anObject$e(ln),cn=toPropertyKey$2(cn),anObject$e(dn),typeof ln=="function"&&cn==="prototype"&&"value"in dn&&WRITABLE in dn&&!dn[WRITABLE]){var pn=$getOwnPropertyDescriptor(ln,cn);pn&&pn[WRITABLE]&&(ln[cn]=dn.value,dn={configurable:CONFIGURABLE$1 in dn?dn[CONFIGURABLE$1]:pn[CONFIGURABLE$1],enumerable:ENUMERABLE in dn?dn[ENUMERABLE]:pn[ENUMERABLE],writable:!1})}return $defineProperty(ln,cn,dn)}:$defineProperty:function sn(ln,cn,dn){if(anObject$e(ln),cn=toPropertyKey$2(cn),anObject$e(dn),IE8_DOM_DEFINE)try{return $defineProperty(ln,cn,dn)}catch{}if("get"in dn||"set"in dn)throw $TypeError$9("Accessors not supported");return"value"in dn&&(ln[cn]=dn.value),ln};var DESCRIPTORS$8=descriptors,definePropertyModule$5=objectDefineProperty,createPropertyDescriptor$4=createPropertyDescriptor$6,createNonEnumerableProperty$6=DESCRIPTORS$8?function(sn,ln,cn){return definePropertyModule$5.f(sn,ln,createPropertyDescriptor$4(1,cn))}:function(sn,ln,cn){return sn[ln]=cn,sn},makeBuiltIn$3={exports:{}},DESCRIPTORS$7=descriptors,hasOwn$8=hasOwnProperty_1,FunctionPrototype$1=Function.prototype,getDescriptor=DESCRIPTORS$7&&Object.getOwnPropertyDescriptor,EXISTS=hasOwn$8(FunctionPrototype$1,"name"),PROPER=EXISTS&&function sn(){}.name==="something",CONFIGURABLE=EXISTS&&(!DESCRIPTORS$7||DESCRIPTORS$7&&getDescriptor(FunctionPrototype$1,"name").configurable),functionName={EXISTS,PROPER,CONFIGURABLE},uncurryThis$k=functionUncurryThis,isCallable$i=isCallable$o,store$1=sharedStore,functionToString=uncurryThis$k(Function.toString);isCallable$i(store$1.inspectSource)||(store$1.inspectSource=function(sn){return functionToString(sn)});var inspectSource$4=store$1.inspectSource,global$g=global$n,isCallable$h=isCallable$o,inspectSource$3=inspectSource$4,WeakMap$1=global$g.WeakMap,nativeWeakMap=isCallable$h(WeakMap$1)&&/native code/.test(inspectSource$3(WeakMap$1)),shared$2=shared$4.exports,uid$1=uid$3,keys=shared$2("keys"),sharedKey$3=function(sn){return keys[sn]||(keys[sn]=uid$1(sn))},hiddenKeys$5={},NATIVE_WEAK_MAP=nativeWeakMap,global$f=global$n,uncurryThis$j=functionUncurryThis,isObject$a=isObject$f,createNonEnumerableProperty$5=createNonEnumerableProperty$6,hasOwn$7=hasOwnProperty_1,shared$1=sharedStore,sharedKey$2=sharedKey$3,hiddenKeys$4=hiddenKeys$5,OBJECT_ALREADY_INITIALIZED="Object already initialized",TypeError$2=global$f.TypeError,WeakMap$2=global$f.WeakMap,set$1,get,has,enforce=function(sn){return has(sn)?get(sn):set$1(sn,{})},getterFor=function(sn){return function(ln){var cn;if(!isObject$a(ln)||(cn=get(ln)).type!==sn)throw TypeError$2("Incompatible receiver, "+sn+" required");return cn}};if(NATIVE_WEAK_MAP||shared$1.state){var store$4=shared$1.state||(shared$1.state=new WeakMap$2),wmget=uncurryThis$j(store$4.get),wmhas=uncurryThis$j(store$4.has),wmset=uncurryThis$j(store$4.set);set$1=function(sn,ln){if(wmhas(store$4,sn))throw new TypeError$2(OBJECT_ALREADY_INITIALIZED);return ln.facade=sn,wmset(store$4,sn,ln),ln},get=function(sn){return wmget(store$4,sn)||{}},has=function(sn){return wmhas(store$4,sn)}}else{var STATE=sharedKey$2("state");hiddenKeys$4[STATE]=!0,set$1=function(sn,ln){if(hasOwn$7(sn,STATE))throw new TypeError$2(OBJECT_ALREADY_INITIALIZED);return ln.facade=sn,createNonEnumerableProperty$5(sn,STATE,ln),ln},get=function(sn){return hasOwn$7(sn,STATE)?sn[STATE]:{}},has=function(sn){return hasOwn$7(sn,STATE)}}var internalState={set:set$1,get,has,enforce,getterFor},fails$i=fails$p,isCallable$g=isCallable$o,hasOwn$6=hasOwnProperty_1,DESCRIPTORS$6=descriptors,CONFIGURABLE_FUNCTION_NAME$1=functionName.CONFIGURABLE,inspectSource$2=inspectSource$4,InternalStateModule$5=internalState,enforceInternalState=InternalStateModule$5.enforce,getInternalState$3=InternalStateModule$5.get,defineProperty$6=Object.defineProperty,CONFIGURABLE_LENGTH=DESCRIPTORS$6&&!fails$i(function(){return defineProperty$6(function(){},"length",{value:8}).length!==8}),TEMPLATE=String(String).split("String"),makeBuiltIn$2=makeBuiltIn$3.exports=function(sn,ln,cn){String(ln).slice(0,7)==="Symbol("&&(ln="["+String(ln).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),cn&&cn.getter&&(ln="get "+ln),cn&&cn.setter&&(ln="set "+ln),(!hasOwn$6(sn,"name")||CONFIGURABLE_FUNCTION_NAME$1&&sn.name!==ln)&&(DESCRIPTORS$6?defineProperty$6(sn,"name",{value:ln,configurable:!0}):sn.name=ln),CONFIGURABLE_LENGTH&&cn&&hasOwn$6(cn,"arity")&&sn.length!==cn.arity&&defineProperty$6(sn,"length",{value:cn.arity});try{cn&&hasOwn$6(cn,"constructor")&&cn.constructor?DESCRIPTORS$6&&defineProperty$6(sn,"prototype",{writable:!1}):sn.prototype&&(sn.prototype=void 0)}catch{}var dn=enforceInternalState(sn);return hasOwn$6(dn,"source")||(dn.source=TEMPLATE.join(typeof ln=="string"?ln:"")),sn};Function.prototype.toString=makeBuiltIn$2(function sn(){return isCallable$g(this)&&getInternalState$3(this).source||inspectSource$2(this)},"toString");var isCallable$f=isCallable$o,definePropertyModule$4=objectDefineProperty,makeBuiltIn$1=makeBuiltIn$3.exports,defineGlobalProperty$1=defineGlobalProperty$3,defineBuiltIn$a=function(sn,ln,cn,dn){dn||(dn={});var pn=dn.enumerable,vn=dn.name!==void 0?dn.name:ln;if(isCallable$f(cn)&&makeBuiltIn$1(cn,vn,dn),dn.global)pn?sn[ln]=cn:defineGlobalProperty$1(ln,cn);else{try{dn.unsafe?sn[ln]&&(pn=!0):delete sn[ln]}catch{}pn?sn[ln]=cn:definePropertyModule$4.f(sn,ln,{value:cn,enumerable:!1,configurable:!dn.nonConfigurable,writable:!dn.nonWritable})}return sn},objectGetOwnPropertyNames={},ceil=Math.ceil,floor$1=Math.floor,mathTrunc=Math.trunc||function sn(ln){var cn=+ln;return(cn>0?floor$1:ceil)(cn)},trunc=mathTrunc,toIntegerOrInfinity$9=function(sn){var ln=+sn;return ln!==ln||ln===0?0:trunc(ln)},toIntegerOrInfinity$8=toIntegerOrInfinity$9,max$4=Math.max,min$5=Math.min,toAbsoluteIndex$7=function(sn,ln){var cn=toIntegerOrInfinity$8(sn);return cn<0?max$4(cn+ln,0):min$5(cn,ln)},toIntegerOrInfinity$7=toIntegerOrInfinity$9,min$4=Math.min,toLength$1=function(sn){return sn>0?min$4(toIntegerOrInfinity$7(sn),9007199254740991):0},toLength=toLength$1,lengthOfArrayLike$t=function(sn){return toLength(sn.length)},toIndexedObject$b=toIndexedObject$d,toAbsoluteIndex$6=toAbsoluteIndex$7,lengthOfArrayLike$s=lengthOfArrayLike$t,createMethod$5=function(sn){return function(ln,cn,dn){var pn=toIndexedObject$b(ln),vn=lengthOfArrayLike$s(pn),kn=toAbsoluteIndex$6(dn,vn),Sn;if(sn&&cn!=cn){for(;vn>kn;)if(Sn=pn[kn++],Sn!=Sn)return!0}else for(;vn>kn;kn++)if((sn||kn in pn)&&pn[kn]===cn)return sn||kn||0;return!sn&&-1}},arrayIncludes={includes:createMethod$5(!0),indexOf:createMethod$5(!1)},uncurryThis$i=functionUncurryThis,hasOwn$5=hasOwnProperty_1,toIndexedObject$a=toIndexedObject$d,indexOf=arrayIncludes.indexOf,hiddenKeys$3=hiddenKeys$5,push$6=uncurryThis$i([].push),objectKeysInternal=function(sn,ln){var cn=toIndexedObject$a(sn),dn=0,pn=[],vn;for(vn in cn)!hasOwn$5(hiddenKeys$3,vn)&&hasOwn$5(cn,vn)&&push$6(pn,vn);for(;ln.length>dn;)hasOwn$5(cn,vn=ln[dn++])&&(~indexOf(pn,vn)||push$6(pn,vn));return pn},enumBugKeys$3=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],internalObjectKeys$1=objectKeysInternal,enumBugKeys$2=enumBugKeys$3,hiddenKeys$2=enumBugKeys$2.concat("length","prototype");objectGetOwnPropertyNames.f=Object.getOwnPropertyNames||function sn(ln){return internalObjectKeys$1(ln,hiddenKeys$2)};var objectGetOwnPropertySymbols={};objectGetOwnPropertySymbols.f=Object.getOwnPropertySymbols;var getBuiltIn$d=getBuiltIn$g,uncurryThis$h=functionUncurryThis,getOwnPropertyNamesModule$1=objectGetOwnPropertyNames,getOwnPropertySymbolsModule=objectGetOwnPropertySymbols,anObject$d=anObject$f,concat=uncurryThis$h([].concat),ownKeys$1=getBuiltIn$d("Reflect","ownKeys")||function sn(ln){var cn=getOwnPropertyNamesModule$1.f(anObject$d(ln)),dn=getOwnPropertySymbolsModule.f;return dn?concat(cn,dn(ln)):cn},hasOwn$4=hasOwnProperty_1,ownKeys=ownKeys$1,getOwnPropertyDescriptorModule=objectGetOwnPropertyDescriptor,definePropertyModule$3=objectDefineProperty,copyConstructorProperties$2=function(sn,ln,cn){for(var dn=ownKeys(ln),pn=definePropertyModule$3.f,vn=getOwnPropertyDescriptorModule.f,kn=0;kn<dn.length;kn++){var Sn=dn[kn];!hasOwn$4(sn,Sn)&&!(cn&&hasOwn$4(cn,Sn))&&pn(sn,Sn,vn(ln,Sn))}},fails$h=fails$p,isCallable$e=isCallable$o,replacement=/#|\.prototype\./,isForced$3=function(sn,ln){var cn=data[normalize(sn)];return cn==POLYFILL?!0:cn==NATIVE?!1:isCallable$e(ln)?fails$h(ln):!!ln},normalize=isForced$3.normalize=function(sn){return String(sn).replace(replacement,".").toLowerCase()},data=isForced$3.data={},NATIVE=isForced$3.NATIVE="N",POLYFILL=isForced$3.POLYFILL="P",isForced_1=isForced$3,global$e=global$n,getOwnPropertyDescriptor$1=objectGetOwnPropertyDescriptor.f,createNonEnumerableProperty$4=createNonEnumerableProperty$6,defineBuiltIn$9=defineBuiltIn$a,defineGlobalProperty=defineGlobalProperty$3,copyConstructorProperties$1=copyConstructorProperties$2,isForced$2=isForced_1,_export=function(sn,ln){var cn=sn.target,dn=sn.global,pn=sn.stat,vn,kn,Sn,wn,Pn,Nn;if(dn?kn=global$e:pn?kn=global$e[cn]||defineGlobalProperty(cn,{}):kn=(global$e[cn]||{}).prototype,kn)for(Sn in ln){if(Pn=ln[Sn],sn.dontCallGetSet?(Nn=getOwnPropertyDescriptor$1(kn,Sn),wn=Nn&&Nn.value):wn=kn[Sn],vn=isForced$2(dn?Sn:cn+(pn?".":"#")+Sn,sn.forced),!vn&&wn!==void 0){if(typeof Pn==typeof wn)continue;copyConstructorProperties$1(Pn,wn)}(sn.sham||wn&&wn.sham)&&createNonEnumerableProperty$4(Pn,"sham",!0),defineBuiltIn$9(kn,Sn,Pn,sn)}},fails$g=fails$p,correctPrototypeGetter=!fails$g(function(){function sn(){}return sn.prototype.constructor=null,Object.getPrototypeOf(new sn)!==sn.prototype}),hasOwn$3=hasOwnProperty_1,isCallable$d=isCallable$o,toObject$k=toObject$m,sharedKey$1=sharedKey$3,CORRECT_PROTOTYPE_GETTER=correctPrototypeGetter,IE_PROTO$1=sharedKey$1("IE_PROTO"),$Object$1=Object,ObjectPrototype=$Object$1.prototype,objectGetPrototypeOf=CORRECT_PROTOTYPE_GETTER?$Object$1.getPrototypeOf:function(sn){var ln=toObject$k(sn);if(hasOwn$3(ln,IE_PROTO$1))return ln[IE_PROTO$1];var cn=ln.constructor;return isCallable$d(cn)&&ln instanceof cn?cn.prototype:ln instanceof $Object$1?ObjectPrototype:null},isCallable$c=isCallable$o,$String$1=String,$TypeError$8=TypeError,aPossiblePrototype$1=function(sn){if(typeof sn=="object"||isCallable$c(sn))return sn;throw $TypeError$8("Can't set "+$String$1(sn)+" as a prototype")},uncurryThis$g=functionUncurryThis,anObject$c=anObject$f,aPossiblePrototype=aPossiblePrototype$1,objectSetPrototypeOf=Object.setPrototypeOf||("__proto__"in{}?function(){var sn=!1,ln={},cn;try{cn=uncurryThis$g(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),cn(ln,[]),sn=ln instanceof Array}catch{}return function(pn,vn){return anObject$c(pn),aPossiblePrototype(vn),sn?cn(pn,vn):pn.__proto__=vn,pn}}():void 0),objectDefineProperties={},internalObjectKeys=objectKeysInternal,enumBugKeys$1=enumBugKeys$3,objectKeys$1=Object.keys||function sn(ln){return internalObjectKeys(ln,enumBugKeys$1)},DESCRIPTORS$5=descriptors,V8_PROTOTYPE_DEFINE_BUG=v8PrototypeDefineBug,definePropertyModule$2=objectDefineProperty,anObject$b=anObject$f,toIndexedObject$9=toIndexedObject$d,objectKeys=objectKeys$1;objectDefineProperties.f=DESCRIPTORS$5&&!V8_PROTOTYPE_DEFINE_BUG?Object.defineProperties:function sn(ln,cn){anObject$b(ln);for(var dn=toIndexedObject$9(cn),pn=objectKeys(cn),vn=pn.length,kn=0,Sn;vn>kn;)definePropertyModule$2.f(ln,Sn=pn[kn++],dn[Sn]);return ln};var getBuiltIn$c=getBuiltIn$g,html$2=getBuiltIn$c("document","documentElement"),anObject$a=anObject$f,definePropertiesModule=objectDefineProperties,enumBugKeys=enumBugKeys$3,hiddenKeys$1=hiddenKeys$5,html$1=html$2,documentCreateElement$1=documentCreateElement$2,sharedKey=sharedKey$3,GT=">",LT="<",PROTOTYPE="prototype",SCRIPT="script",IE_PROTO=sharedKey("IE_PROTO"),EmptyConstructor=function(){},scriptTag=function(sn){return LT+SCRIPT+GT+sn+LT+"/"+SCRIPT+GT},NullProtoObjectViaActiveX=function(sn){sn.write(scriptTag("")),sn.close();var ln=sn.parentWindow.Object;return sn=null,ln},NullProtoObjectViaIFrame=function(){var sn=documentCreateElement$1("iframe"),ln="java"+SCRIPT+":",cn;return sn.style.display="none",html$1.appendChild(sn),sn.src=String(ln),cn=sn.contentWindow.document,cn.open(),cn.write(scriptTag("document.F=Object")),cn.close(),cn.F},activeXDocument,NullProtoObject=function(){try{activeXDocument=new ActiveXObject("htmlfile")}catch{}NullProtoObject=typeof document<"u"?document.domain&&activeXDocument?NullProtoObjectViaActiveX(activeXDocument):NullProtoObjectViaIFrame():NullProtoObjectViaActiveX(activeXDocument);for(var sn=enumBugKeys.length;sn--;)delete NullProtoObject[PROTOTYPE][enumBugKeys[sn]];return NullProtoObject()};hiddenKeys$1[IE_PROTO]=!0;var objectCreate$1=Object.create||function sn(ln,cn){var dn;return ln!==null?(EmptyConstructor[PROTOTYPE]=anObject$a(ln),dn=new EmptyConstructor,EmptyConstructor[PROTOTYPE]=null,dn[IE_PROTO]=ln):dn=NullProtoObject(),cn===void 0?dn:definePropertiesModule.f(dn,cn)},uncurryThis$f=functionUncurryThis,$Error$1=Error,replace=uncurryThis$f("".replace),TEST=function(sn){return String($Error$1(sn).stack)}("zxcasd"),V8_OR_CHAKRA_STACK_ENTRY=/\n\s*at [^:]*:[^\n]*/,IS_V8_OR_CHAKRA_STACK=V8_OR_CHAKRA_STACK_ENTRY.test(TEST),clearErrorStack$1=function(sn,ln){if(IS_V8_OR_CHAKRA_STACK&&typeof sn=="string"&&!$Error$1.prepareStackTrace)for(;ln--;)sn=replace(sn,V8_OR_CHAKRA_STACK_ENTRY,"");return sn},isObject$9=isObject$f,createNonEnumerableProperty$3=createNonEnumerableProperty$6,installErrorCause$1=function(sn,ln){isObject$9(ln)&&"cause"in ln&&createNonEnumerableProperty$3(sn,"cause",ln.cause)},uncurryThis$e=functionUncurryThis,aCallable$e=aCallable$g,NATIVE_BIND$1=functionBindNative,bind$c=uncurryThis$e(uncurryThis$e.bind),functionBindContext=function(sn,ln){return aCallable$e(sn),ln===void 0?sn:NATIVE_BIND$1?bind$c(sn,ln):function(){return sn.apply(ln,arguments)}},iterators={},wellKnownSymbol$k=wellKnownSymbol$m,Iterators$4=iterators,ITERATOR$5=wellKnownSymbol$k("iterator"),ArrayPrototype$1=Array.prototype,isArrayIteratorMethod$2=function(sn){return sn!==void 0&&(Iterators$4.Array===sn||ArrayPrototype$1[ITERATOR$5]===sn)},wellKnownSymbol$j=wellKnownSymbol$m,TO_STRING_TAG$4=wellKnownSymbol$j("toStringTag"),test$2={};test$2[TO_STRING_TAG$4]="z";var toStringTagSupport=String(test$2)==="[object z]",TO_STRING_TAG_SUPPORT$2=toStringTagSupport,isCallable$b=isCallable$o,classofRaw=classofRaw$1,wellKnownSymbol$i=wellKnownSymbol$m,TO_STRING_TAG$3=wellKnownSymbol$i("toStringTag"),$Object=Object,CORRECT_ARGUMENTS=classofRaw(function(){return arguments}())=="Arguments",tryGet=function(sn,ln){try{return sn[ln]}catch{}},classof$8=TO_STRING_TAG_SUPPORT$2?classofRaw:function(sn){var ln,cn,dn;return sn===void 0?"Undefined":sn===null?"Null":typeof(cn=tryGet(ln=$Object(sn),TO_STRING_TAG$3))=="string"?cn:CORRECT_ARGUMENTS?classofRaw(ln):(dn=classofRaw(ln))=="Object"&&isCallable$b(ln.callee)?"Arguments":dn},classof$7=classof$8,getMethod$5=getMethod$7,Iterators$3=iterators,wellKnownSymbol$h=wellKnownSymbol$m,ITERATOR$4=wellKnownSymbol$h("iterator"),getIteratorMethod$4=function(sn){if(sn!=null)return getMethod$5(sn,ITERATOR$4)||getMethod$5(sn,"@@iterator")||Iterators$3[classof$7(sn)]},call$f=functionCall,aCallable$d=aCallable$g,anObject$9=anObject$f,tryToString$3=tryToString$5,getIteratorMethod$3=getIteratorMethod$4,$TypeError$7=TypeError,getIterator$4=function(sn,ln){var cn=arguments.length<2?getIteratorMethod$3(sn):ln;if(aCallable$d(cn))return anObject$9(call$f(cn,sn));throw $TypeError$7(tryToString$3(sn)+" is not iterable")},call$e=functionCall,anObject$8=anObject$f,getMethod$4=getMethod$7,iteratorClose$2=function(sn,ln,cn){var dn,pn;anObject$8(sn);try{if(dn=getMethod$4(sn,"return"),!dn){if(ln==="throw")throw cn;return cn}dn=call$e(dn,sn)}catch(vn){pn=!0,dn=vn}if(ln==="throw")throw cn;if(pn)throw dn;return anObject$8(dn),cn},bind$b=functionBindContext,call$d=functionCall,anObject$7=anObject$f,tryToString$2=tryToString$5,isArrayIteratorMethod$1=isArrayIteratorMethod$2,lengthOfArrayLike$r=lengthOfArrayLike$t,isPrototypeOf$2=objectIsPrototypeOf,getIterator$3=getIterator$4,getIteratorMethod$2=getIteratorMethod$4,iteratorClose$1=iteratorClose$2,$TypeError$6=TypeError,Result=function(sn,ln){this.stopped=sn,this.result=ln},ResultPrototype=Result.prototype,iterate$7=function(sn,ln,cn){var dn=cn&&cn.that,pn=!!(cn&&cn.AS_ENTRIES),vn=!!(cn&&cn.IS_RECORD),kn=!!(cn&&cn.IS_ITERATOR),Sn=!!(cn&&cn.INTERRUPTED),wn=bind$b(ln,dn),Pn,Nn,Ln,Fn,zn,Dn,Kn,qn=function(Yn){return Pn&&iteratorClose$1(Pn,"normal",Yn),new Result(!0,Yn)},Zn=function(Yn){return pn?(anObject$7(Yn),Sn?wn(Yn[0],Yn[1],qn):wn(Yn[0],Yn[1])):Sn?wn(Yn,qn):wn(Yn)};if(vn)Pn=sn.iterator;else if(kn)Pn=sn;else{if(Nn=getIteratorMethod$2(sn),!Nn)throw $TypeError$6(tryToString$2(sn)+" is not iterable");if(isArrayIteratorMethod$1(Nn)){for(Ln=0,Fn=lengthOfArrayLike$r(sn);Fn>Ln;Ln++)if(zn=Zn(sn[Ln]),zn&&isPrototypeOf$2(ResultPrototype,zn))return zn;return new Result(!1)}Pn=getIterator$3(sn,Nn)}for(Dn=vn?sn.next:Pn.next;!(Kn=call$d(Dn,Pn)).done;){try{zn=Zn(Kn.value)}catch(Yn){iteratorClose$1(Pn,"throw",Yn)}if(typeof zn=="object"&&zn&&isPrototypeOf$2(ResultPrototype,zn))return zn}return new Result(!1)},classof$6=classof$8,$String=String,toString$5=function(sn){if(classof$6(sn)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return $String(sn)},toString$4=toString$5,normalizeStringArgument$1=function(sn,ln){return sn===void 0?arguments.length<2?"":ln:toString$4(sn)},fails$f=fails$p,createPropertyDescriptor$3=createPropertyDescriptor$6,errorStackInstallable=!fails$f(function(){var sn=Error("a");return"stack"in sn?(Object.defineProperty(sn,"stack",createPropertyDescriptor$3(1,7)),sn.stack!==7):!0}),$$U=_export,isPrototypeOf$1=objectIsPrototypeOf,getPrototypeOf$3=objectGetPrototypeOf,setPrototypeOf$3=objectSetPrototypeOf,copyConstructorProperties=copyConstructorProperties$2,create$4=objectCreate$1,createNonEnumerableProperty$2=createNonEnumerableProperty$6,createPropertyDescriptor$2=createPropertyDescriptor$6,clearErrorStack=clearErrorStack$1,installErrorCause=installErrorCause$1,iterate$6=iterate$7,normalizeStringArgument=normalizeStringArgument$1,wellKnownSymbol$g=wellKnownSymbol$m,ERROR_STACK_INSTALLABLE=errorStackInstallable,TO_STRING_TAG$2=wellKnownSymbol$g("toStringTag"),$Error=Error,push$5=[].push,$AggregateError=function sn(ln,cn){var dn=arguments.length>2?arguments[2]:void 0,pn=isPrototypeOf$1(AggregateErrorPrototype,this),vn;setPrototypeOf$3?vn=setPrototypeOf$3(new $Error,pn?getPrototypeOf$3(this):AggregateErrorPrototype):(vn=pn?this:create$4(AggregateErrorPrototype),createNonEnumerableProperty$2(vn,TO_STRING_TAG$2,"Error")),cn!==void 0&&createNonEnumerableProperty$2(vn,"message",normalizeStringArgument(cn)),ERROR_STACK_INSTALLABLE&&createNonEnumerableProperty$2(vn,"stack",clearErrorStack(vn.stack,1)),installErrorCause(vn,dn);var kn=[];return iterate$6(ln,push$5,{that:kn}),createNonEnumerableProperty$2(vn,"errors",kn),vn};setPrototypeOf$3?setPrototypeOf$3($AggregateError,$Error):copyConstructorProperties($AggregateError,$Error,{name:!0});var AggregateErrorPrototype=$AggregateError.prototype=create$4($Error.prototype,{constructor:createPropertyDescriptor$2(1,$AggregateError),message:createPropertyDescriptor$2(1,""),name:createPropertyDescriptor$2(1,"AggregateError")});$$U({global:!0,constructor:!0,arity:2},{AggregateError:$AggregateError});var wellKnownSymbol$f=wellKnownSymbol$m,create$3=objectCreate$1,defineProperty$5=objectDefineProperty.f,UNSCOPABLES=wellKnownSymbol$f("unscopables"),ArrayPrototype=Array.prototype;ArrayPrototype[UNSCOPABLES]==null&&defineProperty$5(ArrayPrototype,UNSCOPABLES,{configurable:!0,value:create$3(null)});var addToUnscopables$n=function(sn){ArrayPrototype[UNSCOPABLES][sn]=!0},fails$e=fails$p,isCallable$a=isCallable$o,getPrototypeOf$2=objectGetPrototypeOf,defineBuiltIn$8=defineBuiltIn$a,wellKnownSymbol$e=wellKnownSymbol$m,ITERATOR$3=wellKnownSymbol$e("iterator"),BUGGY_SAFARI_ITERATORS$1=!1,IteratorPrototype$2,PrototypeOfArrayIteratorPrototype,arrayIterator$1;[].keys&&(arrayIterator$1=[].keys(),"next"in arrayIterator$1?(PrototypeOfArrayIteratorPrototype=getPrototypeOf$2(getPrototypeOf$2(arrayIterator$1)),PrototypeOfArrayIteratorPrototype!==Object.prototype&&(IteratorPrototype$2=PrototypeOfArrayIteratorPrototype)):BUGGY_SAFARI_ITERATORS$1=!0);var NEW_ITERATOR_PROTOTYPE=IteratorPrototype$2==null||fails$e(function(){var sn={};return IteratorPrototype$2[ITERATOR$3].call(sn)!==sn});NEW_ITERATOR_PROTOTYPE&&(IteratorPrototype$2={});isCallable$a(IteratorPrototype$2[ITERATOR$3])||defineBuiltIn$8(IteratorPrototype$2,ITERATOR$3,function(){return this});var iteratorsCore={IteratorPrototype:IteratorPrototype$2,BUGGY_SAFARI_ITERATORS:BUGGY_SAFARI_ITERATORS$1},defineProperty$4=objectDefineProperty.f,hasOwn$2=hasOwnProperty_1,wellKnownSymbol$d=wellKnownSymbol$m,TO_STRING_TAG$1=wellKnownSymbol$d("toStringTag"),setToStringTag$4=function(sn,ln,cn){sn&&!cn&&(sn=sn.prototype),sn&&!hasOwn$2(sn,TO_STRING_TAG$1)&&defineProperty$4(sn,TO_STRING_TAG$1,{configurable:!0,value:ln})},IteratorPrototype$1=iteratorsCore.IteratorPrototype,create$2=objectCreate$1,createPropertyDescriptor$1=createPropertyDescriptor$6,setToStringTag$3=setToStringTag$4,Iterators$2=iterators,returnThis$1=function(){return this},createIteratorConstructor$1=function(sn,ln,cn,dn){var pn=ln+" Iterator";return sn.prototype=create$2(IteratorPrototype$1,{next:createPropertyDescriptor$1(+!dn,cn)}),setToStringTag$3(sn,pn,!1),Iterators$2[pn]=returnThis$1,sn},$$T=_export,call$c=functionCall,FunctionName=functionName,isCallable$9=isCallable$o,createIteratorConstructor=createIteratorConstructor$1,getPrototypeOf$1=objectGetPrototypeOf,setPrototypeOf$2=objectSetPrototypeOf,setToStringTag$2=setToStringTag$4,createNonEnumerableProperty$1=createNonEnumerableProperty$6,defineBuiltIn$7=defineBuiltIn$a,wellKnownSymbol$c=wellKnownSymbol$m,Iterators$1=iterators,IteratorsCore=iteratorsCore,PROPER_FUNCTION_NAME=FunctionName.PROPER,CONFIGURABLE_FUNCTION_NAME=FunctionName.CONFIGURABLE,IteratorPrototype=IteratorsCore.IteratorPrototype,BUGGY_SAFARI_ITERATORS=IteratorsCore.BUGGY_SAFARI_ITERATORS,ITERATOR$2=wellKnownSymbol$c("iterator"),KEYS="keys",VALUES="values",ENTRIES="entries",returnThis=function(){return this},defineIterator$3=function(sn,ln,cn,dn,pn,vn,kn){createIteratorConstructor(cn,ln,dn);var Sn=function(Zn){if(Zn===pn&&Fn)return Fn;if(!BUGGY_SAFARI_ITERATORS&&Zn in Nn)return Nn[Zn];switch(Zn){case KEYS:return function(){return new cn(this,Zn)};case VALUES:return function(){return new cn(this,Zn)};case ENTRIES:return function(){return new cn(this,Zn)}}return function(){return new cn(this)}},wn=ln+" Iterator",Pn=!1,Nn=sn.prototype,Ln=Nn[ITERATOR$2]||Nn["@@iterator"]||pn&&Nn[pn],Fn=!BUGGY_SAFARI_ITERATORS&&Ln||Sn(pn),zn=ln=="Array"&&Nn.entries||Ln,Dn,Kn,qn;if(zn&&(Dn=getPrototypeOf$1(zn.call(new sn)),Dn!==Object.prototype&&Dn.next&&(getPrototypeOf$1(Dn)!==IteratorPrototype&&(setPrototypeOf$2?setPrototypeOf$2(Dn,IteratorPrototype):isCallable$9(Dn[ITERATOR$2])||defineBuiltIn$7(Dn,ITERATOR$2,returnThis)),setToStringTag$2(Dn,wn,!0))),PROPER_FUNCTION_NAME&&pn==VALUES&&Ln&&Ln.name!==VALUES&&(CONFIGURABLE_FUNCTION_NAME?createNonEnumerableProperty$1(Nn,"name",VALUES):(Pn=!0,Fn=function(){return call$c(Ln,this)})),pn)if(Kn={values:Sn(VALUES),keys:vn?Fn:Sn(KEYS),entries:Sn(ENTRIES)},kn)for(qn in Kn)(BUGGY_SAFARI_ITERATORS||Pn||!(qn in Nn))&&defineBuiltIn$7(Nn,qn,Kn[qn]);else $$T({target:ln,proto:!0,forced:BUGGY_SAFARI_ITERATORS||Pn},Kn);return Nn[ITERATOR$2]!==Fn&&defineBuiltIn$7(Nn,ITERATOR$2,Fn,{name:pn}),Iterators$1[ln]=Fn,Kn},toIndexedObject$8=toIndexedObject$d,addToUnscopables$m=addToUnscopables$n,Iterators=iterators,InternalStateModule$4=internalState,defineProperty$3=objectDefineProperty.f,defineIterator$2=defineIterator$3,DESCRIPTORS$4=descriptors,ARRAY_ITERATOR="Array Iterator",setInternalState$4=InternalStateModule$4.set,getInternalState$2=InternalStateModule$4.getterFor(ARRAY_ITERATOR),es_array_iterator=defineIterator$2(Array,"Array",function(sn,ln){setInternalState$4(this,{type:ARRAY_ITERATOR,target:toIndexedObject$8(sn),index:0,kind:ln})},function(){var sn=getInternalState$2(this),ln=sn.target,cn=sn.kind,dn=sn.index++;return!ln||dn>=ln.length?(sn.target=void 0,{value:void 0,done:!0}):cn=="keys"?{value:dn,done:!1}:cn=="values"?{value:ln[dn],done:!1}:{value:[dn,ln[dn]],done:!1}},"values"),values=Iterators.Arguments=Iterators.Array;addToUnscopables$m("keys");addToUnscopables$m("values");addToUnscopables$m("entries");if(DESCRIPTORS$4&&values.name!=="values")try{defineProperty$3(values,"name",{value:"values"})}catch(sn){}var TO_STRING_TAG_SUPPORT$1=toStringTagSupport,classof$5=classof$8,objectToString=TO_STRING_TAG_SUPPORT$1?{}.toString:function sn(){return"[object "+classof$5(this)+"]"},TO_STRING_TAG_SUPPORT=toStringTagSupport,defineBuiltIn$6=defineBuiltIn$a,toString$3=objectToString;TO_STRING_TAG_SUPPORT||defineBuiltIn$6(Object.prototype,"toString",toString$3,{unsafe:!0});var classof$4=classofRaw$1,global$d=global$n,engineIsNode=classof$4(global$d.process)=="process",getBuiltIn$b=getBuiltIn$g,definePropertyModule$1=objectDefineProperty,wellKnownSymbol$b=wellKnownSymbol$m,DESCRIPTORS$3=descriptors,SPECIES$5=wellKnownSymbol$b("species"),setSpecies$3=function(sn){var ln=getBuiltIn$b(sn),cn=definePropertyModule$1.f;DESCRIPTORS$3&&ln&&!ln[SPECIES$5]&&cn(ln,SPECIES$5,{configurable:!0,get:function(){return this}})},isPrototypeOf=objectIsPrototypeOf,$TypeError$5=TypeError,anInstance$3=function(sn,ln){if(isPrototypeOf(ln,sn))return sn;throw $TypeError$5("Incorrect invocation")},uncurryThis$d=functionUncurryThis,fails$d=fails$p,isCallable$8=isCallable$o,classof$3=classof$8,getBuiltIn$a=getBuiltIn$g,inspectSource$1=inspectSource$4,noop=function(){},empty=[],construct=getBuiltIn$a("Reflect","construct"),constructorRegExp=/^\s*(?:class|function)\b/,exec=uncurryThis$d(constructorRegExp.exec),INCORRECT_TO_STRING=!constructorRegExp.exec(noop),isConstructorModern=function sn(ln){if(!isCallable$8(ln))return!1;try{return construct(noop,empty,ln),!0}catch{return!1}},isConstructorLegacy=function sn(ln){if(!isCallable$8(ln))return!1;switch(classof$3(ln)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return INCORRECT_TO_STRING||!!exec(constructorRegExp,inspectSource$1(ln))}catch{return!0}};isConstructorLegacy.sham=!0;var isConstructor$6=!construct||fails$d(function(){var sn;return isConstructorModern(isConstructorModern.call)||!isConstructorModern(Object)||!isConstructorModern(function(){sn=!0})||sn})?isConstructorLegacy:isConstructorModern,isConstructor$5=isConstructor$6,tryToString$1=tryToString$5,$TypeError$4=TypeError,aConstructor$1=function(sn){if(isConstructor$5(sn))return sn;throw $TypeError$4(tryToString$1(sn)+" is not a constructor")},anObject$6=anObject$f,aConstructor=aConstructor$1,wellKnownSymbol$a=wellKnownSymbol$m,SPECIES$4=wellKnownSymbol$a("species"),speciesConstructor$2=function(sn,ln){var cn=anObject$6(sn).constructor,dn;return cn===void 0||(dn=anObject$6(cn)[SPECIES$4])==null?ln:aConstructor(dn)},NATIVE_BIND=functionBindNative,FunctionPrototype=Function.prototype,apply$2=FunctionPrototype.apply,call$b=FunctionPrototype.call,functionApply=typeof Reflect=="object"&&Reflect.apply||(NATIVE_BIND?call$b.bind(apply$2):function(){return call$b.apply(apply$2,arguments)}),uncurryThis$c=functionUncurryThis,arraySlice$3=uncurryThis$c([].slice),$TypeError$3=TypeError,validateArgumentsLength$1=function(sn,ln){if(sn<ln)throw $TypeError$3("Not enough arguments");return sn},userAgent$4=engineUserAgent,engineIsIos=/(?:ipad|iphone|ipod).*applewebkit/i.test(userAgent$4),global$c=global$n,apply$1=functionApply,bind$a=functionBindContext,isCallable$7=isCallable$o,hasOwn$1=hasOwnProperty_1,fails$c=fails$p,html=html$2,arraySlice$2=arraySlice$3,createElement=documentCreateElement$2,validateArgumentsLength=validateArgumentsLength$1,IS_IOS$1=engineIsIos,IS_NODE$5=engineIsNode,set=global$c.setImmediate,clear=global$c.clearImmediate,process$2=global$c.process,Dispatch=global$c.Dispatch,Function$1=global$c.Function,MessageChannel$1=global$c.MessageChannel,String$1=global$c.String,counter=0,queue$1={},ONREADYSTATECHANGE="onreadystatechange",location$1,defer,channel,port;try{location$1=global$c.location}catch(sn){}var run=function(sn){if(hasOwn$1(queue$1,sn)){var ln=queue$1[sn];delete queue$1[sn],ln()}},runner=function(sn){return function(){run(sn)}},listener=function(sn){run(sn.data)},post=function(sn){global$c.postMessage(String$1(sn),location$1.protocol+"//"+location$1.host)};(!set||!clear)&&(set=function(ln){validateArgumentsLength(arguments.length,1);var cn=isCallable$7(ln)?ln:Function$1(ln),dn=arraySlice$2(arguments,1);return queue$1[++counter]=function(){apply$1(cn,void 0,dn)},defer(counter),counter},clear=function(ln){delete queue$1[ln]},IS_NODE$5?defer=function(sn){process$2.nextTick(runner(sn))}:Dispatch&&Dispatch.now?defer=function(sn){Dispatch.now(runner(sn))}:MessageChannel$1&&!IS_IOS$1?(channel=new MessageChannel$1,port=channel.port2,channel.port1.onmessage=listener,defer=bind$a(port.postMessage,port)):global$c.addEventListener&&isCallable$7(global$c.postMessage)&&!global$c.importScripts&&location$1&&location$1.protocol!=="file:"&&!fails$c(post)?(defer=post,global$c.addEventListener("message",listener,!1)):ONREADYSTATECHANGE in createElement("script")?defer=function(sn){html.appendChild(createElement("script"))[ONREADYSTATECHANGE]=function(){html.removeChild(this),run(sn)}}:defer=function(sn){setTimeout(runner(sn),0)});var task$1={set,clear},userAgent$3=engineUserAgent,global$b=global$n,engineIsIosPebble=/ipad|iphone|ipod/i.test(userAgent$3)&&global$b.Pebble!==void 0,userAgent$2=engineUserAgent,engineIsWebosWebkit=/web0s(?!.*chrome)/i.test(userAgent$2),global$a=global$n,bind$9=functionBindContext,getOwnPropertyDescriptor=objectGetOwnPropertyDescriptor.f,macrotask=task$1.set,IS_IOS=engineIsIos,IS_IOS_PEBBLE=engineIsIosPebble,IS_WEBOS_WEBKIT=engineIsWebosWebkit,IS_NODE$4=engineIsNode,MutationObserver$1=global$a.MutationObserver||global$a.WebKitMutationObserver,document$2=global$a.document,process$1=global$a.process,Promise$2=global$a.Promise,queueMicrotaskDescriptor=getOwnPropertyDescriptor(global$a,"queueMicrotask"),queueMicrotask$1=queueMicrotaskDescriptor&&queueMicrotaskDescriptor.value,flush,head,last,notify$1,toggle,node,promise$4,then;queueMicrotask$1||(flush=function(){var sn,ln;for(IS_NODE$4&&(sn=process$1.domain)&&sn.exit();head;){ln=head.fn,head=head.next;try{ln()}catch(cn){throw head?notify$1():last=void 0,cn}}last=void 0,sn&&sn.enter()},!IS_IOS&&!IS_NODE$4&&!IS_WEBOS_WEBKIT&&MutationObserver$1&&document$2?(toggle=!0,node=document$2.createTextNode(""),new MutationObserver$1(flush).observe(node,{characterData:!0}),notify$1=function(){node.data=toggle=!toggle}):!IS_IOS_PEBBLE&&Promise$2&&Promise$2.resolve?(promise$4=Promise$2.resolve(void 0),promise$4.constructor=Promise$2,then=bind$9(promise$4.then,promise$4),notify$1=function(){then(flush)}):IS_NODE$4?notify$1=function(){process$1.nextTick(flush)}:(macrotask=bind$9(macrotask,global$a),notify$1=function(){macrotask(flush)}));var microtask$1=queueMicrotask$1||function(sn){var ln={fn:sn,next:void 0};last&&(last.next=ln),head||(head=ln,notify$1()),last=ln},global$9=global$n,hostReportErrors$1=function(sn,ln){var cn=global$9.console;cn&&cn.error&&(arguments.length==1?cn.error(sn):cn.error(sn,ln))},perform$6=function(sn){try{return{error:!1,value:sn()}}catch(ln){return{error:!0,value:ln}}},Queue$1=function(){this.head=null,this.tail=null};Queue$1.prototype={add:function(sn){var ln={item:sn,next:null};this.head?this.tail.next=ln:this.head=ln,this.tail=ln},get:function(){var sn=this.head;if(sn)return this.head=sn.next,this.tail===sn&&(this.tail=null),sn.item}};var queue=Queue$1,global$8=global$n,promiseNativeConstructor=global$8.Promise,engineIsDeno=typeof Deno=="object"&&Deno&&typeof Deno.version=="object",IS_DENO$1=engineIsDeno,IS_NODE$3=engineIsNode,engineIsBrowser=!IS_DENO$1&&!IS_NODE$3&&typeof window=="object"&&typeof document=="object",global$7=global$n,NativePromiseConstructor$4=promiseNativeConstructor,isCallable$6=isCallable$o,isForced$1=isForced_1,inspectSource=inspectSource$4,wellKnownSymbol$9=wellKnownSymbol$m,IS_BROWSER=engineIsBrowser,IS_DENO=engineIsDeno,V8_VERSION$2=engineV8Version;NativePromiseConstructor$4&&NativePromiseConstructor$4.prototype;var SPECIES$3=wellKnownSymbol$9("species"),SUBCLASSING=!1,NATIVE_PROMISE_REJECTION_EVENT$1=isCallable$6(global$7.PromiseRejectionEvent),FORCED_PROMISE_CONSTRUCTOR$5=isForced$1("Promise",function(){var sn=inspectSource(NativePromiseConstructor$4),ln=sn!==String(NativePromiseConstructor$4);if(!ln&&V8_VERSION$2===66)return!0;if(!V8_VERSION$2||V8_VERSION$2<51||!/native code/.test(sn)){var cn=new NativePromiseConstructor$4(function(vn){vn(1)}),dn=function(vn){vn(function(){},function(){})},pn=cn.constructor={};if(pn[SPECIES$3]=dn,SUBCLASSING=cn.then(function(){})instanceof dn,!SUBCLASSING)return!0}return!ln&&(IS_BROWSER||IS_DENO)&&!NATIVE_PROMISE_REJECTION_EVENT$1}),promiseConstructorDetection={CONSTRUCTOR:FORCED_PROMISE_CONSTRUCTOR$5,REJECTION_EVENT:NATIVE_PROMISE_REJECTION_EVENT$1,SUBCLASSING},newPromiseCapability$2={},aCallable$c=aCallable$g,PromiseCapability=function(sn){var ln,cn;this.promise=new sn(function(dn,pn){if(ln!==void 0||cn!==void 0)throw TypeError("Bad Promise constructor");ln=dn,cn=pn}),this.resolve=aCallable$c(ln),this.reject=aCallable$c(cn)};newPromiseCapability$2.f=function(sn){return new PromiseCapability(sn)};var $$S=_export,IS_NODE$2=engineIsNode,global$6=global$n,call$a=functionCall,defineBuiltIn$5=defineBuiltIn$a,setPrototypeOf$1=objectSetPrototypeOf,setToStringTag$1=setToStringTag$4,setSpecies$2=setSpecies$3,aCallable$b=aCallable$g,isCallable$5=isCallable$o,isObject$8=isObject$f,anInstance$2=anInstance$3,speciesConstructor$1=speciesConstructor$2,task=task$1.set,microtask=microtask$1,hostReportErrors=hostReportErrors$1,perform$5=perform$6,Queue=queue,InternalStateModule$3=internalState,NativePromiseConstructor$3=promiseNativeConstructor,PromiseConstructorDetection=promiseConstructorDetection,newPromiseCapabilityModule$6=newPromiseCapability$2,PROMISE="Promise",FORCED_PROMISE_CONSTRUCTOR$4=PromiseConstructorDetection.CONSTRUCTOR,NATIVE_PROMISE_REJECTION_EVENT=PromiseConstructorDetection.REJECTION_EVENT,NATIVE_PROMISE_SUBCLASSING=PromiseConstructorDetection.SUBCLASSING,getInternalPromiseState=InternalStateModule$3.getterFor(PROMISE),setInternalState$3=InternalStateModule$3.set,NativePromisePrototype$2=NativePromiseConstructor$3&&NativePromiseConstructor$3.prototype,PromiseConstructor=NativePromiseConstructor$3,PromisePrototype=NativePromisePrototype$2,TypeError$1=global$6.TypeError,document$1=global$6.document,process$4=global$6.process,newPromiseCapability$1=newPromiseCapabilityModule$6.f,newGenericPromiseCapability=newPromiseCapability$1,DISPATCH_EVENT=!!(document$1&&document$1.createEvent&&global$6.dispatchEvent),UNHANDLED_REJECTION="unhandledrejection",REJECTION_HANDLED="rejectionhandled",PENDING=0,FULFILLED=1,REJECTED=2,HANDLED=1,UNHANDLED=2,Internal,OwnPromiseCapability,PromiseWrapper,nativeThen,isThenable=function(sn){var ln;return isObject$8(sn)&&isCallable$5(ln=sn.then)?ln:!1},callReaction=function(sn,ln){var cn=ln.value,dn=ln.state==FULFILLED,pn=dn?sn.ok:sn.fail,vn=sn.resolve,kn=sn.reject,Sn=sn.domain,wn,Pn,Nn;try{pn?(dn||(ln.rejection===UNHANDLED&&onHandleUnhandled(ln),ln.rejection=HANDLED),pn===!0?wn=cn:(Sn&&Sn.enter(),wn=pn(cn),Sn&&(Sn.exit(),Nn=!0)),wn===sn.promise?kn(TypeError$1("Promise-chain cycle")):(Pn=isThenable(wn))?call$a(Pn,wn,vn,kn):vn(wn)):kn(cn)}catch(Ln){Sn&&!Nn&&Sn.exit(),kn(Ln)}},notify=function(sn,ln){sn.notified||(sn.notified=!0,microtask(function(){for(var cn=sn.reactions,dn;dn=cn.get();)callReaction(dn,sn);sn.notified=!1,ln&&!sn.rejection&&onUnhandled(sn)}))},dispatchEvent=function(sn,ln,cn){var dn,pn;DISPATCH_EVENT?(dn=document$1.createEvent("Event"),dn.promise=ln,dn.reason=cn,dn.initEvent(sn,!1,!0),global$6.dispatchEvent(dn)):dn={promise:ln,reason:cn},!NATIVE_PROMISE_REJECTION_EVENT&&(pn=global$6["on"+sn])?pn(dn):sn===UNHANDLED_REJECTION&&hostReportErrors("Unhandled promise rejection",cn)},onUnhandled=function(sn){call$a(task,global$6,function(){var ln=sn.facade,cn=sn.value,dn=isUnhandled(sn),pn;if(dn&&(pn=perform$5(function(){IS_NODE$2?process$4.emit("unhandledRejection",cn,ln):dispatchEvent(UNHANDLED_REJECTION,ln,cn)}),sn.rejection=IS_NODE$2||isUnhandled(sn)?UNHANDLED:HANDLED,pn.error))throw pn.value})},isUnhandled=function(sn){return sn.rejection!==HANDLED&&!sn.parent},onHandleUnhandled=function(sn){call$a(task,global$6,function(){var ln=sn.facade;IS_NODE$2?process$4.emit("rejectionHandled",ln):dispatchEvent(REJECTION_HANDLED,ln,sn.value)})},bind$8=function(sn,ln,cn){return function(dn){sn(ln,dn,cn)}},internalReject=function(sn,ln,cn){sn.done||(sn.done=!0,cn&&(sn=cn),sn.value=ln,sn.state=REJECTED,notify(sn,!0))},internalResolve=function(sn,ln,cn){if(!sn.done){sn.done=!0,cn&&(sn=cn);try{if(sn.facade===ln)throw TypeError$1("Promise can't be resolved itself");var dn=isThenable(ln);dn?microtask(function(){var pn={done:!1};try{call$a(dn,ln,bind$8(internalResolve,pn,sn),bind$8(internalReject,pn,sn))}catch(vn){internalReject(pn,vn,sn)}}):(sn.value=ln,sn.state=FULFILLED,notify(sn,!1))}catch(pn){internalReject({done:!1},pn,sn)}}};if(FORCED_PROMISE_CONSTRUCTOR$4&&(PromiseConstructor=function(ln){anInstance$2(this,PromisePrototype),aCallable$b(ln),call$a(Internal,this);var cn=getInternalPromiseState(this);try{ln(bind$8(internalResolve,cn),bind$8(internalReject,cn))}catch(dn){internalReject(cn,dn)}},PromisePrototype=PromiseConstructor.prototype,Internal=function(ln){setInternalState$3(this,{type:PROMISE,done:!1,notified:!1,parent:!1,reactions:new Queue,rejection:!1,state:PENDING,value:void 0})},Internal.prototype=defineBuiltIn$5(PromisePrototype,"then",function(ln,cn){var dn=getInternalPromiseState(this),pn=newPromiseCapability$1(speciesConstructor$1(this,PromiseConstructor));return dn.parent=!0,pn.ok=isCallable$5(ln)?ln:!0,pn.fail=isCallable$5(cn)&&cn,pn.domain=IS_NODE$2?process$4.domain:void 0,dn.state==PENDING?dn.reactions.add(pn):microtask(function(){callReaction(pn,dn)}),pn.promise}),OwnPromiseCapability=function(){var sn=new Internal,ln=getInternalPromiseState(sn);this.promise=sn,this.resolve=bind$8(internalResolve,ln),this.reject=bind$8(internalReject,ln)},newPromiseCapabilityModule$6.f=newPromiseCapability$1=function(sn){return sn===PromiseConstructor||sn===PromiseWrapper?new OwnPromiseCapability(sn):newGenericPromiseCapability(sn)},isCallable$5(NativePromiseConstructor$3)&&NativePromisePrototype$2!==Object.prototype)){nativeThen=NativePromisePrototype$2.then,NATIVE_PROMISE_SUBCLASSING||defineBuiltIn$5(NativePromisePrototype$2,"then",function(ln,cn){var dn=this;return new PromiseConstructor(function(pn,vn){call$a(nativeThen,dn,pn,vn)}).then(ln,cn)},{unsafe:!0});try{delete NativePromisePrototype$2.constructor}catch{}setPrototypeOf$1&&setPrototypeOf$1(NativePromisePrototype$2,PromisePrototype)}$$S({global:!0,constructor:!0,wrap:!0,forced:FORCED_PROMISE_CONSTRUCTOR$4},{Promise:PromiseConstructor});setToStringTag$1(PromiseConstructor,PROMISE,!1);setSpecies$2(PROMISE);var wellKnownSymbol$8=wellKnownSymbol$m,ITERATOR$1=wellKnownSymbol$8("iterator"),SAFE_CLOSING=!1;try{var called=0,iteratorWithReturn={next:function(){return{done:!!called++}},return:function(){SAFE_CLOSING=!0}};iteratorWithReturn[ITERATOR$1]=function(){return this},Array.from(iteratorWithReturn,function(){throw 2})}catch(sn){}var checkCorrectnessOfIteration$3=function(sn,ln){if(!ln&&!SAFE_CLOSING)return!1;var cn=!1;try{var dn={};dn[ITERATOR$1]=function(){return{next:function(){return{done:cn=!0}}}},sn(dn)}catch{}return cn},NativePromiseConstructor$2=promiseNativeConstructor,checkCorrectnessOfIteration$2=checkCorrectnessOfIteration$3,FORCED_PROMISE_CONSTRUCTOR$3=promiseConstructorDetection.CONSTRUCTOR,promiseStaticsIncorrectIteration=FORCED_PROMISE_CONSTRUCTOR$3||!checkCorrectnessOfIteration$2(function(sn){NativePromiseConstructor$2.all(sn).then(void 0,function(){})}),$$R=_export,call$9=functionCall,aCallable$a=aCallable$g,newPromiseCapabilityModule$5=newPromiseCapability$2,perform$4=perform$6,iterate$5=iterate$7,PROMISE_STATICS_INCORRECT_ITERATION$1=promiseStaticsIncorrectIteration;$$R({target:"Promise",stat:!0,forced:PROMISE_STATICS_INCORRECT_ITERATION$1},{all:function sn(ln){var cn=this,dn=newPromiseCapabilityModule$5.f(cn),pn=dn.resolve,vn=dn.reject,kn=perform$4(function(){var Sn=aCallable$a(cn.resolve),wn=[],Pn=0,Nn=1;iterate$5(ln,function(Ln){var Fn=Pn++,zn=!1;Nn++,call$9(Sn,cn,Ln).then(function(Dn){zn||(zn=!0,wn[Fn]=Dn,--Nn||pn(wn))},vn)}),--Nn||pn(wn)});return kn.error&&vn(kn.value),dn.promise}});var $$Q=_export,FORCED_PROMISE_CONSTRUCTOR$2=promiseConstructorDetection.CONSTRUCTOR,NativePromiseConstructor$1=promiseNativeConstructor,getBuiltIn$9=getBuiltIn$g,isCallable$4=isCallable$o,defineBuiltIn$4=defineBuiltIn$a,NativePromisePrototype$1=NativePromiseConstructor$1&&NativePromiseConstructor$1.prototype;$$Q({target:"Promise",proto:!0,forced:FORCED_PROMISE_CONSTRUCTOR$2,real:!0},{catch:function(sn){return this.then(void 0,sn)}});if(isCallable$4(NativePromiseConstructor$1)){var method$1=getBuiltIn$9("Promise").prototype.catch;NativePromisePrototype$1.catch!==method$1&&defineBuiltIn$4(NativePromisePrototype$1,"catch",method$1,{unsafe:!0})}var $$P=_export,call$8=functionCall,aCallable$9=aCallable$g,newPromiseCapabilityModule$4=newPromiseCapability$2,perform$3=perform$6,iterate$4=iterate$7,PROMISE_STATICS_INCORRECT_ITERATION=promiseStaticsIncorrectIteration;$$P({target:"Promise",stat:!0,forced:PROMISE_STATICS_INCORRECT_ITERATION},{race:function sn(ln){var cn=this,dn=newPromiseCapabilityModule$4.f(cn),pn=dn.reject,vn=perform$3(function(){var kn=aCallable$9(cn.resolve);iterate$4(ln,function(Sn){call$8(kn,cn,Sn).then(dn.resolve,pn)})});return vn.error&&pn(vn.value),dn.promise}});var $$O=_export,call$7=functionCall,newPromiseCapabilityModule$3=newPromiseCapability$2,FORCED_PROMISE_CONSTRUCTOR$1=promiseConstructorDetection.CONSTRUCTOR;$$O({target:"Promise",stat:!0,forced:FORCED_PROMISE_CONSTRUCTOR$1},{reject:function sn(ln){var cn=newPromiseCapabilityModule$3.f(this);return call$7(cn.reject,void 0,ln),cn.promise}});var anObject$5=anObject$f,isObject$7=isObject$f,newPromiseCapability=newPromiseCapability$2,promiseResolve$2=function(sn,ln){if(anObject$5(sn),isObject$7(ln)&&ln.constructor===sn)return ln;var cn=newPromiseCapability.f(sn),dn=cn.resolve;return dn(ln),cn.promise},$$N=_export,getBuiltIn$8=getBuiltIn$g,FORCED_PROMISE_CONSTRUCTOR=promiseConstructorDetection.CONSTRUCTOR,promiseResolve$1=promiseResolve$2;getBuiltIn$8("Promise");$$N({target:"Promise",stat:!0,forced:FORCED_PROMISE_CONSTRUCTOR},{resolve:function sn(ln){return promiseResolve$1(this,ln)}});var $$M=_export,call$6=functionCall,aCallable$8=aCallable$g,newPromiseCapabilityModule$2=newPromiseCapability$2,perform$2=perform$6,iterate$3=iterate$7;$$M({target:"Promise",stat:!0},{allSettled:function sn(ln){var cn=this,dn=newPromiseCapabilityModule$2.f(cn),pn=dn.resolve,vn=dn.reject,kn=perform$2(function(){var Sn=aCallable$8(cn.resolve),wn=[],Pn=0,Nn=1;iterate$3(ln,function(Ln){var Fn=Pn++,zn=!1;Nn++,call$6(Sn,cn,Ln).then(function(Dn){zn||(zn=!0,wn[Fn]={status:"fulfilled",value:Dn},--Nn||pn(wn))},function(Dn){zn||(zn=!0,wn[Fn]={status:"rejected",reason:Dn},--Nn||pn(wn))})}),--Nn||pn(wn)});return kn.error&&vn(kn.value),dn.promise}});var $$L=_export,call$5=functionCall,aCallable$7=aCallable$g,getBuiltIn$7=getBuiltIn$g,newPromiseCapabilityModule$1=newPromiseCapability$2,perform$1=perform$6,iterate$2=iterate$7,PROMISE_ANY_ERROR="No one promise resolved";$$L({target:"Promise",stat:!0},{any:function sn(ln){var cn=this,dn=getBuiltIn$7("AggregateError"),pn=newPromiseCapabilityModule$1.f(cn),vn=pn.resolve,kn=pn.reject,Sn=perform$1(function(){var wn=aCallable$7(cn.resolve),Pn=[],Nn=0,Ln=1,Fn=!1;iterate$2(ln,function(zn){var Dn=Nn++,Kn=!1;Ln++,call$5(wn,cn,zn).then(function(qn){Kn||Fn||(Fn=!0,vn(qn))},function(qn){Kn||Fn||(Kn=!0,Pn[Dn]=qn,--Ln||kn(new dn(Pn,PROMISE_ANY_ERROR)))})}),--Ln||kn(new dn(Pn,PROMISE_ANY_ERROR))});return Sn.error&&kn(Sn.value),pn.promise}});var $$K=_export,NativePromiseConstructor=promiseNativeConstructor,fails$b=fails$p,getBuiltIn$6=getBuiltIn$g,isCallable$3=isCallable$o,speciesConstructor=speciesConstructor$2,promiseResolve=promiseResolve$2,defineBuiltIn$3=defineBuiltIn$a,NativePromisePrototype=NativePromiseConstructor&&NativePromiseConstructor.prototype,NON_GENERIC=!!NativePromiseConstructor&&fails$b(function(){NativePromisePrototype.finally.call({then:function(){}},function(){})});$$K({target:"Promise",proto:!0,real:!0,forced:NON_GENERIC},{finally:function(sn){var ln=speciesConstructor(this,getBuiltIn$6("Promise")),cn=isCallable$3(sn);return this.then(cn?function(dn){return promiseResolve(ln,sn()).then(function(){return dn})}:sn,cn?function(dn){return promiseResolve(ln,sn()).then(function(){throw dn})}:sn)}});if(isCallable$3(NativePromiseConstructor)){var method=getBuiltIn$6("Promise").prototype.finally;NativePromisePrototype.finally!==method&&defineBuiltIn$3(NativePromisePrototype,"finally",method,{unsafe:!0})}var uncurryThis$b=functionUncurryThis,toIntegerOrInfinity$6=toIntegerOrInfinity$9,toString$2=toString$5,requireObjectCoercible=requireObjectCoercible$3,charAt$1=uncurryThis$b("".charAt),charCodeAt=uncurryThis$b("".charCodeAt),stringSlice=uncurryThis$b("".slice),createMethod$4=function(sn){return function(ln,cn){var dn=toString$2(requireObjectCoercible(ln)),pn=toIntegerOrInfinity$6(cn),vn=dn.length,kn,Sn;return pn<0||pn>=vn?sn?"":void 0:(kn=charCodeAt(dn,pn),kn<55296||kn>56319||pn+1===vn||(Sn=charCodeAt(dn,pn+1))<56320||Sn>57343?sn?charAt$1(dn,pn):kn:sn?stringSlice(dn,pn,pn+2):(kn-55296<<10)+(Sn-56320)+65536)}},stringMultibyte={codeAt:createMethod$4(!1),charAt:createMethod$4(!0)},charAt=stringMultibyte.charAt,toString$1=toString$5,InternalStateModule$2=internalState,defineIterator$1=defineIterator$3,STRING_ITERATOR="String Iterator",setInternalState$2=InternalStateModule$2.set,getInternalState$1=InternalStateModule$2.getterFor(STRING_ITERATOR);defineIterator$1(String,"String",function(sn){setInternalState$2(this,{type:STRING_ITERATOR,string:toString$1(sn),index:0})},function sn(){var ln=getInternalState$1(this),cn=ln.string,dn=ln.index,pn;return dn>=cn.length?{value:void 0,done:!0}:(pn=charAt(cn,dn),ln.index+=pn.length,{value:pn,done:!1})});var global$5=global$n,path$2=global$5,path$1=path$2,promise$3=path$1.Promise,domIterables={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},documentCreateElement=documentCreateElement$2,classList=documentCreateElement("span").classList,DOMTokenListPrototype$1=classList&&classList.constructor&&classList.constructor.prototype,domTokenListPrototype=DOMTokenListPrototype$1===Object.prototype?void 0:DOMTokenListPrototype$1,global$4=global$n,DOMIterables=domIterables,DOMTokenListPrototype=domTokenListPrototype,ArrayIteratorMethods=es_array_iterator,createNonEnumerableProperty=createNonEnumerableProperty$6,wellKnownSymbol$7=wellKnownSymbol$m,ITERATOR=wellKnownSymbol$7("iterator"),TO_STRING_TAG=wellKnownSymbol$7("toStringTag"),ArrayValues=ArrayIteratorMethods.values,handlePrototype=function(sn,ln){if(sn){if(sn[ITERATOR]!==ArrayValues)try{createNonEnumerableProperty(sn,ITERATOR,ArrayValues)}catch{sn[ITERATOR]=ArrayValues}if(sn[TO_STRING_TAG]||createNonEnumerableProperty(sn,TO_STRING_TAG,ln),DOMIterables[ln]){for(var cn in ArrayIteratorMethods)if(sn[cn]!==ArrayIteratorMethods[cn])try{createNonEnumerableProperty(sn,cn,ArrayIteratorMethods[cn])}catch{sn[cn]=ArrayIteratorMethods[cn]}}}};for(var COLLECTION_NAME in DOMIterables)handlePrototype(global$4[COLLECTION_NAME]&&global$4[COLLECTION_NAME].prototype,COLLECTION_NAME);handlePrototype(DOMTokenListPrototype,"DOMTokenList");var parent$5=promise$3,promise$2=parent$5,parent$4=promise$2,promise$1=parent$4,$$J=_export,newPromiseCapabilityModule=newPromiseCapability$2,perform=perform$6;$$J({target:"Promise",stat:!0,forced:!0},{try:function(sn){var ln=newPromiseCapabilityModule.f(this),cn=perform(sn);return(cn.error?ln.reject:ln.resolve)(cn.value),ln.promise}});var parent$3=promise$1,promise=parent$3;(function(sn){sn.exports=promise})(promise$5);var array$4={exports:{}},anObject$4=anObject$f,iteratorClose=iteratorClose$2,callWithSafeIterationClosing$1=function(sn,ln,cn,dn){try{return dn?ln(anObject$4(cn)[0],cn[1]):ln(cn)}catch(pn){iteratorClose(sn,"throw",pn)}},toPropertyKey$1=toPropertyKey$4,definePropertyModule=objectDefineProperty,createPropertyDescriptor=createPropertyDescriptor$6,createProperty$6=function(sn,ln,cn){var dn=toPropertyKey$1(ln);dn in sn?definePropertyModule.f(sn,dn,createPropertyDescriptor(0,cn)):sn[dn]=cn},bind$7=functionBindContext,call$4=functionCall,toObject$j=toObject$m,callWithSafeIterationClosing=callWithSafeIterationClosing$1,isArrayIteratorMethod=isArrayIteratorMethod$2,isConstructor$4=isConstructor$6,lengthOfArrayLike$q=lengthOfArrayLike$t,createProperty$5=createProperty$6,getIterator$2=getIterator$4,getIteratorMethod$1=getIteratorMethod$4,$Array$9=Array,arrayFrom=function sn(ln){var cn=toObject$j(ln),dn=isConstructor$4(this),pn=arguments.length,vn=pn>1?arguments[1]:void 0,kn=vn!==void 0;kn&&(vn=bind$7(vn,pn>2?arguments[2]:void 0));var Sn=getIteratorMethod$1(cn),wn=0,Pn,Nn,Ln,Fn,zn,Dn;if(Sn&&!(this===$Array$9&&isArrayIteratorMethod(Sn)))for(Fn=getIterator$2(cn,Sn),zn=Fn.next,Nn=dn?new this:[];!(Ln=call$4(zn,Fn)).done;wn++)Dn=kn?callWithSafeIterationClosing(Fn,vn,[Ln.value,wn],!0):Ln.value,createProperty$5(Nn,wn,Dn);else for(Pn=lengthOfArrayLike$q(cn),Nn=dn?new this(Pn):$Array$9(Pn);Pn>wn;wn++)Dn=kn?vn(cn[wn],wn):cn[wn],createProperty$5(Nn,wn,Dn);return Nn.length=wn,Nn},$$I=_export,from=arrayFrom,checkCorrectnessOfIteration$1=checkCorrectnessOfIteration$3,INCORRECT_ITERATION=!checkCorrectnessOfIteration$1(function(sn){Array.from(sn)});$$I({target:"Array",stat:!0,forced:INCORRECT_ITERATION},{from});var classof$2=classofRaw$1,isArray$7=Array.isArray||function sn(ln){return classof$2(ln)=="Array"},$$H=_export,isArray$6=isArray$7;$$H({target:"Array",stat:!0},{isArray:isArray$6});var $$G=_export,fails$a=fails$p,isConstructor$3=isConstructor$6,createProperty$4=createProperty$6,$Array$8=Array,ISNT_GENERIC=fails$a(function(){function sn(){}return!($Array$8.of.call(sn)instanceof sn)});$$G({target:"Array",stat:!0,forced:ISNT_GENERIC},{of:function sn(){for(var ln=0,cn=arguments.length,dn=new(isConstructor$3(this)?this:$Array$8)(cn);cn>ln;)createProperty$4(dn,ln,arguments[ln++]);return dn.length=cn,dn}});var $$F=_export,toObject$i=toObject$m,lengthOfArrayLike$p=lengthOfArrayLike$t,toIntegerOrInfinity$5=toIntegerOrInfinity$9,addToUnscopables$l=addToUnscopables$n;$$F({target:"Array",proto:!0},{at:function sn(ln){var cn=toObject$i(this),dn=lengthOfArrayLike$p(cn),pn=toIntegerOrInfinity$5(ln),vn=pn>=0?pn:dn+pn;return vn<0||vn>=dn?void 0:cn[vn]}});addToUnscopables$l("at");var $TypeError$2=TypeError,MAX_SAFE_INTEGER=9007199254740991,doesNotExceedSafeInteger$7=function(sn){if(sn>MAX_SAFE_INTEGER)throw $TypeError$2("Maximum allowed index exceeded");return sn},isArray$5=isArray$7,isConstructor$2=isConstructor$6,isObject$6=isObject$f,wellKnownSymbol$6=wellKnownSymbol$m,SPECIES$2=wellKnownSymbol$6("species"),$Array$7=Array,arraySpeciesConstructor$1=function(sn){var ln;return isArray$5(sn)&&(ln=sn.constructor,isConstructor$2(ln)&&(ln===$Array$7||isArray$5(ln.prototype))?ln=void 0:isObject$6(ln)&&(ln=ln[SPECIES$2],ln===null&&(ln=void 0))),ln===void 0?$Array$7:ln},arraySpeciesConstructor=arraySpeciesConstructor$1,arraySpeciesCreate$6=function(sn,ln){return new(arraySpeciesConstructor(sn))(ln===0?0:ln)},fails$9=fails$p,wellKnownSymbol$5=wellKnownSymbol$m,V8_VERSION$1=engineV8Version,SPECIES$1=wellKnownSymbol$5("species"),arrayMethodHasSpeciesSupport$5=function(sn){return V8_VERSION$1>=51||!fails$9(function(){var ln=[],cn=ln.constructor={};return cn[SPECIES$1]=function(){return{foo:1}},ln[sn](Boolean).foo!==1})},$$E=_export,fails$8=fails$p,isArray$4=isArray$7,isObject$5=isObject$f,toObject$h=toObject$m,lengthOfArrayLike$o=lengthOfArrayLike$t,doesNotExceedSafeInteger$6=doesNotExceedSafeInteger$7,createProperty$3=createProperty$6,arraySpeciesCreate$5=arraySpeciesCreate$6,arrayMethodHasSpeciesSupport$4=arrayMethodHasSpeciesSupport$5,wellKnownSymbol$4=wellKnownSymbol$m,V8_VERSION=engineV8Version,IS_CONCAT_SPREADABLE=wellKnownSymbol$4("isConcatSpreadable"),IS_CONCAT_SPREADABLE_SUPPORT=V8_VERSION>=51||!fails$8(function(){var sn=[];return sn[IS_CONCAT_SPREADABLE]=!1,sn.concat()[0]!==sn}),SPECIES_SUPPORT=arrayMethodHasSpeciesSupport$4("concat"),isConcatSpreadable=function(sn){if(!isObject$5(sn))return!1;var ln=sn[IS_CONCAT_SPREADABLE];return ln!==void 0?!!ln:isArray$4(sn)},FORCED$2=!IS_CONCAT_SPREADABLE_SUPPORT||!SPECIES_SUPPORT;$$E({target:"Array",proto:!0,arity:1,forced:FORCED$2},{concat:function sn(ln){var cn=toObject$h(this),dn=arraySpeciesCreate$5(cn,0),pn=0,vn,kn,Sn,wn,Pn;for(vn=-1,Sn=arguments.length;vn<Sn;vn++)if(Pn=vn===-1?cn:arguments[vn],isConcatSpreadable(Pn))for(wn=lengthOfArrayLike$o(Pn),doesNotExceedSafeInteger$6(pn+wn),kn=0;kn<wn;kn++,pn++)kn in Pn&&createProperty$3(dn,pn,Pn[kn]);else doesNotExceedSafeInteger$6(pn+1),createProperty$3(dn,pn++,Pn);return dn.length=pn,dn}});var tryToString=tryToString$5,$TypeError$1=TypeError,deletePropertyOrThrow$4=function(sn,ln){if(!delete sn[ln])throw $TypeError$1("Cannot delete property "+tryToString(ln)+" of "+tryToString(sn))},toObject$g=toObject$m,toAbsoluteIndex$5=toAbsoluteIndex$7,lengthOfArrayLike$n=lengthOfArrayLike$t,deletePropertyOrThrow$3=deletePropertyOrThrow$4,min$3=Math.min,arrayCopyWithin=[].copyWithin||function sn(ln,cn){var dn=toObject$g(this),pn=lengthOfArrayLike$n(dn),vn=toAbsoluteIndex$5(ln,pn),kn=toAbsoluteIndex$5(cn,pn),Sn=arguments.length>2?arguments[2]:void 0,wn=min$3((Sn===void 0?pn:toAbsoluteIndex$5(Sn,pn))-kn,pn-vn),Pn=1;for(kn<vn&&vn<kn+wn&&(Pn=-1,kn+=wn-1,vn+=wn-1);wn-- >0;)kn in dn?dn[vn]=dn[kn]:deletePropertyOrThrow$3(dn,vn),vn+=Pn,kn+=Pn;return dn},$$D=_export,copyWithin=arrayCopyWithin,addToUnscopables$k=addToUnscopables$n;$$D({target:"Array",proto:!0},{copyWithin});addToUnscopables$k("copyWithin");var bind$6=functionBindContext,uncurryThis$a=functionUncurryThis,IndexedObject$5=indexedObject,toObject$f=toObject$m,lengthOfArrayLike$m=lengthOfArrayLike$t,arraySpeciesCreate$4=arraySpeciesCreate$6,push$4=uncurryThis$a([].push),createMethod$3=function(sn){var ln=sn==1,cn=sn==2,dn=sn==3,pn=sn==4,vn=sn==6,kn=sn==7,Sn=sn==5||vn;return function(wn,Pn,Nn,Ln){for(var Fn=toObject$f(wn),zn=IndexedObject$5(Fn),Dn=bind$6(Pn,Nn),Kn=lengthOfArrayLike$m(zn),qn=0,Zn=Ln||arraySpeciesCreate$4,Yn=ln?Zn(wn,Kn):cn||kn?Zn(wn,0):void 0,Jn,rs;Kn>qn;qn++)if((Sn||qn in zn)&&(Jn=zn[qn],rs=Dn(Jn,qn,Fn),sn))if(ln)Yn[qn]=rs;else if(rs)switch(sn){case 3:return!0;case 5:return Jn;case 6:return qn;case 2:push$4(Yn,Jn)}else switch(sn){case 4:return!1;case 7:push$4(Yn,Jn)}return vn?-1:dn||pn?pn:Yn}},arrayIteration={forEach:createMethod$3(0),map:createMethod$3(1),filter:createMethod$3(2),some:createMethod$3(3),every:createMethod$3(4),find:createMethod$3(5),findIndex:createMethod$3(6),filterReject:createMethod$3(7)},fails$7=fails$p,arrayMethodIsStrict$b=function(sn,ln){var cn=[][sn];return!!cn&&fails$7(function(){cn.call(null,ln||function(){return 1},1)})},$$C=_export,$every=arrayIteration.every,arrayMethodIsStrict$a=arrayMethodIsStrict$b,STRICT_METHOD$8=arrayMethodIsStrict$a("every");$$C({target:"Array",proto:!0,forced:!STRICT_METHOD$8},{every:function sn(ln){return $every(this,ln,arguments.length>1?arguments[1]:void 0)}});var toObject$e=toObject$m,toAbsoluteIndex$4=toAbsoluteIndex$7,lengthOfArrayLike$l=lengthOfArrayLike$t,arrayFill=function sn(ln){for(var cn=toObject$e(this),dn=lengthOfArrayLike$l(cn),pn=arguments.length,vn=toAbsoluteIndex$4(pn>1?arguments[1]:void 0,dn),kn=pn>2?arguments[2]:void 0,Sn=kn===void 0?dn:toAbsoluteIndex$4(kn,dn);Sn>vn;)cn[vn++]=ln;return cn},$$B=_export,fill=arrayFill,addToUnscopables$j=addToUnscopables$n;$$B({target:"Array",proto:!0},{fill});addToUnscopables$j("fill");var $$A=_export,$filter=arrayIteration.filter,arrayMethodHasSpeciesSupport$3=arrayMethodHasSpeciesSupport$5,HAS_SPECIES_SUPPORT$3=arrayMethodHasSpeciesSupport$3("filter");$$A({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT$3},{filter:function sn(ln){return $filter(this,ln,arguments.length>1?arguments[1]:void 0)}});var $$z=_export,$find=arrayIteration.find,addToUnscopables$i=addToUnscopables$n,FIND="find",SKIPS_HOLES$1=!0;FIND in[]&&Array(1)[FIND](function(){SKIPS_HOLES$1=!1});$$z({target:"Array",proto:!0,forced:SKIPS_HOLES$1},{find:function sn(ln){return $find(this,ln,arguments.length>1?arguments[1]:void 0)}});addToUnscopables$i(FIND);var $$y=_export,$findIndex=arrayIteration.findIndex,addToUnscopables$h=addToUnscopables$n,FIND_INDEX="findIndex",SKIPS_HOLES=!0;FIND_INDEX in[]&&Array(1)[FIND_INDEX](function(){SKIPS_HOLES=!1});$$y({target:"Array",proto:!0,forced:SKIPS_HOLES},{findIndex:function sn(ln){return $findIndex(this,ln,arguments.length>1?arguments[1]:void 0)}});addToUnscopables$h(FIND_INDEX);var bind$5=functionBindContext,IndexedObject$4=indexedObject,toObject$d=toObject$m,lengthOfArrayLike$k=lengthOfArrayLike$t,createMethod$2=function(sn){var ln=sn==1;return function(cn,dn,pn){for(var vn=toObject$d(cn),kn=IndexedObject$4(vn),Sn=bind$5(dn,pn),wn=lengthOfArrayLike$k(kn),Pn,Nn;wn-- >0;)if(Pn=kn[wn],Nn=Sn(Pn,wn,vn),Nn)switch(sn){case 0:return Pn;case 1:return wn}return ln?-1:void 0}},arrayIterationFromLast={findLast:createMethod$2(0),findLastIndex:createMethod$2(1)},$$x=_export,$findLast=arrayIterationFromLast.findLast,addToUnscopables$g=addToUnscopables$n;$$x({target:"Array",proto:!0},{findLast:function sn(ln){return $findLast(this,ln,arguments.length>1?arguments[1]:void 0)}});addToUnscopables$g("findLast");var $$w=_export,$findLastIndex=arrayIterationFromLast.findLastIndex,addToUnscopables$f=addToUnscopables$n;$$w({target:"Array",proto:!0},{findLastIndex:function sn(ln){return $findLastIndex(this,ln,arguments.length>1?arguments[1]:void 0)}});addToUnscopables$f("findLastIndex");var isArray$3=isArray$7,lengthOfArrayLike$j=lengthOfArrayLike$t,doesNotExceedSafeInteger$5=doesNotExceedSafeInteger$7,bind$4=functionBindContext,flattenIntoArray$2=function(sn,ln,cn,dn,pn,vn,kn,Sn){for(var wn=pn,Pn=0,Nn=kn?bind$4(kn,Sn):!1,Ln,Fn;Pn<dn;)Pn in cn&&(Ln=Nn?Nn(cn[Pn],Pn,ln):cn[Pn],vn>0&&isArray$3(Ln)?(Fn=lengthOfArrayLike$j(Ln),wn=flattenIntoArray$2(sn,ln,Ln,Fn,wn,vn-1)-1):(doesNotExceedSafeInteger$5(wn+1),sn[wn]=Ln),wn++),Pn++;return wn},flattenIntoArray_1=flattenIntoArray$2,$$v=_export,flattenIntoArray$1=flattenIntoArray_1,toObject$c=toObject$m,lengthOfArrayLike$i=lengthOfArrayLike$t,toIntegerOrInfinity$4=toIntegerOrInfinity$9,arraySpeciesCreate$3=arraySpeciesCreate$6;$$v({target:"Array",proto:!0},{flat:function sn(){var ln=arguments.length?arguments[0]:void 0,cn=toObject$c(this),dn=lengthOfArrayLike$i(cn),pn=arraySpeciesCreate$3(cn,0);return pn.length=flattenIntoArray$1(pn,cn,cn,dn,0,ln===void 0?1:toIntegerOrInfinity$4(ln)),pn}});var $$u=_export,flattenIntoArray=flattenIntoArray_1,aCallable$6=aCallable$g,toObject$b=toObject$m,lengthOfArrayLike$h=lengthOfArrayLike$t,arraySpeciesCreate$2=arraySpeciesCreate$6;$$u({target:"Array",proto:!0},{flatMap:function sn(ln){var cn=toObject$b(this),dn=lengthOfArrayLike$h(cn),pn;return aCallable$6(ln),pn=arraySpeciesCreate$2(cn,0),pn.length=flattenIntoArray(pn,cn,cn,dn,0,1,ln,arguments.length>1?arguments[1]:void 0),pn}});var $forEach=arrayIteration.forEach,arrayMethodIsStrict$9=arrayMethodIsStrict$b,STRICT_METHOD$7=arrayMethodIsStrict$9("forEach"),arrayForEach=STRICT_METHOD$7?[].forEach:function sn(ln){return $forEach(this,ln,arguments.length>1?arguments[1]:void 0)},$$t=_export,forEach=arrayForEach;$$t({target:"Array",proto:!0,forced:[].forEach!=forEach},{forEach});var $$s=_export,$includes=arrayIncludes.includes,fails$6=fails$p,addToUnscopables$e=addToUnscopables$n,BROKEN_ON_SPARSE=fails$6(function(){return!Array(1).includes()});$$s({target:"Array",proto:!0,forced:BROKEN_ON_SPARSE},{includes:function sn(ln){return $includes(this,ln,arguments.length>1?arguments[1]:void 0)}});addToUnscopables$e("includes");var $$r=_export,uncurryThis$9=functionUncurryThis,$IndexOf=arrayIncludes.indexOf,arrayMethodIsStrict$8=arrayMethodIsStrict$b,un$IndexOf=uncurryThis$9([].indexOf),NEGATIVE_ZERO$1=!!un$IndexOf&&1/un$IndexOf([1],1,-0)<0,STRICT_METHOD$6=arrayMethodIsStrict$8("indexOf");$$r({target:"Array",proto:!0,forced:NEGATIVE_ZERO$1||!STRICT_METHOD$6},{indexOf:function sn(ln){var cn=arguments.length>1?arguments[1]:void 0;return NEGATIVE_ZERO$1?un$IndexOf(this,ln,cn)||0:$IndexOf(this,ln,cn)}});var $$q=_export,uncurryThis$8=functionUncurryThis,IndexedObject$3=indexedObject,toIndexedObject$7=toIndexedObject$d,arrayMethodIsStrict$7=arrayMethodIsStrict$b,un$Join=uncurryThis$8([].join),ES3_STRINGS=IndexedObject$3!=Object,STRICT_METHOD$5=arrayMethodIsStrict$7("join",",");$$q({target:"Array",proto:!0,forced:ES3_STRINGS||!STRICT_METHOD$5},{join:function sn(ln){return un$Join(toIndexedObject$7(this),ln===void 0?",":ln)}});var apply=functionApply,toIndexedObject$6=toIndexedObject$d,toIntegerOrInfinity$3=toIntegerOrInfinity$9,lengthOfArrayLike$g=lengthOfArrayLike$t,arrayMethodIsStrict$6=arrayMethodIsStrict$b,min$2=Math.min,$lastIndexOf=[].lastIndexOf,NEGATIVE_ZERO=!!$lastIndexOf&&1/[1].lastIndexOf(1,-0)<0,STRICT_METHOD$4=arrayMethodIsStrict$6("lastIndexOf"),FORCED$1=NEGATIVE_ZERO||!STRICT_METHOD$4,arrayLastIndexOf=FORCED$1?function sn(ln){if(NEGATIVE_ZERO)return apply($lastIndexOf,this,arguments)||0;var cn=toIndexedObject$6(this),dn=lengthOfArrayLike$g(cn),pn=dn-1;for(arguments.length>1&&(pn=min$2(pn,toIntegerOrInfinity$3(arguments[1]))),pn<0&&(pn=dn+pn);pn>=0;pn--)if(pn in cn&&cn[pn]===ln)return pn||0;return-1}:$lastIndexOf,$$p=_export,lastIndexOf=arrayLastIndexOf;$$p({target:"Array",proto:!0,forced:lastIndexOf!==[].lastIndexOf},{lastIndexOf});var $$o=_export,$map=arrayIteration.map,arrayMethodHasSpeciesSupport$2=arrayMethodHasSpeciesSupport$5,HAS_SPECIES_SUPPORT$2=arrayMethodHasSpeciesSupport$2("map");$$o({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT$2},{map:function sn(ln){return $map(this,ln,arguments.length>1?arguments[1]:void 0)}});var $$n=_export,toObject$a=toObject$m,lengthOfArrayLike$f=lengthOfArrayLike$t,doesNotExceedSafeInteger$4=doesNotExceedSafeInteger$7,fails$5=fails$p,INCORRECT_TO_LENGTH=fails$5(function(){return[].push.call({length:4294967296},1)!==4294967297}),SILENT_ON_NON_WRITABLE_LENGTH$1=!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(sn){return sn instanceof TypeError}}();$$n({target:"Array",proto:!0,arity:1,forced:INCORRECT_TO_LENGTH||SILENT_ON_NON_WRITABLE_LENGTH$1},{push:function sn(ln){var cn=toObject$a(this),dn=lengthOfArrayLike$f(cn),pn=arguments.length;doesNotExceedSafeInteger$4(dn+pn);for(var vn=0;vn<pn;vn++)cn[dn]=arguments[vn],dn++;return cn.length=dn,dn}});var aCallable$5=aCallable$g,toObject$9=toObject$m,IndexedObject$2=indexedObject,lengthOfArrayLike$e=lengthOfArrayLike$t,$TypeError=TypeError,createMethod$1=function(sn){return function(ln,cn,dn,pn){aCallable$5(cn);var vn=toObject$9(ln),kn=IndexedObject$2(vn),Sn=lengthOfArrayLike$e(vn),wn=sn?Sn-1:0,Pn=sn?-1:1;if(dn<2)for(;;){if(wn in kn){pn=kn[wn],wn+=Pn;break}if(wn+=Pn,sn?wn<0:Sn<=wn)throw $TypeError("Reduce of empty array with no initial value")}for(;sn?wn>=0:Sn>wn;wn+=Pn)wn in kn&&(pn=cn(pn,kn[wn],wn,vn));return pn}},arrayReduce={left:createMethod$1(!1),right:createMethod$1(!0)},$$m=_export,$reduce=arrayReduce.left,arrayMethodIsStrict$5=arrayMethodIsStrict$b,CHROME_VERSION$1=engineV8Version,IS_NODE$1=engineIsNode,STRICT_METHOD$3=arrayMethodIsStrict$5("reduce"),CHROME_BUG$1=!IS_NODE$1&&CHROME_VERSION$1>79&&CHROME_VERSION$1<83;$$m({target:"Array",proto:!0,forced:!STRICT_METHOD$3||CHROME_BUG$1},{reduce:function sn(ln){var cn=arguments.length;return $reduce(this,ln,cn,cn>1?arguments[1]:void 0)}});var $$l=_export,$reduceRight=arrayReduce.right,arrayMethodIsStrict$4=arrayMethodIsStrict$b,CHROME_VERSION=engineV8Version,IS_NODE=engineIsNode,STRICT_METHOD$2=arrayMethodIsStrict$4("reduceRight"),CHROME_BUG=!IS_NODE&&CHROME_VERSION>79&&CHROME_VERSION<83;$$l({target:"Array",proto:!0,forced:!STRICT_METHOD$2||CHROME_BUG},{reduceRight:function sn(ln){return $reduceRight(this,ln,arguments.length,arguments.length>1?arguments[1]:void 0)}});var $$k=_export,uncurryThis$7=functionUncurryThis,isArray$2=isArray$7,un$Reverse=uncurryThis$7([].reverse),test$1=[1,2];$$k({target:"Array",proto:!0,forced:String(test$1)===String(test$1.reverse())},{reverse:function sn(){return isArray$2(this)&&(this.length=this.length),un$Reverse(this)}});var $$j=_export,isArray$1=isArray$7,isConstructor$1=isConstructor$6,isObject$4=isObject$f,toAbsoluteIndex$3=toAbsoluteIndex$7,lengthOfArrayLike$d=lengthOfArrayLike$t,toIndexedObject$5=toIndexedObject$d,createProperty$2=createProperty$6,wellKnownSymbol$3=wellKnownSymbol$m,arrayMethodHasSpeciesSupport$1=arrayMethodHasSpeciesSupport$5,un$Slice=arraySlice$3,HAS_SPECIES_SUPPORT$1=arrayMethodHasSpeciesSupport$1("slice"),SPECIES=wellKnownSymbol$3("species"),$Array$6=Array,max$3=Math.max;$$j({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT$1},{slice:function sn(ln,cn){var dn=toIndexedObject$5(this),pn=lengthOfArrayLike$d(dn),vn=toAbsoluteIndex$3(ln,pn),kn=toAbsoluteIndex$3(cn===void 0?pn:cn,pn),Sn,wn,Pn;if(isArray$1(dn)&&(Sn=dn.constructor,isConstructor$1(Sn)&&(Sn===$Array$6||isArray$1(Sn.prototype))?Sn=void 0:isObject$4(Sn)&&(Sn=Sn[SPECIES],Sn===null&&(Sn=void 0)),Sn===$Array$6||Sn===void 0))return un$Slice(dn,vn,kn);for(wn=new(Sn===void 0?$Array$6:Sn)(max$3(kn-vn,0)),Pn=0;vn<kn;vn++,Pn++)vn in dn&&createProperty$2(wn,Pn,dn[vn]);return wn.length=Pn,wn}});var $$i=_export,$some=arrayIteration.some,arrayMethodIsStrict$3=arrayMethodIsStrict$b,STRICT_METHOD$1=arrayMethodIsStrict$3("some");$$i({target:"Array",proto:!0,forced:!STRICT_METHOD$1},{some:function sn(ln){return $some(this,ln,arguments.length>1?arguments[1]:void 0)}});var toAbsoluteIndex$2=toAbsoluteIndex$7,lengthOfArrayLike$c=lengthOfArrayLike$t,createProperty$1=createProperty$6,$Array$5=Array,max$2=Math.max,arraySliceSimple=function(sn,ln,cn){for(var dn=lengthOfArrayLike$c(sn),pn=toAbsoluteIndex$2(ln,dn),vn=toAbsoluteIndex$2(cn===void 0?dn:cn,dn),kn=$Array$5(max$2(vn-pn,0)),Sn=0;pn<vn;pn++,Sn++)createProperty$1(kn,Sn,sn[pn]);return kn.length=Sn,kn},arraySlice$1=arraySliceSimple,floor=Math.floor,mergeSort=function(sn,ln){var cn=sn.length,dn=floor(cn/2);return cn<8?insertionSort(sn,ln):merge(sn,mergeSort(arraySlice$1(sn,0,dn),ln),mergeSort(arraySlice$1(sn,dn),ln),ln)},insertionSort=function(sn,ln){for(var cn=sn.length,dn=1,pn,vn;dn<cn;){for(vn=dn,pn=sn[dn];vn&&ln(sn[vn-1],pn)>0;)sn[vn]=sn[--vn];vn!==dn++&&(sn[vn]=pn)}return sn},merge=function(sn,ln,cn,dn){for(var pn=ln.length,vn=cn.length,kn=0,Sn=0;kn<pn||Sn<vn;)sn[kn+Sn]=kn<pn&&Sn<vn?dn(ln[kn],cn[Sn])<=0?ln[kn++]:cn[Sn++]:kn<pn?ln[kn++]:cn[Sn++];return sn},arraySort=mergeSort,userAgent$1=engineUserAgent,firefox=userAgent$1.match(/firefox\/(\d+)/i),engineFfVersion=!!firefox&&+firefox[1],UA=engineUserAgent,engineIsIeOrEdge=/MSIE|Trident/.test(UA),userAgent=engineUserAgent,webkit=userAgent.match(/AppleWebKit\/(\d+)\./),engineWebkitVersion=!!webkit&&+webkit[1],$$h=_export,uncurryThis$6=functionUncurryThis,aCallable$4=aCallable$g,toObject$8=toObject$m,lengthOfArrayLike$b=lengthOfArrayLike$t,deletePropertyOrThrow$2=deletePropertyOrThrow$4,toString=toString$5,fails$4=fails$p,internalSort=arraySort,arrayMethodIsStrict$2=arrayMethodIsStrict$b,FF=engineFfVersion,IE_OR_EDGE=engineIsIeOrEdge,V8=engineV8Version,WEBKIT=engineWebkitVersion,test=[],un$Sort=uncurryThis$6(test.sort),push$3=uncurryThis$6(test.push),FAILS_ON_UNDEFINED=fails$4(function(){test.sort(void 0)}),FAILS_ON_NULL=fails$4(function(){test.sort(null)}),STRICT_METHOD=arrayMethodIsStrict$2("sort"),STABLE_SORT=!fails$4(function(){if(V8)return V8<70;if(!(FF&&FF>3)){if(IE_OR_EDGE)return!0;if(WEBKIT)return WEBKIT<603;var sn="",ln,cn,dn,pn;for(ln=65;ln<76;ln++){switch(cn=String.fromCharCode(ln),ln){case 66:case 69:case 70:case 72:dn=3;break;case 68:case 71:dn=4;break;default:dn=2}for(pn=0;pn<47;pn++)test.push({k:cn+pn,v:dn})}for(test.sort(function(vn,kn){return kn.v-vn.v}),pn=0;pn<test.length;pn++)cn=test[pn].k.charAt(0),sn.charAt(sn.length-1)!==cn&&(sn+=cn);return sn!=="DGBEFHACIJK"}}),FORCED=FAILS_ON_UNDEFINED||!FAILS_ON_NULL||!STRICT_METHOD||!STABLE_SORT,getSortCompare=function(sn){return function(ln,cn){return cn===void 0?-1:ln===void 0?1:sn!==void 0?+sn(ln,cn)||0:toString(ln)>toString(cn)?1:-1}};$$h({target:"Array",proto:!0,forced:FORCED},{sort:function sn(ln){ln!==void 0&&aCallable$4(ln);var cn=toObject$8(this);if(STABLE_SORT)return ln===void 0?un$Sort(cn):un$Sort(cn,ln);var dn=[],pn=lengthOfArrayLike$b(cn),vn,kn;for(kn=0;kn<pn;kn++)kn in cn&&push$3(dn,cn[kn]);for(internalSort(dn,getSortCompare(ln)),vn=dn.length,kn=0;kn<vn;)cn[kn]=dn[kn++];for(;kn<pn;)deletePropertyOrThrow$2(cn,kn++);return cn}});var setSpecies$1=setSpecies$3;setSpecies$1("Array");var $$g=_export,toObject$7=toObject$m,toAbsoluteIndex$1=toAbsoluteIndex$7,toIntegerOrInfinity$2=toIntegerOrInfinity$9,lengthOfArrayLike$a=lengthOfArrayLike$t,doesNotExceedSafeInteger$3=doesNotExceedSafeInteger$7,arraySpeciesCreate$1=arraySpeciesCreate$6,createProperty=createProperty$6,deletePropertyOrThrow$1=deletePropertyOrThrow$4,arrayMethodHasSpeciesSupport=arrayMethodHasSpeciesSupport$5,HAS_SPECIES_SUPPORT=arrayMethodHasSpeciesSupport("splice"),max$1=Math.max,min$1=Math.min;$$g({target:"Array",proto:!0,forced:!HAS_SPECIES_SUPPORT},{splice:function sn(ln,cn){var dn=toObject$7(this),pn=lengthOfArrayLike$a(dn),vn=toAbsoluteIndex$1(ln,pn),kn=arguments.length,Sn,wn,Pn,Nn,Ln,Fn;for(kn===0?Sn=wn=0:kn===1?(Sn=0,wn=pn-vn):(Sn=kn-2,wn=min$1(max$1(toIntegerOrInfinity$2(cn),0),pn-vn)),doesNotExceedSafeInteger$3(pn+Sn-wn),Pn=arraySpeciesCreate$1(dn,wn),Nn=0;Nn<wn;Nn++)Ln=vn+Nn,Ln in dn&&createProperty(Pn,Nn,dn[Ln]);if(Pn.length=wn,Sn<wn){for(Nn=vn;Nn<pn-wn;Nn++)Ln=Nn+wn,Fn=Nn+Sn,Ln in dn?dn[Fn]=dn[Ln]:deletePropertyOrThrow$1(dn,Fn);for(Nn=pn;Nn>pn-wn+Sn;Nn--)deletePropertyOrThrow$1(dn,Nn-1)}else if(Sn>wn)for(Nn=pn-wn;Nn>vn;Nn--)Ln=Nn+wn-1,Fn=Nn+Sn-1,Ln in dn?dn[Fn]=dn[Ln]:deletePropertyOrThrow$1(dn,Fn);for(Nn=0;Nn<Sn;Nn++)dn[Nn+vn]=arguments[Nn+2];return dn.length=pn-wn+Sn,Pn}});var addToUnscopables$d=addToUnscopables$n;addToUnscopables$d("flat");var addToUnscopables$c=addToUnscopables$n;addToUnscopables$c("flatMap");var $$f=_export,toObject$6=toObject$m,lengthOfArrayLike$9=lengthOfArrayLike$t,deletePropertyOrThrow=deletePropertyOrThrow$4,doesNotExceedSafeInteger$2=doesNotExceedSafeInteger$7,INCORRECT_RESULT=[].unshift(0)!==1,SILENT_ON_NON_WRITABLE_LENGTH=!function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(sn){return sn instanceof TypeError}}();$$f({target:"Array",proto:!0,arity:1,forced:INCORRECT_RESULT||SILENT_ON_NON_WRITABLE_LENGTH},{unshift:function sn(ln){var cn=toObject$6(this),dn=lengthOfArrayLike$9(cn),pn=arguments.length;if(pn){doesNotExceedSafeInteger$2(dn+pn);for(var vn=dn;vn--;){var kn=vn+pn;vn in cn?cn[kn]=cn[vn]:deletePropertyOrThrow(cn,kn)}for(var Sn=0;Sn<pn;Sn++)cn[Sn]=arguments[Sn]}return cn.length=dn+pn}});var path=path$2,array$3=path.Array,parent$2=array$3,array$2=parent$2,internalMetadata={exports:{}},objectGetOwnPropertyNamesExternal={},classof$1=classofRaw$1,toIndexedObject$4=toIndexedObject$d,$getOwnPropertyNames=objectGetOwnPropertyNames.f,arraySlice=arraySliceSimple,windowNames=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],getWindowNames=function(sn){try{return $getOwnPropertyNames(sn)}catch{return arraySlice(windowNames)}};objectGetOwnPropertyNamesExternal.f=function sn(ln){return windowNames&&classof$1(ln)=="Window"?getWindowNames(ln):$getOwnPropertyNames(toIndexedObject$4(ln))};var fails$3=fails$p,arrayBufferNonExtensible=fails$3(function(){if(typeof ArrayBuffer=="function"){var sn=new ArrayBuffer(8);Object.isExtensible(sn)&&Object.defineProperty(sn,"a",{value:8})}}),fails$2=fails$p,isObject$3=isObject$f,classof=classofRaw$1,ARRAY_BUFFER_NON_EXTENSIBLE=arrayBufferNonExtensible,$isExtensible=Object.isExtensible,FAILS_ON_PRIMITIVES=fails$2(function(){$isExtensible(1)}),objectIsExtensible=FAILS_ON_PRIMITIVES||ARRAY_BUFFER_NON_EXTENSIBLE?function sn(ln){return!isObject$3(ln)||ARRAY_BUFFER_NON_EXTENSIBLE&&classof(ln)=="ArrayBuffer"?!1:$isExtensible?$isExtensible(ln):!0}:$isExtensible,fails$1=fails$p,freezing=!fails$1(function(){return Object.isExtensible(Object.preventExtensions({}))}),$$e=_export,uncurryThis$5=functionUncurryThis,hiddenKeys=hiddenKeys$5,isObject$2=isObject$f,hasOwn=hasOwnProperty_1,defineProperty$2=objectDefineProperty.f,getOwnPropertyNamesModule=objectGetOwnPropertyNames,getOwnPropertyNamesExternalModule=objectGetOwnPropertyNamesExternal,isExtensible=objectIsExtensible,uid=uid$3,FREEZING=freezing,REQUIRED=!1,METADATA=uid("meta"),id=0,setMetadata=function(sn){defineProperty$2(sn,METADATA,{value:{objectID:"O"+id++,weakData:{}}})},fastKey$1=function(sn,ln){if(!isObject$2(sn))return typeof sn=="symbol"?sn:(typeof sn=="string"?"S":"P")+sn;if(!hasOwn(sn,METADATA)){if(!isExtensible(sn))return"F";if(!ln)return"E";setMetadata(sn)}return sn[METADATA].objectID},getWeakData=function(sn,ln){if(!hasOwn(sn,METADATA)){if(!isExtensible(sn))return!0;if(!ln)return!1;setMetadata(sn)}return sn[METADATA].weakData},onFreeze=function(sn){return FREEZING&&REQUIRED&&isExtensible(sn)&&!hasOwn(sn,METADATA)&&setMetadata(sn),sn},enable=function(){meta.enable=function(){},REQUIRED=!0;var sn=getOwnPropertyNamesModule.f,ln=uncurryThis$5([].splice),cn={};cn[METADATA]=1,sn(cn).length&&(getOwnPropertyNamesModule.f=function(dn){for(var pn=sn(dn),vn=0,kn=pn.length;vn<kn;vn++)if(pn[vn]===METADATA){ln(pn,vn,1);break}return pn},$$e({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:getOwnPropertyNamesExternalModule.f}))},meta=internalMetadata.exports={enable,fastKey:fastKey$1,getWeakData,onFreeze};hiddenKeys[METADATA]=!0;var isCallable$2=isCallable$o,isObject$1=isObject$f,setPrototypeOf=objectSetPrototypeOf,inheritIfRequired$1=function(sn,ln,cn){var dn,pn;return setPrototypeOf&&isCallable$2(dn=ln.constructor)&&dn!==cn&&isObject$1(pn=dn.prototype)&&pn!==cn.prototype&&setPrototypeOf(sn,pn),sn},$$d=_export,global$3=global$n,uncurryThis$4=functionUncurryThis,isForced=isForced_1,defineBuiltIn$2=defineBuiltIn$a,InternalMetadataModule=internalMetadata.exports,iterate$1=iterate$7,anInstance$1=anInstance$3,isCallable$1=isCallable$o,isObject=isObject$f,fails=fails$p,checkCorrectnessOfIteration=checkCorrectnessOfIteration$3,setToStringTag=setToStringTag$4,inheritIfRequired=inheritIfRequired$1,collection$1=function(sn,ln,cn){var dn=sn.indexOf("Map")!==-1,pn=sn.indexOf("Weak")!==-1,vn=dn?"set":"add",kn=global$3[sn],Sn=kn&&kn.prototype,wn=kn,Pn={},Nn=function(Zn){var Yn=uncurryThis$4(Sn[Zn]);defineBuiltIn$2(Sn,Zn,Zn=="add"?function(rs){return Yn(this,rs===0?0:rs),this}:Zn=="delete"?function(Jn){return pn&&!isObject(Jn)?!1:Yn(this,Jn===0?0:Jn)}:Zn=="get"?function(rs){return pn&&!isObject(rs)?void 0:Yn(this,rs===0?0:rs)}:Zn=="has"?function(rs){return pn&&!isObject(rs)?!1:Yn(this,rs===0?0:rs)}:function(rs,ss){return Yn(this,rs===0?0:rs,ss),this})},Ln=isForced(sn,!isCallable$1(kn)||!(pn||Sn.forEach&&!fails(function(){new kn().entries().next()})));if(Ln)wn=cn.getConstructor(ln,sn,dn,vn),InternalMetadataModule.enable();else if(isForced(sn,!0)){var Fn=new wn,zn=Fn[vn](pn?{}:-0,1)!=Fn,Dn=fails(function(){Fn.has(1)}),Kn=checkCorrectnessOfIteration(function(Zn){new kn(Zn)}),qn=!pn&&fails(function(){for(var Zn=new kn,Yn=5;Yn--;)Zn[vn](Yn,Yn);return!Zn.has(-0)});Kn||(wn=ln(function(Zn,Yn){anInstance$1(Zn,Sn);var Jn=inheritIfRequired(new kn,Zn,wn);return Yn!=null&&iterate$1(Yn,Jn[vn],{that:Jn,AS_ENTRIES:dn}),Jn}),wn.prototype=Sn,Sn.constructor=wn),(Dn||qn)&&(Nn("delete"),Nn("has"),dn&&Nn("get")),(qn||zn)&&Nn(vn),pn&&Sn.clear&&delete Sn.clear}return Pn[sn]=wn,$$d({global:!0,constructor:!0,forced:wn!=kn},Pn),setToStringTag(wn,sn),pn||cn.setStrong(wn,sn,dn),wn},defineBuiltIn$1=defineBuiltIn$a,defineBuiltIns$2=function(sn,ln,cn){for(var dn in ln)defineBuiltIn$1(sn,dn,ln[dn],cn);return sn},defineProperty$1=objectDefineProperty.f,create$1=objectCreate$1,defineBuiltIns$1=defineBuiltIns$2,bind$3=functionBindContext,anInstance=anInstance$3,iterate=iterate$7,defineIterator=defineIterator$3,setSpecies=setSpecies$3,DESCRIPTORS$2=descriptors,fastKey=internalMetadata.exports.fastKey,InternalStateModule$1=internalState,setInternalState$1=InternalStateModule$1.set,internalStateGetterFor=InternalStateModule$1.getterFor,collectionStrong$1={getConstructor:function(sn,ln,cn,dn){var pn=sn(function(Pn,Nn){anInstance(Pn,vn),setInternalState$1(Pn,{type:ln,index:create$1(null),first:void 0,last:void 0,size:0}),DESCRIPTORS$2||(Pn.size=0),Nn!=null&&iterate(Nn,Pn[dn],{that:Pn,AS_ENTRIES:cn})}),vn=pn.prototype,kn=internalStateGetterFor(ln),Sn=function(Pn,Nn,Ln){var Fn=kn(Pn),zn=wn(Pn,Nn),Dn,Kn;return zn?zn.value=Ln:(Fn.last=zn={index:Kn=fastKey(Nn,!0),key:Nn,value:Ln,previous:Dn=Fn.last,next:void 0,removed:!1},Fn.first||(Fn.first=zn),Dn&&(Dn.next=zn),DESCRIPTORS$2?Fn.size++:Pn.size++,Kn!=="F"&&(Fn.index[Kn]=zn)),Pn},wn=function(Pn,Nn){var Ln=kn(Pn),Fn=fastKey(Nn),zn;if(Fn!=="F")return Ln.index[Fn];for(zn=Ln.first;zn;zn=zn.next)if(zn.key==Nn)return zn};return defineBuiltIns$1(vn,{clear:function(){for(var Nn=this,Ln=kn(Nn),Fn=Ln.index,zn=Ln.first;zn;)zn.removed=!0,zn.previous&&(zn.previous=zn.previous.next=void 0),delete Fn[zn.index],zn=zn.next;Ln.first=Ln.last=void 0,DESCRIPTORS$2?Ln.size=0:Nn.size=0},delete:function(Pn){var Nn=this,Ln=kn(Nn),Fn=wn(Nn,Pn);if(Fn){var zn=Fn.next,Dn=Fn.previous;delete Ln.index[Fn.index],Fn.removed=!0,Dn&&(Dn.next=zn),zn&&(zn.previous=Dn),Ln.first==Fn&&(Ln.first=zn),Ln.last==Fn&&(Ln.last=Dn),DESCRIPTORS$2?Ln.size--:Nn.size--}return!!Fn},forEach:function(Nn){for(var Ln=kn(this),Fn=bind$3(Nn,arguments.length>1?arguments[1]:void 0),zn;zn=zn?zn.next:Ln.first;)for(Fn(zn.value,zn.key,this);zn&&zn.removed;)zn=zn.previous},has:function(Nn){return!!wn(this,Nn)}}),defineBuiltIns$1(vn,cn?{get:function(Nn){var Ln=wn(this,Nn);return Ln&&Ln.value},set:function(Nn,Ln){return Sn(this,Nn===0?0:Nn,Ln)}}:{add:function(Nn){return Sn(this,Nn=Nn===0?0:Nn,Nn)}}),DESCRIPTORS$2&&defineProperty$1(vn,"size",{get:function(){return kn(this).size}}),pn},setStrong:function(sn,ln,cn){var dn=ln+" Iterator",pn=internalStateGetterFor(ln),vn=internalStateGetterFor(dn);defineIterator(sn,ln,function(kn,Sn){setInternalState$1(this,{type:dn,target:kn,state:pn(kn),kind:Sn,last:void 0})},function(){for(var kn=vn(this),Sn=kn.kind,wn=kn.last;wn&&wn.removed;)wn=wn.previous;return!kn.target||!(kn.last=wn=wn?wn.next:kn.state.first)?(kn.target=void 0,{value:void 0,done:!0}):Sn=="keys"?{value:wn.key,done:!1}:Sn=="values"?{value:wn.value,done:!1}:{value:[wn.key,wn.value],done:!1}},cn?"entries":"values",!cn,!0),setSpecies(ln)}},collection=collection$1,collectionStrong=collectionStrong$1;collection("Map",function(sn){return function(){return sn(this,arguments.length?arguments[0]:void 0)}},collectionStrong);var lengthOfArrayLike$8=lengthOfArrayLike$t,arrayFromConstructorAndList$2=function(sn,ln){for(var cn=0,dn=lengthOfArrayLike$8(ln),pn=new sn(dn);dn>cn;)pn[cn]=ln[cn++];return pn},bind$2=functionBindContext,uncurryThis$3=functionUncurryThis,IndexedObject$1=indexedObject,toObject$5=toObject$m,toPropertyKey=toPropertyKey$4,lengthOfArrayLike$7=lengthOfArrayLike$t,objectCreate=objectCreate$1,arrayFromConstructorAndList$1=arrayFromConstructorAndList$2,$Array$4=Array,push$2=uncurryThis$3([].push),arrayGroup=function(sn,ln,cn,dn){for(var pn=toObject$5(sn),vn=IndexedObject$1(pn),kn=bind$2(ln,cn),Sn=objectCreate(null),wn=lengthOfArrayLike$7(vn),Pn=0,Nn,Ln,Fn;wn>Pn;Pn++)Fn=vn[Pn],Ln=toPropertyKey(kn(Fn,Pn,pn)),Ln in Sn?push$2(Sn[Ln],Fn):Sn[Ln]=[Fn];if(dn&&(Nn=dn(pn),Nn!==$Array$4))for(Ln in Sn)Sn[Ln]=arrayFromConstructorAndList$1(Nn,Sn[Ln]);return Sn},$$c=_export,$group$1=arrayGroup,addToUnscopables$b=addToUnscopables$n;$$c({target:"Array",proto:!0},{group:function sn(ln){var cn=arguments.length>1?arguments[1]:void 0;return $group$1(this,ln,cn)}});addToUnscopables$b("group");var $$b=_export,$group=arrayGroup,arrayMethodIsStrict$1=arrayMethodIsStrict$b,addToUnscopables$a=addToUnscopables$n;$$b({target:"Array",proto:!0,forced:!arrayMethodIsStrict$1("groupBy")},{groupBy:function sn(ln){var cn=arguments.length>1?arguments[1]:void 0;return $group(this,ln,cn)}});addToUnscopables$a("groupBy");var getBuiltIn$5=getBuiltIn$g,bind$1=functionBindContext,uncurryThis$2=functionUncurryThis,IndexedObject=indexedObject,toObject$4=toObject$m,lengthOfArrayLike$6=lengthOfArrayLike$t,Map$2=getBuiltIn$5("Map"),MapPrototype$1=Map$2.prototype,mapGet=uncurryThis$2(MapPrototype$1.get),mapHas$1=uncurryThis$2(MapPrototype$1.has),mapSet$1=uncurryThis$2(MapPrototype$1.set),push$1=uncurryThis$2([].push),arrayGroupToMap=function sn(ln){for(var cn=toObject$4(this),dn=IndexedObject(cn),pn=bind$1(ln,arguments.length>1?arguments[1]:void 0),vn=new Map$2,kn=lengthOfArrayLike$6(dn),Sn=0,wn,Pn;kn>Sn;Sn++)Pn=dn[Sn],wn=pn(Pn,Sn,cn),mapHas$1(vn,wn)?push$1(mapGet(vn,wn),Pn):mapSet$1(vn,wn,[Pn]);return vn},$$a=_export,arrayMethodIsStrict=arrayMethodIsStrict$b,addToUnscopables$9=addToUnscopables$n,$groupToMap$1=arrayGroupToMap;$$a({target:"Array",proto:!0,name:"groupToMap",forced:!arrayMethodIsStrict("groupByToMap")},{groupByToMap:$groupToMap$1});addToUnscopables$9("groupByToMap");var $$9=_export,addToUnscopables$8=addToUnscopables$n,$groupToMap=arrayGroupToMap;$$9({target:"Array",proto:!0},{groupToMap:$groupToMap});addToUnscopables$8("groupToMap");var lengthOfArrayLike$5=lengthOfArrayLike$t,arrayToReversed$1=function(sn,ln){for(var cn=lengthOfArrayLike$5(sn),dn=new ln(cn),pn=0;pn<cn;pn++)dn[pn]=sn[cn-pn-1];return dn},$$8=_export,arrayToReversed=arrayToReversed$1,toIndexedObject$3=toIndexedObject$d,addToUnscopables$7=addToUnscopables$n,$Array$3=Array;$$8({target:"Array",proto:!0},{toReversed:function sn(){return arrayToReversed(toIndexedObject$3(this),$Array$3)}});addToUnscopables$7("toReversed");var global$2=global$n,entryVirtual=function(sn){return global$2[sn].prototype},$$7=_export,uncurryThis$1=functionUncurryThis,aCallable$3=aCallable$g,toIndexedObject$2=toIndexedObject$d,arrayFromConstructorAndList=arrayFromConstructorAndList$2,getVirtual$1=entryVirtual,addToUnscopables$6=addToUnscopables$n,$Array$2=Array,sort=uncurryThis$1(getVirtual$1("Array").sort);$$7({target:"Array",proto:!0},{toSorted:function sn(ln){ln!==void 0&&aCallable$3(ln);var cn=toIndexedObject$2(this),dn=arrayFromConstructorAndList($Array$2,cn);return sort(dn,ln)}});addToUnscopables$6("toSorted");var $$6=_export,addToUnscopables$5=addToUnscopables$n,doesNotExceedSafeInteger$1=doesNotExceedSafeInteger$7,lengthOfArrayLike$4=lengthOfArrayLike$t,toAbsoluteIndex=toAbsoluteIndex$7,toIndexedObject$1=toIndexedObject$d,toIntegerOrInfinity$1=toIntegerOrInfinity$9,$Array$1=Array,max=Math.max,min=Math.min;$$6({target:"Array",proto:!0},{toSpliced:function sn(ln,cn){var dn=toIndexedObject$1(this),pn=lengthOfArrayLike$4(dn),vn=toAbsoluteIndex(ln,pn),kn=arguments.length,Sn=0,wn,Pn,Nn,Ln;for(kn===0?wn=Pn=0:kn===1?(wn=0,Pn=pn-vn):(wn=kn-2,Pn=min(max(toIntegerOrInfinity$1(cn),0),pn-vn)),Nn=doesNotExceedSafeInteger$1(pn+wn-Pn),Ln=$Array$1(Nn);Sn<vn;Sn++)Ln[Sn]=dn[Sn];for(;Sn<vn+wn;Sn++)Ln[Sn]=arguments[Sn-vn+2];for(;Sn<Nn;Sn++)Ln[Sn]=dn[Sn+Pn-wn];return Ln}});addToUnscopables$5("toSpliced");var lengthOfArrayLike$3=lengthOfArrayLike$t,toIntegerOrInfinity=toIntegerOrInfinity$9,$RangeError=RangeError,arrayWith$1=function(sn,ln,cn,dn){var pn=lengthOfArrayLike$3(sn),vn=toIntegerOrInfinity(cn),kn=vn<0?pn+vn:vn;if(kn>=pn||kn<0)throw $RangeError("Incorrect index");for(var Sn=new ln(pn),wn=0;wn<pn;wn++)Sn[wn]=wn===kn?dn:sn[wn];return Sn},$$5=_export,arrayWith=arrayWith$1,toIndexedObject=toIndexedObject$d,$Array=Array;$$5({target:"Array",proto:!0},{with:function(sn,ln){return arrayWith(toIndexedObject(this),$Array,sn,ln)}});var parent$1=array$2,array$1=parent$1,global$1=global$n,shared=sharedStore,isCallable=isCallable$o,getPrototypeOf=objectGetPrototypeOf,defineBuiltIn=defineBuiltIn$a,wellKnownSymbol$2=wellKnownSymbol$m,USE_FUNCTION_CONSTRUCTOR="USE_FUNCTION_CONSTRUCTOR",ASYNC_ITERATOR$2=wellKnownSymbol$2("asyncIterator"),AsyncIterator=global$1.AsyncIterator,PassedAsyncIteratorPrototype=shared.AsyncIteratorPrototype,AsyncIteratorPrototype$1,prototype;if(PassedAsyncIteratorPrototype)AsyncIteratorPrototype$1=PassedAsyncIteratorPrototype;else if(isCallable(AsyncIterator))AsyncIteratorPrototype$1=AsyncIterator.prototype;else if(shared[USE_FUNCTION_CONSTRUCTOR]||global$1[USE_FUNCTION_CONSTRUCTOR])try{prototype=getPrototypeOf(getPrototypeOf(getPrototypeOf(Function("return async function*(){}()")()))),getPrototypeOf(prototype)===Object.prototype&&(AsyncIteratorPrototype$1=prototype)}catch{}AsyncIteratorPrototype$1||(AsyncIteratorPrototype$1={});isCallable(AsyncIteratorPrototype$1[ASYNC_ITERATOR$2])||defineBuiltIn(AsyncIteratorPrototype$1,ASYNC_ITERATOR$2,function(){return this});var asyncIteratorPrototype=AsyncIteratorPrototype$1,call$3=functionCall,anObject$3=anObject$f,create=objectCreate$1,getMethod$3=getMethod$7,defineBuiltIns=defineBuiltIns$2,InternalStateModule=internalState,getBuiltIn$4=getBuiltIn$g,AsyncIteratorPrototype=asyncIteratorPrototype,Promise$1=getBuiltIn$4("Promise"),ASYNC_FROM_SYNC_ITERATOR="AsyncFromSyncIterator",setInternalState=InternalStateModule.set,getInternalState=InternalStateModule.getterFor(ASYNC_FROM_SYNC_ITERATOR),asyncFromSyncIteratorContinuation=function(sn,ln,cn){var dn=sn.done;Promise$1.resolve(sn.value).then(function(pn){ln({done:dn,value:pn})},cn)},AsyncFromSyncIterator$2=function sn(ln){setInternalState(this,{type:ASYNC_FROM_SYNC_ITERATOR,iterator:anObject$3(ln),next:ln.next})};AsyncFromSyncIterator$2.prototype=defineBuiltIns(create(AsyncIteratorPrototype),{next:function sn(){var ln=getInternalState(this);return new Promise$1(function(cn,dn){var pn=anObject$3(call$3(ln.next,ln.iterator));asyncFromSyncIteratorContinuation(pn,cn,dn)})},return:function(){var sn=getInternalState(this).iterator;return new Promise$1(function(ln,cn){var dn=getMethod$3(sn,"return");if(dn===void 0)return ln({done:!0,value:void 0});var pn=anObject$3(call$3(dn,sn));asyncFromSyncIteratorContinuation(pn,ln,cn)})}});var asyncFromSyncIterator=AsyncFromSyncIterator$2,call$2=functionCall,AsyncFromSyncIterator$1=asyncFromSyncIterator,anObject$2=anObject$f,getIterator$1=getIterator$4,getMethod$2=getMethod$7,wellKnownSymbol$1=wellKnownSymbol$m,ASYNC_ITERATOR$1=wellKnownSymbol$1("asyncIterator"),getAsyncIterator$1=function(sn,ln){var cn=arguments.length<2?getMethod$2(sn,ASYNC_ITERATOR$1):ln;return cn?anObject$2(call$2(cn,sn)):new AsyncFromSyncIterator$1(getIterator$1(sn))},aCallable$2=aCallable$g,anObject$1=anObject$f,getIteratorDirect$1=function(sn){return{iterator:sn,next:aCallable$2(anObject$1(sn).next)}},call$1=functionCall,getBuiltIn$3=getBuiltIn$g,getMethod$1=getMethod$7,asyncIteratorClose=function(sn,ln,cn,dn){try{var pn=getMethod$1(sn,"return");if(pn)return getBuiltIn$3("Promise").resolve(call$1(pn,sn)).then(function(){ln(cn)},function(vn){dn(vn)})}catch(vn){return dn(vn)}ln(cn)},call=functionCall,aCallable$1=aCallable$g,anObject=anObject$f,doesNotExceedSafeInteger=doesNotExceedSafeInteger$7,getBuiltIn$2=getBuiltIn$g,getIteratorDirect=getIteratorDirect$1,closeAsyncIteration=asyncIteratorClose,createMethod=function(sn){var ln=sn==0,cn=sn==1,dn=sn==2,pn=sn==3;return function(vn,kn,Sn){var wn=getIteratorDirect(vn),Pn=getBuiltIn$2("Promise"),Nn=wn.iterator,Ln=wn.next,Fn=0,zn=kn!==void 0;return(zn||!ln)&&aCallable$1(kn),new Pn(function(Dn,Kn){var qn=function(Yn){closeAsyncIteration(Nn,Kn,Yn,Kn)},Zn=function(){try{if(ln&&zn)try{doesNotExceedSafeInteger(Fn)}catch(Yn){qn(Yn)}Pn.resolve(anObject(call(Ln,Nn))).then(function(Yn){try{if(anObject(Yn).done)ln?(Sn.length=Fn,Dn(Sn)):Dn(pn?!1:dn||void 0);else{var Jn=Yn.value;try{zn?Pn.resolve(ln?kn(Jn,Fn):kn(Jn)).then(function(rs){if(cn)Zn();else if(dn)rs?Zn():closeAsyncIteration(Nn,Dn,!1,Kn);else if(ln)try{Sn[Fn++]=rs,Zn()}catch(ss){qn(ss)}else rs?closeAsyncIteration(Nn,Dn,pn||Jn,Kn):Zn()},qn):(Sn[Fn++]=Jn,Zn())}catch(rs){qn(rs)}}}catch(rs){Kn(rs)}},Kn)}catch(Yn){Kn(Yn)}};Zn()})}},asyncIteratorIteration={toArray:createMethod(0),forEach:createMethod(1),every:createMethod(2),some:createMethod(3),find:createMethod(4)},bind=functionBindContext,toObject$3=toObject$m,isConstructor=isConstructor$6,getAsyncIterator=getAsyncIterator$1,getIterator=getIterator$4,getIteratorMethod=getIteratorMethod$4,getMethod=getMethod$7,getVirtual=entryVirtual,getBuiltIn$1=getBuiltIn$g,wellKnownSymbol=wellKnownSymbol$m,AsyncFromSyncIterator=asyncFromSyncIterator,toArray=asyncIteratorIteration.toArray,ASYNC_ITERATOR=wellKnownSymbol("asyncIterator"),arrayIterator=getVirtual("Array").values,arrayFromAsync=function sn(ln){var cn=this,dn=arguments.length,pn=dn>1?arguments[1]:void 0,vn=dn>2?arguments[2]:void 0;return new(getBuiltIn$1("Promise"))(function(kn){var Sn=toObject$3(ln);pn!==void 0&&(pn=bind(pn,vn));var wn=getMethod(Sn,ASYNC_ITERATOR),Pn=wn?void 0:getIteratorMethod(Sn)||arrayIterator,Nn=isConstructor(cn)?new cn:[],Ln=wn?getAsyncIterator(Sn,wn):new AsyncFromSyncIterator(getIterator(Sn,Pn));kn(toArray(Ln,pn,Nn))})},$$4=_export,fromAsync=arrayFromAsync;$$4({target:"Array",stat:!0,forced:!0},{fromAsync});var $$3=_export,$filterReject$1=arrayIteration.filterReject,addToUnscopables$4=addToUnscopables$n;$$3({target:"Array",proto:!0,forced:!0},{filterOut:function sn(ln){return $filterReject$1(this,ln,arguments.length>1?arguments[1]:void 0)}});addToUnscopables$4("filterOut");var $$2=_export,$filterReject=arrayIteration.filterReject,addToUnscopables$3=addToUnscopables$n;$$2({target:"Array",proto:!0,forced:!0},{filterReject:function sn(ln){return $filterReject(this,ln,arguments.length>1?arguments[1]:void 0)}});addToUnscopables$3("filterReject");var $$1=_export,isArray=isArray$7,isFrozen=Object.isFrozen,isFrozenStringArray=function(sn,ln){if(!isFrozen||!isArray(sn)||!isFrozen(sn))return!1;for(var cn=0,dn=sn.length,pn;cn<dn;)if(pn=sn[cn++],!(typeof pn=="string"||ln&&typeof pn>"u"))return!1;return dn!==0};$$1({target:"Array",stat:!0,sham:!0,forced:!0},{isTemplateObject:function sn(ln){if(!isFrozenStringArray(ln,!0))return!1;var cn=ln.raw;return cn.length===ln.length&&isFrozenStringArray(cn,!1)}});var makeBuiltIn=makeBuiltIn$3.exports,defineProperty=objectDefineProperty,defineBuiltInAccessor$2=function(sn,ln,cn){return cn.get&&makeBuiltIn(cn.get,ln,{getter:!0}),cn.set&&makeBuiltIn(cn.set,ln,{setter:!0}),defineProperty.f(sn,ln,cn)},DESCRIPTORS$1=descriptors,addToUnscopables$2=addToUnscopables$n,toObject$2=toObject$m,lengthOfArrayLike$2=lengthOfArrayLike$t,defineBuiltInAccessor$1=defineBuiltInAccessor$2;DESCRIPTORS$1&&(defineBuiltInAccessor$1(Array.prototype,"lastItem",{configurable:!0,get:function(){var ln=toObject$2(this),cn=lengthOfArrayLike$2(ln);return cn==0?void 0:ln[cn-1]},set:function(ln){var cn=toObject$2(this),dn=lengthOfArrayLike$2(cn);return cn[dn==0?0:dn-1]=ln}}),addToUnscopables$2("lastItem"));var DESCRIPTORS=descriptors,addToUnscopables$1=addToUnscopables$n,toObject$1=toObject$m,lengthOfArrayLike$1=lengthOfArrayLike$t,defineBuiltInAccessor=defineBuiltInAccessor$2;DESCRIPTORS&&(defineBuiltInAccessor(Array.prototype,"lastIndex",{configurable:!0,get:function(){var ln=toObject$1(this),cn=lengthOfArrayLike$1(ln);return cn==0?0:cn-1}}),addToUnscopables$1("lastIndex"));var getBuiltIn=getBuiltIn$g,uncurryThis=functionUncurryThis,aCallable=aCallable$g,lengthOfArrayLike=lengthOfArrayLike$t,toObject=toObject$m,arraySpeciesCreate=arraySpeciesCreate$6,Map$1=getBuiltIn("Map"),MapPrototype=Map$1.prototype,mapForEach=uncurryThis(MapPrototype.forEach),mapHas=uncurryThis(MapPrototype.has),mapSet=uncurryThis(MapPrototype.set),push=uncurryThis([].push),arrayUniqueBy=function sn(ln){var cn=toObject(this),dn=lengthOfArrayLike(cn),pn=arraySpeciesCreate(cn,0),vn=new Map$1,kn=ln!=null?aCallable(ln):function(Nn){return Nn},Sn,wn,Pn;for(Sn=0;Sn<dn;Sn++)wn=cn[Sn],Pn=kn(wn),mapHas(vn,Pn)||mapSet(vn,Pn,wn);return mapForEach(vn,function(Nn){push(pn,Nn)}),pn},$=_export,addToUnscopables=addToUnscopables$n,uniqueBy=arrayUniqueBy;$({target:"Array",proto:!0,forced:!0},{uniqueBy});addToUnscopables("uniqueBy");var parent=array$1,array=parent;(function(sn){sn.exports=array})(array$4);var Timer=function(){function sn(ln){var cn=ln.timeout,dn=ln.callback;this.timeout=Math.max(cn,0),this.callback=dn}return sn.prototype.start=function(){this.timeoutId=setTimeout(this.callback,this.timeout)},sn.prototype.refresh=function(){this.stop(),this.start()},sn.prototype.stop=function(){this.timeoutId&&clearTimeout(this.timeoutId)},sn}(),DefaultEventQueue=function(){function sn(ln,cn,dn){this.buffer=[],this.sink=ln,this.maxQueueSize=cn,this.timer=new Timer({callback:this.flush.bind(this),timeout:dn}),this.started=!1}return sn.prototype.start=function(){this.started=!0},sn.prototype.stop=function(){this.started=!1;var ln=this.sink(this.buffer,!0);return this.buffer=[],this.timer.stop(),ln},sn.prototype.enqueue=function(ln){this.started&&(this.buffer.length===0&&this.timer.refresh(),this.buffer.push(ln),this.buffer.length>=this.maxQueueSize&&this.flush())},sn.prototype.flush=function(){this.sink(this.buffer),this.buffer=[],this.timer.stop()},sn.prototype.close=function(){this.stop()},sn}(),DefaultEventProcessor=function(){function sn(ln,cn,dn,pn){pn===void 0&&(pn=null),this.eventDispatcher=ln,this.flushInterval=dn,this.queue=new DefaultEventQueue(this.drainQueue.bind(this),cn,dn),this.repository=pn}return sn.prototype.isClientError=function(ln){return!!(ln&&ln.statusCode>=400&&ln.statusCode<500)},sn.prototype.drainRepository=function(ln){var cn=this;return new Promise(function(dn){return __awaiter(cn,void 0,void 0,function(){var pn,vn=this,kn;return __generator(this,function(Sn){switch(Sn.label){case 0:return[4,(kn=this.repository)===null||kn===void 0?void 0:kn.read()];case 1:return pn=Sn.sent(),!pn||pn.length===0?(dn(),[2]):(ln?this.eventDispatcher.dispatchXhrOrBeacon(pn,function(){var wn;dn((wn=vn.repository)===null||wn===void 0?void 0:wn.delete(pn))},function(wn){var Pn;if(vn.isClientError(wn)){dn((Pn=vn.repository)===null||Pn===void 0?void 0:Pn.delete(pn));return}dn()}):this.eventDispatcher.dispatch(pn,function(){var wn;dn((wn=vn.repository)===null||wn===void 0?void 0:wn.delete(pn))},function(wn){var Pn;if(vn.isClientError(wn)){dn((Pn=vn.repository)===null||Pn===void 0?void 0:Pn.delete(pn));return}dn()}),[2])}})})})},sn.prototype.drainQueue=function(ln,cn){var dn=this,pn=ln.map(function(kn){return kn.toDto()}),vn=new Promise(function(kn){return __awaiter(dn,void 0,void 0,function(){var Sn=this,wn;return __generator(this,function(Pn){return ln.length===0?(kn(),[2]):(cn?((wn=this.repository)===null||wn===void 0||wn.add(pn),this.eventDispatcher.dispatchXhrOrBeacon(ln,function(){var Nn;kn((Nn=Sn.repository)===null||Nn===void 0?void 0:Nn.delete(pn))},function(Nn){var Ln;if(Sn.isClientError(Nn)){kn((Ln=Sn.repository)===null||Ln===void 0?void 0:Ln.delete(pn));return}kn()})):this.eventDispatcher.dispatch(ln,function(){kn()},function(Nn){var Ln;if(Sn.isClientError(Nn)){kn();return}kn((Ln=Sn.repository)===null||Ln===void 0?void 0:Ln.add(pn))}),[2])})})});return vn},sn.prototype.process=function(ln){this.queue.enqueue(ln)},sn.prototype.start=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(ln){return this.queue.start(),[2]})})},sn.prototype.stop=function(){try{this.queue.close()}catch{}return Promise.resolve()},sn.prototype.flush=function(){this.queue.flush()},sn.prototype.close=function(){this.stop()},sn}(),decorateEventWithSession=function(sn,ln){var cn;if(ln.currentSessionId===null)return sn;if(!sn.user.identifiers[IdentifierType.SESSION]){var dn=sn.copyWithUser(__assign$1(__assign$1({},sn.user),{identifiers:__assign$1(__assign$1({},sn.user.identifiers),(cn={},cn[IdentifierType.SESSION]=ln.sessionId,cn))}));return dn}return sn},SessionEventTracker=function(){function sn(ln,cn){this.hackleUserResolver=ln,this.core=cn}return sn.isSessionEvent=function(ln){return Event$1.isTrack(ln)?ln.event.key===sn.SESSION_START_EVENT_NAME||ln.event.key===sn.SESSION_END_EVENT_NAME:!1},sn.prototype.onSessionStarted=function(ln,cn,dn){this.track(sn.SESSION_START_EVENT_NAME,ln,cn,dn)},sn.prototype.onSessionEnded=function(ln,cn,dn){this.track(sn.SESSION_END_EVENT_NAME,ln,cn,dn)},sn.prototype.track=function(ln,cn,dn,pn){var vn={key:ln,properties:{sessionId:cn}},kn=this.hackleUserResolver.resolve(dn),Sn=this.decorateSession(kn,cn);this.core.track(vn,Sn,pn)},sn.prototype.decorateSession=function(ln,cn){var dn=new IdentifiersBuilder().add(IdentifierType.SESSION,cn).addIdentifiers(ln.identifiers).build();return __assign$1(__assign$1({},ln),{identifiers:dn})},sn.SESSION_START_EVENT_NAME="$session_start",sn.SESSION_END_EVENT_NAME="$session_end",sn}(),EventProcessorImpl=function(){function sn(ln,cn,dn,pn){this.delegate=ln,this.exposureEventDedupDeterminer=cn,this.sessionManager=dn,this.userManager=pn}return sn.prototype.process=function(ln){if(SessionEventTracker.isSessionEvent(ln)||this.sessionManager.startNewSessionIfNeeded(this.userManager.currentUser,ln.timestamp),!this.exposureEventDedupDeterminer.isDedupTarget(ln)){var cn=decorateEventWithSession(ln,this.sessionManager);this.delegate.process(cn)}},sn.prototype.close=function(){this.delegate.close()},sn.prototype.flush=function(){this.delegate.flush()},sn.prototype.start=function(){return this.delegate.start()},sn}(),ExposureEventDedupDeterminer=function(){function sn(ln){this.cache=new Map,this.exposureEventDedupIntervalMillis=ln}return sn.prototype.isDedupTarget=function(ln){var cn;if(this.exposureEventDedupIntervalMillis===-1||!Event$1.isExposure(ln))return!1;IdentifierUtil.isEquals(ln.user.identifiers,(cn=this.currentUser)===null||cn===void 0?void 0:cn.identifiers)||(this.currentUser=ln.user,this.cache=new Map);var dn=[ln.experiment.id,ln.variationId,ln.variationKey,ln.decisionReason].join("-"),pn=new Date().getTime(),vn=this.cache.get(dn);return vn!==void 0&&pn-vn<=this.exposureEventDedupIntervalMillis?!0:(this.cache.set(dn,pn),!1)},sn}(),TraceTransformer=function(){function sn(){}return sn.toEvent=function(ln){var cn;return{key:sn.EVENT_KEY,properties:{level:sn.LEVEL_ERROR,type:ln.name,message:(cn=ln.message)!==null&&cn!==void 0?cn:"",$stacktrace:sn._stacktrace(ln)}}},sn._stacktrace=function(ln){return ObjectUtil$1.isNullOrUndefined(ln.stack)?"":ln.stack.split(`
`).slice(0,sn.STACK_TRACK_LIMIT).join(`
`)},sn.EVENT_KEY="$trace",sn.LEVEL_ERROR="error",sn.STACK_TRACK_LIMIT=30,sn}(),ContextualEvaluator=function(){function sn(){}return sn.prototype.evaluate=function(ln,cn){if(!this.supports(ln))throw new Error("Unsupported EvaluatorRequest ".concat(ln.toString()));if(cn.contains(ln)){var dn=cn.stack.map(function(pn){return pn.toString()}).join(" - ");throw new Error("Circular evaluation has occurred [".concat(dn," - ").concat(ln.toString(),"]"))}cn.addRequest(ln);try{return this.evaluateInternal(ln,cn)}finally{cn.removeRequest(ln)}},sn}(),ExperimentEvaluator=function(sn){__extends$1(ln,sn);function ln(cn){var dn=sn.call(this)||this;return dn.evaluationFlowFactory=cn,dn}return ln.prototype.supports=function(cn){return cn.experiment!==void 0},ln.prototype.evaluateInternal=function(cn,dn){var pn=this.evaluationFlowFactory.getFlow(cn.experiment.type);return pn.evaluate(cn,dn)},ln}(ContextualEvaluator),RemoteConfigEvaluation=function(){function sn(ln,cn,dn,pn,vn,kn){this.reason=ln,this.targetEvaluations=cn,this.parameter=dn,this.valueId=pn,this.value=vn,this.properties=kn}return sn.of=function(ln,cn,dn,pn,vn,kn){return kn.returnValue=pn,new sn(vn,cn.targetEvaluations,ln.parameter,dn,pn,kn)},sn.ofDefault=function(ln,cn,dn,pn){return this.of(ln,cn,void 0,ln.defaultValue,dn,pn)},sn}(),RemoteConfigEvaluator=function(sn){__extends$1(ln,sn);function ln(cn){var dn=sn.call(this)||this;return dn.targetRuleDeterminer=cn,dn}return ln.prototype.supports=function(cn){return cn.parameter!==void 0},ln.prototype.evaluateInternal=function(cn,dn){var pn={};if(pn.requestValueType=cn.requiredType,pn.requestDefaultValue=cn.defaultValue,ObjectUtil$1.isNullOrUndefined(cn.user.identifiers[cn.parameter.identifierType]))return RemoteConfigEvaluation.ofDefault(cn,dn,DecisionReason.IDENTIFIER_NOT_FOUND,pn);var vn=this.targetRuleDeterminer.determineTargetRuleOrNull(cn,dn);return ObjectUtil$1.isNotNullOrUndefined(vn)?(pn.targetRuleKey=vn.key,pn.targetRuleName=vn.name,this.evaluation(cn,dn,vn.value,DecisionReason.TARGET_RULE_MATCH,pn)):this.evaluation(cn,dn,cn.parameter.defaultValue,DecisionReason.DEFAULT_RULE,pn)},ln.prototype.evaluation=function(cn,dn,pn,vn,kn){return cn.requiredType==="UNKNOWN"||cn.requiredType!=="NULL"&&typeof cn.defaultValue!=typeof pn.rawValue?RemoteConfigEvaluation.ofDefault(cn,dn,DecisionReason.TYPE_MISMATCH,kn):RemoteConfigEvaluation.of(cn,dn,pn.id,pn.rawValue,vn,kn)},ln}(ContextualEvaluator),ExperimentEvaluation=function(){function sn(ln,cn,dn,pn,vn,kn){this.reason=ln,this.targetEvaluations=cn,this.experiment=dn,this.variationId=pn,this.variationKey=vn,this.config=kn}return sn.prototype.with=function(ln){return new sn(ln,this.targetEvaluations,this.experiment,this.variationId,this.variationKey,this.config)},sn.of=function(ln,cn,dn,pn){var vn=this.config(ln.workspace,dn);return new sn(pn,cn.targetEvaluations,ln.experiment,dn.id,dn.key,vn)},sn.ofDefault=function(ln,cn,dn){var pn=ln.experiment._getVariationByKeyOrNull(ln.defaultVariationKey);return ObjectUtil$1.isNotNullOrUndefined(pn)?this.of(ln,cn,pn,dn):new sn(dn,cn.targetEvaluations,ln.experiment,void 0,ln.defaultVariationKey,void 0)},sn.config=function(ln,cn){if(!ObjectUtil$1.isNullOrUndefined(cn.parameterConfigurationId))return ObjectUtil$1.requiredNotNullOrUndefined(ln.getParameterConfigurationOrNull(cn.parameterConfigurationId),function(){return"ParameterConfiguration[".concat(cn.parameterConfigurationId,"]")})},sn}(),EvaluatorKey=function(){function sn(ln,cn){this.type=ln,this.id=cn}return sn.prototype.isEquals=function(ln){return this.type===ln.type&&this.id===ln.id},sn}(),EvaluatorContext=function(){function sn(){this._stack=[],this._targetEvaluations=[]}return sn.create=function(){return new sn},Object.defineProperty(sn.prototype,"stack",{get:function(){return Array.from(this._stack)},enumerable:!1,configurable:!0}),Object.defineProperty(sn.prototype,"targetEvaluations",{get:function(){return Array.from(this._targetEvaluations)},enumerable:!1,configurable:!0}),sn.prototype.contains=function(ln){return this._stack.some(function(cn){return cn.key.isEquals(ln.key)})},sn.prototype.addRequest=function(ln){this._stack.push(ln)},sn.prototype.removeRequest=function(ln){var cn=this._stack.indexOf(ln,0);cn>-1&&this._stack.splice(cn,1)},sn.prototype.get=function(ln){return this._targetEvaluations.find(function(cn){return cn instanceof ExperimentEvaluation&&cn.experiment.id===ln.id})},sn.prototype.addEvaluation=function(ln){this._targetEvaluations.push(ln)},sn}(),ExperimentRequest=function(){function sn(ln,cn,dn,pn){this.key=new EvaluatorKey("EXPERIMENT",dn.id),this.workspace=ln,this.user=cn,this.experiment=dn,this.defaultVariationKey=pn}return sn.of=function(ln,cn,dn,pn){return new sn(ln,cn,dn,pn)},sn.by=function(ln,cn){return new sn(ln.workspace,ln.user,cn,"A")},sn.prototype.toString=function(){return"EvaluatorRequest(type=".concat(this.experiment.type,", key=").concat(this.experiment.key,")")},sn}(),RemoteConfigRequest=function(){function sn(ln,cn,dn,pn,vn){this.key=new EvaluatorKey("REMOTE_CONFIG",dn.id),this.workspace=ln,this.user=cn,this.parameter=dn,this.requiredType=pn,this.defaultValue=vn}return sn.of=function(ln,cn,dn,pn,vn){return new sn(ln,cn,dn,pn,vn)},sn.prototype.toString=function(){return"EvaluatorRequest(type=".concat(this.key.type,", key=").concat(this.parameter.key,")")},sn}(),TypeUtil=function(){function sn(){}return sn.asString=function(ln){switch(typeof ln){case"string":return ln;case"number":return ln.toString();default:return}},sn.asNumber=function(ln){switch(typeof ln){case"number":return this.asActualNumber(ln);case"string":return this.asActualNumber(Number(ln));default:return}},sn.asActualNumber=function(ln){if(!isNaN(ln)&&isFinite(ln))return ln},sn}(),DelegatingManualOverrideStorage=function(){function sn(ln){this.storages=ln}return sn.prototype.getVariation=function(ln,cn){if(this.storages.length!==0)for(var dn=0,pn=this.storages;dn<pn.length;dn++){var vn=pn[dn],kn=vn.getVariation(ln,cn);if(kn!==void 0)return kn}},sn}(),HackleUserManualOverrideStorage=function(){function sn(ln){this.listStorage=ln}return sn.prototype.getVariation=function(ln,cn){var dn=this.get(ln);if(dn)return ln._getVariationByIdOrNull(dn)},sn.prototype.get=function(ln){var cn=this.listStorage.getItem(ln.id.toString());return TypeUtil.asNumber(cn)},sn.prototype.getAll=function(){var ln=new Map;return this.listStorage.entries().forEach(function(cn){var dn=cn[0],pn=cn[1],vn=TypeUtil.asNumber(dn),kn=TypeUtil.asNumber(pn);ObjectUtil$1.isNullOrUndefined(vn)||vn<0||ObjectUtil$1.isNullOrUndefined(kn)||vn<0||ln.set(vn,kn)}),ln},sn.prototype.set=function(ln,cn){this.listStorage.setItem(ln.id.toString(),cn.toString())},sn.prototype.remove=function(ln){this.listStorage.removeItem(ln.id.toString())},sn.prototype.clear=function(){this.listStorage.clear()},sn}(),DelegatingEvaluator=function(){function sn(){this.evaluators=new Array}return sn.prototype.add=function(ln){this.evaluators.push(ln)},sn.prototype.evaluate=function(ln,cn){var dn=this.evaluators.find(function(pn){return pn.supports(ln)});if(ObjectUtil$1.isNullOrUndefined(dn))throw new Error("Unsupported EvaluatorRequest [".concat(ln.toString(),"]"));return dn.evaluate(ln,cn)},sn}(),TargetMatcher=function(){function sn(ln){this.conditionMatcherFactory=ln}return sn.prototype.matches=function(ln,cn,dn){var pn=this;return dn.conditions.every(function(vn){return pn._matches(ln,cn,vn)})},sn.prototype._matches=function(ln,cn,dn){var pn=this.conditionMatcherFactory.getMatcher(dn.key.type);return pn.matches(ln,cn,dn)},sn}(),ValueOperatorMatcher=function(){function sn(ln,cn){this.valueMatcherFactory=ln,this.operatorMatcherFactory=cn}return sn.prototype.matches=function(ln,cn){var dn=this.valueMatcherFactory.getMatcher(cn.valueType),pn=this.operatorMatcherFactory.getMatcher(cn.operator),vn=this.userValueMatches(ln,cn,dn,pn);return this.typeMatches(cn.type,vn)},sn.prototype.userValueMatches=function(ln,cn,dn,pn){return Array.isArray(ln)?this.arrayMatches(ln,cn,dn,pn):this.singleMatches(ln,cn,dn,pn)},sn.prototype.singleMatches=function(ln,cn,dn,pn){return cn.values.some(function(vn){return dn.matches(pn,ln,vn)})},sn.prototype.arrayMatches=function(ln,cn,dn,pn){var vn=this;return ln.some(function(kn){return vn.singleMatches(kn,cn,dn,pn)})},sn.prototype.typeMatches=function(ln,cn){switch(ln){case"MATCH":return cn;case"NOT_MATCH":return!cn}},sn}(),InMatcher=function(){function sn(){}return sn.prototype.booleanMatches=function(ln,cn){return ln===cn},sn.prototype.numberMatches=function(ln,cn){return ln===cn},sn.prototype.stringMatches=function(ln,cn){return ln===cn},sn.prototype.versionMatches=function(ln,cn){return ln.isEqualTo(cn)},sn}(),ContainsMatcher=function(){function sn(){}return sn.prototype.booleanMatches=function(ln,cn){return!1},sn.prototype.numberMatches=function(ln,cn){return!1},sn.prototype.stringMatches=function(ln,cn){return ln.includes(cn)},sn.prototype.versionMatches=function(ln,cn){return!1},sn}(),StartsWithMatcher=function(){function sn(){}return sn.prototype.booleanMatches=function(ln,cn){return!1},sn.prototype.numberMatches=function(ln,cn){return!1},sn.prototype.stringMatches=function(ln,cn){return ln.startsWith(cn)},sn.prototype.versionMatches=function(ln,cn){return!1},sn}(),EndsWithMatcher=function(){function sn(){}return sn.prototype.booleanMatches=function(ln,cn){return!1},sn.prototype.numberMatches=function(ln,cn){return!1},sn.prototype.stringMatches=function(ln,cn){return ln.endsWith(cn)},sn.prototype.versionMatches=function(ln,cn){return!1},sn}(),GreaterThanMatcher=function(){function sn(){}return sn.prototype.booleanMatches=function(ln,cn){return!1},sn.prototype.numberMatches=function(ln,cn){return ln>cn},sn.prototype.stringMatches=function(ln,cn){return ln>cn},sn.prototype.versionMatches=function(ln,cn){return ln.isGreaterThan(cn)},sn}(),GreaterThanOrEqualToMatcher=function(){function sn(){}return sn.prototype.booleanMatches=function(ln,cn){return!1},sn.prototype.numberMatches=function(ln,cn){return ln>=cn},sn.prototype.stringMatches=function(ln,cn){return ln>=cn},sn.prototype.versionMatches=function(ln,cn){return ln.isGreaterThanOrEqualTo(cn)},sn}(),LessThanMatcher=function(){function sn(){}return sn.prototype.booleanMatches=function(ln,cn){return!1},sn.prototype.numberMatches=function(ln,cn){return ln<cn},sn.prototype.stringMatches=function(ln,cn){return ln<cn},sn.prototype.versionMatches=function(ln,cn){return ln.isLessThan(cn)},sn}(),LessThanOrEqualToMatcher=function(){function sn(){}return sn.prototype.booleanMatches=function(ln,cn){return!1},sn.prototype.numberMatches=function(ln,cn){return ln<=cn},sn.prototype.stringMatches=function(ln,cn){return ln<=cn},sn.prototype.versionMatches=function(ln,cn){return ln.isLessThanOrEqualTo(cn)},sn}(),OperatorMatcherFactory=function(){function sn(){}return sn.prototype.getMatcher=function(ln){switch(ln){case"IN":return sn.IN_MATCHER;case"CONTAINS":return sn.CONTAINS_MATCHER;case"STARTS_WITH":return sn.STARTS_WITH_MATCHER;case"ENDS_WITH":return sn.ENDS_WITH_MATCHER;case"GT":return sn.GT_MATCHER;case"GTE":return sn.GTE_MATCHER;case"LT":return sn.LT_MATCHER;case"LTE":return sn.LTE_MATCHER}},sn.IN_MATCHER=new InMatcher,sn.CONTAINS_MATCHER=new ContainsMatcher,sn.STARTS_WITH_MATCHER=new StartsWithMatcher,sn.ENDS_WITH_MATCHER=new EndsWithMatcher,sn.GT_MATCHER=new GreaterThanMatcher,sn.GTE_MATCHER=new GreaterThanOrEqualToMatcher,sn.LT_MATCHER=new LessThanMatcher,sn.LTE_MATCHER=new LessThanOrEqualToMatcher,sn}(),StringMatcher=function(){function sn(){}return sn.prototype.matches=function(ln,cn,dn){var pn=TypeUtil.asString(cn),vn=TypeUtil.asString(dn);return ObjectUtil$1.isNullOrUndefined(pn)||ObjectUtil$1.isNullOrUndefined(vn)?!1:ln.stringMatches(pn,vn)},sn}(),NumberMatcher=function(){function sn(){}return sn.prototype.matches=function(ln,cn,dn){var pn=TypeUtil.asNumber(cn),vn=TypeUtil.asNumber(dn);return ObjectUtil$1.isNullOrUndefined(pn)||ObjectUtil$1.isNullOrUndefined(vn)?!1:ln.numberMatches(pn,vn)},sn}(),BooleanMatcher=function(){function sn(){}return sn.prototype.matches=function(ln,cn,dn){return typeof cn=="boolean"&&typeof dn=="boolean"?ln.booleanMatches(cn,dn):!1},sn}(),VersionMatcher=function(){function sn(){}return sn.prototype.matches=function(ln,cn,dn){var pn=Version.tryParse(cn),vn=Version.tryParse(dn);return pn&&vn?ln.versionMatches(pn,vn):!1},sn}(),NullMatcher=function(){function sn(){}return sn.prototype.matches=function(ln,cn,dn){return!1},sn}(),ValueMatcherFactory=function(){function sn(){}return sn.prototype.getMatcher=function(ln){switch(ln){case"STRING":return sn.STRING_MATCHER;case"JSON":return sn.STRING_MATCHER;case"NUMBER":return sn.NUMBER_MATCHER;case"BOOLEAN":return sn.BOOLEAN_MATCHER;case"VERSION":return sn.VERSION_MATCHER;case"NULL":return sn.NULL_MATCHER;case"UNKNOWN":return sn.NULL_MATCHER}},sn.STRING_MATCHER=new StringMatcher,sn.NUMBER_MATCHER=new NumberMatcher,sn.BOOLEAN_MATCHER=new BooleanMatcher,sn.VERSION_MATCHER=new VersionMatcher,sn.NULL_MATCHER=new NullMatcher,sn}(),UserConditionMatcher=function(){function sn(ln,cn){this.userValueResolver=ln,this.valueOperatorMatcher=cn}return sn.prototype.matches=function(ln,cn,dn){var pn=this.userValueResolver.resolveOrNull(ln.user,dn.key);return ObjectUtil$1.isNullOrUndefined(pn)?!1:this.valueOperatorMatcher.matches(pn,dn.match)},sn}(),UserValueResolver=function(){function sn(){}return sn.prototype.resolveOrNull=function(ln,cn){switch(cn.type){case"USER_ID":return ln.identifiers[cn.name];case"USER_PROPERTY":return ln.properties[cn.name];case"HACKLE_PROPERTY":return ln.hackleProperties[cn.name];case"SEGMENT":case"AB_TEST":case"FEATURE_FLAG":throw new Error("Unsupported TargetKeyType [".concat(cn.type,"]"))}},sn}(),SegmentConditionMatcher=function(){function sn(ln){this.segmentMatcher=ln}return sn.prototype.matches=function(ln,cn,dn){var pn=this;if(dn.key.type!="SEGMENT")throw new Error("Unsupported TargetKeyType [".concat(dn.key.type,"]"));var vn=dn.match.values.some(function(kn){return pn._matches(ln,cn,kn)});switch(dn.match.type){case"MATCH":return vn;case"NOT_MATCH":return!vn}},sn.prototype._matches=function(ln,cn,dn){if(typeof dn!="string")throw new Error("SegmentKey[".concat(dn,"]"));var pn=ln.workspace.getSegmentOrNull(dn);if(!pn)throw new Error("Segment[".concat(dn,"]"));return this.segmentMatcher.matches(ln,cn,pn)},sn}(),SegmentMatcher=function(){function sn(ln){this.userConditionMatcher=ln}return sn.prototype.matches=function(ln,cn,dn){var pn=this;return dn.targets.some(function(vn){return pn._matches(ln,cn,vn)})},sn.prototype._matches=function(ln,cn,dn){var pn=this;return dn.conditions.every(function(vn){return pn.userConditionMatcher.matches(ln,cn,vn)})},sn}(),ExperimentConditionMatcher=function(){function sn(ln,cn){this.abTestMatcher=ln,this.featureFlagMatcher=cn}return sn.prototype.matches=function(ln,cn,dn){switch(dn.key.type){case"AB_TEST":return this.abTestMatcher.matches(ln,cn,dn);case"FEATURE_FLAG":return this.featureFlagMatcher.matches(ln,cn,dn);case"USER_ID":case"USER_PROPERTY":case"HACKLE_PROPERTY":case"SEGMENT":throw new Error("Unsupported TargetKeyType [".concat(dn.key.type,"]"))}},sn}(),ExperimentMatcher=function(){function sn(ln,cn){this.evaluator=ln,this.valueOperatorMatcher=cn}return sn.prototype.matches=function(ln,cn,dn){var pn,vn=ObjectUtil$1.requiredNotNullOrUndefined(TypeUtil.asNumber(dn.key.name),function(){return"Invalid key [".concat(dn.key.type,", ").concat(dn.key.name,"]")}),kn=this.experiment(ln,vn);if(ObjectUtil$1.isNullOrUndefined(kn))return!1;var Sn=(pn=cn.get(kn))!==null&&pn!==void 0?pn:this.evaluate(ln,cn,kn);return this.evaluationMatches(Sn,dn)},sn.prototype.evaluate=function(ln,cn,dn){var pn=ExperimentRequest.by(ln,dn),vn=this.evaluator.evaluate(pn,cn),kn=this.resolve(ln,vn);return cn.addEvaluation(kn),kn},sn}(),AbTestConditionMatcher=function(sn){__extends$1(ln,sn);function ln(cn,dn){return sn.call(this,cn,dn)||this}return ln.prototype.experiment=function(cn,dn){return cn.workspace.getExperimentOrNull(dn)},ln.prototype.resolve=function(cn,dn){return cn instanceof ExperimentRequest&&dn.reason===DecisionReason.TRAFFIC_ALLOCATED?dn.with(DecisionReason.TRAFFIC_ALLOCATED_BY_TARGETING):dn},ln.prototype.evaluationMatches=function(cn,dn){return ln.AB_TEST_MATCHED_REASONS.includes(cn.reason)?this.valueOperatorMatcher.matches(cn.variationKey,dn.match):!1},ln.AB_TEST_MATCHED_REASONS=[DecisionReason.OVERRIDDEN,DecisionReason.TRAFFIC_ALLOCATED,DecisionReason.EXPERIMENT_COMPLETED,DecisionReason.TRAFFIC_ALLOCATED_BY_TARGETING],ln}(ExperimentMatcher),FeatureFlagConditionMatcher=function(sn){__extends$1(ln,sn);function ln(cn,dn){return sn.call(this,cn,dn)||this}return ln.prototype.experiment=function(cn,dn){return cn.workspace.getFeatureFlagOrNull(dn)},ln.prototype.resolve=function(cn,dn){return dn},ln.prototype.evaluationMatches=function(cn,dn){var pn=cn.variationKey!=="A";return this.valueOperatorMatcher.matches(pn,dn.match)},ln}(ExperimentMatcher),ConditionMatcherFactory=function(){function sn(ln){var cn=new ValueOperatorMatcher(new ValueMatcherFactory,new OperatorMatcherFactory),dn=new UserConditionMatcher(new UserValueResolver,cn);this.userConditionMatcher=dn,this.segmentConditionMatcher=new SegmentConditionMatcher(new SegmentMatcher(dn)),this.experimentConditionMatcher=new ExperimentConditionMatcher(new AbTestConditionMatcher(ln,cn),new FeatureFlagConditionMatcher(ln,cn))}return sn.prototype.getMatcher=function(ln){switch(ln){case"USER_ID":case"USER_PROPERTY":case"HACKLE_PROPERTY":return this.userConditionMatcher;case"SEGMENT":return this.segmentConditionMatcher;case"AB_TEST":case"FEATURE_FLAG":return this.experimentConditionMatcher}},sn}(),ActionResolver=function(){function sn(ln){this.bucketer=ln}return sn.prototype.resolveOrNull=function(ln,cn,dn){switch(dn.type){case"VARIATION":return this.resolveVariation(ln,dn);case"BUCKET":return this.resolveBucket(ln,dn)}},sn.prototype.resolveVariation=function(ln,cn){return ln.experiment._getVariationByIdOrNull(cn.variationId)},sn.prototype.resolveBucket=function(ln,cn){var dn=ln.workspace.getBucketOrNull(cn.bucketId),pn=ln.user.identifiers[ln.experiment.identifierType];if(pn){var vn=this.bucketer.bucketing(dn,pn);if(vn)return ln.experiment._getVariationByIdOrNull(vn.variationId)}},sn}(),Murmur3={murmurhash3_x86_32:function(sn,ln,cn,dn){dn===void 0&&(dn=sn.length);for(var pn=3432918353,vn=461845907,kn=dn&-4,Sn=ln,wn,Pn=0;Pn<kn;Pn+=4)wn=sn.charCodeAt(Pn)&255|(sn.charCodeAt(Pn+1)&255)<<8|(sn.charCodeAt(Pn+2)&255)<<16|(sn.charCodeAt(Pn+3)&255)<<24,wn=this.mul32(wn,pn),wn=(wn&131071)<<15|wn>>>17,wn=this.mul32(wn,vn),Sn^=wn,Sn=(Sn&524287)<<13|Sn>>>19,Sn=Sn*5+3864292196|0;switch(wn=0,dn%4){case 3:wn=(sn.charCodeAt(kn+2)&255)<<16;case 2:wn|=(sn.charCodeAt(kn+1)&255)<<8;case 1:wn|=sn.charCodeAt(kn)&255,wn=this.mul32(wn,pn),wn=(wn&131071)<<15|wn>>>17,wn=this.mul32(wn,vn),Sn^=wn}return Sn^=dn,Sn^=Sn>>>16,Sn=this.mul32(Sn,2246822507),Sn^=Sn>>>13,Sn=this.mul32(Sn,3266489909),Sn^=Sn>>>16,Sn},mul32:function(sn,ln){var cn=ln&65535,dn=ln-cn;return(dn*sn|0)+(cn*sn|0)|0}},Bucketer=function(){function sn(){}return sn.prototype.bucketing=function(ln,cn){var dn=this.calculateSlotNumber(ln.seed,ln.slotSize,cn);return ln.slots.find(function(pn){return pn.contains(dn)})},sn.prototype.calculateSlotNumber=function(ln,cn,dn){var pn=Murmur3.murmurhash3_x86_32(dn,ln);return Math.abs(pn)%Math.abs(cn)},sn}(),EvaluationFlow=function(){function sn(ln,cn){ln===void 0&&(ln=void 0),cn===void 0&&(cn=void 0),this.flowEvaluator=ln,this.nextFlow=cn}return sn.prototype.evaluate=function(ln,cn){return this.flowEvaluator&&this.nextFlow?this.flowEvaluator.evaluate(ln,cn,this.nextFlow):ExperimentEvaluation.ofDefault(ln,cn,DecisionReason.TRAFFIC_NOT_ALLOCATED)},sn.of=function(){for(var ln=[],cn=0;cn<arguments.length;cn++)ln[cn]=arguments[cn];for(var dn=new sn,pn=0,vn=ln.reverse();pn<vn.length;pn++){var kn=vn[pn];dn=new sn(kn,dn)}return dn},sn}(),OverrideEvaluator=function(){function sn(ln){this.overrideResolver=ln}return sn.prototype.evaluate=function(ln,cn,dn){var pn=this.overrideResolver.resolveOrNull(ln,cn);if(pn)switch(ln.experiment.type){case"AB_TEST":return ExperimentEvaluation.of(ln,cn,pn,DecisionReason.OVERRIDDEN);case"FEATURE_FLAG":return ExperimentEvaluation.of(ln,cn,pn,DecisionReason.INDIVIDUAL_TARGET_MATCH)}else return dn.evaluate(ln,cn)},sn}(),DraftEvaluator=function(){function sn(){}return sn.prototype.evaluate=function(ln,cn,dn){return ln.experiment.status==="DRAFT"?ExperimentEvaluation.ofDefault(ln,cn,DecisionReason.EXPERIMENT_DRAFT):dn.evaluate(ln,cn)},sn}(),PausedEvaluator=function(){function sn(){}return sn.prototype.evaluate=function(ln,cn,dn){if(ln.experiment.status==="PAUSED")switch(ln.experiment.type){case"AB_TEST":return ExperimentEvaluation.ofDefault(ln,cn,DecisionReason.EXPERIMENT_PAUSED);case"FEATURE_FLAG":return ExperimentEvaluation.ofDefault(ln,cn,DecisionReason.FEATURE_FLAG_INACTIVE)}else return dn.evaluate(ln,cn)},sn}(),CompletedEvaluator=function(){function sn(){}return sn.prototype.evaluate=function(ln,cn,dn){if(ln.experiment.status==="COMPLETED"){var pn=ln.experiment._winnerVariationOrNull();if(!pn)throw new Error("winner variation [".concat(ln.experiment.id,"]"));return ExperimentEvaluation.of(ln,cn,pn,DecisionReason.EXPERIMENT_COMPLETED)}else return dn.evaluate(ln,cn)},sn}(),ExperimentTargetEvaluator=function(){function sn(ln){this.experimentTargetDeterminer=ln}return sn.prototype.evaluate=function(ln,cn,dn){if(ln.experiment.type!=="AB_TEST")throw new Error("experiment type must be AB_TEST [".concat(ln.experiment.id,"]"));var pn=this.experimentTargetDeterminer.isUserInExperimentTarget(ln,cn);return pn?dn.evaluate(ln,cn):ExperimentEvaluation.ofDefault(ln,cn,DecisionReason.NOT_IN_EXPERIMENT_TARGET)},sn}(),TrafficAllocateEvaluator=function(){function sn(ln){this.actionResolver=ln}return sn.prototype.evaluate=function(ln,cn,dn){if(ln.experiment.status!=="RUNNING")throw new Error("experiment status must be RUNNING [".concat(ln.experiment.id,"]"));if(ln.experiment.type!=="AB_TEST")throw new Error("experiment type must be AB_TEST [".concat(ln.experiment.id,"]"));var pn=this.actionResolver.resolveOrNull(ln,cn,ln.experiment.defaultRule);return pn?pn.isDropped?ExperimentEvaluation.ofDefault(ln,cn,DecisionReason.VARIATION_DROPPED):ExperimentEvaluation.of(ln,cn,pn,DecisionReason.TRAFFIC_ALLOCATED):ExperimentEvaluation.ofDefault(ln,cn,DecisionReason.TRAFFIC_NOT_ALLOCATED)},sn}(),TargetRuleEvaluator=function(){function sn(ln,cn){this.targetRuleDeterminer=ln,this.actionResolver=cn}return sn.prototype.evaluate=function(ln,cn,dn){if(ln.experiment.status!=="RUNNING")throw new Error("experiment status must be RUNNING [".concat(ln.experiment.id,"]"));if(ln.experiment.type!=="FEATURE_FLAG")throw new Error("experiment type must be FEATURE_FLAG [".concat(ln.experiment.id,"]"));if(!ln.user.identifiers[ln.experiment.identifierType])return dn.evaluate(ln,cn);var pn=this.targetRuleDeterminer.determineTargetRuleOrNull(ln,cn);if(!pn)return dn.evaluate(ln,cn);var vn=this.actionResolver.resolveOrNull(ln,cn,pn.action);if(!vn)throw new Error("FeatureFlag must decide the Variation [".concat(ln.experiment.id,"]"));return ExperimentEvaluation.of(ln,cn,vn,DecisionReason.TARGET_RULE_MATCH)},sn}(),DefaultRuleEvaluator=function(){function sn(ln){this.actionResolver=ln}return sn.prototype.evaluate=function(ln,cn,dn){if(ln.experiment.status!=="RUNNING")throw new Error("experiment status must be RUNNING [".concat(ln.experiment.id,"]"));if(ln.experiment.type!=="FEATURE_FLAG")throw new Error("experiment type must be FEATURE_FLAG [".concat(ln.experiment.id,"]"));if(!ln.user.identifiers[ln.experiment.identifierType])return ExperimentEvaluation.ofDefault(ln,cn,DecisionReason.DEFAULT_RULE);var pn=this.actionResolver.resolveOrNull(ln,cn,ln.experiment.defaultRule);if(!pn)throw new Error("FeatureFlag must decide the Variation [".concat(ln.experiment.id,"]"));return ExperimentEvaluation.of(ln,cn,pn,DecisionReason.DEFAULT_RULE)},sn}(),ContainerEvaluator=function(){function sn(ln){this.containerResolver=ln}return sn.prototype.evaluate=function(ln,cn,dn){var pn=ln.experiment.containerId;if(!pn)return dn.evaluate(ln,cn);var vn=ln.workspace.getContainerOrNull(pn);if(!vn)throw new Error("container[".concat(pn,"]"));var kn=this.containerResolver.isUserInContainerGroup(ln,cn,vn);return kn?dn.evaluate(ln,cn):ExperimentEvaluation.ofDefault(ln,cn,DecisionReason.NOT_IN_MUTUAL_EXCLUSION_EXPERIMENT)},sn}(),IdentifierEvaluator=function(){function sn(){}return sn.prototype.evaluate=function(ln,cn,dn){return ln.user.identifiers[ln.experiment.identifierType]?dn.evaluate(ln,cn):ExperimentEvaluation.ofDefault(ln,cn,DecisionReason.IDENTIFIER_NOT_FOUND)},sn}(),ExperimentTargetDeterminer=function(){function sn(ln){this.targetMatcher=ln}return sn.prototype.isUserInExperimentTarget=function(ln,cn){var dn=this;return ln.experiment.targetAudiences.length===0?!0:ln.experiment.targetAudiences.some(function(pn){return dn.targetMatcher.matches(ln,cn,pn)})},sn}(),TargetRuleDeterminer=function(){function sn(ln){this.targetMatcher=ln}return sn.prototype.determineTargetRuleOrNull=function(ln,cn){var dn=this;return ln.experiment.targetRules.find(function(pn){return dn.targetMatcher.matches(ln,cn,pn.target)})},sn}(),OverrideResolver=function(){function sn(ln,cn,dn){this.manualOverrideStorage=ln,this.targetMatcher=cn,this.actionResolver=dn}return sn.prototype.resolveOrNull=function(ln,cn){var dn,pn;return(pn=(dn=this.resolveManualOverride(ln))!==null&&dn!==void 0?dn:this._resolveUserOverride(ln))!==null&&pn!==void 0?pn:this._resolveSegmentOverride(ln,cn)},sn.prototype.resolveManualOverride=function(ln){return this.manualOverrideStorage.getVariation(ln.experiment,ln.user)},sn.prototype._resolveUserOverride=function(ln){var cn=ln.experiment,dn=ln.user.identifiers[cn.identifierType];if(dn){var pn=cn.userOverrides.get(dn);if(pn)return cn._getVariationByIdOrNull(pn)}},sn.prototype._resolveSegmentOverride=function(ln,cn){var dn=this,pn=ln.experiment.segmentOverrides.find(function(vn){return dn.targetMatcher.matches(ln,cn,vn.target)});if(pn)return this.actionResolver.resolveOrNull(ln,cn,pn.action)},sn}(),ContainerResolver=function(){function sn(ln){this.bucketer=ln}return sn.prototype.isUserInContainerGroup=function(ln,cn,dn){var pn=ln.user.identifiers[ln.experiment.identifierType];if(ObjectUtil$1.isNullOrUndefined(pn))return!1;var vn=ln.workspace.getBucketOrNull(dn.bucketId);if(ObjectUtil$1.isNullOrUndefined(vn))throw new Error("Bucket[".concat(dn.bucketId,"]"));var kn=this.bucketer.bucketing(vn,pn);if(ObjectUtil$1.isNullOrUndefined(kn))return!1;var Sn=dn.getGroupOrNull(kn.variationId);if(ObjectUtil$1.isNullOrUndefined(Sn))throw new Error("ContainerGroup[".concat(kn.variationId,"]"));return Sn.experiments.includes(ln.experiment.id)},sn}(),RemoteConfigParameterTargetRuleDeterminer=function(){function sn(ln,cn){this.targetMatcher=ln,this.bucketer=cn}return sn.prototype.determineTargetRuleOrNull=function(ln,cn){var dn=this;return ln.parameter.targetRules.find(function(pn){return dn.matches(ln,cn,pn)})},sn.prototype.matches=function(ln,cn,dn){if(!this.targetMatcher.matches(ln,cn,dn.target))return!1;var pn=ln.user.identifiers[ln.parameter.identifierType];if(ObjectUtil$1.isNullOrUndefined(pn))return!1;var vn=ln.workspace.getBucketOrNull(dn.bucketId);if(ObjectUtil$1.isNullOrUndefined(vn))throw new Error("bucket[".concat(dn.bucketId,"]"));return ObjectUtil$1.isNotNullOrUndefined(this.bucketer.bucketing(vn,pn))},sn}(),EvaluationFlowFactory=function(){function sn(ln,cn){var dn=new Bucketer,pn=new TargetMatcher(new ConditionMatcherFactory(ln)),vn=new ActionResolver(dn),kn=new OverrideResolver(cn,pn,vn),Sn=new ContainerResolver(dn);this.abTestFlow=EvaluationFlow.of(new OverrideEvaluator(kn),new IdentifierEvaluator,new ContainerEvaluator(Sn),new ExperimentTargetEvaluator(new ExperimentTargetDeterminer(pn)),new DraftEvaluator,new PausedEvaluator,new CompletedEvaluator,new TrafficAllocateEvaluator(vn)),this.featureFlagFlow=EvaluationFlow.of(new DraftEvaluator,new PausedEvaluator,new CompletedEvaluator,new OverrideEvaluator(kn),new IdentifierEvaluator,new TargetRuleEvaluator(new TargetRuleDeterminer(pn),vn),new DefaultRuleEvaluator(vn)),this.remoteConfigParameterTargetRuleDeterminer=new RemoteConfigParameterTargetRuleDeterminer(pn,dn)}return sn.prototype.getFlow=function(ln){switch(ln){case"AB_TEST":return this.abTestFlow;case"FEATURE_FLAG":return this.featureFlagFlow}},sn}(),EventFactory=function(){function sn(ln){this.clock=ln}return sn.prototype.create=function(ln,cn){var dn=this,pn=this.clock.currentMillis(),vn=new Array,kn=this.createEvent(ln,cn,pn,{});return vn.push(kn),cn.targetEvaluations.forEach(function(Sn){var wn,Pn=(wn={},wn[sn.ROOT_TYPE]=ln.key.type,wn[sn.ROOT_ID]=ln.key.id,wn),Nn=dn.createEvent(ln,Sn,pn,Pn);vn.push(Nn)}),vn},sn.prototype.createEvent=function(ln,cn,dn,pn){var vn;if(cn instanceof ExperimentEvaluation)return pn[sn.CONFIG_ID_PROPERTY_KEY]=(vn=cn.config)===null||vn===void 0?void 0:vn.id,Event$1.exposure(ln.user,cn,pn,dn);if(cn instanceof RemoteConfigEvaluation)return Event$1.remoteConfig(ln.user,cn,__assign$1(__assign$1({},pn),cn.properties),dn);throw new Error("Unsupported Evaluation [".concat(typeof cn,"]"))},sn.ROOT_TYPE="$targetingRootType",sn.ROOT_ID="$targetingRootId",sn.CONFIG_ID_PROPERTY_KEY="$parameterConfigurationId",sn}(),log$1=Logger.log,HackleCore=function(){function sn(ln,cn,dn,pn,vn,kn){this.experimentEvaluator=ln,this.remoteConfigEvaluator=cn,this.workspaceFetcher=dn,this.eventFactory=pn,this.eventProcessor=vn,this.errorDedupDeterminer=kn,this.workspaceFetcher.start(),this.eventProcessor.start(),this.readyPromise=this.workspaceFetcher.onReady().then(function(){return{success:!0}},function(Sn){return{success:!1,error:Sn}})}return sn.create=function(ln,cn,dn){var pn=new DelegatingEvaluator,vn=new DelegatingManualOverrideStorage(dn),kn=new EvaluationFlowFactory(pn,vn),Sn=new ExperimentEvaluator(kn),wn=new RemoteConfigEvaluator(kn.remoteConfigParameterTargetRuleDeterminer);return pn.add(Sn),pn.add(wn),new sn(Sn,wn,ln,new EventFactory(SystemClock.instance),cn,new ErrorDedupDeterminer)},sn.prototype.experiment=function(ln,cn,dn){var pn=this;if(!ln)return log$1.error("experimentKey must not be empty"),Decision.of(dn,DecisionReason.INVALID_INPUT);var vn=this.workspaceFetcher.get();if(!vn)return log$1.warn("SDK not ready."),Decision.of(dn,DecisionReason.SDK_NOT_READY);var kn=vn.getExperimentOrNull(ln);if(!kn)return log$1.warn("Experiment does not exist."),Decision.of(dn,DecisionReason.EXPERIMENT_NOT_FOUND);var Sn=ExperimentRequest.of(vn,cn,kn,dn),wn=this.experimentInternal(Sn),Pn=wn[0],Nn=wn[1],Ln=this.eventFactory.create(Sn,Pn);return Ln.forEach(function(Fn){return pn.eventProcessor.process(Fn)}),Nn},sn.prototype.experiments=function(ln){var cn=this,dn=new Comparable(function(vn,kn){return vn.id===kn.id}),pn=this.workspaceFetcher.get();return pn&&pn.getExperiments().forEach(function(vn){var kn=ExperimentRequest.of(pn,ln,vn,"A"),Sn=cn.experimentInternal(kn);Sn[0];var wn=Sn[1];dn.add(vn,wn)}),dn},sn.prototype.experimentInternal=function(ln){var cn,dn=this.experimentEvaluator.evaluate(ln,EvaluatorContext.create()),pn=(cn=dn.config)!==null&&cn!==void 0?cn:new EmptyParameterConfig,vn=Decision.of(dn.variationKey,dn.reason,pn);return[dn,vn]},sn.prototype.featureFlag=function(ln,cn){var dn=this;if(!ln)return log$1.error("featureKey must not be empty"),FeatureFlagDecision.off(DecisionReason.INVALID_INPUT);var pn=this.workspaceFetcher.get();if(!pn)return log$1.warn("SDK not ready."),FeatureFlagDecision.off(DecisionReason.SDK_NOT_READY);var vn=pn.getFeatureFlagOrNull(ln);if(!vn)return log$1.warn("FeatureFlag does not exist."),FeatureFlagDecision.off(DecisionReason.FEATURE_FLAG_NOT_FOUND);var kn=ExperimentRequest.of(pn,cn,vn,"A"),Sn=this.featureFlagInternal(kn),wn=Sn[0],Pn=Sn[1],Nn=this.eventFactory.create(kn,wn);return Nn.forEach(function(Ln){return dn.eventProcessor.process(Ln)}),Pn},sn.prototype.featureFlags=function(ln){var cn=this,dn=new Comparable(function(vn,kn){return vn.id===kn.id}),pn=this.workspaceFetcher.get();return pn&&pn.getFeatureFlags().forEach(function(vn){var kn=ExperimentRequest.of(pn,ln,vn,"A"),Sn=cn.featureFlagInternal(kn);Sn[0];var wn=Sn[1];dn.add(vn,wn)}),dn},sn.prototype.featureFlagInternal=function(ln){var cn,dn=this.experimentEvaluator.evaluate(ln,EvaluatorContext.create()),pn=(cn=dn.config)!==null&&cn!==void 0?cn:new EmptyParameterConfig,vn=dn.variationKey==="A"?FeatureFlagDecision.off(dn.reason,pn):FeatureFlagDecision.on(dn.reason,pn);return[dn,vn]},sn.prototype.track=function(ln,cn,dn){var pn;if(dn===void 0&&(dn=new Date().getTime()),!ln){log$1.warn("event must not be null.");return}if(typeof ln!="object"){log$1.warn("Event must be event type.");return}if(typeof ln=="object"&&(!ln.key||typeof ln.key!="string")){log$1.warn("Event key must be not null. or event key must be string type.");return}var vn=((pn=this.workspaceFetcher.get())===null||pn===void 0?void 0:pn.getEventTypeOrNull(ln.key))||new EventType(0,ln.key);this.eventProcessor.process(Event$1.track(vn,ln,cn,dn))},sn.prototype.trackException=function(ln,cn){if(!this.errorDedupDeterminer.isDedupTarget(ln)){var dn=TraceTransformer.toEvent(ln);this.flush(),this.track(dn,cn),this.flush()}},sn.prototype.flush=function(){this.eventProcessor.flush()},sn.prototype.remoteConfig=function(ln,cn,dn,pn){var vn=this,kn=this.workspaceFetcher.get();if(ObjectUtil$1.isNullOrUndefined(kn))return log$1.warn("SDK not ready."),RemoteConfigDecision.of(pn,DecisionReason.SDK_NOT_READY);var Sn=kn.getRemoteConfigParameterOrNull(ln);if(ObjectUtil$1.isNullOrUndefined(Sn))return log$1.warn("Remote config parameter does not exist."),RemoteConfigDecision.of(pn,DecisionReason.REMOTE_CONFIG_PARAMETER_NOT_FOUND);var wn=RemoteConfigRequest.of(kn,cn,Sn,dn,pn),Pn=this.remoteConfigEvaluator.evaluate(wn,EvaluatorContext.create()),Nn=this.eventFactory.create(wn,Pn);return Nn.forEach(function(Ln){return vn.eventProcessor.process(Ln)}),RemoteConfigDecision.of(Pn.value,Pn.reason)},sn.prototype.onReady=function(ln,cn){cn===void 0&&(cn=DEFAULT_ON_READY_TIMEOUT),this.onInitialized({timeout:cn}).then(function(){return ln()})},sn.prototype.onInitialized=function(ln){var cn=ln.timeout,dn=cn===void 0?DEFAULT_ON_READY_TIMEOUT:cn;log$1.debug("Start HackleClient initializing");var pn,vn=new Promise(function(wn){pn=wn}),kn=function(){pn({success:!1})},Sn=setTimeout(kn,dn);return this.readyPromise.then(function(){clearTimeout(Sn),pn({success:!0})},function(wn){clearTimeout(Sn),pn({success:!1,error:wn})}),Promise.race([this.readyPromise,vn]).then(function(wn){return wn.success?log$1.debug("HackleClient onInitialized Success"):wn.error instanceof Error?log$1.error("HackleClient onInitialized Failed. ".concat(wn.error.message)):log$1.error("HackleClient onInitialized Failed. ".concat(wn.error)),Promise.resolve({success:wn.success})})},sn.prototype.close=function(){this.workspaceFetcher.close(),this.eventProcessor.close()},sn}(),ErrorDedupDeterminer=function(){function sn(){}return sn.prototype.isDedupTarget=function(ln){return this._isSameError(ln,this.previous)?!0:(this.previous=ln,!1)},sn.prototype._isSameError=function(ln,cn){return ObjectUtil$1.isNullOrUndefined(cn)?!1:ln.name===cn.name&&ln.message===cn.message&&ln.stack===cn.stack},sn}(),GlobalErrorHandler=function(){function sn(){this._installed=[],this._installations={onerror:_installOnError,onunhandledrejection:_installOnUnhandledRejection}}return sn.prototype.install=function(ln,cn){this._install("onerror",ln,cn),this._install("onunhandledrejection",ln,cn)},sn.prototype._install=function(ln,cn,dn){if(!(ln in this._installed)){var pn=this._installations[ln];pn(cn,dn),this._installed.push(ln)}},sn}(),_oldOnErrorEventHandler=null;function _installOnError(sn,ln){_oldOnErrorEventHandler=window.onerror,window.onerror=function(cn,dn,pn,vn,kn){ObjectUtil$1.isNotNullOrUndefined(kn)&&sn.trackException(kn,ln.resolveCurrentUser()),_oldOnErrorEventHandler&&_oldOnErrorEventHandler.apply(this,arguments)}}var _oldOnUnhandledRejectionEventHandler;function _installOnUnhandledRejection(sn,ln){_oldOnUnhandledRejectionEventHandler=window.onunhandledrejection,window.onunhandledrejection=function(cn){var dn;try{"reason"in cn?dn=cn.reason:"detail"in cn&&"reason"in cn.detail&&(dn=cn.detail.reason)}catch{}dn instanceof Error&&sn.trackException(dn,ln.resolveCurrentUser()),_oldOnUnhandledRejectionEventHandler&&_oldOnUnhandledRejectionEventHandler.apply(this,arguments)}}var EventRepositoryImpl=function(){function sn(ln,cn,dn){this.storage=ln,this.storageKey=cn,this.maxSize=dn}return sn.prototype.read=function(){var ln=this;return new Promise(function(cn){var dn=ln.storage.getItem(ln.storageKey);if(dn){var pn=JSON.parse(dn);cn(pn)}cn([])})},sn.prototype.save=function(ln){var cn=this;return ln.length===0?this.clear():new Promise(function(dn){var pn=JSON.stringify(ln.slice(-cn.maxSize));cn.storage.setItem(cn.storageKey,pn),dn()})},sn.prototype.add=function(ln){var cn=this;return this.read().then(function(dn){return cn.save(dn.concat(ln).slice(-cn.maxSize))})},sn.prototype.delete=function(ln){var cn=this;return this.read().then(function(dn){var pn=dn.filter(function(vn){return ln.findIndex(function(kn){return kn.insertId===vn.insertId})<0});return cn.save(pn)})},sn.prototype.clear=function(){var ln=this;return new Promise(function(cn){localStorage.removeItem(ln.storageKey),cn()})},sn}(),isSameUser=function(sn,ln){return sn.userId===ln.userId&&sn.deviceId===ln.deviceId},mergeUsers=function(sn,ln){return isSameUser(sn,ln)?__assign$1(__assign$1({},ln),{properties:__assign$1(__assign$1({},sn.properties),ln.properties)}):ln},UserManagerImpl=function(){function sn(ln,cn){this.storage=ln,this.hackleDeviceId=cn,this.userListeners=[],this.defaultUser={deviceId:this.hackleDeviceId},this._currentUser=this.defaultUser,this.initialize()}return sn.prototype.addListener=function(ln){this.userListeners.push(ln)},sn.prototype.initialize=function(){var ln=this.storage.getItem(DEVICE_ID_STORAGE_KEY)||this.hackleDeviceId,cn=this.storage.getItem(USER_ID_STORAGE_KEY)||void 0;this._currentUser={deviceId:ln,userId:cn}},Object.defineProperty(sn.prototype,"currentUser",{get:function(){return this._currentUser},enumerable:!1,configurable:!0}),sn.prototype.resolveCurrentOrNull=function(ln){if(ln===void 0)return this.currentUser;if(typeof ln=="string")return this.setUser({id:ln});var cn=sanitizeUser(ln);return cn?this.setUser(cn):null},sn.prototype.setUser=function(ln){var cn=this._currentUser,dn=mergeUsers(cn,ln);return this._currentUser=dn,isSameUser(cn,dn)||(this.changeUser(cn,dn,new Date().getTime()),this.saveUser(dn)),dn},sn.prototype.setUserId=function(ln){var cn=__assign$1(__assign$1({},this._currentUser),{userId:ln});return this.setUser(cn)},sn.prototype.setDeviceId=function(ln){var cn=__assign$1(__assign$1({},this._currentUser),{deviceId:ln});return this.setUser(cn)},sn.prototype.setUserProperty=function(ln,cn){var dn,pn=__assign$1(__assign$1({},this._currentUser),{properties:__assign$1(__assign$1({},this._currentUser.properties),(dn={},dn[ln]=cn,dn))});return this.setUser(pn)},sn.prototype.setUserProperties=function(ln){var cn=__assign$1(__assign$1({},this._currentUser),{properties:__assign$1(__assign$1({},this._currentUser.properties),ln)});return this.setUser(cn)},sn.prototype.resetUser=function(){return this.setUser(this.defaultUser)},sn.prototype.changeUser=function(ln,cn,dn){this.userListeners.forEach(function(pn){pn.onUserUpdated(ln,cn,dn)})},sn.prototype.saveUser=function(ln){ObjectUtil$1.isNotNullOrUndefined(ln.deviceId)?this.storage.setItem(DEVICE_ID_STORAGE_KEY,ln.deviceId):this.storage.removeItem(DEVICE_ID_STORAGE_KEY),ObjectUtil$1.isNotNullOrUndefined(ln.userId)?this.storage.setItem(USER_ID_STORAGE_KEY,ln.userId):this.storage.removeItem(USER_ID_STORAGE_KEY)},sn}(),createSessionId=function(sn){return"".concat(sn,".").concat(v4().slice(0,8))},SessionManagerImpl=function(){function sn(ln,cn){this.sessionTimeoutMillis=ln,this.storage=cn,this.sessionListeners=[],this._currentSessionId=null,this._lastEventTime=null,this.loadSession(),this.loadLastEventTime()}return Object.defineProperty(sn.prototype,"currentSessionId",{get:function(){return this._currentSessionId},enumerable:!1,configurable:!0}),Object.defineProperty(sn.prototype,"sessionId",{get:function(){var ln;return(ln=this._currentSessionId)!==null&&ln!==void 0?ln:sn.EMPTY_SESSION_ID},enumerable:!1,configurable:!0}),Object.defineProperty(sn.prototype,"lastEventTime",{get:function(){return this._lastEventTime},enumerable:!1,configurable:!0}),sn.prototype.addListener=function(ln){this.sessionListeners.push(ln)},sn.prototype.startNewSession=function(ln,cn){return this.endSession(ln),this.newSession(ln,cn)},sn.prototype.startNewSessionIfNeeded=function(ln,cn){var dn=this._lastEventTime;return dn===null?this.startNewSession(ln,cn):this._currentSessionId!==null&&cn-dn<this.sessionTimeoutMillis?(this.updateLastEventTime(cn),this._currentSessionId):this.startNewSession(ln,cn)},sn.prototype.updateLastEventTime=function(ln){this._lastEventTime=ln,this.storage.setItem(LAST_EVENT_TIME_STORAGE_KEY,"".concat(ln))},sn.prototype.endSession=function(ln){var cn=this._currentSessionId,dn=this._lastEventTime;cn!==null&&dn!==null&&this.sessionListeners.forEach(function(pn){return pn.onSessionEnded(cn,ln,dn)})},sn.prototype.newSession=function(ln,cn){var dn=createSessionId(cn);return this.saveSession(dn),this.updateLastEventTime(cn),this.sessionListeners.forEach(function(pn){pn.onSessionStarted(dn,ln,cn)}),dn},sn.prototype.saveSession=function(ln){this._currentSessionId=ln,this.storage.setItem(SESSION_ID_STORAGE_KEY,ln)},sn.prototype.loadSession=function(){this._currentSessionId=this.storage.getItem(SESSION_ID_STORAGE_KEY)},sn.prototype.loadLastEventTime=function(){var ln=this.storage.getItem(LAST_EVENT_TIME_STORAGE_KEY);if(ln!==null){var cn=Number.parseFloat(ln);cn>0&&(this._lastEventTime=cn)}},sn.prototype.onUserUpdated=function(ln,cn,dn){this.endSession(ln),this.newSession(cn,dn)},sn.EMPTY_SESSION_ID="0.ffffffff",sn}(),KeyTransformStorage=function(){function sn(ln,cn){this.delegate=ln,this.transform=cn}return sn.postfix=function(ln,cn){return new sn(ln,function(dn){return"".concat(dn).concat(cn)})},sn.prototype.getItem=function(ln){return this.delegate.getItem(this.transform(ln))},sn.prototype.removeItem=function(ln){this.delegate.removeItem(this.transform(ln))},sn.prototype.setItem=function(ln,cn){this.delegate.setItem(this.transform(ln),cn)},sn}(),ListStorage=function(){function sn(ln,cn,dn){dn===void 0&&(dn=4096);var pn=this;this.delegate=ln,this.listKey=cn,this.encodedListCharLen=6,this.resolveMaxLength=function(vn){var kn=vn-pn.encodedListCharLen;return kn<0?0:kn},this.maxLength=this.resolveMaxLength(dn)}return sn.prototype.isEqualItem=function(ln,cn){return Object.prototype.hasOwnProperty.call(ln,cn)},sn.prototype.getRemainListSize=function(){try{return this.maxLength-JSON.stringify(this.getList()).length}catch{return 0}},sn.prototype.isAddableItem=function(ln){try{return this.getRemainListSize()>JSON.stringify(ln).length}catch{return!1}},sn.prototype.getVictimIndex=function(ln){var cn=this.getRemainListSize();try{var dn=JSON.stringify(ln),pn=this.getList(),vn=0;return pn.findIndex(function(kn){return vn+=JSON.stringify(kn).length,vn+cn>=dn.length})}catch{return-1}},sn.prototype.getList=function(){try{var ln=this.delegate.getItem(this.listKey);if(!ln)return[];var cn=JSON.parse(ln);return Array.isArray(cn)?cn:[]}catch{return[]}},sn.prototype.entries=function(){return this.getList().flatMap(Object.entries)},sn.prototype.setItem=function(ln,cn){var dn;try{this.removeItem(ln);var pn=this.getList(),vn=(dn={},dn[ln]=cn,dn);if(!this.isAddableItem(vn)){var kn=this.getVictimIndex(vn);if(kn<0)return;pn=pn.slice(kn+1)}var Sn=JSON.stringify(pn.concat(vn));this.delegate.setItem(this.listKey,Sn)}catch{}},sn.prototype.getItem=function(ln){var cn=this,dn=this.getList().find(function(pn){return cn.isEqualItem(pn,ln)});if(!(!dn||!dn[ln]))return dn[ln]},sn.prototype.removeItem=function(ln){var cn=this,dn=this.getList();try{var pn=dn.filter(function(kn){return!cn.isEqualItem(kn,ln)}),vn=JSON.stringify(pn);this.delegate.setItem(this.listKey,vn)}catch{}},sn.prototype.clear=function(){this.delegate.removeItem(this.listKey)},sn}(),HackleUserExplorerImpl=function(){function sn(ln,cn,dn,pn,vn){this.core=ln,this.userManager=cn,this.userResolver=dn,this.abOverrideStorage=pn,this.ffOverrideStorage=vn}return sn.prototype.currentUser=function(){var ln=this.userManager.currentUser;return this.userResolver.resolve(ln)},sn.prototype.getAbTestDecisions=function(){return this.core.experiments(this.currentUser()).entries()},sn.prototype.getAbTestOverrides=function(){return this.abOverrideStorage.getAll()},sn.prototype.setAbTestOverride=function(ln,cn){this.abOverrideStorage.set(ln,cn),this.increment("AB_TEST","set")},sn.prototype.resetAbTestOverride=function(ln){this.abOverrideStorage.remove(ln),this.increment("AB_TEST","reset")},sn.prototype.resetAllAbTestOverride=function(){this.abOverrideStorage.clear(),this.increment("AB_TEST","reset.all")},sn.prototype.getFeatureFlagDecisions=function(){return this.core.featureFlags(this.currentUser()).entries()},sn.prototype.getFeatureFlagOverrides=function(){return this.ffOverrideStorage.getAll()},sn.prototype.setFeatureFlagOverride=function(ln,cn){this.ffOverrideStorage.set(ln,cn),this.increment("FEATURE_FLAG","set")},sn.prototype.resetFeatureFlagOverride=function(ln){this.ffOverrideStorage.remove(ln),this.increment("FEATURE_FLAG","reset")},sn.prototype.resetAllFeatureFlagOverride=function(){this.ffOverrideStorage.clear(),this.increment("FEATURE_FLAG","reset.all")},sn.prototype.increment=function(ln,cn){Metrics.counter("experiment.manual.override",{"experiment.type":ln,operation:cn}).increment()},sn}(),HackleUrlResolver=function(){function sn(){}return sn.serverFetch=function(ln){return"".concat(ln,"/api/v2/workspaces")},sn.clientFetch=function(ln,cn){return"".concat(ln,"/api/v2/w/").concat(cn,"/w")},sn.serverDispatch=function(ln){return"".concat(ln,"/api/v2/events")},sn.clientDispatch=function(ln){return"".concat(ln,"/api/v2/w/events")},sn.beaconDispatch=function(ln,cn){return"".concat(ln,"/api/v2/w/").concat(cn,"/events")},sn}(),log=Logger.log,hackleClientCache=null,defaultConfig={debug:!1,log_disabled:!1,auto_track_page_view:!0,pollingIntervalMillis:-1,exposureEventDedupIntervalMillis:-1,sessionTimeoutMillis:DEFAULT_SESSION_TIMEOUT_MILLIS,autoOpenDevTool:!1,sdkUrl:DEFAULT_CLIENT_SDK_URL,eventUrl:DEFAULT_EVENT_URL,monitoringUrl:DEFAULT_MONITORING_URL,SDK_NAME_HEADER:"javascript-sdk_browser",SDK_VERSION_HEADER:SDK_VERSION};function createInstance$1(sn,ln){var cn,dn,pn,vn,kn,Sn=__assign$1(__assign$1({},defaultConfig),ln);if(Logger.initCounter(function(_s){return Metrics.counter("log",{level:_s})}),Sn.log_disabled?Logger.setLogLevel(logLevels.DISABLE):Sn.debug&&Logger.setLogLevel(logLevels.DEBUG),log.debug("sdkKey : "+sn),sn||log.error("SDK Key must not be null"),hackleClientCache)return log.debug("use already exists hackleClient"),hackleClientCache;var wn=!1;typeof window<"u"&&(wn=window&&window.navigator&&window.navigator.sendBeacon&&!0,wn&&log.debug("support sendBeacon API"));var Pn=new EventDispatcher(sn,HttpRequest,{dispatchUrl:HackleUrlResolver.clientDispatch(Sn.eventUrl),beaconDispatchUrl:HackleUrlResolver.beaconDispatch(Sn.eventUrl,sn),useBeacon:wn,headers:(cn={},cn[SDK_NAME_HEADER$1]=Sn.SDK_NAME_HEADER,cn[SDK_VERSION_HEADER$1]=Sn.SDK_VERSION_HEADER,cn)}),Nn=-1;Sn.pollingIntervalMillis!==void 0&&typeof Sn.pollingIntervalMillis=="number"&&Sn.pollingIntervalMillis>0&&(Nn=Math.max(Sn.pollingIntervalMillis,BROWSER_MIN_POOL_INTERVAL));var Ln=new PollingWorkspaceFetcher(sn,HttpRequest,{fetchUrl:HackleUrlResolver.clientFetch(Sn.sdkUrl,sn),updateInterval:Nn,headers:(dn={},dn[SDK_NAME_HEADER$1]=Sn.SDK_NAME_HEADER,dn[SDK_VERSION_HEADER$1]=Sn.SDK_VERSION_HEADER,dn)}),Fn=-1;Sn.exposureEventDedupIntervalMillis!==void 0&&typeof Sn.exposureEventDedupIntervalMillis=="number"&&Sn.exposureEventDedupIntervalMillis!==-1&&(Sn.exposureEventDedupIntervalMillis<1e3||Sn.exposureEventDedupIntervalMillis>1e3*60*60?(log.warn("Exposure event dedup interval is outside allowed range[1_000ms..3_600_000ms]. Setting to default value[no dedup]."),Fn=-1):Fn=Sn.exposureEventDedupIntervalMillis);var zn=new EventRepositoryImpl(window.localStorage,"".concat(LOCAL_STORAGE_KEY_PREFIX,"_").concat(sn),BROWSER_BATCH_SIZE),Dn=new UserManagerImpl(KeyTransformStorage.postfix(cookieStorage,"_".concat(sn)),getUserId()),Kn=new SessionManagerImpl(Sn.sessionTimeoutMillis,KeyTransformStorage.postfix(cookieStorage,"_".concat(sn.slice(8))));Dn.addListener(Kn);var qn=new DefaultEventProcessor(Pn,BROWSER_BATCH_SIZE,BROWSER_FLUSH_INTERVAL,zn),Zn=new ExposureEventDedupDeterminer(Fn),Yn=new EventProcessorImpl(qn,Zn,Kn,Dn),Jn=new HackleUserManualOverrideStorage(new ListStorage(cookieStorage,"".concat(OVERRIDE_AB_STORAGE_PREFIX,"_").concat(sn.slice(0,8)))),rs=new HackleUserManualOverrideStorage(new ListStorage(cookieStorage,"".concat(OVERRIDE_FF_STORAGE_PREFIX,"_").concat(sn.slice(0,8)))),ss=HackleCore.create(Ln,Yn,[Jn,rs]),as=new HackleUserResolver(Dn),ds=new HackleUserExplorerImpl(ss,Dn,as,Jn,rs),Es=((vn=Sn.devTool)===null||vn===void 0?void 0:vn.userExplorer)&&typeof((kn=Sn.devTool)===null||kn===void 0?void 0:kn.userExplorer)=="function",Ss=Sn.devTool&&Es?{manager:Sn.devTool,userExplorer:ds}:void 0,Qn=new HackleClientImpl(ss,as,Kn,Dn,Ss),ms=new SessionEventTracker(as,ss);Kn.addListener(ms),hackleClientCache=Qn,Sn.auto_track_page_view&&_trackPageView(Qn),Sn.autoOpenDevTool&&(Sn.devTool?Qn.showUserExplorer():log.error("DevTool is not provided")),new GlobalErrorHandler().install(ss,as);var Ts=function(){qn.drainRepository()},Rs=new MonitoringMetricRegistry(Sn.monitoringUrl,METRIC_FLUSH_INTERVAL,HttpRequest,(pn={},pn[SDK_NAME_HEADER$1]=Sn.SDK_NAME_HEADER,pn[SDK_VERSION_HEADER$1]=Sn.SDK_VERSION_HEADER,pn[SDK_KEY_HEADER]=sn,pn),wn),ys=function(){removeUserId(),Kn.updateLastEventTime(new Date().getTime()),Qn.close(),Metrics.globalRegistry.close()};return document.addEventListener("visibilitychange",function(){document.hidden||Ts()}),window.addEventListener("pageshow",Ts),window.addEventListener("onpagehide"in window?"pagehide":"unload",ys),Metrics.addRegistry(Rs),Qn.onReady(function(){Kn.startNewSessionIfNeeded(Dn.currentUser,new Date().getTime())}),Qn}function _trackPageView(sn){var ln=function(){return sn.trackPageView({user:{id:getUserId()}})};sn.onReady(function(){ln();function cn(dn){if(typeof window.Event=="function")return new Event(dn);var pn={bubbles:!1,cancelable:!1,detail:void 0},vn=document.createEvent("CustomEvent");return vn.initCustomEvent(dn,pn.bubbles,pn.cancelable,pn.detail),vn}try{history.pushState=function(dn){return function(){try{var vn=dn.apply(this,arguments);return window.dispatchEvent(cn("locationchange")),vn}catch(kn){if(kn instanceof Error)log.error(kn);else try{log.error(kn)}catch{}}}}(history.pushState),history.replaceState=function(dn){return function(){try{var vn=dn.apply(this,arguments);return window.dispatchEvent(cn("locationchange")),vn}catch(kn){if(kn instanceof Error)log.error(kn);else try{log.error(kn)}catch{}}}}(history.replaceState),window.addEventListener("popstate",function(){try{window.dispatchEvent(cn("locationchange"))}catch(dn){if(dn instanceof Error)log.error(dn);else try{log.error(dn)}catch{}}}),window.addEventListener("locationchange",function(){try{ln()}catch(dn){if(dn instanceof Error)log.error(dn);else try{log.error(dn)}catch{}}})}catch(dn){if(dn instanceof Error)log.error(dn);else try{log.error(dn)}catch{}}})}var extendStatics=function(sn,ln){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(cn,dn){cn.__proto__=dn}||function(cn,dn){for(var pn in dn)Object.prototype.hasOwnProperty.call(dn,pn)&&(cn[pn]=dn[pn])},extendStatics(sn,ln)};function __extends(sn,ln){if(typeof ln!="function"&&ln!==null)throw new TypeError("Class extends value "+String(ln)+" is not a constructor or null");extendStatics(sn,ln);function cn(){this.constructor=sn}sn.prototype=ln===null?Object.create(ln):(cn.prototype=ln.prototype,new cn)}var __assign=function(){return __assign=Object.assign||function(ln){for(var cn,dn=1,pn=arguments.length;dn<pn;dn++){cn=arguments[dn];for(var vn in cn)Object.prototype.hasOwnProperty.call(cn,vn)&&(ln[vn]=cn[vn])}return ln},__assign.apply(this,arguments)};function __read(sn,ln){var cn=typeof Symbol=="function"&&sn[Symbol.iterator];if(!cn)return sn;var dn=cn.call(sn),pn,vn=[],kn;try{for(;(ln===void 0||ln-- >0)&&!(pn=dn.next()).done;)vn.push(pn.value)}catch(Sn){kn={error:Sn}}finally{try{pn&&!pn.done&&(cn=dn.return)&&cn.call(dn)}finally{if(kn)throw kn.error}}return vn}var SDK_NAME_HEADER="react-sdk",SDK_VERSION_HEADER="11.14.2",Emitter=function(){function sn(){this.listeners={}}return sn.prototype.on=function(ln,cn){this.listeners[ln]=(this.listeners[ln]||[]).concat(cn)},sn.prototype.off=function(ln,cn){this.listeners[ln]=(this.listeners[ln]||[]).filter(function(dn){return dn!==cn})},sn.prototype.emit=function(ln,cn){(this.listeners[ln]||[]).forEach(function(dn){dn(cn)})},sn}(),ObjectUtil=function(){function sn(){}return sn.arePropertiesEqual=function(ln,cn){var dn=sn.coerceUnknownToProperties(ln),pn=sn.coerceUnknownToProperties(cn),vn=Object.keys(dn),kn=Object.keys(pn);return vn.length!==kn.length?!1:vn.every(function(Sn){return Sn in pn&&dn[Sn]===pn[Sn]})},sn.coerceUnknownToProperties=function(ln){return typeof ln=="object"&&ln!==null?ln:{}},sn}(),UserUtil=function(){function sn(){}return sn.isUserEqual=function(ln,cn){return(ln==null?void 0:ln.id)===(cn==null?void 0:cn.id)&&(ln==null?void 0:ln.deviceId)===(cn==null?void 0:cn.deviceId)&&(ln==null?void 0:ln.userId)===(cn==null?void 0:cn.userId)&&ObjectUtil.arePropertiesEqual(ln==null?void 0:ln.properties,cn==null?void 0:cn.properties)&&ObjectUtil.arePropertiesEqual(ln==null?void 0:ln.identifiers,cn==null?void 0:cn.identifiers)},sn}(),HackleReactSDKClient=function(sn){__extends(ln,sn);function ln(cn,dn){var pn=sn.call(this)||this;return pn._currentUser=null,pn.client=createInstance$1(cn,__assign(__assign({},dn),{SDK_NAME_HEADER,SDK_VERSION_HEADER})),dn!=null&&dn.devTool&&(dn!=null&&dn.autoOpenDevTool)&&pn.showUserExplorer(),pn}return ln.prototype.getUser=function(){return this.client.getUser()},ln.prototype.setUser=function(cn){this.client.setUser(cn),this.emitUpdatedUser(this.getUser())},ln.prototype.setUserId=function(cn){this.client.setUserId(cn),this.emitUpdatedUser(this.getUser())},ln.prototype.setDeviceId=function(cn){this.client.setDeviceId(cn),this.emitUpdatedUser(this.getUser())},ln.prototype.setUserProperty=function(cn,dn){this.client.setUserProperty(cn,dn),this.emitUpdatedUser(this.getUser())},ln.prototype.resetUser=function(){this.client.resetUser(),this.emitUpdatedUser(this.getUser())},ln.prototype.variation=function(cn,dn,pn){return this.client.variation(cn,dn||void 0,pn)},ln.prototype.variationDetail=function(cn,dn,pn){return this.client.variationDetail(cn,dn||void 0,pn)},ln.prototype.isFeatureOn=function(cn,dn){return this.client.isFeatureOn(cn,dn||void 0)},ln.prototype.featureFlagDetail=function(cn,dn){return this.client.featureFlagDetail(cn,dn||void 0)},ln.prototype.track=function(cn,dn){this.client.track(cn,dn||void 0)},ln.prototype.trackPageView=function(cn){this.client.trackPageView(__assign(__assign({},cn),{user:(cn==null?void 0:cn.user)||void 0}))},ln.prototype.remoteConfig=function(cn){return this.client.remoteConfig(cn||void 0)},ln.prototype.onReady=function(cn,dn){this.client.onReady(cn,dn)},ln.prototype.onInitialized=function(cn){return this.client.onInitialized(cn)},ln.prototype.emitUpdatedUser=function(cn){UserUtil.isUserEqual(this._currentUser,cn)||this.emit("user-updated",cn),this._currentUser=cn},ln.prototype.showUserExplorer=function(){this.client.showUserExplorer()},ln.prototype.hideUserExplorer=function(){this.client.hideUserExplorer()},ln}(Emitter);function createInstance(sn,ln){return new HackleReactSDKClient(sn,ln)}var HackleContext=reactExports.createContext({hackle:void 0,userVersion:0,initialized:!1});HackleContext.Consumer;var HackleContextProvider=HackleContext.Provider;function HackleProvider(sn){var ln=sn.hackleClient,cn=sn.user,dn=sn.timeout,pn=dn===void 0?3e3:dn,vn=sn.supportSSR,kn=vn===void 0?!1:vn,Sn=sn.children,wn=__read(reactExports.useState({hackle:ln,initialized:!1,userVersion:0}),2),Pn=wn[0],Nn=wn[1];return reactExports.useEffect(function(){typeof cn<"u"&&cn!==null&&ln.setUser(cn)},[cn]),reactExports.useEffect(function(){var Ln=function(){Nn(function(Fn){return __assign(__assign({},Fn),{userVersion:Fn.userVersion+1})})};return ln.on("user-updated",Ln),function(){ln.off("user-updated",Ln)}},[ln]),reactExports.useEffect(function(){ln.onInitialized({timeout:pn}).then(function(){Nn(function(Ln){return __assign(__assign({},Ln),{initialized:!0})})},function(){Nn(function(Ln){return __assign(__assign({},Ln),{initialized:!0})})}).catch(function(){Nn(function(Ln){return __assign(__assign({},Ln),{initialized:!0})})})},[ln]),kn?React.createElement(HackleContextProvider,{value:Pn},Sn):Pn.initialized?React.createElement(HackleContextProvider,{value:Pn},Sn):null}Logger.log;var hasElementType=typeof Element<"u",hasMap=typeof Map=="function",hasSet=typeof Set=="function",hasArrayBuffer=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function equal(sn,ln){if(sn===ln)return!0;if(sn&&ln&&typeof sn=="object"&&typeof ln=="object"){if(sn.constructor!==ln.constructor)return!1;var cn,dn,pn;if(Array.isArray(sn)){if(cn=sn.length,cn!=ln.length)return!1;for(dn=cn;dn--!==0;)if(!equal(sn[dn],ln[dn]))return!1;return!0}var vn;if(hasMap&&sn instanceof Map&&ln instanceof Map){if(sn.size!==ln.size)return!1;for(vn=sn.entries();!(dn=vn.next()).done;)if(!ln.has(dn.value[0]))return!1;for(vn=sn.entries();!(dn=vn.next()).done;)if(!equal(dn.value[1],ln.get(dn.value[0])))return!1;return!0}if(hasSet&&sn instanceof Set&&ln instanceof Set){if(sn.size!==ln.size)return!1;for(vn=sn.entries();!(dn=vn.next()).done;)if(!ln.has(dn.value[0]))return!1;return!0}if(hasArrayBuffer&&ArrayBuffer.isView(sn)&&ArrayBuffer.isView(ln)){if(cn=sn.length,cn!=ln.length)return!1;for(dn=cn;dn--!==0;)if(sn[dn]!==ln[dn])return!1;return!0}if(sn.constructor===RegExp)return sn.source===ln.source&&sn.flags===ln.flags;if(sn.valueOf!==Object.prototype.valueOf&&typeof sn.valueOf=="function"&&typeof ln.valueOf=="function")return sn.valueOf()===ln.valueOf();if(sn.toString!==Object.prototype.toString&&typeof sn.toString=="function"&&typeof ln.toString=="function")return sn.toString()===ln.toString();if(pn=Object.keys(sn),cn=pn.length,cn!==Object.keys(ln).length)return!1;for(dn=cn;dn--!==0;)if(!Object.prototype.hasOwnProperty.call(ln,pn[dn]))return!1;if(hasElementType&&sn instanceof Element)return!1;for(dn=cn;dn--!==0;)if(!((pn[dn]==="_owner"||pn[dn]==="__v"||pn[dn]==="__o")&&sn.$$typeof)&&!equal(sn[pn[dn]],ln[pn[dn]]))return!1;return!0}return sn!==sn&&ln!==ln}var reactFastCompare=function sn(ln,cn){try{return equal(ln,cn)}catch(dn){if((dn.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw dn}};const n=getDefaultExportFromCjs(reactFastCompare);var invariant=function(sn,ln,cn,dn,pn,vn,kn,Sn){if(!sn){var wn;if(ln===void 0)wn=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var Pn=[cn,dn,pn,vn,kn,Sn],Nn=0;wn=new Error(ln.replace(/%s/g,function(){return Pn[Nn++]})),wn.name="Invariant Violation"}throw wn.framesToPop=1,wn}},browser=invariant;const i=getDefaultExportFromCjs(browser);var shallowequal=function sn(ln,cn,dn,pn){var vn=dn?dn.call(pn,ln,cn):void 0;if(vn!==void 0)return!!vn;if(ln===cn)return!0;if(typeof ln!="object"||!ln||typeof cn!="object"||!cn)return!1;var kn=Object.keys(ln),Sn=Object.keys(cn);if(kn.length!==Sn.length)return!1;for(var wn=Object.prototype.hasOwnProperty.bind(cn),Pn=0;Pn<kn.length;Pn++){var Nn=kn[Pn];if(!wn(Nn))return!1;var Ln=ln[Nn],Fn=cn[Nn];if(vn=dn?dn.call(pn,Ln,Fn,Nn):void 0,vn===!1||vn===void 0&&Ln!==Fn)return!1}return!0};const o=getDefaultExportFromCjs(shallowequal);function a(){return a=Object.assign||function(sn){for(var ln=1;ln<arguments.length;ln++){var cn=arguments[ln];for(var dn in cn)Object.prototype.hasOwnProperty.call(cn,dn)&&(sn[dn]=cn[dn])}return sn},a.apply(this,arguments)}function s(sn,ln){sn.prototype=Object.create(ln.prototype),sn.prototype.constructor=sn,c(sn,ln)}function c(sn,ln){return c=Object.setPrototypeOf||function(cn,dn){return cn.__proto__=dn,cn},c(sn,ln)}function u(sn,ln){if(sn==null)return{};var cn,dn,pn={},vn=Object.keys(sn);for(dn=0;dn<vn.length;dn++)ln.indexOf(cn=vn[dn])>=0||(pn[cn]=sn[cn]);return pn}var l={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title",FRAGMENT:"Symbol(react.fragment)"},p={rel:["amphtml","canonical","alternate"]},f={type:["application/ld+json"]},d={charset:"",name:["robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]},h=Object.keys(l).map(function(sn){return l[sn]}),m={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},y=Object.keys(m).reduce(function(sn,ln){return sn[m[ln]]=ln,sn},{}),T=function(sn,ln){for(var cn=sn.length-1;cn>=0;cn-=1){var dn=sn[cn];if(Object.prototype.hasOwnProperty.call(dn,ln))return dn[ln]}return null},g=function(sn){var ln=T(sn,l.TITLE),cn=T(sn,"titleTemplate");if(Array.isArray(ln)&&(ln=ln.join("")),cn&&ln)return cn.replace(/%s/g,function(){return ln});var dn=T(sn,"defaultTitle");return ln||dn||void 0},b=function(sn){return T(sn,"onChangeClientState")||function(){}},v=function(sn,ln){return ln.filter(function(cn){return cn[sn]!==void 0}).map(function(cn){return cn[sn]}).reduce(function(cn,dn){return a({},cn,dn)},{})},A=function(sn,ln){return ln.filter(function(cn){return cn[l.BASE]!==void 0}).map(function(cn){return cn[l.BASE]}).reverse().reduce(function(cn,dn){if(!cn.length)for(var pn=Object.keys(dn),vn=0;vn<pn.length;vn+=1){var kn=pn[vn].toLowerCase();if(sn.indexOf(kn)!==-1&&dn[kn])return cn.concat(dn)}return cn},[])},C=function(sn,ln,cn){var dn={};return cn.filter(function(pn){return!!Array.isArray(pn[sn])||(pn[sn]!==void 0&&console&&typeof console.warn=="function"&&console.warn("Helmet: "+sn+' should be of type "Array". Instead found type "'+typeof pn[sn]+'"'),!1)}).map(function(pn){return pn[sn]}).reverse().reduce(function(pn,vn){var kn={};vn.filter(function(Ln){for(var Fn,zn=Object.keys(Ln),Dn=0;Dn<zn.length;Dn+=1){var Kn=zn[Dn],qn=Kn.toLowerCase();ln.indexOf(qn)===-1||Fn==="rel"&&Ln[Fn].toLowerCase()==="canonical"||qn==="rel"&&Ln[qn].toLowerCase()==="stylesheet"||(Fn=qn),ln.indexOf(Kn)===-1||Kn!=="innerHTML"&&Kn!=="cssText"&&Kn!=="itemprop"||(Fn=Kn)}if(!Fn||!Ln[Fn])return!1;var Zn=Ln[Fn].toLowerCase();return dn[Fn]||(dn[Fn]={}),kn[Fn]||(kn[Fn]={}),!dn[Fn][Zn]&&(kn[Fn][Zn]=!0,!0)}).reverse().forEach(function(Ln){return pn.push(Ln)});for(var Sn=Object.keys(kn),wn=0;wn<Sn.length;wn+=1){var Pn=Sn[wn],Nn=a({},dn[Pn],kn[Pn]);dn[Pn]=Nn}return pn},[]).reverse()},O=function(sn,ln){if(Array.isArray(sn)&&sn.length){for(var cn=0;cn<sn.length;cn+=1)if(sn[cn][ln])return!0}return!1},S=function(sn){return Array.isArray(sn)?sn.join(""):sn},E=function(sn,ln){return Array.isArray(sn)?sn.reduce(function(cn,dn){return function(pn,vn){for(var kn=Object.keys(pn),Sn=0;Sn<kn.length;Sn+=1)if(vn[kn[Sn]]&&vn[kn[Sn]].includes(pn[kn[Sn]]))return!0;return!1}(dn,ln)?cn.priority.push(dn):cn.default.push(dn),cn},{priority:[],default:[]}):{default:sn}},I=function(sn,ln){var cn;return a({},sn,((cn={})[ln]=void 0,cn))},P=[l.NOSCRIPT,l.SCRIPT,l.STYLE],w=function(sn,ln){return ln===void 0&&(ln=!0),ln===!1?String(sn):String(sn).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},x=function(sn){return Object.keys(sn).reduce(function(ln,cn){var dn=sn[cn]!==void 0?cn+'="'+sn[cn]+'"':""+cn;return ln?ln+" "+dn:dn},"")},L=function(sn,ln){return ln===void 0&&(ln={}),Object.keys(sn).reduce(function(cn,dn){return cn[m[dn]||dn]=sn[dn],cn},ln)},j=function(sn,ln){return ln.map(function(cn,dn){var pn,vn=((pn={key:dn})["data-rh"]=!0,pn);return Object.keys(cn).forEach(function(kn){var Sn=m[kn]||kn;Sn==="innerHTML"||Sn==="cssText"?vn.dangerouslySetInnerHTML={__html:cn.innerHTML||cn.cssText}:vn[Sn]=cn[kn]}),React.createElement(sn,vn)})},M=function(sn,ln,cn){switch(sn){case l.TITLE:return{toComponent:function(){return pn=ln.titleAttributes,(vn={key:dn=ln.title})["data-rh"]=!0,kn=L(pn,vn),[React.createElement(l.TITLE,kn,dn)];var dn,pn,vn,kn},toString:function(){return function(dn,pn,vn,kn){var Sn=x(vn),wn=S(pn);return Sn?"<"+dn+' data-rh="true" '+Sn+">"+w(wn,kn)+"</"+dn+">":"<"+dn+' data-rh="true">'+w(wn,kn)+"</"+dn+">"}(sn,ln.title,ln.titleAttributes,cn)}};case"bodyAttributes":case"htmlAttributes":return{toComponent:function(){return L(ln)},toString:function(){return x(ln)}};default:return{toComponent:function(){return j(sn,ln)},toString:function(){return function(dn,pn,vn){return pn.reduce(function(kn,Sn){var wn=Object.keys(Sn).filter(function(Ln){return!(Ln==="innerHTML"||Ln==="cssText")}).reduce(function(Ln,Fn){var zn=Sn[Fn]===void 0?Fn:Fn+'="'+w(Sn[Fn],vn)+'"';return Ln?Ln+" "+zn:zn},""),Pn=Sn.innerHTML||Sn.cssText||"",Nn=P.indexOf(dn)===-1;return kn+"<"+dn+' data-rh="true" '+wn+(Nn?"/>":">"+Pn+"</"+dn+">")},"")}(sn,ln,cn)}}}},k=function(sn){var ln=sn.baseTag,cn=sn.bodyAttributes,dn=sn.encode,pn=sn.htmlAttributes,vn=sn.noscriptTags,kn=sn.styleTags,Sn=sn.title,wn=Sn===void 0?"":Sn,Pn=sn.titleAttributes,Nn=sn.linkTags,Ln=sn.metaTags,Fn=sn.scriptTags,zn={toComponent:function(){},toString:function(){return""}};if(sn.prioritizeSeoTags){var Dn=function(Kn){var qn=Kn.linkTags,Zn=Kn.scriptTags,Yn=Kn.encode,Jn=E(Kn.metaTags,d),rs=E(qn,p),ss=E(Zn,f);return{priorityMethods:{toComponent:function(){return[].concat(j(l.META,Jn.priority),j(l.LINK,rs.priority),j(l.SCRIPT,ss.priority))},toString:function(){return M(l.META,Jn.priority,Yn)+" "+M(l.LINK,rs.priority,Yn)+" "+M(l.SCRIPT,ss.priority,Yn)}},metaTags:Jn.default,linkTags:rs.default,scriptTags:ss.default}}(sn);zn=Dn.priorityMethods,Nn=Dn.linkTags,Ln=Dn.metaTags,Fn=Dn.scriptTags}return{priority:zn,base:M(l.BASE,ln,dn),bodyAttributes:M("bodyAttributes",cn,dn),htmlAttributes:M("htmlAttributes",pn,dn),link:M(l.LINK,Nn,dn),meta:M(l.META,Ln,dn),noscript:M(l.NOSCRIPT,vn,dn),script:M(l.SCRIPT,Fn,dn),style:M(l.STYLE,kn,dn),title:M(l.TITLE,{title:wn,titleAttributes:Pn},dn)}},H=[],N=function(sn,ln){var cn=this;ln===void 0&&(ln=typeof document<"u"),this.instances=[],this.value={setHelmet:function(dn){cn.context.helmet=dn},helmetInstances:{get:function(){return cn.canUseDOM?H:cn.instances},add:function(dn){(cn.canUseDOM?H:cn.instances).push(dn)},remove:function(dn){var pn=(cn.canUseDOM?H:cn.instances).indexOf(dn);(cn.canUseDOM?H:cn.instances).splice(pn,1)}}},this.context=sn,this.canUseDOM=ln,ln||(sn.helmet=k({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))},R=React.createContext({}),D=r$7.shape({setHelmet:r$7.func,helmetInstances:r$7.shape({get:r$7.func,add:r$7.func,remove:r$7.func})}),U=typeof document<"u",q=function(sn){function ln(cn){var dn;return(dn=sn.call(this,cn)||this).helmetData=new N(dn.props.context,ln.canUseDOM),dn}return s(ln,sn),ln.prototype.render=function(){return jsx$1(R.Provider,{value:this.helmetData.value,children:this.props.children})},ln}(reactExports.Component);q.canUseDOM=U,q.propTypes={context:r$7.shape({helmet:r$7.shape()}),children:r$7.node.isRequired},q.defaultProps={context:{}},q.displayName="HelmetProvider";var Y=function(sn,ln){var cn,dn=document.head||document.querySelector(l.HEAD),pn=dn.querySelectorAll(sn+"[data-rh]"),vn=[].slice.call(pn),kn=[];return ln&&ln.length&&ln.forEach(function(Sn){var wn=document.createElement(sn);for(var Pn in Sn)Object.prototype.hasOwnProperty.call(Sn,Pn)&&(Pn==="innerHTML"?wn.innerHTML=Sn.innerHTML:Pn==="cssText"?wn.styleSheet?wn.styleSheet.cssText=Sn.cssText:wn.appendChild(document.createTextNode(Sn.cssText)):wn.setAttribute(Pn,Sn[Pn]===void 0?"":Sn[Pn]));wn.setAttribute("data-rh","true"),vn.some(function(Nn,Ln){return cn=Ln,wn.isEqualNode(Nn)})?vn.splice(cn,1):kn.push(wn)}),vn.forEach(function(Sn){return Sn.parentNode.removeChild(Sn)}),kn.forEach(function(Sn){return dn.appendChild(Sn)}),{oldTags:vn,newTags:kn}},B=function(sn,ln){var cn=document.getElementsByTagName(sn)[0];if(cn){for(var dn=cn.getAttribute("data-rh"),pn=dn?dn.split(","):[],vn=[].concat(pn),kn=Object.keys(ln),Sn=0;Sn<kn.length;Sn+=1){var wn=kn[Sn],Pn=ln[wn]||"";cn.getAttribute(wn)!==Pn&&cn.setAttribute(wn,Pn),pn.indexOf(wn)===-1&&pn.push(wn);var Nn=vn.indexOf(wn);Nn!==-1&&vn.splice(Nn,1)}for(var Ln=vn.length-1;Ln>=0;Ln-=1)cn.removeAttribute(vn[Ln]);pn.length===vn.length?cn.removeAttribute("data-rh"):cn.getAttribute("data-rh")!==kn.join(",")&&cn.setAttribute("data-rh",kn.join(","))}},K=function(sn,ln){var cn=sn.baseTag,dn=sn.htmlAttributes,pn=sn.linkTags,vn=sn.metaTags,kn=sn.noscriptTags,Sn=sn.onChangeClientState,wn=sn.scriptTags,Pn=sn.styleTags,Nn=sn.title,Ln=sn.titleAttributes;B(l.BODY,sn.bodyAttributes),B(l.HTML,dn),function(Kn,qn){Kn!==void 0&&document.title!==Kn&&(document.title=S(Kn)),B(l.TITLE,qn)}(Nn,Ln);var Fn={baseTag:Y(l.BASE,cn),linkTags:Y(l.LINK,pn),metaTags:Y(l.META,vn),noscriptTags:Y(l.NOSCRIPT,kn),scriptTags:Y(l.SCRIPT,wn),styleTags:Y(l.STYLE,Pn)},zn={},Dn={};Object.keys(Fn).forEach(function(Kn){var qn=Fn[Kn],Zn=qn.newTags,Yn=qn.oldTags;Zn.length&&(zn[Kn]=Zn),Yn.length&&(Dn[Kn]=Fn[Kn].oldTags)}),ln&&ln(),Sn(sn,zn,Dn)},_=null,z=function(sn){function ln(){for(var dn,pn=arguments.length,vn=new Array(pn),kn=0;kn<pn;kn++)vn[kn]=arguments[kn];return(dn=sn.call.apply(sn,[this].concat(vn))||this).rendered=!1,dn}s(ln,sn);var cn=ln.prototype;return cn.shouldComponentUpdate=function(dn){return!o(dn,this.props)},cn.componentDidUpdate=function(){this.emitChange()},cn.componentWillUnmount=function(){this.props.context.helmetInstances.remove(this),this.emitChange()},cn.emitChange=function(){var dn,pn,vn=this.props.context,kn=vn.setHelmet,Sn=null,wn=(dn=vn.helmetInstances.get().map(function(Pn){var Nn=a({},Pn.props);return delete Nn.context,Nn}),{baseTag:A(["href"],dn),bodyAttributes:v("bodyAttributes",dn),defer:T(dn,"defer"),encode:T(dn,"encodeSpecialCharacters"),htmlAttributes:v("htmlAttributes",dn),linkTags:C(l.LINK,["rel","href"],dn),metaTags:C(l.META,["name","charset","http-equiv","property","itemprop"],dn),noscriptTags:C(l.NOSCRIPT,["innerHTML"],dn),onChangeClientState:b(dn),scriptTags:C(l.SCRIPT,["src","innerHTML"],dn),styleTags:C(l.STYLE,["cssText"],dn),title:g(dn),titleAttributes:v("titleAttributes",dn),prioritizeSeoTags:O(dn,"prioritizeSeoTags")});q.canUseDOM?(pn=wn,_&&cancelAnimationFrame(_),pn.defer?_=requestAnimationFrame(function(){K(pn,function(){_=null})}):(K(pn),_=null)):k&&(Sn=k(wn)),kn(Sn)},cn.init=function(){this.rendered||(this.rendered=!0,this.props.context.helmetInstances.add(this),this.emitChange())},cn.render=function(){return this.init(),null},ln}(reactExports.Component);z.propTypes={context:D.isRequired},z.displayName="HelmetDispatcher";var F=["children"],G=["children"],W=function(sn){function ln(){return sn.apply(this,arguments)||this}s(ln,sn);var cn=ln.prototype;return cn.shouldComponentUpdate=function(dn){return!n(I(this.props,"helmetData"),I(dn,"helmetData"))},cn.mapNestedChildrenToProps=function(dn,pn){if(!pn)return null;switch(dn.type){case l.SCRIPT:case l.NOSCRIPT:return{innerHTML:pn};case l.STYLE:return{cssText:pn};default:throw new Error("<"+dn.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")}},cn.flattenArrayTypeChildren=function(dn){var pn,vn=dn.child,kn=dn.arrayTypeChildren;return a({},kn,((pn={})[vn.type]=[].concat(kn[vn.type]||[],[a({},dn.newChildProps,this.mapNestedChildrenToProps(vn,dn.nestedChildren))]),pn))},cn.mapObjectTypeChildren=function(dn){var pn,vn,kn=dn.child,Sn=dn.newProps,wn=dn.newChildProps,Pn=dn.nestedChildren;switch(kn.type){case l.TITLE:return a({},Sn,((pn={})[kn.type]=Pn,pn.titleAttributes=a({},wn),pn));case l.BODY:return a({},Sn,{bodyAttributes:a({},wn)});case l.HTML:return a({},Sn,{htmlAttributes:a({},wn)});default:return a({},Sn,((vn={})[kn.type]=a({},wn),vn))}},cn.mapArrayTypeChildrenToProps=function(dn,pn){var vn=a({},pn);return Object.keys(dn).forEach(function(kn){var Sn;vn=a({},vn,((Sn={})[kn]=dn[kn],Sn))}),vn},cn.warnOnInvalidChildren=function(dn,pn){return i(h.some(function(vn){return dn.type===vn}),typeof dn.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":"Only elements types "+h.join(", ")+" are allowed. Helmet does not support rendering <"+dn.type+"> elements. Refer to our API for more information."),i(!pn||typeof pn=="string"||Array.isArray(pn)&&!pn.some(function(vn){return typeof vn!="string"}),"Helmet expects a string as a child of <"+dn.type+">. Did you forget to wrap your children in braces? ( <"+dn.type+">{``}</"+dn.type+"> ) Refer to our API for more information."),!0},cn.mapChildrenToProps=function(dn,pn){var vn=this,kn={};return React.Children.forEach(dn,function(Sn){if(Sn&&Sn.props){var wn=Sn.props,Pn=wn.children,Nn=u(wn,F),Ln=Object.keys(Nn).reduce(function(zn,Dn){return zn[y[Dn]||Dn]=Nn[Dn],zn},{}),Fn=Sn.type;switch(typeof Fn=="symbol"?Fn=Fn.toString():vn.warnOnInvalidChildren(Sn,Pn),Fn){case l.FRAGMENT:pn=vn.mapChildrenToProps(Pn,pn);break;case l.LINK:case l.META:case l.NOSCRIPT:case l.SCRIPT:case l.STYLE:kn=vn.flattenArrayTypeChildren({child:Sn,arrayTypeChildren:kn,newChildProps:Ln,nestedChildren:Pn});break;default:pn=vn.mapObjectTypeChildren({child:Sn,newProps:pn,newChildProps:Ln,nestedChildren:Pn})}}}),this.mapArrayTypeChildrenToProps(kn,pn)},cn.render=function(){var dn=this.props,pn=dn.children,vn=u(dn,G),kn=a({},vn),Sn=vn.helmetData;return pn&&(kn=this.mapChildrenToProps(pn,kn)),!Sn||Sn instanceof N||(Sn=new N(Sn.context,Sn.instances)),Sn?React.createElement(z,a({},kn,{context:Sn.value,helmetData:void 0})):jsx$1(R.Consumer,{children:function(wn){return React.createElement(z,a({},kn,{context:wn}))}})},ln}(reactExports.Component);W.propTypes={base:r$7.object,bodyAttributes:r$7.object,children:r$7.oneOfType([r$7.arrayOf(r$7.node),r$7.node]),defaultTitle:r$7.string,defer:r$7.bool,encodeSpecialCharacters:r$7.bool,htmlAttributes:r$7.object,link:r$7.arrayOf(r$7.object),meta:r$7.arrayOf(r$7.object),noscript:r$7.arrayOf(r$7.object),onChangeClientState:r$7.func,script:r$7.arrayOf(r$7.object),style:r$7.arrayOf(r$7.object),title:r$7.string,titleAttributes:r$7.object,titleTemplate:r$7.string,prioritizeSeoTags:r$7.bool,helmetData:r$7.object},W.defaultProps={defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1},W.displayName="Helmet";const initialCommunityState={selectedCommunityTab:"질문",keyword:"",selectedDetailId:null,isUpdateMode:!1,isAddMode:!1},slice$1=createSlice({name:"lecture",initialState:initialCommunityState,reducers:{changeSelectedCommunityTab(sn,{payload:ln}){return{...sn,selectedCommunityTab:ln}},changeCommunityKeyword(sn,{payload:ln}){return{...sn,keyword:ln}},changeSelectedDetailId(sn,{payload:ln}){return{...sn,selectedDetailId:ln}},changeIsAddMode(sn,{payload:ln}){sn.isAddMode=ln},changeIsUpdateMode(sn,{payload:ln}){sn.isUpdateMode=ln}}}),{reducer:communityReducer}=slice$1,communityActions=slice$1.actions,initialLecture={currentEditNoteWritingContent:void 0,currentNoteWritingContent:"",selectedNoteId:void 0,selectedEditNoteId:void 0},slice=createSlice({name:"note",initialState:initialLecture,reducers:{setCurrentEditNoteWritingContent(sn,{payload:ln}){sn.currentEditNoteWritingContent=ln},setCurrentNoteWritingContent(sn,{payload:ln}){sn.currentNoteWritingContent=ln},setSelectedNoteId(sn,{payload:ln}){sn.selectedNoteId=ln},setSelectedEditNoteId(sn,{payload:ln}){sn.selectedEditNoteId=ln}}}),{reducer:noteReducer}=slice,noteActions=slice.actions,rootReducer=combineReducers({community:communityReducer,lecture:lectureReducer,video:videoReducer,note:noteReducer}),store=configureStore({reducer:rootReducer,devTools:appConfig.MODE!=="production"});function handleSubtitleOptionChange(){const sn=store.getState();setUserSetting({isVodSubtitleOpened:sn.video.isVodSubtitleOpened,subtitlePosition:sn.video.subtitlePosition})}store.subscribe(handleSubtitleOptionChange);const getUserPropertyBySession=sn=>({user_id:sn.userId,role_b2b:sn.role.isB2b,role_b2c:!sn.role.isB2b,role_admin:sn.role.isAdmin}),queryClient=new QueryClient({defaultOptions:{queries:{refetchOnMount:!0,refetchOnReconnect:!1,refetchOnWindowFocus:!1,retry:0,useErrorBoundary:!0}}});setLogger({log:console.log,warn:console.warn,error:console.info});const _AppProvider=({children:sn})=>{const ln=useQueryClient();ln||console.error("_AppProvider: queryClient가 존재하지 않습니다."),Object.entries(ln).length===0&&console.error("_AppProvider: queryClient가 key를 가지고 있지 않습니다.");const{data:cn}=useSession(),dn=createInstance(appConfig.HACKLE_BROWSER_SDK_KEY,{exposureEventDedupIntervalMillis:1e3,pollingIntervalMillis:3e4}),pn={id:api.get("deviceId"),userId:String(cn==null?void 0:cn.userId)};return reactExports.useEffect(()=>{if(!cn)return;datadogRum.setUser({id:String(cn.userId)}),isDebugMode()&&datadogLogs.setUser({id:String(cn.userId)});const vn=getUserPropertyBySession(cn);trackEvent("gtm.customInit",{user_id:cn.userId,mxp___user:JSON.stringify(vn)}),configureScope(kn=>{kn.setUser({deviceId:api.get("deviceId"),id:String(cn.userId)})})},[cn]),jsx(HackleProvider,{hackleClient:dn,user:pn,children:jsx(ir$3,{theme:{colorScheme:"light"},cdnLink:appConfig.CDN_URL,children:jsx(ModalsProvider$1,{children:jsxs(E$8,{children:[jsx(H$7,{limit:3,position:"bottom-center"}),jsx(PlayerProvider,{children:sn})]})})})})};setLogger({log:()=>window.console,warn:()=>window.console,error:sn=>{var ln;return((ln=sn.response)==null?void 0:ln.status)===401?window.console.info(sn):window.console}});function AppProvider({children:sn}){return jsx(q,{children:jsx(Provider,{store,children:jsx(BrowserRouter,{children:jsx(QueryClientProvider,{client:queryClient,children:jsx(_AppProvider,{children:sn})})})})})}function cdnUrl(sn){return`${appConfig.CDN_URL}/font${sn}`}const fontFamilies=css$1("@font-face{font-family:'D2 coding';font-style:normal;font-weight:400;src:local('D2Coding'),url('#{$cdn_link}/D2Coding.woff2') format('woff2'),url(",cdnUrl("/D2Coding.woff"),") format('woff'),url(",cdnUrl("/D2Coding.ttf"),") format('truetype');}@font-face{font-family:'NanumMyeongjoExtraBold';font-weight:800;src:local('NanumMyeongjoExtraBold'),url(",cdnUrl("/NanumMyeongjoExtraBold.woff2"),") format('woff2'),url(",cdnUrl("/NanumMyeongjoExtraBold.woff"),") format('woff'),url(",cdnUrl("/NanumMyeongjoExtraBold.ttf"),") format('truetype');}",""),globals={name:"3ehvim",styles:"*{box-sizing:border-box;}a{text-decoration:none;}.tox-notifications-container{display:none!important;}.shaka-video-container *{font-family:Pretendard,-apple-system,BlinkMacSystemFont,system-ui,Roboto,'Helvetica Neue','Segoe UI','Apple SD Gothic Neo','Noto Sans KR','Malgun Gothic','Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol',sans-serif;}"},reset={name:"1mrm4cd",styles:"html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td,article,aside,canvas,details,embed,figure,figcaption,footer,header,hgroup,menu,nav,output,ruby,section,summary,time,mark,audio,video{margin:0;padding:0;border:0;font-size:100%;vertical-align:baseline;}article,aside,details,figcaption,figure,footer,header,hgroup,menu,nav,section{display:block;}ol,ul{list-style:none;}blockquote,q{quotes:none;}blockquote:before,blockquote:after,q:before,q:after{content:'none';}table{border-collapse:collapse;border-spacing:0;}"};window.__SHA__=appConfig.COMMIT_HASH,window.__RELEASE__=appConfig.COMMIT_HASH;Modal$1.setAppElement("#root");ReactDOM.render(jsx(React.StrictMode,{children:jsxs(AppProvider,{children:[jsx(Global$1,{styles:[reset,fontFamilies,globals,""]}),jsx(App,{}),appConfig.MODE==="localhost"]})}),document.getElementById("root"));export{faCheck as $,off as A,useIsomorphicEffect$1 as B,createStyles as C,useComponentDefaultProps as D,jsx$1 as E,createPolymorphicComponent as F,useDidUpdate as G,rem as H,jsxs$1 as I,Box as J,getSize as K,assignRef as L,useMergedRef as M,clamp as N,useMantineTheme as O,Tooltip as P,jsx$2 as Q,jsx as R,css$1 as S,Text as T,jsxs as U,get$1 as V,B$7 as W,c$8 as X,S$5 as Y,Transition$2 as Z,faExclamationTriangle as _,isArray$9 as a,SIDE_BAR_Z_INDEX as a$,faAngleLeft as a0,isInstanceOf as a1,truncate as a2,logger as a3,getGlobalObject as a4,CONSOLE_LEVELS as a5,fill$1 as a6,isString as a7,isNaN$1 as a8,convertToPlainObject as a9,jsx$3 as aA,Fragment as aB,mediaQueries as aC,useLectureParams as aD,useMyVoucher as aE,useUnit as aF,tabletSize as aG,isNil as aH,omit$1 as aI,trackEvent as aJ,eventNames as aK,z$6 as aL,hideNotification as aM,ErrorNotification as aN,ErrorBoundary as aO,FOOTER_BAR_Z_INDEX as aP,PC_REACTIVE_MEDIA_QUERY as aQ,o$5 as aR,Dr$2 as aS,w$6 as aT,useLocalStorage$1 as aU,URL_INFLEARN_FAQ as aV,useShortcutGuide as aW,A$9 as aX,useSubtitleGtmProperty as aY,a$6 as aZ,trackMixpanelEvent as a_,isSyntheticEvent as aa,getOriginalFunction as ab,getEventDescription as ac,stringMatchesSomePattern as ad,GLOBAL_OBJ as ae,markFunctionWrapped as af,addNonEnumerableProperty as ag,withScope as ah,addExceptionTypeValue as ai,addExceptionMechanism as aj,captureException as ak,isErrorEvent as al,isDOMError as am,isDOMException as an,isError as ao,isPlainObject as ap,isEvent as aq,getCurrentHub as ar,extractExceptionKeysForMessage as as,htmlTreeAsString as at,safeJoin as au,isPrimitive as av,getLocationHref as aw,addGlobalEventProcessor as ax,React as ay,I$a as az,baseIteratee as b,URL_COURSE_DESCRIPTION as b$,useAppDispatch as b0,useAppSelector as b1,useSession as b2,communityActions as b3,useCourse as b4,body14 as b5,body16 as b6,body15 as b7,getAugmentedNamespace as b8,propTypesExports as b9,UtilModalContent as bA,B$1 as bB,koreanLocale as bC,useQueryClient as bD,c$5 as bE,n$7 as bF,faCircleExclamation as bG,p$6 as bH,closeAllModals as bI,useDisclosure as bJ,sr$3 as bK,debounce as bL,commonjsGlobal$1 as bM,isRecordType as bN,has$1 as bO,last$1 as bP,ResponseStatus as bQ,queryString as bR,usePlayerContext as bS,noteActions as bT,Overlay as bU,head$1 as bV,useV2VodSubtitleSuggestionCreateMutation as bW,API_ENDPOINT as bX,T$3 as bY,useVodSubtitle as bZ,secondsToHHmmss as b_,reactDomExports as ba,getDefaultExportFromCjs as bb,useScreen as bc,TAB_ASIDE_Z_INDEX as bd,header22 as be,useModals as bf,useEvent$2 as bg,UtilModal as bh,m$5 as bi,colors as bj,BasicModal as bk,styleResetButton as bl,header18 as bm,styleOutlinedButton as bn,styleGray800Button as bo,isEmpty as bp,ApiError as bq,styleCommonButton as br,A$8 as bs,useSearchParams as bt,appConfig as bu,LogoLoading as bv,useQueryErrorResetBoundary as bw,useFirstMountState as bx,useMoveUnit as by,styleModalWrapper as bz,arrayMap as c,queryString$1 as c$,URL_CARTS as c0,useForbiddenModal as c1,useAlertModal as c2,useMediaQuery as c3,queries as c4,faCheckCircle as c5,header20 as c6,header24 as c7,t$3 as c8,URL_COURSE_DASHBOARD as c9,randomId as cA,Fragment$1 as cB,_extends$3 as cC,getStylesRef as cD,packSx as cE,Popover as cF,getSystemStyles as cG,CloseButton as cH,sizes$6 as cI,Input as cJ,getDefaultZIndex as cK,keyframes as cL,GROUP_POSITIONS as cM,Yf as cN,MANTINE_COLORS as cO,vt$2 as cP,Loader as cQ,_inheritsLoose$1 as cR,_extends as cS,infiniteQueryBehavior as cT,hasNextPage as cU,hasPreviousPage as cV,QueryObserver as cW,parseQueryArgs as cX,useBaseQuery as cY,fetcher as cZ,useV2CourseFaqQuery as c_,useReviewModal as ca,W as cb,styleLogoLoading as cc,baseFindIndex as cd,root$1 as ce,toNumber as cf,toInteger as cg,toString$8 as ch,baseClone as ci,baseFor$1 as cj,isObjectLike as ck,baseGetTag as cl,constant as cm,Set$2 as cn,setToArray as co,SetCache as cp,cacheHas as cq,useReducedMotion as cr,useWindowEvent as cs,createSafeContext as ct,useId$1 as cu,useUncontrolled as cv,createScopedKeydownHandler as cw,UnstyledButton as cx,mergeRefs as cy,extractSystemStyles as cz,arrayFilter as d,em as d$,ActionIcon as d0,Button as d1,Group as d2,Menu as d3,ReactDOM as d4,useMutation as d5,useV2CourseIdSkillTagQuery as d6,useV2ChatCreateMutation as d7,useV2QuestionCreateMutation as d8,useV2CommentChatIdCreateMutation as d9,useQuery as dA,useV2NoteQuery as dB,useV2NoteCreateMutation as dC,useV2NoteIdDeleteMutation as dD,useV2NoteIdUpdateMutation as dE,useV1CartCreateMutation as dF,URL_VOUCHER as dG,useV2CourseIdPaymentInfoQuery as dH,useUpdateCurrentTime as dI,useV2UnitCompleteUpdateMutation as dJ,useRecommendReviewModal as dK,useCompleteModal as dL,isOver as dM,openModal as dN,za$1 as dO,x$8 as dP,f$5 as dQ,getUserSetting as dR,videoActions as dS,useSubtitleSizeByScreenWidth as dT,styleSubtitleText as dU,getShaka as dV,getSrc as dW,H$7 as dX,PlayerWrapper as dY,ir$3 as dZ,getBreakpointValue as d_,useV2ChatIdQuery as da,y$6 as db,URL_SIGNIN as dc,useV2ReCommentIdDeleteMutation as dd,produce as de,useV2ReCommentIdUpdateMutation as df,useV2ReactionReCommentIdUpdateMutation as dg,useV2ReCommentCreateMutation as dh,useV2CommentChatDeleteMutation as di,useV2CommentChatUpdateMutation as dj,useV2ReactionCommentIdUpdateMutation as dk,useV2ReactionPostIdUpdateMutation as dl,useV2QuestionIdQuery as dm,useV2BookmarkQuestionIdUpdateMutation as dn,useV2VoteQuestionIdCreateMutation as dp,useV2ChatIdUpdateMutation as dq,useV2CommentQuestionIdCreateMutation as dr,fetchV2CommentId as ds,useV2CommentQuestionDeleteMutation as dt,useV2CommentQuestionUpdateMutation as du,useV2VoteCommentIdCreateMutation as dv,useV2QuestionIdUpdateMutation as dw,useV2UnitQuery as dx,useV2UnitAttachmentQuery as dy,isPlainObject$4 as dz,baseFlatten as e,Global as e0,FULLPAGE_MODAL_KEY as e1,MODAL_Z_INDEX as e2,useDispatch as e3,faBookmark as e4,faHeart as e5,find$1 as e6,styleMobileVideoContent as e7,baseAssignValue as f,getTag$1 as g,baseExtremum as h,isArrayLike as i,isObject$g as j,keys$1 as k,castPath as l,mapToArray as m,isIndex as n,assignValue as o,baseGet as p,getAllKeysIn as q,isSymbol$3 as r,identity$1 as s,toKey as t,baseUnary as u,isIterateeCall as v,toFinite as w,reactExports as x,isBrowser as y,on$2 as z};
//# sourceMappingURL=index-9c79a62f.js.map
